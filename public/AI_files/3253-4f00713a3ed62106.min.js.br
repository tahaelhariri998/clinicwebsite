"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="b3b0f576-c170-548c-b989-a141433507fb")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[3253],{10199:(e,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AutoLayout=r.styleForAutoLayout=void 0;let a=n(358932),i=n(411855),o=n(545977),s=n(229009),l=n(539321),c=n(450311),d=n(478469);function u(e,r,n){let{style:a,overlayStyle:i,wrapperStyle:o}=(0,s.styleForFrame)(e,r,n);return{style:Object.assign(Object.assign(Object.assign({},a),(0,l.getParentLayout)(e)),(0,l.getVisibility)(e)),overlayStyle:i,wrapperStyle:o}}r.styleForAutoLayout=u,r.AutoLayout=i.forwardRef(function(e,r){let{attributes:n,children:l}=e,m=(0,a.__rest)(e,["attributes","children"]),p=i.useContext(o.ParentContext);(0,o.warnInvalidConstraints)(Object.assign(Object.assign({},m),{parent:p}));let h=(0,d.normalizeProps)(Object.assign(Object.assign({},(0,c.getDefaultAutoLayoutProps)()),m)),_=(0,o.getInvalidFillParentCheckerRef)(Object.assign(Object.assign({},h),{parent:p})),g=u(h,p,i.Children.count(l)>0);return i.createElement(o.ParentContext.Provider,{value:{type:"autolayout",props:h}},(0,s.domNodeFromFrame)({figmaLayerName:h.name,styles:g,attributes:n,children:l,ref:(0,o.mergeRefs)([_,r])}))})},778883:(e,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.applyMatrixToPoint=r.roundBoundingBox=r.roundTransform=r.isRotated=r.getRelativeBoundsAndRotation=r.skipPosition=r.rotatePoint=r.multiply=r.getCenteredRotation=r.flipVertical=r.isFlippedVertical=r.getAngleDeg=r.getAngle=void 0;let a=n(713261);function i(e){let r=e[0][0];return Math.atan2(e[0][1],r)}function o(e,r){let[[n,a,i],[o,s,l]]=e,[[c,d,u],[m,p,h]]=r;return[[n*c+a*m,n*d+a*p,n*u+a*h+i],[o*c+s*m,o*d+s*p,o*u+s*h+l]]}function s(e,r){let[[n,a,i],[o,s,l]]=e,[c,d]=r;return[n*c+a*d+i,o*c+s*d+l]}function l(e){let[[r,n],[a,i]]=e;return[[r,n,0],[a,i,0]]}r.getAngle=i,r.getAngleDeg=function(e){return i(e)*(180/Math.PI)},r.isFlippedVertical=function(e){let[[r,n],[a,i]]=e;return r*i-n*a<0},r.flipVertical=function(e){return o([[1,0,0],[0,-1,0]],e)},r.getCenteredRotation=function(e,r,n){let a=e*Math.PI/180;return o([[1,0,r/2],[0,1,n/2]],o([[Math.cos(a),Math.sin(a),0],[-Math.sin(a),Math.cos(a),0]],[[1,0,-r/2],[0,1,-n/2]]))},r.multiply=o,r.rotatePoint=s,r.skipPosition=l,r.getRelativeBoundsAndRotation=function(e){let{width:r,height:n}=e,a=o([[1,0,r/2],[0,1,n/2]],o(l(e.relativeTransform),[[1,0,-r/2],[0,1,-n/2]])),[i,c]=s(a,[0,0]),[d,u]=s(a,[0,n]),[m,p]=s(a,[r,0]),[h,_]=s(a,[r,n]),g=Math.min(i,d,m,h),f=Math.min(c,u,p,_),E=Math.max(i,d,m,h)-g,y=Math.max(c,u,p,_)-f,b=o([[1,0,(E-r)/2],[0,1,(y-n)/2]],a),[[,,I],[,,T]]=b;return{relativeBoundingBox:{x:e.relativeTransform[0][2]-I,y:e.relativeTransform[1][2]-T,width:E,height:y},rotationOnlyTransform:b,relativeTransform:e.relativeTransform}},r.isRotated=function(e){if(!e.relativeTransform)return!1;let r=e.relativeTransform[0][0],n=e.relativeTransform[0][1],a=e.relativeTransform[1][0],i=e.relativeTransform[1][1];return!(r-1<1e-5&&n-0<1e-5&&a-0<1e-5&&i-1<1e-5)},r.roundTransform=function(e){return[[(0,a.round)(e[0][0],5),(0,a.round)(e[0][1],5),(0,a.round)(e[0][2],5)],[(0,a.round)(e[1][0],5),(0,a.round)(e[1][1],5),(0,a.round)(e[1][2],5)]]},r.roundBoundingBox=function(e){return{x:(0,a.round)(e.x),y:(0,a.round)(e.y),width:(0,a.round)(e.width),height:(0,a.round)(e.height)}},r.applyMatrixToPoint=function(e,r){return[r[0]*e[0][0]+r[1]*e[0][1]+e[0][2],r[0]*e[1][0]+r[1]*e[1][1]+e[1][2]]}},288585:(e,r,n)=>{var a;let i=n(8785);!function(e){e[e.STARTING=0]="STARTING",e[e.FRONTMATTER=1]="FRONTMATTER",e[e.BODY=2]="BODY",e[e.FOOTER=3]="FOOTER"}(a||(a={}))},295626:(e,r,n)=>{var a,i;Object.defineProperty(r,"__esModule",{value:!0}),function(e,r){for(var n in r)Object.defineProperty(e,n,{enumerable:!0,get:r[n]})}(r,{ProductType:function(){return i},RewriteTone:function(){return a},rewriteTextRequestSchema:function(){return d},rewriteTextResponseSchema:function(){return u}});let o=n(44410);!function(e){e.NEUTRAL="neutral",e.CASUAL="casual",e.PROFESSIONAL="professional",e.CONCISE="concise",e.EXPANDED="expanded"}(a||(a={})),function(e){e.DESIGN="design",e.SLIDES="slides"}(i||(i={}));let s=o.z.object({id:o.z.string(),text:o.z.string()}).array(),l=o.z.object({tone:o.z.nativeEnum(a),weight:o.z.number()}).array(),c=o.z.enum(["design","slides"]),d=o.z.union([o.z.object({text:o.z.string(),tones:l,productType:c.optional()}),o.z.object({texts:s,tones:l,productType:c.optional()})]),u=o.z.object({id:o.z.string().optional(),delta:o.z.string()})},519216:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"schemaStr",{enumerable:!0,get:function(){return n}});let n="package Fig;enum MessageType{JOIN_START=0;NODE_CHANGES=1;USER_CHANGES=2;JOIN_END=3;SIGNAL=4;STYLE=5;STYLE_SET=6;JOIN_START_SKIP_RELOAD=7;NOTIFY_SHOULD_UPGRADE=8;UPGRADE_DONE=9;UPGRADE_REFRESH=10;SCENE_GRAPH_QUERY=11;SCENE_GRAPH_REPLY=12;DIFF=13;CLIENT_BROADCAST=14;JOIN_START_JOURNALED=15;STREAM_START=16;STREAM_END=17;INTERACTIVE_SLIDE_CHANGE=18;RECONNECT_SCENE_GRAPH_QUERY=19;RECONNECT_SCENE_GRAPH_REPLY=20;JOIN_END_INCREMENTAL_RECONNECT=21;NODE_STATUS_CHANGE=22;}enum Axis{X=0;Y=1;}enum Access{READ_ONLY=0;READ_WRITE=1;}enum NodePhase{CREATED=0;REMOVED=1;}enum WindingRule{NONZERO=0;ODD=1;}enum NodeType{NONE=0;DOCUMENT=1;CANVAS=2;GROUP=3;FRAME=4;BOOLEAN_OPERATION=5;VECTOR=6;STAR=7;LINE=8;ELLIPSE=9;RECTANGLE=10;REGULAR_POLYGON=11;ROUNDED_RECTANGLE=12;TEXT=13;SLICE=14;SYMBOL=15;INSTANCE=16;STICKY=17;SHAPE_WITH_TEXT=18;CONNECTOR=19;CODE_BLOCK=20;WIDGET=21;STAMP=22;MEDIA=23;HIGHLIGHT=24;SECTION=25;SECTION_OVERLAY=26;WASHI_TAPE=27;VARIABLE=28;TABLE=29;TABLE_CELL=30;VARIABLE_SET=31;SLIDE=32;ASSISTED_LAYOUT=33;INTERACTIVE_SLIDE_ELEMENT=34;VARIABLE_OVERRIDE=35;MODULE=36;SLIDE_GRID=37;SLIDE_ROW=38;RESPONSIVE_SET=39;CODE_COMPONENT=40;TEXT_PATH=41;CODE_INSTANCE=42;CODE_LIBRARY=43;CODE_FILE=44;CODE_LAYER=45;}enum ShapeWithTextType{SQUARE=0;ELLIPSE=1;DIAMOND=2;TRIANGLE_UP=3;TRIANGLE_DOWN=4;ROUNDED_RECTANGLE=5;PARALLELOGRAM_RIGHT=6;PARALLELOGRAM_LEFT=7;ENG_DATABASE=8;ENG_QUEUE=9;ENG_FILE=10;ENG_FOLDER=11;TRAPEZOID=12;PREDEFINED_PROCESS=13;SHIELD=14;DOCUMENT_SINGLE=15;DOCUMENT_MULTIPLE=16;MANUAL_INPUT=17;HEXAGON=18;CHEVRON=19;PENTAGON=20;OCTAGON=21;STAR=22;PLUS=23;ARROW_LEFT=24;ARROW_RIGHT=25;SUMMING_JUNCTION=26;OR=27;SPEECH_BUBBLE=28;INTERNAL_STORAGE=29;}enum BlendMode{PASS_THROUGH=0;NORMAL=1;DARKEN=2;MULTIPLY=3;LINEAR_BURN=4;COLOR_BURN=5;LIGHTEN=6;SCREEN=7;LINEAR_DODGE=8;COLOR_DODGE=9;OVERLAY=10;SOFT_LIGHT=11;HARD_LIGHT=12;DIFFERENCE=13;EXCLUSION=14;HUE=15;SATURATION=16;COLOR=17;LUMINOSITY=18;}enum PaintType{SOLID=0;GRADIENT_LINEAR=1;GRADIENT_RADIAL=2;GRADIENT_ANGULAR=3;GRADIENT_DIAMOND=4;IMAGE=5;EMOJI=6;VIDEO=7;}enum ImageScaleMode{STRETCH=0;FIT=1;FILL=2;TILE=3;}enum EffectType{INNER_SHADOW=0;DROP_SHADOW=1;FOREGROUND_BLUR=2;BACKGROUND_BLUR=3;REPEAT=4;SYMMETRY=5;}enum TextCase{ORIGINAL=0;UPPER=1;LOWER=2;TITLE=3;SMALL_CAPS=4;SMALL_CAPS_FORCED=5;}enum TextDecoration{NONE=0;UNDERLINE=1;STRIKETHROUGH=2;}enum TextDecorationStyle{SOLID=0;DOTTED=1;WAVY=2;}enum LeadingTrim{NONE=0;CAP_HEIGHT=1;}enum NumberUnits{RAW=0;PIXELS=1;PERCENT=2;}enum ConstraintType{MIN=0;CENTER=1;MAX=2;STRETCH=3;SCALE=4;FIXED_MIN=5;FIXED_MAX=6;}enum StrokeAlign{CENTER=0;INSIDE=1;OUTSIDE=2;}enum StrokeCap{NONE=0;ROUND=1;SQUARE=2;ARROW_LINES=3;ARROW_EQUILATERAL=4;DIAMOND_FILLED=5;TRIANGLE_FILLED=6;HIGHLIGHT=7;WASHI_TAPE_1=8;WASHI_TAPE_2=9;WASHI_TAPE_3=10;WASHI_TAPE_4=11;WASHI_TAPE_5=12;WASHI_TAPE_6=13;CIRCLE_FILLED=14;}enum StrokeJoin{MITER=0;BEVEL=1;ROUND=2;}enum BooleanOperation{UNION=0;INTERSECT=1;SUBTRACT=2;XOR=3;}enum TextAlignHorizontal{LEFT=0;CENTER=1;RIGHT=2;JUSTIFIED=3;}enum TextAlignVertical{TOP=0;CENTER=1;BOTTOM=2;}enum MouseCursor{DEFAULT=0;CROSSHAIR=1;EYEDROPPER=2;HAND=3;PAINT_BUCKET=4;PEN=5;PENCIL=6;MARKER=7;ERASER=8;HIGHLIGHTER=9;LASSO=10;}enum VectorMirror{NONE=0;ANGLE=1;ANGLE_AND_LENGTH=2;}enum DashMode{CLIP=0;STRETCH=1;}enum ImageType{PNG=0;JPEG=1;SVG=2;PDF=3;}enum ExportConstraintType{CONTENT_SCALE=0;CONTENT_WIDTH=1;CONTENT_HEIGHT=2;}enum LayoutGridType{MIN=0;CENTER=1;STRETCH=2;MAX=3;}enum LayoutGridPattern{STRIPES=0;GRID=1;}enum TextAutoResize{NONE=0;WIDTH_AND_HEIGHT=1;HEIGHT=2;}enum TextTruncation{DISABLED=0;ENDING=1;}enum StyleSetType{PERSONAL=0;TEAM=1;CUSTOM=2;FREQUENCY=3;TEMPORARY=4;}enum StyleSetContentType{SOLID=0;GRADIENT=1;IMAGE=2;}enum StackMode{NONE=0;HORIZONTAL=1;VERTICAL=2;GRID=3;}enum StackAlign{MIN=0;CENTER=1;MAX=2;BASELINE=3;}enum StackCounterAlign{MIN=0;CENTER=1;MAX=2;STRETCH=3;AUTO=4;BASELINE=5;}enum StackJustify{MIN=0;CENTER=1;MAX=2;SPACE_EVENLY=3;SPACE_BETWEEN=4;}enum StackSize{FIXED=0;RESIZE_TO_FIT=1;RESIZE_TO_FIT_WITH_IMPLICIT_SIZE=2;}enum StackPositioning{AUTO=0;ABSOLUTE=1;}enum StackWrap{NO_WRAP=0;WRAP=1;}enum StackCounterAlignContent{AUTO=0;SPACE_BETWEEN=1;}enum ConnectionType{NONE=0;INTERNAL_NODE=1;URL=2;BACK=3;CLOSE=4;SET_VARIABLE=5;UPDATE_MEDIA_RUNTIME=6;CONDITIONAL=7;SET_VARIABLE_MODE=8;OBJECT_ANIMATION=9;}enum InteractionType{ON_CLICK=0;AFTER_TIMEOUT=1;MOUSE_IN=2;MOUSE_OUT=3;ON_HOVER=4;MOUSE_DOWN=5;MOUSE_UP=6;ON_PRESS=7;NONE=8;DRAG=9;ON_KEY_DOWN=10;ON_VOICE=11;ON_MEDIA_HIT=12;ON_MEDIA_END=13;MOUSE_ENTER=14;MOUSE_LEAVE=15;}enum TransitionType{INSTANT_TRANSITION=0;DISSOLVE=1;FADE=2;SLIDE_FROM_LEFT=3;SLIDE_FROM_RIGHT=4;SLIDE_FROM_TOP=5;SLIDE_FROM_BOTTOM=6;PUSH_FROM_LEFT=7;PUSH_FROM_RIGHT=8;PUSH_FROM_TOP=9;PUSH_FROM_BOTTOM=10;MOVE_FROM_LEFT=11;MOVE_FROM_RIGHT=12;MOVE_FROM_TOP=13;MOVE_FROM_BOTTOM=14;SLIDE_OUT_TO_LEFT=15;SLIDE_OUT_TO_RIGHT=16;SLIDE_OUT_TO_TOP=17;SLIDE_OUT_TO_BOTTOM=18;MOVE_OUT_TO_LEFT=19;MOVE_OUT_TO_RIGHT=20;MOVE_OUT_TO_TOP=21;MOVE_OUT_TO_BOTTOM=22;MAGIC_MOVE=23;SMART_ANIMATE=24;SCROLL_ANIMATE=25;}enum EasingType{IN_CUBIC=0;OUT_CUBIC=1;INOUT_CUBIC=2;LINEAR=3;IN_BACK_CUBIC=4;OUT_BACK_CUBIC=5;INOUT_BACK_CUBIC=6;CUSTOM_CUBIC=7;SPRING=8;GENTLE_SPRING=9;CUSTOM_SPRING=10;SPRING_PRESET_ONE=11;SPRING_PRESET_TWO=12;SPRING_PRESET_THREE=13;}enum ScrollDirection{NONE=0;HORIZONTAL=1;VERTICAL=2;BOTH=3;}enum ScrollContractedState{EXPANDED=0;CONTRACTED=1;}struct GUID{uint sessionID;uint localID;}struct Color{float r;float g;float b;float a;}struct Vector{float x;float y;}struct Rect{float x;float y;float w;float h;}struct ColorStop{Color color;float position;}message ColorStopVar{Color color=1;VariableData colorVar=2;float position=3;}struct Matrix{float m00;float m01;float m02;float m10;float m11;float m12;}struct ParentIndex{GUID guid;string position;}struct Number{float value;NumberUnits units;}struct FontName{string family;string style;string postscript;}enum FontVariantNumericFigure{NORMAL=0;LINING=1;OLDSTYLE=2;}enum FontVariantNumericSpacing{NORMAL=0;PROPORTIONAL=1;TABULAR=2;}enum FontVariantNumericFraction{NORMAL=0;DIAGONAL=1;STACKED=2;}enum FontVariantCaps{NORMAL=0;SMALL=1;ALL_SMALL=2;PETITE=3;ALL_PETITE=4;UNICASE=5;TITLING=6;}enum FontVariantPosition{NORMAL=0;SUB=1;SUPER=2;}enum FontStyle{NORMAL=0;ITALIC=1;}enum SemanticWeight{NORMAL=0;BOLD=1;}enum SemanticItalic{NORMAL=0;ITALIC=1;}enum CodeSnapshotState{INITIAL=0;SNAPSHOTTING=1;OK=2;SNAPSHOT_ERROR=3;}enum LockMode{NONE=0;ALL=1;BACKGROUND_ONLY=2;}enum OpenTypeFeature{PCAP=0;C2PC=1;CASE=2;CPSP=3;TITL=4;UNIC=5;ZERO=6;SINF=7;ORDN=8;AFRC=9;DNOM=10;NUMR=11;LIGA=12;CLIG=13;DLIG=14;HLIG=15;RLIG=16;AALT=17;CALT=18;RCLT=19;SALT=20;RVRN=21;VERT=22;SWSH=23;CSWH=24;NALT=25;CCMP=26;STCH=27;HIST=28;SIZE=29;ORNM=30;ITAL=31;RAND=32;DTLS=33;FLAC=34;MGRK=35;SSTY=36;KERN=37;FWID=38;HWID=39;HALT=40;TWID=41;QWID=42;PWID=43;JUST=44;LFBD=45;OPBD=46;RTBD=47;PALT=48;PKNA=49;LTRA=50;LTRM=51;RTLA=52;RTLM=53;ABRV=54;ABVM=55;ABVS=56;VALT=57;VHAL=58;BLWF=59;BLWM=60;BLWS=61;AKHN=62;CJCT=63;CFAR=64;CPCT=65;CURS=66;DIST=67;EXPT=68;FALT=69;FINA=70;FIN2=71;FIN3=72;HALF=73;HALN=74;HKNA=75;HNGL=76;HOJO=77;INIT=78;ISOL=79;JP78=80;JP83=81;JP90=82;JP04=83;LJMO=84;LOCL=85;MARK=86;MEDI=87;MED2=88;MKMK=89;NLCK=90;NUKT=91;PREF=92;PRES=93;VPAL=94;PSTF=95;PSTS=96;RKRF=97;RPHF=98;RUBY=99;SMPL=100;TJMO=101;TNAM=102;TRAD=103;VATU=104;VJMO=105;VKNA=106;VKRN=107;VRTR=108;VRT2=109;SS01=110;SS02=111;SS03=112;SS04=113;SS05=114;SS06=115;SS07=116;SS08=117;SS09=118;SS10=119;SS11=120;SS12=121;SS13=122;SS14=123;SS15=124;SS16=125;SS17=126;SS18=127;SS19=128;SS20=129;CV01=130;CV02=131;CV03=132;CV04=133;CV05=134;CV06=135;CV07=136;CV08=137;CV09=138;CV10=139;CV11=140;CV12=141;CV13=142;CV14=143;CV15=144;CV16=145;CV17=146;CV18=147;CV19=148;CV20=149;CV21=150;CV22=151;CV23=152;CV24=153;CV25=154;CV26=155;CV27=156;CV28=157;CV29=158;CV30=159;CV31=160;CV32=161;CV33=162;CV34=163;CV35=164;CV36=165;CV37=166;CV38=167;CV39=168;CV40=169;CV41=170;CV42=171;CV43=172;CV44=173;CV45=174;CV46=175;CV47=176;CV48=177;CV49=178;CV50=179;CV51=180;CV52=181;CV53=182;CV54=183;CV55=184;CV56=185;CV57=186;CV58=187;CV59=188;CV60=189;CV61=190;CV62=191;CV63=192;CV64=193;CV65=194;CV66=195;CV67=196;CV68=197;CV69=198;CV70=199;CV71=200;CV72=201;CV73=202;CV74=203;CV75=204;CV76=205;CV77=206;CV78=207;CV79=208;CV80=209;CV81=210;CV82=211;CV83=212;CV84=213;CV85=214;CV86=215;CV87=216;CV88=217;CV89=218;CV90=219;CV91=220;CV92=221;CV93=222;CV94=223;CV95=224;CV96=225;CV97=226;CV98=227;CV99=228;}struct ExportConstraint{ExportConstraintType type;float value;}struct GUIDMapping{GUID from;GUID to;}struct Blob{byte[]bytes;}message Image{byte[]hash=1;string name=2;uint dataBlob=3;}message Video{byte[]hash=1;string s3Url=2;}message PasteSource{string srcFile=1;GUID srcNode=2;}struct FilterColorAdjust{float tint;float shadows;float highlights;float detail;float exposure;float vignette;float temperature;float vibrance;}message PaintFilterMessage{float tint=1;float shadows=2;float highlights=3;float detail=4[deprecated];float exposure=5;float vignette=6[deprecated];float temperature=7;float vibrance=8;float contrast=9;float brightness=10[deprecated];}message Paint{PaintType type=1;Color color=2;float opacity=3;bool visible=4;BlendMode blendMode=5;ColorStop[]stops=6;Matrix transform=7;Image image=8;Image imageThumbnail=9;Image animatedImage=16;uint animationFrame=17;ImageScaleMode imageScaleMode=10;bool imageShouldColorManage=22;float rotation=11;float scale=12;FilterColorAdjust filterColorAdjust=13[deprecated];PaintFilterMessage paintFilter=14;uint[]emojiCodePoints=15;Video video=18;uint originalImageWidth=19;uint originalImageHeight=20;VariableData colorVar=21;ColorStopVar[]stopsVar=23;string thumbHashBase64=24[deprecated];byte[]thumbHash=25;}message FontMetaData{FontName key=1;float fontLineHeight=2;byte[]fontDigest=3;FontStyle fontStyle=4;int fontWeight=5;}message FontVariation{uint axisTag=1;string axisName=2;float value=3;}message TextData{string characters=1;uint[]characterStyleIDs=2;NodeChange[]styleOverrideTable=3;TextLineData[]lines=12;uint layoutVersion=8[deprecated];FontName[]fallbackFonts=10[deprecated];float minContentHeight=17[deprecated];Vector layoutSize=4[deprecated];Baseline[]baselines=5[deprecated];Glyph[]glyphs=6[deprecated];Decoration[]decorations=7[deprecated];Blockquote[]blockquotes=16[deprecated];FontMetaData[]fontMetaData=9[deprecated];HyperlinkBox[]hyperlinkBoxes=11[deprecated];int truncationStartIndex=13[deprecated];float truncatedHeight=14[deprecated];float[]logicalIndexToCharacterOffsetMap=15[deprecated];MentionBox[]mentionBoxes=18[deprecated];DerivedTextLineData[]derivedLines=19[deprecated];}message DerivedTextData{Vector layoutSize=1;Baseline[]baselines=2;Glyph[]glyphs=3;Decoration[]decorations=4;Blockquote[]blockquotes=5;FontMetaData[]fontMetaData=6;HyperlinkBox[]hyperlinkBoxes=7;int truncationStartIndex=8;float truncatedHeight=9;float[]logicalIndexToCharacterOffsetMap=10;MentionBox[]mentionBoxes=11;DerivedTextLineData[]derivedLines=12;}message HyperlinkBox{Rect bounds=1;string url=2;GUID guid=3;int hyperlinkID=4;}message MentionBox{Rect bounds=1;uint startIndex=2;uint endIndex=3;bool isValid=4;uint mentionKey=5;}message Baseline{Vector position=1;float width=2;float lineY=3;float lineHeight=4;float lineAscent=7;float ignoreLeadingTrim=8;uint firstCharacter=5;uint endCharacter=6;}message Glyph{uint commandsBlob=1;Vector position=2;uint styleID=3;float fontSize=4;uint firstCharacter=5;float advance=6;uint[]emojiCodePoints=7;EmojiImageSet emojiImageSet=8;float rotation=9;}message Decoration{Rect[]rects=1;uint styleID=2;}message Blockquote{Rect verticalBar=1;Rect quoteMarkBounds=2;uint styleID=3;}message VectorData{uint vectorNetworkBlob=1;Vector normalizedSize=2;NodeChange[]styleOverrideTable=3;}message TextPathStart{float tValue=1;bool forward=2;}message GUIDPath{GUID[]guids=1;}message SymbolData{GUID symbolID=1;NodeChange[]symbolOverrides=2;float uniformScaleFactor=3;}message GUIDPathMapping{GUID id=1;GUIDPath path=2;}message NodeGenerationData{NodeChange[]overrides=1;bool useFineGrainedSyncing=2;NodeChange[]diffOnlyRemovals=3;}message DerivedImmutableFrameData{NodeChange[]overrides=1;uint version=2;}message AssetIdMap{AssetIdEntry[]entries=1;}message AssetIdEntry{string assetKey=1;AssetId assetId=2;}message AssetRef{string key=1;string version=2;}message AssetId{GUID guid=1[deprecated];AssetRef assetRef=2[deprecated];StateGroupId stateGroupId=3;StyleId styleId=4;SymbolId symbolId=5;VariableID variableId=6;VariableSetID variableSetId=7;}message StateGroupId{GUID guid=1;AssetRef assetRef=2;}message StyleId{GUID guid=1;AssetRef assetRef=2;}message SymbolId{GUID guid=1;AssetRef assetRef=2;}message VariableID{GUID guid=1;AssetRef assetRef=2;}message VariableOverrideId{GUID guid=1;AssetRef assetRef=2;}message VariableSetID{GUID guid=1;AssetRef assetRef=2;}message ModuleId{GUID guid=1;AssetRef assetRef=2;}message ResponsiveSetId{GUID guid=1;AssetRef assetRef=2;}message ThemeID{GUID guid=1;AssetRef assetRef=2;}message CodeLibraryId{GUID guid=1;AssetRef assetRef=2;}message CodeFileId{GUID guid=1;AssetRef assetRef=2;}message CodeComponentId{GUID guid=1;AssetRef assetRef=2;}message ResponsiveTextStyleVariant{float minWidth=1;NodeChange fields=2;VariableData variableFontSize=3;VariableData variableLineHeight=4;VariableData variableLetterSpacing=5;VariableData variableParagraphSpacing=6;string name=7;}enum FlappType{POLL=0;EMBED=1;FACEPILE=2;ALIGNMENT=3;YOUTUBE=4;}message SlideThemeProps{string themeVersion=1;VariableSetID variableSetId=2;StyleId[]textStyleIds=3;bool isTextColorManuallySelected=4[deprecated];bool isBorderColorManuallySelected=5[deprecated];AssetRef subscribedThemeRef=6;uint schemaVersion=7;bool isGeneratedFromDesign=8;}message SlideThemeMap{SlideThemeMapEntry[]entries=1;}message SlideThemeMapEntry{ThemeID themeId=1;SlideThemeProps themeProps=2;}message SharedSymbolReference{string fileKey=1;GUID symbolID=2;string versionHash=3;GUIDPathMapping[]guidPathMappings=4;byte[]bytes=5;GUIDMapping[]libraryGUIDToSubscribingGUID=6[deprecated];string componentKey=7;GUIDPathMapping[]unflatteningMappings=8;bool isUnflattened=9;}message SharedComponentMasterData{string componentKey=1;GUIDPathMapping[]publishingGUIDPathToTeamLibraryGUID=2;bool isUnflattened=3;}message InstanceOverrideStash{GUIDPath overridePathOfSwappedInstance=1;string componentKey=2;NodeChange[]overrides=3;}message InstanceOverrideStashV2{GUIDPath overridePathOfSwappedInstance=1;GUID localSymbolID=2;NodeChange[]overrides=3;}message Effect{EffectType type=1;Color color=2;Vector offset=3;float radius=4;bool visible=5;BlendMode blendMode=6;float spread=7;bool showShadowBehindNode=8;VariableData radiusVar=9;VariableData colorVar=10;VariableData spreadVar=11;VariableData xVar=12;VariableData yVar=13;}message TransitionInfo{TransitionType type=1;float duration=2;}enum PrototypeDeviceType{NONE=0;PRESET=1;CUSTOM=2;PRESENTATION=3;}enum DeviceRotation{NONE=0;CCW_90=1;}message PrototypeDevice{PrototypeDeviceType type=1;Vector size=2;string presetIdentifier=3;DeviceRotation rotation=4;}enum OverlayPositionType{CENTER=0;TOP_LEFT=1;TOP_CENTER=2;TOP_RIGHT=3;BOTTOM_LEFT=4;BOTTOM_CENTER=5;BOTTOM_RIGHT=6;MANUAL=7;}enum OverlayBackgroundInteraction{NONE=0;CLOSE_ON_CLICK_OUTSIDE=1;}enum OverlayBackgroundType{NONE=0;SOLID_COLOR=1;}message OverlayBackgroundAppearance{OverlayBackgroundType backgroundType=1;Color backgroundColor=2;}enum NavigationType{NAVIGATE=0;OVERLAY=1;SWAP=2;SWAP_STATE=3;SCROLL_TO=4;}enum ExportColorProfile{DOCUMENT=0;SRGB=1;DISPLAY_P3_V4=2;}message ExportSettings{string suffix=1;ImageType imageType=2;ExportConstraint constraint=3;bool svgDataName=4;ExportSVGIDMode svgIDMode=5;bool svgOutlineText=6;bool contentsOnly=7;bool svgForceStrokeMasks=8;bool useAbsoluteBounds=9;ExportColorProfile colorProfile=10;float quality=11;bool useBicubicSampler=12;}enum ExportSVGIDMode{IF_NEEDED=0;ALWAYS=1;}message LayoutGrid{LayoutGridType type=1;Axis axis=2;bool visible=3;int numSections=4;float offset=5;float sectionSize=6;float gutterSize=7;Color color=8;LayoutGridPattern pattern=9;VariableData numSectionsVar=10;VariableData offsetVar=11;VariableData sectionSizeVar=12;VariableData gutterSizeVar=13;}message Guide{Axis axis=1;float offset=2;GUID guid=3;}message Path{WindingRule windingRule=1;uint commandsBlob=2;uint styleID=3;}enum StyleType{NONE=0;FILL=1;STROKE=2;TEXT=3;EFFECT=4;EXPORT=5;GRID=6;}message SharedStyleReference{string styleKey=1;string versionHash=2;}message SharedStyleMasterData{string styleKey=1;string sortPosition=2;string fileKey=3;}enum ScrollBehavior{SCROLLS=0;FIXED_WHEN_CHILD_OF_SCROLLING_FRAME=1;STICKY_SCROLLS=2;}message ArcData{float startingAngle=1;float endingAngle=2;float innerRadius=3;}message SymbolLink{string uri=1;string displayName=2;string displayText=3;}message PluginData{string pluginID=1;string value=2;string key=3;}message PluginRelaunchData{string pluginID=1;string message=2;string command=3;bool isDeleted=4;}message MultiplayerFieldVersion{uint counter=1;uint sessionID=2;}enum ConnectorMagnet{NONE=0;AUTO=1;TOP=2;LEFT=3;BOTTOM=4;RIGHT=5;CENTER=6;AUTO_HORIZONTAL=7;EDGE=8;ABSOLUTE=9;}message ConnectorEndpoint{GUID endpointNodeID=1;Vector position=2;ConnectorMagnet magnet=3;}message ConnectorControlPoint{Vector position=1;Vector axis=2;}enum ConnectorTextSection{MIDDLE_TO_START=0;MIDDLE_TO_END=1;}enum ConnectorOffAxisOffset{NONE=0;ABOVE=1;BELOW=2;}message ConnectorTextMidpoint{ConnectorTextSection section=1;float offset=2;ConnectorOffAxisOffset offAxisOffset=3;}enum ConnectorLineStyle{ELBOWED=0;STRAIGHT=1;CURVED=2;}enum ConnectorType{MANUAL=0;DIAGRAM=1;}enum AnnotationPropertyType{FILL=0;STROKE=1;WIDTH=2;HEIGHT=3;MIN_WIDTH=4;MIN_HEIGHT=5;MAX_WIDTH=6;MAX_HEIGHT=7;STROKE_WIDTH=8;CORNER_RADIUS=9;EFFECT=10;TEXT_STYLE=11;TEXT_ALIGN_HORIZONTAL=12;FONT_FAMILY=13;FONT_SIZE=14;FONT_WEIGHT=15;LINE_HEIGHT=16;LETTER_SPACING=17;STACK_SPACING=18;STACK_PADDING=19;STACK_MODE=20;STACK_ALIGNMENT=21;OPACITY=22;COMPONENT=23;FONT_STYLE=24;}message AnnotationProperty{AnnotationPropertyType type=1;}message Annotation{string label=1;AnnotationProperty[]properties=2;string labelV2=3;}enum AnnotationMeasurementNodeSide{TOP=0;BOTTOM=1;LEFT=2;RIGHT=3;}message AnnotationMeasurement{GUID id=1;GUID fromNode=2[deprecated];GUID toNode=3;AnnotationMeasurementNodeSide fromNodeSide=4;bool toSameSide=5;float innerOffsetRelative=6;float outerOffsetFixed=7;GUIDPath toNodeStablePath=8;string freeText=9;}message LibraryMoveInfo{string oldKey=1;string pasteFileKey=2;}message LibraryMoveHistoryItem{GUID sourceNodeId=1;string sourceComponentKey=2;}message DeveloperRelatedLink{string nodeId=1;string fileKey=2;string linkName=3;string linkUrl=4;}message WidgetPointer{GUID nodeId=1;}message EditInfo{string timestampIso8601=1;string userId=2;uint lastEditedAt=3;uint createdAt=4;}enum EditorType{DESIGN=0;WHITEBOARD=1;SLIDES=2;DEV_HANDOFF=3;SITES=4;COOPER=5;ILLUSTRATION=6;}enum MaskType{ALPHA=0;OUTLINE=1;LUMINANCE=2;}enum ModuleType{NONE=0;SINGLE_NODE=1;MULTI_NODE=2;}enum SectionStatus{NONE=0;BUILD=1;COMPLETED=2;}message SectionStatusInfo{SectionStatus status=1;uint lastUpdateUnixTimestamp=2;string description=3;string userId=4;SectionStatus prevStatus=5;}message NodeChange{GUID guid=1;uint guidTag=53[deprecated];NodePhase phase=2;uint phaseTag=54[deprecated];ParentIndex parentIndex=3;uint parentIndexTag=55[deprecated];NodeType type=4;uint typeTag=56[deprecated];string name=5;uint nameTag=57[deprecated];bool isPublishable=174;string description=318;LibraryMoveInfo libraryMoveInfo=256;LibraryMoveHistoryItem[]libraryMoveHistory=281;string key=319;AssetIdMap fileAssetIds=383;uint styleID=49;uint styleIDTag=101[deprecated];bool isSoftDeletedStyle=176;bool isNonUpdateable=177;bool isFillStyle=157[deprecated];bool isStrokeStyle=161[deprecated];bool isOverrideOverTextStyle=376;StyleType styleType=163;string styleDescription=191;string version=171;SharedStyleMasterData sharedStyleMasterData=172;SharedStyleReference sharedStyleReference=173;string userFacingVersion=399;string sortPosition=320;SharedStyleMasterData ojansSuperSecretNodeField=345[deprecated];SharedStyleMasterData sevMoonlitLilyData=348[deprecated];GUID inheritFillStyleID=158;GUID inheritStrokeStyleID=162;GUID inheritTextStyleID=167;GUID inheritExportStyleID=168;GUID inheritEffectStyleID=169;GUID inheritGridStyleID=170;GUID inheritFillStyleIDForStroke=185;StyleId styleIdForFill=332;StyleId styleIdForStrokeFill=333;StyleId styleIdForText=334;StyleId styleIdForEffect=335;StyleId styleIdForGrid=336;Paint[]backgroundPaints=193;GUID inheritFillStyleIDForBackground=194[deprecated];bool isStateGroup=225;StateGroupPropertyValueOrder[]stateGroupPropertyValueOrders=238;SharedSymbolReference sharedSymbolReference=122;bool isSymbolPublishable=123;GUIDPathMapping[]sharedSymbolMappings=124;string sharedSymbolVersion=126;SharedComponentMasterData sharedComponentMasterData=152;string symbolDescription=144;GUIDPathMapping[]unflatteningMappings=164;GUIDPathMapping[]forceUnflatteningMappings=228;string publishFile=214;string sourceLibraryKey=395;GUID publishID=215;string componentKey=216;bool isC2=217;string publishedVersion=218;string originComponentKey=252[deprecated];ComponentPropDef[]componentPropDefs=266;ComponentPropRef[]componentPropRefs=267;SymbolData symbolData=113;uint symbolDataTag=114[deprecated];NodeChange[]derivedSymbolData=125;bool nestedInstanceResizeEnabled=394;GUID overriddenSymbolID=143;ComponentPropAssignment[]componentPropAssignments=268;bool propsAreBubbled=305;InstanceOverrideStash[]overrideStash=248;InstanceOverrideStashV2[]overrideStashV2=250[deprecated];GUIDPath guidPath=111;uint guidPathTag=112[deprecated];int overrideLevel=321;ModuleType moduleType=382;float fontSize=21;uint fontSizeTag=73[deprecated];float paragraphIndent=22;uint paragraphIndentTag=74[deprecated];float paragraphSpacing=23;uint paragraphSpacingTag=75[deprecated];TextAlignHorizontal textAlignHorizontal=32;uint textAlignHorizontalTag=84[deprecated];TextAlignVertical textAlignVertical=33;uint textAlignVerticalTag=85[deprecated];TextCase textCase=34;uint textCaseTag=86[deprecated];TextDecoration textDecoration=35;uint textDecorationTag=87[deprecated];Number lineHeight=40;uint lineHeightTag=92[deprecated];FontName fontName=41;uint fontNameTag=93[deprecated];TextData textData=42;uint textDataTag=94[deprecated];DerivedTextData derivedTextData=359;bool fontVariantCommonLigatures=127;bool fontVariantContextualLigatures=128;bool fontVariantDiscretionaryLigatures=129;bool fontVariantHistoricalLigatures=130;bool fontVariantOrdinal=131;bool fontVariantSlashedZero=132;FontVariantNumericFigure fontVariantNumericFigure=133;FontVariantNumericSpacing fontVariantNumericSpacing=134;FontVariantNumericFraction fontVariantNumericFraction=135;FontVariantCaps fontVariantCaps=136;FontVariantPosition fontVariantPosition=137;Number letterSpacing=165;string fontVersion=202;LeadingTrim leadingTrim=322;bool hangingPunctuation=337;bool hangingList=339;int maxLines=351;ResponsiveTextStyleVariant[]responsiveTextStyleVariants=417;SectionStatus sectionStatus=352[deprecated];SectionStatusInfo sectionStatusInfo=355;uint textUserLayoutVersion=203;uint textExplicitLayoutVersion=396;OpenTypeFeature[]toggledOnOTFeatures=205;OpenTypeFeature[]toggledOffOTFeatures=206;Hyperlink hyperlink=223;Mention mention=340;FontVariation[]fontVariations=260;uint textBidiVersion=279;TextTruncation textTruncation=280;bool hasHadRTLText=292;EmojiImageSet emojiImageSet=391;string slideThumbnailHash=392;bool visible=6;uint visibleTag=58[deprecated];bool locked=7;uint lockedTag=59[deprecated];LockMode lockMode=434;float opacity=8;uint opacityTag=60[deprecated];BlendMode blendMode=9;uint blendModeTag=61[deprecated];Vector size=11;uint sizeTag=63[deprecated];Matrix transform=12;uint transformTag=64[deprecated];float[]dashPattern=13;uint dashPatternTag=65[deprecated];bool mask=16;uint maskTag=68[deprecated];Vector rotationOrigin=424;bool maskIsOutline=18;uint maskIsOutlineTag=70[deprecated];MaskType maskType=317;float backgroundOpacity=19;uint backgroundOpacityTag=71[deprecated];float cornerRadius=20;uint cornerRadiusTag=72[deprecated];float strokeWeight=26;uint strokeWeightTag=78[deprecated];StrokeAlign strokeAlign=29;uint strokeAlignTag=81[deprecated];StrokeCap strokeCap=30;uint strokeCapTag=82[deprecated];StrokeJoin strokeJoin=31;uint strokeJoinTag=83[deprecated];Paint[]fillPaints=38;uint fillPaintsTag=90[deprecated];Paint[]strokePaints=39;uint strokePaintsTag=91[deprecated];Effect[]effects=43;uint effectsTag=95[deprecated];Color backgroundColor=50;uint backgroundColorTag=102[deprecated];Path[]fillGeometry=51;uint fillGeometryTag=103[deprecated];Path[]strokeGeometry=52;uint strokeGeometryTag=104[deprecated];Paint[]textDecorationFillPaints=411;bool textDecorationSkipInk=412;Number textUnderlineOffset=413;Number textDecorationThickness=415;TextDecorationStyle textDecorationStyle=416;float rectangleTopLeftCornerRadius=145;float rectangleTopRightCornerRadius=146;float rectangleBottomLeftCornerRadius=147;float rectangleBottomRightCornerRadius=148;bool rectangleCornerRadiiIndependent=149;bool rectangleCornerToolIndependent=150;bool proportionsConstrained=151;OptionalVector targetAspectRatio=423;bool useAbsoluteBounds=258[deprecated];bool borderTopHidden=287[deprecated];bool borderBottomHidden=288[deprecated];bool borderLeftHidden=289[deprecated];bool borderRightHidden=290[deprecated];bool bordersTakeSpace=294;float borderTopWeight=295;float borderBottomWeight=296;float borderLeftWeight=297;float borderRightWeight=298;bool borderStrokeWeightsIndependent=299;ConstraintType horizontalConstraint=28;uint horizontalConstraintTag=80[deprecated];StackMode stackMode=105;uint stackModeTag=106[deprecated];float stackSpacing=107;uint stackSpacingTag=108[deprecated];float stackPadding=109;uint stackPaddingTag=110[deprecated];StackCounterAlign stackCounterAlign=120[deprecated];StackJustify stackJustify=121;StackAlign stackAlign=208[deprecated];float stackHorizontalPadding=209;float stackVerticalPadding=210;StackSize stackWidth=211[deprecated];StackSize stackHeight=212[deprecated];StackSize stackPrimarySizing=229;StackJustify stackPrimaryAlignItems=230;StackAlign stackCounterAlignItems=231;float stackChildPrimaryGrow=232;float stackPaddingRight=233;float stackPaddingBottom=234;StackCounterAlign stackChildAlignSelf=236;StackPositioning stackPositioning=269;bool stackReverseZIndex=271;StackWrap stackWrap=323;float stackCounterSpacing=324;OptionalVector minSize=325;OptionalVector maxSize=326;StackCounterAlignContent stackCounterAlignContent=343;int[]sortedMovingChildIndices=406;GUIDPositionMap gridRows=435;GUIDPositionMap gridColumns=436;float gridRowGap=437;float gridColumnGap=438;GUID gridRowAnchor=439;GUID gridColumnAnchor=440;uint gridRowSpan=441;uint gridColumnSpan=442;bool isSnakeGameBoard=344[deprecated];GUID transitionNodeID=139;GUID prototypeStartNodeID=140;Color prototypeBackgroundColor=141;TransitionInfo transitionInfo=153[deprecated];TransitionType transitionType=154;float transitionDuration=155;EasingType easingType=156;bool transitionPreserveScroll=181;ConnectionType connectionType=182;string connectionURL=183;PrototypeDevice prototypeDevice=184;InteractionType interactionType=187;float transitionTimeout=188;bool interactionMaintained=189;float interactionDuration=190;bool destinationIsOverlay=192[deprecated];bool transitionShouldSmartAnimate=207;PrototypeInteraction[]prototypeInteractions=226;PrototypeInteraction[]objectAnimations=426;PrototypeStartingPoint prototypeStartingPoint=249;PluginData[]pluginData=204;PluginRelaunchData[]pluginRelaunchData=219;ConnectorEndpoint connectorStart=242;ConnectorEndpoint connectorEnd=243;ConnectorLineStyle connectorLineStyle=244;StrokeCap connectorStartCap=245;StrokeCap connectorEndCap=246;ConnectorControlPoint[]connectorControlPoints=253;ConnectorTextMidpoint connectorTextMidpoint=255;ConnectorType connectorType=373;Annotation[]annotations=369;AnnotationMeasurement[]measurements=384;ShapeWithTextType shapeWithTextType=241;float shapeUserHeight=247;DerivedImmutableFrameData derivedImmutableFrameData=254;MultiplayerFieldVersion derivedImmutableFrameDataVersion=338;NodeGenerationData nodeGenerationData=240;CodeBlockLanguage codeBlockLanguage=259;CodeBlockTheme codeBlockTheme=433;LinkPreviewData linkPreviewData=278;bool shapeTruncates=282;bool sectionContentsHidden=283;VideoPlayback videoPlayback=300;StampData stampData=301;SectionPresetInfo sectionPresetInfo=370;PlatformShapeDefinition platformShapeDefinition=409;MultiplayerMap widgetSyncedState=273;uint widgetSyncCursor=274[deprecated];WidgetDerivedSubtreeCursor widgetDerivedSubtreeCursor=275[deprecated];WidgetPointer widgetCachedAncestor=276;WidgetInputBehavior widgetInputBehavior=285;string widgetTooltip=286;WidgetHoverStyle widgetHoverStyle=291;bool isWidgetStickable=293;bool shouldHideCursorsOnWidgetHover=360;WidgetMetadata widgetMetadata=262;WidgetEvent[]widgetEvents=263;WidgetPropertyMenuItem[]widgetPropertyMenuItems=265;WidgetInputTextNodeType widgetInputTextNodeType=401;TableRowColumnPositionMap tableRowPositions=308;TableRowColumnPositionMap tableColumnPositions=309;TableRowColumnSizeMap tableRowHeights=310;TableRowColumnSizeMap tableColumnWidths=311;MultiplayerMap interactiveSlideConfigData=371;MultiplayerMap interactiveSlideParticipantData=372;FlappType flappType=402;string slideSpeakerNotes=389;bool isSkippedSlide=410;ThemeID themeID=379;SlideThemeData slideThemeData=381[deprecated];SlideThemeMap slideThemeMap=390;string slideTemplateFileKey=393;GUID diagramParentId=363[deprecated];GUID layoutRoot=362[deprecated];string layoutPosition=364[deprecated];DiagramLayoutRuleType diagramLayoutRuleType=366;DiagramParentIndex diagramParentIndex=367;DiagramLayoutPaused diagramLayoutPaused=368;bool isPageDivider=380;InternalEnumForTest internalEnumForTest=251;InternalDataForTest internalDataForTest=257;bool autoRename=14;uint autoRenameTag=66[deprecated];bool backgroundEnabled=15;uint backgroundEnabledTag=67[deprecated];bool exportContentsOnly=17;uint exportContentsOnlyTag=69[deprecated];float miterLimit=25;uint miterLimitTag=77[deprecated];float textTracking=27;uint textTrackingTag=79[deprecated];ConstraintType verticalConstraint=37;uint verticalConstraintTag=89[deprecated];ExportSettings[]exportSettings=45;uint exportSettingsTag=97[deprecated];TextAutoResize textAutoResize=46;uint textAutoResizeTag=98[deprecated];LayoutGrid[]layoutGrids=47;uint layoutGridsTag=99[deprecated];bool frameMaskDisabled=115;uint frameMaskDisabledTag=116[deprecated];bool resizeToFit=117;uint resizeToFitTag=118[deprecated];BooleanOperation booleanOperation=36;uint booleanOperationTag=88[deprecated];VectorMirror handleMirroring=44;uint handleMirroringTag=96[deprecated];uint count=10;uint countTag=62[deprecated];float starInnerScale=24;uint starInnerScaleTag=76[deprecated];ArcData arcData=195;VectorData vectorData=48;uint vectorDataTag=100[deprecated];uint vectorOperationVersion=425;TextPathStart textPathStart=432;bool exportBackgroundDisabled=119;Guide[]guides=138;bool internalOnly=142;ScrollDirection scrollDirection=159;float cornerSmoothing=160;Vector scrollOffset=166[deprecated];bool exportTextAsSVGText=175;ScrollContractedState scrollContractedState=178[deprecated];Vector contractedSize=179[deprecated];string fixedChildrenDivider=180[deprecated];ScrollBehavior scrollBehavior=186;int derivedSymbolDataLayoutVersion=196;NavigationType navigationType=197;OverlayPositionType overlayPositionType=198;Vector overlayRelativePosition=199;OverlayBackgroundInteraction overlayBackgroundInteraction=200;OverlayBackgroundAppearance overlayBackgroundAppearance=201;GUID overrideKey=213;bool containerSupportsFillStrokeAndCorners=220;StackSize stackCounterSizing=221;bool containersSupportFillStrokeAndCorners=222[deprecated];KeyTrigger keyTrigger=224;string voiceEventPhrase=227;GUID[]ancestorPathBeforeDeletion=235;SymbolLink[]symbolLinks=237;TextListData textListData=239[deprecated];bool detachOpticalSizeFromFontSize=261;float listSpacing=264;EmbedData embedData=270;RichMediaData richMediaData=272;MultiplayerMap renderedSyncedState=277;bool simplifyInstancePanels=284;HTMLTag accessibleHTMLTag=302;ARIARole ariaRole=303;string accessibleLabel=304;VariableData variableData=306[deprecated];VariableDataMap variableConsumptionMap=307;VariableModeBySetMap variableModeBySetMap=316;VariableSetMode[]variableSetModes=312;VariableSetID variableSetID=313;VariableResolvedDataType variableResolvedType=314;VariableDataValues variableDataValues=315;string variableTokenName=350[deprecated];VariableScope[]variableScopes=353;CodeSyntaxMap codeSyntax=358;PasteSource pasteSource=388;EditorType pageType=397;VariableSetID backingVariableSetId=377;VariableIdOrVariableOverrideId backingVariableId=378[deprecated];bool isCollectionExtendable=385;string rootVariableKey=386;HandoffStatusMap handoffStatusMap=361;AgendaPositionMap agendaPositionMap=327;AgendaMetadataMap agendaMetadataMap=328;MigrationStatus migrationStatus=329;bool isSoftDeleted=330;EditInfo editInfo=331;ColorProfile colorProfile=341[deprecated];SymbolId detachedSymbolId=342;ChildReadingDirection childReadingDirection=346;string readingIndex=347;DocumentColorProfile documentColorProfile=349;DeveloperRelatedLink[]developerRelatedLinks=354;string slideActiveThemeLibKey=356;ARIAAttributesMap ariaAttributes=357;EditScopeInfo editScopeInfo=365;SemanticWeight semanticWeight=374;SemanticItalic semanticItalic=375;bool isResponsiveSet=387;GUID defaultResponsiveSetId=398;ResponsiveSetSettings responsiveSetSettings=400;bool areSlidesManuallyIndented=403;NodeBehaviors behaviors=404;string sourceCode=414;CodeLibraryId belongsToCodeLibraryId=427;CodeFileId exportedFromCodeFileId=428;string codeExportName=430;CodeComponentId backingCodeComponentId=429;CodeSnapshotState codeSnapshotState=431;CMSSelector cmsSelector=419;CMSConsumptionMap cmsConsumptionMap=420;uint[]aiEditedNodeChangeFieldNumbers=405;string aiEditScopeLabel=408;FirstDraftData firstDraftData=407;FirstDraftKitElementData firstDraftKitElementData=418;CooperRevertData cooperRevertData=421;HubFileAttribution hubFileAttribution=422;}message ResponsiveSetSettings{string title=1;string description=2;ResponsiveScalingMode scalingMode=3;float scalingMinFontSize=4;float scalingMaxFontSize=5;float scalingMinLayoutWidth=6;float scalingMaxLayoutWidth=7;string lang=8;string faviconHash=9;string socialImageHash=10;string googleAnalyticsID=11;bool blockSearchIndexing=12;string customCodeHeadStart=13;string customCodeHeadEnd=14;string customCodeBodyStart=15;string customCodeBodyEnd=16;GUID faviconID=17;GUID socialImageID=18;}enum ResponsiveScalingMode{REFLOW=0;SCALE=1;}message CMSSelector{string cmsCollectionId=1;CMSFilterCritera filterCriteria=2;CMSSelectorSort[]sorts=3;uint limit=4;}message CMSFilterCritera{CMSFilterCriteriaMatchType matchType=1;CMSSelectorFilter[]filters=2;}enum CMSFilterCriteriaMatchType{MATCH_ALL=0;MATCH_ANY=1;}message CMSSelectorFilter{string cmsFieldId=1;CMSSelectorFilterOperator op=2;string comparisonValue=3;}enum CMSSelectorFilterOperator{EQUALS=0;}message CMSSelectorSort{string cmsFieldId=1;CMSFieldOrderBy orderBy=2;}enum CMSFieldOrderBy{ASCENDING=0;DESCENDING=1;}message CMSConsumptionMap{CMSConsumptionMapEntry[]entries=1;}message CMSConsumptionMapEntry{CMSConsumptionField consumptionField=1;string cmsFieldId=2;}enum CMSConsumptionField{MISSING=0;TEXT_DATA=1;}message HubFileAttribution{string hubFileId=1;string hubFileName=2;}message CooperRevertData{NodeChange originalValues=1;}message VideoPlayback{bool autoplay=1;bool mediaLoop=2;bool muted=3;}enum MediaAction{PLAY=0;PAUSE=1;TOGGLE_PLAY_PAUSE=2;MUTE=3;UNMUTE=4;TOGGLE_MUTE_UNMUTE=5;SKIP_FORWARD=6;SKIP_BACKWARD=7;SKIP_TO=8;}message WidgetHoverStyle{Paint[]fillPaints=1;Paint[]strokePaints=2;float opacity=3;bool areFillPaintsSet=4;bool areStrokePaintsSet=5;bool isOpacitySet=6;}message WidgetDerivedSubtreeCursor{uint sessionID=1;uint counter=2;}message MultiplayerMap{MultiplayerMapEntry[]entries=1;}message MultiplayerMapEntry{string key=1;string value=2;}message VariableDataMap{VariableDataMapEntry[]entries=1;}message VariableDataMapEntry{uint nodeField=1;VariableData variableData=2;VariableField variableField=3;}enum VariableField{MISSING=0;CORNER_RADIUS=1;PARAGRAPH_SPACING=2;PARAGRAPH_INDENT=3;STROKE_WEIGHT=4;STACK_SPACING=5;STACK_PADDING_LEFT=6;STACK_PADDING_TOP=7;STACK_PADDING_RIGHT=8;STACK_PADDING_BOTTOM=9;VISIBLE=10;TEXT_DATA=11;WIDTH=12;HEIGHT=13;RECTANGLE_TOP_LEFT_CORNER_RADIUS=14;RECTANGLE_TOP_RIGHT_CORNER_RADIUS=15;RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS=16;RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS=17;BORDER_TOP_WEIGHT=18;BORDER_BOTTOM_WEIGHT=19;BORDER_LEFT_WEIGHT=20;BORDER_RIGHT_WEIGHT=21;VARIANT_PROPERTIES=22;STACK_COUNTER_SPACING=23;MIN_WIDTH=24;MAX_WIDTH=25;MIN_HEIGHT=26;MAX_HEIGHT=27;FONT_FAMILY=28;FONT_STYLE=29;FONT_VARIATIONS=30;OPACITY=31;FONT_SIZE=32;LETTER_SPACING=34;LINE_HEIGHT=36;}message VariableModeBySetMap{VariableModeBySetMapEntry[]entries=1;}message VariableModeBySetMapEntry{VariableSetID variableSetID=1;GUID variableModeID=2;}message CodeSyntaxMap{CodeSyntaxMapEntry[]entries=1;}message CodeSyntaxMapEntry{CodeSyntaxPlatform platform=1;string value=2;}message TableRowColumnPositionMap{TableRowColumnPositionMapEntry[]entries=1;}message TableRowColumnPositionMapEntry{GUID id=1;string position=2;}message GUIDPositionMap{GUIDPositionMapEntry[]entries=1;}message GUIDPositionMapEntry{GUID id=1;string position=2;}message TableRowColumnSizeMap{TableRowColumnSizeMapEntry[]entries=1;}message TableRowColumnSizeMapEntry{GUID id=1;float size=2;}message AgendaPositionMap{AgendaPositionMapEntry[]entries=1;}message AgendaPositionMapEntry{GUID id=1;string position=2;}enum AgendaItemType{NODE=0;BLOCK=1;}message AgendaMetadataMap{AgendaMetadataMapEntry[]entries=1;}message AgendaMetadataMapEntry{GUID id=1;AgendaMetadata data=2;}message AgendaMetadata{string name=1;AgendaItemType type=2;GUID targetNodeID=3;AgendaTimerInfo timerInfo=4;AgendaVoteInfo voteInfo=5;AgendaMusicInfo musicInfo=6;}message AgendaTimerInfo{uint timerLength=1;}message AgendaVoteInfo{uint voteCount=1;}message AgendaMusicInfo{string songID=1;uint startTimeMs=2;}enum DiagramLayoutRuleType{NONE=0;TREE=1;}struct DiagramParentIndex{GUID guid;string position;}enum DiagramLayoutPaused{NO=0;YES=1;}message ComponentPropRef{uint nodeField=1;GUID defID=2;string zombieFallbackName=3;ComponentPropNodeField componentPropNodeField=4;bool isDeleted=5;}enum ComponentPropNodeField{VISIBLE=0;TEXT_DATA=1;OVERRIDDEN_SYMBOL_ID=2;INHERIT_FILL_STYLE_ID=3;}message ComponentPropAssignment{GUID defID=1;ComponentPropValue value=2;VariableData varValue=3;DerivedTextData legacyDerivedTextData=4;}message ComponentPropDef{GUID id=1;string name=2;ComponentPropValue initialValue=3;string sortPosition=4;GUID parentPropDefId=5;ComponentPropType type=6;bool isDeleted=7;ComponentPropPreferredValues preferredValues=8;VariableData varValue=9;}message ComponentPropValue{bool boolValue=1;TextData textValue=2;GUID guidValue=3;float floatValue=4;}enum ComponentPropType{BOOL=0;TEXT=1;COLOR=2;INSTANCE_SWAP=3;NUMBER=5;}message ComponentPropPreferredValues{string[]stringValues=1[deprecated];InstanceSwapPreferredValue[]instanceSwapValues=2;}message InstanceSwapPreferredValue{InstanceSwapPreferredValueType type=1;string key=2;}enum InstanceSwapPreferredValueType{COMPONENT=0;STATE_GROUP=1;}enum WidgetEvent{MOUSE_DOWN=0;CLICK=1;TEXT_EDIT_END=2;ATTACHED_STICKABLES_CHANGED=3;STUCK_STATUS_CHANGED=4;}enum WidgetInputBehavior{WRAP=0;TRUNCATE=1;MULTILINE=2;}message WidgetMetadata{string pluginID=1;string pluginVersionID=2;string widgetName=3;}enum WidgetPropertyMenuItemType{ACTION=0;SEPARATOR=1;COLOR=2;DROPDOWN=3;COLOR_SELECTOR=4;TOGGLE=5;LINK=6;}message WidgetPropertyMenuSelectorOption{string option=1;string tooltip=2;}enum WidgetInputTextNodeType{WIDGET_CONTROLLED=0;RICH_TEXT=1;}message WidgetPropertyMenuItem{string propertyName=1;string tooltip=2;WidgetPropertyMenuItemType itemType=3;string icon=4;WidgetPropertyMenuSelectorOption[]options=5;string selectedOption=6;bool isToggled=7;string href=8;bool allowCustomColor=9;}enum CodeBlockLanguage{TYPESCRIPT=0;CPP=1;RUBY=2;CSS=3;JAVASCRIPT=4;HTML=5;JSON=6;GRAPHQL=7;PYTHON=8;GO=9;SQL=10;SWIFT=11;KOTLIN=12;RUST=13;BASH=14;PLAINTEXT=15;}enum CodeBlockTheme{FIGJAM_DARK=0;DRACULA=1;DUOTONE_SEA=2;DUOTONE_SPACE=3;DUOTONE_EARTH=4;DUOTONE_FOREST=5;DUOTONE_LIGHT=6;}enum InternalEnumForTest{OLD=1;}message InternalDataForTest{int testFieldA=1;}message StateGroupPropertyValueOrder{string property=1;string[]values=2;}message TextListData{int listID=1[deprecated];BulletType bulletType=2[deprecated];int indentationLevel=3[deprecated];int lineNumber=4[deprecated];}enum BulletType{ORDERED=0;UNORDERED=1;INDENT=2;NO_LIST=3;}message TextLineData{LineType lineType=1;int styleId=10;int indentationLevel=2;SourceDirectionality sourceDirectionality=9;Directionality directionality=3[deprecated];DirectionalityIntent directionalityIntent=4[deprecated];int downgradeStyleId=5;int consistencyStyleId=6;int listStartOffset=7;bool isFirstLineOfList=8;}message DerivedTextLineData{Directionality directionality=1;}enum LineType{PLAIN=0;ORDERED_LIST=1;UNORDERED_LIST=2;BLOCKQUOTE=3;HEADER=4;}enum SourceDirectionality{AUTO=0;LTR=1;RTL=2;}enum Directionality{LTR=0;RTL=1;}enum DirectionalityIntent{IMPLICIT=0;EXPLICIT=1;}message PrototypeInteraction{GUID id=1;PrototypeEvent event=2;PrototypeAction[]actions=3;bool isDeleted=4;int stateManagementVersion=5;}message PrototypeEvent{InteractionType interactionType=1;bool interactionMaintained=2;float interactionDuration=3;KeyTrigger keyTrigger=4;string voiceEventPhrase=5;float transitionTimeout=6;float mediaHitTime=7;}message PrototypeVariableTarget{VariableID id=1;NodeFieldAlias nodeFieldAlias=2;}message ConditionalActions{PrototypeAction[]actions=1;VariableData condition=2;}message PrototypeAction{GUID transitionNodeID=1;TransitionType transitionType=2;float transitionDuration=3;EasingType easingType=4;float transitionTimeout=5[deprecated];bool transitionShouldSmartAnimate=6;ConnectionType connectionType=7;Vector overlayRelativePosition=9;NavigationType navigationType=10;bool transitionPreserveScroll=11;float[]easingFunction=12;Vector extraScrollOffset=13;bool transitionResetScrollPosition=25;bool transitionResetInteractiveComponents=26;string connectionURL=8;bool openUrlInNewTab=18;GUID targetVariableID=14[deprecated];VariableAnyValue targetVariableValue=15[deprecated];PrototypeVariableTarget targetVariable=19;VariableData targetVariableData=20;MediaAction mediaAction=16;bool transitionResetVideoPosition=17;float mediaSkipToTime=21;float mediaSkipByAmount=22;VariableData[]conditions=23[deprecated];ConditionalActions[]conditionalActions=24;VariableSetID targetVariableSetID=27;GUID targetVariableModeID=28;string targetVariableSetKey=29;AnimationType animationType=30;GUID animationTargetId=31[deprecated];AnimationPhase animationPhase=32;AnimationState animationState=33;}enum AnimationPhase{IN=0;OUT=1;}enum AnimationType{NONE=0;FADE=1;SLIDE_FROM_LEFT=2;SLIDE_FROM_RIGHT=3;SLIDE_FROM_TOP=4;SLIDE_FROM_BOTTOM=5;}message AnimationState{float opacity=1;Matrix transform=2;}message PrototypeStartingPoint{string name=1;string description=2;string position=3;}enum TriggerDevice{KEYBOARD=0;UNKNOWN_CONTROLLER=1;XBOX_ONE=2;PS4=3;SWITCH_PRO=4;}message KeyTrigger{int[]keyCodes=1;TriggerDevice triggerDevice=2;}message Hyperlink{string url=1;GUID guid=2;bool openInNewTab=3;}enum MentionSource{DEFAULT=0;COPY_DUPLICATE=1;}message Mention{GUID id=1;string mentionedUserId=2;string mentionedByUserId=3;string fileKey=4;MentionSource source=5;uint64 mentionedUserIdInt=6;uint64 mentionedByUserIdInt=7;}message EmbedData{string url=1;string srcUrl=2;string title=3;string thumbnailUrl=4;float width=5;float height=6;string embedType=7;string thumbnailImageHash=8;string faviconImageHash=9;string provider=10;string originalText=11;string description=12;string embedVersionId=13;}message StampData{string userId=1;string votingSessionId=2;string stampedByUserId=3;}message LinkPreviewData{string url=1;string title=2;string provider=3;string description=4;string thumbnailImageHash=5;string faviconImageHash=6;float thumbnailImageWidth=7;float thumbnailImageHeight=8;}message Viewport{Rect canvasSpaceBounds=1;bool pixelPreview=2;float pixelDensity=3;GUID canvasGuid=4;}message Mouse{MouseCursor cursor=1;Vector canvasSpaceLocation=2;Rect canvasSpaceSelectionBox=3;GUID canvasGuid=4;uint cursorHiddenReason=5;}struct Click{uint id;Vector point;}struct ScrollPosition{GUID node;Vector scrollOffset;}struct TriggeredOverlay{GUID overlayGuid;GUID hotspotGuid;GUID swapGuid;}message TriggeredOverlayData{GUID overlayGuid=1;GUID hotspotGuid=2;GUID swapGuid=3;GUID prototypeInteractionGuid=4;GUIDPath hotspotBlueprintId=5;}message TriggeredSetVariableActionData{GUID nodeForFindingTopmostScreenId=1;string targetVariableId=2;string targetVariableData=3;string resolvedVariableModes=4;}message TriggeredSetVariableModeActionData{GUID nodeForFindingTopmostScreenId=1;string targetVariableSetKey=2;string targetVariableModeId=3;VariableSetID targetVariableSetId=4;}message VideoStateChangeData{GUID targetNodeId=1;bool isPlaying=2;bool isPlayingSound=3;uint[]currentTimes=4;uint actionTakenTimestamp=5;}message EmbeddedPrototypeData{GUID nodeId=1;uint sessionId=2;}message PresentedState{GUID baseScreenID=1;TriggeredOverlayData[]overlays=2;}enum TransitionDirection{FORWARD=0;REVERSE=1;}message TopLevelPlaybackChange{PresentedState oldState=1;PresentedState newState=2;GUIDPath hotspotBlueprintID=3;GUID interactionID=4;bool isHotspotInNewPresentedState=5;TransitionDirection direction=6;GUIDPath instanceStablePath=7;}message InstanceStateChange{GUID stateID=1;GUID interactionID=2;GUIDPath hotspotStablePath=3;GUIDPath instanceStablePath=4;PlaybackChangePhase phase=5;}message TextCursor{Rect selectionBox=1;GUID canvasGuid=2[deprecated];GUID textNodeGuid=3;}message TextSelection{Rect[]selectionBoxes=1;GUID canvasGuid=2[deprecated];GUID textNodeGuid=3;Vector textSelectionRange=4;GUID textNodeOrContainingIfGuid=5;GUID tableCellRowId=6;GUID tableCellColId=7;}enum PlaybackChangePhase{INITIATED=0;ABORTED=1;COMMITTED=2;}message PlaybackChangeKeyframe{PlaybackChangePhase phase=1;float progress=2;float timestamp=3;}message StateMapping{GUIDPath stablePath=1;TopLevelPlaybackChange lastTopLevelChange=2;PlaybackChangeKeyframe lastTopLevelChangeStatus=3;float timestamp=4;}message ScrollMapping{GUIDPath blueprintID=1;uint overlayIndex=2;Vector scrollOffset=3;}message PlaybackUpdate{TopLevelPlaybackChange lastTopLevelChange=1;PlaybackChangeKeyframe lastTopLevelChangeStatus=2;ScrollMapping[]scrollMappings=3;float timestamp=4;Vector pointerLocation=5;bool isTopLevelFrameChange=6;StateMapping[]stateMappings=7;}message ChatMessage{string text=1;string previousText=2;}message VoiceMetadata{string connectedCallId=1;}message AprilFunCursor{string id=1;bool trailEnabled=2;}enum Heartbeat{FOREGROUND=0;BACKGROUND=1;}message UserChange{uint sessionID=1;bool connected=2;string name=3;Color color=4;string imageURL=5;Viewport viewport=6;Mouse mouse=7;GUID[]selection=8;uint[]observing=9;string deviceName=10;Click[]recentClicks=11;ScrollPosition[]scrollPositions=12;TriggeredOverlay[]triggeredOverlays=13[deprecated];string userID=14;GUID lastTriggeredHotspot=15;GUID lastTriggeredPrototypeInteractionID=16;TriggeredOverlayData[]triggeredOverlaysData=17;PlaybackUpdate[]playbackUpdates=18[deprecated];ChatMessage chatMessage=19;VoiceMetadata voiceMetadata=20;bool canWrite=21;bool highFiveStatus=22;InstanceStateChange[]instanceStateChanges=23;TextCursor textCursor=24;TextSelection textSelection=25;uint connectedAtTimeS=26;bool focusOnTextCursor=27;Heartbeat heartbeat=28;TriggeredSetVariableActionData[]triggeredSetVariableActionData=29;VideoStateChangeData[]videoStateChangeData=30;string clientID=31;GUID focusedSlideId=32;TriggeredSetVariableModeActionData[]triggeredSetVariableModeActionData=33;AprilFunCursor aprilFunCursor=34[deprecated];EmbeddedPrototypeData[]embeddedPrototypeData=35;GUID activeSlidesEmbeddablePrototype=36;GUID activeCodeComponentId=37;}message InteractiveSlideElementChange{string userID=1[deprecated];string anonymousUserID=2;GUID nodeID=3;string responseData=4;}message NodeStatusChange{GUID[]nodeIds=1;SectionStatusInfo statusInfo=2;}enum SceneGraphQueryBehavior{DEFAULT=0;CONTAINING_PAGE=1;PLUGIN=2;}message SceneGraphQuery{GUID startingNode=1;uint depth=2;SceneGraphQueryBehavior behavior=3;}message NodeChangesMetadata{uint blobsFieldOffset=1;}message CursorReaction{string imageUrl=1;}message TimerInfo{bool isPaused=1;uint timeRemainingMs=2;uint totalTimeMs=3;uint timerID=4;string setBy=5;uint songID=6[deprecated];uint lastReceivedSongTimestampMs=7;string songUUID=8;}message MusicInfo{bool isPaused=1;uint messageID=2;string songID=3;uint lastReceivedSongTimestampMs=4;bool isStopped=5;}message PresenterNomination{uint sessionID=1;bool isCancelled=2;}message PresenterInfo{uint sessionID=1;PresenterNomination nomination=2;}message ClientBroadcast{uint sessionID=1;CursorReaction cursorReaction=2;TimerInfo timer=3;PresenterInfo presenter=4;PresenterInfo prototypePresenter=5;MusicInfo music=6;}message Message{MessageType type=1;uint sessionID=2;uint ackID=3;NodeChange[]nodeChanges=4;UserChange[]userChanges=5;InteractiveSlideElementChange interactiveSlideElementChange=32;NodeStatusChange nodeStatusChange=36;Blob[]blobs=6;uint blobBaseIndex=30;string signalName=7;Access access=8;string styleSetName=9;StyleSetType styleSetType=10;StyleSetContentType styleSetContentType=11;int pasteID=12;Vector pasteOffset=13;string pasteFileKey=14;string signalPayload=15;SceneGraphQuery[]sceneGraphQueries=16;NodeChangesMetadata nodeChangesMetadata=17[deprecated];uint fileVersion=18;bool pasteIsPartiallyOutsideEnclosingFrame=19;GUID pastePageId=20;bool isCut=21;Message[]localUndoStack=22;Message[]localRedoStack=23;ClientBroadcast[]broadcasts=24;uint reconnectSequenceNumber=25;string pasteBranchSourceFileKey=26;EditorType pasteEditorType=27;string postSyncActions=28;GUID[]publishedAssetGuids=29;bool dirtyFromInitialLoad=31;ClipboardSelectionRegion[]clipboardSelectionRegions=33;EncodedOffsetsIndex encodedOffsetsIndex=34;bool hasRepeatingContent=35;}message EncodedOffsetsIndex{uint nodeChangesFieldOffset=1;uint nodeChangesFieldLength=2;uint blobsFieldOffset=3;GUIDAndEncodedOffset[]nodeChangeOffsets=4;}struct GUIDAndEncodedOffset{GUID guid;uint offset;}message DiffChunk{uint[]nodeChanges=1;NodePhase phase=2[deprecated];NodeChange displayNode=3;GUID canvasId=4;string canvasName=5;bool canvasIsInternal=6;uint[]chunksAffectingThisChunk=7;NodeChange[]basisParentHierarchy=8[deprecated];NodeChange[]parentHierarchy=9[deprecated];GUID[]basisParentHierarchyGuids=10;GUID[]parentHierarchyGuids=11;}enum DiffType{BRANCHING=0;NODE_CHANGES_ONLY=1;}message DiffPayload{NodeChange[]nodeChanges=1;Blob[]blobs=2;DiffChunk[]diffChunks=3;NodeChange[]diffBasis=4;NodeChange[]basisParentNodeChanges=5;NodeChange[]parentNodeChanges=6;DiffType diffType=7;}enum RichMediaType{ANIMATED_IMAGE=0;VIDEO=1;}message RichMediaData{string mediaHash=1;RichMediaType richMediaType=2;}enum VariableDataType{BOOLEAN=0;FLOAT=1;STRING=2;ALIAS=3;COLOR=4;EXPRESSION=5;MAP=6;SYMBOL_ID=7;FONT_STYLE=8;TEXT_DATA=9;INVALID=10;NODE_FIELD_ALIAS=11;CMS_ALIAS=12;PROP_REF=13;}enum VariableResolvedDataType{BOOLEAN=0;FLOAT=1;STRING=2;COLOR=4;MAP=5;SYMBOL_ID=6;FONT_STYLE=7;TEXT_DATA=8;}message VariableAnyValue{bool boolValue=1;string textValue=2;float floatValue=3;VariableID alias=4;Color colorValue=5;Expression expressionValue=6;VariableMap mapValue=7;SymbolId symbolIdValue=8;VariableFontStyle fontStyleValue=9;TextData textDataValue=10;NodeFieldAlias nodeFieldAliasValue=11;CMSAlias cmsAliasValue=12;PropRefValue propRefValue=13;}enum ExpressionFunction{ADDITION=0;SUBTRACTION=1;RESOLVE_VARIANT=2;MULTIPLY=3;DIVIDE=4;EQUALS=5;NOT_EQUAL=6;LESS_THAN=7;LESS_THAN_OR_EQUAL=8;GREATER_THAN=9;GREATER_THAN_OR_EQUAL=10;AND=11;OR=12;NOT=13;STRINGIFY=14;TERNARY=15;VAR_MODE_LOOKUP=16;NEGATE=17;IS_TRUTHY=18;}message Expression{ExpressionFunction expressionFunction=1;VariableData[]expressionArguments=2;}message VariableMapValue{string key=1;VariableData value=2;}message VariableMap{VariableMapValue[]values=1;}message VariableFontStyle{VariableData asString=1;VariableData asFloat=2;VariableData asVariations=3;}message NodeFieldAlias{GUIDPath stablePathToNode=1;NodeFieldAliasType nodeField=2;string indexOrKey=3;}enum NodeFieldAliasType{MISSING=0;COMPONENT_PROP_ASSIGNMENTS=1;}message CMSAlias{string collectionId=1;string itemId=2;string fieldId=3;}message PropRefValue{GUID defId=1;}message VariableData{VariableAnyValue value=1;VariableDataType dataType=2;VariableResolvedDataType resolvedDataType=3;}message VariableSetMode{GUID id=1;string name=2;string sortPosition=3;}message VariableDataValues{VariableDataValuesEntry[]entries=1;}message VariableDataValuesEntry{GUID modeID=1;VariableData variableData=2;}enum VariableScope{ALL_SCOPES=0;TEXT_CONTENT=1;CORNER_RADIUS=2;WIDTH_HEIGHT=3;GAP=4;ALL_FILLS=5;FRAME_FILL=6;SHAPE_FILL=7;TEXT_FILL=8;STROKE=9;STROKE_FLOAT=10;EFFECT_FLOAT=11;EFFECT_COLOR=12;OPACITY=13;FONT_STYLE=14;FONT_FAMILY=15;FONT_SIZE=16;LINE_HEIGHT=17;LETTER_SPACING=18;PARAGRAPH_SPACING=19;PARAGRAPH_INDENT=20;FONT_VARIATIONS=21;}enum CodeSyntaxPlatform{WEB=0;ANDROID=1;iOS=2;}message OptionalVector{Vector value=1;}enum HTMLTag{AUTO=0;ARTICLE=1;SECTION=2;NAV=3;ASIDE=4;H1=5;H2=6;H3=7;H4=8;H5=9;H6=10;HGROUP=11;HEADER=12;FOOTER=13;ADDRESS=14;P=15;HR=16;PRE=17;BLOCKQUOTE=18;OL=19;UL=20;MENU=21;LI=22;DL=23;DT=24;DD=25;FIGURE=26;FIGCAPTION=27;MAIN=28;DIV=29;A=30;EM=31;STRONG=32;SMALL=33;S=34;CITE=35;Q=36;DFN=37;ABBR=38;RUBY=39;RT=40;RP=41;DATA=42;TIME=43;CODE=44;VAR=45;SAMP=46;KBD=47;SUB=48;SUP=49;I=50;B=51;U=52;MARK=53;BDI=54;BDO=55;SPAN=56;BR=57;WBR=58;PICTURE=59;SOURCE=60;IMG=61;FORM=62;LABEL=63;INPUT=64;BUTTON=65;SELECT=66;DATALIST=67;OPTGROUP=68;OPTION=69;TEXTAREA=70;OUTPUT=71;PROGRESS=72;METER=73;FIELDSET=74;LEGEND=75;VIDEO=76;}enum ARIARole{AUTO=0;NONE=52;APPLICATION=30;BANNER=67;COMPLEMENTARY=68;CONTENTINFO=69;FORM=70;MAIN=71;NAVIGATION=72;REGION=73;SEARCH=74;SEPARATOR=13;ARTICLE=31;COLUMNHEADER=35;DEFINITION=36;DIRECTORY=38;DOCUMENT=39;GROUP=44;HEADING=45;IMG=46;LIST=48;LISTITEM=49;MATH=50;NOTE=53;PRESENTATION=55;ROW=56;ROWGROUP=57;ROWHEADER=58;TABLE=62;TOOLBAR=65;BUTTON=1;CHECKBOX=2;GRIDCELL=3;LINK=4;MENUITEM=5;MENUITEMCHECKBOX=6;MENUITEMRADIO=7;OPTION=8;PROGRESSBAR=9;RADIO=10;SCROLLBAR=11;SLIDER=14;SPINBUTTON=15;TAB=17;TABPANEL=18;TEXTBOX=19;TREEITEM=20;COMBOBOX=21;GRID=22;LISTBOX=23;MENU=24;MENUBAR=25;RADIOGROUP=26;TABLIST=27;TREE=28;TREEGRID=29;TOOLTIP=66;ALERT=75;LOG=76;MARQUEE=77;STATUS=78;TIMER=79;ALERTDIALOG=80;DIALOG=81;SEARCHBOX=12;SWITCH=16;BLOCKQUOTE=32;CAPTION=33;CELL=34;DELETION=37;EMPHASIS=40;FEED=41;FIGURE=42;GENERIC=43;INSERTION=47;METER=51;PARAGRAPH=54;STRONG=59;SUBSCRIPT=60;SUPERSCRIPT=61;TERM=63;TIME=64;IMAGE=82;HEADING_1=83;HEADING_2=84;HEADING_3=85;HEADING_4=86;HEADING_5=87;HEADING_6=88;HEADER=89;FOOTER=90;SIDEBAR=91;SECTION=92;MAINCONTENT=93;TABLE_CELL=94;WIDGET=95;}message MigrationStatus{bool dsdCleanup=1;}message NodeFieldMap{NodeFieldMapEntry[]entries=1;}message NodeFieldMapEntry{GUID guid=1;uint field=2;uint lastModifiedSequenceNumber=3;}enum ColorProfile{SRGB=0;DISPLAY_P3=1;}enum DocumentColorProfile{LEGACY=0;SRGB=1;DISPLAY_P3=2;}enum ChildReadingDirection{NONE=0;LEFT_TO_RIGHT=1;RIGHT_TO_LEFT=2;}message ARIAAttributeAnyValue{bool boolValue=1;string stringValue=2;float floatValue=3;int intValue=4;string[]stringArrayValue=5;}enum ARIAAttributeDataType{BOOLEAN=0;STRING=1;FLOAT=2;INT=3;STRING_LIST=4;}message ARIAAttributeData{ARIAAttributeDataType type=1;ARIAAttributeAnyValue value=2;}message ARIAAttributesMap{ARIAAttributesMapEntry[]entries=1;}message ARIAAttributesMapEntry{string attribute=1;ARIAAttributeData value=2;}message HandoffStatusMapEntry{GUID guid=1;SectionStatusInfo handoffStatus=2;}message HandoffStatusMap{HandoffStatusMapEntry[]entries=1;}message EditScopeInfo{EditScopeStack[]editScopeStacks=1[deprecated];EditScopeSnapshot[]snapshots=2;}message EditScopeSnapshot{EditScopeStack[]frames=1;uint[]nodeChangeFieldNumbers=2;}message EditScopeStack{EditScope[]stack=1;}message EditScope{EditScopeType type=1;string label=2;EditorType editorType=3;}enum EditScopeType{INVALID=0;TEST_SETUP=1;USER=2;PLUGIN=3;SYSTEM=4;REST_API=5;ONBOARDING=6;AUTOSAVE=7;AI=8;}enum SectionPresetState{INSERTED=0;USER_EDITED=1;}enum EmojiImageSet{APPLE=0;NOTO=1;}enum SelectionRegionFocusType{NONE=0;PRIMARY=1;SECONDARY=2;}message SectionPresetInfo{uint64 shelfId=1;uint64 templateId=2;string templateName=3;SectionPresetState state=4;}message ClipboardSelectionRegion{GUID parent=1;GUID[]nodes=2;Vector enclosingFrameOffset=3;bool pasteIsPartiallyOutsideEnclosingFrame=4;SelectionRegionFocusType focusType=5;}enum FirstDraftKitType{LOCAL=0;LIBRARY=1;NONE=2;}message FirstDraftKit{string key=1;FirstDraftKitType type=2;}message FirstDraftData{string generationId=1;FirstDraftKit kit=2;}enum FirstDraftKitElementType{NONE=0;BUILDING_BLOCK=1;GROUPED_COMPONENT=2;}message FirstDraftKitElementData{FirstDraftKitElementType type=1;}enum PlatformShapeProperty{FILL=0;STROKE=1;TEXT=2;STROKE_COLOR=3;}enum PlatformShapeBehaviorType{SHAPE=0;CONTAINER=1;ADVANCED_CONTAINER=2;}message PlatformShapePropertyMapEntry{PlatformShapeProperty property=1;GUIDPath[]nodePaths=2;}message PlatformShapeDefinition{PlatformShapePropertyMapEntry[]propertyMapEntries=1;PlatformShapeBehaviorType behaviorType=2;}message NodeBehaviors{LinkBehavior link=1;AppearBehavior appear=2;HoverBehavior hover=3;PressBehavior press=4;FocusBehavior focus=5;ScrollParallaxBehavior scrollParallax=6;ScrollTransformBehavior scrollTransform=7;CursorBehavior cursor=8;}message BehaviorTransition{EasingType easingType=1;float[]easingFunction=2;float transitionDuration=3;float delay=4;}enum AppearBehaviorTrigger{PAGE_LOAD=1;THIS_LAYER_IN_VIEW=2;OTHER_LAYER_IN_VIEW=3;SCROLL_DIRECTION=4;}enum RelativeDirection{UP=1;DOWN=2;LEFT=3;RIGHT=4;}enum LinkBehaviorType{URL=1;PAGE=2;}message LinkBehavior{LinkBehaviorType type=1;string url=2;GUID page=3;bool openInNewWindow=4;}message AppearBehavior{AppearBehaviorTrigger trigger=1;RelativeDirection direction=2;GUID otherLayer=3;BehaviorTransition enterTransition=4;NodeChange enterState=5;BehaviorTransition exitTransition=6;NodeChange exitState=7;bool playsOnce=8;}message HoverBehavior{BehaviorTransition transition=1;NodeChange state=2;}message PressBehavior{BehaviorTransition transition=1;NodeChange state=2;}message FocusBehavior{BehaviorTransition transition=1;NodeChange state=2;}message ScrollParallaxBehavior{ScrollDirection axis=1;float speed=2;bool relativeToPage=3;}enum ScrollTransformBehaviorTrigger{PAGE_HEIGHT=1;THIS_LAYER_IN_VIEW=2;OTHER_LAYER_IN_VIEW=3;}message ScrollTransformBehavior{ScrollTransformBehaviorTrigger trigger=1;GUID otherLayer=2;BehaviorTransition transition=3;NodeChange fromState=4;NodeChange toState=5;}message CursorBehavior{float hotspotX=1;float hotspotY=2;GUID cursorGuid=3;}message VariableIdOrVariableOverrideId{VariableID variableId=1;VariableOverrideId variableOverrideId=2;}struct IndexFontVariationAxis{string tag;string name;float min;float max;float defaultValue;}struct IndexFontVariationAxisValue{string tag;float value;}message IndexFontStyle{string name=1;string postscript=2;float weight=3;bool italic=4;float stretch=5;IndexFontVariationAxisValue[]variationAxisValues=6;}message IndexFontFile{string filename=1;uint version=2;string family=3;IndexFontStyle[]styles=4;IndexFontVariationAxis[]variationAxes=5;bool useFontOpticalSize=6;}struct IndexFamilyRename{string oldFamily;string newFamily;}struct IndexStyleRename{string oldStyle;string newStyle;}struct IndexFamilyStylesRename{string familyName;IndexStyleRename[]styleRenames;}struct IndexRenames{IndexFamilyRename[]family;IndexFamilyStylesRename[]style;}struct IndexEmojiSequence{uint[]codepoints;}struct IndexEmojis{uint revision;uint[]sizes;IndexEmojiSequence[]sequences;}message FontIndex{uint schemaVersion=1;IndexFontFile[]files=2;IndexRenames renames=3;IndexEmojis emojis=4;}message SlideThemeData{ThemeID themeID=1;string version=2;}"},986116:(e,r,n)=>{n(306811),n(320468),n(955056),n(776758),n(605758),n(374894),n(62928),n(938011)},516724:(e,r,n)=>{n.d(r,{Ys:()=>a,is:()=>i});let a="team_tile--joinSpinner--w04qe",i="team_tile--favoriteStarContainer--PBn-d button_styles--button--vl9vc"},13326:(e,r,n)=>{n.d(r,{CZ:()=>c,Qp:()=>l,RF:()=>i,RL:()=>p,hv:()=>a,kz:()=>h,nv:()=>m,qE:()=>d,qS:()=>u,uj:()=>o,yu:()=>s});let a="base_badge--backgroundLight--agxeS",i="base_badge--backgroundWarning--i7d2I",o="base_badge--backgroundWhite--ZqZgN",s="base_badge--borderStrong--makDy",l="base_badge--height24--PMSUp text--fontPos11--2LvXf text--_fontBase--QdLsd",c="base_badge--heightSixteen--BEJT8 text--fontPos9--naThA text--_fontBase--QdLsd",d="base_badge--badgeIconContainer--Gu5zx",u="base_badge--badge--cbfYy base_badge--backgroundLight--agxeS",m="base_badge--badgeContentContainerWithIcon--ECslI",p="base_badge--badgeTooltip--Qz3RM",h="base_badge--tooltipLink--KpcPS"},313507:(e,r,n)=>{n.d(r,{$c:()=>p,BN:()=>l,BQ:()=>o,JM:()=>s,Sl:()=>a,XO:()=>d,ZW:()=>u,nJ:()=>c,u1:()=>h,wr:()=>i,zA:()=>m});let a="feed_page--hubFile--uHbnb feed_page--resourceLinkTag--5KQz7",i="feed_page--prototypeIcon--JlZyq",o="feed_page--tileUpperLeftWrapper--mwqC-",s="feed_page--tileEditorIcon--ymAxC",l="feed_page--resourcePreview--IePch",c="feed_page--redesignedResourcePreview--MjW2w",d="feed_page--resourcePreviewContentWrapper--H1eHK",u="feed_page--resourcePreviewContentWrapperFigJamDots---54d- feed_page--resourcePreviewContentWrapper--H1eHK",m="feed_page--resourcePreviewContentWrapperThumbnailSet--QlsAU feed_page--resourcePreviewContentWrapper--H1eHK",p="feed_page--resourcePreviewContentWrapperRadiusCursorOverride--kfxmj",h="feed_page--spinner--Z0jz3"},879319:(e,r,n)=>{n.d(r,{avatar:()=>u,genericSelectorExternalTeamsIcon:()=>c,genericSelectorInner:()=>s,genericSelectorModal:()=>o,genericSelectorModalCancel:()=>l,modal:()=>a,modalBackdrop:()=>i,workspaceSelectorModal:()=>m,workspaceSelectorModalInner:()=>p,workspaceTitleWrapper:()=>d});let a="index--modal--vmXNN",i="index--modalBackdrop--VqLCO",o="index--genericSelectorModal--3aSLC index--modalBackdrop--VqLCO text--fontPos13--xW8hS text--_fontBase--QdLsd",s="index--genericSelectorInner--HBJH2",l="index--genericSelectorModalCancel--WOjxG",c="index--genericSelectorExternalTeamsIcon--KL8jt",d="index--workspaceTitleWrapper--e9YT2",u="index--avatar--nIkKj",m="index--workspaceSelectorModal--KqRLO index--modalBackdrop--VqLCO",p="index--workspaceSelectorModalInner--6wXm6 index--genericSelectorInner--HBJH2"},724819:(e,r,n)=>{n.d(r,{mh:()=>a});let a="tags_container--tagsPublishModalBanner--nSLkS"},367762:(e,r,n)=>{},28752:(e,r,n)=>{n.d(r,{$J:()=>p,Az:()=>d,Hx:()=>i,Pl:()=>f,Wy:()=>a,Yg:()=>s,_D:()=>h,au:()=>_,bO:()=>g,ce:()=>l,fe:()=>m,ik:()=>o,oK:()=>c,y3:()=>u});let a="dragging_resource--draggingLibraryItem--ecbrh dragging_resource--_draggingLibraryItem--puqkp dragging_resource--_draggingResource--RyWym",i="dragging_resource--resizingDraggingLibraryItem--h5-J0 dragging_resource--_draggingLibraryItem--puqkp dragging_resource--_draggingResource--RyWym",o="dragging_resource--draggingFragment--ckSxw dragging_resource--_draggingResource--RyWym",s="dragging_resource--isDraggingOverCanvas--PgYby",l="dragging_resource--isDraggingLibraryItemOverCanvas---q3C7 dragging_resource--isDraggingOverCanvas--PgYby",c="dragging_resource--isDraggingFragmentOverCanvas--JzTDI dragging_resource--isDraggingOverCanvas--PgYby",d="dragging_resource--draggingWidget--t0JuE dragging_resource--_draggingResource--RyWym",u="dragging_resource--draggingTemplate--q-s5W dragging_resource--_draggingResource--RyWym",m="dragging_resource--draggingPlugin--krda0 dragging_resource--_draggingResource--RyWym",p="dragging_resource--draggingFace--3qq2- dragging_resource--_draggingResource--RyWym",h="dragging_resource--draggingTool--zfhjm dragging_resource--_draggingResource--RyWym",_="dragging_resource--draggingLibraryItemList--Cuvnd dragging_resource--draggingLibraryItem--ecbrh dragging_resource--_draggingLibraryItem--puqkp dragging_resource--_draggingResource--RyWym",g="dragging_resource--draggingLibraryItemListName--kNTa4 ellipsis--ellipsis--Tjyfa",f="dragging_resource--expandAnimation--4FamY"},550894:(e,r,n)=>{n.d(r,{RG:()=>a,bv:()=>s,dO:()=>o,ue:()=>i});let a="multiplayer_onboarding--contentNudge--KflAC",i="multiplayer_onboarding--footerContainerNudge--nBkOA",o="multiplayer_onboarding--footerButtonNudge--4CJm-",s="multiplayer_onboarding--boldText--c42DO"},126760:(e,r,n)=>{},896572:(e,r,n)=>{},973094:(e,r,n)=>{n.d(r,{$M:()=>i,Bi:()=>I,Fb:()=>h,Fl:()=>c,J7:()=>S,JQ:()=>P,KR:()=>l,Kb:()=>f,MP:()=>A,Nv:()=>C,Q3:()=>D,RR:()=>m,Sp:()=>N,Tz:()=>u,Vl:()=>s,cO:()=>o,cf:()=>x,cu:()=>g,dL:()=>b,g:()=>O,gW:()=>U,gf:()=>k,h1:()=>V,hI:()=>M,i2:()=>R,ii:()=>a,iz:()=>d,kU:()=>v,o6:()=>y,pB:()=>T,vG:()=>E,wH:()=>B,wp:()=>p,xB:()=>F,xc:()=>_,xm:()=>L,yZ:()=>w});let a="community_cards--cardLayoutContainer--nPcgb",i="community_cards--cardSubtitleRowSizing--9WRul",o="community_cards--cardBottomRowSizing--sT6xQ",s="community_cards--cardImageContainer--8ngfu base_community_cards--base_cardImageContainer--jpAKE base_community_cards--_hasBorder--kFIag",l="community_cards--cardHover_TopLeft--yGcAk",c="community_cards--cardBottomRow_MetadataContainer--QLUfh",d="community_cards--cardBottomRow_Metadata_HoverText--McZzP",u="community_cards--cardBottomRow_Metadata_HoverText_AnimateHeight--4wdBR community_cards--cardBottomRow_Metadata_HoverText--McZzP",m="community_cards--cardBottomRow_Metadata_AuthorName_WithHoverText--GJXdW",p="community_cards--cardBottomRowAvatarDropdown--2uCLR",h="community_cards--cardBottomRow_Metadata_AvatarContainer--6-CIe",_="community_cards--cardBottomRow_Metadata_TextContainer--ewZLG",g="community_cards--cardBottomRow_Metadata_PrimaryText--tktO3 text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",f="community_cards--base_cardBottomRow_Metadata_SecondaryText---Tn2M text--fontPos11--2LvXf text--_fontBase--QdLsd",E="community_cards--cardBottomRow_Metadata_AuthorName_WithDropdown--Fk7tl",y="community_cards--cardBottomRow_ResourceActionContainer--hgEhI",b="community_cards--cardBottomRow_ResourceActionButton--v146M",I="community_cards--cardHover_Center--hzP7R community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",T="community_cards--cardHover_Cover--kIVQS community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",v="community_cards--cardHover_BottomLeft--XlAgk community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",S="community_cards--cardHover_BottomRight--5So4- community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",w="community_cards--publisherDropdown--m7Bx2",A="community_cards--publisherDropdownContent_Row--iIBB3",N="community_cards--publisherDropdownContent_Row_Text--7hDpO text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",C="community_cards--creatorPreviewDummySpace_Name--fb75z",L="community_cards--creatorPreviewDummySpace_Avatar--LLBj8",O="community_cards--figjamTileMeta--Sh90c",R="community_cards--figjamTextMetadataCaret--bqK8s",P="community_cards--figjamMetadataContainer--4kXQt",D="community_cards--defaultCursor--K5TUO",k="community_cards--figjamTextMetadataContainer--LBupv",M="community_cards--figjamTextMetadataContainerFull--VPsvv",F="community_cards--figjamTextMetadataLockIcon--yazii",x="community_cards--figjamTextMetadataErrorContainer--XDHyT",U="community_cards--figjamTextMetadataName--wP7vv text--fontPos12--YsUAh text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",B="community_cards--subtextDetails--2-EUq",V="community_cards--subtextPublishers--BR4-w ellipsis--ellipsis--Tjyfa"},805443:(e,r,n)=>{n.d(r,{GC:()=>u,PJ:()=>d,Rt:()=>I,SL:()=>g,Tm:()=>E,Uz:()=>_,Vg:()=>s,Yk:()=>p,ZF:()=>f,aq:()=>l,bx:()=>h,g4:()=>a,g8:()=>i,i3:()=>y,jG:()=>m,qc:()=>b,qr:()=>c,vu:()=>o});let a="universal_posting_modal--loadingContainer--5giX-",i="universal_posting_modal--modalClose--eqgHH",o="universal_posting_modal--playgroundtoolbar--62laP",s="universal_posting_modal--grid--Jdvpe",l="universal_posting_modal--previewModal--XtKWL universal_posting_modal--modalBase--HkH3v",c="universal_posting_modal--footer--A-QeR",d="universal_posting_modal--footerText--Pp0H1 universal_posting_modal--_userSelectNone--dHUZk",u="universal_posting_modal--buttonGroup--C-atN",m="universal_posting_modal--scrollContainer--YtNZ-",p="universal_posting_modal--workspaceBarContainer--VHcn1",h="universal_posting_modal--desktopMessageContainer--QXif3 text--fontPos16--oMC-G text--_fontBase--QdLsd",_="universal_posting_modal--desktopMessageTitle--3XDQ-",g="universal_posting_modal--desktopMessageSubTitle--UGHlr",f="universal_posting_modal--searchQuery--07ulH",E="universal_posting_modal--universalPostingSearchContainer--BFSZI",y="universal_posting_modal--xIcon--9icra",b="universal_posting_modal--searchIcon--r7rXz search--searchIconBrowseIA--WYUGA search--searchIcon--0Agiv",I="universal_posting_modal--searchInput--fTx57 search--communityLandingSearchInput--Mtiu3 search--searchInput__OLD--m2Hef text--fontPos13--xW8hS text--_fontBase--QdLsd text--fontPos14--OL9Hp text--_fontBase--QdLsd"},623721:(e,r,n)=>{n.r(r),n.d(r,{_thumbnailBase:()=>f,buttons:()=>l,contextMenu:()=>T,fieldContainer:()=>o,fieldContainerFaded:()=>s,gridContainer:()=>h,label:()=>a,learnMore:()=>i,listContainer:()=>p,listItemContainer:()=>_,listItemRemoveButton:()=>g,offlineIcon:()=>P,outerContainer:()=>c,outerContainerBorderBottom:()=>d,publishCTA:()=>A,scrollContainer_grid:()=>m,scrollContainer_list:()=>u,skeletonText:()=>R,skeletonThumbnailGrid:()=>O,skeletonThumbnailList:()=>L,thumbnailGrid:()=>y,thumbnailGridBase:()=>E,thumbnailList:()=>I,thumbnailListBase:()=>b,tryAgain:()=>D,trying:()=>k,warning:()=>v,warningIcon:()=>N,warningIconList:()=>C,warningOfflineContainer:()=>S,warningPublish:()=>w});let a="preferred_values_instance_picker--label--to5M3",i="preferred_values_instance_picker--learnMore--zD-c7",o="preferred_values_instance_picker--fieldContainer--JJx3j",s="preferred_values_instance_picker--fieldContainerFaded--Z8-Oj preferred_values_instance_picker--fieldContainer--JJx3j",l="preferred_values_instance_picker--buttons---ohnK",c="preferred_values_instance_picker--outerContainer---jRbV",d="preferred_values_instance_picker--outerContainerBorderBottom--eh6jg preferred_values_instance_picker--outerContainer---jRbV",u="preferred_values_instance_picker--scrollContainer_list--kaH92",m="preferred_values_instance_picker--scrollContainer_grid--8kvKL",p="preferred_values_instance_picker--listContainer--BPie-",h="preferred_values_instance_picker--gridContainer--2LTF6",_="preferred_values_instance_picker--listItemContainer--a4t-g",g="preferred_values_instance_picker--listItemRemoveButton--HO05L",f="preferred_values_instance_picker--_thumbnailBase--eAxDp",E="preferred_values_instance_picker--thumbnailGridBase--O9Rrc preferred_values_instance_picker--_thumbnailBase--eAxDp",y="preferred_values_instance_picker--thumbnailGrid--XHfz- preferred_values_instance_picker--thumbnailGridBase--O9Rrc preferred_values_instance_picker--_thumbnailBase--eAxDp drilldown_item--_thumbnailContainer--kDsBt",b="preferred_values_instance_picker--thumbnailListBase--KpYBM preferred_values_instance_picker--_thumbnailBase--eAxDp",I="preferred_values_instance_picker--thumbnailList--nGJE1 drilldown_item--_thumbnailContainer--kDsBt preferred_values_instance_picker--thumbnailListBase--KpYBM preferred_values_instance_picker--_thumbnailBase--eAxDp",T="preferred_values_instance_picker--contextMenu--qSN6X",v="preferred_values_instance_picker--warning--bgA-c",S="preferred_values_instance_picker--warningOfflineContainer--9BcdC",w="preferred_values_instance_picker--warningPublish--fB8Mq preferred_values_instance_picker--warning--bgA-c",A="preferred_values_instance_picker--publishCTA--FlNCB",N="preferred_values_instance_picker--warningIcon--2TXXz",C="preferred_values_instance_picker--warningIconList--aDgpb preferred_values_instance_picker--warningIcon--2TXXz",L="preferred_values_instance_picker--skeletonThumbnailList--sAAp7 preferred_values_instance_picker--thumbnailListBase--KpYBM preferred_values_instance_picker--_thumbnailBase--eAxDp",O="preferred_values_instance_picker--skeletonThumbnailGrid--UVfqq preferred_values_instance_picker--thumbnailGridBase--O9Rrc preferred_values_instance_picker--_thumbnailBase--eAxDp",R="preferred_values_instance_picker--skeletonText--YCONM",P="preferred_values_instance_picker--offlineIcon--4JDDc",D="preferred_values_instance_picker--tryAgain--UNg1i",k="preferred_values_instance_picker--trying--HmoFd"},389785:(e,r,n)=>{n.d(r,{Gp:()=>h,NJ:()=>l,QK:()=>u,UV:()=>i,Ww:()=>d,_o:()=>a,dc:()=>p,kL:()=>s,mh:()=>o,r9:()=>m,sC:()=>_,xn:()=>c});let a="scrubbable_control--scrubCursorSvg--pav0z",i="scrubbable_control--containerInLiveScrub--P5bqH",o="scrubbable_control--scrubbingDisabled--TDxTX",s="scrubbable_control--container--Y1X4e",l="scrubbable_control--noScrubCursor--xmhcD",c="scrubbable_control--containerBordered--Pq8Lq raw_components--borderFocusWithin--BaipZ scrubbable_control--container--Y1X4e",d="scrubbable_control--inputNarrow--BHcl-",u="scrubbable_control--inactiveLabel--qI8ZV",m="scrubbable_control--disabled--vp-59",p="scrubbable_control--disableHoverBorder--y5AhV",h="scrubbable_control--variableControl--DqEyP",_="scrubbable_control--scrubbableInput--Sv3BW"},130400:(e,r,n)=>{n.d(r,{P:()=>a});let a="feature_callout--featureCallout---qPZ7"},520614:(e,r,n)=>{n.d(r,{kL:()=>a});let a="footer_banner--container--HxFNE"},120825:(e,r,n)=>{n.d(r,{B8:()=>c,BN:()=>s,Hi:()=>a,_K:()=>i,rH:()=>d,u$:()=>o,uu:()=>l});let a="fullscreen_accessibility_tree--debugModeNode--aGne7",i="fullscreen_accessibility_tree--debugModeNodeTransition--PP1HR",o="fullscreen_accessibility_tree--debugModeNodeRender1--sOwjz fullscreen_accessibility_tree--debugModeNode--aGne7",s="fullscreen_accessibility_tree--debugModeNodeRender2--d5GgH fullscreen_accessibility_tree--debugModeNode--aGne7",l="fullscreen_accessibility_tree--debugModeNodeRender3--ferOf fullscreen_accessibility_tree--debugModeNode--aGne7",c="fullscreen_accessibility_tree--debugModeNodeRender4--fiCWb fullscreen_accessibility_tree--debugModeNode--aGne7",d="fullscreen_accessibility_tree--node--WGNTu"},467492:(e,r,n)=>{n.d(r,{Kt:()=>l,LE:()=>o,NV:()=>s,Qq:()=>c,l8:()=>i,zc:()=>a});let a="action_option--iconContainer--LFlTl action_option--_iconContainerBase--FtOiz",i="action_option--checkMarkContainer--hq6Bt action_option--iconContainer--LFlTl action_option--_iconContainerBase--FtOiz",o="action_option--shortcut--w0R75",s="action_option--optionContainer--ru4UN",l="action_option--optionContainerLimitWidth--aaElZ",c="action_option--text--fSMIm"},456622:(e,r,n)=>{n.d(r,{Kn:()=>l,P3:()=>m,VO:()=>s,Xu:()=>d,hr:()=>c,i3:()=>p,ig:()=>i,kG:()=>u,q_:()=>o,vi:()=>a});let a="attachment--thumbnailButton--CfAkK",i="attachment--selectedThumbnailButton--x2RnD attachment--thumbnailButton--CfAkK",o="attachment--thumbnailImage--Jx4fa",s="attachment--lightOverlay--F8qzZ attachment--overlay--dIw1C",l="attachment--publishedThumbnailContainer--oFj0f",c="attachment--pendingThumbnailContainer--iL-xu",d="attachment--darkOverlay--l3K9x attachment--overlay--dIw1C",u="attachment--composerContainer--mP7Kx",m="attachment--deleteBadge--9aSjm",p="attachment--xIcon--hhlua"},884857:(e,r,n)=>{n.d(r,{$S:()=>c,Du:()=>S,F7:()=>o,GI:()=>b,In:()=>v,KK:()=>L,Lo:()=>_,MJ:()=>g,OM:()=>h,Qq:()=>A,SD:()=>P,UR:()=>s,VM:()=>l,WJ:()=>O,WO:()=>w,YD:()=>N,aW:()=>R,eX:()=>i,ex:()=>C,g2:()=>I,k8:()=>f,lo:()=>E,wC:()=>m,wG:()=>d,wb:()=>u,xH:()=>y,xS:()=>a,xe:()=>p,zl:()=>T});let a="thread_comment--threadHeaderLeft--gppoV thread_comment--_threadHeader--59aR8",i="thread_comment--threadHeaderRight--1gMsu thread_comment--_threadHeader--59aR8",o="thread_comment--threadHeaderContainer--0TaTS",s="thread_comment--threadHeaderButton--psBeY",l="thread_comment--threadHeaderButtonInactive--LhTNi",c="thread_comment--addReactionButton--n1Dj5",d="thread_comment--loader--GUeJt",u="thread_comment--threadContainer--oH8Ia",m="thread_comment--threadContainerCommunityDetailsPage--W6Cmv thread_comment--threadContainer--oH8Ia",p="thread_comment--threadContainerAnimated--OT8HU thread_comment--threadContainer--oH8Ia",h="thread_comment--threadContainerInner--Bzqm7",_="thread_comment--threadElement--4grcZ thread_comment--_threadElement--PYPeg text--fontPos11--2LvXf text--_fontBase--QdLsd text--fontPos13--xW8hS text--_fontBase--QdLsd",g="thread_comment--threadElementReplyContainer--6vz0m thread_comment--threadElement--4grcZ thread_comment--_threadElement--PYPeg text--fontPos11--2LvXf text--_fontBase--QdLsd text--fontPos13--xW8hS text--_fontBase--QdLsd",f="thread_comment--threadSubelementNoMargin--aGW6z",E="thread_comment--indentedQuickReplyThreadSubelement--PR9a5 thread_comment--threadSubelementNoMargin--aGW6z",y="thread_comment--quickReplyThreadSubelementNoMargin--MD3aF thread_comment--threadSubelementNoMargin--aGW6z",b="thread_comment--indentedThreadSubelement--gs1fI thread_comment--threadSubelement--7-le3 thread_comment--threadSubelementNoMargin--aGW6z",I="thread_comment--rightJustified--lK8hG",T="thread_comment--leftJustified--HHuN0",v="thread_comment--quickReplyThreadElement--cZUZj thread_comment--_threadElement--PYPeg text--fontPos11--2LvXf text--_fontBase--QdLsd text--fontPos11--2LvXf text--_fontBase--QdLsd",S="thread_comment--authorAvatar--xOCLt",w="thread_comment--authorHandle--fmYkb thread_comment--headerLabel--Oq7ar",A="thread_comment--text--FHTSU",N="thread_comment--grayLabel--6ZZkD thread_comment--headerLabel--Oq7ar",C="thread_comment--iconButtonSpace--VkGFf",L="thread_comment--attachmentsContainer--lOeTy",O="thread_comment--reactionsContainer--n2YcQ",R="thread_comment--resolvedIcon--YSM3V",P="thread_comment--loadingAvatar--82RED comment_cluster_elements--loadingSpinner--6derj"},573576:(e,r,n)=>{n.d(r,{Gm:()=>f,MP:()=>h,OX:()=>l,Sg:()=>o,U0:()=>i,bQ:()=>g,fP:()=>a,i8:()=>_,iQ:()=>u,mr:()=>s,o1:()=>E,oD:()=>d,q9:()=>p,uX:()=>m,xu:()=>c});let a="thread_comment_composer--inputSectionWrapper--Bxyab",i="thread_comment_composer--newComment--eYLj7",o="thread_comment_composer--composerEmpty--VgMY7",s="thread_comment_composer--highlighted--GPAOe",l="thread_comment_composer--editableTypeahead--9R6Yd text--fontPos13--xW8hS text--_fontBase--QdLsd",c="thread_comment_composer--leftComposerButtonGroup--6jQ3I",d="thread_comment_composer--submitUpArrowIcon--e8uT9",u="thread_comment_composer--submitUpArrowIconDisabled--iPBY3 thread_comment_composer--submitUpArrowIcon--e8uT9",m="thread_comment_composer--textButton--GUo5c",p="thread_comment_composer--editSubmitButtons--GyqGL",h="thread_comment_composer--replyComposerContainer---8DSl",_="thread_comment_composer--replyAuthorElement--qze1r",g="thread_comment_composer--errorFallback--G5K6y text--fontPos13--xW8hS text--_fontBase--QdLsd thread_comment_composer--inputSectionWrapper--Bxyab",f="thread_comment_composer--errorFallbackNewComment--xlyNp thread_comment_composer--errorFallback--G5K6y text--fontPos13--xW8hS text--_fontBase--QdLsd thread_comment_composer--inputSectionWrapper--Bxyab thread_comment_composer--newComment--eYLj7",E="thread_comment_composer--actions--7LRnN"},989326:(e,r,n)=>{},109176:(e,r,n)=>{n.d(r,{sx:()=>a});let a="fullscreen_view--fontsIcon--a4W8y"},154500:(e,r,n)=>{n.d(r,{GM:()=>a});let a="keyboard_shortcut_panel--spacerTab--yNO02"},486107:(e,r,n)=>{n.d(r,{QT:()=>a});let a="component_sidebar_asset_tile--focusableElementWrapper---mXHu"},948729:(e,r,n)=>{n.d(r,{FF:()=>h,GR:()=>m,Ib:()=>_,Ms:()=>l,N4:()=>g,NK:()=>f,OD:()=>y,Ol:()=>N,Tq:()=>S,UA:()=>E,Vk:()=>p,Vs:()=>a,XK:()=>O,Yc:()=>T,aC:()=>A,aS:()=>s,bF:()=>w,bo:()=>i,fh:()=>o,hs:()=>L,nl:()=>c,oV:()=>u,v:()=>v,vZ:()=>b,wi:()=>I,xC:()=>C,yg:()=>d});let a="library_item_tile--tile--okxBn",i="library_item_tile--tileFigJam--BkXTr library_item_tile--tile--okxBn",o="library_item_tile--tileGrid--wgcTu library_item_tile--tile--okxBn library_item_tile--_nameHover--idlJb library_item_tile--_variantHover--xfLPt",s="library_item_tile--tileGridBase--xcbaX library_item_tile--tile--okxBn library_item_tile--_nameHover--idlJb library_item_tile--_variantHover--xfLPt",l="library_item_tile--tileGridCompact--a7lPd library_item_tile--tileGridBase--xcbaX library_item_tile--tile--okxBn library_item_tile--_nameHover--idlJb library_item_tile--_variantHover--xfLPt",c="library_item_tile--tileList--yPfDI library_item_tile--tile--okxBn library_item_tile--_variantHover--xfLPt library_item_tile--_tileListBase--jZpFH",d="library_item_tile--tileListLarge--aoNFs library_item_tile--tile--okxBn library_item_tile--_variantHover--xfLPt library_item_tile--_tileListBase--jZpFH",u="library_item_tile--tileListLargeNoPadding--QnDtc library_item_tile--tile--okxBn library_item_tile--_variantHover--xfLPt library_item_tile--_tileListBase--jZpFH",m="library_item_tile--thumbAndNameWrapper--FT1HH",p="library_item_tile--thumbAndNameWrapperGrayscale--FGh2L library_item_tile--thumbAndNameWrapper--FT1HH",h="library_item_tile--thumb--MNoWO",_="library_item_tile--thumbWithShadowOnHover--V8LMf library_item_tile--thumb--MNoWO",g="library_item_tile--thumbScaledDown--usdag library_item_tile--thumb--MNoWO",f="library_item_tile--thumbFullPage--ox1s1",E="library_item_tile--nameGrid--rnFsh library_item_tile--name---mWwN ellipsis--ellipsis--Tjyfa",y="library_item_tile--nameList--ezsvn library_item_tile--name---mWwN ellipsis--ellipsis--Tjyfa",b="library_item_tile--nameListLarge--5iAF2 library_item_tile--name---mWwN ellipsis--ellipsis--Tjyfa",I="library_item_tile--thumbWrapper--fmgue library_item_tile--thumbWrapperNoBg--dq7A6",T="library_item_tile--thumbWrapperNoBg--dq7A6",v="library_item_tile--thumbWrapperNoBgListView--zVBTw library_item_tile--thumbWrapperNoBg--dq7A6",S="library_item_tile--thumbWrapperListView--zLZLK library_item_tile--thumbWrapperNoBgListView--zVBTw library_item_tile--thumbWrapperNoBg--dq7A6",w="library_item_tile--variableSetThumb--cCo2-",A="library_item_tile--variableTypeIcon--58dL0",N="library_item_tile--thumbContainer--7rKmQ",C="library_item_tile--numVariants--tOsFg library_item_tile--_numVariantsBase--039pu",L="library_item_tile--numVariantsList--aGNbh library_item_tile--_numVariantsBase--039pu",O="library_item_tile--tileBorder--clelb"},243074:(e,r,n)=>{},578482:(e,r,n)=>{n.d(r,{H0:()=>d,Mj:()=>u,RU:()=>a,Sx:()=>s,T5:()=>o,g_:()=>c,j3:()=>l,nT:()=>i});let a="8px",i="8px",o="71px",s="40px",l="inset 0px 0px 0px 0.5px var(--color-border)",c="5px",d="16px",u="16px"},164655:(e,r,n)=>{},450503:(e,r,n)=>{},170460:(e,r,n)=>{n.d(r,{Bj:()=>g,DE:()=>f,Dy:()=>a,Lo:()=>u,S8:()=>l,VW:()=>s,bu:()=>h,hD:()=>E,iU:()=>d,iY:()=>p,or:()=>i,p:()=>_,u0:()=>o,vD:()=>m,z8:()=>c});let a="multiplayer_cursors--cursor--n8aPY",i="multiplayer_cursors--cursorPointer--ya3cR",o="multiplayer_cursors--cursorImage--hYFE4",s="multiplayer_cursors--nameContainer--O1WsV",l="multiplayer_cursors--nameContainerCloserToCursor--8L8SW",c="multiplayer_cursors--isPointingRight--eOPEm",d="multiplayer_cursors--message--1NMSI multiplayer_cursors--nameContainer--O1WsV",u="multiplayer_cursors--messageText--jI1cQ",m="multiplayer_cursors--topMessageLine--uwXou",p="multiplayer_cursors--cursorName--i776D",h="multiplayer_cursors--cursorNameSmall--Cy-9n",_="multiplayer_cursors--multiplayerHighFiveCenteringContainer--knxoP",g="multiplayer_cursors--multiplayerPointerForHighFive--hpa2g",f="multiplayer_cursors--multiplayerPointerForHighFiveHidden--V-bo-",E="multiplayer_cursors--chatBackground--hGJJf"},921100:(e,r,n)=>{n.d(r,{E7:()=>u,EA:()=>c,EU:()=>d,P0:()=>l,TK:()=>o,V3:()=>a,W5:()=>i,aN:()=>s});let a="object_row--layerIcon--dTOdu",i="object_row--customLayerIcon--SlCXj object_row--layerIcon--dTOdu",o="object_row--customMenuLayerIcon--JK53S object_row--layerIcon--dTOdu",s="object_row--customComponentMenuLayerIcon--SWH-7 object_row--layerIcon--dTOdu",l="object_row--iconWrapper--ivRSW",c="object_row--stickyIconWrapper--UycmN",d="object_row--stickyIconWrapperOutOfView--riwK8",u="object_row--iconOverlay--gPp-S"},376600:(e,r,n)=>{},488819:(e,r,n)=>{n.d(r,{X3:()=>a,e3:()=>l,f$:()=>i,lo:()=>s,x7:()=>o});let a="chit--chitThumbnail--KxCGp",i="chit--chitAlpha--Mn-aK",o="chit--chit--WdWdx",s="chit--chitBorder--ydYLm",l="chit--chitShowFocus--M0ub5 chit--chit--WdWdx"},587997:(e,r,n)=>{n.d(r,{DV:()=>p,Dn:()=>u,FL:()=>E,KQ:()=>_,MC:()=>b,N4:()=>m,Om:()=>f,PD:()=>o,VM:()=>I,Y7:()=>h,cL:()=>d,ed:()=>i,gn:()=>s,lN:()=>g,lS:()=>c,l_:()=>T,lo:()=>l,v9:()=>a,yr:()=>y});let a="collapsible_property_panel--showOnTitleHover--yqPoD",i="collapsible_property_panel--panelTitleRowOuter--i5K0R",o="collapsible_property_panel--emptyPanelTitleRowOuter---pBf9 collapsible_property_panel--panelTitleRowOuter--i5K0R",s="collapsible_property_panel--ui3Row--9nUnV collapsible_property_panel--_hoverTarget--eRHji",l="collapsible_property_panel--ui3RowSelected--FZgmc",c="collapsible_property_panel--ui3RowButtons--xHUX3",d="collapsible_property_panel--styleTitle--a7BMw",u="collapsible_property_panel--panelTitle--4vpTS raw_components--panelTitle--VAQQA",m="collapsible_property_panel--titleButton--7yILK",p="collapsible_property_panel--fadeOutOnTitleUnhover--15rtL",h="collapsible_property_panel--panelTitleRowInGrid--Kq3wh collapsible_property_panel--panelTitleRow--AV-Sv collapsible_property_panel--_hoverTarget--eRHji",_="collapsible_property_panel--panelTitleRowInGridWithButton--8yQlq",g="collapsible_property_panel--panelEmptyTitleRowInGrid--TlCXf collapsible_property_panel--panelEmptyTitleRow--vDg0z collapsible_property_panel--panelTitleRow--AV-Sv collapsible_property_panel--_hoverTarget--eRHji",f="collapsible_property_panel--panelStyleTitle--R1Tqo collapsible_property_panel--panelTitle--4vpTS raw_components--panelTitle--VAQQA",E="collapsible_property_panel--panelMixedMessage--UuCKj",y="collapsible_property_panel--panelTitleText--vFGYT",b="collapsible_property_panel--titleButtons--k6Lxk",I="collapsible_property_panel--dropdownOption--cy1JZ",T="collapsible_property_panel--updateIcon--0YXMO"},911216:(e,r,n)=>{n.d(r,{A:()=>a,C_:()=>h,Rb:()=>u,Tu:()=>i,W1:()=>m,gE:()=>s,hg:()=>c,lG:()=>l,p3:()=>d,p5:()=>o,wH:()=>p});let a="style_title--collapsedPanelPreviewTitle--jpW2- collapsible_property_panel--styleRowTitle--YsCp4",i="style_title--readOnly--6RqsN",o="style_title--selectedCollapsedPanelPreviewTitle--x1waj style_title--collapsedPanelPreviewTitle--jpW2- collapsible_property_panel--styleRowTitle--YsCp4",s="style_title--numTextStyleOverrides--VcFQr",l="style_title--narrowCollapsedPanelPreviewTitle---OnQ7",c="style_title--collapsedPanelPreviewIcon--TYMgV",d="style_title--styleTitleName--lJDZI ellipsis--ellipsis--Tjyfa",u="style_title--customTitleName--Y--0d",m="style_title--ui3SelectionStyleItemTitle--bYnM2",p="style_title--selected--9K15m",h="style_title--secondarySelected--gqSFt"},437457:(e,r,n)=>{n.d(r,{Lt:()=>c,Qz:()=>o,Wv:()=>a,be:()=>d,d_:()=>p,f0:()=>m,hF:()=>u,hL:()=>h,in:()=>i,kL:()=>s,t_:()=>l});let a="combo_box--selectInputExpanded--SgrsN select--selectInputExpanded--Lz6m4",i="combo_box--focused--vZXh1 select--selectInputFocused--c-NQ7",o="combo_box--containerDisabled--bNA2c combo_box--_container--uIFGE raw_components--singleRowHeight--dKM4t",s="combo_box--container--Vml-n combo_box--_container--uIFGE raw_components--singleRowHeight--dKM4t select--comboBoxShowChevronOnHover--rVuud",l="combo_box--selectDisabled--yJxRy combo_box--_select--T75K- select--comboBoxSelectDisabled--EWdld select--_comboBoxSelect--zpLTH",c="combo_box--select--JMl-q select--comboBoxSelect--T-iQ- select--_comboBoxSelect--zpLTH combo_box--_select--T75K- select--comboBoxSelectDisabled--EWdld select--_comboBoxSelect--zpLTH",d="combo_box--selectInput--fikB4 raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",u="combo_box--input--CW6xE raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",m="combo_box--scrubbableControl--t9lCI raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t combo_box--_scrubbableControlBase--jZV-D",p="combo_box--withSvg--BjUJI",h="combo_box--noBorderOnFocus--7Ago-"},179069:(e,r,n)=>{n.d(r,{TQ:()=>a});let a="containing_assets_panel--componentName--Lwkmx"},914683:(e,r,n)=>{n.d(r,{D6:()=>i,kF:()=>a});let a="asset_description_lexical_editor--contentEditableReadOnly--BlHWQ asset_description_lexical_editor--contentEditableBase--nTcyo",i="asset_description_lexical_editor--contentEditableCollapsed--H601A asset_description_lexical_editor--contentEditableReadOnly--BlHWQ asset_description_lexical_editor--contentEditableBase--nTcyo"},501891:(e,r,n)=>{n.d(r,{$C:()=>l,Bt:()=>E,EA:()=>p,I0:()=>d,LO:()=>a,MC:()=>T,N1:()=>f,Qp:()=>o,VM:()=>v,We:()=>c,YF:()=>s,Z0:()=>i,iB:()=>b,l_:()=>S,me:()=>h,qw:()=>g,sK:()=>m,t4:()=>_,u$:()=>I,vF:()=>y,vS:()=>u});let a="instance_panel--panelTitleRow--TN-S6",i="instance_panel--collapsibleTitleRow--YQUPk",o="instance_panel--instanceNameContainer--DjJ1a",s="instance_panel--isInComponentPlayground--jSk5E",l="instance_panel--instanceIcon--9Rb3Q",c="instance_panel--pickerButtonText--37jAr ellipsis--ellipsis--Tjyfa",d="instance_panel--propPillContainer--uUMdd",u="instance_panel--pickerButton--aETR-",m="instance_panel--selectedPickerButton--PqYr4",p="instance_panel--sublayerPanelWithHover--jgbud",h="instance_panel--sublayerPanelMixedState--h9Vb4",_="instance_panel--chevronIcon--0j2aS",g="instance_panel--viewOnlyPickerButton--70Wl5 instance_panel--pickerButton--aETR-",f="instance_panel--selectInstanceIcon--9lKUr",E="instance_panel--ui3InstanceNameContainer--2BVOa instance_panel--instanceNameContainer--DjJ1a",y="instance_panel--instanceNameTitle--khSFz ellipsis--ellipsis--Tjyfa",b="instance_panel--ui3InstanceNameTitle--RLDS5 ellipsis--ellipsis--Tjyfa",I="instance_panel--instanceNameTitleWide--InQRA instance_panel--instanceNameTitle--khSFz ellipsis--ellipsis--Tjyfa",T="instance_panel--titleButtons--8ha4T",v="instance_panel--dropdownOption--g0g2W",S="instance_panel--updateIcon--4lm0w"},918061:(e,r,n)=>{n.d(r,{UZ:()=>i,ai:()=>a});let a="layer_panel--chevron--UUQ0D",i="layer_panel--variableSetModeInput--SQzwi"},244979:(e,r,n)=>{n.d(r,{$r:()=>D,BT:()=>L,Bx:()=>K,Cv:()=>O,EC:()=>c,EX:()=>o,FV:()=>A,GB:()=>I,GI:()=>s,H:()=>u,IX:()=>f,I_:()=>h,Is:()=>T,Kx:()=>W,L3:()=>P,MX:()=>S,NI:()=>R,O1:()=>v,QK:()=>x,RK:()=>k,TL:()=>m,Tp:()=>U,Xd:()=>y,YJ:()=>_,Z6:()=>w,cD:()=>i,eV:()=>a,hj:()=>Y,kA:()=>E,kv:()=>G,mH:()=>H,n1:()=>d,np:()=>C,os:()=>g,p:()=>B,py:()=>p,vc:()=>b,wM:()=>N,wh:()=>l,x7:()=>M,zc:()=>F,zm:()=>V});let a="paint_panels--variableValue--2xpUO ellipsis--ellipsis--Tjyfa",i="paint_panels--typeContainer--e-3I2",o="paint_panels--colorInput--nSz13",s="paint_panels--typeContainerHidden--5zTrp paint_panels--typeContainer--e-3I2",l="paint_panels--colorInputHidden--ZojfD paint_panels--colorInput--nSz13",c="paint_panels--opacityInputHidden--I2GEk",d="paint_panels--opacityInputContainer--oqlsk",u="paint_panels--strokeInput--Zg8DO raw_components--flushLeft--YH-5P",m="paint_panels--strokeWeight---jmn2 raw_components--borderFocusWithin--BaipZ",p="paint_panels--strokeWeightNew--HHR3i raw_components--borderFocusWithin--BaipZ",h="paint_panels--strokeWeightVar--gxKxA",_="paint_panels--strokeWeightVarNew--CkN1w",g="paint_panels--strokeAlign--UKGAx",f="paint_panels--strokeAlignNew--6VVfv",E="paint_panels--strokeAlignInput--P3fhz",y="paint_panels--strokeAlignChevron--9p1Hk",b="paint_panels--leftEndCap--tHF9y",I="paint_panels--swapCap--eAzkX",T="paint_panels--rightEndCap--Oy9SG",v="paint_panels--endPointSvg--E5Qlh",S="paint_panels--endPointSvgShort--YHOkF",w="paint_panels--endPointOption--NrunB",A="paint_panels--advancedStroke--653Nf",N="paint_panels--paintPanelColorValueContainer--squRD paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",C="paint_panels--fitToSizePaintPanelColorValueContainer--XMkEF paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",L="paint_panels--paintPanelVariableValueContainer--bxDVz paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",O="paint_panels--fitToSizePaintPanelVariableValueContainer---k9XP paint_panels--paintPanelVariableValueContainer--bxDVz paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",R="paint_panels--paintPanelValueSelected--QHJsV",P="paint_panels--paintPanelValueSelectedSecondary--6uSZ2",D="paint_panels--paintPanelIconContainer--l4u-f",k="paint_panels--paintPanelRow--NZUf3",M="paint_panels--chit--twQEy",F="paint_panels--iconContainer--1gum-",x="paint_panels--inactiveLabel--gsLwE transform_panel--inactiveLabel--fPCxr raw_components--iconInsideBorderFocusWithin--2g7fO",U="paint_panels--onDrop--Va3gz",B="paint_panels--paintRowIcons--5b-UG",V="paint_panels--iconVisibleOnHover--1rweo",G="paint_panels--checkbox--1acob",H="paint_panels--checkboxLabel--q0GyI",W="paint_panels--checkboxLabelRow--ZNgFg",K="paint_panels--deletedIcon--nXIQH",Y="paint_panels--ui3EndpointFlipped--JAuAi"},697945:(e,r,n)=>{n.d(r,{Rh:()=>o,Tw:()=>a,iw:()=>i});let a="prototype_video_playback_panel--videoErrorPanelFooter--cdsDJ",i="prototype_video_playback_panel--ui3VideoErrorText--l6t6c",o="prototype_video_playback_panel--ui3VideoErrorLink--y1RWa"},447141:(e,r,n)=>{n.d(r,{Ah:()=>E,Bg:()=>T,CZ:()=>C,DS:()=>k,Dn:()=>L,EA:()=>d,LE:()=>w,LJ:()=>u,No:()=>f,O1:()=>h,PB:()=>b,PQ:()=>a,Pf:()=>s,Tz:()=>D,U:()=>g,X0:()=>S,Z4:()=>p,Zz:()=>N,_Z:()=>c,a2:()=>I,ai:()=>_,bW:()=>R,ht:()=>A,iY:()=>P,kR:()=>i,l$:()=>v,pc:()=>m,pq:()=>o,sI:()=>O,vR:()=>y,wh:()=>l});let a="raw_components--border--SKh2u",i="raw_components--rowSelectedSecondary---U7Us raw_components--rowSelected--M2Eip",o="raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6",s="raw_components--label--4LcC7 raw_components--base--T7G0z",l="raw_components--labelInactive--tm1fU raw_components--label--4LcC7 raw_components--base--T7G0z",c="raw_components--textInput--t9D8g raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",d="raw_components--textInputSoftDisabled--M5O7I",u="raw_components--noPlaceholderLine--KBoD7",m="raw_components--textAreaInput--mi1Ag raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",p="raw_components--noLeftBorder--QE-ZB",h="raw_components--squareRightBorder--ktojw",_="raw_components--chevron--nJiSt",g="raw_components--wide--F33jp",f="raw_components--transparentIconButtonEnabled--l2bm3 raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6",E="raw_components--iconButtonDisabled--SoTjK raw_components--_iconButton---ybo6",y="raw_components--iconButtonSelected--bJibL raw_components--_iconButton---ybo6",b="raw_components--outlineButton--FyUoF",I="raw_components--modalPanel--wmDfl",T="raw_components--propertiesPanelErrorBox--N2p6o",v="raw_components--singleRow--W5dYN raw_components--_singleRow--yTGIY raw_components--singleRowHeight--dKM4t raw_components--_row--rHucX raw_components--row--NThzm",S="raw_components--row200--Dgjc6 raw_components--row200Height--wotRv raw_components--_row--rHucX",w="raw_components--row150--2Q0-i raw_components--_rowHeight150--ZzVcZ raw_components--_row--rHucX",A="raw_components--row125--J20Ob raw_components--_rowHeight125--G2mEi raw_components--_row--rHucX",N="raw_components--labelRow--wxp77 raw_components--singleRow--W5dYN raw_components--_singleRow--yTGIY raw_components--singleRowHeight--dKM4t raw_components--_row--rHucX raw_components--row--NThzm",C="raw_components--rowSelected--M2Eip",L="raw_components--panelTitle--VAQQA",O="raw_components--panelTitleWithoutChevron--qIjza",R="raw_components--collapsiblePanelTitle--PXa3p",P="raw_components--panelTitleExtended--GoX-m raw_components--panelTitle--VAQQA",D="raw_components--panelTitleFaded--cUUkM raw_components--panelTitle--VAQQA",k="raw_components--panelIconContainer--V9E3Z"},584999:(e,r,n)=>{n.d(r,{AN:()=>g,BB:()=>m,BI:()=>w,CU:()=>L,Df:()=>V,H9:()=>B,HT:()=>E,Hi:()=>l,IK:()=>f,IZ:()=>A,JB:()=>k,O:()=>x,Om:()=>M,P2:()=>y,QF:()=>T,Qc:()=>p,Qw:()=>_,UY:()=>o,Vb:()=>h,Wm:()=>I,ZM:()=>P,ai:()=>u,fE:()=>O,hF:()=>s,hH:()=>i,kL:()=>a,l8:()=>N,nJ:()=>C,pR:()=>c,re:()=>R,sS:()=>F,tN:()=>d,uK:()=>v,w$:()=>U,x1:()=>b,x7:()=>G,yF:()=>S,z6:()=>D});let a="select--container--UJhOt raw_components--singleRowHeight--dKM4t",i="select--hiddenInput--3smCs raw_components--selectHiddenInput--bJ8vl",o="select--safariVoiceover--meUJ0",s="select--input--meQUx raw_components--base--T7G0z raw_components--border--SKh2u raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t ellipsis--ellipsis--Tjyfa",l="select--fauxFocus--D1GLI",c="select--inputDisabled--08EdX select--input--meQUx raw_components--base--T7G0z raw_components--border--SKh2u raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t ellipsis--ellipsis--Tjyfa",d="select--inputTextWrapper--kEwIr",u="select--chevron--KfTY2",m="select--inputWithSvg--t6hLE",p="select--inputAlignRight--5HWz5",h="select--inputSvg--Sqy6u",_="select--backgroundOnHover--5kQnp",g="select--inputText--I3JIv select--inputTextWrapper--kEwIr",f="select--inputTextTruncated--j6p-H ellipsis--ellipsis--Tjyfa",E="select--inputTextFill--H3tO-",y="select--dropdownContainer--0zweb _overlayBase--_overlayBase--Rkj8l",b="select--dropdownScrollClip--5ft6D",I="select--dropdown--8DAM-",T="select--dropdownContentWrapper--yDAla",v="select--option--8gulr dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",S="select--divider--HfbAX",w="select--optionFocused--8DSsx select--option--8gulr dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",A="select--optionDisabled--fEanh select--option--8gulr dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",N="select--optionHeader--34zhZ select--option--8gulr dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",C="select--optionTruncatedText--QqUBO",L="select--optionTextRemoveRightPadding--ULI6k",O="select--optionFullWidth--sW3Zl",R="select--optionText--D3BVM select--optionTruncatedText--QqUBO ellipsis--ellipsis--Tjyfa",P="select--rightLabel--I-ojL",D="select--check--xQ8c3",k="select--rightCheck--UdnTu",M="select--rightCheckText--vWTPu",F="select--topScrollIndicator--nys8N select--scrollIndicator--U0Wy-",x="select--bottomScrollIndicator--C7EE7 select--scrollIndicator--U0Wy-",U="select--scrollIndicatorChevron--9-te-",B="select--optionIcon--yngNx",V="select--iconToReplaceCheck--MMwXJ",G="select--chit--WI9C6"},329652:(e,r,n)=>{n.d(r,{Kk:()=>s,be:()=>a,j1:()=>o,kk:()=>i});let a="stack_panel_v4--selectInput--DdAPZ",i="stack_panel_v4--comboBoxInput--ewblc dimension_input--comboBoxInput--J0jWQ",o="stack_panel_v4--comboBoxPillsContainer--BiDzq dimension_input--comboBoxPillsContainer--Uv3fj",s="stack_panel_v4--icon--PJRhG"},252957:(e,r,n)=>{n.d(r,{QK:()=>i,hF:()=>a});let a="transform_panel--input--nRDX0 raw_components--flushLeft--YH-5P",i="transform_panel--inactiveLabel--fPCxr raw_components--iconInsideBorderFocusWithin--2g7fO"},834447:(e,r,n)=>{n.d(r,{Od:()=>c,Pf:()=>l,Pv:()=>s,RF:()=>a,Y7:()=>u,by:()=>p,hF:()=>d,ig:()=>m,kb:()=>i,pG:()=>o});let a="ui3_modal_rows--ui3TwoColumnModalRow--ktXqt ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",i="ui3_modal_rows--left--5-4DR",o="ui3_modal_rows--right--TTLb7",s="ui3_modal_rows--ui3OneColumnModalRow--wLU6K ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",l="ui3_modal_rows--label--vQA2E",c="ui3_modal_rows--ui3LabelOneInputRow--kpsQB ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",d="ui3_modal_rows--input--WH2lM",u="ui3_modal_rows--ui3LabelTwoInputRow---zU18 ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",m="ui3_modal_rows--leftInput--pkjk8",p="ui3_modal_rows--rightInput--mOj6z"},261579:(e,r,n)=>{n.d(r,{$6:()=>i,G:()=>c,Z7:()=>l,cF:()=>d,mq:()=>o,nM:()=>s,o3:()=>a});let a="variable_mode_entries--variableSetName--hmoV4",i="variable_mode_entries--ui3VariableSetName--eqW9C variable_mode_entries--variableSetName--hmoV4",o="variable_mode_entries--variableSetModeSelect--P6crF",s="variable_mode_entries--row--8OoWO",l="variable_mode_entries--infoIconContainer--DmUPj",c="variable_mode_entries--infoIcon--JylKl",d="variable_mode_entries--infoOption--fKiWW"},722511:(e,r,n)=>{n.d(r,{nW:()=>a,zF:()=>i});let a="plugin_parameter_entry--pillIcon--y5eMK",i="plugin_parameter_entry--pluginLabelIcon--ct5AV plugin_parameter_entry--pillIcon--y5eMK"},125906:(e,r,n)=>{n.d(r,{Tk:()=>a,ZR:()=>i});let a="quick_actions--noresult--qrETa quick_actions--centerItemsVertically--4COtP",i="quick_actions--pluginIcon--d9b13"},371325:(e,r,n)=>{n.d(r,{kv:()=>i,wn:()=>a});let a="quick_actions--resultDisabled--tjdlc",i="quick_actions--checkbox--jhzha"},42296:(e,r,n)=>{n.d(r,{BK:()=>L,C7:()=>c,EI:()=>l,Ge:()=>_,K$:()=>m,Km:()=>N,MT:()=>x,O5:()=>y,QD:()=>R,Rt:()=>W,VV:()=>s,Vr:()=>C,Vw:()=>V,WY:()=>B,Wh:()=>a,XE:()=>h,_L:()=>d,a1:()=>v,aK:()=>D,ai:()=>k,az:()=>A,cu:()=>P,dn:()=>M,hC:()=>G,hg:()=>w,i3:()=>H,me:()=>I,qN:()=>O,qb:()=>p,qc:()=>U,r9:()=>o,rR:()=>i,ro:()=>K,wH:()=>f,ws:()=>u,yo:()=>E,yx:()=>g,zK:()=>F,zW:()=>T,zb:()=>b,zk:()=>S});let a="multiplayer_view--multiplayerView---Lf04",i="multiplayer_view--onboardingTarget--Ja9Ak",o="multiplayer_view--disabled--K9QcN",s="multiplayer_view--users--DcWtM",l="multiplayer_view--usersContainer--bzaNI",c="multiplayer_view--userIconView--XlLWC",d="multiplayer_view--userIconViewHorizontal--CRVT- multiplayer_view--userIconView--XlLWC",u="multiplayer_view--userIconAvatar--qt4Vz",m="multiplayer_view--userIconAvatarLoading--s5PPI",p="multiplayer_view--normal--xHQOT",h="multiplayer_view--avatarWithCollaborationToolsContainer--7lq5U",_="multiplayer_view--fullHeightSidebarAvatarWithToolsOverrides--Z5S16",g="multiplayer_view--fullHeightSidebarAvatarWithToolsOverridesWithOverflow--hExNS multiplayer_view--fullHeightSidebarAvatarWithToolsOverrides--Z5S16",f="multiplayer_view--selected--PrEy3",E="multiplayer_view--hovered--X1V8M",y="multiplayer_view--textAvatarContainer--SwGAW",b="multiplayer_view--overflowTextAvatar--ouAgh multiplayer_view--textAvatar--P-4wz",I="multiplayer_view--separator--d7XC2",T="multiplayer_view--separatorContainer--3NXhc",v="multiplayer_view--overflowDropdown--5PCUX",S="multiplayer_view--multiplayerUserCount--VN79F",w="multiplayer_view--fileSeenStateSubtitle--xTYdr",A="multiplayer_view--avatarWithGroupActions--hdn0o",N="multiplayer_view--avatarWithGroupActionsTightened---blv6",C="multiplayer_view--groupActions--C2jLX",L="multiplayer_view--presenterButtonAction--7CCnt",O="multiplayer_view--pointingDropdown--4CD2d",R="multiplayer_view--pointingDropdownAdditionalPaddingUI2--zc-aF",P="multiplayer_view--listBox--9RJ5F",D="multiplayer_view--listBoxNew--z88cs",k="multiplayer_view--chevron--Vn-C1",M="multiplayer_view--ui3SearchContainer--KQpDt",F="multiplayer_view--ui3SearchContainerNew--brZ7S",x="multiplayer_view--searchContainer--q6zE8",U="multiplayer_view--searchIcon--C9Aoz",B="multiplayer_view--xIconButtonContainerWrapper--wSUus",V="multiplayer_view--xIconButtonContainerNew--3CYqO",G="multiplayer_view--xIconButtonContainer--vYjh1",H="multiplayer_view--xIcon--Oq2hB",W="multiplayer_view--searchInput--f43Gp text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",K="multiplayer_view--withOverflow---4XmW"},289566:(e,r,n)=>{n.d(r,{Dn:()=>b,FE:()=>A,FH:()=>g,Jk:()=>m,LY:()=>y,QO:()=>v,S0:()=>_,Sn:()=>w,WB:()=>f,Xf:()=>i,Y7:()=>d,cm:()=>p,hF:()=>s,i5:()=>h,l4:()=>o,om:()=>c,r2:()=>T,r4:()=>I,sH:()=>a,sy:()=>S,vu:()=>N,wR:()=>l,wg:()=>u,zj:()=>E});let a="zoom_menu--zoomMenuBase--Uy7YH",i="zoom_menu--zoomMenu--3OqMw",o="zoom_menu--fullHeightSidebarZoomMenu--ElxlP",s="zoom_menu--input---hdA- input--darkInput--zfbnG",l="zoom_menu--zoomMenuContainer--DJXOL",c="zoom_menu--zoomMenuContainerActive--E7m0j",d="zoom_menu--fullHeightSidebarZoomMenuContainer--So738",u="zoom_menu--fullHeightSidebarZoomMenuContainerActive--jPaQb zoom_menu--fullHeightSidebarZoomMenuContainer--So738",m="zoom_menu--fullHeightSidebarZoomMenuContainerCollapsed--FpFJm zoom_menu--fullHeightSidebarZoomMenuContainer--So738",p="zoom_menu--zoomAmount--Qb6gL",h="zoom_menu--fullHeightSidebarZoomAmount---M-Dz zoom_menu--zoomAmount--Qb6gL",_="zoom_menu--fullHeightSidebarZoomAmountActive--EKFn- zoom_menu--fullHeightSidebarZoomAmount---M-Dz zoom_menu--zoomAmount--Qb6gL",g="zoom_menu--chevronContainer---jqeH",f="zoom_menu--fullHeightSidebarChevronActive--s0s-C",E="zoom_menu--zoomInputContainer---Xqu1",y="zoom_menu--middleZoomButton--17GYR",b="zoom_menu--zoomMiddleChevronContainer--XxlkP",I="zoom_menu--zoomMiddleChevronContainerActive--dN2OQ zoom_menu--zoomMiddleChevronContainer--XxlkP",T="zoom_menu--zoomMiddleChevronSVGContainer--6TlCz",v="zoom_menu--zoomMinus--wljce",S="zoom_menu--zoomPlus--B-iye",w="zoom_menu--enabled--JWySc",A="zoom_menu--feedZoomPan--AxC05",N="zoom_menu--active--WlOsd"},610265:(e,r,n)=>{n.d(r,{Bx:()=>u,EE:()=>s,Gq:()=>c,Hw:()=>d,Io:()=>i,Mk:()=>o,Nt:()=>m,Qq:()=>l,_C:()=>p,zr:()=>a});let a="variable_pill--root--0ibUT",i="variable_pill--pill--NU8eR variable_pill_base--pillBase--HIf9B",o="variable_pill--useHover--S6o02",s="variable_pill--forceHover--EDu9s",l="variable_pill--text--Fm5k5",c="variable_pill--invalid--dxyCJ",d="variable_pill--nameAndIcons--Cyvcc",u="variable_pill--deletedIcon--QaRlG",m="variable_pill--inferredIcon--eLJef",p="variable_pill--isHovered--qumV3"},640001:(e,r,n)=>{n.d(r,{Er:()=>s,Fi:()=>p,JJ:()=>i,N:()=>m,Q_:()=>d,RH:()=>o,Uq:()=>c,eK:()=>u,pv:()=>a,xH:()=>l});let a="variable_pill_base--pillBase--HIf9B",i="variable_pill_base--pillHasIcon--qR8Mw",o="variable_pill_base--pillSelected--WuPhz",s="variable_pill_base--pillDisableHover--A9znd",l="variable_pill_base--pillDefault--5YSwx",c="variable_pill_base--pillDefaultComponent--GMeSg",d="variable_pill_base--pillDisabled--Xci9C",u="variable_pill_base--pillDisabledTertiary--C2fJb",m="variable_pill_base--pillInSelection--HupPT",p="variable_pill_base--pillNarrow--Oai69"},376272:(e,r,n)=>{n.d(r,{QW:()=>i,qS:()=>a});let a="go_to_stripe_button--badge--aJn3P text--fontPos12--YsUAh text--_fontBase--QdLsd",i="go_to_stripe_button--warningIcon--eeAU7"},235027:(e,r,n)=>{n.d(r,{a0:()=>o,bV:()=>i,jy:()=>a});let a="browse_explore_list--seeAll--8L87Q text--fontPos13--xW8hS text--_fontBase--QdLsd",i="browse_explore_list--sectionHeader--vkmM0 text--fontPos13--xW8hS text--_fontBase--QdLsd",o="browse_explore_list--categorySectionHeaderContainer--WiX1N"},908198:(e,r,n)=>{n.d(r,{k:()=>a});let a="dock--dockDesign--kbym5 dock--dock--A6jIs"},553574:(e,r,n)=>{},132752:(e,r,n)=>{n.d(r,{$C:()=>h,B6:()=>g,BG:()=>N,Cq:()=>L,D1:()=>l,F$:()=>s,FV:()=>m,Gy:()=>A,JW:()=>R,MJ:()=>d,ML:()=>D,NH:()=>p,QF:()=>O,UK:()=>c,VJ:()=>b,Vx:()=>F,Xb:()=>a,Y2:()=>P,Y9:()=>k,YB:()=>x,ZK:()=>f,Zv:()=>C,_P:()=>i,c6:()=>o,ez:()=>U,k7:()=>B,kQ:()=>V,lI:()=>I,lO:()=>T,lP:()=>u,o2:()=>w,od:()=>E,ot:()=>M,sI:()=>S,vt:()=>_,y2:()=>y,zZ:()=>v});let a="resource_tiles--showOnHover--2v687",i="resource_tiles--figjamPluginRowIconHoverBg--0GjEb",o="resource_tiles--fauxFocused--Tk7MC",s="resource_tiles--optionsButtonActive--CnmDE resource_tiles--optionsButton--B7MN2",l="resource_tiles--optionsButtonShowOnHover--kJQHm resource_tiles--optionsButton--B7MN2 resource_tiles--showOnHover--2v687",c="resource_tiles--pluginTitleBadgeContainer--Q-9cz",d="resource_tiles--browsePluginTile--Dl1N0 resource_tiles--_browsePluginTileBase--V7a7Y resource_tiles--_browseTileBase--7oogR resource_tiles--_parentWithHoverAction--m180X",u="resource_tiles--pluginTileIcon--rmGOy resource_tiles--_browseTileIconBase--DDmKv",m="resource_tiles--pluginTileMeta--xgpJR",p="resource_tiles--browsePluginTileDevModeWizard--ApW9E",h="resource_tiles--browsePluginTileSmall--t70Gg resource_tiles--_browsePluginTileBase--V7a7Y resource_tiles--_browseTileBase--7oogR resource_tiles--_parentWithHoverAction--m180X",_="resource_tiles--pluginTileIconLoading--mas66 resource_tiles--pluginTileIcon--rmGOy resource_tiles--_browseTileIconBase--DDmKv",g="resource_tiles--pluginTileName--9Isog text--fontPos12--YsUAh text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",f="resource_tiles--pluginTileSubheader--Fihho text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",E="resource_tiles--ctaButtonContainer--z2HxW",y="resource_tiles--priceBadgeContainer--6O7DF",b="resource_tiles--widgetMonetizationBadge--hXbF6",I="resource_tiles--ctaButton--qu-bG",T="resource_tiles--cta--JU9XJ text--fontPos12--YsUAh text--_fontBase--QdLsd",v="resource_tiles--buttonSubmenuChevron--af8r9",S="resource_tiles--buttonSubmenuChevronWhite--c7pTT resource_tiles--buttonSubmenuChevron--af8r9",w="resource_tiles--rowChevron--tIIjl",A="resource_tiles--widgetTileSmall--gtI7m resource_tiles--_widgetTileBase--pKu3B resource_tiles--_browseTileBase--7oogR resource_tiles--_parentWithHoverAction--m180X text--fontPos11--2LvXf text--_fontBase--QdLsd",N="resource_tiles--widgetTile--OjUTk resource_tiles--_widgetTileBase--pKu3B resource_tiles--_browseTileBase--7oogR resource_tiles--_parentWithHoverAction--m180X text--fontPos12--YsUAh text--_fontBase--QdLsd",C="resource_tiles--widgetTileIconSmall--Dox02 resource_tiles--_widgetTileIconBase--vgb2t resource_tiles--_browseTileIconBase--DDmKv",L="resource_tiles--widgetTileIcon--hGlOB resource_tiles--_widgetTileIconBase--vgb2t resource_tiles--_browseTileIconBase--DDmKv",O="resource_tiles--widgetTileMetadata--Ggrsh",R="resource_tiles--widgetTileNameContainer--HqAEf",P="resource_tiles--widgetTileName--hvW06 ellipsis--ellipsis--Tjyfa",D="resource_tiles--widgetTileSubheader--7-TT- ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",k="resource_tiles--paymentErrorIcon--w-8j9",M="resource_tiles--relativeContainer--7lvHF",F="resource_tiles--redDot---lNFV red_dot--baseRedDot--pgZV7",x="resource_tiles--saveButtonEditorSmall--Jt970 resource_tiles--_saveButton--mDwpY",U="resource_tiles--saveButtonVisible---tZad",B="resource_tiles--saveButtonEditorLarge--nKxZq resource_tiles--_saveButton--mDwpY",V="resource_tiles--svg16--B1UCN"},373494:(e,r,n)=>{n.d(r,{Be:()=>s,DD:()=>h,F4:()=>y,KA:()=>g,Lt:()=>w,Lu:()=>i,N4:()=>S,Rt:()=>v,U0:()=>b,Vq:()=>p,_Z:()=>_,aY:()=>E,bE:()=>c,gc:()=>d,iZ:()=>T,jE:()=>m,kL:()=>I,pL:()=>a,p_:()=>o,v0:()=>l,yl:()=>u,z3:()=>f});let a="modal--confirmButton--SNUDv",i="modal--cancelLink--gmgMU modal--button--ZJmGG",o="modal--list--AYXsM",s="modal--blueLink--9GcJu blue_link--blueLink--9rlnd",l="modal--buttonRow--o2A0S",c="modal--groupedButtonRow--bwN6C modal--buttonRow--o2A0S",d="modal--buttonRowGroup--7L3uw",u="modal--modal--fXC8G modal--modalShadow--d-rJf modal--modalBare--AlP7E",m="modal--modalContent--P643j",p="modal--important--qfd6R",h="modal--title--sEkWg",_="modal--textInput---r1fJ",g="modal--tfaQrCode--Xy6Qb",f="modal--error--Kk49K",E="modal--code--zhp08",y="modal--codes--U1NYW",b="modal--avatarWithHandle--AJpEE",I="modal--container--LVq8G",T="modal--blockQuote--bzdW1 text--fontPos11--2LvXf text--_fontBase--QdLsd",v="modal--blockQuoteHeader--IKpaG",S="modal--blockQuoteText--nDUnj ellipsis--ellipsis--Tjyfa",w="modal--select--a5n-Q"},275596:(e,r,n)=>{n.d(r,{Ar:()=>S,B9:()=>d,FQ:()=>b,Hn:()=>A,IL:()=>s,Lq:()=>l,Ny:()=>v,OQ:()=>f,TI:()=>m,ZA:()=>g,ZO:()=>p,_S:()=>o,a5:()=>I,b:()=>i,dC:()=>_,gF:()=>w,gh:()=>E,jS:()=>h,nW:()=>T,oX:()=>y,uS:()=>u,w0:()=>c,wV:()=>a});let a="pointer_modal--announcementPointerModalDark--9DD-M pointer_modal--announcementPointerModal---X9Ui",i="pointer_modal--closeButton--yKnli",o="pointer_modal--closeButtonExtraSpacing--e8erM",s="pointer_modal--announcementPointerModalLight--AaKLA pointer_modal--announcementPointerModal---X9Ui",l="pointer_modal--pointerModalBlue--9Jjg8 pointer_modal--pointerModal--wrpFz",c="pointer_modal--walkThroughModal--6eTVS pointer_modal--pointerModal--wrpFz",d="pointer_modal--walkThroughModalAnimateFast--Xm453 pointer_modal--walkThroughModal--6eTVS pointer_modal--pointerModal--wrpFz",u="pointer_modal--closeButtonWhite--nj2uk",m="pointer_modal--primaryCtaButtonLight--WnZAX pointer_modal--primaryCtaButton--Snffw",p="pointer_modal--primaryCtaButtonDark--ZWijN pointer_modal--primaryCtaButton--Snffw",h="pointer_modal--secondaryCtaButtonLight---Dv4E pointer_modal--secondaryCtaButton--Jg0Yu",_="pointer_modal--secondaryCtaButtonDark--dKbwo pointer_modal--secondaryCtaButton--Jg0Yu",g="pointer_modal--footerDiv--JtCDN",f="pointer_modal--ctaContainer--luZLz",E="pointer_modal--noMotion--YIicU",y="pointer_modal--topTriangleBackground--bAkvB pointer_modal--topTriangle--eTQ3K",b="pointer_modal--topTriangleForeground--BZxHM pointer_modal--topTriangle--eTQ3K",I="pointer_modal--bottomTriangleBackground--GHZc5 pointer_modal--bottomTriangle--iDHi9",T="pointer_modal--bottomTriangleForeground--2hiBJ pointer_modal--bottomTriangle--iDHi9",v="pointer_modal--rightTriangleBackground--fw0l3 pointer_modal--rightTriangle--rQltw",S="pointer_modal--rightTriangleForeground--ReV7J pointer_modal--rightTriangle--rQltw",w="pointer_modal--leftTriangleBackground--GAtIC pointer_modal--leftTriangle--p5eQp",A="pointer_modal--leftTriangleForeground--shkXU pointer_modal--leftTriangle--p5eQp"},743586:(e,r,n)=>{n.d(r,{Fp:()=>d,HF:()=>i,UT:()=>s,g7:()=>c,kv:()=>l,v6:()=>a,zG:()=>o});let a="options_menu--optionMenuResponsiveViewer--nakUc options_menu--optionMenu--9fG9u",i="options_menu--optionMenuForFooter--HiOGO options_menu--optionMenu--9fG9u",o="options_menu--optionMenuButton--9sq9i",s="options_menu--buttonChevron--N2JHA",l="options_menu--dropdownButtonForFooter--UIPTM",c="options_menu--deviceName--qS44h",d="options_menu--optionsMenuIconFixed--zXwsG"},260522:(e,r,n)=>{n.d(r,{$7:()=>s,Jf:()=>m,KK:()=>o,Qs:()=>l,S4:()=>_,Tp:()=>a,Xw:()=>c,h2:()=>g,lJ:()=>p,q9:()=>u,t0:()=>i,wc:()=>d,xQ:()=>h});let a="prototype--background--C7T7U",i="prototype--backgroundTransparent--g5yZq",o="prototype--documentationContainer---zYeR",s="prototype--noScrollBars--Hz0hJ",l="prototype--content--9zE6J",c="prototype--contentMiddle--sqEVr",d="prototype--contentMiddleWithHeader--Qr1mu",u="prototype--viewerContainer--8C5YF",m="prototype--viewerContainerFullScale--bf-Sp prototype--viewerContainer--8C5YF",p="prototype--viewer--uYMkg",h="prototype--footerContainer--AikxI",_="prototype--commentsNextCursor--uIXBd",g="prototype--suppressFocusRings--uoAQT"},138504:(e,r,n)=>{n.d(r,{UL:()=>s,c6:()=>i,jG:()=>o,so:()=>a});let a="right_sidebar_panel--sidebarContainer--VeCtS right_sidebar_panel--container--CtQ1g",i="right_sidebar_panel--sidebarContainerHidden--POHqM right_sidebar_panel--container--CtQ1g",o="right_sidebar_panel--scrollContainer--ORIOM right_sidebar_panel--sidebarDragContainer--n0xNj",s="right_sidebar_panel--withoutHeaderMargin--R9T7p"},414598:(e,r,n)=>{n.d(r,{Db:()=>h,Dg:()=>o,Kb:()=>b,MD:()=>d,Qs:()=>a,S:()=>l,SV:()=>y,Tw:()=>f,Yf:()=>g,iQ:()=>m,lI:()=>I,o:()=>u,oO:()=>p,qg:()=>E,qr:()=>s,v0:()=>c,xC:()=>i,yl:()=>_,zP:()=>T});let a="rcs_components--content--N7eCo text--fontPos11--2LvXf text--_fontBase--QdLsd",i="rcs_components--contentFeatureUpdate--BQecL text--fontPos11--2LvXf text--_fontBase--QdLsd rcs_components--contentLarge--1qHKL rcs_components--leftRightContent--5yuzu",o="rcs_components--imgContainer--JofI3",s="rcs_components--footer--l5bb0",l="rcs_components--footerStepCounter--jKzRi",c="rcs_components--buttonRow--OfMRY",d="rcs_components--closeButtonDefault--q8cPK rcs_components--closeButtonBase--wooGI",u="rcs_components--closeButtonOnLight--rFK2o rcs_components--closeButtonBase--wooGI",m="rcs_components--closeButtonMobileOnLight--jElEv rcs_components--closeButtonOnLight--rFK2o rcs_components--closeButtonBase--wooGI",p="rcs_components--closeButtonOnDark--SRWWX rcs_components--closeButtonBase--wooGI",h="rcs_components--closeButtonHighContrast--Dlf2s rcs_components--closeButtonBase--wooGI",_="rcs_components--modal--sgfHP",g="rcs_components--mobileModal--yvxOb",f="rcs_components--welcomeSequenceModal--TOyd- rcs_components--overflowingModal--QrH-H",E="rcs_components--fullscreenBackground--tIex6",y="rcs_components--fullscreenWelcomeSequenceModal--cuKAh rcs_components--welcomeSequenceModal--TOyd- rcs_components--overflowingModal--QrH-H",b="rcs_components--modalAnimateIn--zcZjW",I="rcs_components--ctaButton--5FSzm",T="rcs_components--loadingSpinner--rOHo1"},996887:(e,r,n)=>{n.d(r,{Hj:()=>a,pO:()=>i});let a="onboarding--promoPointerTitle--Z1b9a text--fontPos13--xW8hS text--_fontBase--QdLsd",i="onboarding--lowZIndexPointerModal--9C2QH pointer_modal--pointerModalBlue--9Jjg8 pointer_modal--pointerModal--wrpFz"},71048:(e,r,n)=>{n.d(r,{$9:()=>a,Gv:()=>l,Lq:()=>m,Pj:()=>c,SI:()=>d,hj:()=>u,ig:()=>i,mj:()=>o,s1:()=>p,vL:()=>s});let a="styles_properties_form--textPreviewContainer---jjb4 styles_properties_form--previewContainer--SH1Yk",i="styles_properties_form--gridAndEffectPreviewContainer--9q2FM styles_properties_form--previewContainer--SH1Yk",o="styles_properties_form--loadedFillPreviewContainer--36WiC styles_properties_form--fillPreviewSize--GiUdz",s="styles_properties_form--loadingFillPreviewContainer--WPdS6 styles_properties_form--fillPreviewSize--GiUdz",l="styles_properties_form--stylePreview--tJF78",c="styles_properties_form--textStylePreview--Jp6WQ",d="styles_properties_form--textStylePreviewInverted--GeC3b",u="styles_properties_form--fillStylePreview--xOVAg styles_properties_form--fillPreviewSize--GiUdz",m="styles_properties_form--loading--0A0hy",p="styles_properties_form--isLoaded--2czdf"},467703:(e,r,n)=>{n.d(r,{BA:()=>I,D:()=>T,E0:()=>f,I6:()=>L,KY:()=>a,NM:()=>l,SB:()=>m,SM:()=>S,T3:()=>h,TH:()=>d,U1:()=>_,UE:()=>o,Ym:()=>w,_Z:()=>i,cr:()=>u,eO:()=>g,hP:()=>A,jG:()=>s,jm:()=>N,ln:()=>p,nM:()=>E,p$:()=>v,ry:()=>C,sM:()=>y,uH:()=>b,wY:()=>c});let a="multi_select_list--actionBar--T9qpZ",i="multi_select_list--actionBarVisible--3rWgr multi_select_list--actionBar--T9qpZ",o="multi_select_list--arrow--CW8ia",s="multi_select_list--scrollContainer--B-Dk-",l="multi_select_list--scrollContent--bCmOd",c="multi_select_list--tableWrapper--pDejK",d="multi_select_list--tableWithNewScrollContext--Iffr4",u="multi_select_list--actionBarContentContainer--lbuSx _overlayBase--_overlayBase--Rkj8l text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",m="multi_select_list--actionBarContentContainerVisible--AEaW4 multi_select_list--actionBarContentContainer--lbuSx _overlayBase--_overlayBase--Rkj8l text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",p="multi_select_list--stickyHeader--FkV5r",h="multi_select_list--stickyHeaderWithBanner--9IDR1 multi_select_list--stickyHeader--FkV5r",_="multi_select_list--headerRow--22Lao",g="multi_select_list--headerRowDisabled--zG4LU multi_select_list--headerRow--22Lao multi_select_list--_disabled--INopV",f="multi_select_list--checkboxColumn--SgkHV",E="multi_select_list--row--nfio-",y="multi_select_list--unselectedCheckbox--KAaaj",b="multi_select_list--rowWithRoundedBorder--im1TP",I="multi_select_list--notFirstRowInSelectedGroup--3m6oH",T="multi_select_list--notLastRowInSelectedGroup--N4myp",v="multi_select_list--emptyState--QQcOE",S="multi_select_list--batchActionCount--R41SC",w="multi_select_list--batchActionClear--7q1Vl",A="multi_select_list--actionButton--D2K4w",N="multi_select_list--longList--Oz-Pp",C="multi_select_list--longListDisabled--x8onM multi_select_list--longList--Oz-Pp multi_select_list--_disabled--INopV",L="multi_select_list--highlightedRow--W4ZZn"},372464:(e,r,n)=>{n.d(r,{Jw:()=>s,Lm:()=>o,NQ:()=>f,Y1:()=>h,ai:()=>g,ef:()=>c,h3:()=>a,hq:()=>y,i1:()=>d,k_:()=>l,li:()=>p,q0:()=>i,um:()=>m,vL:()=>u,xW:()=>E,zP:()=>_});let a="desktop_tool_bar--toolBarSpacerContainer--rLTCP",i="desktop_tool_bar--toolBarSpacerContainerTabletOptimized--0Tv6Q desktop_tool_bar--toolBarSpacerContainer--rLTCP",o="desktop_tool_bar--toolBarContainer--1EjL8",s="desktop_tool_bar--pageViewToolBarContainer--iC3UY desktop_tool_bar--toolBarContainer--1EjL8",l="desktop_tool_bar--settingsModalToolbarStickyContainer--lE8qt",c="desktop_tool_bar--toolBarContainerFullWidth--GT5GG desktop_tool_bar--toolBarContainer--1EjL8",d="desktop_tool_bar--toolBarLeftSide--wJapT text--fontPos13--xW8hS text--_fontBase--QdLsd",u="desktop_tool_bar--toolBarCenter--orkTM",m="desktop_tool_bar--toolBarCenterFullWidth---a4El",p="desktop_tool_bar--toolBarRightSide--XfTEn",h="desktop_tool_bar--toolBarTabContent--a1orn ellipsis--ellipsis--Tjyfa",_="desktop_tool_bar--toolBarTabContentBase--CoAtY",g="desktop_tool_bar--chevron--zwxsY",f="desktop_tool_bar--adminSettingsToolBarTabContentBase--xaPNN",E="desktop_tool_bar--adminSettingsToolBarTabContentSelected--YOoLG",y="desktop_tool_bar--chevronSvgContainer--Fz1VL"},847768:(e,r,n)=>{n.d(r,{AL:()=>A,BI:()=>g,Cu:()=>b,DL:()=>d,FH:()=>w,Fp:()=>a,G7:()=>E,Hl:()=>i,LH:()=>v,MO:()=>_,Nn:()=>N,TV:()=>u,UD:()=>y,VQ:()=>T,Vs:()=>h,cJ:()=>p,e6:()=>m,hv:()=>I,j7:()=>o,ko:()=>l,nP:()=>s,vO:()=>c,xn:()=>S,yH:()=>f});let a="voice_users--voiceParticipantAvatar--7mhMG",i="voice_users--overflowRow--dyDR2",o="voice_users--nameAndSuffixContainer--GGoKj",s="voice_users--flexContainer--bWLmT",l="voice_users--flexLeftContainer--EVDRS",c="voice_users--flexRightContainer--Su6EL",d="voice_users--voiceParticipantName--MPxav text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",u="voice_users--voiceParticipantNameGreyedOut--4zNHd text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",m="voice_users--participantStatus--cnVtZ",p="voice_users--participantRowOldPadding--96Ig5",h="voice_users--participantRowNewPadding--b0v2c",_="voice_users--participantRow--D4Yar",g="voice_users--hoverable--tq5aE",f="voice_users--containsCursor--Wx6C4",E="voice_users--secondaryMenuIconButtonContainer--aAh8o",y="voice_users--showSecondaryDropdownOnHover--AWGE6",b="voice_users--currentUserHeaderRow--Jiv6z",I="voice_users--secondaryActionsMenuButton--2emFq",T="voice_users--secondaryActionsMenuButtonActive--QoLJK",v="voice_users--multiplayerUserView--7nAcD",S="voice_users--userSuffix--2OgbZ text--fontPos11--2LvXf text--_fontBase--QdLsd",w="voice_users--userSuffixNew--husrg text--fontPos11--2LvXf text--_fontBase--QdLsd",A="voice_users--voiceUserHeadphonesIcon--wLuPW",N="voice_users--mutedContainer--JL7uZ"},690864:(e,r,n)=>{n.d(r,{Aw:()=>_,DV:()=>i,FY:()=>s,Hn:()=>d,Jj:()=>m,R_:()=>a,ZS:()=>l,cg:()=>p,e6:()=>h,kQ:()=>c,nf:()=>u,ti:()=>o});let a="lexical_editor_theme--heading--SosJn",i="lexical_editor_theme--codeBlock--TJ-Fu",o="lexical_editor_theme--inlineCode--jE754",s="lexical_editor_theme--paragraph--GBDXU",l="lexical_editor_theme--textBold--tWO8-",c="lexical_editor_theme--textItalic--vqDDt",d="lexical_editor_theme--textStrikethrough--CHepi",u="lexical_editor_theme--link--IC2wz",m="lexical_editor_theme--linkReadOnly--h-PyL",p="lexical_editor_theme--listOl--Ae2L-",h="lexical_editor_theme--listUl--EMQyv",_="lexical_editor_theme--listItem--tt5uP"},630564:(e,r,n)=>{},194021:(e,r,n)=>{n.d(r,{GE:()=>c,KQ:()=>s,QH:()=>o,Sw:()=>i,_J:()=>a,ky:()=>l,lx:()=>d});let a="loading_content--shimmerAnimation--qZjRw",i="loading_content--shimmerOnMenuAnimation--U9c8t loading_content--shimmerAnimation--qZjRw",o="loading_content--lightShimmerAnimation--Iz23-",s="loading_content--loadingText--MFUIw",l="loading_content--loadingTextOnMenu--WrELp loading_content--loadingText--MFUIw",c="loading_content--loadingImage--eB8Kt",d="loading_content--loadingPrimary--HsesM"},686820:(e,r,n)=>{n.d(r,{Ak:()=>b,K5:()=>y,OH:()=>o,Pj:()=>u,QY:()=>E,S$:()=>f,Uz:()=>_,c0:()=>d,cQ:()=>c,cp:()=>g,d6:()=>p,dY:()=>I,ij:()=>h,lE:()=>s,m8:()=>m,nf:()=>l,qr:()=>i,t$:()=>a});let a="footer--replayIcon--r1GxA",i="footer--footer--JB9iL",o="footer--footerHidden--U2SCb footer--footer--JB9iL",s="footer--replayKeyboardShortcut--Lqop8",l="footer--replayButtonContainer--XR1gy",c="footer--replayButton--fKqPi footer--pill--a9ne7",d="footer--debugToolsContainer--WeB-G",u="footer--frameCounterContainer--oMKsY",m="footer--frameCounterResponsive--XW-b7 footer--frameCounter--5AU-l footer--pill--a9ne7",p="footer--frameCounterText--hv93-",h="footer--backIconContainer--i4ERY footer--frameCounterItems--Md14k",_="footer--nextIconContainer--vE9eG footer--frameCounterItems--Md14k",g="footer--nextIconContainerDisabled--fT-ff footer--frameCounterItems--Md14k",f="footer--backIconContainerDisabled--1kf5f footer--frameCounterItems--Md14k",E="footer--imageButton--Uadgb",y="footer--footerOptionsMenuSeparator--5rW7E",b="footer--embedFrameCounterText--OS77U",I="footer--embedNavigationIconDisabled--XFuIV"},305928:(e,r,n)=>{n.d(r,{A4:()=>A,CK:()=>m,Cu:()=>L,Dv:()=>g,FR:()=>a,RK:()=>S,SA:()=>v,SC:()=>h,Sl:()=>l,Tr:()=>I,VA:()=>_,Vj:()=>b,W0:()=>f,WM:()=>w,XK:()=>i,_O:()=>d,ag:()=>y,gO:()=>E,h5:()=>u,m2:()=>o,m4:()=>p,ol:()=>C,q6:()=>c,su:()=>N,vS:()=>T,yl:()=>s});let a="generic_tile_DEPRECATED--selectedContainer--ybkd4 generic_tile_DEPRECATED--container--XotGi",i="generic_tile_DEPRECATED--tileBorder---DBQk",o="generic_tile_DEPRECATED--subtitleWrapperInner--ncwf-",s="generic_tile_DEPRECATED--genericTile--6ezs8",l="generic_tile_DEPRECATED--image--ikVLI",c="generic_tile_DEPRECATED--bottomControls--Ro4JX",d="generic_tile_DEPRECATED--listView--5yggJ text--fontPos13--xW8hS text--_fontBase--QdLsd",u="generic_tile_DEPRECATED--listViewSlightlyLarger--QwvP6 generic_tile_DEPRECATED--listView--5yggJ text--fontPos13--xW8hS text--_fontBase--QdLsd",m="generic_tile_DEPRECATED--gridView--ICika",p="generic_tile_DEPRECATED--standaloneFileTile--lmMfZ generic_tile_DEPRECATED--container--XotGi",h="generic_tile_DEPRECATED--subtitleContainer--y18L5",_="generic_tile_DEPRECATED--subtitle--SkL2a ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd generic_tile_DEPRECATED--flexHorizontally--kRrGY",g="generic_tile_DEPRECATED--disabledSubtitle--yTOPL generic_tile_DEPRECATED--subtitle--SkL2a ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd generic_tile_DEPRECATED--flexHorizontally--kRrGY",f="generic_tile_DEPRECATED--settings--cInfj",E="generic_tile_DEPRECATED--ellipsis--jqPWA ellipsis--ellipsis--Tjyfa",y="generic_tile_DEPRECATED--subtitleMetadata--94sE7 text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",b="generic_tile_DEPRECATED--modifiedMetadata--AphD2",I="generic_tile_DEPRECATED--genericTileRedesign--ySqO2",T="generic_tile_DEPRECATED--topLeftControls--hrfPC",v="generic_tile_DEPRECATED--topRightControls--bIPIz",S="generic_tile_DEPRECATED--visible--dakmY",w="generic_tile_DEPRECATED--facepile--MZY4B",A="generic_tile_DEPRECATED--control--xjbn-",N="generic_tile_DEPRECATED--branchIndicator--xy-8Y",C="generic_tile_DEPRECATED--viewOnlyLabel--4apxb",L="generic_tile_DEPRECATED--itemsViewTitle--Uxr-A"},119257:(e,r,n)=>{n.d(r,{Pf:()=>o,bb:()=>i,zr:()=>a});let a="truncated_text--root--kx5Ta ellipsis--ellipsis--Tjyfa",i="truncated_text--rootTruncateStart--aClXJ",o="truncated_text--directionFix--T1NOI"},491087:(e,r,n)=>{n.d(r,{Id:()=>u,MW:()=>d,Vt:()=>l,X8:()=>s,Yp:()=>m,gC:()=>p,kL:()=>a,o1:()=>o,rf:()=>i,ut:()=>c});let a="base_cookie_banner--container--nUKFl",i="base_cookie_banner--body--lPBYi",o="base_cookie_banner--actions--1LAhr",s="base_cookie_banner--dismiss--gdSyk",l="base_cookie_banner--container__community--oc-bP",c="base_cookie_banner--container__fileViewer--522-P",d="base_cookie_banner--dismissIcon--0O2Nl",u="base_cookie_banner--container__prototype--A1a4y",m="base_cookie_banner--container__auth--okjXC",p="base_cookie_banner--container__authOrCommunity--cqdOl"},616121:(e,r,n)=>{n.d(r,{$C:()=>g,$b:()=>ek,$r:()=>p,A4:()=>ed,AN:()=>ee,Af:()=>eu,Ah:()=>z,B9:()=>B,DE:()=>en,DN:()=>eO,Dd:()=>x,De:()=>d,Dr:()=>l,FQ:()=>eP,JI:()=>H,JT:()=>h,K4:()=>eF,LL:()=>eh,Me:()=>_,N0:()=>v,PN:()=>i,PQ:()=>eG,Po:()=>S,Pp:()=>V,Py:()=>k,Q1:()=>eV,Q2:()=>eA,QQ:()=>s,Qw:()=>C,R2:()=>ef,R3:()=>c,RO:()=>L,Rv:()=>eH,SW:()=>U,Sb:()=>N,T2:()=>eD,Td:()=>X,U8:()=>T,Uw:()=>Y,Vm:()=>o,Wn:()=>f,Ws:()=>el,X8:()=>eb,Z6:()=>b,Zz:()=>eB,_M:()=>ec,_P:()=>em,_x:()=>W,a6:()=>K,aT:()=>eM,az:()=>ev,bu:()=>O,c6:()=>eE,dV:()=>m,eN:()=>eT,eg:()=>a,ev:()=>ea,fU:()=>eg,fV:()=>Z,fh:()=>eS,g$:()=>$,gn:()=>eo,h3:()=>eC,i4:()=>eR,iU:()=>eN,is:()=>A,jR:()=>E,jc:()=>ey,k0:()=>R,k7:()=>G,mO:()=>eI,n7:()=>ep,nG:()=>Q,nL:()=>ex,o$:()=>eU,oK:()=>F,oW:()=>P,p5:()=>e_,pZ:()=>ew,qH:()=>J,qm:()=>w,qt:()=>et,t1:()=>M,vD:()=>j,vY:()=>ei,vh:()=>y,w3:()=>u,wO:()=>q,wl:()=>es,xr:()=>I,xu:()=>er,yG:()=>eL,zt:()=>D});let a="#e5e5e5",i="rgba(0, 0, 0, 0.8)",o="#fff",s="#333333",l="#fff",c="#000",d="#e6e6e6",u="#667799",m="#007be5",p="#9747ff",h="#ff24bd",_="#f24822",g="#ffcd29",f="#14ae5c",E="rgba(30, 30, 30, 1)",y="rgba(117, 117, 117, 1)",b="rgba(179, 179, 179, 1)",I="rgba(230, 230, 230, 1)",T="rgba(217, 217, 217, 1)",v="rgba(242, 72, 34, 1)",S="rgba(255, 199, 194, 1)",w="rgba(255, 166, 41, 1)",A="rgba(252, 209, 156, 1)",N="rgba(255, 205, 41, 1)",C="rgba(255, 232, 163, 1)",L="rgba(20, 174, 92, 1)",O="rgba(175, 244, 198, 1)",R="rgba(13, 153, 255, 1)",P="rgba(189, 227, 255, 1)",D="rgba(151, 71, 255, 1)",k="rgba(228, 204, 255, 1)",M="rgba(255, 255, 255, 1)",F="rgba(175, 188, 207, 1)",x="rgba(230, 230, 230, 1)",U="rgba(255, 175, 163, 1)",B="rgba(255, 196, 112, 1)",V="rgba(255, 217, 102, 1)",G="rgba(133, 224, 163, 1)",H="rgba(128, 202, 255, 1)",W="rgba(217, 184, 255, 1)",K="rgba(255, 189, 242, 1)",Y="rgba(230, 230, 230, 1)",$="rgba(151, 151, 151, 1)",j="rgba(255, 153, 248, 1)",z="rgba(255, 174, 79, 1)",q="rgba(255, 238, 0, 1)",X="rgba(134, 250, 22, 1)",J="rgba(111, 255, 246, 1)",Z="rgba(179, 143, 255, 1)",Q="rgba(255, 255, 255, 1)",ee="rgba(175, 175, 175, 1)",et="rgba(255, 160, 249, 1)",er="rgba(255, 184, 104, 1)",en="rgba(255, 242, 52, 1)",ea="rgba(174, 255, 97, 1)",ei="rgba(126, 255, 247, 1)",eo="rgba(188, 155, 255, 1)",es="rgba(255, 255, 255, 1)",el="rgba(17, 17, 17, 1)",ec="rgba(117, 117, 117, 1)",ed="rgba(217, 217, 217, 1)",eu="rgba(224, 62, 26, 1)",em="rgba(251, 188, 182, 1)",ep="rgba(247, 151, 34, 1)",eh="rgba(255, 196, 112, 1)",e_="rgba(243, 193, 27, 1)",eg="rgba(249, 223, 144, 1)",ef="rgba(25, 143, 81, 1)",eE="rgba(161, 232, 185, 1)",ey="rgba(12, 140, 233, 1)",eb="rgba(168, 215, 250, 1)",eI="rgba(138, 56, 245, 1)",eT="rgba(214, 182, 251, 1)",ev="rgba(255, 255, 255, 1)",eS="rgba(102, 119, 153, 1)",ew="rgba(242, 72, 34, 1)",eA="rgba(255, 166, 41, 1)",eN="rgba(255, 205, 41, 1)",eC="rgba(20, 174, 92, 1)",eL="rgba(13, 153, 255, 1)",eO="rgba(151, 71, 255, 1)",eR="rgba(255, 36, 189, 1)",eP="rgba(230, 230, 230, 1)",eD="rgba(175, 188, 207, 1)",ek="rgba(252, 163, 151, 1)",eM="rgba(255, 196, 112, 1)",eF="rgba(247, 209, 95, 1)",ex="rgba(121, 210, 151, 1)",eU="rgba(124, 196, 248, 1)",eB="rgba(209, 168, 255, 1)",eV="rgba(253, 156, 224, 1)",eG="rgba(230, 230, 230, 1)",eH="#f8f8f8"},699670:(e,r,n)=>{n.d(r,{Zo:()=>i,ss:()=>a});let a=11,i=9},930269:(e,r,n)=>{n.d(r,{communityViewerMaxWidth:()=>c,compareChangesModalWidth:()=>E,curatorTertiaryModalZ:()=>I,defaultCornerRadius:()=>f,designToolbarHeight:()=>l,devHandoffAssetPreviewMaxHeight:()=>p,devHandoffAssetPreviewMaxWidth:()=>m,figmaComponentFlyoutTextMaxCollapsedHeight:()=>h,helpWidgetSizePlusMargin:()=>s,interFontSource:()=>S,leftNavLeftMarginUI3:()=>d,modalZ:()=>v,propertiesPanelRightMarginUI3:()=>u,rulerThickness:()=>g,scrollBarXHeight:()=>a,scrollBarYWidth:()=>i,secondaryModalZ:()=>T,stylePickerMaxHeight:()=>_,templateModalTeamName:()=>b,topBarZ:()=>y,trackPadding:()=>o,uiFontFamily:()=>w,whyteFontFamily:()=>A});let a="6px",i="6px",o="2px",s="64px",l="48px",c="1440px",d="8px",u="8px",m="44px",p="44px",h="96px",_="300px",g="20px",f="2px",E="3000px",y=3,b=2,I=7,T=9,v=10,S="url('https://static.figma.com/uploads/2cca21a49f7dad1daa612d73d50357644671964a')\n  format('woff2')",w="Inter, sans-serif",A="Whyte, sans-serif"},262311:(e,r,n)=>{n.d(r,{FX:()=>s,QU:()=>i,Us:()=>a,ZV:()=>l,rz:()=>o});let a="40px",i="12px",o="16px",s="16px",l="40px"},463206:(e,r,n)=>{n.d(r,{Be:()=>a});let a="blue_link--blueLink--9rlnd"},631981:(e,r,n)=>{n.d(r,{az:()=>a,i0:()=>i});let a="toolbar_action--hideOnMobile--nG2oh",i="toolbar_action--hideOnDesktop--caccx"},317258:(e,r,n)=>{n.d(r,{B7:()=>p,E3:()=>a,H0:()=>d,Kk:()=>o,My:()=>m,Nl:()=>c,Oy:()=>i,Xy:()=>l,hR:()=>u,m$:()=>s});let a="visual_bell--base--Q4n07",i="visual_bell--fplBase--oYGmj",o="visual_bell--icon--rn9Ns",s="visual_bell--iconUI3Color--1jcVh",l="visual_bell--customIcon--Uxudp plugin--pluginIconBase--yAG5F",c="visual_bell--customIconCircle--LwQJ3 visual_bell--customIcon--Uxudp plugin--pluginIconBase--yAG5F",d="visual_bell--customIconError--wr7b0 visual_bell--customIcon--Uxudp plugin--pluginIconBase--yAG5F",u="visual_bell--progressIcon--RYZye",m="visual_bell--slidesVisualBell--arXfI",p="visual_bell--slidesVisualBellIcon--LAt8o"},606789:(e,r,n)=>{n.d(r,{DD:()=>a,DK:()=>i,LY:()=>o,Y_:()=>s});let a="slides_view_header--title--3oQx- utilities--bodyLarge--VTRab ellipsis--ellipsis--Tjyfa",i="slides_view_header--rightColumn--izw82",o="slides_view_header--headerButtonContainer--B0t6E",s="slides_view_header--titleWithoutTopLeftIcon--gaywC slides_view_header--title--3oQx- utilities--bodyLarge--VTRab ellipsis--ellipsis--Tjyfa"},222849:(e,r,n)=>{n.d(r,{Kv:()=>m,Le:()=>s,Lq:()=>c,Qo:()=>u,Sn:()=>d,X9:()=>a,f$:()=>l,k8:()=>o,wH:()=>i});let a="slides_color_controls--panelToggle--kL4qJ",i="slides_color_controls--selected--FUTwH",o="slides_color_controls--colorChit--pdLKf",s="slides_color_controls--chitBackground--Vlkza",l="slides_color_controls--chitAlpha--GJlf2 chit--chitAlpha--Mn-aK",c="slides_color_controls--editChitButton--Am-hP",d="slides_color_controls--enabled--3SYlu",u="slides_color_controls--shownForTests--S2xlM",m="slides_color_controls--renameColorInput--7gA0L raw_components--textInput--t9D8g raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t raw_components--border--SKh2u"},130940:(e,r,n)=>{n.d(r,{Oe:()=>i,RJ:()=>s,g0:()=>o,mu:()=>l,yE:()=>a});let a="feed_post_zoom_pan--zoomPanContainer--zUqcL",i="feed_post_zoom_pan--zoomPanInteractionLayer--8w-cl",o="feed_post_zoom_pan--guidelineLayer--p6ik- feed_post_zoom_pan--zoomPanInteractionLayer--8w-cl",s="feed_post_zoom_pan--transformedImage--hjQSb",l="feed_post_zoom_pan--zoomControls--8PqPP feed_post_detail_modal--contentOverlayPill--1jsoj"},935084:(e,r,n)=>{n.d(r,{D9:()=>a,ZS:()=>o,oO:()=>i});let a="whiteboard_text_style_control--offscreenMeasurementContainer--BKhB1",i="whiteboard_text_style_control--selectInputForMeasurement--slyc8",o="whiteboard_text_style_control--optionForMeasurement--Am6OD"},509742:(e,r,n)=>{n.d(r,{$:()=>A,$d:()=>F,$y:()=>p,B4:()=>q,BE:()=>Z,BN:()=>Y,Bx:()=>P,F0:()=>C,FK:()=>L,FP:()=>y,ID:()=>Q,Lt:()=>i,SN:()=>$,Sk:()=>V,UJ:()=>g,WX:()=>k,Wq:()=>J,ZJ:()=>x,Zh:()=>_,_V:()=>S,ac:()=>D,cP:()=>j,cq:()=>M,dP:()=>z,dR:()=>a,eB:()=>U,gz:()=>B,hA:()=>N,he:()=>v,i0:()=>l,iD:()=>W,iE:()=>d,ll:()=>O,oE:()=>w,pN:()=>u,qs:()=>c,rf:()=>T,rh:()=>X,sD:()=>s,t3:()=>H,tS:()=>I,tq:()=>b,uA:()=>f,uh:()=>K,vu:()=>o,vy:()=>m,wj:()=>E,xI:()=>G,yG:()=>h,z6:()=>R});let a="delightful_toolbar--focusVisibleHover--Ag5DV",i="delightful_toolbar--select--Qs3At",o="delightful_toolbar--active--Xm9-4",s="delightful_toolbar--hand--UoaPp",l="delightful_toolbar--animate--gXF-Y",c="delightful_toolbar--universalInsertCollage--0-jTN",d="delightful_toolbar--stamp--diHIZ",u="delightful_toolbar--universalInsert--FC5m4",m="delightful_toolbar--universalInsertGoogleClassroom--9iLQR",p="delightful_toolbar--fakeButtonContainer--ivi7f",h="delightful_toolbar--toolbarFakeButtonTarget--SdMI0",_="delightful_toolbar--passthruLayout--gz5r2",g="delightful_toolbar--stampButton--3kdlW",f="delightful_toolbar--peekingVotingWheel--w0rd4",E="delightful_toolbar--peekingVotingWheelHidden--97uHk",y="delightful_toolbar--peekingVotingWheelDoneVoting--tAyvc",b="delightful_toolbar--peekingVotingWheelShowHide--1jIMo",I="delightful_toolbar--remainingVotesIndicator--1pWLF text--fontPos12--YsUAh text--_fontBase--QdLsd",T="delightful_toolbar--remainingVotesIndicatorInProgress--x9DdJ",v="delightful_toolbar--remainingVotesIndicatorDone--OyZtG",S="delightful_toolbar--remainingVotesIndicatorTextSpan--ola4B ellipsis--ellipsis--Tjyfa",w="delightful_toolbar--checkIcon--JmhHu",A="delightful_toolbar--peekingVotingWheelContainer--EBQCY",N="delightful_toolbar--peekingVotingWheelInactive--bdvqB",C="delightful_toolbar--horizontalButton--GEYZm",L="delightful_toolbar--horizontalButtonDisabled--J--Nk",O="delightful_toolbar--pointerEventsDisabled--0umVY",R="delightful_toolbar--tool--g8UFJ",P="delightful_toolbar--toolIconIsDragging--NbbVm",D="delightful_toolbar--shapeAndStickyShadow--19Urt",k="delightful_toolbar--hasDropShadow--Jr9fo",M="delightful_toolbar--easeInDltItemFill--rGBLG",F="delightful_toolbar--shapeSpawnAnimation--bHVVH",x="delightful_toolbar--customAnimatedStickyV3--qLTBA",U="delightful_toolbar--bottomStickyV3---oRIg delightful_toolbar--stickyAnimationPropertiesV3--tf0ke",B="delightful_toolbar--middleStickyV3--BiM-v delightful_toolbar--stickyAnimationPropertiesV3--tf0ke",V="delightful_toolbar--topStickyV3--5ndgM delightful_toolbar--stickyAnimationPropertiesV3--tf0ke",G="delightful_toolbar--middleStickyContainerV3--dlPej delightful_toolbar--backgroundStickyV3--NbeSj",H="delightful_toolbar--bottomStickyContainerV3--h7rWX delightful_toolbar--backgroundStickyV3--NbeSj",W="delightful_toolbar--fakeStickyContainer--OmfTq delightful_toolbar--backgroundStickyV3--NbeSj",K="delightful_toolbar--stickyOuterV3--ROW-i",Y="delightful_toolbar--stickyCurlV3--6kp8i",$="delightful_toolbar--stickyMaskContainerV3--XBMQM",j="delightful_toolbar--stickyMaskDynamicV3--hTZdB",z="delightful_toolbar--stickyMaskStaticV3---Ycp2",q="delightful_toolbar--showCurlV3--qx7tK",X="delightful_toolbar--noTransition--aPSPH",J="delightful_toolbar--stickyBaseV3--sQACX",Z="delightful_toolbar--reverse---CQhv",Q="delightful_toolbar--fakeStickyV3--Jq79A delightful_toolbar--stickyAnimationPropertiesV3--tf0ke"},773595:(e,r,n)=>{n.d(r,{MY:()=>o,Yv:()=>i,cN:()=>s,hT:()=>a,iJ:()=>l});let a={EN:"en",JA:"ja",FR:"fr",DE:"de",ES_ES:"es-es",ES_LA:"es-la",KO_KR:"ko-kr",PT_BR:"pt-br",AAA:"aaa",AAL:"aal"},i=[a.EN,a.JA,a.FR,a.DE,a.ES_ES,a.ES_LA,a.KO_KR,a.PT_BR,a.AAA,a.AAL],o=a.EN;a.EN,a.JA;let s=[a.FR,a.DE,a.ES_ES,a.ES_LA,a.KO_KR,a.PT_BR],l=[a.AAA,a.AAL]},643870:(e,r,n)=>{n.d(r,{a:()=>o});var a=n(804597);class i{fontResourceStatusChanged(e,r,n){(0,a.dF)(e,r,n)}}function o(){new i}},23334:(e,r,n)=>{function a(e){if(0===e.s)return{r:e.l,g:e.l,b:e.l,a:e.a};let r=e.l<.5?e.l*(1+e.s):e.l+e.s-e.l*e.s,n=2*e.l-r,a=[0,0,0];for(let i=0;i<3;i++){let o=e.h+-(1/3*(i-1));o<0&&o++,o>1&&o--,6*o<1?a[i]=n+(r-n)*6*o:2*o<1?a[i]=r:3*o<2?a[i]=n+(r-n)*(2/3-o)*6:a[i]=n}return{r:a[0],g:a[1],b:a[2],a:e.a}}function i(e){let r=e.r,n=e.g,a=e.b,i=Math.min(Math.min(r,n),a),o=Math.max(Math.max(r,n),a),s=o-i,l=0;o===i?l=0:r===o?l=(n-a)/s:n===o?l=2+(a-r)/s:a===o&&(l=4+(r-n)/s),(l=Math.min(60*l,360))<0&&(l+=360);let c=(i+o)/2;return{h:l/=360,s:o===i?0:c<=.5?s/(o+i):s/(2-o-i),l:c,a:e.a}}function o(e){let r=(e.h-Math.floor(e.h))*6,n=e.v*e.s,a=n*(1-Math.abs(r%2-1)),i=e.s<=0?0:r<1?n:r<2?a:r<3?0:r<4?0:r<5?a:n,o=e.s<=0?0:r<1?a:r<2?n:r<3?n:r<4?a:0,s=e.s<=0?0:r<1?0:r<2?0:r<3?a:r<4?n:r<5?n:a,l=e.v-n;return{r:i+l,g:o+l,b:s+l,a:e.a}}function s(e){let r=Math.max(Math.max(e.r,e.g),e.b),n=r-Math.min(Math.min(e.r,e.g),e.b);return{h:(0===n?0:r===e.r?((e.g-e.b)/n+6)%6:r===e.g?(e.b-e.r)/n+2:(e.r-e.g)/n+4)/6,s:0===r?0:n/r,v:r,a:e.a}}function l(e){return"l"in e?a(e):o(e)}function c(e){return"l"in e?{...e,s:1,l:.5,a:1}:{...e,s:1,v:1,a:1}}function d(e,r){let n=i(e),o=360*n.h;return a({...n,h:(o+r)%360/360})}function u(e){return 255&(e>0?255*e+.5:0)}function m(e,r,n){return u(e)|u(r)<<8|u(n)<<16|-16777216}function p(e){return u(e.red)|u(e.green)<<8|u(e.blue)<<16|u(e.alpha)<<24}function h(e){return{red:(255&e)/255,green:(e>>8&255)/255,blue:(e>>16&255)/255,alpha:(e>>24&255)/255}}function _(e,r){let n=e.alpha,a=r.alpha,i=n*(1-a),o=i+a,s=i/o,l=a/o;return{red:e.red*s+r.red*l,green:e.green*s+r.green*l,blue:e.blue*s+r.blue*l,alpha:o}}function g(e){return{red:e.r,green:e.g,blue:e.b,alpha:e.a}}function f(e){return{r:e.red,g:e.green,b:e.blue,a:e.alpha}}function E(e,r){let n=[];for(let a=0;a<3;a++)n.push(e[a][0]*r[0]+e[a][1]*r[1]+e[a][2]*r[2]);return n}function y(e){return b({l:e.l,ax:e.c*Math.cos(360*e.h*Math.PI/180),bx:e.c*Math.sin(360*e.h*Math.PI/180),a:e.a})}function b(e){let r=E([[.9999999984505198,.39633779217376786,.2158037580607588],[1.0000000088817609,-.10556134232365635,-.06385417477170591],[1.0000000546724108,-.08948418209496575,-1.2914855378640917]],[e.l,e.ax,e.bx]),n=E([[1.2268798733741557,-.5578149965554813,.28139105017721583],[-.04057576262431372,1.1122868293970594,-.07171106666151701],[-.07637294974672142,-.4214933239627914,1.5869240244272418]],r.map(e=>e**3)),a=E([[12831/3959,-329/214,-1974/3959],[-851781/878810,1648619/878810,36519/878810],[705/12673,-2585/12673,705/667]],n).map(function(e){let r=Math.abs(e);return r>.0031308?(e<0?-1:1)*(1.055*Math.pow(r,1/2.4)-.055):12.92*e});return{r:a[0],g:a[1],b:a[2],a:e.a}}n.d(r,{Ad:()=>d,I0:()=>y,Ih:()=>c,QR:()=>m,R0:()=>h,aH:()=>f,au:()=>_,bi:()=>p,kE:()=>o,oB:()=>i,oU:()=>g,oq:()=>b,qN:()=>s,w_:()=>l})},912813:(e,r,n)=>{n.d(r,{C_:()=>u,dG:()=>c,xg:()=>d});var a=n(234352),i=n(563850),o=n(171812),s=n(414507),l=n(559114);function c(e,r){let n;if("string"==typeof r){if(""===r)return;n=a.w.decodeMessage((0,i.D4)(r))}else{if(0===r.length)return;n=a.w.decodeMessage(r)}if(!n||!n.nodeChanges||1!==n.nodeChanges.length||void 0===n.nodeChanges[0][e])throw Error(`Cannot read value for ${e}`);return{data:n.nodeChanges[0][e],blobs:n.blobs||[]}}function d(e,r){let n=a.w.encodeNodeChange({[e]:r.data}),i=a.w.decodeNodeChange(n);return(0,o.c2)(r.data,i[e],!0,!1,!0)?a.w.encodeMessage({type:"NODE_CHANGES",sessionID:0,ackID:0,nodeChanges:[{[e]:r.data}],blobs:r.blobs}):((0,l.reportError)(s.FigmaTeam.DESIGN_SYSTEMS_EDITOR,Error(`Invalid format for ${e}`),{extra:{type:typeof r,value:r,jsonifiedData:JSON.stringify(r?.data),jsonifiedDecodedNodeChange:JSON.stringify(i),source:"encodeDataWithBlobs",props:{field:e}}}),a.w.encodeMessage({type:"NODE_CHANGES",sessionID:0,ackID:0,nodeChanges:[{[e]:null}],blobs:[]}))}function u(e,r){return(0,i.lF)(d(e,r))}},299498:(e,r,n)=>{n.d(r,{$C:()=>S,A1:()=>et,A2:()=>x,Ag:()=>A,Bj:()=>V,Bz:()=>K,CJ:()=>ea,EU:()=>p,Fe:()=>O,Gh:()=>G,Iz:()=>J,LY:()=>g,Lz:()=>L,RN:()=>a,RU:()=>H,Rx:()=>P,TC:()=>C,Ud:()=>F,V3:()=>W,Vm:()=>v,WF:()=>B,Z3:()=>R,Zs:()=>U,_L:()=>_,aO:()=>M,b_:()=>X,be:()=>Z,c2:()=>T,d1:()=>Q,dJ:()=>z,di:()=>o,eZ:()=>m,jw:()=>s,k0:()=>u,l5:()=>b,lM:()=>N,mk:()=>D,nn:()=>j,o$:()=>i,p6:()=>f,pG:()=>er,qV:()=>ee,rf:()=>E,ry:()=>w,sG:()=>en,tO:()=>l,tg:()=>c,tz:()=>y,uH:()=>q,vv:()=>$,w4:()=>I,wm:()=>k,xJ:()=>d,yR:()=>Y,yy:()=>h});class a{constructor(e=!1){this.shouldThrow=e}onMissingEditScope(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onGuardrailViolation(...e){if(this.shouldThrow)throw Error("Method not implemented.")}}class i{constructor(e=!1){this.shouldThrow=e}reportEditAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}}class o{constructor(e=!1){this.shouldThrow=e}readyToAcceptAutosaveChanges(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}hasOngoingCommitTask(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}enqueueAutosaveCommit(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}createAutosaveManager(...e){if(this.shouldThrow)throw Error("Method not implemented.")}destroyAutosaveManager(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isConnected(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}}class s{constructor(e=!1){this.shouldThrow=e}jsEchoUintValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}jsEchoUint64Value(...e){if(this.shouldThrow)throw Error("Method not implemented.");return"0"}jsEchoInt64Value(...e){if(this.shouldThrow)throw Error("Method not implemented.");return"0"}jsEchoInt64Struct(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{uvalue:"0",ivalue:"0"}}jsEchoStringValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}jsEchoIntArrayValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}jsEchoBoolArrayValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}jsEchoJsonValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}jsEchoJsValue(...e){if(this.shouldThrow)throw Error("Method not implemented.")}jsEchoDeeplyNestedJsValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}jsEchoIntMapValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Map}jsEchoIntSetValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Set}jsEchoOptionalStringValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}jsEchoOptionalStringStruct(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{valueOpt2:null}}jsEchoFastParseableStructValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{intValue:0,uintValue:0,int64Value:"0",uint64Value:"0",strValue:"",doubleValue:0,boolValue:!1,guidValue:"-1:-1",structValue:{value:0},arrayIntValue:[],arrayStringValue:[],arrayBoolValue:[],jsValue:void 0}}jsEchoNonFastParseableStructValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{jsonValue:"",intValue:0,uintValue:0,int64Value:"0",uint64Value:"0",strValue:"",doubleValue:0,boolValue:!1,guidValue:"-1:-1",structValue:{value:0},arrayIntValue:[],arrayStringValue:[],arrayBoolValue:[],jsValue:void 0}}jsEchoCallbackValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return()=>{}}getObservableCounter(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}getObservableArray(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}jsValueTestsDone(...e){if(this.shouldThrow)throw Error("Method not implemented.")}}class l{constructor(e=!1){this.shouldThrow=e}rerunSearch(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getTextMatches(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}rebuildIndex(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logIndex(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setResultInfo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setFocusAndNavigate(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setCategoryCounts(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateCategoryCounts(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showReplace(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showMissingFontBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}detectTextTransform(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}applyTextTransform(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}}class c{constructor(e=!1){this.shouldThrow=e}handleMouseDown(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleMouseMove(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleMouseUp(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createNewCommentAtPosition(...e){if(this.shouldThrow)throw Error("Method not implemented.")}}class d{constructor(e=!1){this.shouldThrow=e}trackComponentInstanceDetachment(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackComponentInstanceInsertion(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackStyleAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackVariableAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackComponentAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}}class u{constructor(e=!1){this.shouldThrow=e}convertEmojiNameToString(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}setEmojiTypeaheadQuery(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearEmojiTypeaheadQuery(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isShowingEmojiTypeaheadResults(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}setEmojiTypeaheadImageSet(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setEmojiTypeaheadTargetRect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}}class m{constructor(e=!1){this.shouldThrow=e}startChat(...e){if(this.shouldThrow)throw Error("Method not implemented.")}closeWheel(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleShortcutPress(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleShortcutRelease(...e){if(this.shouldThrow)throw Error("Method not implemented.")}}class p{constructor(e=!1){this.shouldThrow=e}requestEditorType(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getDeviceInfoForSize(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}presetDeviceSupportsTouch(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}sizeMatchesFramePreset(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}getFramePresetForSize(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getCurrentFileName(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}isUserPresent(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}backToFiles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}documentIsLoaded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}fullscreenIsReady(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isFontListLoaded(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}afterFontsLoaded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setFileVersion(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openSettings(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openNewFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openNewSketchFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openNewWhiteboardFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openNewSlidesFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openFontSettings(...e){if(this.shouldThrow)throw Error("Method not implemented.")}attemptedSketchFileDrop(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openExportPicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openExportSettingsPicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openPdfExportSettingsModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openShortcuts(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleBrowseAllResourcesModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openBrowseTemplatesModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openPreferencesModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showNudgeAmountPicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openFplDebug(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hidePicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createFeedPost(...e){if(this.shouldThrow)throw Error("Method not implemented.")}findInspiration(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openQuickActionsAssetsTab(...e){if(this.shouldThrow)throw Error("Method not implemented.")}inspectFragment(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleSignedOutEditAttempt(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hasUnsavedChanges(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}shouldSuppressUnsavedChangesUI(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}toggleInteractionRecorderVisibility(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showCanvasContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showSelectLayerContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showTextEditModeContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showRulerGuideContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showSelectionContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showLeftPanelTab(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleTeamLibraryModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleComponentInsertModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleVariablesModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPublishDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showTemplatePublishModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}forcePublishStateGroup(...e){if(this.shouldThrow)throw Error("Method not implemented.")}mobileAppPush(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showAutosaveVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showReturnToInstanceVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showReturnToVariantVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPasteWidgetsAsSublayersVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showAiContentFillSuggestedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showMagicLinkSuggestedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPushOverridesVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}NOT_LOCALIZED_showVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}NOT_LOCALIZED_showVisualBellInf(...e){if(this.shouldThrow)throw Error("Method not implemented.")}NOT_LOCALIZED_showMobileNativeToast(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showMobileNativeToastLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellForMultiEdit(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithUndo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellLocalizedInf(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithUrlButtonLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}dismissEphemeralVisualBells(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithDelayLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithCloseButtonLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearVisualBellType(...e){if(this.shouldThrow)throw Error("Method not implemented.")}dismissMobileMediaLoadingToast(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getUserLocale(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getNaturalStyleKey(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLocalizedString(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}closeManageMemoryModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPasteLoadingIndicatorAndPaste(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPromptToMoveLibraryItems(...e){if(this.shouldThrow)throw Error("Method not implemented.")}triggerFromFullscreen(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateViewportInfo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showMissingFontDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hideMissingFontDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getClipboardData(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}canUseClipboardAPI(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}readClipboardData(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}readFilesFromClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}clipboardHasUnsanitizedPng(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}decodePackedHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}decodeMetadataFromHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}detectSpreadsheetDataInHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}writeToClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}writeDataToClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}sendSerializedClipboardDataToS3(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getSerializedClipboardDataFromS3(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}getKeyboardLayout(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}setKeyboardLayoutPreference(...e){if(this.shouldThrow)throw Error("Method not implemented.")}saveUseNumbersForOpacityPreference(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectedStyleProperties(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectedStyleThumbnail(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateStyleThumbnail(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createSavepoint(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}showSavepointModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showBrowserAlert(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleHistoryMode(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showViewChangesNotification(...e){if(this.shouldThrow)throw Error("Method not implemented.")}togglePerfHUDVisibility(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleFakeMPActivity(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleTSMERConfig(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showImageScaledDownWarning(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showGIFConvertedAndScaledDownWarning(...e){if(this.shouldThrow)throw Error("Method not implemented.")}checkForImageBackgroundRemoval(...e){if(this.shouldThrow)throw Error("Method not implemented.")}usedKeyboardShortcut(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startRenamingNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startRenamingPage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startRenamingPages(...e){if(this.shouldThrow)throw Error("Method not implemented.")}insertComponentOrShowError(...e){if(this.shouldThrow)throw Error("Method not implemented.")}fetchComponentBuffers(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}fetchComponentBufferForSevRepair(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}getLatestPublishedVersionHashForComponent(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLatestPublishedVersionForStateGroup(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}fetchVariableSetBuffers(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}startLoadingDroppedImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}finishLoadingDroppedImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackInteractiveSlideElementInsertedForSprig(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isCopyExportRestricted(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isInWorkshopMode(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}requestOpenExternalSourceFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}requestOpenExternalSourceFileLibraryKey(...e){if(this.shouldThrow)throw Error("Method not implemented.")}validateAndParseURL(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}navigateToURL(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setHyperlinkPopup(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateHyperlinkPopupPosition(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleUserClickOnHyperlink(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setCanvasMentionPopup(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateCanvasMentionPopupPosition(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openHelp(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openSupportForum(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openTutorials(...e){if(this.shouldThrow)throw Error("Method not implemented.")}keyboardWillShow(...e){if(this.shouldThrow)throw Error("Method not implemented.")}keyboardWillShowWithHeight(...e){if(this.shouldThrow)throw Error("Method not implemented.")}runLastPlugin(...e){if(this.shouldThrow)throw Error("Method not implemented.")}viewWidgetDetails(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startMovePagesJob(...e){if(this.shouldThrow)throw Error("Method not implemented.")}retrieveMetadataAndSelectBrokenFixedScrollingNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.")}desktopAppQueueFileForWriting(...e){if(this.shouldThrow)throw Error("Method not implemented.")}desktopAppWriteFiles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}mobileAppExportFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMobileCutEnabled(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMobileCopyEnabled(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMobilePasteEnabled(...e){if(this.shouldThrow)throw Error("Method not implemented.")}mobileAppShowContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getDefaultOnOTFeatures(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}copyLinkToPage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}generateLinkToNode(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}generateLinkToRemoteNode(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLocalGUIDFromUrl(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLocalVersionIdFromUrl(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}syncPencilStyle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncHighlighterStyle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncToolStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setVideoShouldAutoplay(...e){if(this.shouldThrow)throw Error("Method not implemented.")}sendActiveStackRegionAnalytics(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getUserName(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getIsEmojiWheelOpen(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}openStartingPointFlowInPrototypeViewer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}focusPrototypeStartingPointPanelToEditName(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setSentryTag(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openTimerModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resendTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMusic(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resendMusic(...e){if(this.shouldThrow)throw Error("Method not implemented.")}activateVotingStampTool(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setActiveAgendaItemId(...e){if(this.shouldThrow)throw Error("Method not implemented.")}escapeAndSaveCSVData(...e){if(this.shouldThrow)throw Error("Method not implemented.")}parseCsvStringAndCreateNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}parseHtmlStringAndCreateNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}parseHtmlStringAndTriggerSmartPaste(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}parseHTMLStringIntoLineDirectionalities(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isNavigatorClipboardWriteSupported(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}onNodePositionChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onSectionPresetPickerCreated(...e){if(this.shouldThrow)throw Error("Method not implemented.")}generateEmbed(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}generateWidgetFromURL(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}handleAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startExportAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}sendEventToResponsiveContentHandler(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onAgendaChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onFigjamStarterKitAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}canUploadAndEditVideo(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}getVariableSetNumberOfModesAllowed(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}selectPublishedAssetGuids(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}handleZoomActionTriggeredToSetOnboardingFlag(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handlePanActionTriggeredToSetOnboardingFlag(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleNodeCountReachedForMoveDraft(...e){if(this.shouldThrow)throw Error("Method not implemented.")}selectLocalStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}formatDateTime(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}setFigjamStarterKitBoundingBox(...e){if(this.shouldThrow)throw Error("Method not implemented.")}loadedCompareChanges(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setUserFlag(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onViewOnlyJiggle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}shouldViewOnlyJiggle(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}upsellLibrariesHandleConsecutivePaste(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onPlaygroundNodeChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}triggerHaptics(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logEnterMode(...e){if(this.shouldThrow)throw Error("Method not implemented.")}evaluateMathExpression(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}changeDocumentColorProfile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}addWhiteboardToolToRecents(...e){if(this.shouldThrow)throw Error("Method not implemented.")}addWhiteboardDiagrammingShapeToRecents(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onTilesRendered(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onCreateTable(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onEditTableText(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onNodeDragStart(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onNodeDragEnd(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onCreateSticky(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onDifferentSectionClicked(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onConnectDiagramShapeWithConnector(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onTileRendererChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}afterPageChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}afterComputeViewportSettings(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getNextQueryRequestId(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}afterQueryCompleted(...e){if(this.shouldThrow)throw Error("Method not implemented.")}rejectAllSceneGraphQueries(...e){if(this.shouldThrow)throw Error("Method not implemented.")}movedSingleNodeVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createSlideAfterFocusedSlide(...e){if(this.shouldThrow)throw Error("Method not implemented.");return"-1:-1"}generateFlappFromPastedText(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isAiDisabled(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isAiActionMetered(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isAiDisabledFigJam(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isInAiExperimentOrGrantlist(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}removeImageBackground(...e){if(this.shouldThrow)throw Error("Method not implemented.")}autoRenameLayers(...e){if(this.shouldThrow)throw Error("Method not implemented.")}autoRenameLayersDevHandoff(...e){if(this.shouldThrow)throw Error("Method not implemented.")}regenerateText(...e){if(this.shouldThrow)throw Error("Method not implemented.")}debugMagicLinkAIModel(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openMakePrototypeModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isMagicLinkDone(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isMagicLinkDoneToastShowing(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}linkToComponent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getLabValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}hasAiRenameLayersPermission(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}logFullscreenActionToDatadogRum(...e){if(this.shouldThrow)throw Error("Method not implemented.")}}class h{constructor(e=!1){this.shouldThrow=e}fontResourceStatusChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}}class _{constructor(e=!1){this.shouldThrow=e}connect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}disconnect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}send(...e){if(this.shouldThrow)throw Error("Method not implemented.")}}class g{constructor(e=!1){this.shouldThrow=e}getDefaultDocumentColorProfile(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getCanvasColorProfile(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getUserColorProfile(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}}class f{constructor(e=!1){this.shouldThrow=e}getIsExtension(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}setNodesReady(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setNodesCompleted(...e){if(this.shouldThrow)throw Error("Method not implemented.")}forwardExportsToExtension(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showStatusContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isStatusContextMenuShowing(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}showDevModeFeaturesModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showAnnotationsButtonContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isDevModeOverview(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}exitDevModeFocusOrOverview(...e){if(this.shouldThrow)throw Error("Method not implemented.")}shouldAvoidScaling(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}}class E{constructor(e=!1){this.shouldThrow=e}nodeChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}}class y{constructor(e=!1){this.shouldThrow=e}createMouseBehavior(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}tableUiReorderHandleHoveredLength(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}tableUiAddButtonHoveredRadius(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}}class b{constructor(e=!1){this.shouldThrow=e}setMentionsTypeaheadQuery(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearMentionsTypeaheadQuery(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isShowingMentionsTypeaheadResults(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}setMentionsTypeaheadTargetRect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startSearchSession(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}endSearchSession(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}showVisualBellForPastedMentions(...e){if(this.shouldThrow)throw Error("Method not implemented.")}}class I{constructor(e=!1){this.shouldThrow=e}getPdfSource(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}resetPdfSource(...e){if(this.shouldThrow)throw Error("Method not implemented.")}convertPdfToScene(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}}class T{constructor(e=!1){this.shouldThrow=e}selectionChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}boxSelectionEnded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}currentPageChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}timerChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}slidesViewChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}documentChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}codegenPreferencesChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stackInvariantsEnforced(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pluginPageLoaded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pluginAccessibleNodeIds(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}pluginAccessiblePages(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}}class v{constructor(e=!1){this.shouldThrow=e}getAPIName(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getSuggestionsForWord(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}spellCheckText(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}runTextReviewPlugin(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}shouldEnableWhenFirstActivated(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}}class S{constructor(e=!1){this.shouldThrow=e}isQuickActionsShown(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}}class w{constructor(e=!1){this.shouldThrow=e}isMinimizedInUI3(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}}class A{constructor(e=!1){this.shouldThrow=e}pasteVariablesWithLocalizationPopupDEPRECATED(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}pasteVariablesWithLocalizationPopup(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}}class N{constructor(e=!1){this.shouldThrow=e}reconnectingStarted(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reconnectingSucceeded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}notifyCursorHidden(...e){if(this.shouldThrow)throw Error("Method not implemented.")}notifyCursorUnhiddenFromObserver(...e){if(this.shouldThrow)throw Error("Method not implemented.")}notifyCursorUnhiddenFromConnectionCount(...e){if(this.shouldThrow)throw Error("Method not implemented.")}notifyEditorConvertedToViewer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSaveStatus(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateMultiplayerState(...e){if(this.shouldThrow)throw Error("Method not implemented.")}restartPresentation(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPresentationStoppedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}cancelPresentationStoppedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setBackgroundFlushInterval(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startMonitorInterval(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleMultiplayerSignal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showRestoreComponentDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showComponentRemovedDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isWindowActive(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}buildMultiplayerUrl(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}requestedChunkedFileLoad(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}socketBufferedAmount(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}prettyPrintMessage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reconnectSequenceNumberChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}}class C{constructor(e=!1){this.shouldThrow=e}showEyedropper(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hideEyedropper(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getColorFromNativeEyeDropper(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}updateSelectionPaintsWithFillEncodedPaints(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionImages(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionPaintsWithStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updatePaintsDirectlyOnSingleNodeWithFillEncodedPaints(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updatePaintsDirectlyOnSingleNodeWithStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearSelectionPaintsDueToLimitExceeded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionPaintFromDropper(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}pickerHasSelectionPaintOpen(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}originalPaintForCurrentSelectionPaintsPicker(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}colorPickerSelectedVariable(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}clearSelectionTextAndEffectStylesDueToLimitExceeded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionTextAndEffectStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isPrototypingModalOpen(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}validateCopyBuffer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}}class L{constructor(e=!1){this.shouldThrow=e}handleConnect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}addUser(...e){if(this.shouldThrow)throw Error("Method not implemented.")}removeUser(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMouseCursor(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMousePosition(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setIsHoveringWidgetWithHiddenCursors(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setHighFiveStatus(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setChatMessage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setFocusOnTextCursor(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setVoiceMetadata(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleReactionFromServer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}sendReaction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}playSoundEffectOnce(...e){if(this.shouldThrow)throw Error("Method not implemented.")}}class O{constructor(e=!1){this.shouldThrow=e}clearTemplatePreview(...e){if(this.shouldThrow)throw Error("Method not implemented.")}}class R{constructor(e=!1){this.shouldThrow=e}getEyedropperContext(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}updateEditPaletteModalColor(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isCustomPaletteApplied(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}showSectionPresets(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}triggerConfetti(...e){if(this.shouldThrow)throw Error("Method not implemented.")}}class P{constructor(e=!1){this.shouldThrow=e}trackFromFullscreen(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackDefinedEventFromFullscreen(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resetDefinedAnalyticsForDocument(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportConsecutiveFlushes(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportConsecutiveImageChangeSkips(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportContextRestore(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportBranchingLoadTime(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportMultiplayerRoundTripTime(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportPerfEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportQuantizedColorEqualsUse(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportContextLost(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportContextRestored(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportDirtyAfterLoad(...e){if(this.shouldThrow)throw Error("Method not implemented.")}tryReportError(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startPerfTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stopPerfTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stopOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}pauseOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resumeOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}tryStopOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}trySetAttributeOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}tryGetAttributesOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}addToDistribution(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createDistribution(...e){if(this.shouldThrow)throw Error("Method not implemented.")}removeDistribution(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getDistributionAnalyticsProperties(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}resetDistribution(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportRenderLayerCount(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportIndependentLayerAnimationActive(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportNonIndependentLayerAnimationActive(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportRenderedTileBytesUsed(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportAnimationFromCpp(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportAnimationFromTs(...e){if(this.shouldThrow)throw Error("Method not implemented.")}recordRenderingEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}saveRenderingTrace(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportIndependentLayerActive(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportIndependentLayerAdded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportIndependentLayerRemoved(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logNumericMetric(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logStringMetric(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleAllocationFailureWithNative(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}slogFromFullscreen(...e){if(this.shouldThrow)throw Error("Method not implemented.")}}class D{constructor(e=!1){this.shouldThrow=e}dispatchAction(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}getCustomKeyboardShortcuts(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}getDisplayStringFromKey(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getKeyboardShortcutFromText(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}getTextFromKeyboardShortcut(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}}class k{constructor(e=!1){this.shouldThrow=e}readSync(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}writeSync(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}}class M{constructor(e=!1){this.shouldThrow=e}isUI3(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}showUI3Colors(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}showUI3ColorsInitialValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}}class F{constructor(e=!1){this.shouldThrow=e}getDefaultPencilStrokeWeight(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getDefaultHighlighterStrokeWeight(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}}class x{constructor(e=!1){this.shouldThrow=e}decodeImage(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}encodeImage(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}scaleImage(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}cancelCurrentImageWorkers(...e){if(this.shouldThrow)throw Error("Method not implemented.")}init(...e){if(this.shouldThrow)throw Error("Method not implemented.")}}class U{constructor(e=!1){this.shouldThrow=e}createVideo(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}deleteVideo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getWidth(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getHeight(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getCoverImage(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}loadVideo(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}copyVideoPermissions(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getSignedUrls(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Map}setExternalSource(...e){if(this.shouldThrow)throw Error("Method not implemented.")}loadAllVideos(...e){if(this.shouldThrow)throw Error("Method not implemented.")}}class B{constructor(e=!1){this.shouldThrow=e}autoSegmentNodesByRegion(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}shouldRunSimpleStackDetection(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}runMakeResponsiveHeuristics(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackShouldShowMSALOnboarding(...e){if(this.shouldThrow)throw Error("Method not implemented.")}destroyAllAutoLayout(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}makeResponsive2(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}}class V{constructor(e=!1){this.shouldThrow=e}getUserId(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}getUserLocale(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}hasUserFlag(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}}class G{constructor(e=!1){this.shouldThrow=e}markMissingFontScannerAsComplete(...e){if(this.shouldThrow)throw Error("Method not implemented.")}}class H{constructor(e=!1){this.shouldThrow=e}submitDeveloperRelatedLinks(...e){if(this.shouldThrow)throw Error("Method not implemented.")}didGetNodeStatusChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isVariableAvailableInLibraryAsset(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}}class W{constructor(e=!1){this.shouldThrow=e}copyImagePermissions(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setImageDownloadPriority(...e){if(this.shouldThrow)throw Error("Method not implemented.")}forceDownloadImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getSignedUrls(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Map}getImageHostDomain(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}setMinimumImagePriority(...e){if(this.shouldThrow)throw Error("Method not implemented.")}forgetImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setImageDecodePending(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearImageDecodePending(...e){if(this.shouldThrow)throw Error("Method not implemented.")}downloadEmoji(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}markImageUploading(...e){if(this.shouldThrow)throw Error("Method not implemented.")}markImageUploaded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startUploadingImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pendingUploadStats(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[new Set,new Set]}logDebugInfo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pauseImageDownloads(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resumeImageDownloads(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setExternalSource(...e){if(this.shouldThrow)throw Error("Method not implemented.")}}class K{constructor(e=!1){this.shouldThrow=e}rgbaToThumbhash(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}thumbhashToRgba(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{rgba:new Uint8Array,width:0,height:0}}}class Y{constructor(e=!1){this.shouldThrow=e}readRichTextFromHtml(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}createHtmlFromTextNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}createHtmlFromTextData(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}}class ${constructor(e=!1){this.shouldThrow=e}getParsedCodeTokens(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getBackgroundColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLineNumberColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getCursorColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}}class j{constructor(e=!1){this.shouldThrow=e}onInsertFromExisting(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onImpression(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}mountWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}mountWidgetLowPriority(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackSelectionStateInteraction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clickWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}queueRender(...e){if(this.shouldThrow)throw Error("Method not implemented.")}renderFirstPartyWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isRenderingWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}runPropertyMenuCallback(...e){if(this.shouldThrow)throw Error("Method not implemented.")}terminateRunningWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clickHyperlink(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getWidgetIconBuffer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}onTextEditEnd(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showTooltip(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showNonInteractableWidgetTooltip(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hideTooltip(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logMultipleInputEditorsInWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stickableAdded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stickableRemoved(...e){if(this.shouldThrow)throw Error("Method not implemented.")}canInteractWithWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}canViewWidgetDetails(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}}class z{constructor(e=!1){this.shouldThrow=e}prefersReducedMotion(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}debounceNodeResizeUpdate(...e){if(this.shouldThrow)throw Error("Method not implemented.")}debounceNodeMovementUpdate(...e){if(this.shouldThrow)throw Error("Method not implemented.")}announceDomChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getAPCAContrast(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}}class q{constructor(e=!1){this.shouldThrow=e}onFrameDistributionTrackedEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}}class X{constructor(e=!1){this.shouldThrow=e}isCustomPaletteColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}}class J{constructor(e=!1){this.shouldThrow=e}clearSlideThemeStylePreview(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncSlideThemeAtom(...e){if(this.shouldThrow)throw Error("Method not implemented.")}computeThemeSwapColorVariableMapping(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Map}}class Z{constructor(e=!1){this.shouldThrow=e}isInOrg(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}}class Q{constructor(e=!1){this.shouldThrow=e}getSummaryAsClipboardText(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}}class ee{constructor(e=!1){this.shouldThrow=e}calculateColorWithRampValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}calculateColorWithRelativeAdjustment(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}getRampValueForColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}}class et{constructor(e=!1){this.shouldThrow=e}openTemplatePicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}}class er{constructor(e=!1){this.shouldThrow=e}isZombieStyle(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}}class en{constructor(e=!1){this.shouldThrow=e}syncAddedOrChangedAssets(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncRemovedAssets(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resetMirrorCache(...e){if(this.shouldThrow)throw Error("Method not implemented.")}}class ea{constructor(e=!1){this.shouldThrow=e}windowSetupComplete(...e){if(this.shouldThrow)throw Error("Method not implemented.")}windowHandleBeforeTick(...e){if(this.shouldThrow)throw Error("Method not implemented.")}initPrefersReducedMotion(...e){if(this.shouldThrow)throw Error("Method not implemented.")}destroyWindow(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setTitle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}title(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}alert(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setTextCaretBounds(...e){if(this.shouldThrow)throw Error("Method not implemented.")}usingMultiTouchPointerEvents(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}setExpectingTextInput(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setExpectingCopyCutEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setExpectingPasteEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}execCommandCopy(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}readClipboardContents(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}writeClipboardContents(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}clearClipboardContents(...e){if(this.shouldThrow)throw Error("Method not implemented.")}tryToReadFromClipboardAsBlobInHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}tryToReadSubstringFromClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}tryToReadFilesFromClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}tryToDetectSpreadsheetDataOnClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}tryToDetectLineDataOnClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}writeToClipboardAsBlobInHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}focusView(...e){if(this.shouldThrow)throw Error("Method not implemented.")}viewWithFocus(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}}},580181:(e,r,n)=>{n.d(r,{l:()=>i});var a=n(299321);function i(e){switch(e){case"FILL":return a.pxg.FILL;case"FIT":return a.pxg.FIT;case"STRETCH":return a.pxg.STRETCH;case"TILE":return a.pxg.TILE;default:throw Error("Invalid ImageScaleMode")}}},304061:(e,r,n)=>{n.d(r,{DS:()=>d,F0:()=>u,GI:()=>h,Ji:()=>g,MT:()=>p,Ql:()=>_,Si:()=>l,UP:()=>E,hD:()=>c,hV:()=>o,kh:()=>f,oY:()=>m});var a=n(529333),i=n(904669);function o(e,r){let n=r(e);if("stop"===n||"skip"===n)return n;for(let n of e.childrenNodes)if("stop"===o(n,r))return"stop"}function s(e,r){return e.get(r)?.parentNode||null}function l(e,r,n){let a=s(e,r);for(;a;){if("CANVAS"===a.type||"DOCUMENT"===a.type)return;if("stop"===n(a))break;a=a.parentNode}}function c(e,r,n){let a=e.get(r);a&&"stop"!==n(a)&&l(e,r,n)}function d(e,r){let n=[];return l(e,r,e=>{n.push(e)}),n}function u(e,r){let n=0,a=e.get(r)||null;for(;a&&"CANVAS"!==a.type&&"DOCUMENT"!==a.type;)n++,a=s(e,a.guid);return n}function m(e){return"VECTOR"===e||"STAR"===e||"LINE"===e||"ELLIPSE"===e||"RECTANGLE"===e||"REGULAR_POLYGON"===e||"ROUNDED_RECTANGLE"===e}function p(e){return"STICKY"===e||"SHAPE_WITH_TEXT"===e||"CONNECTOR"===e||"CODE_BLOCK"===e||"MEDIA"===e||"SECTION_OVERLAY"===e||"TABLE"===e}function h(e){return"STAMP"===e.type||"ROUNDED_RECTANGLE"===e.type&&e.name?.includes("FigJam Stamp Icon")}function _(e,r){let n=null;return l(e,r,e=>{if(!n){if("NONE"!==e.scrollDirection)return n=e,"stop";{let r=e.parentNode;if(r&&r&&"CANVAS"===r.type&&r.visible&&(0,a.F)(e.type)&&e.visible)return n=e,"stop"}}}),n}function g(e){let r=null,n=e.parentNode;for(;n;){if(n.isStackOrFixedSizeContainer){r=n;break}n=n.parentNode}return r}function f(e,r){let n=null;return c(e,r,e=>{let r=e.parentNode;r&&r&&("CANVAS"===r.type||"SECTION"===r.type)&&r.visible&&(0,a.F)(e.type)&&e.visible&&"SECTION"!==e.type&&(n=e)}),n}function E(){let e=(0,i.UN)(),r=[];return o(e.getRoot(),e=>{r.push(e.guid)}),r}},932345:(e,r,n)=>{n.d(r,{$P:()=>l,M7:()=>c,Ms:()=>o,UC:()=>s,eX:()=>u,nM:()=>d,s4:()=>i});var a=n(388393),i=(e=>(e.NONE="NONE",e.FILL="FILL",e.STROKE="STROKE",e.TEXT="TEXT",e.EFFECT="EFFECT",e.GRID="GRID",e))(i||{});let o={inheritEffectStyleKey:"inheritEffectStyleName",inheritExportStyleKey:"inheritExportStyleName",inheritFillStyleKey:"inheritFillStyleName",inheritFillStyleKeyForStroke:"inheritFillStyleNameForStroke",inheritGridStyleKey:"inheritGridStyleName",inheritTextStyleKey:"inheritTextStyleName"},s={inheritEffectStyleKey:"softDeletedEffectStyleId",inheritExportStyleKey:"softDeletedExportStyleId",inheritFillStyleKey:"softDeletedFillStyleId",inheritFillStyleKeyForStroke:"softDeletedFillStyleForStrokeId",inheritGridStyleKey:"softDeletedGridStyleId",inheritTextStyleKey:"softDeletedTextStyleId"};function l(e){return!!e?.key}function c(e){return e.startsWith("S:")}function d(e){return e&&l(e)?`S:${e.key},${e.version||""}`:""}function u(e){if(!e||!c(e))return null;let r=e.substring(2).split(",");if(!r||2!==r.length)return null;let n=(0,a.n3)(r[0]),i=(0,a.IA)(r[1]);return n===a.n3.INVALID?null:{key:n,version:i}}},232297:(e,r,n)=>{n.d(r,{N4:()=>l,eS:()=>c,iL:()=>s,jS:()=>d});var a=n(963528),i=n(299321);let o={};function s(){return o}function l({isProduction:e,executeEmscriptenJS:r}){let n,i;let s=(0,a.n)();(o={}).instantiateWasm=function(e,r){return n=e,i=r,{}},s.Module=o;let l=!1;e||Object.defineProperty(o,"wasmOffsetData",{get:()=>(l=!0,{offset_map:{},func_starts:[],name_map:{},import_functions:0}),set:()=>{}});try{r(),l&&o.emscripten_realloc_buffer(1610612736)}finally{delete s.Module}if(void 0===n)throw Error('Expected WebAssembly code to set "imports"');if(void 0===i)throw Error('Expected WebAssembly code to set "receiveInstance"');return{imports:n,receiveInstance:i,getReservedHeapSize:()=>o.HEAPU8.buffer.byteLength}}function c(){let e=(0,a.n)(),r=e.executeFullscreenEmscriptenCode;return delete e.executeFullscreenEmscriptenCode,r}function d({callMain:e,tsApisForCpp:r,registerRefreshCallback:n}){let s=(0,a.n)();try{s.tsapi_init=(e,r)=>{(0,i.LQj)(e),n?.(r)},s.tsApisForCpp=r,o.jsHelpers=r.jsHelpers,e()}finally{delete s.tsapi_init,delete s.tsApisForCpp}}},525763:(e,r,n)=>{n.d(r,{A:()=>_});var a=n(772841),i=n(683224),o=n(866206),s=n(798867),l=n(356388),c=n(344301),d=n(444390),u=n(718983),m=n(250763),p=(e=>(e[e.CONNECTED=0]="CONNECTED",e[e.DISCONNECTED=1]="DISCONNECTED",e[e.RECONNECTING=2]="RECONNECTING",e))(p||{});class h extends Error{}class _{constructor(e,r,n,a,o,s={},c){this.args=e,this.viewRegistry=n,this.clientOptions=s,this.session=new i.A(e,r,n,this.emitter,(e,r)=>{this.requestPaginationChange(e,r)},c,s.shouldBubbleUpNonNullableResultErrors,s.errorsLoggedForAnalyticsFraction),this.connection=new l.A(a,o,e,this.emitter,s),this.connection.addObserver(this),this.addEventListener(this.healthListener.bind(this));for(let e=0;e<(s?.preloadedViews?.length??0);e++){let r=s?.preloadedViews?.[e],n=s?.preloadedViewArgs?.[e]??{};this.session.subscribe(r,n,()=>{}),this.preloadViewKeys.add((0,d.J)(r._name,n))}for(let e=0;e<(s?.mismatchedViews?.length??0);e++){let r=s?.mismatchedViews?.[e],n=s?.mismatchedViewArgs?.[e]??{};this.mismatchedPreloadMsgs.push({messageType:"unsubscribe",viewName:r,args:n})}}transactionId=1;syncDelayForDebugging=0;syncRequests=new Map;pendingGlobalOptimisticUpdates=new Set;globalOptimisticUpdateResolutionCallbacks=[];session;connection;emitter=new s.b;healthListeners=new Set;pendingOptimisticMutationList=[];pendingMutationList=[];preloadViewKeys=new Set;mismatchedPreloadMsgs=[];cleanup(){this.connection.cleanup()}async connect(){await this.connection.connect()}async close(){await this.connection.closeWithoutReconnecting()}addEventListener(e){return this.emitter.addListener(e)}setOptionalMissingForView(e,r){this.session.setOptionalMissingForView(e,r)}unsetOptionalMissingForView(e){this.session.unsetOptionalMissingForView(e)}removeEventListener(e){return this.emitter.removeListener(e)}healthListener(e){if("CONNECTION_STATE"===e.type){let r=this.getHealthStatusForConnectionState(e.state);for(let e of this.healthListeners)e(r)}}getHealthStatus(){return this.getHealthStatusForConnectionState(this.connection.getState())}getHealthStatusForConnectionState(e){return"connected"===e.type?0:"connecting"===e.type?2:1}addHealthListener(e){return this.healthListeners.add(e),()=>this.removeHealthListener(e)}removeHealthListener(e){this.healthListeners.delete(e)}sendExistingSubscriptions(){for(let e of this.mismatchedPreloadMsgs)this.connection.send(e);for(let{viewRef:e,args:r,traceId:n}of(this.session.startReconnectionStateForPaginationQueries(),this.session.uniqueSubscriptions()))this.preloadViewKeys.has((0,d.J)(e._name,r))||this.requestSubscription(e,r,this.connection.isInitial()?"initial_load":"refresh",n)}handleMessage(e){switch(e.messageType){case"authSuccess":if(this.args.sessionId=e.sessionId,this.args.anonymousUserId=e.anonymousUserId,!this.connection.isAuthenticated()){(0,o.QI)(!1,"Expected connection to be in authenticated state");break}for(let e of this.syncRequests.values())this.requestSync(e);break;case"pendingMutations":this.hasUnresolvedGlobalOptimisticUpdates()?(this.globalOptimisticUpdateResolutionCallbacks.push(()=>{this.session.applyMutations(e.mutations)}),this.pendingMutationList.push(e.mutations),this.session.resolvePendingServerIdList(e.mutations)):this.session.applyMutations(e.mutations);break;case"syncFail":let r=this.syncRequests.get(e.transactionId);if(r){let n=r?.getRetryAfterMs();if(!n){this.handleAfterOptimisticUpdateResolved(e.transactionId);return}(0,o.QI)(!r.retryTimeout,"Already scheduled retry for sync request."),r.retryNumber++,r.retryTimeout=setTimeout(()=>{r.retryTimeout=null,this.requestSync(r)},n)}else(0,o.QI)(!1,"Received syncFail for unknown sync request"),this.handleAfterOptimisticUpdateResolved(e.transactionId);break;case"synced":let n=this.syncRequests.get(e.transactionId);n&&(n.successCallback(),(0,o.QI)(!n.retryTimeout,"Sync request completed successfully while having a retry scheduled. This should never happen."));break;case"viewSubscriptionFailed":this.emitter.emit({type:"ERROR",error:new a.rT(e.errorCode)}),this.session.cleanupFailedSubscribeView(e.liveViewKey)}}onConnectionOpen(){this.sendExistingSubscriptions()}requestSubscription(e,r,n,a){let i={messageType:"subscribe",viewName:e._name,viewHash:e._hash,loadType:n,args:r,traceId:a};this.connection.isConnected()&&(this.connection.send(i),this.emitter.emit({type:"SUBSCRIBE_VIEW_SERVER",view:e,args:r,traceId:a}))}requestPaginationChange(e,r){let n={messageType:"paginationChangeMessage",operationType:"LoadNext",queryId:e,count:r.count,paginationArgs:r};this.connection.isConnected()&&this.connection.send(n)}subscribeBase(e,r,n,a){let i=this.session.hasActiveSubscriptions(e._name,r),o=this.session.subscribe(e,r,n,a);return i||(this.emitter.emit({type:"SUBSCRIBE_VIEW_CLIENT",view:e,args:r,traceId:a}),this.requestSubscription(e,r,"initial_load",a)),o}getUnsubscribeFunction(e){return()=>{e.clientUnsubscribed=!0,(0,o.VG)(()=>{e.unsubscribe(),!this.session.hasActiveSubscriptions(e.view._name,e.args)&&this.connection.isConnected()&&(this.connection.send({messageType:"unsubscribe",viewName:e.view._name,args:e.args}),this.emitter.emit({type:"UNSUBSCRIBE_VIEW_SERVER",view:e.view,args:e.args}))},2e3)}}getViewResult(e,r){return this.session.getViewResult(e,r)}viewHasStaticQueries(e){return!!this.viewRegistry.get(e._name)?.hasStaticQueries()}subscribe(e,r,n,a){let i=r;this.viewHasStaticQueries(e)&&!r.__requestId&&(i={...r,__requestId:(0,c.A)()});let o=this.subscribeBase(e,i,n,a);return this.getUnsubscribeFunction(o)}hasUnresolvedGlobalOptimisticUpdates(){return this.pendingGlobalOptimisticUpdates.size>0}handleBeforeOptimisticUpdateApplied(e){this.pendingGlobalOptimisticUpdates.add(e)}handleAfterOptimisticUpdateResolved(e){if(this.pendingGlobalOptimisticUpdates.delete(e),!this.hasUnresolvedGlobalOptimisticUpdates()){let e=this.globalOptimisticUpdateResolutionCallbacks;this.globalOptimisticUpdateResolutionCallbacks=[],this.emitter.emit({type:"MUTATIONS_BLOCKED_ON_OPTIMISTIC_UPDATE",count:e.length}),this.session.batchMutations(()=>{for(let r of e)r()}),this.pendingOptimisticMutationList=[],this.pendingMutationList=[]}}checkPotentiallyMissingMutations(e,r){if(this.clientOptions.checkPotentiallyMissingOptimisticMutations){if("create"===e||"update"===e)for(let[n,a]of Object.entries(r))for(let i in a){let o=a[i];if("create"===e&&!o.uuid)continue;let s=!1;for(let e of this.pendingMutationList)for(let[r,a]of Object.entries(e))if(n===r)for(let e of Object.values(a.instances))e.uuid&&o.uuid&&e.uuid===o.uuid?s=!0:e.id===i&&(s=!0);if(!s&&"update"===e){let e=o.uuid?this.session.stores[n]?.queries.instanceStatesByUuid.get(o.uuid):this.session.stores[n]?.queries.instanceStates.get(i);e&&(s=Object.keys(o).every(r=>JSON.stringify(o[r])===JSON.stringify(e.serverFields[r])))}this.emitter.emit({type:"PENDING_MUTATION_EXISTENCE",exist:s,objectName:n,optimisticInstance:o,operationType:e,optimisticMutations:r,pendingServerMutations:this.pendingMutationList})}else if("delete"===e)for(let[n,a]of Object.entries(r))for(let i of Object.keys(a)){let a=!1;for(let e of this.pendingMutationList)for(let[r,o]of Object.entries(e))if(n===r)for(let e of Object.values(o.queries))"error"in e||!1!==e.results[i]||(a=!0);this.emitter.emit({type:"PENDING_MUTATION_EXISTENCE",exist:a,objectName:n,optimisticInstance:null,operationType:e,optimisticMutations:r,pendingServerMutations:this.pendingMutationList})}}}async applyMutations(e,r,n){let a;let i=this.transactionId;this.transactionId++;let[o,s]=this.session.applyShadowMutations(i,e,n);this.handleBeforeOptimisticUpdateApplied(i);try{a=await r}catch(r){throw this.session.removeShadowMutations(i,e,!1),this.handleAfterOptimisticUpdateResolved(i),r}let l=!1;try{await this.sync(i,o,s),l=!0}catch(e){if(!(e instanceof h))throw e}finally{this.pendingOptimisticMutationList.push(e),this.globalOptimisticUpdateResolutionCallbacks.push(()=>{this.session.removeShadowMutations(i,e,l)}),l&&"create"!==n&&this.globalOptimisticUpdateResolutionCallbacks.push(()=>{this.checkPotentiallyMissingMutations(n,e)}),this.handleAfterOptimisticUpdateResolved(i)}return a}waitForServerSideObjectsWithUUIDs(e){let r=[];for(let[n,a]of Object.entries(e))for(let e of Object.keys(a))r.push(this.getIdFromUuid(n,e));return Promise.all(r)}async applyMutationsWithUUID(e,r,n){let a;let i=this.transactionId;this.transactionId++;let[s,l]=this.session.applyShadowMutationsWithUUID(i,e,n);this.handleBeforeOptimisticUpdateApplied(i);try{a=await r}catch(r){throw this.session.removeShadowMutationsWithUUID(i,e,!1),this.handleAfterOptimisticUpdateResolved(i),r}let c=!1;try{"create"===n&&0===Object.keys(l).length?(this.emitter.emit({type:"WAIT_SERVER_OBJECTS_STARTED",mutations:e}),await this.waitForServerSideObjectsWithUUIDs(e),await (0,o.yy)(this.syncDelayForDebugging),this.emitter.emit({type:"WAIT_SERVER_OBJECTS_ENDED",mutations:e})):await this.sync(i,s,l),c=!0}catch(e){if(!(e instanceof h))throw e}finally{this.pendingOptimisticMutationList.push(e),this.globalOptimisticUpdateResolutionCallbacks.unshift(()=>{this.session.removeShadowMutationsWithUUID(i,e,c)}),c&&this.globalOptimisticUpdateResolutionCallbacks.push(()=>this.checkPotentiallyMissingMutations(n,e)),this.handleAfterOptimisticUpdateResolved(i)}return a}getIdFromUuid(e,r){return this.session.getIdFromUuid(e,r)}requestSync(e){this.connection.isConnected()&&(this.connection.send(e.toPayload()),this.emitter.emit({type:"SYNC_STARTED",transactionId:e.transactionId}))}async sync(e=this.transactionId++,r,n){let[a,i,s]=(0,o.dS)(),l=this.clientOptions.syncTimeoutMs?new u.M({onTimeout:(e,r)=>{this.emitter.emit({type:"SYNC_TIMEOUT",backgrounded:e,wasOffline:r}),c.retryTimeout&&clearTimeout(c.retryTimeout),s(new h)},timeoutMs:this.clientOptions.syncTimeoutMs}):null,c=new m.Q(e,i,r,n,l);this.syncRequests.set(e,c),this.requestSync(c),await a,this.syncDelayForDebugging&&await (0,o.yy)(this.syncDelayForDebugging),c.timer?.finish(),this.syncRequests.delete(e),this.emitter.emit({type:"SYNC_COMPLETED",transactionId:e})}get debug(){let e=this.session.getViewSubscriptionsForDebugging(),r={},n={};for(let[a,i]of Object.entries(e))"loading"===i.status&&(r[a]=i),"errors"===i.status&&(n[a]=i);return{subscriptions:e,loadingSubscriptions:r,failedSubscriptions:n,prettyPrintLiveViewTree:e=>this.session.prettyPrintLiveViewTree(e),setOptimisticUpdateResolutionDelay:e=>this.syncDelayForDebugging=e,setOptionalMissingForView:(e,r)=>this.setOptionalMissingForView(e,r),unsetOptionalMissingForView:e=>this.unsetOptionalMissingForView(e),...this.connection.debug}}}},786013:(e,r,n)=>{n.d(r,{Agb:()=>a.Agb,Go1:()=>a.Go1,N4S:()=>a.N4S,W7o:()=>a.W7o,_YF:()=>a._YF,bUL:()=>a.bUL,y4I:()=>a.y4I,zi5:()=>a.zi5});var a=n(948509)},156140:(e,r,n)=>{n.d(r,{C7:()=>o,Fh:()=>i,Jj:()=>S,KC:()=>T,OL:()=>h,QR:()=>l,Sh:()=>g,TO:()=>w,X5:()=>u,Xn:()=>p,_D:()=>a,aL:()=>s,bp:()=>m,gR:()=>b,lc:()=>d,nr:()=>_,rD:()=>c,w_:()=>A,yo:()=>v,zx:()=>I});var a=(e=>(e.IS_GUEST="ORG::IS_GUEST",e.IS_MEMBER="ORG::IS_MEMBER",e.IS_ADMIN="ORG::IS_ADMIN",e.CAN_SELF_UPGRADE="ORG::CAN_SELF_UPGRADE",e.CANNOT_JOIN_ORG_USER_EXTERNAL_CONTENT_RESTRICTED="ORG::CANNOT_JOIN_ORG_USER_EXTERNAL_CONTENT_RESTRICTED",e.CANNOT_JOIN_ORG_GUESTS_BANNED="ORG::CANNOT_JOIN_ORG_GUESTS_BANNED",e.CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER="ORG::CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER",e.CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR="ORG::CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR",e.CAN_UPGRADE_AUTO_PATHWAY_EXPERT="ORG::CAN_UPGRADE_AUTO_PATHWAY_EXPERT",e.CAN_USE_FIGMA_AI="ORG::CAN_USE_FIGMA_AI",e))(a||{}),i=(e=>(e.CAN_VIEW="TEAM::CAN_VIEW",e.CAN_EDIT="TEAM::CAN_EDIT",e.CAN_ADMIN="TEAM::CAN_ADMIN",e.IS_OWNER="TEAM::IS_OWNER",e.EDIT_ROLE_ACCESS="TEAM::EDIT_ROLE_ACCESS",e.ADMIN_ROLE_ACCESS="TEAM::ADMIN_ROLE_ACCESS",e.CAN_DISCOVER="TEAM::CAN_DISCOVER",e.CAN_SELF_UPGRADE="TEAM::CAN_SELF_UPGRADE",e.CAN_VIEW_IN_ADMIN="TEAM::CAN_VIEW_IN_ADMIN",e.CAN_VIEW_LIMITED_INFO="TEAM::CAN_VIEW_LIMITED_INFO",e.CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER="TEAM::CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER",e.CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR="TEAM::CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR",e.CAN_UPGRADE_AUTO_PATHWAY_EXPERT="TEAM::CAN_UPGRADE_AUTO_PATHWAY_EXPERT",e.CAN_USE_FIGMA_AI="TEAM::CAN_USE_FIGMA_AI",e))(i||{}),o=(e=>(e.CAN_VIEW="FOLDER::CAN_VIEW",e.CAN_EDIT="FOLDER::CAN_EDIT",e.IS_OWNER="FOLDER::IS_OWNER",e.CAN_DISCOVER="FOLDER::CAN_DISCOVER",e.CAN_CREATE_FIGJAM_FILE="FOLDER::CAN_CREATE_FIGJAM_FILE",e.CAN_CREATE_DESIGN_FILE="FOLDER::CAN_CREATE_DESIGN_FILE",e.CAN_CREATE_SLIDES_FILE="FOLDER::CAN_CREATE_SLIDES_FILE",e.CAN_MODIFY_ROLES="FOLDER::CAN_MODIFY_ROLES",e.CAN_MOVE="FOLDER::CAN_MOVE",e.CAN_TRANSFER_EXTERNALLY="FOLDER::CAN_TRANSFER_EXTERNALLY",e.CAN_TRASH="FOLDER::CAN_TRASH",e.CAN_RESTORE="FOLDER::CAN_RESTORE",e.CAN_PERMANENTLY_DELETE="FOLDER::CAN_PERMANENTLY_DELETE",e.SHOULD_USE_CONNECTED_PLAN_USER_DESIGN="FOLDER::SHOULD_USE_CONNECTED_PLAN_USER_DESIGN",e.SHOULD_USE_CONNECTED_PLAN_USER_FIGJAM="FOLDER::SHOULD_USE_CONNECTED_PLAN_USER_FIGJAM",e.SHOULD_USE_CONNECTED_PLAN_USER_SLIDES="FOLDER::SHOULD_USE_CONNECTED_PLAN_USER_SLIDES",e.SHOULD_USE_CONNECTED_PLAN_USER_DEV_MODE="FOLDER::SHOULD_USE_CONNECTED_PLAN_USER_DEV_MODE",e.CAN_CONNECT="FOLDER::CAN_CONNECT",e))(o||{}),s=(e=>(e.CAN_VIEW_PROTOTYPE="REPO::CAN_VIEW_PROTOTYPE",e.CAN_VIEW="REPO::CAN_VIEW",e.CAN_EDIT="REPO::CAN_EDIT",e.CAN_ADMIN="REPO::CAN_ADMIN",e.IS_OWNER="REPO::IS_OWNER",e.CAN_MANAGE="REPO::CAN_MANAGE",e.CAN_MOVE="REPO::CAN_MOVE",e.CAN_VIEW_LINK_ACCESS="REPO::CAN_VIEW_LINK_ACCESS",e.CAN_EDIT_LINK_ACCESS="REPO::CAN_EDIT_LINK_ACCESS",e.CAN_VIEW_PROTOTYPE_LINK_ACCESS="REPO::CAN_VIEW_PROTOTYPE_LINK_ACCESS",e.CAN_ORG_VIEW_LINK_ACCESS="REPO::CAN_ORG_VIEW_LINK_ACCESS",e.CAN_ORG_EDIT_LINK_ACCESS="REPO::CAN_ORG_EDIT_LINK_ACCESS",e.CAN_ORG_VIEW_PROTOTYPE_LINK_ACCESS="REPO::CAN_ORG_VIEW_PROTOTYPE_LINK_ACCESS",e.CAN_DISCOVER="REPO::CAN_DISCOVER",e.SHOULD_USE_CONNECTED_PLAN_USER="REPO::SHOULD_USE_CONNECTED_PLAN_USER",e))(s||{}),l=(e=>(e.CAN_VIEW_PROTOTYPE="FILE::CAN_VIEW_PROTOTYPE",e.CAN_VIEW="FILE::CAN_VIEW",e.CAN_EDIT="FILE::CAN_EDIT",e.CAN_EDIT_CANVAS="FILE::CAN_EDIT_CANVAS",e.CAN_PUBLISH_TEMPLATE="FILE::CAN_PUBLISH_TEMPLATE",e.CAN_INSERT_TEMPLATE="FILE::CAN_INSERT_TEMPLATE",e.CAN_ADMIN="FILE::CAN_ADMIN",e.IS_OWNER="FILE::IS_OWNER",e.CAN_BECOME_EDITOR="FILE::CAN_BECOME_EDITOR",e.CAN_CLICK_BUTTON_TO_UPGRADE_AND_EDIT="FILE::CAN_CLICK_BUTTON_TO_UPGRADE_AND_EDIT",e.CAN_MANAGE="FILE::CAN_MANAGE",e.HAS_ROLE_ACCESS="FILE::HAS_ROLE_ACCESS",e.CAN_BE_MENTIONED_IN_COMMENT="FILE::CAN_BE_MENTIONED_IN_COMMENT",e.CAN_DOWNLOAD_FILE="FILE::CAN_DOWNLOAD_FILE",e.CAN_EXPORT="FILE::CAN_EXPORT",e.CAN_ACCESS_FILE_THROUGH_API="FILE::CAN_ACCESS_FILE_THROUGH_API",e.CAN_MODIFY_ROLES="FILE::CAN_MODIFY_ROLES",e.CAN_VIEW_METADATA="FILE::CAN_VIEW_METADATA",e.CAN_GAIN_VIEW="FILE::CAN_GAIN_VIEW",e.CAN_GAIN_VIEW_PROTOTYPE="FILE::CAN_GAIN_VIEW_PROTOTYPE",e.CAN_DISCOVER="FILE::CAN_DISCOVER",e.CAN_ACCESS_FRAGMENTS="FILE::CAN_ACCESS_FRAGMENTS",e.CAN_ACCESS_LIBRARY="FILE::CAN_ACCESS_LIBRARY",e.CAN_RENAME="FILE::CAN_RENAME",e.CAN_DELETE="FILE::CAN_DELETE",e.CAN_TRASH="FILE::CAN_TRASH",e.CAN_RESTORE="FILE::CAN_RESTORE",e.CAN_RESTORE_TO_OTHER_FOLDERS="FILE::CAN_RESTORE_TO_OTHER_FOLDERS",e.CAN_PERMANENTLY_DELETE="FILE::CAN_PERMANENTLY_DELETE",e.CAN_MOVE="FILE::CAN_MOVE",e.CAN_FAVORITE="FILE::CAN_FAVORITE",e.CAN_VIEW_AND_CREATE_COMMENTS="FILE::CAN_VIEW_AND_CREATE_COMMENTS",e.CAN_MOVE_COMMENTS="FILE::CAN_MOVE_COMMENTS",e.CAN_EDIT_IGNORE_PAID_STATUS="FILE::CAN_EDIT_IGNORE_PAID_STATUS",e.CAN_EDIT_IGNORE_EDU_GRACE_PERIOD="FILE::CAN_EDIT_IGNORE_EDU_GRACE_PERIOD",e.CAN_VIEW_LINK_ACCESS="FILE::CAN_VIEW_LINK_ACCESS",e.CAN_ORG_VIEW_LINK_ACCESS="FILE::CAN_ORG_VIEW_LINK_ACCESS",e.CAN_EDIT_LINK_ACCESS="FILE::CAN_EDIT_LINK_ACCESS",e.CAN_EDIT_LINK_ACCESS_IGNORE_PASSWORDS="FILE::CAN_EDIT_LINK_ACCESS_IGNORE_PASSWORDS",e.CAN_ORG_EDIT_LINK_ACCESS="FILE::CAN_ORG_EDIT_LINK_ACCESS",e.CAN_VIEW_METADATA_LINK_ACCESS="FILE::CAN_VIEW_METADATA_LINK_ACCESS",e.CAN_VIEW_PROTOTYPE_LINK_ACCESS="FILE::CAN_VIEW_PROTOTYPE_LINK_ACCESS",e.CAN_ORG_VIEW_PROTOTYPE_LINK_ACCESS="FILE::CAN_ORG_VIEW_PROTOTYPE_LINK_ACCESS",e.CAN_ACCESS_FULL_DEV_MODE="FILE::CAN_ACCESS_FULL_DEV_MODE",e.IS_ELIGIBLE_FOR_DEV_MODE_TRIAL="FILE::IS_ELIGIBLE_FOR_DEV_MODE_TRIAL",e.IS_IN_DEV_MODE_TRIAL="FILE::IS_IN_DEV_MODE_TRIAL",e.DEV_MODE_TRIAL_REQUEST_PENDING="FILE::DEV_MODE_TRIAL_REQUEST_PENDING",e.DEV_MODE_REQUEST_PENDING="FILE::DEV_MODE_REQUEST_PENDING",e.DEV_MODE_REQUEST_DENIED="FILE::DEV_MODE_REQUEST_DENIED",e.CAN_ACCESS_DEV_MODE_ENTRY_POINT="FILE::CAN_ACCESS_DEV_MODE_ENTRY_POINT",e.CAN_ACCESS_FULL_DEV_MODE_ORG_PLUS="FILE::CAN_ACCESS_FULL_DEV_MODE_ORG_PLUS",e.CAN_ACCESS_FULL_CODE_CONNECT="FILE::CAN_ACCESS_FULL_CODE_CONNECT",e.CAN_USE_FIGMA_AI="FILE::CAN_USE_FIGMA_AI",e.CAN_USE_FIGJAM_AI="FILE::CAN_USE_FIGJAM_AI",e.CAN_USE_SLIDES_AI="FILE::CAN_USE_SLIDES_AI",e.CAN_USE_FRAGMENT_SEARCH_AI="FILE::CAN_USE_FRAGMENT_SEARCH_AI",e.CAN_USE_SLIDES_DESIGN_TOGGLE="FILE::CAN_USE_SLIDES_DESIGN_TOGGLE",e.CANNOT_PUBLISH_TO_COMMUNITY="FILE::CANNOT_PUBLISH_TO_COMMUNITY",e.CAN_SEND_WEBHOOK="FILE::CAN_SEND_WEBHOOK",e.IS_WORKSPACE_VISIBLE="FILE::IS_WORKSPACE_VISIBLE",e.CAN_PIN_TO_WORKSPACE="FILE::CAN_PIN_TO_WORKSPACE",e.CAN_VIEW_WORKSPACE_PIN="FILE::CAN_VIEW_WORKSPACE_PIN",e.SEAT_TYPE_PAID_STATUS_TEST_PERMISSION="FILE::SEAT_TYPE_PAID_STATUS_TEST_PERMISSION",e.MUST_UPGRADE_TO_SHARE_DRAFT="FILE::MUST_UPGRADE_TO_SHARE_DRAFT",e.MUST_REQUEST_ACCOUNT_UPGRADE_TO_EDIT="FILE::MUST_REQUEST_ACCOUNT_UPGRADE_TO_EDIT",e.MUST_REQUEST_EDITOR_ROLE_TO_EDIT="FILE::MUST_REQUEST_EDITOR_ROLE_TO_EDIT",e.CAN_ACCESS="FILE::CAN_ACCESS",e.CAN_CREATE_BRANCH="FILE::CAN_CREATE_BRANCH",e.CAN_EDIT_OR_ACCESS_FULL_DEV_MODE="FILE::CAN_EDIT_OR_ACCESS_FULL_DEV_MODE",e.SHOULD_USE_CONNECTED_PLAN_USER="FILE::SHOULD_USE_CONNECTED_PLAN_USER",e))(l||{}),c=(e=>(e.CAN_VIEW="COLLECTION_PAGE::CAN_VIEW",e))(c||{}),d=(e=>(e.CAN_VIEW="HUB_FILE::CAN_VIEW",e.CAN_DUPLICATE="HUB_FILE::CAN_DUPLICATE",e.CAN_ADMIN_COMMENTS="HUB_FILE::CAN_ADMIN_COMMENTS",e))(d||{}),u=(e=>(e.CAN_VIEW="PLUGIN::CAN_VIEW",e.CAN_ADMIN_COMMENTS="PLUGIN::CAN_ADMIN_COMMENTS",e))(u||{}),m=(e=>(e.CAN_VIEW="WORKSPACE::CAN_VIEW",e.CAN_ADMIN="WORKSPACE::CAN_ADMIN",e.CAN_CREATE_TEAM="WORKSPACE::CAN_CREATE_TEAM",e))(m||{}),p=(e=>(e.IS_GUEST="PLAN::IS_GUEST",e.IS_MEMBER="PLAN::IS_MEMBER",e.IS_ADMIN="PLAN::IS_ADMIN",e.CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER="PLAN::CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER",e.CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR="PLAN::CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR",e.CAN_UPGRADE_AUTO_PATHWAY_EXPERT="PLAN::CAN_UPGRADE_AUTO_PATHWAY_EXPERT",e))(p||{}),h=(e=>(e.TEAM="team",e.ORGANIZATION="organization",e))(h||{}),_=(e=>(e.CAN_ADMIN="PROFILE::CAN_ADMIN",e.CAN_SELL_RESOURCES_ON_COMMUNITY="PROFILE::CAN_SELL_RESOURCES_ON_COMMUNITY",e))(_||{}),g=(e=>(e.CAN_VIEW="RESOURCE::CAN_VIEW",e))(g||{});let f=["FILE::CAN_EDIT","FILE::CAN_MANAGE","FILE::CAN_EDIT_CANVAS","FILE::CAN_PUBLISH_TEMPLATE","FILE::CAN_RENAME","FILE::CAN_MOVE_COMMENTS","FILE::CAN_EDIT_IGNORE_PAID_STATUS","FILE::CAN_EDIT_IGNORE_EDU_GRACE_PERIOD","FILE::CAN_BECOME_EDITOR","FILE::CAN_CLICK_BUTTON_TO_UPGRADE_AND_EDIT"],E=[...f,"FILE::CAN_MODIFY_ROLES","FILE::CAN_DELETE"];[...f],[...E];var y=(e=>(e.Allow="ALLOW",e.Deny="DENY",e))(y||{});let b=100,I=300,T=900,v=999;var S=(e=>(e.ORG="ORG",e.HUB_FILE="HUB_FILE",e.TEAM="TEAM",e.FOLDER="FOLDER",e.FILE_REPO="FILE_REPO",e.FILE="FILE",e.PLUGIN="PLUGIN",e.WORKSPACE="WORKSPACE",e.PLAN="PLAN",e.COLLECTION_PAGE="COLLECTION_PAGE",e.PROFILE="PROFILE",e.RESOURCE="RESOURCE",e))(S||{}),w=(e=>(e.TEST_FLAG="test_flag",e.CAMPFIRE="campfire",e.CAMPFIRE_PERMISSIONS_SHUTOFF="campfire_permissions_shutoff",e.CAN_DISCOVER_PENDING_INVITE="can_discover_pending_invite",e.COMMUNITY_HUB_ADMIN="community_hub_admin",e.COMMUNITY_HUB_REVIEWER="community_hub_admin_reviewer",e.COMMUNITY_HUB_IMAGE_INSPECTION="community_hub_image_inspection",e.EXEMPT_GUESTS_FROM_MFA_REQUIREMENT="exempt_guests_from_mfa_requirement",e.EXT_PLUGIN_CAN_VIEW_PERMS_V2_REFACTOR="ext_plugin_can_view_perms_v2_refactor",e.FC_GENERAL="fc_general",e.FC_LIBRARY_SHARING_GROUPS="fc_library_sharing_groups",e.FILE_CANVAS_MENTION_CAN_ACCESS="file_canvas_mentions_can_access",e.PS_BENCHMARK="ps_benchmark",e.PS_TEAM_DRAFTS_DENY_POLICIES="ps_team_drafts_deny_policies",e.WSLP_READ_PUBLISH_SCOPE="wslp_read_publish_scope",e.SITES="sites",e.TOU_DENY_EDITS_RESTRICTED_DRAFTS="tou_pv2_deny_edits_for_restricted_drafts_folder",e.TOU_DENY_REPO_EDITS_RESTRICTED_DRAFTS="tou_pv2_deny_repo_edits_for_restricted_drafts",e.PERM_ENABLE_DEBUGGER_LOG_FOR_USER="perm_enable_debugger_log_for_user",e.PRO_TEMPLATES_FIGJAM="pro_templates_figjam",e.CAN_PUBLISH_COMMUNITY_SLIDE_TEMPLATE="can_publish_community_slide_template",e.PDR_MANAGE_FOLDERLESS_FILES="pdr_manage_folderless_files",e.TOU_PV2_GROUP_2="tou_pv2_group_2",e.STARTER_TEAM_EXEMPT_PAID_STATUS="starter_team_exempt_paid_status_permissions",e.CAN_USE_FIGMA_AI_USE_V2="can_use_figma_ai_use_v2",e.TOU_PV2_GROUP_3="tou_pv2_group_3",e.FC_CONNECTED_PLAN_USER_POLICY="fc_connected_plan_user_policy",e.FC_CONNECTED_PROJECT_INVITE="fc_connected_project_invite",e.COOPER="cooper",e))(w||{}),A=(e=>(e.ALLOWED="public_link_controls_setting_allowed",e.PASSWORD_REQUIRED="public_link_controls_setting_password_required",e.EXPIRATION_REQUIRED="public_link_controls_setting_expiration_required",e.EXP_AND_PWD_REQUIRED="public_link_controls_setting_password_and_expiration_required",e.BANNED="public_link_controls_setting_banned",e))(A||{}),N=(e=>(e.IAM="iam",e.UNOWNED="unowned",e.WORKFLOW="workflow",e.SEARCH_CORE="search_core",e.COMMUNITY="community",e.DEVELOPER_TOOLS="developer_tools",e.SCALE="scale",e.EXTENSIBILITY="extensibility",e.BILLING="billing",e.MONETIZATION="monetization",e.SLIDES="slides",e.WAYFINDING="wayfinding",e.AI_INFRA="ai_infra",e))(N||{})},948509:(e,r,n)=>{n.d(r,{Agb:()=>i.Ag,Go1:()=>i.Go,N4S:()=>o.N4S,W7o:()=>o.W7o,_YF:()=>i._Y,bUL:()=>i.bU,y4I:()=>i.y4,zi5:()=>o.zi5}),n(918393),n(734122),n(781505),n(459980),n(522479),n(785925),n(383496),n(248904),n(720592),n(609124),n(172835),n(297708),n(63505),n(904422);var a=n(156140);n(772285),n(442751),n(578103);var i=n(862241),o=n(776024);n(761390),{...a.Fh,...a.C7,...a.aL,...a.QR,...a._D,...a.lc,...a.X5,...a.bp,...a.Xn,...a.rD,...a.nr,...a.Sh}},470944:(e,r,n)=>{n(235310),n(845017),n(24561)},281139:(e,r,n)=>{n(986116);var a=n(845017);n(470944),a.Q_,a.cq,a.Eo,a.SR,a.ut},903947:(e,r,n)=>{n.d(r,{_o:()=>i._o,f6:()=>a.f6}),n(281139);var a=n(845017);n(481564),n(986116),n(470944);var i=n(24561)},263325:(e,r,n)=>{n.d(r,{Ed:()=>a.Ed});var a=n(562977);n(506836),n(299321),n(904669),n(226023),n(407147)},506836:(e,r,n)=>{n.d(r,{KY:()=>d,Pm:()=>g,c1:()=>l,h:()=>c,iz:()=>m,jd:()=>u,qK:()=>_,rt:()=>h,s$:()=>f,v6:()=>p});var a=n(67151),i=n(226023),o=n(998016),s=n(407147);function l(e){let r=e.slice(1).join(o.rR);if("transparent"===r)return[];let n=r.split("/"),a=n[0],l=n[1]??"",c=i.Fy[a]??(0,o.G2)(a);if(!c||!c.match(/^#?[0-9a-f]{3,8}$/i))return null;if(!l||!i.KF[l])return c;let d=(0,s.QW)(c);return d&&i.KF[l]&&(d.a=i.KF[l]??1),d}function c(e){return i.UF[e]||`[${e.toFixed(0)}px]`}function d(e){return i._L[e]||`[${e.toFixed(0)}px]`}function u(e){return i.hN[e]||`[${e.toFixed(0)}]`}function m(e){let r=e.toLowerCase(),n=i.c[r];if(n)return n;if(/^#[0-9A-Fa-f]{3}$/.test(r)){let e="#"+r.slice(1).split("").map(e=>e+e).join(""),n=i.c[e];if(n)return n}return`[${r}]`}function p(e,r){let n=i.uZ[e];return!r?.alwaysUsePreciseValues&&e>=999?"-full":"string"==typeof n?n?`-${n}`:"":`-[${e.toFixed(0)}px]`}function h(e,r){switch(r){case"PIXELS":{let r=i.dP[e];if(r)return r;return`[${e.toFixed(0)}px]`}case"PERCENT":for(let[r,n]of Object.entries(i.u0))if(Math.round(100*n)===Math.round(e))return r;return`[${e.toFixed(0)}%]`;default:(0,a.xb)(r)}}function _(e){let r=parseFloat(e.toFixed(2)).toString();return["0","2","4","8"].includes(r)?`${r}`:`[${r}px]`}function g(e){let r=parseFloat(e.toFixed(2));return i.dJ[r]||`[${r.toString()}]`}function f(e,r){return r<0?`-${e}-${c(-r)}`:`${e}-${c(r)}`}},998016:(e,r,n)=>{n.d(r,{G2:()=>l,Hc:()=>o,kX:()=>s,mu:()=>u,rR:()=>d});var a=n(897459);let i=/^\[(?:([a-z-]+):)?(.+)\]$/i;function o(e,r=0){let n=i.exec(e);if(n&&n[2].endsWith("px")){let e=n[2].slice(0,n[2].length-2);if(r>0){let r=Number(e);return isNaN(r)?null:Number(r.toFixed(2))}return a.y$.isInteger(e)?Number(e):null}return null}function s(e){let r=i.exec(e);if(r&&r[2].endsWith("%")){let e=r[2].slice(0,r[2].length-1);return a.y$.isInteger(e)?Number(e):null}return null}function l(e){let r=i.exec(e);return r&&r[2].startsWith("#")?r[2]:null}let c=/\s+/,d="-";function u(e){let r=(0,a.QP)(e),n=r.includes("flex-col")?"vertical":"horizontal";return r.split(c).map(e=>({...function(e){let r=!1,n=e.split(d);return""===n[0]&&1!==n.length&&(r=!0,n.shift()),{classParts:n,isNegative:r,className:e}}(e),flexDirection:n}))}},407147:(e,r,n)=>{n.d(r,{QW:()=>i,si:()=>c});var a=n(104180);function i(e){if(!e)return null;e=e.replace(/^#([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,(e,r,n,a,i)=>"#"+r+r+n+n+a+a+(i?i+i:""));let r=/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e);return r?{r:parseInt(r[1],16)/255,g:parseInt(r[2],16)/255,b:parseInt(r[3],16)/255,a:void 0===r[4]?1:parseInt(r[4],16)/255}:null}a.z.object({r:a.z.number().min(0).max(1),g:a.z.number().min(0).max(1),b:a.z.number().min(0).max(1),a:a.z.number().min(0).max(1)}).describe("@name(RGBA)");let o=e=>("00"+Math.round(255*e).toString(16).toUpperCase()).substr(-2),s=e=>`${o(e.r)}${o(e.g)}${o(e.b)}`,l=(e,r=1)=>`${o(e.r)}${o(e.g)}${o(e.b)}${o(e.a*r)}`;function c(e,r=1){if(1===e.a&&1===r){let r=s(e);return r[0]===r[1]&&r[2]===r[3]&&r[4]===r[5]?`#${r[0]}${r[2]}${r[4]}`:`#${r}`}{let n=l(e,r);return n[0]===n[1]&&n[2]===n[3]&&n[4]===n[5]&&n[6]===n[7]?`#${n[0]}${n[2]}${n[4]}${n[6]}`:`#${n}`}}},943632:(e,r,n)=>{n.d(r,{AM:()=>p,Bq:()=>function e(r,n=[]){for(let a=0;a<r.length;a++){let i=r[a];Array.isArray(i)?e(i,n):n.push(i)}return n},Ef:()=>u,Jk:()=>c,KQ:()=>g,Kg:()=>l,LN:()=>b,M0:()=>v,N9:()=>s,RP:()=>C,TR:()=>N,Ul:()=>I,Vs:()=>A,WI:()=>T,_j:()=>o,g6:()=>L,hR:()=>h,k4:()=>m,lX:()=>O,lq:()=>S,lu:()=>d,my:()=>y,qg:()=>w,v7:()=>f});var a=n(432258),i=n(424587);function o(e){return Array.isArray(e)?e:[e]}function s(e,r){-1===e.indexOf(r)&&e.push(r)}function l(e,r){-1===e.indexOf(r)&&e.unshift(r)}function c(e,r){let n=e.indexOf(r);-1!==n&&e.splice(n,1)}function d(e,r){if(e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==r[n])return!1;return!0}function u(e){for(let r=1;r<e.length;r++)if(void 0===e[r]||e[r]!==e[r-1])return!1;return!0}function m(e,r){let n,a,i=e.length;for(;0!==i;)a=Math.floor((r?function(e=Date.now()){return(9301*e+49297)%233280/233280}(r):Math.random())*i),i-=1,n=e[i],e[i]=e[a],e[a]=n;return e}function p(e,r,n=!1){return h(e,e=>e[r],n)}function h(e,r,n=!1,a,i=!1){e.sort((e,o)=>{if(r(e)===r(o)&&a){let r=i?-1:1;return a(e)<a(o)?-r:r}let s=n?-1:1;return r(e)<r(o)?-s:s})}let _=new Intl.Collator("en",{numeric:!0,sensitivity:"base"});function g(e,r,n={}){f(e,e=>e[r],n)}function f(e,r,n={},a){let i=e=>{let n=r(e);return n&&n.toLowerCase?n.toLowerCase():""},o=e=>{if(!a)return"";let r=a(e);return r&&r.toLowerCase?r.toLowerCase():""},s=n.isDescending?-1:1;n.useExpensiveNaturalComparison?e.sort((e,r)=>_.compare(i(e),i(r))*s):e.sort((e,r)=>{if(i(e)===i(r)&&a){let a=n.isSecondaryDescending?-1:1;return o(e)<o(r)?-a:a}return i(e)<i(r)?-s:s})}function E(e,r,n=!1){return e.sort((e,a)=>{let i=new Date(r(e)).getTime()<new Date(r(a)).getTime()?1:-1;return n?-i:i})}function y(e,r,n=!1){return E(e,e=>e[r],n)}function b(e){return E(e,e=>e.created_at)}function I(e,...r){return e.sort((e,n)=>{for(let a of r){let r=a(e,n);if(0!==r)return r}return 0})}function T(e){return e.filter(a.Vq)}function v(e,r,n=a.Vq){for(let a=r+1;a<e.length;a++){let r=e[a];if(n(r,a))return r}}function S(e,r,n=a.Vq){for(let a=r-1;a>=0;a--){let r=e[a];if(n(r,a))return r}}function w(e,r,n="left",o=a.Vq){r=(0,i.qE)(r,0,e.length-1);for(let a=0;r-a>=0||r+a<e.length;a++){let[i,s]="left"===n?[r-a,r+a]:[r+a,r-a];if(i>=0&&i<e.length){let r=e[i];if(o(r,i))return r}if(s>=0&&s<e.length){let r=e[s];if(o(r,s))return r}}}function A(e){let r=[...e],n=(0,a.sR)(r.pop(),"input must be non-empty");return[r,n]}function N(e,r,n=String){let a={};r.forEach((e,r)=>{a[n(e)]=r});let i=0,o=0,s=[];for(;;){let l=e[i],c=r[o];if(void 0===l||void 0===c){if(void 0===l&&void 0===c)return s;void 0!==l&&void 0===c?(s.push({hasBoth:!1,left:l,right:void 0}),i++):void 0===l&&void 0!==c&&(s.push({hasBoth:!1,left:void 0,right:c}),o++)}else{let e=a[n(l)];void 0===e||e<o?(s.push({hasBoth:!1,left:l,right:void 0}),i++):(e===o?(s.push({hasBoth:!0,left:l,right:c}),i++):s.push({hasBoth:!1,left:void 0,right:c}),o++)}}}function C(e,r){let n=[];for(let a of e){let e=r(a);null!=e&&n.push(e)}return n}function L(e,r){return e.includes(r)?e.filter(e=>e!==r):e.concat(r)}async function O(e,r){let n=e.map(r);return await Promise.all(n)}},424587:(e,r,n)=>{function a(e,r,n){return Math.min(Math.max(e,r),n)}function i(e,r,n){return e=null==r?e:Math.max(e,r),null==n?e:Math.min(e,n)}function o(e,r){if(e===r)return e;if(e>r)throw Error("random: start must be larger than end");return Math.random()*(r-e+1)+e}function s(e,r,n){let a=null!=r,i=a?r:e,o=a?e:0;n=null==n?Math.sign(i-o):n;let{result:s}=Array.from({length:Math.abs((i-o)/(n||1))}).reduce(({result:e,current:r})=>({result:[...e,r],current:r+n}),{current:o,result:[]});return s}function l(e,r){let n=[];for(let a=0;a<e;++a)n.push(r(a));return n}function c(e,r,n=1e-6){return Math.abs(e-r)<n}function d(e,r){return(e%r+r)%r}function u(e,r){return Math.round(e/r)*r}function m(e,r,n,a){let i;if(1e-8>Math.abs(e)){if(e=r,r=n,n=a,1e-8>Math.abs(e))return(e=r,r=n,1e-8>Math.abs(e))?[]:[-r/e];let i=r*r-4*e*n;return 1e-8>Math.abs(i)?[-r/(2*e)]:i>0?[(-r+Math.sqrt(i))/(2*e),(-r-Math.sqrt(i))/(2*e)]:[]}let o=(3*e*n-r*r)/(3*e*e),s=(2*r*r*r-9*e*r*n+27*e*e*a)/(27*e*e*e);if(1e-8>Math.abs(o))i=[Math.cbrt(-s)];else if(1e-8>Math.abs(s))i=[0].concat(o<0?[Math.sqrt(-o),-Math.sqrt(-o)]:[]);else{let e=s*s/4+o*o*o/27;if(1e-8>Math.abs(e))i=[-1.5*s/o,3*s/o];else if(e>0){let r=Math.cbrt(-s/2-Math.sqrt(e));i=[r-o/(3*r)]}else{let e=2*Math.sqrt(-o/3),r=Math.acos(3*s/o/e)/3,n=2*Math.PI/3;i=[e*Math.cos(r),e*Math.cos(r-n),e*Math.cos(r-2*n)]}}for(let n=0;n<i.length;n++)i[n]-=r/(3*e);return i}n.d(r,{Ae:()=>m,KY:()=>i,M9:()=>l,YE:()=>u,_g:()=>d,qE:()=>a,xN:()=>c,y1:()=>s,yT:()=>o})},7674:(e,r,n)=>{function a(e){for(let r in e)return!1;return!0}function i(e){for(let r in e)return r;return null}function o(e,r){let n={...e};for(let[e,a]of Object.entries(r))null!=a&&(n[e]=a);return n}function s(e,r){let n={};for(let[a,i]of Object.entries(e).sort(r))n[a]=i;return n}n.d(r,{Dy:()=>function e(r,n,a){for(let i in r){let o=""===a?i:a+"."+i;Array.isArray(r[i])?n[o]=JSON.stringify(r[i]):"object"==typeof r[i]&&null!==r[i]?e(r[i],n,o):n[o]=r[i]}},Im:()=>a,b$:()=>o,mf:()=>s,o:()=>i})},681067:(e,r,n)=>{function a(e){return new Promise(r=>{let n=Array(e.length),a=e.length,i=()=>{0===a&&r(n)};for(let r=0;r<e.length;r++)e[r].then(e=>{n[r]={type:"resolve",resolve:e,reject:void 0},a--,i()},e=>{n[r]={type:"reject",resolve:void 0,reject:e},a--,i()});i()})}function i(e,r){return new Promise(n=>{let a=0,i=e.length,o=()=>{0===i&&n(s)},s=Array(e.length),l=r=>{let n=e[r];return void 0!==n&&(n().then(e=>{s[r]={type:"resolve",resolve:e,reject:void 0},i--,c(),o()},e=>{s[r]={type:"reject",resolve:void 0,reject:e},i--,c(),o()}),!0)},c=()=>{let e=l(a);return a++,e};for(let e=0;e<r&&c();e++);o()})}function o(e){let r=null;return()=>(null===r&&(r=e()).catch(()=>r=null),r)}n.d(r,{Ed:()=>i,Kt:()=>o,_7:()=>a})},44050:(e,r,n)=>{n.d(r,{u:()=>g});var a=n(411855),i=n(737947),o=n(966712),s=n(79637),l=n(888572),c=n(760640),d=n(2538),u=n(488983),m=n(776615),p=n(935757),h=n(754168),_=n(964050);function g(){(0,u.F$)("prototype-lib").then(()=>{async function e(e){if(window.androidProtoPreloadedTabStart=performance.now(),!(0,o.Ay)().user_data){i.Ay.replace(e.path,null),i.Ay.reload("preloaded tab not logged in");return}try{let{data:{meta:r}}=await h.S.getIncludeFolderTeamCanEdit({includeFolderTeamCanEdit:!0,fileKey:e.fileKey}),n=r.parent_org_id;(0,o.Hk)(r),console.log(`Opening file ${e.fileKey} in a preloaded tab at ${e.path} with org ${n}`),(0,o.Ay)().org_id=n,(0,p.Ri)(),window.startUserStateXHR(),i.Ay.replace(e.path,null),await (0,s.n)(f,()=>d.t)}catch(r){console.error("Reloading because of",r),i.Ay.replace(e.path,null),i.Ay.reload("preloaded tab error")}}window.androidProtoFsPreloaded=performance.now(),c.xK.start("androidProtoEditorPreloaded"),window.startPreloadedTab=e})}function f(){let e=(0,l.s)();return a.createElement(m.uW.Provider,{value:e},a.createElement(_.V,null))}},632376:(e,r,n)=>{n.d(r,{wZ:()=>d,xv:()=>s});var a=n(237870),i=n(121898);let o=i.A.createLazyComponent(()=>n.e(5817).then(n.bind(n,714932)).then(e=>e.AutosaveLogOutModal),(0,a.Ij)("AutosaveLogOutModal")),s=(0,a.Ju)(o),l=i.A.createLazyComponent(()=>n.e(5817).then(n.bind(n,714932)).then(e=>e.HasAutosaveChangesModal),(0,a.Ij)("HasAutosaveChangesModal"));(0,a.Ju)(l);let c=i.A.createLazyComponent(()=>n.e(5817).then(n.bind(n,275081)).then(e=>e.AutosaveLearnMoreModal),(0,a.Ij)("AutosaveLearnMoreModal")),d=(0,a.Ju)(c)},898211:(e,r,n)=>{n.d(r,{B7:()=>s.B,In:()=>o.I,dR:()=>c,lk:()=>u});var a=n(237870),i=n(711184),o=n(252011),s=n(946612);let l=i.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(8259),n.e(6094),n.e(7600),n.e(8964)]).then(n.bind(n,152495)).then(e=>e.UniversalUpgradeSequence),(0,a.Ij)("UniversalUpgradeSequence")),c=(0,a.Ju)(l,"UniversalUpgradeSequence"),d=i.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(8259),n.e(6094),n.e(7600),n.e(8964)]).then(n.bind(n,271125)).then(e=>e.UpgradeContactSalesModal),(0,a.Ij)("UpgradeContactSalesModal")),u=(0,a.Ju)(d,"UpgradeContactSalesModal"),m=i.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(8259),n.e(6094),n.e(7600),n.e(8964)]).then(n.bind(n,332088)).then(e=>e.OrgUpgradeMultiTeamModal),(0,a.Ij)("OrgUpgradeMultiTeamModal"));(0,a.Ju)(m,"OrgUpgradeMultiTeamModal");let p=i.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(8259),n.e(6094),n.e(7600),n.e(8964)]).then(n.bind(n,392201)).then(e=>e.OrgUpgradeSingleTeamModal),(0,a.Ij)("OrgUpgradeSingleTeamModal"));(0,a.Ju)(p,"OrgUpgradeSingleTeamModal")},709217:(e,r,n)=>{},411045:(e,r,n)=>{n.d(r,{cf:()=>a});let a=function(){return!1}},303345:(e,r,n)=>{n.d(r,{$w:()=>d,QX:()=>l,iO:()=>s,wH:()=>c});var a=n(860601),i=n(459279),o=n(466816);a.lQ;let s=function(){return{}},l=function(){return!1},c=function(){return{handleUpgrade:()=>()=>{},getUpgradeEligibility:()=>o.q.CANNOT_UPGRADE,getPendingRequest:()=>null,hasPendingRequest:()=>!1,getUpgradePathway:()=>o.J.RE_REQUEST_PATHWAY,getIsUpgradeHandlerLoading:()=>!1}},d=function(){return null};i.SA,i.mR},320108:(e,r,n)=>{n.d(r,{PlanComparisonModal:()=>a});let a=function(){return null}},396147:(e,r,n)=>{n.d(r,{Xv:()=>c,ps:()=>o}),n(411855),n(966712),n(915440),n(711525),n(647899),n(493323),n(154254);var a=n(939863);n(175290),n(896474);var i=n(720647);n(99506),n(279453);var o=(e=>(e.TEAM="Team",e.ORG="Org",e))(o||{}),s=(e=>(e.ALL_UNASSIGNED_REQUESTS="all_unassigned_requests",e.ALL_MANAGED_REQUESTS="all_managed_requests",e.ALL_ORG_REQUESTS="all_org_requests",e.INDIVIDUAL_BILLING_GROUP_REQUESTS="individual_billing_group_requests",e))(s||{}),l=(e=>(e.MEMBERS="members",e.GUESTS="guests",e))(l||{}),c=(e=>(e.APPROVE_ALL="APPROVE_ALL",e.BULK_SELECT="BULK_SELECT",e.SINGLE="SINGLE",e.EMAIL="EMAIL",e.DEEPLINK="DEEPLINK",e))(c||{}),d=(e=>(e.NEWEST_FIRST="NEWEST_FIRST",e.OLDEST_FIRST="OLDEST_FIRST",e))(d||{});i.Te.DESIGN,i.Te.WHITEBOARD,i.Te.DEV_MODE,()=>(0,a.t)("admin_dashboard.requests.devmode_seat")},151109:(e,r,n)=>{n.d(r,{BZ:()=>i});var a=n(155367);a.J7.DASHBOARD,a.J7.WORKSPACES,a.J7.TEAMS,a.J7.MEMBERS,a.J7.ACTIVITY,a.J7.BILLING,a.J7.RESOURCES,a.J7.SETTINGS,a.J7.CONTENT;let i={[a.SN.ABANDONED_DRAFTS]:"org_admin_unassigned_drafts_onboarding_key",[a.SN.TEAMS]:"org_admin_settings_teams_tab_onboarding_key",[a.SN.WORKSPACES]:"",[a._d.APPROVED_PLUGINS]:"",[a._d.APPROVED_WIDGETS]:"",[a._d.LIBRARIES]:"",[a._d.SHARED_FONTS]:"",[a.G_.OVERVIEW]:"",[a.G_.INVOICES]:"",[a.G_.BILLING_GROUPS]:"org_admin_settings_billing_groups_secondary_tab_onboarding_key",[a.SN.CONNECTED_PROJECTS]:"org_admin_connected_projects_tab_onboarding_key",[a.P9.SEAT_REQUESTS]:""}},314247:(e,r,n)=>{n.d(r,{nj:()=>a});let a="admin_view_resource_tab"},785750:(e,r,n)=>{n.d(r,{Ki:()=>T,f9:()=>w});var a=n(411855),i=n(786013);n(358145);var o=n(966712),s=n(915440),l=n(711525),c=n(586459),d=n(179940),u=n(837378),m=n(694687),p=n(279453),h=n(463592),_=n(916525),g=n(833030),f=n(851363),E=n(231959),y=n(791435),b=n(553405);let I=new h.Ef([],{threshold:.1,matchAllTokens:!0,tokenize:!1,distance:300,keys:[{name:"name",weight:1},{name:"owner.handle",weight:1},{name:"owner.email",weight:1}]});function T({searchQuery:e,filters:r,sortConfig:n,enabled:i=!0,membersMap:o,firstPageSize:d,isEndUserSurface:h=!1,orgId:_}){let{optimisticIds:g,addOptimisticIds:f,setServerData:E}=(0,u.K)(),{subscription:b,status:T}=function({searchQuery:e,filters:r,sortConfig:n,enabled:a=!0,firstPageSize:i,extraTeamIds:o=[],isEndUserSurface:l=!1,orgId:d}){let u=(0,m.dq)(),h=(0,s.Rs)(p.jl4,{orgId:d??u,firstPageSize:i||25,queryParams:w(e,r,n,l),extraTeamIds:o},{enabled:a}),_=c.r.LOADING;return"loaded"===h.status?_=c.r.SUCCESS:"errors"===h.status&&(_=c.r.FAILURE),{subscription:h,status:_}}({searchQuery:e,filters:r,sortConfig:n,enabled:i,firstPageSize:d,extraTeamIds:g,isEndUserSurface:h,orgId:_}),A=T===c.r.SUCCESS&&!b.data?.orgTeams?.isLoadingNextPage,N=A&&b.data?.orgTeams&&b.data.orgTeams.hasNextPage()?()=>{b.data.orgTeams.loadNext(d||25)}:void 0;a.useEffect(()=>{T===c.r.SUCCESS&&E((b.data?.orgTeams||[]).filter(e=>!!e.teamId).map(e=>({id:e.teamId})))},[T,b.data,E]);let C=a.useMemo(()=>{var e,n,a;return b.data?(e=b.data,n=o,a=r,(e.orgTeams||[]).filter(e=>!!e.team).map(e=>S(e.team,n,e.memberCount?Number(e.memberCount):null)).filter(e=>v(e,a))):[]},[b.data,o,r]),L=a.useMemo(()=>b.data?function(e,r,n,a){let i=(0,l.oA)(e.org),o=(i&&i.teamsByIdInAdmin.status===l.tT.Loaded?((0,l.oA)(i.teamsByIdInAdmin)||[]).map(e=>e.team):l.oA(e.org)?.teamsById||[]).map(e=>S(e,r)).filter(e=>v(e,n));return a?(I.set(o),I.search(a)):o}(b.data,o,r,e):[],[b.data,o,r,e]),{trackPerformanceEvent:O}=(0,y.S)("teams_table_fetch_performance","livegraph");return(0,a.useEffect)(()=>{O("fetch_end")},[O,C.length]),(0,a.useEffect)(()=>{T===c.r.FAILURE&&O("fetch_error")},[O,T]),(0,a.useEffect)(()=>{O("fetch_start")},[O]),{status:T,teams:C,optimisticTeams:L,fetchMore:N,allTeamsFetched:A&&!N,addOptimisticIds:f}}function v(e,r){let n=(0,o.kc)().teams_table_disable_fe_filters;return!(!n&&r?.orphanedTeamFilter&&e.owner||!n&&r?.teamMembershipFilter&&r.teamMembershipFilter!==e.userTeamMembership||!n&&r?.orgAccessFilter&&r.orgAccessFilter!==e.org_access||!n&&r?.discoverabilityFilter&&(r.discoverabilityFilter===f.Fb.ORG_BROWSABLE&&e.org_access!==i.bUL.PRIVATE||r.discoverabilityFilter===f.Fb.HIDDEN&&e.org_access!==i.bUL.SECRET)||r?.workspaceFilter&&(r.workspaceFilter===E.O&&null!==e.workspace_id||r.workspaceFilter!==E.O&&r.workspaceFilter!==e.workspace_id))}function S(e,r,n){let a=r[e.id]??0,i=l.oA(e.ownerRole)?.user??null;return{...e,id:e.id,created_at:e.createdAt?.toISOString(),img_url:e.imgUrl||void 0,org_id:e.orgId,name:e.name,description:e.description||"",hidden:e.hidden,org_browsable:e.orgBrowsable,license_group_id:e.licenseGroupId,workspace_id:e.workspaceId,org_access:e.orgAccess||null,projects:Number(e.projectsCount)||0,editors:Number(e.editorsCount)||0,restrictions_list:e.restrictionsList||null,subscription:e.subscription||null,subscription_raw:e._subscriptionRaw||null,stripe_customer_id:e.stripeCustomerId||null,student_team_at:e.studentTeamAt?.toISOString()||null,student_team_state:e.studentTeamState||f.kU.STUDENT_TEAM_NULL,student_autoverifying_team_at:e.studentAutoverifyingTeamAt?.toISOString()||null,student_team:!!e.studentTeamAt,pro_team:!1,org_team:!0,starter_team:e.isStarterTeam||!1,grace_period_end:e.gracePeriodEnd?.toISOString()||null,grace_period_type:e.gracePeriodType||null,last_upgraded_at:null,deleted_at:e.deletedAt?.toISOString()||null,license_group:null,default_permission:e.defaultPermission,vat_gst_id:e.vatGstId||void 0,tax_id_verification_status:e.taxIdVerificationStatus||void 0,ai_features_disabled:!!e.aiFeaturesDisabledAt,legal_name:e.legalName||null,sharing_audience_control:e.sharingAudienceControlComputed||void 0,orphaned:!i,member_count:"number"==typeof n?Math.max(n+a,0):void 0,owner:i&&{id:i.id,name:i.name||void 0,handle:i.handle||"",img_url:i.imgUrl||"",email:i.email||void 0,description:i.description,org_id:e.orgId||void 0},experiment_assignments:[],userTeamMembership:null===e.roleOnObjectTeamForUser?g.ig.NOT_JOINED:g.ig.JOINED}}function w(e,r,n,a){let i=(0,b.R)(r?.orgAccessFilter,r?.discoverabilityFilter);return String((0,d.lF)({...n&&{sort_by:n.columnName},...n&&{order_by:n.isReversed?_.dy.DESC:_.dy.ASC},...e&&{search_query:e},...i&&{org_access:i},...r?.orphanedTeamFilter&&{teams_without_owners:r.orphanedTeamFilter},...r?.teamMembershipFilter&&{member_of_filter:null!==r.teamMembershipFilter},...r?.teamMembershipFilter&&{teams_member_of:r.teamMembershipFilter===g.ig.JOINED},...r?.workspaceFilter&&{workspace_id:r.workspaceFilter},...a&&{is_end_user_surface:a}}))}},908140:(e,r,n)=>{n.d(r,{I:()=>u}),n(411855),n(188507),n(629019),n(858977),n(154254),n(939863),n(175290);var a=n(809838);n(738269);var i=n(349410),o=n(6949),s=n(611978),l=n(596607),c=n(186828);n(172981),n(155367),n(567088),n(668526);var d=n(352898);function u(){var e,r;let n=(0,i.Cv)(),u=(0,s._6)(),m=(0,o.a9)(),p=(0,a.E)();return!!n()&&(p||(e=u,r=(0,l.uE)(m),"teamAdminConsole"!==e.view&&"orgAdminSettings"!==e.view&&("licenseGroup"===e.view&&e.subView===c.GN.ADMIN&&!!r||"workspace"===e.view&&e.subView===d.V0.ADMIN&&!!r||"orgDomainManagement"===e.view||"abandonedDraftFiles"===e.view)))}},796933:(e,r,n)=>{n.d(r,{RQ:()=>i,jU:()=>a}),n(464704),n(896026);let a="organize-favorite-menu",i="team-link-context-menu"},787133:(e,r,n)=>{n.d(r,{q:()=>o});var a=n(374626),i=n(320660);let o=(0,i.Q)(a.zl,"FileBrowser",(0,i.h)("filebrowser-loading-page",e=>{e.setAttribute("id",""),e.classList.remove("hidden"),e.classList.remove("fadeOut")}));o.useIsLoading},27182:(e,r,n)=>{n(411855).createContext({canGoBack:!1,canGoForward:!1,goBack:()=>{},goForward:()=>{}})},809838:(e,r,n)=>{n.d(r,{E:()=>o}),n(411855);var a=n(627776),i=n(517333);function o(){return!!i.eD||(0,a.ce)()}n(164377),n(27182)},896026:(e,r,n)=>{n.d(r,{x:()=>a});let a="FILE_CREATION_OMNICREATE_DROPDOWN";var i=(e=>(e.DESIGN="RESOURCE_CREATION_DESIGN_OPTION",e.WHITEBOARD="RESOURCE_CREATION_WHITEBOARD_OPTION",e.SLIDES="RESOURCE_CREATION_SLIDES_OPTION",e.SITES="RESOURCE_CREATION_SITES_OPTION",e.IMPORT="RESOURCE_IMPORT_OPTION",e.COOPER="RESOURCE_CREATION_COOPER_OPTION",e))(i||{})},827294:(e,r,n)=>{n.d(r,{S:()=>g});var a=n(411855),i=n(188507),o=n(946689),s=n(493323),l=n(939863),c=n(392592),d=n(63397),u=n(746058),m=n(237870),p=n(603234),h=n(488578),_=n(966688);function g(e){let{profileId:r,profileHandle:n,emptyStateText:m}=e,h=(0,i.wA)(),[g,f]=a.useState([]),[E,y]=a.useState(!1);a.useEffect(()=>{y(!0),u.s.getRestrictedProfiles({profileId:r}).then(({data:e})=>{f(e.meta),y(!1)})},[r]);let b=(e,r)=>{f(g.map(n=>n.id===e?{...n,is_restricted_by_current_user:r}:n))},I=(e,r)=>{b(e,r),h(c.F.enqueue({message:r?(0,l.t)("community.comments.restricted_this_user_s_comments"):(0,l.t)("community.comments.unrestricted_this_user_s_comments"),type:"profile-restricted-change",button:{text:(0,l.t)("community.undo"),action:()=>{r?v(e):T(e)}}}))},T=r=>{h(d._8({profileId:e.profileId,blockedProfileId:r,onSuccess:()=>I(r,!0)}))},v=r=>{h(d.dL({profileId:e.profileId,blockedProfileId:r,onSuccess:()=>I(r,!1)}))},S=g&&g.length>0;if(!m&&!S)return a.createElement(a.Fragment,null);if(E)return a.createElement(s.kt,null);let w=S?a.createElement(a.Fragment,null,n?(0,l.t)("community.comments.these_people_can_t_comment_on_any_of_profile_handles_community_files_and_plugins",{profileHandle:n}):(0,l.t)("community.comments.these_people_can_t_comment_on_any_of_your_community_files_and_plugins")):a.createElement(a.Fragment,null,m," ",(0,l.tx)("community.comments.learn_more_about_managing_comments_on_your_files_and_plugins_in_community",{learnMoreLink:a.createElement(o.Us,{href:"https://help.figma.com/hc/articles/1500002628062",target:"_blank",trusted:!0},(0,l.tx)("general.learn_more"))})," "),A=a.createElement("div",{className:e.wrapperClassName?e.wrapperClassName:""},a.createElement("div",{className:_.tB},g.map(e=>a.createElement(p.y,{profile:e,key:e.profile_handle,rightSide:e.is_restricted_by_current_user?a.createElement(o.nR,{onClick:v.bind(null,e.id)},(0,l.tx)("community.comments.unrestrict")):a.createElement(o.$$,{onClick:T.bind(null,e.id)},(0,l.tx)("community.comments.restrict"))}))));return a.createElement(a.Fragment,null,a.createElement("div",{className:_.bV},(0,l.tx)("settings_tab.community_commenters_label")),w,A)}(0,m.Ju)(function(e){return a.createElement(h.aF,{className:_.Iy,popStack:!0},a.createElement(g,{profileId:e.profileId,profileHandle:e.profileHandle,emptyStateText:e.emptyStateText}))},"ProfilesBlockedFromCommentingModal")},119735:(e,r,n)=>{n.d(r,{AH:()=>b,GI:()=>v,J_:()=>y,KR:()=>w,pH:()=>T});var a=n(411855),i=n(188507),o=n(966712),s=n(915440),l=n(391388),c=n(647899),d=n(881388),u=n(939863),m=n(635344),p=n(662275);n(477782);var h=n(860178),_=n(801387),g=n(674524),f=n(279453),E=n(182869);function y(){let{getConfig:e}=(0,c.I7)("exp_file_browser_workspace_pinning");return a.useCallback(()=>!!e().getValue("enabled",!1),[e])}let b="workspace";function I(e,r){let n=Array.from(e.keys()),a=Array.from(r.keys());return n.length===a.length&&n.every(n=>(0,i.bN)(e.get(n),r.get(n)))}function T(e,r={}){let n=function(e,r={}){let n=(0,h.TA)(),o=(0,i.d4)(e=>e.currentUserOrgId),c=a.useMemo(()=>e.map(e=>({fileKey:e,orgId:o})),[e,o]),d=(0,s.p)(f.PG0,c,r),u=(0,_.Au)(o),m=l.Qw.all([u,...d.map(e=>e.result)]);return l.Qw.useTransform(m,([r,...a])=>{let i=new Map;return a.forEach((a,s)=>{let{file:l}=a,c=e[s],d=l?.team?.workspace??null;if(!o||!l||!d){i.set(c,null);return}let u=d.pinnedFiles,m=u?.find(e=>e.file?.key===c),p=!!u&&u.length>=S,h=!!r&&r===d.id,_=d.canAdmin,g=m?.creator?.id===n,f=!m&&(h||_)&&(l.canPinToWorkspace||l.canEdit),E=f&&!p,y=m&&(g||_);if(f){i.set(c,{shouldShowPinFileToWorkspaceAction:f,canPinFileToWorkspace:E,canEditPin:!1,existingFilePinId:null,workspaceHasMaxPins:p});return}if(y){i.set(c,{shouldShowPinFileToWorkspaceAction:f,canPinFileToWorkspace:E,canEditPin:!0,existingFilePinId:m.id,workspaceHasMaxPins:p});return}i.set(c,{shouldShowPinFileToWorkspaceAction:!1,canPinFileToWorkspace:!1,canEditPin:!1,existingFilePinId:null,workspaceHasMaxPins:p})}),i},I)}(a.useMemo(()=>e?[e]:[],[e]),r);return l.Qw.useTransformShallowEqual(n,r=>r.get(e??""))}function v(e){let r=(0,i.wA)();return a.useCallback((n,a)=>{if(a){r(d.s.error((0,u.t)("file_browser.pinning.add_pin_error_max_pins",{maxNumWorkspacePins:S})));return}r(p.to({type:(0,m.a)(),data:{fileKey:n,source:e}}))},[r,e])}let S=8;function w(e){let r={created_at:e.createdAt.toDateString(),creator_id:e.creatorId,description:e.description,edit_url:e.editUrl,folder_id:e.folderId,has_file_link_password:e.hasFileLinkPassword,has_proto_link_password:e.hasProtoLinkPassword,key:e.key,link_access:e.linkAccess,name:e.name,parent_org_id:e.parentOrgId,proto_link_access:e.protoLinkAccess,team_id:e.teamId,thumbnail_url:e.thumbnailUrl,thumbnail_url_override:e.thumbnailUrlOverride,thumbnail_guid:e.thumbnailGuid,client_meta:e.clientMeta,deleted_at:e.deletedAt?.toDateString()??null,trashed_at:e.trashedAt?.toDateString()??null,trashed_user_id:e.trashedUserId,license:e.license,prototype_url:e.prototypeUrl,file_repo_id:e.fileRepoId,editor_type:e.editorType,touched_at:e.touchedAt,url:e.url,updated_at:e.updatedAt.toDateString(),source_file_key:e.sourceFileKey,is_try_file:e.isTryFile};if((0,o.kc)().types_convergence_shadow_reads){let n=(0,E.E)(e),a=!0;for(let[e,i]of Object.entries(r)){let o=n[e];o!==i&&(a=!1,(0,g.x)("client_platform.types_convergence_field_mismatch",{callsite:"workspacePinFileToFigFile",entityId:r.key,fieldNameCurrent:e,fieldValueCurrent:String(i),fieldValueConverted:String(o)}))}if((0,g.x)("client_platform.types_convergence_shadow_read_result",{callsite:"workspacePinFileToFigFile",entityId:r.key,success:a}),(0,o.kc)().types_convergence_release_workplacepinfile)return n}return r}},743905:(e,r,n)=>{n.d(r,{De:()=>u.D,G4:()=>D.G,v2:()=>f,U2:()=>P.U2,T1:()=>S,LK:()=>m.L,Hl:()=>N,hO:()=>a.h,d3:()=>E,eQ:()=>y,SW:()=>w,ni:()=>R,G1:()=>a.G,uZ:()=>I,yt:()=>A,m1:()=>T,cN:()=>P.cN});var a=n(230047),i=n(67151),o=n(776250),s=n(374626),l=n(743282),c=n(572206),d=n(719624),u=n(720241),m=n(398029),p=n(931770),h=n(516703),_=n(967409),g=n(725902);let f="FRAGMENT_SEARCH_PEEK_MODAL";function E(e,r,n,a,o,s,l){return a?{entry_point:e,session_id:r,search_id:n,query_type:function(e){switch(e.type){case"input-text":return"text";case"input-selection":return"selection";case"input-image":return"image";default:(0,i.xb)(e)}}(a),query_text:"input-text"===a.type?a.value:void 0,query_node_id:"input-selection"===a.type?a.node.guid:void 0,query_is_image_selection:function(e){switch(e.type){case"input-text":case"input-image":return;case"input-selection":return(0,h.A)(e.node)||1===e.node.childrenNodes.length&&(0,h.A)(e.node.childrenNodes[0]);default:(0,i.xb)(e)}}(a),query_file_key:a.file_key,...function(e){switch(e.type){case"input-text":case"input-image":return;case"input-selection":return{query_width:e.node.absoluteBoundingBox.w,query_height:e.node.absoluteBoundingBox.h};default:(0,i.xb)(e)}}(a),...b(s),is_in_preview:o,is_community_fragment_search:l}:{entry_point:e,session_id:r,search_id:n,is_in_preview:o,...b(s),is_community_fragment_search:l}}function y(e){switch(e){case"percent_match":return"relevance";case"last_modified":return"last_modified";case void 0:return;default:(0,i.xb)(e)}}function b(e){return e&&e.searchModelType===_.uH.FILES?{filterFolderIds:e.folderIds,filterTeamIds:e.teamIds,filterCreatorIds:e.creatorIds}:null}function I(e){return e?.type===f}function T(e,r=378){let n=Math.min(e.x,e.y);if(n>r){let a=r/n;return new c.Mi(e.x*a,e.y*a)}return e}var v=(e=>(e.FragmentSearch="fragment-search",e.GPT="gpt-vision",e))(v||{});function S(e,r="fragment-search"){let n;n="fragment-search"===r?T(new c.Mi(e.size.x,e.size.y)):T(function(e,r){let n=Math.max(e.x,e.y);if(n>2048){let r=2048/n;return new c.Mi(e.x*r,e.y*r)}return e}(new c.Mi(e.size.x,e.size.y),0),768);let a=(0,p._G)(n,e.guid,!0,void 0,!1,!0);return a&&a.pixels&&a.pixelSize&&a.displaySize&&(0,p.Pv)(a.pixels,a.pixelSize).split(";base64,").pop()||null}async function w(e,r,n){return r.x!==e.width||r.y!==e.height?{type:"image",value:function(e,r){let n=document.createElement("canvas"),a=n.getContext("2d");n.width=r.x,n.height=r.y,a?.drawImage(e,0,0,r.x,r.y);let i=n.toDataURL("image/png").split(",");if(i.length>=2)return i[1];throw Error("Invalid data URL format")}(e,r)}:{type:"image",value:await (0,g.t)(n)}}function A(e){return new Promise((r,n)=>{let a=document.createElement("img"),i=URL.createObjectURL(e);a.onload=()=>{r(a),URL.revokeObjectURL(i)},a.onerror=e=>{n(e),URL.revokeObjectURL(i)},a.src=i})}async function N(e,r,n,c,u,m){let p=(0,l.g)(),h=Date.now(),_=s.zl.get(d.dd),g=E(r,_,p,e,!1,n,m),f="input-selection"===e.type?function(e){let r=e.editInfo;return{query_is_top_level_node:e.isTopLevelFrame(),query_num_descendant_nodes:e.getVisibleDescendantIds().length,query_is_component:e.isComponentish,query_depth_from_top_level_frame:e.depthFromTopLevelFrame,query_created_at:r?.createdAt,query_last_edited_at:r?.lastEditedAt,query_last_edited_by:r?.userId}}(e.node):{};a.h.setFragmentSearchLoading(p,e,c,m,u),(0,o.sx)("Fragment search query",{...f,...g});let y={session_id:_,search_id:p,node_id:"input-selection"===e.type?e.node.guid:""};try{let s=[];switch(e.type){case"input-image":s=await L(e,y,n,u,m);break;case"input-text":s=await O(e,y,n,u,m);break;case"input-selection":s=await C(e,y,n,u,m);break;default:(0,i.xb)(e)}let l=[];if(l=m?s.map(e=>({...e,type:"hub-file-fragment"})):s.map(e=>({...e,type:"fig-file-fragment"})),a.h.getSearchId(m)!==p)return;(0,o.sx)("Fragment search time to load",{...g,elapsed_time:Date.now()-h}),(0,o.sx)("Fragment search result",{...g,count:s.length}),a.h.setFragmentSearchResults(p,l,r,m)}catch(e){if(a.h.getSearchId(m)!==p)return;a.h.setFragmentSearchError(p,e,m)}}async function C(e,r,n,a,i){let{node:o,file_key:s}=e,l=S(o);if(!l)throw Error("Failed to export thumbnail");return(await u.D.postFragmentSearch({type:"image",value:l},s,r,n,a,i)).data.meta.results}async function L(e,r,n,a,i){let o=await A(e.imageFile),s=T(new c.Mi(o.width,o.height)),l=await w(o,s,e.imageFile);return(await u.D.postFragmentSearch(l,e.file_key,r,n,a,i)).data.meta.results}async function O(e,r,n,a,i){return(await u.D.postFragmentSearch({type:"text",value:e.value},e.file_key,r,n,a,i)).data.meta.results}async function R(e,r){let n=(await u.D.getFragmentData({file_key:r,node_id:e.guid})).data.meta.results;m.L.setIndexedFragmentData(n)}var P=n(657123),D=n(456827)},396040:(e,r,n)=>{n.d(r,{l1:()=>eh.l,_3:()=>K}),n(362871),n(198565);var a=n(411855),i=n(188507),o=n(67151),s=n(171812),l=n(563706),c=n(481373),d=n(445092),u=n(336599),m=n(967409),p=n(671653),h=n(201462),_=n(629019),g=n.n(_),f=n(966712),E=n(915440),y=n(135876),b=n(163023),I=n(154254),T=n(939863),v=n(90898),S=n(11861),w=n(723245),A=n(279453),N=n(294662),C=n(83427),L=n(925292),O=n(378124),R=n(935529),P=n(578064),D=n(969859),k=n(116231),M=n(927092),F=n(117688),x=n(236705),U=n(83958),B=n(505422);let V={[m.uH.HUB_FILES]:F.A,[m.uH.PUBLIC_PLUGINS]:x.A,[m.uH.PRIVATE_PLUGINS]:null,[m.uH.PUBLIC_PROFILES]:M.A,[m.uH.FILES]:null,[m.uH.PROJECTS]:null,[m.uH.TEAMS]:null,[m.uH.USERS]:null,[m.uH.PUBLIC_WIDGETS]:U.A,[m.uH.PRIVATE_WIDGETS]:null},G={[m.uH.PUBLIC_PLUGINS]:O.Of,[m.uH.PRIVATE_PLUGINS]:L.Of,[m.uH.PUBLIC_PROFILES]:k.hP,[m.uH.PUBLIC_WIDGETS]:R.nD.listStyle,[m.uH.PRIVATE_WIDGETS]:R.uB.listStyle};class H extends a.Component{componentDidMount(){!this.props.isLoading&&this.props.search.queryId!==this.props.search.lastAckedQueryId&&this.props.search.parameters.query.length>0&&(this.props.setSearchLastAckedQueryId(this.props.search.queryId),this.props.setLastLoadedQuery(this.props.search.sessionId,this.props.search.parameters.query,this.props.search.queryId),N.vj.Session.trackClientResult(this.props.search,this.props.selectedView))}componentDidUpdate(){!this.props.isLoading&&this.props.search.queryId!==this.props.search.lastAckedQueryId&&this.props.search.parameters.query.length>0&&(this.props.setSearchLastAckedQueryId(this.props.search.queryId),this.props.setLastLoadedQuery(this.props.search.sessionId,this.props.search.parameters.query,this.props.search.queryId),N.vj.Session.trackClientResult(this.props.search,this.props.selectedView))}renderContent(){let e=this.props.viewMode===p.XU.LIST?G[this.props.searchModelType]??k.p_:this.props.searchModelType===m.uH.FILES||this.props.searchModelType===m.uH.TEAMS&&(0,f.kc)().teams_in_items_view||this.props.searchModelType===m.uH.PROJECTS&&(0,f.kc)().projects_in_items_view?void 0:k.Vg;e+=this.props.isLoggedIn?` ${k.Vz}`:"";let r=this.props.didSucceed&&0===this.props.searchResults.length;return a.createElement(y.x,{isLoading:this.props.isLoading,className:k.g4},()=>this.props.didFail?a.createElement(K,{illustration:B.A,resourceTypeDisplayString:this.props.failureMessage||(0,T.t)("search.search_model_type.search_error"),searchModelType:this.props.searchModelType,query:null,activePlan:this.props.activePlan,activeWorkspaceFilter:this.props.activeWorkspaceFilter,onResetWorkspaceFilter:this.props.onResetWorkspaceFilter}):r?a.createElement(K,{illustration:V[this.props.searchModelType],resourceTypeDisplayString:(0,m.hf)(this.props.searchModelType),searchModelType:this.props.searchModelType,query:this.props.query,activePlan:this.props.activePlan,activeWorkspaceFilter:this.props.activeWorkspaceFilter,onResetWorkspaceFilter:this.props.onResetWorkspaceFilter}):a.createElement("div",{className:k.sb},a.createElement("div",{className:e},a.createElement(P.L,{searchModelType:this.props.searchModelType,searchResults:this.props.searchResults,viewMode:this.props.viewMode,planFilter:this.props.planFilter}))))}renderProjectContextMenu(){let e=(0,v.H)(this.props.dropdownShown);return(0,w.D6)(this.props.currentOrgId)&&e&&a.createElement(S.p,{folder:e,useLGPerms:!0})}render(){let e=this.props.searchModelType===m.uH.FILES?void 0:this.props.viewMode===p.XU.LIST?k.UL:k.G2;return a.createElement(C.Q0,{isDropdown:!1,...this.props},a.createElement("div",{className:e},this.renderContent()),this.props.searchModelType===m.uH.PROJECTS&&this.renderProjectContextMenu())}}H.displayName="SearchResultView";let W=(0,i.Ng)((e,r)=>({viewMode:(0,D.z[r.searchModelType])(e.search.parameters,e.viewBarViewModeOptionByView).viewMode,isLoggedIn:!!e.user,search:e.search,activeWorkspaceFilter:e.search.parameters.workspaceFilter,activePlan:e.search.parameters.planFilter,dropdownShown:e.dropdownShown,currentOrgId:e.currentUserOrgId,selectedView:e.selectedView}),(e,r)=>({onResetWorkspaceFilter:()=>{e(d.HI({}))},setSearchLastAckedQueryId:r=>{e(d.ej({lastAckedQueryId:r}))},setLastLoadedQuery:(r,n,a)=>{e(d.w2({sessionId:r,query:n,queryId:a}))}}))(H);function K(e){let{query:r,resourceTypeDisplayString:n}=e,o=(0,i.d4)(e=>e.currentUserOrgId),s="NON_ORG_TEAMS"!==e.activePlan&&e.activePlan||o,l=(0,E.Rs)(A.N63,{orgId:s??null}),c=a.useMemo(()=>"loaded"===l.status?l.data?.org?.workspaces:[],[l]),d=c?.find(r=>null!=e.activeWorkspaceFilter&&r.id===e.activeWorkspaceFilter),u=e.onResetWorkspaceFilter,m=a.useMemo(()=>a.createElement(a.Fragment,null,n,null!==r?a.createElement(a.Fragment,null,"\xa0",a.createElement("span",{className:k.xV},r)):null,null!=d&&a.createElement(a.Fragment,null," in the ",a.createElement("span",{className:k.xV},d.name)," workspace",a.createElement("div",{className:g()(I.cx.pt16.$,k.YF),onClick:()=>{u&&u()},role:"button",tabIndex:0},(0,T.tx)("search.empty_state.try_searching_whole_org")))),[r,u,d,n]);return a.createElement("div",{className:k.p$},e.illustration&&a.createElement(b.B,{className:k.IC,svg:e.illustration,useOriginalSrcFills_DEPRECATED:!0}),a.createElement("div",{className:k.jI},a.createElement("span",{className:k.q6},m)),e.cta?a.createElement("div",{className:k.Ki},e.cta):null)}K.displayName="SearchResultEmptyState";class Y extends a.Component{constructor(e){super(e),this.onScroll=e=>{this.updateIsTop(e.target)},this.updateIsTop=e=>{this.props.setScrollTop(window.pageYOffset)},this.shouldScroll=()=>0!==this.props.searchScrollTop,this.getLoadingKey=()=>d.$P.loadingKeyForPayload({parameters:this.props.parameters}),this.isLoading=()=>u.VP(this.props.loadingState,this.getLoadingKey()),this.didSucceed=()=>u.GH(this.props.loadingState,this.getLoadingKey()),this.didFail=()=>u.aF(this.props.loadingState,this.getLoadingKey()),this.getFailedReason=()=>u.Fl(this.props.loadingStateFailureReasons,this.getLoadingKey());let r=this.getFilteredResults(e.searchResults??[],e.sortFilterConfig);this.state={showContainer:!this.shouldScroll(),filteredFileResults:r}}componentDidMount(){window.addEventListener("scroll",this.onScroll,!0),this.shouldScroll()?setTimeout(()=>{window.scrollTo(0,this.props.searchScrollTop),this.setState({showContainer:!0})},0):this.updateIsTop({})}componentWillUnmount(){window.removeEventListener("scroll",this.onScroll,!0)}componentDidUpdate(e){if(this.props.searchModelType===m.uH.FILES){let r=e.searchResults??$,n=this.props.searchResults??$,a=r.length!==n.length;if(!a)for(let e=0;e<r.length;e++)(0,s.c2)(r[e],n[e])||(a=!0);if(a){let e=this.getFilteredResults(n,this.props.sortFilterConfig);this.setState({...this.state,filteredFileResults:e})}}}getFilteredResults(e,r){return this.props.searchModelType===m.uH.FILES?e.filter(e=>{let n=e.model;switch(r.filters.fileType){case p.t2.ANY:return!0;case p.t2.DESIGN:return"design"===n.editor_type;case p.t2.FIGJAM:return"whiteboard"===n.editor_type;case p.t2.SITES:return"sites"===n.editor_type;case p.t2.SLIDES:return"slides"===n.editor_type;case p.t2.PROTOTYPE:return!1;default:(0,o.xb)(r.filters.fileType)}}):e}render(){let e=this.props.searchResults??$,r=this.getFilteredResults(e,this.props.sortFilterConfig);return a.createElement(c.r,{key:"unified-search",toolbar:l.Ay.mobile?a.createElement(h.o,null):void 0,viewbar:a.createElement(D.Z,{sortControlsDisabled:0===e.length}),viewBarSticky:!0,content:a.createElement(W,{searchResults:r,searchScope:this.props.parameters.searchScope,searchModelType:this.props.searchModelType,sortState:this.props.parameters.sortState,onChangeSortState:this.props.onChangeSortState,isLoading:this.isLoading(),didSucceed:this.didSucceed(),didFail:this.didFail(),failureMessage:this.getFailedReason(),query:this.props.completedQuery,planFilter:this.props.parameters.planFilter})})}}Y.displayName="SearchPageView";let $=[];(0,i.Ng)((e,r)=>{let n=e.search.parameters,a=e.search.responses[r.searchModelType];return{parameters:n,completedQuery:e.search.completedQueries[r.searchModelType],searchResults:a?.results||null,loadingState:e.loadingState,loadingStateFailureReasons:e.loadingStateFailureReasons,searchScrollTop:e.search.searchScrollTop,sortFilterConfig:e.tileSortFilterStateByView.search}},e=>({onChangeSortState:r=>{e(d.qv({sortState:r}))},setScrollTop:r=>{e(d.PP({top:r}))}}))(Y),n(320063),n(564577),n(62342);var j=n(723325);n(452441),n(32863),n(676967),n(56691),n(944682),n(586459),n(112235),n(132135),n(767553).uQ;var z=n(91408);n(896474),n(743905),n(662275),n(611978);var q=n(607851);n(234363);var X=n(522027),J=n(374626),Z=n(355819),Q=n(582064),ee=n(237870),et=n(488578),er=n(259018),en=n(588370),ea=n(626206),ei=n(452836),eo=n(893451),es=n(915995),el=n(550163),ec=n(4508),ed=n(837746),eu=n(712335);let em=(0,z.jz)(ed.RAo),ep=(0,z.jz)(ed.aIx);(0,ee.Ju)(function(){let e=(0,i.wA)(),r=(0,i.d4)(e=>e.modalShown),n=(0,i.d4)(e=>e.search.sessionId),o=(0,J.md)(el.Q),[s,l]=(0,J.fp)(q.z5),c=(0,J.md)(q.L8),d=(0,es.A)();a.useEffect(()=>()=>{n&&N.vj.Session.searchModalExit(n)},[n]);let u=a.useCallback(()=>{e(Q.ky()),s&&(l(null),d(m.uR.DROPDOWN,s))},[e,l,s,d]);if(!r)return null;let p=r.data.width?{width:`${r.data.width-2*em}px`}:void 0;return a.createElement(et.aF,{absolutePosition:{top:r.data.top,left:r.data.left},padding:`0 0 ${em}px 0`,size:r.data.width??ep,tintedModalBackground:!1,useModalViewScroll:!1,maxHeight:"90vh",onHide:u,popStack:!0,"data-testid":"facetedSearchModal"},a.createElement(j.dP,null,a.createElement(ei.a3.Provider,{value:ei.Vm.PREVIEW},a.createElement("div",{className:eu.PP,style:p},a.createElement(X.Y,{hideSearchPreview:r.data?.hideSearchPreview})),a.createElement(Z.P,{className:eu.xx},s&&a.createElement("div",{className:eu.v$},a.createElement(er.s,{facetType:s,id:"facet-panel",path:[3]})),a.createElement(eo.L,{id:"suggestions",path:[4]}),r.data.hideSearchPreview?null:o||c.length>0?a.createElement(ea.j,{id:"search-results",path:[5]}):a.createElement(en.n,{id:"recents",path:[5]})))))},ec.r),n(207202),(0,z.jz)(ed.RAo),n(268537),n(738269),n(128751),n(860178),n(99506),n(298543),n(715621),n(611768),n(347299);var eh=n(30676)},30676:(e,r,n)=>{n.d(r,{l:()=>v});var a=n(411855),i=n(188507),o=n(374626),s=n(163023),l=n(154254),c=n(939863),d=n(607851),u=n(267177),m=n(259018),p=n(190256),h=n(915995),_=n(85840),g=n(738269),f=n(128751),E=n(318812),y=n(967409),b=n(609714),I=n(112512);let T=e=>{switch(e){case y.WY.RESOURCE:return(0,c.tx)("search.preview_section.all_files");case y.WY.CREATOR:return(0,c.tx)("search.facets.created_by",{creator:(0,c.t)("search.facets.anyone")});case y.WY.SPACE:return(0,c.tx)("search.facets.space",{space:(0,c.t)("search.facets.all_spaces")});default:return""}};function v({dropdownId:e,facetType:r,containerRef:n,hasQuickActionsStyling:c,contentTargetRef:v}){let S=(0,i.wA)(),w=a.useRef(null),A=v||w,N=(0,E.Um)(),C=N?.type===e,L=(0,o.md)((0,d.l4)(r??null)),O=(0,p.f)(),R=(0,h.A)(),P=y.uR.DROPDOWN,D=c?l.cx.relative.lhNormal.flex.h24.bRadius4.px8.py4.b1.colorBorder.fontMedium.$:b.P2,k=c?l.cx.ml8.flex.itemsCenter.$:b.dN,M=n&&n.current?n.current.getBoundingClientRect().right:void 0;return a.createElement("div",{className:D,onMouseDown:n=>{n.stopPropagation(),S(f.an()),C?(S(g.oB()),R(P,r)):A.current&&(n.preventDefault(),S(g.j7({type:e,data:{facetType:r,targetRect:A.current.getBoundingClientRect()}})),O(P,r))},onClick:e=>e.stopPropagation(),role:"button",tabIndex:-1},a.createElement("span",{ref:A,className:l.cx.noWrap.$},!L||(0,u.II)(L)?T(r):(0,u.yA)(L)),a.createElement("div",{className:k},a.createElement(s.B,{svg:I.A,className:`${b.OW} ${C?b.iw:""}`})),C&&a.createElement(_.G,{dropdownId:e,dropdownChild:a.createElement(m.s,{facetType:r,id:"",path:[]}),containerRefRight:M,limitHeight:c}))}},207202:(e,r,n)=>{n(411855),n(188507),n(445092),n(697551),n(428467),n(967409)},362871:(e,r,n)=>{n.d(r,{lV:()=>L,ye:()=>M,wA:()=>R,D$:()=>O});var a=n(411855),i=n(188507),o=n(67151),s=n(776250),l=n(966712),c=n(268537),d=n(163023),u=n(154254),m=n(939863);n(67294);var p=n(30676),h=n(539293),_=n(85840),g=n(738269),f=n(445092),E=n(128751);n(988022),n(161325),n(860178),n(99506),n(935938);var y=n(967409),b=n(671653),I=n(298543),T=n(170588),v=n(127391);n(269135);var S=n(234587),w=n(388327),A=n(112512);let N=c.wv;class C extends a.PureComponent{render(){let e="deletedFiles"===this.props.selectedView.view,r=this.props.options.tileSortFilterConfig.viewMode===b.XU.LIST;return a.createElement("div",{className:"tile_sort_filter--dropdownCollectionContainer--Dnyyh"},e&&a.createElement(D,{dispatch:this.props.dispatch,options:this.props.options,selectedView:this.props.selectedView,hideSortMenu:this.props.hideSortMenu}),a.createElement(M,{config:this.props.options.tileSortFilterConfig}),!r&&!this.props.hideSortMenu&&a.createElement(F,{dispatch:this.props.dispatch,options:this.props.options,selectedView:this.props.selectedView,hideSortMenu:this.props.hideSortMenu}),r&&a.createElement(T.z,{query:"(max-width: 1120px)"},a.createElement(F,{dispatch:this.props.dispatch,options:this.props.options,selectedView:this.props.selectedView,hideSortMenu:this.props.hideSortMenu})))}}function L(e){let r=(0,i.d4)(e=>e.teams),n=(0,i.d4)(e=>e.orgById);if(!e.planOption?.plan_id)return null;let o="org"===e.planOption.plan_type&&e.planOption.plan_id?n[e.planOption.plan_id]?.img_url:r[e.planOption.plan_id]?.img_url;return a.createElement("div",{className:u.cx.flex.itemsCenter.$},a.createElement(v.H,{entityId:e.planOption.plan_id,entityName:e.planOption.label,imgUrl:o}))}C.displayName="TileSortFilter";let O={values:[b.ue.ASC,b.ue.DESC],valuesToDisplayText:(e,r)=>{switch(e){case b.ue.ASC:switch(r){case b.rR.TIME:return(0,m.t)("tile.sort_filter.sort_direction_oldest_first");case b.rR.ALPHABETICAL:return(0,m.t)("tile.sort_filter.sort_direction_a_to_z");default:return(0,m.t)("tile.sort_filter.sort_direction_ascending")}case b.ue.DESC:switch(r){case b.rR.TIME:return(0,m.t)("tile.sort_filter.sort_direction_newest_first");case b.rR.ALPHABETICAL:return(0,m.t)("tile.sort_filter.sort_direction_z_to_a");default:return(0,m.t)("tile.sort_filter.sort_direction_descending")}default:(0,o.xb)(e)}}};function R(e){let r=(0,i.wA)(),n=(0,a.useRef)(null),o=(0,i.d4)(e=>e.dropdownShown),l=o?.type===e.dropdownId,u=(0,i.d4)(e=>e.selectedView),p=e=>{e.stopPropagation()},f=a=>{r(E.an()),l?r(g.oB()):n.current&&r(g.j7({type:e.dropdownId,data:{targetRect:n.current.getBoundingClientRect()}})),p(a)},y=()=>{l&&r(g.oB())},T=r=>e.includeSortDirection,v=e.disabled?"tile_sort_filter--dropdownContainerDisabled--lYOaX tile_sort_filter--dropdownContainer--443h- text--fontPos11--2LvXf text--_fontBase--QdLsd":"tile_sort_filter--dropdownContainer--443h- text--fontPos11--2LvXf text--_fontBase--QdLsd",S=(r,n)=>{(0,s.sx)("Sort Changed - Dropdown",{oldValueString:`${e.checkedValue}`,newValueString:`${r}`,model:`${e.searchModelType}`,dir:n===b.ue.ASC?"asc":n===b.ue.DESC?"desc":void 0}),e.onChange(r,n)},C=a.createElement(_.G,{dropdownId:e.dropdownId,dropdownChild:a.createElement(h.j,{checkedValue:e.checkedValue,currentDirection:e.includeSortDirection?e.currentDirection:null,tileSortValues:e.includeSortDirection?e.tileSortValues:[],dirValuesToDisplayText:O.valuesToDisplayText,values:e.values,valuesToDisplayText:e.valuesToDisplayText,onChange:e.onChange})}),L=l?a.createElement(I.Cf,{targetRect:o.data.targetRect,minWidth:162,showPoint:e.isMobile,lean:"right",leanPadding:0,maxHeight:e.maxHeight},!e.hideSortOptionLabel&&a.createElement(c.MM,{checked:!1,disabled:!0},(0,m.tx)("tile.sort_filter.sort_by_label")),e.values.map(r=>a.createElement(c.rr,{key:r,checked:r===e.checkedValue,onClick:()=>{y(),S(r)},children:e.valuesToDisplayText[r]})),e.includeSortDirection&&a.createElement(a.Fragment,null,a.createElement(N,null),a.createElement(c.MM,{checked:!1,disabled:!0},(0,m.tx)("tile.sort_filter.order_label")),e.tileSortValues.map(r=>T(e.checkedValue)&&a.createElement(c.rr,{key:O.valuesToDisplayText(r,(0,w.E)(e.checkedValue)),checked:e.currentDirection===r,onClick:()=>{y(),S(e.checkedValue,r)},children:O.valuesToDisplayText(r,(0,w.E)(e.checkedValue))})))):null;return e.isMobile?L:a.createElement("div",{className:`${v} ${e.className||""}`,onClick:e=>{p(e),f(e)}},a.createElement("span",{ref:n},e.textWhenClosedPrefix,e.hideValueWhenClosed||e.valuesToDisplayText[e.checkedValue]),a.createElement("div",{className:"tile_sort_filter--caretContainer--kkZQq"},a.createElement(d.B,{svg:A.A,className:`tile_sort_filter--caret--AJHA9 ${l?"tile_sort_filter--caretDown--hIOid":""}`})),l?"search"===u.view?C:L:null)}let P={dropdownId:"tile-filter-creator-dropdown",values:[b.rJ.ANY,b.rJ.SELF,b.rJ.OTHER],textWhenClosedPrefix:"",valuesToDisplayText:{[b.rJ.ANY]:(0,m.tx)("tile.sort_filter.created_by_anyone"),[b.rJ.SELF]:(0,m.tx)("tile.sort_filter.created_by_you"),[b.rJ.OTHER]:(0,m.tx)("tile.sort_filter.created_by_others")}};class D extends a.PureComponent{constructor(){super(...arguments),this.onChange=e=>{let r=this.props.options.tileSortFilterConfig,n={...r,filters:{...r.filters,creator:e}};this.props.dispatch(g.JF({selectedView:this.props.selectedView,config:n}))}}render(){return a.createElement(R,{dropdownId:P.dropdownId,values:P.values,textWhenClosedPrefix:P.textWhenClosedPrefix,valuesToDisplayText:P.valuesToDisplayText,includeSortDirection:!1,checkedValue:this.props.options.tileSortFilterConfig.filters.creator,onChange:this.onChange,hideSortOptionLabel:!0})}}D.displayName="TileFilterCreatorDropdown",b.Jh.CAN_BE_RESTORED_DELETED,b.Jh.CAN_BE_VIEWED,b.Jh.CAN_BE_RESTORED_DELETED,(0,m.tx)("tile.sort_filter.can_be_restored_permanently_deleted"),b.Jh.CAN_BE_VIEWED,(0,m.tx)("tile.sort_filter.can_be_viewed");let k={dropdownId:"tile-filter-file-type-dropdown",values:[b.t2.ANY,b.t2.DESIGN,b.t2.FIGJAM],valuesToDisplayText:{[b.t2.ANY]:(0,m.tx)("tile.sort_filter.filter_by_all_files"),[b.t2.DESIGN]:(0,m.tx)("tile.sort_filter.filter_by_design_files"),[b.t2.FIGJAM]:(0,m.tx)("tile.sort_filter.filter_by_figjam_files"),[b.t2.PROTOTYPE]:(0,m.tx)("tile.sort_filter.filter_by_prototype_files"),[b.t2.SITES]:(0,m.tx)("tile.sort_filter.filter_by_sites_files"),[b.t2.SLIDES]:(0,m.tx)("tile.sort_filter.filter_by_slides_files")}};function M(e){let r=(0,i.wA)(),n=(0,i.d4)(e=>e.selectedView),o="search"===n.view,s=(0,S.oz)(),c="sharedWithYou"===n.view||"recentsAndSharing"===n.view,d=k.values;return(d=(0,l.kc)().piper?d.concat([b.t2.SLIDES]):d,d=c?d.concat([b.t2.PROTOTYPE]):d,d=s?d.concat([b.t2.SITES]):d,"search"===n.view)?a.createElement(p.l,{dropdownId:"full-search-results-resource-facet-dropdown",facetType:y.WY.RESOURCE}):a.createElement(R,{dropdownId:k.dropdownId,values:d,valuesToDisplayText:k.valuesToDisplayText,includeSortDirection:!1,checkedValue:e.config.filters.fileType,onChange:a=>{let i={...e.config,filters:{...e.config.filters,fileType:a}};o&&r(f.Rz({fileTypeFilter:a})),r(g.JF({selectedView:n,config:i,tab:e.tab}))},hideSortOptionLabel:!0,disabled:e.filterControlsDisabled,isMobile:e.isMobile})}class F extends a.PureComponent{constructor(){super(...arguments),this.getDefaultSortOrder=e=>({[b.C0.NAME]:b.ue.ASC,[b.C0.CREATED_AT]:b.ue.DESC,[b.C0.TOUCHED_AT]:b.ue.DESC,[b.C0.TRASHED_AT]:b.ue.DESC,[b.C0.SEARCH_RELEVANCE]:b.ue.DESC,[b.C0.PROJECT_NAME]:b.ue.ASC,[b.C0.ACCESSED_AT]:b.ue.DESC,[b.C0.SHARED_AT]:b.ue.DESC,[b.C0.OWNER]:b.ue.DESC})[e]||b.ue.ASC,this.onChange=(e,r)=>{let n=this.props.options.tileSortFilterConfig,a=void 0===r?this.getDefaultSortOrder(e):r,i={...n,sort:{key:e,dir:a}};this.props.dispatch(g.JF({selectedView:this.props.selectedView,config:i,tab:this.props.tab}))}}componentDidMount(){this.props.options.sortKeys.some(e=>e===this.props.options.tileSortFilterConfig.sort.key)||this.onChange(this.props.options.sortKeys[this.props.options.sortKeys.length-1],this.props.options.tileSortFilterConfig.sort.dir)}render(){return a.createElement(R,{...function(e={}){return{dropdownId:"tile-sort-dropdown",textWhenClosedPrefix:"",valuesToDisplayText:{[b.C0.CREATED_AT]:(0,m.tx)("tile.sort_filter.sort_date_created"),[b.C0.TOUCHED_AT]:(0,m.tx)("tile.sort_filter.sort_last_modified"),[b.C0.ACCESSED_AT]:(0,m.tx)("tile.sort_filter.sort_last_viewed"),[b.C0.NAME]:(0,m.tx)("tile.sort_filter.sort_alphabetical"),[b.C0.TRASHED_AT]:(0,m.tx)("tile.sort_filter.sort_date_trashed"),[b.C0.SEARCH_RELEVANCE]:(0,m.tx)("tile.sort_filter.sort_relevance"),[b.C0.SHARED_AT]:(0,m.tx)("tile.sort_filter.date_shared"),...e}}}(),values:this.props.options.sortKeys,includeSortDirection:!0,tileSortValues:O.values,currentDirection:this.props.options.tileSortFilterConfig.sort.dir,checkedValue:this.props.options.tileSortFilterConfig.sort.key,onChange:this.onChange,isMobile:this.props.isMobile})}}F.displayName="TileSortDropdown"},715621:(e,r,n)=>{var a=n(411855);n(362871),n(671653),n(611768);var i=n(786343);class o extends a.PureComponent{render(){return a.createElement("div",{className:`${i.kL} ${this.props.className||""}`},a.createElement("div",{className:i.zu},this.props.leftSide),!!this.props.center&&a.createElement("div",{className:i.gX},this.props.center),a.createElement("div",{className:i.ok},this.props.rightSide))}}o.displayName="BasicViewBar"},11861:(e,r,n)=>{n.d(r,{p:()=>Q});var a=n(411855),i=n(188507),o=n(776250),s=n(91408),l=n(72933),c=n(320063),d=n(966712),u=n(915440),m=n(711525),p=n(752553),h=n(154254),_=n(881388),g=n(939863),f=n(392592),E=n(796849),y=n(871280),b=n(686125),I=n(10118),T=n(381635),v=n(701404),S=n(318987),w=n(519692),A=n(329254),N=n(861593),C=n(970516),L=n(270056),O=n(662275),R=n(672517),P=n(10648),D=n(988022),k=n(396226),M=n(688083),F=n(334381),x=n(611978),U=n(99506),B=n(279453),V=n(428467),G=n(417512),H=n(984968),W=n(300874),K=n(451e3),Y=n(668860),$=n(851363),j=n(564517),z=n(858212),q=n(728587),X=n(449731),J=n(714728),Z=n(837746);function Q({className:e,folder:r,useLGPerms:n,onRenameClick:Q}){let ee=(0,i.d4)(e=>e.dropdownShown),et=(0,i.wA)(),[er,en]=a.useState(void 0),ea=(0,x.z3)();(0,c.h)(()=>{ei()});let ei=()=>{if("trashedFolders"===ea){en(void 0);return}j.S.getFolderTransfer({folderId:r.id}).then(({data:e})=>{en(e.meta)},e=>{en(void 0)})},eo=(0,u.Rs)(B.vhY,{folderId:r.id},{enabled:(0,d.kc)().lg_query_asset_transfer_request}),es=(0,m.oA)(m.oA(eo.data)?.project?.pendingAssetTransferRequest),el=es&&{id:es.id,source_user_email:es.sourceUser?.email,destination_user_email:es.destinationUser?.email,is_transfer_copy:es.isTransferCopy}||void 0,ec=(0,R.j6)(),ed=function(e){let r=(0,i.d4)(e=>(0,V.getPermissionsState)(e)),n=(0,i.d4)(e=>e.currentUserOrgId),a=(0,i.d4)(e=>e.orgById[e.currentUserOrgId]),c=(0,i.d4)(e=>e.currentTeamId),u=(0,i.d4)(e=>e.loadedFolders),m=(0,z.S)(),f=(0,p.n_)(M.tO),R=(0,p.n_)(M.Ct),P=(0,p.n_)(M.k4),D=n||c,x=n?U.OL.ORG:U.OL.TEAM,B=(0,i.d4)(e=>e.teams),j=(0,l.YO)(e),q=(0,F.y)(),Q=(0,i.wA)();return({folder:e,onRenameClick:i,shouldShowJoinButton:l,onRevokeTransfer:c,getPendingInfo:p,pendingTransfer:F})=>{let U=e.teamId,V=e&&U?B[U]:void 0,z=V?V.org_id:e.orgId;if("loaded"!==j.status)return[];let ee=!!j.data?.canEdit,et=!!j.data?.canDelete,er=!!j.data?.canTrash,en=!!j.data?.canShare,ea=!!j.data?.canMove,ei=!!j.data?.canRestore,eo=!!j.data?.canPermanentlyDelete,es=(0,d.kc)().fc_general&&(0,d.kc)().fc_connected_project_invite&&!!j.data?.canConnect,el=e.teamId?r.teams[e.teamId]:void 0,ec=!!j.data?.canSeeTransferOption,ed=!!j.data?.canEditDescription,eu=!!j.data?.canTransferExternally,em=()=>{Q((0,M.jl)({folderId:e.id,loadedFolders:u})),Q(O.to({type:J.W,data:{folderId:e.id}}))},ep=()=>{Q(L.ZJ({folderId:e.id,teamId:e.teamId,isSubscribed:!e.isSubscribed}))},eh=()=>{let r=(0,K.EE)(e.id,n);Q(C.S({url:r}))},e_=()=>{Q(O.to({type:(0,S.C)(),data:{folder:e}}))},eg=()=>{Q((0,M.jl)({folderId:e.id,loadedFolders:u})),Q(O.to({type:w.J,data:{folderId:e.id}}))},ef=({canAccessPaidFeatures:e,shouldTransferCopy:r,team:n})=>{let a=(0,d.kc)().enable_starter_project_transfers;if(!n||!eu){ey();return}if(e||a){eE(r);return}Q(O.to({type:X.DV,data:{team:n,resource:W.Bi.PROJECT_TRANSFER,currentPlan:k.F.Plan.STARTER,upsellPlan:k.F.Plan.PRO,editorType:null}}))},eE=r=>{e.teamId&&p&&Q(O.to({type:(0,y.Lg)(),data:{folderId:e.id,teamId:e.teamId,entryPoint:y.Lq.PROJECT_SETTINGS,onRequestClose:p,shouldTransferCopy:r}}))},ey=()=>{e.teamId&&Q(O.to({type:(0,b.Y)(),data:{planId:D,planType:x,planName:(a?a.name:B[e.teamId]?.name)||"",entryPoint:y.Lq.PROJECT_SETTINGS}}))},eb=()=>{F&&c&&Q(O.to({type:(0,A.d)(),data:{pending:F,canTransferProject:eu,onRevokeTransfer:c}}))},eI=(e,r)=>({displayText:e,disabled:!eu,callback:()=>ef({canAccessPaidFeatures:!!(el&&(0,H.PS)(el)),shouldTransferCopy:r,team:el}),trackingProperties:{canUserAccessProFeature:!!(el&&(0,H.PS)(el))}}),eT=window.innerWidth<=(0,s.hG)(Z.tgj),ev=!en||!eT,eS=(0,d.kc)().folder_settings_modal,ew=[];return e.trashedAt&&q?(ei&&ew.push({displayText:(0,g.t)("project_menu.restore"),callback:()=>{(0,o.sx)("Folder Restore Click",{folderId:e.id,teamId:U,orgId:z}),V&&!(0,H.rR)(V,{type:H.sK.ADD_PROJECT})?Q(O.to({type:X.DV,data:{team:V,resource:W.vL.FOLDER,action:$.ZN.CREATE_FOLDER,currentPlan:k.F.Plan.STARTER,upsellPlan:k.F.Plan.PRO,editorType:null}})):P({folderId:e.id,team:V}).catch(()=>{Q(_.s.error((0,g.t)("file_browser.api_folder.error_when_restoring")))})},disabled:!ei}),eo&&ew.push({displayText:(0,g.t)("project_menu.permanently_delete"),callback:()=>{(0,o.sx)("Folder Permanently Delete Click",{folderId:e.id,teamId:e.teamId,orgId:z}),Q(O.to({type:(0,v.U)(),data:{folder:e,folderOrgId:z}}))},disabled:!eo})):eS?(ew.push({displayText:(0,g.t)("file_browser.copy_link"),callback:eh}),l||(ev||ew.push({displayText:(0,g.t)("sidebar.share"),callback:em}),(z===D||U===D)&&ew.push({displayText:(0,g.t)("sidebar.move_project"),callback:eg,disabled:!ea}),m||ew.push({displayText:e.isSubscribed?(0,g.t)("sidebar.remove_from_favorites"):(0,g.t)("sidebar.add_to_favorites"),callback:ep}),ew.push({displayText:"",separator:!0}),ew.push({displayText:(0,g.t)("project_menu.settings"),callback:()=>{Q(O.to({type:N.l,data:{folderId:e.id}}))}}))):(e.description&&(ew.push({displayText:(0,g.t)("project_menu.description"),disabled:!0},{displayText:e.description,displayTextClassName:h.cx.colorTextMenuSecondary.preWrap.$,disabled:!0},{displayText:"",separator:!0}),ed&&ew.push({displayText:(0,g.t)("project_menu.edit_description"),callback:e_},{displayText:"",separator:!0})),!e.description&&ed&&ew.push({displayText:(0,g.t)("project_menu.add_description"),callback:e_}),ew.push({displayText:(0,g.t)("file_browser.copy_link"),callback:eh}),l||(ev||ew.push({displayText:(0,g.t)("sidebar.share"),callback:em}),(z===D||U===D)&&ew.push({displayText:(0,g.t)("sidebar.move_project"),callback:eg,disabled:!ea}),i&&ew.push({displayText:(0,g.t)("sidebar.rename"),callback:()=>{i&&i(e)},disabled:!ee}),m||ew.push({displayText:e.isSubscribed?(0,g.t)("sidebar.remove_from_favorites"):(0,g.t)("sidebar.add_to_favorites"),callback:ep}),ew.push({displayText:"",separator:!0}),es&&ew.push({displayText:(0,g.t)("project_menu.connect"),callback:()=>{Q(O.to({type:E.C,data:{folder:e,entryPoint:E.hr.PROJECT_SETTINGS}}))},disabled:!1}),ec&&!F&&(ew.push(eI((0,g.t)("project_menu.transfer"),!1)),ew.push(eI((0,g.t)("project_menu.send_a_copy"),!0))),F&&ec&&ew.push({displayText:"",separator:!0},{displayText:(0,g.t)("project_menu.pending_transfer_request"),disabled:!0},{displayText:(0,g.t)("project_menu.view_transfer_details"),callback:()=>eb()},{displayText:"",separator:!0}),q?ew.push({displayText:(0,g.t)("project_menu.move_to_trash"),callback:()=>{(0,o.sx)("Folder Trash Click",{folderId:e.id,teamId:e.teamId,orgId:z}),e.folderPerms?.canSkipDeletionConfirmation?R({folderId:e.id}).catch(()=>{Q(_.s.error((0,g.t)("file_browser.api_folder.error_when_moving_to_trash")))}):Q(O.to({type:(0,T.V)(),data:{folder:e}}))},disabled:!er}):ew.push({displayText:(0,g.t)("project_menu.delete"),callback:()=>{(0,o.sx)("Folder Delete Click",{folderId:e.id,teamId:e.teamId,orgId:z}),j.data?.canSkipDeletionConfirmation?f({folderId:e.id}).catch(()=>{Q(_.s.error((0,g.t)("file_browser.api_folder.error_when_deleting")))}):Q(O.to({type:(0,I.i)(),data:{folder:e}}))},disabled:!et}),et||e.teamId||ew.push({displayText:(0,g.t)("sidebar.leave_shared_project"),callback:()=>{Q((0,G.lP)({role:r.roles.byFolderId[e.id][r.user.id],level:Y.e6.NONE}))}}))),ew}}(r.id),eu=ee?.data?.targetRect;if(!eu)return null;let em=ed({folder:r,useLGPerms:n,onRenameClick:Q,onRevokeTransfer:()=>{er?j.S.deleteAssetTransferRequest({id:er.id}).then(()=>{en(void 0),et(f.F.enqueue({message:"Transfer revoked."}))},e=>{et(f.F.enqueue({message:"Something went wrong - check your connection and try again",error:!0}))}):et(f.F.enqueue({message:"No pending transfer found for this project.",error:!0}))},getPendingInfo:ei,pendingTransfer:(0,d.kc)().lg_query_asset_transfer_request?el:er});return a.createElement(R.fu,{trackingTargets:P.K.RCS,name:"Folder Context Menu"},a.createElement(q.j,{className:e,items:em,parentRect:eu,showPoint:!1,lean:"right",dispatch:et,onSelectItem:(e,r)=>{e.callback&&e.callback("",{},et,r),e.trackingProperties&&(0,D.Cu)({...ec.properties,trackingContext:ec.name,...e.trackingProperties})},shouldUsePortal:(0,d.kc)().projects_in_items_view,autofocusPrevOnDismount:!0}))}},167480:(e,r,n)=>{n.d(r,{Z:()=>o});var a=n(875847),i=n(668860);function o(e,r){let n=r.team_id&&e.teams[r.team_id],o=e.roles.byFolderId[r.id]||{},s=Object.keys(o).map(e=>o[e]).find(e=>e.level===i.e6.OWNER);return{folderName:(0,a.CI)(r),folderTeamName:n?n.name:null,folderOwnerName:s?s.user.handle:null,folderLastUpdated:new Date(r.touched_at),folderSharedAt:r.shared_at?new Date(r.shared_at):null}}},132186:(e,r,n)=>{n.d(r,{W:()=>R});var a=n(411855),i=n(188507),o=n(91408),s=n(881388),l=n(939863),c=n(874109),d=n(981911),u=n(970516),m=n(738269),p=n(662275),h=n(492379),_=n(377090),g=n(688083),f=n(99506),E=n(937294),y=n(147206),b=n(428467),I=n(451e3),T=n(668860),v=n(851363),S=n(845213),w=n(728587),A=n(997016),N=n(725470),C=n(590564),L=n(837746),O=n(472784);function R({className:e,team:r,onRenameClick:n,onChangeTeamIconClick:R,teamRoleRequests:P,canDeleteTeam:D}){let k=(0,i.d4)(e=>e.dropdownShown),M=(0,i.wA)(),F=(function(){let e=(0,i.d4)(e=>(0,b.getPermissionsState)(e)),r=(0,i.d4)(e=>e.selectedView),n=(0,i.d4)(e=>e.teamRoleRequests),w=(0,i.wA)();return({team:i,onRenameClick:R,onChangeTeamIconClick:P,teamRoleRequests:D,canDeleteTeam:k})=>{let M=()=>{w(m.oB()),w(p.to({type:C.p,data:{teamId:i.id}}))},F=(0,_.GR)(w,i.id),x=e=>{w(p.to({type:A.$,data:{team:e}}))},U=(0,_.GR)(w,i.id,T.e6.ADMIN),B=(0,_.GR)(w,i.id,T.e6.OWNER),V=e=>{if(!D)return;let r=D[e.id].id;w(h.lT({requestId:r}))},G=e=>{w(p.to({type:C.p,data:{teamId:e.id}}))},H=()=>{w(m.oB());let e=!!i.org_id,r=e=>{w(p.to({type:N.H,data:{team:i,subscriptionStatus:e}}))};e?r(!0):S.$.getSubscriptionStatus({teamId:i.id}).then(({data:e})=>{r(e.meta&&e.meta.subscription_will_renew)}).catch(e=>{e.data?.message&&w(s.s.error(e.data.message))})},W=e.roles.byTeamId[i.id]||{},K=Object.keys(W).filter(e=>!W[e].pending).length,Y=(0,b.canAdminTeam)(i.id,e),$=i?.org_access===f.bU.PUBLIC||K>1,j=k??(0,b.hasAdminRoleAccessOnTeam)(i.id,e),z=(0,y.R$)(e.user,e.currentUserOrgId),q=window.innerWidth<=(0,o.hG)(L.tgj),X=[{displayText:(0,l.t)("file_browser.copy_link"),callback:()=>{let e=(0,v.bL)(i.id,i.org_id);w(u.S({url:e}))}}];return"search"===r.view&&i.org_id!==e.currentUserOrgId||(i.canEditTeamContents&&q&&!z&&X.push({displayText:(0,l.t)("file_browser.team.new_project"),callback:()=>{w((0,g.SX)({where:I.Ah.FolderListView,team:{...i,canAdmin:Y}}))}}),q&&X.push({displayText:(0,l.t)("file_browser.team.invite"),callback:()=>{w(p.to({type:(0,c.T)(),data:{teamId:i.id,notifyOnSuccess:!0}}))}}),Y&&X.push({displayText:(0,l.t)("team_view.toolbar.rename"),callback:()=>{w(m.oB()),R&&R(i)}}),Y&&P&&X.push({displayText:(0,l.t)("team_view.toolbar.change_icon"),callback:()=>{w(m.oB()),P&&P(i)}}),X.push(...(()=>{let r=[];return((0,b.hasViewerRoleAccessOnTeam)(i.id,e)?$&&r.push({displayText:(0,l.t)("team_view.toolbar.leave_team"),callback:M}):i.org_id&&(0,E.YP)(i,n[i.id],e,i.org_id)!==E.gO.CLICK_JOIN&&r.push({displayText:"",render:()=>a.createElement(d.m,{key:"main-cta",className:O.M,onBypassRequestOverride:B,onJoin:F,onJoinRequestOverride:x,onJoinAsAdmin:U,onLeave:G,onWithdrawRequestForTeamOverride:V,team:i,useLinks:!0,isCardActive:!1})}),j&&r.push({displayText:(0,l.t)("team_view.toolbar.delete_team"),callback:H}),0===r.length)?[]:[{displayText:"",separator:!0},...r]})())),X}})()({team:r,onRenameClick:n,onChangeTeamIconClick:R,teamRoleRequests:P,canDeleteTeam:D});return a.createElement(w.j,{className:e,items:F,parentRect:k?.data?.targetRect,showPoint:!1,lean:"right",dispatch:M,onSelectItem:(e,r)=>{e.callback&&e.callback("",{},M,r)},autofocusPrevOnDismount:!0})}},114950:(e,r,n)=>{n.d(r,{c:()=>i}),n(411855),n(414507),n(299321),n(966712);var a=n(38580);n(776621),n(239349),n(29680),n(335682),n(37112),n(371399),n(798305);let i=(0,a.eU)(!1)},371399:(e,r,n)=>{n.d(r,{O:()=>a}),n(411855),n(966712);let a=(0,n(38580).eU)(!1)},611886:(e,r,n)=>{n.d(r,{gE:()=>v});var a=n(776250),i=n(511617),o=n(737947),s=n(966712),l=n(563706),c=n(27087),d=n(939863),u=n(667231),m=n(392592),p=n(749949),h=n(837324),_=n(291861),g=n(107877),f=n(935308),E=n(750668),y=n(132135);n(935757);var b=n(555328),I=n(809073);async function T(e,r,n,a,i,o){let l=[],c=null;if((0,s.kc)().ps_benchmark)try{c=await (0,f.nm)(!0)(n),l=(0,E.F)(a,r,c)}catch(r){let e=r?.data?.message||(0,d.t)("file_browser.error_try_again");n(m.F.enqueue({message:e,type:"error"}))}else l=(0,E.F)(a,r,{plansByUserId:{},teams:[],orgs:[]});let u=(a.authedActiveCommunityProfile?.associated_users??[]).filter(e=>e.user_id in a.authedUsers.byId).length>1;if(l.length>1||u){let n=(0,h.JJ)(r.viewer_mode);e({onSelectWorkspace:i,workspaces:l.map(e=>(0,_.y)(e,n,a,c,o)),mode:"new_file"})}else(0,s.kc)().ps_benchmark?i(l[0]):i()}let v=(e,r={isFreemiumPreview:!1,adminReviewerOverride:!1})=>n=>async(d,m)=>{let h=m();await T(e,n,d,h,function(e){let m={headers:{...c.Ay.defaults.headers}},_={};e&&(m.headers["X-Figma-User-ID"]=e.userId,_.org_id=e.orgId,(0,s.kc)().ps_benchmark&&(_.team_id=e.teamId)),!0===r.adminReviewerOverride&&(_.admin_reviewer_override=!0),c.Ay.post(`/api/hub_files/v2/${n.id}/copy`,_,m).then(({data:s})=>{let c=s.meta,m=(0,b.m3)(n),_=!0!==m?"none":!0===r.isFreemiumPreview?"trial":"paid";(0,a.sx)(g.M5.HUB_FILE_DUPLICATED,{hubFileId:n.id,figFileKey:c.key,isMonetized:m,paidStatus:_,searchSessionId:(0,p.w)(h)}),"whiteboard"===c.editor_type&&d((0,u.Hx)({storeInRecentsKey:I.$A.FigJam,id:n.id,type:I.vt.CommunityResource}));let f=(0,y.to)(c);f=(0,i.dR)(f,{"is-community-duplicate":"1",fuid:e?.userId||""}),!0===r.isFreemiumPreview&&(f=(0,i.dR)(f,{"is-freemium-preview":"1"})),o.Ay.redirect(f,l.rr?void 0:"_blank")})})}},484525:(e,r,n)=>{n.d(r,{_:()=>l});var a=n(411855),i=n(163023),o=n(42259),s=n(256127);function l({is24x24:e}){return a.createElement(i.B,{svg:s.A,className:o.K,svgClassName:e?o.B:void 0})}},175420:(e,r,n)=>{n.d(r,{C2:()=>d,Gx:()=>u});var a=n(411855),i=n(939863),o=n(295867),s=n(802536),l=n(882225),c=n(13326);function d({badges:e},r,n){return e.some(e=>e===l.s.FIGMA_PARTNER)?a.createElement(o.c,{showBorder:r,is24x24:n}):null}function u(e){let r=a.createElement("a",{href:"https://www.figma.com/partners/",target:"_blank",className:c.RL,onClick:e=>{e.stopPropagation()}},(0,i.tx)("community.detail_view.figma_partner_this_creator_is"),a.createElement("span",{className:c.kz},(0,i.tx)("community.learn_more")));return a.createElement(s.m_,{preview:r},e.children)}},408552:(e,r,n)=>{n.d(r,{$3:()=>b,QP:()=>y,V6:()=>h,op:()=>E});var a=n(411855),i=n(188507),o=n(939863);n(654923);var s=n(466636),l=n(697551),c=n(555328),d=n(483327),u=n(178787),m=n(365292);function p(e){let r=(0,s.bV)(e.resource.monetized_resource_metadata);return a.createElement(m.Ex,{background:"light",height:e.height},r)}function h({resource:e,showPrice:r=!1,height:n,isPaymentAnnualSubscription:i=!1,backgroundColor:l,border:c}){if(e&&(0,u.Uv)(e.monetized_resource_metadata)){let d=i?(0,s.bV)(e.monetized_resource_metadata,!0):(0,s.bV)(e.monetized_resource_metadata);return a.createElement(m.Ex,{height:n,background:l||"light",border:c},r?(0,o.tx)("community.buyer.subscribed_with_price",{priceString:d}):(0,o.tx)("community.buyer.subscribed"))}return a.createElement(m.Ex,{height:n,background:l||"light",border:c},(0,o.tx)("community.buyer.purchased"))}function _({...e}){return a.createElement(m.Ex,null,(0,o.tx)("community.detail_view.third_party_badge.figma_partner"))}function g(e){return a.createElement(m.Ex,{background:"light",height:e.height},(0,o.tx)("community.detail_view.third_party_badge.off_platform"))}function f(e){return a.createElement(m.Ex,{background:"light",height:e.height},(0,o.tx)("community.buyer.in_app_purchases"))}var E=(e=>(e.PURCHASED="purchased",e.OFF_PLATFORM="off_platform",e.FREEMUM="freemium",e.PRICE="price",e))(E||{});function y({resource:e,height:r,validBadges:n=Object.values(E)}){return b({resource:e,height:r,validBadges:n,authedActiveCommunityProfile:(0,i.d4)(e=>"authedActiveCommunityProfile"in e?e.authedActiveCommunityProfile:null)})}function b({resource:e,height:r,validBadges:n=Object.values(E),authedActiveCommunityProfile:i}){return e?!(i&&(0,l.cs)(i))&&(0,d.t)(e)&&e.community_resource_payment&&(0,s.QQ)(e.community_resource_payment)?n.includes("purchased")?a.createElement(h,{resource:e,height:r}):null:e.monetization_status&&e.monetization_status===u.UC.FIGMA_PARTNER?a.createElement(_,null):(0,c.PM)(e)?n.includes("freemium")?a.createElement(f,{height:r}):null:(0,c.m3)(e)?n.includes("price")?a.createElement(p,{resource:e,height:r}):null:(0,c.zF)(e)&&n.includes("off_platform")?a.createElement(g,{height:r}):null:null}},472353:(e,r,n)=>{n.d(r,{w5:()=>c,mG:()=>l});var a=n(411855);n(629019);var i=n(776250);n(493323),n(154254);var o=n(939863),s=n(837324);function l(e,r,n,a){(0,i.sx)("cmty_purchase_button_click",{context:r,resource_type:(0,s.Dl)(e),resource_id:e.id,user_id:n,profile_id:a})}function c({metadata:e,condensed:r}){return a.createElement("span",{className:r?"purchase_button_view--freeTrialCondensed--zoo-d text--fontPos9--naThA text--_fontBase--QdLsd":"purchase_button_view--freeTrial--KSIhj text--fontPos13--xW8hS text--_fontBase--QdLsd"},r?(0,o.tx)("community.resource.free_trial_days",{days:e.trial_length_in_days}):(0,o.tx)("community.resource.includes_free_trial_days",{days:e.trial_length_in_days}))}n(466636),n(672517),n(99506),n(555328),n(178787),n(376485),n(498606),n(143678)},203008:(e,r,n)=>{n.d(r,{$O:()=>l,Jv:()=>s,TI:()=>i,rc:()=>o});var a=n(411855);function i(){return a.createElement("svg",{viewBox:"0 0 8 12",height:"100%",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 7.75L7 10V1H1V10L4 7.75ZM0.45 11.6625C0.26459 11.8016 0 11.6693 0 11.4375V0.5625C0 0.25184 0.25184 0 0.5625 0H7.4375C7.74816 0 8 0.25184 8 0.5625V11.4375C8 11.6693 7.73541 11.8016 7.55 11.6625L4 9L0.45 11.6625Z",fill:"var(--color-icon, black)"}))}function o(){return a.createElement("svg",{viewBox:"0 0 8 12",height:"100%",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M0 0.5625C0 0.25184 0.25184 0 0.5625 0H7.4375C7.74816 0 8 0.25184 8 0.5625V11.4375C8 11.6693 7.73541 11.8016 7.55 11.6625L4 9L0.45 11.6625C0.26459 11.8016 0 11.6693 0 11.4375V0.5625Z",fill:"var(--color-icon, black)"}))}function s(){return a.createElement("svg",{height:"100%",viewBox:"0 0 10 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 9.98876L9 13.2775V1.02772H1V13.2775L5 9.98876ZM0.609261 14.9148C0.363725 15.1167 0 14.937 0 14.6139V0.770787C0 0.345093 0.335786 0 0.75 0H9.25C9.66421 0 10 0.345093 10 0.770787V14.6139C10 14.937 9.63628 15.1167 9.39074 14.9148L5 11.3049L0.609261 14.9148Z",fill:"var(--color-icon, black)"}))}function l(){return a.createElement("svg",{height:"100%",viewBox:"0 0 10 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M0 0.770787C0 0.345093 0.335786 0 0.75 0H9.25C9.66421 0 10 0.345093 10 0.770787V14.6139C10 14.937 9.63628 15.1167 9.39074 14.9148L5 11.3049L0.609261 14.9148C0.363725 15.1167 0 14.937 0 14.6139V0.770787Z",fill:"var(--color-icon, black)"}))}},447227:(e,r,n)=>{n.d(r,{r5:()=>d});var a=n(411855);n(188507);var i=n(460845);n(776250),n(27087);var o=n(154254);n(939863);var s=n(296045),l=n(988932);n(749949),n(837324),n(198181);var c=n(417659);function d({authors:e}){return a.createElement("div",null,e.map(e=>a.createElement(i.N_,{className:"author_dropdown_preview--authorPreviewListRow--XiWec text--fontPos12--YsUAh text--_fontBase--QdLsd",to:new c.xn({profileHandle:e.profile_handle}).to,key:e.id},a.createElement(s.e,{entity:e}),a.createElement("div",{className:"author_dropdown_preview--authorPreviewListName--sVzBY"},a.createElement("span",{className:o.cx.ellipsis.noWrap.overflowHidden.$},e.name),a.createElement(l.l,{profile:e})))))}n(672517),n(712121)},802536:(e,r,n)=>{n.d(r,{So:()=>c,m_:()=>d});var a=n(411855),i=n(629019),o=n.n(i);n(776621);let s=(()=>{let e=[];return["scroll","resize"].forEach(r=>{window.addEventListener(r,()=>{e=e.filter(e=>l(e.el,!1,e.initialHPosition,e.initialVPosition))})}),{set:(r,n,a)=>{e.push({el:r,initialHPosition:n,initialVPosition:a})}}})(),l=(e,r=!1,n,a)=>{if(!e||!("true"===e.parentNode.getAttribute("show-dropdown")||e.parentNode===document.activeElement||e.parentNode?.firstChild===document.activeElement||e===document.activeElement)&&!r)return!1;if(e.parentNode instanceof HTMLElement&&"true"===e.parentNode.dataset.disableRepositioning)return!0;e.dataset.vPosition=a||"below",e.dataset.hPosition="";let i=e.getBoundingClientRect();return i.bottom>window.innerHeight-20?e.dataset.vPosition="above":i.top<20&&(e.dataset.vPosition="below"),i.right>window.innerWidth-100?e.dataset.hPosition="right":i.left<20?e.dataset.hPosition="left":e.dataset.hPosition!==n&&(e.dataset.hPosition=n),!0};function c({children:e,preview:r,className:n,dropdownClassName:i,horizontalPosition:c,verticalPosition:d,disableRepositioning:u,borderRadius:m,allowHoverOnDropdownContents:p=!0}){let h=a.useRef(null),[_,g]=a.useState(!1),[f,E]=a.useState(0),y=e=>{window.innerWidth<500||(E(setTimeout(()=>{let r=h.current;r&&r.parentNode&&(r.parentNode.setAttribute("show-dropdown",e+""),!1===e?setTimeout(()=>{g(e)},150):(s.set(r,c,d),g(e)))},150)),clearTimeout(f))};return a.useLayoutEffect(()=>{_&&!u&&l(h.current,!0,c,d)},[_]),a.createElement("div",{className:n||"dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd","show-dropdown":"false",onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),tabIndex:0,"data-disable-repositioning":u,"data-hover-dropdown":!0},a.createElement("div",{onMouseLeave:p?void 0:()=>y(!1)},e),a.createElement("div",{className:o()("dropdown--dropdownContents--BqcL5",i),style:m?{borderRadius:`${m}px`}:{},"data-v-position":d||"below","data-h-position":c||"",ref:h,"data-dropdown-contents":!0},_&&r))}function d({preview:e,children:r}){return a.createElement(c,{className:o()({"dropdown--tooltip--Sh4Vu dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd":!0}),preview:e,horizontalPosition:"center"},r)}},674694:(e,r,n)=>{n.d(r,{O7:()=>l,Xy:()=>c});var a=n(411855),i=n(999021),o=n(319905),s=n(487386),l=(e=>(e.DETAIL="detail",e.UNIVERSAL_INSERT="universal_insert",e))(l||{});function c(e){let r={onLoad:e.onLoad,loading:"lazy",draggable:e.draggable};return a.createElement(i.c,{sizes:function(e){switch(e){case"universal_insert":return;case"detail":r=s.a.COMMUNITY_HUB_FILE_THUMBNAIL_DETAIL;break;default:r=s.a.COMMUNITY_HUB_FILE_THUMBNAIL_DEFAULT}var r,n=Object.entries(r).map(([e,r],n)=>`(min-width: ${e}px) ${r}vw`);return n.push("100vw"),n.join(", ")}(e.thumbnailContext),srcSet:function(e,r,n,a){let i;if(!e||!r)return"";let o=Object.entries(n||{});if(!n){let n=function(e){if(!e)return;let r=e.lastIndexOf("/"),n=e.indexOf(".",r);return e.substring(r+1,n)}(r);o=Object.keys(s.B.COMMUNITY_HUB_FILE_THUMBNAIL).map(r=>[r,`/community/file/${e}/thumbnail/${r}?signature=${n}`])}return(o.push(["1600",r]),"universal_insert"===a?o.map(([e,r])=>{let n=Math.round(parseInt(e)/80*10)/10;return`${r} ${n}x`}):o.map(([e,r])=>`${r} ${e}w`)).join(", ")}(e.hubFileId,e.image,e.resizedThumbnailUrls,e.thumbnailContext),src:e.image,image_type:o.y.COMMUNITY_HUB_FILE_THUMBNAIL,alt:e.alt,className:e.className,imageProps:r})}},240411:(e,r,n)=>{n.d(r,{my:()=>w});var a=n(411855),i=n(460845),o=n(629019),s=n.n(o),l=n(96328),c=n(163023),d=n(939863),u=n(874647),m=n(108636),p=n(749949),h=n(886133),_=n(837324),g=n(545941),f=n(158996),E=n(417659),y=n(447227),b=n(802536),I=n(846649),T=n(815234);function v({likeCount:e,currentUserLiked:r,inPluginRow:n}){return a.createElement("div",{className:s()(r?I.aS:I.dv,n?I.Yr:I.Vh)},a.createElement(u.O,null),(0,l.$M)(e))}function S({usageCount:e,inPluginRow:r}){return a.createElement("div",{className:s()(I.Au,r?I.Yr:I.Vh)},a.createElement(c.B,{svg:T.A}),(0,l.$M)(e))}function w(e){let r,n,o;let{resource:s}=e;(0,f.ws)(s)?(r=s.name,n=s.resource_type,o=`/community/resources/${s.id}`):(r=(0,_.qD)(s).name,n=(0,_.ss)(s),o=(0,_._t)({resource:s}));let l=m.W(s.id,f.Vm(s),!f.ws(s)).data?.[0],c=m.B(s.id,f.ws(s)).data?.[0],u=(0,p.J)(),T=s.community_publishers.accepted,w=T[0],A=a.createElement("span",{className:I.cy},(0,h.Lj)(s));if(!w)return null;let N=T.length>1?a.createElement(b.So,{className:I.LF,preview:a.createElement(y.r5,{authors:T})},A):A;return a.createElement("div",{className:I.UN},a.createElement("div",{className:I.rn},a.createElement(i.N_,{to:o,onClick:e=>{(0,g.cB)(n,s.id,void 0,u)},className:I.DD},r),a.createElement(i.N_,{className:I.cy,to:new E.xn({profileHandle:w.profile_handle}).to},(0,d.tx)("community.resource_tiles.by_author",{author:N}))),a.createElement("div",{className:I.o1},a.createElement(v,{currentUserLiked:(0,f.ws)(s)?c:l,likeCount:s.like_count}),a.createElement(S,{usageCount:(0,g.mk)(s)})))}},546856:(e,r,n)=>{n.d(r,{Cv:()=>S,Mr:()=>v});var a=n(411855),i=n(629019),o=n.n(i);n(96328);var s=n(428322),l=n(348425);n(154254),n(939863);var c=n(535e3),d=n(408552);n(988932);var u=n(674694),m=n(206144),p=n(749949),h=n(837324),_=n(612776),g=n(545941);n(417659),n(672517);var f=n(99506),E=n(555328);n(978527);var y=n(37637);n(447227);var b=n(240411),I=n(313507),T=n(851750);function v({resource:e}){let r=(0,d.QP)({resource:e,height:"24"});if(r)return a.createElement("div",{className:I.BQ},r);let n=(0,c.n)({badges:e.badges});return n?a.createElement("div",{className:I.BQ},a.createElement(c.v,null,n)):null}function S({resource:e,isMetaHidden:r,onIntersectionChange:n,onClickOverride:i,index:c,subView:d}){let S=(0,p.J)(),w=(0,_.X5)(),A=(0,h.qD)(e),N=e.client_meta&&JSON.parse(e.client_meta)?.background_color,C=e.thumbnail_is_set;e.viewer_mode===f.y4.WHITEBOARD&&(N={r:1,g:1,b:1});let L=a.createElement(u.Xy,{image:e.thumbnail_url,hubFileId:e.id,onLoad:e=>e.target.style.opacity="1",alt:A.name,resizedThumbnailUrls:e.resized_thumbnail_urls}),O=C?I.zA:e.viewer_mode===f.y4.WHITEBOARD?I.ZW:I.XO;return a.createElement("div",{className:I.Sl,"data-testid":"hub-file-tile"},a.createElement(s.a,{onIntersectionChange:e=>n?.(e)}),a.createElement(m.A6,{to:(0,h._t)({resource:e}),onClick:r=>{(0,g.cB)("hub_file",e.id,c,S,d)},onClickOverride:i,className:w?I.nJ:I.BN},a.createElement("div",{className:o()(O,{[I.$c]:w}),style:{backgroundColor:N&&`rgb(${255*N.r}, ${255*N.g}, ${255*N.b})`}},L,e.viewer_mode===f.y4.PROTOTYPE&&a.createElement(l.t,{svg:T.A,className:I.wr,useOriginalSrcFills_DEPRECATED:!0,fallbackSvg:T.A}),a.createElement("div",{className:I.JM},a.createElement(y.dn,{editorType:(0,h.JJ)(e.viewer_mode)})),!r&&a.createElement(v,{resource:e}))),!r&&a.createElement(b.my,{resource:e,type:E.vt.HUB_FILE}))}},442898:(e,r,n)=>{n(411855),n(843540),n(776250),n(737947);var a=n(38580);n(195847),n(50458),n(879319);var i=(e=>(e[e.CLOSED=0]="CLOSED",e[e.PRELOAD=1]="PRELOAD",e[e.OPEN=2]="OPEN",e))(i||{});(0,a.eU)({state:0,url:"/login_iframe?with_community_header=true&type=fixedmodal",mounted:!1}),(0,a.eU)(!1)},843540:(e,r,n)=>{n(411855);var a=n(38580);n(195847),n(163023),n(672517),n(307780),n(442898),n(50458),n(879319),(0,a.eU)(null)},869963:(e,r,n)=>{n(411855),n(629019),n(563706),n(163023),n(154254),n(939863),n(466636),n(498606),n(802536)},206144:(e,r,n)=>{let a;n.d(r,{A6:()=>p});var i=n(411855),o=n(737947),s=n(913270),l=n(123130),c=n(198181);n(798099);let d=e=>({type:"SELECT_VIEW",payload:e}),u=/^\/community\/(file|widget|plugin)\/(\d+)/,m=/^\/@(.+)/;function p({to:e,onClickTracking:r,onClick:n,onClickOverride:p,className:h,children:_,style:g,onRef:f,target:E}){return i.createElement("a",{href:e,onClick:i=>{if(r?.(i),!i.ctrlKey&&!i.metaKey){if(n&&n(i),p){i.preventDefault(),p(i);return}if(function(e){let r=(0,s.gV)(window.location.pathname),n=(0,s.gV)(e);return r.reactRouterHandled&&n.reactRouterHandled}(e)){i.preventDefault(),o.Ay.push(e);return}(0,c.M)()&&function(e,r){let n=!1,{pathname:i}=window.location;if(!(/^\/community/.test(i)&&(0,c.M)())||u.test(e)||m.test(e)){if(u.test(e)){n=!0;let[r,i,o]=e.match(u);a(d((0,l.p)(i,o)))}else if(m.test(e))n=!0,a(d({view:"communityHub",subView:"handle",handle:e.match(m)[1]}));else{n=!0;let[r,i]=e.split("?");i=i?`?${i}`:"",a(d({data:(0,s.wl)(r,i),subView:"searchAndBrowse",view:"communityHub"}))}n&&r&&(r.preventDefault(),r.stopPropagation())}}(e,i);return}},style:g,className:h,ref:e=>{f?.(e)},target:E},_)}},335666:(e,r,n)=>{n.d(r,{X:()=>i});var a=n(411855);function i(e){let[r,n]=a.useState(!0);return a.useEffect(()=>{let r=new Image;r.onload=()=>{let e=r.width/r.height;n(!(Math.abs(e-2)<Math.abs(e-16/9)))},r.src=e||""},[e]),r}n(837324),n(629521)},654923:(e,r,n)=>{n.d(r,{I:()=>l});var a=n(915440),i=n(466636),o=n(279453),s=n(555328);function l(e){let r=e&&(0,s.m3)(e)?e.monetized_resource_metadata.id:"-1",n=(0,a.Rs)(o.oro,{monetizedResourceMetadataId:r},{enabled:!0});if("loaded"!==n.status||n.errors?.length)return e?.community_resource_payment;{let{communityResourcePayment:e}=n.data;if(!e)return;return(0,i.xs)(e)}}},837324:(e,r,n)=>{n.d(r,{Cg:()=>V,Co:()=>v,DV:()=>M,Dl:()=>O,HD:()=>S,JJ:()=>N,KH:()=>K,ME:()=>H,N6:()=>G,QU:()=>W,UI:()=>k,Uu:()=>U,_t:()=>D,cX:()=>L,lW:()=>F,nF:()=>Y,qD:()=>A,r7:()=>C,ss:()=>R,uv:()=>j,vC:()=>x,zS:()=>B});var a=n(841563),i=n.n(a),o=n(737947);n(22332),n(966712);var s=n(96328),l=n(709495),c=n(357611),d=n(971120);n(675665),n(835476);var u=n(592597),m=n(97128);n(107877);var p=n(259927),h=n(99506),_=n(540019),g=n(555328),f=n(137459);n(813408);var E=n(622139),y=n(376485);n(629521);var b=n(583894);n(566083);var I=n(158996),T=n(930269);let v=new RegExp(/^[\w.]{0,30}$/),S=new RegExp(/^\w{0,15}$/);function w(e){return"current_hub_file_version_id"in e?e.versions[e.current_hub_file_version_id]:"current_plugin_version_id"in e&&e.current_plugin_version_id?e.versions[e.current_plugin_version_id]:void 0}function A(e){return w(e)}function N(e){switch(e){case h.y4.SLIDE_TEMPLATE:return f.LE.SLIDES;case h.y4.WHITEBOARD:return f.LE.FIGJAM;case h.y4.CANVAS:case h.y4.PROTOTYPE:default:return f.LE.FIGMA}}function C(e){return"viewer_mode"in e&&e.viewer_mode===h.y4.LIBRARY}function L(e){return null!==e&&"viewer_mode"in e&&e.viewer_mode===h.y4.SLIDE_TEMPLATE}function O(e){return function(e){switch(e){case g.vt.HUB_FILE:return m.Uo.FILE;case g.vt.PLUGIN:return m.Uo.PLUGIN;case g.vt.WIDGET:return m.Uo.WIDGET}}((0,I.Vm)(e))}function R(e,{plural:r=!1}={}){let n=(0,I.Vm)(e);return r?n===g.vt.HUB_FILE?m.UF.FILE:n===g.vt.WIDGET?m.UF.WIDGET:m.UF.PLUGIN:n===g.vt.HUB_FILE?m.Uo.FILE:n===g.vt.WIDGET?m.Uo.WIDGET:m.Uo.PLUGIN}var P=(e=>(e.HUB_FILES="hub_files",e.PLUGINS="plugins",e.WIDGETS="widgets",e))(P||{});function D({resource:e}){return k({path:O(e),id:e.id,name:w(e)?.name??""})}function k({path:e,id:r,name:n}){let a=(0,s.fs)(n||"");return`/community/${e}/${r}${""===a?"":"/"}${a}`}function M(e){return`${location.origin}${D({resource:e})}`}function F(e){var r=document.createElement("input");r.style.position="fixed",r.style.top="-1000px",r.value=e,r.classList.add(p.Dm),document.body.appendChild(r),r.select(),document.execCommand("copy"),r.parentNode.removeChild(r)}function x(e,r){if(r)return r+" | Figma";if("/community"===o.Ay.location.pathname||!e)return"Add a little magic to your files";if("/community/plugins"===o.Ay.location.pathname)return"Powerful Plugins Made Just For Figma";if("/community/widgets"===o.Ay.location.pathname)return"Customize your space with Widgets";let n=[];return e.sort_by===l.e.Browse.PUBLISHED_AT?n.push("Newest"):e.sort_by===l.e.Browse.ALL_TIME?n.push("Top"):e.sort_by===l.e.Browse.POPULAR&&n.push("Trending"),e.editor_type===y.FW.FIGJAM?n.push("FigJam"):e.editor_type===y.FW.FIGMA&&n.push("Figma"),e.resourceType===d.L.BrowseResourceTypes.FILES?n.push("Files"):e.resourceType===d.L.BrowseResourceTypes.WIDGETS?n.push("Widgets"):e.resourceType===d.L.BrowseResourceTypes.PLUGINS?n.push("Plugins"):n.push("Resources"),e.tags?.length>0&&n.push(`tagged as ${e.tags.join(", ")}`),e.query&&n.push(`matching "${e.query}"`),n.join(" ")+" | Figma"}function U(e){return e?.stripe_account_status&&e.stripe_account_status!==b.P5.NONE&&e.stripe_account_status!==b.P5.ACCEPTED}function B(e){return e?"100%":Math.min(window.innerWidth,parseInt(T.communityViewerMaxWidth))}function V(e){return i()(e,(0,E.EB)())}function G(e){let r={},n=(0,I.XW)(e)?e.carousel_media.images:e.carousel_media_urls,a=(0,I.XW)(e)?e.carousel_media.videos:"carousel_videos"in e&&e?.carousel_videos;return n&&Object.entries(n).forEach(([e,n])=>{r[e]={...n,type:"image"}}),a&&Object.entries(a).forEach(([e,n])=>{r[e]={...n,type:"video"}}),Object.entries(r).sort(([e],[r])=>parseInt(e)-parseInt(r)).map(([e,r])=>r)}function H(e,r){if(e===h._Y.DESIGN){if(r===h.y4.PROTOTYPE)return c.k.Editors.PROTOTYPE}else if(e===h._Y.WHITEBOARD||e===y.FW.FIGJAM)return c.k.Editors.FIGJAM;else if(e===h._Y.SLIDES)return c.k.Editors.SLIDES;else if(e===y.FW.DEV)return c.k.Editors.DEV_MODE;return c.k.Editors.FIGMA}function W(...e){return _.M4.fetch((0,u.iB)(H(...e)))}function K(e,{pluralized:r,capitalized:n}={}){return function(e,{pluralized:r,capitalized:n}={}){return $((()=>{switch(e){case g.vt.PLUGIN:return"plugin";case g.vt.WIDGET:return"widget";case"comment":return"comment";case g.vt.HUB_FILE:return"hub file";default:throw Error("Unsupported Type")}})(),{pluralized:r,capitalized:n})}((0,I.Vm)(e),{pluralized:r,capitalized:n})}function Y(e,{pluralized:r,capitalized:n}={}){return e?$(g.bD.WIDGET,{pluralized:r,capitalized:n}):$(g.bD.PLUGIN,{pluralized:r,capitalized:n})}function $(e,{pluralized:r,capitalized:n}={}){return e+=r?"s":"",n&&void 0!==e[0]&&(e=e[0].toUpperCase()+e.substr(1)),e}function j(e){let r=new Date("2025-01-01T00:00:00Z"),n=w(e)?.created_at;return!!n&&new Date(n)<r}},612776:(e,r,n)=>{n.d(r,{GM:()=>h,Oh:()=>u,X5:()=>c,aA:()=>_,uY:()=>m,zI:()=>d});var a=n(411855),i=n(966712),o=n(374626),s=n(647899),l=n(106757);function c(){let{getConfig:e}=(0,s.I7)("cmty_resource_tile_and_row_redesign");return e().get("enabled",!1)}function d({isUI3:e}){return e&&!!(0,i.kc)().cmty_publish_modal_ui3_redesign}function u(){return(0,i.kc)().community_category_filter__by}function m(){let{getConfig:e}=(0,s.I7)("cmty_slides_publishing"),r=!!(0,i.kc)().piper_community_templates_publish;return(0,a.useCallback)(()=>e().get("enabled",!1)||r,[r,e])}var p=(e=>(e.ASSET_PANEL_ONLY="asset_panel_only",e.ASSET_PANEL_AND_TOOLBAR="asset_panel_and_toolbar",e))(p||{});function h(){let{getConfig:e}=(0,s.I7)("exp_cmty_visual_assets"),r=(0,o.md)(l.UQ),n=(0,i.kc)().cmty_visual_assets;return(0,a.useCallback)(()=>n&&r?e().get("entrypoint",null):null,[e,r,n])}function _(){return!!(0,i.kc)().cmty_file_publishing_rearch}},913270:(e,r,n)=>{n.d(r,{Gu:()=>v,MU:()=>p,gV:()=>S,sT:()=>_,wl:()=>m}),n(411855);var a=n(157663);n(737947);var i=n(566083),o=n(709495),s=n(910764),l=n(580857),c=n(357611),d=n(971120),u=n(944452);function m(e,r){return _(e,r)||(0,u.J5)(e,r)||function(e,r){let n=decodeURIComponent(e||location.pathname);if(!g.test(n)||f.test(n)||E.test(n))return;let a=("/"===n[0]?n.slice(1):n).split("/"),u={resourceType:d.L.BrowseResourceTypes.MIXED,tags:[],editor_type:c.k.Editors.ALL,sort_by:(0,o.H)(),price:i.C.ALL,category:null,following:!1,pagination:null,creators:l.Z.ALL};for(let e=0;e<b.length&&0!==a.length;e++){let r=b[e](a,u);r&&r[0]&&(a=r[1],u={...u,...r[0]})}u.editor_type=(0,s.G)(u.editor_type,u.resourceType),u.resourceType=(0,s.l)(u.editor_type,u.resourceType);let m=new URLSearchParams(location.search),p=!!m.get("following"),h=(()=>{let e=m.get("creators");return e&&e===l.Z.FOLLOWING?e:u.creators})();return{...u,following:p,creators:h}}(e)}function p(e){return"query"in e?function(e){let r=new URLSearchParams({resource_type:e.resourceType,sort_by:e.sort_by,query:e.query,editor_type:(0,s.G)(e.editor_type,e.resourceType),price:e.price,creators:e.creators&&l.Z.isSearchType(e.creators)?e.creators:l.Z.ALL}).toString();return`/community/search?${r}`}(e):"category"in e&&null!==e.category?(0,u.iB)(e):function(e){let r="/community";e.tags?.length&&(r+=`/tag/${e.tags.join(",")}`),e.resourceType=(0,s.l)(e.editor_type,e.resourceType),e.resourceType!==d.L.BrowseResourceTypes.MIXED&&(r+=`/${e.resourceType}`),"all"!==(0,s.G)(e.editor_type,e.resourceType)&&(r+=`/${e.editor_type}`),e.price&&i.C.FOR_URL_SLUG.indexOf(e.price)>-1&&(r+=`/${e.price}`),e.creators===l.Z.FIGMA_PARTNER&&(r+=`/${e.creators}`),e.sort_by&&e.sort_by!==(0,o.H)()&&(e.sort_by===o.e.Browse.PUBLISHED_AT?r+="/new":e.sort_by===o.e.Browse.POPULAR&&(r+="/trending")),I[r]&&(r=I[r]);let n={};!0===e.following&&(n.following=e.following),e.creators===l.Z.FOLLOWING&&(n.creators=e.creators);let a=Object.keys(n).length>0?new URLSearchParams(n).toString():void 0;return a&&(r+=`?${a}`),r}(e)}let h=/^\/community\/search$/;function _(e,r){if(!(e||=location.pathname).match(h))return null;let n=new URLSearchParams(r||=location.search),a=n.get("query");if(!a)return null;let c=n.get("resource_type");if(!c)return null;let d=n.get("sort_by")||o.e.Search.RELEVANCY,u=(0,s.G)(n.get("editor_type"),c);return{resourceType:c,sort_by:d,editor_type:u,query:a,price:n.get("price")||i.C.ALL,creators:(()=>{let e=n.get("creators");return l.Z.isSearchType(e)?e:l.Z.ALL})()}}let g=/^\/community/,f=/^\/community\/collections?\/?/,E=/^\/community\/(file|plugin|widget)\//;var y=(e=>(e.NEW="new",e.POPULAR="popular",e.TRENDING="trending",e.TAG="tag",e.COMMUNITY="community",e))(y||{});let b=[function(e){return"community"===e[0]&&[{},e.slice(1)]},function(e){return"tag"===e[0]&&!!e[1]&&[{tags:e[1].split(",")},e.slice(2)]},function(e){let r=e[0];return Object.values(d.L.BrowseResourceTypes).indexOf(r)>-1&&[{resourceType:r},e.slice(1)]},function(e,r){let n=e[0];return Object.values(c.k.Editors).indexOf(n)>-1&&[{editor_type:(0,s.G)(n,r.resourceType)},e.slice(1)]},function(e){let r=e[0];return i.C.FOR_URL_SLUG.indexOf(r)>-1&&[{price:r},e.slice(1)]},function(e){let r=e[0];return r===l.Z.FIGMA_PARTNER&&[{creators:r},e.slice(1)]},function(e){let r=null;return"new"===e[0]&&(r=o.e.Browse.PUBLISHED_AT),"popular"===e[0]&&(r=o.e.Browse.ALL_TIME),"trending"===e[0]&&(r=o.e.Browse.POPULAR),!!r&&[{sort_by:r},e.slice(1)]}],I={"/community/mixed":"/community"};var T=(e=>(e.SEARCH="/community/search",e))(T||{});function v(){return{resourceType:d.L.BrowseResourceTypes.MIXED,sort_by:(0,o.H)(),editor_type:c.k.Editors.ALL,price:i.C.ALL,tags:[],pagination:null,category:null,creators:l.Z.ALL}}function S(e){return/\/community\/(file|plugin|widget)\/\d+/.test(e)?{reactRouterHandled:!0,subView:"resourcePage"}:/^\/@/.test(e)?{reactRouterHandled:!0,subView:"handle"}:/\/community*/.test(e)?{reactRouterHandled:!0,subView:"searchAndBrowse"}:(a.k.warn(`If this is firing, it means you're trying to use logged-out Community routing on a non-Community URL.
url: ${e}`),{reactRouterHandled:!1,subView:!1})}d.L.BrowseResourceTypes.MIXED,o.e.Search.RELEVANCY,c.k.Editors.ALL,i.C.ALL,l.Z.ALL},815063:(e,r,n)=>{n.d(r,{S:()=>a});function a(e,r,n){return Object.values(r).includes(e)?e:n}},466636:(e,r,n)=>{n.d(r,{F8:()=>_,Lt:()=>L,Mj:()=>f,QQ:()=>w,UO:()=>N,V4:()=>C,WD:()=>g,X2:()=>T,XR:()=>I,Yp:()=>E,ae:()=>h,bV:()=>b,mZ:()=>u,up:()=>v,vf:()=>p,vi:()=>S,wF:()=>m,xs:()=>O,zt:()=>y});var a=n(527735),i=n(939863),o=n(61057),s=n(820113),l=n(555328),c=n(401730),d=n(178787);let u=2,m=1e3;function p(e){if(e?.price){let{price:r}=e;return .01*r}}function h(e){return e?100*e:0}function _(e){return e%1!=0}function g(e,r){return r>e}function f(e,r){return r/e>1.5}function E(e){return e<u||e>=m}function y(e,r){if(!e||!r)return"";let n=1200*e*(1-r/100);return(0,i.t)("community.buyer.price_per_year",{priceString:v(n,n%100!=0)})}function b(e,r=!1){let{price:n,is_subscription:a}=e;if(!a)return v(n,!1);if(r){let r=e.annual_price||0;return(0,i.t)("community.buyer.price_per_year",{priceString:v(r,r%100!=0)})}return(0,i.t)("community.buyer.price_per_month",{priceString:v(n,n%100!=0)})}function I(e){let r=b(e),n=(0,d.Uv)(e)?(0,i.t)("community.buyer.subscribe"):(0,i.t)("community.buyer.buy");return`${n} ${r}`}function T(e){let{price:r,is_subscription:n}=e,a=v(r,r%100!=0);return n?(0,i.t)("community.buyer.price_per_month_subscription",{priceString:a}):(0,i.t)("community.buyer.price_one_time_payment",{priceString:a})}function v(e,r=!1){return new s.vr("usd").formatMoney(e,{showCents:r})}function S(e){switch(e){case d.bG.DOESNT_MEET_NEEDS:return(0,i.t)("community.buyer.refund_reason.doesnt_meet_needs");case d.bG.TECHNICAL_ISSUES:return(0,i.t)("community.buyer.refund_reason.technical_issues");case d.bG.TOO_EXPENSIVE:return(0,i.t)("community.buyer.refund_reason.too_expensive");case d.bG.FOUND_ALTERNATIVE:return(0,i.t)("community.buyer.refund_reason.found_alternative");case d.bG.OTHER:return(0,i.t)("community.buyer.refund_reason.other")}}function w(e){return!!e&&(e.subscription_expires_at&&!isNaN(Date.parse(e.subscription_expires_at))?new Date(e.subscription_expires_at).getTime()+864e5>new Date().getTime()&&!A(e,c.G3.DISPUTED):A(e,c.G3.SUCCEEDED))}function A(e,r){return!!e.status&&e.status===r}function N(e){return e.status===c.G3.SUBSCRIPTION_PAYMENT_FAILED||e.status===c.G3.INVOICE_FINALIZATION_FAILED}function C(e,r){if((0,l.I0)(r)||(0,l.xQ)(r)){let n=(r.plugin_publishers?.accepted||[]).map(e=>e.id),i=(r.plugin_publishers?.pending||[]).map(e=>e.id),o=new Set(n.concat(i)),{pass:s,fail:l}=(0,a.j)(e,e=>o.has(e.id)||e.id===r.creator.id);return{usersCanPurchase:l,publishers:s}}{let n=new Set((0,o.D)(r)),{pass:i,fail:s}=(0,a.j)(e,e=>n.has(e.id));return{usersCanPurchase:s,publishers:i}}}function L({resource:e,payment:r}){let n=e.monetized_resource_metadata;return!!(n&&(0,d.Uv)(n))&&!!n.trial_length_in_days&&(!r||!r.subscription_expires_at)}function O(e){return{status:c.QK[e.status],purchased_at:e.purchasedAt?new Date(e.purchasedAt).toISOString():null,subscription_expires_at:e.subscriptionExpiresAt?new Date(e.subscriptionExpiresAt).toISOString():null,subscription_canceled_at:e.subscriptionCanceledAt?new Date(e.subscriptionCanceledAt).toISOString():null,refund_reason:e.refundReason,monetized_resource_metadata_id:e.monetizedResourceMetadataId,subscription_interval:e.subscriptionInterval}}},22863:(e,r,n)=>{n.d(r,{c:()=>i});var a=n(813408);function i(e){return!!(e&&(e.entity_type===a.o1.ORG||e.entity_type===a.o1.TEAM))}},545941:(e,r,n)=>{n.d(r,{AC:()=>y,G8:()=>f,K2:()=>h,Pg:()=>I,Ul:()=>b,X_:()=>_,cB:()=>T,mk:()=>E});var a=n(67151),i=n(891721),o=n.n(i),s=n(776250),l=n(939863),c=n(835476),d=n(99506);n(555328);var u=n(967409),m=n(837324),p=n(158996);function h(e){return(0,p.XW)(e)?e.name:m.qD(e)?.name}function _(e){switch(e){case c.vt.WIDGET:case c.vt.PLUGIN:return(0,l.tx)("community.using.open_in");case c.vt.FIGJAM_TEMPLATE:return(0,l.tx)("community.duplicate.open_in_figjam");case c.vt.SLIDE_TEMPLATE:return(0,l.tx)("community.use_slide_template");case c.vt.UI_KIT:case c.vt.DESIGN_TEMPLATE:case c.vt.PROTOTYPE:return(0,l.tx)("community.duplicate.open_in_figma");default:(0,a.xb)(e)}}function g(e){let r=document.createElement("div");return r.innerHTML=o().sanitize(e),r.innerText}function f(e,r,n){if(e.tagline)return e.tagline;if(!e.description)return"";let a=(r=r||g)(e.description);return n?function(e){let r=e?.match(/[^.!?\r\n]+[.!?\r\n]+/);return r?r[0].trim():e??""}(a):a}function E(e){return"usage_count"in e?e.usage_count??0:"unique_run_count"in e?e.unique_run_count:"duplicate_count"in e?e.duplicate_count:0}function y(e){return!!e.publishing_status&&[d.KB.PENDING_PUBLIC,d.KB.PENDING_USER_VISUAL_COMPLIANCE,d.KB.ORG_PRIVATE_PENDING_PUBLIC].includes(e.publishing_status)}function b(e){return e.publishing_status===d.KB.APPROVED_PUBLIC}function I(e){return!!e.publishing_status&&[d.KB.DELISTED,d.KB.DELISTED_CREATOR_STRIPE_DISABLED].includes(e.publishing_status)}function T(...e){let{trackingEventName:r,trackingProperties:n}=function(e,r,n,a,i="feed"){return{trackingEventName:"Community Resource Clicked",trackingProperties:{resource_type:e,community_resource_id:r,subView:i,scope:u.Rx.COMMUNITY,index:n,searchSessionId:a}}}(...e);(0,s.sx)(r,n)}},158996:(e,r,n)=>{n.d(r,{Vm:()=>o,XW:()=>l,ws:()=>s});var a=n(67151);n(414507),n(776621),n(835476),n(830445),n(99506);var i=n(555328);function o(e){return s(e)?e.resource_type:(0,i.U)(e)?i.vt.HUB_FILE:(0,i.xQ)(e)?i.vt.WIDGET:(0,i.I0)(e)?i.vt.PLUGIN:void(0,a.xb)(e)}function s(e){return"resource_type"in e}function l(e){return"content"in e}n(137459)},62589:(e,r,n)=>{n.d(r,{nS:()=>o,pO:()=>s}),n(411855);var a=n(753178),i=n(179940);n(776621);class o{get params(){return this._params}get search(){return this._search}get state(){return this._state}constructor(...e){let[r,n,a]=e;this._params=r??{},this._search=n??{},this._state=a??{}}copyWith(e,r,n){return new this.constructor({...this._params,...e},{...this._search,...r},{...this._state,...n})}get pathname(){let e=this.constructor;return(0,a.tW)(e.path,"serializeParams"in e?e.serializeParams(this._params):this._params)}get queryString(){let e=Object.fromEntries(Object.entries(this._search).filter(([,e])=>void 0!==e));if(0===Object.keys(e).length)return"";let r=this.constructor,n="encodeQueryString"in r?r.encodeQueryString??i.lF:i.lF;return`?${n(e)}`}get href(){return`${this.pathname}${this.queryString}`}get to(){return{pathname:this.pathname,search:this.queryString,state:this._state}}}function s(e){return function(r,n={}){let i=(0,a.B6)(r,{...n,path:e.path});return i?{...i,params:"deserializeParams"in e?e.deserializeParams(i.params):i.params}:null}}},709595:(e,r,n)=>{n.d(r,{c9:()=>o,oW:()=>l,tx:()=>s});var a=n(262896);let i="8065774696727";function o(e,r){(0,a.ny)({name:e.name,email:e.email},{ticketForms:["community"],fields:r,suppressAnswerBot:!0})}function s(e){return o(e,[{id:i,value:"community_product_question"}])}function l(e){return o(e,[{id:i,value:"community_refund"}])}},675665:(e,r,n)=>{n.d(r,{S:()=>o});var a=n(330654),i=n(555328),o=(e=>(e.file="hub_files",e.plugin="plugins",e.widget="widgets",e))(o||{});a.object({comments:a.array(i.KS).nullable(),total_count:a.number().optional()});var s=(e=>(e.DescriptionView="descriptionViewSection",e.CommentsView="commentsViewSection",e))(s||{})},742580:(e,r,n)=>{function a(e){return!!e&&void 0!==e.query}n.d(r,{LJ:()=>i,OE:()=>a});var i=(e=>(e.accessibility="accessibility",e.brainstorming="brainstorming",e.classroomActivities="classroom-activities",e.dataTemplates="data-templates",e.designInspirations="design-inspirations",e.designTemplates="design-templates",e.designTools="design-tools",e.desktopAppsWebsites="desktop-apps-websites",e.development="development",e.deviceMockups="device-mockups",e.diagramming="diagramming",e.editingEffects="editing-effects",e.education="education",e.fileOrganization="file-organization",e.fontsTypography="fonts-typography",e.funGames="fun-games",e.icons="icons",e.illustrations="illustrations",e.importExport="import-export",e.instagramTemplates="instagram-templates",e.laptopMockups="laptop-mockups",e.libraries="libraries",e.mobileApps="mobile-apps",e.portfolios="portfolio-templates",e.calendarTemplates="calendar-templates",e.presentations="presentations",e.prototypingAnimation="prototyping-animation",e.resumes="resume-templates",e.shapesColors="shapes-colors",e.stockPhotography="stock-photography",e.strategicPlanning="strategic-planning",e.teamMeetings="team-meetings",e.tutorials="tutorials",e.uiKits="ui-kits",e.visualAssets="visual-assets",e.whiteboarding="whiteboarding",e.wireframes="wireframes",e.workshopTemplates="workshop-templates",e))(i||{}),o=(e=>(e.LANDING="landing",e.NAV="nav",e))(o||{})},592597:(e,r,n)=>{n.d(r,{iB:()=>l});var a=n(540019),i=n(555328),o=n(28567),s=n(222085);let l=a.M4.Query({fetch:async e=>(await o.c.getAll({editorType:e})).data.meta});a.M4.Query({fetch:async e=>(await o.c.getCategoryBySlug({slug:e.categorySlug,tagSlug:e.tagSlug})).data.meta}),a.M4.Query({fetch:async e=>(await s.A.getCommunityShelves({categorySlug:e,shelfType:i.cS.CATEGORY_PAGE})).data.meta[0]})},776397:(e,r,n)=>{n.d(r,{m:()=>d});var a=n(67151),i=n(540019),o=n(301400),s=n(93623),l=n(357142),c=n(492330);let d=i.M4.Query({fetch:async({apiResourceType:e,id:r})=>{switch(e){case"file":return(await o.H.getVersions({id:r})).data.meta;case"plugin":return(await s.V.getVersions({pluginId:r})).data.meta.plugin;case"widget":return(await c.U.getVersions({widgetId:r})).data.meta.plugin;default:(0,a.xb)(e,`Unknown resource type: ${e}`)}}});i.M4.Query({fetch:async({apiResourceType:e,id:r})=>(await l.a.getResourceWithContentID({resourceType:e,contentId:r})).data.meta})},944452:(e,r,n)=>{n.d(r,{J5:()=>_,iB:()=>g});var a=n(737947),i=n(179940),o=n(566083),s=n(815063),l=n(62589),c=n(709495),d=n(910764),u=n(580857),m=n(357611),p=n(971120),h=n(742580);function _(e,r){let n;let i=decodeURIComponent(e||a.Ay.location.pathname);try{let e=(0,l.pO)(f)(i);if(!e)return null;n=e.params}catch(e){return null}let s=f.parseQueryString(r||a.Ay.location.search),_=n.categorySlug,g=n.tagSlug,E={category:_,resourceType:s.resource_type||p.L.BrowseResourceTypes.MIXED,editor_type:m.k.Editors.ALL,price:s.price||o.C.ALL,creators:u.Z.ALL,sort_by:(0,c.H)(),following:!1,tags:g?[g]:[],pagination:null};E.editor_type=_!==h.LJ.presentations||s.editor_type?(0,d.G)(s.editor_type,E.resourceType):m.k.Editors.SLIDES,E.resourceType=(0,d.l)(E.editor_type,E.resourceType);let y=s.sort_by;y&&[c.e.Browse.ALL_TIME,c.e.Browse.PUBLISHED_AT,c.e.Browse.POPULAR].includes(y)&&(E.sort_by=y);let b=s.creators;return b&&[u.Z.FIGMA_PARTNER,u.Z.FOLLOWING].includes(b)&&(E.creators=b),E}function g(e){let r=(0,s.S)(e.category,h.LJ);return void 0===r?"/community":new f({categorySlug:r,tagSlug:e.tags[0]},{resource_type:(0,d.l)(e.editor_type,e.resourceType),editor_type:(0,d.G)(e.editor_type,e.resourceType),price:e.price,sort_by:e.sort_by,creators:e.creators}).href}class f extends l.nS{}f.path="/community/:categorySlug/:tagSlug?",f.deserializeParams=e=>{let r=(0,s.S)(e.categorySlug,h.LJ);if(void 0===r)throw Error(`CategoryRoute: Invalid category slug ${e.categorySlug}`);return{...e,categorySlug:r}},f.serializeParams=e=>e,f.parseQueryString=e=>{let r=(0,i.xL)(e);return{resource_type:(0,s.S)(r.resource_type,p.L.BrowseResourceTypes),editor_type:(0,s.S)(r.editor_type,m.k.Editors),price:(0,s.S)(r.price,o.C.Price),sort_by:(0,s.S)(r.sort_by,c.e.Browse),creators:(0,s.S)(r.creators,u.Z.Browse)}},Array.from(Object.values(h.LJ)).map(e=>new f({categorySlug:e}).href)},97128:(e,r,n)=>{n.d(r,{Tg:()=>h,UF:()=>u,Uo:()=>d});var a=n(179940),i=n(62589),o=n(637590),s=Object.getPrototypeOf,l=Reflect.get,c=(e,r,n)=>l(s(e),n,r),d=(e=>(e.FILE="file",e.WIDGET="widget",e.PLUGIN="plugin",e))(d||{}),u=(e=>(e.FILE="files",e.WIDGET="widgets",e.PLUGIN="plugins",e))(u||{});class m extends i.nS{constructor(e,r){super(e,r)}}m.deserializeParams=e=>({...e,apiResourceType:e.apiResourceType}),m.serializeParams=e=>e,m.parseQueryString=e=>{let r=(0,a.xL)(e);return{comment:r.comment,checkout:r.checkout,rating:r.rating}};let p=class extends m{constructor(e,r){super({...e,apiResourceType:"file"},r)}};p.path="/community/:apiResourceType(file)/:resourceId/:urlSlug?",p.serializeParams=e=>c(p,p,"serializeParams").call(void 0,{...e,apiResourceType:"file"}),p.parseQueryString=e=>{let r=(0,a.xL)(e);return{...c(p,p,"parseQueryString").call(void 0,e),preview:(()=>{let e=r.preview;if(void 0!==e)return parseInt(e)===o.G4.DEFAULT?o.G4.DEFAULT:e})(),freemium_preview:r.freemium_preview}};let h=p},738754:(e,r,n)=>{n.d(r,{I:()=>a});let a=function(){return null}},570999:(e,r,n)=>{n.d(r,{ge:()=>a,qx:()=>i});let a=function(){return!1},i=function(){return!1}},952593:(e,r,n)=>{n.d(r,{U9:()=>a,hZ:()=>i});let a=function(){return!1},i=function(){return!1}},181849:(e,r,n)=>{n.d(r,{U5:()=>o});var a=n(411855);n(880934),n(939683),n(966712);var i=n(38580);n(559036),n(45775),n(29680),n(335682),n(656839),n(37112);let o=(0,i.eU)(!0);a.createContext({connectedInstancesByTlf:new Map,connectedInstancesByTlfGroupedSiblings:new Map,connectedInstancesByGuid:new Map,connectedInstanceTree:void 0,analyticsByComponentKey:new Map})},409272:(e,r,n)=>{n.d(r,{rZ:()=>G,yT:()=>H});var a=n(411855),i=n(188507),o=n(943632),s=n(75395),l=n(615925),c=n(629019),d=n.n(c),u=n(38580),m=n(374626),p=n(153234),h=n(580893),_=n(206316),g=n(46481),f=n(939863),E=n(175290),y=n(87816),b=n(308977),I=n(855473),T=n(962645),v=n(31225),S=n(152820),w=n(970516),A=n(738269),N=n(259927),C=n(672517),L=n(498606),O=n(507956),R=n(788612),P=n(7959),D=n(610462),k=n(524596),M=n(346572),F=n(619826),x=n(522157);let U=(0,u.eU)(!1),B=(e,r={})=>(0,o.WI)(e.map(e=>e.lines.length>0?(0,T.kt)(e.lines,!0):null)).join("\n\n").replace(I.Z4,"").replace(I.M$,"").replace(S.G6,"").replace(S.P1,"").replace(y.k,e=>{let n=r[e];return n?"INSTANCE"===n.type?`/* ${n.name} */`:`/* ${n.message} */`:"/* unknown instance */"}),V=(0,C.tf)(s.E);function G({source:e,title:r,selectedAll:n,...i}){let o=(0,O.ks)(),l=(0,b.v4)(),c=(0,a.useMemo)(()=>({name:"Copy code button",type:"code connect"!==e?l.type:void 0,pluginId:"code connect"!==e?l.id:void 0,selectedAll:n,source:e,title:r,isDevMode:o}),[o,l.id,l.type,n,e,r]);return e?a.createElement(V,{...i,className:d()(F.AF,F.cL),trackingProperties:c}):a.createElement(s.E,{...i,className:d()(F.AF,F.cL)})}function H(e){let{code:r,section:n,hasCodeDiff:o,collapseLongSections:s=!0,bottomPadding:c=!1,copyActionEnabled:u=!0,copyAllActionEnabled:h=!0,hideHints:_=!1,recordingKey:y,additionalHeaderActions:b=null,footerActions:I=null,type:v="default",leftHeaderActions:S=null}=e;n.collapseAfterIndex||(n={...n,collapseAfterIndex:15});let C=(0,i.d4)(e=>Object.keys(e.mirror.sceneGraphSelection)[0]),O=(0,i.wA)(),P=function(e){let r=(0,i.wA)();return(0,k.IG)(e.lines,e.language,e.pills,r)}(n),[D,M]=a.useState(s),[V,H]=a.useState(!1),[j,z]=(0,m.fp)(U),q=h&&j;a.useEffect(()=>{M(s)},[C,s]);let X=a.useMemo(()=>D&&n.collapseAfterIndex?P.slice(0,n.collapseAfterIndex):P,[P,n.collapseAfterIndex,D]),J=n.collapseAfterIndex?P.length-n.collapseAfterIndex:0,Z=e.codeToCopy||r,Q=e.sectionToCopy||n,ee=a.useCallback(()=>{if(!q)return B([Q],Q.pills);{let e=Z.reduce((e,r)=>Object.assign(e,r.pills),{});return B(Z,e)}},[Z,Q,q]),et=a.useCallback(()=>{let e=ee();e&&O(w.lW({stringToCopy:e,ignoreLineBreaks:!1}))},[O,ee]),er=p.rf(p.Pt(y,"copy"),"click",et),en=a.useCallback(()=>{O(w.lW({stringToCopy:window.getSelection()?.toString()||ee(),ignoreLineBreaks:!1}))},[O,ee]),ea=a.useCallback(e=>{e.stopPropagation(),e.preventDefault();let{clientX:r,clientY:n}=e;O(A.j7({type:N.Sl,data:{clientX:r,clientY:n,onCopyText:en}}))},[en,O]),ei=a.useCallback(e=>{h&&z(e.shiftKey),H(!0)},[z,h]),eo=p.rf(p.Pt(y,"copy"),"mouseenter",ei),es=a.useCallback(e=>{z(!1),H(!1)},[z]),el=a.useCallback(e=>{z(V&&h&&e.shiftKey)},[V,z,h]);a.useEffect(()=>(document.addEventListener("keydown",el),document.addEventListener("keyup",el),()=>{document.removeEventListener("keydown",el),document.removeEventListener("keyup",el)}),[el]);let ec=function(e){switch(e){case"Modifier":return(0,f.t)("inspect_panel.code.modifier");case"Code":return(0,f.t)("inspect_panel.code.code");case"Style":return(0,f.t)("inspect_panel.code.style");case"Variables":return(0,f.t)("inspect_panel.code.variables");case"Layout":return(0,f.t)("inspect_panel.properties.layout");case"Position":return(0,f.t)("inspect_panel.code.position");case"Other":return(0,f.t)("inspect_panel.code.other");case"Typography":return(0,f.t)("inspect_panel.typography.title");default:return e}}(n.name),ed=V||q,eu=a.useRef(null);return a.createElement(R.VZ,{hideHeader:!0,noPadding:!c,noBorder:!0,recordingKey:`code:${n.name}`},a.createElement(k.GM.Provider,{value:{ref:eu}},a.createElement($,{type:v,header:a.createElement(K,{type:v,rowRef:eu,muted:n.isTextSegment,actions:a.createElement(a.Fragment,null,b||a.createElement(E.M,null),u&&a.createElement(G,{onClick:er,"aria-label":(0,f.t)("inspect_panel.copy"),htmlAttributes:{"data-tooltip":h?(0,f.t)("inspect_panel.code.copy_all_shift"):"","data-tooltip-type":L.Ib.TEXT,onMouseEnter:eo,onMouseLeave:es},source:"codegen",title:n.name,selectedAll:q},a.createElement(g.U,{svg:x.A},a.createElement(l.X,null)))),title:ec,leftActions:S}),content:a.createElement(W,{code:n,lines:X,hideHints:_||ed,hasCodeDiff:o,isCopyHighlightActive:ed,onInstancePillClick:e.onInstancePillClick}),shouldShowMore:D&&J>0,showMoreLinesCount:J,onShowMore:()=>M(!1),copyHoverClassName:u&&ed?F.TJ:void 0,leftGutter:o?function(e,r=!1){return a.createElement("div",{className:d()(F.x4,{[F.R]:r})},e.map((e,r)=>a.createElement("div",{className:d()({[F.BJ]:!0,[F.L6]:e.diff===T.j5.ADDED,[F.pG]:e.diff===T.j5.REMOVED}),key:r},e.diff===T.j5.ADDED?"+":e.diff===T.j5.REMOVED?"-":null)))}(X,ed):a.createElement("div",{className:F.BA},X.map((e,r)=>a.createElement("div",{className:F.eT,key:r},r+1))),onContextMenu:ea,footer:I?a.createElement(Y,{type:v},I):void 0})))}function W({code:e,lines:r,hideHints:n,hasCodeDiff:i,isCopyHighlightActive:o=!1,onInstancePillClick:s}){let l=a.useCallback(e=>{let r;let n=e.target;n.classList.contains("instance-pill")?r=n:n.parentElement?.classList.contains("instance-pill")&&(r=n.parentElement),r&&s?.(r.dataset.id||"")},[s]),c=({index:s})=>{let c=r[s],u=8*(0,T.Gj)(c).length+16+8,m=a.createElement("span",{style:{display:"inline-block",paddingLeft:u,paddingRight:8,textIndent:-16,flexGrow:1},key:"code","data-testid":`${e.name}${s}`,role:"none",onClick:l},c.code),p=c.hint,h=void 0!==p&&p.type===v.bv.Tooltip?a.createElement(D.A,{hint:(0,D.x)(p),hidden:n}):null,_=e.lines[s]?.diff;return a.createElement("div",{key:s,className:d()({[F.n8]:!0,[F.vN]:_===T.j5.ADDED&&!o,[F.rq]:_===T.j5.REMOVED&&!o,[F.R0]:i&&_!==T.j5.ADDED&&_!==T.j5.REMOVED&&!o,[F.r9]:i&&_===T.j5.REMOVED&&o})},m,h)};return a.createElement("code",{className:d()(F.Zh,M.y),"data-lang":e.language,style:{minWidth:"100%",whiteSpace:"normal"}},r.map((e,r)=>c({index:r})))}function K({title:e,muted:r,actions:n,type:i,leftActions:o,rowRef:s}){return a.createElement("div",{className:F.Tw,ref:s},a.createElement("div",{className:d()({[F.S7]:!0,[F.aW]:"connected"===i,[F.jW]:"manual"===i})},o,a.createElement(P.xw,{className:r?F.fH:F.Cq,"data-testid":"devHandoffFocusPanelTitle"},e),a.createElement("div",{className:F.zB},n)))}function Y({children:e,type:r}){return a.createElement("div",{className:F.p4},a.createElement("div",{className:d()({[F.I$]:!0,[F.aW]:"connected"===r,[F.jW]:"manual"===r})},e))}function $({header:e,content:r,leftGutter:n,footer:i,type:o,shouldShowMore:s,showMoreLinesCount:l,onShowMore:c,onContextMenu:u,copyHoverClassName:m}){let[p,g]=a.useState(null),E=p&&p.value?F.Lo:F.ZP,y=a.useCallback(e=>{g({value:e})},[]),b=!!n,I=!!i,T=a.useRef(null);return a.createElement("div",{className:d()(F._X)},e,a.createElement("div",{className:d()(F.is,m,{[F.Eu]:b,[F.xP]:I,[F.aW]:"connected"===o,[F.jW]:"manual"===o})},b&&n,a.createElement("div",{className:F.jJ},a.createElement(h.Z,{onCanScrollChanged:y,className:d()(E),scrollBarAlways:!0,childRef:T},a.createElement("div",{onContextMenu:u,style:{width:"fit-content",minWidth:"100%"},ref:T},r)),s&&a.createElement("div",{className:F.cH},a.createElement(_.d,{label:(0,f.t)("dev_handoff.code.show_more",{count:l}),onClick:c})))),I&&i)}},308977:(e,r,n)=>{n.d(r,{A0:()=>E,AC:()=>w,Ap:()=>y,LK:()=>f,MT:()=>h,NU:()=>b,Pt:()=>S,S8:()=>T,XP:()=>v,cg:()=>I,p:()=>g,uz:()=>_,v4:()=>N,xv:()=>A});var a=n(411855),i=n(188507),o=n(966712),s=n(374626),l=n(986291),c=n(939863),d=n(756085),u=n(215822),m=n(239671),p=n(638311);let h="FIGMA_PROPERTIES",_="WEB",g="IOS",f="ANDROID",E="CSSBUILDER",y="IOS_UIKIT",b="ANDROID_XML",I="MULTI_NODE",T={[_]:{type:"first-party",id:_},[g]:{type:"first-party",id:g},[y]:{type:"first-party",id:y},[f]:{type:"first-party",id:f},[b]:{type:"first-party",id:b},[I]:{type:"first-party",id:I}};function v(e){let r="string"==typeof e?{type:"first-party",id:e}:e;return r&&r.id&&("first-party"!==r.type||T[r.id])?r:{type:"first-party",id:_}}function S(e){let r=(0,d.$1)(),n=(0,d.j8)();return(0,a.useMemo)(()=>({format(a){if(a?.type==="first-party")switch(a?.id){case E:return"CssBuilder";case _:return(0,c.t)("dev_handoff.code.lang_css");case g:return(0,c.t)("dev_handoff.code.lang_swiftui");case y:return(0,c.t)("dev_handoff.code.lang_uikit");case f:return(0,c.t)("dev_handoff.code.lang_compose");case b:return(0,c.t)("dev_handoff.code.lang_android_xml");case h:return(0,c.t)("dev_handoff.code.lang_figma");case I:return(0,o.kc)().dt_multi_node?(0,c.t)("dev_handoff.code.lang_multi_node"):""}if(e){let i=a?.type==="local-plugin"?r[a.id]:a?.type==="published-plugin"&&e.plugin_id===a?.id?n[a.id]??e:null;if(i)return 1===(0,p.m)(i).length?i.name:(0,p.X)(i,a?.pluginLanguage??"").label??i.name}return""}}),[n,r,e])}function w(e){let r=(0,i.d4)(e=>e.selectedView),n="fullscreen"===r.view?r.editorType:null,a=(0,d.S0)("first-party"!==e.type?e.id:"",{searchLocalPlugins:!0,searchPublishedPlugins:!0}),{plugin:o}=(0,d._P)("published-plugin"===e.type?e.id:"0","published-plugin"===e.type);if("orgAdminSettings"!==r.view&&n!==m.nT.DevHandoff)return null;let s=a||o;return s&&(0,u.M5)(s)?s:null}function A(e,r){if(!e||!e.codeSyntax)return null;switch(r){case _:case E:return e.codeSyntax[0]??null;case f:case b:return e.codeSyntax[1]??null;case g:case y:return e.codeSyntax[2]??null}return null}function N(){let e=(0,s.md)(l.D),r=(0,i.d4)(e=>e.mirror.appModel.devHandoffCodeLanguage),n=(0,i.d4)(e=>e.selectedView),o=r;return"orgAdminSettings"===n.view&&e&&(o=e),(0,a.useMemo)(()=>v(o),[o])}(0,o.kc)().dt_lego_ext_plugins&&(T[E]={type:"first-party",id:E})},19741:(e,r,n)=>{n.d(r,{BT:()=>o,Ju:()=>l,q$:()=>s});var a=n(299321);let i=[];function o(e){i.push(e),i.length&&a.w3z.setIsNodeChangeCallbackRegistered(!0)}function s(e){(i=i.filter(r=>r!==e)).length||a.w3z.setIsNodeChangeCallbackRegistered(!1)}function l(){}},393812:(e,r,n)=>{function a(e){return!!e?.mirror&&1===Object.keys(e.mirror.sceneGraphSelection).length}n.d(r,{Mx:()=>a}),n(299321),n(880934),n(915440),n(335682),n(279453),n(279702)},45775:(e,r,n)=>{n(457630)},591494:(e,r,n)=>{n.d(r,{JW:()=>s});var a=n(411855);n(188507);var i=n(75395);n(299321),n(794272);var o=n(153234);function s({text:e,isActive:r,onClick:n,recordingKey:s,isSingle:l}){return a.createElement(i.E,{recordingKey:o.Pt(s,"tab"),onClick:n,actionOnPointerDown:!0,className:l?"dev_handoff_panel_tab_group--tabsHeaderSingle--G5OnU dev_handoff_panel_tab_group--tabFocus--f8Y7h":r?"dev_handoff_panel_tab_group--tabActive--Ex7NX pages_panel--tabActive--BitzC pages_panel--tab--Uge5B dev_handoff_panel_tab_group--tabFocus--f8Y7h":"dev_handoff_panel_tab_group--tab--Y0iYX pages_panel--tab--Uge5B dev_handoff_panel_tab_group--tabFocus--f8Y7h",htmlAttributes:{"data-label":e}},e)}n(154254),n(939863),n(175290),n(809840),n(5605),n(931828),n(226055),n(561004),n(554294),n(118658),n(978527),n(157147),n(252828),n(785315)},86538:(e,r,n)=>{n.d(r,{HT:()=>c,RB:()=>d});var a=n(38580),i=n(288706),o=n(529928);let s=(0,a.eU)(void 0),l=(0,o.bt)(e=>e.universalInsertModal.initialFdView),c=(0,i.t_)(e=>{let r=e(l),n=e(s);return r||n||"recents_and_saved"}),d=(0,a.eU)(!1)},603689:(e,r,n)=>{n.d(r,{lz:()=>p,sX:()=>h}),n(411855);var a=n(299321),i=n(91408),o=n(38580),s=n(617453),l=n(837746);let c=(0,i.jz)(l.QBm),d=300+c,u=640+c;function m(e){return Math.max(d,Math.min(u,e||0))}function p(){return m((0,s.UX)())}function h(){return m(a.Ez5?.editorPreferences().devHandoffInspectSplitPosition.getCopy()??0)}(0,o.eU)(!1)},870505:(e,r,n)=>{var a=n(91408),i=n(38580),o=n(837746);let s=(0,a.jz)(o.YI7),l=(0,a.jz)(o.Qhc);(0,i.eU)(s+l)},85304:(e,r,n)=>{n.d(r,{e:()=>l}),n(411855);var a=n(38580),i=n(374626);n(30637);var o=n(507956);let s=(0,a.eU)(!1);function l(){let e=(0,o.LS)(),[r]=(0,i.fp)(s);return r&&e}},256975:(e,r,n)=>{n.d(r,{Nc:()=>l,U4:()=>d,_I:()=>c,tn:()=>s});var a=n(188507);n(915440);var i=n(335682);n(279453);var o=n(479296);let s=(0,o.n)(e=>{let r=(0,i.tB)({openFile:e.openFile??null});return r?.canAccessFullDevMode??!0}),l=(0,o.n)(e=>{let r=(0,i.tB)({openFile:e.openFile??null});return r?.canAccessDevModeEntryPoint??!0});function c(){return(0,a.d4)(s)}function d(){return(0,a.d4)(l)}},400181:(e,r,n)=>{n.d(r,{O:()=>K});var a=n(411855),i=n(188507),o=n(343887),s=n(593961),l=n(101165),c=n(183686),d=n(143984),u=n(299321),m=n(275556),p=n(629019),h=n.n(p);n(758271);var _=n(776250),g=n(91408),f=n(966712),E=n(268537);n(910769);var y=n(163023),b=n(939863),I=n(118830),T=n(444736),v=n(239349),S=n(46415),w=n(738269),A=n(696673);n(617453),n(779709);var N=n(843495);n(335682),n(100197),n(147206);var C=n(471224);n(793485);var L=n(279702),O=n(498606),R=n(620722);n(788612);var P=n(297281),D=n(78479),k=n(227795),M=n(538697),F=n(343827),x=n(930269),U=n(782895),B=n(139387),V=n(968109);let G=4*(0,g.jz)(x.devHandoffAssetPreviewMaxWidth),H=4*(0,g.jz)(x.devHandoffAssetPreviewMaxHeight),W=e=>e.stopPropagation(),K={format:e=>e};a.memo(({assetInfo:e,openFileKey:r,disabled:n,media:p,showGuids:g,saveAsState:x,dropdownShown:Y,isSelected:$})=>{let{assetId:j,assetName:z,thumbnailVersion:q}=e,X=e.instancesGUIDs?.[0]??e.duplicateGUIDs?.[0]??j,J=(0,I.O)({assetId:X,thumbnailVersion:q,width:G,height:H,scale:4}),Z=function(e,r){let{exportSettings:n}=(0,v.mJ)(e)??{exportSettings:null};return n?.[0]?.imageType??(r&L.PW.ASSET_ICON?"SVG":"PNG")}(j,e.type),Q=(0,T.aT)(e),ee=(0,i.wA)(),et=a.useCallback(async e=>{e.stopPropagation(),(0,_.sx)("Asset Panel Export Clicked"),await (0,C.Dc)(C.hV.Export,x,ee,"export-assets-handoff",[X],"export-assets-handoff",{[X]:Z}),ee(S.rg()),ee(w.oB())},[X,ee,Z,x]),er=a.useCallback(e=>{p.length>0&&r?ee(w.j7({type:"save-media-select",data:{assetId:X}})):et(e),e.stopPropagation()},[ee,et,p,X,r]),en=(0,F.d)(!1,void 0,X),ea=a.useCallback(e=>{en?.(),e.stopPropagation()},[en]),ei=e?.instancesGUIDs??e?.duplicateGUIDs??[j],eo=a.useCallback(e=>{m.l7.user("image-type-change",()=>{u.glU.setDevHandoffAssetExport(j,e)})},[j]),es=!!(e.type&L.PW.ASSET_COMPONENT),el=!!(e.type&L.PW.ASSET_ICON),ec=!!(e.type&L.PW.ASSET_IMAGE),ed=!!(e.type&L.PW.ASSET_GIF),eu=!!(e.type&L.PW.ASSET_VIDEO),em=ed||eu,ep=(el||ec)&&!em,eh=p.length>0&&null!==r?k.DK:k.K0,e_=(0,f.kc)().ds_publish_file_deprecation?e.isFromLibrary:e.libraryKey,eg=!!e.libraryFileKey&&(0,A.wJ)(e.libraryFileKey),ef=a.useMemo(()=>[a.createElement(D.N5,{key:"png",value:"PNG"}),a.createElement(D.N5,{key:"jpeg",value:"JPEG"}),...el?[a.createElement(D.N5,{key:"svg",value:"SVG"})]:[],a.createElement(D.N5,{key:"pdf",value:"PDF"})],[el]),eE=e=>{let r=e.split(".");if(!r||!(r.length>0))return{name:e,extension:""};{let e=r[r.length-1];return{name:r.slice(0,r.length-2).join("."),extension:e}}};return a.createElement("div",{className:U.s,onMouseEnter:()=>u.Ez5.canvasViewState().temporarilyHoveredNodes.set(ei),onMouseLeave:()=>u.Ez5.canvasViewState().temporarilyHoveredNodes.set([]),onClick:()=>N.tJ([e?.instancesGUIDs?.[0]??j]),role:"link",tabIndex:0},a.createElement("div",{className:h()(U.Re,Y?.type==="save-media-select"&&Y.data.assetId===X?U.Lq:void 0)},a.createElement("div",{className:U.ZE,style:J.backgroundStyle},J&&a.createElement(R.J,{className:U.Wb,src:J.url})),a.createElement("div",{className:U.DE},a.createElement("div",{className:U.SM},g?`${z} (${j})`:z),es&&!$?a.createElement("div",{className:U._w},a.createElement(y.B,{svg:V.A}),a.createElement("div",{className:U.R5},(0,b.tx)("dev_handoff.assets.instance"))):a.createElement("div",{className:U.Rn},a.createElement(T.$R,{assetInfo:e,media:ep?p:[],dataTestId:"assetPanel",shouldShowTypeLabel:!0}))),a.createElement("div",{className:U.Uo},ep&&a.createElement(a.Fragment,null,a.createElement(D.SV,{id:`asset-image-type-${j}`,property:Z,formatter:D.A3,onChange:eo,dispatch:ee,dropdownShown:Y,onMouseDown:W,dropdownWidth:150},ef),a.createElement("div",{className:U.yL},a.createElement(eh,{svg:B.A,onClick:er,"data-tooltip-type":O.Ib.TEXT,"data-tooltip":n?(0,b.t)("fullscreen.properties_panel.export_disabled"):(0,b.t)("fullscreen.export.export"),disabled:n,className:U.x6,containerClassName:U.Li,isBackgroundTransparent:!0}),Y?.type==="save-media-select"&&a.createElement(a.Fragment,null,a.createElement("div",{className:U.Vx}),a.createElement(E.ms,{className:U.Yw},p.map(e=>{let{name:n,extension:i}=eE(e.name);return a.createElement(E.gS,{onClick:e=>{e.stopPropagation(),ee(w.oB())},href:(0,P.ij)(r,e.hash),target:"_blank",key:e.hash,className:U.cu,"data-tooltip-type":O.Ib.TEXT,"data-dropdown-tooltip":e.name},a.createElement("div",null,(0,b.t)("fullscreen.export.source")),a.createElement("div",{className:U.Mo},a.createElement(T.yP,{pxWidth:e.width,pxHeight:e.height,dataTestId:"assetPanel"}),a.createElement("div",{className:U.Om},"\xb7"),a.createElement("div",{className:U.VZ,"data-content-start":n,"data-content-end":`.${i}`},e.name)))}),a.createElement(E.gS,{key:"export",className:U.HL,onClick:et},a.createElement("div",null,(0,b.t)("fullscreen.export.layer_export")),a.createElement("div",{className:U.Mo},a.createElement(T.$R,{assetInfo:e,dataTestId:"assetPanel",hideDot:!0}),a.createElement("div",{className:U.Om},"\xb7"),a.createElement("div",{className:U.VZ},D.A3.format(Z)))))))),em&&a.createElement(a.Fragment,null,a.createElement(M.uQ,{property:ed?"GIF":"MP4",formatter:K,isDisabled:!0}),a.createElement("a",{href:Q??"",target:"_blank"},a.createElement(o.K,{"aria-label":(0,b.t)("fullscreen.export.export"),disabled:!Q,htmlAttributes:{"data-tooltip":(0,b.t)("fullscreen.export.export"),"data-tooltip-type":O.Ib.TEXT}},a.createElement(s.b,null)))),es&&!$&&a.createElement(o.K,{onClick:ea,"aria-label":eg?(0,b.t)("design_systems.instance_panel.view_library_in_community"):e_?(0,b.t)("dev_handoff.library.view"):(0,b.t)("design_systems.instance_panel.go_to_main_component"),htmlAttributes:{"data-tooltip":eg?(0,b.t)("design_systems.instance_panel.view_library_in_community"):e_?(0,b.t)("dev_handoff.library.view"):(0,b.t)("design_systems.instance_panel.go_to_main_component"),"data-tooltip-type":O.Ib.TEXT}},eg?a.createElement(l.c,null):e_?a.createElement(c.l,null):a.createElement(d.K,null)))))})},838519:(e,r,n)=>{var a=n(411855),i=n(188507),o=n(862350),s=n(951792),l=n(288006),c=n(75395),d=n(463033),u=n(615925),m=n(46481),p=n(299986),h=n(939863),_=n(409272),g=n(970516),f=n(677664),E=n(498606),y=n(237870),b=n(128909),I=n(522157),T=(e=>(e[e.REACT=0]="REACT",e[e.SWIFTUI=1]="SWIFTUI",e[e.COMPOSE=2]="COMPOSE",e))(T||{});function v({language:e}){switch(e){case 0:return a.createElement(S,null);case 1:return a.createElement(w,null);case 2:return a.createElement(A,null);default:return null}}function S(){let e=(0,i.wA)();return a.createElement(a.Fragment,null,a.createElement("div",{className:b.DD},(0,h.t)("dev_handoff.code.lang_react")),a.createElement("div",{className:b.gY}," ",a.createElement("div",{className:b.YN},a.createElement("div",{className:b.v_},"1")),a.createElement("div",{className:b.M7},a.createElement("div",{className:b.uw},(0,h.tx)("dev_handoff.code_connect.modal_install_package")),a.createElement("div",{className:b.G5},a.createElement("div",{className:b.jt},"npm install @figma/code-connect"),a.createElement("div",{className:b.cL},a.createElement(_.rZ,{"aria-label":(0,h.t)("inspect_panel.copy"),onClick:()=>e(g.lW({stringToCopy:"npm install @figma/code-connect"})),htmlAttributes:{"data-tooltip":(0,h.t)("inspect_panel.copy"),"data-tooltip-type":E.Ib.TEXT},source:"code connect",title:"react-step1"},a.createElement(m.U,{svg:I.A},a.createElement(u.X,null))))))),a.createElement("div",{className:b.gY}," ",a.createElement("div",{className:b.YN},a.createElement("div",{className:b.v_},"2")),a.createElement("div",{className:b.M7},a.createElement("div",{className:b.uw},(0,h.tx)("dev_handoff.code_connect.modal_run_command")),a.createElement("div",{className:b.G5},a.createElement("div",{className:b.jt},"npx figma connect"),a.createElement("div",{className:b.cL},a.createElement(_.rZ,{"aria-label":(0,h.t)("inspect_panel.copy"),onClick:()=>e(g.lW({stringToCopy:"npx figma connect"})),htmlAttributes:{"data-tooltip":(0,h.t)("inspect_panel.copy"),"data-tooltip-type":E.Ib.TEXT},source:"code connect",title:"react-step2"},a.createElement(m.U,{svg:I.A},a.createElement(u.X,null))))))),a.createElement("div",{className:b.gY}," ",a.createElement("div",{className:b.YN},a.createElement("div",{className:b.v_},"3")),a.createElement("div",{className:b.M7},a.createElement("div",{className:b.uw},(0,h.tx)("dev_handoff.code_connect.modal_publish")),a.createElement("div",{className:b.G5},a.createElement("div",{className:b.jt},"npx figma connect publish "),a.createElement("div",{className:b.cL},a.createElement(_.rZ,{"aria-label":(0,h.t)("inspect_panel.copy"),onClick:()=>e(g.lW({stringToCopy:"npx figma connect publish"})),htmlAttributes:{"data-tooltip":(0,h.t)("inspect_panel.copy"),"data-tooltip-type":E.Ib.TEXT},source:"code connect",title:"react-step3"},a.createElement(m.U,{svg:I.A},a.createElement(u.X,null))))))))}function w(){let e=(0,i.wA)();return a.createElement(a.Fragment,null,a.createElement("div",{className:b.DD},(0,h.t)("dev_handoff.code.lang_swiftui")),a.createElement("div",{className:b.gY}," ",a.createElement("div",{className:b.YN},a.createElement("div",{className:b.v_},"1")),a.createElement("div",{className:b.M7},a.createElement("div",{className:b.uw},(0,h.tx)("dev_handoff.code_connect.modal_install")),a.createElement("div",{className:b.G5},a.createElement("div",{className:b.jt},"npm install -g @figma/code-connect"),a.createElement("div",{className:b.fq},a.createElement(_.rZ,{"aria-label":(0,h.t)("inspect_panel.copy"),onClick:()=>e(g.lW({stringToCopy:"npm install -g @figma/code-connect"})),htmlAttributes:{"data-tooltip":(0,h.t)("inspect_panel.copy"),"data-tooltip-type":E.Ib.TEXT},source:"code connect",title:"swift-step1"},a.createElement(m.U,{svg:I.A},a.createElement(u.X,null))))))),a.createElement("div",{className:b.gY}," ",a.createElement("div",{className:b.YN},a.createElement("div",{className:b.v_},"2")),a.createElement("div",{className:b.M7},a.createElement("div",{className:b.uw},(0,h.tx)("dev_handoff.code_connect.swift.add_snippet")),a.createElement("div",{className:b.G5},a.createElement("div",{className:b.as},'dependencies: [\n\u2003\u2003...,\n\u2003\u2003.package(url: "https://github.com/figma/code-connect", from: "1.0.0"),\n]'),a.createElement("div",{className:b.fq},a.createElement(_.rZ,{"aria-label":(0,h.t)("inspect_panel.copy"),onClick:()=>e(g.lW({stringToCopy:`dependencies: [
		...,
		.package(url:"https://github.com/figma/code-connect", from: "1.0.0"),
]`,ignoreLineBreaks:!1})),htmlAttributes:{"data-tooltip":(0,h.t)("inspect_panel.copy"),"data-tooltip-type":E.Ib.TEXT},source:"code connect",title:"swift-step2"},a.createElement(m.U,{svg:I.A},a.createElement(u.X,null))))))),a.createElement("div",{className:b.gY}," ",a.createElement("div",{className:b.YN},a.createElement("div",{className:b.v_},"3")),a.createElement("div",{className:b.M7},a.createElement("div",{className:b.uw},(0,h.tx)("dev_handoff.code_connect.modal_run_command")),a.createElement("div",{className:b.G5},a.createElement("div",{className:b.jt},'figma connect create "<url_to_node>"'),a.createElement("div",{className:b.cL},a.createElement(_.rZ,{"aria-label":(0,h.t)("inspect_panel.copy"),onClick:()=>e(g.lW({stringToCopy:"figma connect create"})),htmlAttributes:{"data-tooltip":(0,h.t)("inspect_panel.copy"),"data-tooltip-type":E.Ib.TEXT},source:"code connect",title:"swift-step3"},a.createElement(m.U,{svg:I.A},a.createElement(u.X,null))))))),a.createElement("div",{className:b.gY}," ",a.createElement("div",{className:b.YN},a.createElement("div",{className:b.v_},"4")),a.createElement("div",{className:b.M7},a.createElement("div",{className:b.uw},(0,h.tx)("dev_handoff.code_connect.modal_publish")),a.createElement("div",{className:b.G5},a.createElement("div",null,"figma connect publish "),a.createElement("div",{className:b.cL},a.createElement(_.rZ,{"aria-label":(0,h.t)("inspect_panel.copy"),onClick:()=>e(g.lW({stringToCopy:"figma connect publish"})),htmlAttributes:{"data-tooltip":(0,h.t)("inspect_panel.copy"),"data-tooltip-type":E.Ib.TEXT},source:"code connect",title:"swift-step4"},a.createElement(m.U,{svg:I.A},a.createElement(u.X,null))))))))}function A(){let e=(0,i.wA)();return a.createElement(a.Fragment,null,a.createElement("div",{className:b.DD},(0,h.t)("dev_handoff.code.lang_compose")),a.createElement("div",{className:b.gY}," ",a.createElement("div",{className:b.YN},a.createElement("div",{className:b.v_},"1")),a.createElement("div",{className:b.M7},a.createElement("div",{className:b.uw},(0,h.tx)("dev_handoff.code_connect.modal_install")),a.createElement("div",{className:b.G5},a.createElement("div",{className:b.jt},"npm install -g @figma/code-connect"),a.createElement("div",{className:b.fq},a.createElement(_.rZ,{"aria-label":(0,h.t)("inspect_panel.copy"),onClick:()=>e(g.lW({stringToCopy:"npm install -g @figma/code-connect"})),htmlAttributes:{"data-tooltip":(0,h.t)("inspect_panel.copy"),"data-tooltip-type":E.Ib.TEXT},source:"code connect",title:"compose-step1"},a.createElement(m.U,{svg:I.A},a.createElement(u.X,null))))))),a.createElement("div",{className:b.gY}," ",a.createElement("div",{className:b.YN},a.createElement("div",{className:b.v_},"2")),a.createElement("div",{className:b.M7},a.createElement("div",{className:b.uw},(0,h.tx)("dev_handoff.code_connect.compose.add_plugin_snippet")),a.createElement("div",{className:b.G5},a.createElement("div",{className:b.as},'plugins { \n\u2003\u2003...\n\u2003\u2003id("com.figma.code.connect") version "1.+"\n} \n\ndependencies { \n\u2003\u2003...\n\u2003\u2003implementation("com.figma.code.connect:plugin:1.+")\n}'),a.createElement("div",{className:b.fq},a.createElement(_.rZ,{"aria-label":(0,h.t)("inspect_panel.copy"),onClick:()=>e(g.lW({stringToCopy:`plugins {
		...
		id("com.figma.code.connect") version "1.+"
}

dependencies {
		...
		implementation("com.figma.code.connect:plugin:1.+")
}`,ignoreLineBreaks:!1})),htmlAttributes:{"data-tooltip":(0,h.t)("inspect_panel.copy"),"data-tooltip-type":E.Ib.TEXT},source:"code connect",title:"compose-step2"},a.createElement(m.U,{svg:I.A},a.createElement(u.X,null))))))),a.createElement("div",{className:b.gY}," ",a.createElement("div",{className:b.YN},a.createElement("div",{className:b.v_},"3")),a.createElement("div",{className:b.M7},a.createElement("div",{className:b.uw},(0,h.tx)("dev_handoff.code_connect.modal_run_command")),a.createElement("div",{className:b.G5},a.createElement("div",{className:b.jt},'figma connect create "<url_to_node>"'),a.createElement("div",{className:b.cL},a.createElement(_.rZ,{"aria-label":(0,h.t)("inspect_panel.copy"),onClick:()=>e(g.lW({stringToCopy:"figma connect create"})),htmlAttributes:{"data-tooltip":(0,h.t)("inspect_panel.copy"),"data-tooltip-type":E.Ib.TEXT},source:"code connect",title:"compose-step3"},a.createElement(m.U,{svg:I.A},a.createElement(u.X,null))))))),a.createElement("div",{className:b.gY}," ",a.createElement("div",{className:b.YN},a.createElement("div",{className:b.v_},"4")),a.createElement("div",{className:b.M7},a.createElement("div",{className:b.uw},(0,h.tx)("dev_handoff.code_connect.modal_publish")),a.createElement("div",{className:b.G5},a.createElement("div",null,"figma connect publish "),a.createElement("div",{className:b.cL},a.createElement(_.rZ,{"aria-label":(0,h.t)("inspect_panel.copy"),onClick:()=>e(g.lW({stringToCopy:"figma connect publish"})),htmlAttributes:{"data-tooltip":(0,h.t)("inspect_panel.copy"),"data-tooltip-type":E.Ib.TEXT},source:"code connect",title:"compose-step4"},a.createElement(m.U,{svg:I.A},a.createElement(u.X,null))))))))}(0,y.Ju)(function(e){let[r,n]=(0,a.useState)(0),u=(0,i.wA)(),m=o.hS(e);return a.createElement(s.bL,{htmlAttributes:{"data-testid":"upgrade_choose_plan_modal"},manager:m,width:800},a.createElement(l.vo,null,a.createElement("div",{className:b.kL},a.createElement("div",{className:b.pz},a.createElement("h1",{className:b.tb},(0,h.tx)("dev_handoff.code_connect.title")),a.createElement("h2",{className:b.J$},(0,h.tx)("dev_handoff.code_connect.modal_text")),a.createElement(c.E,{className:0===r?b.xR:b.s6,onClick:()=>n(0)},(0,h.t)("dev_handoff.code.lang_react")),a.createElement(c.E,{className:1===r?b.xR:b.s6,onClick:()=>n(1)},(0,h.t)("dev_handoff.code.lang_swiftui")),a.createElement(c.E,{className:2===r?b.xR:b.s6,onClick:()=>n(2)},(0,h.t)("dev_handoff.code.lang_compose")),a.createElement("div",{className:b.jH}),a.createElement("span",{className:b.Iw},a.createElement(d.IK,{variant:"primary",onClick:()=>u((0,f.RK)({rawInput:"https://github.com/figma/code-connect"})),iconPrefix:a.createElement("div",{className:b.F9},a.createElement(p.f,null))},(0,h.tx)("dev_handoff.code_connect.modal_github_button")))),a.createElement("div",{className:b.Qs},a.createElement(v,{language:r})))))},"CodeConnectModal",y.ZU.YES)},760834:(e,r,n)=>{n.d(r,{MW:()=>c}),n(411855),n(188507),n(414507),n(299321),n(776250),n(181912),n(966712);var a=n(38580);n(776621),n(286640),n(281381),n(449124),n(163023),n(299986),n(939863),n(175290),n(114950),n(409272),n(308977),n(239349),n(320063),n(358145),n(151283),n(807197),n(662275),n(843495),n(441088),n(318812),n(29680),n(335682),n(860178),n(234945),n(498606),n(788612),n(832637),n(7959),n(538697);var i=n(503457);n(277e3),i.H4.NONE,n(37112),n(593400),n(838519),n(367762);let o={Swift:"swift",TypeScript:"jsx"};function s({updatedAt:e}){let r=React.useMemo(()=>e?dayjs(e).fromNow():"",[e]);return React.createElement(Badge,{color:BadgeColor.DEFAULT,text:t("dev_handoff.figmadocs.connected"),icon:React.createElement(Icon16ApprovedCheckmark,null),className:styles.connectedBadge,dataTooltipType:TooltipType.TEXT,dataTooltip:t("dev_handoff.figmadocs.connected_last_published_at",{lastPublishedAt:r}),dataTooltipShowAbove:!0,dataTooltipMaxWidth:160,dataTooltipTimeout:50})}function l(e){try{let{url:r}=e,n=new URL(r).pathname.split("/"),a=n.indexOf("blob");-1===a&&(a=n.indexOf("tree"));let i=n.slice(a+2).join("/"),o=i.length>0?i:n[n.length-1];return React.createElement("span",{className:styles.linkFilePath},o)}catch(e){return null}}let c=(0,a.eU)(!1)},301854:(e,r,n)=>{n.d(r,{X:()=>S});var a=n(411855),i=n(188507),o=n(343887),s=n(463033),l=n(615925),c=n(299321),d=n(629019),u=n.n(d),m=n(468794);n(794272);var p=n(966712),h=n(939863),_=n(780761),g=n(970516),f=n(60088),E=n(788612),y=n(538697),b=n(564092),I=n(712685),T=n(364216);let v={format:()=>(0,h.t)("inspect_panel.copy_as")};function S(e){let{basisContent:r="",changeContent:n=""}=e,i=a.useMemo(()=>(0,m.pR)(r,n).map(e=>{let r=e.added?T.Qs:e.removed?T.Tk:"";return a.createElement("span",{key:e.value,className:r},e.value)}),[r,n]);return a.createElement(w,{content:a.createElement(a.Fragment,null,i),contentToCopy:n,showVariable:!1})}function w({content:e,contentToCopy:r,showVariable:n=!0}){let{value:d,eventHandlers:m,isHovered:S}=(0,E.ZQ)(T.O7,T.O7),[w,A]=a.useState(!1),N=a.useRef(null),C=(0,i.wA)(),{Dropdown:L,toggleDropdown:O,dropdownTargetRef:R,isDropdownShown:P}=(0,f.B)("CONTENT_COPY_DROPDOWN"),D=(0,E.SV)("inspection_panel_copy_text_variable"),k=(0,b.oU)("TEXT_DATA",{type:c.Z_n.STRING,resolvedType:c.rXF.STRING,value:r}),M=k.variableDisplayName,F=!!M&&n,x=(e,r)=>{C(g.lW({stringToCopy:e,ignoreLineBreaks:!1})),D({value:e,valueType:r})},U=[{displayText:(0,h.t)("inspect_panel.copy_variable_name"),callback:()=>{M&&x(M,"name")}},{displayText:(0,h.t)("inspect_panel.copy_variable_content"),callback:()=>{x(r,"value")}}],B=S||w,V=F?a.createElement(a.Fragment,null,a.createElement(y.uQ,{ref:R,containerClassName:u()(T.$1,(P||(0,p.kc)().dt_dev_view_variables||(0,p.kc)().dt_inferred_vars_modal)&&T.zv),formatter:v,property:null,onClick:O}),a.createElement(L,{items:U,showPoint:!0})):(0,p.kc)().dt_dev_view_variables||(0,p.kc)().dt_inferred_vars_modal?a.createElement(a.Fragment,null,a.createElement(_.$Q,{matchingVars:k?.matchingVars,rowRef:N,isHovered:B}),a.createElement(o.K,{htmlAttributes:m,onClick:()=>x(r,"value"),"aria-label":(0,h.t)("inspect_panel.copy")},a.createElement(l.X,null))):a.createElement("span",{className:T.cL},a.createElement(s.$n,{variant:"link",htmlAttributes:m,onClick:()=>x(r,"value")},(0,h.tx)("inspect_panel.copy")));return a.createElement(E.VZ,{title:(0,h.t)("inspect_panel.property.content"),hideHeader:!0,noPadding:!0,recordingKey:"content"},a.createElement("div",{className:T.Om,onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1)},a.createElement(E.SH,{title:(0,h.t)("inspect_panel.property.content"),isHovered:B||P,recordingKey:"contentHeader",additionalHeaders:V}),a.createElement("div",{className:T.eR,ref:N},F&&a.createElement("div",{className:T.Zn},a.createElement(I.wG,{text:M,isInferred:k.isSuggested,disableHover:!0,dataTestId:"textVariableName",tooltip:k.isSuggested?(0,h.t)("dev_handoff.variables.inferred_text"):r}),a.createElement(_.$Q,{variableId:k?.variable?.node_id,rowRef:N,isHovered:B})),a.createElement("div",{className:u()(T.P_,d),dir:"auto","data-testid":"textContent"},e))))}},5605:(e,r,n)=>{n.d(r,{xb:()=>b,Rk:()=>y,FO:()=>T,ev:()=>I});var a=n(411855),i=n(188507),o=n(966712),s=n(374626),l=n(299986),c=n(939863),d=n(785315),u=n(931828),m=n(507956),p=n(832637),h=n(812505);let _="hint_panels--hintPanel--MUqNV",g="hint_panels--icon--EMIdH",f=(0,o.ck)("aae0db2814117595e45cc509d52e79e7cc31333c"),E=(0,o.ck)("ae3807b6d650b52da20879078b85a0df23ee056a"),y="dev_handoff_dismissed_vscode_extension_hint",b="dev_handoff_dismissed_inspect_panel_plugins_hint";function I(){return(0,m.LS)()?null:a.createElement(p.u,{className:_,idForTests:"hintVSCodeForFigma",userFlag:y,title:(0,c.t)("dev_handoff.vscode.hint.title"),iconComponent:a.createElement("div",{className:"hint_panels--iconContainer--R8QBk"},a.createElement(h.M,null)),hintText:(0,c.t)("dev_handoff.vscode.hint"),hintLinkText:(0,c.t)("dev_handoff.vscode.hint.link"),hintLinkUrl:"https://marketplace.visualstudio.com/items?itemName=figma.figma-vscode-extension",hintLinkOnNewLine:!0})}function T(){let e=(0,m.LS)(),[r,n]=(0,s.fp)(d.H),o=(0,i.wA)(),h=a.useCallback(()=>{n(d._.PLUGIN),o(u.b({[b]:!0}))},[n,o]);return e?a.createElement(p.u,{className:_,idForTests:"hintInspectPlugins",userFlag:b,title:(0,c.t)("dev_handoff.inspect_panel.plugins_hint.title"),hintText:a.createElement(a.Fragment,null,a.createElement("div",{className:"hint_panels--iconRow--SXq7J"},a.createElement("img",{alt:"",className:g,src:f}),a.createElement("div",{className:g},a.createElement(l.f,null)),a.createElement("img",{alt:"",className:g,src:E})),(0,c.tx)("dev_handoff.inspect_panel.plugins_hint")),hintLinkText:(0,c.t)("dev_handoff.inspect_panel.plugins_hint.link"),hintLinkOnClick:h,hintLinkOnNewLine:!0}):null}},118830:(e,r,n)=>{n.d(r,{O:()=>c});var a=n(411855),i=n(299321),o=n(275725),s=n(15859);let l={};function c({assetId:e,thumbnailVersion:r,width:n,height:c,scale:d}){let u=function({assetId:e,width:r,height:n,scale:a}){return`${e}-${r}x${n}@${a}x`}({assetId:e,width:n,height:c,scale:d}),[m,p]=a.useState(l[u]?.url),h=(0,o.c6)(e);return(a.useEffect(()=>{let a=async()=>{await (0,s.Jr)().loadAllImagesUnder([e],i.MoD.NON_ANIMATED_ONLY,"handoff.assetPreview");let[a,o]=i.Vzr.generateThumbnailForNode(e,n,c,d,{});if(o.length>0){let e=l?.[u]?.url;e&&URL.revokeObjectURL(e);let n=URL.createObjectURL(new Blob([o]));l[u]={url:n,version:r,error:null},p(n)}},o=!!l?.[u],m=o&&l[u].version!==r,h=o&&!!l[u].error;o&&(!m||h)||a().catch(e=>{l[u]={error:e},console.error(e)})},[e,c,d,n,u,r]),m)?{url:m,backgroundStyle:h}:{backgroundStyle:h}}},444736:(e,r,n)=>{n.d(r,{$R:()=>f,aT:()=>y,yP:()=>g});var a=n(411855),i=n(188507),o=n(299321),s=n(939863);n(393812);var l=n(945099),c=n(92597),d=n(618056),u=n(29680),m=n(335682),p=n(279702),h=n(297281),_=n(239349);function g({pxWidth:e,pxHeight:r,dataTestId:n}){let{unit:i}=(0,c.gc)(),s=(0,l.sQ)()&&i===o.tKW.SCALED,d=e=>(e??0).toLocaleString("en",{maximumFractionDigits:2}),u=d(e),m=d(r),p=a.createElement("span",{"data-testid":`${n}Width`},u),h=a.createElement("span",{"data-testid":`${n}Height`},m);return a.createElement(a.Fragment,null,p,"\u2009x\u2009",h,a.createElement("span",{"data-testid":`${n}Unit`},s?" (px)":""))}function f({assetInfo:e,media:r,dataTestId:n,shouldShowTypeLabel:i,hideDot:o}){let s=(0,_.mJ)(e.instancesGUIDs?.[0]??e.assetId),l=s?.size?.x??0,c=s?.size?.y??0;if(r&&r.length>0){let e=r[0];l=e.width,c=e.height}return a.createElement(E,{assetType:e.type,pxWidth:l,pxHeight:c,dataTestId:n,hideDot:o,shouldShowTypeLabel:i})}function E({assetType:e,pxWidth:r,pxHeight:n,dataTestId:i,hideDot:o,shouldShowTypeLabel:l}){let c=e&p.PW.ASSET_VIDEO?(0,s.t)("dev_handoff.assets.video"):e&p.PW.ASSET_GIF?(0,s.t)("dev_handoff.assets.gif"):e&p.PW.ASSET_IMAGE?(0,s.t)("dev_handoff.assets.image"):e&p.PW.ASSET_ICON?(0,s.t)("dev_handoff.assets.icon"):e&p.PW.ASSET_COMPONENT?(0,s.t)("dev_handoff.assets.instance"):void 0;return a.createElement("span",null,l&&c,!o&&a.createElement(a.Fragment,null,"\xa0","\xb7 "),a.createElement(g,{pxWidth:r,pxHeight:n,dataTestId:i}))}function y(e){let r=(0,i.d4)(m.sS),n=(0,u.eY)(),[o,s]=a.useState(null);if(o)return o;if(!(e.type&(p.PW.ASSET_GIF|p.PW.ASSET_VIDEO)))return null;let l=n.get(e.assetId);if(!l)return null;let c=d.N9(l?.fills)?.filter(e=>e.opacity>0&&e.visible);if(!c)return null;for(let e of c)if(e.animatedImage||e.video){if(!r)return null;(0,h.tW)({paint:e,fileKey:r}).then(e=>{s(e)});break}return o}},275725:(e,r,n)=>{n.d(r,{c6:()=>g});var a=n(411855),i=n(188507),o=n(299321),s=n(776250),l=n(344780),c=n(568214),d=n(168039),u=n(416095),m=n(284321),p=n(49116),h=n(173454),_=n(32067);function g(e){let r=function(e,r){let n=function(e){let r=(0,_.jY)(),n=(0,i.d4)(m.FZ),a=(0,i.d4)(p.c5);return(0,u.NY)(e,r,n,a)}(e),g=(0,d.DP)(),f=n?.containing_frame?.backgroundColor??"";return n?.type===h.PW.STATE_GROUP&&n.fill_color&&(f=n.fill_color),a.useCallback(()=>{let r=g&&("light"===g||"dark"===g)?g:"dark";if(!e)return f&&!(0,c.ty)(f)?(0,c.HD)(f)?"dark":"light":r;l.sn.start("dev_mode_calculate_component_color");let n=o.w3z.getApproximateNodeColor(e),a=l.sn.stop("dev_mode_calculate_component_color");return a&&(0,s.sx)("dev_mode_calculate_component_color",{elapsedMs:a},{forwardToDatadog:!0}),(0,c.HD)(n)?"light":"dark"},[f,e,void 0,g])}(e);return"dark"===(0,a.useMemo)(r,[r])?f:E}let f={background:"#383838"},E={background:"#f5f5f5"}},666930:(e,r,n)=>{n.d(r,{Bv:()=>_,wS:()=>h,x9:()=>g});var a=n(411855);n(188507),n(388393);var i=n(299321);n(880934);var o=n(904669);n(752553),n(939863);var s=n(44892);n(848661);var l=n(29680);n(335682);var c=n(540019),d=n(656012),u=n(273226);n(510879);var m=n(107244);n(958317),n(835808),n(731262),n(239349),c.M4.Query({fetch:async({componentKey:e})=>{try{let r=await d.Z.getLibraryComponentV2Destination({componentKey:e});if(!r||!r.data||!r.data.meta)return null;return{nodeId:r.data.meta.node_id,fileKey:r.data.meta.file_key,component:r.data.meta.component,componentSet:r.data.meta.component_set}}catch(e){return null}},enabled:e=>e.enabled}),c.M4.Query({fetch:async({statusResult:e})=>{if(!e||!e.componentKey||!e.canvasUrl)return{};let r=e.isVariant?e.dataStateGroupId:e.dataComponentId,n=e.dataStateGroupId??null,a=e.dataStorageKey,o=await s.Eo.getCanvas({canvas_url:e.canvasUrl});if(!o)return{};let l=i.glU.loadDetachedComponent(r??"",a,o,n);return l?{result:{...e,dataLocation:"temp-scene",dataComponentId:l}}:{}},enabled:e=>e.enabled});let p=a.createContext({status:"loading"});function h(){return a.useContext(p)||{status:"errors"}}function _(e,r){let n=h(),a=(0,l.eY)();if("loaded"===n.status){let e="temp-scene"===n.result.dataLocation,r=n.result.dataComponentId??"",i=e?n.result.dataStateGroupId:(0,u.Yi)([r],a)??(0,m.nM)(a,[r]),o=e?g(r):a.get(r);return n.result.isVariant&&i?{backingSymbol:o,backingStateGroup:e?g(i):a.get(i)}:{backingSymbol:o,backingStateGroup:null}}return{backingSymbol:e,backingStateGroup:r}}function g(e){return new o.qo(i.juq.DETACHED_COMPONENTS).get(e)}},187796:(e,r,n)=>{n.d(r,{$G:()=>_,Cs:()=>g,I9:()=>f,Ud:()=>E,oz:()=>p}),n(411855),n(188507);var a=n(943632),i=n(299321);n(704513);var o=n(794272),s=n(939863),l=n(848661);n(618056),n(335682);var c=n(998905),d=n(239349);function u(e){return(0,l.gl)(e)?0:e??0}function m(e){return"NONE"!==e&&"GRID"!==e}function p(e){return m(e.stackMode)||!!e.inferredAutoLayoutResult&&m(e.inferredAutoLayoutResult.stackMode)}function h(e,r,n){return m(e.stackMode)?e[r]:e.inferredAutoLayoutResult?.[n]}function _(e){let r;let{selectionProperties:n,sceneGraph:a,sceneGraphSelection:i}=(0,o.R)(e=>({selectionProperties:e.mirror.selectionProperties,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection}));if(e)return{distance:{top:{distance:0,type:"distance"},bottom:{distance:0,type:"distance"},left:{distance:0,type:"distance"},right:{distance:0,type:"distance"}},border:{top:0,bottom:0,left:0,right:0},radius:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},padding:{top:0,bottom:0,left:0,right:0},width:0,height:0};let s=(0,d.Zl)(a,(0,d.RJ)(i)),m=s?.parentNode||null,_=function(e){let r=e?.borderStrokeWeightsIndependent;if((0,l.hS)(r)&&r){let{borderTopVisible:r,borderBottomVisible:n,borderLeftVisible:a,borderRightVisible:i,borderTopWeight:o,borderBottomWeight:s,borderLeftWeight:l,borderRightWeight:c}=e;return{top:r?u(o):0,bottom:n?u(s):0,left:a?u(l):0,right:i?u(c):0}}let n=e?.strokePaints;if((0,l.hS)(n)&&Array.isArray(n)&&n.length>0){let r=(n?.filter(e=>e?.visible&&(e?.opacity??0>0))||[]).length>0?u(e?.strokeWeight):0;return{top:r,bottom:r,left:r,right:r}}return{top:0,bottom:0,left:0,right:0}}(n),g=(0,c.AF)(n),f={topLeft:u(g.topLeft),topRight:u(g.topRight),bottomRight:u(g.bottomRight),bottomLeft:u(g.bottomLeft)},E=p(n);r=E?{top:u(h(n,"stackVerticalPadding","stackPaddingTop")),bottom:u(h(n,"stackPaddingBottom","stackPaddingBottom")),left:u(h(n,"stackHorizontalPadding","stackPaddingLeft")),right:u(h(n,"stackPaddingRight","stackPaddingRight"))}:{top:0,bottom:0,left:0,right:0};let y=E&&n.bordersTakeSpace?{top:r.top+_.top,bottom:r.bottom+_.bottom,left:r.left+_.left,right:r.right+_.right}:{...r},b=u(n.width)-y.left-y.right,I=u(n.height)-y.top-y.bottom;return{distance:m&&("HORIZONTAL"===m.stackMode||"VERTICAL"===m.stackMode)&&s?.stackPositioning!=="ABSOLUTE"?function(e,r){if(!e||!r||"NONE"===r.stackMode||"GRID"===r.stackMode)return{};let n=r.childrenNodes.filter(e=>e?.stackPositioning!=="ABSOLUTE").map(e=>e?.guid),a=n.indexOf(e.guid),i=0===a,o=a===n.length-1;return"HORIZONTAL"===r.stackMode?{top:{distance:r.stackTopPadding,type:"padding"},bottom:{distance:r.stackBottomPadding,type:"padding"},left:i?{distance:r.stackLeftPadding,type:"padding"}:{distance:r.stackSpacing,type:"spacing"},right:o?{distance:r.stackRightPadding,type:"padding"}:{distance:r.stackSpacing,type:"spacing"}}:{top:i?{distance:r.stackTopPadding,type:"padding"}:{distance:r.stackSpacing,type:"spacing"},bottom:o?{distance:r.stackBottomPadding,type:"padding"}:{distance:r.stackSpacing,type:"spacing"},left:{distance:r.stackLeftPadding,type:"padding"},right:{distance:r.stackRightPadding,type:"padding"}}}(s,m):function(e,r){if(!e||!r||"CANVAS"===r.type||"DOCUMENT"===r.type||"SECTION"===r.type)return{};let n=r.absoluteBoundingBox.w,a=r.absoluteBoundingBox.h,i=r.absoluteBoundingBox.y,o=r.absoluteBoundingBox.x,s=e.absoluteBoundingBox.w,l=e.absoluteBoundingBox.h,c=e.absoluteBoundingBox.y,d=e.absoluteBoundingBox.x;return{top:{distance:c-i,type:"distance"},bottom:{distance:i+a-(l+c),type:"distance"},left:{distance:d-o,type:"distance"},right:{distance:n+o-(d+s),type:"distance"}}}(s,m),border:_,radius:f,padding:r,width:b,height:I}}let g=(e="NONE")=>"HORIZONTAL"===e||"VERTICAL"===e;function f(e=0,r,n){if(!n||(0,l.gl)(r))return e;let a={[i.mKm.FILL_CONTAINER]:(0,s.t)("inspect_panel.properties.fill"),[i.mKm.HUG_CONTENT]:(0,s.t)("inspect_panel.properties.hug"),[i.mKm.FIXED]:(0,s.t)("inspect_panel.properties.fixed")}[r||i.mKm.FIXED],o=(e||0).toLocaleString("en",{maximumFractionDigits:2});return`${a} (${o}px)`}function E(...e){let[r=0,n=0,i=0,o=0]=e;return(0,a.Ef)(e)?0!==r?[r]:void 0:[r,n,i,o]}},843245:(e,r,n)=>{n.d(r,{M4:()=>d,lA:()=>c});var a=n(188507);n(299321),n(29680);var i=n(234945),o=n(32067),s=n(666930),l=n(239349);function c(){let e=(0,o.jY)(),r=(0,s.wS)(),n=(0,a.d4)(e=>e.mirror.selectionProperties.symbolGUIDsBackingSelectionContainer),i=(0,a.d4)(e=>e.mirror.selectionProperties.numSelected);if("loaded"===r.status&&r.result.dataComponentId)return"temp-scene"===r.result.dataLocation&&r.result.componentKey?(0,s.x9)(r.result.dataComponentId):(0,l.Zl)(e,r.result.dataComponentId);if(1!==i||!n)return null;let c=Object.keys(n)[0];return(0,l.Zl)(e,c)}function d(){let e=(0,o.jY)(),r=(0,s.wS)();return function e(r,n,a){let i=(0,l.Zl)(r,n);return i?"SYMBOL"===i.type||"INSTANCE"===i.type||i.isStateGroup||i.detachedInfo?i:i.parentGuid?e(r,i.parentGuid):null:null}(e,(0,a.d4)(i.$J),r)}},470669:(e,r,n)=>{n.d(r,{V0:()=>I,ls:()=>T});var a=n(411855),i=n(109388),o=n(188507),s=n(939863),l=n(308977);n(979385);var c=n(256975),d=n(544818),u=n(225266),m=n(738269),p=n(318812),h=n(694687),_=n(376485),g=n(498606),f=n(978527),E=n(728587),y=n(538697),b=n(193519);function I({codeLanguage:e,onChange:r,shouldHideLanguagesWithNoAltUnitSupport:n,onlyShowFirstPartyLanguages:a,showAddInsteadOfBrowse:i,addCodegenPluginCallback:s,currentSavedCodeLanguage:c}){let u=(0,l.AC)(e),m=(0,l.Pt)(u),p=(0,h.sZ)(),g=(0,o.d4)(e=>e.whitelistedPlugins),f=(0,_.ow)(u,g,p)?e:{type:"first-party",id:"WEB"},E=(0,d.Z)({codeLanguage:f,onChange:r,shouldHideLanguagesWithNoAltUnitSupport:n,onlyShowFirstPartyLanguages:a,formatter:m,showAddInsteadOfBrowse:i,addCodegenPluginCallback:s,currentSavedCodeLanguage:c});return{codeLanguage:f,onCodeLanguageChange:r,codeLanguageOptions:E,activeCodegenPlugin:u,formatter:m}}function T({dropdownId:e,disabled:r,codeLanguageApi:n,onDropdownHidden:l,parentElementId:d}){let h=(0,c._I)(),{codeLanguage:_,activeCodegenPlugin:I,formatter:T,codeLanguageOptions:v}=n,S=I&&"first-party"!==_.type?a.createElement(f.d,{plugin:I}):null,w=(0,o.wA)();a.useEffect(()=>w(u.aq()),[w]);let A=(0,p.Um)(),N=a.useRef(null),C=A?.type===e;return a.createElement("div",{className:b.aD,"data-tooltip":(0,s.t)("dev_handoff.code.language"),"data-tooltip-type":g.Ib.TEXT,"data-tooltip-show-above":!0},a.createElement("div",{className:b.lj},a.createElement(y.uQ,{formatter:T,property:_,icon:S,onClick:()=>{C?w(m.oB()):h&&w(m.j7({type:e}))},inputClassName:b.UD,ref:N,dataTestId:"code_language_dropdown",isDisabled:r})),C&&!r&&N.current&&(0,i.createPortal)(a.createElement("div",{className:b.aD},a.createElement(E.j,{items:v,onSelectItem:e=>{e.callback&&e.callback("",null,w)},dispatch:w,parentRect:N.current.getBoundingClientRect(),showPoint:!1,lean:"right",leanPadding:8,alwaysShowCheckMarkOffset:!0,onDropdownHidden:l,activatePathOnMount:"local-plugin"!==_.type?[T.format(_)]:[v[0].displayText]})),document.getElementById(d||"dev-handoff-inspect-panel")))}},945099:(e,r,n)=>{n.d(r,{$h:()=>c,Ar:()=>u,a9:()=>l,hq:()=>s,sQ:()=>d});var a=n(374626),i=n(939863),o=n(594901);let s=(0,a.E3)("dev-mode-code-or-properties","code"),l=new class{format(e){switch(e){case"code":return(0,i.t)("inspect_panel.code.code");case"properties":return(0,i.t)("fullscreen.properties_panel.properties")}}};function c(){return(0,a.fp)(s)}function d(){return"code"===(0,a.md)(s)}function u(){return(0,o.AF)()?["code","properties"]:["properties"]}},426299:(e,r,n)=>{n.d(r,{n2:()=>C});var a=n(411855),i=n(109388),o=n(188507),s=n(196367),l=n(602354),c=n(221768),d=n(243742),u=n(299321),m=n(860601),p=n(153234),h=n(939863),_=n(591494),g=n(256975),f=n(470669),E=n(945099),y=n(738269),b=n(226055),I=n(779709),T=n(318812),v=n(498606),S=n(728587),w=n(788612),A=n(538697);n(581250);var N=n(682113);function C({dropdownPrefix:e,inspectionModeLayout:r="drop-down",preferencesApi:n,parentElementId:l}){let p=(0,g._I)(),_=e?`${e}_DEV_HANDOFF_PREFERENCES_DROPDOWN`:"DEV_HANDOFF_PREFERENCES_DROPDOWN",b=e?`${e}_DEV_HANDOFF_LANGUAGE_DROPDOWN`:"DEV_HANDOFF_LANGUAGE_DROPDOWN",C=(0,o.wA)(),{inspectionMode:O,setInspectionMode:R,inspectionModes:P,supportsAlternativeUnits:D,preferenceOptions:k,preferences:M,codeLanguageApi:F}=n,x=(0,T.Um)(),U=a.useRef(null),B=x?.type===_,V=I.z4.getIsExtension(),G=P.includes("code")&&void 0!==k&&void 0!==M&&void 0!==F,H=(V||"code"===O)&&G,W=a.useMemo(()=>P.map(e=>a.createElement(A.c$,{key:e,value:e})),[P]),K="ui3"===(0,d.DP)().version;return a.createElement(a.Fragment,null,a.createElement(w.VZ,{hideHeader:!0,noPadding:!0,noBorder:!0,recordingKey:"preferences"},a.createElement("div",{className:N.NR},!V&&("drop-down"===r?a.createElement(A.l6,{id:`${e}_dev_handoff_inspection_mode`,property:O,formatter:E.a9,onChange:R,dispatch:C,dropdownShown:x,className:N.VM,dropdownWidth:K?"120px":"auto",onShowDropdownOverride:p?void 0:m.lQ},W):a.createElement(L,{onTabClick:R,selectedTabKey:O,tabs:P.map(e=>({key:e,label:E.a9.format(e)})),recordingKey:"preferences-tabs"})),G&&a.createElement("div",{className:N.d2},H&&a.createElement(f.ls,{dropdownId:b,codeLanguageApi:F,parentElementId:l}),a.createElement("div",{ref:U},a.createElement(s.d,{onClick:()=>{B?C(y.oB()):p&&C(y.j7({type:_}))},"aria-label":(0,h.t)("dev_handoff.inspect_settings"),toggled:B,disabled:!H||0===k.length,recordingKey:"preferencesDropdownButton",htmlAttributes:{"data-tooltip":(0,h.t)("dev_handoff.inspect_settings"),"data-tooltip-type":v.Ib.TEXT,"data-tooltip-show-above":!0}},a.createElement(c.A,null)))))),B&&G&&U.current&&(0,i.createPortal)(a.createElement(S.j,{items:k,onSelectItem:e=>{e.callback&&e.callback("",null,C)},recordingKey:"preferencesDropdown",dispatch:C,parentRect:U.current.getBoundingClientRect(),showPoint:!1,alwaysShowCheckMarkOffset:!0,activatePathOnMount:D?M.unit===u.tKW.PIXEL?[k[1].displayText]:[k[2].displayText]:void 0}),document.getElementById(l||"dev-handoff-inspect-panel")))}function L({tabs:e,onTabClick:r,selectedTabKey:n,recordingKey:i}){let o=(0,b.GS)(),s=e.reduce((e,r)=>(e[r.key]=!0,e),{}),[c,d]=l.tU.useManagedTabs(s,n,r,{recordingKey:"devHandoffPanelTabs"});return a.createElement("div",{className:N.rb},o?a.createElement(l.tU.TabStrip,{manager:d},e.map(e=>a.createElement(l.tU.Tab,{key:e.key,...c[e.key]},e.label))):e.map(o=>a.createElement(_.JW,{key:o.key,text:o.label,isActive:n===o.key,onClick:()=>r(o.key),recordingKey:p.Pt(i,o.key)||"",isSingle:1===e.length})))}},909999:(e,r,n)=>{n.d(r,{j6:()=>L});var a=n(411855),i=n(188507),o=n(862350),s=n(951792),l=n(288006),c=n(140686),d=n(256296),u=n(368832),m=n(860601),p=n(939863),h=n(308977),_=n(470669),g=n(92597),f=n(973149),E=n(318812),y=n(237870),b=n(205135),I=n(538697),T=n(893606),v=n(879717);let S=new f.KD({min:.1}),w=[3,2,1,.5,1/3],A=new class{parse(e){return"1/3"===e?3:"1/2"===e?2:"2"===e||"3"===e?1/Number.parseInt(e):1}format(e=1){return"0.3"===e.toFixed(1)?"3":"0.5"===e.toFixed(1)?"2":2===e||3===e?`1/${e}`:(0,p.t)("dev_handoff.alternative_units.no_scale")}};function N({scaleFactor:e,onChange:r,onDropdownHidden:n,className:o,inputClassName:s,autoFocus:l}){let c=(0,i.wA)(),d=(0,E.Um)(),u=(0,T.R)();return a.createElement(I.l6,{dispatch:c,property:e,id:"SCALE_FACTOR",onChange:r,formatter:A,dropdownShown:d,className:o,inputClassName:s,dropdownWidth:u?"120px":"auto",autoFocus:l,onDropdownHidden:n},w.map(r=>a.createElement(I.c$,{key:r,value:r,selected:r===e,fullWidth:!0})))}function C({codeLanguage:e}){let r=(0,g.$s)(e);switch(e.id){case h.p:case h.Ap:return(0,p.tx)("dev_handoff.alternative_units.description_scale_factor_ios");case h.LK:case h.NU:return(0,p.tx)("dev_handoff.alternative_units.description_scale_factor_android");case h.uz:return(0,p.tx)("dev_handoff.alternative_units.description_scale_factor_web")}return(0,p.tx)("dev_handoff.alternative_units.description_scale_factor_third_party",{unitName:r})}let L=(0,y.Ju)(function(e){let r=(0,h.v4)(),[n,i]=a.useState(r),f=(0,g.aq)(n),E=(0,g.gc)(n.id),y=(0,g.Bs)(),I=(0,T.R)(),w=o.hS(e),A=a.useCallback(e=>{e&&y(n,f,{scaleFactor:e})},[n,y,f]),L="first-party"===n.type&&(n.id===h.LK||n.id===h.NU||n.id===h.p||n.id===h.Ap),O="first-party"===n.type&&(n.id===h.uz||n.id===h.A0),R=(0,u.A)(()=>{O&&y(n,f,{customSettings:{onlyText:"true"===(E.customSettings?.onlyText||"false")?"false":"true"}})},250),P=E?.scaleFactor??1,D=(0,_.V0)({onChange:i,codeLanguage:n,shouldHideLanguagesWithNoAltUnitSupport:!0});return a.createElement(s.bL,{manager:w,width:"md"},a.createElement(l.vo,null,a.createElement(l.Y9,null,a.createElement(l.hE,null,(0,p.t)("dev_handoff.alternative_units.unit_settings_modal_title")),a.createElement(l.jk,null,a.createElement(_.ls,{dropdownId:"DEV_HANDOFF_MODAL_CODE_LANGUAGE_DROPDOWN",codeLanguageApi:D}))),a.createElement(l.nB,null,L?a.createElement("div",{className:v.iF},a.createElement(N,{scaleFactor:P,onChange:A,onDropdownHidden:m.lQ,className:v.j8,autoFocus:!0}),a.createElement("div",{className:v.rc})):a.createElement("div",{className:v.hq},a.createElement(b.Q7,{className:v.IC,property:P,formatter:S,onChange:A,autoFocus:!0})),a.createElement("div",{className:v.A3},a.createElement(C,{codeLanguage:n})),O&&(I?a.createElement(c.S,{checked:E.customSettings?.onlyText==="true",label:a.createElement(d.J,null,(0,p.tx)("dev_handoff.alternative_units.only_apply_rem_on_text",{rem:a.createElement("span",{className:v.D0},(0,p.tx)("dev_handoff.alternative_units.rem_unit"))})),onChange:R}):a.createElement("div",{className:v.sM},a.createElement(c.S,{checked:E.customSettings?.onlyText==="true",label:a.createElement(d.J,null,(0,p.tx)("dev_handoff.alternative_units.only_apply_rem_on_text",{rem:a.createElement("span",{className:v.D0},(0,p.tx)("dev_handoff.alternative_units.rem_unit"))})),onChange:R}))))))},"SCALE_FACTOR_MODAL")},92597:(e,r,n)=>{n.d(r,{$s:()=>w,Bs:()=>I,Em:()=>v,SF:()=>L,aq:()=>T,b1:()=>A,gc:()=>y,lX:()=>b,wA:()=>C,wQ:()=>N});var a=n(411855),i=n(188507),o=n(299321),s=n(212046),l=n.n(s),c=n(38329),d=n(939683),u=n(939863),m=n(308977),p=n(370934),h=n(756085);n(779709);var _=n(960628),g=n(376485),f=n(638311);let E={scaledWeb:"rem",scaledIOS:"pt",scaledAndroid:"dp",pixel:"px"};function y(e){let r=(0,m.v4)().id,n=(0,i.d4)(e=>e.mirror.appModel.devHandoffPreferences),o=e??r;return(0,a.useMemo)(()=>n.codeExtensionPreferences?.[o]??{},[n,o])}function b(){let e=c.D.getState()?.mirror?.appModel,r=e?.devHandoffCodeLanguage?.id??"";return e?.devHandoffPreferences?.codeExtensionPreferences?.[r]??{}}function I(){let e=(0,i.d4)(e=>e.mirror.appModel.devHandoffPreferences),r=(0,d.U)();return(0,a.useCallback)((n,a,i)=>{let{customSettings:s,...c}=i;l()(c)||(void 0!==c.unit&&(c.unit=c.unit===o.tKW.PIXEL?E.pixel:S(n,a)),r("Dev Mode Preference Changed",{languageType:n.type,languageId:n.id,...c})),(0,p.D8)(e,n,i)},[e,r])}function T(e){let{id:r,type:n}=e;return(0,h.S0)(r,{searchLocalPlugins:"local-plugin"===n,searchPublishedPlugins:"published-plugin"===n})}function v(e){let r=(0,m.v4)(),n=T(e??r);return(0,p.ZA)(e??r,n)}function S(e,r){let{id:n,type:a,pluginLanguage:i}=e;if("first-party"!==a&&r){let e=(0,f.X)(r,i),n=(0,p.K6)(r,e);if(n)return n.scaledUnit}switch(n){case m.uz:return E.scaledWeb;case m.p:case m.Ap:return E.scaledIOS;case m.LK:case m.NU:return E.scaledAndroid;default:return E.scaledWeb}}function w(e){let r=T(e);return S(e,r)}function A(e){switch(e){case m.uz:return(0,u.t)("dev_handoff.alternative_units.rem_unit");case m.LK:case m.NU:return(0,u.t)("dev_handoff.alternative_units.dp_unit");case m.p:case m.Ap:return(0,u.t)("dev_handoff.alternative_units.pt_unit");default:return(0,u.t)("dev_handoff.alternative_units.rem_unit")}}function N(e){let r=(0,m.v4)();return C(e??r)}function C(e){let r=w(e);return"first-party"===e.type?A(e.id):r}function L({localCodeLanguage:e,includeActions:r=!0,includeSelectSettings:n=!0}={}){let i=(0,m.v4)(),o=e??i,s=(0,m.AC)(o),l=y(o.id),c=I();return a.useMemo(()=>(function({includeActions:e=!1,includeSelectSettings:r=!0,codeLanguage:n,plugin:a,codeExtensionPreferences:i,onChangePreferences:o}){let s=[];if(!a||"first-party"===n.type||(0,p.GL)(a)!==n.id)return s;for(let l of(0,p.zZ)(a,(0,f.X)(a,n.pluginLanguage)))e&&(0,g.Wt)(l)&&s.push({name:l.propertyName,displayText:l?.label||l.propertyName,callback:()=>_.d1.codegenPreferencesChange({propertyName:l.propertyName}),recordingKey:l.propertyName}),r&&(0,g.ZV)(l)&&s.push({name:l.propertyName,recordingKey:l.propertyName,displayText:l?.label??l.propertyName,children:l.options.map((e,r)=>({name:e.value,displayText:e.label,isChecked:i?.customSettings?.[l.propertyName]?i?.customSettings?.[l.propertyName]===e.value:0===r,callback:()=>o(n,a,{customSettings:{...i?.customSettings,[l.propertyName]:e.value}}),recordingKey:e.value}))});return s})({includeActions:r,includeSelectSettings:n,codeLanguage:o,plugin:s,codeExtensionPreferences:l,onChangePreferences:c}),[r,n,o,s,l,c])}},581250:(e,r,n)=>{n.d(r,{Q:()=>d});var a=n(308977),i=n(979385),o=n(470669),s=n(945099),l=n(92597),c=n(621856);function d(){let[e,r]=(0,s.$h)(),n=(0,l.Em)(),d=(0,c.q)(),u=(0,l.gc)(),m=(0,a.v4)(),p=(0,i.gB)(),h=(0,o.V0)({codeLanguage:m,onChange:p}),_=(0,s.Ar)();return{inspectionMode:_.find(r=>r===e)||_[0],setInspectionMode:r,supportsAlternativeUnits:n,preferenceOptions:d,preferences:u,codeLanguageApi:h,inspectionModes:_}}},621856:(e,r,n)=>{n.d(r,{q:()=>h});var a=n(411855),i=n(188507),o=n(299321),s=n(939863),l=n(308977),c=n(370934),d=n(909999),u=n(92597),m=n(662275),p=n(656399);function h(e){let r=(0,u.SF)(),n=function(e){let r=(0,l.v4)(),n=e??r,p=(0,l.AC)(n),h=(0,u.wQ)(n),_=(0,u.Em)(n),g=(0,u.gc)(n.id),f=(0,u.Bs)(),E=(0,i.wA)();return a.useMemo(()=>{let e=[];if(!_)return e;let r=g?.unit||o.tKW.PIXEL;return e.push({displayText:(0,s.t)("dev_handoff.alternative_units.dimension_unit"),header:!0},...c.zq.map(e=>{let a=e===o.tKW.PIXEL?(0,s.t)("dev_handoff.alternative_units.pixel_unit"):h;return{name:e.toString(),displayText:a,isChecked:r===e,callback:()=>f(n,p,{unit:e}),recordingKey:e===o.tKW.PIXEL?"pixel":"scaled"}}),{displayText:(0,s.t)("dev_handoff.alternative_units.unit_settings_menu_option"),callback:()=>E((0,m.to)({type:d.j6})),recordingKey:"setScaleFactor"}),e},[_,g?.unit,h,f,n,p,E])}(e),{updateDefaultCodegenSettings:h,isSetToDefault:_}=(0,p.Q)();return a.useMemo(()=>{let e=[];return n.length>0&&e.push(...n),r.length>0&&e.length>0&&e.push({displayText:"",separator:!0}),e.push(...r),e.length>0&&e.push({separator:!0,displayText:""}),e.push({displayText:(0,s.t)("dev_handoff.code.settings.set_as_default"),callback:()=>{h()},isChecked:_}),e},[r,_,n,h])}},208186:(e,r,n)=>{n.d(r,{Co:()=>P,Iy:()=>N,Me:()=>O,SD:()=>A,TU:()=>S,WV:()=>R});var a=n(414507),i=n(880934),o=n(640783),s=n(38329),l=n(827697),c=n(776621),d=n(96328),u=n(743282),m=n(27087),p=n(330654),h=n(988022),_=n(985945),g=n(416095),f=n(540019),E=n(173454),y=n(754168),b=n(882698),I=n(273226);let T=p.object({id:p.string(),node_id:p.string(),file_key:p.string(),link_name:p.string(),link_url:p.string(),is_user_override:p.boolean(),link_preview_json:p.any()}),v=p.object({meta:p.array(T)});async function S({fileKey:e,nodeId:r,includeInheritedLinks:n}){let a=(await y.S.getRelatedLinks({nodeId:r,fileKey:e})).data,i=v.safeParse(a);if(!i.success)throw Error("Invalid response from server");let o=i.data.meta.map(e=>({id:e.id,nodeId:e.node_id,linkName:e.link_name,linkUrl:e.link_url,fileKey:e.file_key,isUserOverride:!!e.is_user_override,linkPreviewJson:e.link_preview_json}));if(!n)return o;let l=s.D.getState().mirror.sceneGraph,c=(0,I.k4)([r],l),d=(0,I.Yi)([r],l),u=await w(e,c),m=await w(e,d);return[...o,...u.map(e=>({...e,nodeId:r,mainComponentId:c})),...m.map(e=>({...e,nodeId:r,mainComponentId:d}))]}async function w(e,r){let n=s.D.getState().mirror.sceneGraph;if(!r)return[];let a=n.get(r);if(!a)return[];let{publishID:o}=a,l=i.fn(i.sH(o)),c=a.sourceLibraryKey,d=(await f.M4.fetch(_.Cs.LibrariesByLibraryKeysQuery({libraryKeys:[c],subscriptionFileKey:s.D.getState().openFile?.key??null,orgId:s.D.getState().currentUserOrgId})))[0],u=null;return d&&((0,E.ZA)(d)&&(0,E.xA)(d)?u=d.hub_file_id:"library_file_key"in d&&(u=d.library_file_key)),await S({fileKey:u??e,nodeId:l?o??"":r,includeInheritedLinks:!1})}async function A(e){let r=new Set([e]),n=new Map,a=new Map,o=s.D.getState().mirror.sceneGraph,l=(s,l)=>{if(!l)return;let c=o.get(l);if(!c)return;let{publishID:d,guid:u}=c,m=(0,g.yW)(c);if(!m||!d||!i.fn(i.sH(d))||m===e){n.set(u,s),a.set(u,l);return}n.set(d,s),a.set(d,l),r.add(m)},c=o.get("0:0")?.findAllWithCriteria({types:["INSTANCE"]}).map(([e])=>e);c&&c.length>0&&c.forEach(e=>{let r=o.get(e);if(!r||"INSTANCE"!==r.type)return;l(e,r.symbolId);let n=(0,I.Yi)([e],o);l(e,n)});let d=await m.Ay.post("/api/files/related_links",{file_keys:Array.from(r.values())}),u=[];return d.data.meta.forEach(r=>{let i=e===r.file_key&&!!o.get(o.guidFromDeveloperFriendlyId(r.node_id)),s={id:r.id,linkName:r.link_name,linkUrl:r.link_url,fileKey:r.file_key,isUserOverride:!!r.is_user_override,linkPreviewJson:r.link_preview_json};i&&u.push({...s,nodeId:r.node_id,mainComponentId:void 0}),n.has(r.node_id)&&u.push({...s,nodeId:n.get(r.node_id),mainComponentId:a.get(r.node_id)})}),u}async function N({fileKey:e,nodeId:r,url:n,name:a,nodeType:i,pluginId:o,source:s}){if((await S({fileKey:e??"",nodeId:r??""})).find(e=>e.linkUrl===n))throw Error(`Link already exists on node ${r} with url ${n}`);return L({fileKey:e,nodeId:r,url:n,name:a,nodeType:i,pluginId:o,source:s})}async function C(e){let r;try{let n=await b.E.getLinkMetadata({text:e}),a=n?.data?.meta;a?.title&&(r=decodeURIComponent(a?.title))}catch(e){}finally{if(!r){let n=(0,o.Gw)(e);r=n?(0,d.Zr)(n):"N/A"}}return r}async function L({url:e,nodeId:r,fileKey:n,name:a,onPost:i,nodeType:c,pluginId:d,source:p}){let _="";if(a)_=a;else{let r=(0,o.FB)(e);if(r?.toLowerCase()==="github.com")_="Github";else if(r?.toLowerCase()==="jira.com"||r?.toLowerCase()==="atlassian.net"){_="Jira";let r=function(e){for(let r of M){let n=e.match(r);if(n?.[1])return n[1]}return null}(e);r&&(_=`Issue ${r}`)}else _=await C(e)}let g={node_id:r??"",link_name:_,link_url:e},f=m.Ay.post(`/api/files/${n}/related_links`,g);return i&&i(),l.WB()?.optimisticallyCreate({DeveloperRelatedLink:{[`optimistic-link-${u.g()}`]:{nodeId:r??"",fileKey:n??"",linkName:_,linkUrl:e,isUserOverride:!1,linkPreviewJson:null}}},f),f.then(e=>((0,h.ds)("Dev Handoff Related Links Added New Link Success",n,s.D.getState(),{nodeId:r,nodeType:c,source:p,pluginId:d}),e))}async function O({fileKey:e,nodeId:r,currentUrl:n,newValue:a,nodeType:i,pluginId:o,source:c}){let d=(await S({fileKey:e,nodeId:r})).find(e=>e.linkUrl===n);return d||k({nodeId:r,url:n}),function({fileKey:e,nodeId:r,linkId:n,name:a,url:i,isUserOverride:o,clearLinkPreview:c,nodeType:d,pluginId:u,source:p}){let _={node_id:r,link_id:n,new_link_name:a,new_link_url:i};void 0!==o&&(_.is_user_override=o),c&&(_.link_preview_json=null);let g=m.Ay.put(`/api/files/${e}/related_links`,_);return l.WB()?.optimisticallyUpdate({DeveloperRelatedLink:{[n]:{linkName:a,linkUrl:i,isUserOverride:o,linkPreviewJson:c?"":void 0}}},g),g.then(n=>((0,h.ds)("Dev Handoff Related Links Edit Link Success",e,s.D.getState(),{nodeId:r,nodeType:d,source:p,pluginId:u}),n))}({fileKey:e,nodeId:r,linkId:d.id,name:a.name||d.linkName,url:a.url||d.linkUrl,isUserOverride:!1,clearLinkPreview:!0,nodeType:i,pluginId:o,source:c})}async function R({fileKey:e,nodeId:r,url:n,nodeType:a,pluginId:i,source:o}){let c=(await S({fileKey:e,nodeId:r})).find(e=>e.linkUrl===n);return c||k({nodeId:r,url:n}),function({fileKey:e,nodeId:r,linkId:n,nodeType:a,pluginId:i,source:o}){let c=m.Ay.del(`/api/files/${e}/related_links`,{node_id:r,link_id:n});return l.WB()?.optimisticallyDelete({DeveloperRelatedLink:{[n]:null}},c),c.then(n=>((0,h.ds)("Dev Handoff Related Links Delete Link Success",e,s.D.getState(),{nodeId:r,nodeType:a,source:o,pluginId:i}),n))}({fileKey:e,nodeId:r,linkId:c.id,nodeType:a,pluginId:i,source:o})}async function P({fileKey:e,nodeId:r,url:n,linkPreviewJson:a}){let i=(await S({fileKey:e,nodeId:r})).find(e=>e.linkUrl===n);return i||k({nodeId:r,url:n}),D({link:i,linkPreviewJson:a})}async function D({link:e,linkPreviewJson:r}){try{let n=m.Ay.put(`/api/files/${e.fileKey}/related_links/link_preview`,{node_id:e.nodeId,link_id:e.id,link_preview_json:r});l.WB()?.optimisticallyUpdate({DeveloperRelatedLink:{[e.id]:{linkPreviewJson:JSON.stringify(r)}}},n),await n}catch(n){(0,c.$D)(a.FigmaTeam.DEVELOPER_TOOLS,n,{extra:{link:e,linkPreviewJson:r}})}}function k({nodeId:e,url:r}){throw Error(`url ${r} and nodeId ${e} not found`)}p.object({node_id:p.string(),link_name:p.string(),link_url:p.string()}),p.object({meta:T});let M=[/\/browse\/([A-Z]+-\d+)/,/selectedIssue=([A-Z]+-\d+)/,/issues\/([A-Z]+-\d+)/]},598393:(e,r,n)=>{n.d(r,{VI:()=>d}),n(411855),n(188507);var a=n(304061),i=n(939863),o=n(154483);n(666930);var s=n(843245),l=n(555074);n(416095),n(540019),n(601607);var c=n(32067);function d(){let e=(0,l.kl)("numSelected"),r=(0,c.VW)(),n=(0,s.lA)();return 1===e&&r&&r.isAlive?function(e,r){let n=e.isState?e.parentNode:null,o=n?.name||e.name,s=r?.isState?r?.parentNode?.name:r?.name,l="SYMBOL"===e.type||"INSTANCE"===e.type;return{id:e.guid,name:o,backingSymbolName:s,type:function(e,r,n=null){if(!e?.isAlive)return null;let o=e.type;if((0,a.GI)(e)&&(o="STAMP"),n?.status==="loaded"&&"SYMBOL"!==o&&"INSTANCE"!==o)return(0,i.tx)("inspect_panel.node_type.detached_component");if("BOOLEAN_OPERATION"===o)switch(e.booleanOperation){case"UNION":return(0,i.tx)("inspect_panel.node_type.union");case"INTERSECT":return(0,i.tx)("inspect_panel.node_type.intersect");case"SUBTRACT":return(0,i.tx)("inspect_panel.node_type.subtract");case"XOR":return(0,i.tx)("inspect_panel.node_type.exclude")}switch(o){case"VECTOR":return(0,i.tx)("inspect_panel.node_type.vector");case"STAR":return(0,i.tx)("inspect_panel.node_type.star");case"LINE":return(0,i.tx)("inspect_panel.node_type.line");case"ELLIPSE":return(0,i.tx)("inspect_panel.node_type.ellipse");case"RECTANGLE":case"ROUNDED_RECTANGLE":return(0,i.tx)("inspect_panel.node_type.rectangle");case"REGULAR_POLYGON":return(0,i.tx)("inspect_panel.node_type.polygon");case"TEXT":return(0,i.tx)("inspect_panel.node_type.text");case"SLICE":return(0,i.tx)("inspect_panel.node_type.slice");case"GROUP":case"FRAME":if(e.isStateGroup)return(0,i.tx)("inspect_panel.node_type.main_component_set");if("HORIZONTAL"===e.stackMode)return(0,i.tx)("inspect_panel.node_type.horizontal_al");if("VERTICAL"===e.stackMode)return(0,i.tx)("inspect_panel.node_type.vertical_al");if(e.resizeToFit)return(0,i.tx)("inspect_panel.node_type.group");else return(0,i.tx)("inspect_panel.node_type.frame");case"SYMBOL":if(e.isState||r?.isStateGroup)return(0,i.tx)("inspect_panel.node_type.main_variant");return(0,i.tx)("inspect_panel.node_type.main_component");case"INSTANCE":return(0,i.tx)("inspect_panel.node_type.instance");case"STICKY":case"SHAPE_WITH_TEXT":case"CONNECTOR":case"STAMP":return(0,i.tx)("inspect_panel.node_type.figjam");case"SECTION":return(0,i.tx)("inspect_panel.node_type.section");case"WIDGET":return(0,i.tx)("inspect_panel.node_type.widget");case"CANVAS":return(0,i.tx)("inspect_panel.node_type.page");case"TABLE":return(0,i.tx)("inspect_panel.node_type.table")}return null}(e,n,null),isSymbol:e.isStateGroup||l,isFrame:"FRAME"===e.type,isSection:"SECTION"===e.type}}(r,n):null}(0,o.fv)()},812505:(e,r,n)=>{n.d(r,{M:()=>i});var a=n(411855);function i(){return a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},a.createElement("g",{clipPath:"url(#a)"},a.createElement("mask",{id:"b",width:16,height:16,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},a.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M11.346 15.89c.252.099.54.093.794-.03l3.294-1.585a1 1 0 0 0 .566-.901V2.626a1 1 0 0 0-.566-.901L12.14.14a.996.996 0 0 0-1.137.193L4.697 6.087 1.95 4.002a.666.666 0 0 0-.85.037l-.882.802a.667.667 0 0 0 0 .986L2.6 8 .217 10.173a.667.667 0 0 0 .001.986l.881.802a.666.666 0 0 0 .851.037l2.747-2.085 6.306 5.754c.1.1.217.175.343.224Zm.656-11.522L7.217 8l4.785 3.632V4.368Z",clipRule:"evenodd"})),a.createElement("g",{mask:"url(#b)"},a.createElement("path",{fill:"#0065A9",d:"M15.434 1.727 12.137.14A.997.997 0 0 0 11 .333L.208 10.173a.667.667 0 0 0 0 .986l.882.802a.667.667 0 0 0 .851.037L14.938 2.14A.662.662 0 0 1 16 2.667v-.039a1 1 0 0 0-.566-.9Z"}),a.createElement("g",{filter:"url(#c)"},a.createElement("path",{fill:"#007ACC",d:"m15.434 14.273-3.297 1.587A.996.996 0 0 1 11 15.667L.208 5.827a.667.667 0 0 1 0-.986l.882-.802a.667.667 0 0 1 .851-.037l12.997 9.859A.662.662 0 0 0 16 13.333v.039a1 1 0 0 1-.566.9Z"})),a.createElement("g",{filter:"url(#d)"},a.createElement("path",{fill:"#1F9CF0",d:"M12.137 15.86A.997.997 0 0 1 11 15.667a.586.586 0 0 0 1-.415V.747a.586.586 0 0 0-1-.414c.3-.3.755-.377 1.137-.193l3.296 1.585a1 1 0 0 1 .567.901v10.748a1 1 0 0 1-.567.901l-3.296 1.585Z"})),a.createElement("path",{fill:"url(#e)",fillRule:"evenodd",d:"M11.336 15.89c.252.099.54.093.794-.03l3.294-1.585a1 1 0 0 0 .566-.901V2.626a1 1 0 0 0-.566-.901L12.13.14a.996.996 0 0 0-1.137.193L4.687 6.087 1.94 4a.666.666 0 0 0-.85.038l-.882.802a.667.667 0 0 0 0 .986L2.59 8 .208 10.173a.667.667 0 0 0 0 .986l.881.802a.666.666 0 0 0 .851.037l2.747-2.085 6.306 5.754c.1.1.217.175.343.224Zm.657-11.522L7.208 8l4.785 3.632V4.368Z",clipRule:"evenodd",opacity:.25,style:{mixBlendMode:"overlay"}}))),a.createElement("defs",null,a.createElement("filter",{id:"c",width:32.676,height:28.759,x:-8.343,y:-4.467,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},a.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),a.createElement("feOffset",null),a.createElement("feGaussianBlur",{stdDeviation:4.167}),a.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),a.createElement("feBlend",{in2:"BackgroundImageFix",mode:"overlay",result:"effect1_dropShadow_0_3"}),a.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_0_3",result:"shape"})),a.createElement("filter",{id:"d",width:21.667,height:32.584,x:2.667,y:-8.292,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},a.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),a.createElement("feOffset",null),a.createElement("feGaussianBlur",{stdDeviation:4.167}),a.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),a.createElement("feBlend",{in2:"BackgroundImageFix",mode:"overlay",result:"effect1_dropShadow_0_3"}),a.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_0_3",result:"shape"})),a.createElement("linearGradient",{id:"e",x1:7.99,x2:7.99,y1:.041,y2:15.959,gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#fff"}),a.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:0})),a.createElement("clipPath",{id:"a"},a.createElement("path",{fill:"#fff",d:"M0 0h16v16H0z"}))))}},786110:(e,r,n)=>{n.d(r,{Ib:()=>U,Zy:()=>V,q1:()=>G,vY:()=>H});var a=n(411855),i=n(75395),o=n(201140),s=n(130735),l=n(299321),c=n(275556),d=n(904669),u=n(629019),m=n.n(u),p=n(38329),h=n(794272),_=n(966712),g=n(38580),f=n(374626),E=n(860601),y=n(163023),b=n(939863),I=n(118830),T=n(444736),v=n(988022),S=n(617453),w=n(843495),A=n(29680),N=n(698993),C=n(100197),L=n(601607),O=n(279702),R=n(498606),P=n(319882),D=n(620722),k=n(371591),M=n(965736),F=n(949207),x=n(432023);let U=(0,g.eU)(new Map);function B(e){let{isHovered:r,selection:n}=(0,h.R)(r=>({isHovered:r.mirror.appModel.hoveredNode===e.guid,selection:r.mirror.sceneGraphSelection})),[i,o]=a.useState(!1),s=a.useRef(null);a.useEffect(()=>{s.current&&e.isSelected&&s.current.scrollIntoView({block:"nearest"})},[e.isSelected]);let c="SYMBOL"===e.type||"INSTANCE"===e.type||e.isInstanceSublayer||e.isSymbolSublayer||G.includes(e.type),d=[M.nM,e._className];e.isSelected&&d.push(M.wH),r&&d.push(M.yo),c&&d.push(M.HR),e.isExpanded(e.guid)&&d.push(M.sz),e.isAncestorSelected&&d.push(M.bx),0!==e.indentation&&d.push(M.BT);let u=Array.from({length:e.indentation},(e,r)=>r+1);return a.createElement("div",{onMouseDown:r=>{(0,N.S)("html_tree"),e.didSelectRow(e.guid);let a=Object.keys(n);if(f.zl.set(P.J,!1),r.metaKey){var i;n[i=e.guid]?w.D$([i]):w.Dh([i])}else r.shiftKey&&a.length>0?w.GL(a[a.length-1],e.guid):l.w3z.selectAndPanToNode(e.guid)},onDoubleClick:r=>e.isExpandable&&e.toggleExpanded(r,e.guid),onContextMenu:r=>e.openContextMenu(r,e.guid),onMouseEnter:()=>{o(!0),w.Uc(e.guid)},onMouseLeave:()=>{o(!1),w.Uc(w.Hr)},role:"button",tabIndex:0,className:m()(d),ref:s,"data-fullscreen-intercept":!0},a.createElement("div",{className:M.M4},u.map(e=>a.createElement("div",{key:e,className:M.Mh})),e.children),a.createElement($,{name:e.name,guid:e.guid,isRowHovered:i}))}function V(e){return a.createElement(y.B,{onMouseDown:e.visible?r=>{r.preventDefault(),r.stopPropagation(),e.onMouseDown?.(r)}:void 0,className:m()(M.GE,e.visible&&M.RK),svg:e.expanded?F.A:x.A,dataTestId:`devHandoffLayersRow.toggle-${e.name}`})}let G=["TABLE","TABLE_CELL","WASHI_TAPE","STAMP","STICKY","SHAPE_WITH_TEXT","WIDGET"];function H(e,r){let n=e?.type??O.PW.NOT_ASSET,a=n&(O.PW.ASSET_IMAGE|O.PW.ASSET_ICON);return r?a:n&O.PW.ASSET_IMAGE}function W(e){return"SYMBOL"===e||"INSTANCE"===e}function K({guid:e}){let r=(0,f.md)(U).get(e);if(!r)return null;let n=r.state;return"added"===n?a.createElement("div",{className:M.vN}):"changed"===n?a.createElement("div",{className:M.tD}):"removed"===n?a.createElement("div",{className:M.rq}):null}function Y(e){return a.createElement(B,{...e,_className:e.hasChildren?M.aw:void 0},a.createElement(V,{visible:e.isExpandable&&e.hasChildren,expanded:e.isExpanded(e.guid),onMouseDown:r=>e.toggleExpanded(r,e.guid),name:e.name}),a.createElement(k.Bf,{className:M.V3,guid:e.guid}),a.createElement("span",{className:M.Hn},e.name," ",e.showGuids&&` (${e.guid})`),a.createElement(K,{guid:e.guid}))}function $({isRowHovered:e,guid:r,name:n}){let l=(0,L.Fk)((e,r)=>e.get(r)?.isLockedInDevMode,r);return(0,_.kc)().dt_locking&&(l||e)?a.createElement(i.E,{actionOnPointerDown:!0,onClick:()=>{let e=(0,d.UN)().get(r);e&&c.l7.user("set-locked-in-dev-mode",()=>{e.isLockedInDevMode=!e.isLockedInDevMode;let r=p.D.getState(),n=r.openFile?.key;n&&(0,v.GS)("dev_mode.set_node_locked",n,r,{locked:e.isLockedInDevMode,nodeId:e.guid,nodeType:e.type,isLockedInDesignMode:e.locked,opacity:e.opacity,fillOpacity:e.fills[0]?.opacity})})},"aria-label":(0,b.t)("dev_handoff.layers_panel.locked_tooltip"),className:M.hz,htmlAttributes:{"data-testid":`devHandoffLayersRow.lockIcon-${n}`,"data-tooltip":(0,b.t)("dev_handoff.layers_panel.locked_tooltip"),"data-tooltip-type":R.Ib.TEXT,"data-tooltip-show-right":!0,"aria-pressed":l}},l?a.createElement(o.s,null):a.createElement(s.r,null)):null}function j(e){return a.createElement(B,{...e,_className:M.aw},a.createElement(V,{visible:e.isExpandable&&e.hasChildren,expanded:e.isExpanded(e.guid),onMouseDown:r=>e.toggleExpanded(r,e.guid),name:e.name}),a.createElement(k.Bf,{className:M.V3,guid:e.guid}),a.createElement("span",{className:M.Hn},e.name," ",e.showGuids&&` (${e.guid})`),a.createElement(K,{guid:e.guid}))}function z(e){var r,n;let i;let o=(0,A.eY)(),s=e.inheritedTextStyle;if(s){let e=l.Pt4.getStyleNodeId(s.key,s.version);i=o.get(e)?.name}let c=e.isInstanceSublayer?(r=e.name,n=e.textContent,r===n?.trim().replace(/\s+/gm," ")):e.autoRename;return a.createElement(B,{...e,_className:M.yL},a.createElement(V,{visible:!1,expanded:!1,name:e.name}),a.createElement(k.Bf,{className:M.V3,guid:e.guid}),c?null:a.createElement("span",{className:M.Hn},e.name," ",e.showGuids&&` (${e.guid})`),a.createElement("span",{className:M.P_},e.textContent),a.createElement("span",{className:M.bT}," \xb7 ",i),a.createElement(K,{guid:e.guid}))}function q(e){return a.createElement(a.Fragment,null,a.createElement(k.Bf,{className:m()(M.V3,M.MS,{[M.hR]:!e.figJam}),guid:e.guid}),a.createElement("span",{className:m()(M.Hn,M.MS)},e.name,e.showGuids&&` (${e.guid})`))}function X(e){let r=e.guid;return a.createElement(B,{...e},a.createElement(V,{visible:e.isExpandable&&e.hasChildren,expanded:e.isExpanded(r),onMouseDown:n=>e.toggleExpanded(n,r),name:e.name}),a.createElement(q,{guid:r,name:e.name,showGuids:e.showGuids}),a.createElement(K,{guid:e.guid}))}function J(e){let r=e.guid;return a.createElement(B,{...e},a.createElement(V,{visible:!1,expanded:!1,onMouseDown:E.lQ,name:e.name}),a.createElement(q,{guid:r,name:e.name,showGuids:e.showGuids,figJam:!0}),a.createElement(K,{guid:e.guid}))}function Z(e){let{assetInfo:r}=e;return r?a.createElement(ee,{...e,assetInfo:r}):a.createElement(Y,{...e})}function Q({guid:e,assetInfo:r,hasEnabledStaticImagePaint:n}){let i=r.type&O.PW.ASSET_IMAGE||n,o=(0,I.O)({assetId:e,thumbnailVersion:r.thumbnailVersion,width:64,height:64,scale:2});return a.createElement(D.J,{className:m()(M.ZE,i?M.Ym:M.ye),style:o.backgroundStyle,src:o.url})}function ee(e){let{assetInfo:r}=e;return a.createElement(B,{...e,_className:M.Re},a.createElement(V,{visible:!1,expanded:!1,name:e.name}),a.createElement(Q,{guid:e.guid,assetInfo:r,hasEnabledStaticImagePaint:e.hasEnabledStaticImagePaint}),a.createElement(a.Fragment,null,W(e.type)?a.createElement(q,{guid:e.guid,name:e.name,showGuids:!1}):a.createElement(a.Fragment,null,a.createElement("span",{className:M.Hn},e.name," ",e.showGuids&&` (${e.guid})`),a.createElement("span",{className:M.UZ},a.createElement(T.$R,{assetInfo:r,dataTestId:"layerPanelAsset"})))))}a.memo(e=>{let r=(0,C.J2)((0,S.UK)().showGuids),n=(0,C.J2)(l.Ez5.devHandoffState().automaticIconDetection),i=a.useMemo(()=>l.w3z.getOrAddAssetInfo(e.guid),[e.guid]),o=(0,A.eY)().get(e.guid);if(!o)return null;let s=o.devToolsOrderedVisibleChildren,c=function(e,r,n){return G.includes(e.type)?J:n&&H(n,r)?Z:W(e.type)?X:"FRAME"===e.type&&e.isStack?j:"TEXT"===e.type?z:Y}(o,n,i);if(!c)return null;let d=s.length>0&&!(i&&H(i,n));return a.createElement(c,{toggleExpanded:e.toggleExpanded,isExpanded:e.isExpanded,openContextMenu:e.openContextMenu,indentation:e.indentation,hasChildren:d,isSelected:e.isSelected,isAncestorSelected:e.isAncestorSelected,didSelectRow:e.didSelectRow,guid:o.guid,type:o.type,name:o.name,textContent:o.textContent,absoluteBoundingBox:o.absoluteBoundingBox,hasEnabledStaticImagePaint:o.hasEnabledStaticImagePaint,inheritedTextStyle:o.inheritedTextStyle,autoRename:o.autoRename,stackMode:o.inferredAutoLayoutResult?o.inferredAutoLayoutResult.stackMode:o.stackMode,isInstanceSublayer:o.isInstanceSublayer,isSymbolSublayer:o.isSymbolSublayer,isExpandable:!e.isRoot&&d,showGuids:r,assetInfo:i})})},693897:(e,r,n)=>{n.d(r,{Ym:()=>u});var a=n(966712),i=n(256975),o=n(988022),s=n(99506),l=n(239671),c=n(520425);let d="Enter Inspect Mode";function u(e,r,n,m,p={}){let h=r===l.nT.DevHandoff?d:"Enter Design Mode",_={source:n,hasSeatForDevMode:(0,i.tn)(e),...p},g=e.openFile?.key;if((0,o.ds)(h,g,e,_,{forwardToDatadog:m}),(0,a.Ay)().org_id&&g&&"init"!==n){let e=h===d?s.Mr.DEV_MODE_FILE_SEEN:s.Mr.DESIGN_FILE_SEEN;c.L.postRecentActivity({fileKey:g,activityType:e})}}},812890:(e,r,n)=>{n.d(r,{d:()=>i});var a=n(582947);(0,a.Fu)("dev_mode_should_see_paywall_reminder");let i=(0,a.Fu)("dev_mode_seen_paywall_reminder")},321961:(e,r,n)=>{n(188507),n(335682),n(243987),n(428467),n(984968),n(668860)},103339:(e,r,n)=>{n.d(r,{DK:()=>v,MO:()=>N,q9:()=>S});var a=n(411855);n(188507);var i=n(414507),o=n(299321),s=n(776250),l=n(38580),c=n(374626),d=n(776621),u=n(572206),m=n(877432),p=n(939863),h=n(154483);n(666930);var _=n(44892),g=n(15859),f=n(927657),E=n(931770),y=n(335682),b=n(933342);n(234945);var I=n(173454),T=(e=>(e.GENERIC="GENERIC",e.OFFLINE="OFFLINE",e.THUMBNAIL_TIMEOUT="THUMBNAIL_TIMEOUT",e))(T||{});function v(e){switch(e){case"GENERIC":return(0,p.t)("design_systems.playground.unable_to_load");case"OFFLINE":return(0,p.t)("design_systems.playground.unable_to_load_while_offline");case"THUMBNAIL_TIMEOUT":return(0,p.t)("design_systems.playground.unable_to_load_thumbnail")}}function S(e){switch(e){case"GENERIC":return(0,p.t)("design_systems.playground.unable_to_load_help_text");case"OFFLINE":return(0,p.t)("design_systems.playground.unable_to_load_while_offline_help_text");case"THUMBNAIL_TIMEOUT":return(0,p.t)("design_systems.playground.unable_to_load_thumbnail_help_hext")}}let w=(0,l.eU)(!1),A=(0,h.fv)();function N({canViewPlaygroundQueryResult:e,canvasAsset:r,onLoaded:n,onError:l,thumbnailOptions:p}){let[h,T]=a.useState(r),{setPlaygroundNodeData:v,onSetPercentImagesLoaded:S,onResetTracker:N,thumbnailData:C,playgroundNodeData:L,hasChangesToReset:O,hasThumbnailErrors:R,setHasChangesToReset:P}=function(e){let[r,n]=a.useState(),[i,s]=a.useState(),[l,d]=a.useState(!1),[m,p]=a.useState(!1),[h,_]=a.useState(!1),[g,y]=(0,c.fp)(w),b=a.useCallback(()=>{let r=o.glU.generatePlaygroundThumbnail(e??null),a=o.glU.getPlaygroundNodeData();r.pixels?.length>0?(n({src:(0,E.Pv)(r.pixels,new u.Mi(r.width,r.height)),width:r.width/r.scale,height:r.height/r.scale}),s(a),p(!1),y(!0)):p(!0)},[y,e]),I=a.useCallback(e=>{d(e),_(!0)},[_]),{onSetPercentImagesLoaded:T,onResetTracker:v}=function(e){let[r,n]=a.useState(0),[i,o]=a.useState(0),[s,l]=a.useState(null),c=a.useCallback(()=>{n(0),o(0),l(null)},[]);return a.useEffect(()=>{function n(n,a){if(r>n&&r<a&&i<=n){let n=Date.now();(null===s||n-s>1e3)&&(l(n),o(r),e())}}n(.25,.5),n(.5,.75),n(.75,1)},[i,s,e,r]),a.useEffect(()=>{1===r&&(e(),o(1))},[e,r]),a.useMemo(()=>({onSetPercentImagesLoaded:n,onResetTracker:c}),[n,c])}(b);return a.useEffect(()=>(0,f.k)(I),[I]),a.useEffect(()=>()=>o.glU.clearPlaygroundScene(),[]),a.useEffect(()=>{h&&setTimeout(()=>{b(),_(!1)},0)},[h,_,b]),a.useMemo(()=>({setPlaygroundNodeData:s,onSetPercentImagesLoaded:T,onResetTracker:v,thumbnailData:r,playgroundNodeData:i,hasChangesToReset:l,hasThumbnailErrors:m,setHasChangesToReset:d}),[s,T,v,r,i,l,m,d])}(p),D=(0,y.tS)(),k=h!==r||!L||"loading"===e.status,[M,F]=a.useState(null),x=a.useCallback(()=>{o.glU.clearPlaygroundScene(),v(void 0)},[v]),U=a.useCallback(async(e=!0)=>{let n;if(r.type!==I.PW.COMPONENT&&r.type!==I.PW.STATE_GROUP&&r.type!==I.PW.MODULE){x();return}let a=Date.now();if(F(null),r.isLocal)n=null;else try{let e=_.Eo.getCanvas({canvas_url:r.canvas_url});await Promise.race([e,(0,m.fm)(100)])||(T(r),v(void 0),P(!1)),n=await e}catch(e){0===e.status?F("OFFLINE"):F("GENERIC"),x(),T(r),(0,d.$D)(i.FigmaTeam.DESIGN_SYSTEMS_ECOSYSTEM,e,{tags:{openFileKey:D,libraryKey:r.library_key,type:r.type}});return}let l=r.type!==I.PW.STATE_GROUP||r.isLocal?null:r.default_state_key;if(n?o.glU.setPlaygroundSceneFromBuffer(r.node_id,n,e,l,A(r)):o.glU.setPlaygroundSceneFromLocalAsset(r.node_id)){P(!1),v(o.glU.getPlaygroundNodeData()),T(r),s.az.trackDefinedEvent("playground.set_scene",{duration:Date.now()-a,assetType:r.type,isLocal:r.isLocal??!1,assetKey:(0,b.u2)(r)}),N(),(0,g.Jr)().loadAllImagesUnder(["0:0"],o.MoD.NON_ANIMATED_ONLY,"playground.initialLoad",(e,r)=>{S((r-e)/r)},o.glU.getPlaygroundScene());return}if(e){T(r),v(void 0),P(!1),setTimeout(()=>{U(!1)},50);return}F("GENERIC"),x()},[D,x,N,S,r,v,P]);return a.useEffect(()=>{"loaded"===e.status&&(e.data?U():T(r))},[e,v,r,x,U]),a.useMemo(()=>{let e=R?"THUMBNAIL_TIMEOUT":M;return!e&&k?{state:"LOADING",previousAssetData:{thumbnailData:C,hasChangesToReset:O,refetchAndResetScene:U,nodeData:L,asset:h}}:(n(),e)?(l(),{state:"ERROR",errorType:e,previousAssetData:{thumbnailData:C,hasChangesToReset:O,refetchAndResetScene:U,nodeData:L,asset:h}}):{state:"LOADED",currentAssetData:{hasChangesToReset:O,refetchAndResetScene:U,nodeData:L,thumbnailData:C,asset:h}}},[k,n,R,M,L,C,l,O,U,h])}},807197:(e,r,n)=>{(0,n(38580).eU)([])},939900:(e,r,n)=>{n.d(r,{A8:()=>m,eT:()=>p});var a=n(411855),i=n(188507),o=n(358145),s=n(374626),l=n(38580),c=n(239349);n(738269);var d=n(662275),u=n(869156);function m(){let e=(0,i.d4)(e=>"devModeVariablesTableSelectedVariable"in e.selectedView?e.selectedView.devModeVariablesTableSelectedVariable:void 0),r=(0,u.u)(e),n=(0,u.Rb)(),o=!!r,s=a.useMemo(()=>o||!e?null:n.find(r=>e.includes(r.keyForPublish)),[o,e,n]);return s?s.node_id:r?.node_id??null}function p(){let e=(0,c.uQ)(),r=(0,o.ZC)(e),n=(0,i.wA)();a.useEffect(()=>{r&&e!==r&&n(d.AS())},[n,r,e])}n(611978),n(15270),(0,s.E3)("last-used-dev-mode-variable-set",null),(0,l.eU)("ALL_VARIABLES")},865401:(e,r,n)=>{n.d(r,{KP:()=>p,ON:()=>m,gs:()=>h});var a=n(411855),i=n(939683),o=n(308977),s=n(945099),l=n(672517);let c=a.createContext({}),d="dev_mode.variables.",u={};function m(){let e=(0,i.hC)(),{name:r,enabled:n=!0,trackingProps:o}=a.useContext(c);return a.useCallback((a,i=u)=>{r&&n&&e(d+r,{action:a,...o,...i})},[o,n,r,e])}function p(e,r){let n=(0,i.hC)();return a.useCallback((a=u)=>{n(d+e,{action:"click_on_entry_point",entrypoint:r,...a})},[r,e,n])}function h({children:e,enabled:r=!0,skipOpenAndClose:n=!1,name:m,trackingProps:p=u}){let h=(0,i.hC)(),_=(0,o.v4)().id,[g]=(0,s.$h)(),f=a.useMemo(()=>({codeLanguage:_,inspectView:g,...p}),[p,_,g]),E=a.useMemo(()=>({name:m,enabled:r,trackingProps:f}),[m,r,f]);return(a.useEffect(()=>{if(m&&r&&!n)return h(d+m,{action:"view_opened",...f}),()=>{h(d+m,{action:"view_closed",...f})}},[]),m)?a.createElement(l.fu,{name:m,enabled:r,properties:f},a.createElement(c.Provider,{value:E},e)):a.createElement(a.Fragment,null,e)}},40987:(e,r,n)=>{n.d(r,{cR:()=>l,d:()=>s,hv:()=>d,pc:()=>c});var a=n(38580),i=n(582947),o=n(147723);(0,a.eU)(void 0);let s=(0,a.eU)(!1),l=(0,a.eU)(!1),c=(0,a.eU)(!1),d=(0,i.Fu)(o.Ih)},165514:(e,r,n)=>{n.d(r,{D0:()=>s,zi:()=>o});var a=n(299321),i=n(939863);function o(e){switch(e){case a.zIx.BUILD:return(0,i.t)("dev_handoff.status.ready_for_dev");case a.zIx.COMPLETED:return(0,i.t)("dev_handoff.status.completed");case a.zIx.NONE:return null}}function s(e){if(e.length>0){let r=e[0].metadata;return{status:r?.status??null,nodes:e.map(e=>({id:e.node_id,name:e.node_name}))}}return{status:null,nodes:[]}}},964881:(e,r,n)=>{n.d(r,{Wl:()=>s,hA:()=>l,l7:()=>o,s4:()=>c}),n(411855);var a=n(188507);n(299321),n(900956),n(939683),n(794272),n(256975),n(17604),n(693897),n(738269),n(493862),n(29680),n(100197),n(239671);var i=n(507956);function o(){return(0,a.d4)(e=>s(e.selectedView))}function s(e){return!!e&&e?.view==="fullscreen"&&e?.showOverview===!0}function l(){return(0,a.d4)(e=>c(e.selectedView)??null)}function c(e){if(e)return(0,i.$A)(e)?e.devModeFocusId:void 0}n(40987),n(282741)},263581:(e,r,n)=>{n.d(r,{L:()=>O});var a=n(432258),i=n(414507),o=n(299321),s=n(275556),l=n(38329),c=n(374626),d=n(130097),u=n(776621),m=n(939863),p=n(784309),h=n(256975),_=n(40987),g=n(165514),f=n(988022),E=n(356390),y=n(52610),b=n(99506),I=n(279453),T=n(973131),v=n(647786),S=n(43923),w=n(331972);function A({status:e,prevStatus:r,source:n,numNodesUpdated:a,nodeId:i,nodeType:o,isReadOnly:s,description:c,isEdited:d}){let u=l.D.getState();(0,f.ds)("dev_handoff_edit_status",u.openFile?.key,u,{status:e,prevStatus:r,source:n,numNodesUpdated:a,nodeId:i,nodeType:o,isViewOnly:s,hasDescription:""!==c,description:c,isEdited:d},{forwardToDatadog:!0})}async function N(e,r,n,a,d){let m;let p=l.D.dispatch,h=l.D.getState(),E=h.openFile?.key||"",y=d??void 0,b=performance.now();if(c.zl.set(_.pc,!0),r===o.zIx.BUILD||r===o.zIx.COMPLETED)try{let e=await (0,T.m)(E,(0,g.zi)(r)??void 0,y,p,!0);m=e?.id,E&&!m&&(0,u.$D)(i.FigmaTeam.DEVELOPER_TOOLS,Error("[Dev mode activity] createSavepoint returned no id"))}catch(e){(0,u.$D)(i.FigmaTeam.DEVELOPER_TOOLS,Error("[Dev mode activity] Error creating version on status change: "+e.stack))}let I=!1;(0,s.l7)(s.zk.SYSTEM,"store-status-activity",()=>{v.e.recordStatusChange({fileKey:E,nodes:e,status:r,description:y,versionId:m}).then(()=>{I=!0}).catch(e=>{(0,u.$D)(i.FigmaTeam.DEVELOPER_TOOLS,Error("[Dev mode activity] Error creating activity: "+e.stack))}).finally(()=>{let r=performance.now()-b;(0,f.ds)("dev_handoff_status_activity",E,h,{elapsedMs:r,status:n,source:a,savedVersion:!!m,savedActivity:I,nodeIds:e.map(e=>e.id)},{forwardToDatadog:!0}),c.zl.set(_.pc,!1)})})}function C(e){switch(e){case o.zIx.BUILD:return"ready_for_dev";case o.zIx.COMPLETED:return"completed";default:return"none"}}async function L(e,r){let n=e.map(({id:e,isUpdated:n})=>n?{fileKey:r,nodeId:e}:null).filter(a.Vq);if(0===n.length)return{};let i=await (0,d.S8)(I.WND,n),o={};return i.forEach(({result:e},r)=>{if(e.data?.file.status==="loaded"){let a=e.data.file.data?.devModeActivity.filter(e=>e.activityType===b.o6.STATUS_CHANGE).sort((e,r)=>r.timestamp.getTime()-e.timestamp.getTime())||[],i=n[r],s=a[0];i&&s&&(o[i.nodeId]=s.id)}}),o}async function O({nodeIds:e,status:r,description:n,sourceForLogging:a,editScopeType:i}){let d=l.D.getState(),u=d.mirror.sceneGraph,g=d.openFile?.key??"",b=d.user?.id??"",I=o.w3z.isReadOnly(o.SES.NODE_STATUS),T=C(r),v=new Map,O=new Map,R=[];for(let n of e){let e=u.get(n);if(e){let a=e.getStatusInfo().status;v.set(n,e.hasBeenEditedSinceLastStatusChange),O.set(n,C(a));let i=(0,w.S7)(u,n,e.containingCanvas||""),s=a===o.zIx.BUILD&&r===o.zIx.BUILD,l="";if(e.containingCanvas){let r=u.get(e.containingCanvas);r&&(l=r.name)}R.push({id:n,name:e.name,type:e.type,pageName:l,prevStatus:a,previewBackground:i,isUpdated:s})}}if(I){let s=d.openFile,l={status:T,canAccessDevModeRaw:s?.canAccessFullDevMode,canAccessDevModeEntryPoint:s?.canAccessDevModeEntryPoint,canAccessDevMode:(0,h.tn)(d),fileRepoId:s?.fileRepoId,userOrgId:d.user?.org_id,currentTeamId:d.currentTeamId,currentUserOrgId:d.currentUserOrgId,source:a,numNodes:e.length,editScopeType:i,userIdForMultiplayer:b,linkAccess:s?.linkAccess,fileCanEdit:s?.canEdit,fileCanEditCanvas:s?.canEditCanvas,fileCanEditIgnoreEduGracePeriod:s?.canEditIgnoreEduGracePeriod,canManage:s?.canManage,canView:s?.canView,isTeamTemplate:s?.isTeamTemplate,isTryFile:s?.isTryFile,viewerExportRestricted:s?.viewerExportRestricted,fileHasPartialOrgUser:!!s?.currentPartialOrgUser,fileHasCurrentTeamUser:!!s?.currentTeamUser,hasEditRole:s?.hasEditRole?.data};(0,f.ds)("temp_debug_set_status_view_only",s?.key,d,l);let c=!1;setTimeout(()=>{c||(0,f.ds)("temp_debug_set_status_view_only_failed",s?.key,d,l)},2e3),o.h3O.sendSetNodeStatus(e,r,n??"",b);let[u]=await Promise.all([L(R,g),(0,y.n)()]);if(c=!0,(0,h.tn)(d))for(let{id:e,name:a,type:i,pageName:o,prevStatus:s,previewBackground:l}of R)S.f.recordStatusChange({fileKey:g,nodeId:e,nodeName:a,nodeType:i,status:r,prevStatus:s,description:n||void 0,pageName:o,previewBackground:l,prevActivityId:u[e]||null});for(let{id:i,type:o}of(N(R,r,T,a,n),R))A({status:T,source:a,numNodesUpdated:e.length,nodeId:i,nodeType:o,isReadOnly:I,description:n??"",prevStatus:O.get(i)??T,isEdited:v.get(i)??!1})}else{if(!navigator.onLine){(0,p.j)("offlineSettingNodeStatus",(0,m.t)("dev_handoff.status.offline"),!0);return}(0,s.l7)(i,"set-nodes-status",()=>{for(let{id:e}of R){let a=u.get(e);a&&a.setStatus(r,b,n??void 0)}E.Y5.triggerAction("commit")});let o=await L(R,g);for(let{id:e,name:a,type:i,pageName:s,prevStatus:l,previewBackground:c}of R)(0,h.tn)(d)&&S.f.recordStatusChange({fileKey:g,nodeId:e,nodeName:a,nodeType:i,status:r,prevStatus:l,description:n||void 0,pageName:s,previewBackground:c,prevActivityId:o[e]||null});for(let{id:i,type:o}of(N(R,r,T,a,n),R))A({status:T,source:a,numNodesUpdated:e.length,nodeId:i,nodeType:o,isReadOnly:I,description:n??"",prevStatus:O.get(i)??T,isEdited:v.get(i)??!1})}!function(e){let r=c.zl.get(_.d),n=c.zl.get(_.cR),a=c.zl.get(_.hv)?.data;e!==o.zIx.BUILD||r||n||a||c.zl.set(_.d,!0)}(r)}},282741:(e,r,n)=>{n(411855),n(188507),n(414507),n(776250),n(939683),n(320063);var a=n(38580);n(776621),n(256975),(0,n(940596).Wh)(()=>(0,a.eU)(!1),{preserveValue:!1}),(0,a.eU)(""),(0,a.eU)("");var i=(e=>(e.ALL="ALL",e.RECENTLY_VIEWED="RECENTLY_VIEWED",e.BUILD="BUILD",e.COMPLETED="COMPLETED",e))(i||{}),o=(e=>(e.RECENT="RECENT",e.PAGE="PAGE",e.ALPHABETICAL="ALPHABETICAL",e))(o||{})},203264:(e,r,n)=>{n.d(r,{E1:()=>l,ei:()=>s});var a=n(794272),i=n(966712);n(29680);var o=n(601607);function s(e,r=!1,n){return(0,o.Fk)((e,r,a)=>r&&function(e,r,n){let a=e.get(r)?.editInfo;return!a||n&&a.userId===i.Ay().user_data?.id||0===a.lastEditedAt?null:(a.lastEditedAt=1e3*a.lastEditedAt,a.createdAt=1e3*a.createdAt,a)}(n??e,r,a)||null,e,r)}function l(){let{lastViewedStamp:e,lastEditedStamp:r}=(0,a.R)(e=>({fileKey:e.openFile?.key,lastViewedStamp:e.versionHistory.lastViewed,lastEditedStamp:e.versionHistory.lastEdited}));return function(e,r){if(!e)return r?new Date(r):void 0;if(!r)return e?new Date(e):void 0;let n=new Date(e),a=new Date(r);return n>a?n:a}(e,r)}var c=(e=>(e.NOT_RECENT="NOT_RECENT",e.RECENTLY_EDITED="RECENTLY_EDITED",e.RECENTLY_CREATED="RECENTLY_CREATED",e))(c||{})},597192:(e,r,n)=>{n.d(r,{t:()=>E});var a=n(411855),i=n(109388),o=n(188507),s=n(966712),l=n(860601),c=n(939863),d=n(796933),u=n(54552),m=n(738269),p=n(723245),h=n(397844),_=n(728587);let g=(e,r,n,a={})=>e?[{displayText:r||"",callback:n,...a}]:[],f=()=>{let e=(0,o.d4)(e=>e.dropdownShown);return e&&e?.type===d.jU?e:null};function E(e){let r=(0,o.wA)(),n=(0,o.d4)(e=>e.currentTeamId),d=(0,o.d4)(e=>e.currentUserOrgId),E=(0,o.d4)(e=>e.mobileNavShown),y=(0,o.d4)(e=>e.favorites.collapsedCustomSections),b=a.useMemo(()=>(0,p.t$)(e.sections,e.customSectionOrdering),[e.sections,e.customSectionOrdering]),I=f();if(null==I)return null;let{updateFavorite:T,resourceId:v,resourceType:S,isFavorited:w,currentSectionId:A}=e,N=function(e){let{dispatch:r,currentOrgId:n,currentTeamId:a,collapsedCustomSections:i,updateFavorite:o,resourceId:d,resourceType:p,isFavorited:_,currentSectionId:f,sections:E}=e,y=(e,a)=>{o(e,a),r(m.oB()),e&&a&&(i.delete(a),r(u.U6({collapsedCustomSections:i})),h.Fp({type:"topLevel",id:"custom",orgId:n,sectionId:a},!0))},b=E.map(e=>({displayText:""===e.name?(0,c.t)("sidebar.starred"):e.name,isChecked:_&&f===e.id,alwaysShowCheckMarkOffset:!0,callback:()=>y(!(_&&f===e.id),e.id)})),I=[...g(_,null,l.lQ,{separator:!0}),...g(_,(0,c.t)("favorited_resources.remove_from_sidebar"),()=>y(!1))],T=a&&(0,s.kc)().ps_benchmark,v=[...g(!e.showFavoriteOptionsOnly&&!T,(0,c.t)("favorited_resources.create_a_new_section"),()=>{void 0===e.mobileNavShown||e.mobileNavShown||r(m.PY());let n=f?E.findIndex(e=>e.id===f):0;p&&r(u.to({movingResource:{resourceId:d,isFavorited:!0,resourceType:p}})),r(u.pS({newCustomSectionIndex:n})),r(m.oB())})],S=[{displayText:"",separator:!0}],w=E.find(e=>e.id===f),A=_?`${(0,c.t)("favorited_resources.indicate_section_prefix")}: ${w?.name||(0,c.t)("sidebar.starred")}`:(0,c.t)("favorited_resources.add_to_sidebar");return E.length>4?[{displayText:A,children:[...b,...S,...v]},...I]:[...g(!0,(0,c.t)("favorited_resources.add_to_sidebar"),l.lQ,{disabled:!0}),...b,...S,...I,...S,...v]}({dispatch:r,currentOrgId:d,currentTeamId:n,collapsedCustomSections:y,updateFavorite:T,resourceId:v,resourceType:S,isFavorited:w,currentSectionId:A,sections:b,mobileNavShown:E}),C=a.createElement(_.j,{autofocusPrevOnDismount:!0,items:N,parentRect:I.data.targetRect,showPoint:!!e.showPoint,lean:"right",recordingKey:"organize-favorited-dropdown",dispatch:r,onSelectItem:(e,n)=>{e.callback?.("",{},r,n)}});return(0,i.createPortal)(C,document.body)}},46415:(e,r,n)=>{n.d(r,{E:()=>_,ce:()=>p,cv:()=>g,hZ:()=>f,rg:()=>h});var a=n(167249),i=n(38329),o=n(27087),s=n(881388),l=n(980820),c=n(156367),d=n(988022),u=n(239318);let m=e=>{let r=i.D.getState();if(!r.openFile)return;let n=r.openFile;n&&n.parentOrgId&&o.Ay.post(`/api/activity_logs/${n.key}`,{event_name:e})};function p(){m("fig_file_save_as")}let h=(0,l.nF)((e,r)=>{m("fig_file_export")}),_=(0,a.N)("GET_ACTIVITY_LOGS");(0,l.nF)((e,r)=>{let{newQuery:n,teamId:a,emails:i,eventName:o,date:l}=r,m=e.getState();u.J.getActivityLogs({pageSize:"30",orgId:m.currentUserOrgId,startTime:l.start,endTime:(0,c.H3)(l.end),...a?{teamId:a}:null,...o?{eventName:JSON.stringify(o)}:null,...i?{emails:i.join()}:null,...n?null:{after:m.activityLogs.cursor.after}}).then(({data:r})=>{let s=r.meta,u=s[0],p=s[1],h=n?u:e.getState().activityLogs.logs.concat(u);e.dispatch(f({logs:h,cursor:p})),(0,d.Fr)("Activity Logs Fetched",m.currentUserOrgId,m,{teamIdFilter:a,eventNamesFilter:o,startDateFilter:l.start,endDateFilter:(0,c.H3)(l.end),filtersOnActorEmail:!!i&&i.length>0,filtersOnActedOnEmail:!!i&&i.length>0,isNewQuery:n,numberOfResults:u.length})}).catch(r=>{let n=r.data?.message||"An error occurred while fetching activity logs.";e.dispatch(s.s.flash(n))}),e.dispatch(_(r))});let g=(0,a.N)("CLEAR_CURSOR_ACTIVITY_LOGS"),f=(0,a.N)("SET_ACTIVITY_LOGS")},362252:(e,r,n)=>{n.d(r,{ZH:()=>c,_M:()=>s,r$:()=>l,r5:()=>d});var a=n(167249),i=n(511617),o=n(517333);let s=(0,n(980820).nF)(e=>{i.R7.fullscreen&&(e.getState().appWindow.inFullScreenMode?(o.eD?.setFullScreen(!1),i.R7.getFullscreenElement()?i.R7.exitFullscreenFunc():e.dispatch(c())):(o.eD?.setFullScreen(!0),i.R7.requestFullscreenFunc.call(document.documentElement)))}),l=(0,a.N)("WINDOW_DID_ENTER_FULL_SCREEN"),c=(0,a.N)("WINDOW_DID_EXIT_FULL_SCREEN");function d(e){i.R7.fullscreen&&(document.addEventListener(i.R7.fullscreenChangeEventName,function(r){let n=e.getState();i.R7.getFullscreenElement()&&!n.appWindow.inFullScreenMode?e.dispatch(l()):n.appWindow.inFullScreenMode&&e.dispatch(c())}),document.addEventListener(i.R7.fullscreenErrorEventName,function(r){console.warn("failed to enter fullscreen:",r),e.getState().appWindow.inFullScreenMode&&e.dispatch(c())}))}},955066:(e,r,n)=>{n.d(r,{DF:()=>g,TP:()=>f,Y3:()=>y,h0:()=>b,vv:()=>h,zE:()=>E});var a=n(167249),i=n(776250),o=n(517333),s=n(374626),l=n(980820),c=n(738269),d=n(154823),u=n(788811),m=n(132367),p=n(540019);let h=(0,l.nF)(async(e,r)=>{let n=e.getState()?.user?.id;if(!n)return;let a=Object.keys(r);await (0,u.wI)(n,a),m.hp.sendToAllTabs(m.c6,a),(0,i.sx)("Delete New Autosave Files",{deletedCount:a.length})}),_=(0,l.nF)(async e=>{let r=e.getState(),n=r.user?.id;if(!n)return;await (0,u.JI)(n);let a=await (0,u.kl)(n);e.dispatch(y({filesWithChangesInIDB:a.unsyncedFiles,filesCreatedOffline:a.newFiles})),e.dispatch(f(a.nextGarbageCollectionTimestamp))}),g=(0,a.N)("SET_AUTOSAVE_ONBOARDING_TOOLTIP_VISIBLE"),f=(0,a.N)("SET_AUTOSAVE_NEXT_GARBAGE_COLLECTION_TIMESTAMP"),E=(0,a.N)("SET_AUTOSAVE_SNOOZE"),y=(0,a.N)("SET_UNCLAIMED_FILES");function b(e){m.hp.register(m.ec,()=>(function(e){let r=e.getState().user?.id??null;p.M4.fetch((0,u.OL)({userId:r}),{policy:"networkOnly"})})(e)),m.hp.register(m.c6,r=>(function(e,r){let n=s.zl.get(d.h);n&&r.includes(n)&&(o.eD?o.eD.close({suppressReopening:!0,shouldForceClose:!0}):e.dispatch(c.$T({view:"recentsAndSharing"}))),e.dispatch(_())})(e,r)),m.hp.register(m.m6,({localFileKey:e,realFileKey:r})=>(0,u.Gc)(e,r))}},113853:(e,r,n)=>{n.d(r,{AY:()=>I,PI:()=>y,_E:()=>f,nx:()=>E,pI:()=>T,s6:()=>v});var a=n(299321),i=n(167249),o=n(1844),s=n(27087),l=n(881388),c=n(939863),d=n(392592),u=n(980820),m=n(99403),p=n(902957),h=n(196495);n(931770);var _=n(731078),g=n(56342);function f(e,r,n,a){let i=document.createElement("canvas"),o=i.getContext("2d");return i.width=i.height=r,o.fillStyle="image/png"===a?"transparent":"#FFF",o.fillRect(0,0,r,r),o.drawImage(i,0,0),o.drawImage(e,n.x,n.y,n.width,n.height),"image/png"===a?i.toDataURL():i.toDataURL("image/jpeg",.92)}function E(e){let r=atob(e.slice(e.indexOf(",")+1)),n=[];for(let e=0;e<r.length;e++)n.push(r[e].charCodeAt(0));return new Uint8Array(n)}let y=(0,i.N)("AVATAR_EDITOR_RESET"),b=(0,u.nF)((e,r)=>{if(r.entityType===_.ck.CURRENT_USER)s.Ay.put("/api/user",{img_url:r.smallUrl,img_url_500_500:r.largeUrl}).then(function({data:r}){let n=r.meta;n?.img_url&&a.h3O?.setImgUrl(n.img_url),e.dispatch(h.yJ({user:n,userInitiated:!1})),e.dispatch(y())},r=>{e.dispatch(l.s.error((0,c.t)("avatar_actions.editor_uploaded.an_error_occurred_while_setting_your_profile_photo"))),console.error((0,c.t)("avatar_actions.editor_uploaded.an_error_occurred_while_setting_your_profile_photo"),r),e.dispatch(y())});else if(r.entityType===_.ck.TEAM){let n=r.entity.id;s.Ay.put(`/api/teams/${n}`,{img_url:r.smallUrl,img_url_500_500:r.largeUrl}).then(function({data:r}){let n=r.meta;e.dispatch(p.yJ({team:n,userInitiated:!1})),e.dispatch(y()),e.dispatch(d.F.enqueue({message:(0,c.t)("avatar_actions.team_icon_updated")}))},r=>{e.dispatch(l.s.error((0,c.t)("avatar_actions.an_error_occurred_while_setting_the_team_icon"))),console.error((0,c.t)("avatar_actions.an_error_occurred_while_setting_the_team_icon")),e.dispatch(y())})}else if(r.entityType===_.ck.ORG){let n=r.entity.id;s.Ay.put(`/api/orgs/${n}`,{img_url:r.smallUrl,img_url_500_500:r.largeUrl}).then(function({data:r}){let n=r.meta;e.dispatch(m.yJ({org:n})),e.dispatch(y())},r=>{e.dispatch(l.s.error((0,c.t)("avatar_actions.an_error_occurred")+r.data?.message)),console.error((0,c.t)("avatar_actions.an_error_occurred_while_setting_the_organization_icon"),r),e.dispatch(y())})}else if(r.entityType===_.ck.WORKSPACE){let n=r.entity.id;g.u.updateImage({workspaceId:n,img_url:r.smallUrl,img_url_500_500:r.largeUrl,onfulfilled:()=>{e.dispatch(d.F.enqueue({message:(0,c.t)("avatar_actions.workspace_icon_updated")}))},onrejected:r=>{let n=(0,c.t)("avatar_actions.an_error_occurred_while_setting_the_workspace_icon");e.dispatch(l.s.error(n)),console.error(n),e.dispatch(y())}})}}),I=(0,i.N)("AVATAR_EDITOR_UPLOAD"),T=(0,u.nF)((e,r)=>{Promise.all([(0,o.Q)("profile",r.small,r.contentType),(0,o.Q)("profile",r.large,r.contentType)]).then(function(n){let a=n[0].data.meta.url,i=n[1].data.meta.url;e.dispatch(b({entity:r.entity,entityType:r.entityType,smallUrl:a,largeUrl:i}))},()=>{e.dispatch(l.s.error((0,c.t)("avatar_actions.an_error_occurred_while_uploading_the_image"))),e.dispatch(y())}),e.dispatch(I(r))}),v=(0,i.N)("AVATAR_EDITOR_INIT")},772167:(e,r,n)=>{n.d(r,{DI:()=>c,NY:()=>d,V2:()=>o,cL:()=>u,dY:()=>s,sV:()=>i,zx:()=>l});var a=n(167249);let i=(0,a.N)("CANVAS_SEARCH_SET_MODE"),o=(0,a.N)("CANVAS_SEARCH_SET_SCOPE"),s=(0,a.N)("CANVAS_SEARCH_CLEAR_CATEGORY_FILTERS"),l=(0,a.N)("CANVAS_SEARCH_SWITCH_CATEGORY_FILTER_EXCLUSIVE"),c=(0,a.N)("CANVAS_SEARCH_TOGGLE_CATEGORY_FILTER"),d=(0,a.N)("CANVAS_SEARCH_SET_QUERY"),u=(0,a.N)("CANVAS_SEARCH_RESET")},975350:(e,r,n)=>{n.d(r,{$0:()=>en,$M:()=>eA,AY:()=>V,At:()=>z,C:()=>F,CX:()=>ea,Df:()=>eM,F8:()=>ei,Fm:()=>ep,Jc:()=>eD,Mv:()=>W,NJ:()=>em,Oo:()=>eu,PB:()=>ew,Q8:()=>es,QD:()=>eR,QY:()=>B,Qe:()=>eh,RI:()=>ef,RO:()=>ev,RP:()=>ec,Tb:()=>G,U3:()=>eS,UU:()=>er,We:()=>eg,Z5:()=>eL,_B:()=>et,_v:()=>j,a$:()=>eo,bB:()=>X,cL:()=>eW,dB:()=>x,gi:()=>Z,hY:()=>Y,hx:()=>K,i4:()=>e_,js:()=>eK,k7:()=>eP,l5:()=>q,lI:()=>ee,lV:()=>Q,li:()=>ex,nL:()=>eE,nb:()=>eC,on:()=>eO,pD:()=>J,pI:()=>eV,q4:()=>eN,rW:()=>$,sQ:()=>ey,uy:()=>ek,uz:()=>eF,vV:()=>el,wJ:()=>eU,wg:()=>ed,xH:()=>eI,y3:()=>eB,yH:()=>eG,z$:()=>H});var a=n(299321),i=n(880934),o=n(167249),s=n(776250),l=n(609494),c=n(934480),d=n(966712),u=n(374626),m=n(827697),p=n(746746),h=n(776621),_=n(877432),g=n(27087),f=n(881388),E=n(939863),y=n(392592),b=n(980820),I=n(738269),T=n(792608),v=n(988022),S=n(277810),w=n(294167),A=n(356390),N=n(707465),C=n(440535),L=n(319882),O=n(917701),R=n(406457),P=n(662275),D=n(37943),k=n(801161),M=n(931828);async function F(e,r,n,a,i){await U(i.messageMeta,e,r,n,a).then(r=>{e(j({comment:i.comment,messageMeta:i.messageMeta,attachmentUpdates:i.attachmentUpdates,forceWithInvite:r,forceMention:r,onCommentValidationFailure:void 0}))}).catch(()=>{})}async function x(e,r,n,a,i,o,s,l){return await U(o.messageMeta,r,n,a,i).then(n=>{r(eD({threadId:o.threadId,reply:{messageMeta:o.messageMeta,attachments:o.attachments}})),r(Q({commentsWriteApi:e,threadId:o.threadId,threadUuid:o.threadUuid,uuid:s,forceWithInvite:n,forceMention:n,onCommentValidationFailure:void 0,commentsConfiguration:l}))}).catch(()=>{r(eN({threadId:o.threadId,resetStatusOnly:!0})),r(eD({threadId:o.threadId,reply:{messageMeta:o.messageMeta,attachments:o.attachments}}))})}function U(e,r,n,a,i){return new Promise(o=>{r((0,P.to)({type:R.VB,data:{messageMeta:e,dispatch:r,usersWithoutAccess:n,externalUsersWithoutAccess:a,uninvitableUsers:i,onConfirm:()=>o(!0),onCancel:()=>o(!1)}}))})}let B=(0,b.nF)((e,r)=>{let{receiptsAPI:n,comment:a}=r;n.markAsUnread(a.id).catch(r=>{let n=(0,E.t)("comments.an_error_occurred_while_marking_a_comment_as_unread");try{r=JSON.parse(r),e.dispatch(f.s.error((0,E.Jv)(r,n)))}catch(r){e.dispatch(f.s.error(n))}})}),V=(0,b.nF)((e,r)=>{let{receiptsAPI:n,thread:a}=r;n.markAsRead(a.comments.map(e=>e.id)).catch(r=>{let n=(0,E.t)("comments.an_error_occurred_while_marking_a_comment_as_read");try{r=JSON.parse(r),e.dispatch(f.s.error((0,E.Jv)(r,n)))}catch(r){e.dispatch(f.s.error(n))}})}),G=(0,b.nF)((e,r)=>{let{commentReceiptsAPI:n,canvasMentionReceiptsAPI:a}=r;n.markAllAsRead().catch(r=>{let n=(0,E.t)("comments.an_error_occurred_while_marking_a_comment_as_read");try{r=JSON.parse(r),e.dispatch(f.s.error((0,E.Jv)(r,n)))}catch(r){e.dispatch(f.s.error(n))}}),a.markAllAsRead().catch(r=>{let n=(0,E.t)("whiteboard.an_error_occurred_while_marking_a_canvas_mention_as_read");try{r=JSON.parse(r),e.dispatch(f.s.error((0,E.Jv)(r,n)))}catch(r){e.dispatch(f.s.error(n))}})});(0,b.nF)((e,r)=>{let{reactionsApi:n,id:a,emoji:i}=r,o=n.removeReaction(a,i),s=(0,E.t)("comments.an_error_occurred_while_removing_a_comment_reaction");e.dispatch((0,f.Q)({promise:o,fallbackError:s}))}),(0,b.nF)((e,r)=>{let n=e.getState(),{reactionsApi:a,id:i,emoji:o}=r,s=a.addReaction(i,o,{prototype_mode:"prototype"===n.selectedView.view,selectedView:n.selectedView.view,quickReply:!1}),l=(0,E.t)("comments.an_error_occurred_while_adding_a_comment_reaction");e.dispatch((0,f.Q)({promise:s,fallbackError:l}))});let H=(0,b.nF)((e,r)=>{let{reactionsApi:n,id:a}=r,{emoji:i}=r,o=e.getState();(0,c.uD)(i)&&null!==(0,c.$f)()&&(i=(0,c.Kh)(i)[0]+(0,c.$f)());let s=n.toggleReaction(a,i,{prototype_mode:"prototype"===o.selectedView.view,selectedView:o.selectedView.view,quickReply:r.quickReply}),l=(0,E.t)("comments.an_error_occurred_while_toggling_a_comment_reaction");e.dispatch((0,f.Q)({promise:s,fallbackError:l}))}),W=(0,b.nF)((e,r)=>{let n;let{comment:a}=r,{key:i,id:o,uuid:l,parent_id:c}=a,d=g.Ay.del(`/api/file/${i}/comments/${o}`),u=(0,E.t)("comments.an_error_occurred_while_deleting_this_comment");e.dispatch((0,f.Q)({promise:d,fallbackError:u})),T.O.remove(o),n=l?(0,m.WB)().optimisticallyDeleteWithUUID({Comment:{[l]:null}},d):(0,m.WB)().optimisticallyDelete({Comment:{[o]:null}},d),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"setDeleted",isOptimistic:!!l}),(0,p.f)(n,e.dispatch,eG({comment:{id:o,parent_id:c}}))}),K=(0,b.nF)((e,{thread:{key:r,id:n,uuid:a},resolved:i})=>{let o=e.getState();if(i&&o.comments.activeThread?.id===n&&!o.comments.showResolved&&e.dispatch(er()),(0,d.kc)().comments_undo_resolve&&i){let i={text:(0,E.t)("comments.undo"),action:()=>{e.dispatch(K({thread:{key:r,id:n,uuid:a},resolved:!1}))}};e.dispatch(y.F.enqueue({message:(0,E.t)("comments.comment_resolved"),type:"comment-resolved",button:i,onDismiss:()=>{}}))}T.O.remove(n);let c=i?"true":"false",u=i?(0,E.t)("comments.an_error_occurred_while_resolving_this_comment"):(0,E.t)("comments.an_error_occurred_while_unresolving_this_comment");if(a&&(0,l.L4)(n)){let n=(0,m.WB)().getIdFromUuid("Comment",a).then(n=>{let a=g.Ay.put(`/api/file/${r}/comments/${n}`,{resolved_at:c});return e.dispatch((0,f.Q)({promise:a,fallbackError:u})),a});(0,m.WB)().optimisticallyUpdateWithUUID({Comment:{[a]:{uuid:a,resolvedAt:i?new Date:null}}},n),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"setResolvedUsingGetIdFromUUID",isOptimistic:!0})}else{let o=g.Ay.put(`/api/file/${r}/comments/${n}`,{resolved_at:c});e.dispatch((0,f.Q)({promise:o,fallbackError:u})),a?(0,m.WB)().optimisticallyUpdateWithUUID({Comment:{[a]:{uuid:a,resolvedAt:i?new Date:null}}},o):(0,m.WB)().optimisticallyUpdate({Comment:{[n]:{resolvedAt:i?new Date:null}}},o),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"setResolved",isOptimistic:!!a})}}),Y=(0,b.nF)((e,{thread:{key:r,id:n,uuid:a},clientMeta:i})=>{let o;a&&(0,l.L4)(n)?(o=(0,m.WB)().getIdFromUuid("Comment",a).then(e=>g.Ay.put(`/api/file/${r}/comments/${e}`,{client_meta:i})),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"setClientMetaWithGetIdFromUUID",isOptimistic:!0})):(o=g.Ay.put(`/api/file/${r}/comments/${n}`,{client_meta:i}),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"setClientMeta",isOptimistic:!!a}));let c=(0,E.t)("comments.an_error_occurred_while_moving_this_comment");e.dispatch((0,f.Q)({promise:o,fallbackError:c})),a?(0,m.WB)().optimisticallyUpdateWithUUID({Comment:{[a]:{uuid:a,clientMeta:{x:i.x,y:i.y,pageId:void 0===i.page_id?null:i.page_id,nodeId:void 0===i.node_id?null:i.node_id,nodeOffset:void 0===i.node_offset?null:i.node_offset,inFrame:void 0===i.in_frame?null:i.in_frame,selectionBoxAnchor:i.selection_box_anchor?i.selection_box_anchor:null,stablePath:i.stable_path?i.stable_path:null}}}},o):(0,m.WB)().optimisticallyUpdate({Comment:{[n]:{clientMeta:{x:i.x,y:i.y,pageId:void 0===i.page_id?null:i.page_id,nodeId:void 0===i.node_id?null:i.node_id,nodeOffset:void 0===i.node_offset?null:i.node_offset,inFrame:void 0===i.in_frame?null:i.in_frame,selectionBoxAnchor:i.selection_box_anchor?i.selection_box_anchor:null,stablePath:i.stable_path?i.stable_path:null}}}},o)}),$=(0,o.N)("COMMENTS_SET_COMMENT_CONTENT"),j=(0,b.nF)((e,r)=>{let n=r.comment.key;if(!n||(0,l.I)(r.messageMeta)){e.dispatch($());return}let a=(0,l.cs)(r.messageMeta),i=g.Ay.put(`/api/file/${n}/comments/${r.comment.id}`,{message_meta:r.messageMeta,attachment_updates:(0,C.Gq)(r.attachmentUpdates),share_to_mentions:r.forceWithInvite||!1,force:r.forceMention||!1,pending_mentions:a}).then(({data:r})=>{r.message?.warning_message&&0!==r.message.warning_message.length&&e.dispatch(y.F.enqueue({type:"at-mention-error",message:r.message.warning_message}))}).catch(e=>{let n=e.data?.reason?.failure_info;e.data?.reason?.reason!=="comment_validation_failure"||void 0===n||!r.onCommentValidationFailure||r.forceMention||r.forceWithInvite||r.onCommentValidationFailure(n.users_without_view,n.ext_users_without_view,n.uninvitable_users,{comment:r.comment,messageMeta:r.messageMeta})}),o=(0,E.t)("comments.an_error_occurred_while_editing_this_comment");e.dispatch((0,f.Q)({promise:i,fallbackError:o}));let c=r.comment.uuid,d=(0,l.Rc)(r.messageMeta);if(c?(0,m.WB)().optimisticallyUpdateWithUUID({Comment:{[c]:{uuid:c,messageMeta:d,messageMetaStylized:d}}},i):(0,m.WB)().optimisticallyUpdate({Comment:{[r.comment.id]:{messageMeta:d,messageMetaStylized:d}}},i),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"updateCommentContent",isOptimistic:!!c}),r.attachmentUpdates){let e=(0,S.LO)(r.attachmentUpdates.deleted);e&&(0,m.WB)().optimisticallyDelete({CommentAttachment:e},i);let n=(0,S.Mu)(Object.values(r.attachmentUpdates.attachments),r.comment.key,r.comment.id);n&&(0,m.WB)().optimisticallyCreate({CommentAttachment:n},i)}e.dispatch($())}),z=(0,b.nF)(async(e,r)=>{let n=e.dispatch(q(r));if(!n||r.thread.isPendingFromSinatra)return;let o=r.thread.comments[0];if(!o)return;let l=e.getState(),c=o.client_meta?.node_id,d=o.client_meta?.stable_path?o.client_meta.stable_path:i.EP;!d&&c&&(d=[c]);let u=r.thread.id,m=r.source;o.client_meta?.page_id&&"communityHub"===l.selectedView.view&&(u!==l.selectedView.commentThreadId&&e.dispatch(I.$T({...l.selectedView,commentThreadId:u})),l.selectedView.commentThreadId&&(0,s.sx)("Comment Thread Read",{commentThreadId:u,threadType:"community_preview"})),await n,e.dispatch(ep({threadId:u,source:m})),r.thread.comments.some(e=>e.isUnread)&&r.receiptsAPI&&!r.thread.isPendingFromSinatra&&!r.thread.isCanvasMention&&(e.dispatch(V({receiptsAPI:r.receiptsAPI,thread:r.thread})),(0,s.sx)("Comment Thread Read",{commentThreadId:u})),"fullscreen"===l.selectedView.view&&a.glU.setActiveCommentAnchorData({stablePath:`[${d.join(",")}]`})}),q=(0,b.nF)((e,r)=>{let n=e.getState();if(n.comments.activeThread&&n.comments.activeThread.id!==r.thread.id&&!r.skipDeactivatingExistingActiveComment&&!e.dispatch(er()))return null;n=e.getState();let{thread:i,viewport:o,config:s,navigate:l,isOrphanedComment:c}=r,{setCurrentPageIdAsync:d,pageIdForNodeId:u}=o;if(!o.getViewportInfo())return null;let m=i.comments[0];if(!m)return null;let p=m.client_meta?.node_id,h=i.page||p&&u(p)||m.client_meta?.page_id,g=[],f=n.mirror?.appModel?.currentPage,E=!1;h&&(E=f!==h,g.push(d(h).then(async()=>{E&&await (0,_.yQ)()})));let y=n.mirror.appModel.currentTool===a.NLJ.COMMENTS;if(!c&&s.repositionViewportOnCommentSelection){let e=l((0,w.E)(i,o,n.selectedView,E,y),{jump:E,jumpOnAbort:!0});e&&g.push(e)}return Promise.all(g).then()}),X=(0,b.nF)((e,r)=>{let n=e.getState();n.comments.activeThread?.id===r.thread.id?e.dispatch(er()):(r.skipDeactivatingExistingActiveComment||e.dispatch(er()),(0,l.H3)(n.comments)&&(e.dispatch(z(r)),u.zl.set(L.J,!1)))}),J=(0,o.N)("COMMENTS_STOP_EDITING"),Z=(0,o.N)("COMMENTS_SUBMIT_REPLY"),Q=(0,b.nF)((e,r)=>{let n=e.getState(),{commentsWriteApi:i,commentsConfiguration:o}=r,s=n.comments.threads[r.threadId],[l,c]=i.reply({threadId:r.threadId,threadUuid:r.threadUuid,uuid:r.uuid,messageMeta:s.reply.messageMeta,attachments:Object.values(s.reply.attachments||{})},{forceMention:r.forceMention||!1,forceWithInvite:r.forceWithInvite||!1,prototypeMode:"prototype"===n.selectedView.view,trackingContext:r.trackingContext});(0,d.kc)().comments_faster_saving_ux&&!(0,d.kc)().comments_faster_saving_ux_v2&&e.dispatch(ex({commentUuid:r.uuid})),e.dispatch(eD({threadId:r.threadId,reply:{messageMeta:[],attachments:{}}})),l.then(r=>{if(!r)return;let{data:i}=r;if(i.message?.warning_message&&0!==i.message.warning_message.length&&e.dispatch(y.F.enqueue({type:"at-mention-error",message:i.message.warning_message})),i.message&&i.message.is_new_file_follower){let r=o.showNotificationSettings?{text:(0,E.t)("comments.manage"),action:()=>{let r=e.getState();e.dispatch(er()),r.mirror.appModel.showUi||A.Y5.triggerAction("toggle-ui"),r.mirror.appModel.currentTool!==a.NLJ.COMMENTS&&A.Y5.triggerAction("set-tool-comments"),requestAnimationFrame(()=>{e.dispatch(I.j7({type:O.a}))})}}:void 0;e.dispatch(y.F.enqueue({message:(0,E.t)("comments.you_will_be_notified_about_replies"),type:"comments-opted-in",button:r,onDismiss:()=>{}}))}let s=i.meta;e.dispatch(eH({comment:s,userInitiated:!1})),v.ds("Comment Submitted",s.key,n,{commentId:s.id,parentCommentId:s.id,selectedView:n.selectedView.view,isDevModeFocusView:!!e.getState().selectedView?.devModeFocusId}),(0,d.kc)().comments_faster_saving_ux_v2&&s.id&&s.uuid&&e.dispatch(eB({commentId:s.id,commentUuid:s.uuid})),e.getState().userFlags.has_created_comment||e.dispatch(M.b({has_created_comment:!0}))}).catch(n=>{let a=n.data?.reason?.failure_info;if(n.data?.reason?.reason!=="comment_validation_failure"||void 0===a||!r.onCommentValidationFailure||r.forceMention||r.forceWithInvite){let a=(0,E.Jv)(n,(0,E.t)("comments.an_error_occurred"));e.dispatch(f.s.error(a)),e.dispatch(eN({threadId:r.threadId,resetStatusOnly:!0})),e.dispatch(eD({threadId:r.threadId,reply:s.reply}));return}r.onCommentValidationFailure(a.users_without_view,a.ext_users_without_view,a.uninvitable_users,{threadId:r.threadId,messageMeta:s.reply.messageMeta,attachments:s.reply.attachments})}).finally(()=>{(0,d.kc)().comments_faster_saving_ux&&!(0,d.kc)().comments_faster_saving_ux_v2&&e.dispatch(eU({commentUuid:r.uuid}))}),e.dispatch(Z(r))}),ee=(0,o.N)("COMMENTS_SUBMIT_NEW_COMMENT"),et=(0,b.nF)((e,r)=>{(0,s.sx)("New comment starting dispatched action",{uuid:r.uuid});let n=e.getState(),i=(0,N.U2)(n.selectedView);if(!i)return Promise.resolve();let o=r.newCommentState||n.comments.newComment,{canvasPosition:l,nodeId:c,nodeOffset:u,inFrame:m,pageId:p,viewport:h,stablePath:_}=r.destination,g=o.selectionBoxAnchor?o.selectionBoxAnchor:void 0;e.dispatch(er({force:!0})),e.dispatch(eA({resetStatusOnly:!1}));let{messageMeta:f,attachments:b}=o;(0,s.sx)("New comment creating promise",{uuid:r.uuid});let[T,S]=r.commentsWriteApi.create({fileKey:i,messageMeta:f,attachments:Object.values(b),pageId:p,uuid:r.uuid,clientMeta:{x:l.x,y:l.y,node_id:c,node_offset:u,page_id:p,viewport:h,in_frame:m,selection_box_anchor:g,stable_path:_}},{prototypeMode:"prototype"===n.selectedView.view,onValidationError:async(r,n,a)=>{if(await U(o.messageMeta,e.dispatch,r,n,a))return{forceMentions:!0,forceWithInvite:!0};if(0!==e.getState().comments.newComment.messageMeta.length){e.dispatch(eA({resetStatusOnly:!0}));let r={text:(0,E.t)("comments.view"),action(r,n){if(e.getState().comments.activeThread?.id===C.hm&&e.getState().comments.newComment.messageMeta.length>0)return e.dispatch(eT()),e.dispatch(y.F.update({id:n,message:(0,E.t)("comments.finish_or_clear_your_active_comment_then_hit_view")})),!1;e.dispatch(ew(o)),e.dispatch(ea())}};e.dispatch(y.F.enqueue({type:`comment-creation-failure: ${S}`,error:!1,message:(0,E.t)("comments.oops_one_of_your_comments_never_posted"),onDismiss:()=>{},button:r,timeoutOverride:1/0}));return}e.dispatch(ew(o)),e.dispatch(ea()),e.dispatch(eT())}});return(0,d.kc)().comments_faster_saving_ux&&!(0,d.kc)().comments_faster_saving_ux_v2&&e.dispatch(ex({commentUuid:r.uuid})),e.dispatch(ee(r)),T.then(m=>{if((0,s.sx)("New comment promise resolved",{uuid:r.uuid}),!m)return;let{data:h}=m;if((0,N.U2)(e.getState().selectedView)!==i)return;if(h.message?.warning_message&&0!==h.message.warning_message.length&&e.dispatch(y.F.enqueue({type:"at-mention-error",message:h.message.warning_message})),h.message&&h.message.is_new_file_follower){let n=r.commentsConfiguration.showNotificationSettings?{text:(0,E.t)("comments.manage"),action:()=>{let r=e.getState();e.dispatch(er({force:!0})),r.mirror.appModel.showUi||A.Y5.triggerAction("toggle-ui"),r.mirror.appModel.currentTool!==a.NLJ.COMMENTS&&A.Y5.triggerAction("set-tool-comments"),requestAnimationFrame(()=>{e.dispatch(I.j7({type:O.a}))})}}:void 0;e.dispatch(y.F.enqueue({message:(0,E.t)("comments.you_will_be_notified_about_replies"),type:"comments-opted-in",button:n,onDismiss:()=>{}}))}let g=h.meta,f=e.getState().comments.newComment!==o;e.dispatch(eA({resetStatusOnly:f})),(0,d.kc)().comments_faster_saving_ux_v2&&g.id&&g.uuid&&e.dispatch(eB({commentId:g.id,commentUuid:g.uuid})),v.ds("Comment Submitted",i,n,{commentId:g.id,locationX:l&&l.x,locationY:l&&l.y,nodeId:c,pageId:p,nodeOffsetX:u&&u.x,nodeOffsetY:u&&u.y,selectedView:n.selectedView.view,stablePath:_,isDevModeFocusView:!!e.getState().selectedView?.devModeFocusId}),e.getState().userFlags.has_created_comment||e.dispatch(M.b({has_created_comment:!0})),e.dispatch((0,D.zq)({lastCreatedCommentId:g.id}))}).catch(n=>{if(e.dispatch(eA({resetStatusOnly:!0})),!(n?.data?.status>=400&&n?.data?.status<500&&n?.data?.message))return e.dispatch(y.F.enqueue({type:`comment-creation-failure: ${S}`,message:(0,E.t)("comments.couldn_t_post_your_comment"),error:!0,button:{text:(0,E.t)("comments.retry"),action(){(0,s.sx)("New comment dispatching retry submission",{uuid:r.uuid}),e.dispatch(et({...r,newCommentState:o}))}}}));{let r=(0,E.Jv)(n);if(r)return e.dispatch(y.F.enqueue({type:`comment-creation-failure: ${S}`,message:r,error:!0}))}}).finally(()=>{(0,d.kc)().comments_faster_saving_ux&&!(0,d.kc)().comments_faster_saving_ux_v2&&e.dispatch(eU({commentUuid:r.uuid}))})}),er=(0,b.nF)((e,r)=>{let n=e.getState(),o=r instanceof Object&&r.force,{newComment:s}=n.comments,c=n.comments.activeThread?.id,d=(0,l.Kx)(s.messageMeta)&&0===Object.keys(s.attachments).length;if(!o&&!d&&!(0,l.H3)(n.comments))return e.dispatch(eT()),!1;let u=c&&n.comments.threads[c],m=u&&(0,l.Kx)(u.reply.messageMeta)&&0===Object.keys(u.reply.attachments||{}).length;if(!o&&c&&u&&!m&&(!u.discardAttempts||u.discardAttempts<1))return e.dispatch(eb(c)),!1;let p=n.comments.editingComment;return!o&&p?(e.dispatch(eb(p.id)),!1):("fullscreen"===n.selectedView.view&&a.glU.setActiveCommentAnchorData({stablePath:i.x7}),"communityHub"===n.selectedView.view&&e.dispatch(I.$T({...n.selectedView,commentThreadId:void 0})),e.dispatch(eW()),e.dispatch(eK()),e.dispatch(eA({resetStatusOnly:!1})),n.tooltip&&e.dispatch(k.jD()),!0)}),en=(0,o.N)("COMMENTS_SET_NEW_COMMENT_ACTIVE"),ea=(0,b.nF)((e,r)=>{let n=e.getState();if("fullscreen"===n.selectedView.view){if(n.comments.newComment.anchorPosition){let{x:e,y:i}=n.comments.newComment.anchorPosition,o=r?.stablePath;o?a.glU.setActiveCommentAnchorData({stablePath:`[${o.join(",")}]`}):a.glU.setActiveCommentAnchorData(a.glU.getCommentAnchorDataAtPosition(e,i))}else a.glU.setActiveCommentAnchorData({stablePath:i.x7})}e.dispatch(en(r))}),ei=(0,o.N)("COMMENTS_SET_NEW_SELECTION_BOX_ANCHOR_POSITION"),eo=(0,b.nF)((e,r)=>{e.getState().userFlags.has_created_selection_comment||e.dispatch(M.b({has_created_selection_comment:!0})),e.dispatch(ei(r))}),es=(0,o.N)("COMMENTS_SET_NEW_ANCHOR_POSITION"),el=(0,b.nF)((e,r)=>{if("fullscreen"===e.getState().selectedView.view){let{x:e,y:n}=r.anchorPosition;a.glU.setActiveCommentAnchorData(a.glU.getCommentAnchorDataAtPosition(e,n))}e.dispatch(es(r))}),ec=(0,o.N)("COMMENTS_REMOVE_HOVERED_PIN"),ed=(0,o.N)("COMMENTS_ADD_HOVERED_PIN"),eu=(0,o.N)("COMMENTS_REMOVE_EMPHASIZED_PIN"),em=(0,o.N)("COMMENTS_ADD_EMPHASIZED_PIN"),ep=(0,o.N)("COMMENTS_SET_ACTIVE"),eh=(0,b.nF)(e=>{let r=e.getState(),n=r.selectedView;"subView"in n&&("hubFile"===n.subView||"plugin"===n.subView)&&(0,s.sx)("at_mention_search_started",{comment_type:r.comments.activeThread?.id?"community_pinned":"community_general",profile_id:r.user?.community_profile_id,resource_id:"hubFile"===n.subView?n.hubFileId:n.publishedPluginId,resource_type:"hubFile"===n.subView?"hub_file":"plugin"})}),e_=(0,o.N)("COMMENTS_SET_TYPEAHEAD_POSITION_OFFSET"),eg=(0,o.N)("COMMENTS_SET_TYPEAHEAD"),ef=(0,o.N)("COMMENTS_SHOW_EMOJI_PICKER"),eE=(0,o.N)("COMMENTS_SET_ACTIVE_SORT"),ey=(0,o.N)("COMMENTS_DISCARD_COMMENT_REPLY_ATTEMPT"),eb=(0,b.nF)((e,r)=>{let n=e.getState().comments,a=n.activeThread?.id,i=a&&n.threads[a];if(i&&i.discardAttempts===l.B2){let e=(0,l._Z)(i.reply.messageMeta),r=(0,l.Kx)(i.reply.messageMeta);(0,h.Lo)("Comment discard active thread attempt","comment info",{threadId:a,messageLength:e.length,isMessageDiscardable:r}),(0,h.kF)("isMessageDiscardable",String(r)),(0,h.kF)("messageType","reply"),(0,h.us)("User attempted to close comments more than max attempt times")}e.dispatch(ey(r))}),eI=(0,o.N)("COMMENTS_DISCARD_NEW_COMMENT_ATTEMPT"),eT=(0,b.nF)(e=>{let r=e.getState().comments.newComment;if(r.discardAttempt===l.B2){let e=(0,l._Z)(r.messageMeta),n=(0,l.Kx)(r.messageMeta);(0,h.Lo)("Comment discard new comment attempt","comment info",{messageLength:e.length,isMessageDiscardable:n}),(0,h.kF)("isMessageDiscardable",String(n)),(0,h.kF)("messageType","new"),(0,h.us)("User attempted to close comments more than max attempt times")}e.dispatch(eI())}),ev=(0,o.N)("COMMENTS_SET_SHOW_ONLY_MY_COMMENTS"),eS=(0,o.N)("COMMENTS_SET_SHOW_RESOLVED_COMMENTS"),ew=(0,o.N)("COMMENTS_REVERT_NEW_COMMENT"),eA=(0,o.N)("COMMENTS_RESET_NEW_COMMENT"),eN=(0,o.N)("COMMENTS_RESET_THREAD"),eC=(0,o.N)("COMMENTS_SET_NEW_COMMENT_ATTACHMENT"),eL=(0,o.N)("COMMENTS_SET_NEW_COMMENT_MESSAGE"),eO=(0,o.N)("COMMENTS_SET_NEW_COMMENT"),eR=(0,o.N)("COMMENTS_SET_REPLY_ATTACHMENT"),eP=(0,o.N)("COMMENTS_SET_REPLY_MESSAGE"),eD=(0,o.N)("COMMENTS_SET_REPLY"),ek=(0,o.N)("COMMENTS_SET_EDITING_ATTACHMENT"),eM=(0,o.N)("COMMENTS_SET_EDITING"),eF=(0,o.N)("COMMENTS_SET_ACTIVE_DRAG_TARGET"),ex=(0,o.N)("COMMENTS_SET_SAVING"),eU=(0,o.N)("COMMENTS_CLEAR_SAVING"),eB=(0,o.N)("COMMENTS_STORE_SERVER_ID_FOR_LG_PENDING_UUID"),eV=(0,o.N)("COMMENTS_CLEAR_LG_PENDING_UUID"),eG=(0,o.N)("COMMENTS_DEL"),eH=(0,b.nF)((e,r)=>{let n=e.dispatch,a=e.getState(),{comment:i}=r;if(a.user&&a.user.id===i.user_id&&!r.userInitiated){if(i.parent_id){let e=a.comments.threads[i.parent_id];if(e&&e.state===C.EB.BUSY){let a=!function(e,r){if(!e)return!r;if(!r)return!e;if(e.length!==r.length)return!1;for(var n=0;n<e.length;n++){let a=e[n],i=r[n],o=new Set(Object.keys(a)),s=Object.keys(i);if(o.size!==s.length||!s.every(e=>!!o.has(e)&&a[e]===i[e]))return!1}return!0}(r.comment.message_meta,e.reply.messageMeta);n(eN({threadId:i.parent_id,resetStatusOnly:a}))}}else{let e=a.comments.newComment;e&&e.state===C.EB.BUSY&&n(er({force:!0})),n(eA({resetStatusOnly:!1}))}}}),eW=(0,o.N)("COMMENTS_RESET"),eK=(0,o.N)("COMMENTS_RESET_ACTIVE_ID")},63397:(e,r,n)=>{n.d(r,{Ad:()=>F,Ch:()=>O,Dg:()=>D,Hx:()=>H,LO:()=>K,RS:()=>k,Rx:()=>M,X2:()=>er,Zj:()=>B,_8:()=>Y,_F:()=>G,aP:()=>J,cO:()=>x,cR:()=>P,d6:()=>en,dL:()=>j,dv:()=>Q,e6:()=>ee,eg:()=>et,gT:()=>z,h1:()=>X,ig:()=>V,oB:()=>Z,qo:()=>$,r1:()=>U,rO:()=>R,vQ:()=>q});var a=n(167249),i=n(776250),o=n(183297),s=n(27087),l=n(881388),c=n(939863),d=n(123026),u=n(392592),m=n(837324),p=n(913270),h=n(980820),_=n(975350),g=n(738269),f=n(507877),E=n(994988),y=n(99403),b=n(506513),I=n(697551),T=n(147206),v=n(320741),S=n(935757),w=n(440535),A=n(555328),N=n(66037),C=n(746058),L=n(651705);let O=(0,a.N)("COMMUNITY_HUB_SHOW_ADMIN_PROFILE_BANNER"),R=(0,a.N)("COMMUNITY_HUB_HIDE_ADMIN_PROFILE_BANNER"),P=d.cR,D=(0,h.nF)((e,r)=>{let n;let{user:a,authedUsers:o,orgUsersByOrgId:s,authedTeamsById:l,teamAdminRolesForAuthedUsers:d,authedProfilesById:m,selectedView:h,currentUserOrgId:_}=e.getState(),E=r.profileId?m[r.profileId]:null,y=r.view&&(!E||(0,I.UK)(E,r.view))?r.view:{view:"communityHub",subView:"searchAndBrowse",data:(0,p.Gu)()};if(!E){e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.profile_not_found"),type:"COMMUNITY_PROFILE_ERROR"})),e.dispatch(g.$T(y));return}let b=_;if(E.org_id){b=E.org_id;let e=s[E.org_id];n=Object.keys(o.byId).find(r=>{let n=e[r];if(n&&(0,T.Ay)(n.permission)>=N.jh.ADMIN)return n.user_id})}else E.team_id?(b=l[E.team_id]?.org_id||null,n=Object.keys(o.byId).find(e=>{let r=d[e];return r?.find(e=>e.team_id===E.team_id)?.user_id})):n=E.primary_user_id===a?.id?a?.id:o.orderedIds.find(e=>E.associated_users?.find(r=>r.user_id===e)?.user_id);if((0,S.Il)(E.id),(0,i.sx)("Community profile IA switched",{profileId:E.id,view:h.view}),e.dispatch(P(E)),e.dispatch(O()),n&&(n!==a?.id||_!==b)){let r={userId:n,orgId:b};e.dispatch(f._l({workspace:r,view:y}))}else e.dispatch(g.$T(y))}),k=(0,a.N)("COMMUNITY_HUB_ADD_FOLLOW"),M=(0,a.N)("COMMUNITY_HUB_DELETE_FOLLOW"),F=(0,a.N)("COMMUNITY_HUB_SAVE_PAGE_STATE"),x=(0,a.N)("COMMUNITY_HUB_RESET_COMMENT_STATE"),U=(0,a.N)("COMMUNITY_HUB_SET_COMMENTS"),B=(0,a.N)("COMMUNITY_HUB_SET_COMMENTS_ACTIVE_FEED_TYPE"),V=(0,a.N)("COMMUNITY_HUB_SET_COMMENT_REPLIES"),G=(0,a.N)("COMMUNITY_HUB_FLUSH_NEW_COMMENTS_QUEUE"),H=(0,a.N)("COMMENTS_INSERT_COMMUNITY_MENTION"),W=(e,r)=>{let n=/\?/.test(e)?"&":"?";return e+`${n}${r}`};(0,h.nF)((e,r)=>{if(!(0,o.u9)(r))return;let n=`/api/${(0,I.n)(r.resourceType)}/${r.resourceId}/comments`;r.selectedCommentId&&r.selectedCommentId!==w.hm&&!r.pagination?.selected_comment&&(n=W(n,`selected_comment_id=${r.selectedCommentId}`)),r.activeFeedType===A.Qv.ME&&(n=W(n,`feed_type=${r.activeFeedType}`),void 0===r.numCommentsForResource&&(n=W(n,"include_total_count=true"))),(0,o.En)(n,r.pageSizeOverride??o.vs,r,o.AS).then(e=>{let n=!e.selected_comment||e.comments.find(r=>r.id===e.selected_comment?.id),{commentsById:a,authorsById:i,feed:o}=(0,I.HR)(n?e.comments:[...e.comments,e.selected_comment]),s=e.pagination;e.selected_comment&&(s.selected_comment=e.selected_comment);let l={...e,pagination:e.pagination,totalNumberOfComments:e.total_count,commentsById:a,authorsById:i,feed:o,activeFeedType:r.activeFeedType,type:r.resourceType,id:r.resourceId,mentionedProfiles:e.mentioned_profiles};e.selected_comment&&(l.selectedCommentId=e.selected_comment.id),r.onSuccess&&r.onSuccess(l)}).catch(n=>{e.dispatch(l.s.error((0,c.t)("community.actions.unable_to_fetch_comments"))),r.onError&&r.onError()})});let K=(0,a.N)("COMMUNITY_HUB_RESTRICT_PROFILE"),Y=(0,h.nF)((e,{profileId:r,blockedProfileId:n,onSuccess:a})=>{s.Ay.post(`/api/profile/${n}/block`,{block_type:"restrict",profile_id:r}).then(()=>{a&&a()}).catch(r=>{let n=(0,c.Jv)(r);n&&e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.couldnt_restrict_profile_error",{error:n}),type:"RESTRICT_PROFILE_ERROR"}))}),e.dispatch(K({profileId:r,blockedProfileId:n,onSuccess:a}))}),$=(0,a.N)("COMMUNITY_HUB_UNRESTRICT_PROFILE"),j=(0,h.nF)((e,{profileId:r,blockedProfileId:n,onSuccess:a})=>{s.Ay.del(`/api/profile/${n}/block`,{block_type:"restrict",profile_id:r}).then(()=>{a&&a()}).catch(r=>{let n=(0,c.Jv)(r);n&&e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.couldnt_unrestrict_profile_error",{error:n}),type:"UNRESTRICT_PROFILE_ERROR"}))}),e.dispatch($({profileId:r,blockedProfileId:n,onSuccess:a}))}),z=(0,a.N)("COMMUNITY_HUB_SET_COMMENT_STATE");(0,h.nF)((e,r)=>{let{id:n,type:a}=r;(n!==e.getState().communityHub.comments.id||a!==e.getState().communityHub.comments.type)&&e.dispatch(x()),e.dispatch(U(r)),e.dispatch(z(r))}),(0,h.nF)((e,{profileId:r,on404Redirect:n},{loadingKey:a})=>{let i=C.s.getProfile({profileId:r});(0,v.N)(i,e,a),i.then(({data:r})=>{e.dispatch(L.Oo(r.meta.profile)),e.dispatch(g.$T(e.getState().selectedView))}).catch(r=>(404===r.status&&n?n():e.dispatch(l.s.error((0,c.t)("community.actions.error_fetching_profile_information"))),null))}),(0,h.nF)((e,{handle:r,on404Redirect:n},{loadingKey:a})=>{let i=e.getState().currentUserOrgId,o=C.s.getHandle({currentOrgId:i||void 0,handle:r});(0,v.N)(o,e,a),o.then(({data:r})=>{e.dispatch(L.Oo(r.meta.profile))}).catch(({data:r})=>{r?.status===404&&n&&n(),e.dispatch(l.s.error((0,c.t)("community.actions.error_fetching_profile_information")))})},({handle:e})=>`COMMUNITY_HUB_GET_PROFILE_BY_HANDLE_${e}`);let q=(0,h.nF)((e,r,{loadingKey:n})=>{let{website:a,description:i,location:o,profileHandle:d,onSuccess:u,userId:m,teamId:p,orgId:h}=r,_=s.Ay.post("/api/profile",{website:a,description:i,location:o,profile_handle:d,primary_user_id:m,team_id:p,org_id:h});(0,v.N)(_,e,n),_.then(({data:r})=>{e.dispatch(L.HZ(r.meta)),e.dispatch(L.Oo(r.meta));let{currentUserOrgId:n,orgById:a}=e.getState(),i=n&&a[n];n&&i&&n===h&&e.dispatch(y.F6({id:n,community_profile_handle:r.meta.profile_handle,community_profile_id:r.meta.id})),u&&u(e)}).catch(r=>{let n=(0,c.Jv)(r);n&&e.dispatch(l.s.error(n))})},({userId:e})=>`COMMUNITY_HUB_CREATE_PROFILE_${e}`),X=(0,h.nF)((e,r)=>{s.Ay.post("/api/profile/generate_handle").then(({data:n})=>{e.dispatch(L.HZ(n.meta)),e.dispatch(L.Oo(n.meta)),r.onSuccess&&r.onSuccess(e)}).catch(({data:r})=>{e.dispatch(l.s.error(r.message))})}),J=(0,h.nF)((e,r,{loadingKey:n})=>{let{website:a,twitter:i,instagram:o,pronouns:d,description:p,location:h,profileId:_,profileHandle:f,onSuccess:E}=r,b=e.getState().communityHub.currentProfile;if(_===b?.id&&Object.entries(r).every(([e,r])=>void 0===r||e in b&&b[e]===r))return;let T=i?.trim(),S=o?.trim();if(T&&b?.twitter!==T&&!m.HD.test(T)){e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.your_twitter_handle_is_not_valid",{handle:T}),error:!0}));return}if(S&&b?.instagram!==S&&!m.Co.test(S)){e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.your_instagram_handle_is_not_valid",{handle:S}),error:!0}));return}let w=s.Ay.put(`/api/profile/${_}`,{website:a,twitter:T,instagram:S,pronouns:d,description:p,location:h,profile_handle:f});(0,v.N)(w,e,n);let A=e.getState().user?.community_profile_handle;w.then(({data:n})=>{let{communityHub:a,currentUserOrgId:i,orgById:o}=e.getState();a.currentProfile?.id===n.meta.id&&e.dispatch(L.Oo(n.meta));let s=o[i];if(s&&"string"==typeof s.id&&s.id===n.meta.org_id&&e.dispatch(y.F6({id:n.meta.org_id,community_profile_handle:n.meta.profile_handle})),f){let r=e.getState().selectedView;(0,I.Cj)(r)&&r?.handle===A&&e.dispatch(g.$T({view:"communityHub",subView:"handle",handle:f})),n.meta.primary_user_id?e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.your_profile_handle_was_set_to_profile_handle",{profileHandle:f}),type:"profile-handle"})):n.meta.team_id?e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.your_team_s_handle_was_set_to_profile_handle",{profileHandle:f}),type:"team-handle"})):n.meta.org_id&&e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.your_organization_s_handle_was_set_to_profile_handle",{profileHandle:f}),type:"org-handle"}))}["twitter","location","instagram","website","description"].forEach(a=>{if(a in n.meta&&a in r){let r={twitter:(0,c.t)("community.actions.your_twitter_handle_was_updated"),location:(0,c.t)("community.actions.your_location_was_updated"),instagram:(0,c.t)("community.actions.your_instagram_handle_was_updated"),website:(0,c.t)("community.actions.your_website_url_was_updated"),description:(0,c.t)("community.actions.your_description_was_updated")};e.dispatch(u.F.enqueue({message:r[a],type:"profile-updated"}))}}),E&&E(e)}).catch(r=>{let n=(0,c.Jv)(r);n&&e.dispatch(l.s.error(n))})},({profileId:e})=>`COMMUNITY_HUB_UPDATE_PROFILE_${e}`),Z=(0,h.nF)((e,r,{loadingKey:n})=>{let{profileId:a,handle:i}=r;s.Ay.del(`/api/profile/${a}`).then(()=>{e.dispatch(L.cr(i));let{currentUserOrgId:r,orgById:n}=e.getState(),o=r&&n[r];r&&o&&o.community_profile_id===a&&e.dispatch(y.F6({id:r,community_profile_handle:void 0,community_profile_id:void 0})),e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.profile_deleted")}))}).catch(()=>{e.dispatch(l.s.error((0,c.t)("community.actions.unable_to_delete_profile_please_try_again_later")))})});(0,h.nF)(async(e,{file:r,profileId:n,onSuccessCallback:a},{loadingKey:i})=>{let o=(0,b.c)(r).then(e=>(function(e,r,n,a){return r?s.Ay.post(e).then(({data:e})=>e.meta).then(async({cover_image_path:e,signature:r,fields:n})=>{let i=new FormData;return n&&Object.entries(n).forEach(([e,r])=>i.append(e,r)),i.set("content-type",a.type),i.append("file",a),await fetch(e,{method:"POST",body:i}),{cover_image_path:e,signature:r}}):Promise.resolve({cover_image_path:"",signature:""})})(`/api/profile/${n}/upload`,e,r.type,r));(0,v.N)(o,e,i),await o.then(({signature:e})=>s.Ay.put(`/api/profile/${n}`,{signature:e})).then(({data:r})=>{e.dispatch(L.Oo(r.meta)),a()}).catch(r=>{e.dispatch(l.s.error(r?(0,c.t)("community.actions.an_error_occurred_with_error",{error:r}):(0,c.t)("community.actions.an_error_occurred")))})},({profileId:e})=>`COMMUNITY_HUB_UPLOAD_PROFILE_COVER_IMAGE_${e}`);let Q=(0,a.N)("COMMUNTY_HUB_FOLLOW_ENTITY"),ee=(0,h.nF)(async(e,r,{loadingKey:n})=>{let a=s.Ay.put("/api/follows",{followed_profile_id:r});(0,v.N)(a,e,n),await a.then(({data:n})=>{e.getState().user?.community_profile_id&&(e.dispatch(k({followedProfileId:r,currentUserProfileId:e.getState().user?.community_profile_id})),e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.followed_profile_name",{profileName:n.meta.followed_profile.name}),type:"COMMUNITY_HUB_FOLLOW"})))}).catch(r=>{let n=(0,c.Jv)(r);n&&e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.unable_to_follow_this_profile_profile_name",{profileName:n}),type:"COMMUNITY_HUB_FOLLOW_FAILED",error:!0}))}),e.dispatch(Q(r))},e=>`COMMUNTY_HUB_FOLLOW_ENTITY_${e}`),et=(0,a.N)("COMMUNTY_HUB_UNFOLLOW_ENTITY"),er=(0,h.nF)((e,r,{loadingKey:n})=>{let a=s.Ay.del("/api/follows",{followed_profile_id:r});(0,v.N)(a,e,n),a.then(()=>{e.getState().user?.community_profile_id&&(e.dispatch(M({followedProfileId:r,currentUserProfileId:e.getState().user?.community_profile_id})),e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.unfollowed_profile"),type:"COMMUNITY_HUB_UNFOLLOW"})))}).catch(r=>{let n=(0,c.Jv)(r);n&&e.dispatch(u.F.enqueue({message:`Unable to unfollow this profile: ${n}`,type:"COMMUNITY_HUB_UNFOLLOW_FAILED",error:!0}))}),e.dispatch(et(r))},e=>`COMMUNTY_HUB_UNFOLLOW_ENTITY_${e}`);function en(e){return{updateStatus:(0,a.N)(`${e}_UPDATE_PUBLISH_STATUS`),updateMetadata:(0,a.N)(`${e}_UPDATE_PUBLISH_METADATA`),clearMetadata:(0,a.N)(`${e}_CLEAR_PUBLISH_METADATA`),clearMetadataAndStatus:(0,a.N)(`${e}_CLEAR_PUBLISHING`)}}(0,h.nF)(async(e,r)=>{let n;let{thread:a,resolved:i}=r,o=e.getState();i&&o.comments.activeThread?.id===a.id&&!o.comments.showResolved&&e.dispatch(_.UU()),n=i?s.Ay.put(`/api/community_comments/${a.id}/resolve`):s.Ay.put(`/api/community_comments/${a.id}/unresolve`),await n.then(({data:r})=>{e.dispatch(E.kE({comment:{id:a.id,resolved_at:r.meta.resolved_at}}))}).catch(r=>{e.dispatch(u.F.enqueue({error:!0,message:i?(0,c.t)("community.actions.failed_to_resolve_comment"):(0,c.t)("community.actions.failed_to_unresolve_comment")}))})})},609219:(e,r,n)=>{n.d(r,{M2:()=>h,Sp:()=>m,k3:()=>p});var a=n(167249),i=n(776621),o=n(286640),s=n(466636),l=n(980820),c=n(320741),d=n(596578);(0,l.nF)((e,r)=>{let{payments:n,source:a}=r,l=e.getState().user?.id;if(!l||!n)return;let c=n.filter(s.QQ),d=`${u}_${l}`,m=o.TQ()?.getItem(d);if(m){let e=JSON.parse(m);if(Array.isArray(e)){let r=new Set(c.map(e=>e.monetized_resource_metadata_id)),o=e.map(e=>e.monetized_resource_metadata_id).filter(e=>!r.has(e));o.length&&(0,i.x1)("community","[ActivePayments] mismatch detected",{source:a,userId:l,revoked:o,previousPayments:e,currentPayments:n},{reportAsSentryError:!0})}}let p=JSON.stringify(c);o.TQ()?.setItem(d,p)});let u="debug_succeeded_payments";(0,l.nF)((e,r,{loadingKey:n})=>{let a=d.C.getBuyerActivePayments();(0,c.N)(a,e,n),a.then(({data:r})=>{e.dispatch(h(r.meta))}).catch(()=>{})});let m=(0,a.N)("M10N_DEL_ACTIVE_USER_PAYMENT"),p=(0,a.N)("M10N_REALTIME_ACTIVE_USER_PAYMENT"),h=(0,a.N)("M10N_SET_ACTIVE_USER_PAYMENTS")},384162:(e,r,n)=>{n.d(r,{sz:()=>h,wJ:()=>p});var a=n(167249),i=n(776621),o=n(868389),s=n(84336),l=n(980820),c=n(697551),d=n(320741),u=n(555328),m=n(222085);let p=(0,a.N)("COMMUNITY_SET_SHELVES_FOR_SHELF_TYPE"),h=(0,l.nF)((e,{shelfType:r,limit:n},{loadingKey:a})=>{let o={shelfType:r,limitShelfContent:n},s=m.A.getCommunityShelves(o);(0,d.N)(s,e,a),s.then(({data:n})=>{let a=n.meta;a.forEach(r=>_(e.dispatch,r.shelf_content)),e.dispatch(p({shelfType:r,shelves:a}))}).catch(e=>{(0,i.x1)("collections","error fetching collections",{...o,error:e.toString()})})},({shelfType:e,limit:r})=>`COMMUNITY_FETCH_SHELVES_FOR_SHELF_TYPE_${e}_${r}`);function _(e,r){let n=[],a=[],i=[];r.forEach(e=>{let r=(0,c.x1)(e);r===u.Ug.HUB_FILE?n.push(e):r===u.Ug.PLUGIN?a.push(e):r===u.Ug.WIDGET&&i.push(e)}),e((0,o.Sb)({hubFiles:n,src:"fetchShelvesForShelfType"})),e((0,s.Qi)({publishedPlugins:[...a,...i],src:"fetchShelvesForShelfType"}))}(0,l.nF)((e,{shelfType:r,filterLabel:n,limit:a},{loadingKey:i})=>{let o=m.A.getCommunityShelves({shelfType:r,filterLabel:n,limitShelfContent:a});(0,d.N)(o,e,i),o.then(({data:n})=>{let a=n.meta;a.forEach(r=>_(e.dispatch,r.shelf_content)),e.dispatch(p({shelfType:r,shelves:a}))})},({shelfType:e,filterLabel:r,limit:n})=>`COMMUNITY_FETCH_SHELVES_FOR_SHELF_TYPE_AND_FILTER_LABEL_${e}_${r}_${n}`)},410424:(e,r,n)=>{n.d(r,{Af:()=>ed,D3:()=>S.D3,FO:()=>eu,L1:()=>S.L1,N4:()=>eN,QA:()=>em,Ri:()=>ec,Sb:()=>S.Sb,VS:()=>eI,ax:()=>eC,bk:()=>eS,eq:()=>eh,i9:()=>ew,oO:()=>ev,p7:()=>eg,rH:()=>ey,rL:()=>ef,sW:()=>eD,ts:()=>eE,wO:()=>eb,yh:()=>eL});var a=n(414507),i=n(299321),o=n(259120),s=n(167249),l=n(776250),c=n(511617),d=n(737947),u=n(404843),m=n(966712),p=n(374626),h=n(827697),_=n(752553),g=n(563706),f=n(776621),E=n(27087),y=n(761870),b=n(881388),I=n(939863),T=n(392592),v=n(749949),S=n(868389),w=n(776397),A=n(980820),N=n(63397),C=n(944682),L=n(738269),O=n(837900),R=n(662275),P=n(404717),D=n(986270),k=n(936500),M=n(107877),F=n(453909),x=n(988022),U=n(697551),B=n(782501),V=n(661060),G=n(820642),H=n(132135),W=n(99506),K=n(540019),Y=n(962155),$=n(320741),j=n(973131),z=n(284321),q=n(984968),X=n(813408),J=n(809073),Z=n(637590),Q=n(851363),ee=n(596578),et=n(955617),er=n(301400),en=n(793670),ea=n(474062),ei=n(953289),eo=n(662268),es=n(651705);let el=n(876401).ZS,ec=(0,s.N)("PUT_FIG_FILE_PUBLISHED_AS_HUB_FILE"),ed=(0,s.N)("UPDATE_HUB_FILE_PAGE_TITILE"),eu=(0,s.N)("DEL_FIG_FILE_PUBLISHED_AS_HUB_FILE"),em=(0,s.N)("PUT_FIG_FILE_DUPLICATE_FROM_HUB_FILE"),ep=(0,s.N)("DEL_FIG_FILE_DUPLICATE_FROM_HUB_FILE"),eh=(0,s.N)("HUB_FILE_PUT_HUB_FILE_REMIX"),e_=e=>{let r=(0,I.t)("community.actions.log_in_or_create_an_account_to_duplicate_this_file");if(g.rr){window.location.href="/login";return}e.dispatch(y.Ts({origin})),e.dispatch(R.to({type:en.x,data:{headerText:r}}))},eg=(0,A.nF)((e,r,{loadingKey:n})=>{let a=e.getState();if(!a.user){e_(e);return}let i={headers:{...E.Ay.defaults.headers,"X-Figma-User-ID":r.workspace.userId}},o=E.Ay.post(`/api/hub_files/v2/${r.hubFileId}/copy`,{org_id:r.workspace.orgId},i);(0,$.N)(o,e,n),o.then(({data:n})=>{let i=n.meta;(0,l.sx)(M.M5.HUB_FILE_DUPLICATED,{hubFileId:r.hubFileId,figFileKey:i.key,searchSessionId:(0,v.w)(a)}),"whiteboard"===i.editor_type&&e.dispatch(D.Hx({storeInRecentsKey:J.$A.FigJam,id:r.hubFileId,type:J.vt.CommunityResource}));let o=(0,H.to)(i);o=(0,c.dR)(o,{[G.pt.KEY]:G.pt.VALUE,fuid:r.workspace.userId}),d.Ay.redirect(o,g.rr?void 0:"_blank"),e.dispatch(L.oB())}).catch(r=>{e.dispatch(T.F.enqueue({error:!0,message:(0,I.t)("community.actions.failed_to_duplicate_file_error",{error:(0,I.Jv)(r,(0,I.t)("community.actions.try_again_or_contact_support_figma_com"))})}))})},({hubFileId:e})=>`DUPLICATE_HUB_FILE_${e}`),ef=(0,A.nF)((e,r)=>{let{canRetry:n=!0}=r,a=e.getState(),i=a.currentUserOrgId,o=(0,m.kc)().ps_benchmark?a.currentTeamId:null;if(r.folderId){let n=a.folders[r.folderId]?.team_id,i=n?a.teams[n]:null,o=(0,F.N)(a.hubFiles[r.hubFileId].viewer_mode),s=function(e){switch(e){case W._Y.WHITEBOARD:return{type:q.sK.ADD_FIGJAM_FILE};case W._Y.SLIDES:return{type:q.sK.ADD_SLIDES_FILE};default:return{type:q.sK.ADD_DESIGN_FILE}}}(o);if(i&&!(0,q.rR)(i,s)){e.dispatch(R.to({type:ea.Y,data:{teamId:i.id,createInDrafts:()=>{e.dispatch(ef({...r,folderId:void 0}))},teamName:i.name,editorType:o,dispatch:e.dispatch,action:Q.ZN.CREATE_FILE_FROM_TEMPLATE}}));return}}return E.Ay.post(`/api/hub_files/template/${r.hubFileId}/copy`,{folder_id:r.folderId,org_id:i,team_id:o||void 0}).then(({data:n})=>{let i=n.meta;(0,x.f5)("File Created",i,{selectedView:a.selectedView},{source:r.source}),r.callback&&r.callback(i?.key),"whiteboard"===i.editor_type&&e.dispatch(D.Hx({storeInRecentsKey:J.$A.FigJam,id:r.hubFileId,type:J.vt.CommunityResource}));let o=(0,H.to)(i);d.Ay.redirect(o,r.openInNewTab&&!g.rr?"_blank":void 0)}).catch(a=>{let i={error:!0,message:(0,I.t)("community.actions.failed_to_create_a_new_file_from_hub_file_name",{hubFileName:r.hubFileName})};n&&(i.button={text:(0,I.t)("community.actions.retry"),action:()=>e.dispatch(ef({...r,canRetry:!1}))}),e.dispatch(T.F.enqueue(i))})}),eE=(0,A.nF)(async(e,{hubFileId:r,callback:n},{loadingKey:a})=>{let i=null,o=Promise.resolve(null),s=er.H.getVersions({id:r});o=s;try{i=(await s).data.meta}catch(e){return}(0,$.N)(o,e,a);let{fig_file_metadata:l,remixed_from_metadata:c,...d}=i,u=d.related_content,m=d.remixed_to_metadata,p=[...u?u.content:m||[],d];c&&p.push(c),e.dispatch((0,S.Sb)({hubFiles:p,src:"getHubFileVersions"})),l&&(e.dispatch(ec({hubFileId:d.id,fileKey:l.key})),l.file&&e.dispatch(C.yJ({file:l.file})),l.roles&&e.dispatch(k.uo({roles:l.roles}))),e.dispatch(ed({hubFileId:d.id}));let h=new Set(m?.map(e=>e.id));e.dispatch(eh({hubFileId:d.id,from:c?c.id:null,to:h})),n?.(d)},({hubFileId:e})=>`HUB_FILE_GET_VERSIONS_${e}`),ey=(0,A.nF)((e,{fileKey:r})=>{(0,m.Ay)().user_data&&et.D.getHubFileMetadata({fileKey:r}).then(({data:n})=>{let a=n.meta.published_as;a?.id?e.dispatch(ec({hubFileId:a.id,fileKey:r})):e.dispatch(eu({fileKey:r}));let i=n.meta.remixed_from_metadata,o=n.meta.is_preview;i?.id?e.dispatch(em({hubFileId:i.id,fileKey:r,isPreview:!!o})):e.dispatch(ep({fileKey:r}));let s=[a,i].filter(e=>!!e);s.length>0&&e.dispatch((0,S.Sb)({hubFiles:s,src:"getHubFileMetadata"}))}).then(()=>{(0,m.kc)().ce_new_missing_fonts_logging&&(0,V.DI)()}).catch(e=>{console.error(e)}).finally(()=>{p.zl.set(u.x,!0)})}),eb=(0,N.d6)("HUB_FILE"),{updateMetadata:eI,updateStatus:eT,clearMetadataAndStatus:ev,clearMetadata:eS}=eb,ew=(0,A.nF)((e,r)=>{let n=[],a=r.viewerMode===W.y4.SLIDE_TEMPLATE;if(a){n=(0,z.AC)(e.getState());let a=(0,z.x6)(e.getState());if(!r.hubFileId&&0===n.length||(0,Y.aB)(Object.values(a),new Set(n))){(0,eo.Dl)(e.dispatch);return}p.zl.set(ei.UM,{state:ei.F4.PUBLISH_HUB_FILE_INITIATED})}e.dispatch(eT({id:r.fileKey,status:{code:X.aP.UPLOADING}})),eA(e,r).then(({hubFile:n,actingProfile:a,profileCreated:i})=>(e.dispatch((0,S.Sb)({hubFiles:[n],src:"createHubFile"})),e.dispatch(ec({hubFileId:n.id,fileKey:r.fileKey})),i&&(a.profile_created=i,e.dispatch(es.HZ(a))),e.dispatch(es.Oo(a)),e.dispatch(eT({id:r.fileKey,status:{code:X.aP.SUCCESS}})),r.suggestedCategory&&(0,l.sx)("community_category_suggestion",{resourceType:"hub_file",resourceId:n.id,categoryId:n.category_id,suggestedCategory:r.suggestedCategory},{forwardToDatadog:!0}),{hubFile:n})).then(({hubFile:n})=>{if(!a||null===el)return;let s=(0,z.AC)(e.getState()),l=Object.values((0,z.x6)(e.getState())).map(e=>e.node_id),c=i.Ez5.slideThemeLibBindings().renameThemeForTemplatePublish(r.name)?l:s;if(c.length>0){n.library_key&&i.Ez5?.slideDeck().updateSourceLibraryKey(o.l(n.library_key));let{onPublishSuccess:r,onPublishProgress:a,onPublishError:s}=(0,O.u)(W._Y.SLIDES);requestAnimationFrame(()=>{e.dispatch(el({savepointDescription:"Community slide template publish",itemsToPublish:new Set(c),hubFileId:n.id,onPublishSuccess:r,onPublishProgress:a,onPublishError:s}))})}else p.zl.set(ei.UM,{state:ei.F4.PUBLISH_HUB_FILE_COMPLETED})}).catch(n=>{a&&p.zl.set(ei.UM,{state:ei.F4.PUBLISH_HUB_FILE_ERRORED}),e.dispatch(T.F.enqueue({message:n.message,type:"hub-file-created-error",error:!0})),e.dispatch(eT({id:r.fileKey,status:{code:X.aP.FAILURE,error:n.message}}))})});async function eA(e,r){let n;let{fileKey:o,name:s,description:l,categoryId:c,publisherIds:d,tags:u,creatorPolicy:m,thumbnailBuffer:p,viewerMode:h,scalingMode:_,authorOrgId:g,authorTeamId:E,hasCustomUploadedThumbnail:y,validPrototype:b,commentsSetting:T,agreedToTos:v,isPaid:S,price:w,supportContact:A,carouselMedia:N,customCarouselThumbnail:C}=r;if(g&&E)throw Error((0,I.t)("community.actions.attempting_to_set_both_author_org_id_and_author_team_id_while_publishing"));if(h===W.y4.PROTOTYPE&&i.X3B.firstPagePrototypeStatus()!==i.bOM.VALID)throw Error((0,I.t)("community.actions.attempting_to_publish_an_invalid_prototype_as_a_prototype"));let L=await (0,j.m)(o,"Published to Community hub",l,e.dispatch).then(e=>e.id).catch(e=>{throw(0,f.$D)(a.FigmaTeam.COMMUNITY,e),Error(e.data?.message||(0,I.t)("community.actions.could_not_connect_to_the_server"))});try{n=await (0,B.R1)(p,N||[],L)}catch(e){throw(0,f.$D)(a.FigmaTeam.COMMUNITY,e),Error((0,I.t)("community.actions.error_uploading_images_e"))}let O=(0,B.Z2)(n?.carousel_images||[],C),R={file_version_id:L,name:s,description:l,tags:u,category_id:c,creator_policy:m,signature:n?.cover_image.signature,cover_image_uploaded:n?.cover_image.cover_image_uploaded,publisher_ids:d,viewer_mode:h,scaling_mode:_,author_org_id:g,author_team_id:E,has_custom_uploaded_thumbnail:y,valid_prototype:b,comments_setting:T,agreed_to_tos:v,is_paid:S,price:w,support_contact:A,carousel_images:n?.carousel_images,cover_image_carousel_image:n?.carousel_images[O]};try{let e=await er.H.publishHubFile(R);return{hubFile:e.data.meta.hub_file,actingProfile:e.data.meta.acting_profile,profileCreated:e.data.meta.profile_created}}catch(e){throw(0,f.$D)(a.FigmaTeam.COMMUNITY,e),Error((0,I.Jv)(e,(0,I.t)("community.actions.could_not_publish_hub_file",{error:e.message})))}}let eN=(0,A.nF)(async(e,{payload:r,onSuccess:n})=>{let i;let{hubFileId:o,name:s,description:c,categoryId:d,suggestedCategory:u,creatorPolicy:m,publisherIds:p,tags:h,viewerMode:_,scalingMode:g,commentsSetting:E,price:y,supportContact:v,carouselMedia:w,customCarouselThumbnail:A,hasCustomUploadedThumbnail:N,thumbnailBuffer:C}=r;try{i=await (0,B.R1)(C,w||[],void 0,o)}catch(r){throw(0,f.$D)(a.FigmaTeam.COMMUNITY,r),e.dispatch(T.F.enqueue({message:(0,I.t)("community.actions.error_uploading_images_publish_update_from_editor"),type:"hub-file-updated-error",error:!0})),Error(r)}let L=(0,B.Z2)(i?.carousel_images||[],A),O={name:s,description:c,category_id:d,creator_policy:m,publisher_ids:p,tags:h,viewer_mode:_,scaling_mode:g,comments_setting:E,price:y,support_contact:v,carousel_images:i?.carousel_images,cover_image_carousel_image:i?.carousel_images[L],has_custom_uploaded_thumbnail:N,cover_image_uploaded:i?.cover_image.cover_image_uploaded,signature:i?.cover_image.signature};try{let r=(await er.H.updateHubFile(o,O)).data.meta;e.dispatch((0,S.Sb)({hubFiles:[r],src:"updateHubFile"})),u&&(0,l.sx)("community_category_suggestion",{resourceType:"hub_file",resourceId:r.id,categoryId:r.category_id,suggestedCategory:u},{forwardToDatadog:!0}),n?.(r)}catch(n){let r=(0,I.Jv)(n,(0,I.t)("community.actions.an_error_occurred_while_updating_please_refresh_and_try_again"));throw e.dispatch(b.s.error(r)),(0,f.$D)(a.FigmaTeam.COMMUNITY,n),Error(`Error updating file ${n}`)}}),eC=(0,A.nF)((e,{hubFileId:r,redirectLink:n,onSuccess:i,onError:o})=>{E.Ay.del(`/api/hub_files/${r}`).then(({data:r})=>{let n=r.meta;e.dispatch((0,S.Sb)({hubFiles:[n],src:"unpublishHubFile"}))}).then(()=>{n&&d.Ay.redirect(n),i?.()}).catch(e=>{(0,f.$D)(a.FigmaTeam.COMMUNITY,e),console.error(Error(`Error unpublishing file ${e}`)),o?.()})}),eL=(0,A.MM)("OPTIMISTIC_DUPLICATE_HUB_FILE",(e,{hubFileId:r,viewContext:n},{optimistId:a})=>{E.Ay.post(`/api/hub_files/v2/${r}/copy`).then(({data:i})=>{e.dispatch(P.c(a));let o=i.meta,s=(0,H.to)(o);s=(0,c.dR)(s,{[G.pt.KEY]:G.pt.VALUE}),d.Ay.redirect(s,g.rr?void 0:"_blank"),(0,l.sx)(M.M5.HUB_FILE_DUPLICATED,{hubFileId:r,figFileKey:o.key,viewContext:n,searchSessionId:(0,v.w)(e.getState())})}).catch(r=>{e.dispatch(P.r(a)),e.dispatch(T.F.enqueue({message:(0,I.t)("community.actions.unable_to_duplicate",{error:(0,I.Jv)(r,r.data.message)}),type:"HUB_FILE_DUPLICATE_FAILED",error:!0}))})}),eO=K.M4.Mutation(({id:e},{query:r})=>(r.mutate((0,w.m)({apiResourceType:"file",id:e}),e=>{e.like_count+=1}),er.H.likeHubFile({id:e})));(0,A.nF)((e,{hubFileId:r},{loadingKey:n})=>{let a=(0,_.Jl)(eO)({id:r});(0,$.N)(a,e,n),a.catch(r=>{e.dispatch(T.F.enqueue({message:(0,I.t)("community.actions.unable_to_like_this_file_error",{error:(0,I.Jv)(r,r.data?.message)}),type:"HUB_FILE_LIKE_FAILED",error:!0}))});let i=e.getState().user,o=i&&(0,U.sD)(i,e.getState().authedProfilesById);i?.id&&o&&(0,h.WB)().optimisticallyCreate({CommunityHubLike:{[`optimistic-${r}-${o.id}`]:{pluginId:null,hubFileId:r,profileId:o.id,resourceId:null,hiddenAt:null,createdAt:new Date,updatedAt:new Date,canRead:!0}}},a)},e=>`LIKE_HUB_FILE_${e}`);let eR=K.M4.Mutation(({id:e},{query:r})=>(r.mutate((0,w.m)({apiResourceType:"file",id:e}),e=>{e.like_count-=1}),er.H.unlikeHubFile({id:e})));(0,A.nF)((e,{hubFileId:r,likeId:n},{loadingKey:a})=>{let i=(0,_.Jl)(eR)({id:r});(0,$.N)(i,e,a),i.catch(r=>{e.dispatch(T.F.enqueue({message:(0,I.t)("community.actions.unable_to_unlike_this_file_error",{error:(0,I.Jv)(r,r.data.message)}),type:"HUB_FILE_UNLIKE_FAILED",error:!0}))}),e.getState().user?.id&&n&&(0,h.WB)().optimisticallyDelete({CommunityHubLike:{[n]:null}},i)},e=>`UNLIKE_HUB_FILE_${e}`),(0,A.nF)((e,{hubFileId:r})=>E.Ay.post(`/api/hub_files/${r}/view`,{hubFileId:r}));let eP={};(0,A.nF)(async(e,{hubFileId:r})=>{let n=e.getState(),a=n.user?.id;a&&((0,l.sx)(M.M5.SLIDE_TEMPLATE_USED,{hubFileId:r}),eP[a]?.includes(r)||await ee.C.updateSlideTemplateCommunityUsageCount({hubFileId:r}).then(()=>{eP[a]||(eP[a]=[]),eP[a].includes(r)||eP[a].push(r)}).catch(e=>{(0,f.x1)("Error updating Community Slide Template usage count",e,{hubFileId:r},{reportAsSentryError:!0})}))});let eD=(0,A.nF)((e,r)=>{(r===Z.G4.FULLSCREEN||r===Z.G4.FULLSCREEN_WITH_COMMENTS)&&((0,l.sx)("Context Viewed",{name:"hub-file-canvas-enter-fullscreen"}),r===Z.G4.FULLSCREEN_WITH_COMMENTS&&(0,l.sx)("CTA Clicked",{name:"community_hub_preview_comments_viewed"}));let n={...e.getState().selectedView,fullscreenState:r};r===Z.G4.FULLSCREEN&&n.commentThreadId&&delete n.commentThreadId,e.dispatch(L.$T(n))})},71425:(e,r,n)=>{n.d(r,{JZ:()=>b,QF:()=>I,qR:()=>T});var a=n(776250),i=n(939863),o=n(392592),s=n(980820),l=n(164185),c=n(986270),d=n(441088),u=n(4564),m=n(215822),p=n(555328),h=n(809073),_=n(707033),g=n(867795),f=n(76158),E=n(74021);let y=(0,u.M)(),b=(0,s.nF)(async(e,{resourceType:r,localFileIdToRemove:n})=>{let s=null;if(!y)return;let{added:u,existed:E}=await y.createMultipleNewLocalFileExtensions({title:(0,i.t)("community.actions.pick_extension_manifest_file"),filters:[{name:"Manifests",extensions:["json"]}],properties:["openFile"]},0);if(null!=(s=u&&u[0]||E&&E[0]))try{let u=await (0,m.c2)(s,{resourceType:r,isPublishing:!1});if("unknown"===r&&(r=u.containsWidget?"widget":"plugin"),(0,a.sx)("Added new plugin",{how:"loaded",pluginId:u.id,version:u.api,isWidget:"widget"===r,productType:"figma"===(0,m.T)()?"design":"whiteboard",isVsCode:(0,d.T)()}),e.dispatch(I({localFileId:s,resourceType:r})),e.dispatch(o.F.enqueue({message:u.name?(0,i.t)("community.actions.manifest_name_has_been_imported",{manifestName:u.name}):"widget"===r?(0,i.t)("community.actions.widget_has_been_imported"):(0,i.t)("community.actions.plugin_has_been_imported")})),(0,l.s)({initialX:0,initialY:0,initialTab:"figjam"===(0,m.T)()?"widget"===r?g.p.WIDGETS:g.p.PLUGINS:void 0,initialFdResourceTab:"figma"===(0,m.T)()?"widget"===r?f.s.WIDGET:f.s.PLUGIN:void 0,initialFdView:"figma"===(0,m.T)()?"development":void 0,scrollDevelopmentSectionIntoView:"figjam"===(0,m.T)(),source:"extension-import"}),n){let r=e.getState().localPlugins[n],a=r?.lastKnownPluginId??r.plugin_id??r.manifest.id;a!==u.id&&a||e.dispatch(T(n))}let E=u.editorType;E?.forEach(n=>{let a="figjam"===n?h.$A.FigJam:h.$A.Design;r===p.bD.PLUGIN?e.dispatch(c.gU({storeInRecentsKey:a,id:u.id||"",version:"",isDevelopment:!0,currentUserId:_.o8()})):r===p.bD.WIDGET&&e.dispatch(c.RH({storeInRecentsKey:a,id:u.id||"",version:"",isDevelopment:!0,currentUserId:_.o8()}))})}catch(r){e.dispatch(o.F.enqueue({message:r.message,error:!0}))}}),I=(0,s.nF)(async(e,{localFileId:r,resourceType:n})=>{let a=await (0,m.t3)(r,{resourceType:n});e.dispatch((0,E.Po)(a))}),T=(0,s.nF)((e,r)=>{void 0!=r&&(y&&y.removeLocalFileExtension(r),e.dispatch((0,E.Zy)(r)))})},853799:(e,r,n)=>{n.d(r,{C:()=>m});var a=n(827697),i=n(27087),o=n(939863),s=n(392592),l=n(980820),c=n(697551),d=n(320741),u=n(555328);let m=(0,l.nF)((e,{id:r,resourceType:n},{loadingKey:l})=>{let m=i.Ay.post(`/api/${(0,c.n)(n)}/${r}/like`,{orgId:e.getState().currentUserOrgId});(0,d.N)(m,e,l),m.catch(r=>{e.dispatch(s.F.enqueue({message:n===u.vt.PLUGIN?(0,o.t)("community.actions.unable_to_like_this_plugin_error",{error:(0,o.Jv)(r,r.data.message)}):(0,o.t)("community.actions.unable_to_like_this_widget_error",{error:(0,o.Jv)(r,r.data.message)}),type:`${n.toUpperCase()}_LIKE_FAILED`,error:!0}))});let p=e.getState().user,h=p&&(0,c.sD)(p,e.getState().authedProfilesById);p?.id&&h&&(0,a.WB)().optimisticallyCreate({CommunityHubLike:{[`optimistic-${r}-${h.id}`]:{pluginId:r,hubFileId:null,resourceId:null,profileId:h.id,hiddenAt:null,createdAt:new Date,updatedAt:new Date,canRead:!0}}},m)},({id:e})=>`LIKE_RESOURCE_${e}`);(0,l.nF)((e,{id:r,resourceType:n,likeId:l},{loadingKey:m})=>{let p=i.Ay.del(`/api/${(0,c.n)(n)}/${r}/like`,{orgId:e.getState().currentUserOrgId});(0,d.N)(p,e,m),p.catch(r=>{e.dispatch(s.F.enqueue({message:n===u.vt.PLUGIN?(0,o.t)("community.actions.unable_to_unlike_this_plugin_error",{error:r.data.message}):(0,o.t)("community.actions.unable_to_unlike_this_widget_error",{error:r.data.message}),type:`${n.toUpperCase()}_UNLIKE_FAILED`,error:!0}))}),e.getState().user?.id&&l&&(0,a.WB)().optimisticallyDelete({CommunityHubLike:{[l]:null}},p)})},74021:(e,r,n)=>{n.d(r,{Ob:()=>y,Po:()=>b,Zy:()=>I});var a=n(167249),i=n(297666),o=n(881388),s=n(980820),l=n(113237),c=n(4564),d=n(428467),u=n(215822),m=n(384792),p=n(262151),h=n(561004),_=n(376485),g=n(249436),f=n(951982),E=n(941381);let y=(0,a.N)("PLUGIN_INITIALIZE_LOCAL"),b=(0,a.N)("PLUGIN_UPDATE_LOCAL"),I=(0,a.N)("PLUGIN_DELETE_LOCAL"),T=!1,v=(0,c.M)();(0,s.nF)(async e=>{if(v){if(v.isCompatibleWith({desktopVersion:59})){let r=await v.getLocalManifestFileExtensionIdsToCachedMetadataMap()??{},n=Object.keys(r).map(e=>parseInt(e)),a=await Promise.all(n.map(e=>(0,u.t3)(e,{resourceType:"unknown"}))),i={};a.forEach(e=>{e.cachedContainsWidget=!!r[e.localFileId].cachedContainsWidget,e.lastKnownPluginId=r[e.localFileId].lastKnownPluginId||"",i[e.localFileId]=e}),e.dispatch(y(i))}else if(v.isCompatibleWith({desktopVersion:58})){let r=await v.getLocalManifestFileExtensionIdsToCachedContainsWidgetMap(),n=Object.keys(r).map(e=>parseInt(e)),a=await Promise.all(n.map(e=>(0,u.t3)(e,{resourceType:"unknown"}))),i={};a.forEach(e=>{e.cachedContainsWidget=!!r[e.localFileId],i[e.localFileId]=e}),e.dispatch(y(i))}else{let r=await v.getAllLocalFileExtensionIds(),n=await Promise.all(r.map(e=>(0,u.t3)(e,{resourceType:"unknown"}))),a={};n.forEach(e=>{a[e.localFileId]=e}),e.dispatch(y(a))}if(!T){T=!0,v.registerManifestChangeObserver(r=>{if("added"===r.type||"changed"===r.type){let n;let a=r.id,i=(0,u.mm)(a,r.localLoadResult,{resourceType:"unknown"}),s=e.getState().localPlugins[a]?.plugin_id;e.dispatch(b(i));let l=e.getState(),{publishingPlugins:c,localPlugins:m,publishedPlugins:p,publishedWidgets:h,currentUserOrgId:_,authedProfilesById:g,modalShown:y}=l,I=c[a];i.plugin_id!==s&&y?.type!==f.o.type&&e.dispatch((0,E.Ij)({id:a}));try{n=(0,u.mI)({...(0,d.getPermissionsState)(l),currentUserOrgId:_,localPlugins:m,publishedPlugins:p,publishedWidgets:h,authedProfilesById:g},a)}catch(r){e.dispatch(o.s.error(r.message));return}I&&I.metadata&&(0,u.L1)(I.metadata)&&!i.error&&e.dispatch((0,E.fy)({id:a,metadata:n}))}else"removed"===r.type&&e.dispatch(I(r.id))});let r=(0,i.s)(r=>{if("added"===r.type||"changed"===r.type){let n=e.getState().mirror?.selectionProperties?.selectedWidgetInfo;n&&n.pluginID&&l.x.mountWidget(n.pluginID,n.widgetID,"hot-reloading re-render");let a=m.SH()?.plugin,i=m.SH()?.triggeredFrom,o=e.getState();"manifestFileId"in r&&a&&(0,_.ZQ)(a)&&o.mirror.appModel.hotReloadPluginDev&&r.manifestFileId===a.localFileId&&(0,p.hM)()&&(async()=>{await (0,h.wY)(),"codegen"!==i&&(0,p.A9)({newTriggeredFrom:null}),(0,g.c)()})()}});v.registerCodeChangeObserver(r),v.registerManifestChangeObserver(r),v.registerUiChangeObserver(r)}}})},941381:(e,r,n)=>{n.d(r,{$Z:()=>K,Cf:()=>z,Dl:()=>ea,GV:()=>g.GV,Ij:()=>er,KJ:()=>Q,L4:()=>F,LP:()=>q,O8:()=>j,Qi:()=>g.Qi,R8:()=>es,Vp:()=>ei,Vx:()=>g.Vx,W9:()=>Y,a8:()=>X,b6:()=>V,et:()=>el,f1:()=>$,fd:()=>B,fs:()=>H,fy:()=>ee,gD:()=>et,l5:()=>g.l5,l7:()=>g.l7,pm:()=>en,se:()=>U,uF:()=>x,uV:()=>g.uV,uX:()=>G,uw:()=>W,wx:()=>ec,zn:()=>eo});var a=n(414507),i=n(167249),o=n(776250),s=n(38329),l=n(966712),c=n(717037),d=n(776621),u=n(27087),m=n(881388),p=n(939863),h=n(392592),_=n(837324),g=n(84336),f=n(545941),E=n(980820),y=n(63397),b=n(651705),I=n(182976),T=n(506513),v=n(782501),S=n(540019),w=n(428467),A=n(272794),N=n(215822),C=n(320741),L=n(555328),O=n(813408),R=n(646624),P=n(93623),D=n(492330),k=n(825413),M=n(56714);let F=(0,i.N)("PLUGIN_REPLACE_FEATURED"),x=(0,E.nF)((e,r,{loadingKey:n})=>{if(!e.getState().user)return;let a=P.V.getPlugins(),i=D.U.getWidgets();a.then(({data:r})=>{let n=r.meta;e.dispatch((0,g.Qi)({publishedPlugins:n,src:"initializeUserPublishedPlugins"}))}),i.then(({data:r})=>{let n=r.meta;e.dispatch((0,g.Qi)({publishedPlugins:n,src:"initializeUserPublishedWidgets"}))}),(0,C.N)(i,e,n)}),U=S.M4.Query({fetch:async e=>(await P.V.getUnpublishedPlugins()).data.meta,output:({data:e})=>{let r={};if(e)for(let n of e)r[n.id]=n;return r}}),B=S.M4.Query({fetch:async e=>(await D.U.getUnpublishedWidgets()).data.meta,output:({data:e})=>{let r={};if(e)for(let n of e)r[n.id]=n;return r}}),V=(0,E.nF)((e,{widgetIDToVersions:r})=>{let{publishedCanvasWidgetVersions:n,currentUserOrgId:a}=e.getState();for(let[e,i]of Object.entries(r))i.forEach(i=>{let o=n[e]?.[i];o&&new Set(r[e]).forEach(e=>{A.F.getAndCache({...o,id:e},a??void 0)})})}),G=(0,E.nF)(async(e,{resourceId:r,resourceType:n})=>{let a=n===L.bD.WIDGET?D.U.getWidgets({id:r}):P.V.getPlugins({id:r}),{data:i}=await a,o=i.meta.find(e=>e.id===r);o&&e.dispatch((0,g.Qi)({publishedPlugins:[o],src:"getPublishedResource"}))}),H=(0,i.N)("UPDATE_PUBLISHED_CANVAS_WIDGET_VERSIONS"),W=(0,i.N)("UPDATE_FETCHED_CANVAS_WIDGET_VERSIONS");async function K(e,r,n){let a=await Y({[e]:[r]},n);return a[e]?.[r]}async function Y(e,r){let n=s.D.getState(),a=n.openFile?.key,i=await u.Ay.post("/api/widgets/v2/versions",{ids_to_versions:e,org_id:r,file_key:a}),o=i?.data?.meta||{};return s.D.dispatch(H(o)),s.D.dispatch(W(Object.fromEntries(Object.entries(e).map(([e,r])=>[e,Object.fromEntries(r.map(e=>[e,!0]))])))),o}let $=(0,E.nF)(async(e,{pluginIds:r})=>{let{currentUserOrgId:n,publishedPlugins:a}=e.getState(),i=r.filter(e=>!a[e]);if(i.length)try{let e=await P.V.postPluginsBatch(i,n),r=e.data?.meta??[];s.D.dispatch((0,g.Qi)({publishedPlugins:r,src:"fetchPublishedPlugins",overrideInstallStatus:!0}))}catch{return}}),j=(0,E.nF)(async(e,{widgetIds:r})=>{let{currentUserOrgId:n,publishedWidgets:a}=e.getState(),i=r.filter(e=>!a[e]);if(i.length)try{let e=await u.Ay.post("/api/widgets/batch",{ids:i,org_id:n}),r=e.data?.meta??[];s.D.dispatch((0,g.Qi)({publishedPlugins:r,src:"fetchPublishedWidgets",overrideInstallStatus:!0}))}catch{return}}),z=(0,E.nF)(async(e,{widgetIDAndVersions:r})=>{let{currentUserOrgId:n}=e.getState(),a=[],i={};r.forEach(({widgetID:e,widgetVersionID:r})=>{i[e]?i[e].includes(r)||i[e].push(r):(a.push(e),i[e]=[r])}),0!==a.length&&(await Y(i,n),e.dispatch(V({widgetIDToVersions:i})),e.dispatch(j({widgetIds:Object.keys(i)})))});(0,E.nF)((e,r,{loadingKey:n})=>{let a=P.V.getProfile({profileId:r.profileId,currentOrgId:e.getState().currentUserOrgId||void 0}),i=(0,M.UM)(r.profileId);return(0,C.N)(a,e,n),a.then(async({data:r})=>{let n=[...await i,...r.meta];return e.dispatch((0,g.Qi)({publishedPlugins:n,src:"getCommunityProfilePlugins"})),n})},({profileId:e})=>`GET_COMMUNITY_PROFILE_PLUGINS_${e}`),(0,E.nF)((e,r,{loadingKey:n})=>{let a=D.U.getProfile({profileId:r.profileId,currentOrgId:e.getState().currentUserOrgId||void 0}),i=(0,M.Jr)(r.profileId);return(0,C.N)(a,e,n),a.then(async({data:r})=>{let n=[...await i,...r.meta];return e.dispatch((0,g.Qi)({publishedPlugins:n,src:"getCommunityProfileWidgets"})),n})},({profileId:e})=>`GET_COMMUNITY_PROFILE_WIDGETS_${e}`);let q=(0,E.nF)((e,r,{loadingKey:n})=>{let a=P.V.getOrg({orgId:r});return(0,C.N)(a,e,n),a.then(({data:r})=>{let n=r.meta;return e.dispatch((0,g.Qi)({publishedPlugins:n,src:"getOrgPublishedPlugins"})),n})},e=>`GET_ORG_PUBLISHED_PLUGINS_${e}`),X=(0,E.nF)(async(e,r,{loadingKey:n})=>{try{e.dispatch(I.Cx({key:n}));let a=await D.U.getOrg({orgId:r}),i=a?.data?.meta||[];return e.dispatch((0,g.Qi)({publishedPlugins:i,src:"getOrgPublishedWidgets"})),e.dispatch(I.x2({key:n})),i}catch(r){return m.s.flash(r.message||(0,p.t)("community.actions.an_error_occurred_while_trying_to_fetch_the_org_widgets_list")),e.dispatch(I.of({key:n})),[]}},e=>`GET_ORG_PUBLISHED_WIDGETS_${e}`);async function J(e,r,n){if(null===e.current_plugin_version_id||!e.id)throw Error((0,p.t)("community.actions.resource_is_invalid"));let i=0;r.iconBlob&&(i=(0,N.wf)(r.iconBlob));let s=0;r.coverBlob&&(s=(0,N.oD)(r.coverBlob));let l=r.carouselMedia,{uploadImages:c,uploadVideos:m,allMedia:h}=(0,v.Kg)(l),g=await R.w.postPluginImagesUpload(e.id,e.is_widget,c),f=Promise.resolve(!1),E=r.iconBlob;void 0!==E&&(f=(0,T.c)(E).then(e=>(0,v.Ac)(g.iconUploadUrl,E,e)).then(()=>!0).catch(r=>{(0,d.$D)(a.FigmaTeam.COMMUNITY,r);let n=(0,p.Jv)(r,(0,p.t)("community.actions.could_not_connect_to_the_server"));throw Error((0,L.xQ)(e)?(0,p.t)("community.actions.error_uploading_widget_icon_error",{error:n}):(0,p.t)("community.actions.error_uploading_plugin_icon_error",{error:n}))}));let y=Promise.resolve(!1),b=r.coverBlob;void 0!==b&&(y=(0,T.c)(b).then(e=>(0,v.Ac)(g.coverImageUploadUrl,b,e)).then(()=>!0).catch(r=>{throw(0,d.$D)(a.FigmaTeam.COMMUNITY,r),Error((0,L.xQ)(e)?(0,p.t)("community.actions.error_uploading_widget_artwork_image_error",{error:(0,p.Jv)(r,r.data?.message||"unknown error")}):(0,p.t)("community.actions.error_uploading_plugin_artwork_image_error",{error:(0,p.Jv)(r,r.data?.message||"unknown error")}))}));let{snapshotBlob:I}=r,S=Promise.resolve(!1);void 0!==I&&(S=(0,T.c)(I).then(e=>{if(!g.snapshotUploadUrl)throw Error("Snapshot upload url is missing");return(0,v.Ac)(g.snapshotUploadUrl,I,e)}).then(()=>!0).catch(e=>{throw(0,d.$D)(a.FigmaTeam.COMMUNITY,e),Error((0,p.t)("community.actions.error_uploading_widget_snapshot_image_error",{error:(0,p.Jv)(e,e.data?.message||"unknown error")}))}));let w=(0,v.Rd)(g.carouselImages,l),[A,C,O]=await Promise.all([f,y,S,...w]),P=m.map(r=>(0,v.Gf)((0,_.KH)(e,{pluralized:!0}),e.id,{sha1:r.sha1,bytes:r.bytes},r.video_thumbnail_buffer,r.video_thumbnail_sha1).then(e=>{h.push({carousel_position:r.carousel_position,sha1:e.sha1,video_file_uuid:e.videoFileUuid,video_thumbnail_sha1:e.videoThumbnailSha1})}).then(()=>!0).catch(e=>{throw(0,d.$D)(a.FigmaTeam.COMMUNITY,e),Error((0,p.t)("community.actions.error_uploading_plugin_video_error",{error:(0,p.Jv)(e,e.data?.message||"unknown error")}))}));await Promise.all(P);let{data:D}=await u.Ay.put(`/api/${(0,_.KH)(e,{pluralized:!0})}/${e.id}/versions/${r.id}`,{icon_uploaded:A,cover_image_uploaded:C,snapshot_uploaded:O,carousel_media:h,name:r.name,description:r.description,tagline:r.tagline,creator_policy:r.creatorPolicy,release_notes:r.releaseNotes,comments_setting:e.comments_setting,category_id:e.category_id,image_upload_nonce:g.imageUploadNonce,playground_fig_file_key:r.playground_fig_file_key,playground_file_publish_type:n}).catch(e=>{throw(0,d.$D)(a.FigmaTeam.COMMUNITY,e),Error((0,p.t)("community.actions.error_finalizing_plugin_error",{error:(0,p.Jv)(e,e.data?.message||"unknown error")}))}),k=D.meta,M=k.plugin;if(M.id!==e.id)throw Error((0,p.t)("community.actions.the_published_resource_i_ds_do_not_match"));return(0,o.sx)("Hub Plugin Update Version",{pluginId:e.id,isWidget:e.is_widget,iconFileSize:i,coverFileSize:s}),{publishedPlugin:M,profile:k.profile}}async function Z(e,r,n,i,s,c,m,h,g,f){let E;if(!e)throw Error((0,p.t)("community.actions.plugin_id_is_invalid"));let[y,b]=await Promise.all([(0,N.c2)(r,{resourceType:(0,_.nF)(g),isPublishing:!0}),(0,N.MB)(r)]),I=(0,N.ZT)(b),S=0;n.iconBlob&&(S=(0,N.wf)(n.iconBlob));let w=0;n.coverBlob&&(w=(0,N.oD)(n.coverBlob));let A=c.tokens.map(e=>e.content),C=n.carouselMedia,{uploadImages:L,uploadVideos:O,allMedia:P}=(0,v.Kg)(C),D={manifest:y,release_notes:n.releaseNotes,name:n.name,description:n.description,tagline:n.tagline,creator_policy:n.creatorPolicy,tags:A,category_id:s,images_sha1:L};try{E=await R.w.postPluginUpload(D,e,g)}catch(e){throw(0,d.$D)(a.FigmaTeam.COMMUNITY,e),Error((0,p.Jv)(e,(0,p.t)("community.actions.could_not_connect_to_the_server")))}let{codeUploadUrl:k,iconUploadUrl:M,coverImageUploadUrl:F,snapshotUploadUrl:x,signature:U,versionId:B,imageUploadNonce:V,carouselImages:G}=E,H=e=>{let r=e.data;if(!r||"string"!=typeof r)return;let n=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("Code");if(n&&n[0]&&"EntityTooLarge"===n[0].textContent)return(0,p.t)("community.actions.file_too_large")},W=Promise.resolve(!1);b&&(W=(e=>{let{fields:r,codePath:n,signedCloudfrontUrl:a}=e,i=new FormData;return(Object.entries(r).forEach(([e,r])=>i.append(e,r)),i.set("Content-Type","text/javascript"),i.append("file",b),a&&(0,l.kc)().ext_s3_url_use_figma_domains)?u.Ay.crossOriginPut(a,b,{raw:!0,headers:{"Content-Type":"text/javascript","Cache-Control":"private, max-age=86400","x-amz-acl":"bucket-owner-full-control"}}):u.Ay.crossOriginPost(n,i,{raw:!0,headers:{"Content-Type":"multipart/form-data","Cache-Control":"private, max-age=86400"}})})(k).then(()=>!0).catch(e=>{(0,d.$D)(a.FigmaTeam.COMMUNITY,e);let r=H(e)??(0,p.Jv)(e,(0,p.t)("community.actions.could_not_connect_to_the_server"));throw Error(g?(0,p.t)("community.actions.error_uploading_widget_code_error",{error:r}):(0,p.t)("community.actions.error_uploading_plugin_code_error",{error:r}))}));let K=Promise.resolve(!1),Y=n.iconBlob;null!=Y&&(K=(0,T.c)(Y).then(e=>(0,v.Ac)(M,Y,e)).then(()=>!0).catch(e=>{(0,d.$D)(a.FigmaTeam.COMMUNITY,e);let r=H(e)??(0,p.Jv)(e,e.data?.message||"unknown error");throw Error(g?(0,p.t)("community.actions.error_uploading_widget_icon_error",{error:r}):(0,p.t)("community.actions.error_uploading_plugin_icon_error",{error:r}))}));let $=Promise.resolve(!1),j=n.coverBlob;null!=j&&($=(0,T.c)(j).then(e=>(0,v.Ac)(F,j,e)).then(()=>!0).catch(e=>{(0,d.$D)(a.FigmaTeam.COMMUNITY,e);let r=H(e)??(0,p.Jv)(e,(0,p.t)("community.actions.could_not_connect_to_the_server"));throw Error(g?(0,p.t)("community.actions.error_uploading_widget_artwork_image_error",{error:r}):(0,p.t)("community.actions.error_uploading_plugin_artwork_image_error",{error:r}))}));let{snapshotBlob:z}=n,q=Promise.resolve(!1);null!=z&&x&&(q=(0,T.c)(z).then(e=>(0,v.Ac)(x,z,e)).then(()=>!0).catch(e=>{throw(0,d.$D)(a.FigmaTeam.COMMUNITY,e),Error((0,p.t)("community.actions.error_uploading_widget_snapshot_image_error",{error:H(e)??(0,p.Jv)(e,e.data?.message||"unknown error")}))}));let X=(0,v.Rd)(G,C),[J,Z,Q,ee]=await Promise.all([W,K,$,q,...X]),et=O.map(async r=>{try{let n=await (0,v.Gf)(g?"widgets":"plugins",e,{sha1:r.sha1,bytes:r.bytes},r.video_thumbnail_buffer,r.video_thumbnail_sha1);return P.push({carousel_position:r.carousel_position,sha1:n.sha1,video_file_uuid:n.videoFileUuid,video_thumbnail_sha1:n.videoThumbnailSha1}),!0}catch(e){throw(0,d.$D)(a.FigmaTeam.COMMUNITY,e),Error((0,p.t)("community.actions.error_uploading_plugin_video_error",{error:(0,p.Jv)(e,e.data?.message||"unknown error")}))}});await Promise.all(et);let{data:er}=await u.Ay.put(`/api/${(0,_.nF)(!!g,{pluralized:!0})}/${e}/versions/${B}`,{icon_uploaded:Z,cover_image_uploaded:Q,snapshot_uploaded:ee,carousel_media:P,code_uploaded:J,comments_setting:i,category_id:s,signature:U,image_upload_nonce:V,agreed_to_tos:m,org_id:h,playground_fig_file_key:n.playground_fig_file_key,playground_file_publish_type:f}).catch(e=>{throw(0,d.$D)(a.FigmaTeam.COMMUNITY,e),Error(g?(0,p.t)("community.actions.error_finalizing_widget_error",{error:(0,p.Jv)(e,e.data?.message||"")}):(0,p.t)("community.actions.error_finalizing_plugin_error",{error:(0,p.Jv)(e,e.data?.message||"")}))}),en=er.meta,ea=en.plugin;if(ea.id!==e)throw Error((0,p.t)("community.actions.the_published_resource_i_ds_do_not_match"));return(0,o.sx)("Hub Plugin Publish Version",{pluginId:e,hasUI:!!y.ui,apiVersion:y.api,codeLength:I,iconFileSize:S,coverFileSize:w,isWidget:g,editorType:y.editorType?.sort().join(", ")}),{publishedPlugin:ea,profile:en.profile}}let Q=(0,y.d6)("PLUGIN"),{updateMetadata:ee,updateStatus:et,clearMetadataAndStatus:er,clearMetadata:en}=Q,ea=(0,E.nF)(async(e,r)=>{let{pluginVersion:n,localFileId:i,pluginId:o,commentsSetting:s,categoryId:l,callback:u,agreedToTos:m,orgId:_,isWidget:f,playgroundFilePublishType:E,tags:y}=r;e.dispatch(et({id:i,status:{code:O.aP.UPLOADING}}));try{let{publishedPlugin:r,profile:a}=await Z(o,i,n,s,l,y,m,_,f,E);e.dispatch((0,g.Qi)({publishedPlugins:[r],src:"publishPluginVersion"})),a&&(e.dispatch(b.HZ(a)),e.dispatch(b.Oo(a))),e.dispatch(et({id:i,status:{code:O.aP.SUCCESS}})),e.dispatch(en({id:i})),u()}catch(n){e.dispatch(et({id:i,status:{code:O.aP.FAILURE,error:n.message}}));let r=(0,p.t)("community.actions.could_not_publish_plugin_error",{error:(0,p.Jv)(n,n.message)});throw n instanceof c.qW?(0,k.MZ)(e.dispatch,(0,p.t)("check_network_compatibility.error_bell.video_upload.message")):n.message.includes("invalid word")||e.dispatch(h.F.enqueue({message:r,error:!0})),(0,d.$D)(a.FigmaTeam.COMMUNITY,n),Error(r)}}),ei=(0,E.nF)(async(e,r)=>{let{resource:n,pluginVersion:i,callback:o,playgroundFilePublishType:s,localFileIdOrPluginId:l}=r;try{e.dispatch(et({id:l,status:{code:O.aP.UPLOADING}}));let{profile:r,publishedPlugin:a}=await J(n,i,s);e.dispatch((0,g.Qi)({publishedPlugins:[a],src:"updatePublishedPluginRole"})),r&&e.dispatch(b.Oo(r)),e.dispatch(et({id:l,status:{code:O.aP.SUCCESS}})),o()}catch(n){let r=(0,p.Jv)(n,n.message);throw n instanceof c.qW?(0,k.MZ)(e.dispatch,(0,p.t)("check_network_compatibility.error_bell.video_upload.message")):e.dispatch(h.F.enqueue({message:r,error:!0})),e.dispatch(et({id:l,status:{code:O.aP.FAILURE,error:r}})),(0,d.$D)(a.FigmaTeam.COMMUNITY,n),Error(`Failed plugin patchVersion: ${n.message}`)}}),eo=(0,E.nF)(async(e,{pluginId:r,role:n,agreedToTos:i,isWidget:s})=>{let l;let c={org_id:n.org?n.org.id:void 0,is_public:n.is_public,agreed_to_tos:i};l=s?u.Ay.put(`/api/widgets/${r}/roles`,c):u.Ay.put(`/api/plugins/${r}/roles`,c),await l.then(({data:n})=>{let a=n.meta;(0,o.sx)("Hub Plugin Publish Role",{pluginId:r,toPublic:a.roles.is_public,toOrg:!!a.roles.org,needApproval:(0,f.AC)(a),isWidget:s}),e.dispatch((0,g.Qi)({publishedPlugins:[a],src:"updatePublishedPluginRole"}))}).catch(r=>{e.dispatch(h.F.enqueue({message:(0,p.t)("community.publishing.could_not_publish_plugin_error",{error:(0,p.Jv)(r,r.data?.message)}),error:!0})),(0,d.$D)(a.FigmaTeam.COMMUNITY,r)})}),es=(0,E.nF)(async(e,r)=>{let n;if(r.authorOrgId&&r.authorTeamId){console.error("Attempting to set both authorOrgId and authorTeamId while publishing");return}let{isWidget:i,pluginId:o}=r,s={tags:r.tags,support_contact:r.supportContact,author_org_id:r.authorOrgId,author_team_id:r.authorTeamId,publisher_ids:r.publisherIds,hide_related_content_by_others:r.hideRelatedContentByOthers,agreed_to_tos:r.agreedToTos,is_paid:r.isPaid,is_subscription:r.isSubscription,price:r.price,has_freemium_code:r.hasFreemiumCode,category_id:r.categoryId,is_public:r.isPublic,annual_discount_percentage:r.annualDiscount,is_annual_discount_active:r.isAnnualDiscountActive};n=i?u.Ay.put(`/api/widgets/${o}`,s):u.Ay.put(`/api/plugins/${o}`,s),await n.then(({data:n})=>{let a=n.meta;e.dispatch((0,g.Qi)({publishedPlugins:[a],src:"updatePublishedPlugin"})),r.onSuccess?.()}).catch(r=>{e.dispatch(h.F.enqueue({message:(0,p.t)("community.publishing.could_not_publish_plugin_error",{error:(0,p.Jv)(r,r.data?.message)}),error:!0})),(0,d.$D)(a.FigmaTeam.COMMUNITY,r)})}),el=(0,E.nF)((e,{resource:r})=>{u.Ay.del(`/api/${(0,_.KH)(r,{pluralized:!0})}/${r.id}`).then(({data:n})=>{let a=n.meta;e.dispatch((0,g.Qi)({publishedPlugins:[a],src:"unpublishPublishedPlugin"})),(0,o.sx)("Hub Unpublish Plugin",{pluginId:r.id,...(0,N.L8)(r)})}).catch(n=>{e.dispatch(h.F.enqueue({message:(0,L.xQ)(r)?(0,p.t)("community.actions.could_not_publish_widget_error",{error:(0,p.Jv)(n,n.data?.message)}):(0,p.t)("community.actions.could_not_publish_plugin_error",{error:(0,p.Jv)(n,n.data?.message)}),error:!0})),(0,d.$D)(a.FigmaTeam.COMMUNITY,n)})});(0,E.nF)((e,{id:r,resourceType:n},{loadingKey:a})=>{let i=r=>e.dispatch((0,g.Qi)({publishedPlugins:[r],src:"getResourceVersions",overrideInstallStatus:!0})),o=n===L.bD.WIDGET?D.U.getVersions({widgetId:r}):P.V.getVersions({pluginId:r});(0,C.N)(o,e,a),o.then(({data:e})=>{i(e.meta.plugin)}).catch(e=>{console.log(`Versions of ${n} with id ${r} cannot be fetched at this time:`,e.data?.message)})},({id:e})=>`GET_PLUGIN_VERSIONS_${e}`);let ec=(0,E.nF)(async(e,r)=>{let{role:n,userId:i,resource:o}=r;try{let r=(o.is_widget?await u.Ay.put(`/api/widgets/${o.id}/publishers/${i}`,{role:n}):await u.Ay.put(`/api/plugins/${o.id}/publishers/${i}`,{role:n})).data.meta.plugin,a=e.getState().user;n===O.kM.NONE&&i===a?.id&&(r.plugin_publishers={accepted:[],pending:[]}),e.dispatch((0,g.Qi)({publishedPlugins:[r],src:"setPluginPublisherRole"}));let s=e.getState(),{publishingPlugins:l,localPlugins:c,publishedPlugins:d,publishedWidgets:m,currentUserOrgId:p,authedProfilesById:h}=s,_=Object.values(c).find(e=>e.plugin_id===o.id),f=_?.localFileId??o.id,E=(0,N.mI)({...(0,w.getPermissionsState)(s),currentUserOrgId:p,localPlugins:c,publishedPlugins:d,publishedWidgets:m,authedProfilesById:h},_?.localFileId),y={...l[f].metadata,author:E.author,publishers:E.publishers,creators:E.creators,blockPublishingOnToS:E.blockPublishingOnToS};e.dispatch(ee({id:f,metadata:y}))}catch(r){throw e.dispatch(h.F.enqueue({message:(0,p.Jv)(r,r.message),error:!0})),(0,d.$D)(a.FigmaTeam.COMMUNITY,r),Error(r.message)}})},727749:(e,r,n)=>{n.d(r,{d6:()=>C,g3:()=>A,oj:()=>P,s1:()=>L,uR:()=>N});var a=n(167249),i=n(776250),o=n(966712),s=n(827697),l=n(743282),c=n(27087),d=n(939863),u=n(392592),m=n(980820),p=n(941381),h=n(662275),_=n(404717),g=n(107877),f=n(756085),E=n(988022),y=n(697551),b=n(555328),I=n(813408),T=n(93623),v=n(492330),S=n(395750),w=n(479296);let A=(0,a.N)("SET_SAVED_PLUGIN_VERSIONS");(0,m.nF)((e,r)=>{let n={};Object.keys(r).forEach(e=>{n[e]=[r[e].id]}),e.dispatch(p.b6({widgetIDToVersions:n}))});var N=(e=>(e.COMMUNITY_HUB="community_hub",e.INSERTS_MODAL="inserts_modal",e))(N||{});let C=(0,w.n)((0,m.MM)("SAVE_EXTENSION",(e,{id:r,resourceType:n,versionId:a,orgId:m,communityProfile:h,onSuccess:E,hideSuccessVisualBell:T,onFail:v,source:S,optimisticData:w},{optimistId:A})=>{let N=e.getState(),C={plugin_version_id:a,org_id:m,current_org_id:N.currentUserOrgId};C.can_handle_first_time_install=!0,C.use_upgraded_version=!0,C.profile_id=e.getState().authedActiveCommunityProfile?.id,n===b.vt.WIDGET&&(C.current_org_id=void 0);let L=`/api/${(0,y.n)(n)}/${r}/install`,O=c.Ay.post(L,C);if(N.user&&w?.resource){let e=`optimistic-plugin-install-${(0,l.g)()}`,r=(0,f.N3)(w.resource,{userId:m?null:N.user.id,orgId:m??null});r&&(0,s.WB)().optimisticallyCreate({PluginInstall:{[e]:r}},O)}O.then(({data:r})=>{e.dispatch(_.c(A));let a=r.meta,s=n===b.vt.WIDGET?{publishedPlugins:[a],src:"installResource",isWidget:!0}:{publishedPlugins:[a],src:"installResource"};if(e.dispatch(p.Qi({...s,overrideInstallStatus:!0})),E?.(),!T){let r=(()=>{if("inserts_modal"===S)return n===b.vt.PLUGIN?(0,d.t)("community.saves.plugin_saved"):(0,d.t)("community.saves.widget_saved");if((0,o.kc)().cmty_deprecate_browse_as_admin){if(m){let r=Object.values(e.getState().authedProfilesById).find(e=>e.org_id===m);return(0,d.t)(n===b.vt.PLUGIN?"community.saves.plugin_saved_for_everyone_at":"community.saves.widget_saved_for_everyone_at",{orgName:r?.name||"your org"})}if(e.getState().user?.community_profile_id)return(0,d.t)(n===b.vt.PLUGIN?"community.saves.plugin_saved_for_your_account_and_profile":"community.saves.widget_saved_for_your_account_and_profile")}else{if(h?.entity_type===I.o1.ORG)return n===b.vt.PLUGIN?(0,d.t)("community.saves.plugin_saved_for_everyone_at",{orgName:h.name}):(0,d.t)("community.saves.widget_saved_for_everyone_at",{orgName:h.name});if(h?.public_at)return n===b.vt.PLUGIN?(0,d.t)("community.saves.plugin_saved_for_your_account_and_profile"):(0,d.t)("community.saves.widget_saved_for_your_account_and_profile")}return n===b.vt.PLUGIN?(0,d.t)("community.saves.plugin_saved_for_your_account"):(0,d.t)("community.saves.widget_saved_for_your_account")})();e.dispatch(u.F.enqueue({message:r,type:"plugin-installed"}))}(0,i.sx)((0,b.xQ)(a)?g.M5.WIDGET_INSTALLED:g.M5.PLUGIN_INSTALLED,{communityHubEntity:(0,b.xQ)(a)?g.ZO.WIDGETS:g.ZO.PLUGINS,communityHubEntityId:a.id,source:S})}).catch(r=>{v?.(),e.dispatch(_.r(A)),403===r.data.status?e.dispatch(u.F.enqueue({message:n===b.vt.PLUGIN?(0,d.t)("community.actions.unable_to_save_plugin_error",{error:(0,d.Jv)(r,r.data?.message)}):(0,d.t)("community.actions.unable_to_save_widget_error",{error:(0,d.Jv)(r,r.data?.message)}),type:"PLUGIN_INSTALL_FAILED",error:!0})):e.dispatch(u.F.enqueue({message:n===b.vt.PLUGIN?(0,d.t)("community.actions.unable_to_save_plugin_please_try_again"):(0,d.t)("community.actions.unable_to_save_widget_please_try_again"),type:"PLUGIN_INSTALL_FAILED",error:!0}))})})),L=(0,m.MM)("UNSAVE_EXTENSION",(e,{id:r,resourceType:n,orgId:a,communityProfile:l,hideSuccessVisualBell:m,source:h,optimisticData:f},{optimistId:E})=>{let T={org_id:a,current_org_id:e.getState().currentUserOrgId};T.use_upgraded_version=!0,T.profile_id=e.getState().authedActiveCommunityProfile?.id,n===b.vt.WIDGET&&(T.current_org_id=void 0);let v=`/api/${(0,y.n)(n)}/${r}/install`,S=c.Ay.del(v,T);f?.pluginInstallId&&(0,s.WB)().optimisticallyDelete({PluginInstall:{[f.pluginInstallId]:null}},S),S.then(({data:s})=>{let c=s.meta,f=n===b.vt.WIDGET?{publishedPlugins:[c],src:"uninstallResource",isWidget:!0}:{publishedPlugins:[c],src:"uninstallResource"};if(e.dispatch(p.Qi({...f,overrideInstallStatus:!0})),e.dispatch(_.c(E)),!m){let i={message:(()=>{if("inserts_modal"===h)return n===b.vt.PLUGIN?(0,d.t)("community.saves.plugin_removed_from_your_account"):(0,d.t)("community.saves.widget_removed_from_your_account");if((0,o.kc)().cmty_deprecate_browse_as_admin){if(a){let r=Object.values(e.getState().authedProfilesById).find(e=>e.org_id===a);return(0,d.t)(n===b.vt.PLUGIN?"community.saves.plugin_removed_for_everyone_at":"community.saves.widget_removed_for_everyone_at",{orgName:r?.name||"your org"})}if(e.getState().user?.community_profile_id)return(0,d.t)(n===b.vt.PLUGIN?"community.saves.plugin_removed_from_your_account_and_profile":"community.saves.widget_removed_from_your_account_and_profile")}else{if(l?.entity_type===I.o1.ORG)return n===b.vt.PLUGIN?(0,d.t)("community.saves.plugin_removed_for_everyone_at",{orgName:l.name}):(0,d.t)("community.saves.widget_removed_for_everyone_at",{orgName:l.name});if(l?.public_at)return n===b.vt.PLUGIN?(0,d.t)("community.saves.plugin_removed_from_your_account_and_profile"):(0,d.t)("community.saves.widget_removed_from_your_account_and_profile")}return n===b.vt.PLUGIN?(0,d.t)("community.saves.plugin_removed_from_your_account"):(0,d.t)("community.saves.widget_removed_from_your_account")})(),type:"PLUGIN_UNINSTALL_SUCCESS",button:{text:(0,d.t)("community.undo"),action:()=>{e.dispatch(u.F.dequeue({matchType:"PLUGIN_UNINSTALL_SUCCESS"})),e.dispatch(C({id:r,resourceType:n,orgId:a,communityProfile:l,hideSuccessVisualBell:!0,source:h}))}}};e.dispatch(u.F.enqueue(i))}(0,i.sx)((0,b.xQ)(c)?g.M5.WIDGET_UNINSTALLED:g.M5.PLUGIN_UNINSTALLED,{communityHubEntity:(0,b.xQ)(c)?g.ZO.WIDGETS:g.ZO.PLUGINS,communityHubEntityId:c.id,source:h})}).catch(r=>{e.dispatch(_.r(E)),console.error(r)})}),O={[b.bD.PLUGIN]:function(e){return T.V.getInstallStatus({orgId:e})},[b.bD.WIDGET]:function(e){return v.U.getInstallStatus({orgId:e})}},R=(0,m.nF)((e,r)=>{let n={plugin_id:r.id};r.orgId&&(n.org_id=r.orgId);let a=O[r.resourceType];a&&a(r.orgId).then(({data:e})=>{r.callback(!e.meta.previously_installed_plugin)}).catch(n=>{e.dispatch(u.F.enqueue({type:"plugin-save-error",message:r.resourceType===b.vt.PLUGIN?(0,d.t)("community.actions.unable_to_save_plugin_error",{error:(0,d.Jv)(n,n.data.message||"unknown error")}):(0,d.t)("community.actions.unable_to_save_widget_error",{error:(0,d.Jv)(n,n.data.message||"unknown error")}),error:!0}))})}),P=(0,m.nF)((e,r)=>{let{orgId:n,id:a,resourceType:i,communityProfile:o}=r;e.dispatch(R({orgId:n,id:a,resourceType:i,callback:r=>{r?((0,E.Cu)({action:g.s0.PLUGIN_INSTALL_CONFIRMATION_MODAL_SHOWN,communityHubEntity:g.ZO.PLUGINS,communityHubEntityId:a}),e.dispatch((0,h.to)({type:S.c,data:{dispatch:e.dispatch,id:a,resourceType:i,callback:()=>{e.dispatch(C({id:a,resourceType:i,orgId:n,communityProfile:o,source:"community_hub"}))}}}))):e.dispatch(C({id:a,resourceType:i,orgId:n,communityProfile:o,source:"community_hub"}))}}))})},162895:(e,r,n)=>{n.d(r,{aI:()=>K,cx:()=>W});var a=n(414507),i=n(776250),o=n(966712),s=n(315044),l=n(563706),c=n(776621),d=n(761870),u=n(939863),m=n(392592),p=n(934533),h=n(351226),_=n(749949),g=n(291861),f=n(980820),E=n(662275),y=n(986270),b=n(697551),I=n(655215),T=n(935308),v=n(411916),S=n(750668),w=n(428467),A=n(215822),N=n(935757),C=n(555328),L=n(239671),O=n(567088),R=n(809073),P=n(379791),D=n(237870),k=n(740164),M=n(488578),F=n(372069),x=n(109226),U=n(685121);let B=()=>async e=>{let r="org-admin-team-creation";e(m.F.enqueue({message:(0,u.t)("resources_tab.create_team_modal.team_creation_loading"),type:r,icon:p.zX.SPINNER}));try{let n=(await P.G.createStarterTeam()).data.meta;return e(m.F.dequeue({matchType:r})),e(E.Lo()),n}catch(n){return e(m.F.dequeue({matchType:r})),e(E.Lo()),e(m.F.enqueue({message:(0,u.t)("general.an_error_occurred"),error:!0})),Promise.reject()}},V=(0,D.Ju)(M.Rw),G=(e,r,n)=>a=>{a(E.to({type:V,data:{confirmationTitle:(0,u.t)("resources_tab.create_team_modal.modal_title",{extensionName:e}),content:(0,u.t)("resources_tab.create_team_modal.content",{orgName:r}),confirmText:(0,u.t)("general.continue"),onConfirm:()=>{a(B()).then(n)},hideCancel:!0}}))},H=(0,f.nF)(async(e,r)=>{let{workspaces:n,plans:a}=r,i=e.getState(),{authedUsers:o,orgById:s}=i,l=n.map(e=>({...e,workspaceName:(0,v.HE)(i,e),user:o.byId[e.userId]})),c=await Promise.all(l.map(async e=>{let n=e.orgId&&s[e.orgId],o=!0,l=!0;if(n&&(o=await (0,I.hb)(r.resource,n),l=(0,I.VT)(r.resource,n)),(0,A.Rt)(r.resource)&&!(0,w.canMemberOrg)(e.orgId,i,e.userId))return;let c=(0,g.y)(e,(0,L.wN)(r.editorType),i,a);return c.publicPluginsOrWidgetDisabled=!o,c.extensionRequestsAllowed=l,c})),d=[];if(c.forEach(e=>{void 0!==e&&d.push(e)}),d.length<=1){let e=d.length?d[0]:void 0;r.onSelectWorkspace(e);return}e.dispatch(E.to({type:h._,data:{payload:{extension:r.resource,workspaces:d,onSelectWorkspace:r.onSelectWorkspace,mode:"new_file"}}}))}),W=(0,f.nF)((e,r)=>{if(l.rr){window.location.href="/login";return}let n=r.isWidget?(0,u.t)("community.logged_out.sign_up_modal_widget_header"):(0,u.t)("community.logged_out.sign_up_modal_plugin_header");e.dispatch(d.Ts({origin:"plugin_try_signed_out"})),e.dispatch(E.to({type:k.l,data:{headerText:n,icon:r.isWidget?U.A:x.A,dispatch:e.dispatch,redirectPath:r.redirectPath}}))});(0,f.nF)((e,r)=>{let n=e.getState().user,a=!!r.extension.isWidget,i=r.extension.currentPluginVersion;if(!i||!n)return;let o=i.hasPlaygroundFile,s=r.fullscreenEditorType===L.nT.DevHandoff,l={fullscreenEditorType:r.fullscreenEditorType,tryPluginId:r.extension.id,tryPluginVersionId:i.id,tryPluginName:i.name??"",isWidget:a,isPlaygroundFile:!!(o||s),fuid:n.id,tryPluginParams:void 0};(0,N.Y9)(n.id,!1,null),(0,F.j)(l,null,null,n.id),(()=>{let o={storeInRecentsKey:r.fullscreenEditorType===L.nT.Whiteboard?R.$A.FigJam:R.$A.Design,id:r.extension.id,version:i.id,currentUserId:n.id};a?e.dispatch(y.RH(o)):e.dispatch(y.gU(o))})()}),(0,f.nF)((e,r)=>{let n=e.getState(),a=n.user,i=!!r.extension.isWidget,o=r.extension.currentPluginVersion;if(!o||!a)return;let l=()=>{let n={storeInRecentsKey:r.fullscreenEditorType===L.nT.Whiteboard?R.$A.FigJam:R.$A.Design,id:r.extension.id,version:o.id,currentUserId:a.id};i?e.dispatch(y.RH(n)):e.dispatch(y.gU(n))},c=o.hasPlaygroundFile,d=r.fullscreenEditorType===L.nT.DevHandoff,u={fullscreenEditorType:r.fullscreenEditorType,tryPluginId:r.extension.id,tryPluginVersionId:o.id,tryPluginName:o.name??"",isWidget:i,isPlaygroundFile:!!(c||d),fuid:a.id,tryPluginParams:void 0},m=n.plans.filter(e=>e.plan_type===O.O.TEAM).map(e=>{let r=(0,s.O)(e,a.id);return{...r,workspaceName:(0,v.HE)(n,r),user:a}});if(0===m.length){e.dispatch(G(o.name,n.orgById[n.currentUserOrgId].name,e=>{(0,N.Y9)(a.id,!1,null,void 0,e.id),(0,F.j)(u,null,e.id,a.id),l()}));return}1===m.length?((0,N.Y9)(a.id,!1,null,void 0,m[0].teamId??null),(0,F.j)(u,null,m[0].teamId??null,a.id),l()):e.dispatch(E.to({type:h._,data:{payload:{workspaces:m,onSelectWorkspace:e=>{(0,N.Y9)(a.id,!1,null,void 0,e?.teamId??null),(0,F.j)(u,null,e?.teamId??null,a.id),l()},mode:"new_file"}}}))}),(0,f.nF)((e,r)=>{let n=e.getState(),a=n.user,i=!!r.extension.isWidget,o=r.extension.currentPluginVersion;if(!o||!a)return;let s=o.hasPlaygroundFile,l=r.fullscreenEditorType===L.nT.DevHandoff,c={fullscreenEditorType:r.fullscreenEditorType,tryPluginId:r.extension.id,tryPluginVersionId:o.id,tryPluginName:o.name??"",isWidget:i,isPlaygroundFile:!!(s||l),fuid:a.id,tryPluginParams:void 0},d=n.plans.find(e=>e.plan_type===O.O.ORG&&e.plan_id===n.currentUserOrgId);(0,N.Y9)(a.id,!1,d.plan_id,void 0,null),(0,F.j)(c,d.plan_id,null,a.id),(()=>{let n={storeInRecentsKey:r.fullscreenEditorType===L.nT.Whiteboard?R.$A.FigJam:R.$A.Design,id:r.extension.id,version:o.id,currentUserId:a.id};i?e.dispatch(y.RH(n)):e.dispatch(y.gU(n))})()});let K=(0,f.nF)(async(e,r)=>{let n=e.getState(),{user:s,authedActiveCommunityProfile:l}=n,d=(0,_.w)(n),p=(0,C.xQ)(r.resource),h=(0,A.uF)(r.resource);if(!s){e.dispatch(W({isWidget:p}));return}let g=()=>{let n={storeInRecentsKey:r.fullscreenEditorType===L.nT.Whiteboard?R.$A.FigJam:R.$A.Design,id:r.resource.id,version:h.id,currentUserId:s.id};p?e.dispatch(y.RH(n)):e.dispatch(y.gU(n))},f=(0,b.Gg)(n).length>1,E=(0,b.cs)(l),w=!!(s?.id&&(0,v.Tt)([s.id],n)),O=[],P=null;if((0,o.kc)().ps_benchmark)try{P=await e.dispatch((0,T.nm)(!0)),O=(0,S.F)(n,r.resource,P)}catch(n){let r=n?.data?.message||(0,u.t)("file_browser.error_try_again");e.dispatch(m.F.enqueue({message:r,type:"error"}))}else O=(0,S.F)(n,r.resource,{plansByUserId:{},teams:[],orgs:[]});let D=(f||w)&&!E&&!r.fileKey;(0,o.kc)().ps_benchmark&&(D=O.length>1&&!r.fileKey);let k={fullscreenEditorType:r.fullscreenEditorType,tryPluginId:r.resource.id,tryPluginVersionId:h.id,tryPluginName:h.name,tryPluginEditorType:(0,A.iz)(h.manifest.editorType),isWidget:p,isPlaygroundFile:!!r.isPlaygroundFile,tryPluginParams:void 0,fileKey:r.fileKey};if((0,i.sx)("CTA Clicked",{name:"Try it out",pluginId:r.resource.id,isWidget:p,editorType:r.fullscreenEditorType,isMonetized:(0,C.m3)(r.resource),fileKey:r.fileKey,searchSessionId:d}),D)(0,i.sx)("try_it_out_drafts_picker_menu_opened",{pluginId:r.resource.id,isWidget:p,searchSessionId:d}),e.dispatch(H({plans:P,workspaces:O,resource:r.resource,editorType:(0,L.oD)(r.fullscreenEditorType),onSelectWorkspace:e=>{e?(k.fuid=e.userId,(0,N.Y9)(e.userId,!1,e.orgId,void 0,e.teamId??null),(0,F.j)(k,e.orgId,e.teamId??null,e.userId)):(0,F.j)(k,null,null,s.id),g()}}));else{if((0,o.kc)().ps_benchmark){if(r.fileKey)k.fuid=r.userId??s.id,(0,F.j)(k,null,null,k.fuid);else if(1===O.length){let a=O[0];if(a.orgId&&!(0,I.VT)(r.resource,n.orgById[a.orgId])&&!await (0,I.hb)(r.resource,n.orgById[a.orgId])){e.dispatch(G(h.name,(0,v.HE)(n,a),e=>{(0,N.Y9)(s.id,!1,null,void 0,e.id),(0,F.j)(k,null,e.id,s.id),g()}));return}(0,N.Y9)(a.userId,!1,a.orgId,void 0,a.teamId??null),(0,F.j)(k,a.orgId,a.teamId??null,a.userId)}else(0,c.$D)(a.FigmaTeam.COMMUNITY,Error("No workspaces found")),e.dispatch(m.F.enqueue({message:(0,u.t)("file_browser.error_try_again"),error:!0}))}else r.userId?(k.fuid=r.userId,(0,N.Y9)(r.userId,!1),(0,F.j)(k,null,null,r.userId)):(0,F.j)(k,null,null,s.id);g()}})},225266:(e,r,n)=>{n.d(r,{MZ:()=>E,Nn:()=>g,Xt:()=>I,aq:()=>b,dx:()=>f,gI:()=>T});var a=n(27087),i=n(881388),o=n(939863),s=n(868389),l=n(980820),c=n(941381),d=n(164185),u=n(988022),m=n(215822),p=n(772192),h=n(867795),_=n(76158),g=(e=>(e.INVITE_TILE="invite_tile",e.COMMUNITY_PAGE="community_page",e))(g||{});(0,l.nF)((e,r)=>{a.Ay.put("/api/community_publishers/accept",r).then(({data:r})=>{let n=y(r.meta);n&&e.dispatch(n)}).catch(r=>{let n=(0,o.Jv)(r);throw e.dispatch(i.s.error((0,o.t)("community.actions.an_error_occurred_accepting_invite_please_refresh_and_try_again"))),Error(`Error updating resource ${n}`)})});let f=(0,l.nF)((e,r)=>{let{src:n,plugin_id:s,widget_id:l}=r;a.Ay.put("/api/plugin_publishers/accept",{plugin_id:s,widget_id:l}).then(({data:r})=>{let a=y(r.meta);a&&e.dispatch(a),(0,u.ye)("plugin_publisher_invite_accepted",{src:n,userId:e.getState().user?.id,pluginId:s??l,isWidget:!!l});let i=(0,m.T)();s?(0,d.s)({initialX:0,initialY:0,initialTab:"figjam"===i?h.p.PLUGINS:void 0,initialFdResourceTab:"figma"===i?_.s.PLUGIN:void 0,scrollDevelopmentSectionIntoView:"figjam"===i,initialFdView:"figma"===i?"development":void 0,source:`extension-publisher-invite-${n}`}):l&&(0,d.s)({initialX:0,initialY:0,initialTab:"figjam"===i?h.p.WIDGETS:void 0,initialFdResourceTab:"figma"===i?_.s.WIDGET:void 0,scrollDevelopmentSectionIntoView:"figjam"===i,initialFdView:"figma"===i?"development":void 0,source:`extension-publisher-invite-${n}`})}).catch(r=>{let n=(0,o.Jv)(r);throw e.dispatch(i.s.error((0,o.t)("community.actions.an_error_occurred_accepting_invite_please_refresh_and_try_again"))),Error(`Error updating resource ${n}`)})});(0,l.nF)((e,r)=>{a.Ay.del("/api/community_publishers/remove",r).then(({data:r})=>{let n=y(r.meta);n&&e.dispatch(n)}).catch(r=>{let n=(0,o.Jv)(r);throw e.dispatch(i.s.error((0,o.t)("community.actions.an_error_occurred_while_removing_publisher_please_refresh_and_try_again"))),Error(`Error updating resource ${n}`)})});let E=(0,l.nF)((e,r)=>{a.Ay.del("/api/plugin_publishers/remove",r).then(({data:n})=>{let a=n.meta;if(n.meta.plugin){let{plugin_publishers:e}=n.meta.plugin;n.meta.plugin.plugin_publishers=e??{accepted:[],pending:[]}}else if(n.meta.widget){let{plugin_publishers:e}=n.meta.widget;n.meta.widget.plugin_publishers=e??{accepted:[],pending:[]}}let i=y(a);i&&e.dispatch(i),(0,u.ye)("plugin_publisher_invite_removed",{src:r.src,userId:e.getState().user?.id,pluginId:r.plugin_id||r.widget_id,isWidget:!!r.widget_id})}).catch(r=>{let n=(0,o.Jv)(r);throw e.dispatch(i.s.error((0,o.t)("community.actions.an_error_occurred_while_removing_publisher_please_refresh_and_try_again"))),Error(`Error updating resource ${n}`)})});function y(e){return e.hub_file?(0,s.Sb)({hubFiles:[e.hub_file],src:"removeCommunityPublisher"}):e.plugin?c.Qi({publishedPlugins:[e.plugin],src:"removeCommunityPublisher"}):e.widget?c.Qi({publishedPlugins:[e.widget],src:"removeCommunityPublisher"}):void 0}let b=(0,l.nF)(e=>{p.R.loadPluginsPublishedByUser(e),p.R.loadPluginsAuthoredByCurrentOrg(e)}),I=(0,l.nF)(e=>{p.R.loadPluginsAuthoredByCurrentOrg(e)}),T=(0,l.nF)(async e=>{await p.R.loadWidgetsAuthoredByCurrentOrg(e)})},57879:(e,r,n)=>{n.d(r,{r:()=>E});var a=n(299321),i=n(939863),o=n(392592),s=n(545941),l=n(980820),c=n(662275),d=n(988022),u=n(428467),m=n(215822),p=n(555328),h=n(951982),_=n(749449),g=n(530498),f=n(941381);let E=(0,l.nF)((e,{localFileId:r,publishedPluginId:n,entryPoint:l,initialTab:E,initialAllowedTabs:y,localSnapshotUrl:b,localSnapshotBlob:I})=>{let T=e.getState(),{localPlugins:v,publishedPlugins:S,publishedWidgets:w,publishingPlugins:A,currentUserOrgId:N,authedProfilesById:C,user:L}=T,O=n&&S[n]||n&&w[n],R=null!=r&&v[r];if(O&&!(0,p.m3)(O)&&(0,s.Ul)(O)&&R&&R.manifest.permissions?.includes("payments")&&L&&!L.has_passed_visual_compliance){e.dispatch(c.$O({type:g.O.type}));return}if(null==r||A[r]){if(null!=r&&A[r])try{if(b&&A[r].metadata.widgetSnapshotImageSrc!==b){let{metadata:n}=A[r];n.widgetSnapshotImageSrc=b,n.widgetSnapshotImageBlob=I,e.dispatch((0,f.fy)({id:r,metadata:n}))}}catch(r){e.dispatch(o.F.enqueue({message:(0,i.Jv)(r)||r.message,error:!0}));return}else if(void 0===r&&n&&O)try{let r=(0,m.mI)({...(0,u.getPermissionsState)(T),currentUserOrgId:N,localPlugins:v,publishedPlugins:S,publishedWidgets:w,authedProfilesById:C},void 0,n,b);e.dispatch((0,f.fy)({id:O.id,metadata:r}))}catch(r){e.dispatch(o.F.enqueue({message:(0,i.Jv)(r)||r.message,error:!0}));return}}else try{let a=(0,m.mI)({...(0,u.getPermissionsState)(T),currentUserOrgId:N,localPlugins:v,publishedPlugins:S,publishedWidgets:w,authedProfilesById:C},r,n,b,I);e.dispatch((0,f.fy)({id:r,metadata:a}))}catch(r){e.dispatch(o.F.enqueue({message:(0,i.Jv)(r)||r.message,error:!0}));return}a.glU&&a.glU.triggerAction("set-tool-default",null),(0,d.uE)("show_publish_plugin_modal",T,{entryPoint:l,userId:T.user?.id,orgId:T.currentUserOrgId,resourceType:O?O.is_widget?"widget":"plugin":void 0,publishedResourceId:O?O.id:void 0,initialTab:E??_.KM.PUBLISH}),e.dispatch(c.to({type:h.o,data:{localFileId:r,entryPoint:l,initialTab:E,initialAllowedTabs:y??_.x5,publishedPluginId:O?O.id:void 0,existingSecurityFormResponse:null}}))})},970516:(e,r,n)=>{n.d(r,{Pv:()=>_,S:()=>h,TH:()=>m,lW:()=>u,le:()=>p});var a=n(686759),i=n(939863),o=n(392592),s=n(662275),l=n(707465),c=n(558356),d=n(980820);let u=(0,d.nF)((e,r)=>{let n=r.stringToCopy,s={withLineBreaks:!(r.ignoreLineBreaks??!0),successText:r.successText};(0,a.Dk)(n,s).then(()=>{e.dispatch(o.F.enqueue({type:"copied_to_clipboard",message:s.successText??(0,i.t)("fullscreen_actions.copied_to_clipboard")}))})});function m(e){return(0,d.nF)((e,r)=>{let n=r.selector.selectedViewToPath(r.selectedView,r.data);if(!n)return;let a=new URL(n,document.baseURI).href;e.dispatch(h({url:a}))})(e)}(0,d.nF)((e,r)=>{let n=r.emailList,s=n.length,l=n.join("; ");(0,a.Dk)(l).then(()=>{e.dispatch(o.F.enqueue({message:(0,i.t)("copy_to_clipboard.emails_copied_to_clipboard",{numEmails:s,emailText:l}),type:"emails-copied"}))})});let p=(0,d.nF)((e,r)=>{let n=new URL((0,l.Np)(e.getState(),r),document.baseURI).href;e.dispatch(h({url:n}))}),h=(0,d.nF)((e,r)=>{let n=r.url;(0,a.Dk)(n).then(()=>{e.dispatch(o.F.enqueue({type:"link_copied_to_clipboard",message:(0,i.t)("copy_to_clipboard.link_to_selection_copied_to_clipboard")}))}).catch(()=>{e.dispatch(s.to({type:c.o,data:{link:n}}))})}),_=(0,d.nF)((e,r)=>{let n=r.url,l="plugin"===r.extensionType?(0,i.t)("copy_to_clipboard.link_to_plugin_copied_to_clipboard"):(0,i.t)("copy_to_clipboard.link_to_widget_copied_to_clipboard");(0,a.Dk)(n).then(()=>{e.dispatch(o.F.enqueue({type:"link_copied_to_clipboard",message:l}))}).catch(()=>{e.dispatch(s.to({type:c.o,data:{link:n}}))})})},56691:(e,r,n)=>{n.d(r,{Ri:()=>O,c3:()=>P,j3:()=>L,mg:()=>C,on:()=>R});var a=n(167249),i=n(776250),o=n(627776),s=n(297666),l=n(517333),c=n(737947),d=n(315044),u=n(738269),m=n(119198),p=n(974105),h=n(788811),_=n(99506),g=n(623746),f=n(428467),E=n(707465),y=n(776615),b=n(239671),I=n(945020),T=n(967409),v=n(294662),S=n(637590),w=n(980820),A=n(445092);let N=(0,w.nF)((e,{viewport:r})=>{let{selectedView:n}=e.getState();if("fullscreen"===n.view){e.dispatch(u.$T({...n,viewport:r}));let a=h.ZG()?.fileKey||n.fileKey;a&&l.eD?.updateViewport(a,r)}});(0,w.nF)(e=>{let r=e.getState(),n=function(e){let r=(0,f.getPermissionsStateMemoized)(e);return r.currentUserOrgId?(0,f.canMemberOrg)(r.currentUserOrgId,r)?T.Rx.ORG:T.Rx.ORG_GUEST:T.Rx.PERSONAL}(r);e.dispatch(A.Rz({query:r.desktopNewTab.searchQuery,searchScope:n,searchModelType:T.uH.FILES})),e.dispatch(A.r0({entryPoint:"desktop_new_tab"})),r=e.getState();let a=(0,E.xS)(r,{view:"search",entryPoint:"desktop_new_tab",previousView:r.selectedView&&((0,S.QB)(r.selectedView)||(0,S.bN)(r.selectedView))?r.selectedView:void 0});c.Ay.redirect(a)});let C=(0,a.N)("DESKTOP_NEW_TAB_SET_LOADING_BACKGROUND_COLOR"),L=(0,a.N)("DESKTOP_NEW_TAB_SET_IS_SEARCH_BAR_FOCUSED"),O=(0,a.N)("DESKTOP_NEW_TAB_SET_SEARCH_QUERY");function R(e,r){return null==r?"#00000000":"whiteboard"===r?"#ffffff":`#${(0,y.w2)(e)}`}(0,w.nF)((e,r)=>{let n=e.getState(),a=r.result,i=a.model,o={position:r.index,resource_id:i.key,resource_type:a.search_model_type.toString(),matched_queries:a.matched_queries,result:a},s={plan:(0,d.S)(n)};new v.vj.Analytics(n.search,o,s).click(a.search_model_type,n.selectedView,{action:r.clickAction}),e.dispatch(A.ky()),e.dispatch(u.$T({view:"fullscreen",fileKey:i.key,editorType:(0,b.wN)(i.editor_type??_._Y.DESIGN)}))}),(0,w.nF)(async(e,r,{liveStore:n})=>{let a=await n.fetchFile(r.fileKey);(0,i.sx)("Desktop New Tab Open Recent",{itemType:"prototype",fileKey:a.key}),e.dispatch(u.$T({view:"prototype",file:(0,g.ge)(a),nodeId:r.pageId,pageId:r.pageId}))}),(0,w.nF)(async(e,r,{liveStore:n})=>{let a=await n.fetchFile(r.fileKey);(0,i.sx)("Desktop New Tab Open Recent",{itemType:"file",fileKey:a.key}),e.dispatch(u.$T({view:"fullscreen",fileKey:a.key,editorType:(0,b.wN)(a.editor_type??_._Y.DESIGN)}))}),(0,w.nF)((e,r)=>{let n=e.getState();if(!n.desktopNewTab.isCreatingFile){let a=(0,o.ce)()?I.ai.SAME_TAB:I.ai.NEW_TAB,i=(0,p.xA)(e.getState(),a,r.projectId?{folderId:r.projectId}:"drafts",{from:I.f6.DESKTOP_NEW_TAB_BUTTON,selectedView:n.selectedView},r.editorType,void 0);e.dispatch(m.uM(i))}});let P=(0,s.s)((e,r)=>{e.dispatch(N({viewport:r}))},1e3)},244673:(e,r,n)=>{n.d(r,{A3:()=>K,CE:()=>V,Cs:()=>j,HS:()=>R,I4:()=>eh,Ir:()=>P,N9:()=>Z,NL:()=>Y,Np:()=>J,OC:()=>en,OJ:()=>O,Ox:()=>U,Pg:()=>er,Qv:()=>ed,UX:()=>q,V9:()=>F,VV:()=>eu,Vk:()=>ep,WA:()=>L,_1:()=>em,bA:()=>ec,e9:()=>es,g6:()=>C,h8:()=>ei,he:()=>k,iy:()=>G,k1:()=>ee,ks:()=>H,lV:()=>et,lu:()=>ea,mI:()=>el,n0:()=>Q,ne:()=>e_,oI:()=>N,ot:()=>B,wk:()=>W});var a=n(299321),i=n(167249),o=n(157663),s=n(297666),l=n(966712),c=n(939863),d=n(392592),u=n(988022),m=n(974105),p=n(420576),h=n(355513),_=n(960628),g=n(239671),f=n(518261),E=n(846456),y=n(587467),b=n(411189),I=n(728406),T=n(368702),v=n(980820);function S(e){return e.multiplayer.allUsers.length}function w(e){return e?e.isPaused?e.lastReceivedSongTimestampMs:e.lastReceivedSongTimestampMs+(performance.now()-e.timeOrigin):0}async function A(e,r){let n=e;return await (0,b._s)({songID:e,onSuccess:()=>{},onNotFound:()=>{r.dispatch(z({selectedSongID:"",musicStartTimeMs:0})),n="",r.dispatch(X()),r.dispatch(d.F.enqueue({message:(0,c.t)("whiteboard.timer.song_not_available_error"),error:!0,type:"active-song-not-found"}))}}),n}let N=(0,i.N)("SET_SELECTED_SONG_ID_MUSIC");(0,v.nF)((e,r)=>{let{music:n}=e.getState().music,a=!r.dontTransmitWhenPaused;if(n&&!n.isStopped&&(!n.isPaused||a)){let a=e.getState().music.activeSongs.find(e=>e.song_id===r.selectedSongID);e.dispatch(x({eventName:"update-music-song-id",isPaused:!n||n.isPaused,selectedSongID:r.selectedSongID,lastReceivedSongTimestampMs:a?.start_at_ms||0,isStopped:!n||n.isStopped}))}e.dispatch(N(r))});let C=(0,v.nF)(e=>{e.dispatch(L()),(0,b.I8)(),(0,b.om)()}),L=(0,i.N)("RESET_LOCAL_MUSIC"),O=(0,v.nF)((e,r)=>{if(e.dispatch(R(r)),r.isPaused||r.isStopped||!r.selectedSongID)(r.isPaused||r.isStopped)&&(0,b.c4)()&&(0,b.I8)();else{let n=M(r.selectedSongID,e.getState().music.activeSongs);(0,b.$_)(n,()=>{e.dispatch(D())})}}),R=(0,i.N)("SET_MUSIC_STATE"),P=(0,i.N)("RESUME_MUSIC");(0,v.nF)(async(e,r)=>{let n=w(r),a=e.getState(),i=a.music.music?.selectedSongID;i&&(i=await A(i,e)),e.dispatch(x({eventName:"resume-music",isPaused:!1,selectedSongID:i||"",lastReceivedSongTimestampMs:n,isStopped:!1})),e.dispatch(P(r))}),(0,v.nF)((e,r)=>{let n=w(r),a=e.getState(),i=a.music.music?.selectedSongID;e.dispatch(x({eventName:"pause-music",isPaused:!0,selectedSongID:i||"",lastReceivedSongTimestampMs:n,isStopped:!1}))});let D=(0,v.nF)(e=>{let r=e.getState(),n=r.music.music?.selectedSongID;e.dispatch(x({eventName:"stop-music",isPaused:!0,selectedSongID:n||"",lastReceivedSongTimestampMs:0,isStopped:!0}))}),k=(0,i.N)("START_MUSIC");(0,v.nF)(async(e,{musicStartTimeMs:r=0})=>{let{music:n}=e.getState().music,a="";n&&(a=n.selectedSongID),a&&(a=await A(a,e)),e.dispatch(x({eventName:"start-music",isPaused:!1,selectedSongID:a,lastReceivedSongTimestampMs:r,isStopped:!1})),e.dispatch(k({musicStartTimeMs:r}))});let M=(e,r)=>r.find(r=>r.song_id===e),F=(0,i.N)("SEND_MUSIC_MESSAGE"),x=(0,v.nF)((e,r)=>{let n=e.getState().music;a.h3O.sendMusic(r.isPaused,(n?.music?.musicMessageID||0)+1,r.selectedSongID||"",r.lastReceivedSongTimestampMs||0,r.isStopped),e.dispatch(F(r))});(0,v.nF)((e,r)=>{"open"===r.state&&(0,T.D)(()=>{e.getState().music?.modalState==="open"&&e.dispatch(U({state:"closed",userInitiated:!1}))}),e.dispatch(U(r))});let U=(0,i.N)("SET_MUSIC_MODAL"),B=(0,i.N)("RESET_LOCAL_TIMER"),V=(0,i.N)("SET_MUSIC_STANDALONE_VOLUME");(0,v.nF)((e,r)=>{$(e.getState(),r),e.dispatch(V(r))});let G=(0,i.N)("SET_MUSIC_IS_MUTED");(0,v.nF)((e,{isMuted:r,userInitiated:n})=>{n&&(0,y.ym)(e.getState(),r),e.dispatch(G({isMuted:r,userInitiated:n}))});let H=(0,i.N)("SET_TIMER_AND_MUSIC_ARE_MUTED");(0,v.nF)((e,{isMuted:r,userInitiated:n})=>{n&&(0,y.ym)(e.getState(),r),e.dispatch(H({isMuted:r,userInitiated:n}))});let W=(0,i.N)("SET_STANDALONE_MUSIC_PLAYER"),K=(0,i.N)("SET_MAIN_MUSIC_PLAYER"),Y=(0,i.N)("SET_MUSIC_VOLUME");(0,v.nF)((e,r)=>{$(e.getState(),r),e.dispatch(Y(r))});let $=(0,s.s)((e,r)=>(0,y.qV)(e,r),1e3,!1),j=(0,i.N)("SET_SELECTED_SONG_ID"),z=(0,v.nF)((e,r)=>{let{time:n}=e.getState().timer;if(n&&n.totalTimeMs>0){let a=(0,I.P$)(n);e.dispatch(eo({eventName:"update-timer-song-id",totalTimeMs:n.totalTimeMs,timeRemainingMs:a,isPaused:n.isPaused,songID:r.selectedSongID,lastReceivedSongTimestampMs:r.musicStartTimeMs})),_.d1.timerChange("timerupdatesongid")}e.dispatch(j(r))}),q=(0,i.N)("GET_ACTIVE_SONGS_SUCCESS"),X=(0,v.nF)(async e=>{try{let r=await f.N.getSongs();if(!r||200!==r.status||!r.data||!r.data.meta)throw o.k.warn("Failed to fetch active songs"),Error("Api error while fetching active songs");e.dispatch(q(r.data.meta))}catch(e){throw o.k.warn("Failed to fetch active songs"),e}}),J=(0,i.N)("GET_ALL_SONGS_SUCCESS");(0,v.nF)(async e=>{if(!(0,l.kc)().figjam_more_tracks_listen)throw Error("Fetching all songs disabled");try{let r=await f.N.getAllSongs();if(!r||200!==r.status||!r.data||!r.data.meta)throw o.k.warn("Failed to fetch all songs"),Error("Api error while fetching all songs");e.dispatch(J(r.data.meta))}catch(e){throw o.k.warn("Failed to fetch all songs"),e}});let Z=(0,i.N)("SET_SHOWING_FILE_FOOTER"),Q=(0,i.N)("SET_SELECTED_TYPED_PROP_DEF_ID"),ee=(0,i.N)("SET_START_CHIME_PLAYED"),et=(0,i.N)("SET_TIMER_NOTIFICATION"),er=(0,i.N)("SET_TIMER_AUDIO_ENABLED"),en=(0,i.N)("SET_TIMER_MODAL"),ea=(0,v.nF)((e,r)=>{if("open"===r.state&&(0,I.FR)()&&(0,T.D)(()=>{let r=(0,I.FR)();e.getState().timer?.modalState==="open"&&r&&e.dispatch(ea({state:"closed",userInitiated:!1}))}),r.userInitiated){let n=e.getState(),a=n.timer.time?.timeRemainingMs>0;(0,u.ds)(`timer-modal-${r.state}`,n.openFile?.key,n,{"multiplayer-users":S(n),"timer-active":a,source:r.source})}e.dispatch(en(r))}),ei=(0,i.N)("SEND_TIMER"),eo=(0,v.nF)((e,r)=>{let n=e.getState(),i=n.timer,o=i.setBy;if("start-timer"===r.eventName){let e=n.multiplayer.allUsers.find(e=>e.sessionID===n.multiplayer.sessionID);o=e?e.name:l.Ay().user_data?.handle||"anonymous user"}if(a.h3O.sendTimer(r.totalTimeMs||0,r.timeRemainingMs||0,!!r.isPaused,(i?.time?.timerID||0)+1,o,r.songID||"",r.lastReceivedSongTimestampMs||0),r.eventName){let e={"multiplayer-users":S(n)};if("adjust-timer"===r.eventName){let a=Math.round((r.totalTimeMs-n.timer.time.totalTimeMs)/1e3);e["time-added-s"]=a}else"start-timer"===r.eventName&&(e["duration-s"]=Math.round(r.totalTimeMs/1e3));(0,u.ds)(r.eventName,n.openFile?.key,n,e,{forwardToDatadog:!0})}e.dispatch(ei(r))}),es=(0,i.N)("SET_TIMER"),el=(0,v.nF)((e,r)=>{if(0===r.totalTimeMs){let r=e.getState(),n=(0,m.d1)(r);if(n){let e=(0,p.L8)(n,r.repos);!function(e,r,n){if(!e)return;let a=new E.a().selectedViewNameHelper(e,r);(0,h.hL)(a,(0,g.wN)(e.editor_type),"")}(n,e)}}e.dispatch(es(r))}),ec=(0,i.N)("START_TIMER"),ed=(0,v.nF)(async(e,{totalTimeMs:r,musicStartTimeMs:n=0})=>{let a=e.getState().timer.selectedSongID;a&&(a=await A(a,e)),e.dispatch(eo({eventName:"start-timer",totalTimeMs:r,timeRemainingMs:r,isPaused:!1,songID:a,lastReceivedSongTimestampMs:n})),_.d1.timerChange("timerstart"),e.dispatch(ec({totalTimeMs:r,musicStartTimeMs:n}))}),eu=(0,v.nF)((e,r)=>{let n=e.getState().timer.selectedSongID;e.dispatch(eo({eventName:"adjust-timer",totalTimeMs:r.timer.totalTimeMs+r.deltaMs,timeRemainingMs:(0,I.P$)(r.timer)+r.deltaMs,isPaused:r.timer.isPaused,songID:n,lastReceivedSongTimestampMs:r.timer.lastReceivedSongTimestampMs})),_.d1.timerChange("timeradjust")}),em=(0,v.nF)((e,r)=>{let n=(0,I.P$)(r),a=w(r),i=e.getState().timer.selectedSongID;e.dispatch(eo({eventName:"pause-timer",totalTimeMs:r.totalTimeMs,timeRemainingMs:n,isPaused:!0,songID:i,lastReceivedSongTimestampMs:a})),_.d1.timerChange("timerpause")}),ep=(0,v.nF)(e=>{let r=e.getState().timer.selectedSongID;e.dispatch(eo({eventName:"stop-timer",totalTimeMs:0,timeRemainingMs:0,isPaused:!0,songID:r,lastReceivedSongTimestampMs:0})),_.d1.timerChange("timerstop")}),eh=(0,i.N)("RESUME_TIMER"),e_=(0,v.nF)(async(e,r)=>{let n=e.getState().timer.selectedSongID;n&&(n=await A(n,e)),e.dispatch(eo({eventName:"resume-timer",totalTimeMs:r.totalTimeMs,timeRemainingMs:r.timeRemainingMs,isPaused:!1,songID:n,lastReceivedSongTimestampMs:r.lastReceivedSongTimestampMs})),_.d1.timerChange("timerresume"),e.dispatch(eh(r))})},54552:(e,r,n)=>{n.d(r,{DN:()=>R,EX:()=>C,Fb:()=>F,Mv:()=>L,N9:()=>w,U6:()=>T,X7:()=>P,dy:()=>A,gG:()=>M,iN:()=>D,jv:()=>N,lF:()=>I,ox:()=>O,pS:()=>S,qP:()=>k,to:()=>v});var a=n(67151),i=n(167249),o=n(722138),s=n(827697),l=n(286098),c=n(547807),d=n(27087),u=n(881388),m=n(939863),p=n(392592),h=n(980820),_=n(420576),g=n(723245),f=n(477782),E=n(99506),y=n(225868),b=n(404717);let I=(0,i.N)("SET_FAVORITES_COUNT"),T=(0,i.N)("UPDATE_EXPANDED_CUSTOM_SECTIONS"),v=(0,i.N)("SET_MOVING_RESOURCE"),S=(0,i.N)("SET_NEW_SECTION_INDEX");(0,h.nF)((e,r)=>{let{name:n,orderedFavoriteIds:a}=r,i=d.Ay.put(`/api/user_sidebar_sections/${r.sectionId}`,{ordered_favorited_resource_ids:a,name:n}).catch(r=>{e.dispatch(p.F.enqueue({message:`${r.data.message}`}))});(0,s.WB)().optimisticallyUpdate({UserSidebarSection:{[r.sectionId]:{...n?{name:n}:{},...a?{orderedFavoritedResourceIds:a}:{}}}},i),r.name&&(0,o.K2)(r.sectionId,r.name)}),(0,h.nF)((e,r)=>{let n=d.Ay.del(`/api/user_sidebar_sections/${r.sidebarSectionId}`).catch(r=>{e.dispatch(p.F.enqueue({message:`${r.msg}`}))});(0,o.Pe)(r.sidebarSectionId),(0,s.WB)().optimisticallyDelete({UserSidebarSection:{[r.sidebarSectionId]:null}},n)}),(0,h.nF)((e,r)=>{let n={favorited_resource_ids:r.favoriteIds,team_id:r.teamId};(0,o.Dr)(r.favoriteIds,r.teamId),d.Ay.put("/api/planless_favorited_resource_plan_id",n).catch(r=>{e.dispatch(p.F.enqueue({message:`${r.data.message}`}))})}),(0,h.nF)((e,r)=>{let n={section_id:r.sectionId,ordered_favorite_ids:r.orderedFavoriteIds},a=d.Ay.put(`/api/favorited_resources/${r.favoriteId}`,n).catch(r=>{e.dispatch(p.F.enqueue({message:`${r.data.message}`}))});r.sectionId&&(0,s.WB)().optimisticallyUpdate({UserSidebarSection:{[r.sectionId]:{orderedFavoritedResourceIds:r.orderedFavoriteIds}}},a);let i={[r.favoriteId]:{sidebarSectionId:r.sectionId}};switch(r.resourceType){case E.bk.TEAM:(0,s.WB)().optimisticallyUpdate({FavoritedTeam:i},a);break;case E.bk.FOLDER:(0,s.WB)().optimisticallyUpdate({FavoritedProject:i},a);break;case E.bk.FILE:(0,s.WB)().optimisticallyUpdate({FavoritedFile:i},a);break;case E.bk.PROTOTYPE:(0,s.WB)().optimisticallyUpdate({FavoritedPrototype:i},a);break;case E.bk.WORKSPACE:(0,s.WB)().optimisticallyUpdate({FavoritedWorkspace:i},a)}}),(0,h.nF)((e,r)=>{let n=e.getState().currentUserOrgId??null,a={name:r.name,org_id:n,insert_at_index:r.insertAtIndex,ordered_sections:r.currentOrderedSections},i=d.Ay.post("/api/user_sidebar_sections",a).then(n=>{if(!n?.data.meta){e.dispatch(v({movingResource:void 0}));return}U(e.dispatch,r.newResourceForSection.resourceType,r.newResourceForSection.isFavorited,r.newResourceForSection.resourceId,void 0,n.data.meta),e.dispatch(v({movingResource:void 0}))}).catch(r=>{e.dispatch(p.F.enqueue({message:`${r.msg}`}))});if((0,s.WB)().optimisticallyCreate({UserSidebarSection:{[V]:{userId:e.getState().user?.id??"",orgId:n,teamId:"",name:r.name,createdAt:new Date,orderedFavoritedResourceIds:[]}}},i),r.prefs&&r.currentOrderedSections){let a=r.currentOrderedSections.length,o=[...r.currentOrderedSections?.slice(0,r.insertAtIndex),V,...r.currentOrderedSections.slice(r.insertAtIndex,a)],s={id:r.prefs?.id,orderedFavoritedResourceIds:r.prefs?.orderedFavoritedResourceIds,orderedTeamIds:r.prefs?.orderedTeamIds,orderedLicenseGroupIds:r.prefs?.orderedLicenseGroupIds,orderedSidebarSections:o};(0,y.ah)(s,e.getState().user?.id,n,null,i)}}),(0,h.nF)((e,r)=>{let n=e.getState().currentUserOrgId??null,a={name:r.name,org_id:n,insert_at_index:r.insertAtIndex,ordered_sections:r.currentOrderedSections},i=d.Ay.post("/api/user_sidebar_sections",a).then(e=>{(0,o.SX)(e?.data.meta,r.name)}).catch(r=>{e.dispatch(p.F.enqueue({message:`${r.msg}`}))}),l="optimistic-id-custom-section-id";if((0,s.WB)().optimisticallyCreate({UserSidebarSection:{[l]:{userId:e.getState().user?.id??"",orgId:n,teamId:"",name:r.name,createdAt:new Date,orderedFavoritedResourceIds:[]}}},i),r.prefs&&r.currentOrderedSections){let a=r.currentOrderedSections.length,o=[...r.currentOrderedSections?.slice(0,r.insertAtIndex),l,...r.currentOrderedSections.slice(r.insertAtIndex,a)],s={id:r.prefs?.id,orderedFavoritedResourceIds:r.prefs?.orderedFavoritedResourceIds,orderedTeamIds:r.prefs?.orderedTeamIds,orderedLicenseGroupIds:r.prefs?.orderedLicenseGroupIds,orderedSidebarSections:o};(0,y.ah)(s,e.getState().user?.id,n,null,i)}});let w=(0,h.MM)("BULK_RESOURCE_SET_FAVORITE",(e,r,{optimistId:n,liveStore:a})=>{let{files:i,repos:c,prototypes:m,orgId:h,teamId:_,selectedView:g,entrypoint:f}=r,I=e.getState().currentTeamId,T=e.getState().currentUserOrgId,v=I??T,S=i.filter(e=>!e.is_favorited&&(e.team_id===v||e.parent_org_id===v)),w=S.map(e=>e.key),A=c.filter(e=>!e.is_favorited&&(e.team_id===v||e.parent_org_id===v)).filter(Boolean),N=A.map(e=>e.default_file_key),C=m.filter(e=>!e.is_favorited&&(e.parent_team?.id===v||e.parent_org?.id===v)),L=C.map(e=>e.file_key+","+e.page_id),O={files:N.concat(w),org_id:h,team_id:_,prototypes:L,insert_at_index:r.insertAtIndex,ordered_favorites:r.orderedFavorites,section_id:r.sectionId};i.forEach(e=>{(0,o.gB)(e.key,g,f,E.bk.FILE,e.editor_type,!0)}),c.forEach(e=>{(0,o.gB)(e.default_file_key??void 0,g,f,E.bk.FILE,"design",!0)}),m.forEach(e=>{(0,o.gB)(e.file_key,g,f,E.bk.PROTOTYPE,"design",!0)});let R=d.Ay.put("/api/bulk_favorite_resources",O).then(()=>{e.dispatch(b.c(n))}).catch(r=>{e.dispatch(b.r(n));try{e.dispatch(p.F.enqueue({message:r.message}))}catch(r){e.dispatch(u.s.error("An error occurred while favoriting these items"))}}),P=e.getState().user?.id;if(!P)return;let D={},k={},M=[];if(C.forEach(e=>{M.push(`optimistic-id-${e.fig_file.key}`),k[`optimistic-id-${e.fig_file.key}`]=(0,l.XJ)(e,P,h,r.sectionId)}),A.forEach(e=>{let n=e.default_file_key;if(n){let e=a.readCachedFile(n);e&&(M.push(`optimistic-id-${e.key}`),D[`optimistic-id-${e.key}`]=(0,l.f2)(e,P,h,r.sectionId))}}),S.forEach(e=>{M.push(`optimistic-id-${e.key}`),D[`optimistic-id-${e.key}`]=(0,l.f2)(e,P,h,r.sectionId)}),(0,s.WB)().optimisticallyCreate({FavoritedFile:D,FavoritedPrototype:k},R),null===r.insertAtIndex)return;let F=[...r.orderedFavorites.slice(0,r.insertAtIndex),...M,...r.orderedFavorites.slice(r.insertAtIndex)];if(r.sectionId)(0,s.WB)().optimisticallyUpdate({UserSidebarSection:{[r.sectionId]:{orderedFavoritedResourceIds:F}}},R);else{let e={id:r.fileBrowserPrefs?.id||"optimistic-id",orderedFavoritedResourceIds:F,orderedTeamIds:r.fileBrowserPrefs?.orderedTeamIds,orderedLicenseGroupIds:r.fileBrowserPrefs?.orderedLicenseGroupIds};(0,y.ah)(e,P,h,null,R)}}),A=(0,h.nF)(async(e,r,{liveStore:n})=>{let{tile:i,entrypoint:o,favoriteId:s,fileBrowserEntryPoint:l}=r;switch(i.type){case f.nb.FILE:e.dispatch(k({entrypoint:o,favoriteId:s,file:i.file,fileBrowserEntryPoint:l}));return;case f.nb.PINNED_FILE:let c=await n.fetchFile(i.file.key);e.dispatch(k({entrypoint:o,favoriteId:s,file:c,fileBrowserEntryPoint:l}));return;case f.nb.PROTOTYPE:e.dispatch(P({entrypoint:o,favoriteId:s,prototype:i.prototype,fileBrowserEntryPoint:l}));return;case f.nb.REPO:e.dispatch(k({entrypoint:o,favoriteId:s,file:(0,_.mr)(i.repo,i.branches,{}),repoId:i.repo.id,fileBrowserEntryPoint:l}));return;case f.nb.OFFLINE_FILE:return;default:(0,a.xb)(i)}}),N=(0,h.MM)("REMOVE_FOLDER_FAVORITE",(e,r,{optimistId:n})=>{let{folder:a,sectionId:i}=r;(0,o.to)(a.id,e.getState().selectedView.view,r.entrypoint,E.bk.FOLDER);let l=U(e.dispatch,E.bk.FOLDER,!1,a.id,n,i);r.favoriteId&&(0,s.WB)().optimisticallyDelete({FavoritedProject:{[r.favoriteId]:null}},l)}),C=(0,h.nF)(async(e,r,{liveStore:n})=>{let{tile:i,entrypoint:o,favoriteId:s,sectionId:l,fileBrowserEntryPoint:c}=r;switch(i.type){case f.nb.FILE:e.dispatch(F({entrypoint:o,favoriteId:s,sectionId:l,file:i.file,fileBrowserEntryPoint:c}));return;case f.nb.PINNED_FILE:let d=await n.fetchFile(i.file.key);e.dispatch(F({entrypoint:o,favoriteId:s,sectionId:l,file:d,fileBrowserEntryPoint:c}));return;case f.nb.PROTOTYPE:e.dispatch(D({entrypoint:o,favoriteId:s,sectionId:l,prototype:i.prototype,fileBrowserEntryPoint:c}));return;case f.nb.REPO:e.dispatch(F({entrypoint:o,favoriteId:s,sectionId:l,file:(0,_.mr)(i.repo,i.branches,e.getState().selectedBranchKeyByRepoId),repoId:i.repo.id,fileBrowserEntryPoint:c}));return;case f.nb.OFFLINE_FILE:return;default:(0,a.xb)(i)}}),L=(0,h.MM)("ADD_FOLDER_FAVORITE",(e,r,{optimistId:n})=>{let{folder:a,sectionId:i}=r;(0,o.gB)(a.id,e.getState().selectedView.view,r.entrypoint,E.bk.FOLDER);let c=U(e.dispatch,E.bk.FOLDER,!0,a.id,n,i),d=e.getState().user?.id,u=e.getState().currentUserOrgId;d&&(r.favoriteId&&r.sectionId&&(0,s.WB)().optimisticallyUpdate({FavoritedProject:{[r.favoriteId]:{sidebarSectionId:r.sectionId}}},c),"is_favorited"in a&&(r.favoriteId||(0,s.WB)().optimisticallyCreate({FavoritedProject:{[`optimistic-id-${a.id}`]:(0,l.ad)(a,d,u,i)}},c)))});(0,h.nF)((e,r)=>{let{workspace:n}=r;(0,o.to)(n.id,e.getState().selectedView.view,r.entrypoint,E.bk.WORKSPACE);let a=U(e.dispatch,E.bk.WORKSPACE,!1,n.id,void 0);r.favoriteId&&(0,s.WB)().optimisticallyDelete({FavoritedWorkspace:{[r.favoriteId]:null}},a)}),(0,h.nF)((e,r)=>{let{workspace:n,sectionId:a}=r,i=e.getState().currentUserOrgId;(0,o.gB)(n.id,e.getState().selectedView.view,r.entrypoint,E.bk.WORKSPACE);let c=U(e.dispatch,E.bk.WORKSPACE,!0,n.id,void 0,a),d=e.getState().user?.id;d&&(r.favoriteId&&r.sectionId?(0,s.WB)().optimisticallyUpdate({FavoritedWorkspace:{[r.favoriteId]:{sidebarSectionId:r.sectionId}}},c):(0,s.WB)().optimisticallyCreate({FavoritedWorkspace:{[`optimistic-id-${n.id}`]:(0,l.Nc)(n,d,i,a)}},c))});let O=(0,h.nF)((e,r)=>{let{team:n}=r;(0,o.to)(n.id,e.getState().selectedView.view,r.entrypoint,E.bk.TEAM);let a=U(e.dispatch,E.bk.TEAM,!1,n.id,void 0);r.favoriteId&&(0,s.WB)().optimisticallyDelete({FavoritedTeam:{[r.favoriteId]:null}},a)}),R=(0,h.nF)((e,r)=>{let{team:n,sectionId:a}=r,i=e.getState().currentUserOrgId;(0,o.gB)(n.id,e.getState().selectedView.view,r.entrypoint,E.bk.TEAM);let c=U(e.dispatch,E.bk.TEAM,!0,n.id,void 0,a),d=e.getState().user?.id;d&&(r.favoriteId&&r.sectionId?(0,s.WB)().optimisticallyUpdate({FavoritedTeam:{[r.favoriteId]:{sidebarSectionId:r.sectionId}}},c):(0,s.WB)().optimisticallyCreate({FavoritedTeam:{[`optimistic-id-${n.id}`]:(0,l.zb)(n,d,i,a)}},c))}),P=(0,h.MM)("REMOVE_PROTOTYPE_FAVORITE",(e,r,{optimistId:n})=>{let{prototype:a,entrypoint:i,fileBrowserEntryPoint:l}=r;(0,o.to)(a.file_key,e.getState().selectedView.view,i,E.bk.PROTOTYPE,void 0,l);let c=U(e.dispatch,E.bk.PROTOTYPE,!1,a.file_key,n,void 0,a.page_id);e.getState().user?.id&&r.favoriteId&&(0,s.WB)().optimisticallyDelete({FavoritedPrototype:{[r.favoriteId]:null}},c)}),D=(0,h.MM)("ADD_PROTOTYPE_FAVORITE",(e,r,{optimistId:n})=>{let{prototype:a,entrypoint:i,sectionId:c,fileBrowserEntryPoint:d}=r,u=e.getState().currentUserOrgId;(0,o.gB)(a.file_key,e.getState().selectedView.view,i,E.bk.PROTOTYPE,"prototype",d);let m=U(e.dispatch,E.bk.PROTOTYPE,!0,a.fig_file.key,n,c,a.page_id),p=e.getState().user?.id;p&&(r.favoriteId&&r.sectionId?(0,s.WB)().optimisticallyUpdate({FavoritedPrototype:{[r.favoriteId]:{sidebarSectionId:r.sectionId}}},m):(0,s.WB)().optimisticallyCreate({FavoritedPrototype:{[`optimistic-id-${a.fig_file.key}`]:(0,l.XJ)(a,p,u,c)}},m))}),k=(0,h.MM)("REMOVE_FILE_FAVORITE",(e,r,{optimistId:n})=>{let a=e.getState().selectedView.view,{file:i,entrypoint:l,fileBrowserEntryPoint:c}=r;(0,o.to)(i.key,a,l,E.bk.FILE,i.editor_type??"design",c);let d="fullscreen"===a?x(e.dispatch,E.bk.FILE,!1,i.key,(0,g.D6)(e.getState().currentUserOrgId)):U(e.dispatch,E.bk.FILE,!1,i.key,n);e.getState().user?.id&&r.favoriteId&&(0,s.WB)().optimisticallyDelete({FavoritedFile:{[r.favoriteId]:null}},d)}),M=(0,i.N)("ADD_FILE_FAVORITE"),F=(0,h.nF)((e,r)=>{let{optimistId:n}=e.optimisticDispatch(M(r)),{file:a,entrypoint:i,sectionId:c,fileBrowserEntryPoint:d}=r;(0,o.gB)(a.key,e.getState().selectedView.view,i,E.bk.FILE,a.editor_type??"design",d);let u=U(e.dispatch,E.bk.FILE,!0,a.key,n,c,void 0,(0,g.D6)(e.getState().currentUserOrgId)),m=e.getState().user?.id;if(m){if(r.favoriteId&&r.sectionId)(0,s.WB)().optimisticallyUpdate({FavoritedFile:{[r.favoriteId]:{sidebarSectionId:r.sectionId,orgId:e.getState().currentUserOrgId??null,resourceType:E.bk.FILE,userId:m}}},u);else if(e.getState().currentTeamId&&e.getState().currentTeamId===r.file.team_id||e.getState().currentUserOrgId&&r.file.parent_org_id){let n=(0,l.h7)(a);(0,s.WB)().optimisticallyCreate({FavoritedFile:{[`optimistic-id-${a.key}`]:{userId:m,orgId:e.getState().currentUserOrgId??null,teamId:e.getState().currentTeamId??null,sidebarSectionId:r.sectionId??null,createdAt:new Date,updatedAt:new Date,resourceId:a.key,resourceType:E.bk.FILE,readableFile:n}}},u)}}}),x=(e,r,n,a,i)=>d.Ay.put("/api/favorited_resources",{resource_type:r,is_favorited:n,file_key:a}).then(()=>{let r=i?(0,m.t)("tile.favoriting.file_removed_from_sidebar"):(0,m.t)("tile.favoriting.file_removed_from_favorites"),a=i?(0,m.t)("tile.favoriting.file_added_to_sidebar"):(0,m.t)("tile.favoriting.file_added_to_favorites");e(p.F.enqueue({message:n?a:r}))}).catch(r=>{let n=(0,m.Jv)(r);if(n)try{e(p.F.enqueue({message:n}))}catch(r){e(u.s.error("An error occurred while favoriting this item"))}}),U=(e,r,n,a,i,o,s,l)=>d.Ay.put("/api/favorited_resources",{resource_type:r,is_favorited:n,resource_id_or_key:a,page_id:s,section_id:o}).then(()=>{if(i&&e(b.c(i)),l||r!==E.bk.FILE){let r=n?(0,m.t)("sidebar.item_added_bell_message"):(0,m.t)("sidebar.item_removed_bell_message");e(p.F.enqueue({message:r}))}}).catch(r=>{let a=(0,m.Jv)(r);if(a){i&&e(b.r(i));try{e(p.F.enqueue({message:a}))}catch(a){let r=n?"favoriting this item":"removing this favorite";e(u.s.error(`An error occurred while ${r}`))}}}),B=e=>((0,o.j4)(e.favorited_resource_ids),d.Ay.del("/api/favorited_resources",c.td.toAPIParameters(e)));(0,h.nF)((e,r)=>{B({favorited_resource_ids:r.favoriteIds}).catch(r=>{e.dispatch(p.F.enqueue({message:`${r.data.message}`}))})});let V="optimistic-id-custom-section-id"},738274:(e,r,n)=>{n.d(r,{EG:()=>l,Ji:()=>i,lr:()=>o,qC:()=>s});var a=n(167249);let i=(0,a.N)("FIGJAM_SET_IS_MAKE_SOMETHING_V2_ACTIVE"),o=(0,a.N)("FIGJAM_SET_DELIGHTFUL_TOOLBAR_OVERFLOW_MENU"),s=(0,a.N)("FIGJAM_SET_IMAGE_DIALOG"),l=(0,a.N)("FIGJAM_SET_QUICK_ACCESS_TOOL")},753643:(e,r,n)=>{n.d(r,{fC:()=>p,o2:()=>u,s7:()=>m});var a=n(167249),i=n(980820),o=n(410424),s=n(941381),l=n(182976),c=n(336599),d=n(288813);let u=(0,a.N)("UPDATE_FACE_STAMPS"),m=(0,a.N)("PUT_DEFAULT_FIGJAM_INSERT_ITEMS");(0,i.nF)(e=>{let r=e.getState().selectedView;r&&"fullscreen"===r.view&&h(e)});let p="FETCH_FIGJAM_DEFAULT_INSERTS";async function h(e){let r=e.getState();if((0,c.Sc)(r.loadingState,p)){e.dispatch(l.Cx({key:p}));try{let n=await d.d.getDefaultInserts({orgId:r.currentUserOrgId||void 0}),a=[...n.data.meta.plugins,...function(e){let r=[];for(let n of e)for(let e of n.resources)e&&"is_widget"in e&&!e.is_widget&&r.push(e);return r}(n.data.meta.use_cases)],i=[...n.data.meta.widgets,...function(e){let r=[];for(let n of e)for(let e of n.resources)e&&"is_widget"in e&&e.is_widget&&r.push(e);return r}(n.data.meta.use_cases)],c=[...n.data.meta.templates,...function(e){let r=[];for(let n of e)for(let e of n.resources)e&&"viewer_mode"in e&&e.viewer_mode&&r.push(e);return r}(n.data.meta.use_cases)];e.dispatch((0,o.Sb)({hubFiles:c,src:"figjam-inserts"})),e.dispatch(m(n.data.meta)),e.dispatch(s.Vx(a)),e.dispatch(s.uV(i));let u={},h={};i.forEach(e=>{let n=e.current_plugin_version_id;!(n&&r.publishedCanvasWidgetVersions[e.id]?.[n])&&(u[e.id]=Object.keys(e.versions),e.current_plugin_version_id&&(h[e.id]={[e.current_plugin_version_id]:e.versions[e.current_plugin_version_id]}))}),e.dispatch((0,s.fs)(h)),e.dispatch((0,s.b6)({widgetIDToVersions:u})),e.dispatch(l.x2({key:p}))}catch(r){e.dispatch(l.of({key:p}))}}}},944682:(e,r,n)=>{n.d(r,{$m:()=>$,FE:()=>U,GZ:()=>Y,Ip:()=>j,Lk:()=>eu,Nw:()=>er,P6:()=>X,PB:()=>eo,PF:()=>Z,Rh:()=>K,S:()=>et,SQ:()=>Q,U2:()=>ea,VK:()=>J,YF:()=>z,YK:()=>q,YW:()=>G,Yn:()=>ee,Yp:()=>en,ZN:()=>H,bE:()=>ei,c3:()=>ed,jO:()=>x,og:()=>B,rA:()=>W,sF:()=>V,uo:()=>es,yJ:()=>el});var a=n(723069),i=n(299321),o=n(167249),s=n(297666),l=n(517333),c=n(686759),d=n(737947),u=n(966712),m=n(827697),p=n(130097),h=n(711525),_=n(179940),g=n(776621),f=n(27087),E=n(881388),y=n(939863),b=n(392592),I=n(980820),T=n(662275),v=n(988022),S=n(420576),w=n(132135),A=n(892542),N=n(279453),C=n(623746),L=n(540019),O=n(401352),R=n(694517),P=n(754168),D=n(558356),k=n(479296),M=n(938908),F=n(31913);function x(e){return void 0!==e.file_repo}function U(e,r){return f.Ay.put(`/api/files/${e}/thumbnail_guid`,{thumbnail_guid:r}).then(()=>{i.Ez5.canvasViewState().thumbnailNodeId.set(r)})}let B=(0,I.nF)((e,r)=>{r.file.created_at&&console.error("It looks like you are PUT-ting to the API with the entire file object; please only pass the key and file permission attributes");let n=P.S.putFile(r).then(()=>{r.onSuccess?.()}).catch(n=>{if(r.onError?.(),e.dispatch(b.F.enqueue({message:(0,y.t)("file_permissions.generic_error"),error:!0})),(0,u.b5)())throw n}),a=r.file,i={...(0,C.Ns)(a,a.key),...(0,C.yT)(a,r.linkExpirationConfigId,r.currentUser)},o=(0,C.TP)(a,r.linkExpirationConfigId,r.currentUser);Object.keys(i).length>0&&(0,m.WB)().optimisticallyUpdate(i,n),o&&(0,m.WB)().optimisticallyCreate(o,n)}),V=(0,o.N)("FILE_PERMISSIONS_PUT"),G=(0,I.nF)(async(e,r)=>{let n=e.getState(),i={},o=r.file,s=o.folderId,c=!1;if(s){let e="design"===o.editorType?N.RmP:N.JkW;c=!!h.oA((await p.Ek(e,{id:s})).project)?.hasPermission}c&&(i.folder_id=s),r.versionId&&(i.version_id=r.versionId),e.dispatch(b.F.enqueue({type:"file_duplicating",message:(0,y.t)("visual_bell.duplicating")})),f.Ay.post(`/api/multiplayer/${o.key}/copy?${(0,_.lF)(i)}`).then(i=>{e.dispatch(b.F.dequeue({}));let s=!!n.openFile;if(!i.data.error&&i.data.meta&&s){let s=i.data.meta;if((0,v.ds)("File Duplicated",o.key,e.getState(),{duplicatedFileKey:s.key,duplicatedContainingFolderId:s.folder_id,duplicatedFileTeamId:s.team_id}),r.checkOssSalesExperiment&&(0,O.Lb)(s.key),l.eD){l.eD.openFile({fileKey:s.key,title:s.name,fileEditorType:s.editor_type,target:a.a.FOCAL_TAB,isBranch:(0,S.Xm)(s),isLibrary:!!s.last_published_at,isTeamTemplate:!1,userId:n.user?.id});return}d.Ay.redirect((0,w.to)(s),"_blank")}}).catch(()=>{e.dispatch(b.F.dequeue({})),e.dispatch(E.s.error((0,y.t)("file_browser.file_browser_actions.file_copy_error")))})}),H=(0,I.nF)((e,r)=>{let n=r.file_key;n&&(e.getState().fileByKey[n]||P.S.getFiles({fileKey:n}).then(r=>e.dispatch(el({file:r.data.meta}))))}),W=(0,I.nF)(async(e,r)=>{try{await f.Ay.del(`/api/files/${r.file_key}/workshop`)}catch(e){}}),K=(0,I.nF)(async(e,r,{liveStore:n})=>{let a=await n.fetchFile(r.fileKey),i=f.Ay.post(`/api/files/${r.fileKey}/workshop`).then(()=>{e.dispatch(b.F.enqueue({message:(0,y.t)("whiteboard.open_sessions.open_session_started_notification"),button:{text:(0,y.t)("whiteboard.open_sessions.open_session_started_notification_copy_link"),action:()=>{e.dispatch(et({fileKey:r.fileKey,url:(0,w.to)(a),source:A.d.WORKSHOP_VISUAL_BELL}))}}}))}).catch(()=>{e.dispatch(b.F.enqueue({message:(0,y.t)("whiteboard.open_sessions.open_session_start_failed_notification"),error:!0}))}),o=e.getState().user?.id;if(o){let e=new Date;e.setDate(e.getDate()+1),(0,m.WB)().optimisticallyCreate({FigFileWorkshopMode:{[`optimistic-${r.fileKey}`]:{fileKey:r.fileKey,expiresAt:e,userId:o}}},i)}}),Y=(0,I.nF)(async(e,r)=>{await f.Ay.post(`/api/files/${r.fileKey}/view`).then(({data:n})=>{let{last_view_at:a,last_edit_at:i}=n.meta;e.dispatch(F.FB({lastViewed:a,lastEdited:i})),e.dispatch((0,R.Ul)({openFileKey:r.fileKey,versionHistory:e.getState().versionHistory}))}).catch(e=>{(0,g.x1)("recent files","Error marking file view / retrieving last seen times",{error:e})})}),$=(0,I.nF)((e,r)=>{U(r.file_key,r.thumbnail_guid).then(()=>{let n=r.thumbnail_guid?(0,y.t)("file_browser.file_browser_actions.thumbnail_set"):(0,y.t)("file_browser.file_browser_actions.default_thumbnail_restored");e.dispatch(b.F.enqueue({message:n}))}).catch(()=>{e.dispatch(b.F.enqueue({message:(0,y.t)("file_browser.error_try_again"),error:!0}))})}),j=L.M4.Mutation((e,{objects:r})=>{e.forEach(e=>{r.File.update(e,e=>{e.trashed_at=null})})}),z=(0,o.N)("RESTORE_TRASHED_FILES"),q=(0,o.N)("DELETE_FILES_PERMANENTLY"),X=(0,o.N)("DELETE_FILES"),J=(0,I.nF)((e,r)=>{e.dispatch(X(r)),e.dispatch((0,M.sM)({fileKeys:Object.keys(r.fileKeys)}))}),Z=(0,o.N)("FILE_RESTORE"),Q=(0,I.nF)((e,r)=>{let{fileKey:n,version:a}=r,i=e.getState().versionHistory.versions.filter(e=>e.created_at).sort((e,r)=>e.created_at<r.created_at?-1:1),o=i.findIndex(e=>e.id===a.id);if(-1===o||0===o){e.dispatch(E.s.error("Unable to find version to restore"));return}let s=i[o-1];s?e.dispatch(Z({fileKey:n,versionId:s.id})):e.dispatch(E.s.error("Unable to find version to restore"))}),ee=(0,I.nF)((e,r)=>{(0,c.Dk)(r.embedCode).then(()=>{(0,v.ds)("Embed Code Copied",r.fileKey,e.getState()),e.dispatch(b.F.enqueue({type:"embeded_code_copied_to_clipboard",message:(0,y.t)("file_browser.file_browser_actions.embed_code_copied")}))}).catch(()=>{e.dispatch(E.s.error((0,y.t)("file_browser.file_browser_actions.embed_code_copy_error")))})}),et=(0,k.n)((0,I.nF)((e,r)=>{let n;let a=r.url,i=r.label;if(i){let e=document.createElement("a");e.href=a,e.innerText=i;let r=e.outerHTML;n=(0,c.wY)(r,a)}else n=(0,c.Dk)(a);n.then(()=>{(0,v.ds)("File Share Link Copied",r.fileKey,e.getState(),{copyLinkSource:A.d[r.source],...r.trackingProperties}),r.skipVisualBell||e.dispatch(b.F.enqueue({type:"link_copied_to_clipboard",message:r.visualBellMessageOverride??(0,y.t)("copy_to_clipboard.link_copied_to_clipboard"),button:r.visualBellButton}))}).catch(()=>{e.dispatch(T.to({type:D.o,data:{link:a}}))})})),er=(0,I.nF)((e,r)=>{if(r.name.length<=100){let n={key:r.file.key,name:r.name,updated_at:new Date().toISOString()};e.dispatch(el({file:n,userInitiated:!0})),(0,v.ds)("File Renamed",n.key,e.getState(),{fileName:n.name})}}),en=(0,o.N)("FILE_REMOVE_FROM_PROJECT"),ea=(0,o.N)("FILE_MOVE"),ei=(0,o.N)("FILE_POST"),eo=(0,o.N)("FILE_BATCH_SUBSCRIBE_TO_REALTIME"),es=(0,o.N)("FILE_BATCH_PUT"),el=(0,o.N)("FILE_PUT"),ec=(0,s.s)((e,r)=>{let n=r.getState();n.activeFileUsers&&(e=e.filter(e=>!(e in n.activeFileUsers))),e.length&&f.Ay.post("/api/active_file_users",{keys:e}).then(({data:e})=>{!function(e,r,n=!1){let a=r.getState();for(let i in e){if(n&&a.activeFileUsers&&i in a.activeFileUsers)continue;let o=e[i],s=[];if(o)for(let e in o){let r=JSON.parse(o[e]);s.push(r)}r.dispatch(eu({fileKey:i,users:s}))}}(e.meta.active_file_users,r,!0)}).catch(e=>{})},1e3);(0,I.nF)((e,r)=>{ec(r.fileKeys,e)});let ed=(0,o.N)("FILE_CLEAR_ACTIVE_USERS"),eu=(0,o.N)("FILE_SET_ACTIVE_USERS")},225868:(e,r,n)=>{n.d(r,{ah:()=>l});var a=n(966712),i=n(827697),o=n(27087),s=n(980820);function l(e,r,n,a,o){e.id&&"optimistic-id"!==e.id?i.WB()?.optimisticallyUpdate({FileBrowserPreferences:{[e.id]:{orderedTeamIds:e.orderedTeamIds,orderedFavoritedResourceIds:e.orderedFavoritedResourceIds,orderedSidebarSections:e.orderedSidebarSections,orgId:n,teamId:a,orderedLicenseGroupIds:e.orderedLicenseGroupIds}}},o):null!=r&&i.WB()?.optimisticallyCreate({FileBrowserPreferences:{"optimistic-id":{userId:r,migratedToSections:!0,sidebarMigrationStatus:null,orderedTeamIds:e.orderedTeamIds||null,orderedFavoritedResourceIds:e.orderedFavoritedResourceIds||null,orderedSidebarSections:e.orderedSidebarSections||null,updatedAt:new Date,createdAt:new Date,orgId:n,teamId:a,orderedLicenseGroupIds:e.orderedLicenseGroupIds||null}}},o)}(0,s.nF)((e,r)=>{let n=e.getState().user?.id,i=e.getState().currentUserOrgId,s=(0,a.kc)().ps_benchmark?e.getState().currentTeamId:null,c=o.Ay.put("/api/file_browser_preferences",{ordered_team_ids:r.prefs.orderedTeamIds,ordered_favorites:r.prefs.orderedFavoritedResourceIds,org_id:i,team_id:s,ordered_license_group_ids:r.prefs.orderedLicenseGroupIds,ordered_sidebar_sections:r.prefs.orderedSidebarSections});l(r.prefs,n,i,s,c)}),(0,s.nF)((e,r)=>{let n=e.getState().user?.id,a=e.getState().currentTeamId,i=r.teamUser,s=r.prefs.orderedFavoritedResourceIds,c=[];if(s)for(var d of s)(i.favoritedFiles?.some(e=>e.id===d)||i.favoritedPrototypes?.some(e=>e.id===d))&&c.push(d);let u=i.favoritedProjects?.filter(e=>r.orderedFolderSubscriptions.includes(e.resourceId)).map(e=>e.id)??[];c.push(...u);let m=o.Ay.put("/api/file_browser_preferences",{ordered_favorites:c,team_id:a});l({id:"optimistic-id",orderedFavoritedResourceIds:c},n,null,a,m)})},507877:(e,r,n)=>{n.d(r,{Dw:()=>J,Ef:()=>z,Fs:()=>q,UN:()=>j,V3:()=>K,_l:()=>G,dm:()=>$,gN:()=>Y,gR:()=>W,hm:()=>B,kg:()=>X,mT:()=>H,q0:()=>V,qj:()=>U});var a=n(776250),i=n(511617),o=n(517333),s=n(737947),l=n(966712),c=n(187623),d=n(647899),u=n(27087),m=n(939863),p=n(392592),h=n(787133),_=n(349410),g=n(988022),f=n(697551),E=n(369870),y=n(441088),b=n(540019),I=n(320741),T=n(707465),v=n(935757),S=n(349719),w=n(696915),A=n(451e3),N=n(622139),C=n(644344),L=n(637590),O=n(540351),R=n(52571),P=n(241136),D=n(159518),k=n(757406),M=n(980820),F=n(738269),x=n(662275);let U=(0,M.nF)((e,r)=>{e.getState().modalShown?.type!=null&&e.dispatch((0,x.Ce)()),e.getState().dropdownShown?.type!=null&&e.dispatch((0,F.oB)()),e.dispatch((0,F.DE)({show:!0})),r?.until.then(()=>{e.dispatch(F.DE({show:!1}))}),h.q.addDependency("FILE_BROWSER_SET_LOADING",r?.until||"pending")}),B=(0,M.nF)(e=>{R.H.getState().then(r=>{e.dispatch((0,F.os)(r.data.meta)),e.dispatch(V(r.data.meta))}).catch(r=>{let n=r.data?.message||(0,m.t)("file_browser.file_browser_actions.error_on_data_update");e.dispatch(p.F.enqueue({error:!0,message:n}))})}),V=(0,M.nF)((e,r)=>{new c.P().sendToOtherTabs(O.y,r)}),G=(0,M.nF)((e,r)=>{let n=e.getState(),a=r.view||{view:"recentsAndSharing"},l=(0,T.Np)({...n,currentUserOrgId:r.workspace.orgId,currentTeamId:r.workspace.teamId||null},a),c=!(0,f.d9)(n.selectedView)&&(0,f.d9)(a);if(o.eD&&c){o.eD.openCommunity(l,r.workspace.userId);return}function d(){let e=(0,f.d9)(n.selectedView)&&!(0,f.d9)(a);o.eD&&e&&s.Ay.redirect((0,i.dR)((0,T.Np)({...n,currentUserOrgId:r.workspace.orgId,currentTeamId:r.workspace.teamId||null},n.selectedView),{fuid:r.workspace.userId}))}if(e.dispatch(U()),r.path){(0,g.uE)("account_switched",n,{newUserId:r.workspace.userId,orgId:n.currentUserOrgId,newOrgId:r.workspace.orgId,teamId:n.currentTeamId,newTeamId:r.workspace.teamId,view:n.selectedView.view,newPath:r.path}),s.Ay.redirect((0,i.dR)(r.path,{fuid:r.workspace.userId})),d();return}(0,g.uE)("account_switched",n,{newUserId:r.workspace.userId,orgId:n.currentUserOrgId,newOrgId:r.workspace.orgId,view:n.selectedView.view,newView:a.view,newTeamId:r.workspace.teamId,teamId:n.currentTeamId}),(r.workspace.orgId&&!l.includes(r.workspace.orgId)||r.workspace.teamId&&!l.includes(r.workspace.teamId)||(0,f.d9)(a)&&!r.workspace.orgId&&n.currentUserOrgId)&&(0,v.Y9)(r.workspace.userId,(0,f.d9)(a),r.workspace.orgId,void 0,r.workspace.teamId),(0,E.ck)()?k.m({action:"reloadPage",payload:{fuid:r.workspace.userId}}):(s.Ay.redirect((0,i.dR)(l,{fuid:r.workspace.userId})),d())});(0,M.nF)(e=>{u.Ay.post("/api/session/app_auth",{app_type:"desktop"}).then(({data:r})=>{let n=r.meta.id,a=`/app_auth/${n}/grant`,i=e.getState().authedUsers.orderedIds;i.length>0&&(a+=`?authed_ids=${i.join(",")}`),o.eD?.startAppAuth(a),e.dispatch(p.F.enqueue({message:(0,m.t)("file_browser.file_browser_actions.desktop_go_to_your_browser")}))}).catch(r=>{console.error(r),e.dispatch(p.F.enqueue({message:(0,m.t)("file_browser.error_try_again"),error:!0}))})});let H=(0,M.nF)((e,r)=>{e.getState().dropdownShown||e.dispatch((0,F.j7)(r))}),W=(0,M.nF)((e,r)=>{let n=e.getState().dropdownShown;n?.type===r.type?e.dispatch((0,F.oB)()):e.dispatch((0,F.j7)(r))}),K=(0,M.nF)((e,r)=>{(0,y.T)()?(0,S.Qn)(r.url):s.Ay.redirect(r.url,"_blank")});function Y(e,r={}){return(0,F.$T)({view:"folder",folderId:e,...r})}function $(e,r={},n){return(0,F.$T)({view:"team",teamId:e,...r,teamViewTab:n})}(0,M.nF)((e,{index:r})=>{(0,a.sx)("Recent File Clicked",{index:r},{forwardToDatadog:!0})});let j=(0,M.nF)((e,{fileKey:r,entrypoint:n,currentPlanFilter:a,currentSharedByFilter:i,viewMode:o})=>{(0,g.k1)(r,{state:e.getState(),entrypoint:n,planFilterId:a?.planId,planFilterType:a?.planType,sharedByFilter:i,viewMode:o})}),z=(0,M.nF)(e=>{(0,g.uE)("Font Installer Downloaded",e.getState())}),q=(0,M.nF)(e=>{(0,g.uE)("Font Uninstaller Downloaded",e.getState())}),X=(0,M.nF)((e,{clickedResourceType:r,resourceIdOrKey:n})=>{(0,g.uE)("File Browser Nav Tree Clicked",e.getState(),{clickedResourceType:r,resourceIdOrKey:n})});b.M4.Query({fetch:async e=>(await P.p.getTrashedFilesV2(e)).data.meta,schema:e=>e.object({files:e.array(w.L.nullable()),repos:e.array(e.object({repo:C.z.nullable(),main_file:w.L.nullable()}))}),output:({data:e})=>({files:e.files.filter(e=>!!e&&!!e.trashed_at&&!e.deleted_at).sort((e,r)=>new Date(e.trashed_at)<new Date(r.trashed_at)?1:-1),repos:e.repos.filter(e=>!!e.repo&&!!e.repo.trashed_at&&!e.repo.deleted_at).sort((e,r)=>new Date(e.repo.trashed_at)<new Date(r.repo.trashed_at)?1:-1)})}),b.M4.Query({fetch:async e=>(await D.V.getTrashedFolders(e)).data.meta,schema:e=>e.object({folders:e.array(A.lH.extend({touched_at:e.string()}))}),output:({data:e})=>({folders:e.folders.map(e=>({...e,touched_at:""})).filter(e=>!!e&&!!e.trashed_at&&!e.deleted_at).sort((e,r)=>new Date(e.trashed_at)<new Date(r.trashed_at)?1:-1)})}),(0,M.nF)((e,{orgId:r,teamId:n},{loadingKey:a})=>{let i=P.p.getTrashedFilesV2({orgId:r||"",teamId:n||""});(0,I.N)(i,e,a),i.then(r=>{let n=JSON.parse(r.response);e.dispatch((0,F.pB)({deletedFiles:n.meta.files})),e.dispatch((0,F.pg)({deletedRepos:n.meta.repos}))})});let J=(0,M.nF)(async(e,{previousView:r,openInNewTab:n,onSubmitReturnToPrevView:a,isEduTeam:i,ignoreCurrentPlan:o})=>{let s=e.getState();if(n){let r=(0,T.xS)(s,{view:"teamCreation",ignoreCurrentPlan:o});e.dispatch(K({url:r}));return}if(s.user&&(0,l.kc)().close_starter_team_loophole){let n=(0,d.hW)("starter_team_loophole_experiment_m0"),a=(0,d.hW)("starter_team_loophole_experiment_m1"),[l,c]=await Promise.all([n,a]);if((0,_.e5)({userId:s.user.id,teams:Object.values(s.teams),rolesByTeamId:s.roles.byTeamId,getM0Config:()=>l,getM1Config:()=>c})){e.dispatch((0,F.$T)({view:"teamUpgrade",teamFlowType:L.SC.CREATE_AND_UPGRADE,teamId:null,paymentStep:N.tn.PLAN_COMPARISON,previousView:r,isEduTeam:i,ignoreCurrentPlan:o}));return}}s.user&&(0,_.Mk)(s.user.id,Object.values(s.teams),s.roles.byTeamId)?e.dispatch((0,F.$T)({view:"teamUpgrade",teamFlowType:L.SC.CREATE,teamId:null,paymentStep:N.tn.CREATE_TEAM,previousView:r,isEduTeam:i,ignoreCurrentPlan:o})):e.dispatch((0,F.$T)({view:"teamCreation",previousView:r,onSubmitReturnToPrevView:a,isEduTeam:i,ignoreCurrentPlan:o}))})},270056:(e,r,n)=>{n.d(r,{$l:()=>k,$o:()=>v,HA:()=>A,IU:()=>C,Kc:()=>P,MR:()=>w,Q2:()=>I,TI:()=>F,WC:()=>x,ZJ:()=>O,bE:()=>M,gO:()=>S,ub:()=>b,vt:()=>L,y2:()=>R,yH:()=>N,yJ:()=>D,z6:()=>T});var a=n(167249),i=n(790724),o=n(27087),s=n(881388),l=n(939863),c=n(392592),d=n(738269),u=n(662275),m=n(988022),p=n(875847),h=n(99506),_=n(416618),g=n(668860),f=n(344950),E=n(980820),y=n(936500);let b=(0,E.nF)((e,r)=>o.Ay.put(`/api/folders/${r.folderId}/description`,{description:r.description}).then(({data:r})=>{e.dispatch(D({folder:r.meta}))}).catch(r=>{console.error(r),e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.update_subscription_error")))})),I=(0,a.N)("FOLDER_UNPIN_FILE"),T=(0,E.nF)((e,r)=>{let n=e.optimisticDispatch(I(r));return o.Ay.del(`/api/folders/${r.fileKey}/pin`).then(()=>{n.commit()}).catch(()=>{n.revert(),e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.file_unpin_error")))})}),v=(0,a.N)("FOLDER_PIN_FILE"),S=(0,E.nF)(async(e,r)=>{let n=e.optimisticDispatch(v(r));(0,m.xr)("file_browser_folder_pin_file",r.folderId,null,e.getState(),{fileKey:r.fileKey}),await o.Ay.post(`/api/folders/${r.fileKey}/pin`).then(()=>{n.commit(),e.dispatch(c.F.enqueue({error:!1,message:(0,l.t)("file_browser.file_browser_actions.file_pinned_to_project")}))}).catch(()=>{n.revert(),e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.file_pin_error")))})}),w=(0,a.N)("FOLDER_SET_PINNED_FILE"),A=(0,a.N)("FOLDER_DELETE_LG_SHIM"),N=(0,a.N)("FOLDER_DELETE"),C=(0,a.N)("FOLDER_CLEAR"),L=(0,E.nF)((e,r)=>{let n=(0,p.SS)(r.name);if(n)return e.dispatch(s.s.error(n)),null;if(e.dispatch(u.Lo()),e.dispatch(d.bx()),void 0===r.isInviteOnly&&void 0===r.isViewOnly&&void 0===r.teamAccess)return e.dispatch(s.s.error("inviteOnly and viewOnly fields or teamAccess field must be defined")),null;let a={id:(0,p.d)(),name:r.name,description:null,path:r.name,team_id:r.teamId,is_subscribed:!1,is_favorited:!1,created_at:`${new Date}`,updated_at:`${new Date}`,is_invite_only:!1,is_view_only:!1,settings:{webhooks:{}},deleted_at:null,sharing_audience_control:null,team_access:null,trashed_at:null,trashed_user_id:null},c=o.Ay.post("/api/folders",{team_id:r.teamId,path:r.name,is_invite_only:r.isInviteOnly,is_view_only:r.isViewOnly,sharing_audience_control:r.sharingAudienceControl,team_access:r.teamAccess}).then(({data:n})=>{e.dispatch(N({folderIds:[a.id]}));let i=n.meta;for(let n of i)if(n.name===r.name){e.dispatch(M(n)),r.onFolderCreated&&r.onFolderCreated(n.id,n.name),(0,m.xr)("Folder Created",n.id,n.team_id,e.getState(),{sharingAudienceControl:r.sharingAudienceControl,teamAccess:r.teamAccess});let a=e.getState().user;r.inviteEmails?.length&&r.teamAccess&&e.dispatch((0,_.rq)({emails:r.inviteEmails,emailsToExclude:a?new Set([a.email]):void 0,resourceType:h.vt.FOLDER,resourceIdOrKey:n.id,level:r.inviteLevel||g.e6.VIEWER,source:"new_project_creation_modal"})),f.G.getRoles({resourceId:n.id,resourceType:h.vt.FOLDER}).then(({data:r})=>{for(let n of r.meta)e.dispatch(y.bE({role:n}))}),r.shouldRedirect&&e.dispatch(d.$T({view:"folder",folderId:n.id}));break}return i});return(0,i.Q)({store:e,requestPromise:c,fallbackError:(0,l.t)("file_browser.file_browser_actions.create_project_error"),next:e.dispatch,action:M(a)})}),O=(0,E.nF)((e,{folderId:r,teamId:n,isSubscribed:a})=>{let s=a?"Folder Subscriber Added":"Folder Subscriber Deleted";(0,m.xr)(s,r,n,e.getState());let c=o.Ay.put(`/api/folders/${r}`,{is_subscribed:a});(0,i.Q)({store:e,requestPromise:c,fallbackError:(0,l.t)("file_browser.file_browser_actions.update_project_error"),next:e.dispatch,action:D({folder:{id:r,is_subscribed:a}})})});(0,a.N)("FOLDER_LOAD");let R=(0,a.N)("FOLDER_PUT_UPDATED_AT"),P=(0,a.N)("FOLDER_LOADED"),D=(0,a.N)("FOLDER_PUT"),k=(0,a.N)("FOLDER_BATCH_POST"),M=(0,a.N)("FOLDER_POST"),F=(0,a.N)("FOLDER_STOP_RENAME"),x=(0,a.N)("FOLDER_BEGIN_RENAME")},293017:(e,r,n)=>{n.d(r,{Bs:()=>ei,D9:()=>G,Dr:()=>Q,FP:()=>B,Gm:()=>x,J4:()=>eE,JM:()=>V,Jt:()=>k,Kx:()=>Y,M3:()=>eN,Mt:()=>j,OB:()=>eL,PQ:()=>P,QA:()=>L,Ql:()=>Z,Qm:()=>eI,R5:()=>F,Rw:()=>R,ST:()=>O,TB:()=>q,U8:()=>W,UC:()=>eC,UM:()=>ef,Uv:()=>X,VB:()=>ec,Wk:()=>es,XE:()=>en,XQ:()=>eh,Y:()=>$,Y6:()=>e_,Z1:()=>ey,Z_:()=>eg,_O:()=>z,aK:()=>eb,bO:()=>ew,bS:()=>J,eH:()=>eA,fG:()=>K,fk:()=>eu,fy:()=>ed,ho:()=>eO,il:()=>H,kP:()=>ep,lp:()=>eT,lz:()=>M,nA:()=>eS,nN:()=>eo,p5:()=>em,pj:()=>D,sx:()=>U,u1:()=>ea,vg:()=>el,yv:()=>ev});var a=n(299321),i=n(167249),o=n(776250),s=n(511617),l=n(517333),c=n(737947),d=n(966712),u=n(712366),m=n(47506),p=n(939863),h=n(738269),_=n(662275),g=n(626783),f=n(259927),E=n(988022),y=n(356390),b=n(630331),I=n(643067),T=n(707465),v=n(984968),S=n(945020),w=n(567088),A=n(723127),N=n(553841),C=n(980820);let L=(0,i.N)("SET_SHOW_EDIT_BUTTON"),O=(0,i.N)("CLEAR_SELECTED_VIEW_COMMENT_ID"),R=(0,i.N)("UPDATE_RECENTLY_USED_QUICK_COMMAND"),P=(0,i.N)("RECENTLY_USED_QUICK_COMMANDS"),D=(0,i.N)("FULLSCREEN_UPDATE_CANVAS_MENTION_POPUP_POSITION"),k=(0,i.N)("FULLSCREEN_SET_CANVAS_MENTION_POPUP"),M=(0,i.N)("FULLSCREEN_UPDATE_HYPERLINK_POPUP_POSITION"),F=(0,i.N)("FULLSCREEN_SET_HYPERLINK_POPUP"),x=(0,i.N)("FULLSCREEN_SET_EYEDROPPER"),U=(0,C.nF)((e,r)=>{let n=e.getState(),a=r.params||{},{fileKey:i}=n.selectedView;(0,E.ds)(r.name,i??null,n,a)}),B=(0,i.N)("FULLSCREEN_SET_LEFT_PANEL_TAB"),V=(0,i.N)("FULLSCREEN_SHOW_FILE_CREATION_FAILURE_BANNER"),G=(0,i.N)("FULLSCREEN_HIDE_UPGRADE_BANNER"),H=(0,i.N)("FULLSCREEN_SHOW_UPGRADE_BANNER"),W=(0,i.N)("FULLSCREEN_SET_PREFERRED_VALUES_PICKER_LIST_LAYOUT"),K=(0,i.N)("FULLSCREEN_SET_INSTANCE_SWAP_PICKER_LIST_LAYOUT"),Y=(0,i.N)("FULLSCREEN_SET_PICKER_LIST_LAYOUT"),$=(0,C.nF)((e,r)=>{(0,o.sx)("Style Picker View Changed",{styleType:"FILL",oldViewMode:r.isListLayout?"GRID":"LIST",newViewMode:r.isListLayout?"LIST":"GRID"}),e.dispatch(Y(r))}),j=(0,i.N)("FULLSCREEN_SHOULD_SHOW_STACK_ALIGNMENT_PICKER"),z=(0,i.N)("FULLSCREEN_HIDE_EXPORT_SETTINGS_PICKER"),q=(0,i.N)("FULLSCREEN_SHOW_EXPORT_SETTINGS_PICKER"),X=(0,i.N)("FULLSCREEN_HIDE_STYLE_PICKER"),J=(0,i.N)("FULLSCREEN_SHOW_STYLE_PICKER"),Z=(0,i.N)("FULLSCREEN_HIDE_PICKER"),Q=(0,i.N)("FULLSCREEN_SHOW_PICKER");function ee(e){return e&&e.startsWith(f.F7)}function et(e){return e&&e.startsWith(f.yJ)}function er(e,r,n){let i=e&&e.id,s=r&&r.id,l=i!==f.k8&&s===f.k8,c=i===f.k8&&s!==f.k8,d=i!==f.$T&&s===f.$T,u=i===f.$T&&s!==f.$T,m=i!==f.AB&&i!==f.h2&&(s===f.AB||s===f.h2),p=(i===f.AB||i===f.h2)&&s!==f.AB&&s!==f.h2,h=i!==f._V&&s===f._V,_=i===f._V&&s!==f._V,E=!ee(i)&&ee(s),b=ee(i)&&!ee(s),I=!et(i)&&et(s),T=et(i)&&!et(s);l?a.Ez5.uiState().backgroundPickerOpen.set(!0):c?a.Ez5.uiState().backgroundPickerOpen.set(!1):d?y.Y5.updateAppModel({prototypeBackgroundPickerOpen:!0}):u?y.Y5.updateAppModel({prototypeBackgroundPickerOpen:!1}):m?(a.Ez5.propertiesPanelState().typeDetailsPanelOpen.set(!0),(0,o.sx)("Type Details Panel Opened")):p&&a.Ez5.propertiesPanelState().typeDetailsPanelOpen.set(!1),E?a.Osy.setIsPaintPickerOpen(!0):b&&a.Osy.setIsPaintPickerOpen(!1),I?a.Osy.setIsStylePickerOpen(!0):T&&a.Osy.setIsStylePickerOpen(!1),h?a.Ez5.uiState().minMaxModalShown.set(!0):_&&a.Ez5.uiState().minMaxModalShown.set(!1),b&&n(g.oI({paintId:void 0,originalPaint:void 0,updatedPaintFromDropper:void 0}))}let en=(0,C.nF)(e=>{let r=e.getState().pickerShown;e.dispatch(Z()),er(r,e.getState().pickerShown,e.dispatch)}),ea=(0,C.nF)((e,r)=>{let n=e.getState().pickerShown;e.dispatch(Q(r)),er(n,e.getState().pickerShown,e.dispatch)}),ei=(0,i.N)("FULLSCREEN_UPDATE_LOCAL_FONT_AGENT_VERSION"),eo=(0,i.N)("FULLSCREEN_UPDATE_FONT_LIST"),es=(0,i.N)("FULLSCREEN_STOP_RENAMING"),el=(0,i.N)("FULLSCREEN_BEGIN_RENAMING"),ec=(0,C.nF)((e,r)=>{let n=e.getState(),i=r.newSelectedView;if(n.saveStatus&&n.saveStatus.hasUnsavedChanges&&n.saveStatus.tabCloseText!==a.E63.SUPPRESS_UNSAVED_CHANGES_UI){let a=(0,p.t)("autosave.unable_to_leave_document.unsaved_changes_save_in_background");e.dispatch(_.to({type:N.v,data:{message:a}})),c.Ay.push((0,T.Np)(n,i),{...e.getState().selectedView,previousSelectedView:r.oldSelectedView,jsCommitHash:(0,d.tl)().release_manifest_git_commit}),e.dispatch(h.$T(r.oldSelectedView))}else n.saveStatus&&n.saveStatus.tabCloseText===a.E63.SUPPRESS_UNSAVED_CHANGES_UI&&(0,o.sx)("suppress_unsaved_changes_ui",{},{forwardToDatadog:!0}),e.dispatch(h.$T({...i,fromPopstate:!0}))}),ed=(0,i.N)("FULLSCREEN_UPDATE_SELECTED_STYLE_THUMBNAIL_URL"),eu=(0,i.N)("FULLSCREEN_UPDATE_SELECTED_STYLE_PROPERTIES"),em=(0,i.N)("FULLSCREEN_UPDATE_MIRROR"),ep=(0,i.N)("FULLSCREEN_SET_NEEDS_UPGRADE"),eh=(0,i.N)("FULLSCREEN_SET_FILE_VERSION"),e_=(0,i.N)("FULLSCREEN_SET_PROGRESS_BAR_STATE"),eg=(0,i.N)("FULLSCREEN_STOP_OBSERVING_OTHER_USER"),ef=(0,i.N)("FULLSCREEN_UPDATE_MULTIPLAYER_STATE"),eE=(0,C.nF)((e,r)=>{void 0!==r.allUsers&&(b.k6(r.allUsers.length,r.presenterSessionID),(0,m.YQ)({id:S.M8})),e.dispatch(ef(r))}),ey=(0,i.N)("FULLSCREEN_HIDE_OPEN_DESKTOP_APP_MODAL"),eb=(0,i.N)("FULLSCREEN_SHOW_OPEN_DESKTOP_APP_MODAL"),eI=(0,i.N)("FULLSCREEN_RECONNECTING_SUCCEEDED"),eT=(0,C.nF)(e=>{b.Dg(),e.dispatch(eI())}),ev=(0,i.N)("FULLSCREEN_RECONNECTING_STARTED"),eS=(0,C.nF)(e=>{b.Ug(),e.dispatch(ev())}),ew=(0,i.N)("FULLSCREEN_ATTEMPT_CLOSE"),eA=(0,C.nF)((e,r)=>{if(l.eD){l.eD.showFileBrowser(),r?.closeCurrentDesktopTab&&l.eD.close({suppressReopening:!0,shouldForceClose:!0});return}if(s.GZ()){if((0,d.kc)().integ_zoom_allow_file_switching&&(0,u.LR)())return;c.Ay.redirect("/","_blank");return}let n=e.getState(),{openFile:i,selectedView:o}=n,m=i?.project?.id,p=(0,d.kc)().ps_benchmark,_={view:"recentsAndSharing"};if(i&&o){let e=i.parentOrgId||A.P;if(p&&"fullscreen"===o.view&&n.lastVisitedPlan&&n.lastVisitedPlan.planId!==(n.lastVisitedPlan.planType===w.O.ORG?i?.parentOrgId:i?.teamId)){let e=(0,T.xS)(n,_);o.prevSelectedView&&(e=(0,T.xS)(n,o.prevSelectedView));let r=(0,I.nX)(e),a=(0,v.Eq)(e);(r||a)&&(e=(0,T.Tk)(e,r?w.O.ORG:w.O.TEAM,r||a,n.lastVisitedPlan.planType,n.lastVisitedPlan.planId)),c.Ay.redirect(e);return}if(!p&&"fullscreen"===o.view&&n.lastVisitedPlanId&&n.lastVisitedPlanId!==e){let e=(0,T.xS)(n,_);o.prevSelectedView&&(e=(0,T.xS)(n,o.prevSelectedView));let r=(0,I.nX)(e);if(!r&&n.lastVisitedPlanId&&n.lastVisitedPlanId!==A.P){let r=e.split("files/");e=r[0]+`files/${n.lastVisitedPlanId}/`+r[1]}else if(r&&r!==n.lastVisitedPlanId){let a=n.lastVisitedPlanId===A.P?"":n.lastVisitedPlanId,i=n.lastVisitedPlanId===A.P?`/${r}`:r;e=e.replace(i,a)}c.Ay.redirect(e);return}"fullscreen"===o.view&&o.prevSelectedView?_=o.prevSelectedView:i&&m&&(_={view:"folder",folderId:m})}if(a.Ez5?.uiState().isRecovery.getCopy()){let e=(0,T.xS)(n,_);c.Ay.redirect(e)}y.Y5.dispatchIfSaved(h.$T(_)),b.V(),e.dispatch(ew(r))}),eN=(0,i.N)("FILE_SELECTED_SHARE_MODAL_TAB"),eC=(0,i.N)("UPDATE_OPEN_FILE"),eL=(0,i.N)("NEW_FILE_LOADED"),eO=(0,i.N)("FULLSCREEN_OPEN")},994988:(e,r,n)=>{n.d(r,{HF:()=>h,QA:()=>E,TW:()=>g,Zv:()=>p,kE:()=>m,mH:()=>_,tG:()=>u,zs:()=>f});var a=n(167249),i=n(27087),o=n(939863),s=n(392592),l=n(980820),c=n(404717),d=n(440535);let u=(0,a.N)("GENERIC_COMMENT_COMMIT_CREATED_COMMENT"),m=(0,a.N)("GENERIC_COMMENT_COMMIT_EDITED_COMMENT"),p=(0,a.N)("GENERIC_COMMENT_COMMIT_DELETED_COMMENT"),h=(0,a.N)("GENERIC_COMMENT_COMMIT_HIDE_COMMENT");(0,l.nF)(async(e,r)=>{let{authorId:n,removeCommentsCallback:a}=r,i=e.getState().communityHub.comments,{activeFeedType:o,commentsById:s,id:l,type:c}=i;if(!l||!c||!i.feeds[o]?.feed)return;let d=[];for(let e in s)s[e]?.author.id===n&&d.push(s[e]);await a(d),e.dispatch(p({resourceType:c,resourceId:l,comments:d}))});let _=(0,a.N)("GENERIC_COMMENT_SET_SHOW_RESOLVED");(0,a.N)("GENERIC_COMMENT_SAVE_PAGE_SCROLL_POSITION");let g=(0,a.N)("GENERIC_COMMENT_RESET_COMMENT_STATUS"),f=(0,a.N)("GENERIC_COMMENT_SUBMIT");(0,l.nF)(async(e,r)=>{let{messageMeta:n,resourceId:a,resourceType:l,onSuccess:c,onError:m,clientMeta:p,pageId:h,parentId:_,isReply:E}=r;await i.Ay.post("/api/community_comments",{message_meta:n,resource_id:a,resource_type:l,client_meta:p,page_id:h,parent_id:_}).then(({data:r})=>{e.dispatch(u({comment:r.meta,resourceId:a,resourceType:l,isReply:E})),c&&c(r.meta)}).catch(r=>{let n=(0,o.Jv)(r);n&&(e.dispatch(s.F.enqueue({error:!0,message:(0,o.t)("community.comments.failed_to_create_comment",{errorMessage:n})})),_?e.dispatch(g({commentId:_})):e.dispatch(g({commentId:d.hm})),m&&m())}),e.dispatch(f(r))},({resourceId:e})=>`GENERIC_COMMENT_SUBMIT_${e}`);let E=(0,l.MM)("GENERIC_COMMENT_EDIT",async(e,r,{optimistId:n})=>{let{commentId:a,messageMeta:l,callback:d,clientMeta:u}=r;await i.Ay.put(`/api/community_comments/${a}`,{message_meta:l,client_meta:u}).then(({data:r})=>{e.dispatch(c.c(n)),d(r.meta),e.dispatch(m({comment:r.meta}))}).catch(r=>{e.dispatch(c.r(n)),e.dispatch(s.F.enqueue({message:(0,o.t)("community.comments.failed_to_edit_comment"),error:!0}))})});(0,l.nF)((e,r,{loadingKey:n})=>{let{commentId:a,onFinish:l}=r,{type:c,id:d}=e.getState().communityHub.comments;if(null===c||null===d)return;let u=e.getState().communityHub.comments.commentsById[a];i.Ay.del(`/api/community_comments/${a}`).then(()=>{e.dispatch(p({resourceType:c,resourceId:d,comments:[u]})),e.dispatch(s.F.enqueue({message:(0,o.t)("community.comments.comment_deleted")})),l?.(!1)}).catch(r=>{let n=(0,o.Jv)(r);n&&(e.dispatch(s.F.enqueue({error:!0,message:(0,o.t)("community.comments.failed_to_delete_comment",{errorMessage:n})})),l?.(!0))})},({commentId:e})=>`GENERIC_COMMENT_DELETE_${e}`),(0,l.nF)((e,r)=>{let n;let{commentId:a,userIsAdmin:l,onFinish:c}=r,{type:d,id:u}=e.getState().communityHub.comments;null!==d&&null!==u&&(l&&(n={hide:!0}),i.Ay.post(`/api/community_comments/${a}/report`,n).then(()=>{e.dispatch(h({commentId:a,resourceId:u,resourceType:d})),e.dispatch(s.F.enqueue({message:(0,o.t)("community.comments.comment_reported_and_hidden"),type:"COMMENT_REPORTED"})),c?.(!1)}).catch(r=>{let n=(0,o.Jv)(r);n&&(e.dispatch(s.F.enqueue({message:(0,o.t)("community.comments.failed_to_report_comment",{errorMessage:n}),type:"COMMENT_REPORT_ERROR"})),c?.(!0))}))})},950949:(e,r,n)=>{n.d(r,{f:()=>m});var a=n(881388),i=n(939863),o=n(392592),s=n(662275),l=n(320741),c=n(280945),d=n(661239),u=n(980820);let m=(0,u.nF)((e,{fileKey:r,emailAddress:n,isResentEmail:s,onSuccess:d},{loadingKey:u})=>{let m=c.L.setClaimEmail({fileKey:r,emailAddress:n});(0,l.N)(m,e,u),m.then(()=>{if(s){e.dispatch(o.F.enqueue({message:(0,i.t)("google_device_try_file_modal.resent_email.visual_bell")}));return}d?.(n)}).catch(r=>{if(r.data?.message==="Hit Claim Email Job timeout lock"){e.dispatch(o.F.enqueue({message:(0,i.t)("google_device_try_file_modal.resent_email.email_resent")}));return}e.dispatch(a.s.error((0,i.t)("google_device_try_file_modal.enter_email.failed_to_send")))})});(0,u.nF)((e,{fileKey:r},{loadingKey:n})=>{let o=c.L.claimDeviceFile({fileKey:r});(0,l.N)(o,e,n),o.then(()=>{e.dispatch(s.to({type:d.$,data:{}}))}).catch(r=>{e.dispatch(a.s.error((0,i.t)("google_device_try_file.save_board.generic_error")))})})},22774:(e,r,n)=>{n.d(r,{FU:()=>s,v6:()=>c,yu:()=>l});var a=n(167249),i=n(47506),o=n(980820);let s=(0,a.N)("SET_KEYBOARD_SHORTCUT_PANEL_TAB"),l=(0,a.N)("USED_KEYBOARD_SHORTCUT"),c=(0,o.nF)((e,r)=>{"paste"===r.key&&(0,i.YQ)({id:"Used Keyboard Shortcut Paste"}),e.dispatch(l(r))})},271245:(e,r,n)=>{n.d(r,{QC:()=>B,fi:()=>F,zK:()=>U});var a=n(432258),i=n(966712),o=n(374626),s=n(27087),l=n(154483),c=n(868389),d=n(980820),u=n(944682),m=n(395281),p=n(632430),h=n(182976),_=n(453681),g=n(416095),f=n(220499),E=n(933342),y=n(666068),b=n(336599),I=n(707465),T=n(935757),v=n(239671),S=n(173454),w=n(809073),A=n(656012),N=n(705129);let C=new Map,L=(0,l.fv)();async function O(e,r){let n=(0,I.zg)(e.getState().selectedView),a=!(0,i.Ay)().user_data;if(a&&!n)return;if((C.get(r)||0)>20){(0,g.LC)();return}let s=(0,N.yD)(r);if(!(0,b.Sc)(e.getState().loadingState,s)){(0,g.LC)();return}e.dispatch(h.Cx({key:s}));let l=e.getState();try{let n=l.selectedView.editorType,d=function(e){switch(e){case v.nT.Whiteboard:return"figjam";case v.nT.Slides:return"slides";default:return"design"}}(n),p=A.Z.getLibrarySubscribedComponentsEditorType({key:r,editorType:d}),[f]=await Promise.all([p]);a||await T.kb.promise,e.dispatch(u.uo({files:f.data.meta.files,subscribeToRealtime:!0})),f.data.meta.files.forEach(e=>{(0,g.WY)(e.key)});let y=e.getState().fileByKey,b=o.zl.get(_.qp),I=f.data.meta.hub_files;I&&(I.forEach(e=>{(0,g.WY)(e.id)}),e.dispatch((0,c.D3)(I)));let w=f.data.meta.state_groups.map(e=>({...e,team_id:(0,i.kc)().ds_use_lib_keys?b[e.library_key]?.team_id:y[L(e)]?.team_id})),N=f.data.meta.components.map(e=>({...e,team_id:(0,i.kc)().ds_use_lib_keys?b[e.library_key]?.team_id:y[L(e)]?.team_id}));e.dispatch(m.uo({items:w,type:S.PW.STATE_GROUP})),e.dispatch(m.uo({items:N,type:S.PW.COMPONENT})),(0,g.LC)(),e.dispatch(h.x2({key:s})),E.YG.queryDidChange(e)}catch(n){(0,g.LC)(),C.set(r,(C.get(r)||0)+1),e.dispatch(h.of({key:s}))}}async function R(e){let r=e.getState().openFile;if(!r)return;let n=(0,g.iw)(r.key),o=e.getState().loadingState;if(!((0,b.D2)(o,n)||(0,b.VP)(o,n))){e.dispatch(h.Cx({key:n}));try{let r=e.getState().selectedView;if("fullscreen"!==r.view)return;let o=await A.Z.getDefaultLibraries({editorType:(0,v.Bu)(r.editorType)});D(e,o.data.meta.components,S.PW.COMPONENT),D(e,o.data.meta.state_groups,S.PW.STATE_GROUP),o.data.meta.files.forEach(r=>{r.team_id=S.Yu,e.dispatch(u.yJ({file:r}))});let s=o.data.meta.files.map(e=>e.key),l=o.data.meta.files.map(f.l).filter(a.Vq);if(e.dispatch(m.Vk({fileKeys:s})),e.dispatch(m.lx({libraryKeys:l})),r.editorType===v.nT.Whiteboard&&(0,i.kc)().figjam_diagramming_improvements_v1){let r=await A.Z.getDefaultLibraries({editorType:"whiteboard_shapes"});k(e,r.data.meta.components,S.PW.COMPONENT),k(e,r.data.meta.state_groups,S.PW.STATE_GROUP),r.data.meta.files.forEach(r=>{r.team_id=S.Yu,e.dispatch(u.yJ({file:r}))});let n=r.data.meta.files.map(e=>e.key),i=r.data.meta.files.map(f.l).filter(a.Vq);e.dispatch(m.MI({shapeFileKeys:n})),e.dispatch(m.yi({libraryKeys:i}))}(0,g.kG)(),e.dispatch(h.x2({key:n}))}catch(r){(0,g.kG)(),e.dispatch(h.of({key:n})),E.YG.queryDidChange(e)}}}let P=(0,l.fv)(),D=(e,r,n)=>{let a={[S.Yu]:{}};r.forEach(e=>{let r=P(e=(0,y.aV)(e));a[S.Yu][r]=a[S.Yu][r]||{},a[S.Yu][r][e.node_id]=e}),e.dispatch(m.Ho({publishedItemsByTeamId:a,type:n}))},k=(e,r,n)=>{let a={[S.Yu]:{}};r.forEach(e=>{let r=P(e=(0,y.aV)(e));a[S.Yu][r]=a[S.Yu][r]||{},a[S.Yu][r][e.node_id]=e}),e.dispatch(m.g9({publishedItemsByTeamId:a,type:n}))};(0,d.nF)(e=>{let r=e.getState(),n=!!r.user;if(!r.openFile?.key)return;let a=e.getState().selectedView;a&&"fullscreen"===a.view&&(a.editorType===v.nT.Whiteboard||a.editorType===v.nT.Slides?R(e):(0,g.kG)(),n&&x(e,a.editorType===v.nT.Whiteboard?w.$A.FigJam:w.$A.Design)),n&&(e.dispatch(p.tg()),p.xZ(e))});let M=(0,l.fv)(),F="FETCH_RECENTLY_USED_LIBRARY_ITEMS";async function x(e,r){let n;if((0,b.VP)(e.getState().loadingState,F))return;e.dispatch(h.Cx({key:F})),await g.NW;let a=e.getState();if("fullscreen"!==a.selectedView.view){e.dispatch(h.x2({key:F}));return}let i=new Set,l=new Set;for(let e of a.recentlyUsed.libraryItems[r])e.type===S.PW.COMPONENT&&e.key&&!a.library.published.components[e.team_id]?.[M(e)]?.[e.node_id]?i.add(e.key):e.type===S.PW.STATE_GROUP&&e.key&&!a.library.published.stateGroups[e.team_id]?.[M(e)]?.[e.node_id]&&l.add(e.key);if(0===i.size&&0===l.size){e.dispatch(h.x2({key:F}));return}try{n=await s.Ay.post("/api/design_systems/components_state_groups",{component_keys:Array.from(i),state_group_keys:Array.from(l),org_id:a.openFile?.parentOrgId})}catch(r){e.dispatch(h.of({key:F}));return}e.dispatch(h.x2({key:F})),e.dispatch(u.uo({files:n.data.meta.files,subscribeToRealtime:!1})),e.dispatch(m.dC({subscribedOldKeyToNewKey:n.data.meta.move_remappings,localOldGuidToNewKey:{}}));let c=e.getState().fileByKey,d=o.zl.get(_.qp);p.VF(n.data.meta.components,S.PW.COMPONENT,c,d,e.dispatch),p.VF(n.data.meta.state_groups,S.PW.STATE_GROUP,c,d,e.dispatch)}let U=(0,d.nF)(e=>{let r=e.getState().openFile;r&&O(e,r.key)});function B(e){e.dispatch(U())}},632430:(e,r,n)=>{n.d(r,{$h:()=>e$,AA:()=>rl,AV:()=>e4,As:()=>e6,BK:()=>eV,Bs:()=>eZ,Cz:()=>tz,D6:()=>tC,EY:()=>rn,Ee:()=>eq,Fz:()=>rc,G5:()=>tJ,Kd:()=>tm,Kk:()=>rr,Kn:()=>tq,Ky:()=>tN,M8:()=>tf,Mv:()=>tj,NW:()=>t$,Nf:()=>ta,Oe:()=>tc,P8:()=>eW,PI:()=>tZ,Qn:()=>tn,SH:()=>t6,Sn:()=>t1,Tn:()=>tM,VF:()=>ru,YD:()=>tW,Yb:()=>tk,Yf:()=>ej,Yi:()=>tl,Yx:()=>tY,Z:()=>tP,Zn:()=>ro,_K:()=>ti,a9:()=>tT,am:()=>t4,b$:()=>eX,bi:()=>tX,e$:()=>t_,fR:()=>t5,ff:()=>to,fv:()=>tR,g1:()=>tV,jD:()=>eF,jR:()=>eQ,jW:()=>t0,n8:()=>rt,nE:()=>t3,nh:()=>e7,nz:()=>tK,rX:()=>e8,sb:()=>t2,t5:()=>tt,tL:()=>t8,tg:()=>tg,u7:()=>tI,uO:()=>eG,uP:()=>eU,x:()=>ra,xZ:()=>tL,yJ:()=>rs,zn:()=>tA});var a=n(411855),i=n(188507),o=n(414507),s=n(388393),l=n(299321),c=n(437175),d=n(275556),u=n(804597),m=n(880934),p=n(259120),h=n(904669),_=n(89865),g=n.n(_),f=n(167249),E=n(776250),y=n(522205),b=n(38329),I=n(737947),T=n(358145),v=n(966712),S=n(374626),w=n(827697),A=n(915440),N=n(752553),C=n(535972),L=n(776621),O=n(572206),R=n(27087),P=n(47506),D=n(881388),k=n(939863),M=n(588666),F=n(154483),x=n(392592),U=n(934533),B=n(868389),V=n(980820),G=n(944682),H=n(395281),W=n(182976),K=n(662275),Y=n(404717),$=n(846018),j=n(931828),z=n(298527),q=n(988022),X=n(974105),J=n(378905),Z=n(696673),Q=n(44892),ee=n(453681),et=n(742621),er=n(999881),en=n(151283),ea=n(356390),ei=n(567245),eo=n(457630),es=n(560286),el=n(416095),ec=n(279453),ed=n(540019),eu=n(336599),em=n(243987),ep=n(830524),eh=n(946778),e_=n(320741),eg=n(388094),ef=n(984968),eE=n(935757),ey=n(551534),eb=n(610267),eI=n(173454),eT=n(246680),ev=n(735974),eS=n(656012),ew=n(755515),eA=n(909279),eN=n(776018),eC=n(252430),eL=n(372291),eO=n(705129),eR=n(479296),eP=n(229055),eD=n(672474),ek=n(479984);let eM=(0,F.fv)();async function eF(e,r=l.ZiZ.ACTIVE_SCENE){let n;if(!e.canvas_url&&r===l.ZiZ.PLAYGROUND_SCENE)return{newSymbolOrStateGroupGuid:l.BXd.upsertLocalProductComponentToPlaygroundScene(e.node_id)};let a=await Q.Eo.getCanvas(e);if(e.type===eI.PW.COMPONENT){let i=d.l7.system("upsert-shared-symbol",()=>l.BXd.upsertSharedSymbol(e.component_key??s.ii.INVALID,e.content_hash??s.F7.INVALID,eM(e),l.zol.NO,a,r));if(!i||i.fileUpdateRequired)return;i.localGUID||(0,L.x1)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,"no local GUID in response",{response:JSON.stringify(i)},{reportAsSentryError:!0}),n=i.localGUID}else if(e.type===eI.PW.STATE_GROUP){let i=d.l7.system("upsert-shared-state-group",()=>l.BXd.upsertSharedStateGroup(e.key,e.version,eM(e),l.zol.NO,a,r));if(!i||i.fileUpdateRequired)return;if(!i.localGUID)throw Error("Swap to Shared Component Error, no local GUID");if(i.C2)throw Error(i.C2);n=i.localGUID}else throw Error(`Unexpected type for dragging library item: ${e.type}`);return{newSymbolOrStateGroupGuid:n,buffer:a}}let ex=(0,F.fv)(),eU=(0,V.nF)((e,r)=>{let{item:n,callback:a,bufferCallback:i,errorCallback:s,alwaysFetch:c,targetUpsertScene:d=l.ZiZ.ACTIVE_SCENE}=r,u=(0,X.d1)(e.getState());if(u){if(!(0,J.N2)(n,u)||c){let r=async()=>{try{let e=await eF(n,d);e&&(a?.(e.newSymbolOrStateGroupGuid),e.buffer&&i?.(e.buffer))}catch(r){e.dispatch(D.s.error("An error occurred while retrieving the component or state group.")),(0,L.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,r),s?.()}};e.dispatch((0,eD.vQ)({assetResourceId:ex(n),onInsertAsset:r,source:eD.jE.LOAD_COMPONENT}))}else a?.(n.node_id)}}),eB=(0,F.fv)(),eV=(0,f.N)("SWAP_TO_SHARED_COMPONENT_OR_STATE_GROUP"),eG=(0,V.nF)((e,r)=>{let{item:n,instanceGUIDs:a,usedSwapInstanceKeyboardShortcut:i,storeInRecentsKey:s,queryId:c}=r,u=(0,eO.Ml)(n,a);e.dispatch(W.Cx({key:u}));let m=e.getState(),p=(0,es.s)(m);e.dispatch(tZ({storeInRecentsKey:s,item:n,userId:p}));let h=(0,X.d1)(m);if(!h){e.dispatch(W.of({key:u}));return}let _=async()=>{try{let r=await eF(n);if(r){let o=n.type===eI.PW.STATE_GROUP?l.glU.getSimilarStates(a,r.newSymbolOrStateGroupGuid,n.default_state_key):{[r.newSymbolOrStateGroupGuid]:a};d.l7.user("replace-symbol-backing-instances",()=>{l.glU.replaceSymbolBackingInstances(o,i)}),e.dispatch(W.x2({key:u})),(0,eP.V)(h.key,n,!0,!!e.getState().userFlags.apple_eula_accepted)}}catch(r){e.dispatch(W.of({key:u})),e.dispatch(D.s.error("An error occurred while adding an instance of this component.")),(0,L.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,r),(0,eP.V)(h.key,n,!1,!!e.getState().userFlags.apple_eula_accepted)}(0,q.ds)("Instance Swapped To Shared Component",h.key,e.getState(),{componentFileKey:eB(n),componentLibraryKey:n.library_key,componentId:n.id,source:r.sourceForTracking,queryId:c})};e.dispatch((0,eD.vQ)({assetResourceId:eB(n),onInsertAsset:_,source:eD.jE.SWAP_TO_COMPONENT})),e.dispatch(eV(r))}),eH="<!--(figcomponent)";(0,V.nF)((e,r)=>{let n=r.dataTransfer?.getData("text/html");if(n){let a=n.indexOf(eH)+eH.length,i=n.indexOf("(/figcomponent)-->");if(a>=0&&i>=0&&a<i){let o=n.substring(a,i).trim();try{let n=JSON.parse(o);if("object"==typeof n){let a=n.fileKey,i=n.nodeId;if(a&&i){let n=ea.Y5.getViewportInfo(),o=new O.Mi(n.x,n.y),s=new O.Mi(r.clientX,r.clientY).subtract(o),l=(0,eo.$$)(n,s);e.dispatch(eW({fileKey:a,nodeId:i,canvasX:l.x,canvasY:l.y}))}}}catch(e){}}}});let eW=(0,V.nF)(async(e,r)=>{let{fileKey:n,nodeId:a,canvasX:i,canvasY:o}=r,s=e.getState(),l=(0,X.d1)(s),c=null;if(l&&l.key===n)c=s.library.local.components[a];else{s.fileByKey[n]||(await tO(e,n),s=e.getState());let r=s.fileByKey[n];!r||(c=(0,el.j7)(s.library.published.components,r)[a])||(await tO(e,n),s=e.getState(),c=(0,el.j7)(s.library.published.components,r)[a])}c?e.dispatch(ej({item:c,canvasPosition:new O.Mi(i,o),percentageOffset:new O.Mi(.5,.5),insertAsChildOfCanvas:!1})):e.dispatch(x.F.enqueue({type:"insert_component_error",message:(0,k.t)("design_systems.subscriptions.this_component_is_not_available"),error:!0}))});function eK(e){return e(x.F.enqueue({type:"insert_instance",message:(0,k.t)("design_systems.subscriptions.inserting_instance"),icon:U.zX.SPINNER,delay:1e3})),function(){e(x.F.dequeue({matchType:"insert_instance"}))}}let eY=(0,F.fv)(),e$=(0,f.N)("INSERT_SHARED_COMPONENT"),ej=(0,V.nF)((e,r)=>{e.dispatch(e$(r));let{item:n}=r,{canvasPosition:a,percentageOffset:i,insertAsChildOfCanvas:c,isFromDoubleClick:u,useSmartPositioning:p,insertionCallback:_,storeInRecentsKey:g,fromPlayground:f,insertLogArgsOverride:E,isClick:y}=r,b=e.getState(),I=(0,Z.wJ)(eY(n))&&!!(0,v.kc)().presets_baseline,T=async()=>{let r=(0,es.s)(b);e.dispatch(tZ({storeInRecentsKey:g,item:n,userId:r}));let T=(0,X.d1)(b);if(!T)return;let S=(r,n)=>{let o=d.l7.user("insert-component",()=>f?l.glU.insertPlaygroundInstance({x:a.x,y:a.y,percentOffsetX:i.x,percentOffsetY:i.y},I):l.glU.insertInstance(r,{x:a.x,y:a.y,percentOffsetX:i.x,percentOffsetY:i.y},n,c,p??!1,I));if(_?.([o],a,y),e.dispatch(K.ES({type:eN.V})),(0,v.kc)().presets_baseline&&o!==m.AD){let n=(0,ep.C$)((0,h.UN)().get(r)),a=b.mirror.sceneGraph.get(o),i=Object.keys(a&&"INSTANCE"===a.type&&a.componentProperties()||{}).length>0;n&&i?(e.dispatch($.E({nodeId:o})),(0,P.YQ)({id:eT.sh})):n?(e.dispatch($.E({nodeId:o})),(0,P.YQ)({id:eT.Sp})):i?(0,P.YQ)({id:eT.An}):(0,P.YQ)({id:eT.fe})}ea.Y5.triggerAction("commit"),ea.Y5.triggerAction("set-tool-default")};if((0,J.N2)(n,T)){let r=b.library.local.components[n.node_id];if(!r||!b.mirror.sceneGraph.get(r.node_id)){e.dispatch(K.to({type:eC.Q}));return}try{S(r.node_id,E),(0,q.ds)("Component Local Symbol Inserted",T.key,e.getState(),{componentFileKey:eY(n),componentLibraryKey:n.library_key,componentId:n.id,ComponentCanvasPositionX:a.x,ComponentCanvasPositionY:a.y}),(0,eP.V)(T.key,r,!0,!!e.getState().userFlags.apple_eula_accepted),e.dispatch(ri())}catch(n){e.dispatch(D.s.error("An error occurred while adding an instance of this component.")),(0,L.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,n),(0,eP.V)(T.key,r,!1,!!e.getState().userFlags.apple_eula_accepted)}}else{let r=performance.now();if(tE&&tE===n.component_key&&ty){let e=(await ty).component;e&&e.updated_at>n.updated_at&&(n=e)}let i=eK(e.dispatch);Q.Eo.getCanvas(n).then(e=>{let r=d.l7.system("upsert-shared-symbol",()=>l.BXd.upsertSharedSymbol(n.component_key??s.ii.INVALID,n.content_hash??s.F7.INVALID,eY(n),l.zol.NO,e,l.ZiZ.ACTIVE_SCENE));if(!r)throw(0,L.x1)("design-systems","response from upsertSharedSymbol was nullish",{componentKey:n.component_key??s.ii.INVALID,contentHash:n.content_hash??s.F7.INVALID},{reportAsSentryError:!0}),Error("An error occurred while adding an instance of this component.");if(r.fileUpdateRequired||!r.localGUID)throw Error("An error occurred while adding an instance of this component.");S(r.localGUID,E)},e=>{let r=l.glU.getSymbolNodeId(n.component_key,n.content_hash);if(!r){if(e?.status===403)throw Error("A 403 error occurred while adding an instance of this component.");throw Error("An error occurred while adding an instance of this component.")}S(r,E)}).then(()=>{let i=performance.now()-r;(0,q.ds)("Component Shared Symbol Inserted",T.key,e.getState(),{elapsedMs:i,componentFileKey:eY(n),componentLibraryKey:n.library_key,componentId:n.id,componentName:n.name,ComponentCanvasPositionX:a.x,ComponentCanvasPositionY:a.y,isFromDefaultLibrary:(0,el.td)(b.library,n.library_key),isFromDoubleClick:!!u,useSmartPositioning:!!p}),(0,eP.V)(T.key,n,!0,!!e.getState().userFlags.apple_eula_accepted,{metricName:"design_systems.subscribed_component.insert_time",duration:i}),e.dispatch(ri())}).catch(a=>{e.dispatch(D.s.error(a.message)),(0,L.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,a),(0,eP.V)(T.key,n,!1,!!e.getState().userFlags.apple_eula_accepted,{metricName:"design_systems.subscribed_component.insert_time",duration:performance.now()-r})}).finally(()=>{i()})}};e.dispatch((0,eD.vQ)({assetResourceId:eY(n),onInsertAsset:T,source:eD.jE.INSERT_SHARED_COMPONENT}))}),ez=(0,F.fv)(),eq=(0,f.N)("INSERT_SHARED_STATE_GROUP"),eX=(0,V.nF)(async(e,r)=>{let{item:n}=r,{canvasPosition:a,percentageOffset:i,insertAsChildOfCanvas:c,isFromDoubleClick:u,useSmartPositioning:p,insertionCallback:h,storeInRecentsKey:_,fromPlayground:g,insertLogArgsOverride:f,isClick:E}=r,y=e.getState(),b=(0,Z.wJ)(ez(n))&&!!(0,v.kc)().presets_baseline,I=async()=>{let r=(0,es.s)(y);e.dispatch(tZ({storeInRecentsKey:_,item:n,userId:r}));let I=(0,X.d1)(y);if(!I)return;let T=(r,n,o)=>{let s=d.l7.user("insert-state-group",()=>g?l.glU.insertPlaygroundInstance({x:a.x,y:a.y,percentOffsetX:i.x,percentOffsetY:i.y},b):l.glU.insertStateGroup(r,{x:a.x,y:a.y,percentOffsetX:i.x,percentOffsetY:i.y},o,c,p??!1,n,b));return h?.([s],a,E),e.dispatch(K.ES({type:eN.V})),ea.Y5.triggerAction("commit"),ea.Y5.triggerAction("set-tool-default"),s};if((0,J.N2)(n,I)){let r=y.library.local.stateGroups[n.node_id];if(!r||!y.mirror.sceneGraph.get(r.node_id)){e.dispatch(K.to({type:eC.Q}));return}T(r.node_id,"",f),(0,q.ds)("State Group Local Symbol Inserted",I.key,e.getState(),{stateGroupFileKey:ez(n),stateGroupLibraryKey:n.library_key,stateGroupId:n.id,StateGroupCanvasPositionX:a.x,StateGroupCanvasPositionY:a.y}),e.dispatch(ri())}else{let r=performance.now();if(tv&&tv===n.key&&tS){let e=await tS;e&&e.updated_at>n.updated_at&&(n=e)}let i=eK(e.dispatch);Q.Eo.getCanvas(n).then(r=>{let a=d.l7.system("upsert-shared-state-group",()=>l.BXd.upsertSharedStateGroup(n.key??s.q.INVALID,n.version,ez(n),l.zol.NO,r,l.ZiZ.ACTIVE_SCENE));if(!a||a.fileUpdateRequired||!a.localGUID)throw Error("An error occurred while adding an instance of this component.");let i=T(a.localGUID,n.default_state_key,f);if((0,v.kc)().presets_baseline){let r=y.mirror.sceneGraph.get(a.localGUID)?.childrenNodes[0];r&&((0,ep.C$)(r)&&i!==m.AD?(e.dispatch($.E({nodeId:i})),(0,P.YQ)({id:eT.sh})):(0,P.YQ)({id:eT.An}))}},e=>{let r=l.glU.getStateGroupNodeId(n.key,n.version);if(!r)throw Error("An error occurred while adding an instance of this component.");T(r,"",f)}).then(()=>{(0,q.ds)("State Group Shared Symbol Inserted",I.key,e.getState(),{stateGroupFileKey:ez(n),stateGroupLibraryKey:n.library_key,stateGroupId:n.id,stateGroupName:n.name,StateGroupCanvasPositionX:a.x,StateGroupCanvasPositionY:a.y,isFromDefaultLibrary:(0,el.td)(y.library,n.library_key),isFromDoubleClick:!!u}),(0,eP.V)(I.key,n,!0,!!e.getState().userFlags.apple_eula_accepted,{metricName:"design_systems.subscribed_state_group.insert_time",duration:performance.now()-r}),e.dispatch(ri())}).catch(a=>{e.dispatch(D.s.error(a.message)),(0,L.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,a),(0,eP.V)(I.key,n,!1,!!e.getState().userFlags.apple_eula_accepted,{metricName:"design_systems.subscribed_state_group.insert_time",duration:performance.now()-r})}).finally(()=>{i()})}};await e.dispatch((0,eD.vQ)({assetResourceId:ez(n),onInsertAsset:I,source:eD.jE.INSERT_SHARED_STATE_GROUP})),e.dispatch(eq(r))}),eJ=(0,F.fv)(),eZ=(0,V.nF)(async(e,r)=>{let{item:n}=r;if(!(0,eL.RX)(n))return;let{canvasPosition:a,percentageOffset:i,insertAsChildOfCanvas:s,useSmartPositioning:c,insertLogArgsOverride:u,insertionCallback:m,storeInRecentsKey:p,fromPlayground:h,selectAfterInsert:_,isClick:g,shouldShowVisualBell:f=!0,errorCallback:E}=r,y=e.getState(),b=(0,es.s)(y);e.dispatch(tZ({storeInRecentsKey:p,item:n,userId:b}));let I=(r,n)=>{let o=d.l7.user("insert-module",()=>h?l.glU.insertPlaygroundModuleUsage({x:a.x,y:a.y,percentOffsetX:i.x,percentOffsetY:i.y}):l.glU.insertModule(r,{x:a.x,y:a.y,percentOffsetX:i.x,percentOffsetY:i.y},n,s,c??!1,_??!0));return m?.(o,a,g),e.dispatch(K.ES({type:eN.V})),ea.Y5.triggerAction("set-tool-default"),o},T=(0,X.d1)(y);if((0,J.N2)(n,T))I(n.node_id,u),e.dispatch(ri());else{let r=()=>{};f&&(r=function(e){return e(x.F.enqueue({type:"insert_template",message:(0,k.t)("design_systems.subscriptions.inserting_template"),icon:U.zX.SPINNER,delay:1e3})),function(){e(x.F.dequeue({matchType:"insert_template"}))}}(e.dispatch));try{let e=await e0(n);I(e.localGUID,u)}catch(r){e.dispatch(D.s.error(r.message)),E?E(r):(0,L.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,r)}finally{f&&r()}}});(0,V.nF)(async(e,r)=>{let{modules:n,canvasPosition:a,percentageOffset:i,insertAsChildOfCanvas:s,afterSlideModulesInsertion:c,useSmartPositioning:u,insertLogArgsOverride:m,storeInRecentsKey:p,selectAfterInsert:h,errorCallback:_}=r;if(n.some(e=>e.moduleSource!==l.QjO.SLIDES_TEMPLATE||!(0,eL.RX)(e)))return;let g=e.getState(),f=(0,es.s)(g),E=(e,r)=>d.l7.user("insert-module",()=>l.glU.insertModule(e,{x:a.x,y:a.y,percentOffsetX:i.x,percentOffsetY:i.y},r,s,u??!1,h??!0));try{let r=(await Promise.all(n.map(e0))).map(e=>E(e.localGUID,m));n.forEach(r=>{e.dispatch(tZ({storeInRecentsKey:p,item:r,userId:f}))}),c(n,r),ea.Y5.triggerAction("set-tool-default")}catch(e){_?_(e):(0,L.$D)(o.FigmaTeam.SLIDES,e)}});let eQ=(0,V.nF)(async(e,r)=>{let{item:n}=r,{canvasPosition:a,percentageOffset:i,insertAsChildOfCanvas:s,useSmartPositioning:c,insertLogArgsOverride:u,selectAfterInsert:m,errorCallback:p}=r,h=a?{x:a.x,y:a.y,percentOffsetX:i.x,percentOffsetY:i.y}:null,_=(r,n)=>{let a=d.l7.user("insert-responsive-set",()=>l.glU.insertResponsiveSet(r,h,n,s,c??!1,m??!0));return e.dispatch(K.ES({type:eN.V})),ea.Y5.triggerAction("commit"),ea.Y5.triggerAction("set-tool-default"),a};if("LIBRARY"!==n.subscriptionStatus)_(n.assetId,u);else try{let e=await e1(n);_(e,u)}catch(r){e.dispatch(D.s.error(r.message)),p?p(r):(0,L.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,r)}});async function e0(e){let r=await Q.Eo.getCanvas(e),n=d.l7.system("upsert-shared-module",()=>l.BXd.upsertSharedModule(e.key??s.mW.INVALID,e.version??s.Pg.INVALID,eJ(e),l.zol.NO,r,l.ZiZ.ACTIVE_SCENE));if(!n||n.fileUpdateRequired||!n.localGUID)throw Error("An error occurred while inserting this template.");return n}async function e1(e){if("LIBRARY"!==e.subscriptionStatus)return e.assetId;let r=await Q.Eo.getCanvas({canvas_url:e.canvasUrl});if(!d.l7.system("upsert-shared-library-asset",()=>l.BXd.upsertSharedLibraryAsset((0,ey.Hk)(e.type),e.key,e.version,e.fileKey__UPSERT_ONLY,l.zol.NO,r,l.ZiZ.ACTIVE_SCENE)).success)throw Error("An error occurred while inserting this asset.");return e.assetId}function e2(e,r,n){return(0,y.a)(r,n,{batchSize:5,onBatchFinish(r,n){e(ek.qB({delta:n}))}})}let e3=(0,F.fv)(),e6=(0,V.nF)(async(e,r)=>{let{stateGroups:n,usedItemsByKey:a,instanceIdsToUpdate:i,updateStartTime:s}=r,u=e.getState(),m=u.openFile;if(m)try{let r=await Promise.all(n.map(e=>Q.Eo.getCanvas(e))),o=new Set;await e2(e.dispatch,n,(e,n)=>{let p=r[n];if(d.l7.user("update-shared-state-group",()=>{l.BXd.updateSharedStateGroup(e.key,e3(e),e.newStateKeyToOutdatedItems,i.map(c.v.toString),p,s)}),Object.keys(e.newStateKeyToOutdatedItems).length)for(let r of Object.values(e.newStateKeyToOutdatedItems)){let{localIdsToUpdate:n,oldSubscribedKeysToUpdate:i}=r;if((0,el.GA)(u.library,m,n,i,a)){o.add(e3(e));break}}}),ea.Y5.triggerAction("commit");let p=n.map(e=>e.id);(0,q.ds)("Components Updated",m.key,e.getState(),{stateGroups:p,isSgShimFFEnabled:!0}),o.size&&t9(e,o)}catch(r){e.dispatch(D.s.error("An error occurred while updating the instances of this component.")),(0,L.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,r)}}),e5=(0,F.fv)(),e8=(0,V.nF)(async(e,r)=>{let{components:n,usedItemsByKey:a,instanceIdsToUpdate:i,updateStartTime:u}=r,m=e.getState(),p=m.openFile;if(p)try{let r=await Promise.all(n.map(e=>Q.Eo.getCanvas(e))),o=new Set;await e2(e.dispatch,n,(e,n)=>{let h=r[n];d.l7.user("update-shared-symbol",()=>{l.BXd.updateSharedSymbol(e.component_key??s.ii.INVALID,e5(e),e.oldSubscribedKeysToUpdate,e.localIdsToUpdate,i.map(c.v.toString),h,u)}),(e.localIdsToUpdate.length||e.oldSubscribedKeysToUpdate.length)&&(0,el.GA)(m.library,p,e.localIdsToUpdate,e.oldSubscribedKeysToUpdate,a)&&o.add(e5(e))}),ea.Y5.triggerAction("commit");let h=n.map(e=>e.id);(0,q.ds)("Components Updated",p.key,e.getState(),{components:h,isShimFFEnabled:!0}),o.size&&t9(e,o)}catch(r){e.dispatch(D.s.error("An error occurred while updating the instances of this component.")),(0,L.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,r)}}),e4=(0,V.nF)((e,r)=>{let{style:n,inheritStyleKeyField:a,fromSearch:i,targetGuids:o}=r,s=e.getState(),c=(0,X.d1)(s),u=c&&!(0,J.N2)(n,c),m=s.openFile,p=(0,et.ZR)((0,et.cO)(n,u??!1),m),h=(0,en.X)(p);e.dispatch(e7({style:n,callback:(r,s)=>{if(s){e.dispatch(x.F.enqueue({type:"missing-font",message:(0,k.t)("design_systems.missing_font_cant_make_changes"),button:{text:(0,k.t)("design_systems.missing_font_learn_more"),action:()=>{I.Ay.unsafeRedirect("https://help.figma.com/hc/en-us/articles/360039956894-Add-a-font-to-Figma-design","_blank")}}}));return}o?d.l7.user("apply-style-to-nodes",()=>l.glU.applyStyleToNodes(a,r,!0,o)):d.l7.user("apply-style-to-selection",()=>{(0,eA.f)(l.VD3.STYLE_ATTACH,l.e0R.DIRECT,()=>{l.glU.applyStyleToSelection(a,r,!0)})}),(0,E.sx)("Style Applied",{styleType:n.style_type,isShared:!!u,viewMode:e.getState().stylePickerListLayout?"LIST":"GRID",fromSearch:!!i,nonInteraction:0,styleKey:n.key,consumedVariableIds:l.CWU.getConsumedVariableIDs(n.node_id),styleLibraryKey:p,consumingFileKey:m?.key,fileTeamId:m?.teamId,fileParentOrgId:m?.parentOrgId,partnerType:h,success:!0,appleEulaAccepted:!!e.getState().userFlags.apple_eula_accepted},{forwardToDatadog:!0})},errorCallback:()=>{(0,E.sx)("Style Applied Error",{partnerType:h},{forwardToDatadog:!0})}}))}),e9=(0,F.fv)(),e7=(0,V.nF)((e,r)=>{let n=e.getState(),{style:a}=r,i=(0,X.d1)(n);if(!i)return;let c=!(0,J.N2)(a,i),m="GRID"===a.style_type&&!l.Ez5.editorPreferences().showFrameGrids.getCopy();if(c){let n=async()=>{try{let n=await Q.Eo.getCanvas(a);r.bufferCallback?.(n);let i=d.l7.system("ensure-style-is-loaded",()=>l.BXd.getOrCreateSubscribedStyleNodeId(a.key,a.content_hash??s.IA.INVALID,e9(a),n));if(i?.fileUpdateRequired)return;r.omitFullscreenCommit||ea.Y5.triggerAction("commit"),m&&((0,ei.c6)(),l.Ez5.editorPreferences().showFrameGrids.set(!0));let o=!1;if("TEXT"===a.style_type&&i&&i.localGUID){let r=e.getState().mirror.sceneGraph.get(i.localGUID),n=r&&r.fontName;n&&await (0,u.VC)(n.family,n.style).catch(()=>{console.error(`Text style font did not load: ${n.family} ${n.style}`),o=!0})}r.callback?.(i.localGUID,o)}catch(n){e.dispatch(D.s.error("An error occurred while applying the style to the selection.")),(0,L.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,n),r.errorCallback?.()}};e.dispatch((0,eD.vQ)({assetResourceId:e9(a),onInsertAsset:n,source:eD.jE.LOAD_STYLE}))}else m&&((0,ei.c6)(),l.Ez5.editorPreferences().showFrameGrids.set(!0)),r.callback?.(a.node_id,!1),r.bufferCallback?.(void 0)}),te=(0,F.fv)(),tt=(0,V.nF)(async(e,r)=>{let{styles:n,updateStartTime:a}=r,i=e.getState().openFile;if(i)try{let r=await Promise.all(n.map(e=>Q.Eo.getCanvas(e))),o=new Set,c=e.getState();await e2(e.dispatch,n,(e,n)=>{let u=r[n];d.l7.user("update-shared-style",()=>{l.BXd.updateSharedStyle(e.key,te(e),e.content_hash??s.IA.INVALID,e.oldSubscribedKeysToUpdate,e.localIdsToUpdate,u,a)}),(0,el.GA)(c.library,i,e.localIdsToUpdate,e.oldSubscribedKeysToUpdate,c.library.used__LIVEGRAPH.styles)&&o.add(te(e))}),ea.Y5.triggerAction("commit");let u=n.map(e=>e.id);(0,q.ds)("Styles Updated",c.openFile?.key,e.getState(),{styles:u}),o.size&&t9(e,o)}catch(r){e.dispatch(D.s.error("An error occurred while updating this style.")),(0,L.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,r)}}),tr=(0,F.fv)(),tn=(0,V.nF)((e,r)=>{let n=l.BXd.getTimestampForLibraryUpdateStart(),{styleUpdateInfo:a,oldStyleGUID:i,consumerGUIDsToUpdate:s}=r,{updateAsset:c}=a;Q.Eo.getCanvas(c).then(r=>{let a=e.getState(),{content_hash:o}=c;if(!i)throw Error("guid to update can not be empty");if(!o)throw Error("content_hash not specified on style");let u=d.l7.user("update-selected-shared-style-consumers",()=>l.BXd.updateSelectedSharedStyleConsumers(c.key,tr(c),o,c.oldSubscribedKeysToUpdate,c.localIdsToUpdate,s,i,r,n));if(ea.Y5.triggerAction("commit"),!u)throw Error("unable to update");(0,q.ds)("Styles Updated",a.openFile?.key,e.getState(),{styles:[c.id]})}).catch(r=>{e.dispatch(D.s.error("An error occurred while updating this style.")),(0,L.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,r)})}),ta=(0,V.nF)(e=>{(0,el.KQ)(e)}),ti=(0,V.nF)((e,r)=>{let{variableSets:n,updateStartTime:a}=r;if(e.getState().openFile)return Promise.all(n.map(e=>Q.Eo.getCanvas(e))).then(r=>e2(e.dispatch,n,(e,n)=>{let i=r[n];d.l7.user("update-shared-variable-set",()=>{l.BXd.updateSharedVariableSet(e.node_id,(0,eI.GI)(e)?[]:e.libraryVariableIdsForUpdate,i,a)})})).then(()=>{ea.Y5.triggerAction("commit")}).catch(r=>{e.dispatch(D.s.error("An error occurred while updating this variable collection")),(0,L.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,r)})});async function to(e){let r=await Q.Eo.getCanvas(e);if(!d.l7.system("upsert-shared-variable",()=>l.BXd.upsertSharedVariable(e.node_id,l.zol.NO,r)).fileUpdateRequired)return{buffer:r}}let ts=(0,F.fv)(),tl=(0,V.nF)((e,r)=>{let{item:n,callback:a,bufferCallback:i,errorCallback:s}=r;if(!(0,X.d1)(e.getState())){s?.(Error("editing file not found"));return}if("LIBRARY"===n.subscriptionStatus){let r=async()=>{try{let e=await to(n);e&&(a?.(n.node_id),i?.(e.buffer))}catch(r){e.dispatch(D.s.error("An error occurred while retrieving the variable.")),(0,L.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,r),E.az.trackDefinedEvent("variables.variable_load.error",{partnerType:(0,en.X)(n.library_key)}),s?.(r)}};e.dispatch((0,eD.vQ)({assetResourceId:ts(n),onInsertAsset:r,source:eD.jE.LOAD_VARIABLE}))}else a?.(n.node_id)}),tc=(0,V.nF)((e,r)=>new Promise((n,a)=>{e.dispatch(tl({item:r,callback:n,errorCallback:a}))}));async function td(e){let r=await Q.Eo.getCanvas(e);if(!d.l7.system("upsert-shared-variable-set",()=>l.BXd.upsertSharedVariableSet(e.node_id,l.zol.NO,r)).fileUpdateRequired)return{buffer:r}}let tu=(0,F.fv)();(0,V.nF)((e,r)=>{let{item:n,callback:a,bufferCallback:i,errorCallback:s}=r;if((0,X.d1)(e.getState())){if("LIBRARY"===n.subscriptionStatus){let r=async()=>{try{let e=await td(n);e&&(a?.(n.node_id),i?.(e.buffer))}catch(r){e.dispatch(D.s.error("An error occurred while retrieving the variable collection.")),(0,L.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,r),s?.()}};e.dispatch((0,eD.vQ)({assetResourceId:tu(n),onInsertAsset:r,source:eD.jE.LOAD_VARIABLE_SET}))}else a?.(n.node_id)}});let tm=(0,V.nF)((e,r)=>{e.dispatch(W.yH({key:(0,eO.yD)(r.openFileKey)})),e.dispatch(W.yH({key:(0,el.iw)(r.openFileKey)}))}),tp=new Set,th=new Set;function t_(){tp=new Set,th=new Set}let tg=(0,V.nF)(async e=>{let r=e.getState();r.user&&(await eh.gi,tf((0,eg.OQ)(r),(0,eg.LL)(r),e))}),tf=async(e,r,n,a)=>{if(0===e.length&&0===r.length)return;let i=n.getState().openFile;if(!i)return;let o=(a=a??(0,el.lG)(n)).loadingKey;(0,eu.VP)(n.getState().loadingState,o)&&await a.promise,n.dispatch(W.Cx({key:o})),"whiteboard"===i.editorType&&await el.kw;let s=n.getState(),l=[];if(e.length>0){let r=new Set((0,el.kD)(s.library.published.components).map(e=>e.component_key).concat((0,el.kD)(s.library.defaultPublished.components).map(e=>e.component_key)).concat((0,el.kD)(s.library.defaultShapes.components).map(e=>e.component_key)));l=e.filter(e=>!r.has(e)&&!tp.has(e))}let c=[];if(r.length>0){let e=new Set((0,el.kD)(s.library.published.stateGroups).map(e=>e.key).concat((0,el.kD)(s.library.defaultPublished.stateGroups).map(e=>e.key)).concat((0,el.kD)(s.library.defaultShapes.stateGroups).map(e=>e.key)));c=r.filter(r=>!e.has(r)&&!th.has(r))}try{if(l.length>0||c.length>0){let e=await R.Ay.post("/api/design_systems/components_state_groups",{component_keys:l,state_group_keys:c,org_id:i.parentOrgId});l.forEach(e=>{tp.add(e)}),c.forEach(e=>{th.add(e)});let r=e.data.meta.components,a=e.data.meta.state_groups,o=e.data.meta.files;n.dispatch(G.uo({files:o,subscribeToRealtime:!0})),n.dispatch(H.dC({subscribedOldKeyToNewKey:e.data.meta.move_remappings,localOldGuidToNewKey:{}}));let s=n.getState().fileByKey,d=S.zl.get(ee.qp);ru(r,eI.PW.COMPONENT,s,d,n.dispatch),ru(a,eI.PW.STATE_GROUP,s,d,n.dispatch)}a.callbackForComponent?.(!0)}catch(e){a.callbackForComponent?.(!1)}a.resetPromise(),n.dispatch(W.yH({key:o})),a.callback()},tE=null,ty=null,tb=(0,F.fv)();async function tI(e,r,n){try{let a=await eS.Z.getLibraryComponentV2({componentKey:r,source:n}),i=a.data.meta.file;i&&e.dispatch(G.yJ({file:i}));let o=a.data.meta.component||null,s=a.data.meta.component_set||null,l=e.getState().fileByKey,c=S.zl.get(ee.qp);if(o&&(o.team_id=(0,v.kc)().ds_use_lib_keys?c[o.library_key]?.team_id:l[tb(o)]?.team_id),s&&(s.team_id=(0,v.kc)().ds_use_lib_keys?c[s.library_key]?.team_id:l[tb(s)]?.team_id),i){let r={};r[o.node_id]=o,a.data.meta.state_components.forEach(e=>{r[e.node_id]=e}),e.dispatch(rs({itemsById:r,fileKey:i.key,libraryKey:(0,p.l)(i.library_key),teamId:i.team_id,type:eI.PW.COMPONENT})),a.data.meta.component_set&&e.dispatch(rs({itemsById:{[a.data.meta.component_set.key]:a.data.meta.component_set},fileKey:i.key,libraryKey:(0,p.l)(i.library_key),teamId:i.team_id,type:eI.PW.STATE_GROUP})),o&&Q.Eo.getCanvas(o)}return{component:o,parentStateGroup:a.data.meta.component_set||null}}catch(e){if(e?.status===403){let e=Error("Permissions error for /api/design_systems/library/component_v2/key");(0,C.t)("component"),console.error(e)}return{component:null,parentStateGroup:null}}}let tT=(0,V.nF)((e,r)=>{tE=r.componentKey,ty=tI(e,r.componentKey,r.callsite)}),tv=null,tS=null,tw=(0,F.fv)();async function tA(e,r){try{let n=(await eS.Z.getLibraryStateGroup({stateGroupKey:r})).data.meta,a={[n.node_id]:n},i=S.zl.get(ee.qp),o=(0,v.kc)().ds_use_lib_keys?i[n.library_key]:e.getState().fileByKey[tw(n)];if(!o)return n;return n.team_id=o.team_id,e.dispatch(rs({itemsById:a,fileKey:o.key,libraryKey:(0,p.l)(o.library_key),teamId:o.team_id,type:eI.PW.STATE_GROUP})),Q.Eo.getCanvas(n),n}catch(e){if(e?.status===403){let e=Error("Permissions error for /api/design_systems/library/state_group/key");(0,C.t)("state"),console.error(e)}return null}}async function tN(e,r){try{let{style:n,file:a}=(await eS.Z.getLibraryStyleByKey({styleKey:r})).data.meta;return a&&e.dispatch(G.yJ({file:a})),Q.Eo.getCanvas(n),n}catch(e){if(e?.status===403){let e=Error("Permissions error for /api/design_systems/library/styles/key");(0,C.t)("style"),console.error(e)}return null}}let tC=(0,V.nF)((e,r)=>{tv=r.stateGroupKey,tS=tA(e,r.stateGroupKey)});async function tL(e){let{loadingState:r}=e.getState(),n=e.getState().openFile;if(null==n)return;let a=(0,el.Mb)(n.key);if(!(0,eu.Sc)(r,a))return;let i=eS.Z.getLibraryPublishedAndMovedComponents({openFileKey:n.key});(0,e_.N)(i,{dispatch:e.dispatch},a),el.Ys.add(a);try{let r=await i;e.dispatch(G.uo({files:r.data.meta.files,subscribeToRealtime:!0})),(0,el.WY)(n.key);let a=e.getState().fileByKey,o=S.zl.get(ee.qp);ru(r.data.meta.state_groups,eI.PW.STATE_GROUP,a,o,e.dispatch),ru(r.data.meta.components,eI.PW.COMPONENT,a,o,e.dispatch),e.dispatch(H.dC({subscribedOldKeyToNewKey:{},localOldGuidToNewKey:r.data.meta.move_remappings}))}catch(e){console.warn("Failed to get published and moved components for editing file")}(0,el._B)()}function tO(e,r,n=!1){let{loadingState:a}=e.getState();return n?rc(r,a,e.dispatch):rl(r,a,e.dispatch)}let tR=ed.M4.Query({fetch:async e=>(await ew.PT.getOrgMigrationStatus({orgId:e})).data.meta,enabled:e=>!!e}),tP=ed.M4.Query({fetch:async e=>await tD(b.D.dispatch,e),key:"libraryStats"}),tD=async(e,r)=>{let n=ew.PT.getLibraries({orgId:r,fv:eb.O}),a=function(e){return`LIBRARY${e?"_"+e:""}'_STATS'`}(r);(0,e_.N)(n,{dispatch:e},a);try{let r=await n,a=r&&r.data&&r.data.meta||[],i=0,o=0,s=0,l=0,c=0,d=0,u=0,m=0,p=[],h=[],_=new Set,g={};for(let e of a)(0!==e.num_components||0!==e.num_styles||0!==e.num_variable_collections||0!==e.num_variables||0!==e.num_module_assets)&&(e.team_id&&!_.has(e.team_id)&&(_.add(e.team_id),u++),p.push(e),h.push(e.file),e.thumbnail_url&&(g[e.library_key]=e.thumbnail_url),i+=e.num_components,s+=e.num_styles,l+=e.num_variable_collections,c+=e.num_variables,e.num_state_groups=0,o+=e.num_state_groups,d+=e.num_module_assets,m++);return h.length>0&&e(G.uo({files:h,subscribeToRealtime:!1})),{totalComponents:i,totalStateGroups:o,totalStyles:s,totalVariableCollections:l,totalVariables:c,totalModuleAssets:d,teamsWithLibraries:u,totalLibraries:m,files:p,libraryThumbnailByLibraryKey:g}}catch(e){return eI.wg}},tk=ed.M4.Query({fetch:e=>tF(e),key:"libraryInfo"});function tM(e,r={}){let n=(0,ed.IT)(tk(e),r),a=(0,i.wA)(),[o]=n;return(0,N.DC)(o,e=>{let r=e.files.map(e=>e.file);r.length>0&&a(G.uo({files:r,subscribeToRealtime:!1}))}),n}let tF=(0,eR.D)(async({currentOrgId:e,excludeDrafts:r,subscriptionFileKey:n,includeThumbnails:a})=>{let i=eS.Z.getLibraries({orgId:e,subscriptionFileKey:n||void 0,includeThumbnails:a});try{let e=await i,n=e&&e.data&&e.data.meta||[],o=0,s=0,l=0,c=0,d=0,u=0,m=0,p=0,h=[],_=[],g=new Set,f={};for(let e of n)e.num_state_groups=0,(0!==e.num_components||0!==e.num_styles||0!==e.num_variable_collections||0!==e.num_variables||0!==e.num_module_assets)&&(!r||e.team_id)&&(e.team_id&&!g.has(e.team_id)&&(g.add(e.team_id),m++),h.push(a?{...e,thumbnail_url:e.file.thumbnail_url}:e),_.push(e.file),e.thumbnail_url&&(f[e.library_key]=e.thumbnail_url),o+=e.num_components,l+=e.num_styles,c+=e.num_variable_collections,d+=e.num_variables,s+=e.num_state_groups,u+=e.num_module_assets,p++);return{totalComponents:o,totalStateGroups:s,totalStyles:l,totalVariableCollections:c,totalVariables:d,totalModuleAssets:u,teamsWithLibraries:m,totalLibraries:p,files:h,libraryThumbnailByLibraryKey:f}}catch(e){return{...eI.wg}}});function tU(e){let r=e.communityLibrary?.hubFileId,n=e.library?.fileKey;return r??n}function tB(e){return!!e.communityLibrary?.hubFileId}function tV(e,r){let n=r?.ignoreCommunitySubs??!1,a={};for(let r of e)tB(r)&&n||(a[tU(r)]={design:!!r.isSubscribed,figjam:!!r.figJamSubscribed,slides:!!r.slidesSubscribed});return a}function tG(e,r,n){if(!r||!n)return;let a=g()(r,tU);for(let r of n){let n=tU(r),i=a[n];i&&i.isSubscribed===r.isSubscribed&&i.figJamSubscribed===r.figJamSubscribed&&i.slidesSubscribed===r.slidesSubscribed||tQ(e,n,{design:!!r.isSubscribed,figjam:!!r.figJamSubscribed,slides:!!r.slidesSubscribed},tB(r))}}function tH(e,r,n){tG(e,r?.map(tW),n?.map(tW))}let tW=e=>({...e}),tK=function(){let e=(0,i.wA)(),r=(0,i.Pj)(),n=(0,z.Ck)(),o=(0,el.LH)(),s=(0,ef.ol)(),{data:l}=(0,A.Rs)(ec.Lew,{});(0,a.useEffect)(()=>{let r=l?.currentUser?.libraryUserSubscriptions;r&&e(tq({subscriptions:tV(r.map(tW),{ignoreCommunitySubs:!n()})}))},[n,l,e]);let c=(0,T.ZC)(l);(0,a.useEffect)(()=>{if(!c||!l)return;let e=l?.currentUser?.libraryUserSubscriptions;tH(r,c?.currentUser?.libraryUserSubscriptions,e)},[r,l,c]);let d=(0,er.M)(),{data:u}=(0,A.Rs)(ec.fy7,{group:d},{enabled:null!=d}),m=(0,a.useMemo)(()=>{if(!u||!u.libraryPresetSubscriptionsV2)return;let e=!!s&&(0,em.w5)(s);return o||e?[]:u.libraryPresetSubscriptionsV2},[o,s,u]);(0,a.useEffect)(()=>{if(!m)return;let r={};for(let e of m)r[e.hubFileId]={design:!0,figjam:!1,slides:!1};e(tJ({subscriptions:r}))},[m,e]);let p=(0,T.ZC)(m);(0,a.useEffect)(()=>{if(!m||!p)return;let e=e=>({communityLibrary:{hubFileId:e.hubFileId},library:null,isSubscribed:!0}),n=m.map(e);tG(r,p.map(e),n)},[r,m,p]);let{data:h}=(0,A.Rs)(ec.AXx,{orgId:o},{enabled:!!o});(0,a.useEffect)(()=>{let r=h?.orgLibrarySubscriptions;r&&e(tX({subscriptions:tV(r.map(tW),{ignoreCommunitySubs:!n()})}))},[n,h,e]);let _=(0,T.ZC)(h);(0,a.useEffect)(()=>{if(!_||!h)return;let e=h?.orgLibrarySubscriptions;tH(r,_?.orgLibrarySubscriptions,e)},[r,h,_]);let g=(0,ef.cD)(),f=(0,A.Rs)(ec.f19,{}),{data:E}=(0,a.useMemo)(()=>f.transform(e=>{let r=(e.allTeamRoles||[]).filter(e=>e.team&&!e.team.deletedAt&&(e.team.orgId===o||e.team.id===g)).map(e=>e.team),a={};for(let e of r){let r=e.libraryTeamSubscriptionOverrides.map(tW).filter(e=>n()||!tB(e));a[e.id]=r}return a}),[n,o,g,f]);(0,a.useEffect)(()=>{if(!E)return;let r={};for(let[e,a]of Object.entries(E)){let i=tV(a,{ignoreCommunitySubs:!n()});r[e]=i}e(tj({fileSubscriptionsByTeamId:r}))},[n,E,e]);let y=(0,T.ZC)(E);(0,a.useEffect)(()=>{y&&E&&tG(r,Object.values(y).flat(),Object.values(E).flat())},[r,E,y])},tY=(0,V.nF)(async e=>{if(await eE.kb.promise,!e.getState().user)return;let r=Promise.resolve(null),n=Promise.resolve(null),a=Promise.resolve(null);try{await Promise.all([r,a,n])}catch(e){}});async function t$(e){if(!e)return 0;try{return(await ew.PT.getNumTeams({orgId:e})).data.meta.num_teams}catch(e){}return 0}let tj=(0,f.N)("LIBRARY_SUBSCRIPTIONS_INITIALIZE_TEAM"),tz=(0,f.N)("LIBRARY_SUBSCRIPTIONS_INITIALIZE_FILE"),tq=(0,f.N)("LIBRARY_SUBSCRIPTIONS_INITIALIZE_USER"),tX=(0,f.N)("LIBRARY_SUBSCRIPTIONS_INITIALIZE_ORG"),tJ=(0,f.N)("LIBRARY_SUBSCRIPTIONS_INITIALIZE_PRESET"),tZ=(0,f.N)("ADD_ASSET_TO_RECENTS"),tQ=(0,eR.D)((e,r,n,a=!1)=>{if(!n||(0,el.e8)(e.getState().library,r))return;let i=(0,X.d1)(e.getState());if(i){let o=i.editor_type??"design";(!0===n||"design"===o&&n.design||"whiteboard"===o&&n.figjam)&&(e.getState().leftPanel.activeTab===l.xae.ASSETS||e.getState().universalInsertModal.showing?tO(e,r,a):e.dispatch(W.yH({key:(0,eO.yD)(i.key)})))}}),t0=(0,f.N)("LIBRARY_SUBSCRIPTION_POST_ORG"),t1=(0,V.nF)((e,r)=>{let{optimistId:n}=e.optimisticDispatch(t0(r)),{libraryOrgSubscription:a,libraryTeamId:i,userInitiated:s}=r,{isCommunityLibrary:l,orgId:c,resourceId:d,subscriptions:u}=a;if(tQ(e,d,u,l),s){if(r.currentSubscription){let e=a.subscriptions.design;!(r.currentSubscription?.design||r.currentSubscription?.figjam)&&e?(0,E.sx)("Team Library File Enabled",{orgId:c,fileKey:d,fileTeamId:i}):(0,E.sx)("Org Library File Disabled",{orgId:c,fileKey:d,fileTeamId:i}),E.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle",{designSubscribed:a.subscriptions.design,figjamSubscribed:a.subscriptions.figjam,slidesSubscribed:a.subscriptions.slides,subscriptionType:"org",libraryType:l?"community":"file"})}R.Ay.post(`/api/library_org_subscriptions/${d}`,{subscriptions:u,is_community_library:l,org_id:c}).then(()=>{e.dispatch(Y.c(n)),e.dispatch(x.F.enqueue({message:(0,k.t)("design_systems.subscriptions.settings_updated_for",{libraryName:r.libraryName,orgOrWorkspaceName:r.orgName})})),E.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:a.subscriptions.design,figjamSubscribed:a.subscriptions.figjam,slidesSubscribed:a.subscriptions.slides,subscriptionType:"org",libraryType:l?"community":"file",outcome:"success"})}).catch(r=>{e.dispatch(Y.r(n)),e.dispatch(x.F.enqueue({message:(0,k.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0})),E.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:a.subscriptions.design,figjamSubscribed:a.subscriptions.figjam,slidesSubscribed:a.subscriptions.slides,subscriptionType:"org",libraryType:l?"community":"file",outcome:"error"}),(0,L.$D)(o.FigmaTeam.DESIGN_SYSTEMS_ECOSYSTEM,r,{tags:{fileKey:d,designSubscribed:u.design,figjamSubscribed:u.figjam,slidesSubscribed:u.slides,isCommunityLibrary:l}})})}});(0,V.nF)(async(e,r)=>{let{libraryWorkspaceSubscription:n,libraryName:a,workspaceName:i}=r,{isCommunityLibrary:o,resourceId:s,subscriptions:l,workspaceId:c}=n,d=R.Ay.post(`/api/library_workspace_subscriptions/${s}`,{subscriptions:l,workspace_id:c,is_community_library:o});n.id?(0,w.WB)().optimisticallyUpdate({LibraryWorkspaceSubscription:{[n.id]:{isSubscribed:l.design,figJamSubscribed:l.figjam,slidesSubscribed:l.slides}}},d):(0,w.WB)().optimisticallyCreate({LibraryWorkspaceSubscription:{[`library-workspace-sub-${performance.now()}`]:{fileKey:s,workspaceId:c,libraryKey:null,isSubscribed:l.design,figJamSubscribed:l.figjam,slidesSubscribed:l.slides,canRead:!0,hubFileId:o?s:null}}},d);try{await d,e.dispatch(x.F.enqueue({message:(0,k.t)("design_systems.subscriptions.settings_updated_for",{libraryName:a,orgOrWorkspaceName:i})}))}catch(r){e.dispatch(x.F.enqueue({message:r?.message??(0,k.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0}))}}),(0,V.nF)(async(e,r)=>{let{libraryWorkspaceSubscription:n,libraryName:a,workspaceName:i}=r,{isCommunityLibrary:o,resourceId:s,workspaceId:l}=n,c=R.Ay.del(`/api/library_workspace_subscriptions/${s}`,{workspace_id:l,is_community_library:o});n.id&&(0,w.WB)().optimisticallyDelete({LibraryWorkspaceSubscription:{[n.id]:null}},c);try{await c,e.dispatch(x.F.enqueue({message:(0,k.t)("design_systems.subscriptions.settings_updated_for",{libraryName:a,orgOrWorkspaceName:i})}))}catch(r){e.dispatch(x.F.enqueue({message:r?.message??(0,k.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0}))}});let t2=(0,f.N)("LIBRARY_SUBSCRIPTION_POST_TEAM"),t3=(0,V.nF)((e,r)=>{let{optimistId:n}=e.optimisticDispatch(t2(r)),{libraryTeamSubscription:a,userInitiated:i,isCommunityLibrary:s}=r,{file_key:l,subscriptions:c,team_id:d}=a;tQ(e,l,c,s),i&&(s?ev.f.createCommunityLibraryTeamSubscription({libraryHubFileId:l,subscriptions:c,teamId:d}):R.Ay.post(`/api/library_team_subscriptions/${l}`,{subscriptions:c,team_id:d})).then(()=>{e.dispatch(Y.c(n)),E.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:c.design,figjamSubscribed:c.figjam,slidesSubscribed:c.slides,subscriptionType:"team",libraryType:s?"community":"file",outcome:"success"})}).catch(r=>{e.dispatch(Y.r(n)),e.dispatch(x.F.enqueue({message:(0,k.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0})),E.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:c.design,figjamSubscribed:c.figjam,slidesSubscribed:c.slides,subscriptionType:"team",libraryType:s?"community":"file",outcome:"error"}),(0,L.$D)(o.FigmaTeam.DESIGN_SYSTEMS_ECOSYSTEM,r,{tags:{fileKey:l,designSubscribed:c.design,figjamSubscribed:c.figjam,slidesSubscribed:c.slides,isCommunityLibrary:s}})})}),t6=(0,f.N)("LIBRARY_SUBSCRIPTION_POST_USER"),t5=(0,V.nF)((e,r)=>{let{optimistId:n}=e.optimisticDispatch(t6(r)),{libraryUserSubscription:a,isCommunityLibrary:i,userInitiated:s}=r,{file_key:l,subscriptions:c}=a;tQ(e,l,c),s&&R.Ay.post(`/api/library_user_subscriptions/${l}`,{subscriptions:c,is_community_library:i}).then(()=>{e.dispatch(Y.c(n)),E.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:c.design,figjamSubscribed:c.figjam,slidesSubscribed:c.slides,subscriptionType:"user",libraryType:i?"community":"file",outcome:"success"})}).catch(r=>{e.dispatch(Y.r(n)),e.dispatch(x.F.enqueue({message:(0,k.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0})),E.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:c.design,figjamSubscribed:c.figjam,slidesSubscribed:c.slides,subscriptionType:"user",libraryType:i?"community":"file",outcome:"error"}),(0,L.$D)(o.FigmaTeam.DESIGN_SYSTEMS_ECOSYSTEM,r,{tags:{fileKey:l,designSubscribed:c.design,figjamSubscribed:c.figjam,slidesSubscribed:c.slides,isCommunityLibrary:i}})})}),t8=(0,f.N)("LIBRARY_SUBSCRIPTION_POST_FILE"),t4=(0,V.nF)((e,r)=>{let{libraryFileSubscription:n,userInitiated:a,isCommunityLibrary:i,publishedLibrary:s}=r,{file_key:l,library_file_key:c,is_subscribed:d,id:u,library_key:m}=n,p=e.getState().openFile?.key||null;p===l&&tQ(e,c,d,i);let h=e.getState().library.subscriptions.byFile[l];if((!h||!(c in h)||h[c]!==d)&&a){let{optimistId:n}=e.optimisticDispatch(t8(r)),a=i?ev.f.createCommunityLibraryFileSubscription({fileKey:l,libraryHubFileId:c,isSubscribed:d}):R.Ay.post(`/api/library_file_subscriptions/${l}/${c}`,{is_subscribed:d});u?w.WB()?.optimisticallyUpdate({LibraryFileSubscription:{[u]:{isSubscribed:d}}},a):d&&s&&w.WB()?.optimisticallyCreate({LibraryFileSubscription:{[`optimistic-id-${c}`]:{isSubscribed:d,fileKey:l,hubFileId:i?c:null,libraryKey:m??null,libraryFileKey:c,canRead:!0,library:{updatedAt:new Date,createdAt:new Date,numComponents:s.num_components,numStateGroups:s.num_state_groups??0,numStyles:s.num_styles,numStylesFill:0,numStylesText:0,numStylesEffect:0,numStylesGrid:0,numVariables:s.num_variables,numVariablesBoolean:0,numVariablesColor:0,numVariablesFloat:0,numVariablesString:0,numLibraryAssets:0,numVariableSets:s.num_variable_collections,numModuleAssets:s.num_module_assets,fileKey:c,file:{_id:`optimistic-id-${c}`,_name:null,key:c,name:s.library_name,libraryKey:s.library_key,signedThumbnailUrl:s.thumbnail_url,signedThumbnailUrlOverride:null,thumbnailUrl:s.thumbnail_url,thumbnailUrlOverride:null,parentOrgId:null,thumbnailGuid:eI.Nf(s)?s.thumbnail_guid:null},hubFileId:i?c:null,canRead:!0},communityLibrary:null}}},a),a.then(()=>{e.dispatch(Y.c(n)),i&&E.az.trackDefinedEvent("library_preferences_modal.community_library_file_subscription_toggle.outcome",{isSubscribed:d,fileKey:l,libraryFileKey:c,outcome:"success"})}).catch(r=>{e.dispatch(Y.r(n)),e.dispatch(x.F.enqueue({message:(0,k.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0})),E.az.trackDefinedEvent("library_preferences_modal.community_library_file_subscription_toggle.outcome",{isSubscribed:d,fileKey:l,libraryFileKey:c,outcome:"error"}),(0,L.$D)(o.FigmaTeam.DESIGN_SYSTEMS_ECOSYSTEM,r,{tags:{openFileKey:p,fileKey:l,libraryFileKey:c,isSubscribed:d,isCommunityLibrary:i}})})}}),t9=(e,r)=>{let n=e.getState(),a=n.openFile?.key||null;a&&r.forEach(r=>{r!==a&&e.dispatch(t4({libraryFileSubscription:{file_key:a,library_file_key:r,is_subscribed:!0},userInitiated:!0}))})},t7="LIBRARY_REMAPPING_PROGRESS_VISUAL_BELL",re=null,rt=(0,V.nF)((e,r)=>{re={done:0,total:r.total},e.dispatch(x.F.enqueue({message:(0,k.t)("design_systems.subscriptions.remap_connecting_fraction",{current:0,total:r.total}),type:t7,icon:U.zX.SPINNER,timeoutOverride:1/0}))}),rr=(0,V.nF)((e,r)=>{re&&(re.done+=r.done,e.dispatch(x.F.enqueue({message:(0,k.t)("design_systems.subscriptions.remap_connecting_fraction",{current:re.done,total:re.total}),type:t7,icon:U.zX.SPINNER,timeoutOverride:1/0})))}),rn=(0,V.nF)(e=>{re=null,e.dispatch(x.F.dequeue({matchType:t7})),e.dispatch(x.F.enqueue({message:(0,k.t)("design_systems.subscriptions.remap_connected"),type:t7,icon:U.zX.CHECK}))}),ra=(0,V.nF)(e=>{re=null,e.dispatch(x.F.enqueue({message:(0,k.t)("design_systems.subscriptions.remap_connection_failed"),type:t7,error:!0}))}),ri=(0,V.nF)(e=>{e.getState().userFlags.has_inserted_component||e.dispatch(j.b({has_inserted_component:!0}))}),ro=(0,V.nF)(e=>{e.getState().userFlags.has_opened_libraries_modal||e.dispatch(j.b({has_opened_libraries_modal:!0}))}),rs=(0,V.nF)((e,r)=>{e.dispatch(H.$I(r)),e.getState().openFile&&e.dispatch(ta())});async function rl(e,r,n,a={}){let i=(0,el.Mb)(e);if(!(0,eu.Sc)(r,i))return;let o=eS.Z.getLibraryPublishedComponents({key:e,includeThumbnail:a.includeThumbnail,includeRealtime:a.subscribeToRealtime});(0,e_.N)(o,{dispatch:n},i),el.Ys.add(i);try{let e=await o,r=e?.data?.meta?.components||[],i=e?.data?.meta?.state_groups||[],s=e?.data?.meta?.file;if(n(G.uo({files:[s],subscribeToRealtime:a.subscribeToRealtime})),r=r.map(e=>({...e,team_id:s.team_id})),i=i.map(e=>({...e,team_id:s.team_id})),0!==i.length){let e=i.reduce((e,r)=>(e[r.node_id]=r,e),{});n(rs({itemsById:e,fileKey:s.key,libraryKey:(0,p.l)(s.library_key),teamId:s.team_id,type:eI.PW.STATE_GROUP}))}if(0!==r.length){let e=r.reduce((e,r)=>(e[r.node_id]=r,e),{});n(rs({itemsById:e,fileKey:s.key,libraryKey:(0,p.l)(s.library_key),teamId:s.team_id,type:eI.PW.COMPONENT}))}(0,el.WY)(s.key)}catch(r){console.warn(`Failed to get published components from file ${e}`)}}async function rc(e,r,n){let a=(0,el.Mb)(e);if(!(0,eu.Sc)(r,a))return;let i=eS.Z.getCommunityLibraryPublishedComponents({hubFileId:e});(0,e_.N)(i,{dispatch:n},a),el.Ys.add(a);try{let r=await i,a=r?.data?.meta?.components||[],o=r?.data?.meta?.state_groups||[],s=r?.data?.meta?.hub_file;if(s&&n((0,B.D3)([s])),0!==o.length){let e=o.reduce((e,r)=>(e[r.node_id]=r,e),{});n(rs({itemsById:e,fileKey:s.id,libraryKey:(0,M.$)(s.id),teamId:null,type:eI.PW.STATE_GROUP}))}if(0!==a.length){let r=a.reduce((e,r)=>(e[r.node_id]=r,e),{});n(rs({itemsById:r,fileKey:e,libraryKey:(0,M.$)(e),teamId:null,type:eI.PW.COMPONENT}))}(0,el.WY)(e)}catch(r){console.warn(`Failed to get published components from Community Library ${e}`)}}let rd=(0,F.fv)();function ru(e,r,n,a,i){let o=(e=e.map(e=>({...e,team_id:(0,v.kc)().ds_use_lib_keys?a[e.library_key].team_id:n[rd(e)].team_id}))).reduce((e,r)=>(rd(r) in e?e[rd(r)].push(r):e[rd(r)]=[r],e),{}),s=new Map;for(let r of e){let e=r.library_key;s.has(e)?s.get(e).push(r):s.set(e,[r])}if((0,v.kc)().ds_use_lib_keys)for(let[e,n]of s.entries())i(rs({itemsById:n.reduce((e,r)=>(e[r.node_id]=r,e),{}),fileKey:rd(n[0]),libraryKey:e,teamId:a[e].team_id,type:r}));else for(let[e,a]of Object.entries(o))i(rs({itemsById:a.reduce((e,r)=>(e[r.node_id]=r,e),{}),fileKey:e,libraryKey:a[0].library_key,teamId:n[e].team_id,type:r}))}},452246:(e,r,n)=>{n.d(r,{Fw:()=>S,GT:()=>P,T1:()=>O,rb:()=>R,sA:()=>T,t9:()=>v,us:()=>C,xp:()=>L});var a=n(67151),i=n(432258),o=n(681067),s=n(414507),l=n(388393),c=n(299321),d=n(66562),u=n(167249),m=n(776250),p=n(776621),h=n(877432),_=n(154483),g=n(980820),f=n(395281),E=n(44892),y=n(15859),b=n(666068),I=n(173454);function T(e,r){return`/variable_set/${e}/thumbnails?ver=${r}`}function v(e,r,n,a,i){let o=r[e];if(!o||!o.variableThumbnails)return null;let s=o.variableThumbnails[n]??null;for(;s?.type===c.Z_n.ALIAS;){let e=i[s.variableCollectionKey];if(e&&s.values&&s.values[e]){s=s.values[e];continue}e&&"MIXED"!==e&&(0,m.sx)("Fallback to default variable thumbnail",{variableId:n,variableType:a,mode:e});let r=s.defaultMode;if(!r||!s.values||!s.values[r])return null;s=s.values[r]}return s}let S=(0,g.nF)((e,r)=>{let{variableSet:n,variableId:a,variableType:i,modeContext:o,callback:s}=r,l=d.sH(n.node_id);if(!l){console.error(`Invalid variableId in loading thumbnails: ${n.id}`);return}w(n).then(e=>{let r=v(d.dI(l),e.thumbnails,a,i,o);s?.(r)}).catch(e=>{console.error(`Variable thumbnail did not load: ${a}`),console.error(e)})}),w=async e=>({thumbnails:await E.Eo.getVariableSetThumbnails(T(e.key,e.checkpoint_id))}),A=(0,_.fv)();function N(e,r){let n=e.style_type,a=e.meta?e.meta.style_thumbnail:null;if((0,b.Kb)(n)&&(!r||r.content_hash!==e.content_hash||!a))try{a=(0,E.oU)(e.style_type,e.node_id)}catch(r){(0,p.x1)("thumbnails","error generating local style css thumbnail",{name:e.name,type:e.style_type,libraryKey:e.library_key,file_key:A(e),key:e.key}),(0,p.$D)(s.FigmaTeam.DESIGN_SYSTEMS_EDITOR,r)}if(a&&((0,b.lP)(e.style_type)||(0,E.UE)(a)))return{contentHash:e.content_hash,nodeId:e.node_id,styleThumbnail:a,type:I.PW.STYLE,url:void 0};if(!r||r.content_hash!==e.content_hash||!r.url||r.url===E.u0||r.url===E.r8){let r=D.acquire(e.node_id,e.content_hash);return r?("FILL"!==e.style_type?Promise.resolve():(0,h.i$)((0,y.Jr)().loadAllImagesUnder([e.node_id],c.MoD.NON_ANIMATED_ONLY,"style-thumbnail"),()=>{(0,p.x1)("thumbnails","image manager failed to load",{name:e.name,key:e.key,libraryKey:e.library_key,fileKey:A(e)})},1e4)).then(()=>scheduler.postTask(()=>(0,E.aV)(e.node_id,e.style_type),r).catch(r=>("AbortError"!==r.name&&((0,p.x1)("thumbnails","error generating local style url thumbnail",{name:e.name,type:e.style_type,libraryKey:e.library_key,file_key:A(e),key:e.key}),(0,p.$D)(s.FigmaTeam.DESIGN_SYSTEMS_EDITOR,r)),E.r8)).then(r=>({contentHash:e.content_hash,nodeId:e.node_id,styleThumbnail:a,type:I.PW.STYLE,url:r}))):null}return null}let C=(0,u.N)("LIBRARY_ADD_THUMBNAIL_FOR_DANGLING_STYLE"),L=(0,u.N)("LIBRARY_THUMBNAIL_REPLACE_LOCAL_THUMBNAILS"),O=(0,g.nF)((e,r)=>{let n=e.getState(),i=n.library.local.thumbnails,o=n.library.local.components,s=n.library.local.stateGroups,l=n.library.local.styles,c=n.library.local.modules,d=null,u=null;for(let{nodeId:e,url:n,contentHash:m,styleThumbnail:p,type:h}of r.thumbnails){let _;if(h===I.PW.COMPONENT)_=o;else if(h===I.PW.STATE_GROUP)_=s;else if(h===I.PW.STYLE)_=l;else{if(h===I.PW.VARIABLE||h===I.PW.VARIABLE_SET||h===I.PW.VARIABLE_OVERRIDE||h===I.PW.RESPONSIVE_SET||h===I.PW.CONSTRAINED_TEMPLATE||h===I.PW.CODE_LIBRARY||h===I.PW.CODE_FILE||h===I.PW.CODE_COMPONENT)continue;h===I.PW.MODULE?_=c:(0,a.xb)(h)}if(r.source===I.$1.LOCAL&&!(e in _))continue;let g=i[e]&&i[e].url;g&&n&&(0,E.qv)(g);let f=r.source===I.$1.LOCAL?_[e]:r.item,y=(()=>{if(null!=m)return m;if(f)switch(f.type){case I.PW.COMPONENT:case I.PW.STYLE:return f.content_hash;case I.PW.STATE_GROUP:case I.PW.VARIABLE:case I.PW.VARIABLE_SET:case I.PW.MODULE:case I.PW.RESPONSIVE_SET:case I.PW.CODE_COMPONENT:return f.version;default:(0,a.xb)(f,"Unhandled item type")}})(),b=(d||i)[e];if(b&&b.url===n&&b.content_hash===y||(d||(d={...i}),d[e]={kind:r.source===I.$1.LOCAL?I.AT.LOCAL:I.AT.LIBRARY,url:n,content_hash:y}),h===I.PW.STYLE&&r.source===I.$1.LOCAL){let r=(u||l)[e];r&&(!r.meta||r.meta.style_thumbnail!==p)&&(u||(u={...l}),u[e]={...r,meta:{...r.meta,style_thumbnail:p}})}}d&&e.dispatch(L({thumbnails:d})),u&&r.source===I.$1.LOCAL&&e.dispatch(f.I0({local:u,type:I.PW.STYLE}))}),R=(0,g.nF)(async(e,r)=>{if(r.styleKind===I.AT.LOCAL){let n=e.getState().library.local.styles[r.styleNodeId],a=e.getState().library.local.thumbnails[r.styleNodeId];if(n){let r;let i=N(n,a);i instanceof Promise?(r=await i,D.release(r.nodeId,r.contentHash)):i&&(r=i),r&&e.dispatch(O({thumbnails:[r],source:I.$1.LOCAL}))}}else if(r.styleKind===I.AT.DANGLING){if(e.getState().library.local.thumbnails[r.styleNodeId])return;let n=(0,E.aV)(r.styleNodeId,"FILL");e.dispatch(C({styleID:r.styleNodeId,url:n}))}}),P=(0,g.nF)(async(e,r)=>{let n=e.getState().library.local.styles,a=e.getState().library.local.thumbnails,s=r.styleType,l=[],c=[];for(let e in n){let r=n[e];if(r.style_type!==s)continue;let i=N(r,a[e]);i instanceof Promise?c.push(i):null!=i&&l.push(i)}if(l.length>0&&e.dispatch(O({thumbnails:l,source:I.$1.LOCAL})),c.length>0)for(let r=0;r<c.length;r+=50){let n=(await (0,o._7)(c.slice(r,r+50))).map(e=>e.resolve).filter(i.Vq);for(let e of n)D.release(e.nodeId,e.contentHash);e.dispatch(O({thumbnails:n,source:I.$1.LOCAL}))}}),D=(()=>{let e=new Map;return{acquire(r,n=l.IA.INVALID){let a=e.get(r);if(a?.contentHash===n)return null;a&&a.controller.abort();let i=new TaskController({priority:"user-visible"});return e.set(r,{controller:i,contentHash:n}),i.signal},release(r,n=l.IA.INVALID){let a=e.get(r);a?.contentHash===n&&e.delete(r)}}})()},876401:(e,r,n)=>{n.d(r,{De:()=>K,Sb:()=>G,TS:()=>Y,WM:()=>W,ZS:()=>Z,df:()=>H,sb:()=>z});var a=n(67151),i=n(432258),o=n(414507),s=n(299321),l=n(636149),c=n.n(l),d=n(167249),u=n(776250),m=n(966712),p=n(742808),h=n(717037),_=n(776621),g=n(47506),f=n(939863),E=n(265746),y=n(696808),b=n(934533),I=n(980820),T=n(395281),v=n(632430),S=n(662275),w=n(931828),A=n(974105),N=n(151283),C=n(599280),L=n(642481),O=n(416095),R=n(962155),P=n(973131),D=n(284321),k=n(984968),M=n(998612),F=n(173454),x=n(656012),U=n(776047),B=n(114721),V=n(765431);let G=(0,d.N)("START_PUBLISH"),H=(0,d.N)("PUBLISH_PROGRESS"),W=(0,d.N)("PUBLISH_REQUEST_FINISHED"),K=(0,d.N)("SAVE_PUBLISH_DESCRIPTION"),Y=(0,I.nF)(e=>{e.dispatch(y.Q.dequeue({type:E._.MOVE_COMPONENTS_PROMPT})),(0,g.YQ)({id:"Finished publishing components"}),e.dispatch(W())}),$="library publish SSP";var j=(e=>(e.PublishStart="publish_start",e.CreateSavepoint="create_savepoint",e.GetPresignedPost="get_presigned_post",e.UploadThumbnails="upload_thumbnails",e.UploadParams="upload_params",e.AssetValidation="asset_validation",e.NonS3Error="non_s3_error",e.GenericError="generic_error",e))(j||{});let z=(0,I.nF)((e,{hubFileId:r})=>{let n=e.getState(),a=(0,m.kc)().ds_remove_redux_library_status;if(!a){let r=e=>{for(let r in e={...e})(0,O.HF)(e[r].status)?e[r].status=F.E8.DELETED:e[r].status===F.E8.NEW&&(e[r].status=F.E8.NOT_STAGED);return e},a=r(n.library.local.components),i=r(n.library.local.stateGroups),o=r(n.library.local.styles);e.dispatch(T.I0({local:a,type:F.PW.COMPONENT})),e.dispatch(T.I0({local:i,type:F.PW.STATE_GROUP})),e.dispatch(T.I0({local:o,type:F.PW.STYLE}))}e.dispatch(H({state:F.Qx.NONE})),e.dispatch(Z({unpublishAll:a,hubFileId:r}))});async function q(e,r,n,a){let i=performance.now();if(!e.length)return{s3Paths:[],failedThumbnailNodeIds:[],styleMetaByNodeId:{},uploadDurationMs:0,encounteredNonS3PresignedPostError:!1};let s=e.length,l=0,c=()=>{!function(e,r,n){e.dispatch(H({state:F.Qx.ASSEMBLING_COMPONENTS,progress:r,publishType:n,publishStartMs:X(e.getState().library.publishProgress)}))}(a,(l+=1)/s,r?F.M$.UNPUBLISH:F.M$.PUBLISH)},d=Object.create(null),m=[],g=[];if(await Promise.all(e.map(async e=>{try{let r=await scheduler.postTask(()=>(0,B.I6)(e,n),{priority:"user-blocking"});if(!r||0===r.length)throw Error("Unable to generate thumbnail");let[a,i]=e.node_id.split(":").map(e=>Number(e));if(isNaN(a))throw Error("Unable to parse sessionId");if(isNaN(i))throw Error("Unable to parse localId");g.push({sessionId:a,localId:i,thumbnail:r}),e.type===F.PW.STYLE&&(d[e.node_id]=JSON.stringify((0,B.fn)(e,n)))}catch(r){(0,_.x1)("publish","Failed to upload thumbnail for asset",{guid:e.node_id},{reportAsSentryError:!0}),m.push(e.type===F.PW.COMPONENT&&e.containing_frame?.containingStateGroup?.nodeId||e.node_id)}finally{c()}})),0===g.length)return{s3Paths:[],failedThumbnailNodeIds:m,styleMetaByNodeId:{},uploadDurationMs:0,encounteredNonS3PresignedPostError:!1};let f=[];for(;g.length;)f.push(g.splice(0,F.v$));let E=U.b.getThumbnailsBufferPresignedPostUrl(f.length),y=f.map(e=>e.reduce(({buffer:e,offset:r,guids:n},{sessionId:a,localId:i,thumbnail:o})=>(e.set([(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a,(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i,(4278190080&o.byteLength)>>24,(16711680&o.byteLength)>>16,(65280&o.byteLength)>>8,255&o.byteLength],r),r+=12,e.set(o,r),r+=o.byteLength,n.push(`${a}:${i}`),{buffer:e,offset:r,guids:n}),{buffer:new Uint8Array(e.reduce((e,{thumbnail:r})=>e+r.byteLength+12,0)),offset:0,guids:[]})),b=[],I=(await E).data.meta.presigned_posts,T=!1;await Promise.allSettled(I.map(async({url:e,fields:r})=>{let n=y.shift();if(!n){(0,_.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,Error("Popped a concatenated buffer that does not exist"));return}try{b.push(await (0,h.ET)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,"uploadThumbnails",e,r,n.buffer,"application/octet-stream")),(0,p.S3)("publish.thumbnails_buffer.bytes",n.buffer.byteLength)}catch(e){e instanceof h.qW&&(T=!0),m.push(...n.guids)}})),T&&(0,_.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,Error("uploadThumbnails: encountered non-S3 presigned POST error"));let v=performance.now()-i;return(0,u.sx)("Library generate and upload thumbnails",{duration:v}),{s3Paths:b,styleMetaByNodeId:d,failedThumbnailNodeIds:m,uploadDurationMs:v,encounteredNonS3PresignedPostError:T}}function X(e){return e.state===F.Qx.NONE?((0,_.x1)($,"Attempted to update progress while not assembling components",e),null):e.publishStartMs}function J(e,r,n,a){let i=X(e);if(i){let e=performance.now()-i;(0,u.sx)(r,{duration:e}),(0,p.S3)(n,e,{error:a})}else(0,_.x1)($,"Publish start time was null")}let Z=(0,I.nF)(async(e,r={})=>{let n,l,d,g,E,y,I;let T=e.getState(),U=r.onPublishSuccess??V.cc,W=r.onPublishProgress??V.UN,j=r.onPublishError??V.tZ,z=r.localAssetsWithDenormalizedPublishInfo??{};if(T.library.publishProgress.state!==F.Qx.NONE){e.dispatch(Y());return}let Z=(0,A.d1)(T);if(!Z){console.error("library publishChanges: file is null"),j({error:V.jO.NoFile,dispatch:e.dispatch}),e.dispatch(Y());return}let Q=r.itemsToPublish;if(void 0!==Q&&0===Q.size){console.error("No items selected to publish"),j({error:V.jO.NoItemsToPublish,dispatch:e.dispatch}),e.dispatch(Y());return}let ee=r.unpublishAll||(0,R.aB)(Object.values((0,D.MH)(T)),Q)&&(0,R.aB)(Object.values((0,D.dM)(T)),Q)&&(0,R.aB)(Object.values((0,D.cM)(T)),Q)&&(0,R.aB)(Object.values((0,D.bh)(T)),Q)&&(!(0,M.O)(F.PW.MODULE)||(0,R.aB)(Object.values((0,D.x6)(T)),Q))&&(!(0,M.O)(F.PW.RESPONSIVE_SET)||(0,R.aB)(Object.values(z).filter(e=>e.type===F.PW.RESPONSIVE_SET),Q));if(!navigator.onLine){j({error:V.jO.Offline,publishType:ee?F.M$.UNPUBLISH:F.M$.PUBLISH,dispatch:e.dispatch}),e.dispatch(Y());return}(0,p.Rh)(`${ee?F.M$.UNPUBLISH:F.M$.PUBLISH}.start`),e.dispatch(G({unpublishAll:!!ee})),e.dispatch(w.b({has_published_library_items:!0}));let et=(n,a,i,o)=>{e.dispatch(v.Nf());let l=o?.encounteredNonS3PresignedPostError?"non_s3_error":a;J(e.getState().library.publishProgress,n,`${ee?F.M$.UNPUBLISH:F.M$.PUBLISH}.error.duration`,l);let c=o?.error;(0,_.x1)($,n,{...r,name:c?.name,message:c?.message,stack:c?.stack},{logToConsole:s.NUh.ALWAYS,reportAsSentryError:!0,forwardToDatadog:!0}),null!==i&&(0,u.sx)("Publish ended",{savepointId:i,hadException:!0}),function(e,r,n,a,i,o,s,l){0===r?function(e,r,n,a){if(r.state===F.Qx.UPLOADING){let e=X(r);if(e){let a=performance.now(),i=a-e,o=n?{totalDurationMs:i}:{totalDurationMs:i,uploadBuffersDurationMs:a-r.commitUpdatesDurationMs,clientPreWorkDurationMs:r.clientPreWorkDurationMs,createSavePointDurationMs:r.createSavePointDurationMs};for(let[e,n]of((0,u.sx)(`Client perceived ${r.publishType} duration`,o),Object.entries(o))){let a=`${r.publishType}.success.${e}`;(0,p.S3)(a,n)}}else(0,_.x1)($,"Publish start time was null")}a({publishProgress:r,publishType:n?F.M$.UNPUBLISH:F.M$.PUBLISH,dispatch:e}),e(K(""))}(a,e,n,i):function(e,r,n,a,i,o,s){let l=a?F.M$.UNPUBLISH:F.M$.PUBLISH;if(o&&e(K(o)),s){i({error:V.jO.NonS3PresignedPost,publishType:l,dispatch:e});return}"number"!=typeof n?i({error:V.jO.GenericError,publishType:l,dispatch:e}):(J(r,"Partial publish failure",`${l}.partial_error.duration`,"asset_validation"),i({error:V.jO.PartialPublish,publishType:l,dispatch:e,numPublishSkippedDueToError:n}))}(a,e,r,n,o,s,l)}(e.getState().library.publishProgress,o?.numSkippedDueToError??{__tag:"UNKNOWN"},ee,e.dispatch,U,j,r.savepointDescription,o?.encounteredNonS3PresignedPostError),e.dispatch(Y()),e.dispatch(S.Ce())},er=performance.now(),en="slides"===Z.editor_type,ea=en?(0,f.t)("design_systems.publish_actions.savepoint_for_unpublish_slides"):(0,f.t)("design_systems.publish_actions.savepoint_for_unpublish"),ei=en?(0,f.t)("design_systems.publish_actions.savepoint_for_publish_slides"):(0,f.t)("design_systems.publish_actions.savepoint_for_publish");try{n=await (0,P.m)(Z.key,ee?ea:ei,r.savepointDescription,e.dispatch,!0)}catch(e){et("Unable to create savepoint during library publish","create_savepoint",null,{error:e});return}if(!n){et("Created savepoint is null","create_savepoint",null);return}let eo=performance.now()-er;(0,u.sx)("Publish start: savepoint successfully created",{savepointId:n.id});let es=c()(Object.values(T.library.local.components).filter(e=>e.isLocal),e=>(0,O.E2)(e)||F.Nv),el=(0,k.H7)(T),{orderedUpdates:ec}=function(e){let r=[],n=e=>{e.assets.length&&r.push(e)},a=e[F.PW.VARIABLE_SET][F.M$.PUBLISH];n({publishType:F.M$.PUBLISH,assetType:F.PW.VARIABLE_SET,assets:a}),n({publishType:F.M$.UNPUBLISH,assetType:F.PW.VARIABLE_SET,assets:e[F.PW.VARIABLE_SET][F.M$.UNPUBLISH]}),n({publishType:F.M$.UNPUBLISH,assetType:F.PW.VARIABLE,assets:e[F.PW.VARIABLE][F.M$.UNPUBLISH]});let i=e[F.PW.STATE_GROUP][F.M$.PUBLISH],o=e[F.PW.COMPONENT][F.M$.UNPUBLISH].filter(e=>null===(0,O.E2)(e));return n({publishType:F.M$.PUBLISH,assetType:F.PW.STATE_GROUP,assets:i}),n({publishType:F.M$.UNPUBLISH,assetType:F.PW.STATE_GROUP,assets:e[F.PW.STATE_GROUP][F.M$.UNPUBLISH]}),n({publishType:F.M$.PUBLISH,assetType:F.PW.COMPONENT,assets:e[F.PW.COMPONENT][F.M$.PUBLISH].filter(e=>!(0,O.E2)(e))}),n({publishType:F.M$.UNPUBLISH,assetType:F.PW.COMPONENT,assets:o}),n({publishType:F.M$.PUBLISH,assetType:F.PW.STYLE,assets:e[F.PW.STYLE][F.M$.PUBLISH]}),n({publishType:F.M$.UNPUBLISH,assetType:F.PW.STYLE,assets:e[F.PW.STYLE][F.M$.UNPUBLISH]}),(0,M.O)(F.PW.MODULE)&&(n({publishType:F.M$.PUBLISH,assetType:F.PW.MODULE,assets:e[F.PW.MODULE][F.M$.PUBLISH]}),n({publishType:F.M$.UNPUBLISH,assetType:F.PW.MODULE,assets:e[F.PW.MODULE][F.M$.UNPUBLISH]})),(0,M.O)(F.PW.RESPONSIVE_SET)&&(n({publishType:F.M$.PUBLISH,assetType:F.PW.RESPONSIVE_SET,assets:e[F.PW.RESPONSIVE_SET][F.M$.PUBLISH]}),n({publishType:F.M$.UNPUBLISH,assetType:F.PW.RESPONSIVE_SET,assets:e[F.PW.RESPONSIVE_SET][F.M$.UNPUBLISH]})),{orderedUpdates:r}}((0,R.jx)((0,D.dM)(T),(0,D.MH)(T),(0,D.cM)(T),(0,D.tK)(T),(0,D.bh)(T),(0,D.x6)(T),z,Z,T.teams,{overridePublishPermissions:!!r.hubFileId,moveRemappings:r.moveInformation?.moveRemappings??{},itemsToPublish:Q,forcePublish:r.forcePublish,unpublishAll:r.unpublishAll})),ed=ec.reduce((e,{publishType:r,assetType:n,assets:i})=>{let o="";switch(n){case F.PW.COMPONENT:o="numComponentBuffers";break;case F.PW.STATE_GROUP:o="numStateGroupBuffers";break;case F.PW.STYLE:o="numStyleBuffers";break;case F.PW.VARIABLE_SET:o="numVariableSetBuffers";break;case F.PW.MODULE:o="numTemplateBuffers";break;case F.PW.VARIABLE:case F.PW.VARIABLE_OVERRIDE:break;case F.PW.RESPONSIVE_SET:o="numResponsiveSetBuffers";break;case F.PW.CODE_LIBRARY:case F.PW.CODE_FILE:case F.PW.CODE_COMPONENT:case F.PW.CONSTRAINED_TEMPLATE:break;default:(0,a.xb)(n)}r===F.M$.UNPUBLISH&&(o=`${o}Unpublished`);let s=o;return s in e&&(e[s]=i.length),e},{numComponentBuffers:0,numStateGroupBuffers:0,numStyleBuffers:0,numVariableSetBuffers:0,numTemplateBuffers:0,numResponsiveSetBuffers:0,numComponentBuffersUnpublished:0,numStateGroupBuffersUnpublished:0,numStyleBuffersUnpublished:0,numVariableSetBuffersUnpublished:0,numTemplateBuffersUnpublished:0,numResponsiveSetBuffersUnpublished:0});(0,u.sx)("Library publish upload",{fileKey:Z.key,publishMode:(0,N.z)((0,D.Io)(T)),publishScope:r.publishScope,libraryModalSessionId:r.libraryModalSessionId,orgId:el?.org_id,workspaceId:el?.workspace_id,teamId:el?.id,...ed});let eu=ec.flatMap(e=>e.publishType===F.M$.PUBLISH?e.assets:[]).reduce((e,r)=>r.type!==F.PW.VARIABLE&&r.type!==F.PW.VARIABLE_SET&&(0,M.O)(r.type)?r.type===F.PW.MODULE?e.concat(r):e.concat(r).concat(es[r.node_id]||[]):e,[]);try{l=await q(eu,ee,T.library.local.thumbnails,e)}catch(e){et("Unable to upload thumbnails during library publish","upload_thumbnails",n.id,{error:e});return}let{failedThumbnailNodeIds:em,s3Paths:ep,styleMetaByNodeId:eh,uploadDurationMs:e_,encounteredNonS3PresignedPostError:eg}=l,ef=ec.flatMap(e=>e.assets).length;if(em.length===ef){et("All thumbnails failed to upload"+(eg?" (non-s3 error)":""),"upload_thumbnails",n.id,{numSkippedDueToError:ef,encounteredNonS3PresignedPostError:eg});return}let eE=ec.map(({publishType:e,assetType:r,assets:n})=>{let a=n.filter(e=>!em.includes(e.node_id));return a.length>0?{publishType:e,assetType:r,assets:a}:null}).filter(i.Vq);if((0,m.kc)().first_draft_publish_ux){let e=s.XJn.getLocalDesignSystemKits();e.length>1?(0,_.xi)("first_draft","Attempting to publish a file with multiple kits",{kitNames:e.map(e=>e.name)}):1===e.length&&(I=await (0,C.Hj)(e[0].pageId,e[0].name,{publishType:L.tf.LIBRARY_PUBLISH,localComponents:(0,D.MH)(T),localStateGroups:(0,D.dM)(T),localVariableSets:(0,D.bh)(T)},r.firstDraftVariablesForTheme))}let ey={updates:eE.map(e=>({publishType:e.publishType,assetType:e.assetType,guids:e.assets.map(e=>{let r=(0,B.p$)(e);return r||(console.warn("Asset with null nodeId:",e),(0,_.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,Error("Asset with null node ID found during publish"))),r}).filter(i.Vq)})),moveRemappings:r.moveInformation?.moveRemappings??{},s3ThumbnailBufferPaths:ep,styleMetaByNodeId:eh,clientProtocolVersion:window.mpGlobal.version,themeMetaData:r.themePublishData??{},...I?{kitMetaData:I}:{}};try{let e=(await x.Z.postUploadPublishParams()).data.meta;d=e.url,g=e.fields}catch(e){et("Unable to get presigned post url for params","get_presigned_post",n.id,{error:e});return}try{let e=new TextEncoder;E=await (0,h.ET)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,"publishChanges.params",d,g,e.encode(JSON.stringify(ey)),"application/json")}catch(r){let e=r instanceof h.qW;et("Unable to upload publishing params"+(e?" (non-s3 error)":""),"upload_params",n.id,{error:r,encounteredNonS3PresignedPostError:e});return}try{y=(await x.Z.postLibraryPublish({fileKey:Z.key,checkpointKey:n.checkpoint_key,paramsPath:E,publishToCommunity:!!r.hubFileId,publishScope:r.publishScope})).data.meta.library_publish_id}catch(e){et("Unable to publish","generic_error",n.id,{error:e});return}try{!function(e,r,n,a,i,o,s,l){let c=performance.now(),d=r?F.M$.UNPUBLISH:F.M$.PUBLISH;e.dispatch(H({state:F.Qx.UPLOADING,publishType:d,progress:0,libraryPublishId:n,savepoint:a,numSkippedPriorToPublish:i,publishStartMs:X(e.getState().library.publishProgress),commitUpdatesDurationMs:c,clientPreWorkDurationMs:o,createSavePointDurationMs:s})),l({publishType:d,dispatch:e.dispatch,icon:b.zX.SPINNER})}(e,ee,y,n,em.length,e_,eo,W)}catch(e){et("Unable to notify publish start","generic_error",n.id,{error:e});return}})},145519:(e,r,n)=>{n.d(r,{F6:()=>h,Ho:()=>m,K6:()=>u,PU:()=>g,V9:()=>f,mu:()=>_,sm:()=>d,sp:()=>E,yc:()=>p});var a=n(299321),i=n(167249),o=n(988022),s=n(805286),l=n(301922),c=n(980820);let d=(0,i.N)("MULTIPLAYER_EMOJI_UPDATE_EMOJI_WHEEL_POSITION"),u=(0,i.N)("MULTIPLAYER_EMOJI_CLEAR_STATE"),m=(0,c.nF)(e=>{a.glU.setIsInCursorChat(!1),e.dispatch(u())}),p=(0,i.N)("MULTIPLAYER_EMOJI_START_CHATTING"),h=(0,c.nF)((e,r)=>{let n=e.getState();0>[a.NLJ.HAND,a.NLJ.SELECT,a.NLJ.HAND_SELECT].indexOf(n.mirror.appModel.currentTool)&&a.glU.triggerAction("set-tool-default",null),(0,l.q)().then(e=>{e||(a.glU.setIsInCursorChat(!0),(0,o.ds)("Started chatting",n.openFile?.key,n,{source:r.source}))}),e.dispatch(p(r))}),_=(0,i.N)("MULTIPLAYER_EMOJI_STOP_REACTING"),g=(0,i.N)("MULTIPLAYER_EMOJI_START_REACTING");(0,c.nF)((e,r)=>{s.R9.resetReactions(),e.dispatch(g(r))});let f=(0,i.N)("MULTIPLAYER_EMOJI_TOGGLE_EMOJI_WHEEL"),E=(0,c.nF)((e,r)=>{let n=e.getState();(0,o.ds)("Toggled emoji wheel",n.openFile?.key,n,{wheelType:r.wheelType,...r.source&&{source:r.source}}),e.dispatch(f(r))})},492379:(e,r,n)=>{n.d(r,{Jd:()=>w,QC:()=>v,UF:()=>A,aJ:()=>I,kN:()=>T,lT:()=>S});var a=n(776250),i=n(827697),o=n(27087),s=n(881388),l=n(939863),c=n(392592),d=n(980820);n(662275);var u=n(99403),m=n(982957),p=n(964258),h=n(935757),_=n(657193),g=n(668860),f=n(410436),E=n(679892),y=n(738269),b=n(936500);let I="team_join_request_submitted",T="permission_request_submitted",v=(0,d.nF)(async(e,r)=>{let n={team_id:r.teamId,level:r.level,message:r.message},i=e.getState().user?.id,c=e.getState().roles.byTeamId,d=i&&c&&c[r.teamId]?c[r.teamId][i]?.level:null,u={level:r.level,team_id:r.teamId,team_type:r.teamOrgAccess,source:r.source,folder_id:r.folderId};r.actionType===T?(0,a.sx)(T,u):(0,a.sx)(I,u),await o.Ay.post("/api/team_role_requests",n).then(({data:n})=>{let a=n.meta;a.status===f.c.APPROVED?e.dispatch((0,p.vr)({teamId:a.team_id})):r.level===g.e6.EDITOR&&d===g.e6.VIEWER?e.dispatch(s.s.flash((0,l.t)("org_actions.you_ve_requested_to_edit_files_in_this_team"))):e.dispatch(s.s.flash((0,l.t)("org_actions.you_ve_requested_to_join_this_team")))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r.message)||(0,l.t)("org_actions.an_error_occurred")))})}),S=(0,d.nF)((e,r)=>{o.Ay.del(`/api/team_role_requests/${r.requestId}`).then(r=>{e.dispatch(s.s.flash((0,l.t)("org_actions.request_withdrawn")))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r.message)||(0,l.t)("org_actions.an_error_occurred")))})}),w=(0,d.nF)((e,r)=>{o.Ay.post(`/api/team_role_requests/${r.requestId}/approve`,{level:`${r.level}`}).then(({data:r})=>{e.dispatch(s.s.flash((0,l.t)("org_actions.request_approved"))),e.dispatch(b.bE({role:r.meta}))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred")))})}),A=(0,d.nF)((e,r)=>{o.Ay.post(`/team_role_requests/${r.requestId}/deny`).then(r=>{e.dispatch(s.s.flash((0,l.t)("org_actions.request_denied")))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r.message)||(0,l.t)("org_actions.an_error_occurred")))})});(0,d.nF)((e,{orgId:r})=>{o.Ay.put(`/api/orgs/${r}`,{public_plugins_allowed:!0}).then(({data:r})=>{e.dispatch(u.yJ({org:r.meta}))})}),(0,d.nF)((e,{payload:r,successMessage:n})=>{let a=e.getState().currentUserOrgId;o.Ay.put(`/api/orgs/${a}`,r).then(r=>{e.dispatch(u.yJ({org:r.data.meta})),n&&e.dispatch(c.F.enqueue({message:n,type:"orgs.update",error:!1}))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,d.nF)((e,{orgId:r,googleSsoOnly:n})=>{o.Ay.put(`/api/orgs/${r}`,{google_sso_only:n}).then(({data:r})=>{e.dispatch(s.s.flash((0,l.t)("org_actions.updated_authentication_settings"))),e.dispatch(u.yJ({org:r.meta}))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,d.nF)((e,{orgId:r,samlSsoOnly:n})=>{o.Ay.put(`/api/orgs/${r}`,{saml_sso_only:n}).then(r=>{e.dispatch(s.s.flash((0,l.t)("org_actions.updated_authentication_settings"))),e.dispatch(u.yJ({org:r.data.meta}))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,d.nF)((e,{orgId:r,attribute:n})=>{o.Ay.put(`/api/orgs/${r}`,{featured_scim_metadata:n}).then(r=>{e.dispatch(u.yJ({org:r.data.meta}))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,d.nF)((e,{onFailure:r,onSuccess:n,orgId:a,timeoutDurationInSecs:i})=>{o.Ay.put(`/api/orgs/${a}`,{idle_timeout_duration_in_secs:i}).then(r=>{e.dispatch(s.s.flash((0,l.t)("org_actions.updated_idle_session_timeout"))),e.dispatch(u.yJ({org:r.data.meta})),n()}).catch(n=>{r(),e.dispatch(s.s.error((0,l.Jv)(n)||(0,l.t)("org_actions.an_error_occurred")))})}),(0,d.nF)((e,{orgId:r,ipAllowlistEnabled:n,ipAllowlistRanges:a,onSuccess:i})=>o.Ay.put(`/api/orgs/${r}/ip_allowlist_ranges`,{ip_ranges:n?a:void 0,ip_allowlist_enabled:n}).then(a=>{let o={...e.getState().orgById[r].shared_org_license_group_settings,ip_allowlist:n};e.dispatch(u.F6({id:r,shared_org_license_group_settings:o})),e.dispatch(s.s.flash("Updated IP allowlist settings")),i()}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred")))})),(0,d.nF)((e,{orgId:r})=>{o.Ay.post(`/api/org/${r}/deletion_request`).then(r=>{e.dispatch(s.s.flash((0,l.t)("orgs_middleware.deletion_request_submitted")))}).catch(r=>{e.dispatch(s.s.error(r.data?.message||(0,l.t)("orgs_middleware.an_error_occurred_while_enqueeing_deletion_request"),5e3)),console.error(r)})}),(0,d.nF)((e,r)=>{let n=r.successMessage,a=r.autogenPasswordControl,o=r.settingsId,d=E.Eh.apiAutogenControls({orgId:r.orgId,autogen_password_controls:a});d.then(()=>{n&&e.dispatch(c.F.enqueue({message:n,type:"orgs.update",error:!1}))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))}),o?(0,i.WB)().optimisticallyUpdate({SharedOrgLicenseGroupSetting:{[o]:{autogenPasswordControls:a}}},d):(0,i.WB)().optimisticallyCreate({SharedOrgLicenseGroupSetting:{[`optimistic-id-${r.orgId}`]:{autogenPasswordControls:a,externalCollaborationControls:!1,publicLinkControlsSetting:null,teamCreationControls:null,publicLinkControlsMaxExpiration:null,resourceType:"Org",resourceId:r.orgId}}},d)}),(0,d.nF)((e,r)=>{o.Ay.post(`/api/org/${r.orgId}/delete_org_users`,{org_user_ids:r.orgUserIds}).then(r=>{e.dispatch(s.s.flash((0,l.t)("orgs_middleware.user_data_deleted")))}).catch(r=>{e.dispatch(s.s.error(r.data?.message||(0,l.t)("orgs_middleware.an_error_occurred_while_enqueeing_deletion_request"),5e3)),console.error(r)})}),(0,d.nF)((e,r)=>{(0,_.yP)(e.getState(),r.selectedView)?((0,h.nt)(r.orgId),(0,a.sx)("file-browser-hydrate",{location:"selectViewAndLoadItsResources"}),(0,h._X)("orgSelectViewAndLoadItsResources").then(n=>{e.dispatch(m.cL()),e.dispatch(y.Qv(n.data.meta)),e.dispatch(y.$T(r.selectedView))})):(r.actionsIfNotHydrating&&r.actionsIfNotHydrating.forEach(e.dispatch),e.dispatch(y.$T(r.selectedView)))}),(0,d.nF)((e,{orgId:r,slidesDisabled:n,successMessage:a})=>{E.Eh.putToggleSlidesDisabled({orgId:r,slidesDisabled:n}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))}).then(()=>{e.dispatch(u.F6({id:r,is_slides_disabled:n})),a&&e.dispatch(s.s.flash(a))})})},783162:(e,r,n)=>{n.d(r,{hZ:()=>p,wc:()=>u,yH:()=>m});var a=n(167249),i=n(27087),o=n(881388),s=n(939863),l=n(392592),c=n(980820),d=n(662275);(0,c.nF)((e,r)=>{let{idpUser:n}=r,a=e.getState();i.Ay.put(`/api/org_invites/${n.id}`,{org_id:a.currentUserOrgId,account_type:n.account_type}).then(({data:r})=>{e.dispatch(p([r.meta])),e.dispatch(o.s.flash((0,s.t)("org_invite.org_invite_update_success",{email:n.email})))}).catch(r=>{let n=r.data?.message||(0,s.t)("org_invite.org_invite_update_error");e.dispatch(o.s.flash(n))})}),(0,c.nF)((e,r)=>{let n=e.getState(),{emails:a,accountType:o,isResentInvite:c,licenseGroupId:m,workspaceId:h}=r;e.dispatch(u({creating:!0})),i.Ay.post("/api/org_invites",{org_id:n.currentUserOrgId,emails:a,account_type:o,license_group_id:m,workspace_id:h}).then(({data:r})=>{let n=r.meta;e.dispatch(p(n)),e.dispatch(u({creating:!1})),e.dispatch(d.Lo());let i=(0,s.t)("org_invite.invite_resent");if(!c){let e=(0,s.t)("org_invite.new_members_message",{numInvites:n.length}),r=a.length-n.length,o=(0,s.t)("org_invite.existing_members_message",{numExisting:r});n.length>0?(i=e,r>0&&(i=[i,o].join(" "))):i=o}e.dispatch(l.F.enqueue({message:i}))}).catch(r=>{let n=r.data?.message||(0,s.t)("org_invite.org_invite_creation_error");e.dispatch(u({creating:!1})),e.dispatch(l.F.enqueue({message:n,error:!0}))})}),(0,c.nF)((e,r)=>{let{idpUser:n}=r,a=e.getState();i.Ay.del(`/api/org_invites/${n.id}`,{org_id:a.currentUserOrgId}).then(r=>{e.dispatch(m({org_invite_id:n.id})),e.dispatch(o.s.flash((0,s.t)("org_invite.org_invite_deletion_success",{email:n.email})))}).catch(r=>{let n=r.data?.message||(0,s.t)("org_invite.org_invite_deletion_error");e.dispatch(o.s.flash(n))})});let u=(0,a.N)("IS_CREATING_ORG_INVITES"),m=(0,a.N)("DELETE_ORG_INVITE"),p=(0,a.N)("SET_ORG_INVITES")},731723:(e,r,n)=>{n.d(r,{E:()=>l,hZ:()=>c});var a=n(167249),i=n(881388),o=n(980820),s=n(210397);let l=(0,a.N)("ORG_SAML_CONFIG_GET");(0,o.nF)(e=>{let r=e.getState().currentUserOrgId;s.P.getOrgSamlConfig({orgId:r}).then(r=>{e.dispatch(c({orgSamlConfig:r.data.meta}))}).catch(r=>{e.dispatch(i.s.flash(r.data?.message||"An error occurred while fetching org saml config.",5e3)),console.error(r)}),e.dispatch(l())});let c=(0,a.N)("ORG_SAML_CONFIG_SET")},377090:(e,r,n)=>{n.d(r,{E:()=>y,GR:()=>v,Lx:()=>b,MT:()=>I,hZ:()=>T}),n(411855),n(188507);var a=n(88823),i=n.n(a),o=n(167249),s=n(27087),l=n(881388),c=n(939863),d=n(980820),u=n(902957),m=n(964258),p=n(937294),h=n(320741),_=n(679892),g=n(56342),f=n(182976);(0,d.nF)(async(e,r)=>{let n=r.team.id;try{let a=(await s.Ay.put(`/api/teams/${n}`,{org_access:r.orgAccess})).data.meta;e.dispatch(T({teams:[a]}))}catch(r){e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_changing_team_s_org_access"))))}}),(0,d.nF)(async(e,r)=>{let n={};if(r.teams.forEach(e=>{let r=e.workspace_id;r&&(r in n||(n[r]=[]),n[r].push(e.id))}),Object.keys(n).length)try{let r=Object.keys(n).map(e=>{let r=n[e];return s.Ay.del(`/api/workspace/${e}/teams`,{team_ids:r})}),a=await Promise.all(r),i=[].concat(...a.map(e=>e.data.meta));e.dispatch(T({teams:i})),e.dispatch(l.s.flash((0,c.t)("org_team_actions.teams_were_unassigned",{numTeams:i.length})))}catch(r){e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_unassigning_team_s_from_a_workspace"))))}}),(0,d.nF)(async(e,r)=>{let n=r.teams.map(e=>e.id),a=r.workspaceId;try{let i=(await s.Ay.post(`/api/workspace/${a}/teams`,{team_ids:n})).data.meta;e.dispatch(T({teams:i})),e.dispatch(l.s.flash((0,c.t)("org_team_actions.teams_were_assigned_to_workspace",{numTeams:i.length,workspaceName:r.workspaceName})))}catch(r){e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_assigning_team_s_to_a_workspace"))))}}),(0,d.nF)(async(e,r)=>{let n=r.workspaceId;e.dispatch(b("loading"));try{let r=(await g.u.getTeams({includeSecretTeams:!0,workspaceId:n})).data.meta;e.dispatch(T({teams:r})),e.dispatch(b("loaded"))}catch(r){e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_fetching_teams")))),e.dispatch(b("errors"))}}),(0,d.nF)((e,r)=>{let n=e.getState().currentUserOrgId,a=r.teamIds,i={team_ids:a};r.level&&(i.level=r.level);let o=(0,p.n1)(a);e.dispatch(f.Cx({key:o})),s.Ay.post(`/api/orgs/${n}/teams/join`,i).then(()=>{e.dispatch((0,m.UM)({teamIds:a,level:r.level}))}).catch(r=>{e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_joining_teams")))),e.dispatch(f.of({key:o}))})});let E=(0,d.nF)((e,r)=>{let n=e.getState().currentUserOrgId,a=r.teamId,i={team_ids:[a]};r.level&&(i.level=r.level);let o=(0,p.p9)(a);e.dispatch(f.Cx({key:o})),s.Ay.post(`/api/orgs/${n}/teams/join`,i).then(()=>{e.dispatch((0,m.vr)({teamId:a,level:r.level}))}).catch(r=>{e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_joining")))),e.dispatch(f.of({key:o}))})});(0,d.nF)((e,r,{loadingKey:n})=>{let a=e.getState().currentUserOrgId,{teamId:i,disableFlashError:o}=r,s=_.Eh.getTeam({orgId:a,teamId:i});(0,h.N)(s,e,n),s.then(r=>{let n=r.data.meta;e.dispatch(u.yJ({team:n,userInitiated:!1}))}).catch(r=>{o||e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_trying_to_fetch_this_team"))))})},({teamId:e})=>`ORG_FETCH_TEAM_${e}`);let y=(0,o.N)("ORG_FETCH_DISCOVERABLE_TEAMS");(0,d.nF)((e,r)=>{let n=e.getState().currentUserOrgId,{includeProjectCount:a,includeMemberCount:i,includeTopMembers:o,includeSecretTeams:s}=r||{};_.Eh.getTeams({orgId:n,includeMemberCount:i,includeProjectCount:a,includeTopMembers:o,includeSecretTeams:s}).then(r=>{let n=r.data.meta;e.dispatch(T({teams:n}))}).catch(r=>{e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_trying_to_fetch_teams_within_the_organization"))))}),e.dispatch(y(r))});let b=(0,o.N)("SET_ORG_TEAMS_STATUS"),I=(0,o.N)("RESET_ORG_TEAMS"),T=(0,o.N)("ORGS_SET_DISCOVERABLE_TEAMS");function v(e,r,n){return i()(()=>e(E({teamId:r,level:n})),500,{leading:!0,trailing:!1})}},193360:(e,r,n)=>{n.d(r,{$V:()=>y,AW:()=>b,IJ:()=>v,Pg:()=>w,bu:()=>T,cN:()=>S,hZ:()=>f,uo:()=>I,yJ:()=>E});var a=n(167249),i=n(27087),o=n(881388),s=n(939863),l=n(123026),c=n(392592),d=n(980820),u=n(750293),m=n(336599),p=n(320741),h=n(379791),_=n(679892),g=n(404717);let f=l.hG,E=(0,d.MM)("ORG_USER_PUT",async(e,r,{optimistId:n})=>{if(r.userInitiated)try{let a=await h.G.updateOrgUser({id:r.orgUser.id,changes:{description:r.orgUser.description}});e.dispatch(g.c(n)),e.dispatch(E({orgUser:a.data.meta,userInitiated:!1}))}catch(r){e.dispatch(g.r(n)),e.dispatch(o.s.error(r.data?.message||(0,s.t)("org_user_actions.an_error_occurred")))}});(0,d.nF)(async(e,r)=>{try{let n={...!1===r.showUserOnboarding&&{show_figjam_user_onboarding:!1},...r.shownPreLaunchAdminOnboarding&&{has_shown_figjam_admin_onboarding:!0},...r.shownPostLaunchAdminOnboarding&&{has_shown_figjam_admin_launch_onboarding:!0}},a=await h.G.updateOrgUser({id:r.orgUserId,changes:n});e.dispatch(E({orgUser:a.data.meta,userInitiated:!1}))}catch(r){e.dispatch(o.s.error(r.data?.message||(0,s.t)("org_user_actions.an_error_occurred_closing_onboarding")))}});let y=(0,d.nF)(async(e,r)=>{try{await h.G.requestOrgAccountTypeRequest({org_id:r.orgId,entry_point:r.entryPoint,message:r.message,admin_ids:r.adminIds,editor_type:r.licenseType,billable_product_key:r.seatTypeKey,file_key:r.fileKey});let n=r.entryPoint===u.PE.CreateFileProjectView?(0,s.t)("org_user_actions.user_upgrade_request_submitted"):(0,s.t)("org_user_actions.upgrade_request_sent");r.suppressVisualBell||e.dispatch(c.F.enqueue({message:n,type:"upgrade-request-sent"}))}catch(n){console.error(n),e.dispatch(o.s.error(n.data?.message||(0,s.t)("org_user_actions.an_error_occurred_requesting_account_type"))),r.onError?.()}}),b=(0,d.nF)(async(e,r)=>{try{await i.Ay.del(`/api/org_user/${r.orgId}`),e.dispatch(c.F.enqueue({type:"org_guest_leave",message:(0,s.t)("org_user_actions.you_successfully_left_organization",{orgName:r.orgName})}))}catch(n){console.error(n),e.dispatch(o.s.error(n.data?.message||(0,s.t)("org_user_actions.an_error_occurred_leaving_organization",{orgName:r.orgName})))}}),I=(0,d.MM)("ORG_USER_BATCH_UPDATE_ORG_USERS",async(e,r,{optimistId:n})=>{let a,i;let l=e.getState();if(r.lastUpdateTimestampOverride)a=r.lastUpdateTimestampOverride,i=r.lastUpdateTimestampOverride;else{let e=Object.values(l.orgUsersByOrgId[r.orgId]).filter(e=>r.params.org_user_ids.includes(e.id));if(0===e.length)return;if(i=new Date(Math.max(...e.map(e=>+new Date(e.updated_at)))).toISOString(),void 0!==r.params.license_group_id){let r=e.map(e=>e.license_group_member?.updated_at).filter(Boolean);a=r.length>0?new Date(Math.max(...r.map(e=>+new Date(e)))).toISOString():null}}try{let o=(await h.G.updateOrgUsers({orgId:r.orgId,...r.params,latest_ou_update:i,latest_lg_member_update:a,showing_billing_groups:!0})).data.meta;e.dispatch(g.c(n)),e.dispatch(f({orgUsers:o,orgId:r.orgId})),r.successCallback&&r.successCallback()}catch(r){console.error("Batch Update Failed",r),e.dispatch(g.r(n)),e.dispatch(o.s.error(r.data?.message||(0,s.t)("org_user_actions.an_error_occurred_updating_org_users")))}}),T=(0,a.N)("ORG_USER_BATCH_DELETE_ORG_USERS"),v=(0,d.nF)(async(e,r)=>{if(e.dispatch(T(r)),r.userInitiated)try{await i.Ay.del(`/api/orgs/${r.orgId}/org_users`,r.params);let n=r.params.org_user_ids.length,a=(0,s.t)("org_user_actions.user_has_been_removed_from_organization",{deletedOrgUserCount:n});e.dispatch(o.s.flash(a))}catch(r){e.dispatch(o.s.error(r.data?.message||(0,s.t)("org_user_actions.an_error_occurred")));return}}),S=({orgId:e})=>`ORG_USER_GET_ADMINS_${e}`,w=(0,d.nF)(async(e,{orgId:r},{loadingKey:n})=>{let a=e.getState();if(!m.Sc(a.loadingState,n))return;let i=_.Eh.getAdmins({includeLicenseAdmins:!0,orgId:r});(0,p.N)(i,e,n);try{let n=await i;e.dispatch(f({orgUsers:n.data.meta,orgId:r}))}catch(r){e.dispatch(o.s.error(r.message||(0,s.t)("org_user_actions.an_error_occurred_fetching_org_admins")))}},S);(0,d.nF)(async(e,r,{loadingKey:n})=>{let a=_.Eh.getUser({orgId:r.orgId,userId:r.userId});(0,p.N)(a,e,n);try{let n=[(await a).data.meta];return e.dispatch(f({orgUsers:n,orgId:r.orgId})),n.find(e=>e.user_id===r.userId)||null}catch(r){return console.error(r),e.dispatch(o.s.error(r.message||(0,s.t)("org_user_actions.an_error_occurred_fetching_org_users"))),null}},e=>`ORG_USER_GET_BY_USER_ID_${e.orgId}_${e.userId}`)},995852:(e,r,n)=>{n.d(r,{$h:()=>O,Ay:()=>N,Az:()=>B,Bq:()=>Y,Ef:()=>R,I2:()=>F,Je:()=>x,Lj:()=>C,Lo:()=>G,M2:()=>U,MN:()=>v,Mv:()=>K,Qe:()=>P,Qg:()=>k,Ts:()=>W,WG:()=>S,WX:()=>j,Wc:()=>D,XS:()=>A,bJ:()=>L,eK:()=>T,i:()=>w,js:()=>V,pv:()=>$,qU:()=>H,yy:()=>M});var a=n(167249),i=n(181912),o=n(966712),s=n(988261),l=n(27087),c=n(881388),d=n(939863),u=n(738269),m=n(243987),p=n(707465),h=n(622139),_=n(637590),g=n(668526),f=n(980820),E=n(507877),y=n(662275),b=n(902957),I=n(114961);(0,f.nF)((e,{teamId:r,showBreadcrumbs:n,onCloseOrComplete:a})=>{e.dispatch(u.$T({view:"eduReview",teamId:r,showBreadcrumbs:n,onCloseOrComplete:a})),e.dispatch(G({billingPeriod:h.tY.STUDENT}))});let T=(0,a.N)("PAYMENT_RESTORE_SAVED_CART"),v=(0,a.N)("PAYMENT_SET_CURRENCY"),S=(0,a.N)("PAYMENT_SET_TOKEN"),w=(0,a.N)("PAYMENT_SET_TAXES"),A=(0,a.N)("PAYMENT_SET_PROMO"),N=(0,f.nF)((e,r)=>{r.promo||(0,s._H)(),e.dispatch(A(r))}),C=(0,a.N)("PAYMENT_SET_SUBMIT_PUT_ANNUAL_QUANTITY_PENDING"),L=(0,a.N)("PAYMENT_PUT_ANNUAL_QUANTITY");(0,f.nF)((e,r)=>{let{teamId:n,annualQuantity:a,annualWhiteboardQuantity:i}=r;l.Ay.put(`/api/subscriptions-2018-11-08/team/${n}`,{annual_quantity:a,annual_whiteboard_quantity:i||0}).then(()=>{e.dispatch(I.Be({teamId:n})),e.dispatch(y.Ce()),e.dispatch(C({submitPending:!1})),e.dispatch(c.s.flash((0,d.t)("flash.updated_annual_seats")))}).catch(r=>{(0,m.UE)(r,e.dispatch),e.dispatch(C({submitPending:!1}))}),e.dispatch(L())});let O=(0,a.N)("PAYMENT_SET_VAT_GST_ID"),R=(0,a.N)("PAYMENT_SET_REGIONAL_VAT_GST_ID"),P=(0,a.N)("PAYMENT_MAKE_STUDENT_TEAM");(0,f.nF)((e,r)=>{let n=e.getState(),a=n.user?.id,i=(0,o.kc)().ps_benchmark;l.Ay.put(`/api/teams/${r.teamId}/student_team`,{student_team:!0}).then(()=>{i&&a?e.dispatch(E._l({workspace:{userId:a,teamId:r.teamId,orgId:null},view:{view:"allProjects"}})):e.dispatch(u.$T({view:"team",teamId:r.teamId})),e.dispatch(c.s.flash((0,d.t)("flash.successfully_upgraded_to_an_education_team"))),e.dispatch(F({submitPending:!1})),r.onCloseOrComplete?.()}).catch(r=>{(0,m.UE)(r,e.dispatch),e.dispatch(F({submitPending:!1}))}),e.dispatch(P())});let D=(0,f.nF)((e,{teamId:r})=>{let n=e.getState().teams[r];n.student_team?l.Ay.put(`/api/teams/${r}/student_team`,{student_team:!1}).then(()=>{e.dispatch(I.Be({teamId:r})),e.dispatch(c.s.flash((0,d.t)("flash.successfully_downgraded_to_a_starter_team")))}).catch(r=>(0,m.UE)(r,e.dispatch)):l.Ay.del(`/api/subscriptions-2018-11-08/team/${r}`).then(({data:a})=>{let o=a.meta&&a.meta.team;o&&e.dispatch(b.yJ({team:o,userInitiated:!1})),e.dispatch(I.Be({teamId:r}));let{annual_subscription:s,monthly_subscription:l}=e.getState().teamBilling.summary,u=s?.quantity?s.current_period_end:null,m=l?.quantity?l.current_period_end:null,p=u&&m?(0,i.A)(u).isAfter((0,i.A)(m))?u:m:u||m;e.dispatch(c.s.flash(p?(0,d.t)("flash.team_will_become_free_starter_team_on_date",{teamName:n.name,cancelDate:(0,i.A)(p).toDate()}):(0,d.t)("flash.team_will_be_downgraded_at_the_end_of_the_current_subscription_period",{teamName:n.name}),8e3))}).catch(r=>(0,m.UE)(r,e.dispatch))}),k=(0,a.N)("PAYMENT_SHOW_ERROR");(0,f.nF)((e,{teamId:r})=>{let n=e.getState(),a=n.user?.id,i=(0,o.kc)().ps_benchmark,s={annual_quantity:n.payment.numDesignEditors||0,annual_whiteboard_quantity:n.payment.numWhiteboardEditors||0};l.Ay.put(`/api/subscriptions-2018-11-08/team/${r}`,s).then(({data:n})=>{let o=n.meta&&n.meta.team;o&&e.dispatch(b.yJ({team:o,userInitiated:!1})),e.dispatch(I.Be({teamId:r})),i&&a?e.dispatch(E._l({workspace:{userId:a,teamId:r,orgId:null},view:{view:"teamAdminConsole",teamId:r,teamAdminConsoleViewTab:g.Iv.BILLING}})):e.dispatch(u.$T({view:"team",teamId:r,teamViewTab:g.A$.BILLING})),e.dispatch(c.s.flash((0,d.t)("flash.successfully_added_an_annual_plan"))),e.dispatch(F({submitPending:!1}))}).catch(r=>{e.dispatch(F({submitPending:!1})),(0,m.UE)(r,e.dispatch)})});let M=(0,a.N)("PAYMENT_SET_COMPANY_DETAILS"),F=(0,a.N)("PAYMENT_SET_SUBMIT_PENDING"),x=(0,a.N)("PAYMENT_SET_EDITOR_STATUS_CHANGES"),U=(0,a.N)("PAYMENT_SET_NUM_FIGMA_EMAIL_TEAM_USERS"),B=(0,a.N)("PAYMENT_SET_NUM_WHITEBOARD_EDITORS"),V=(0,a.N)("PAYMENT_SET_NUM_EDITORS"),G=(0,a.N)("PAYMENT_SET_BILLING_PERIOD"),H=(0,a.N)("PAYMENT_SET_CAMPFIRE_SEATS"),W=(0,a.N)("PAYMENT_INIT"),K=(0,a.N)("PAYMENT_START_ORG_UPGRADE_FLOW"),Y=(0,f.nF)((e,r)=>{let{openInNewTab:n,newTeamProps:a,upsellSource:i}=r;if(n){let r=e.getState(),n=new URL((0,p.Np)(r,{view:"orgSelfServe",upsellSource:i}),document.baseURI).href;e.dispatch(E.V3({url:n}))}else e.dispatch(u.$T({view:"orgSelfServe",newTeamProps:a,upsellSource:i}));e.dispatch(K({currency:r.currency}))}),$=(0,a.N)("PAYMENT_START_PRO_UPGRADE_FLOW"),j=(0,f.nF)((e,r)=>{let{teamId:n,billingPeriod:a,onBillingCompleteRedirectInfo:i}=r,o={view:"teamUpgrade",teamFlowType:_.SC.UPGRADE_EXISTING_TEAM,teamId:n,paymentStep:h.tn.CHOOSE_PLAN,billingPeriod:a,planType:_.Sc.TEAM,...i?{searchParams:{onCompleteRedirectFileKey:i.fileKey,onCompleteRedirectNodeId:i.nodeId}}:{}};if(r.openInNewTab){let r=e.getState(),n=new URL((0,p.Np)(r,o),document.baseURI).href;e.dispatch(E.V3({url:n}))}else o.previousView=r.selectedView,e.dispatch(u.$T(o));e.dispatch($({newTeam:r.newTeam,currency:r.currency}))})},986270:(e,r,n)=>{n.d(r,{F9:()=>I,Hx:()=>C,KA:()=>E,Kq:()=>x,Ks:()=>S,QN:()=>k,RH:()=>M,TN:()=>V,Vg:()=>R,Vu:()=>w,WR:()=>T,ay:()=>y,cu:()=>L,f0:()=>O,fR:()=>B,gU:()=>D,jS:()=>v,jX:()=>P,lD:()=>F,nM:()=>A,pj:()=>N,v8:()=>b});var a=n(167249),i=n(157663),o=n(27087),s=n(939863),l=n(667231),c=n(980820),d=n(941381),u=n(233675),m=n(697551),p=n(72274),h=n(215822),_=n(331626),g=n(555328),f=n(809073);let E=(0,a.N)("SET_RECENT_WHITEBOARD_TOOLS");(0,c.nF)((e,r)=>{let n=(0,_.gJ)(r.storeInRecentsKey,f.dB.WHITEBOARD_TOOL);e.dispatch(E({storeInRecentsKey:r.storeInRecentsKey,recentWhiteboardTools:n}))});let y=(0,a.N)("ADD_WHITEBOARD_TOOL_TO_RECENTS"),b=(0,a.N)("SET_RECENT_FACE_STAMPS");(0,c.nF)((e,r)=>{let n=(0,_.gJ)(r.storeInRecentsKey,f.dB.FACE_STAMP);e.dispatch(b({storeInRecentsKey:r.storeInRecentsKey,recentFaceStamps:n}))});let I=(0,a.N)("ADD_FACE_STAMP_TO_RECENTS"),T=(0,a.N)("SYNC_RECENT_PLUGINS");(0,c.nF)((e,r)=>{let n=(0,_.gJ)(r.storeInRecentsKey,g.bD.PLUGIN);e.dispatch(S({storeInRecentsKey:r.storeInRecentsKey,recentResources:n}));let a=n.map(e=>e.id);e.dispatch(R({resourceType:g.bD.PLUGIN,resourceIds:a})),e.dispatch(T(r))});let v=(0,a.N)("SYNC_RECENT_WIDGETS");(0,c.nF)((e,r)=>{let n=(0,_.gJ)(r.storeInRecentsKey,g.bD.WIDGET);e.dispatch(w({storeInRecentsKey:r.storeInRecentsKey,recentResources:n}));let a=n.map(e=>e.id);e.dispatch(R({resourceType:g.bD.WIDGET,resourceIds:a})),e.dispatch(v(r))});let S=(0,a.N)("SET_RECENT_PLUGINS"),w=(0,a.N)("SET_RECENT_WIDGETS"),A=l.nM,N=l.pj,C=l.Hx,L=(0,a.N)("ADD_FETCHED_PLUGIN_VERSION"),O=(0,a.N)("ADD_FETCHED_WIDGET_VERSION"),R=(0,c.nF)((e,r)=>{V(e,r)}),P=(0,a.N)("ADD_PLUGIN_TO_RECENTS"),D=(0,c.nF)((e,r)=>{e.dispatch(R({resourceType:g.bD.PLUGIN,resourceIds:[r.id]})),r.skipPluginRun||U(r.id,r.currentUserId,e.getState().currentUserOrgId,e.getState().publishedPlugins[r.id],e.getState().recentlyUsed.plugins[r.storeInRecentsKey],!!r.isDevelopment,e.dispatch),e.dispatch(P(r))}),k=(0,a.N)("ADD_WIDGETS_TO_RECENTS"),M=(0,c.nF)((e,r)=>{e.dispatch(R({resourceType:g.bD.WIDGET,resourceIds:[r.id]})),r.skipPluginRun||U(r.id,r.currentUserId,e.getState().currentUserOrgId,e.getState().publishedWidgets[r.id],e.getState().recentlyUsed.widgets[r.storeInRecentsKey],!!r.isDevelopment,e.dispatch),e.dispatch(k(r))}),F=(0,a.N)("REMOVE_RECENTLY_USED_PLUGIN"),x=(0,a.N)("REMOVE_RECENTLY_USED_WIDGET"),U=(e,r,n,a,l,c,d)=>{if(a&&a.current_user_has_run||!r||(0,p.Vi)(e)||c)return;let m=l.find(r=>r.id===e);m?.run_by_user_ids?.includes(r)||o.Ay.post(`/api/plugin_runs/${e}`,{org_id:n}).then(({data:r})=>{d(u.R({resourceId:e,userFirstRanAt:r.meta.created_at}))}).catch(e=>{i.k.error((0,s.Jv)(e))})},B=(e,r)=>n=>{let a=(0,h.uF)(e),i=(a.manifest?.editorType??[]).map(e=>"figma"===e?f.$A.Design:f.$A.FigJam),o=(0,g.xQ)(e)?M:D;i.forEach(i=>n(o({storeInRecentsKey:i,id:e.id,version:a.id,currentUserId:r})))};function V(e,r){let n={},a=({id:a,version:i,status:o})=>{let s=r.resourceType===g.bD.PLUGIN?L:O;return i&&(n[a]=i),e.dispatch(s({id:a,version:i,status:o}))},i=[];if(r.resourceIds.forEach(o=>{let s=r.resourceType===g.bD.PLUGIN?e.getState().installedPluginVersions.plugins[o]:void 0;if(s){a({id:o,version:s,status:f.Lx.FETCHED});return}let l=r.resourceType===g.bD.PLUGIN?e.getState().recentlyUsed.plugins.fetchedResources[o]:e.getState().recentlyUsed.widgets.fetchedResources[o];l&&l.status!==f.Lx.NOT_FETCHED&&(l.status!==f.Lx.FETCHED||l.version)?l.version&&(n[o]=l.version):i.push(o)}),!i.length)return Promise.resolve(n);i.forEach(e=>{a({id:e,status:f.Lx.FETCHING})});let s={ids:i,org_id:e.getState().currentUserOrgId,include_pending:!0};return o.Ay.post(`/api/${(0,m.n)(r.resourceType)}/batch`,s).then(({data:r})=>(e.dispatch(d.Qi({publishedPlugins:r.meta,src:"fetchExtensionVersions",overrideInstallStatus:!0})),i.forEach(e=>{let n;let i=r.meta.find(r=>r.id===e);i&&(n=(0,_.ul)(i)),a({id:e,version:n,status:f.Lx.FETCHED})}),n)).catch(()=>(i.forEach(e=>{a({id:e,status:f.Lx.NOT_FETCHED})}),{}))}},650769:(e,r,n)=>{n.d(r,{MV:()=>E,N:()=>g,Xk:()=>u,cq:()=>p,hh:()=>_,lX:()=>f,q0:()=>h,zT:()=>y,zU:()=>m});var a=n(299321),i=n(167249),o=n(686759),s=n(286640),l=n(980820),c=n(707465),d=n(442617);let u="seen_try_onboarding",m=(0,i.N)("SET_WORKSHOP_USER_NAME"),p=(0,l.nF)((e,r)=>{let n=r.name.trim().substring(0,170),i=e.getState(),o="fullscreen"===i.selectedView.view&&i.selectedView.workshopModeInfo;if(o)a.h3O.setName(n),(0,d.Vv)(o.id,n),e.dispatch(m(r))}),h=(0,i.N)("SET_STARTER_KIT_HAS_BEEN_HIDDEN"),_=(0,i.N)("SET_FIGJAM_EDITOR_ONBOARDING_FINISHED_OR_DISMISSED"),g=(0,i.N)("SET_FIGJAM_EDITOR_ONBOARDING_STARTED");(0,l.nF)(e=>{(0,s.DN)().set(u,!0),e.dispatch(g())});let f=(0,i.N)("SET_WORKSHOP_MODE_UNTIL"),E=(0,i.N)("CLEAR_TRY_PLUGIN"),y=(0,l.nF)((e,r)=>{let n=e.getState();return(0,o.Dk)((0,c.xS)(n,r))})},906899:(e,r,n)=>{n.d(r,{Ev:()=>g,FL:()=>_,nH:()=>E,rk:()=>f,sw:()=>p});var a=n(432258),i=n(167249),o=n(966712),s=n(374626),l=n(154483),c=n(980820),d=n(453681),u=n(754168),m=n(944682);let p=(0,i.N)("FULLSCREEN_HIDE_STYLE_PREVIEW");(0,c.nF)(e=>{let r=e.getState().stylePreviewShown;r.isShown&&!r.isCreating&&e.dispatch(p())}),(0,c.nF)((e,r)=>{let{rowTop:n,rowLeft:a,styleType:i,inheritStyleKeyField:o,styleNameInputPrefix:s,nodeId:l}=r;e.dispatch(_({rowTop:n,rowLeft:a,styleType:i,inheritStyleKeyField:o,styleNameInputPrefix:s,nodeId:l}))});let h=(0,l.fv)(),_=(0,i.N)("SHOW_CREATE_STYLE_PREVIEW"),g=(0,i.N)("FULLSCREEN_SHOW_STYLE_PREVIEW"),f=(0,c.nF)((e,r)=>{if(!(0,o.kc)().dse_lk_go_to_source){let n=h(r.style),i=s.zl.get(d.qp);((0,o.kc)().ds_use_lib_keys?(0,a.Vq)(i[r.style.library_key]):null!=e.getState().fileByKey[n])||u.S.getFiles({fileKey:n}).then(r=>e.dispatch(m.yJ({file:r.data.meta})))}e.dispatch(g(r))}),E=(0,i.N)("STYLE_FILE_PUT_STYLE_SET");(0,i.N)("STYLE_FILE_GET_STYLE_SET")},902957:(e,r,n)=>{n.d(r,{$I:()=>L,$V:()=>E,$w:()=>N,Jt:()=>D,TI:()=>I,WC:()=>T,_E:()=>f,aB:()=>w,bE:()=>P,bQ:()=>A,ii:()=>y,mw:()=>b,n9:()=>S,r1:()=>v,uo:()=>C,yH:()=>R,yJ:()=>O});var a=n(167249),i=n(737947),o=n(27087),s=n(881388),l=n(939863),c=n(123026),d=n(392592),u=n(980820),m=n(446297),p=n(99506),h=n(320741),_=n(845213),g=n(404717);let f=(0,u.MM)("BATCH_DEL_TEAM_MEMBERS",(e,{teamId:r,userIds:n},{optimistId:a})=>{o.Ay.del(`/api/teams/${r}/users`,{user_ids:n}).then(()=>{e.dispatch(g.c(a))}).catch(r=>{e.dispatch(g.r(a))})});(0,u.nF)(async(e,r)=>{let{teamId:n}=r;await o.Ay.put(`/api/teams/${n}/restore`).then(()=>{let r=`/files/team/${n}`;i.Ay.redirect(r),e.dispatch(s.s.flash((0,l.t)("file_browser.file_browser_actions.restore_team_success")))}).catch(r=>{e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.restore_team_error",{errorMsg:r.data.message||(0,l.t)("file_browser.file_browser_actions.unknown_error")})))})}),(0,u.nF)(async(e,r)=>{await o.Ay.put(`/api/teams/${r.teamId}`,{description:r.description}).then(()=>{e.dispatch(O({team:{id:r.teamId,description:r.description},userInitiated:!0}))}).catch(()=>{e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.update_description_error")))})}),(0,u.nF)(async(e,r)=>{let n=r.figma_provided_libraries_disabled;await _.$.updatePresetsDisabled({teamId:r.teamId,presetsDisabled:n}).then(()=>{e.dispatch(d.F.enqueue({message:n?(0,l.t)("settings_tab.ui_kits_disabled"):(0,l.t)("settings_tab.ui_kits_enabled"),type:"team.ui_kit_toggle",error:!1})),e.dispatch(O({team:{id:r.teamId,figma_provided_libraries_disabled:n},userInitiated:!0}))}).catch(()=>{e.dispatch(s.s.error((0,l.t)("file_browser.error_try_again")))})}),(0,u.nF)((e,{teamId:r},{loadingKey:n})=>{let a=_.$.getTeam({teamId:r});(0,h.N)(a,e,n),a.then(({data:r})=>{e.dispatch(O({team:r.meta,userInitiated:!1}))}).catch(()=>{e.dispatch(s.s.error((0,l.t)("file_browser.error_try_again")))})}),(0,u.nF)((e,{teamId:r,userInitiated:n=!0},{loadingKey:a})=>{let i=_.$.getMembers({teamId:r});n&&(0,h.N)(i,e,a),i.then(({data:n})=>{let a={};n.meta.forEach(e=>{a[e.email]=e}),e.dispatch(E({members:a,teamId:r}))},r=>{console.error(r),e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.team_member_fetch_error")))})},e=>`TEAM_FETCH_MEMBERS_LIST::teamId::${e.teamId}`);let E=(0,a.N)("TEAM_SET_MEMBERS"),y=(0,a.N)("TEAM_BATCH_JOIN"),b=(0,a.N)("TEAM_JOIN"),I=(0,a.N)("TEAM_STOP_RENAME"),T=(0,a.N)("TEAM_BEGIN_RENAME"),v=(0,a.N)("TEAM_CREATION_SET_LOADING"),S=(0,a.N)("TEAM_CHANGE_DEFAULT_PERMISSION"),w=(0,a.N)("TEAM_CHANGE_SHARING_SETTINGS"),A=(0,a.N)("TEAM_CHANGE_ORG_ACCESS");(0,a.N)("TEAM_LOADED");let N=(0,a.N)("TEAM_RENAME"),C=(0,a.N)("TEAM_BATCH_PUT"),L=c.RF,O=(0,u.nF)((e,r)=>{let n=r.team.id,a=e.getState().teams[n];e.dispatch(L(r));let i=e.getState(),o=e.getState().teams[n];!r.userInitiated&&o.subscription&&o.subscription!==p.Qh.INCOMPLETE&&a&&(null==a.subscription||a.subscription===p.Qh.INCOMPLETE)&&"teamUpgrade"===i.selectedView.view&&i.selectedView.teamId===o.id&&e.dispatch(m.zn({teamId:o.id}))}),R=c.Nh,P=(0,a.N)("TEAM_POST"),D=(0,a.N)("TEAM_GET")},114961:(e,r,n)=>{n.d(r,{Be:()=>m,OP:()=>_,l0:()=>h,tp:()=>p});var a=n(167249);n(27087);var i=n(881388),o=n(939863);n(392592);var s=n(980820);n(662275);var l=n(336599);n(820113);var c=n(320741),d=n(659969);let u=(0,s.nF)((e,{teamId:r},{loadingKey:n})=>{let a=d.T.getTeamInvoices({teamId:r});(0,c.N)(a,e,n),a.then(({data:r})=>{r.meta.forEach(e=>{e.design_quantity||(e.design_quantity=e.quantity)}),e.dispatch(p({invoices:r.meta}))}).catch(()=>{e.dispatch(i.s.error((0,o.t)("flash.team_invoices_fetching_error")))})},e=>`TEAM_ADMIN_FETCH_INVOICES::teamId::${e.teamId}`),m=(0,s.nF)((e,{teamId:r},{loadingKey:n})=>{let a=d.T.getTeamSummary({teamId:r});(0,c.N)(a,e,n),a.then(({data:r})=>{e.dispatch(h({summary:r.meta}))}).catch(()=>{e.dispatch(i.s.error((0,o.t)("flash.team_billing_summary_fetching_error")))})},e=>`TEAM_ADMIN_FETCH_BILLING_SUMMARY::teamId::${e.teamId}`);(0,s.nF)((e,{teamId:r,shouldForceFetch:n})=>{let a=m.loadingKeyForPayload({teamId:r}),i=e.getState();(0,l.VP)(i.loadingState,a)||!n&&(0,l.D2)(i.loadingState,a)||e.dispatch(m({teamId:r}));let o=u.loadingKeyForPayload({teamId:r});(0,l.VP)(i.loadingState,o)||!n&&(0,l.D2)(i.loadingState,o)||e.dispatch(u({teamId:r}))});let p=(0,a.N)("TEAM_ADMIN_POST_INVOICE"),h=(0,a.N)("TEAM_ADMIN_SET_SUMMARY"),_=(0,a.N)("TEAM_ADMIN_UPDATE_INVOICE_RECEIVER")},569172:(e,r,n)=>{n.d(r,{BC:()=>y,EF:()=>C,FJ:()=>S,Oy:()=>A,Y9:()=>_,au:()=>g,cx:()=>b,gX:()=>I,hK:()=>E,t9:()=>T,v6:()=>O,yu:()=>f});var a=n(167249),i=n(776250),o=n(609494),s=n(966712),l=n(827697),c=n(743282),d=n(27087),u=n(980820),m=n(320741),p=n(440535),h=n(888592);let _=(0,a.N)("REFRESH_FEED"),g=(0,u.nF)((e,r,{loadingKey:n})=>{if(!(0,s.kc)().xr_debounce_threshold)return;let a=h.K.getFeedBellStates();(0,m.N)(a,e,n),a.then(r=>{e.dispatch(E({bellStates:r.data.meta}))})}),f=(0,a.N)("TEAM_FEED_SET_BELL_STATE"),E=(0,a.N)("TEAM_FEED_SET_INITIAL_BELL_STATES"),y=(0,u.nF)((e,r)=>{let n=e.getState().user,a=(0,l.WB)(),i=r.uuid;if(!n||!a||!i||r.commentId.startsWith(O))return;let o=a.getIdFromUuid("FeedComment",i).then(e=>d.Ay.del(`/api/feed_posts/comments/${e}`));a.optimisticallyDeleteWithUUID({FeedComment:{[i]:null}},o)}),b=(0,u.nF)((e,r)=>{r.messageMeta=(0,o.Pq)(r.messageMeta);let n=e.getState().user,a=(0,l.WB)(),s=r.uuid;if(!n||!a||!s)return;let c=a.getIdFromUuid("FeedComment",s).then(e=>d.Ay.put(`/api/feed_posts/comments/${e}`,{message_meta:r.messageMeta,attachment_updates:(0,p.Gq)(r.attachmentUpdates)}));(0,i.sx)("Team Feed Comment Edited",{text:(0,o._Z)(r.messageMeta)});let u=(0,o.Rc)(r.messageMeta);a.optimisticallyUpdateWithUUID({FeedComment:{[s]:{messageMeta:u}}},c)}),I=(0,u.nF)((e,r)=>{r.messageMeta=(0,o.Pq)(r.messageMeta);let n=e.getState().user,a=(0,l.WB)();if(!n||!a)return;let s=(0,c.g)(),u=d.Ay.post(`/api/feed_posts/${r.postUuid}/comments`,{message_meta:r.messageMeta,uuid:s,attachment_ids:r.attachmentIds}),m=!!r.messageMeta.find(e=>(0,o.l5)(e)===o.vj.EMOJI),p=!!r.messageMeta.find(e=>(0,o.l5)(e)===o.vj.EDITOR_MENTION);(0,i.sx)("Team Feed Comment Added",{emojiUsed:m,mentionUsed:p,text:(0,o._Z)(r.messageMeta),postUuid:r.postUuid});let h=(0,o.Rc)(r.messageMeta);a.optimisticallyCreateWithUUID({FeedComment:{[s]:{feedPostPublicUuid:r.postUuid,uuid:s,userId:n.id,user:{id:n.id,handle:n.handle,imgUrl:n.img_url},messageMeta:h,createdAt:new Date,reactions:[]}}},u)}),T=(0,u.nF)((e,r)=>{let{commentUuid:n,emoji:a,reactionId:i}=r,o=v(n,a);e.getState().user&&(0,l.WB)().optimisticallyDelete({FeedReaction:{[i]:null}},o)}),v=(e,r)=>(0,l.WB)().getIdFromUuid("FeedComment",e).then(e=>d.Ay.del(`/api/feed_posts/comments/${e}/reactions`,{emoji:r})),S=(0,u.nF)((e,r)=>{let{commentUuid:n,commentId:a,emoji:o}=r,s=e.getState().user;if(!s||a.startsWith(O))return;let c=w(n,o);(0,i.sx)("Team Feed Reaction Added",{commentId:a,type:o});let d=`optimistic-id-comment-${a}-${o}-${s.id}`;(0,l.WB)().optimisticallyCreate({FeedReaction:{[d]:{createdAt:new Date,emoji:o,feedResourceId:a,feedResourceType:"FeedComment",userId:s.id}}},c)}),w=(e,r)=>(0,l.WB)().getIdFromUuid("FeedComment",e).then(e=>d.Ay.post(`/api/feed_posts/comments/${e}/reactions`,{emoji:r})),A=(0,u.nF)((e,r)=>{let{feedPostUuid:n,emoji:a,reactionId:i}=r,o=N(n,a);e.getState().user&&(0,l.WB)().optimisticallyDelete({FeedReaction:{[i]:null}},o)}),N=(e,r)=>d.Ay.del(`/api/feed_posts/${e}/reactions`,{emoji:r}),C=(0,u.nF)((e,r)=>{let{feedPostUuid:n,feedPostId:a,emoji:o}=r,s=e.getState().user;if(!s)return;let c=L(n,o);(0,i.sx)("Team Feed Reaction Added",{postUuid:n,type:o});let d=`optimistic-id-${n}-${o}-${s.id}`;(0,l.WB)().optimisticallyCreate({FeedReaction:{[d]:{createdAt:new Date,emoji:o,feedResourceId:a,feedResourceType:"FeedPost",userId:s.id,user:{id:s.id,handle:s.handle,imgUrl:s.img_url}}}},c)}),L=(e,r)=>d.Ay.post(`/api/feed_posts/${e}/reactions`,{emoji:r}),O="pending-feed-comment"},495481:(e,r,n)=>{n.d(r,{m:()=>h});var a=n(27087),i=n(881388),o=n(939863),s=n(392592),l=n(784151),c=n(662275),d=n(36816),u=n(980820),m=n(404717),p=n(229403);(0,u.nF)((e,{members:r,team:n,teamUsers:a,usersWithNoTeamUserIds:i=[],paidStatusType:u,paidStatus:m,entryPoint:p,showModalsBeneath:_=!1,costMessaging:g})=>{e.dispatch((0,c.to)({type:(0,l.j)(),data:{onConfirm:()=>{let l;e.dispatch(h({teamId:n.id,teamUsers:a,usersWithNoTeamUserIds:i,paidStatus:m,paidStatusType:u,userInitiated:!0,entryPoint:p}));let c=r.length,_={productName:u===d.j4.WHITEBOARD?(0,o.t)("general.figjam"):(0,o.t)("general.figma_design"),nameOrEmail:r[0].name||r[0].email,numTeamMembers:c};switch(m){case d.Zf.FULL:l=(0,o.t)("team_user.actions.team_members_upgraded.seat_rename",_);break;case d.Zf.STARTER:l=(0,o.t)("team_user.actions.team_members_downgraded_to_viewer.seat_rename",_);break;case d.Zf.RESTRICTED:l=(0,o.t)("team_user.actions.team_members_downgraded_to_viewer_restricted.seat_rename",_)}e.dispatch(s.F.enqueue({type:"team-paid-status-updated",message:l}))},members:r,team:n,paidStatusType:u,paidStatus:m,costMessaging:g},showModalsBeneath:_}))});let h=(0,u.MM)("TEAM_USER_UPDATE_DESIGN_PAID_STATUS",async(e,{teamId:r,teamUsers:n,usersWithNoTeamUserIds:s,paidStatus:l,paidStatusType:c,userInitiated:u,entryPoint:h},{optimistId:_})=>{if(u){let u=n.map(e=>e.user_id).concat(s||[]);await a.Ay.put(`/api/teams/${r}/team_user_batch`,{team_user_deltas:u.map(e=>{let r={user_id:e};return c===d.j4.WHITEBOARD?r.whiteboard_paid_status=l:r.design_paid_status=l,r}),entry_point:h}).then(function({data:n}){e.dispatch(m.c(_)),e.dispatch((0,p.yJ)({teamUsers:n.meta,teamId:r}))}).catch(function(r){e.dispatch(m.r(_));let n=(0,o.t)("team_user.actions.an_error_occurred_while_changing_a_team_member_s_billing_status");e.dispatch(i.s.error(n)),console.error(r)})}},e=>`$TEAM_USER_UPDATE_DESIGN_PAID_STATUS::teamId::${e.teamId}`)},340159:(e,r,n)=>{n.d(r,{c0:()=>p});var a=n(167249),i=n(27087),o=n(330654),s=n(868389),l=n(980820),c=n(540019),d=n(696915),u=n(754168),m=n(301400);let p=(0,a.N)("ONBOARDING_TEMPLATES_PUT_ALL");(0,l.nF)(e=>{m.H.getTemplates({type:"onboarding"}).then(({data:r})=>{let n=r.meta;Object.keys(n).forEach(r=>{e.dispatch((0,s.Sb)({hubFiles:n[r],src:"getOnboardingTemplates"}))}),e.dispatch(p(n))})}),(0,l.nF)((e,r)=>i.Ay.post("/api/files/first_template_type",{template_type:r.type})),c.M4.Query({fetch:async e=>{let r=await u.S.getTaggedUserFiles({...e});return 200!==r.status||r.data.meta.files.length<1?[]:r.data.meta.files},key:"starter_files",schema:o.array(d.L)}),c.M4.Query({fetch:async()=>{let e=await m.H.getStartingPointsTemplates();if(200!==e.status)throw Error("Failed to fetch starting points templates");return e.data.meta},key:"starting_points_templates"})},196495:(e,r,n)=>{n.d(r,{C$:()=>R,S5:()=>w,WJ:()=>O,hz:()=>L,yJ:()=>P});var a=n(414507),i=n(167249),o=n(776250),s=n(517333),l=n(737947),c=n(187623),d=n(776621),u=n(27087),m=n(939863),p=n(123026),h=n(392592),_=n(743905),g=n(738269),f=n(662275),E=n(988022),y=n(788811),b=n(697551),I=n(540351),T=n(52571),v=n(980820),S=n(507877);(0,v.nF)(async()=>{try{await u.Ay.post("/api/user/migrate_personal_drafts")}catch(r){let e=r?.data?.message||"undefined";(0,d.$D)(a.FigmaTeam.SHARING_AND_ACCESS,Error(`Failed to migrate starter drafts for user: ${e}`))}});let w=(0,v.nF)(async e=>{try{let r=e.getState();for(let a of r.authedUsers.orderedIds)if(await (0,y.z$)(a)){N();let a=n(632376).xv;e.dispatch(f.to({type:a,data:{users:Object.values(r.authedUsers.byId),onLogOut:()=>{e.dispatch(A())}}}));return}}catch(e){(0,d.$D)(a.FigmaTeam.SCENEGRAPH_AND_SYNC,Error("Failed to get autosave files for user"))}e.dispatch(A())}),A=(0,v.nF)(e=>{if(s.eD){l.Ay.redirect("/logout");return}let r=(0,b.d9)(e.getState().selectedView);T.H.logoutAllUsers().then(()=>{(0,E.Pg)(),_.U2.clear(),new c.P().sendToAllTabs(I.y,I.J),l.Ay.redirect(`${r?"/community":""}/?fuid=`)}).catch(r=>{let n=r.data?.message||(0,m.t)("file_browser.file_browser_actions.logout_error_without_email");e.dispatch(h.F.enqueue({error:!0,message:n}))})});(0,v.nF)(async(e,r)=>{try{if(await (0,y.z$)(r.user.id)){N();let a=n(632376).xv;e.dispatch(f.to({type:a,data:{users:[r.user],onLogOut:()=>{e.dispatch(C(r))}}}))}else e.dispatch(C(r))}catch(n){(0,d.$D)(a.FigmaTeam.SCENEGRAPH_AND_SYNC,Error("Failed to get autosave files for user")),e.dispatch(C(r))}});let N=()=>{try{(0,o.sx)("autosave_modal_shown",{},{forwardToDatadog:!0,batchRequest:!0})}catch(e){}},C=(0,v.nF)((e,r)=>{T.H.logoutOneUser(r.user.id).then(n=>{e.dispatch(g.os(n.data.meta)),e.dispatch(S.q0(n.data.meta)),n.data?.meta?.users?.length===0&&((0,E.Pg)(),_.U2.clear());let a=n.data?.meta?.redirect_url;a?l.Ay.redirect(a):e.dispatch(h.F.enqueue({message:(0,m.t)("file_browser.file_browser_actions.successfully_logged_out",{emailAddress:r.user.email})}))}).catch(n=>{let a=n.data?.message||(0,m.t)("file_browser.file_browser_actions.logout_error_with_email",{emailAddress:r.user.email});e.dispatch(h.F.enqueue({error:!0,message:a}))})}),L=(0,i.N)("DELETE_USER_LOADING"),O=(0,i.N)("USER_ERASE_SECRETS"),R=(0,i.N)("USER_TOGGLE_TWO_FACTOR"),P=p.vv},725561:(e,r,n)=>{n.d(r,{Q$:()=>b,uR:()=>y});var a=n(299321),i=n(167249),o=n(27087),s=n(939863),l=n(265746),c=n(696808),d=n(392592),u=n(980820),m=n(974105),p=n(356390),h=n(917701),_=n(975350),g=n(738269);let f=e=>{let r=e.getState();e.dispatch(_.UU({force:!0})),r.mirror.appModel.showUi||p.Y5.triggerAction("toggle-ui"),r.mirror.appModel.currentTool!==a.NLJ.COMMENTS&&p.Y5.triggerAction("set-tool-comments"),requestAnimationFrame(()=>{e.dispatch(g.j7({type:h.a}))})};(0,u.nF)((e,r)=>{let n=e.getState(),a=(0,m.d1)(n);if(a&&r.fileKey===a.key&&n?.user?.id===r.userId){let n={text:(0,s.t)("comments.manage"),action:()=>f(e)},a="all"===r.preference?(0,s.t)("comments.you_will_be_notified_about_file_comments"):(0,s.t)("comments.you_will_be_notified_about_replies_and_at_mentions");e.dispatch(d.F.enqueue({message:a,type:"comments-opted-in",button:n,onDismiss:()=>{},timeoutOverride:15e3}))}});let E=(e,r)=>{let n;return"exp_notification_catfile"===r?n=`/api/user_notifications/catfile_optin/${e}`:"exp_notification_catfic"===r&&(n=`/api/user_notifications/catfic_optin/${e}`),e=>{o.Ay.post(n,{opted_in:e})}};(0,u.nF)((e,r)=>{let n=e.getState(),a=(0,m.d1)(n);if(a&&r.fileKey===a.key&&n?.user?.id===r.userId){let n=E(r.fileKey,r.experimentName),a={text:(0,s.t)("comments.turn_on"),action:()=>{n(!0)}};setTimeout(()=>{e.dispatch(d.F.enqueue({message:(0,s.t)("comments.get_notified_about_all_comments_prompt"),type:"get_notified_about_all_comments_prompt",button:a,onDismiss:()=>n(!1),timeoutOverride:15e3}))},5e3)}}),(0,u.nF)((e,r)=>{let n=e.getState(),a=(0,m.d1)(n);if(a&&r.fileKey===a.key&&n?.user?.id===r.userId){let n=E(r.fileKey,r.experimentName);setTimeout(()=>{e.dispatch(c.Q.enqueue({notification:{type:l._.SUBSCRIBED_TO_COMMENT_NOTIFICATIONS,message:(0,s.t)("comments.get_notified_about_all_comments_prompt"),acceptCallback:()=>n(!0),dismissCallback:()=>n(!1)}}))},5e3)}}),(0,u.nF)((e,r)=>{let n=e.getState(),a=(0,m.d1)(n);if(a&&r.fileKey===a.key&&n?.user?.id===r.userId){let r={text:(0,s.t)("comments.manage"),action:()=>f(e)},n=(0,s.t)("dev_mode.you_will_be_notified_about_status_changes");e.dispatch(d.F.enqueue({message:n,type:"dev-mode-opted-in",button:r,onDismiss:()=>{},timeoutOverride:15e3}))}});let y=(0,i.N)("USER_NOTIFICATIONS_SET_BELL"),b=(0,i.N)("USER_NOTIFICATIONS_SET_COMMUNITY_PROFILE_BELL")},625651:(e,r,n)=>{n.d(r,{D6:()=>R,H1:()=>A,Ho:()=>P,U6:()=>N,Vw:()=>b,au:()=>C,cx:()=>v,gA:()=>y,hL:()=>O,rT:()=>I,w9:()=>T});var a=n(299321),i=n(138020),o=n(167249),s=n(776250),l=n(374626),c=n(827697),d=n(746746),u=n(27087),m=n(881388),p=n(939863),h=n(392592),_=n(980820),g=n(843495),f=n(900073),E=n(182976);let y=(0,o.N)("UNSET_HOVERED_IN_MODAL_VOTE_PIN"),b=(0,o.N)("SET_HOVERED_IN_MODAL_VOTE_PIN"),I=(0,o.N)("DESELECT_VOTE_PIN"),T=(0,o.N)("SELECT_VOTE_PIN"),v=(0,o.N)("INITIATED_VOTING_SESSION");(0,_.nF)(async(e,{uiSurface:r})=>{let n=e.getState(),{fileKey:a}=n.selectedView,i=n.mirror.appModel.votingSessionInfo.sessionId;if(!a||!i)return;let o=S(a),s="end-voting-session-failed",c=()=>{e.dispatch(E.of({key:o})),e.dispatch(h.F.enqueue({type:s,message:(0,p.t)("voting.visual_bell.end_voting_session_failed")}))};e.dispatch(E.Cx({key:o})),e.dispatch(h.F.dequeue({matchType:s})),await u.Ay.put(`/api/file/${a}/voting_sessions/${i}`,{in_progress:!1}).then(({status:n})=>{200===n?(e.dispatch(E.x2({key:o})),"MeetingsPanel"===r&&l.zl.set(f.Qs,{type:"SET_VIEW",payload:f.iN.PAST_VOTES})):c()}).catch(e=>{throw c(),e})});let S=e=>`end_voting_session_${e}`;(0,_.nF)((e,{source:r,usedCustomTitle:n,requestBody:a,uiSurface:i})=>{let{fileKey:o}=e.getState().selectedView;if(!o)return;let c=w(o),d=()=>{e.dispatch(E.of({key:c})),e.dispatch(h.F.enqueue({type:"start-voting-session-failed",message:(0,p.t)("voting.visual_bell.start_voting_session_failed")}))};e.dispatch(E.Cx({key:c})),e.dispatch(h.F.dequeue({matchType:"start-voting-session-failed"})),u.Ay.post(`/api/file/${o}/voting_sessions`,a).then(a=>{200===a.status?(e.dispatch(v({votingSessionId:a.data.meta.id})),"MeetingsPanel"===i&&l.zl.get(f.Qs).activeToolModal===f.sx.VOTING&&l.zl.set(f.Qs,{type:"SET_TOOL",payload:null}),e.dispatch(E.x2({key:c})),(0,s.sx)("start_voting_session",{source:r,usedCustomTitle:n,votingSessionId:a.data.meta.id,fileKey:o})):d()}).catch(e=>{throw d(),e})});let w=e=>`create_voting_session_${e}`;(0,_.nF)((e,{votingSessionId:r})=>{let n=e.getState().selectedView;if(!n.fileKey)return null;let a=u.Ay.del(`/api/file/${n.fileKey}/voting_sessions/${r}`);e.dispatch((0,m.Q)({promise:a,fallbackError:(0,p.t)("voting.modal.delete_voting_session_error")})),e.dispatch(h.F.enqueue({message:(0,p.t)("voting.modal.delete_voting_session_visual_bell")})),(0,d.f)(a,e.dispatch,L({votingSessionId:r})),(0,c.WB)().optimisticallyDelete({VotingSession:{[r]:null}},a)});let A=(0,_.nF)((e,r)=>{let n;let o=r.votingStage,s=e.getState(),l=s?.mirror?.appModel?.currentPage;if(o===a.W8Y.NO_SESSION){a.ofk.setVotingSessionInfo("",a.W8Y.NO_SESSION,0,l);return}let c=s?.openFile?.votingSessions;if(o===a.W8Y.ENDED){let e=r.sessionId;n=c?.find(r=>r.id===e&&!r.inProgress)}else n=c?.find(e=>e.inProgress);if(!n)return;let d=(0,i.oA)(n.pageNodeId);d&&(a.ofk.setVotingSessionInfo(n.id,o,n.userVoteLimit,d),o===a.W8Y.JOINED&&(e.dispatch(N()),s.mirror.selectionProperties.whiteboardNumSelectedByType?.STAMP&&(0,g.wr)()))}),N=(0,o.N)("DISMISS_JOIN_CONFIRMATION"),C=(0,o.N)("HIDE_JOIN_VOTING_SESSION_MODAL"),L=(0,o.N)("DELETE_VOTING_SESSION"),O=(0,o.N)("SET_VOTES_PER_USER_LIMIT"),R=(0,o.N)("SET_TITLE"),P=(0,o.N)("CLEAR_STATE")},103907:(e,r,n)=>{n.d(r,{$J:()=>s.qZS,AK:()=>g,H5:()=>l,I_:()=>E,Le:()=>h,Tv:()=>f,j9:()=>c,jp:()=>m,n6:()=>y,qN:()=>p,wq:()=>_});var a=n(411855),i=n(934480),o=n(711525),s=n(279453);let l="You are trying to use comments functionality but didn't wire a provider for comments",c=(0,a.createContext)(void 0);function d(){return(0,a.useContext)(c)}let u={};function m(){return function(e,r){let n=(0,a.useMemo)(()=>e?.status!=="loaded"?u:r(e.data),[e,r]),i=e?.status||"loading",s=e?.errors||[];return(0,a.useMemo)(()=>n===u||"loading"===i?(0,o.Xm)():"errors"===i?{status:i,data:null,errors:s}:{status:"loaded",errors:s,data:n},[i,s,n])}((0,a.useContext)(c),e=>e.file?.currentUserFileFollower||null)}function p(){let e=d();return!!e&&e.isUnresolvedLoaded}function h(){let e=d();return!!e&&e.isUnresolvedLoaded&&e.isResolvedLoaded}function _(){let e=d();return e?e.threads:(0,o.Xm)()}function g(e){let r=(0,a.useContext)(c);return(0,a.useMemo)(()=>{if(!r)throw Error(l);if("loaded"!==r.status||!r.data||!r.api.reactionsApi)return 0;let n=r.api.reactionsApi?.getReactions(e);return n?.length||0},[e,r])}function f(e,r){let n=(0,a.useContext)(c);return(0,a.useMemo)(()=>{if(!n)throw Error(l);return"loaded"===n.status&&n.data?{status:"loaded",data:function(e,r){if(!r)return{typed:[],users:[],yours:0,total:0};let n={};return r.sort((e,r)=>e.createdAt.getTime()-r.createdAt.getTime()).reduce((r,a)=>{let[o,s]=(0,i.Kh)(a.emoji);r.total++;let l=n[o];if(!l){let e={count:0,selected:!1,users:[],emoji:o,skinTonesToUsers:{}};r.typed.push(e),l=e,n[o]=e}let c={id:a.user.id,handle:a.user.handle,img_url:a.user.imgUrl};return null!==s&&(void 0===l.skinTonesToUsers[s]&&(l.skinTonesToUsers[s]=[]),l.skinTonesToUsers[s].push(c)),l.count++,l.users.push(c),l.selected=l.selected||a.userId===e,r},{typed:[],yours:0,total:0,users:[]})}(r,n.api.reactionsApi?.getReactions(e)),errors:n.errors}:(0,o.Xm)()},[e,r,n])}function E(){let e=(0,a.useContext)(c);if(!e)throw Error(l);return e.api}function y(){return function(e){if("loaded"!==e.status)return 0;let r=0;for(let n of e.data)if((n.anchored||n.isCanvasMention)&&!n.comments[0].resolved_at)for(let e of n.comments)e.isUnread&&r++;return r}(_())}},696097:(e,r,n)=>{n.d(r,{NX:()=>H});var a=n(411855),i=n(188507),o=n(171812),s=n(776250),l=n(609494),c=n(358145),d=n(966712),u=n(827697),m=n(915440),p=n(711525),h=n(886653),_=n(776621),g=n(437304),f=n(743282),E=n(455396),y=n(27087),b=n(975350),I=n(309249),T=n(809831),v=n(277810),S=n(654034),w=n(661843),A=n(912924),N=n(860178),C=n(279453),L=n(239671),O=n(860007),R=n(103907),P=n(736239),D=n(859624),k=n(297586),M=n(792608);class F{constructor(e){this.client=e}toggleReaction(e,r,n){if("loaded"!==this.client.subscription.status)throw Error("Unable to toggle reactions for unloaded subscription");return this.getReactions(e).find(n=>n.emoji===r&&n.fileCommentId===e&&n.userId===this.client.user.id)?this.removeReaction(e,r):this.addReaction(e,r,n)}async addReaction(e,r,n){let a=y.Ay.post(`/api/file/${this.client.fileKey}/comments/${e}/reactions`,{emoji:r,prototype_mode:n?.prototype_mode||!1,selected_view:n?.selectedView||"",quick_reply:n?.quickReply||!1});return this.client.optimistically(async(n,i,o)=>{let s=new Date,l=`${e}_${r}_${o.id}`;await i.optimisticallyCreate({CommentReaction:{[l]:{fileCommentId:e,emoji:r,fileKey:n.file.id,userId:o.id,user:{id:o.id,handle:o.handle,imgUrl:o.img_url},createdAt:s,sortTimestamp:s}}},a)}),await a}async removeReaction(e,r){let n=y.Ay.del(`/api/file/${this.client.fileKey}/comments/${e}/reactions`,{emoji:r});return this.client.optimistically(async(a,i,o)=>{let s=o.id,l=this.getReactions(e).filter(e=>e.emoji===r&&e.userId===s).map(e=>e.id),c=l?.reduce((e,r)=>({...e,[r]:null}),Object.create(null));await i.optimisticallyDelete({CommentReaction:c},n)}),await n}getReactions(e){if("loaded"!==this.client.subscription.status)throw Error("Unable to get reaction for unloaded subscription");let r=this.client.subscription.data.file;if(!r)throw Error("Unable to get reaction for unloaded subscription");if("reactions"in r)return r.reactions.filter(r=>r.fileCommentId===e);{let n=r.mobileCommentThread.find(r=>r.id===e);return n?n.reactions:[]}}}function x(e){return e.map(e=>({...e,id:e.id.toString()}))}class U{constructor(e){this.client=e}trackMissingCommentData(e,r,n,a,i,o){let s=!1;M.O.records[n.id]={parentId:n.parent_id,report:(r,l)=>{if(!s&&(s=!0,(0,_.kF)("comments_optimistic_updates","true"),(0,_.kF)("isLoadedComments",i.isLoadedComments?"true":"false"),(0,_.kF)("commentType",e),(0,_.x1)(r,l,{id:n.id,fileKey:this.client.fileKey,parentId:n.parent_id,pageId:n.client_meta?.page_id,userId:this.client.user.id,clientMeta:n.client_meta,...o}),this.client.livegraphClient)){let e=a(),n=null,i=null,o=null;for(let a of e)if("VIEW_QUERY_NODE.REMOVE_RESULT"===a.type||"STORE.ADD_INSTANCE"===a.type||"STORE.REMOVE_INSTANCE"===a.type||"SESSION.APPLY_MUTATIONS"===a.type||"SESSION.APPLY_SHADOW_MUTATIONS"===a.type||"SESSION.REMOVE_SHADOW_MUTATIONS"===a.type||"REQUEST_MESSAGE"===a.type&&"sync"===a.message.messageType||"RESPONSE_MESSAGE"===a.type&&"synced"===a.message.messageType||"RESPONSE_MESSAGE"===a.type&&"pendingMutations"===a.message.messageType)(0,_.Lo)(r,JSON.stringify(a));else if("VIEW_QUERY_NODE.ADD_RESULT"===a.type||"VIEW_QUERY_NODE.UPDATE_RESULT"===a.type){if(a.type===n&&a.queryId===i&&a.instance===o)continue;(0,_.Lo)(r,JSON.stringify(a)),n=a.type,i=a.queryId,o=a.instance}else"SESSION.NOTIFY_OBSERVERS"===a.type&&a.view._name.includes("Comments")&&(0,_.Lo)(r,JSON.stringify({type:"SESSION.NOTIFY_OBSERVERS",viewName:a.view._name}));(0,_.x1)(r,l)}}},setTimeout(()=>{let i=M.O.records[n.id];if(i||a(),delete M.O.records[n.id],"loaded"!==this.client.subscription.status)return;let o=this.client.loadedComments.some(e=>e.id===n.id||e.id===r);i&&!o?i.report(`${e} Never Appeared`,"Comment failed to appear within ten seconds of creation"):a()},1e4)}create(e,r){let n=(0,u.S6)(),{fileKey:a,messageMeta:i,attachments:o,clientMeta:c,pageId:m,uuid:p}=e;(0,s.sx)("New comment API create",{uuid:p});let h=(0,d.kc)().show_at_mention_invited_users?[...new Set((0,l.cs)(i))]:[],_=async e=>{let n=e.data?.reason;if(!n||"comment_validation_failure"!==n.reason||!r?.onValidationError)throw e;let l=n.failure_info,d=await r.onValidationError(x(l.users_without_view),x(l.ext_users_without_view),x(l.uninvitable_users));return d?((0,s.sx)("New comment API handling validation",{uuid:p}),y.Ay.post(`/api/file/${a}/comments`,{file_key:a,message_meta:i,attachments:o.map(e=>e.id),client_meta:c,page_id:m,prototype_mode:r?.prototypeMode,share_to_mentions:d.forceWithInvite,force:d.forceMentions,uuid:p,pending_mentions:h}).catch(_)):null},g=(0,D.e)(this.client.subscription),f=this.client.subscription.data?.file?.currentUserCommentReadStatus,E=y.Ay.post(`/api/file/${a}/comments`,{file_key:a,message_meta:i,attachments:o.map(e=>e.id),client_meta:c,page_id:m,prototype_mode:r?.prototypeMode,share_to_mentions:null===r.onValidationError,force:null===r.onValidationError,pending_mentions:h,uuid:p,...!f&&{all_read_at:S.gj.allReadAt}});return this.client.optimistically((e,r)=>{let n=this.client.loadedComments.map(e=>e.orderId||0),s=n.length>0?Math.max(...n):0,d=(0,l.Rc)(i);r.optimisticallyCreateWithUUID({Comment:{[p]:{uuid:p,key:a,userId:this.client.user.id,parentId:null,orderId:s+1,createdAt:new Date,resolvedAt:null,deletedAt:null,authorMeta:null,clientMeta:{x:c.x,y:c.y,nodeId:c.node_id||null,pageId:c.page_id||null,nodeOffset:c.node_offset||null,inFrame:c.in_frame||null,selectionBoxAnchor:c.selection_box_anchor||null,stablePath:c.stable_path||null},messageMeta:d,messageMetaStylized:d,user:{id:this.client.user.id,handle:this.client.user.handle,imgUrl:this.client.user.img_url},reactions:[],thumbnailUrl:null,isCanvasMention:!1,commentPin:null}}},E);let u=(0,v.Mu)(o,a,p);if(u&&r.optimisticallyCreate({CommentAttachment:u},E),!e.file.currentUserCommentReadStatus){let e=new Date;r.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${e.getTime()}`]:{userId:this.client.user.id,fileKey:this.client.fileKey,createdAt:e,allReadAt:S.gj.allReadAt,readComments:{},unreadComments:{}}}},E)}}),[E.catch(_).then(e=>{if(!e)return null;try{let a=e.data.meta;this.trackMissingCommentData("New Comment",p,a,n,{isLoadedComments:g},r)}catch{}return e}),p]}reply(e,r){let n=(0,u.S6)(),{threadId:a,threadUuid:i,messageMeta:o,attachments:c,uuid:d}=e,{fileKey:m}=this.client,p=(0,l.cs)(o),h=y.Ay.post(`/api/file/${m}/comments/${e.threadId}`,{file_key:m,uuid:d,message_meta:o,attachments:c.map(e=>e.id),prototype_mode:r?.prototypeMode,share_to_mentions:r.forceWithInvite||!1,force:r.forceMention||!1,tracking_context:r.trackingContext,pending_mentions:p}),_=(0,l.Rc)(o),g=(0,D.e)(this.client.subscription),{user:f}=this.client;return this.client.optimistically((e,r)=>{i?r.optimisticallyUpdateWithUUID({Comment:{[i]:{uuid:i,resolvedAt:null}}},h):r.optimisticallyUpdate({Comment:{[a]:{resolvedAt:null}}},h),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"reply",isOptimistic:!!i}),r.optimisticallyCreateWithUUID({Comment:{[d]:{uuid:d,key:m,userId:f.id,parentId:a,orderId:null,createdAt:new Date,resolvedAt:null,deletedAt:null,authorMeta:null,clientMeta:null,messageMeta:_,messageMetaStylized:_,user:{id:f.id,handle:f.handle,imgUrl:f.img_url},reactions:[],thumbnailUrl:null,isCanvasMention:!1,commentPin:null,attachments:c.map(e=>(0,v.QG)(e,m,d))}}},h);let n=(0,v.Mu)(c,m,d);n&&r.optimisticallyCreate({CommentAttachment:n},h)}),[h.then(e=>{if(!e)return null;let a=e.data.meta;return this.trackMissingCommentData("Reply Comment",d,a,n,{isLoadedComments:g},r),e}),d]}}class B{constructor(e){this.client=e}get commentReceipts(){return this}async markAsUnread(e){let r=this.client.subscription.data?.file?.currentUserCommentReadStatus,n=y.Ay.post(`/api/file/${this.client.fileKey}/unread_comments`,{comment_ids:[e],...!r&&{all_read_at:S.gj.allReadAt}});return this.client.optimistically(async(r,a,i)=>{let o=r.file.currentUserCommentReadStatus,s=new Date;if(o){let{[e]:r,...i}=o.readComments;await a.optimisticallyUpdate({CommentReadStatus:{[o.id]:{...o,allReadAt:S.gj.allReadAt,readComments:i,unreadComments:{...o.unreadComments,[e]:"true"}}}},n)}else await a.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${s.getTime()}`]:{userId:i.id,fileKey:this.client.fileKey,createdAt:s,allReadAt:S.gj.allReadAt,readComments:{},unreadComments:{[e]:"true"}}}},n)}),await n}async markAllAsRead(){let e=this.client.subscription.data?.file?.currentUserCommentReadStatus,r=y.Ay.del(`/api/file/${this.client.fileKey}/unread_comments`,{...!e&&{all_read_at:S.gj.allReadAt}});return this.client.optimistically(async(e,n,a)=>{let i=e.file.currentUserCommentReadStatus,o=new Date;i?await n.optimisticallyUpdate({CommentReadStatus:{[i.id]:{...i,allReadAt:o,readComments:{},unreadComments:{}}}},r):await n.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${o.getTime()}`]:{userId:a.id,fileKey:this.client.fileKey,createdAt:o,allReadAt:o,readComments:{},unreadComments:{}}}},r)}),await r}async markAsRead(e){let r=this.client.subscription.data?.file?.currentUserCommentReadStatus,n=y.Ay.del(`/api/file/${this.client.fileKey}/unread_comments`,{comment_ids:e,...!r&&{all_read_at:S.gj.allReadAt}});return this.client.optimistically(async(r,a,i)=>{let o=r.file.currentUserCommentReadStatus,s=new Date,l=e.reduce((e,r)=>({...e,[r]:s.toUTCString()}),{});o?await a.optimisticallyUpdate({CommentReadStatus:{[o.id]:{...o,readComments:{...o.readComments,...l},unreadComments:Object.keys(o.unreadComments).filter(r=>!e.includes(r)).reduce((e,r)=>(e[r]="true",e),{})}}},n):await a.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${s.getTime()}`]:{userId:i.id,fileKey:this.client.fileKey,createdAt:s,allReadAt:S.gj.allReadAt,readComments:l,unreadComments:{}}}},n)}),await n}}let V=(0,h.xx)(e=>{let r=e=>(e.hasOwnProperty("transform")||Object.defineProperty(e,"transform",{get:function(){return{filter:n=>r(e.filter(n)),map:n=>r(e.map(n)),join:n=>r([...e,...n||[]])}}}),e);return r(e)});function G(e,r,n){let i=a.useMemo(()=>{if("loaded"!==n.status)return new Set([]);let e=n.data.file;return new Set(e?"comments"in e?e.comments.map(e=>e.id):e.resolvedComments.map(e=>e.id):[])},[n]),o=(0,c.ZC)(i),{removed:s}=a.useMemo(()=>(0,g.Zv)(i,o),[i,o]),l=a.useCallback(e,r);a.useEffect(()=>{s.forEach(e=>{l(e)})},[l,s])}function H(e){let{userId:r,file:n,activeId:s,anchorPositions:l,boundingBoxPositions:c,DEPRECATED_updateWatchedNodeIds:u,updateWatchedStablePaths:h,getPageIdsForNodes:_,children:g}=e,y=a.useRef({}),v=(0,T.E3)()===L.nT.Whiteboard,S=!!(0,d.kc)().xr_debounce_threshold,x=!!(0,d.kc)().async_spotlight,H=n?.key,W=!!H,K=a.useMemo(()=>({fileKey:H??""}),[H]),Y=a.useMemo(()=>(0,f.g)(),[K]),$=(0,m.Rs)(R.$J,K,{enabled:W,traceId:Y}),j=(0,m.Rs)(C.ZBn,K,{enabled:W}),z=(0,m.Rs)(C.qRE,K,{enabled:S&&W}),q=(0,m.Rs)(C.bCq,K,{enabled:x&&W}),X=(0,m.Rs)(C.gkf,K,{enabled:v&&W}),J=(0,i.d4)(e=>e.comments.lgPendingUuidToServerIdMap),Z=(0,i.wA)(),Q=a.useMemo(()=>{if("loaded"!==$.status||!$.data.file)return $;let e=V($.data.file.comments).transform.filter(e=>null===e.resolvedAt);if("loaded"===j.status){let r=j.data.file?.resolvedComments;e=e.transform.join(r)}let r={...$.data.file,comments:e};return{...$,data:{...$.data,file:r}}},[$,j]);a.useMemo(()=>{"loaded"===Q.status&&Q.data?.file?.comments?.forEach(e=>{e.id in J?(y.current[e.id]=e,e.id=J[e.id]):e.uuid&&e.uuid in J&&y.current[e.uuid]&&y.current[e.uuid]!==e&&(Z(b.pI({commentUuid:e.uuid})),delete y.current[e.uuid])})},[Z,Q,J]);let ee=(0,i.d4)(e=>e.mirror.appModel.pagesList),{commentsAttachedToNodes:et,commentThreadNodeIds:er,commentThreadStablePaths:en}=a.useMemo(()=>{if("loaded"!==Q.status||!Q.data.file)return{commentThreadsNodeIds:[],commentsAttachedToNodes:[]};let e=[],r=new Set,n=new Set;return Q.data.file.comments.forEach(a=>{if(null===a.parentId){let i=a.clientMeta?.nodeId,o=a.clientMeta?.stablePath;o&&h?(e.push(a),n.add(`[${o.join(",")}]`)):i&&u&&(e.push(a),r.add(i))}}),{commentsAttachedToNodes:e,commentThreadNodeIds:r,commentThreadStablePaths:n}},[Q,u,h]),ea=a.useMemo(()=>{if("loaded"!==Q.status||!Q.data.file||S&&!z.data?.file)return[];let e=new Set(er);return S&&(0,A.N)(z.data.file.feedPosts).forEach(r=>{e.add(r)}),Array.from(e)},[Q,z,S,er]),ei=a.useMemo(()=>"loaded"===Q.status&&Q.data.file?Array.from(new Set(en)):[],[Q,en]);a.useEffect(()=>{u&&u(ea),h&&h(ei)},[u,ea,h,ei]);let eo=(0,w.W9)(r,Q,s,l,_,ee),es=(0,w.gu)(r,X,e.activeId),el=(0,O.i)(z,e.activeId,_,c),ec=(0,E.Z)(q),ed=a.useMemo(()=>{if("loaded"!==Q.status||S&&"loaded"!==z.status||v&&"loaded"!==X.status)return(0,p.gB)([]);let e=[];return eo.data&&(e=e.concat(eo.data)),es.data&&(e=e.concat(es.data)),el.data&&(e=e.concat(el.data)),ec.data&&(e=e.concat(ec.data)),(0,p.gB)(e)},[Q.status,S,z.status,v,X.status,eo.data,es.data,el.data,ec.data]),eu=function(e){let r=(0,m.ZA)(),n=(0,N.iZ)(),{args:i,subscription:s}=e,[l,c]=a.useState(()=>{if(n)return new D.I(i,s,n)});return a.useEffect(()=>{if(!n){c(void 0);return}if(!l||!(0,o.c2)(l.args,i)){c(new D.I(i,s,n));return}},[l,i,s,n,r]),l&&(n&&(l.user=n),l.subscription=s,l.livegraphClient=r),a.useMemo(()=>l?{commentReceipts:new B(l),reactionsApi:new F(l),writeAPI:new U(l),pinApi:new k.xI(l)}:{},[l])}({args:K,subscription:Q}),em=(0,P.r)({args:K,subscription:z});eu.canvasMentionReceipts=(0,I.pf)({canvasMentionArgs:K,canvasMentionSubscription:X}),(0,w.Hu)(et,{enabled:!!(0,d.kc)().comments_absolute_positioning}),G(e=>{M.O.records[e]?.report?.("New Comment Missing","Comment disappeared within ten seconds of creation")},[],$),G(e=>{M.O.records[e]?.report?.("New Resolved Comment Missing","Resolved comment disappeared within ten seconds of creation")},[],j);let ep=a.useMemo(()=>W?{...Q,api:eu,feedApi:em,threads:ed,isUnresolvedLoaded:"loaded"===$.status,isResolvedLoaded:"loaded"===j.status}:{status:"loading",data:null,errors:null,threads:(0,p.Xm)(),api:{},isUnresolvedLoaded:!1,isResolvedLoaded:!1},[W,Q,eu,em,ed,$.status,j.status]);return a.createElement(R.j9.Provider,{value:ep},g)}},465201:(e,r,n)=>{n.d(r,{t:()=>o});var a=n(966712),i=n(939863);function o(){let e=(0,a.kc)().ce_tv_fill_hug_suggest?[{separator:!0},{action:"set-selection-hug-horizontal",displayText:(0,i.t)("fullscreen_actions.set-hug-width")},{action:"set-selection-hug-vertical",displayText:(0,i.t)("fullscreen_actions.set-hug-height")},{action:"set-selection-fill-horizontal",displayText:(0,i.t)("fullscreen_actions.set-fill-width")},{action:"set-selection-fill-vertical",displayText:(0,i.t)("fullscreen_actions.set-fill-height")}]:[];return{name:"multi-stack-selection-submenu",featureFlags:["auto_auto_layout"],flags:["design","edit","slides"],children:[{action:"run-multi-stack-auto-layout",displayText:(0,i.t)("fullscreen_actions.run-multi-stack-auto-layout")},{action:"destroy-all-auto-layout",displayText:(0,i.t)("fullscreen_actions.destroy-all-auto-layout")},{separator:!0},{action:"resize-to-fit",displayText:(0,i.t)("fullscreen_actions.resize-to-fit")},...e]}}},107877:(e,r,n)=>{n.d(r,{E2:()=>A,M5:()=>l,M6:()=>y,QB:()=>b,Tb:()=>S,V9:()=>p,W_:()=>d,XG:()=>m,ZO:()=>s,_O:()=>w,aY:()=>v,eg:()=>_,s0:()=>c,vY:()=>T});var a=n(330654),i=n(762194),o=n(99506),s=(e=>(e.USERS="users",e.TEAMS="teams",e.ORGS="orgs",e.PLUGINS="plugins",e.WIDGETS="widgets",e.HUB_FILES="hub_files",e.PROFILES="profiles",e.CATEGORIES="community_categories",e))(s||{}),l=(e=>(e.HUB_FILE_DUPLICATED="Hub File Duplicated",e.PLUGIN_INSTALLED="Hub Plugin Installed",e.PLUGIN_UNINSTALLED="Hub Plugin Uninstalled",e.WIDGET_INSTALLED="Hub Widget Installed",e.WIDGET_UNINSTALLED="Hub Widget Uninstalled",e.SLIDE_TEMPLATE_USED="slide_template_used",e.RESOURCE_LIKE="resource_like",e.RESOURCE_UNLIKE="resource_unlike",e.SEARCH_QUERY_RESULT="search_query_result",e))(l||{}),c=(e=>(e.PLUGIN_INSTALL="community_hub_plugin_install",e.PLUGIN_UNINSTALL="community_hub_plugin_uninstall",e.PROFILE_FOLLOW="community_hub_follow",e.PROFILE_UNFOLLOW="community_hub_unfollow",e.HUB_FILE_LIKE="community_hub_file_like",e.HUB_FILE_UNLIKE="community_hub_file_unlike",e.PLUGIN_LIKE="community_plugin_like",e.PLUGIN_UNLIKE="community_plugin_unlike",e.WIDGET_LIKE="community_widget_like",e.WIDGET_UNLIKE="community_widget_unlike",e.SHARE_TWITTER="community_hub_share_twitter",e.LANDING_PAGE_TO_CURATED_PAGE_BUTTON="landing_page_to_curated_page_button",e.SHARE_FACEBOOK="community_hub_share_facebook",e.SHARE_LINK="community_hub_share_link",e.CREATE_PROFILE="community_hub_create_profile",e.COMMUNITY_OPT_IN="community_hub_opt_in",e.UPDATE_PROFILE_HANDLE="community_hub_update_handle",e.PLUGIN_INSTALL_CONFIRMATION_MODAL_SHOWN="community_hub_plugin_install_warning_shown",e.PLUGIN_INSTALL_CONFIRMATION_MODAL_CANCEL="community_hub_plugin_install_warning_cancel",e.SEE_MORE_IN_COMMUNITY="see_more_in_community",e.FIND_MORE_PLUGINS="find_more_plugins",e))(c||{}),d=(e=>(e.PROFILE_ADMIN_MENU_OPEN="Community browse menu opened",e))(d||{}),u=(e=>(e.FIGJAM="figjam",e))(u||{}),m=(e=>(e.PLUGINS="plugins",e.FILES="files",e.CREATORS="creators",e.FIGJAM_PLUGINS="figjam_plugins",e.FIGMA_DESIGN_PLUGINS="figma_design_plugins",e.WIDGETS="widgets",e.FIGJAM_WIDGETS="figjam_widgets",e.FIGMA_DESIGN_WIDGETS="figma_design_widgets",e))(m||{});function p(e){switch(e){case"figjam_plugins":case"figjam_widgets":return o._Y.WHITEBOARD;case"figma_design_plugins":case"figma_design_widgets":return o._Y.DESIGN;default:return(0,i.r)()}}var h=(e=>(e.HAS_RESTORED="has_restored",e.RESTORE_SMOOTH="restore_smooth",e.RESTORE="restore",e))(h||{}),_=(e=>(e.POPULAR="popular",e.CREATED_AT="created_at",e.FOLLOWING_FEED="feed",e.INSTALLS_DESC="installs",e.RUNS_DESC="runs",e.LAST_UPDATED_DESC="updated_at",e.INSTALLS_ASC="installs_asc",e.RUNS_ASC="runs_asc",e.LAST_UPDATED_ASC="updated_at_asc",e))(_||{}),g=(e=>(e.CREATED_AT="created_at",e.FOLLOWING_FEED="feed",e))(g||{}),f=(e=>(e.DESC="desc",e.ASC="asc",e))(f||{}),E=(e=>(e.by_creator="by_creator",e.by_tags="by_tags",e))(E||{});function y(e){return a.object({types:a.array(a.nativeEnum(E)),content:a.array(e)})}function b(e){switch(e){case"installs_asc":return{sort:"installs",order:"asc"};case"installs":return{sort:"installs",order:"desc"};case"runs_asc":return{sort:"runs",order:"asc"};case"runs":return{sort:"runs",order:"desc"};case"updated_at_asc":return{sort:"last_updated",order:"asc"};case"updated_at":return{sort:"last_updated",order:"desc"};default:return{sort:e,order:"desc"}}}let I={resourceIds:{},unmergedResourceIds:[],loading:!1};({...I});var T=(e=>(e.NAME="name",e.PUBLISHER="publisher",e.INSTALLS="installs",e.RUNS="runs",e.CREATED_AT="created_at",e.LAST_UPDATED="last_updated",e))(T||{}),v=(e=>(e.FREE_HUB_FILE_LICENSE="https://creativecommons.org/licenses/by/4.0/",e.FREE_PLUGIN_LICENSE="https://www.figma.com/community-resource-license/",e.FREE_RESOURCE_LICENSE="https://www.figma.com/community-free-resource-license/",e.PAID_RESOURCE_LICENSE="https://www.figma.com/community-paid-resource-license/",e))(v||{});let S="checkout",w="freemium_preview",A="1"},992271:(e,r,n)=>{n.d(r,{BG:()=>S,Fh:()=>N,LM:()=>I,L_:()=>A,UV:()=>b,WT:()=>T,hY:()=>d,ln:()=>w,qt:()=>v});var a=n(432258),i=n(630372),o=n(969468),s=n(831474),l=n(45259);let c=[{deviceName:"Slide 16:9",framePresetSize:{x:1920,y:1080}},{deviceName:"Slide 4:3",framePresetSize:{x:1024,y:768}}],d=Object.create(null);for(let e of[o.eo,s.o,l.t,i.E])for(let r of e)d[r.presetIdentifier]=r;function u(e,r){let n=new Set,a=[];for(let i of e)n.has(i.deviceName)||(n.add(i.deviceName),i.archived?r?.push(i.deviceName):a.push(i.deviceName));return a}let m=[],p=u(o.eo,m),h=u(s.o,m),_=u(l.t,m),g=u(i.E,m),f=Object.create(null);for(let e in d){let r=d[e],n=r.deviceName;n in f||(f[n]=[]),f[n].push(r)}let E=(e,r)=>{for(let n of[o.eo,s.o,l.t,i.E])for(let a of n)if(a.framePresetSize.x===e&&a.framePresetSize.y===r)return a;return null};var y=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.PHONE=1]="PHONE",e[e.TABLET=2]="TABLET",e[e.WATCH=3]="WATCH",e[e.DESKTOP=4]="DESKTOP",e))(y||{});let b={1:p,2:h,3:_,4:g,0:[]},I={1:u(o.eo.filter(function(e){return!0===e.isSuggested})).slice(0,5),2:u(s.o).slice(0,5),3:u(l.t).slice(0,5),4:u(i.E).slice(0,5),0:[]};function T(e,r){let n=d[r.presetIdentifier];return e.map(e=>e===n.deviceName?null:N(e,r)).filter(a.Vq)}function v(e){let r=d[e];if(null==r)return 0;let n=r.deviceName;return -1!==p.indexOf(n)?1:-1!==h.indexOf(n)?2:-1!==_.indexOf(n)?3:-1!==g.indexOf(n)?4:0}function S(e,r){for(let n of c)if(n.framePresetSize.x===e&&n.framePresetSize.y===r)return{type:"PRESENTATION",presetIdentifier:"",portraitDeviceSize:{x:0,y:0},rotation:"NONE"};let n=E(e,r);return null!=n?{type:"PRESET",presetIdentifier:n.presetIdentifier,portraitDeviceSize:n.framePresetSize,rotation:"NONE"}:null!=(n=E(r,e))&&function(e,r){if("NONE"===e||"PRESENTATION"===e)return!1;if("CUSTOM"===e)return!0;if("PRESET"===e&&null!=r){let e=d[r];if(null!=e){let r=-1!==_.indexOf(e.deviceName),n=-1!==g.indexOf(e.deviceName);return!r&&!n}}return!1}("PRESET",n.presetIdentifier)?{type:"PRESET",presetIdentifier:n.presetIdentifier,portraitDeviceSize:n.framePresetSize,rotation:"CCW_90"}:null}function w(e){let r=v(e||"");return 4!==r&&0!==r}let A=e=>!!function(e){let r=d[e];return r?.inlinePreviewInfo||null}(e);function N(e,r){let n=d[e]||f[e][0];if(r&&"PRESET"===r.type){let a=d[r.presetIdentifier],i=a.hideUnlessActive&&!a.archived&&n.framePresetSize.x===a.framePresetSize.x&&n.framePresetSize.y===a.framePresetSize.y;if(a&&a.deviceName===e)n=a;else if(!i&&n.hideUnlessActive&&!n.archived)return null}else if(n.hideUnlessActive&&!n.archived)return null;return n}},457858:(e,r,n)=>{n.d(r,{$W:()=>u,fS:()=>m});var a=n(939863);let i=[{name:"Android Compact",width:412,height:917,i18nName:()=>(0,a.t)("presets.android_compact")},{name:"Android Medium",width:700,height:840,i18nName:()=>(0,a.t)("presets.android_medium")},{name:"iPhone 16",width:393,height:852,i18nName:()=>(0,a.t)("presets.i_phone_16")},{name:"iPhone 16 Pro",width:402,height:874,i18nName:()=>(0,a.t)("presets.i_phone_16_pro")},{name:"iPhone 16 Pro Max",width:440,height:956,i18nName:()=>(0,a.t)("presets.i_phone_16_pro_max")},{name:"iPhone 16 Plus",width:430,height:932,i18nName:()=>(0,a.t)("presets.i_phone_16_plus")},{name:"iPhone 14 & 15 Pro Max",width:430,height:932,i18nName:()=>(0,a.t)("presets.i_phone_14_and_15_pro_max")},{name:"iPhone 14 & 15 Pro",width:393,height:852,i18nName:()=>(0,a.t)("presets.i_phone_14_and_15_pro")},{name:"iPhone 13 & 14",width:390,height:844,i18nName:()=>(0,a.t)("presets.i_phone_13_and_14")},{name:"iPhone 14 Plus",width:428,height:926,i18nName:()=>(0,a.t)("presets.i_phone_14_plus")},{name:"iPhone 13 mini",width:375,height:812,i18nName:()=>(0,a.t)("presets.i_phone_13_mini")},{name:"iPhone SE",width:320,height:568,i18nName:()=>(0,a.t)("presets.i_phone_se")}],o=[{name:"Android Expanded",width:1280,height:800,i18nName:()=>(0,a.t)("presets.android_expanded")},{name:"Surface Pro 8",width:1440,height:960,i18nName:()=>(0,a.t)("presets.surface_pro_8")},{name:"iPad mini 8.3",width:744,height:1133,i18nName:()=>(0,a.t)("presets.i_pad_mini_8_3")},{name:'iPad Pro 11"',width:834,height:1194,i18nName:()=>(0,a.t)("presets.i_pad_pro_11")},{name:'iPad Pro 12.9"',width:1024,height:1366,i18nName:()=>(0,a.t)("presets.i_pad_pro_12_9")}],s=[{name:"MacBook Air",width:1280,height:832,i18nName:()=>(0,a.t)("presets.mac_book_air_m2")},{name:'MacBook Pro 14"',width:1512,height:982,i18nName:()=>(0,a.t)("presets.mac_book_pro_14")},{name:'MacBook Pro 16"',width:1728,height:1117,i18nName:()=>(0,a.t)("presets.mac_book_pro_16")},{name:"Desktop",width:1440,height:1024,i18nName:()=>(0,a.t)("presets.desktop")},{name:"Wireframe",width:1440,height:1024,i18nName:()=>(0,a.t)("community.categories.wireframe")},{name:"TV",width:1280,height:720,i18nName:()=>(0,a.t)("presets.tv")}],l=[{name:"Slide 16:9",width:1920,height:1080,i18nName:()=>(0,a.t)("presets.slide_16_9")},{name:"Slide 4:3",width:1024,height:768,i18nName:()=>(0,a.t)("presets.slide_4_3")}],c=[{name:"A4",width:595,height:842,i18nName:()=>(0,a.t)("presets.a_4")},{name:"A5",width:420,height:595,i18nName:()=>(0,a.t)("presets.a_5")},{name:"A6",width:297,height:420,i18nName:()=>(0,a.t)("presets.a_6")},{name:"Letter",width:612,height:792,i18nName:()=>(0,a.t)("presets.letter")},{name:"Tabloid",width:792,height:1224,i18nName:()=>(0,a.t)("presets.tabloid")}],d=p(Object.values({phonePresets:i,tabletPresets:o,desktopPresets:s,presentationPresets:l,watchPresets:[{name:"Apple Watch Series 10 42mm",width:187,height:223,i18nName:()=>(0,a.t)("presets.apple_watch_series_10_42_mm")},{name:"Apple Watch Series 10 46mm",width:208,height:248,i18nName:()=>(0,a.t)("presets.apple_watch_series_10_46_mm")},{name:"Apple Watch 41mm",width:176,height:215,i18nName:()=>(0,a.t)("presets.apple_watch_41_mm")},{name:"Apple Watch 45mm",width:198,height:242,i18nName:()=>(0,a.t)("presets.apple_watch_45_mm")},{name:"Apple Watch 44mm",width:184,height:224,i18nName:()=>(0,a.t)("presets.apple_watch_44_mm")},{name:"Apple Watch 40mm",width:162,height:197,i18nName:()=>(0,a.t)("presets.apple_watch_40_mm")}],paperPresets:c,socialMediaPresets:[{name:"Twitter post",width:1200,height:675,i18nName:()=>(0,a.t)("presets.twitter_post")},{name:"Twitter header",width:1500,height:500,i18nName:()=>(0,a.t)("presets.twitter_header")},{name:"Facebook post",width:1200,height:630,i18nName:()=>(0,a.t)("presets.facebook_post")},{name:"Facebook cover",width:820,height:312,i18nName:()=>(0,a.t)("presets.facebook_cover")},{name:"Instagram post",width:1080,height:1080,i18nName:()=>(0,a.t)("presets.instagram_post")},{name:"Instagram story",width:1080,height:1920,i18nName:()=>(0,a.t)("presets.instagram_story")},{name:"Dribbble shot",width:400,height:300,i18nName:()=>(0,a.t)("presets.dribbble_shot")},{name:"Dribbble shot HD",width:800,height:600,i18nName:()=>(0,a.t)("presets.dribbble_shot_hd")},{name:"LinkedIn cover",width:1584,height:396,i18nName:()=>(0,a.t)("presets.linked_in_cover")}],figmaPresets:[{name:"Plugin icon",width:128,height:128,i18nName:()=>(0,a.t)("presets.plugin_icon")},{name:"Profile banner",width:1680,height:240,i18nName:()=>(0,a.t)("presets.profile_banner")},{name:"Plugin / file cover",width:1920,height:1080,i18nName:()=>(0,a.t)("presets.plugin_file_cover")}],archivedPresets:[{name:"iPhone 13 Pro Max",width:428,height:926,i18nName:()=>(0,a.t)("presets.i_phone_13_pro_max")},{name:"iPhone 13 / 13 Pro",width:390,height:844,i18nName:()=>(0,a.t)("presets.i_phone_13_13_pro")},{name:"iPhone 11 Pro Max",width:414,height:896,i18nName:()=>(0,a.t)("presets.i_phone_11_pro_max")},{name:"iPhone 11 Pro / X",width:375,height:812,i18nName:()=>(0,a.t)("presets.i_phone_11_pro_x")},{name:"iPhone 8 Plus",width:414,height:736,i18nName:()=>(0,a.t)("presets.i_phone_8_plus")},{name:"iPhone 8",width:375,height:667,i18nName:()=>(0,a.t)("presets.i_phone_8")},{name:"Android Small",width:360,height:640,i18nName:()=>(0,a.t)("presets.android_small")},{name:"Android Large",width:360,height:800,i18nName:()=>(0,a.t)("presets.android_large")},{name:"Google Pixel 2",width:411,height:731,i18nName:()=>(0,a.t)("presets.google_pixel_2")},{name:"Google Pixel 2 XL",width:411,height:823,i18nName:()=>(0,a.t)("presets.google_pixel_2_xl")},{name:"iPad mini 5",width:768,height:1024,i18nName:()=>(0,a.t)("presets.i_pad_mini_5")},{name:"Surface Pro 4",width:1368,height:912,i18nName:()=>(0,a.t)("presets.surface_pro_4")},{name:"MacBook",width:1152,height:700,i18nName:()=>(0,a.t)("presets.mac_book")},{name:"MacBook Pro",width:1440,height:900,i18nName:()=>(0,a.t)("presets.mac_book_pro")},{name:"Surface Book",width:1500,height:1e3,i18nName:()=>(0,a.t)("presets.surface_book")},{name:"Apple Watch 42mm",width:156,height:195,i18nName:()=>(0,a.t)("presets.apple_watch_42_mm")},{name:"Apple Watch 38mm",width:136,height:170,i18nName:()=>(0,a.t)("presets.apple_watch_38_mm")},{name:"iMac",width:1280,height:720,i18nName:()=>(0,a.t)("presets.i_mac")},{name:"Macintosh 128k",width:512,height:342,i18nName:()=>(0,a.t)("presets.mac_128k")}]})),u=p([i,s,l]);function m(e,r=d){let n=null;for(let a of Object.values(r)){if(e.width===a.width&&e.height===a.height)return a;e.width!==a.height||e.height!==a.width||n||(n=a)}return n}function p(e){return e.reduce((e,r)=>{for(let n of r)e[n.name]=n;return e},{})}p([i,o,c])},324597:(e,r,n)=>{function a(e){return"children"in e||"childDropdown"in e}function i(e){return"action"in e||"callback"in e}function o(e){return"separator"in e}function s(e){return"header"in e}function l(e){return"render"in e}function c(e,r){var n;return!!r.checked||null!=r.property&&("string"==typeof(n=r.property)?e[n]:n.getCopy())===r.propertyValue}function d(e,r){return"string"==typeof r?e[r]:r.getCopy()}function u(e){return e.action||e.name}n.d(r,{Dz:()=>u,M3:()=>h,MH:()=>g,TV:()=>a,WJ:()=>c,_o:()=>i,_p:()=>p,f4:()=>d,gN:()=>s,hV:()=>y,id:()=>l,k$:()=>o,lW:()=>E,pn:()=>f,rH:()=>m,u2:()=>_});let m="edit-menu",p="view-menu",h="object-menu",_="vector-menu",g="text-menu",f="arrange-menu",E="preferences-menu",y="figma-account-menu"},349410:(e,r,n)=>{n.d(r,{CS:()=>k,Cv:()=>J,FC:()=>q,Gm:()=>Y,LQ:()=>er,Mk:()=>R,Mx:()=>F,Ns:()=>Q,WZ:()=>B,Xs:()=>ee,Xt:()=>z,Yz:()=>K,cK:()=>j,e5:()=>L,fn:()=>H,ih:()=>G,jb:()=>M,ji:()=>V,kO:()=>P,kX:()=>U,sh:()=>C,tk:()=>et,uL:()=>x,y:()=>N,yq:()=>Z,zq:()=>$});var a=n(411855),i=n(188507),o=n(786013),s=n(414507);n(181912);var l=n(966712),c=n(374626),d=n(563706),u=n(776621),m=n(647899),p=n(750293),h=n(226055),_=n(385326);n(723239),n(875847);var g=n(106757),f=n(335682),E=n(694687);n(860178);var y=n(99506),b=n(243987),I=n(556261),T=n(56099),v=n(984968),S=n(668860),w=n(36816),A=n(463546);function N(){let{getConfig:e}=(0,m.I7)("exp_at_mention_invited_users");return(0,a.useCallback)(r=>!!function({showExpAtMentionInvite:e,isDraftFile:r,isFigmaDesign:n,inOrg:a,isMobile:i}){return!(r||i||!e||!n||a)}(r)&&"variant"===e().get("treatment",""),[e])}function C(e){let{getConfig:r}=(0,m.I7)("exp_library_upsells_v1");return!!e&&!!r().getValue("show_library_upsell",!1)}function L({userId:e,teams:r,rolesByTeamId:n,getM0Config:a,getM1Config:i}){if(!(0,l.kc)().close_starter_team_loophole)return!1;let o=O(e,r,n);return 0!==o&&(1===o?a().get("should_block_second_starter_team",!1):i().get("should_block_more_than_one_starter_team",!1))}function O(e,r,n){let a=0,i={};for(let o of(r.forEach(e=>i[e.id]=e),Object.keys(n))){let r=i[o],s=n[o][e];r&&s&&s.level===S.e6.OWNER&&r.starter_team&&!r.org_team&&!r.student_team&&null===r.subscription&&null===r.deleted_at&&a++}return a}function R(e,r,n){return!!(0,l.kc)().close_starter_team_loophole&&0===O(e,r,n)&&(0,l.kc)().close_starter_loophole_team_one}function P(){let{getConfig:e}=(0,m.I7)("exp_pro_tier_onboarding");return(0,a.useCallback)(()=>e().get("show_pro_onboarding",!1),[e])}let D={component:"useGetExpDevModeGraceDays",migrationGroup:T.L.GROUP_2};function k(){let e=(0,I.yN)({...D,attribute:"isCurrentOrg",legacy:(e,r)=>!!r,migrated:e=>e?.key.type===y.OL.ORG}),r=(0,I.FR)(D),n=(0,I.wy)({...D,attribute:"currentPaidPlanUserType",legacy:(n,a)=>e&&a?y.h4.ORG_USER:r&&n?y.h4.TEAM_USER:null,migrated:e=>e?.key.type??null}),{getConfig:i}=(0,m.I7)("exp_dev_mode_grace_period_v2_org"),{getConfig:s}=(0,m.I7)("exp_dev_mode_grace_period_v2_team");return(0,a.useCallback)(()=>{let a=!e&&r?o.zi5:o.W7o;switch(n){case y.h4.ORG_USER:return a=i().get("dev_mode_grace_day",o.W7o),{inExperiment:i().get("in_experiment",!1),devModeGraceDays:a};case y.h4.TEAM_USER:return a=s().get("dev_mode_grace_day",o.zi5),{inExperiment:s().get("in_experiment",!1),devModeGraceDays:a};default:return{inExperiment:!1,devModeGraceDays:o.W7o}}},[n,i,s,e,r])}function M(){let{getConfig:e}=(0,m.I7)("exp_pro_viewer_to_editor_v1");return(0,a.useCallback)(()=>e().get("show_viewer_editor_nudge",!1),[e])}function F(){let{getConfig:e}=(0,m.I7)("exp_in_product_sales_contact_form");return!!e().getValue("has_updated_sales_contact_form",!1)}function x(){let{getConfig:e}=(0,m.I7)("exp_org_viewer_to_editor_v1");return(0,a.useCallback)(()=>e().get("show_viewer_editor_nudge",!1),[e])}function U(e){return e().get("switch_button_hierarchy",!1)}function B(e,r){return!!r.subscription&&!r.org_team&&e().get("hide_toolbar_request_cta",!1)}function V(e){return!!(0,l.tl)().org_id&&e().get("hide_toolbar_request_cta",!1)}var G=(e=>(e.CONTROL="control",e.VARIANT_A="variantA",e.VARIANT_B="variantB",e))(G||{});function H(){let{getConfig:e}=(0,m.I7)("exp_fbg_navigation_updates"),r=(0,v.ol)(),n=r&&(0,l.kc)().ps_benchmark,a=r&&!(0,b.w5)(r);return n&&a?e().getValue("treatment","control"):"control"}var W=(e=>(e.CONTROL="control",e.DYNAMIC_NUX="dynamic_nux",e.SIGNAL_NUX="signal_nux",e))(W||{});function K(){let{getConfig:e}=(0,m.I7)("exp_resurrect_locked_teams"),r=(0,v.cD)();return(0,a.useCallback)(n=>!!r&&!!n&&!!e().getValue("show_locked_state_redesign",!1),[e,r])}function Y(){let e=(0,m.I7)("slides_starter_team_limits_exp");return!!e?.getConfig().getValue("is_frontend_on",!1)}function $(){let{getConfig:e}=(0,m.I7)("exp_viewer_upgrade_awareness");return(0,a.useCallback)(()=>!!e().getValue("enabled",!1),[e])}async function j(){return(await (0,m.hW)("exp_viewer_upgrade_awareness")).get("enabled",!1)}function z(e){let{getConfig:r}=(0,m.I7)(e?"exp_drafts_copy_link_org":"exp_drafts_copy_link_team"),n=X();return(!!e||!n)&&!!r().getValue("has_drafts_copy_link_experience",!1)}function q(){let e=(0,f.q5)(),r=(0,h.GS)(),n=(0,c.md)(_.D),i={component:"useIsInAskToEditRedesignExp",migrationGroup:T.L.GROUP_2},o=(0,I.yN)({...i,attribute:"isCurrentOrg",legacy:(e,r)=>!!r,migrated:e=>e?.key.type===y.OL.ORG}),s=(0,I.FR)(i),l=(0,I.wy)({...i,attribute:"currentPaidPlanUserType",legacy:(e,r)=>o&&r?y.h4.ORG_USER:s&&e?y.h4.TEAM_USER:null,migrated:e=>o||s?e?.key.type??null:null}),d=(0,I.wy)({...i,attribute:"isDesignViewerRestricted",legacy:(e,r)=>r?.design_paid_status===y.El.RESTRICTED||e?.design_paid_status===w.Zf.RESTRICTED,migrated:e=>e?.designPaidStatus===y.dQ.RESTRICTED}),u=(0,I.wy)({...i,attribute:"isWhiteboardViewerRestricted",legacy:(e,r)=>r?.whiteboard_paid_status===y.El.RESTRICTED||e?.whiteboard_paid_status===w.Zf.RESTRICTED,migrated:e=>e?.whiteboardPaidStatus===y.dQ.RESTRICTED}),p=X(),{getConfig:g}=(0,m.I7)("exp_ask_to_edit_redesign_team"),{getConfig:E}=(0,m.I7)("exp_ask_to_edit_redesign_org");return(0,a.useCallback)(()=>{if(!e||e.editorType!==y._Y.DESIGN&&e.editorType!==y._Y.WHITEBOARD||!r||n===A.dvJ.id||e.editorType===y._Y.DESIGN&&!d||e.editorType===y._Y.WHITEBOARD&&!u||l===y.h4.TEAM_USER&&p)return!1;switch(l){case y.h4.ORG_USER:return E().getValue("is_redesigned",!1);case y.h4.TEAM_USER:return g().getValue("is_redesigned",!1);default:return!1}},[l,E,g,e,r,d,u,p,n])}function X(){return!!(0,l.kc)().pro_cost_messaging&&!!(0,l.tl)().cohorted_in_pro_team_cost_messaging_xp}function J(){let e=!!(0,E.dq)(),r=!!(0,i.d4)(e=>e.currentTeamId)&&!e,n=X(),{getConfig:o}=(0,m.I7)("exp_admin_revamp_for_team"),{getConfig:l}=(0,m.I7)("exp_admin_revamp_for_org"),c=(0,v.ol)();return(0,a.useCallback)(()=>{if(r&&n||r&&c?.student_team)return!1;let a=null;return(e?a=l():r&&(a=o()),a)?a.getValue("nav_revamp_enabled",!1):((0,u.$D)(s.FigmaTeam.SCALE,Error("useIsAdminNavRevampEnabled: could not find experiment config")),!1)},[l,o,n,e,r,c?.student_team])}function Z(){let e=J();return(0,a.useCallback)(()=>!!(0,l.kc)().new_invoices_ui&&!!e(),[e])}function Q(e){let{getConfig:r}=(0,m.I7)("exp_slides_audience_google_sso");return(0,a.useCallback)(()=>!(0,d.C8)()&&!d.rr&&null==e&&r().get("should_see_google_sso",!1),[r,e])}function ee(){let{getConfig:e}=(0,m.I7)("exp_locked_pro_team_revamp_ui"),r=(0,v.cD)();return(0,a.useCallback)(n=>!!r&&!!n&&!!e().getValue("show_content",!1),[e,r])}function et(e){let r=(0,c.md)(g.UQ),{getConfig:n}=(0,m.I7)("exp_dev_mode_one_click_request");return(0,a.useCallback)(()=>!r&&e!==p.i$.Upsell&&"variant"===n().getValue("treatment","control"),[r,e,n])}function er(){let{getConfig:e}=(0,m.I7)("exp_update_dev_mode_prop_panel_upsell");return(0,a.useCallback)(()=>e().get("enabled",!1),[e])}},140908:(e,r,n)=>{n.d(r,{S$:()=>p,U6:()=>d,k3:()=>m,wN:()=>c,yo:()=>u}),n(517333);var a=n(133537),i=n(966712),o=n(38580);n(563706);var s=n(647899);n(309798);var l=n(99506);function c(e){return!1}function d(){return!!(0,i.kc)().rollout_pinned_comments_ff}function u({user:e,file:r,numPinnedCommentThreads:n}={}){return!!d()&&!!e&&!!r&&r.editorType===l._Y.DESIGN&&(!!n&&n>0||!!((0,i.b5)()&&(0,a.jm)(e.email))||!!r.team&&!r.parentOrgId)}function m(){let{getConfig:e}=(0,s.I7)("rollout_pinned_comments_ff");return e().getValue("can_pin_comments",!1)}function p(){return(0,i.kc)().google_federated_cm??!1}var h=(e=>(e.DEFAULT="default",e.PZ_THEN_PRODUCT="pz_then_product",e.PRODUCT_THEN_PZ="product_then_pz",e))(h||{});(0,o.eU)(null)},325469:(e,r,n)=>{n.d(r,{d:()=>l});var a=n(411855),i=n(188507);n(647899);var o=n(335682),s=n(643067);function l({file:e}){let{currentOrg:r,currentTeam:n}=function(){let e=(0,i.d4)(e=>(0,s.wA)(e)),r=(0,o.q5)();return{currentOrg:e,currentTeam:r?.team??null,currentFile:r}}();(0,a.useEffect)(()=>{if(r||!n||e?.editor_type!=="design")return},[r,n,e])}},138369:(e,r,n)=>{n.d(r,{Fy:()=>l,Kf:()=>s,Sp:()=>c,iR:()=>o,ll:()=>d});var a=n(411855),i=n(647899);function o(){let{getConfig:e}=(0,i.I7)("exp_signup_optimization_deferred_password");return(0,a.useCallback)(()=>!!e().getValue("enabled",!1),[e])}function s({isUnauth:e,isDesign:r}){let{getConfig:n}=(0,i.I7)("exp_logged_out_desktop_revamp");return(0,a.useCallback)(()=>!!e&&!!r&&!!n().getValue("enabled",!1),[n,e,r])}function l(){let{getConfig:e}=(0,i.I7)("exp_one_tap_prototype_desktop");return(0,a.useCallback)(()=>!!e().getValue("show_one_tap",!1),[e])}function c(){let{getConfig:e}=(0,i.I7)("exp_google_one_tap_mobile");return(0,a.useCallback)(()=>!!e().getValue("enabled",!1),[e])}function d(){let{getConfig:e}=(0,i.I7)("exp_login_deferred_password");return!!e().getValue("enabled",!1)}},617524:(e,r,n)=>{n.d(r,{EO:()=>m});var a=n(411855),i=n(188507),o=n(299321),s=n(776250),l=n(737947),c=n(761870),d=n(662275),u=n(793670);function m(){let e=(0,i.wA)();return(0,a.useCallback)(r=>{(0,s.sx)("show_auth_for_logged_out_file",{actionType:function(e){switch(e){case o.rcl.SET_TOOL_DEFAULT:return"SET_TOOL_DEFAULT";case o.rcl.SET_TOOL_COMMENTS:return"SET_TOOL_COMMENTS";case o.rcl.FOLLOW_PRESENTER:return"CLICK_SIDEBAR_AVATAR";case o.rcl.ENTER_INSPECT_MODE:return"CLICK_SIDEBAR_PROPERTIES";case o.rcl.SET_TOOL_DEFAULT_DEV_HANDOFF:return"CLICK_TOGGLE_DEV_MODE";case o.rcl.PRESENT_AS_PROTOTYPE:return"CLICK_SIDEBAR_PROTOTYPE";case o.NLJ.COMMENTS:return"CLICK_TOOLBELT_COMMENTS";case o.NLJ.FRAME:return"CLICK_TOOLBELT_FRAME";case o.NLJ.SHAPE_RECTANGLE:return"CLICK_TOOLBELT_RECTANGLE";case o.NLJ.VECTOR_PEN:return"CLICK_TOOLBELT_PEN";case o.NLJ.TYPE:return"CLICK_TOOLBELT_TEXT";case"SELECT_COMMENT_SIDEBAR":return"SELECT_COMMENT_SIDEBAR";case"TOOLGROUP_CHEVRON":return"TOOLGROUP_CHEVRON";case"SHARE_BUTTON":return"SHARE_BUTTON";case"GOOGLE_SSO_BUTTON":return"GOOGLE_SSO_BUTTON";case"SIGN_UP_BUTTON_BANNER":return"SIGN_UP_BUTTON_BANNER";case"QUICK_ACTIONS_TOOL":return"QUICK_ACTIONS_TOOL";case"SIGN_UP_CTA_COMMENTS_PANEL":return"SIGN_UP_CTA_COMMENTS_PANEL";case"COMPONENT_INSERT":return"COMPONENT_INSERT";case"LEFT_PANEL_FILE_NAME_CHEVRON":return"LEFT_PANEL_FILE_NAME_CHEVRON";case"LEFT_PANEL_FIGMA_LOGO":return"LEFT_PANEL_FIGMA_LOGO";case"COMMENT_PIN_CLICK":return"COMMENT_PIN_CLICK";default:return"UNKNOWN_ACTION"}}(r)}),e(c.Ts({origin:"signed_out_edit",redirectUrl:l.Ay.location.pathname})),e((0,d.to)({type:u.x,data:{actionOrTool:r}}))},[e])}},921472:(e,r,n)=>{n.d(r,{Nh:()=>l,S3:()=>c,bf:()=>d,pI:()=>s});var a=n(384775),i=n(781267);function o(e){let r="insert-local-widget"===e.menuAction.type,n="run-local-plugin"===e.menuAction.type;return(0,i.qs)(e)?r?"Widgets Development":"Widgets":n?"Plugins Development":"Plugins"}function s(){return(0,a.gn)()}function l(e,r){let n=e.path;if("plugin-name"!==e.name.type)return"";let a=o(e);return s()&&r?[...n.slice(1),e.name.plugin].join(" "):[a,...n,e.name.plugin].join(" ")}function c(e){return e.submenu.find(e=>"run-menu-action"===e.type)}function d(e){let r=c(e);return r?[o(r),e.name].join(" "):e.name}},124271:(e,r,n)=>{n.d(r,{NG:()=>m,UK:()=>function e(r){let{item:n,isReadOnly:o,extensionMenuProps:s,includeDisabled:l,isSubmenuChild:m,isItemSubmenu:p}=r,h=[];if("run-menu-action"===n.type){if(n.disabled&&!l)return h;if("plugin-name"===n.name.type){if(!s.userCanRunPlugins)return h;let e=(0,d.qs)(n)?(0,i.t)("widgets.insert_widget",{widgetName:n.name.plugin}):n.name.plugin,r=[...n.path,e],a=("run-installed-plugin"===n.menuAction.type||"run-local-plugin"===n.menuAction.type)&&n.menuAction.parameterOnly,o={name:"plugins-menu-item",extensionSearchString:(0,u.Nh)(n,m),itemPath:r,itemParameterArgs:(0,c.o0)(n.menuAction),callback:()=>(0,d.Im)(s,"quick-actions",n.menuAction),menuActionType:n.menuAction.type,pluginId:"run-installed-plugin"===n.menuAction.type||"insert-installed-widget"===n.menuAction.type?n.menuAction.pluginId:void 0,pluginLocalFileId:"run-local-plugin"===n.menuAction.type||"insert-local-widget"===n.menuAction.type?n.menuAction.localFileId:void 0,disabled:n.disabled,flags:["edit"],parametersRequired:a};h.push(o)}else{if(o&&n.disabled)return h;let e={name:n.name.key,callback:()=>(0,d.Im)(s,"filemenu",n.menuAction),disabled:n.disabled,iconType:n.iconType,property:n.property,propertyValue:n.propertyValue};h.push(e)}}else if("submenu"===n.type){if((0,u.pI)()&&!m&&"manifest"===n.subtype){let r={name:"plugins-menu-item",extensionSearchString:(0,u.bf)(n),itemPath:[n.name],callback:a.lQ,submenu:n.submenu.map(r=>e({item:r,isReadOnly:o,extensionMenuProps:s,includeDisabled:l,isItemSubmenu:!0})).flat()},i=(0,u.S3)(n);i&&(r.menuActionType=i.menuAction.type,"pluginId"in i.menuAction&&(r.pluginId=i.menuAction.pluginId),"localFileId"in i.menuAction&&(r.pluginLocalFileId=i.menuAction.localFileId)),h.push(r)}if(p)return h;for(let r of n.submenu){let n=e({item:r,isReadOnly:o,extensionMenuProps:s,includeDisabled:l,isSubmenuChild:!0});h.push(...n)}}return h}});var a=n(860601),i=n(939863),o=n(620604),s=n(780700),l=n(376485),c=n(875571),d=n(781267),u=n(921472);function m(e){let{extension:r,canRun:n}=e;return r.manifest.menu&&r.manifest.menu.length>0?{type:"submenu",subtype:"manifest",name:r.name,submenu:(0,o.z)(r.manifest.menu,r)}:{type:"run-menu-action",name:{type:"plugin-name",plugin:r.name},menuAction:(0,s.IK)(r),disabled:!n,isWidget:(0,l.k0)(r),path:[]}}},973149:(e,r,n)=>{n.d(r,{GW:()=>v,KD:()=>h,LN:()=>I,LS:()=>p,Lk:()=>_,NB:()=>E,PZ:()=>f,X9:()=>w,cu:()=>S,f0:()=>b,h7:()=>N,k$:()=>g,mz:()=>L,o1:()=>A,t6:()=>T,wf:()=>C});var a=n(943632),i=n(424587),o=n(7674),s=n(776250),l=n(127285),c=n(776621),d=n(939863),u=n(848661),m=n(287010);class p extends Error{constructor(e,r){super(`${e}: ${JSON.stringify(r)}`),this.errorInfo=r}}class h{constructor(e={}){this.options=e,this.allowedUnits=""}format(e){return`${e}`}parse(e,r){e=this.preProcessForExpressionEvaluation(e);let n=(0,l.O4)(e,r);if(null!==n.value&&isFinite(n.value))return n.value;throw(0,c.Lo)("NumberFormatter::parse","Could not parse input",{str:e,currentValue:r}),new p("Could not parse input",n.error)}onParseThrow(e,r){if(e instanceof p&&e.errorInfo)return this.options.onEvaluateExpressionError?.(e.errorInfo,r)}getNudgeAmount(e){return e?this.bigNudgeAmount():this.smallNudgeAmount()}incrementBy(e,r){return e+r}clamp(e){return(0,i.KY)(e,this.min(),this.max())}min(){return this.options.min??this.defaultMin}max(){return this.options.max??this.defaultMax}smallNudgeAmount(){return this.options.smallNudgeAmount??m.bA}bigNudgeAmount(){return this.options.bigNudgeAmount??m._q}preProcessForExpressionEvaluation(e){return e.replace(RegExp(this.allowedUnits,"g"),"").replace(/[\u0660-\u0669]/g,e=>"\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669".indexOf(e).toString()).replace(/[\u06F0-\u06F9]/g,e=>"\u06F0\u06F1\u06F2\u06F3\u06F4\u06F5\u06F6\u06F7\u06F8\u06F9".indexOf(e).toString()).replace(/\u066B/g,",").replace(/\u066C/g,",").replace(/\u060C/g,",")}}class _ extends h{constructor(e){super(e),this.floatingPointFormat=e.floatingPointFormat}format(e){if(null==e)return"";let r=String(parseFloat(e.toFixed(2))),n=r.includes(".");return this.floatingPointFormat&&n&&r.length-1>this.floatingPointFormat.maxNumDigits?String(parseFloat(e.toFixed(1))):r}parse(e,r){return/[0-9]+\,[0-9]+/g.test(e)&&(0,s.sx)("editor-parsing-float-input-with-comma",{input:e}),super.parse(e,r)}}class g extends h{format(e){return null==e?"":String(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0,currencyDisplay:"code"}).format(e).replace("USD","").trim())}parse(e,r){return parseFloat(super.parse(e,r).toFixed(0))}}class f{constructor(e){this.pixelFormatter=new _(e),this.allowEmpty=!!e.allowEmpty,this.allowUnformatted=!!e.allowUnformatted}parse(e,r){e=e.trim().toLocaleLowerCase();let n=(0,d.t)("fullscreen.auto").toLocaleLowerCase();return(!this.allowEmpty||e.length)&&n.startsWith(e)?u.Q8:this.pixelFormatter.parse(e,r)}format(e){if((0,u.SX)(e))return(0,d.t)("fullscreen.properties_panel.stack_panel.auto");if(this.allowUnformatted)try{return this.pixelFormatter.format(e)}catch{return e}return this.pixelFormatter.format(e)}getNudgeAmount(e){return this.pixelFormatter.getNudgeAmount(e)}incrementBy(e,r){return(0,u.SX)(e)?u.Q8:this.pixelFormatter.incrementBy(e,r)}clamp(e){return(0,u.SX)(e)?u.Q8:this.pixelFormatter.clamp(e)}}class E{constructor(e){this.pixelFormatter=new _(e)}parse(e,r){let n=new RegExp(/[^\,\s]*(\s*[+\-*\/\^]\s*[^\,\s]*)*/g),a=e.match(n);return a?a.filter(e=>e.length).map((e,n)=>{let a=this.pixelFormatter.parse(e,r&&r[n]);if(!isFinite(a))throw Error("could not parse padding input");return a}).map(e=>Math.max(e,0)):[]}format(e){return null==e?"":(0,a.Ef)(e)?this.pixelFormatter.format(e[0]):e.map(e=>this.pixelFormatter.format(e)).join(", ")}getNudgeAmount(e){return this.pixelFormatter.getNudgeAmount(e)}incrementBy(e,r,n){return e.map((e,a)=>!n||n[a]?this.pixelFormatter.incrementBy(e,r):e)}clamp(e){return e.map(e=>this.pixelFormatter.clamp(e))}snap(e,r){return e.map(e=>(0,i.YE)(e,r))}isEqual(e,r){return(0,a.lu)(e,r)}getIncrementTargets(e,{start:r,end:n}){let a={};if(0===r&&n>=e.length)return null;let i=r===n;if(i&&r>=e.length)return{[e.split(",").length-1]:!0};let o=0;for(let s=0,l=e.length;s<l;++s){let l=","===e[s];if(i){if(s===r)return{[o]:!0};l&&++o}else if(l&&++o,r<=s&&s<n&&(a[o]=!0),s>=n)break}return a}getSelection(e,r){let n;let a=Object.keys(r).map(Number),i=e.length,o=0;for(let r=0,s=e.length;r<s;++r){if(","===e[r]){++o;continue}if(a.includes(o)){if(null==n){if(/[\s,]/.test(e[r]))continue;n=r}for(;r<s&&/[^,]/.test(e[r]);)++r;i=r,--r}}return{start:n??0,end:i}}}var y=(e=>(e[e.SECONDS=0]="SECONDS",e[e.MILLISECONDS=1]="MILLISECONDS",e))(y||{});class b extends h{constructor(e,r=!1,n=!0){super({min:0,max:e,smallNudgeAmount:1,bigNudgeAmount:10}),this.allowedUnits="s",this.displayFractions=!1,this.padMinutes=!0,this.displayFractions=r,this.padMinutes=n}parse(e,r){if(e.includes(":")){let n=e.split(":");if(n.length>3)throw Error("Format must match HH:MM:SS");let[a,i,o]=n.reverse().map(e=>e.trim()),s=a?super.parse(a,r):0,l=i?super.parse(i,r):0,c=o?super.parse(o,r):0,d=![l,c].every(Number.isInteger),u=!this.displayFractions&&!Number.isInteger(s);if(d||u)throw Error("Cannot have fractional parts in timestamp");return 3600*c+60*l+s}let[n,a]=e.split(".",2),i=`${n.slice(-6,-4)}:${n.slice(-4,-2)}:${n.slice(-2)}`,o=a?`${i}.${a}`:i;return this.parse(o)}format(e){if(null==e)return"";let r=Math.floor(e/3600);e%=3600;let n=`${Math.floor(e/60)}`;this.padMinutes&&(n=n.padStart(2,"0")),e%=60;let a=this.displayFractions?e:Math.floor(e),i=Number.isInteger(a)?a:a.toFixed(2),o=Number.isInteger(a)?`${a}`.padStart(2,"0"):`${i}`.padStart(5,"0");return r?`${r}:${n}:${o}`:`${n}:${o}`}}class I extends h{constructor({decimals:e,hidePercentSign:r,...n}={}){super(n),this.allowedUnits="%|px",this.defaultMin=0,this.defaultMax=1,this.decimals=2,this.hidePercentSign=!1,null!=e&&(this.decimals=e),null!=r&&(this.hidePercentSign=r)}format(e){if(null==e)return"";let r=`${parseFloat((100*e).toFixed(this.decimals))}`;return this.hidePercentSign||(r+="%"),r}parse(e,r){return super.parse(e,null!=r?100*r:void 0)/100}getNudgeAmount(e){return e?.1:.01}}class T extends h{constructor(){super(...arguments),this.defaultMin=0,this.defaultMax=1}format(e){return null==e?"":`${parseFloat(e.toFixed(2))}`}}class v extends h{constructor(){super(...arguments),this.allowedUnits="%",this.defaultMin=1,this.defaultMax=95}format(e){return null==e?"":`${e}%`}}class S extends h{constructor(e={}){super((0,o.b$)({smallNudgeAmount:-1,bigNudgeAmount:-15},e)),this.allowedUnits="\xb0|px"}format(e){return null==e?"":(-180==(e=(e+180+360)%360-180)&&(e=180),`${parseFloat(e.toFixed(2))}\xb0`)}}class w extends h{constructor(){super(...arguments),this.allowedUnits="px"}parse(e,r){return Math.round(super.parse(e,r))}}class A extends h{constructor(e={}){super(e),this.normalizeFactor=e.normalizeFactor||1}parse(e,r){return super.parse(e,r)/this.normalizeFactor}format(e){let r=e*this.normalizeFactor;return`${Math.round(r)}`}getNudgeAmount(e){return e?10/this.normalizeFactor:1/this.normalizeFactor}}class N{constructor(e){this.min=e.min,this.max=e.max,this.bigPixelNudgeAmount=e.bigPixelNudgeAmount||m._q,this.smallPixelNudgeAmount=e.smallPixelNudgeAmount||m.bA,this.bigPercentageNudgeAmount=e.bigPercentageNudgeAmount||10,this.smallPercentageNudgeAmount=e.smallPercentageNudgeAmount||1}static parse(e){let r=-1!==e.indexOf("%")?"PERCENT":-1!==e.indexOf("px")?"PIXELS":void 0;e=(e=e.toLowerCase()).replace(RegExp("%|px","g"),"");let n=(0,l.O4)(e,NaN);if(null!==n.value&&isFinite(n.value))return[n.value,r]}parse(e,r){let n=N.parse(e);if(void 0===n)throw Error("Could not parse input");let[a,i]=n;return void 0===i&&(i=null==r?"PERCENT":r.units),{value:a,units:i}}format(e){if(null==e||e.value!=e.value)return"";let r=parseFloat(e.value.toFixed(2));return"PERCENT"===e.units?`${r}%`:`${r}px`}getNudgeAmount(e,r){return e?"PIXELS"===r.units?this.bigPixelNudgeAmount:this.bigPercentageNudgeAmount:"PIXELS"===r.units?this.smallPixelNudgeAmount:this.smallPercentageNudgeAmount}incrementBy(e,r){return{value:e.value+r,units:e.units}}clamp(e){return{value:(0,i.KY)(e.value,this.min,this.max),units:e.units}}snap(e,r){return{value:(0,i.YE)(e.value,r),units:e.units}}isEqual(e,r){return e.units===r.units&&e.value===r.value}}let C=new N({bigPixelNudgeAmount:m._q,smallPixelNudgeAmount:m.bA});class L{constructor(){this.MAX_SCALE=1024,this.MAX_SIZE=32768}parse(e){let r=(e=e.toLowerCase()).includes("w")?"CONTENT_WIDTH":e.includes("h")?"CONTENT_HEIGHT":"CONTENT_SCALE";e=e.replace(/x|w|h/g,"");let n=(0,l.O4)(e);if(null!==n.value&&isFinite(n.value))return{value:n.value,type:r};throw new p("Could not parse input",n.error)}format(e){if(null==e)return"";let r=parseFloat(e.value.toFixed(2));switch(e.type){case"CONTENT_SCALE":return`${r}x`;case"CONTENT_WIDTH":return`${r}w`;case"CONTENT_HEIGHT":return`${r}h`}}getNudgeAmount(e){return e?1:.5}incrementBy(e,r){return{value:(0,i.YE)(e.value+r,r),type:e.type}}clamp(e){let r=e.value;return(r=Math.min(r,"CONTENT_SCALE"===e.type?this.MAX_SCALE:this.MAX_SIZE))<=0&&(r=1),{value:r,type:e.type}}snap(e,r){return{value:(0,i.YE)(e.value,r),type:e.type}}isEqual(e,r){return e.type===r.type&&e.value===r.value}}},723081:(e,r,n)=>{n.d(r,{D:()=>m,VG:()=>I,Xi:()=>E,ZB:()=>u,_r:()=>c,cP:()=>h,el:()=>_,js:()=>f,mj:()=>g,qj:()=>p,ro:()=>d});var a=n(67151),i=n(880934);n(157663);var o=n(966712),s=n(939863),l=n(848661);n(973149);class c{constructor(){this.format=e=>e?e.replace(/_/g," ").toLowerCase().replace(/^./g,e=>e.toUpperCase()):""}}class d{constructor(){this.format=e=>{switch(e){case"PASS_THROUGH":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.pass_through");case"NORMAL":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.normal");case"DARKEN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.darken");case"MULTIPLY":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.multiply");case"LINEAR_BURN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.linear_burn");case"COLOR_BURN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.color_burn");case"LIGHTEN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.lighten");case"SCREEN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.screen");case"LINEAR_DODGE":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.linear_dodge");case"COLOR_DODGE":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.color_dodge");case"OVERLAY":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.overlay");case"SOFT_LIGHT":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.soft_light");case"HARD_LIGHT":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.hard_light");case"DIFFERENCE":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.difference");case"EXCLUSION":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.exclusion");case"HUE":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.hue");case"SATURATION":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.saturation");case"COLOR":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.color");case"LUMINOSITY":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.luminosity");default:return""}}}}class u{constructor(e){this.getPaint=e,this.format=e=>{switch(e){case"SOLID":return(0,s.t)("fullscreen.properties_panel.solid");case"VIDEO":return(0,s.t)("fullscreen.properties_panel.video");case"IMAGE":return null!=this.getPaint().animatedImage?(0,s.t)("fullscreen.properties_panel.gif"):(0,s.t)("fullscreen.properties_panel.image");case"GRADIENT_LINEAR":return(0,s.t)("fullscreen.properties_panel.linear");case"GRADIENT_RADIAL":return(0,s.t)("fullscreen.properties_panel.radial");case"GRADIENT_ANGULAR":return(0,s.t)("fullscreen.properties_panel.angular");case"GRADIENT_DIAMOND":return(0,s.t)("fullscreen.properties_panel.diamond");default:return""}}}}class m{constructor(){this.format=e=>{switch(e){case"FILL":return(0,s.t)("fullscreen.properties_panel.image_scale.fill");case"FIT":return(0,s.t)("fullscreen.properties_panel.image_scale.fit");case"STRETCH":return(0,s.t)("fullscreen.properties_panel.image_scale.crop");case"TILE":return(0,s.t)("fullscreen.properties_panel.image_scale.tile");default:return""}}}}class p{constructor(){this.format=e=>{switch(e){case"INNER_SHADOW":return(0,s.t)("fullscreen.properties_panel.effects.inner_shadow");case"DROP_SHADOW":return(0,s.t)("fullscreen.properties_panel.effects.drop_shadow");case"FOREGROUND_BLUR":return(0,s.t)("fullscreen.properties_panel.effects.layer_blur");case"BACKGROUND_BLUR":return(0,s.t)("fullscreen.properties_panel.effects.background_blur");case"REPEAT":return(0,s.t)("fullscreen.properties_panel.effects.repeat");case"SYMMETRY":return(0,s.t)("fullscreen.properties_panel.effects.symmetry");default:return""}}}}class h{constructor(e){this.scene=e}hasNameForNode(e){return e===i.AD||null==e||!!this.scene.get(e)}format(e){if((0,l.gl)(e))return(0,s.t)("fullscreen.mixed");if(e===i.AD||null==e)return(0,s.t)("proto.node_name_formatter.none");let r=this.scene.get(e);return r?r.stateAbbreviatedName||r.name:(0,s.t)("proto.node_name_formatter.missing")}}class _{constructor(e){this.useNoneInsteadOfInstant=!1,this.format=e=>{if(null==e)return"";switch(e){case"INSTANT":return this.useNoneInsteadOfInstant?(0,s.t)("slides.properties_panel.slide_transition.option.none"):(0,s.t)("proto.transition_behavior.instant");case"DISSOLVE":return(0,s.t)("proto.transition_behavior.dissolve");case"PUSH":return(0,s.t)("proto.transition_behavior.push");case"MOVE":return(0,s.t)("proto.transition_behavior.move_in");case"MOVE_OUT":return(0,s.t)("proto.transition_behavior.move_out");case"SLIDE":return(0,s.t)("proto.transition_behavior.slide_in");case"SLIDE_OUT":return(0,s.t)("proto.transition_behavior.slide_out");case"SMART_ANIMATE":return(0,s.t)("proto.transition_behavior.smart_animate");case"SCROLL_ANIMATE":return(0,s.t)("proto.transition_behavior.animate")}return""},e&&(this.useNoneInsteadOfInstant=e)}}function g(e){if(!e)return"NONE";if("URL"===e.connectionType)return"OPEN_URL";if("BACK"===e.connectionType)return"GO_BACK";if("CLOSE"===e.connectionType)return"CLOSE_OVERLAY";if("INTERNAL_NODE"===e.connectionType)switch(e.navigationType){case void 0:case null:case"NAVIGATE":return"NAVIGATE_TO";case"SCROLL_TO":return"SCROLL_TO";case"OVERLAY":return"OPEN_OVERLAY";case"SWAP":return"SWAP_WITH";case"SWAP_STATE":return"SWAP_STATE_TO"}if("SET_VARIABLE"===e.connectionType)return"SET_VARIABLE";if("SET_VARIABLE_MODE"===e.connectionType)return"SET_VARIABLE_MODE";if("UPDATE_MEDIA_RUNTIME"===e.connectionType)switch(e.mediaAction){case void 0:case"PLAY":return"UPDATE_MEDIA_PLAY";case"PAUSE":return"UPDATE_MEDIA_PAUSE";case"TOGGLE_PLAY_PAUSE":return"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE";case"MUTE":return"UPDATE_MEDIA_MUTE";case"UNMUTE":return"UPDATE_MEDIA_UNMUTE";case"TOGGLE_MUTE_UNMUTE":return"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE";case"SKIP_FORWARD":return"UPDATE_MEDIA_SKIP_FORWARD";case"SKIP_BACKWARD":return"UPDATE_MEDIA_SKIP_BACKWARD";case"SKIP_TO":return"UPDATE_MEDIA_SKIP_TO"}return"CONDITIONAL"===e.connectionType?"CONDITIONAL":("NONE"===e.connectionType||console.warn("Unknown connection type",e.connectionType),"NONE")}class f{constructor(e,r){this.isUI3=!1,this.selectionIsComponentOrInstance=!1,this.isUI3=!!e,this.selectionIsComponentOrInstance=!!r}format(e){switch(e){case"NONE":return(0,s.t)("proto.action_none");case"NAVIGATE_TO":return(0,s.t)("proto.action_navigate_to");case"OPEN_OVERLAY":return(0,s.t)("proto.action_open_overlay");case"SCROLL_TO":return(0,s.t)("proto.action_scroll_to");case"SWAP_WITH":return(0,s.t)("proto.action_swap_overlay");case"SWAP_STATE_TO":return(0,s.t)("proto.action_change_to");case"GO_BACK":return(0,s.t)("proto.action_back");case"CLOSE_OVERLAY":return(0,s.t)("proto.action_close_overlay");case"OPEN_URL":return(0,s.t)("proto.action_open_link");case"SET_VARIABLE":if((0,o.kc)().ds_variable_props_proto&&this.selectionIsComponentOrInstance)return(0,s.t)("proto.action_set_variable_or_component_property");return(0,s.t)("proto.action_set_variable");case"SET_VARIABLE_MODE":return(0,s.t)("proto.action_set_variable_mode");case"UPDATE_MEDIA_PLAY":return(0,s.t)("proto.action_update_media_play_only");case"UPDATE_MEDIA_PAUSE":return(0,s.t)("proto.action_update_media_pause_only");case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":return(0,s.t)("proto.action_update_media_toggle");case"UPDATE_MEDIA_MUTE":return(0,s.t)("proto.action_update_media_mute_only");case"UPDATE_MEDIA_UNMUTE":return(0,s.t)("proto.action_update_media_unmute_only");case"UPDATE_MEDIA_SKIP_FORWARD":return(0,s.t)("proto.action_update_media_jump_forward");case"UPDATE_MEDIA_SKIP_BACKWARD":return(0,s.t)("proto.action_update_media_jump_backward");case"UPDATE_MEDIA_SKIP_TO":return(0,s.t)("proto.action_update_media_set_to_specific_time");case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":return(0,s.t)("proto.action_update_media_play_pause_video");case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":return(0,s.t)("proto.action_update_media_mute_unmute_video");case"UPDATE_MEDIA_SKIP_BY_OPTIONS":return(0,s.t)("proto.action_update_media_jump_forward_backward");case"CONDITIONAL":return this.isUI3&&!(0,o.kc)().exp_proto_rename_conditional?(0,s.t)("proto.action_check_if_else"):(0,s.t)("proto.action_conditional");default:return""}}}class E{constructor(e,r){this.isUI3=!1,this.selectionIsComponentOrInstance=!1,this.isUI3=!!e,this.selectionIsComponentOrInstance=!!r}format(e){switch(e){case"NONE":return(0,s.t)("proto.action_none_interaction");case"NAVIGATE_TO":return(0,s.t)("proto.action_navigate_to_interaction");case"OPEN_OVERLAY":return(0,s.t)("proto.action_open_overlay_interaction");case"SCROLL_TO":return(0,s.t)("proto.action_scroll_to_interaction");case"SWAP_WITH":return(0,s.t)("proto.action_swap_overlay_interaction");case"SWAP_STATE_TO":return(0,s.t)("proto.action_change_to_interaction");case"GO_BACK":return(0,s.t)("proto.action_back_interaction");case"CLOSE_OVERLAY":return(0,s.t)("proto.action_close_overlay_interaction");case"OPEN_URL":return(0,s.t)("proto.action_open_link_interaction");case"SET_VARIABLE":if((0,o.kc)().ds_variable_props_proto&&this.selectionIsComponentOrInstance)return(0,s.t)("proto.action_set_variable_or_property_interaction");return(0,s.t)("proto.action_set_variable_interaction");case"SET_VARIABLE_MODE":return(0,s.t)("proto.action_set_variable_mode_interaction");case"UPDATE_MEDIA_PLAY":return(0,s.t)("proto.action_update_media_play_interaction");case"UPDATE_MEDIA_PAUSE":return(0,s.t)("proto.action_update_media_pause_interaction");case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":return(0,s.t)("proto.action_update_media_toggle_interaction");case"UPDATE_MEDIA_MUTE":return(0,s.t)("proto.action_update_media_mute_interaction");case"UPDATE_MEDIA_UNMUTE":return(0,s.t)("proto.action_update_media_unmute_interaction");case"UPDATE_MEDIA_SKIP_FORWARD":return(0,s.t)("proto.action_update_media_forward_interaction");case"UPDATE_MEDIA_SKIP_BACKWARD":return(0,s.t)("proto.action_update_media_backward_interaction");case"UPDATE_MEDIA_SKIP_TO":return(0,s.t)("proto.action_update_media_set_time_interaction");case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":return(0,s.t)("proto.action_update_media_play_pause_interaction");case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":return(0,s.t)("proto.action_update_media_mute_unmute_interaction");case"UPDATE_MEDIA_SKIP_BY_OPTIONS":return(0,s.t)("proto.action_update_media_jump_time_interaction");case"CONDITIONAL":return this.isUI3&&!(0,o.kc)().exp_proto_rename_conditional?(0,s.t)("proto.action_check_if_else_interaction"):(0,s.t)("proto.action_conditional_interaction");default:return""}}}let y=()=>(0,s.t)("proto.interaction.type.mouse_enter_deprecated"),b=()=>(0,s.t)("proto.interaction.type.mouse_leave_deprecated");class I{constructor(){this.format=e=>{if(null==e)return(0,s.t)("proto.interaction.type.none");switch(e){case"NONE":return(0,s.t)("proto.interaction.type.none");case"ON_CLICK":return(0,s.t)("proto.interaction.type.on_click");case"ON_HOVER":return(0,s.t)("proto.interaction.type.while_hovering");case"ON_PRESS":return(0,s.t)("proto.interaction.type.while_pressing");case"DRAG":return(0,s.t)("proto.interaction.type.on_drag");case"MOUSE_IN":return y();case"MOUSE_OUT":return b();case"MOUSE_ENTER":return(0,s.t)("proto.interaction.type.mouse_enter");case"MOUSE_LEAVE":return(0,s.t)("proto.interaction.type.mouse_leave");case"MOUSE_DOWN":return(0,s.t)("proto.interaction.type.mouse_down");case"MOUSE_UP":return(0,s.t)("proto.interaction.type.mouse_up");case"AFTER_TIMEOUT":return(0,s.t)("proto.interaction.type.after_delay");case"ON_KEY_DOWN":return(0,s.t)("proto.interaction.type.key_gamepad");case"ON_VOICE":return(0,s.t)("proto.interaction.type.on_voice");case"ON_MEDIA_HIT":return(0,s.t)("proto.interaction.type.when_video_hits");case"ON_MEDIA_END":return(0,s.t)("proto.interaction.type.when_video_ends");default:(0,a.xb)(e)}}}}},798099:(e,r,n)=>{n.d(r,{UE:()=>o,dG:()=>l,ft:()=>s,wo:()=>c});var a=n(563706),i=n(259927);function o(e){return e?.nodeType===1&&function(e){for(;e;){if(e.classList&&e.classList.contains(i.Dm))return!0;e=e.parentElement}return!1}(e)}function s(){return(!!a.Ay.isIpadNative||!!a.Ay.ios&&!!a.Ay.isInNativeApp)&&!!window.FigmaMobile.shouldHandleMultiTouchInFullscreen||!!a.Ay.isMeetDevice||!!a.Ay.isIpad}function l(e){e.stopPropagation()}function c(e){e.preventDefault()}},453909:(e,r,n)=>{n.d(r,{N:()=>i});var a=n(99506);function i(e){switch(e){case a.y4.WHITEBOARD:return a._Y.WHITEBOARD;case a.y4.SLIDE_TEMPLATE:return a._Y.SLIDES;default:return a._Y.DESIGN}}},13379:(e,r,n)=>{n.d(r,{i:()=>o});var a=n(563706),i=(e=>(e[e.LEFT=0]="LEFT",e[e.MIDDLE=1]="MIDDLE",e[e.RIGHT=2]="RIGHT",e[e.BACK=3]="BACK",e[e.FORWARD=4]="FORWARD",e))(i||{});function o(e){return"which"in e?3===e.which||a.Ay.mac&&1===e.which&&e.ctrlKey:"button"in e&&(2===e.button||a.Ay.mac&&0===e.button&&e.ctrlKey)}},297336:(e,r,n)=>{n.d(r,{mc:()=>o,vx:()=>i});var a=n(171812);function i(e,r){return null!==e[r]&&e[r]>0}function o(e,r){return Object.keys(e).some(n=>n in e&&!(0,a.c2)(r[n],e[n],!1))}n(848661)},74930:(e,r,n)=>{n.d(r,{B:()=>c}),n(411855);var a=n(304061),i=n(904669),o=n(178323);class s{constructor(){this.allTemplateInfo=new Set,this.nodeGUIDsToTemplate=new Map,s.instance=this}static removeInstance(){s.instance=void 0}trackNodesAsTemplate(e,r,n,a){let o=(0,i.UN)();if(Array.from(r).forEach(e=>{l(o.get(e))||r.delete(e)}),0===r.size)return;let s=Math.floor(.1*r.size),c={templateId:e,fileKey:n,nodeGUIDs:r,trackedNodeCount:r.size,deletionThreshold:s,creationMethod:a};this.allTemplateInfo.add(c),r.forEach(e=>this.nodeGUIDsToTemplate.set(e,c))}checkForTemplateNodesDeletion(e){0!==this.allTemplateInfo.size&&e.forEach(e=>this.checkForTemplateNodeDeletion(e))}checkForTemplateNodeDeletion(e){let r=this.nodeGUIDsToTemplate.get(e);if(!r)return;this.nodeGUIDsToTemplate.delete(e);let n=r.nodeGUIDs;n.delete(e),n.size<=r.deletionThreshold&&(this.stopTrackingTemplate(r),(0,o._)("template_deleted",{templateId:r.templateId,fileKey:r.fileKey,productType:"figjam",trackedNodeCount:r.trackedNodeCount,creationMethod:r.creationMethod}))}stopTrackingTemplate(e){this.allTemplateInfo.delete(e),e.nodeGUIDs.forEach(e=>this.nodeGUIDsToTemplate.delete(e))}}let l=e=>!!e&&("CANVAS"===e.type?e.visible:l(e.parentNode));async function c(e,r,n,i,{enableTracking:o=!0}={}){let l=s.instance;if(!o||!l)return await i();let d=(0,a.UP)(),u=await i(),m=new Set((0,a.UP)());return d.forEach(e=>m.delete(e)),r||="null",l.trackNodesAsTemplate(e(),m,r,n),u}},550273:(e,r,n)=>{n(880934),n(904669),n(92566)},521033:(e,r,n)=>{n.d(r,{J:()=>p});var a=n(411855),i=n(188507),o=n(23334),s=n(299321),l=n(568214),c=n(428654),d=n(809831),u=n(144119),m=n(168039);function p(){let e=(0,d.ow)(),r=(0,u.sO)(),n=(0,i.d4)(e=>e.mirror.appModel.currentPage),p=(0,i.d4)(e=>e.mirror.sceneGraph?.get(n)?.backgroundColor),h=(0,m.DP)(),_=(0,a.useMemo)(()=>c.F.format(p),[p]);if(e){let e=s.DV9?.getWhiteboardCanvasColor();return e?c.F.format((0,o.aH)(e)):"#ffffff"}return r&&s.Ez5?c.F.format((0,o.aH)((0,o.R0)(s.Ez5.getFSCanvasDefaultFill()))):p?_:(0,l.Bx)(h)}},289104:(e,r,n)=>{n.d(r,{JT:()=>d});var a=n(188507),i=n(915440),o=n(30637),s=n(99506),l=n(279453),c=n(137459);function d(){let e=(0,a.d4)(e=>e.openFile?.key);if((0,o.lZ)())return(0,a.d4)(r=>{let{hubFiles:n,figFilePublishedAsHubFile:a}=r,i=e&&a[e];return i?(0,c.B4)(n[i]):null});let r=(0,i.Rs)(l.ehp,{fileKey:e||""},{enabled:!!e});if("loaded"!==r.status)return null;let n=r.data.file?.publishedHubFile;return n?.publishingStatus!==s.KB.APPROVED_PUBLIC?null:n}},125708:(e,r,n)=>{n(411855),n(188507),n(299321);var a=n(91408);n(44948),n(489604),n(964881);var i=(e=>(e.CLOCKWISE="CLOCKWISE",e.COUNTERCLOCKWISE="COUNTERCLOCKWISE",e.COLLINEAR="COLLINEAR",e))(i||{}),o=(e=>(e.TOP="TOP",e.RIGHT="RIGHT",e.BOTTOM="BOTTOM",e.LEFT="LEFT",e.UNKNOWN="UNKNONWN",e))(o||{}),s=(e=>(e.TOP_LEFT="TOP_LEFT",e.TOP="TOP",e.TOP_RIGHT="TOP_RIGHT",e.RIGHT="RIGHT",e.BOTTOM_RIGHT="BOTTOM_RIGHT",e.BOTTOM="BOTTOM",e.BOTTOM_LEFT="BOTTOM_LEFT",e.LEFT="LEFT",e.OVERLAP="OVERLAP",e))(s||{});n(617453),n(100197),n(507956);var l=n(930269);(0,a.jz)(l.leftNavLeftMarginUI3),(0,a.jz)(l.propertiesPanelRightMarginUI3)},809831:(e,r,n)=>{n.d(r,{E3:()=>h,Em:()=>p,HW:()=>d,JV:()=>f,XE:()=>c,iq:()=>u,lg:()=>l,my:()=>g,ow:()=>m,pQ:()=>_,u8:()=>E});var a=n(188507),i=n(529928),o=n(99506),s=n(239671);function l(){return(0,a.d4)(e=>{var r;return(r=e.selectedView)&&"fullscreen"===r.view?(0,s.oD)(r.editorType):o._Y.DESIGN})}function c(e){return e&&"fullscreen"===e.view?e.editorType:s.nT.Design}function d(){return(0,a.d4)(e=>"prototype"===e.selectedView.view)}function u(){return(0,a.d4)(e=>"fullscreen"===e.selectedView.view)}function m(){return l()===o._Y.WHITEBOARD}function p(){return l()===o._Y.DESIGN}function h(){return(0,a.d4)(_)}function _(e){let r=e.selectedView;return"fullscreen"!==r.view?s.nT.Design:r.editorType}function g(){return(0,a.d4)(e=>f(e.selectedView))}function f(e){return"fullscreen"!==e.view?null:e.editorType}let E=(0,i.bt)(e=>f(e.selectedView))},984472:(e,r,n)=>{n.d(r,{Ol:()=>l,xy:()=>s});var a=n(411855);n(86538);var i=n(809831),o=n(215822);function s(e,r){let n=(0,i.my)();return(0,a.useMemo)(()=>(0,o.NW)(n,e,r),[n,r,e])}function l(e){let r=(0,i.my)();return(0,a.useMemo)(()=>(0,o.AG)(r,e),[r,e])}n(507956)},151166:(e,r,n)=>{n(188507),n(511617),n(737947),n(761870),n(939863),n(662275),n(793670),n(601538)},198371:(e,r,n)=>{n.d(r,{$D:()=>p,DG:()=>m,dk:()=>h});var a=n(411855),i=n(188507),o=n(38580),s=n(374626),l=n(915440),c=n(279453),d=n(479296);let u=(0,o.eU)(null),m=(0,d.D)((e,r=!1)=>{let n=(0,l.Rs)(c.JKh,{fileKey:e},{enabled:!!e});return(0,a.useMemo)(()=>"loaded"!==n.status?r?{enabled:!0,until:new Date,id:"fallback"}:{enabled:!1}:n.data.figFileWorkshopMode&&new Date<n.data.figFileWorkshopMode.expiresAt?{enabled:!0,until:n.data.figFileWorkshopMode.expiresAt,id:n.data.figFileWorkshopMode.id}:{enabled:!1},[n,r])});function p(e=!1){return function(e=!1){let r=(0,i.d4)(e=>e.openFile);return m(r?.key||"",e)}(e).enabled}function h(e){let r=s.zl.get(u);return!!e&&!!r&&new Date<r&&!e.isTryFile}},480952:(e,r,n)=>{n.d(r,{V:()=>m}),n(411855),n(188507);var a=n(302245);n(794272),n(103907);var i=n(989324),o=n(12493);n(678340);var s=n(335682);n(417908);var l=n(428467);n(284321);var c=n(984968),d=n(279145);n(636227),n(963067),n(261607);let u=(0,a.Mz)([s.tB,l.getPermissionsStateMemoized,e=>e.selectedView.editorType,e=>e.mirror.appModel.topLevelMode,e=>e.mirror.appModel.multiplayerSessionState,e=>(0,c.ZT)(e)||null,(e,r)=>r],(e,r,n,a,i,s,l)=>(0,o.gW)(e,r,n,l.warningLevel,a,i,l.isRecovery,s,l.isUserInLimitedSpace));function m(e,{fullscreenMemoryWarningLevel:r,unreadCommentCount:n,pluginAndWidgetMenuArgs:a,isRecovery:u,isUserInLimitedSpace:m,isPublishingModalDisabled:p}){let h=(0,c.ZT)(e)||null;return(0,i.p)({fileMenuArgs:{branchingActionsStatus:(0,o.gW)((0,s.tB)(e),(0,l.getPermissionsState)(e),e.selectedView.editorType,r,e.mirror.appModel.topLevelMode,e.mirror.appModel.multiplayerSessionState,u,h,m),saveAsState:e.saveAsState,topLevelMode:e.mirror.appModel.topLevelMode,unreadCommentCount:n,isOrgMember:(0,l.canMemberOrg)(e.currentUserOrgId,e),shouldShowSlideConversionEntrypoint:!1},pluginAndWidgetMenuArgs:a,theme:e.theme.themePreference,backToFileArgs:{shouldShowBackToFiles:!1},zoomArgs:{canZoomIn:(0,d.Yh)(e.mirror.appModel,"zoom-in"),canZoomOut:(0,d.Yh)(e.mirror.appModel,"zoom-out")},publishingModalArgs:{isPublishingModalDisabled:p}})}(0,a.Mz)([u,e=>e.saveAsState,e=>e.mirror.appModel.topLevelMode,(e,r)=>r],(e,r,n,a)=>({branchingActionsStatus:e,saveAsState:r,topLevelMode:n,unreadCommentCount:a.unreadCommentCount,isOrgMember:a.isOrgMember,shouldShowSlideConversionEntrypoint:a.shouldShowSlideConversionEntrypoint}))},818:(e,r,n)=>{n.d(r,{b:()=>c}),n(411855);var a=n(138369);n(617453);var i=n(860178),o=n(69961),s=n(239671),l=n(809831);function c(){let e=(0,l.my)(),r=e===s.nT.Design||e===s.nT.Illustration,n=e===s.nT.DevHandoff,c=e===s.nT.Slides,d=e===s.nT.Sites,u=e===s.nT.Cooper,m=(0,i.iZ)(),p=(0,a.Kf)({isDesign:r,isUnauth:!m}),h=(0,o.o3)(o.nt.ui3InsetEditor)&&!p();return(!!r||!!n||!!c||!!d||!!u)&&h}},877645:(e,r,n)=>{n.d(r,{v:()=>c});var a=n(411855);n(841563);var i=n(915440),o=n(420576),s=n(279453),l=n(971646);function c(e){let r=(0,i.Rs)(s.ZzU,{figFileKey:null!=e?(0,o.Kz)(e)?e.sourceFileKey:e.key:""},{enabled:null!=e});return a.useMemo(()=>{if("loaded"!==r.status)return;let e=r.data?.figFileLinkExpirationConfig,n=r.data?.file;if(!e)return;let a=(0,l.d4)(e);return{file:n,accessReverted:!!e.accessReverted,expiresAt:e.expiresAt?.toISOString(),activeExpiration:a?.toISOString()}},[r])}},475820:(e,r,n)=>{n.d(r,{cQ:()=>i}),n(414507),n(711525),n(776621),n(864319),n(99506),n(709290),n(679892);let a=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{1,9})?Z?$/;function i(e,r,n=()=>!1,a){let o=[],l=[],c={},d=r.reduce((e,r)=>(e.set(r[a],r),e),new Map),u=e.reduce((e,r)=>(e.set(r[a],r),e),new Map);for(let r of e){let e=r[a],i=d.get(e);if(i){let o=s(r,i,n,[],"",e);o.length&&(c[r[a]]=o)}else o.push(e);d.delete(r[a])}for(let e of d.values()){let r=e[a],i=u.get(r);if(i){let a=s(i,e,n,[],"",r);a.length&&(c[r]=a)}else l.push(r)}return{lgMissingIds:o,lgExtraIds:l,differences:c}}function o(e){return"object"==typeof e&&null!==e}function s(e,r,n,i,l,c){if(Array.isArray(e)||Array.isArray(r)){if(!Array.isArray(e)||!Array.isArray(r))return i.push({id:c,key:l,sinatraValue:e,lgValue:r}),i;let a=Math.max(e.length,r.length);for(let d=0;d<a;d++){let a=e[d],u=r[d];if(o(a)&&o(u)){s(a,u,n,i,`${l}[${d}]`,c);continue}a!==u&&i.push({id:c,key:`${l}[${d}]`,sinatraValue:a,lgValue:u})}return i}for(let d of new Set([...Object.keys(e),...Object.keys(r)])){if(n(d))continue;let u=e[d],m=r[d],p=l?`${l}.${d}`:d;if(o(u)&&o(m)){s(u,m,n,i,p,c);continue}d.endsWith("_at")&&"string"==typeof u&&"string"==typeof m&&a.test(u)&&a.test(m)&&u?.substring(0,17)===m?.substring(0,17)||u===m||i.push({id:c,key:p,sinatraValue:u,lgValue:m})}return i}},731130:(e,r,n)=>{n(411855),n(188507),n(776250),n(966712),n(915440),n(743282),n(279453),n(643067)},892677:(e,r,n)=>{n(38329);var a=n(374626),i=n(38580),o=n(915440);n(711525),n(195847);var s=n(335682);n(860178);var l=n(279453),c=n(479296);n(151166),(0,c.D)(()=>{let e=(0,a.md)(s.ze);return(0,o.Rs)(l.jmg,{fileKey:e||""},{enabled:!!e})}),(0,i.eU)(!1)},529982:(e,r,n)=>{n.d(r,{z:()=>o});var a=n(411855),i=n(943632);function o(e,r,n){let[o,s]=a.useState(e),l=a.useCallback(e=>{s({columnName:e,isReversed:o.columnName===e&&!o.isReversed})},[o.columnName,o.isReversed]),c=a.useMemo(()=>{let e=[...r],a=n.find(e=>e.name===o.columnName);return a&&a.getSortValue&&function(e,r,n){if(!r.getSortValue)return;let a=n.isReversed,o=a;r.sortReversed&&(a=!a),r.sortSecondaryReversed&&(o=!o),r.sortNumerically?(0,i.hR)(e,r.getSortValue,a,r.getSecondarySortValue,o):(0,i.v7)(e,r.getSortValue,{isDescending:a,isSecondaryDescending:o},r.getSecondarySortValue)}(e,a,o),e},[n,r,o]);return[o,l,c]}},963067:(e,r,n)=>{n.d(r,{Cb:()=>l,U5:()=>c,Yo:()=>s.Yo,yy:()=>d});var a=n(188507);n(207286);var i=n(694687),o=n(99506),s=n(697551);function l(){let e=(0,i.sZ)();return(0,a.d4)(r=>{let n=e&&r.orgUsersByOrgId[e.id];return n&&n[r.user.id]?.permission===o._D.GUEST})}function c(){let e=(0,i.sZ)(),r=(0,a.d4)(r=>e&&r.orgUsersByOrgId[e.id][r.user.id]?.permission);return r&&r!==o._D.GUEST}function d(){return(0,a.d4)(e=>e.openFile?.parentOrgId&&e.orgById[e.openFile.parentOrgId]||void 0)}},6949:(e,r,n)=>{n.d(r,{LQ:()=>c,a9:()=>o,ar:()=>l}),n(411855);var a=n(188507);n(841563),n(776250),n(966159),n(157663),n(358145),n(733556),n(827697),n(130097),n(915440),n(711525),n(586459),n(743282),n(881388),n(939863),n(411045),n(581063),n(783162),n(193360),n(582410),n(720647),n(99506),n(279453),n(296796),n(912458),n(227544);var i=n(596607);n(916525),n(66037),n(679892),n(475820);function o(){return(0,a.d4)(e=>(0,i.xw)(e))}class s extends null{}function l(e,r){return!!(e&&r)}function c(e){var r;let n=(0,i.xw)(e);return!!((r=e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null)&&r.are_custom_templates_allowed&&n)}},884484:(e,r,n)=>{n.d(r,{NV:()=>S,OX:()=>v,Pt:()=>w,qi:()=>C,qu:()=>N,x2:()=>A});var a=n(188507),i=n(67151),o=n(939863),s=n(545941),l=n(71425),c=n(57879),d=n(662275),u=n(483990),m=n(813648),p=n(860178),h=n(4564),_=n(215822),g=n(555328),f=n(813408),E=n(376485),y=n(749449),b=n(180881),I=n(562432),T=n(774620);function v(e){let r;let n=(0,a.wA)(),i=(0,p.TA)();if(!e||i!==e.creator.id)return null;if((0,s.AC)(e))r=(0,o.t)("community.plugins.cancel_review");else if((0,g.m3)(e)){if((0,s.Pg)(e))return null;r=(0,o.t)("community.resource.delist")}else r=(0,o.t)("community.resource.unpublish");return{displayText:r,callback:()=>{n((0,d.to)({type:b.H,data:{plugin:e},showModalsBeneath:!0}))}}}function S(e,r){let n=(0,a.wA)(),i=(0,m.LR)(),{close:s}=(0,I.cq)(),l=e&&!e.error?r?(0,o.t)("community.plugins.publish_new_version"):(0,o.t)("community.resource.publish"):r?r.is_widget?(0,o.t)("community.plugins.edit_resource_details.widget"):(0,o.t)("community.plugins.edit_resource_details.plugin"):void 0;return l?{displayText:l,callback:()=>{i(),s(),n((0,c.r)({localFileId:e?.localFileId,publishedPluginId:r?.id,entryPoint:f.k2.EDITOR}))}}:null}function w(e,r){let n=(0,a.wA)();if(!e||!r)return null;switch(e){case E.ho.LOAD:return{action:()=>{let e=r.localFileId;n((0,l.JZ)({resourceType:(0,E.k0)(r)?"widget":"plugin",localFileIdToRemove:e}))},msg:(0,o.t)("universal_insert.missing_manifest"),buttonText:(0,o.t)("universal_insert.locate"),displayText:(0,o.t)("universal_insert.locate_missing_manifest")};case E.ho.VALIDATE:case E.ho.PARSE:return{action:()=>{n((0,d.to)({type:T.K,data:{localPlugin:r}}))},msg:(0,o.t)("universal_insert.manifest_error"),buttonText:(0,o.t)("universal_insert.see_details"),displayText:(0,o.t)("universal_insert.manifest_error_view")};default:(0,i.xb)(e)}}function A(e,r,n){let i=(0,a.wA)(),{close:s}=(0,I.cq)();return{displayText:(0,o.t)("universal_insert.manage_permissions"),callback:()=>{n&&n(),s();let a=e&&(0,E.ZQ)(e)?e.localFileId:void 0;i((0,c.r)({localFileId:a,publishedPluginId:r?.id,initialTab:y.KM.PERMISSIONS,entryPoint:f.k2.EDITOR}))}}}function N(e){let r=(0,h.M)();return e?{displayText:(0,u.A)((0,_.YQ)()),callback:()=>{r&&r.openExtensionDirectory(e.localFileId)}}:null}function C(e,r){return{displayText:e?(0,o.t)("universal_insert.remove_local_version"):(0,o.t)("universal_insert.remove"),callback:r}}},964197:(e,r,n)=>{n.d(r,{a:()=>l});var a=n(411855),i=n(915440),o=n(279453);let s=(e,r,n)=>{let s=(0,i.Rs)(o.i1D,{orgId:e},{enabled:!!e});return a.useMemo(()=>{if("loaded"===s.status){let e=s.data?.currentUser?.baseOrgUser?.pluginRequests;if(e)return e.filter(e=>{let a=n?e.workspaceId===n:!!e.workspaceId==!!n;return e.pluginId===r&&a})}return[]},[s,n,r])};function l(e,r,n){return s(e,r,n).filter(e=>"pending"===e.status).length>0}},780700:(e,r,n)=>{n.d(r,{Bi:()=>O,Gt:()=>C,IK:()=>R,RK:()=>A,dR:()=>D,ee:()=>L,hN:()=>P});var a=n(411855),i=n(188507),o=n(414507),s=n(794272),l=n(374626),c=n(776621),d=n(979385),u=n(785315),m=n(370934),p=n(693897),h=n(738269),_=n(750425),g=n(781267),f=n(809831),E=n(697551),y=n(147206),b=n(215822),I=n(239671),T=n(376485),v=n(16774),S=n(756085);function w(){let e=(0,f.E3)(),{orgEntity:r,org:n,openFile:i,isReadOnly:o,userCanRunPlugins:l,activeTextReviewPlugin:c,publishedPlugins:d,publishedWidgets:u}=(0,s.R)(e=>({orgEntity:(0,E.Jl)(e),org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,openFile:e.openFile,isReadOnly:e.mirror.appModel.isReadOnly,userCanRunPlugins:(0,y.GP)(e),activeTextReviewPlugin:e.mirror.appModel.activeTextReviewPlugin,publishedPlugins:e.publishedPlugins,publishedWidgets:e.publishedWidgets})),m=(0,S.$1)();return a.useMemo(()=>({openFile:i,localExtensions:m,orgEntity:r,org:n,isReadOnly:o,userCanRunPlugins:l,editorType:e,allSavedPlugins:{},activeTextReviewPlugin:c,publishedPlugins:d,publishedWidgets:u}),[i,m,r,n,o,l,e,c,d,u])}function A(e){let r=(0,S.Be)(),n=r.plugins[e]||r.orgPlugins[e],a=(0,S.cW)()[e];return n||(a?(0,b.Ar)(a):null)}function N(e){return{type:"run-installed-plugin",pluginId:e.plugin_id,command:void 0,parameterOnly:e.manifest.parameters&&!1!==e.manifest.parameterOnly,parameterEntry:(0,_.c)(e.manifest.parameters,e.name)}}function C(e,r){let n=A(e),s=w(),p=(0,v.b)(),h=(0,d.gB)(),_=(0,i.Pj)(),[f,E]=(0,l.fp)(u.H);return a.useCallback(e=>{if(!n){console.error("Plugin version not found"),(0,c.$D)(o.FigmaTeam.EXTENSIBILITY,Error("Plugin version not found"));return}let a=N(n);if((0,b.YG)(n)&&k(_),(0,b.mx)(n)){h((0,m.$n)(n)),k(_),E(u._.PRIMARY);return}(0,g.Im)({...s,allSavedPlugins:{[n.plugin_id]:n}},r,e||a),p()},[n,s,r,p,_,h,E])}function L(e){return{type:"insert-local-widget",localFileId:e.localFileId,command:void 0}}function O(e){return{type:"insert-installed-widget",pluginId:e.plugin_id,command:void 0}}function R(e){return(0,T.ZQ)(e)?(0,T.k0)(e)?L(e):P(e):(0,T.k0)(e)?O(e):N(e)}function P(e){return{type:"run-local-plugin",localFileId:e.localFileId,command:void 0,parameterOnly:e.manifest.parameters&&!1!==e.manifest.parameterOnly,parameterEntry:(0,_.c)(e.manifest.parameters,e.name)}}function D(e,r){let n=w(),o=Object.values((0,S.$1)()).find(r=>r.plugin_id===e),s=(0,v.b)(),c=(0,d.gB)(),p=(0,i.Pj)(),[h,_]=(0,l.fp)(u.H);return a.useCallback(e=>{if(!o){console.error("Plugin not found");return}let a=P(o);if((0,b.YG)(o)&&k(p),(0,b.mx)(o)){c((0,m.$n)(o)),k(p),_(u._.PRIMARY);return}(0,g.Im)(n,r,e||a),s()},[o,n,r,s,p,c,_])}function k(e){let{selectedView:r}=e.getState();"fullscreen"===r.view&&r.editorType===I.nT.Design&&(e.dispatch(h.$T({...r,view:"fullscreen",editorType:I.nT.DevHandoff})),(0,p.Ym)(e.getState(),I.nT.DevHandoff,"plugin_run"))}},756085:(e,r,n)=>{n.d(r,{$1:()=>M,B7:()=>V,Be:()=>z,F1:()=>ep,JI:()=>eu,N3:()=>H,S0:()=>es,U6:()=>eo,Ud:()=>G,WK:()=>F,YN:()=>ed,YW:()=>X,ZT:()=>U,_P:()=>q,b4:()=>et,cW:()=>x,j1:()=>eh,j8:()=>el,ll:()=>ei,mf:()=>W,op:()=>e_,qr:()=>Z,tB:()=>er});var a=n(411855),i=n(188507),o=n(171812),s=n(414507),l=n(889012),c=n.n(l);n(776250);var d=n(794272),u=n(966712),m=n(915440);n(395900);var p=n(776621),h=n(939863),_=n(321476),g=n(392592);n(545941),n(971120);var f=n(956143),E=n(941381),y=n(809831);n(258237);var b=n(641638),I=n(29680);n(737499);var T=n(335682),v=n(694687),S=n(860178),w=n(99506),A=n(279453),N=n(336599),C=n(147206),L=n(215822),O=n(239671),R=n(376485);n(508567);var P=n(507956),D=n(984472),k=n(720289);function M(e){let r=(0,i.d4)(e=>e.localPlugins);return(0,D.xy)(r,e)}function F(e){return Object.values(M()).find(r=>r.plugin_id===e)}function x(){let e=(0,i.d4)(e=>e.publishedPlugins),r=(0,y.my)();return(0,a.useMemo)(()=>(0,L.xC)(r,e),[e,r])}function U(){let e=(0,i.d4)(e=>e.publishedWidgets),r=em(),n=(0,a.useMemo)(()=>({}),[]);return r?e:n}function B({includePendingPublishers:e=!0}={}){let r=(0,S.TA)(),n=x();return(0,a.useMemo)(()=>{if(!r)return[];let a=(0,L.i8)(Object.values(n));return(0,L.Q4)((0,L.ky)(a,r,e))},[n,r,e])}function V(e){return Object.values(B({includePendingPublishers:!1})).find(r=>r.id===e)}function G(e){return Object.values(function({includePendingPublishers:e=!0}={}){let r=(0,S.TA)(),n=U();if(!r)return[];let a=(0,L.i8)(Object.values(n));return(0,L.Q4)((0,L.ky)(a,r,e))}({includePendingPublishers:!1})).find(r=>r.id===e)}function H(e,r){if(null===e.current_plugin_version_id)return null;let n=e.versions[e.current_plugin_version_id],a={id:e.current_plugin_version_id,pluginId:e.id,resourceStagingSignature:null,updatedAt:new Date(Date.now()),iconUrl:n.redirect_icon_url,coverImageUrl:n.redirect_cover_image_url,name:n.name,version:n.version,releaseNotes:n.release_notes,description:n.description,tagline:n.tagline,creatorPolicy:n.creator_policy,manifest:JSON.stringify(n.manifest),createdAt:new Date(n.created_at),iconPath:n.redirect_icon_url,coverImagePath:n.redirect_cover_image_url,codePath:n.redirect_code_url,plugin:{currentPluginVersionId:n.id},playgroundFigFileKey:n.playground_fig_file_key??null,hasPlaygroundFile:!!n.playground_fig_file_key,playgroundFileVersionId:n.playground_file_version_id??null,userId:"",snapshotPath:""},i={id:e.id,currentPluginVersionId:e.current_plugin_version_id,publishingStatus:e.publishing_status,isWidget:e.is_widget,orgId:e.org_id,thumbnailUrl:"",userId:"",updatedAt:new Date(Date.now()),createdAt:new Date(e.created_at),unpublishedAt:null,supportContact:e.support_contact,approvedAt:new Date(Date.now()),installCount:e.install_count,likeCount:0,viewCount:e.view_count,blockedAt:null,profileId:"",commentCount:e.comment_count,hideRelatedContentByOthers:e.hide_related_content_by_others??null,isPublic:e.publishing_status===w.KB.APPROVED_PUBLIC,isInspect:"inspect"===e.editor_type,widgetsWhitelistEnforced:null,pluginsWhitelistEnforced:null,monetizedResourceMetadataId:e.monetized_resource_metadata?.id??null,thirdPartyM10nStatus:e.third_party_m10n_status??null,monetizationStatus:e.monetization_status??null,canRead:!0,categoryId:"",uniqueRunCount:0,pluginEditorType:0,commentsSetting:"",currentUserFirstRanAt:"",profileInstallStatus:2,redirectThumbnailUrl:"",communityPublishers:e.community_publishers?.accepted.map(r=>({id:r.id,isPending:!1,role:w.un.CREATOR,userId:r.primary_user_id,profileId:r.id,pluginId:e.id,hubFileId:null,profile:{id:r.id,profileHandle:r.profile_handle,team:"team"===r.entity_type?{id:r.id,name:r.name}:null,org:"org"===r.entity_type?{id:r.id,name:r.name}:null,user:"user"===r.entity_type?{id:r.primary_user_id,name:r.name}:null,teamId:"team"===r.entity_type?r.id:null,orgId:"org"===r.entity_type?r.id:null,primaryUserId:"user"===r.entity_type?r.primary_user_id:null,publicAt:new Date(Date.now()),website:null,description:null,location:null,twitter:null,instagram:null,createdAt:new Date(Date.now()),updatedAt:new Date(Date.now()),followerCount:0,followingCount:0,coverImagePath:null,pronouns:null,badges:[],communityUserIsFollowing:r.current_user_is_following,communityUserIsFollowed:r.current_user_is_followed,entityType:r.entity_type,currentUserIsFollowing:!1,currentUserIsFollowed:!1,name:r.name,imgUrl:null,imgUrls:{}}}))||[],currentPluginVersion:a,viewableInEditor:!0,publishingStatusUpdatedAt:null,isSeoIndexingAllowed:null};return{pluginId:e.id,createdAt:new Date(Date.now()),userId:r.userId,orgId:r.orgId,pluginVersionId:e.current_plugin_version_id,plugin:i,pinnedStatus:w.hM.UNPINNED}}function W(e,r,n,a){if(!e||e.publishingStatus&&[w.KB.ORG_PRIVATE,w.KB.ORG_PRIVATE_PENDING_PUBLIC].includes(e.publishingStatus)&&(!e.orgId||e.orgId!==r)&&!(0,u.kc)().community_hub_admin)return;let i=e.currentPluginVersion;if(!i)return;if(!i.manifest){(0,p.$D)(s.FigmaTeam.EXTENSIBILITY,Error("manifest missing"),{extra:{plugin:e}});return}let o=e.isWidget?"widget":"plugin",l=function(e){try{let r="string"==typeof e?JSON.parse(e):e;"dynamic-page"!==r.documentAccess&&delete r.documentAccess;let n=R.pL.safeParse(r);if(!n.success)return(0,p.$D)(s.FigmaTeam.EXTENSIBILITY,Error("manifest schema parse error"),{extra:{jsonParsedResult:JSON.stringify(r,null,2),rawManifest:JSON.stringify(e,null,2),errors:n.error.format()}}),r;return n.data}catch(r){(0,p.$D)(s.FigmaTeam.EXTENSIBILITY,Error("manifest JSON parse error"),{extra:{rawManifest:e}});return}}(i.manifest);if(!l)return;let c=`?resource_type=${o}&resource_id=${e.id}`;n&&(c+=`&fuid=${n}`);let d={id:i.id,plugin_id:e.id,name:i.name||"",current_plugin_version_id:i.plugin?.currentPluginVersionId||void 0,version:i.version||"",release_notes:i.releaseNotes||"",is_private:!!e.orgId,description:i.description||"",creator_policy:i.creatorPolicy??"",manifest:l,installed_by:a,tagline:i.tagline||"",created_at:i.createdAt.toString(),redirect_icon_url:`/community/icon${c}`,redirect_cover_image_url:`/community/thumbnail${c}`,redirect_code_url:`/community/${o}/${e.id}/code`};return e.communityPublishers&&(d.community_publishers=e.communityPublishers),e.isWidget&&(d.redirect_snapshot_url=`/community/snapshot${c}`),e.orgId&&(d.org_id=e.orgId),d}let K=(e,r,n)=>{let a={},i={},o={},s={},l={},c={};if("loaded"!==e.status)return{plugins:{},widgets:{},orgPlugins:{},orgWidgets:{},userPlugins:{},userWidgets:{}};let d=e.data;for(let e of[{source:"org",savedExtensions:d.org?.installedPlugins},{source:"user",savedExtensions:d.currentUser?.installedPlugins}]){let{source:d,savedExtensions:u}=e;if(u)for(let e of u){let{plugin:u}=e;if(!u||!u.viewableInEditor)continue;let m=W(u,r,n,d);m&&(u.isWidget?(i[e.pluginId]=m,"org"===d?s[e.pluginId]=m:"user"===d&&(c[e.pluginId]=m)):(a[e.pluginId]=m,"org"===d?o[e.pluginId]=m:"user"===d&&(l[e.pluginId]=m)))}}return{plugins:a,widgets:i,orgPlugins:o,orgWidgets:s,userPlugins:l,userWidgets:c}},Y=new Set,$=new Set,j=c()(e=>{Y.size>0&&(e(E.f1({pluginIds:Array.from(Y)})),Y.clear()),$.size>0&&(e(E.O8({widgetIds:Array.from($)})),$.clear())},300);function z(){let e=(0,i.wA)(),r=(0,i.d4)(e=>e.currentUserOrgId),n=(0,m.Rs)(A.BB3,{orgId:r}),o=(0,S.TA)(),s=em();return a.useMemo(()=>{if("loaded"!==n.status)return{loaded:!1,plugins:{},widgets:{},orgWidgets:{},orgPlugins:{},userWidgets:{},userPlugins:{}};let{plugins:a,widgets:i,orgPlugins:l,orgWidgets:c,userPlugins:d,userWidgets:u}=K(n,r,o);return!function(e,r,n){let a=Object.keys(r),i=Object.keys(n);a.forEach(e=>Y.add(e)),i.forEach(e=>$.add(e)),j(e)}(e,a,s?i:{}),{loaded:!0,plugins:a,widgets:s?i:{},orgPlugins:l,orgWidgets:s?c:{},userPlugins:d,userWidgets:s?u:{}}},[e,n,r,o,s])}function q(e,r){let n=v.sZ()?.id??null,i=(0,S.TA)(),o=(0,m.Rs)(A.k_1,{orgId:n,pluginId:e},{enabled:r}),s=o.data?.plugin,l=o.status;return a.useMemo(()=>"loaded"!==l?{loaded:!1,plugin:null}:{loaded:!0,plugin:s?W(s,n,i,null)??null:null},[l,s,n,i])}function X(e,r){return e.name.localeCompare(r.name)}let J={loaded:!0,plugins:{}};function Z(){return ee(function(){let e=(0,i.d4)(e=>e.recentlyUsed.widgets),r=function(){let e=M();return(0,a.useMemo)(()=>{let r={};for(let n in e){let a=e[n];(0,R.k0)(a)&&(r[n]=a)}return r},[e])}(),n=(0,k.o)(),o=(0,S.TA)(),s=(0,u.kc)().ext_filter_recents_by_user_id,l=em();return(0,a.useMemo)(()=>{let a=[];return l&&n&&(o||!s)&&e[n].forEach(n=>{if(s&&o&&!n.run_by_user_ids?.includes(o))return;let i=e.fetchedResources[n.id];if(i&&i.version){a.push(i.version);return}if(r[n.id]){a.push(r[n.id]);return}}),a},[n,r,e,o,s,l])}())}function Q(){let e=(0,i.d4)(e=>e.recentlyUsed.plugins),r=function(e){let r=M(void 0);return(0,a.useMemo)(()=>{let e={};for(let n in r){let a=r[n];(0,R.k0)(a)||(e[n]=a)}return e},[r])}(),n=(0,k.o)(),o=(0,S.TA)(),s=(0,u.kc)().ext_filter_recents_by_user_id,l=(0,a.useMemo)(()=>{let a=[];return n&&(o||!s)&&e[n].forEach(n=>{if(s&&o&&!n.run_by_user_ids?.includes(o))return;let i=e.fetchedResources[n.id];if(i&&i.version){a.push(i.version);return}if(r[n.id]){a.push(r[n.id]);return}}),a},[n,e,r,o,s]);return(0,D.Ol)(l)}function ee(e){let r={};return e.filter(e=>!r[e.plugin_id]&&(r[e.plugin_id]=!0,!0))}function et(){let e=ee(Q());return a.useMemo(()=>{let r={};return e.forEach(e=>r[e.plugin_id]=e),r},[e])}function er(){let e=(0,i.d4)(e=>e.recentlyUsed.plugins),r=(0,i.d4)(e=>e.recentlyUsed.widgets),n=(0,S.TA)(),o=(0,k.o)();return(0,a.useMemo)(()=>{let a={};return o&&n&&(e[o].forEach(e=>{let r=e.last_added_at_by_user_id?.[n];r&&(a[e.id]=r)}),r[o].forEach(e=>{let r=e.last_added_at_by_user_id?.[n];r&&(a[e.id]=r)})),a},[o,n,e,r])}function en(e,r,n){let a=Object.keys(e).reduce((e,n)=>{if(r[n]){let a=r[n],i=(0,L.Ar)(a);if(!i)return e;e[n]=i}return e},{});return(0,L.NW)(n,a)}function ea(e){let r=v.sZ()?.id??"",n=(0,i.wA)(),a=(0,i.d4)(r=>"plugin"===e?r.whitelistedPlugins:r.whitelistedWidgets),s=!!r,l=function(e,r=!0){let n=v.sZ()?.id??"",a=(0,T.tS)(),i=(0,b.CR)(e,r&&!!a),o=(0,b.kA)(n??"",e,r&&!!n&&!a);return a?i:o}(e,s),c=l.loaded?l.data:[];if(!s)return a;if(!l.loaded)return{};let d={};return c.forEach(e=>{e&&(d[e]=!0)}),(0,o.c2)(d,a)||n(("plugin"===e?_.P:_.o)(d)),d}function ei(){let e=(0,y.my)(),r=(0,v.sZ)(),n=x(),o=!!(r&&r.plugins_whitelist_enforced),s=ea("plugin"),l=(0,i.wA)(),c=(0,T.tS)(),d=(0,R.Gb)(r?.id??"",c),u=(0,i.d4)(e=>!!r&&(0,N.mn)(e.loadingState,d));return a.useEffect(()=>{o&&!u&&l(f.Vl({}))},[o,l,u]),a.useMemo(()=>en(s,n,e),[e,s,n])}function eo(){let e=(0,y.my)(),r=(0,v.sZ)(),n=U(),o=!!(r&&r.widgets_whitelist_enforced),s=ea("widget"),l=(0,i.wA)(),c=(0,T.tS)(),d=(0,R.n_)(r?.id??"",c),u=(0,i.d4)(e=>!!r&&(0,N.mn)(e.loadingState,d));a.useEffect(()=>{o&&!u&&l(f.mV({}))},[o,l,u]);let m=a.useMemo(()=>en(s,n,e),[s,n,e]),p=em(),h=(0,a.useMemo)(()=>({}),[]);return p?m:h}function es(e,{searchLocalPlugins:r,searchPublishedPlugins:n}){let i=M(),o=x();return a.useMemo(()=>(0,L.DM)({idToSearch:e,localExtensionsByFileId:r?i:void 0,publishedExtensions:n?o:void 0}),[e,r,n,i,o])}function el(){let e=function(){let e=(0,i.d4)(e=>e.selectedView),r=(0,i.d4)(e=>e.installedPluginVersions);if("fullscreen"!==e.view)return J;let n=(0,L.GX)(e.editorType);if(!r.loaded)return r;let a={};for(let i of Object.values(r.plugins))(0,L.EK)(n,i.manifest.editorType)?a[i.plugin_id]=i:((0,P.$A)(e)&&(0,L.M5)(i)||"figma"===n&&(0,L.M5)(i))&&(a[i.plugin_id]=i);let o="fullscreen"===e.view?e.editorType:null;return{loaded:!0,plugins:(0,L.NW)(o,a)}}(),r=B(),n=Q(),a={};return Object.values(e.plugins).forEach(e=>{a[e.plugin_id]||(a[e.plugin_id]=e)}),Object.values(r).map(L.uF).forEach(e=>{a[e.plugin_id]||(0,R.ZQ)(e)||(a[e.plugin_id]=e)}),n.forEach(e=>{a[e.plugin_id]||(0,R.ZQ)(e)||(a[e.plugin_id]=e)}),a}function ec(e){let r={};return Object.keys(e).forEach(e=>{r[e]=!0}),r}function ed(){let e=(0,y.E3)(),r=ec(ei()),n=ec(eo()),i=(0,d.R)(e=>({currentUserOrgId:e.currentUserOrgId,orgById:e.orgById,selectedView:e.selectedView,openFile:e.openFile})),o=(0,I.p8)("isReadOnly");return a.useCallback(a=>{let{canRun:s}=(0,L.JT)({plugin:a,editorType:e,canRunPluginState:{...i,mirror:{appModel:{isReadOnly:o}},whitelistedPlugins:r,whitelistedWidgets:n}});return s},[e,i,r,n,o])}function eu(){return(0,i.d4)(C.GP)}function em(){return(0,y.E3)()!==O.nT.Slides}function ep(e){return(0,y.pQ)(e)!==O.nT.Slides}function eh(e){let r=(0,i.wA)(),n=(0,v.sZ)(),o=!!(n&&n.plugins_whitelist_enforced),s=(0,i.d4)(e=>e.whitelistedPlugins)[e],l=M(),c=a.useMemo(()=>Object.values(l).find(r=>r.plugin_id===e),[l,e]),d=(0,i.d4)(r=>r.publishedPlugins[e]),u=!o||c||d?.org_id,m=!s&&!u;return{validatePublishedPluginInOrgAllowlist:a.useCallback(()=>!m||(r(g.F.enqueue({message:(0,h.t)("universal_insert.plugin_not_in_allowlist"),error:!0})),!1),[m,r]),isPluginBlockedByAllowlist:m}}function e_(){let{filterByAllowlist:e,filterByPublicResourcesAllowed:r}=function(e){let r=(0,v.sZ)(),n=!!(r&&r.plugins_whitelist_enforced),i=!!(r&&r.widgets_whitelist_enforced),o=!!r&&!r.public_plugins_allowed,s=ei(),l=eo(),c=e?l:s,d=e?i:n,u=r?.id??"",m=(0,T.tS)(),p=(0,N.oh)(e?(0,R.n_)(u,m):(0,R.Gb)(u,m)),h=a.useCallback(e=>d?e.filter(e=>!(0,R.LR)(e)||!!c[e.plugin_id]):e,[c,d]),_=a.useCallback(e=>o?e.filter(e=>!(0,R.LR)(e)):e,[o]);return{publicExtensionsDisallowed:o,allowList:c,hasAllowList:d,allowListIsLoading:p,hasPluginAllowList:n,hasWidgetAllowList:i,filterByPublicResourcesAllowed:_,filterByAllowlist:h}}(!1);return e(r(ee(Q())))}},726864:(e,r,n)=>{n.d(r,{Yk:()=>p}),n(411855);var a=n(188507),i=n(243742);n(299321);var o=n(91408);n(966712);var s=n(38580);n(111538);var l=n(85304);n(964881);var c=n(809831);n(617453),n(457630),n(441088),n(737499),n(100197),n(258159);var d=n(693348);n(202232);var u=n(712546),m=n(837746);function p(){let e=(0,u.FF)(),r=(0,u.bz)(),n=(0,u.oV)(),s=(0,u.rD)(),p=(0,d.N)(),h=(0,l.e)(),_=(0,a.d4)(e=>!!e.prototype?.isFooterVisible),g="ui3"===(0,i.DP)().version,f=(0,c.ow)(),E=(0,a.d4)(e=>e.mirror?.appModel.showUi),y=g?m.LQy:m.IuL,b=64+p;return f?e&&(r||n||s)?(0,o.jz)(y)+(0,o.jz)(m.jl4):e?(0,o.jz)(y):0:h?g?b+40:(0,o.jz)(m.ZB$):_?(0,o.jz)(m.P4e):g&&E?b:0}(0,s.eU)(0)},506599:(e,r,n)=>{n.d(r,{iT:()=>m});var a=n(411855),i=n(188507),o=n(299321);n(358145),n(438741),n(843495);var s=n(29680),l=n(100197),c=n(187882);n(144119);var d=n(809831),u=n(226055);function m(){let e=(0,u.GS)(),r=!(0,l.ut)(o.Ez5?.uiState()?.showPropertiesPanel,!0),n=function(){let e=(0,u.GS)(),r=(0,d.ow)(),n=(0,c.Ye)(),a=(0,s.aV)(),l=(0,s.ax)(),m=(0,s.dH)(),p=m===o.NLJ.FRAME||m===o.NLJ.COMMENTS||m===o.NLJ.VECTOR_PENCIL,h=(0,i.d4)(e=>e.mirror.appModel.activeUserAction===o.QOV.DEFAULT);return!!e&&!!h&&!!n&&!a&&!r&&!l&&!p}(),m=e&&(r||n),p=(0,a.useCallback)(e=>{r!==e&&o.Ez5?.uiState().showPropertiesPanel.set(!e)},[r]),h=(0,a.useCallback)(()=>{p(!m)},[m,p]);return{isPropertiesPanelCollapsed:m,setPropertiesPanelCollapsed:p,togglePropertiesPanelCollapsed:h}}},763223:(e,r,n)=>{n.d(r,{w:()=>o,y:()=>s});var a=n(966712),i=n(963067);function o(){let e=(0,i.U5)();return(0,a.kc)().xr_debounce_threshold&&e}function s(){return(0,a.kc)().xr_debounce_threshold}},965480:(e,r,n)=>{n.d(r,{Et:()=>x,GR:()=>B,Gi:()=>O,J3:()=>D,JU:()=>k,UF:()=>M,b2:()=>W,kD:()=>F,kN:()=>C,li:()=>V,mZ:()=>P,qI:()=>U,tS:()=>R,wv:()=>H});var a=n(411855),i=n(188507),o=n(67151),s=n(126049),l=n(436408);n(794272);var c=n(966712),d=n(38580),u=n(915440),m=n(752553),p=n(875847),h=n(335682),_=n(694687),g=n(99506),f=n(279453),E=n(643067),y=n(243987),b=n(556261),I=n(56099);n(284321);var T=n(984968);n(694517);var v=n(106112),S=n(383986),w=n(576144),A=n(809831),N=n(6949),C=(e=>(e.NOT_ENABLED="NOT_ENABLED",e.CAN_PUBLISH="CAN_PUBLISH",e.FILE_IN_DRAFTS="FILE_IN_DRAFTS",e.FILE_IN_DRAFTS_CANNOT_MOVE="FILE_IN_DRAFTS_CANNOT_MOVE",e.DISABLED_IN_SETTINGS="DISABLED_IN_SETTINGS",e.CANNOT_PUBLISH="CANNOT_PUBLISH",e))(C||{});function L(e){let r=(0,A.lg)(),n=(0,b.bv)(e);return(0,b.yN)({...e,attribute:"canBrowseOrgTemplates",legacy:(e,a)=>a?(0,N.ar)(a?.are_custom_templates_allowed,n):!!(e&&r&&("student_team"in e?(0,y.w5)(e):(0,y.XX)(e)))&&(r===g._Y.SLIDES||r===g._Y.WHITEBOARD&&!!(0,c.kc)().pro_templates_figjam),migrated:(e,a)=>a?.key.type===g.OL.ORG?(0,N.ar)(!!a?.customTemplatesAllowed,n):a?.key.type===g.OL.TEAM&&!!a&&!!r&&a.tier!==g.Ag.STARTER&&(r===g._Y.SLIDES||r===g._Y.WHITEBOARD&&!!(0,c.kc)().pro_templates_figjam)})}function O(){let e=(0,_.sZ)(),r=(0,T.ol)();if(L({component:"useCurrentEntityForTemplates",migrationGroup:I.L.GROUP_5})){if(e)return{type:"org",entity:e,name:e.name};if(r)return{type:"team",entity:r,name:r.name}}return null}function R(){return!!O()}function P(e){let r=L({component:"useFileEntityCanAccessTemplates",migrationGroup:I.L.GROUP_5});return!!e&&r}function D(){let e=(0,h.q5)(),r=function(){let e=O(),r=(0,h.q5)();return(0,i.d4)(n=>!!r&&!!r.folderId&&(e?.type==="team"?(0,p.ye)(n.folders[r.folderId]):e?.type==="org"&&(0,p.Gi)(n.folders[r.folderId])))}(),n={component:"usePublishTemplateStatus",migrationGroup:I.L.GROUP_5},a=(0,b.UP)(n),o=L(n),s=!!e?.canPublishTemplate,l=!!e?.canEdit;return(a===g.OL.ORG||o)&&e?.editorType!==g._Y.DESIGN?s?"CAN_PUBLISH":l?a!==g.OL.ORG||o?r?e?.canDelete?"FILE_IN_DRAFTS":"FILE_IN_DRAFTS_CANNOT_MOVE":"CANNOT_PUBLISH":"DISABLED_IN_SETTINGS":"CANNOT_PUBLISH":"NOT_ENABLED"}function k(e){switch(e){case"CAN_PUBLISH":case"FILE_IN_DRAFTS":return!0;case"DISABLED_IN_SETTINGS":case"NOT_ENABLED":case"CANNOT_PUBLISH":case"FILE_IN_DRAFTS_CANNOT_MOVE":return!1;default:(0,o.xb)(e)}}function M({fileCanEdit:e,editor_type:r,team_id:n,state:a}){let i=a.currentUserOrgId&&a.orgById[a.currentUserOrgId];return!!(i&&e&&r===g._Y.WHITEBOARD&&i.are_custom_templates_allowed&&n)}function F(){let e=(0,h.q5)(),r=x(e);return e?.template&&r?e?.template:null}function x(e){let r=P(e);return!!e&&!!e.template&&!e.template.unpublishedAt&&r}function U(e){return e.id===S.s}function B(e,r){let[n,i]=(0,a.useState)(null),[o,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)([]),[u,m]=(0,a.useState)([]),[p,h]=(0,a.useState)(0),[_,g]=(0,a.useState)(!0),f=(0,E.G7)(e),y=(0,a.useCallback)(({ids:n,myTeamsOnly:a,offset:i=0})=>{e&&w.q.getFilteredTeamTemplates({orgId:e.id,from:i,size:5,template_type:r,...f?{my_teams_only:a,workspace_ids:n}:{team_ids:n}}).then(({data:e})=>{m("filterable_workspaces"in e.meta?e.meta.filterable_workspaces:e.meta.filterable_teams),d(r=>0===i?e.meta.templates_by_team:[...r,...e.meta.templates_by_team]),h(e.meta.templates_by_team.length),g(!1)})},[e,r,f]);(0,a.useEffect)(()=>{y({ids:null,myTeamsOnly:!1})},[y]);let b=(0,s.A)(y,300),I=(0,a.useCallback)(r=>{e&&(T.current={},g(!0),i(r.ids),l(r.myTeamsOnly),b(r))},[e,b]),T=(0,a.useRef)({}),v=(0,a.useCallback)(()=>{5===p&&y({ids:n,myTeamsOnly:o,offset:c.length})},[n,o,c,p,y]),S=(0,a.useCallback)(n=>{let a=c.find(e=>e.team_id===n);if(e?.id&&a&&a.templates.length<a.total){let i=a.templates.length;if((T.current[n]||0)>=i)return;T.current[n]=i,w.q.getTeamBrowsePaginated({orgId:e.id,teamId:n,from:i,size:10,templateType:r}).then(({data:e})=>{d(r=>r.map(r=>r.team_id===n?{...r,templates:[...r.templates,...e.meta.templates]}:r))})}},[e?.id,c,r]);return{selectedTeamOrWorkspaceOrLicenseGroupIds:n,isMyTeamsOnly:o,onFilterChange:I,userTeamOrWorkspaceIds:G(e),templatesByTeam:c,filterOptions:u,requestLoadMore:v,requestLoadMoreForTeam:S,isLoadingTeamTemplates:_}}function V({teamId:e,editorType:r,pageSize:n=10,revalidateOnMount:a=!0}){let[{status:i,data:o}]=(0,m.IT)((0,f.hjj)({teamId:e,editorType:r,firstPageSize:n}),{enabled:!!e,revalidateOnMount:a});return{requestLoadMoreForTeam:()=>{let e=o?.templatesByTeam;e&&e.hasNextPage()&&!e?.isLoadingNextPage&&e.loadNext(n)},templatesByTeam:function(e){let r;if(e&&e.templatesByTeam)return e.templatesByTeam.forEach(e=>{if(!e.file)return;let n={...e.template,libraryKey:e.libraryKeyToFile?.libraryKey,signedThumbnailUrl:e.file.signedThumbnailUrl,checkpointClientMeta:e.file.checkpointClientMeta,editorType:e.file.editorType};r?r.templates.push(n):r={teamId:e.teamId,totalTemplatesByTeam:e.totalTemplatesByTeam,info:e.team,templates:[n]}}),r}(o),isLoading:"loading"===i}}let G=e=>{let r=(0,E.G7)(e),n=(0,u.Rs)(f.z8m,{currentOrgId:e?.id||""},{enabled:!!e});if("loaded"!==n.status||!e)return null;if(r){let e=n.data.currentUser.privilegedOrgUser?.workspaceUsers.find(e=>e.isMainWorkspace);return e?[e.workspaceId]:null}return n.data.currentUser.orgAwareTeamRoles.reduce((e,r)=>r.team?[...e,r.team.id]:e,[])};function H(e=2,r=g._Y.WHITEBOARD){let n;let[i,o]=(0,a.useState)(!1),s=O(),[c,d]=(0,a.useState)(null),{templatesByTeam:u,isLoading:m}=V({teamId:s?.type==="team"?s.entity.id:null,editorType:r,pageSize:e}),p=(0,l.T)();if((0,a.useEffect)(()=>{if(s?.type!=="org")return;let n=w.q.getSearchPaginated({orgId:s.entity.id,size:e,from:0,templateType:r});o(!0),p(n,e=>{d(e.data.meta.templates),o(!1)})},[p,e,r,s?.type,s?.entity.id]),!s)return{teamTemplates:void 0,isLoading:!1};switch(s.type){case"org":n=c?.map(e=>({type:v.n.TeamTemplate,template:e}));break;case"team":n=u?.templates.map(e=>({type:v.n.TeamTemplateLg,template:e}))}return{teamTemplates:n,isLoading:i||m}}let W=(0,d.eU)(null)},777078:(e,r,n)=>{n.d(r,{Fz:()=>K,Ou:()=>J,WS:()=>X,_R:()=>Q,b4:()=>q,dT:()=>G,eE:()=>Y,jd:()=>z});var a=n(411855),i=n(188507),o=n(67151),s=n(299321),l=n(275556),c=n(776250),d=n(737947),u=n(436408),m=n(733556),p=n(586459),h=n(395900),_=n(27087),g=n(939863),f=n(392592),E=n(980820),y=n(182976),b=n(875458),I=n(986270),T=n(931828),v=n(74930),S=n(178323),w=n(128765),A=n(267701),N=n(946413),C=n(335682),L=n(694687),O=n(860178),R=n(132135),P=n(336599),D=n(106112),k=n(809073),M=n(576144);let F=(e,r)=>{switch(e.type){case D.n.HubFile:return`/api/hub_files/${U(e)}/${r}/prepare_insert`;case D.n.TeamTemplate:case D.n.TeamTemplateLg:return`/api/templates/${U(e)}/${r}/prepare_insert`}},x=e=>{switch(e.type){case D.n.HubFile:return`/api/hub_files/${U(e)}/template_canvas`;case D.n.TeamTemplate:case D.n.TeamTemplateLg:return`/api/templates/${U(e)}/template_canvas`}},U=({type:e,template:r})=>{switch(e){case D.n.HubFile:return r.id;case D.n.TeamTemplate:return r.file_key;case D.n.TeamTemplateLg:return r.fileKey;default:(0,o.xb)(e)}},B=({template:e,type:r})=>{switch(r){case D.n.HubFile:return{type:k.vt.CommunityResource,id:e.id};case D.n.TeamTemplate:return{type:k.vt.TeamTemplate,file_key:e.file_key};case D.n.TeamTemplateLg:return{type:k.vt.TeamTemplate,file_key:e.fileKey};default:(0,o.xb)(r)}};async function V({insert:e,dispatch:r,fileKey:n,template:a,onSuccess:i,onFailure:o,userTriggered:s=!0,isPreview:l=!1,triggeredFrom:d}){let u=new h.jk(`template_insert.${d}`,{key:n??""});u.start();let m=e=>{let r=u.stop();(0,c.sx)(e,{elapsedMs:r,triggeredFrom:d,isPreview:l},{forwardToDatadog:!0,batchRequest:!0})},p=U(a);try{await (0,v.B)(()=>p,n,S.T.STANDARD,async()=>{await e()&&(i&&i(),m("template_insert_success"),(0,S._)(l?"resource_previewed":"resource_inserted",{fileKey:n,resourceType:"template",resourceName:(0,w.gY)(a),resourceId:p,triggeredFrom:d,templateType:a.type,templateCategory:a.type===D.n.HubFile?a.category:void 0}),s)&&(r(T.b({inserted_figjam_template:!0})),a.type===D.n.TeamTemplate&&r(b.D([a.template])),"section-preset"!==d&&r(I.Hx({storeInRecentsKey:k.$A.FigJam,...B(a)})))},{enableTracking:!l})}catch(e){r(f.F.enqueue({message:(0,g.t)("whiteboard.inserts.insert_template_failed_v2"),error:!0})),o&&o(),m("template_insert_failure")}}async function G({template:e,fileKey:r,fileVersion:n}){if(!r)throw Error("Missing file key");if(!n)throw Error("Missing file version");let a=F(e,r),i=x(e),o=e.type===D.n.HubFile?{fv:`${n}`}:void 0,s=(0,A.n)(i,(e,r)=>_.Ay.post(e,{fv:`${r}`},{responseType:"arraybuffer"}).then(({data:e})=>e)),[[l]]=await Promise.all([s,_.Ay.post(a,o)]);return l}async function H(e){let{userTriggered:r=!0,templateInsertionDirection:n=s.hKj.RIGHT,templateCustomPosition:a,selectTemplateAfterInsertion:i}=e,o=e.editScopeType;o||(o=r?s.zkO.USER:s.zkO.SYSTEM),await V({insert:async()=>await G(e).then(e=>((0,l.l7)(o,"insert-figjam-template",()=>s.glU.insertTemplateInCanvas(e,n,i??r,!a,a?a.x:null,a?a.y:null)),!0)),...e})}function W(e,r){return`INSERT_FIGJAM_TEMPLATE_${e}_${r}`}function K(){let e=(0,i.wA)(),r=(0,C.tS)(),n=(0,i.d4)(e=>e.fileVersion),a=(0,i.d4)(e=>e.loadingState);return{insertTemplate:async({onSuccess:i,onFailure:o,...s})=>{let l=W(r,U(s.template));(0,P.VP)(a,l)||(e(y.Cx({key:l})),await H({dispatch:e,fileKey:r,fileVersion:n,...s,onSuccess:()=>{e(y.yH({key:l})),i&&i()},onFailure:()=>{e(y.yH({key:l})),o&&o()}}))},isInsertingTemplate:e=>{let n=W(r,e);return(0,P.VP)(a,n)}}}function Y(e){let r=(0,i.d4)(e=>e.recentlyUsed.templates),n=(0,i.d4)(e=>e.hubFiles),s=(0,i.d4)(e=>e.recentCustomTemplates);return(0,a.useMemo)(()=>r[e].map(e=>{let{type:r}=e;switch(r){case k.vt.CommunityResource:return{type:D.n.HubFile,template:n[e.id]};case k.vt.TeamTemplate:return{type:D.n.TeamTemplate,template:s[e.key]};default:(0,o.xb)(r)}}).filter(({template:e})=>!!e),[r,n,s,e])}async function $({dispatch:e,templateIdentifier:r,onSuccess:n,onFailure:a,templateName:i,openInNewTab:o,folderId:s}){await _.Ay.post(`/api/templates/${r.file_key}/duplicate`,{folder_id:s}).then(({data:a})=>{let{fig_file:i,template:s}=a.meta;n(),e(b.D([s])),e(I.Hx({storeInRecentsKey:k.$A.FigJam,...r})),d.Ay.redirect((0,R.to)(i),o?"_blank":void 0)}).catch(()=>{let r={error:!0,message:(0,g.t)("community.actions.failed_to_create_a_new_file_from_hub_file_name",{hubFileName:i})};e(f.F.enqueue(r)),a()})}function j(e){return`DUPLICATE_FIGJAM_TEMPLATE_${e}`}let z=(0,E.nF)((e,r)=>{let n=j(r.templateIdentifier.file_key),{dispatch:a}=e,{loadingState:i}=e.getState();(0,P.VP)(i,n)||(a(y.Cx({key:n})),$({...r,dispatch:a,onSuccess:()=>{a(y.yH({key:n})),r.onSuccess&&r.onSuccess()},onFailure:()=>{a(y.yH({key:n})),r.onFailure&&r.onFailure()}}))});function q(){let e=(0,i.wA)();return(0,a.useCallback)(r=>e(z(r)),[e])}function X(){let e=(0,i.d4)(e=>e.loadingState);return r=>{let n=j(r);return(0,P.VP)(e,n)}}function J(e,r,n,i=10){let[o,s]=(0,a.useState)(null),[l,c]=(0,a.useState)(0),[d,m]=(0,a.useState)(!1),[p,h]=(0,a.useState)([]),_=(0,u.T)(),g=(0,L.sZ)();(0,a.useEffect)(()=>{s({offset:0,searchTerm:e})},[e]),(0,a.useEffect)(()=>{if(!o?.searchTerm||!g||!r){h([]),c(0);return}let e=M.q.getSearchPaginated({orgId:g.id,query:o.searchTerm,from:o.offset,size:i,templateType:n});m(!0),_(e,e=>{o.offset>0?h(r=>[...r,...e.data.meta.templates]):h(e.data.meta.templates),c(e.data.meta.total),m(!1)})},[g,r,o,_,n,i]);let f=(0,a.useCallback)(()=>p.length<l&&(s(e=>e?{...e,offset:e.offset+10}:null),!0),[p.length,l]);return{templates:p,requestLoadMore:f,total:l,isLoading:d}}let Z={url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAA1JREFUGFdj+P///38ACfsD/QVDRcoAAAAASUVORK5CYII="};function Q(e){let r=(0,O.iZ)(),n=(0,m.J)(()=>r?(0,N.$)(e,r):Promise.reject(Error("User not logged in")),[e,r]),[i,o]=(0,a.useState)(Z);return(0,a.useEffect)(()=>{n.status===p.r.SUCCESS&&o(n.value),n.status===p.r.FAILURE&&o(Z)},[n]),i}},226055:(e,r,n)=>{n.d(r,{GS:()=>i}),n(411855);var a=n(243742);function i(){return"ui3"===(0,a.DP)().version}n(299321),n(878227),n(737947),n(966712),n(259829),n(563706),n(776621),n(138369),n(809831),n(779709),n(114716),n(860178),n(69961),n(239671),n(144119)},837378:(e,r,n)=>{n.d(r,{K:()=>o});var a=n(411855);function i(e,r){if(!r)return e;let n=new Set(r.map(e=>e.id)),a=e.filter(e=>!n.has(e));return a.length===e.length?e:a}function o(e,r=50){let[n,s]=a.useState([]),l=a.useMemo(()=>i(n,e),[e,n]);return a.useEffect(()=>{s(l)},[l]),{optimisticIds:l,addOptimisticIds:a.useCallback(e=>s(n=>{let a=[...n,...e];return a.length>r?a.slice(a.length-r):a}),[r]),setServerData:a.useCallback(e=>{s(r=>i(r,e))},[])}}},835156:(e,r,n)=>{function a(e){return e?.file?.activeFileUsers?.map(e=>e)??[]}function i(e){return!!e.imageUrl&&!!e.id&&!!e.handle}function o(e){return{id:e.id,handle:e.handle,img_url:e.imageUrl}}n.d(r,{ZF:()=>a,q3:()=>i,rR:()=>o})},156367:(e,r,n)=>{n.d(r,{H3:()=>i});var a=n(181912);function i(e){return e?(0,a.A)(e).add(1,"day").subtract(1,"second").format():null}n(133537)},988022:(e,r,n)=>{n.d(r,{Cu:()=>H,Dc:()=>m,E9:()=>S,FE:()=>N,Fr:()=>k,GS:()=>v,Nb:()=>y,OH:()=>C,PB:()=>L,Pg:()=>b,WL:()=>j,Ws:()=>G,Yg:()=>$,_J:()=>D,_R:()=>W,ak:()=>R,ds:()=>I,f5:()=>T,fy:()=>K,k1:()=>A,oP:()=>B,pf:()=>O,pi:()=>p,qD:()=>Y,uE:()=>M,v5:()=>h,xr:()=>P,ye:()=>U,ys:()=>f,z_:()=>x});var a=n(299321),i=n(776250),o=n(776621),s=n(99506),l=n(239671),c=n(935938),d=n(479296),u=n(140047);function m(e){switch(e){case l.nT.Design:return"design";case l.nT.Whiteboard:return"figjam";case l.nT.DevHandoff:return"dev_handoff";case l.nT.Slides:return"slides";case l.nT.Sites:return"sites";default:return"unknown"}}function p(e){switch(e&&e.editorType){case s._Y.DESIGN:return"design";case s._Y.WHITEBOARD:return"figjam";case s._Y.SLIDES:return"slides";case s._Y.SITES:return"sites";default:return"unknown"}}function h(e,r){return e?.view==="fullscreen"?m(e.editorType):r?p({editorType:r}):"unknown"}let _=(e,r)=>{switch(r?.selectedView?.view){case"prototype":case"mobileViewer":if(r.selectedView.file?.key===e)return r.selectedView.file||null;return null;default:return e&&r.fileByKey[e]||null}},g=null;function f(e){g=e}let E=(e,r,n,i={})=>{let o=h(n?.selectedView,r&&r.editor_type),s={...i,...y(o,n?.selectedView?.view)};return s.productType=o,s.fileKey=e||"new",s.fileParentOrgId=r&&r.parent_org_id,s.fileTeamId=r&&r.team_id,r&&r.file_repo_id&&(s.fileRepoId=r.file_repo_id),s.fileTeamId=r&&r.team_id,s.containingFolderId=r&&r.folder_id,s.entrypoint=i.entrypoint,s.figmaBasicsExperiment=r?.track_tags?.figma_basics_experiment,g&&(s.loadID=g),s.fileIsIncremental=!!a.h3O?.isIncrementalSession(),s.fileIsValidatingIncremental=!!a.h3O?.isValidatingIncremental(),s};function y(e,r){return e===s._Y.SLIDES&&"fullscreen"===r?{slide_view:a.Ez5?.singleSlideView()?.isSingleSlideViewEnabled()?"ssv":"grid"}:{}}function b(){(0,i.Pg)()}let I=(0,d.n)((e,r,n,a={},o)=>{let s=_(r,n),l=E(r,s,n,a);(0,i.sx)(e,l,o)}),T=(0,d.n)((e,r,n,a={},o)=>{let s=E(r.key,r,n,a);(0,i.sx)(e,s,o)}),v=(0,d.n)((e,r,n,a)=>{let o=_(r,n),s=E(r,o,n,a);i.az.trackDefinedEvent(e,s)});function S(e,r,n={},a){n.productType=r&&p(r),n.fileKey=r?.key||"new",n.fileParentOrgId=r?.parentOrgId,n.fileTeamId=r?.teamId,n.containingFolderId=r?.folderId,r&&r.fileRepoId&&(n.fileRepoId=r.fileRepoId),(0,i.sx)(e,n,a)}let w="File Browser File Clicked";function A(e,r,n){if(r.state){var a;I(w,e,r.state,{selectedView:"recentsAndSharing"===(a=r.state).selectedView.view?a.selectedView.tab||c.G.RECENTLY_VIEWED:"folder"===a.selectedView.view&&a.selectedView.folderId===a.user?.drafts_folder_id?"drafts":a.selectedView.view,entrypoint:r.entrypoint,planFilterId:r.planFilterId,planFilterType:r.planFilterType,sharedByFilter:r.sharedByFilter,viewMode:r.viewMode},n)}else r.selectedViewName?(0,i.sx)(w,{fileKey:e,selectedView:r.selectedViewName,entrypoint:r.entrypoint},n):(0,i.sx)(w,{fileKey:e,entrypoint:r.entrypoint},n)}function N(e,r,n){(0,i.sx)("file_browser_plan_filter_selected",{planId:e,entryPoint:r,planType:n})}function C(e,r,n={},a){n.fileKeys=r.map(e=>e.key),n.fileParentOrgIds=[],n.fileTeamIds=[],n.containingFolderIds=[],r.forEach(e=>{n.fileParentOrgIds.push(e.parent_org_id),n.fileTeamIds.push(e.team_id),n.containingFolderIds.push(e.folder_id)}),(0,i.sx)(e,n,a)}function L(e,r,n,a={},o){let s=r.map(e=>n.fileByKey[e]);a.fileKeys=r,a.fileParentOrgIds=[],a.fileTeamIds=[],a.containingFolderIds=[],s.forEach(e=>{a.fileParentOrgIds.push(e.parent_org_id),a.fileTeamIds.push(e.team_id),a.containingFolderIds.push(e.folder_id)}),(0,i.sx)(e,a,o)}function O(e,r,n={},a){n.fileKeys=[],n.fileParentOrgIds=[],n.fileTeamIds=[],n.containingFolderIds=[],r.forEach(e=>{n.fileKeys.push(e.key),n.fileParentOrgIds.push(e.parentOrgId),n.fileTeamIds.push(e.teamId),n.containingFolderIds.push(e.folderId)}),(0,i.sx)(e,n,a)}function R(e,r,n,a){let i=e.map(e=>e.key),o=[],s=[],l=[];i.forEach((e,n)=>{let a=r[n];o.push(a.key),s.push(a.folder_id),l.push(a.team_id)}),L("File Copied",i,n,{copiedFileKeys:o,copiedContainingFolderIds:s,copiedFileTeamIds:l},a)}function P(e,r,n,a,o={},s){let l=a.folders[r];o.folderId=l?.id||r,o.folderTeamId=l?.team_id||n,(0,i.sx)(e,o,s)}function D(e,r,n,a={},o){let s=(0,u._)(r,n);a.teamId=s?.id,a.teamName=s?.name,(0,i.sx)(e,a,o)}function k(e,r,n,a={},o){let s=n.orgById[r];a.orgId=s.id,a.orgName=s.name,(0,i.sx)(e,a,o)}function M(e,r,n={},a){n.userId=r.user&&r.user.id,(0,i.sx)(e,n,a)}let F={[s.vt.FILE]:"fileKey",[s.vt.FILE_REPO]:"fileRepoId",[s.vt.FOLDER]:"folderId",[s.vt.TEAM]:"teamId"};function x(e,r,n={},a){let o=F[r.resource_type];n.roleId=r.id,n[o]=r.resource_id_or_key,r.user_id&&(n.roleUserId=r.user_id),(0,i.sx)(e,n,a)}function U(e,r){(0,i.sx)(e,r)}function B(e){return{canEdit:e.canEdit,fileKey:e.key,productType:p(e)}}var V=(e=>(e.DESIGN="DESIGN",e.WHITEBOARD="WHITEBOARD",e))(V||{});let G="CTA Clicked";function H(e,r,n){let a=r||G;(0,o.Lo)(a,e.text||"",e,{logToConsole:o.NU.NEVER});let s={...e,nonInteraction:0};(0,i.sx)(a,s,{forwardToDatadog:!0,sendAsBeacon:n})}var W=(e=>(e.NOT_POPULATED="not_populated",e.POPULATED_INCOMPLETE="populated_incomplete",e.POPULATED_COMPLETE="populated_complete",e))(W||{});function K(e,r){let n={...e,nonInteraction:0};(0,i.sx)("Input Blurred",n,r)}function Y(e,r={}){(0,i.sx)("Context Viewed",e,{forwardToDatadog:!0,...r})}let $="User Submits Reupgrade Request",j=5e3},128765:(e,r,n)=>{n.d(r,{fG:()=>p,gY:()=>m,gp:()=>u});var a=n(411855),i=n(67151),o=n(259120),s=n(99506),l=n(106112),c=n(694687),d=n(820642);function u(e){switch(e.type){case l.n.HubFile:return e.template.id;case l.n.TeamTemplate:return e.template.file_key;case l.n.TeamTemplateLg:return e.template.fileKey;default:return(0,i.xb)(e)}}function m(e){switch(e.type){case l.n.HubFile:return(0,d.a6)(e.template).name;case l.n.TeamTemplate:case l.n.TeamTemplateLg:return e.template.name;default:return(0,i.xb)(e)}}function p(){let e=(0,c.sZ)();return(0,a.useCallback)(r=>{let n=u(r),a=m(r),c=function(e){switch(e.type){case l.n.HubFile:return(0,d.a6)(e.template).description;case l.n.TeamTemplate:case l.n.TeamTemplateLg:return e.template.description;default:return(0,i.xb)(e)}}(r),{type:p,template:h}=r;switch(p){case l.n.HubFile:return{imageUrl:h.thumbnail_url||void 0,clientMeta:h.client_meta,thumbnailIsSet:!!h.thumbnail_is_set,isWhiteboard:h.viewer_mode===s.y4.WHITEBOARD,name:a,description:c,hubFileId:h.id,publishers:h.community_publishers?.accepted||[],primaryKey:n,duplicateLink:`${window.location.origin}/community/file/${h.id}/duplicate`,viewSourceFileUrl:null,resizedThumbnailUrls:h.resized_thumbnail_urls,libraryKey:h.library_key};case l.n.TeamTemplate:{let r=h.published_by_user?[{name:h.published_by_user.handle,img_url:h.published_by_user.img_url}]:e?[{name:e.name,img_url:e.img_url}]:[];return{imageUrl:h.signed_thumbnail_url,clientMeta:h.client_meta,thumbnailIsSet:!!h.has_custom_thumbnail,isWhiteboard:!0,name:a,description:c,publishers:r,primaryKey:n,duplicateLink:`${window.location.origin}/new/template/${h.file_key}`,viewSourceFileUrl:`/file/${h.file_key}`,libraryKey:h.library_key}}case l.n.TeamTemplateLg:{let r=h.publishedByUserNullable?[{name:h.publishedByUserNullable.handle,img_url:h.publishedByUserNullable.imgUrl}]:e?[{name:e.name,img_url:e.img_url}]:[];return{imageUrl:h.coverImagePath??h.signedThumbnailUrl,clientMeta:h.checkpointClientMeta,thumbnailIsSet:h.hasCustomThumbnail,isWhiteboard:h.editorType===s._Y.WHITEBOARD,name:a,description:c,publishers:r,primaryKey:n,duplicateLink:`${window.location.origin}/new/template/${h.fileKey}`,viewSourceFileUrl:`/file/${h.fileKey}`,libraryKey:(0,o.l)(h.libraryKey)}}default:(0,i.xb)(p)}},[e])}},788811:(e,r,n)=>{n.d(r,{$3:()=>es,GT:()=>eR,Gc:()=>eM,Gg:()=>ex,JI:()=>ee,OL:()=>eA,Oz:()=>eF,Ww:()=>eu,ZG:()=>eI,ZW:()=>et,bD:()=>j,b_:()=>eC,dm:()=>eD,go:()=>ec,gp:()=>ew,kl:()=>er,lu:()=>eO,mu:()=>eT,oE:()=>eN,t:()=>ev,wI:()=>el,yn:()=>eS,z$:()=>ea});var a=n(411855),i=n(188507),o=n(843407),s=n(943632),l=n(432258),c=n(414507),d=n(299321),u=n(275556),m=n(194812),p=n(776250),h=n(224857),_=n(38329),g=n(966712),f=n(374626),E=n(38580),y=n(915440),b=n(391388),I=n(395900),T=n(563706),v=n(776621),S=n(825871),w=n(47506),A=n(939863),N=n(265746),C=n(696808),L=n(944682),O=n(988022),R=n(106757),P=n(493862),D=n(314809),k=n(760640),M=n(279453),F=n(540019),x=n(973131),U=n(565167),B=n(546312),V=n(786701),G=n(154823),H=n(823699),W=n(63104),K=n(132367),Y=n(153297);function $(e,r){let n="unknown";e?"string"==typeof e?n=e:"message"in e&&(n=e.message):n="no error message",(0,v.x1)("Autosave",n,{message:r})}function j(){return 7776e6}async function z(e,r,n,a){let i=a.objectStore(H.Sp),o=await i.index(H.SW).get([e,r,n]);return o&&o.id?{id:o.id,...o}:void 0}async function q(e,r,n,a){let i=await z(e,r,n,a);return i?.id}async function X(e,r,n){let a=e.objectStore(H.Sp),i=e.objectStore(H.jP),o=e.objectStore(H.DV),s=e.objectStore(H.w8),l=[];for(let e of n){let r=await a.index(H.SW).get([e.userID,e.fileKey,e.sessionID]);r&&r.id&&l.push(r)}if(0===l.length)return await e.done,{changesByNode:new Map,referencedNodeMap:new Map,fileVersion:-1};l.sort((e,r)=>r.fileVersion-e.fileVersion);let c=l[0],u=new Map,m=new Map;for(let e of(await i.getAll((0,H.iM)(c.id))))u.set(e.nodeID,[e.changes,e.snapshots]);for(let e of(await s.getAll((0,H.iM)(c.id))))m.set(e.nodeID,e.buffer);let p=c.lastUpdatedAt;for(let e of l.slice(1)){let r=e.fileVersion===c.fileVersion;if(r){for(let r of(await i.getAll((0,H.iM)(e.id)))){let e=u.get(r.nodeID),n=r.changes,a=r.snapshots;if(e){let[i,o]=e;n=d.i6g.mergeMultiplayerMessages(i,r.changes,c.fileVersion),a={...o,...r.snapshots}}u.set(r.nodeID,[n,a]),i.put({editorSessionID:c.id,nodeID:r.nodeID,changes:n,snapshots:a}).catch(e=>$(e,"mergeAndClaimChanges: updating session IDs"))}for(let r of(await s.getAll((0,H.iM)(e.id))))m.set(r.nodeID,r.buffer),s.put({editorSessionID:c.id,nodeID:r.nodeID,buffer:r.buffer}).catch(e=>$(e,"mergeAndClaimChanges: merge referenced nodes"));p=Math.max(p,e.lastUpdatedAt)}i.delete((0,H.iM)(e.id)).catch(e=>$(e,"mergeAndClaimChanges: node changes for session")),s.delete((0,H.iM)(e.id)).catch(e=>$(e,"mergeAndClaimChanges: referenced nodes for session"));let n=await o.openCursor((0,H.iM)(e.id));for(;n;)r&&o.put({...n.value,editorSessionID:c.id}).catch(e=>$(e,"mergeAndClaimChanges: merge images")),n.delete().catch(e=>$(e,"mergeAndClaimChanges: remove old image")),n=await n.continue();a.delete(e.id).catch(e=>$(e,"mergeAndClaimChanges: delete old session id"))}return await a.put({...c,sessionID:r,lastUpdatedAt:p}),(0,H.dU)(e),await e.done,(0,v.Lo)("Autosave",`Found claimed autosave changes from ${l.length} sessions`,void 0,{logToConsole:d.NUh.ALWAYS}),{changesByNode:u,referencedNodeMap:m,fileVersion:c.fileVersion}}async function J(e,r){let n=(0,H.Zt)(e,r),a=[];return await k.xK.timeAsync("checkForAutosave",async()=>{let e=await (0,H.Z4)();if(!e)return;let r=e.transaction(H.Sp),i=r.objectStore(H.Sp),o=await i.index(H.SW).openCursor(n);for(;o;)a.push(o.value),o=await o.continue();await r.done}),a.length>0&&(0,v.ED)("Autosave","Found auto-saved data for this file",void 0,{logToConsole:d.NUh.ALWAYS}),a}async function Z(e){return await k.xK.timeAsync("filterAutosaveSessions",async()=>{let r=await Promise.all(e.map(e=>(0,Y.mc)(e))),n=Date.now()-j(),a=e.filter((e,a)=>!r[a]&&e.lastUpdatedAt>n);return 0===a.length&&(0,v.Lo)("Autosave","Changes not available or already claimed by another tab",void 0,{logToConsole:d.NUh.ALWAYS}),a})}let Q=null;async function ee(e){async function r(){for(let e of["figma-autosave-v2","figma-autosave-darklaunch-v2"])(0,m.MR)(e).catch(()=>{});try{let r=await ec((0,H.cu)(e),e=>Date.now()-e.lastUpdatedAt<j());if(r.length>0){let e=r.map(e=>e.lastUpdatedAt);(0,p.sx)("autosave garbage collect",{numSessions:r.length,localSessionCount:r.reduce((e,r)=>e+(r.isLocalFile?1:0),0),nodeCount:r.reduce((e,r)=>e+r.nodeCount,0),imageCount:r.reduce((e,r)=>e+r.imageCount,0),referencedNodeCount:r.reduce((e,r)=>e+r.referencedNodeCount,0),oldestSession:Math.min(...e),newestSession:Math.max(...e)})}}catch(e){(0,W.Lf)("Failed to garbage collect autosave changes",e)}(0,B.L_)()}Q||(Q=r()),await Q}async function et(e){let r={};for(let n of e){let e=await er(n);(e.unsyncedFiles.length>0||e.newFiles.length>0)&&(r[n]=e)}return r}async function er(e){let r=await (0,H.Z4)();if(!r)return{unsyncedFiles:[],newFiles:[],nextGarbageCollectionTimestamp:-1};let{editorSessionRowsWithChanges:n,newFilesByKey:a,newFilesWithChanges:i}=await en(r,e),s=new Set,l=new Map,c=-1,d=[];for(let r of n)s.has(r.fileKey)||d.push((0,Y.mc)({userID:e,fileKey:r.fileKey,sessionID:r.sessionID}).then(e=>{if(!e){s.add(r.fileKey);let e=Math.max(l.get(r.fileKey)||0,r.lastUpdatedAt);l.set(r.fileKey,e),c=-1===c?r.lastUpdatedAt:Math.min(c,r.lastUpdatedAt)}}));return await Promise.all(d),{unsyncedFiles:Array.from(s).filter(e=>!(0,o.T)(e)).map(e=>({type:"autosave-file",fileKey:e,lastUpdatedAt:l.get(e)})),newFiles:Array.from(s).filter(e=>(0,o.T)(e)&&a.has(e)).map(e=>{let r=a.get(e);return eo(r,l,i.has(r.fileKey))}).filter(({hasChanges:e})=>e),nextGarbageCollectionTimestamp:c}}async function en(e,r){let n=e.transaction([H.Sp,H.jP,H.JR]),a=Error("original async stack");n.done.catch(e=>{e.cause=a,(0,v.$D)(c.FigmaTeam.UNOWNED,e)});let i=n.objectStore(H.Sp),o=await i.index(H.SW).getAll((0,H.cu)(r)),s=[],l=n.objectStore(H.jP);for(let e of o)if(await l.count((0,H.iM)(e.id))>0){for(let r of(await l.getAll((0,H.iM)(e.id))))if(!((0,g.kc)().suppress_unsaved_changes_ui&&(0,g.kc)().incremental_loading_validation)||d.i6g&&!d.i6g.changesAreOnlyNewFileSystemChanges(r.changes,e.fileVersion)){s.push(e);break}}let u=new Map,m=n.objectStore(H.JR),p=new Set;for(let e of(await m.getAll((0,H.cu)(r)))){u.set(e.fileKey,e);let r=o.find(r=>r.fileKey===e.fileKey);if(r){let n=await l.getAll((0,H.iM)(r.id));(eh(e.fileKey,n)||e.hasChangedMetadata)&&p.add(e.fileKey)}}return{editorSessionRowsWithChanges:s,newFilesByKey:u,newFilesWithChanges:p}}async function ea(e){let r=await er(e);return r.unsyncedFiles.length>0||r.newFiles.length>0}async function ei(e){if((0,W.rQ)())return[];let r=await (0,H.Z4)();if(!r)return[];let{editorSessionRowsWithChanges:n,newFilesByKey:a,newFilesWithChanges:i}=await en(r,e),o=new Set,s=new Map;for(let e of n)o.add(e.fileKey),s.set(e.fileKey,Math.max(s.get(e.fileKey)||0,e.lastUpdatedAt));let c=Array.from(o).map(e=>{let r=a.get(e);return r?eo(r,s,i.has(r.fileKey)):null}).filter(l.Vq);return eb?.fileCreationManager?.updateNewFileInfoFromFiles(c),c}function eo(e,r,n){return{type:"new-autosave-file",fileKey:e.fileKey,editorType:e.editorType,name:e.name,creatorId:e.userID,createdAt:e.createdAt,lastUpdatedAt:r.get(e.fileKey),orgId:e.orgID??null,hasChanges:n,hasChangedMetadata:e.hasChangedMetadata??!1}}async function es(e,r){if((0,W.rQ)())return;let n=async(e,n)=>{let a=n.objectStore(H.jP);return eh(r,await a.getAll((0,H.iM)(e.id)))};await ec((0,H.Zt)(e,r),n)}async function el(e,r){await ec((0,H.cu)(e),e=>!r.includes(e.fileKey))}async function ec(e,r){let n=await (0,H.Z4)();if(!n)return[];let a=n.transaction([H.Sp,H.jP,H.DV,H.w8,H.JR],"readwrite"),i=Error("original async stack");a.done.catch(e=>{e.cause=i,(0,v.$D)(c.FigmaTeam.UNOWNED,e)});let s=a.objectStore(H.Sp),l=a.objectStore(H.jP),d=a.objectStore(H.DV),u=a.objectStore(H.w8),m=a.objectStore(H.JR),p=!1,h=await s.index(H.SW).getAll(e),_=[],g=[];for(let e of h)if(!(r&&await r(e,a))){let[r,n,a]=await Promise.all([l.count((0,H.iM)(e.id)),d.count((0,H.iM)(e.id)),u.count((0,H.iM)(e.id))]);g.push({userID:e.userID,fileKey:e.fileKey,sessionID:e.sessionID,isLocalFile:(0,o.T)(e.fileKey),nodeCount:r,imageCount:n,referencedNodeCount:a,lastUpdatedAt:e.lastUpdatedAt}),s.delete(e.id).catch(e=>$(e,"deleteAutosaveDataForSessions: delete editor session")),l.delete((0,H.iM)(e.id)).catch(e=>$(e,"deleteAutosaveDataForSessions: delete node changes")),d.delete((0,H.iM)(e.id)).catch(e=>$(e,"deleteAutosaveDataForSessions: delete images")),u.delete((0,H.iM)(e.id)).catch(e=>$(e,"deleteAutosaveDataForSessions: delete referenced nodes")),p=!0,(0,o.T)(e.fileKey)&&_.push({localFileKey:e.fileKey,userID:e.userID})}for(let{localFileKey:e,userID:r}of _)0===await s.index(H.SW).count((0,H.Zt)(r,e))?await m.delete((0,H.Zt)(r,e)):(0,W.W6)("Local file has remaining sessions");return await s.count()===0&&(await l.count()>0&&((0,W.W6)("Found leftover node changes in IDB"),l.delete((0,H.BE)()).catch(e=>$(e,"deleteAutosaveDataForSessions: delete leftover node changes"))),await d.count()>0&&((0,W.W6)("Found leftover images in IDB"),d.delete((0,H.IE)()).catch(e=>$(e,"deleteAutosaveDataForSessions: delete leftover images"))),await u.count()>0&&((0,W.W6)("Found leftover referenced node buffers in IDB"),u.delete((0,H.Ab)()).catch(e=>$(e,"deleteAutosaveDataForSessions: delete leftover referenced nodes")))),(0,H.dU)(a),await a.done,p&&(0,K.HZ)(),g}async function ed(e,r){await r.objectStore(H.jP).count((0,H.iM)(e))===0&&await r.objectStore(H.DV).count((0,H.iM)(e))===0&&await r.objectStore(H.w8).count((0,H.iM)(e))===0&&r.objectStore(H.Sp).delete(e).catch(e=>$(e,"deleteEditorSessionRowIfUnused: delete editor session"))}async function eu(e,r){let n=await (0,H.Z4)();if(!n)throw Error("Could not open autosave data");let a=n.transaction([H.Sp,H.jP,H.DV,H.w8]),i=a.objectStore(H.Sp),o=a.objectStore(H.jP),s={};for(let e of(await i.getAll()))s[e.id]=e,s[e.id].changes={},s[e.id].snapshotsByNodeField__DEPRECATED={};for(let n of(s.unknown={changes:{},snapshotsByNodeField__DEPRECATED:{}},(await o.getAll()).slice(0,e)))n.editorSessionID in s?(s[n.editorSessionID].changes[n.nodeID]=JSON.parse(d.i6g.encodeChangesAsJson(n.changes,s[n.editorSessionID].fileVersion,!!r)),s[n.editorSessionID].snapshotsByNodeField__DEPRECATED[n.nodeID]=n.snapshots):(s.unknown.changes[n.nodeID]=JSON.parse(d.i6g.encodeChangesAsJson(n.changes,1,!!r)),s.unknown.snapshotsByNodeField__DEPRECATED[n.nodeID]=n.snapshots);return await a.done,s}async function em(e){let{transaction:r,commitPolicy:n,userID:a,fileKey:i,fileVersion:s,sessionID:l,oldSessionID:c,pendingChanges:u,pendingImages:m,pendingReferencedNodes:p,reason:h,isFirstCommitOfAutosaveSession:_}=e,f=r.objectStore(H.Sp),E=r.objectStore(H.jP),y=r.objectStore(H.DV),b=r.objectStore(H.w8),I=await z(a,i,c,r),T=0;I&&(T=(I.offlineEditingTime||0)+(_?0:Date.now()-I.lastUpdatedAt));let v=I?.id,w={userID:a,fileKey:i,sessionID:l,lastUpdatedAt:Date.now(),releaseTag:(0,g.Ay)().release_git_tag||"",fileVersion:s,lastCommitReason:h,offlineEditingTime:T,originalTrackingSessionId:(0,S.f)()};for(let e of(null==v?v=await f.add(w):(n===d.W2B.REPLACE_CHANGES&&(E.delete((0,H.iM)(v)).catch(e=>$(e,"commitChanges: replace node changes")),b.delete((0,H.iM)(v)).catch(e=>$(e,"commitChanges: replace referenced nodes"))),f.put({id:v,...w}).catch(e=>$(e,"commitChanges: update session"))),u))e.changes?E.put({editorSessionID:v,nodeID:e.nodeID,changes:e.changes}).catch(e=>$(e,"commitChanges: put node changes")):E.delete([v,e.nodeID]).catch(e=>$(e,"commitChanges: clear node changes"));for(let e of m)if(await y.count([v,e])===0){let r=d.Bko.getCompressedImage(e);r&&y.add({editorSessionID:v,hash:e,blob:r}).catch(e=>$(e,"commitChanges: add images"))}for(let e of p)b.add({editorSessionID:v,nodeID:e.nodeID,buffer:e.buffer}).catch(e=>$(e,"commitChanges: add referenced nodes"));let A=await E.count((0,H.iM)(v));return 0===A&&(await y.delete((0,H.iM)(v)),await b.delete((0,H.iM)(v))),await ed(v,r),(0,H.dU)(r),await r.done,(0,o.T)(i)&&(0,K.HZ)(),A}async function ep(e,r,n){(0,v.Lo)("Autosave","assigning file key for new file",{localFileKey:r,newFileKey:n}),await (0,H.DB)([H.Sp,H.JR],async a=>{let i=a.objectStore(H.Sp);(await i.index(H.SW).getAll((0,H.Zt)(e,r))).map(e=>{e.fileKey=n,i.put(e)}),a.objectStore(H.JR).delete((0,H.Zt)(e,r))},"readwrite"),(0,K.HZ)()}function eh(e,r){if(!(0,o.T)(e))return r.length>0;if(r.length>2)return!0;for(let{nodeID:e}of r)if(!["0:0","0:1"].includes(e))return!0;return!1}class e_{constructor(){this.nextEventPromise=new Promise(e=>{this.nextEventPromiseResolve=e})}onCommitEvent(){this.nextEventPromiseResolve(),this.nextEventPromise=new Promise(e=>{this.nextEventPromiseResolve=e})}waitForNextCommit(){return this.nextEventPromise}}class eg{constructor(e,r){this.userID=e,this._state={type:"connecting"},this._fileKey="",this._hasReportedError=!1,this.fileCreationManager=null,this.fileKey=r,(0,W.rQ)()?(this._sessionsToRestore=Promise.resolve([]),this._state={type:"terminated"}):(0,o.T)(r)?this._sessionsToRestore=J(e,r):this._sessionsToRestore=J(e,r).then(e=>Z(e))}get fileKey(){return this._fileKey}get managerState(){return this._state.type}session(){return"connected"===this._state.type?this._state.session:null}set fileKey(e){this._fileKey=e;let r=(0,o.T)(e)?e:null;f.zl.set(G.h,r)}async assignFileKeyForLocalFile(e){if("connected"!==this._state.type){"connecting"===this._state.type&&(0,W.W6)("Still connecting");return}try{await this._state.session.enqueueAssignFileKeyForLocalFile(e,()=>{this.fileKey=e,this.fileCreationManager=null})}catch(e){this.terminateDueToError("unable to update file key",!0)}}async terminateAndWaitForCleanup(){let e="connected"===this._state.type?this._state.session:null;this._state={type:"terminated"},f.zl.set(G.h,null),await e?.destroy().catch(()=>W.W6("Failed to destroy autosave session"))}terminateDueToError(e,r){(0,v.xi)("Autosave","autosave disabled",{message:e}),r&&(0,W.W6)(e);let n="connected"===this._state.type;this._hasReportedError||((0,p.sx)("autosave_disabled",{message:e,hasSessionInProgress:n},{forwardToDatadog:!0}),this._hasReportedError=!0),this.terminateAndWaitForCleanup().catch(r=>(0,W.W6)("Failed to terminate autosave",{message:e,error:r.message}))}async onConnect(e){if("connecting"!==this._state.type)return;try{await (0,H.Fy)()}catch(e){(0,v.Lo)("Autosave","IDB is not available in the current browser session.",void 0,{logToConsole:d.NUh.ALWAYS}),(0,p.sx)("autosave_db_failure",{message:e.message}),this.terminateDueToError("unable to open DB",!1);return}let r=new I.M4;r.start();let n=await this._sessionsToRestore;(0,o.T)(this.fileKey)&&(n.length>1?((0,W.W6)("Local file has multiple sessions",{sessionCount:n.length,sessionIds:n.map(e=>e.sessionID).slice(0,5).join(", ")}),this.terminateDueToError("Local file has multiple sessions",!1)):1===n.length&&0!==n[0].sessionID&&((0,W.W6)("Local file with changes from non-zero session",{existingSessionId:n[0].sessionID}),this.terminateDueToError("Local file with changes from non-zero session",!1)));let a=await (0,Y.A2)({userID:this.userID,fileKey:this.fileKey,sessionID:e});if(!a){this.terminateDueToError("unable to acquire lock",!0);return}this._state={type:"connected",session:new ey(e,this,r,n,a)}}async onConnectNewFile(e){let r=this.fileKey;if((0,o.T)(r))try{await (0,H.DB)([H.JR],async n=>{let a=n.objectStore(H.JR);if(await a.get((0,H.Zt)(this.userID,r)))return;let i={fileKey:r,userID:this.userID,editorType:e.editorType,name:e.fileName??(0,A.t)("fullscreen.fullscreen_view_selector.untitled"),createdAt:Date.now(),orgID:e.org_id};await a.put(i)},"readwrite"),this.fileCreationManager&&(0,W.W6)("File creation manager already exists",{fileKey:r}),this.fileCreationManager=new eE(r,e)}catch(e){this.terminateDueToError("unable to set new file info",!0);return}await this.onConnect(0)}}async function ef(e,r,n){if((0,o.T)(r)&&e)try{await (0,H.DB)([H.JR],async a=>{let i=a.objectStore(H.JR),o=await i.get((0,H.Zt)(e,r));o&&await i.put({...o,name:n,hasChangedMetadata:!0})},"readwrite"),(0,K.HZ)()}catch(e){(0,v.$D)(c.FigmaTeam.SCENEGRAPH_AND_SYNC,Error("unable to update new file info"))}}class eE{constructor(e,r){this._pendingRealFileKey=null,this.fileKey=e,this._newFileInfo=r}get newFileInfo(){return this._newFileInfo}updateNewFileInfo(e){this._newFileInfo={...this._newFileInfo,...e}}updateNewFileInfoFromFiles(e){let r=e.find(e=>e.fileKey===this.fileKey);if(r){let e=(0,U.B)(r,this.newFileInfo.openNewFileIn);this.updateNewFileInfo(e)}}get pendingRealFileKey(){return this._pendingRealFileKey}assignPendingRealFileKey(e){this._pendingRealFileKey=e,K.hp.sendToAllTabs(K.m6,{localFileKey:this.fileKey,realFileKey:e})}}class ey{constructor(e,r,n,a,i){this.sessionID=e,this.manager=r,this.restoreTimer=n,this.changesToRestore=a,this.webLock=i,this.transactionQueue=new V.O,this.commitEventListener=new e_,this.restoring=!1,this.consecutiveCommitsAddingChanges=0,this.activityLogger=navigator.storage?.estimate?new B.hS:null,this.restoreAnalytics={hadChangesToRestore:!1,fileKey:"",time:0,timeToStartSession:0,timeToApply:0,timeToSync:0,sessionsCheckTime:0,numberOfBytes:0,numberOfNodes:0,numberOfReferencedNodes:0,numberOfRestoredReferencedNodes:0,numberOfSessions:0,numberOfImages:0,neededToMigrate:!1,persistentStorage:!1,changesAreAllDerivedData:!1,nodeFields:[],stagingDump:void 0,lastUpdatedAt:void 0,releaseTag:void 0,isLocalFile:!1,offlineEditingTime:void 0,lastCommitReason:void 0,originalTrackingSessionId:void 0,storageUsageBytes:void 0,storageQuotaBytes:void 0,isIncremental:!1},this.reportedFullQueue=!1,this.reportedStorageError=!1,this.hasCommitted=!1,this.restoreAnalytics.timeToStartSession=this.restoreTimer.getElapsedTime()}getActivityLogger(){return this.activityLogger}async destroy(){await this.webLock.release().catch(e=>$(e,"AutosaveSession.destroy: releasing session lock"))}sessionTransaction(e,r,n,a){let i=(0,H.DB)(r,n,a);return i.catch(r=>{(0,p.sx)("autosave_transaction_failure",{transactionName:e,message:r.message}),this.manager.terminateDueToError(`${e} transaction failed`,!1)}),i}readyToAcceptChanges(){let e=this.transactionQueue.length>=10;return e&&!this.reportedFullQueue&&(this.reportedFullQueue=!0,(0,W.W6)("Autosave transaction queue is backed up.")),!this.restoring&&!e}hasOngoingCommitTask(){return!this.transactionQueue.isComplete()}async tryToFlushAutosave(){this.readyToAcceptChanges()&&(d.i6g.flushAutosave(),await this.transactionQueue.waitForCompletion())}async enqueueAutosaveCommit(e){await this.transactionQueue.enqueue(()=>this.commitAutosave(e))}async commitAutosave(e){let{changes:r,commitPolicy:n,fileVersion:a,fileKey:i,newSessionID:o,numberOfUncleanRegisters:s,reason:l}=e;if(!this.readyToAcceptChanges()){this.manager.terminateDueToError("Committing, but not ready to accept changes",!0);return}if(o<0){this.manager.terminateDueToError("Unexpected sessionID < 0",!0);return}if(i&&i!==this.manager.fileKey){(0,W.W6)("Web file key out of sync with fullscreen file key",{"web file key":this.manager.fileKey,"fullscreen file key":i}),this.manager.terminateDueToError("Web file key out of sync with fullscreen file key",!1);return}this.activityLogger?.recordAutosaveCommit(this.manager.fileKey,this.manager.userID,this.sessionID,e);let c=this.sessionID,u=null;if(o!==this.sessionID){u=this.webLock,this.sessionID=o;let e=await (0,Y.A2)({userID:this.manager.userID,fileKey:this.manager.fileKey,sessionID:this.sessionID});if(!e){this.manager.terminateDueToError("unable to acquire lock",!0);return}this.webLock=e}if(!(0,Y.LX)(this.webLock,{userID:this.manager.userID,fileKey:this.manager.fileKey,sessionID:this.sessionID})){this.manager.terminateDueToError("lock is not for the current session",!1);return}let m=r.changedNodes.length,p=r.changedNodes.map(e=>({nodeID:e.nodeID,changes:e.changes})).concat(r.clearedNodes.map(e=>({nodeID:e,changes:null,snapshots:null}))),h=[];for(let e of r.referencedNodes)h.push({nodeID:e.nodeID,buffer:e.changes});let g=new Set;for(let e of r.imageHashes)g.add(e);let f=await this.sessionTransaction("commit",[H.Sp,H.jP,H.DV,H.w8],async e=>await em({transaction:e,commitPolicy:n,userID:this.manager.userID,fileKey:this.manager.fileKey,fileVersion:a,oldSessionID:c,sessionID:this.sessionID,pendingChanges:p,pendingImages:g,pendingReferencedNodes:h,reason:l,isFirstCommitOfAutosaveSession:!this.hasCommitted}),"readwrite");this.hasCommitted=!0;let E={stored_node_changes:f,unclean_registers:s,changed_nodes:m,cleared_nodes:r.clearedNodes.length,referenced_nodes:h.length,pending_images:g.size,commit_policy:d.W2B[n],session_id:this.sessionID,new_session_id:o,commit_reason:void 0!==l?d.uXP[l]:void 0,file_key:i,manager_file_key:this.manager.fileKey};if((0,v.Lo)("Autosave","commit completed",E),(0,O.ds)("autosave_commit_completed",i,_.D.getState(),E),!this.reportedStorageError&&void 0!==s&&s!==f){if(f>0&&0===s){let e=e=>{if(!(e.length>5))return e;{let r=e.slice(0,5);return r.push("..."),r}},n=await eu(5,!0);(0,v.x1)("Autosave","Dumping autosave since we expect IDB to be empty",{debug:n,changedNodes:e(r.changedNodes.map(e=>e.nodeID)),clearedNodes:e(r.clearedNodes),referencedNodes:e(r.referencedNodes.map(e=>e.nodeID)),imageHashes:e(r.imageHashes),currentSessionID:d.h3O.currentSessionID(),commitQueueLength:this.transactionQueue.length}),this.manager.terminateDueToError("Expected IDB to be empty after synchronizing with multiplayer",!0)}else f>s?this.manager.terminateDueToError("Expected IDB to have at many node changes as registers (currently has more)",!0):f<s&&this.manager.terminateDueToError("Expected IDB to have at many node changes as registers (currently has less)",!0);this.reportedStorageError=!0}null!=u&&u.release().catch(e=>$(e,"commitAutosave: release lock")),this.commitEventListener.onCommitEvent(),n===d.W2B.ADD_CHANGES?(this.consecutiveCommitsAddingChanges++,this.consecutiveCommitsAddingChanges>=4&&(0,w.YQ)({id:K.Cr})):this.consecutiveCommitsAddingChanges=0}async restoreAutosaveIfNeeded(){if(d.i6g.fileIsReadOnly())return;this.restoreAnalytics.fileKey=this.manager.fileKey,this.restoreAnalytics.isLocalFile=(0,o.T)(this.manager.fileKey),this.restoring=!0;let e=function(){if(!T.Ay.chrome||!navigator.storage?.persist)return Promise.resolve(!1);let e=new Promise(e=>setTimeout(()=>e(!1),200));return Promise.race([navigator.storage.persist(),e])}(),r=(0,W.U4)(),n=this.changesToRestore;if(this.changesToRestore=[],this.restoreAnalytics.sessionsCheckTime=this.restoreTimer.getElapsedTime(),this.restoreAnalytics.numberOfSessions=n.length,n.length>0){let e=n[0];this.restoreAnalytics.lastUpdatedAt=e.lastUpdatedAt,this.restoreAnalytics.offlineEditingTime=e.offlineEditingTime,this.restoreAnalytics.originalTrackingSessionId=e.originalTrackingSessionId,this.restoreAnalytics.lastCommitReason=e.lastCommitReason?d.uXP[e.lastCommitReason]:void 0,this.restoreAnalytics.releaseTag=e.releaseTag,await this.restoreChangesForSessionRows(n)}this.restoreAnalytics.persistentStorage=await e;let{usageBytes:a,quotaBytes:i}=await r;this.restoreAnalytics.storageUsageBytes=a,this.restoreAnalytics.storageQuotaBytes=i,this.restoreAnalytics.isIncremental=d.h3O.isIncrementalSession(),this.restoreTimer.stop(),this.restoreAnalytics.time=this.restoreTimer.getElapsedTime(),(0,O.ds)("autosave_restore_on_load",this.restoreAnalytics.fileKey,_.D.getState(),this.restoreAnalytics,{forwardToDatadog:!0}),this.restoring=!1}async restoreChangesForSessionRows(e){if(!(0,Y.LX)(this.webLock,{userID:this.manager.userID,fileKey:this.manager.fileKey,sessionID:this.sessionID})){this.manager.terminateDueToError("lock is not for the current session",!1);return}let{changesByNode:r,referencedNodeMap:n,fileVersion:a}=await this.sessionTransaction("restore",[H.Sp,H.jP,H.DV,H.w8],async r=>await X(r,this.sessionID,e),"readwrite"),i=r.size>0;for(let e of(i?((0,o.T)(this.manager.fileKey)||await (0,x.m)(this.manager.fileKey,"Offline sync","Before syncing changes",_.D.dispatch).catch(e=>(0,W.W6)("Failed to create before savepoint",{status:e.status,message:e.data?.message})),(0,v.Lo)("Autosave","Restoring auto-saved data",void 0,{logToConsole:d.NUh.ALWAYS}),await this.restoreChanges(r,n,a)):(0,v.Lo)("Autosave","Changes are empty!",void 0,{logToConsole:d.NUh.ALWAYS}),this.commitEventListener.waitForNextCommit().then(()=>{K.hp.sendToOtherTabs(K.a)}).catch(e=>$(e,"restoreChangesForSessionRows: waitForNextCommit")),this.restoreAnalytics.hadChangesToRestore=i,this.restoreAnalytics.numberOfBytes=0,this.restoreAnalytics.numberOfNodes=r.size,this.restoreAnalytics.numberOfReferencedNodes=n.size,r.values()))this.restoreAnalytics.numberOfBytes+=e.length}async restoreChanges(e,r,n){let a=Array.from(e.entries()).sort(([e,r],[n,a])=>e<n?-1:1),i=(0,g.kc)().suppress_unsaved_changes_ui&&(0,g.kc)().incremental_loading_validation&&a.every(([e,[r]])=>d.i6g.changesAreOnlyNewFileSystemChanges(r,n));for(let[e,[r,i]]of a)d.i6g.loadAutosavedNodeChanges(e,r,i,n);if(this.restoreAnalytics.changesAreAllDerivedData=d.i6g.changesAreAllDerivedData(),this.restoreAnalytics.nodeFields=d.i6g.restoredNodeFieldNames(),this.restoreAnalytics.neededToMigrate=d.i6g.currentFileVersion()>n,(0,P.Ff)()){(0,O.ds)("autosave_load_containing_pages_start",this.manager.fileKey,_.D.getState(),{node_count:e.size,fileKey:this.manager.fileKey});let r=performance.now(),n=new Set(e.keys());for(let e of d.i6g.getParentIndexChanges())n.add(e);await (0,P.Xl)(n),(0,O.ds)("autosave_load_containing_pages_end",this.manager.fileKey,_.D.getState(),{node_count:e.size,timeElapsed:performance.now()-r,fileKey:this.manager.fileKey})}let s=d.i6g.getImagesUsedInAutosavedChanges().split(" ");this.restoreAnalytics.numberOfImages=await this.restoreImagesIfAvailable(s);let l=this.restoreAvailableReferencedNodes(r);d.i6g.migrateAndSetAutosaveChanges(l,n),u.l7.autosave("autosave",()=>d.i6g.applyAutosavedChanges()),this.restoreAnalytics.timeToApply=this.restoreTimer.getElapsedTime(),(0,v.Lo)("Autosave","Successfully applied auto-saved changes",void 0,{logToConsole:d.NUh.ALWAYS});let c=()=>{_.D.dispatch(C.Q.enqueueFront({notification:{type:N._.AUTOSAVE_CHANGES_RESTORED,message:"Your offline changes were synced"}})),(0,v.Lo)("Autosave","Successfully synced auto-saved changes",void 0,{logToConsole:d.NUh.ALWAYS})};(0,o.T)(this.manager.fileKey)?(0,D.l)().then(()=>{this.manager.fileKey!==_.D.getState().openFile?.key||i||c()}):(await (0,D.l)(),this.restoreAnalytics.timeToSync=this.restoreTimer.getElapsedTime(),await (0,x.m)(this.manager.fileKey,"Offline sync","After syncing changes",_.D.dispatch).catch(e=>{(0,O.ds)("autosave_skip_after_checkpoint",this.manager.fileKey,_.D.getState(),{error:e.data?.message}),(0,W.W6)("Failed to create after savepoint",{status:e.status,message:e.data?.message})}),i||c())}async restoreImagesIfAvailable(e){let r=0;return await this.sessionTransaction("restore images",[H.Sp,H.DV],async n=>{let a=await this.currentEditorSessionID(n);if(!a)return;let i=n.objectStore(H.DV);for(let n of e){let e=await i.get([a,n]);e&&(d.i6g.restoreImageBytes(n,e.blob),r++)}await n.done}),r}restoreAvailableReferencedNodes(e){let r=[];for(let[n,a]of e)d.i6g.restoreReferencedNodeFile(n,a),r.push(n);return r}currentEditorSessionID(e){return q(this.manager.userID,this.manager.fileKey,this.sessionID,e)}async getNodeChangesForSession(){let e=await (0,H.Z4)();if(!e)throw Error("Unable to get DB");let r=e.transaction([H.Sp,H.jP],"readonly"),n=r.objectStore(H.jP),a=await this.currentEditorSessionID(r);return a?await n.getAll((0,H.iM)(a)):[]}async getNodeChangeCount(){return(await this.getNodeChangesForSession()).length}async hasPersistedUserChanges(){let e=await this.getNodeChangesForSession();return eh(this.manager.fileKey,e)}async enqueueAssignFileKeyForLocalFile(e,r){let n=this.manager.fileKey;if(!(0,o.T)(n)){(0,W.W6)("Only local file keys can be reassigned");return}if((0,o.T)(e)){(0,W.W6)("Cannot reassign file key to a local file key");return}await this.transactionQueue.enqueue(async()=>{let a=this.webLock,i=await (0,Y.A2)({userID:this.manager.userID,fileKey:e,sessionID:this.sessionID});if(!i){this.manager.terminateDueToError("unable to acquire lock",!0);return}this.webLock=i,await ep(this.manager.userID,n,e),r(),await a?.release()})}}let eb=null;function eI(){return eb}function eT(e,r){if(eb){if(eb.fileKey===e)return(0,v.Lo)("Autosave","Autosave manager already exists"),eb;(0,W.W6)("Manager already exists. Updating file key",{"current fileKey":eb.fileKey,"new fileKey":e}),eb.terminateAndWaitForCleanup(),eb=null}return(0,v.ED)("Autosave","Create autosave manager",{fileKey:e}),eb=new eg(r,e)}function ev(){eS().catch(e=>$(e,"failed to destroy autosave manager"))}async function eS(){if((0,v.ED)("Autosave","Destroy autosave manager"),!eb){(0,v.Lo)("Autosave","No manager to destroy");return}let e=eb;eb=null,await e.terminateAndWaitForCleanup()}function ew(e,{offlineFiles:r}){let n={};for(let a in e){let e=r[a];e&&(n[a]=e)}return n}let eA=F.M4.Query({async fetch({userId:e}){if(!e)return{};let r=await ei(e),n={};for(let e of r)n[e.fileKey]=e;return n}});var eN=(e=>(e.OFFLINE_FILE_TILE="OFFLINE_FILE_TILE",e.EDITOR="EDITOR",e))(eN||{});let eC=F.M4.Mutation(({fileKey:e,name:r,source:n},{atomStore:a,query:i,reduxStore:o})=>{if(a.set(eP,null),!r)return;let s=o.getState().user?.id??null;i.mutate(eA({userId:s}),n=>{let a=n[e];a&&(a.name=r)});let l=eb?.fileCreationManager;return l&&(l.fileKey===e?(l.updateNewFileInfo({fileName:r}),l.pendingRealFileKey&&_.D.dispatch(L.yJ({file:{key:l.pendingRealFileKey,name:r},userInitiated:!0}))):(0,W.W6)("File key in rename mutation does not match current FileCreationManager file key",{mutationFileKey:e,fileCreationManagerFileKey:l.fileKey})),(0,p.sx)("Rename New Autosave File",{source:n,isOffline:!navigator.onLine}),ef(s,e,r)}),eL=(0,E.eU)(e=>{let r=e(R.kS),n={};if(r){let a=e(eA({userId:r}));for(let[e,r]of Object.entries(a?.data??{}))r.hasChanges&&(n[e]=r)}return n}),eO=(0,E.eU)(e=>{let r=e(G.h),n=e(R.kS);if(r&&n){let a=e(eA({userId:n})),i=a?.data??{};if(r in i)return i[r]}return null});function eR(){return f.zl.get(eO)}let eP=(0,E.eU)(null);function eD(e){f.zl.set(eP,e.fileKey)}let ek=(0,E.eU)({});function eM(e,r){let n=f.zl.get(ek);f.zl.set(ek,{...n,[e]:r})}function eF(e){let r=(0,i.d4)(r=>!!r.autosave.unclaimedFilesWithChangesInIDB.find(r=>r.fileKey===e)),n=(0,h.l)(M.dDF,r?e:"");return r?n:b.Qw.loaded(!1)}function ex(){let e=(0,i.d4)(e=>e.autosave.unclaimedFilesWithChangesInIDB),r=(0,i.d4)(e=>e.autosave.unclaimedFilesCreatedOffline),n=(0,y.p)(M.dDF,a.useMemo(()=>e.map(({fileKey:e})=>({key:e})),[e])),o=a.useMemo(()=>n.map(({result:e})=>e.transform(e=>!!e.file?.hasPermission)),[n]),l=(0,i.d4)(e=>e.fileByKey);return a.useMemo(()=>({unsyncedFiles:(0,s.WI)(e.map(({fileKey:e,lastUpdatedAt:r},n)=>{let a=l[e];return a&&!a.trashed_at&&o[n].unwrapOr(!1)?{type:"autosave-file",fileKey:e,lastUpdatedAt:r,file:a}:null})),localUnsyncedFiles:r}),[e,r,l,o])}(0,E.eU)(e=>{let r={...e(eL)},n=e(eP),a=e(ek),i={};for(let e in r)e in a||(i[e]=r[e]);if(n&&n in i){let e=i[n];i[n]={...e,isRenaming:!0}}return i})},742809:(e,r,n)=>{n.d(r,{X:()=>d});var a=n(154254),i=n(980820),o=n(113853),s=n(662275),l=n(731078),c=n(648834);let d=(0,i.nF)((e,{entity:r,entityType:n,shape:i})=>{let l=document.createElement("input");l.type="file",l.accept="image/*",l.className=a.cx.hidden.$,l.style.display="none",l.onchange=()=>{let a=l.files;null!==a&&a.length>0&&(e.dispatch(o.s6({entity:r,entityType:n,file:a[0],shape:i||"CIRCLE"})),e.dispatch(s.to({type:c._,showModalsBeneath:!0})))},document.body.appendChild(l),l.click()});(0,i.nF)((e,{team:r})=>{e.dispatch(d({entity:r,entityType:l.ck.TEAM,shape:"SQUARE"}))})},864319:(e,r,n)=>{n.d(r,{TA:()=>b,g7:()=>E});var a=n(414507),i=n(776621),o=n(807539),s=n(330654),l=n(99506),c=n(36816),d=n(304769),u=n(13513),m=n(720647);let p={design:d.ud.DESIGN,whiteboard:d.ud.FIGJAM,figjam:d.ud.FIGJAM,dev_mode:d.ud.DEV_MODE,slides:d.ud.SLIDES,collaborator:d.ud.COLLABORATOR,developer:d.ud.DEVELOPER,expert:d.ud.EXPERT};(0,o.x)()(p);let h={design:l.ud.DESIGN,whiteboard:l.ud.WHITEBOARD,figjam:l.ud.WHITEBOARD,dev_mode:l.ud.DEV_MODE,slides:l.ud.SLIDES,collaborator:l.ud.COLLABORATOR,developer:l.ud.DEVELOPER,expert:l.ud.EXPERT};(0,o.x)()(h);let _={design:m.lM.DESIGN,whiteboard:m.lM.FIGJAM,figjam:m.lM.FIGJAM,dev_mode:m.lM.DEV_MODE,slides:m.lM.SLIDES};(0,o.x)()(_);let g={design:m.oM.DESIGN,whiteboard:m.oM.WHITEBOARD,figjam:m.oM.WHITEBOARD,dev_mode:m.oM.DEV_MODE,slides:m.oM.SLIDES};(0,o.x)()(g);let f={design:c.j4.DESIGN,whiteboard:c.j4.WHITEBOARD,figjam:c.j4.WHITEBOARD};function E(e){return s.object(u.dk.dict(()=>e.optional()))}(0,o.x)()(f),d.ud.DESIGN,d.ud.DEV_MODE,d.ud.FIGJAM,d.ud.SLIDES,d.ud.EXPERT,d.ud.DEVELOPER,d.ud.COLLABORATOR;let y=u.N_.dict();function b(e){var r;if(!e)return null;let n=y[p[r=e.key]??r];return n?{key:n,license_types:e.licenseTypes.map(e=>_[e]??e)}:((0,i.$D)(a.FigmaTeam.BILLING,Error(`convertLgSeatTypeProduct encountered unexpected seat type key: ${e.key}`)),null)}},582410:(e,r,n)=>{n.d(r,{H5:()=>o});var a=n(545697),i=n(720647);let o=new a.X([i.G_.DESIGN,i.G_.FIGJAM,i.G_.DEV_MODE]);new a.X([i.G_.DESIGN,i.Mg,i.G_.DEV_MODE])},720647:(e,r,n)=>{n.d(r,{G_:()=>d,Mg:()=>c,Te:()=>u,_R:()=>E,if:()=>g,lM:()=>m,oM:()=>h,vc:()=>_,vu:()=>l,wR:()=>f,wk:()=>p});var a=n(67151),i=n(330654),o=n(99506),s=(e=>(e.DESIGN="design",e.FIGJAM="figjam",e.WHITEBOARD="whiteboard",e.DEV_MODE="dev_mode",e.SLIDES="slides",e.SITES="sites",e))(s||{});let l="design",c="whiteboard",d={DESIGN:"design",FIGJAM:"figjam",DEV_MODE:"dev_mode"};i.nativeEnum(d);let u={DESIGN:"design",WHITEBOARD:"whiteboard",DEV_MODE:"dev_mode"};i.nativeEnum(u);let m={DESIGN:"design",FIGJAM:"figjam",DEV_MODE:"dev_mode",SLIDES:"slides"},p=i.nativeEnum(m),h={DESIGN:"design",WHITEBOARD:"whiteboard",DEV_MODE:"dev_mode",SLIDES:"slides"};function _(e){switch(e){case o._Y.DESIGN:case o._Y.SLIDES:case o._Y.SITES:case o._Y.COOPER:case null:return u.DESIGN;case o._Y.WHITEBOARD:return u.WHITEBOARD;default:(0,a.xb)(e)}}function g(e){switch(e){case o._Y.DESIGN:case o._Y.SITES:case o._Y.COOPER:case null:return h.DESIGN;case o._Y.WHITEBOARD:return h.WHITEBOARD;case o._Y.SLIDES:return h.SLIDES;default:(0,a.xb)(e)}}function f(e){switch(e){case o._Y.DESIGN:case o._Y.COOPER:case o._Y.SITES:case null:return o.G_.DESIGN;case o._Y.WHITEBOARD:return o.G_.WHITEBOARD;case o._Y.SLIDES:return o.G_.SLIDES;default:(0,a.xb)(e)}}function E(e,r){return e===o._Y.WHITEBOARD?r?.whiteboardPaidStatus===o.dQ.RESTRICTED:e===o._Y.DESIGN&&r?.designPaidStatus===o.dQ.RESTRICTED}i.nativeEnum(h)},457150:(e,r,n)=>{n.d(r,{vK:()=>u}),n(414507),n(776621),n(96328);var a=n(330654);n(939863);var i=(e=>(e.ACH_DEBIT="ach_debit",e.CARD="card",e.SEPA_DEBIT="sepa_debit",e.UNKNOWN="unknown",e))(i||{}),o=(e=>(e.AMEX="amex",e.DINERS="diners",e.DISCOVER="discover",e.EFTPOS_AU="eftpos_au",e.JCB="jcb",e.MASTERCARD="mastercard",e.UNIONPAY="unionpay",e.VISA="visa",e.UNKNOWN="unknown",e))(o||{});let s=a.object({type:a.literal("ach_debit"),last4:a.string().nullable()}),l=a.object({type:a.literal("card"),brand:a.nativeEnum(o).nullable(),last4:a.string().nullable()}),c=a.object({type:a.literal("sepa_debit"),last4:a.string().nullable()}),d=a.object({type:a.literal("unknown"),stripe_type:a.string()}),u=a.union([s,l,c,d])},459279:(e,r,n)=>{n.d(r,{SA:()=>b,mR:()=>I}),n(414507);var a=n(636149),i=n.n(a);n(740222),n(181912),n(966712),n(776621),n(96328);var o=n(330654);n(939863);var s=n(99506);n(227544);var l=n(798614),c=n(622139),d=n(304769),u=n(13513),m=n(864319),p=n(457150),h=(e=>(e.PENDING="pending",e.OPEN="open",e.PAID="paid",e.UNCOLLECTIBLE="uncollectible",e.VOID="void",e))(h||{}),_=(e=>(e.MANUAL="manual",e.SUBSCRIPTION_CREATED="subscription_created",e.SUBSCRIPTION_RENEWED="subscription_renewed",e.CATCH_UP="catch_up",e.TRUE_UP="true_up",e))(_||{});let g=o.object({billable_product_key:o.nativeEnum(d.ud),unit_amount:o.number(),quantity:o.number()});var f=(e=>(e.OPEN="open",e.PAID="paid",e.CANCELED="canceled",e))(f||{});let E=o.object({status:o.nativeEnum(f),payment_method:p.vK.nullable()});o.object({id:o.string(),description:o.string(),issued_at:o.string().nullable(),paid_at:o.string().nullable(),period_starts_at:o.string(),period_ends_at:o.string(),past_due_at:o.string().nullable(),plan_parent_type:o.nativeEnum(s.OL),billing_interval:o.nativeEnum(c.NW),total:o.number(),state:o.nativeEnum(h),subtype:o.nativeEnum(_),currency:l.D,hosted_invoice_url:o.string().nullable(),invoice_pdf:o.string().nullable(),number:o.string().nullable(),total_tax_amount:o.number(),lines:g.array(),subtotal:o.number(),payments:E.array(),org_invoice_details:o.object({is_locked:o.boolean().nullable(),is_skipped_trueup:o.boolean().nullable(),seat_floors:(0,m.g7)(o.number().nullable()).nullable()}).nullish()});var y=(e=>(e.PENDING="pending",e.OPEN="open",e.PAID="paid",e.UNCOLLECTIBLE="uncollectible",e.VOID="void",e.OVERDUE="overdue",e))(y||{});function b(e,r=u.Oq.toArray()){let n=i()(e.lines,e=>e.billable_product_key),a={},o=0,s=0;return r.forEach(e=>{let r=n[e]??[],i=0,l=0,c=0;r.forEach(e=>{let r=e.unit_amount>0?e.quantity:-e.quantity,n=e.unit_amount*e.quantity;i+=r,o+=r,l+=n,n>=0?c+=n:s+=n}),a[e]={quantity:i,amountExcludingCredits:c,amount:l}}),{seatsBreakdown:a,totalSeatsQuantity:o,totalCreditsAmount:s}}function I(e){return e.plan_parent_type===s.OL.TEAM?u.Oq.exclude([d.ud.DEV_MODE]):u.Oq}var T=(e=>(e.REVIEW="review",e.LOCKED="locked",e))(T||{})},176824:(e,r,n)=>{n.d(r,{p:()=>i}),n(752553),n(756442),n(135163);var a=n(622139);function i(e,r){return"promoReview"===e.view||"teamUpgrade"===e.view&&e.paymentStep===a.tn.CONFIRM_PAY&&r.promo}n(304769),n(13513)},12493:(e,r,n)=>{n.d(r,{$n:()=>O,ac:()=>D,gW:()=>C});var a=n(411855),i=n(188507),o=n(786013),s=n(299321),l=n(75274),c=n(966712),d=n(374626),u=n(915440),m=n(391388),p=n(411045),h=n(420576),_=n(678340),g=n(335682),f=n(99506),E=n(279453),y=n(428467),b=n(239671),I=n(66037),T=n(594901),v=n(417908),S=n(775099),w=n(100197),A=n(147206),N=n(984968);function C(e,r,n,a,i,o,l,c,d){var u;return{createBranch:R(e,r,l,c,d,n,a),openBranchSource:e&&(0,h.Kz)(e)?{status:"enabled"}:{status:"hidden"},viewBranches:e&&e.fileRepoId?l?{status:"hidden",reason:"Recovery mode"}:{status:"enabled"}:{status:"hidden"},viewBranchDiff:(u=e?.sourceFile||null,e?(0,h.Kz)(e)?e.canView?u?.canView?l?{status:"hidden",reason:"Recovery mode"}:i!==s.lyf.BRANCHING&&a!==_.Wy.SAFE?{status:"disabled",reason:"Low memory"}:{status:"enabled"}:{status:"hidden",reason:"Can't view source"}:{status:"hidden",reason:"Can't view branch"}:{status:"hidden",reason:"Not a branch"}:{status:"hidden"}),mergeBranch:function(e,r,n,a,i,o){if(!e)return{status:"hidden"};if(!(0,h.Kz)(e))return{status:"hidden",reason:"Not a branch"};if(!e.canManage)return{status:"hidden",reason:"Can't edit branch"};if(!r?.canManage)return{status:"hidden",reason:"Can't edit source"};if(e.trashedAt)return{status:"hidden",reason:"Branch is archived"};if(o)return{status:"hidden",reason:"Recovery mode"};if(a!==s.lyf.BRANCHING){if(n!==_.Wy.SAFE)return{status:"disabled",reason:"Low memory"};if(i!==s.kul.JOINED)return{status:"disabled",reason:"Offline"}}return{status:"enabled"}}(e,e?.sourceFile||null,a,i,o,l),viewSourceDiff:function(e,r,n,a,i,o,l){if(!e)return{status:"hidden"};if(!(0,h.Kz)(e))return{status:"hidden",reason:"Not a branch"};if(!e.canView)return{status:"disabled",reason:"Can't view branch"};if(!r?.canView)return{status:"disabled",reason:"Can't view source"};if(e.trashedAt)return{status:"hidden",reason:"Branch is archived"};if(l)return{status:"hidden",reason:"Recovery mode"};let c=e.sourceFileKey&&n.fileByKey[e.sourceFileKey],d=n.fileByKey[e.key];if(!c||!P(d,c))return{status:"disabled",reason:"No changes"};if(i!==s.lyf.BRANCHING){if(a!==_.Wy.SAFE)return{status:"disabled",reason:"Low memory"};if(o!==s.kul.JOINED)return{status:"disabled",reason:"Offline"}}return{status:"enabled"}}(e,e?.sourceFile||null,r,a,i,o,l),updateBranch:function(e,r,n,a,i,o,l){if(!e||!(0,h.Kz)(e))return{status:"hidden"};if(!e.canManage)return{status:"hidden",reason:"Can't edit branch"};if(!r?.canView)return{status:"hidden",reason:"Can't view source"};if(e.trashedAt)return{status:"hidden",reason:"Branch is archived"};if(l)return{status:"hidden",reason:"Recovery mode"};let c=e.sourceFileKey&&n.fileByKey[e.sourceFileKey],d=n.fileByKey[e.key];if(!c||!P(d,c))return{status:"disabled",reason:"No changes"};if(i!==s.lyf.BRANCHING){if(a!==_.Wy.SAFE)return{status:"disabled",reason:"Low memory"};if(o!==s.kul.JOINED)return{status:"disabled",reason:"Offline"}}return{status:"enabled"}}(e,e?.sourceFile||null,r,a,i,o,l)}}function L(){return(0,w.ut)(s.Ez5?.uiState().isRecovery,!1)}function O(){let e=(0,T.FC)(),r=(0,g.q5)(),n=(0,v.d)(),o=(0,i.d4)(e=>e.selectedView.editorType),s=L(),l=(0,d.md)(_.eE),c=(0,i.d4)(e=>e.mirror.appModel.topLevelMode),u=(0,i.d4)(e=>e.mirror.appModel.multiplayerSessionState),m=r?.teamId??null;return(0,a.useMemo)(()=>C(r,e,o,l,c,u,s,m,n),[r,e,o,l,c,u,s,m,n])}function R(e,r,n,a,i,o,s){if(!e)return{status:"hidden",reason:"No file"};if(n)return{status:"hidden",reason:"Recovery"};if(i)return{status:"hidden",reason:"User is in limited space"};if(o!==b.nT.Design)return{status:"hidden",reason:"Invalid editor type"};if(void 0!==s&&s!==_.Wy.SAFE)return{status:"disabled",reason:"Low memory"};if((0,A.Pe)(e))return{status:"disabled",reason:"File is copy/export restricted"};if((0,y.isOrgUserExternallyRestrictedFromState)(r))return{status:"hidden",reason:"Your organization doesn't allow you to create branches in external spaces."};if((0,S.XD)({currentTeamId:a,hasCurrentOrg:!!r.currentUserOrgId}))return{status:"upsell-org",reason:"Not in org but can upsell into it"};if(!e.parentOrgId)return{status:"hidden",reason:"File is not in org"};if(!r.currentUserOrgId)return{status:"hidden",reason:"Not in org"};let l=(0,h.up)(e,r.repos);if(l&&!(0,h.SA)(e,l))return{status:"hidden",reason:"Not the main file"};let c=r.user&&r.orgUsersByOrgId[e.parentOrgId]&&r.orgUsersByOrgId[e.parentOrgId][r.user.id]?r.orgUsersByOrgId[e.parentOrgId][r.user.id]:null,d=c&&c.design_paid_status;if(null===d)return{status:"hidden",reason:"Unknown account type"};switch(d){case f.El.RESTRICTED:if(c&&(0,A.Ay)(c.permission)===I.jh.GUEST)return{status:"hidden",reason:"Guests cannot see upsell"};return{status:"upsell-org-seat"};case f.El.STARTER:return{status:"hidden",reason:"Invalid account type"};case f.El.FULL:return{status:"enabled"}}}function P(e,r){return r.checkpoint_id&&e.source_checkpoint_id&&e.source_checkpoint_id!==r.checkpoint_id}function D(e){let r=(0,N.cD)(),n=(0,v.d)(),i=e?.key,s=(0,u.Rs)(E.XRI,{fileKey:i},{enabled:!!i}),d=(0,u.Rs)(E.QrR,{fileKey:i},{enabled:!!i}),h=(0,T.FC)(),_=L(),g=(0,p.cf)(),y=(0,a.useMemo)(()=>e?m.Qw.from(d).transform(e=>(function({file:e,isRecovery:r,isUserInLimitedSpace:n,isBillingRemodelEnabled:a,plan:i,planUser:s}){return e?r?{status:"hidden",reason:"Recovery"}:n?{status:"hidden",reason:"User is in limited space"}:e.canCreateBranch?{status:"enabled"}:i&&![o.Agb.ENTERPRISE,o.Agb.ORG].includes(i.tier)?{status:"upsell-org",reason:"Not in org but can upsell into it"}:s?(a?s?.seatTypeLicenseTypes?.includes(f.G_.DESIGN):s?.designPaidStatus===f.dQ.FULL)?{status:"hidden"}:{status:"upsell-org-seat"}:{status:"hidden",reason:"Unknown account type"}:{status:"hidden",reason:"No file"}})({file:e.file,isRecovery:_,isUserInLimitedSpace:n,isBillingRemodelEnabled:g,plan:e.file?.plan,planUser:e.file?.currentPlanUser})):m.Qw.loaded({status:"hidden",reason:"No file"}),[e,_,n,g,d]),I=(0,a.useMemo)(()=>e?m.Qw.from(s).transform(a=>R(a.file&&e?{key:e.key,parentOrgId:e.parent_org_id||null,fileRepoId:e.file_repo_id,canEdit:a.file.canEdit,canExport:a.file.canExport,viewerExportRestricted:a.file.viewerExportRestricted}:null,h,!!_,r,n,(0,b.sL)(e.editor_type))):m.Qw.loaded({status:"hidden",reason:"No file"}),[r,_,h,n,e,s]),S=y.transform(e=>e.status);return(0,l.T)({oldValue:I.data?.status,newValueQueryResult:S,label:"canCreateBranch",callSite:"useCreateBranchActionStatus",args:{oldReason:I.data?.reason,newReason:y.data?.reason},oldValueQueryResultStatus:I.status}),(0,c.kc)().can_create_branch_pv2?y:I}},654034:(e,r,n)=>{n.d(r,{CR:()=>L,F$:()=>U,GV:()=>b,JG:()=>w,PK:()=>y,Zz:()=>B,eR:()=>A,gj:()=>P,hx:()=>E,k0:()=>F,mz:()=>S,o8:()=>N,rN:()=>I,ro:()=>D,t$:()=>v,us:()=>x,vl:()=>k,wB:()=>f});var a=n(67151),i=n(609494),o=n(91408),s=n(966712),l=n(711525),c=n(886653),d=n(572206),u=n(309249),m=n(226055),p=n(457630),h=n(440535),_=n(911259),g=n(837746);let f=1,E={x:16,y:-4},y={top:0,right:0,bottom:0,left:0,width:0,height:0},b={messageMeta:[],attachments:{},state:h.EB.READY,anchorPosition:null,selectionBoxAnchor:null,discardAttempt:0};function I(e,r){return!r||(0,d.gR)(r,e)}function T(e){return(0,o.jz)(e?g.NJv:g.QP5)}function v(){return T((0,m.GS)())}function S(){var e;return e=(0,m.GS)(),(0,o.jz)(e?g.oGx:g.RdL)}function w(e,r,n){let{messageMeta:a,attachments:i,anchorPosition:o,selectionBoxAnchor:s}=r;return{id:h.hm,key:h.hm,uuid:h.hm,anchored:!0,canvasPosition:o,selectionAnchorCanvasPosition:s,page:n,isActive:e===h.hm,comments:[],messageMeta:a,attachments:Object.values(i),pageName:null,isCanvasMention:!1,sidebarItemType:h.kT.COMMENT_THREAD}}function A(e){return e===h.hm}let N=(0,c.cm)(e=>e.map(e=>e.user?{user_id:e.user.id,user_annotated:{id:e.user.id,handle:e.user.handle,img_url:e.user.imgUrl}}:{t:null!==e.t?e.t:void 0,link:e.link?e.link:void 0,styles:e.styles?e.styles:void 0,children:e.children?.length?N(e.children):void 0})),C=(0,c.cm)(e=>({x:e.x,y:e.y,...e.nodeId?{node_id:e.nodeId}:{},...e.inFrame?{in_frame:e.inFrame}:{},...e.nodeOffset?{node_offset:e.nodeOffset}:{},...e.selectionBoxAnchor?{selection_box_anchor:e.selectionBoxAnchor}:{},...e.stablePath?{stable_path:e.stablePath}:{}})),L=(0,c.cm)(e=>({id:e.id,handle:e.handle,img_url:e.imgUrl})),O=(e,r,n)=>{if("publicUuid"in e&&e.publicUuid)return!1;if(r.unreadComments[e.id])return!0;if(r.readComments[e.id])return!1;let a=r.allReadAt||r.createdAt;return!(e.createdAt.getTime()<=a.getTime())&&e.user.id!==n},R=new Date,P={id:"",userId:"",fileKey:"",createdAt:R,allReadAt:R,readComments:{},unreadComments:{}};function D(e,r,n,a,o,c,d,u){if("loaded"!==r.status)return r;let m=r.data.file;if(!m)return(0,l.gB)([]);let p=m?.comments.filter(e=>!e.parentId),_=m.comments.filter(e=>e.parentId).reduce((e,r)=>{let n=e[r.parentId]||[];return n.push(r),e[r.parentId]=n,e},{}),g=m.commentAttachments.reduce((e,r)=>{if(!r.fileCommentId)return e;let n=e[r.fileCommentId]||[];return n.push(r),e[r.fileCommentId]=n,e},{}),f=o(p.filter(e=>e.clientMeta?.nodeId).map(e=>e.clientMeta.nodeId)),E=p.map(r=>{let o=r.clientMeta&&r.clientMeta.nodeId,l=a[r.id]||r.uuid&&a[r.uuid],p=null;if(l&&r.clientMeta?.selectionBoxAnchor){let e=r.clientMeta.x-r.clientMeta.selectionBoxAnchor.x,n=r.clientMeta.y-r.clientMeta.selectionBoxAnchor.y;p={x:l.x-e,y:l.y-n}}let E=o?f[o]||r.clientMeta?.pageId||null:r.clientMeta?.pageId||"0:1",y=_[r.id]||[],b=[r,...y.sort((e,r)=>e.createdAt.getTime()-r.createdAt.getTime())],I=m.currentUserCommentReadStatus||P,T=b.map(n=>{let a=g[n.id]??(n.uuid&&g[n.uuid]);return function(e,r,n,a,o,l,c){let d=O(n,a,e),u=(0,i.L4)(n.id),m=n.messageMeta;n.messageMetaStylized?.length&&(m=n.messageMetaStylized);let p=(0,s.kc)().comments_faster_saving_ux?!!n.uuid&&o.has(n.uuid):void 0,h=(0,s.kc)().comments_faster_saving_ux_v2?u||!!r.uuid&&r.uuid in l:void 0;return{id:n.id,uuid:n.uuid,key:r.key,parent_id:n.parentId,user_id:n.user.id,created_at:n.createdAt.toISOString(),resolved_at:r.resolvedAt?r.resolvedAt.toISOString():null,deleted_at:null,message_meta:N(m),attachments:c,client_meta:n.clientMeta?C(n.clientMeta):null,order_id:null!==n.orderId?n.orderId.toString():null,isUnread:d,isPendingFromSinatra:u,isSaving:p,isPendingFromLg:h,user:L(n.user)}}(e,r,n,I,d,u,a)}),v=(0,i.L4)(r.id),S=(0,s.kc)().comments_faster_saving_ux?!!r.uuid&&d.has(r.uuid):void 0,w=(0,s.kc)().comments_faster_saving_ux_v2?v||!!r.uuid&&r.uuid in u:void 0;return{id:r.id,uuid:r.uuid||void 0,key:r.key,anchored:!!l,canvasPosition:l,selectionAnchorCanvasPosition:p,page:E,pageName:E&&c[E]||null,isActive:n===r.id,isPendingFromSinatra:v,isSaving:S,isPendingFromLg:w,comments:T,messageMeta:[],attachments:[],isCanvasMention:!1,sidebarItemType:h.kT.COMMENT_THREAD,commentPin:r.commentPin}});return(0,l.gB)(E)}function k(e,r,n,i){let{canvasPosition:o}=r,s=o&&e?(0,p.Z0)(e,o):null,l=function(e,r,n,i,o,s){if(!e||!r)return null;let l=(function(e){switch(e){case h.kT.COMMENT_THREAD:return _.XC;case h.kT.FEED_POST:return _.b1;case h.kT.WALKTHROUGH_MEDIA:return _.Yp;default:(0,a.xb)(e)}})(i).getPinSize(n).width,c=l+E.x+T(o)+25;return e.width-r.x-(s??0)<c?{x:-1*T(o)-E.x,y:-55}:{x:l+E.x,y:-55}}(e,s,new Set(r.comments.map(e=>e.user_id)).size,r.sidebarItemType,n,i),c=s&&l?d.Mi.add(s,l):null;return{...r,anchorPosition:s,threadPosition:c,threadOffset:l}}let M=(e,r,n)=>{let a=e.id;if(r.unreadCanvasMentions[a])return!0;if(r.readCanvasMentions[a])return!1;let i=r.allReadAt||r.createdAt;return!(e.createdAt.getTime()<=i.getTime())&&n!==e.id};function F(e,r,n){if("loaded"!==r.status)return r;let a=r.data.file;if(!a)return(0,l.gB)([]);let i=a.fileCanvasMentions,o=a.currentUserFileCanvasMentionReadStatus||u.ih,s=i.map(r=>(function(e,r,n,a){let i=`canvas_mention_${r.id.replace(/-/g,"_")}`,o=r.id,s=M(r,n,e);return{id:i,uuid:o,key:r.fileKey,anchored:!1,canvasPosition:null,selectionAnchorCanvasPosition:null,page:(0,l.oA)(r.pageId,null),pageName:null,isActive:a===i,isPendingFromSinatra:void 0,comments:[{id:i,uuid:o,key:o,parent_id:null,user_id:r.fileKey,created_at:r.createdAt.toISOString(),resolved_at:null,deleted_at:null,message_meta:N(r.messageMeta),client_meta:null,order_id:null,isUnread:s,isPendingFromSinatra:!1,user:L(r.mentionedByUser)}],messageMeta:N(r.messageMeta),attachments:[],isCanvasMention:!0,replyCount:void 0,sidebarItemType:h.kT.COMMENT_THREAD,nodeId:r.nodeIdPath[0]}})(e,r,o,n));return(0,l.gB)(s)}function x(){return{reply:{messageMeta:[],attachments:{}},state:h.EB.READY}}function U(e){let r=[];for(let n=0;n<e.message_meta.length;n++){let a=e.message_meta[n];a.hasOwnProperty("user_id")&&r.push(a.user_id)}return r}function B(e){return e.some(e=>null!=e.commentPin&&e.comments.some(e=>e.isUnread))}},661843:(e,r,n)=>{n.d(r,{Hu:()=>w,Kq:()=>L,W9:()=>N,gu:()=>C,kx:()=>A});var a=n(411855),i=n(188507),o=n(299321),s=n(880934);n(304061);var l=n(904669),c=n(636149),d=n.n(c),u=n(776250),m=n(966712),p=n(572206),h=n(975350);n(763223),n(912924),n(356390),n(160402);var _=n(29680),g=n(514736),f=n(788256),E=n(654034),y=n(289032),b=n(114716),I=n(74505),T=n(547465);(0,m.kc)().comments_new_observer;let v=(e,r)=>({anchorPositionById:r(a.useMemo(()=>{if("loaded"!==e.status||!e.data.file)return{commentNodeInfoById:{},commentNodeIds:new Set,commentThreads:[]};let r=e.data.file,n=Object.create(null),a=new Set,i=r.comments.filter(e=>null===e.parentId);for(let e of i)if(e.clientMeta){let{x:r,y:i,nodeId:o,nodeOffset:s,stablePath:l}=e.clientMeta;n[e.id]={canvasPosition:{x:r,y:i},nodeId:o,nodeOffset:s,stablePath:l?`[${l.join(",")}]`:void 0},null!=o&&a.add(o)}return{commentNodeInfoById:n,commentNodeIds:a,commentThreads:i}},[e]).commentNodeInfoById)}),S="COMMENTS_ABSOLUTE_POSITIONING_UPDATER";function w(e,r){let n=a.useMemo(()=>d()(e,e=>e.clientMeta?.nodeId),[e]),s=a.useMemo(()=>Object.keys(n),[n]),l=a.useRef({}),c=(0,i.wA)(),u=(0,b.g)(),m=a.useCallback(e=>{let{nodeId:r,position:a,eventOrigins:i}=e,o=l.current[r],s=i.includes("LOCAL"),d=navigator.onLine;if(s&&d){if(null===a){let e=n[r]||[];o&&e.forEach(e=>{let r=e.clientMeta;if(r){let n=e.clientMeta?.nodeOffset||{x:0,y:0},a=p.Mi.add(o.position,n);(r.x!==a.x||r.y!==a.y)&&c(h.hY({thread:{id:e.id,uuid:e.uuid||void 0,key:e.key},clientMeta:{x:a.x,y:a.y,page_id:r.pageId||void 0,node_id:r.nodeId||void 0,node_offset:r.nodeOffset||void 0,in_frame:r.inFrame||void 0,selection_box_anchor:r.selectionBoxAnchor||void 0,stable_path:r.stablePath||void 0}}))}})}else a&&a.page!==o?.position?.page&&(n[r]||[]).forEach(e=>{let r=e.clientMeta;if(r){let n=e.clientMeta?.nodeOffset||{x:0,y:0},i=p.Mi.add(a,n);c(h.hY({thread:{id:e.id,uuid:e.uuid||void 0,key:e.key},clientMeta:{x:i.x,y:i.y,page_id:a.page,node_id:r.nodeId||void 0,node_offset:r.nodeOffset||void 0,in_frame:r.inFrame||void 0,selection_box_anchor:r.selectionBoxAnchor||void 0,stable_path:r.stablePath||void 0}}))}})}l.current[r]=e},[n,l,c]);a.useEffect(()=>{if(r.enabled&&o.glU&&u){let{currentNodePosition:e}=(0,I.EE)(S,s,m);l.current=e}return()=>{o.glU&&u&&(0,I.lB)(S)}},[s,m,r.enabled,u])}function A(e){return a.useCallback(r=>r.reduce((r,n)=>{let a=e?.pageIdForNodeId(n)||null;return a&&l.UN().get(a)?.isInternalOnlyNode&&(a=null),r[n]=a,r},{}),[e])}function N(e,r,n,o,s,l){let c=v(r,o),d=(0,i.d4)(e=>e.comments.savingCommentUuids),m=(0,i.d4)(e=>e.comments.lgPendingUuidToServerIdMap);a.useEffect(()=>{if("errors"===r.status){let e=JSON.stringify(r.errors.map(e=>({code:e.code,path:e.path,message:e.error?.message||""})));console.error(`Failed to load comments: ${e}`),(0,u.sx)("Livegraph Comments Errors",{errors:e})}},[r]),(0,T.t)(e=>{if("loading"!==r.status){if("errors"===r.status){e("comments_fetched",{status:r.status});return}e("comments_fetched",{count:r.data?.file?.comments?.length,status:r.status})}},[r]);let p=a.useMemo(()=>l.filter(e=>!!("nodeId"in e?e.nodeId:e.id)).reduce((e,r)=>(e["nodeId"in r?r.nodeId:r.id]=r.name,e),{}),[l]),h=a.useMemo(()=>(0,E.ro)(e,r,n,c.anchorPositionById,s,p,d,m),[e,r,n,c.anchorPositionById,s,p,d,m]);return(0,y.E)("loaded"===h.status&&h.data||[]),h}function C(e,r,n){return a.useEffect(()=>{if(r.errors&&r.errors.length){let e=JSON.stringify(r.errors.map(e=>({code:e.code,path:e.path,message:e.error?.message||""})));console.error(`Failed to load canvas mentions: ${e}`),(0,u.sx)("Livegraph Canvas Mention Comments Errors",{errors:e})}},[r.errors]),a.useMemo(()=>(0,E.k0)(e,r,n),[n,r,e])}function L(e){let r;let n=(0,g.s)(),a=(0,_.eY)();if(!(0,f.Qf)(a))return!1;switch(n.orphanedBy){case"deleted_pages":return!e.pageName;case"deleted_anchors":if(0===e.comments.length||!(r=e.comments[0].client_meta?.node_id))return!1;return!a.get(r);case"non_slide_anchors":if(0===e.comments.length||!(r=e.comments[0].client_meta?.node_id))return!0;let i=(0,l.UN)().get(r);if(!i)return!0;return i.findContainingSlideOrSelf()===s.AD;default:return!1}}},697551:(e,r,n)=>{n.d(r,{CR:()=>R,Cj:()=>eh,D:()=>et,Dp:()=>B,Gg:()=>e_,Gq:()=>X,HE:()=>j,HN:()=>er,HR:()=>eo,Hc:()=>I,IZ:()=>ei,Jl:()=>C,Ks:()=>V,Lg:()=>Y,MZ:()=>Z,T9:()=>ec,Tn:()=>G,UK:()=>A,UP:()=>eu,Uc:()=>z,V4:()=>M,Wh:()=>K,Wi:()=>ee,Yo:()=>L,Yp:()=>T,ax:()=>b,b:()=>$,c0:()=>k,cV:()=>eg,cs:()=>es,d9:()=>em,gS:()=>O,jI:()=>Q,kc:()=>el,kl:()=>U,n:()=>eE,nR:()=>ey,o:()=>x,oH:()=>v,ou:()=>w,pH:()=>J,qA:()=>ef,sD:()=>ed,uS:()=>F,vr:()=>S,x1:()=>ea,xp:()=>P,yO:()=>q,zU:()=>ep});var a=n(188507);n(171812);var i=n(776250),o=n(886653),s=n(939863),l=n(22863),c=n(107877),d=n(661976),u=n(521010),m=n(560718);n(860178);var p=n(99506),h=n(428467),_=n(23001),g=n(555328),f=n(239671),E=n(813408);n(66037);var y=n(809073);function b(e,r){return{...e&&e.versions||{},...r&&r.versions||{}}}function I(e,r,n){return e&&r&&r[e]||n}function T(e){return e&&e.trim()||""}function v(e){return e&&e.status||{code:E.aP.EDIT}}function S(e,r){let n=(0,s.t)("community.profiles.your_handle_text");return e&&0!==e.length?e.length>15?(0,s.t)("community.profiles.profile_max_15_characters_in_length",{errorStringPrefix:n}):/^[a-zA-Z0-9_]{1,15}$/.test(e)?null:(0,s.t)("community.profiles.profile_cannot_contain_special_characters",{errorStringPrefix:n}):(0,s.t)("community.publishing.profile_handle_cannot_be_empty",{errorStringPrefix:n})}function w(e,r){if(!("user"in r))return!1;let n=r.authedProfilesById[e];return n?.primary_user_id?!!r.user&&!!n.associated_users?.find(e=>e.user_id===r.user.id):n?.team_id?!!(r.user&&r.teamAdminRolesForAuthedUsers[r.user.id].some(e=>e.team_id===n.team_id))||(0,h.hasAdminRoleAccessOnTeam)(n.team_id,r):!!n?.org_id&&(0,h.canAdminOrg)(n.org_id,r)}function A(e,r){return!!e.primary_user_id||"communityHub"!==r.view||"landing"!==r.subView||r.category!==d.aH&&r.sortState!==c.eg.FOLLOWING_FEED}let N=(0,o.xx)((e,r,n,a)=>{let i=null;if(e&&r[e]){let o=(0,h.canAdminOrg)(e,{currentUserOrgId:e,user:n,orgById:r,orgUsersByOrgId:a,fileByKey:{}}),s=r[e];i={isAdmin:o,id:s.id,name:s.name}}return i});function C(e){return N(e.currentUserOrgId,e.orgById,e.user,e.orgUsersByOrgId)}function L(){let e=(0,a.d4)(e=>e.currentUserOrgId);return N(e,(0,a.d4)(e=>e.orgById),(0,a.d4)(e=>e.user),(0,a.d4)(e=>e.orgUsersByOrgId))}let O=(0,o.xx)((e,r,n)=>{let a;let i=r.plugins.fetchedResources;switch(e){case f.nT.Design:a=y.$A.Design;break;case f.nT.DevHandoff:a=y.$A.Handoff;break;case f.nT.Slides:a=y.$A.Slides;break;default:a=y.$A.FigJam}let o=[];for(let e of r.plugins[a]){let r=i[e.id];if(r&&r.version){o.push(r.version);continue}let a=n[e.id];a&&o.push(a)}return o});function R(e){return O(e.selectedView.editorType,e.recentlyUsed,e.localPlugins)}function P(e){return!!(e.plugin_install||e.plugin||e.widget||e.whitelisted_plugin||e.hub_file||e.community_comment||e.community_resource_payment)}let D=e=>e.trim().toLocaleLowerCase().replace(/^#/,"");function k(e,r){return{content:e=D(e),state:H(e)||function(e,r){for(let n=0;n<r.length;n++)if(r[n]===e)return W(e);return null}(e,r.map(e=>e.content))?_.d.ERROR:_.d.OK}}function M(e,r){let n=e.find(e=>e.id===r);return n?.tags||[]}function F(e){return(0,s.Yd)(e.i18n_meta.text,e.text)}function x(e){return new Map(e.map(e=>[e.text,F(e)]))}function U(e,r,n,a){return r.find(r=>r===e)?(0,s.t)("community.publishing.tag_is_repeated_more_than_once",{tag:`'${a.get(e)??e}'`}):n.find(r=>r.text===e)?void 0:(0,s.t)("community.publishing.tag_not_in_category",{tag:`'${a.get(e)??e}'`})}function B(e,r,n){let a=[];if(e.length>Q)return(0,s.t)("community.publishing.cannot_have_more_than_5_tags");let i=x(n);for(let n=0;n<e.length;n++){let o=e[n],s=U(o,a,r,i);if(s)return s;a.push(o)}}let V=(e,r)=>(n,a)=>{let i=null;if(r.forEach((e,r)=>{0===e.toLocaleLowerCase().localeCompare(n.toLocaleLowerCase().trim())&&(i=r)}),!i)return{content:n,state:_.d.ERROR,errorMessage:(0,s.t)("community.publishing.tag_not_in_category",{tag:`'${n}'`})};let o=U(i,a.map(e=>e.content),e,r);return{content:i,state:o?_.d.ERROR:_.d.OK,errorMessage:o}};function G(e,r,n){let a=x(n),i=[];return e.tokens.forEach(e=>{let n=U(e.content,i.map(e=>e.content),r,a);i.push({...e,state:n?_.d.ERROR:_.d.OK,errorMessage:n})}),{...e,tokens:i}}function H(e){return e.match(/^[\P{Script_Extensions=Common} _\-0-9]*$/gu)?e.match(/^[\P{Script_Extensions=Common}0-9](.*[\P{Script_Extensions=Common}0-9])?$/gu)?e.toLocaleLowerCase()!==e?(0,s.t)("community.publishing.tags_can_only_contain_lowercase_characters"):e.length>25?(0,s.t)("community.publishing.tags_can_only_have_up_to_25_characters"):e.match(/[ _-]{2,}/)?(0,s.t)("community.publishing.tags_cannot_have_consecutive_dashes_underscores_or_spaces"):(e.match(/[ _-]/g)||[]).length>2?(0,s.t)("community.publishing.tags_cannot_be_longer_than_3_words"):null:(0,s.t)("community.publishing.tags_must_begin_and_end_with_a_letter_or_number"):(0,s.t)("community.publishing.tags_can_only_contain_certain_characters")}let W=e=>(0,s.t)("community.publishing.tag_is_repeated_more_than_once",{tag:`'${e}'`});function K(e){if(e.length>Z)return(0,s.t)("community.publishing.cannot_have_more_than_12_tags");let r=function(e){let r={};for(let n=0;n<e.length;n++){if(r[e[n]])return W(e[n]);r[e[n]]=!0}return null}(e);if(r)return r;for(let r=0;r<e.length;r++){let n=H(D(e[r]));if(n)return n}return null}function Y(e){return e.length>er?(0,s.t)("community.publishing.tagline_must_be_at_most_100_characters_long"):null}let $={name:"",description:"",tags:{inputValue:"",errorMessage:"",tokens:[]},categoryId:null,creatorPolicy:"",viewerMode:p.y4.CANVAS,scalingMode:null,author:{user_id:""},commentsSetting:m.Ni.ENABLED,publishers:{inputValue:"",tokens:[],errorMessage:""},blockPublishingOnToS:!1},j=["Tab","Enter",","],z=5242880,q=15728640,X=104857600,J=100,Z=12,Q=5,ee=10,et=60,er=100;function en(e){return"is_widget"in e&&e.is_widget?g.vt.WIDGET:"current_plugin_version_id"in e?g.vt.PLUGIN:g.vt.HUB_FILE}function ea(e){return"profile_handle"in e?g.Ug.PROFILE:en(e)===g.vt.HUB_FILE?g.Ug.HUB_FILE:en(e)===g.vt.WIDGET?g.Ug.WIDGET:g.Ug.PLUGIN}function ei(e){return e>=ee-1?(0,s.t)("community.publishing.cannot_have_more_than_max_publishers",{MAX_PUBLISHERS_PER_RESOURCE:ee}):null}function eo(e){let r={},n={},a=e.map(e=>(r[e.id]=e,n[e.author.id]=e.author,e.id));return{commentsById:r,authorsById:n,feed:a}}c.eg.POPULAR;let es=l.c;function el(){return(0,a.d4)(e=>e.authedActiveCommunityProfile)}function ec({authedProfilesById:e,profileId:r,userId:n,orgId:a,teamId:i}){return r?e[r]:a?Object.values(e).find(e=>e.org_id===a)||null:i?Object.values(e).find(e=>e.team_id===i)||null:n&&Object.values(e).find(e=>e.associated_users?.find(e=>e.user_id===n))||null}function ed(e,r){return e&&Object.values(r).find(r=>r.associated_users?.find(n=>n.user_id===e.id&&r.public_at))||null}function eu(){return(0,a.d4)(e=>em(e.selectedView))}function em(e){return"communityHub"===e.view||ep(e)||!1}function ep(e){return"search"===e.view&&("url:community"===e.entryPoint||"community"===e.entryPoint||"community:header"===e.entryPoint)}function eh(e){return"communityHub"===e.view&&"handle"===e.subView}function e_(e){return(0,u.G)(e)}function eg(e){return e.community_publishers?.accepted.find(e=>es(e))||null}function ef(e,r){let n=eg(r);if(n)return e.authedProfilesById[n.id]||null;let a=e.user&&ed(e.user,e.authedProfilesById);return a&&r.community_publishers?.accepted.find(e=>e.id===a.id)?a:null}function eE(e){switch(e){case g.bD.PLUGIN:return"plugins";case g.bD.WIDGET:return"widgets";case g.bD.COMMENT:return"comments";case g.bD.HUB_FILE:return"hub_files";default:throw Error("Unsupported Type")}}function ey(e,r){(0,i.sx)(c.W_.PROFILE_ADMIN_MENU_OPEN,{source:e,view:r})}},61057:(e,r,n)=>{n.d(r,{D:()=>l,VH:()=>s});var a=n(96328),i=n(939863),o=n(697551);function s(e){let r=(0,o.cV)(e);if(r)return r.name;let n=e.community_publishers.accepted;return function(e,r,n){if(0===e.length)return"";if(1===e.length)return n(e[0]);let o=e.slice(0,r-1),s=e.slice(r-1);0===s.length&&(s=[o[o.length-1]],o=o.slice(0,o.length-1));let l=1===s.length?n(s[0]):(0,i.t)("community.resource.by_x_others",{numPublishers:s.length}),c=o.map(n);return l&&c.push(l),(0,a.Yx)(c)}(n,n.length,e=>e.name)}function l(e){let r=e.community_publishers.accepted;return e.community_publishers.pending&&(r=r.concat(e.community_publishers.pending)),r.reduce((e,r)=>{let n=r.associated_users?.map(e=>e.user_id)||[];return r.primary_user_id&&e.push(r.primary_user_id),e.concat(n)},[])}},258237:(e,r,n)=>{n.d(r,{Ro:()=>o,jY:()=>s,o0:()=>l});var a=n(27087),i=n(837324);function o(e,r){return!!e&&!!e.plugin_publishers?.accepted?.some(e=>e.id===r)}function s(e,r){return!!e&&!!e.plugin_publishers?.pending?.some(e=>e.id===r)||o(e,r)}async function l(e,r){let{data:n}=await a.Ay.post(`/api/${(0,i.KH)(e,{pluralized:!0})}/${e.id}/publisher_invites`,{emails:r});return{resource:n.meta.plugin,errors:n.meta.errors}}},986323:(e,r,n)=>{n(99506),n(596607);var a=(e=>(e[e.NONE=0]="NONE",e[e.PENDING=1]="PENDING",e[e.ACCEPTED=2]="ACCEPTED",e[e.ADMIN=3]="ADMIN",e))(a||{})},782501:(e,r,n)=>{n.d(r,{$W:()=>ef,$x:()=>ea,Ac:()=>eE,CW:()=>ee,Dd:()=>M,En:()=>F,Gf:()=>ey,Gp:()=>ei,Ii:()=>q,JJ:()=>$,Kg:()=>ec,MO:()=>G,N8:()=>eo,R1:()=>eu,Rd:()=>ed,Rv:()=>K,T$:()=>x,Tn:()=>U,UU:()=>z,Wl:()=>et,Z2:()=>em,Z7:()=>H,f7:()=>V,gO:()=>k,j4:()=>X,jr:()=>W,kN:()=>J,l8:()=>er,mH:()=>Q,mN:()=>Y,nK:()=>eh,o1:()=>Z,oB:()=>D,of:()=>j,vC:()=>es,xw:()=>eg});var a=n(188507),i=n(563850),o=n(621840),s=n(414507),l=n(354703),c=n(38329),d=n(966712),u=n(717037),m=n(776621),p=n(27087),h=n(939863),_=n(815063),g=n(545941);n(158996);var f=n(646904),E=n(697551);n(411916);var y=n(428467),b=n(555328),I=n(813408),T=n(28588),v=n(376485),S=n(134608),w=n(301400),A=n(746058),N=n(506513);n(986323),n(540019);var C=n(204279),L=n(596607),O=n(837502),R=(e=>(e[e.NONE=0]="NONE",e[e.PENDING=1]="PENDING",e[e.DISPLAY_ONLY=2]="DISPLAY_ONLY",e[e.ADMIN_IN_DIFFERENT_WORKSPACE=3]="ADMIN_IN_DIFFERENT_WORKSPACE",e[e.ADMIN=4]="ADMIN",e[e.NONE_WITH_INHERITED_ADMIN=5]="NONE_WITH_INHERITED_ADMIN",e[e.PENDING_WITH_INHERITED_ADMIN=6]="PENDING_WITH_INHERITED_ADMIN",e[e.DISPLAY_ONLY_WITH_INHERITED_ADMIN=7]="DISPLAY_ONLY_WITH_INHERITED_ADMIN",e[e.EXPLICIT_ADMIN=8]="EXPLICIT_ADMIN",e))(R||{});let P=e=>!0===e.is_public||null!=e.org;function D(e,r,n,a){return(0,b.m3)(e)||a?v.Lu.PUBLIC:P(e.roles)?e.roles.is_public||(0,g.AC)(e)?v.Lu.PUBLIC:v.Lu.ORG:null!=r&&n?v.Lu.ORG:v.Lu.PUBLIC}function k(e,r,n,a){let i=K(r.team_id,n,e,r.parent_org_id||null);if(0===i.length)throw Error("Called getDefaultHubFilePublishingMetadataAuthor when no valid author exists");return B(e,i,n.authedProfilesById,n.user?.id,a)}function M(e,r){return e.creator.id===r}function F(e,r){if(e){let n=j(r,e);if(n)return n}let n=z(r,e);if(0===n.length)throw Error("Called getDefaultPluginPublishingMetadataAuthor when no valid author exists");return B(e,n,r.authedProfilesById,r.user?.id)}function x(e,r,n){return e?.id&&Object.keys(e.versions).length>0?function(e,r,n){if((e.community_publishers?.accepted||[]).length>0){let a=(0,E.cV)(e),i=a&&r[a.id];return i?.team_id?{team_id:i.team_id}:i?.org_id?{org_id:i.org_id}:{user_id:n||e.creator.id}}let a=r[e.publisher.id];return a?.org_id?{org_id:a.org_id}:a?.team_id?{team_id:a.team_id}:{user_id:a?.primary_user_id||e.creator.id}}(e,r,n):null}function U(e){let r;return e?.team_id?r={team_id:e.team_id}:e?.org_id&&(r={org_id:e.org_id}),r}function B(e,r,n,i,o){if(0===r.length)throw Error("Called getDefaultPublishingMetadataAuthor when no valid author exists");let s=x(e,n,i);if(s&&r.some(e=>V(e,s)))return s;if(o&&r.find(e=>(0,a.bN)(e,o)))return o;let l=r.find(W);if(l)return l;let c=r.find(G);return c?c:r.find(H)||r[0]}function V(e,r){return"team_id"in e?"team_id"in r&&e.team_id===r.team_id:"org_id"in e?"org_id"in r&&e.org_id===r.org_id:"user_id"in e&&"user_id"in r&&e.user_id===r.user_id}let G=e=>"org_id"in e,H=e=>"team_id"in e,W=e=>"user_id"in e;function K(e,r,n,a){let i=[];if((n?.community_publishers?.accepted||[]).length>0){if(!e&&!a)return[{user_id:r.user.id}];let i=n&&(0,E.cV)(n),o=i?r.authedProfilesById[i.id]:null;if(o?.team_id)return(0,y.hasAdminRoleAccessOnTeam)(o?.team_id,r)?[{team_id:o.team_id}]:[];if(o?.org_id)return(0,y.canAdminOrg)(o?.org_id,r)?[{org_id:o.org_id}]:[]}if(r.currentUserOrgId){let n=r.orgById[r.currentUserOrgId];if(!n)return[];if((0,y.canAdminOrg)(r.currentUserOrgId,r)&&(i.push({org_id:r.currentUserOrgId}),n.cmty_publish_as_user_enabled&&i.push({user_id:r.user.id})),e&&r.teams[e]){if(r.teams[e]?.org_access==="secret")return[];((0,O.Bg)(n.shared_org_license_group_settings)?(0,y.canAdminOrg)(r.currentUserOrgId,r):(0,y.hasAdminRoleAccessOnTeam)(e,r))&&i.push({team_id:e})}return i}return e?((0,y.hasAdminRoleAccessOnTeam)(e,r)&&i.push({team_id:e}),i.push({user_id:r.user.id}),i):[{user_id:r.user.id}]}async function Y(e){let{data:r,status:n}=await A.s.getEditors({fileKey:e.key});if(200===n)return r.meta}function $(e,r,n,a){let i;let o=e.has_file_link_password||e.hasFileLinkPassword;i="parent_org_id"in e?e.parent_org_id:"parentOrgId"in e?e.parentOrgId:null;let s=K("team_id"in e?e.team_id:e.teamId,n,a,i||null),l=!!n.figFileDuplicatedFromHubFile[e.key],c=!a;return!r||"is_template"in e&&e.is_template||e.trackTags?.isTemplate||"is_new_user_playground_library"in e&&e.is_new_user_playground_library||e.track_tags?.source==="default"||o||!(s.length>0)||l&&c?(0,h.t)("general.error"):null}function j(e,r){if(r.publisher.id&&e.user)switch(r.publisher.entity_type){case I.o1.ORG:{let n=Object.values(e.orgById).find(e=>e.community_profile_id===r.publisher.id);return{org_id:n?.id??e.currentUserOrgId??""}}case I.o1.TEAM:{let n=Object.values(e.teams).find(e=>e.community_profile_id===r.publisher.id);return{team_id:n?.id||""}}default:return{user_id:r.creator.id}}return null}function z(e,r,n=!0){let a=[],i=n&&r?j(e,r):null;return e.currentUserOrgId&&(0,y.canAdminOrg)(e.currentUserOrgId,e)&&a.push({org_id:e.currentUserOrgId}),Object.keys(e.teams).forEach(r=>{let n=e.teams[r];n&&"secret"!==n.org_access&&(0,y.hasAdminRoleAccessOnTeam)(r,e)&&a.push({team_id:r})}),a.push({user_id:e.user.id}),i&&!a.some(e=>V(e,i))&&a.unshift(i),a}function q(e,r){if(!e)return!1;let{team_id:n,org_id:a}=e;if("user_id"in r){let n=e.associated_users;return!!r.user_id&&r.user_id===e.primary_user_id||n?.some(e=>e.user_id===r.user_id)}return"team_id"in r&&n===r.team_id||"org_id"in r&&a===r.org_id}function X(e){let r=c.D.getState();return"user_id"in e?r.authedUsers.byId[e.user_id]:"org_id"in e?r.orgById[e.org_id]:"team_id"in e?r.teams[e.team_id]:void 0}function J(e,r){if("org_id"in e)return r.orgById[e.org_id]?.name??null;if("team_id"in e)return r.teams[e.team_id]?.name??null;{let e=r.user&&(0,E.sD)(r.user,r.authedProfilesById);return e?.public_at&&e?.name?e.name:e?.public_at&&e?.profile_handle?`@${e.profile_handle}`:r.user?.handle||null}}function Z(e,r){if("org_id"in e){let n=r.orgById[e.org_id];return n?(0,h.t)("community.publishing.org_name",{org:n.name}):(0,h.t)("general.fallback_org_name")}if("team_id"in e){let n=r.teams[e.team_id];return n?(0,h.t)("community.publishing.team_name",{team:n.name}):(0,h.t)("general.fallback_team_name")}{let n=r.authedUsers.byId[e.user_id]??r.user,a=(0,E.sD)(n,r.authedProfilesById);return a?a.name:n?.name||(0,h.t)("general.fallback_user_name")}}function Q(e,r){if("org_id"in e){let n=r.orgById[e.org_id];return n?.community_profile_handle||null}if("team_id"in e){let n=r.teams[e.team_id];return n?.community_profile_handle||null}{let n=r.authedUsers.byId[e.user_id]??r.user,a=(0,E.sD)(n,r.authedProfilesById);return a?a.profile_handle:n?.handle||null}}let ee=[T.yj.PNG,T.yj.JPEG];function et(e,r="Image"){if(!e)throw Error((0,h.t)("community.publishing.error_thumbnail_image_not_found",{filename:r}));let n=(0,_.S)(e.type,T.yj);if(!n||!ee.includes(n))throw Error((0,h.t)("community.publishing.error_thumbnail_image_wrong_format",{filename:r}));if(e.size>E.Uc)throw Error((0,h.t)("community.publishing.error_thumbnail_image_too_large",{filename:r,max_size:Math.floor(E.Uc/1e6)}));return e.size}function er(e){return new Promise((r,n)=>{let a=new Image;a.onload=()=>r(a),a.onerror=n,a.src=e})}let en=new Set;async function ea(e,r){if(null===e.files||!e.files[0])throw Error((0,h.t)("community.publishing.error_thumbnail_image_not_found_no_filename"));r&&eh(r);let n=e.files[0];et(n,(0,h.t)("community.publishing.thumbnail_image"));let[a,i]=await Promise.all([er(URL.createObjectURL(n)),(0,N.c)(n)]);return en.add(a.src),{url:a.src,buffer:new Uint8Array(i)}}async function ei(e,r,n=f.en){let a=[];for(let i of Array.from(e).slice(0,n))if(r&&i.type.startsWith("video/")){!function(e){let r=e.name;if(!e)throw Error((0,h.t)("community.publishing.error_thumbnail_image_not_found",{filename:r}));if(!T.VY.includes(e.type))throw Error((0,h.t)("community.publishing.error_video_wrong_format",{filename:r}));if(e.size>E.Gq)throw Error((0,h.t)("community.publishing.error_thumbnail_image_too_large",{filename:r,max_size:Math.floor(E.Gq/1e6)}))}(i);let e=URL.createObjectURL(i),[r,n]=await Promise.all([e_(i),(0,C.jm)(e),el(e,i.name)]),s=URL.createObjectURL(new Blob([n]));en.add(e),en.add(s),a.push({url:e,buffer:r.bytes,sha1:r.sha1,type:"video",thumbnail_url:s,thumbnail_buffer:n,thumbnail_sha1:(0,o.Et)(n)})}else{et(i,(0,h.t)("community.publishing.carousel_media_image"));let[e,r]=await Promise.all([er(URL.createObjectURL(i)),(0,N.c)(i)]);en.add(e.src);let n=new Uint8Array(r);a.push({url:e.src,buffer:n,sha1:(0,o.Et)(n),type:"image"})}return a}async function eo(e,r){return null===e.files||0===e.files.length?Promise.resolve([]):await ei(e.files,r)}function es(e){if(!e||!e.length)return(0,h.t)("community.publishing.upload_at_least_one_image")}async function el(e,r){if(await new Promise((r,n)=>{let a=document.createElement("video");a.preload="metadata",a.addEventListener("error",e=>{n(e.message)}),a.addEventListener("loadedmetadata",()=>{r(a.duration)}),a.src=e,a.currentTime=0,a.load(),setTimeout(()=>{n("Video load timeout during video length validation")},1e4)})>f.GT)throw(0,h.t)("community.publishing.error_video_too_long",{filename:r,max_length:f.GT})}function ec(e){let r=[],n=[],a=[];return e&&e.forEach((e,i)=>{if("buffer"in e){if("video"===e.type){if(!e.thumbnail_buffer)throw Error((0,h.t)("community.publishing.error_video_thumbnail_not_found"));let r={carousel_position:i,sha1:(0,o.Et)(e.buffer),bytes:e.buffer,video_thumbnail_buffer:e.thumbnail_buffer,video_thumbnail_sha1:(0,o.Et)(e.thumbnail_buffer)};n.push(r)}else{let n={carousel_position:i,sha1:(0,o.Et)(e.buffer)};r.push(n),a.push(n)}}else if("id"in e){let r="video"===e.type?{carousel_position:i,sha1:e.sha1,video_file_uuid:e.video_file_uuid,video_thumbnail_sha1:e.thumbnail_sha1}:{carousel_position:i,sha1:e.sha1};a.push(r)}}),{uploadImages:r,uploadVideos:n,allMedia:a}}function ed(e,r){return r&&r?.length&&e?.length?e.map(async({url:e,fields:n,carouselPosition:a,signedCloudfrontUrl:i})=>{let o=r[a];if(!o||!("buffer"in o)||!o.buffer)return!1;let c=new FormData;Object.entries(n).forEach(([e,r])=>c.append(e,r)),c.set("content-type",(0,l.i)(o.buffer)??"image/png");let u=new Blob([o.buffer]);try{if(i&&(0,d.kc)().ext_s3_url_use_figma_domains){let e=await (0,N.c)(u);await p.Ay.crossOriginPut(i,e,{raw:!0,headers:{"Content-Type":u.type,"x-amz-acl":"bucket-owner-full-control"}})}else{let r=new FormData;Object.entries(n).forEach(([e,n])=>r.append(e,n)),r.set("content-type",(0,l.i)(o.buffer)??"image/png"),r.append("file",u),await fetch(e,{method:"POST",body:r})}}catch(e){throw(0,m.$D)(s.FigmaTeam.COMMUNITY,e),Error((0,h.t)("community.actions.error_uploading_carousel_image_error",{error:(0,h.Jv)(e,e.data?.message||"unknown error")}))}return!0}):[]}async function eu(e,r,n,a){let i,o,c,d;let{uploadImages:u,allMedia:p}=ec(r);if(!e?.length&&!u?.length)return{cover_image:{cover_image_uploaded:!1,signature:null},carousel_images:p};try{let e=await w.H.setupMultiImageUploadForHubFile({file_version_id:n,hub_file_id:a,images_sha1:u});({cover_image:{cover_image_upload_url:i,signature:o,fields:c},carousel_images:d}=e.data.meta)}catch(e){throw(0,m.$D)(s.FigmaTeam.COMMUNITY,e),Error((0,h.Jv)(e,(0,h.t)("community.actions.could_not_connect_to_the_server")))}let _=d.map(({url:e,fields:n,carousel_position:a})=>{let i=r[a];if(!i||!("buffer"in i)||!i.buffer)return;let o=new FormData;return Object.entries(n).forEach(([e,r])=>o.append(e,r)),o.set("content-type",(0,l.i)(i.buffer)??"image/png"),o.append("file",new Blob([i.buffer])),fetch(e,{method:"POST",body:o})});if(e?.length){let r=new FormData;Object.entries(c).forEach(([e,n])=>r.append(e,n)),r.set("content-type",(0,l.i)(e)??"image/png"),r.append("file",new Blob([e])),_.push(fetch(i,{method:"POST",body:r}))}try{return await Promise.all(_),{cover_image:{cover_image_uploaded:!!e?.length,signature:o},carousel_images:p}}catch(e){throw(0,m.$D)(s.FigmaTeam.COMMUNITY,e),Error((0,h.Jv)(e,(0,h.t)("community.actions.error_connecting_to_server_to_upload_file_images")))}}function em(e,r){return r?e.findIndex(e=>e.sha1===r.sha1):-1}function ep(e){en.has(e)&&(URL.revokeObjectURL(e),en.delete(e))}function eh(e){e&&(e.url&&ep(e.url),"type"in e&&"video"===e.type&&ep(e.thumbnail_url))}async function e_(e){let r=new Uint8Array(await (0,N.c)(e));return{sha1:(0,o.Et)(r),bytes:r}}function eg(e){if(!e.currentUserOrgId)return!1;let r=(0,L.xw)(e);return!(r&&r.agreed_to_community_tos_at)}function ef(e,r){return Object.entries(r).reduce((r,[n,a])=>r+Number(e.includes(n)&&!!a),0)}function eE(e,r,n){if("object"==typeof e&&"fields"in e&&"imagePath"in e){let{fields:a,imagePath:i,signedCloudfrontUrl:o}=e;if(o&&(0,d.kc)().ext_s3_url_use_figma_domains)return p.Ay.crossOriginPut(o,n,{raw:!0,headers:{"Content-Type":r.type,"x-amz-acl":"bucket-owner-full-control"}});let s=new FormData;return Object.entries(a).forEach(([e,r])=>s.append(e,r)),s.set("Content-Type",r.type),s.append("file",r),p.Ay.crossOriginPost(i,s,{raw:!0,headers:{"Content-Type":r.type}})}return"string"==typeof e?p.Ay.crossOriginPut(e,n,{raw:!0,headers:{...p.Ay.defaults.headers,"Content-Type":r.type}}):Promise.reject(Error("Invalid presigned_url"))}async function ey(e,r,n,a,s){let{video:l,videoThumbnail:c}=await S.v.getVideoUploadUrl({resourceType:e,id:r,sha1:n.sha1,thumbnail_sha1:s}),m=null;if(l){let{url:e,fields:r,signedCloudfrontUrl:a}=l;if(a&&(0,d.kc)().ext_s3_url_use_figma_domains&&(0,d.kc)().ext_s3_url_videos_use_figma_domains){let e=(0,i.lF)((0,o.aD)(n.sha1));m=p.Ay.crossOriginPut(a,n.bytes,{raw:!0,headers:{"Content-Type":"video/mp4","x-amz-acl":"bucket-owner-full-control","x-amz-checksum-sha1":e}}).then(()=>r.key||"")}else m=(0,u.VV)(e,r,n,"video/mp4")}let _=new Blob([a],{type:"image/png"}),g=eE({imagePath:c.url,fields:c.fields,signedCloudfrontUrl:c.signedCloudfrontUrl},_,a).catch(e=>{throw Error((0,h.t)("community.actions.error_uploading_plugin_video_thumbnail_error",{error:(0,h.Jv)(e,e.data?.message||"unknown error")}))}),[f]=await Promise.all([m,g]);return await eb(n.sha1,r,e,f??"",s,l?.blobUploadCommitKey||"")}async function eb(e,r,n,a,i,o){let s=new URLSearchParams;return s.append("sha1",e),s.append("uploadPath",a),s.append("resourceId",r),s.append("resourceType",n),s.append("blobUploadCommitKey",o),{videoFileUuid:(await p.Ay.post(`/api/upnode/video?${s.toString()}`)).data.meta.video_file_uuid,sha1:e,videoThumbnailSha1:i}}},696673:(e,r,n)=>{n.d(r,{$Q:()=>b,GS:()=>T,JB:()=>S,N4:()=>I,hT:()=>v,tz:()=>E,wJ:()=>y});var a=n(411855);n(188507);var i=n(259120);n(966712);var o=n(38580),s=n(298527),l=n(137459),c=n(173454);n(875387);var d=n(479296),u=n(378260),m=n(335682),p=n(694687),h=n(279453);n(790202);var _=n(984968);let g=["1341960932129965145","1341958841682444374","1341960613427075160"],f=["1344465555686977718","1344465264817347765","1344464949811785908"];function E(e){return g.includes(e)||f.includes(e)}let y=(0,d.D)(e=>22!==e.length&&!e.match(/\D/));function b(e){return(0,a.useMemo)(()=>e&&y(e)?e:null,[e])}function I(e){let r=(0,l.oA)(e),{id:n,thumbnail_url:a,library_key:o,publisher:s}=e;return{name:r,key:n,type:c.PP,thumbnail_url:a,library_key:o??(0,i.l)(""),author_name:s.name,author_handle:s.profile_handle}}function T(e){let{library_file_name:r,library_file_key:n,thumbnail_url:a,library_key:i,author_name:o,author_handle:s}=e;return{name:r,key:n,type:c.PP,thumbnail_url:a,library_key:i,author_name:o,author_handle:s}}function v(e){let{file:r,components:n,stateGroups:a,styles:i,variables:o,variableSets:s}=e,{name:l,key:c,type:d,thumbnail_url:u,library_key:m,author_name:p,author_handle:h}=r;return{library_file_key:c,library_file_name:l,thumbnail_url:u,num_components:n.length,num_state_groups:a.length,num_styles:i.length,num_variable_collections:s.length,num_variables:o.length,num_module_assets:0,type:d,library_key:m,author_name:p,author_handle:h}}let S=(0,o.eU)(e=>{let r=e(_.Me),n=(0,_.jv)(r?.id)?r?.id:null,a=e(p.h0),i=e(m.yV),o=i?i.parentOrgId:a,l=e(u.mQ),c=o?l[o]:null,d=e(h.U8U.Query(n||o?{teamId:n||"-1",orgId:o}:null));return"loaded"===d.status&&(0,s.rM)(d)?(0,s.Pp)(d.data.org,d.data.team):(0,s.MJ)(c,r)});(0,o.eU)(e=>{let r=e(S);return()=>!!r})},269167:(e,r,n)=>{n.d(r,{EO:()=>U,FP:()=>x,OY:()=>B,Qj:()=>K,Rm:()=>V,Y8:()=>z,aQ:()=>X,ej:()=>D,gn:()=>J,kA:()=>P,lt:()=>$,ul:()=>q,vT:()=>k,vl:()=>M,xp:()=>j,y1:()=>W,zH:()=>H});var a=n(411855),i=n(188507),o=n(776250),s=n(157663),l=n(38329),c=n(737947),d=n(966712),u=n(286640),m=n(761870);n(881388);var p=n(939863),h=n(654923),_=n(837324),g=n(466636),f=n(545941);n(376441);var E=n(662275),y=n(986270),b=n(756085),I=n(521010),T=n(555328);n(401730);var v=n(376485),S=n(793670),w=n(685436),A=n(3050),N=n(541158),C=n(479296),L=n(860178),O=n(215822);function R(e,r,n,a){return i=>{i(E.$O({type:w.h.type,data:{userId:e.id,resource:r,onSuccess:()=>{i(n=>{((0,T.I0)(r)||(0,T.xQ)(r))&&n(y.fR(r,e.id))}),n&&n()},onCancel:a}}))}}let P=(0,C.n)((e,r,n,a,i,o)=>{let l=(0,d.kc)().community_hub_admin&&n&&(0,f.AC)(n);return new Promise(d=>{let u=()=>{if(r){if(a||l){var i;e((i=()=>{K({type:"PAID"}),d()},e=>{e(E.$O({type:w.h.type,data:{userId:r.id,resource:n,localResource:a,onSuccess:i,onCancel:d,noInteractionMode:!0}}))}));return}(0,T.m3)(n)?e(R(r,n,()=>d(),()=>d())):s.k.error("Can only initiate checkout for a monetized or local resource.")}else{e(e=>{e(m.Ts({origin:"freemium_checkout_modal_in_open_session",redirectUrl:c.Ay.location.pathname,signedUpFromOpenSession:!0})),e((0,E.to)({type:S.x,data:{headerText:(0,p.t)("fullscreen.toolbar.log_in_to_do_more_with_figjam")}}))});return}};o===A.P.SKIP?u():e(E.$O({type:A.V.type,data:{type:r?o||A.P.PAID_FEATURE:A.P.LOGGED_OUT,onContinue:u,onClose:d,plugin:n&&(0,O.uF)(n)||a||i,monetizedResourceMetadata:n?.monetized_resource_metadata}}))})});function D(e){let r=(0,i.wA)(),n=(0,i.d4)(e=>e.authedActiveCommunityProfile),s=(0,i.d4)(e=>e.authedUsers),l=(0,h.I)(e);return a.useCallback(()=>{if(!e)return;let a=(0,g.QQ)(l),i=(0,T.m3)(e);if((0,o.sx)("cmty_resource_usage_action",{resourceType:(0,_.Dl)(e),resourceId:e.id,profileId:n?.id,hasActiveCommunityResourcePayment:a,isMonetizedResource:i}),!i||a||!1===function(e,r,n){if(!(0,T.m3)(n))return!1;let a=(0,I.G)({authedActiveCommunityProfile:e,authedUsers:r}),{usersCanPurchase:i,publishers:o}=(0,g.V4)(a,n);return(0!==i.length||0!==o.length)&&(0!==i.length||0===o.length)}(n,s,e))return;let c=(0,I.G)({authedActiveCommunityProfile:n,authedUsers:s}),{usersCanPurchase:d,publishers:u}=(0,g.V4)(c,e);if((0,o.sx)("Checkout Flow Entered",{resourceType:(0,_.Dl)(e),resourceId:e.id,numLoggedInAssociatedUsersThatCanPurchase:d.length,numLoggedInAssociatedPublishers:u.length}),1===d.length&&0===u.length){r(R(d[0],e));return}r((0,E.to)({type:N.I,data:{onUserSelect:n=>{(0,o.sx)("Pre Purchase User Selector Modal - User Selected",{resourceType:(0,_.Dl)(e),resourceId:e.id,userIdForPurchase:n.id}),r(R(n,e))},resource:e}}))},[e,l,n,s,r])}function k(e,r){let n=r?.[e.monetized_resource_metadata.id]||e.community_resource_payment;return(0,g.QQ)(n)}function M(e,r){let{publishers:n}=(0,g.V4)([r],e);return n.length>0}function F(e,r,n){return!(!e||!(0,T.m3)(e)||(0,T.PM)(e)||!(0,T.U)(e)&&((0,v.f5)(e)||(0,T.zF)(e))||n&&M(e,n))&&!(k(e,r)&&!function(e,r){let n=r?.[e.monetized_resource_metadata.id]||e.community_resource_payment;return n&&(0,g.UO)(n)}(e,r))}function x(){return(0,i.d4)(e=>e.communityPayments)}function U(e){return F(e,x(),(0,L.iZ)()||void 0)}function B(e){let r=x();return(0,T.m3)(e)&&k(e,r)}function V(e){return F(e,l.D&&l.D.getState().communityPayments,l.D&&l.D.getState().user||void 0)}let G="local-resource-payment";var H=(e=>(e.PAID="PAID",e.UNPAID="UNPAID",e.NOT_SUPPORTED="NOT_SUPPORTED",e))(H||{});function W(){return(0,u.DN)().get(G)}function K(e){(0,u.DN)().set(G,e)}function Y(e,r){if(r&&(0,T.m3)(r))return e?.[r.monetized_resource_metadata.id]||r.community_resource_payment}function $(e){return Y(x(),e)}function j(e){let r=(0,i.d4)(r=>(0,O.my)(e,r.publishedPlugins)),n=$(r);return a.useMemo(()=>r?{...r,community_resource_payment:n}:r,[n,r])}function z({extension:e,publishedPlugins:r,publishedWidgets:n,communityPaymentsState:a}){let i=((0,v.k0)(e)?n:r)[e.plugin_id];if(!i)return;let o=Y(a,i);return{...i,community_resource_payment:o}}function q(e){let r=(0,b.cW)()[e],n=$(r);return a.useMemo(()=>r?{...r,community_resource_payment:n}:r,[n,r])}function X(e){let r=(0,i.d4)(r=>r.publishedWidgets[e]),n=$(r);return a.useMemo(()=>r?{...r,community_resource_payment:n}:r,[n,r])}function J(e){let r=$(e);return!!r&&(0,g.UO)(r)}},184601:(e,r,n)=>{n.d(r,{Ay:()=>l,c6:()=>c,hI:()=>d});var a=n(110337);n(583366),n(288585);var i=n(787523),o=n(742808),s=n(69961);let l=(0,a.makeClient)({onError:e=>{(0,o.Rh)("web.cortex.error",{route:e})},buildExtraHeaders:()=>{let e={};return s.nt.aiFeaturesUseBedrockLlama.getValue()&&(e[i.WebHeaders.INTERNAL_USE_LLM_PROVIDER]="amazon-bedrock"),e}});class c{constructor(e){this.stream=e}async *[Symbol.asyncIterator](){let e=this.stream.getReader();try{for(;;){let r=e.read(),{done:n,value:a}=await r;if(n)break;yield a}}finally{e.releaseLock()}}}class d{constructor(e,r){this.stream=e,this.timeoutMs=r}async *[Symbol.asyncIterator](){let e=this.stream.getReader();try{for(;;){let r=e.read();try{let e=new Promise((e,r)=>{setTimeout(()=>{r(Error("Timeout"))},this.timeoutMs)}),{done:n,value:a}=await Promise.race([r,e]);if(n)break;yield a}catch(e){if(e instanceof Error&&"Timeout"===e.message)break;throw e}}}finally{e.releaseLock()}}}},284615:(e,r,n)=>{n.d(r,{Ay:()=>u,BQ:()=>m,_0:()=>h,sZ:()=>p}),n(518748);var a=n(719779),i=n(465824),o=n(374626),s=n(825871),l=n(378260),c=n(106757),d=n(335682);function u(){return{orgId:o.zl.get(l._s)||null,teamId:o.zl.get(d.As)||null,fileKey:o.zl.get(d.ze)||null,userId:o.zl.get(c.kS)||null,trackingSessionId:(0,s.f)()}}var m=(e=>(e.RATE_LIMIT_EXCEEDED="rate_limit_exceeded",e.CONTENT_LENGTH_LIMIT="content_length_limit",e.UNSAFE_OR_HARMFUL_CONTENT="unsafe_or_harmful_content",e.GENERIC="generic",e.OFFLINE="offline",e.METER_EXCEEDED="meter_exceeded",e.NOT_IMPLEMENTED="not_implemented",e))(m||{});function p(e){if(e instanceof TypeError&&!navigator.onLine)return"offline";if(e instanceof a.CortexErrorV2){if(a.ProviderRateLimitExceededError.isInstance(e)||a.CortexRateLimitExceededError.isInstance(e))return"rate_limit_exceeded";if(a.ClientContentLengthLimitExceededError.isInstance(e)||a.ProviderContentLengthLimitExceededError.isInstance(e))return"content_length_limit";if(a.UnsafeOrHarmfulPromptError.isInstance(e)||a.ProviderUnsafeOrHarmfulContentError.isInstance(e))return"unsafe_or_harmful_content";if(a.NotImplementedError.isInstance(e))return"not_implemented";else if(a.OfflineError.isInstance(e))return"offline";else if(a.MeterExceededError.isInstance(e))return"meter_exceeded";else if(e?.statusCode===413)return"content_length_limit"}if(e instanceof i.CortexError)switch(e.type){case"rate_limit_exceeded":return"rate_limit_exceeded";case"content_length_limit_exceeded":case"payload_too_large":return"content_length_limit";case"unsafe_or_harmful_content":return"unsafe_or_harmful_content";case"offline":return"offline";case"meter_exceeded":return"meter_exceeded";case"generic":if(e.data&&"status"in e.data&&413===e.data.status)return"content_length_limit"}return"generic"}function h(e){return e instanceof i.CortexError&&"meter_exceeded"===e.type&&!!e.data.resetsAt}},683694:(e,r,n)=>{n.d(r,{PD:()=>g,wg:()=>y});var a=n(38580),i=n(408405),o=n(335682),s=n(529928),l=n(243987),c=n(746869),d=n(442617),u=n(986060),m=n(284111),p=n(378260),h=n(723239),_=n(582947);let g=(0,m.Z1)(h.Z_,(e,r)=>{let n=r(o.yV);if(null==n||null==e)return!1;let a=e.map(e=>e.team).find(e=>null!=e&&e.id===n.teamId);return null!=a&&c.ng.getProTrialStatus({grace_period_end:a.gracePeriodEnd?a.gracePeriodEnd.toISOString():null,grace_period_type:a.gracePeriodType})===u.a.IN_TRIAL});(0,m.J9)([h.Hh],([e],r)=>{let n=r(o.yV),a=r(p._s)?null:e;return!!n&&!!a&&!n.teamId&&!n.parentOrgId&&n.folderId===a}),(0,s.bt)(({openFile:e})=>{let r=e?.parentOrgId!=null,n=e?.team==null;return r&&n});let f=(0,s.bt)(({progressBarState:e})=>(0,i.T)(e?.mode));(0,a.eU)(e=>new Promise(r=>{e(f)||r(!1)})),(0,_.r1)("figjam_editor_onboarded");let E=(0,m.Z1)(h.Vm,(e,r)=>{let n=r(o.yV);return n?.teamId?e?.find(e=>e.id===n?.teamId):null});(0,m.J9)([p.KI,E],([e,r],n)=>{let a=n(o.yV),i=a?.parentOrgId?e[a.parentOrgId]:null,s=r?{id:r.id,subscription:r.subscription,student_team:!!r.studentTeamAt,grace_period_end:r.gracePeriodEnd?.toDateString()||null}:null;return(0,d.M_)({editorType:a?.editorType??null,org:i,team:s})}),(0,s.bt)(({showEditButton:e})=>e??!1),(0,a.eU)(e=>{let r=e(o.yV);if(!r)return!1;let{team:n}=r;return null!=n&&null==n.orgId&&!(0,l.w5)({subscription:n.subscription,student_team:null!=n.studentTeamAt,grace_period_end:n.gracePeriodEnd?.toISOString()??null})});let y=(0,a.eU)(e=>{let r=e(o.yV);return r?.canEdit??!1});(0,a.eU)(e=>{let r=e(o.yV);return!!r&&r.canView&&!r.canEdit})},378260:(e,r,n)=>{n.d(r,{KI:()=>u,UC:()=>_,ZS:()=>p,_s:()=>m,mQ:()=>h,rg:()=>d});var a=n(374626),i=n(529928),o=n(99506),s=n(279453),l=n(502665),c=n(284111);let d=(0,c.Z1)(s.Tej.Query({}),e=>e.currentUser.orgUsers),u=(0,c.Z1)(d,e=>{let r=e?.map(e=>e.org);if(void 0===r)return{};let n={};for(let e of r)null!=e&&(n[e.id]={...e,bigmaEnabled:!!e.bigmaEnabledAt,voiceEnabled:!e.voiceDisabledAt,widgetsWhitelistEnforced:!!e.widgetsWhitelistEnforced});return n}),m=(0,i.bt)(e=>e.currentUserOrgId),p=(0,c.J9)([u],([e],r)=>{let n=r(m);return null!=n?e[n]:null}),h=(0,i.bt)(e=>e.orgById),_=(0,a.Iz)(e=>(0,c.Z1)(s.s5h.Query({orgId:e}),e=>!!e.org?.workspaces?.length&&!!e.org?.bigmaEnabledAt));(0,c.J9)([p,d,l.N],([e,r,n],a)=>{if(!e)return!1;let i=a(h)[e.id];if(!i.bigma_enabled||!i.workspaces_nux_active_at)return!1;let s=r?.find(r=>r.orgId===e.id&&r.userId===n);return!!s&&s.permission!==o._D.GUEST}),(0,c.J9)([s.Tej.Query({}),p],([e,r])=>{let{orgUsers:n}=e.currentUser;if(null!=r){let e=n?.find(e=>e.orgId===r.id);if(e)return"full"===e.designPaidStatus?"design":"full"===e.devModePaidStatus?"dev mode":"none"}return null}),(0,c.Z1)(u,e=>!!Object.values(e).find(e=>e.k12GoogleOrg))},543312:(e,r,n)=>{n.d(r,{e:()=>l});var a=n(99506),i=n(243987),o=n(284111),s=n(723239);(0,o.Z1)(s.Vm,e=>(e??[]).some(e=>null!=e&&!(0,i.w5)({subscription:e.subscription,student_team:!!e.studentTeamAt,grace_period_end:e.gracePeriodEnd?e.gracePeriodEnd.toISOString():null})&&!e.orgId&&e.canEdit));let l=(0,o.Z1)(s.Vm,e=>(e??[]).filter(e=>null!=e&&e.subscription===a.Qh.OK&&null==e.gracePeriodEnd&&!e.orgId&&e.canEdit))},723239:(e,r,n)=>{n.d(r,{Fy:()=>E,Hh:()=>y,NT:()=>A,Vm:()=>T,Z_:()=>I,mp:()=>f,t:()=>w,zN:()=>b});var a=n(133537),i=n(966712),o=n(314866),s=n(38580),l=n(374626),c=n(288706),d=n(529928),u=n(279453),m=n(243987),p=n(605228),h=n(143678),_=n(284111),g=n(378260);(0,_.J9)([u.Tej.Query({}),g.ZS],([e,r])=>null!=e.currentUser.id&&r?.canRead?h.qo.ORG:h.qo.PERSONAL);let f=(0,_.Z1)(u.Tej.Query({}),e=>e.currentUser.createdAt),E=(0,_.Z1)(f,e=>e.getTime()<=Date.now()-12096e5),y=(0,_.J9)([g.rg,u.Tej.Query({})],([e,r],n)=>{let a=n(g._s);if(!a)return r.currentUser.draftsFolderId;{let r=e?.find(e=>e.orgId===a);return r?.draftsFolderId||null}});(0,_.Z1)(u.Tej.Query({}),e=>{let r=e.currentUser.email;return(0,a.jm)(r)||!!r?.endsWith("@dev.figma.com")});let b=(0,_.Z1)(u.Tej.Query({}),e=>null!=e.currentUser.studentValidatedAt);(0,_.Z1)(u.UpR.Query({}),e=>e.currentUser.eduPeriodEnd);let I=(0,_.Z1)(u.Tej.Query({}),e=>e.currentUser.teamRoles),T=(0,_.Z1)(I,e=>e?.map(e=>e.team).filter(e=>null!=e)),v=(0,d.bt)(e=>e.isFreeUser),S=(0,_.J9)([g.rg,T],([e,r])=>(!e?.length||!(e.length>0))&&(null==r||!r.some(e=>e.canEdit&&(0,m.w5)({subscription:e.subscription,student_team:!!e.studentTeamAt,grace_period_end:e.gracePeriodEnd?e.gracePeriodEnd.toISOString():null})))),w=(0,_.Z1)(S,(e,r)=>(0,i.kc)().ps_benchmark?r(v):e);(0,_.Z1)(g.rg,e=>!!e?.length&&e.length>0),(0,_.Z1)(u.Tej.Query({}),e=>{let r=e.currentUser.email;return null!=r?(0,a.qe)(r):void 0});let A=(0,_.Z1)(u.Tej.Query({}),e=>e.currentUser.profile?.jobTitle);(0,_.Z1)(A,e=>{let r=void 0!==e&&o.Kd.includes(e)?e:"other";return"design"!==r&&"other"!==r}),(0,_.Z1)(u.Tej.Query({}),e=>e.currentUser.profile?.usagePurpose);let N=(0,d.bt)(e=>e.authedProfilesById);(0,s.eU)(e=>Object.values(e(N)).some(e=>!!e.org_id||!!e.team_id)),(0,_.Z1)(u.Tej.Query({}),e=>e.currentUser.email),(0,_.Z1)(u.Tej.Query({}),e=>e.currentUser.emailValidatedAt);let C=(0,d.bt)(e=>e.userAnalyticsData);(0,l.Iz)(e=>(0,c.mg)(C,r=>{if(null==r)return;let n=r[e];return p.bW.includes(e)&&n?new Date(n):n})),(0,_.J9)([u.Tej.Query({}),g.ZS],([e,r])=>{let n="loaded"===e.currentUser.externalRestrictedOrgId.status?e.currentUser.externalRestrictedOrgId.data:null;return!!(e.currentUser&&n&&r?.id!==n)})},582947:(e,r,n)=>{n.d(r,{Fu:()=>c,r1:()=>u});var a=n(374626),i=n(279453),o=n(59530),s=n(284111);let l=(0,s.Z1)(i.Tej.Query({}),e=>e.currentUser.userFlags.reduce((e,r)=>({...e,[r.name]:r}),{})),c=(0,a.Iz)(e=>(0,s.Z1)(l,r=>r[e])),d=e=>e.length>0?new Date(Math.max(...e.map(Number))):void 0;(0,s.Z1)(l,e=>d(Array.from(o.V5).map(r=>e[r]?.updatedAt).filter(e=>null!=e)));let u=(0,a.Iz)(e=>(0,s.Z1)(l,r=>null!=r[e]));u("file_browser_onboarded"),c("not_gen_0")},205548:(e,r,n)=>{function a(e,r){return!!e[r]}function i(e){return document.querySelectorAll(`[data-onboarding-key=${JSON.stringify(e)}]`).length>0}n.d(r,{KI:()=>i,mW:()=>a}),n(966712),n(99506),n(243987),n(746869),n(442617),n(986060),n(59530),n(143678)},116723:(e,r,n)=>{n.d(r,{X:()=>a});let a="curator_global_request_close";var i=(e=>(e.FigjamUniversalInsertsMenuOpen="figjam_universal_inserts_menu_open",e.FigjamDLTSubmenuOpen="figjam_DLT_submenu_open",e))(i||{})},708277:(e,r,n)=>{n.d(r,{Op:()=>i,gV:()=>o,nr:()=>s});var a=n(43538);function i(e){let r=new Map,n=new Map;for(let{id:a,...i}of e.states){if(r.has(a))throw Error(`Duplicate state ID ${a.toString()} found when building state machine`);if(r.set(a,i),null==i.transitions)continue;let e=new Map;for(let{event:r,...o}of(n.set(a,e),i.transitions)){let n=e.get(r);null==n&&(n=[],e.set(r,n)),n?.push(o)}}return{config:e,isComplete(e){let n=r.get(e);return n?.terminal??!1},isInitial:r=>r===e.initial,start:()=>e.initial,transition(e,r){let a=n.get(e)?.get(r.id);if(null==a)return null;for(let n of a)if(null==n.condition||n.condition({from:e,to:n.target,event:r}))return n.target;return null}}}function o(e){let r=new Set;for(let n of e.config.states)if(null!=n.transitions)for(let e of n.transitions)e.event===a.b&&e.meta?.userEvents!=null&&e.meta.userEvents.forEach(e=>r.add(e));return r}function s(e,r,n){var i,o;let s=new Set("string"==typeof e?[e]:e),l={userEvents:[...s]};return i=a.b,o={condition:e=>s.has(e.event.type)&&(n?.condition?.(e)??!0),meta:l},{event:i,target:r,condition:o?.condition,meta:o?.meta}}},835691:(e,r,n)=>{n.d(r,{zl:()=>o});var a=n(411855),i=n(374626);function o({_atom:e,machine:r}){let[{currentState:n,lastEvent:o,previousState:s},l]=(0,i.fp)(e),c=r.isComplete(n);return(0,a.useMemo)(()=>({completed:c,currentState:n,lastEvent:o,previousState:s,reset:l}),[c,n,o,s,l])}n(47506)},268223:(e,r,n)=>{n.d(r,{Op:()=>a.Op,nr:()=>a.nr,rn:()=>i.rn});var a=n(708277),i=n(593788);n(835691)},758431:(e,r,n)=>{n.d(r,{A3:()=>m,IK:()=>u});var a=n(414507),i=n(517333);n(737947);var o=n(827697);n(563706);var s=n(776621);n(738269),n(369351),n(273709);var l=n(36240);let c=new Map,d=new l.vY;function u(e){let r=(0,o.WB)();i.S8?.setListener({name:"updateRealtimeTokens",listener(n){d.updateSubscriptions(e,n,r)}}),r&&(0,l.cz)(r);let n=(0,i.O_)(2);if(n){let i=n.getRealtimeTokens();if(null==i&&((0,s.$D)(a.FigmaTeam.DESKTOP,Error(`initDesktopBellFeedBindings: got ${i} from getRealtimeTokens() on first try`),{level:"warning"}),i=n.getRealtimeTokens()),null==i){(0,s.$D)(a.FigmaTeam.DESKTOP,Error(`initDesktopBellFeedBindings: got ${i} from getRealtimeTokens() on second try`));return}d.updateSubscriptions(e,i,r)}}function m(e){d.handleFileMessage(e)}i.S8?.setListener({name:"notificationClicked",listener(e){c.get(e)?.(),c.delete(e)}})},788744:(e,r,n)=>{n.d(r,{Fl:()=>m,Sd:()=>u,lk:()=>s,ml:()=>l,mq:()=>c});var a=n(411855),i=n(374626),o=n(555301);function s(e,r){let n=d(r);return!!e&&n.has(e)}function l(e){let r=(0,i.md)(o.j1);return!!e&&r.has(e)}function c(e,r){let n=s(e,r),a=l(e);return n||a}function d(e){return(0,i.md)(e?o.b$:o.SA)}function u(e){let r=d(e),n=(0,i.md)(o.j1);return a.useMemo(()=>({workspaceApprovedLibraryKeys:r,orgApprovedLibraryKeys:n}),[r,n])}function m(e){let r=(0,i.md)(e?o.Gg:o.bJ),n=(0,i.md)(o.S0);return a.useMemo(()=>({workspaceApprovedLibraryKeys:r,orgApprovedLibraryKeys:n}),[r,n])}},756317:(e,r,n)=>{n.d(r,{FX:()=>T,KP:()=>b,L1:()=>I});var a=n(411855),i=n(902634),o=n(132361),s=n(629019),l=n.n(s),c=n(374626),d=n(46481),u=n(154254),m=n(556261),p=n(56099),h=n(788744),_=n(680681),g=n(555301),f=n(935631),E=n(109903);function y({isForSelect:e,orgNameForTooltip:r,workspaceNameForTooltip:n,tooltipDelay:s=250,tooltipLocation:c="above",size:u="small",variant:m}){let p=r||n?(0,_.wZ)({orgName:r,workspaceName:n,tooltipLocation:c,tooltipDelay:s}):{};return a.createElement(d.U,{className:l()("secondary"===m?f.Wo:f.Kk,e?f.cH:void 0),svg:E.A,...p},a.createElement("div",{className:l()("secondary"===m?f.Wo:f.Kk,e?f.cH:void 0),...p},"large"===u?a.createElement(i.U,null):a.createElement(o.x,null)))}function b(e){let r=(0,c.md)(g.aw),n=(0,m.dh)({migrationGroup:p.L.GROUP_8,component:"ApprovedLibraryIconForFullScreen"}),i=(0,h.ml)(e.fileKey);return a.createElement(y,{...e,orgNameForTooltip:i?n:void 0,workspaceNameForTooltip:r?.name})}function I(e){let r=(0,c.md)(g.nB),n=(0,m.dh)({migrationGroup:p.L.GROUP_8,component:"ApprovedLibraryIconForUserDefaultSubscriptions"}),i=(0,h.ml)(e.fileKey);return a.createElement(y,{...e,orgNameForTooltip:i?n:void 0,workspaceNameForTooltip:r?.name})}function T(){return a.createElement("div",{className:u.cx.flex.alignCenter.justifyCenter.flexShrink0.ml4.mr4.$},a.createElement(y,{isForSelect:!0}))}},680681:(e,r,n)=>{n.d(r,{HZ:()=>E,NX:()=>y,Qy:()=>h,k9:()=>p,wZ:()=>f}),n(133554);var a=n(91408),i=n(374626),o=n(708389),s=n(416095),l=n(498606),c=n(109311),d=n(555301),u=n(837746);let m=(0,a.jz)(u.UEm);function p({libraries:e,approvedLibraryFileKeysByResourceType:r,currentTeamId:n=null,shouldSortByTeam:a=!1}){e.sort((e,i)=>h({libraryA:e,libraryB:i,approvedLibraryFileKeysByResourceType:r,currentTeamId:n,shouldSortByTeam:a}))}function h({libraryA:e,libraryB:r,approvedLibraryFileKeysByResourceType:n,currentTeamId:a=null,shouldSortByTeam:i=!1}){let{workspaceApprovedLibraryKeys:l,orgApprovedLibraryKeys:c}=n;if(i&&"file"in e&&"file"in r&&e.team_id!==r.team_id)return(0,s.r9)(e,r,a);let d=_(e),u=_(r),m=c.has(d)?1:0,p=c.has(u)?1:0;if(m!==p)return p-m;let h=l.has(d)?1:0,f=l.has(u)?1:0;return h!==f?f-h:o.f.LEXICOGRAPHICALLY(g(e),g(r))}function _(e){return"key"in e?e.key:e.library_file_key}function g(e){return"name"in e?e.name:e.library_file_name}function f({orgName:e,workspaceName:r,tooltipLocation:n,tooltipDelay:a}){let i=e??r;if(!i)return{};let o=function(e){try{if(e){let r=function(e){let r=document.createElement("span");r.textContent=e,r.style.visibility="hidden",r.style.fontWeight="bold",r.style.display="inline-block",document.body.appendChild(r);let n=r.offsetWidth;return document.body.removeChild(r),n}(e);if(r){if(r>m)return m;if(r>m/2)return Math.max(116,r);return 116}}}catch(e){console.error(e)}return m}(i);return{"data-tooltip-type":l.Ib.SPECIAL,"data-tooltip":c.A,..."below"===n?{"data-tooltip-show-below":!0}:{"data-tooltip-show-above":!0},...a?{"data-tooltip-timeout-delay":a}:{"data-tooltip-show-immediately":!0},"data-tooltip-max-width":o,"data-tooltip-workspace-name":r,"data-tooltip-org-name":e}}function E(e){if(!e)return!1;let r=i.zl.get(d.SA).has(e),n=i.zl.get(d.j1).has(e);return r||n}function y({workspaceApprovedLibraryKeys:e,orgApprovedLibraryKeys:r}){return e.size>0||r.size>0}},555301:(e,r,n)=>{n.d(r,{Gg:()=>S,S0:()=>b,SA:()=>f,aw:()=>_,b$:()=>v,bJ:()=>E,j1:()=>y,nB:()=>I});var a=n(432258),i=n(259120),o=n(38580),s=n(684107),l=n(711525),c=n(960884),d=n(335682),u=n(279453),m=n(596607),p=n(643067),h=n(984968);let _=(0,o.eU)(e=>{let r=(()=>{let r=e(c.Z),n=e(d.yV);if(n){if(!n.canEdit||!(0,p.Oe)(r))return;let a=n.team?.workspaceId;return n.parentOrgId&&!a?e(m.LM):a}let a=e(h.Me);if((0,p.Oe)(r))return a?.workspace_id})();if(!r)return;let n=e(u.Ce_.Query({workspaceId:r}));return n.data?.workspace??void 0}),g=(0,o.eU)(e=>{let r=(()=>{let r=e(c.Z),n=e(d.yV);if(n){if(!n.canEdit||!(0,p.Oe)(r))return;let a=n.team?.workspaceId;return n.parentOrgId&&!a?e(m.LM):a}let a=e(h.Me);if((0,p.Oe)(r))return a?.workspace_id})();if(!r)return;let n=e(u.gDr.Query({workspaceId:r}));return n.data?.workspace??void 0}),f=(0,o.eU)(e=>{let r=e(_);return w(r?.approvedLibraries??[])}),E=(0,o.eU)(e=>{let r=e(g);return A(r?.approvedLibraries??[])}),y=(0,o.eU)(e=>{let r=e(c.Z);if(!r||!(0,p.Oe)(r))return new Set([]);let n=e((0,s.ip)({orgId:r.id}));return n.data?.org.status!==l.tT.Loaded?new Set([]):w(n.data.org.data?.approvedLibraries??[])}),b=(0,o.eU)(e=>{let r=e(c.Z);if(!r||!(0,p.Oe)(r))return new Set([]);let n=e(u.bEy.Query({orgId:r.id}));return A(n.data?.org?.approvedLibraries??[])}),I=(0,o.eU)(e=>{{let r=e(c.Z),n=e(m.LM);if(!n||!(0,p.Oe)(r))return;let a=e((0,s.Tb)({workspaceId:n}));return a.data?.workspace??void 0}}),T=(0,o.eU)(e=>{{let r=e(c.Z),n=e(m.LM);if(!n||!(0,p.Oe)(r))return;let a=e(u.gDr.Query({workspaceId:n}));return a.data?.workspace??void 0}}),v=(0,o.eU)(e=>{let r=e(I);return w(r?.approvedLibraries??[])}),S=(0,o.eU)(e=>{let r=e(T);return A(r?.approvedLibraries??[])});function w(e){return new Set(e.map(e=>e.fileKey))}function A(e){return new Set(e.map(e=>(0,l.oA)(e.libraryKey)).filter(a.Vq).map(i.l))}},957987:(e,r,n)=>{n.d(r,{P:()=>E});var a=n(411855),i=n(629019),o=n.n(i),s=n(374626),l=n(221173),c=n(335682),d=n(694687),u=n(643067),m=n(773610),p=n(662163),h=n(788744),_=n(756317),g=n(830445),f=n(291673);function E({resourceId:e,showPresetTooltip:r,tooltipDelay:n,tooltipLocation:i,compact:E,colorPrimaryOnHover:y}){let b=(0,d.sZ)(),I=(0,u.Oe)(b),T=(0,c.tS)(),v=(0,h.mq)(e),S=(0,m.ie)(e),w=(0,s.md)(p.xL),A=!!e&&w.includes(e),N=o()(f.iE,{[f.oE]:E,[f.FT]:y});return I&&e!==T&&v?a.createElement("div",{className:N},a.createElement(_.KP,{fileKey:e,tooltipDelay:n,tooltipLocation:i})):e!==T&&((0,g.TX)(e)||S||A)?a.createElement("div",{className:N},a.createElement(l.E,{showTooltip:r,hubFileId:e,tooltipDelay:n,tooltipLocation:i})):null}},830445:(e,r,n)=>{n.d(r,{Ag:()=>C,E_:()=>A,Gb:()=>I,HA:()=>b,Os:()=>F,TX:()=>N,Xx:()=>E,ee:()=>f,fn:()=>S,iu:()=>y,ku:()=>x,lR:()=>T,nT:()=>M,p9:()=>k,qA:()=>w,xm:()=>v});var a=n(411855),i=n(259120),o=n(776250),s=n(374626),l=n(38580),c=n(130097),d=n(173748),u=n(99506),m=n(279453),p=n(540019),h=n(137459),_=n(875387),g=n(662163);function f(e,r){return"fileKey"===r?{fileKey:e,type:r}:{hubFileId:e,type:r}}function E(e,r){let{type:n,...a}=r;return{...e,...a}}function y(e){switch(e){case u.Pn.APPLE:return"http://feedbackassistant.apple.com/new?form=developertools.fba&answers%5B:area%5D=seedx:appledesignresources";case u.Pn.GOOGLE:return"https://docs.google.com/forms/d/1AKqbaIz0oAC9VgLb_CseAP9RVekmgv_AQvlFrb5_79Y/edit";case u.Pn.FIGMA:return"https://form.asana.com/?k=wcWtx3xQsHp26re5PZLkwQ&d=10497086658021"}}function b(e,r,n){if("loaded"===e.status){let n=e.data.libraryPresetSubscriptionsV2?.find(e=>e.hubFileId===r);if(n)return n.partner_type??void 0}if(null==n)return;let a=n.publisher.profile_handle.toLowerCase(),i=(0,h.oA)(n);return"apple"===a?u.Pn.APPLE:i?.toLowerCase?.()?.includes("material")?u.Pn.GOOGLE:u.Pn.FIGMA}function I(e){return T(e,(0,s.md)(_.TG))}function T(e,r){return r.has(e.library_key)}function v(){let e=(0,s.md)(_.TG);return(0,a.useCallback)(r=>T(r,e),[e])}let S=(0,l.eU)(null),w=(0,l.eU)({value:(0,d.N)(),updateSource:"page_load"});function A(e){let r=(0,s.md)(_.qq);return!!e&&r.has((0,i.l)(e))}function N(e){return!!e&&s.zl.get(_.qq).has((0,i.l)(e))}function C(e){if(!e)return!1;let r=s.zl.get(g.dm),n=s.zl.get(g.O2);return r.includes((0,i.l)(e))||n.includes((0,i.l)(e))}let L={VariableByKey:null,VariableCollectionByKey:null,StyleByKey:null,CommunityLibraryComponentsAndStateGroups:null},O=[m.Lom,m.bsh,m.yFE,m.vsj],R=e=>O.some(r=>r._name===e),P=e=>R(e)?e:void 0,D=e=>p.M4.Query({fetch:async r=>{let n=(0,c.S8)(e,r.arguments),a=P(e._name);if(a){let n=L[a];(null===n||r.nonce.value>n)&&(o.az.trackDefinedEvent("preset_libraries.static_update_fetch",{viewName:P(e._name),batchSize:r.arguments.length,updateSource:r.nonce.updateSource}),L[a]=r.nonce.value)}return await n}}),k=D(m.Lom),M=D(m.bsh);D(m.yFE);let F=D(m.vsj);function x(e,r,n){let a=n(S),i=n(w),o=n(e({arguments:r,nonce:i}));return"loading"===o.status&&null!==a&&(o=n(e({arguments:r,nonce:a}))),o}},543817:(e,r,n)=>{n.d(r,{u:()=>_});var a=n(411855),i=n(188507),o=n(275556),s=n(572206),l=n(632430),c=n(356390),d=n(496470),u=n(173454),m=n(809073),p=n(371623),h=n(206686);function _({alwaysSwap:e,canSwap:r,insertAsChildOfCanvas:n,itemsToSwap:_,openFileKey:g,onSwap:f,sourceForTracking:E,insertLogArgsOverride:y}){let b=(0,i.wA)(),I=(0,i.d4)(e=>e.mirror.sceneGraphSelection),T=(0,h.A)(),v=p.S.useOpenFileProperties();return a.useCallback((a,i,p)=>{let h=a.altKey;if((e||h&&T)&&i.type!==u.PW.MODULE)r&&o.l7.user("swap-instance",()=>(0,d.v9)(i,b,g,_||Object.keys(I),E,!e&&h,v,p)),f?.(i);else{let e=c.Y5.getViewportInfo(),r={canvasPosition:{x:e.offsetX,y:e.offsetY},insertAsChildOfCanvas:n??!1,percentageOffset:new s.Mi(.5,.5),storeInRecentsKey:m.$A.Design,useSmartPositioning:!0};i.type===u.PW.COMPONENT?b((0,l.Yf)({item:i,...r,insertLogArgsOverride:y})):i.type===u.PW.STATE_GROUP?b((0,l.b$)({item:i,...r,insertLogArgsOverride:y})):i.type===u.PW.MODULE&&b((0,l.Bs)({item:i,...r,insertLogArgsOverride:y,insertionCallback:()=>c.Y5.triggerAction("commit")}))}},[e,r,b,n,y,_,f,v,g,I,T,E])}},450225:(e,r,n)=>{n.d(r,{Ci:()=>o,WJ:()=>a,vO:()=>s,yc:()=>i}),n(939683);var a=(e=>(e.PASTE="PASTE",e.MODAL="MODAL",e.PLUGIN="PLUGIN",e))(a||{}),i=(e=>(e.ATTEMPT="figjam_link_metadata_attempt",e.ERROR="figjam_link_metadata_error",e.SUCCESS="figjam_link_metadata_success",e.EMBED_CLICK="figjam_link_embed_click",e.CONVERT_TO_TEXT="figjam_link_metadata_convert_to_text",e.OPEN_PREVIEW="figjam_link_preview_open",e.EMBED_EXPAND="figjam_link_embed_expand",e.COPY_LINK="figjam_link_metadata_copy_url",e.SWITCH_ORIENTATION_VERTICAL="figjam_link_preview_orientation_vertical",e.SWITCH_ORIENTATION_HORIZONTAL="figjam_link_preview_orientation_horizontal",e.EMBED_DEACTIVATE="figjam_embed_deactivate",e))(i||{}),o=(e=>(e.EMBED="embed",e.LINK_PREVIEW="preview",e))(o||{});function s(e){try{return new URL(e).hostname}catch(e){return"Could not parse"}}},641638:(e,r,n)=>{n.d(r,{BF:()=>h,CR:()=>m,RW:()=>_,XL:()=>p,kA:()=>u});var a=n(138020),i=n(966712),o=n(915440),s=n(763185),l=n(279453),c=n(335682);function d(e,r,n){let o=[],s=[];for(let r of e){var l;if(!r.plugin)continue;if("status"in r.plugin){if(r.plugin.status!==a.tT.Loaded)continue;l=r.plugin.data}else l=r.plugin;if(!l)continue;let e="Workspace"===r.allowlistGroupType,c=r.allowlistedWorkspace;if(e&&!c||(0,i.kc)().ext_hide_draft_workspace_extensions&&e&&!n)continue;let d=c?.id;n&&d&&d!==n||(l.isWidget?s.push(l.id):o.push(l.id))}return"plugin"===r?o:s}function u(e,r,n=!0){let a=_(),i=(0,o.Rs)(l.M9I,{orgId:e},{enabled:n}),s=i.data?.org;return"loading"!==i.status&&a.loaded?"errors"!==i.status&&s?{loaded:!0,data:d(s.allowlistedPlugins,r,a.data?.workspaceId)}:{loaded:!0,data:[]}:{loaded:!1}}function m(e,r=!0){let n=(0,s.c)(r);if(!n.loaded)return{loaded:!1};let a=n.data;return{loaded:!0,data:d(a?.allowlistedExtensions??[],e,a?.workspace?.id)}}function p({workspace:e,hasPendingRequest:r,extension:n}){return!!(e.publicPluginsOrWidgetDisabled&&!r&&e.extensionRequestsAllowed&&!n?.roles.org)}function h({org:e,extensionVersion:r,isWidget:n,allowlistedExtensions:a}){return!!e&&!!r&&!!(function({org:e,isWidget:r}){if(!e)return!1;let n=r?e.widgets_whitelist_enforced:e.plugins_whitelist_enforced,a=r?e.widget_requests_allowed:e.plugin_requests_allowed;return n&&a}({org:e,isWidget:n})&&!r.is_private&&!a[r.plugin_id])}function _(){let e=(0,c.q5)(),r=!!e,n=(0,o.Rs)(l.iJD,{fileKey:e?.key??""},{enabled:r});if(!r)return{loaded:!0,data:void 0};if("loaded"!==n.status)return{loaded:!1};let a=n.data?.file?.team?.workspace;return{loaded:!0,data:{workspaceId:a?.id,workspaceName:a?.name,fileKey:e.key,fileName:e.name}}}},723245:(e,r,n)=>{n.d(r,{D6:()=>c,T0:()=>u,TF:()=>_,UL:()=>T,ds:()=>g,eU:()=>m,gV:()=>E,kK:()=>d,sb:()=>I,t$:()=>b,tW:()=>y});var a=n(67151),i=n(776250),o=n(966712);n(286098),n(738269);var s=n(477782),l=n(99506);function c(e){return null!=e||(0,o.kc)().ps_benchmark}function d(e){return e?1e3:(0,o.kc)().ps_benchmark?50:20}function u(e,r){return g(e.currentUser.favoritedFiles,e.currentUser.favoritedPrototypes,e.currentUser.favoritedProjects,e.currentUser.favoritedTeams,e.currentUser.favoritedWorkspaces).find(e=>e.resource.resourceId===r)}function m(e,r){switch(r){case l.bk.FILE:return e.favoritedResource?.favoritedFile!=null?{id:e.favoritedResource?.id,resourceType:l.bk.FILE,resource:e.favoritedResource?.favoritedFile}:void 0;case l.bk.PROTOTYPE:return e.favoritedResource?.favoritedPrototype!=null?{id:e.favoritedResource?.id,resourceType:l.bk.PROTOTYPE,resource:e.favoritedResource?.favoritedPrototype}:void 0;case l.bk.FOLDER:return e.favoritedResource?.favoritedProject?{id:e.favoritedResource?.id,resourceType:l.bk.FOLDER,resource:e.favoritedResource?.favoritedProject}:void 0;case l.bk.TEAM:return e.favoritedResource?.favoritedTeam?{id:e.favoritedResource?.id,resourceType:l.bk.TEAM,resource:e.favoritedResource?.favoritedTeam}:void 0;case l.bk.WORKSPACE:return e.favoritedResource?.favoritedWorkspace?{id:e.favoritedResource?.id,resourceType:l.bk.WORKSPACE,resource:e.favoritedResource?.favoritedWorkspace}:void 0;default:return}}function p(e,r,n,a,o,s){(0,i.sx)("data_drift_favorited_resource_corrected",{favoritedResourceId:e,resourceType:r,resourceTeamId:n,underlyingResourceTeamId:a,resourceOrgId:o,underlyingResourceOrgId:s},{forwardToDatadog:!0})}function h(e,r){return e.has(r.resourceId)?null:(e.add(r.resourceId),r)}function _(e,r,n){if(!(0,o.kc)().ps_benchmark_favorites_data_client_side_fix||!(0,o.kc)().ps_benchmark)return{favoritedFiles:e.currentTeamUser?.favoritedFiles,favoritedProjects:e.currentTeamUser?.favoritedProjects,favoritedPrototypes:e.currentTeamUser?.favoritedPrototypes,favoritedFilesKeySet:new Set,favoritedPrototypesIdSet:new Set,favoritedFoldersIdSet:new Set};let a=new Set((n??[]).map(e=>e.plan_id)),i=new Set,s=new Set,l=new Set;return{favoritedFiles:(e?.favoritedFiles??[]).map(e=>{if(null!=r){if(r===e.file?.teamId)return e.teamId!==e.file?.teamId&&(p(e.resourceId,"file",e.teamId,e.file.teamId,null,null),e.teamId=e.file?.teamId),h(i,e);if(e.teamId===r&&!a.has(e.file?.teamId??""))return h(i,e)}}).filter(e=>null!=e),favoritedProjects:(e?.favoritedProjects??[]).map(e=>{if(null!=r){if(r===e.project?.teamId)return e.teamId!==e.project?.teamId&&(p(e.resourceId,"folder",e.teamId,e.project?.teamId,null,null),e.teamId=e.project?.teamId),h(l,e);if(e.project?.orgId===null&&e.teamId===r&&!a.has(e.project?.teamId??""))return h(l,e)}}).filter(e=>null!=e),favoritedPrototypes:(e?.favoritedPrototypes??[]).map(e=>{if(null!=r){if(r===e.prototype?.file?.teamId)return e.teamId!==e.prototype?.file?.teamId&&(p(e.resourceId,"prototype",e.teamId,e.prototype?.file?.teamId,null,null),e.teamId=e.prototype?.file?.teamId),h(s,e);if(e.prototype?.file?.parentOrgId===null&&e.teamId===r&&!a.has(e.prototype?.file?.teamId??""))return h(s,e)}}).filter(e=>null!=e),favoritedFilesKeySet:i,favoritedPrototypesIdSet:s,favoritedFoldersIdSet:l}}function g(e,r,n,a,i){return f(e?.filter(e=>e.file?.canView)??[],r??[],n?.filter(e=>e.project&&!e.project.deletedAt)??[],a?.filter(e=>e.team&&!e.team.deletedAt)??[],i??[])}let f=(e,r,n,a,i)=>{let o=e.map(e=>({id:e.id,resourceType:l.bk.FILE,resource:e})),s=r.map(e=>({id:e.id,resourceType:l.bk.PROTOTYPE,resource:e}));return[...o,...s,...n.map(e=>({id:e.id,resourceType:l.bk.FOLDER,resource:e})),...a.map(e=>({id:e.id,resourceType:l.bk.TEAM,resource:e})),...i.map(e=>({id:e.id,resourceType:l.bk.WORKSPACE,resource:e}))]};function E(e,r){let n=d(r);return g(e.currentUser.favoritedFiles,e.currentUser.favoritedPrototypes,(0,o.kc)().ps_benchmark||r?e.currentUser.favoritedProjects:[],e.currentUser.favoritedTeams,e.currentUser.favoritedWorkspaces).length>=n}function y(e){return!!e&&e>=1e3}function b(e,r){let n={};e.forEach(e=>{n[e.id]=e});let a=e.find(e=>""===e.name)?.id,i=r?.map(e=>n[e]).filter(e=>e)??[],o=e.filter(e=>!(r&&r.includes(e.id))),s=o.findIndex(e=>""===e.name);return -1!==s&&o.splice(s,1),o.sort((e,r)=>new Date(e.createdAt).getTime()-new Date(r.createdAt).getTime()),-1!==s&&a?[n[a],...i,...o]:[...i,...o]}function I(e,r){let n={};e.forEach(e=>{n[e.resource.id]=e});let a=r?.map(e=>n[e]).filter(e=>e)??[],i=e.filter(e=>!(r&&r.includes(e.resource.id)));return i.sort((e,r)=>new Date(e.resource.createdAt).getTime()-new Date(r.resource.createdAt).getTime()),[...a,...i]}function T(e){switch(e){case s.nb.FILE:case s.nb.PINNED_FILE:case s.nb.REPO:return l.bk.FILE;case s.nb.PROTOTYPE:return l.bk.PROTOTYPE;case s.nb.OFFLINE_FILE:return l.bk.FILE;default:(0,a.xb)(e)}}},912924:(e,r,n)=>{function a(e){let r=[];return e.forEach(e=>{e.content.forEach(e=>{let n=JSON.parse(e);n.nodeId&&r.push(n.nodeId)})}),r}n.d(r,{N:()=>a}),n(299321)},355513:(e,r,n)=>{let a;n.d(r,{D4:()=>G,OR:()=>x,Qr:()=>k,Tq:()=>B,Vr:()=>U,Wq:()=>H,hL:()=>F,jm:()=>W,nz:()=>V});var i=n(188507),o=n(776250),s=n(627776),l=n(517333),c=n(737947),d=n(966712),u=n(563706),m=n(939863),p=n(749949),h=n(742580),_=n(980820),g=n(738269),f=n(507877),E=n(293017),y=n(662275),b=n(296559),I=n(445092),T=n(809831),v=n(420576),S=n(356390),w=n(239671),A=n(567088),N=n(723127),C=n(347127),L=n(974105),O=n(788811),R=n(487342),P=n(860178),D=n(707465);function k(){return(0,d.Ay)().release_manifest_git_commit}function M(e,r,n=""){if((0,s.ce)()){document.title=r?`${n}${r}`:e;return}if(e!==(a?a+document.title:document.title)){if("safari"!==u.Ay.browserType){let r;let n=(0,R.AE)(e);r=document.getElementById("custom-emoji-favicon"),n?(a=n,r||((r=document.createElement("link")).id="custom-emoji-favicon",r.rel="icon",document.head.appendChild(r)),r.href="data:image/svg+xml,"+'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">{text}</text></svg>'.replace("{text}",n)):(r&&r.remove(),a=void 0),n&&(e=(0,R.Nn)(e,n))}document.title=e,l.eD&&r&&l.eD.setTitle(r,n)}}function F(e,r=null,n=""){let a=function(e){switch(e){case w.nT.Whiteboard:return" \u2013 FigJam";case w.nT.Slides:return" \u2013 Figma Slides";default:return" \u2013 Figma"}}(r);M(`${n}${e}${a}`,e,n)}function x(e,r){let n=(0,D.Iu)(e,r);if(!n){M("Figma",null);return}if("fullscreen"===r.view&&r.tryPluginName){e.openFile?M(e.openFile.name,n):M((0,m.t)("community.try.plugin_name_with_community",{pluginName:r.tryPluginName}),n);return}if("prototype"===r.view){let a="",i=null;if((0,C.f)(r.file.editor_type))i=a=`${r.isPresenterView?(0,m.t)("slides.general.presenter"):(0,m.t)("slides.general.slide_deck")} \xb7 ${n} - ${(0,m.t)("slides.general.slides")}`;else{let r=function(e){let r=e.prototype;for(let e of r.pages)if(e.nodeId===r.currentPageId)return e.name;return""}(e);r&&e.prototype.pages.length>1?(a=`\u25B6 ${n} - ${r}`,i=`${n} - ${r}`):a=`\u25B6 ${n}`}M(a,i);return}if("fullscreen"===r.view&&!e.openFile){let e=(0,O.GT)();e?.name?n=e.name:r?.localFileName&&(n=r.localFileName)}let a=(0,L.yt)(e);if(a&&(0,v.Xm)(a)){M(`\u2325 ${n}`,`${n}`);return}F(n,(0,T.XE)(r))}let U=(0,_.nF)(e=>{c.Ay.listen(r=>{"POP"===r&&function(r){if(r){let n=e.getState(),a=n.selectedView,{jsCommitHash:i,searchSessionId:o,...s}=r;if("view"in s){if(void 0!==i&&i!==k()){c.Ay.reload("Navigating to a state that was pushed by an older version of this application");return}if("fullscreen"===a.view&&!S.Y5.isReady()){c.Ay.reload("User navigated before fullscreen fully initialized");return}if("fullscreen"===s.view&&!s.fileKey){window.history.back();return}if("fullscreen"===a.view&&("fullscreen"!==s.view||a.fileKey!==s.fileKey))e.dispatch(E.VB({oldSelectedView:a,newSelectedView:s}));else{if(e.dispatch(y.Ce()),"communityHub"===s.view&&"searchAndBrowse"===s.subView&&(0,h.OE)(s.data)){let r=(0,p.w)(n);r&&e.dispatch(I.NR({sessionId:r}))}e.dispatch(g.$T({...s,fromPopstate:!0})),x(n,s)}}}}(c.Ay.location.state)})});function B(e,r,n,a){e(f.UN({fileKey:r.key}));let i=n||a,o=n?A.O.ORG:A.O.TEAM;e((0,d.kc)().ps_benchmark&&i?b.c5({planId:i,planType:o}):b.p4({planId:n||N.P})),e(g.$T({view:"fullscreen",fileKey:r.key,editorType:r.editor_type?(0,w.wN)(r.editor_type):w.nT.Design}))}function V(e,r,n,a){(0,o.sx)("Open File in New Tab Click",{fileKey:r,uiSelectedView:JSON.stringify(n)}),a(f.UN({fileKey:r})),c.Ay.redirect(e,"_blank")}function G(e,r,n,a){(0,o.sx)("Open Prototype in New Tab Click",{fileKey:r,pageId:n,uiSelectedView:JSON.stringify(a)}),c.Ay.redirect(e,"_blank")}function H(e,r){r(f.V3({url:e}))}function W(e,r){let n=(0,P.TA)(),a=e||r,o=(0,i.d4)(e=>(0,d.kc)().limited_plan_spaces?e.plans:n?e.authedUsers.byId[n]?.plans:null);return!!o?.find(e=>e.plan_id===a)}},985139:(e,r,n)=>{n.d(r,{b4:()=>k,g4:()=>x,n_:()=>F});var a=n(681067),i=n(89865),o=n.n(i),s=n(966712),l=n(130097),c=n(179940),d=n(27087),u=n(881388),m=n(939863),p=n(392592),h=n(980820),_=n(660656),g=n(738269),f=n(662275),E=n(992037),y=n(128751),b=n(988022),I=n(396226),T=n(117192),v=n(838329),S=n(99506),w=n(279453),A=n(540019),N=n(147206),C=n(984968),L=n(300874),O=n(239671),R=n(851363),P=n(378356),D=n(449731);let k=(0,h.nF)(async(e,r)=>{let{fileKeys:n,repoIds:a}=r;if(n.length>0){let r=e.getState(),[a,...i]=await Promise.all([(0,C.R5)(n),...n.map(e=>A.M4.fetchFile(e))]);if(a){let o=r.teams[a],s=new Set(i.map(e=>e.editor_type)),l=s.size>1?null:s.has(S._Y.WHITEBOARD)?S._Y.WHITEBOARD:S._Y.DESIGN;e.dispatch(f.to({type:D.DV,data:{team:o,action:R.ZN.RESTORE_FILES,editorType:l,resource:L.vL.FILE,multipleResources:n.length>1,currentPlan:I.F.Plan.STARTER,upsellPlan:I.F.Plan.PRO}}))}else e.dispatch(_.R({fileKeys:o()(i,"key"),userInitiated:!0}))}if(a&&a.length>0){let r=await Promise.all(a.map(e=>A.M4.fetchRepo(e)));e.dispatch((0,E.i)({reposById:o()(r,"id"),userInitiated:!0}))}e.dispatch(y.an())});async function M({selectedFileKeys:e,isPlanSpacesEnabled:r,currentSpaceDraftsFolderId:n,personalDraftsFolderId:a,currentUserId:i,state:o,toDraft:s}){let c=await (0,l.S8)(w.M5e,e.map(e=>({fileKey:e}))),d=[],u=new Set;return c.forEach(({result:{data:e}})=>{let l;let{file:c}=e??{};if(!c)return;let{project:m,editorType:p,key:h}=c;null!=p&&u.add(p);let _=r?n:a;if(c.parentOrgId){let e=i&&o.orgUsersByOrgId[c.parentOrgId]?.[i];l=e?e.drafts_folder_id:_}else if(c.teamId&&r){let e=o.roles.byTeamId[c.teamId],r=i&&e&&o.teamUserByTeamId[c.teamId]?.[i];l=r?r.drafts_folder_id:_}else l=_;let g=(l||m?.id)??"",f=!s&&m&&(0,N.Jf)(m,p??S._Y.DESIGN)?m.id:g;d.push({key:h,folderId:f})}),{copyFiles:d,editorTypes:u}}let F=(0,h.nF)(async(e,r)=>{let n=(0,s.kc)().ps_benchmark,i=e.getState(),o=i.user?.id,l=i.user?.personal_drafts_folder_id,h=i.user?.drafts_folder_id,_=[l];o&&(_.push(...(0,T.x)(i.orgUsersByOrgId,o).map(e=>e.drafts_folder_id)),n&&_.push(...(0,v._)(i.teamUserByTeamId,o).map(e=>e.drafts_folder_id||void 0)));let E=Object.keys(i.tileSelect&&i.tileSelect[P.F.FILES]||{}).concat(Object.keys(i.tileSelect&&i.tileSelect[P.F.PINNED_FILES]||{})),y=Object.keys(i.tileSelect&&i.tileSelect[P.F.REPOS]||{});(await Promise.all(y.map(e=>A.M4.fetchRepo(e)))).forEach(e=>{let r=e.default_file_key;r&&E.push(r)});let{copyFiles:w,editorTypes:N}=await M({selectedFileKeys:E,isPlanSpacesEnabled:n,currentSpaceDraftsFolderId:h,personalDraftsFolderId:l,currentUserId:o,state:i,toDraft:r.toDraft}),k=await (0,C.mx)(w);if(k){let r=i.teams[k],n=N.size>1?null:N.has(S._Y.WHITEBOARD)?S._Y.WHITEBOARD:S._Y.DESIGN;e.dispatch(f.to({type:D.DV,data:{team:r,action:R.ZN.DUPLICATE_FILES,editorType:n,resource:L.vL.FILE,multipleResources:w.length>1,currentPlan:I.F.Plan.STARTER,upsellPlan:I.F.Plan.PRO}}));return}let F=w.map(({key:r,folderId:n})=>()=>{let a=d.Ay.post(`/api/multiplayer/${r}/copy?${(0,c.lF)({folder_id:n})}`);return a.catch(({data:r})=>{r&&r.message?e.dispatch(u.s.error(r.message)):e.dispatch(u.s.error((0,m.t)("file_browser.file_browser_actions.duplicate_file_error")))}),a});(0,a.Ed)(F,8).then(r=>{if(!r.some(e=>"reject"===e.type)){let n=w.filter(e=>!!e.folderId&&_.includes(e.folderId)).length,a=r=>r&&r.editor_type?{text:(0,m.t)("general.open"),action:()=>{e.dispatch(g.$T({view:"fullscreen",fileKey:r.key,editorType:(0,O.wN)(r.editor_type)})),e.dispatch(p.F.dequeue({}))}}:void 0;if(n>0&&("folder"!==i.selectedView.view||i.selectedView.folderId!==h)){let i,o="",s=1===w.length;o=s?(0,m.t)("user_view.file_duplicated_to_your_drafts"):n===w.length?(0,m.t)("user_view.files_duplicated_to_your_drafts",{intArg:n}):(0,m.t)("user_view.some_files_duplicated_to_your_drafts"),i=s?a(r[0].resolve?.data?.meta):{text:(0,m.t)("general.show"),action:()=>{h&&e.dispatch(g.$T({view:"folder",folderId:h})),e.dispatch(p.F.dequeue({}))}},e.dispatch(p.F.enqueue({type:"file_duplicated",message:o,button:i}))}else if("folder"===i.selectedView.view){let n=a(1===w.length?r[0].resolve?.data?.meta:void 0);e.dispatch(p.F.enqueue({type:"file_duplicated",message:1===w.length?(0,m.t)("user_view.file_duplicated"):(0,m.t)("user_view.files_duplicated",{intArg:w.length}),button:n}))}let o=r.map(e=>null!=e.resolve?e.resolve.data.meta:null).filter(e=>null!=e).map(e=>e);(0,b.ak)(w,o,e.getState())}})}),x=(0,h.nF)(e=>{e.dispatch(F({toDraft:!0}))});(0,h.nF)((e,r)=>{let n=e.getState(),a=n.user?.drafts_folder_id;return d.Ay.post(`/api/multiplayer/${r.file.key}/copy?${(0,c.lF)({folder_id:a})}`).then(()=>{e.dispatch(u.s.flash((0,m.t)("user_view.file_duplicated_to_your_drafts")))}).catch(({data:r})=>{r&&r.message?e.dispatch(u.s.error(r.message)):e.dispatch(u.s.error((0,m.t)("file_browser.file_browser_actions.duplicate_file_error")))})})},688083:(e,r,n)=>{n.d(r,{Ct:()=>Q,LK:()=>j,Nr:()=>ei,Q3:()=>en,Q4:()=>Z,SX:()=>es,Xg:()=>X,iT:()=>er,jl:()=>q,k4:()=>ee,mq:()=>et,tO:()=>J,xT:()=>ea});var a=n(188507),i=n(432258),o=n(966712),s=n(827697),l=n(752553),c=n(27087),d=n(330654),u=n(881388),m=n(939863),p=n(392592),h=n(693133),_=n(980820),g=n(944682),f=n(738269),E=n(270056),y=n(662275),b=n(404717),I=n(782656),T=n(936500),v=n(988022),S=n(396226),w=n(875847),A=n(99506),N=n(279453),C=n(540019),L=n(984968),O=n(206193),R=n(178160),P=n(300874),D=n(696915),k=n(451e3),M=n(945020),F=n(644344),x=n(668860),U=n(637590),B=n(851363),V=n(290750),G=n(845213),H=n(835703),W=n(449731),K=n(915592);let Y=(0,_.nF)((e,{folderId:r,folderData:n})=>{(0,a.vA)(()=>{e.getState().folders[r]?e.dispatch(E.yJ({folder:n.folder})):e.dispatch(E.bE(n.folder)),e.dispatch(g.uo({files:n.files,subscribeToRealtime:!1})),e.dispatch(I.nX({repos:n.repos})),e.dispatch(T.uo({roles:n.roles})),e.dispatch(E.Kc({folderId:r,state:"loaded"}))})}),$=C.M4.Query({fetch:async(e,{reduxStore:r})=>{let n=await V.W.getFiles({folderId:e.folderId,shouldShowOnlyTrashedFiles:!!e.shouldShowOnlyTrashedFiles});return r.dispatch(g.uo({files:n.data.meta.files})),r.dispatch(I.nX({repos:n.data.meta.repos})),r.dispatch(T.uo({roles:n.data.meta.roles})),r.dispatch(E.Kc({folderId:e.folderId,state:"loaded"})),n.data.meta},schema:e=>e.object({folder:k.lH.nullable(),files:e.array(D.L),repos:e.array(F.z)}),sync:({folderId:e},{mutate:r,livegraphClient:n})=>{let a=new Date(new Date().setHours(0,0,0,0));return n.subscribe(N.m0h,{projectId:e,updatedAtTimestamp:a},n=>{r(r=>{let a=r.files;(n.data?.project?.fileUpdates||[]).filter(r=>r.folderId===e).forEach(e=>{a.find(r=>r.key===e.key)||r.files.unshift((0,R.W$)(e))})})})},syncObjects:!0,output:({data:e,args:r})=>{let n=e.files.filter(e=>e.folder_id===r.folderId&&(r.shouldShowOnlyTrashedFiles&&e.trashed_at&&e.trashed_with_parent===A.Go.FOLDER||!r.shouldShowOnlyTrashedFiles&&!e.trashed_at)&&!e.file_repo_id),a=e.repos.filter(e=>e.folder_id===r.folderId&&(r.shouldShowOnlyTrashedFiles&&e.trashed_at&&e.trashed_with_parent===A.Go.FOLDER||!r.shouldShowOnlyTrashedFiles&&!e.trashed_at)),o=e.repos.filter(e=>!e.trashed_at&&!e.deleted_at).map(r=>e.files.find(e=>e.key===r.default_file_key)).filter(i.Vq),s={};return e.repos.forEach(r=>{let n=e.files.filter(e=>e.file_repo_id===r.id).sort((e,r)=>new Date(r.touched_at).getTime()-new Date(e.touched_at).getTime());s[r.id]=n}),{folder:e.folder,files:n,repos:a,previewFiles:[...n,...o],filesByRepoId:s}}});function j(e,r=!0,n=!1){let[a]=(0,C.IT)($({folderId:e,shouldShowOnlyTrashedFiles:n}),{enabled:r});return a}let z=d.object({folder:k.lH.nullable(),files:d.array(D.L),repos:d.array(F.z),roles:d.array(x.an)});C.M4.PaginatedQuery({fetch:async(e,{pageParam:r,reduxStore:n})=>{let a;if(r)a=r;else{let{folderId:r,...n}=e,i=new URLSearchParams({...n,page_size:"50"}).toString();a=`/api/folders/${r}/paginated_files?${i}`}let i=await (0,c.GD)(a),o=i.data.meta;return n.dispatch(g.uo({files:o.files})),n.dispatch(I.nX({repos:o.repos})),n.dispatch(T.uo({roles:o.roles})),n.dispatch(E.Kc({folderId:e.folderId,state:"loaded"})),{data:i.data.meta,nextPage:i.data.pagination?.next_page,prevPage:i.data.pagination?.prev_page}},joinPages:e=>({files:e.flatMap(e=>e.data.files),repos:e.flatMap(e=>e.data.repos),roles:e.flatMap(e=>e.data.roles),folder:e.length>0?e[e.length-1].data.folder:null}),sync:({folderId:e},{mutate:r,mutate__DEPRECATED:n,livegraphClient:a})=>{let i=new Date(new Date().setHours(0,0,0,0));return a.subscribe(N.m0h,{projectId:e,updatedAtTimestamp:i},a=>{(0,o.kc)().livestore_paginated_atoms_fix?r(r=>{let n=r[0];n&&(a.data?.project?.fileUpdates||[]).filter(r=>r.folderId===e).forEach(e=>{r.find(r=>!!r.files.find(r=>r.key===e.key))||n.files.unshift((0,R.W$)(e))})}):n(r=>{let n=r.files;(a.data?.project?.fileUpdates||[]).filter(r=>r.folderId===e).forEach(e=>{n.find(r=>r.key===e.key)||r.files.unshift((0,R.W$)(e))})})})},output:({data:e,args:r})=>{let n=e.files.filter(e=>e.folder_id===r.folderId&&!e.trashed_at&&!e.file_repo_id),a=e.repos.filter(e=>e.folder_id===r.folderId&&!e.trashed_at),i={};return e.repos.forEach(r=>{let n=e.files.filter(e=>e.file_repo_id===r.id).sort((e,r)=>new Date(r.touched_at).getTime()-new Date(e.touched_at).getTime());i[r.id]=n}),{folder:e.folder,files:n,repos:a,filesByRepoId:i}},schema:z,syncObjects:!0});let q=(0,_.nF)(async(e,{folderId:r,loadedFolders:n})=>{if(!n[r]){e.dispatch(E.Kc({folderId:r,state:"loading"}));try{let n=(await V.W.getFiles({folderId:r})).data.meta;e.dispatch(Y({folderId:r,folderData:n}))}catch(n){404===n.status||403===n.status?e.dispatch(f.$T({view:"resourceUnavailable",resourceType:U.Ft.PROJECT})):n.status>=400&&n.status<500?e.dispatch(E.Kc({folderId:r,state:"loaded"})):e.dispatch(E.Kc({folderId:r,state:null}))}}}),X=C.M4.Query({fetch:async e=>(await G.$.getFolders({teamId:e.teamId})).data.meta.folder_rows,schema:e=>e.array(k.lH.extend({touched_at:e.string()})),syncObjects:!0,enabled:e=>!!e.teamId,output:({data:e})=>e.filter(e=>!(e.trashed_at||e.deleted_at))}),J=C.M4.Mutation((e,{reduxStore:r})=>V.W.delete({folderId:e.folderId}).then(()=>{r.dispatch(p.F.enqueue({message:(0,m.t)("file_browser.file_browser_actions.folder_deleted_forever")}))})),Z=C.M4.Mutation((e,{reduxStore:r})=>V.W.permanentlyDelete({folderId:e.folderId}).then(()=>{r.dispatch(p.F.enqueue({message:(0,m.t)("file_browser.file_browser_actions.folder_deleted_forever")}))})),Q=C.M4.Mutation(({folderId:e},{objects:r,reduxStore:n})=>{let a=V.W.trash({folderId:e}).then(()=>{r.Folder.update(e,e=>{e.trashed_at=Date.now().toString()}),n.dispatch(p.F.enqueue({message:(0,m.t)("file_browser.file_browser_actions.folder_trashed")}))});n.dispatch((0,u.Q)({promise:a,fallbackError:(0,m.t)("file_browser.api_folder.error_when_moving_to_trash")})),(0,s.WB)().optimisticallyUpdate({Project:{[e]:{trashedAt:new Date}}},a)}),ee=C.M4.Mutation(({folderId:e,team:r},{objects:n,reduxStore:a})=>{let i=V.W.restore({folderId:e}).then(()=>{n.Folder.update(e,e=>{e.trashed_at=null}),a.dispatch(p.F.enqueue({message:(0,m.t)("file_browser.file_browser_actions.folder_restored"),button:{text:(0,m.t)("visual_bell.show_in_toast",{destination:r?.name??"Recents"}),action:()=>{r?a.dispatch(f.$T({view:"team",teamId:r.id})):a.dispatch(f.$T({view:"recentsAndSharing"}))}}}))});a.dispatch((0,u.Q)({promise:i,fallbackError:(0,m.t)("file_browser.api_folder.error_when_restoring")})),(0,s.WB)().optimisticallyUpdate({Project:{[e]:{trashedAt:null}}},i)});C.M4.Mutation(e=>V.W.batchDelete({folderIds:e.folderIds}));let et=C.M4.Mutation(({folderId:e,folderName:r},{objects:n,reduxStore:a})=>{let i=(0,w.SS)(r);if(i){a.dispatch(u.s.error(i));return}n.Folder.update(e,e=>{e.name=r,e.path=r}),(0,v.xr)("Folder Renamed",e,null,a.getState(),{folderName:r});let o=c.Ay.put("/api/folders/rename",{folder_id:e,name:r});return a.dispatch((0,u.Q)({promise:o,fallbackError:(0,m.t)("file_browser.api_folder.an_error_occurred_while_renaming_this_project")})),(0,s.WB)().optimisticallyUpdate({Project:{[e]:{name:r,path:r}}},o),o}),er=(0,_.MM)("FOLDER_UPDATE_FOLDER_ACCESS",(e,r,{optimistId:n})=>{let a=c.Ay.put(`/api/folders/${r.folderId}`,{is_invite_only:r.isInviteOnly,is_view_only:r.isViewOnly}).then(()=>{e.dispatch(b.c(n))}).catch(()=>{e.dispatch(b.r(n))});(0,u.Q)({promise:a,fallbackError:(0,m.t)("file_browser.api_folder.an_error_while_updating_the_folder_s_access")})}),en=(0,_.MM)("FOLDER_UPDATE_SHARING_AUDIENCE_CONTROLS",(e,r,{optimistId:n})=>{let a=V.W.updateFolderSharingAudienceControls({folderId:r.folder.id,sharingAudienceControl:r.sharingAudienceControl}).then(()=>{e.dispatch(b.c(n)),(0,v.xr)("Folder Share Settings Updated",r.folder.id,r.folder.team_id,e.getState(),{share_settings_type:"sharing_audience",oldSharingAudienceControl:r.folder.sharing_audience_control,newSharingAudienceControl:r.sharingAudienceControl})}).catch(()=>{e.dispatch(b.r(n))});(0,u.Q)({promise:a,fallbackError:(0,m.t)("file_browser.api_folder.an_error_while_updating_the_folder_s_sharing_audience_control")})}),ea=(0,_.MM)("FOLDER_UPDATE_TEAM_ACCESS",(e,r,{optimistId:n})=>{let a=V.W.updatedFolderTeamAccess({folderId:r.folder.id,teamAccess:r.teamAccess}).then(()=>{e.dispatch(b.c(n)),(0,v.xr)("Folder Share Settings Updated",r.folder.id,r.folder.team_id,e.getState(),{share_settings_type:"team_access",oldTeamAccess:r.folder.team_access,newTeamAccess:r.teamAccess})}).catch(()=>{e.dispatch(b.r(n))});(0,u.Q)({promise:a,fallbackError:(0,m.t)("file_browser.api_folder.an_error_while_updating_the_folder_s_team_access")})}),ei=(0,_.nF)(async(e,r)=>{let n=r.folder,a=r.team,i=(0,M.Ws)(a);if(n.inviteOnlyAt||n.viewOnlyAt){e.dispatch(y.to({type:H.z,data:{folder:n}}));return}try{await V.W.getCanMove({teamId:a.id,folderId:n.id})}catch(r){r.data?.failure_info?.code==="ERR_FILE_LIMIT"||r.data?.failure_info?.code==="ERR_PROJECT_LIMIT"?e.dispatch(y.to({type:W.DV,data:{team:i,resource:P.vL.FOLDER,action:B.ZN.MOVE_FOLDER,currentPlan:S.F.Plan.STARTER,upsellPlan:S.F.Plan.PRO,editorType:null,upsellSource:O.b.FOLDER_MOVE_MODAL}})):e.dispatch(u.s.error(r.data?.message));return}if(n.teamId&&i){e.dispatch(y.to({type:K.o,data:{folder:n,destinationTeam:i,onConfirm:()=>{(0,l.Jl)(eo)({folder:n,team:i})}}}));return}(0,l.Jl)(eo)({folder:n,team:i}),r.onSuccess&&r.onSuccess()}),eo=C.M4.Mutation((e,{query:r,objects:n,reduxStore:a})=>{let{folder:i,team:o}=e;(0,v.xr)("Folder Moved",i.id,null,a.getState(),{destTeamId:o.id});let l=c.Ay.put("/api/folders/move",{folder_id:i.id,team_id:o.id}).then(()=>{a.dispatch(p.F.enqueue({message:(0,m.t)("file_browser.folder_move.project_moved_toast",{folderName:i.path,teamName:o.name})}))});return a.dispatch((0,u.Q)({promise:l,fallbackError:(0,m.t)("file_browser.api_folder.an_error_occurred_while_moving_this_project")})),s.WB()?.optimisticallyUpdate({Project:{[i.id]:{teamId:o.id}}},l),i.teamId&&(r.mutate(X({teamId:i.teamId}),e=>{let r=e.findIndex(e=>e.id===i.id);-1!==r&&e.splice(r,1)}),n.Folder.update(i.id,e=>{e.team_id=o.id})),l}),es=(0,_.nF)((e,r)=>{let n=e.getState(),a=r.where,i=r.team.id,o=n.creatingNewFolder&&n.creatingNewFolder.where===a&&n.creatingNewFolder.teamId===i,s=r.team;if(!o){if(s.canEdit)(0,L.rR)(s,{type:L.sK.ADD_PROJECT})?(e.dispatch(f.sf({where:a,teamId:i})),e.dispatch(y.to({type:(0,h.p)(),data:{teamId:s.id,modalShown:n.modalShown,onFolderCreated:r.onFolderCreated}}))):e.dispatch(y.to({type:W.DV,data:{team:s,resource:P.vL.FOLDER,action:B.ZN.CREATE_FOLDER,currentPlan:S.F.Plan.STARTER,upsellPlan:S.F.Plan.PRO,editorType:null}}));else{let r=s?(0,m.t)("file_browser.api_folder.no_create_permissions_team_name",{teamName:s.name}):(0,m.t)("file_browser.api_folder.no_create_permissions_this_team");e.dispatch(u.s.flash(r))}}})},935308:(e,r,n)=>{n.d(r,{nm:()=>h});var a=n(966712),i=n(374626),o=n(586459),s=n(980820),l=n(99403),c=n(296559),d=n(902957),u=n(389643),m=n(516056),p=n(6974);(0,s.nF)(async(e,{loadedPlans:r})=>{if(!r||!(r.length>0))try{let r=await m.k.getPlans();e.dispatch(c.uo({plans:r.data.meta.plans})),e.dispatch(d.uo({teams:r.data.meta.teams})),e.dispatch(l.uo({orgs:r.data.meta.orgs}));let n=r.data.meta.teams,i=(0,a.kc)().ps_benchmark,o=(0,a.kc)().close_starter_team_loophole;i&&o&&await Promise.all(n.map(r=>(0,u.xN)(r.id,e)))}catch(e){}});let h=(e=!1)=>async r=>{try{return await _(r,e)}catch(e){return Promise.reject(e)}};async function _(e,r=!1){if(!(0,a.kc)().ps_benchmark)return Promise.reject();let n=i.zl.get(p.g);if(!r&&n!==o.r.INIT&&n!==o.r.LOADING)return n;try{n===o.r.INIT&&i.zl.set(p.g,o.r.LOADING);let r=await m.k.getPlansForAuthedUsers();return i.zl.set(p.g,r),e(d.uo({teams:r.teams})),e(l.uo({orgs:r.orgs})),r}catch(e){return n===o.r.LOADING&&i.zl.set(p.g,o.r.INIT),Promise.reject(e)}}},964258:(e,r,n)=>{n.d(r,{IA:()=>L,KQ:()=>C,UM:()=>P,vr:()=>R,zK:()=>O});var a=n(776250),i=n(966712),o=n(827697),s=n(790724),l=n(27087),c=n(881388),d=n(939863),u=n(392592),m=n(980820),p=n(738269),h=n(507877),_=n(182976),g=n(936500),f=n(902957),E=n(816858),y=n(988022),b=n(99506),I=n(937294),T=n(416618),v=n(935757),S=n(668860),w=n(637590),A=n(344950),N=n(248970);let C=(0,m.nF)((e,r)=>{let{teamName:n,orgAccess:a,workspaceId:o,description:s,defaultPermission:m,sharingAudienceControl:_,orgBrowsable:E,hidden:I,ignoreCurrentPlan:v}=r,N=e.getState().currentUserOrgId,C={team_name:n};!N||v||(C.org_id=N,_||(C.org_access=a)),o&&(C.workspace_id=o),s&&(C.description=s),m&&!_&&(C.default_permission=m),_&&(C.sharing_audience_control=_),E&&(C.org_browsable=E),I&&(C.hidden=I),e.dispatch(f.r1({loading:!0})),l.Ay.post("/api/teams/create",C).then(({data:n})=>{let a="team"in n.meta?n.meta.team:n.meta;(0,y._J)("Team Created",a.id,e.getState(),{sharing_audience_control:_,org_browsable:E,hidden:I}),r.onSuccessNoRedirect&&r.onSuccessNoRedirect(a),function(e,r,n){let a=r.getState().user,o=r.getState().currentUserOrgId;r.dispatch(f.bE({team:e}));let{ignoreCurrentPlan:s}=n;o&&!s&&n.inviteEmails?.length&&n.inviteLevel?r.dispatch((0,T.rq)({emails:n.inviteEmails,emailsToExclude:a?new Set([a.email]):void 0,resourceType:b.vt.TEAM,resourceIdOrKey:e.id,level:n.inviteLevel,source:"new_team_creation_modal"})):n.teamFlowType===w.SC.CREATE&&n.inviteEmails?.length&&r.dispatch((0,T.rq)({emails:n.inviteEmails,emailsToExclude:a?new Set([a.email]):void 0,resourceType:b.vt.TEAM,resourceIdOrKey:e.id,level:S.e6.EDITOR,source:"team_creation_flow"})),A.G.getTeam({teamId:e.id}).then(({data:o})=>{for(let e of o.meta)r.dispatch(g.bE({role:e}));let l=(0,i.kc)().ps_benchmark;l||r.dispatch(f.r1({loading:!1}));let c=r.getState().currentUserOrgId&&!s;if(n.dontRedirect)l&&r.dispatch(f.r1({loading:!1}));else if(n.onSuccess&&(l&&r.dispatch(f.r1({loading:!1})),n.onSuccess()),c||n.teamFlowType===w.SC.CREATE)l&&r.dispatch(f.r1({loading:!1})),r.dispatch(p.$T({view:"team",teamId:e.id})),r.dispatch(u.F.enqueue({type:"new_team_created",message:(0,d.t)("team_creation.you_have_created_a_new_team")}));else if(l&&a?.id){let n={view:"addCollaborators",teamId:e.id},i={userId:a.id,teamId:e.id,orgId:null};r.dispatch(h._l({workspace:i,view:n}))}else l&&r.dispatch(f.r1({loading:!1})),r.dispatch(p.$T({view:"addCollaborators",teamId:e.id}))})}(a,e,r)}).catch(r=>{let n=(0,d.Jv)(r,r?.response?.message||(0,d.t)("team_creation.an_error_occurred_while_creating_this_team"));e.dispatch(c.s.error(n)),e.dispatch(f.r1({loading:!1}))})}),L=(0,m.nF)((e,r)=>{let n=r.team,a=n.id,i=n.name,c=r.name;(0,y._J)("Team Renamed",a,e.getState());let m=l.Ay.put(`/api/teams/${a}`,{name:r.name}).then(({data:n})=>{r.skipVisualBell||e.dispatch(u.F.enqueue({message:(0,d.t)("change_team_name_visual_bell.text",{oldTeamName:i,newTeamName:c}),button:{text:(0,d.t)("change_team_name_visual_bell.undo"),action:()=>{e.dispatch(L({team:n.meta,name:i,skipVisualBell:!0}))}}}))});return o.WB()?.optimisticallyUpdate({Team:{[a]:{name:c}}},m),(0,s.Q)({requestPromise:m,fallbackError:"An error occurred while renaming this team.",store:e,next:e.dispatch,action:f.$w(r)})}),O=(0,m.nF)((e,r)=>{let n=r.team.id;return(0,y._J)("Team Share Settings Updated",n,e.getState(),{share_settings_type:"share_audience",oldSharingAudienceControl:r.team.sharing_audience_control,newSharingAudienceControl:r.sharingAudienceControl,oldOrgBrowsable:r.team.org_browsable,newOrgBrowsable:r.orgBrowsable,oldHidden:r.team.hidden,newHidden:r.hidden}),(0,s.Q)({requestPromise:l.Ay.put(`/api/teams/${n}`,{sharing_audience_control:r.sharingAudienceControl,org_browsable:r.orgBrowsable,hidden:r.hidden}),fallbackError:"An error occurred while changing the sharing settings of this team.",store:e,next:e.dispatch,action:f.aB(r)})});(0,m.nF)((e,r)=>{let n=r.team.id;return(0,y._J)("Team Org Access Changed",n,e.getState(),{oldOrgAccess:r.team.org_access,newOrgAcccess:r.orgAccess}),(0,s.Q)({requestPromise:l.Ay.put(`/api/teams/${n}`,{org_access:r.orgAccess}),fallbackError:"An error occurred while changing the org access of this team.",store:e,next:e.dispatch,action:f.bQ(r)})}),(0,m.nF)((e,r)=>{let n=r.team.id;return(0,y._J)("Org Team Default Member Permission Changed",n,e.getState(),{oldDefaultPermission:r.team.default_permission,newDefaultPermission:r.defaultPermission}),(0,s.Q)({requestPromise:l.Ay.put(`/api/teams/${n}`,{default_permission:r.defaultPermission}),fallbackError:(0,d.t)("file_browser.team_settings.an_error_occurred_while_changing_default_permission"),store:e,next:e.dispatch,action:f.n9(r)})});let R=(0,m.nF)((e,r)=>{(0,a.sx)("file-browser-hydrate",{location:"team.onJoin"});let n=(0,I.p9)(r.teamId);(0,v._X)("onJoinTeam").then(a=>{let i=r.teamId;e.dispatch(p.Qv(a.data.meta));let o=e.getState().teams[i].name;switch(r.level){case S.e6.OWNER:e.dispatch(c.s.flash((0,d.t)("join_team_flash.as_owner.text",{teamName:o})));break;case S.e6.ADMIN:e.dispatch(c.s.flash((0,d.t)("join_team_flash.as_admin.text",{teamName:o})));break;default:e.dispatch(c.s.flash((0,d.t)("join_team_flash.text",{teamName:o})))}e.dispatch(_.x2({key:n}))}).catch(()=>{e.dispatch(_.of({key:n}))}),e.dispatch(f.mw(r))}),P=(0,m.nF)((e,r)=>{(0,a.sx)("file-browser-hydrate",{location:"team.onBatchJoin"});let n=(0,I.n1)(r.teamIds);(0,v._X)("onBatchJoinTeams").then(a=>{e.dispatch(p.Qv(a.data.meta));let i=r.teamIds.length;switch(r.level){case S.e6.OWNER:e.dispatch(c.s.flash((0,d.t)("join_team_batch_flash.as_owner.text",{teamCount:i})));break;case S.e6.ADMIN:e.dispatch(c.s.flash((0,d.t)("join_team_batch_flash.as_admin.text",{teamCount:i})));break;default:e.dispatch(c.s.flash((0,d.t)("join_team_batch_flash.text",{teamCount:i})))}e.dispatch(_.x2({key:n}))}).catch(()=>{e.dispatch(_.of({key:n}))}),e.dispatch(f.ii(r))});(0,m.nF)(e=>{let r=e.getState().currentUserOrgId;N.c.getTeamRoleRequestsOrgId({orgId:r}).then(r=>{e.dispatch(E.b({teamRoleRequests:r.data.meta}))})})},411916:(e,r,n)=>{n.d(r,{HE:()=>_,O_:()=>m,Pn:()=>u,Tt:()=>g,U8:()=>h,vp:()=>d});var a=n(966712),i=n(886653),o=n(776621),s=n(939863),l=n(473624),c=n(428467);function d(e,r,n){if(!e)return null;let i={userId:e.id,orgId:r};return(0,a.kc)().ps_benchmark&&(i.teamId=n||null),i}let u=(0,i.xx)(d);function m(e,r){let n=d(e.user,e.currentUserOrgId,e.currentTeamId);return(0,a.kc)().ps_benchmark?!!n&&n.userId===r.userId&&(!!n.orgId&&n.orgId===r.orgId||!!n.teamId&&n.teamId===r.teamId):!!n&&n.userId===r.userId&&n.orgId===r.orgId}let p=l.p;function h(e,r){let n={};return r.forEach(r=>{n[r]=p(e,r)}),n}function _(e,r,n,i){let l=(0,s.t)("navbar.workspaces.default_workspace_name");if(!r)return l;if(r.orgId){let a=n?.[r.orgId]||e.orgById[r.orgId];return a?.name||(0,s.t)("navbar.workspaces.default_org_workspace_name")}let d=(0,a.kc)().ps_benchmark;if(d&&r.teamId){let n=i?.[r.teamId]||e.teams[r.teamId];return n?.name||(0,s.t)("navbar.workspaces.default_team_workspace_name")}return d&&e.user?.id!=="-1"&&(0,o.Lo)("planSpaces","User with Plan Spaces enabled saw External Teams."),(0,c.userIsAMemberOfAnOrg)(e,r.userId)?(0,s.t)("navbar.profile_switcher.external_teams"):(0,s.t)("navbar.profile_switcher.your_teams")}function g(e,r){return 0!==e.length&&(e.length>1||p(r,e[0]).length>1)}},67085:(e,r,n)=>{n.d(r,{Ad:()=>I,Ir:()=>S,Jj:()=>y,dE:()=>v,m1:()=>b,nk:()=>h});var a=n(138020),i=n(512495),o=n.n(i),s=n(181912),l=n(939863),c=n(99506),d=n(623746),u=n(239671);n(723856);var m=n(27703),p=n(875847),h=(e=>(e.fileBrowserContextMenu="file_browser_context_menu",e.fileBrowserFavoritedContextMenu="file_browser_favorited_context_menu",e.fileBrowserTileActionMenu="file_browser_tile_action_menu",e.prototypeHeader="prototype_header",e.fullscreenToolbar="fullscreen_toolbar",e.expFigJamOnboardingShareVariant="exp_figjam_onboarding_share_variant",e.fullscreenCopyLinkButtonVisualBell="fullscreen_copy_link_button_visual_bell",e.prototypeCopyLinkButtonVisualBell="prototype_copy_link_button_visual_bell",e.customTemplatePublishNudge="custom_template_publish_nudge",e.expProTrialsV3CardStackWidget="exp_pro_trials_v3_card_stack_widget",e.editRequestTooltip="edit_request_tooltip",e.editRequestExternal="edit_request_external",e.shareToGoogleClassroomOnboarding="share_to_google_classroom_onboarding",e.googleClassroomIntegration="google_classroom_integration",e))(h||{});function _(e){return{...e,canEdit:!1,canEditCanvas:!1,hasEditRole:!1,hasViewRole:!1,canView:!1,canViewPrototype:!1,canViewPrototypeLinks:!1,canMove:!1,isOwner:!1,mainFileLinkExpirationConfig:null,passwordSetAt:null,passwordSetByUser:null,isPublishedHubFile:!1,folderAccessEnabled:!0,isDraftFileLG:!1,isAbandonedDraftFile:!1,mustUpgradeToShareDraft:!1}}function g(e){return{file:_(e),repo:null,rolesByUserId:{},fileRoleRequests:[],folder:null,folderRoles:[],isInDraftsFolder:!1,orgDraftsOwner:null,org:null,orgUser:null,currentOrg:null,team:null,workspace:null,orgs:{},dataLoaded:!1,fileSeenStatesByUserId:{},currentUser:null,sharedOrgLicenseGroupSetting:null,editorType:(0,u.wN)(e.editor_type)}}function f(e){return e.fileLinkExpirationConfig||e.sourceFileLinkExpirationConfig}function E(e){return e.repo?.defaultFileKey===e.key}function y(e,r){if("loaded"!==e.status||!e.data.file)return _(r);let n=e.data.file,i=f(n),o=E(n),s=n.pwdConfig?.updatedAt||null,l=n.pwdConfig?.setByUser?(0,d.Um)(n.pwdConfig.setByUser):null;return{canEdit:n.canEdit,canEditCanvas:n.canEditCanvas,hasEditRole:n.hasEditRole,hasViewRole:n.hasViewRole,canView:n.canView,canViewPrototype:n.canViewPrototype,canViewPrototypeLinks:n.hasViewPrototypeRole,canMove:n.canMove,passwordSetAt:s,passwordSetByUser:l,isOwner:o?!!n.repo?.roleOnObjectForUser?.isOwnerOfResource:!!n.roleOnObjectForUser?.isOwnerOfResource,isPublishedHubFile:!!n.publishedHubFile&&!n.publishedHubFile.unpublishedAt,mainFileLinkExpirationConfig:(0,d.Nl)(i),folderAccessEnabled:n.folderAccessEnabled&&(0,a.oA)(n.folderAccessEnabled)||!1,isDraftFileLG:n.isDraftFile&&(0,a.oA)(n.isDraftFile)||!1,isAbandonedDraftFile:n.isAbandonedDraftFile||!1,mustUpgradeToShareDraft:(0,a.oA)(n.mustUpgradeToShareDraft)||!1,...(0,d.k9)(n)}}function b(e,r){if("loaded"!==e.status)return g(r);let n=e.data.file;if(!n)return g(r);let i=f(n),o=E(n),s=y(e,r),l={};n.repo&&n.repo.roles.forEach(e=>{e.userId&&(l[e.userId]=e)});let h={};n.project&&n.project.roles.forEach(e=>{e.userId&&(h[e.userId]=e)});let _={};n.team&&n.team.roles.forEach(e=>{e.userId&&(_[e.userId]=e)});let b={};(o?n.repo.roles:n.roles).forEach(e=>{let r=e.user?(0,d.Um)(e.user):null;if(r){let n=e.user?.orgUser||e.user?.guestOrgUser,a=l[r.id],i=_[r.id],o=h[r.id],s=e.user?.teamUser?{...e.user.teamUser,designPaidStatus:e.user.teamUser.designPaidStatus,whiteboardPaidStatus:e.user.teamUser.whiteboardPaidStatus}:null,c=(0,d.aU)(e,r,n||null,s||null);b[r.id]=c.pending?c:{...c,folderLevel:o?.level||null,teamLevel:i?.level||null,repoLevel:a?.level||null}}else e.pending&&(b[`pending-${e.id}`]=(0,d.aU)(e,null,null,null))});let I={};(0,m.zb)(r)&&n.fileSeenStates.forEach(e=>{let r=e.user?(0,d.Um)(e.user):null;if(r){let n=l[r.id],a=_[r.id],i=h[r.id],o=(0,d.WP)(e,r);I[o.user_id]={...o,folderLevel:i?.level||null,teamLevel:a?.level||null,repoLevel:n?.level||null}}});let v={};e.data.currentUser?.allBaseOrgUsers&&e.data.currentUser.allBaseOrgUsers.forEach(e=>{e.org&&(v[e.org.id]={})});let S=n.repo?{...(0,d.YT)(n.repo),canEdit:n.repo.canEdit,mainFileLinkExpirationConfig:(0,d.Nl)(i)}:null;if(T(i)){let e={link_access:i.prevPrivateLinkAccess,proto_link_access:i.prevPrivateProtoLinkAccess,org_browsable:i.prevOrgBrowsable};s={...s,...e},S&&(S={...S,...e})}let w=n.project?.orgDraftsFolderOwnerBaseOrgUser?{id:n.project.orgDraftsFolderOwnerBaseOrgUser.id,design_paid_status:n.project.orgDraftsFolderOwnerBaseOrgUser.accountType,whiteboard_paid_status:n.project.orgDraftsFolderOwnerBaseOrgUser.whiteboardPaidStatus||c.El.STARTER,user_id:n.project.orgDraftsFolderOwnerBaseOrgUser.userId,user:(0,d.Um)(n.project.orgDraftsFolderOwnerBaseOrgUser.user)}:null,A=n.project;var N=void 0;n.org&&null!==n.org.imgUrl&&(N=n.org.imgUrl);let C=n.org&&n.org.k12GoogleOrg&&(0,a.oA)(n.org.k12GoogleOrg);return{file:s,repo:S,rolesByUserId:b,fileSeenStatesByUserId:I,fileRoleRequests:n.fileRoleRequests,folder:A&&{name:A.path,is_view_only:!!A.viewOnlyAt,is_invite_only:!!A.inviteOnlyAt,team_id:A.teamId,team_access:"loaded"===A.teamAccess.status?A.teamAccess.data:null,canRead:A.canRead&&(0,a.oA)(A.canRead)||!1},folderRoles:A&&A.roles||[],isInDraftsFolder:(0,p.VA)(A),orgDraftsOwner:w,org:n.org?{id:n.org.id,name:n.org.name,img_url:N,domain_capture:!!n.org.domainCapture,workshop_enabled:!n.org.workshopDisabledAt,invite_whitelist_guest_invite_setting:n.org.inviteWhitelist?.guestInviteSetting,figjam_disabled_at:n.org.figjamDisabledAt,org_domains:(0,d.vy)(n.org.orgDomains),bigma_enabled:!!n.org.bigmaEnabledAt,k12_google_org:!!C}:null,orgUser:n.org?.currentBaseOrgUser?{id:n.org.currentBaseOrgUser.id,org_id:n.org.id,user_id:e.data.currentUser?.id,permission:n.org.currentBaseOrgUser.permission,license_group_member:n.org.currentBaseOrgUser.licenseGroupMember?{license_group_id:n.org.currentBaseOrgUser.licenseGroupMember.licenseGroupId}:void 0,design_paid_status:n.org.currentBaseOrgUser.designPaidStatus,whiteboard_paid_status:n.org.currentBaseOrgUser.whiteboardPaidStatus}:null,currentOrg:e.data.org?{domain_capture:!!e.data.org.domainCapture,id:e.data.org.id,invite_whitelist_guest_invite_setting:e.data.org.inviteWhitelist?.guestInviteSetting||null,figjam_disabled_at:e.data.org.figjamDisabledAt}:null,team:n.team?{id:n.team.id,name:n.team.name,img_url:n.team.imgUrl??void 0,subscription:n.team.subscription,student_team:!!n.team.studentTeamAt,grace_period_end:n.team.gracePeriodEnd?n.team.gracePeriodEnd.toISOString():null,canRead:n.team.canRead,org_access:n.team.orgAccess}:null,workspace:n.team?.workspace??null,orgs:v,dataLoaded:!0,currentUser:e.data.currentUser,sharedOrgLicenseGroupSetting:(0,d.Td)(n.org?{id:n.org.id,bigma_enabled:!!n.org?.bigmaEnabledAt}:null,n.org?.sharedOrgLicenseGroupSetting??e.data.org?.sharedOrgLicenseGroupSetting,n.team?.workspaceSharedSetting),editorType:(0,u.wN)(s.editor_type)}}function I(e,r){let n;let a=null,i=null;return"loaded"===e.status&&"loaded"===r.status?(n="loaded",a=o()(e.data,r.data)):"errors"===e.status||"errors"===r.status?(n="errors",i=o()(e.errors||[],r.errors||[])):n="loading",{status:n,data:a,errors:i}}let T=e=>{if(!e)return!1;let{accessReverted:r,expiresAt:n}=e;return!r&&!!n&&(0,s.A)().isAfter(n)};function v({startingPointNodeId:e,startingPointsData:r}){if(r&&r.length>1&&e){let n=r.find(r=>r.id===e);if(n)return(0,l.t)("permissions.copy_link_button.visual_bell.copy_prototype_link_name",{name:n.name})}return(0,l.t)("permissions.copy_link_button.visual_bell.copy_prototype_link")}function S(e){return!!(!e.canEdit&&e.viewer_export_restricted&&e.link_access===c.PQ.INHERIT)}},27703:(e,r,n)=>{n.d(r,{Cn:()=>c.C,Oi:()=>h,QZ:()=>p,RD:()=>u,Uj:()=>f,i4:()=>g,sR:()=>m,ud:()=>E,zb:()=>_});var a=n(188507),i=n(966712),o=n(514726),s=n(99506);n(802026),n(668860),n(389643);var l=n(984968),c=n(920037);function d(e,r){return!!r.fileByKey[e]?.trashed_at}function u(e,r){let n={};for(let a of e)!d(a,r)&&a in r.fileByKey&&(n[a]=r.fileByKey[a]);return n}function m(e,r){let n={};for(let a of e)a in r.fileByKey&&d(a,r)&&r.fileByKey[a].folder_id&&(n[a]=r.fileByKey[a]);return n}function p(e,r,n,a){if((0,i.kc)().ps_benchmark){if(a&&!r.parent_org_id&&r.parent_team&&!r.parent_team.subscription||a&&!r.parent_org_id&&!r.parent_team)return!1}else if(!r.team_id&&n)return!1;return e}function h(e,r,n){if(!e)return!r;if((0,i.kc)().ps_benchmark){if((0,l.PS)(e))return!0;if(n)return!1}return!0}function _(e){return!!e&&!e.parent_org_id&&(e.link_access===s.PQ.VIEW||e.link_access===s.PQ.EDIT)}function g(e){var r;return!!(r=o.F.toLiveGraph(e)).hasFileLinkPassword&&(r.linkAccess===s.PQ.VIEW||r.linkAccess===s.PQ.EDIT)}function f(e){return!!e.has_proto_link_password&&e.proto_link_access===s.Pu.VIEW}function E(){return(0,a.d4)(e=>e.fileByKey)}Date.parse("2021-04-21T15:00:00+0000")},749401:(e,r,n)=>{var a=n(801886);a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR},247368:(e,r,n)=>{n.d(r,{NY:()=>S,UY:()=>v,Vk:()=>h,Ye:()=>N,Z1:()=>C});var a=n(67151);n(414507);var i=n(431889),o=n(299321),s=n(966712);n(776621);var l=n(256520),c=n(202655),d=n(853069),u=n(801886),m=n(747202);let p="CustomImage",h=`type ${p} = {
  // always use the string "0"
  id: string
};`,_={typeName:"string"},g={typeName:"boolean"},f={typeName:"React.ReactNode"},E={typeName:p,referencedTypes:[{type:"IMAGE"}]};function y({component:e,parsedDefs:r}){let n=[],a=[];for(let e of(0,c.ep)(r)){e.typeRepr.referencedTypes&&a.push(...e.typeRepr.referencedTypes);let r=(0,c.GN)(e),i=(0,c.Hd)(e);r&&i&&n.push(`${r}: ${i}`)}return{typeName:(0,c.L_)(e.name),typeDefBody:`{${n.join("; ")}}`,prefixComments:function(e){let r=[];for(let n of(0,c.ep)(e)){let a=n.devFriendlyProp;if("ARRAY"===a.type&&(0,s.kc)().first_draft_ts_arrays){let n=0,i=0;for(let r of e)"ARRAY"===r.devFriendlyProp.type&&r.devFriendlyProp.key===a.key&&(n++,!r.isOptional&&i++);n===i?r.push(`@param ${a.key} - Specify ${n} items`):r.push(`@param ${a.key} - Specify between ${i} and ${n} items`)}}return r}(r),referencedTypes:a}}function b({component:e,rawProp:r}){let n=S(e),a=n.propsTypeRepr.typeName,{omit:i,pick:o}=(0,c.rB)(r);if((0,s.kc)().first_draft_inline_nested_props||n.parsedDefs.length>5&&o&&o.length<=2)return{typeName:y({component:e,parsedDefs:(0,c.ep)(n.parsedDefs).filter(e=>!(i&&i.includes((0,c.aX)(e.rawProp)))&&(!o||!!o.includes((0,c.aX)(e.rawProp))))}).typeDefBody??"{}",referencedTypes:[{type:"COMPONENT_INLINED",componentId:n.componentId}]};if(i){let e=[];for(let r of(0,c.ep)(n.parsedDefs))"key"in r.devFriendlyProp&&i.includes((0,c.aX)(r.rawProp))&&e.push(r.devFriendlyProp.key);let r=e.map(e=>`"${e}"`).join(" | ");a=`Omit<${a}, ${r}>`}if(o){let e=[];for(let r of(0,c.ep)(n.parsedDefs))"key"in r.devFriendlyProp&&o.includes((0,c.aX)(r.rawProp))&&e.push(r.devFriendlyProp.key);let r=e.map(e=>`"${e}"`).join(" | ");a=`Pick<${a}, ${r}>`}return{typeName:a,referencedTypes:[{type:"COMPONENT",componentId:n.componentId}]}}let I={},T={};function v(){I={},T={}}function S(e){try{if(!I[(e=e.isState?e.parentNode:e).guid]){let r=w(e);I[e.guid]=r,T[r.key]=r}return I[e.guid]}catch(e){throw e}}function w(e){let r=(0,c.WG)(e.name),n=function(e){let r=function(e){let r=e.componentPropertyDefinitions(),n=Object.keys(r);n.reverse();let a=[];for(let e of n){let n=r[e];if("INSTANCE_SWAP"===n.type){let r=(0,m.Ny)(n.defaultValue);if(r&&"SYMBOL"===r.type){if("Slot"===r.name){a.push({rawProp:e,def:{type:"SLOT"}});continue}if(r.isSubscribedAsset){a.push({rawProp:e,def:{type:"GROUPED_INSTANCE_SWAP",defaultValue:r.guid,groupName:d.$x}});continue}{let n=S(r),i=(0,d.vR)(n);if(i){a.push({rawProp:e,def:{type:"GROUPED_INSTANCE_SWAP",defaultValue:r.guid,groupName:i}});continue}}}}a.push({rawProp:e,def:n})}let i=(0,c._j)(e);for(let[e,r]of Object.entries((0,c._e)(i,"IMAGE"))){let n={};for(let[e,a]of Object.entries(r.tagsByParentComponentId))n[e]={background:"normal"},"true"===a.transparent&&(n[e].background="transparent"),"true"===a.segment&&(n[e].background="segment"),a.desc&&(n[e].desc=a.desc),a.prompt&&(n[e].prompt=a.prompt);a.push({rawProp:e,def:{type:"IMAGE",guidByParentComponentId:r.guidByParentComponentId,tagsByParentComponentId:n}})}let o=(0,m.g5)(e.guid).filter(e=>!(e.isInstanceSublayer||!e.isBubbled||e.componentPropertyReferences()?.mainComponent));for(let[e,r]of Object.entries((0,c._e)(o,"NESTED_INSTANCE"))){let n=r.componentIdOrNull;if(!n)continue;let i={};for(let[e,a]of Object.entries(r.tagsByParentComponentId)){i[e]={};let r={};if(a.fixed){let o=(0,m.Ny)(n);if(o){let n=S(o),s=a.fixed?.split(",").map(e=>e.trim())??[];for(let e of n.parsedDefs)if("key"in e.devFriendlyProp&&"VARIANT"===e.def.type){let n=e.devFriendlyProp.key;("true"===a.fixed||s.includes(n))&&(r[n]=!0)}i[e].fixedVariantProperties=r}}}let o={type:"NESTED_INSTANCE",componentId:n,tagsByParentComponentId:i,guidByParentComponentId:r.guidByParentComponentId};a.push({rawProp:e,def:o})}let s={};for(let e of a){if(s[e.rawProp]){console.error("Unexpected repeated rawProp value",{rawProp:e.rawProp});continue}s[e.rawProp]=e}return s}(e);for(let e of(0,c.go)(r))for(let r=0;r<e.length;r++){let n=e[r];n.usagePropOverride=(0,c.fy)({index:r,rawProp:n.rawProp})}let n={},i={},s={},l={},u=new Set;for(let[p,h]of Object.entries(r)){let r=(0,c.aX)(h.usagePropOverride??p);u.has(r)&&(r=(0,c.R0)({usageProp:r,usedUsageProps:u}));let y=h.def,I=function({component:e,rawProp:r,definition:n}){switch(n.type){case"TEXT":return _;case"BOOLEAN":return g;case"SLOT":return f;case"IMAGE":return E;case"VARIANT":return{typeName:(0,c.Vv)({component:e,rawProp:r}),typeDefBody:n.variantOptions?.map(e=>`"${e}"`).join(" | ")??"null"};case"GROUPED_INSTANCE_SWAP":return{typeName:(0,d.VV)(n.groupName),typeDefBody:"{description: string}",prefixComments:["@param description - Specify a 1 sentence description"]};case"INSTANCE_SWAP":{if(n.preferredValues&&0!==n.preferredValues.length&&n.preferredValues.length<10){let a=(0,c.Vv)({component:e,rawProp:r}),i=[],s=[];for(let e of n.preferredValues){let r=function(e){if(T[e])return T[e];let r=o.XJn.getComponentByAssetKey(e)||o.XJn.getStateGroupByAssetKey(e);return r?N(r):null}(e.key);r&&(i.push(r.jsxName),s.push({type:"COMPONENT_JSX",componentId:r.componentId}))}if(0!==i.length)return{typeName:a,typeDefBody:`ReactElement<any, ${i.join(" | ")}>`,referencedTypes:s}}let a=(0,m.Ny)(n.defaultValue);if(a&&"SYMBOL"===a.type)return b({component:a,rawProp:r});break}case"NESTED_INSTANCE":{let e=n.componentId,a=(0,m.Ny)(e);if(a&&("SYMBOL"===a.type||a.isStateGroup))return b({component:a,rawProp:r});break}default:(0,a.xb)(n)}return null}({component:e,rawProp:p,definition:y});if(I){u.add(r),s[p]=r;let e=I.typeName;l[e]=l[e]||[],l[e].push(r);let o={def:y,devFriendlyProp:function({usageProp:e,rawProp:r,definition:n}){let i={key:e};switch((0,c.aX)(r)!==e&&(i.originalKey=(0,c.aX)(r)),n.type){case"VARIANT":return{type:"SIMPLE_CHOICE",validOptions:n.variantOptions??[],valueType:"STRING",...i};case"INSTANCE_SWAP":case"NESTED_INSTANCE":case"SLOT":return{type:"SIMPLE",valueType:"OBJECT",...i};case"BOOLEAN":return{type:"SIMPLE",valueType:"BOOLEAN",...i};case"TEXT":return{type:"SIMPLE",valueType:"STRING",...i};case"IMAGE":return{type:"IMAGE",valueType:"OBJECT",...i};case"GROUPED_INSTANCE_SWAP":{let e=(0,m.Ny)(n.defaultValue);if(!e||"SYMBOL"!==e.type)return{type:"SIMPLE",valueType:"UNKNOWN",...i};return{type:"GROUPED_INSTANCE_SWAP",groupName:n.groupName,valueType:"OBJECT",...i}}default:(0,a.xb)(n)}}({usageProp:r,rawProp:p,definition:y}),componentId:(0,c.O7)(y),isOptional:(0,c.QJ)(p),rawProp:p,typeRepr:I};i[p]=o,n[r]=o}}for(let e of Object.values(l))for(let[r,a]of Object.entries((0,c.hM)(e)))if((0,c.xb)(a.map(e=>n[e])))for(let e=0;e<a.length;e++){let i=a[e],o=n[i].devFriendlyProp,s={type:"ARRAY",key:r,index:e,nonArrayKey:"key"in o?o.key:"",valueType:o.valueType};"originalKey"in o&&(s.originalKey=o.originalKey),n[i].devFriendlyProp=s}let p=Object.keys(n),h=[],y={};for(let e of p){let r=n[e].devFriendlyProp;if("DERIVED_BOOLEAN"!==r.type)switch(r.type){case"SIMPLE":case"SIMPLE_CHOICE":case"IMAGE":case"GROUPED_INSTANCE_SWAP":y[e]=r;break;case"ARRAY":y[e]=r,y[r.key]={type:"SIMPLE",key:r.key,valueType:r.valueType};break;default:(0,a.xb)(r)}}for(let e of p){let r=n[e];if("SIMPLE"===r.devFriendlyProp.type){let n="Visible";if(e.endsWith(n)){let a=e.slice(0,-n.length);a&&y[a]&&(r.devFriendlyProp={type:"DERIVED_BOOLEAN",valueType:"BOOLEAN",devFriendlyProp:y[a]})}}h.push(r)}return h.sort(c.Ho)}(e),i=y({component:e,parsedDefs:n}),s=`type ${r} = React.FC<${i.typeDefBody??"{}"}>`,p=(0,c.yu)(e.guid),I=(0,c.Se)(p,c.vh),v=(0,d.iR)(p),w=I?u.I5.BUILDING_BLOCK:v?u.I5.GROUPED_COMPONENT:u.I5.NONE,C=I?c.vh:v??void 0,L=(0,m.Uk)(e),O="SYMBOL"===e.type?e.guid:(0,l.l)(e).guid,R=w===u.I5.GROUPED_COMPONENT?o.Egt.getAssetKeyForPublish(O):o.Egt.getAssetKeyForPublish(e.guid);return{componentId:e.guid,name:e.name,defaultNodeId:O,jsxName:r,componentGroupPath:p,groupName:C,componentType:w,defs:e.componentPropertyDefinitions(),parsedDefs:n,prefixTypes:function(e){let r={},n=(e,n)=>{e in r&&(e=(0,c.R0)({usageProp:e,usedUsageProps:new Set(Object.keys(r))})),r[e]=n};for(let r of(0,c.ep)(e)){let e=r.devFriendlyProp;if("DERIVED_BOOLEAN"===e.type||"ARRAY"===e.type&&0!==e.index)continue;!function(e,r,n){if(r.referencedTypes)for(let i of r.referencedTypes)switch(i.type){case"IMAGE":n(e,h);break;case"COMPONENT_JSX":{let r=(0,m.Ny)(i.componentId);if(r){let a=S(r);for(let[r,i]of Object.entries(a.prefixTypes))n(`${e}${(0,c.bi)(r)}`,i);n(e,a.typeStr)}break}case"COMPONENT_INLINED":case"COMPONENT":{let r=(0,m.Ny)(i.componentId);if(r){let a=S(r);for(let[r,i]of Object.entries(a.prefixTypes))n(`${e}${(0,c.bi)(r)}`,i);if("COMPONENT"===i.type){let r=A(a.propsTypeRepr);r&&n(e,r)}}break}default:(0,a.xb)(i)}}(e.key,r.typeRepr,n);let i=A(r.typeRepr);if(i){n(e.key,i);continue}}return r}(n),prefixComments:i.prefixComments??[],typeStr:s,propsTypeRepr:i,description:e.description,key:R,version:L,typeInfoVersion:u.Od}}function A(e){let r=[];if(e.typeDefBody){if(e.prefixComments?.length){for(let n of(r.push("/**"),e.prefixComments))r.push(` * ${n}`);r.push(" */")}return r.push(`type ${e.typeName} = ${e.typeDefBody};`),r.join("\n")}return null}function N(e){let r=(0,i.c)(e);return r?r.isState?S(r.parentNode):S(r):null}function C(e){let r=(0,i.c)(e);return r?r.isState?w(r.parentNode):w(r):null}},202655:(e,r,n)=>{n.d(r,{Cb:()=>O,GN:()=>Y,Hd:()=>$,Ho:()=>K,Ii:()=>b,L_:()=>L,O7:()=>k,QJ:()=>A,R0:()=>x,Se:()=>f,VN:()=>V,Vv:()=>N,WG:()=>C,__:()=>P,_e:()=>T,_j:()=>H,aX:()=>g,bi:()=>z,ep:()=>j,fy:()=>I,go:()=>U,hM:()=>R,i2:()=>h,lS:()=>_,rB:()=>v,tJ:()=>B,vh:()=>p,wn:()=>F,xb:()=>M,yu:()=>D});var a=n(67151),i=n(431889),o=n(904669),s=n(758271),l=n.n(s),c=n(966712),d=n(776621),u=n(599015),m=n(747202);let p="Building Blocks",h="Presets",_="\u2726/";function g(e){return function(e){let r=e.match(/^\d+/),n=e;if(r&&r.length>0){let e=r[0];n=n.replace(e,"")+e}return n}(e=(e=O(e=w(e=function(e){e.endsWith("?")&&(e=e.substring(0,e.length-1));let r=e.indexOf("{");return -1!==r&&(e=e.substring(0,r)),e}(e=S(e))))).replace(/[^0-9a-z]/gi,""))}function f(e,r){for(let n of e.split(" / "))if((0,m.n6)(n,r))return!0;return!1}let E=/\[(\w+)(\: ?([^\[\]]+))?\]/,y=RegExp(`(${E.source})*$`),b=new RegExp(/^Image ?(\(.+\))?/.source+y.source);function I({index:e,rawProp:r}){let[n,a]=r.split("#");if(!n||!a)throw Error(`Unexpected rawProp format: ${r}`);let i=g(n);return i.match(/\d+$/)&&(i=i.replace(/\d+$/,"")),[`${i} ${e+1}`,a].join("#")}function T(e,r){let n={},a={},i={};for(let r of e){let e=r.guid,o=(0,m.j_)(e);o&&(a[e]=r,i[e]=o,n[o]=n[o]||[],n[o].push(e))}let o=new Set,s={};for(let e of Object.values(n)){let r=new Set;for(let n of e){let e=a[n];if(!e)continue;let i=g(e.name);r.has(i)&&(i=x({usageProp:i,usedUsageProps:r})),r.add(i),o.add(i),s[n]=i}}let l={};for(let n of e){let e=i[n.guid],a=s[n.guid];if(e&&a){let i=null,o=a;if("NESTED_INSTANCE"===r){if("INSTANCE"!==n.type){(0,d.xi)("getComponentInfoHelpers","Expected node type to be INSTANCE",{nodeType:n.type});continue}if(!(i=(0,m.yu)(n))){(0,d.xi)("getComponentInfoHelpers","Could not find mainComponent for instance",{nodeId:n.guid});continue}o+="/"+i}let s=function(e,r){let n=e.replace(/#/g,"");return[n=w(n),r].join("#")}(n.name,o);l[s]||(l[s]={componentIdOrNull:i,guidByParentComponentId:{},tagsByParentComponentId:{}}),l[s].guidByParentComponentId[e]=n.guid;let c=function(e){let r=S(e),n=y.exec(r)?.[0];return n?Object.fromEntries(n.match(RegExp(E,"g"))?.map(e=>{let r=E.exec(e);return r?[r[1],r[3]||"true"]:[]}).filter(e=>2===e.length)||[]):{}}(n.name);Object.keys(c).length>0&&(l[s].tagsByParentComponentId[e]=c)}}return l}function v(e){let r=e.match(/\{(.+)\}/);if(!r)return{};let n=r[1].split(",");return n[0].startsWith("-")?{omit:n.map(e=>e.replace("-",""))}:{pick:n}}function S(e){let[r]=e.split("#");return r}function w(e){let r=y.exec(e);return r?.[0]?e.replace(r[0],"").trim():e}function A(e){return S(e).endsWith("?")}function N({component:e,rawProp:r}){let n=g(r);return(0,m.Sn)(e.name)+(0,m.Sn)(n)}function C(e){return(0,m.Sn)(e,"Component")}function L(e){return(0,m.Sn)(e)+"Props"}function O(e){return e.replace(/[^0-9a-z]/gi," ").split(" ").map((e,r)=>0===r?e.charAt(0).toLowerCase()+e.substr(1):(0,m.Sn)(e)).join("")}function R(e){let r={};if(!Array.isArray(e)||e.length<2)return r;let n=e.map(g);for(let a=0;a<n.length;a++){let i=n[a].replace(/\d+$/,"");r[i]||(r[i]=[]),-1===r[i].indexOf(e[a])&&r[i].push(e[a])}let a={};for(let e in r){let n=r[e].sort((e,r)=>{let n=e.match(/\d+$/),a=r.match(/\d+$/);return n&&a?parseInt(n[0],10)-parseInt(a[0],10):e.localeCompare(r)}),i=function(e){if(!Array.isArray(e)||e.length<2)return null;let r=e[0].replace(/\d+$/,"");for(let n=0;n<e.length;n++)if(!e[n].startsWith(r)||parseInt(e[n].slice(r.length))!==n+1)return null;return r+"s"}(n);i&&(a[i]=n)}return a}function P({rootNodes:{includeSelection:e,dsKitKey:r,pageChildrenName:n}={}}){let a=(0,m.lI)();if(r?.type==="LOCAL"?a=(0,m.Ny)(r.pageId)??a:r?.type==="LIBRARY"&&(a=(0,o.UN)().getInternalCanvas()??a),!a||"CANVAS"!==a.type)return[];let i=[];if(e&&i.push(...a.directlySelectedNodes),n)for(let e of a.reversedChildrenNodes)(0,m.n6)(e.name,n)&&i.push(e);else i.push(a);return i}function D(e){let r=(0,m.Ny)(e);if(!r)return"";let n=[],a=r.parentNode;for(;a&&(("CANVAS"===a.type||"SECTION"===a.type)&&n.push(a.name),"CANVAS"!==a.type&&"DOCUMENT"!==a.type);)a=a.parentNode;return n.reverse(),n.join(" / ")}function k(e){return"INSTANCE_SWAP"===e.type&&"string"==typeof e.defaultValue?e.defaultValue:"NESTED_INSTANCE"===e.type?e.componentId:null}function M(e){if(0===e.length)return!0;let r=e[0],n=k(r.def);return e.every(e=>r.def.type===e.def.type&&n===k(e.def))}function F(e,r){let n=[];for(let a of(0,m.g5)(e))!a.isInstanceSublayer&&(("SLOT"===r.def.type||"INSTANCE_SWAP"===r.def.type||"GROUPED_INSTANCE_SWAP"===r.def.type)&&a.componentPropertyReferences()?.mainComponent===r.rawProp&&n.push(a.guid),"NESTED_INSTANCE"===r.def.type&&a.isBubbled&&Object.values(r.def.guidByParentComponentId).includes(a.guid)&&r.def.componentId===(0,m.yu)(a)&&n.push(a.guid));return 0===n.length&&(0,d.xi)("first-draft","Could not find any instances for this prop",{componentId:e,def:JSON.stringify(r.def)}),n}function x({usageProp:e,usedUsageProps:r}){if(!r.has(e))return e;let n=e.match(/^(.*?)(\d*)$/),a=n?n[1]:e,i=1;return r.forEach(e=>{if(e.startsWith(a)){let r=parseInt(e.slice(a.length),10);!isNaN(r)&&r>i&&(i=r)}}),`${a}${i+1}`}function U(e){let r={};for(let n of Object.keys(e)){let e=g(n);r[e]=r[e]||[],r[e].push(n)}let n=[];for(let a of Object.values(r)){let r=function(e){if(e.length<3)return[];let r=e[0];if(!r||!("guidByParentComponentId"in r.def)||!M(e))return[];let n={};for(let r of e){if(!("guidByParentComponentId"in r.def))return[];for(let e of Object.keys(r.def.guidByParentComponentId))n[e]=n[e]||[],n[e].push(r)}let a=null;for(let[r,i]of Object.entries(n))if(i.length===e.length){a=r;break}if(!a)return[];let i={};for(let r of e){if(!("guidByParentComponentId"in r.def))return[];let e=r.def.guidByParentComponentId[a];if(!e)return[];i[e]=r}let o={};for(let e of Object.keys(i)){let r=(0,m.Ny)(e),n=r?.parentNode;for(;n&&"NONE"!==n.stackMode&&(o[n.guid]=o[n.guid]||[],o[n.guid].push(e),n?.type!=="SYMBOL");)n=n.parentNode}let s=Object.entries(o);for(let[e,r]of(s.sort((e,r)=>r[1].length-e[1].length),s)){if(r.length<3)continue;let n=new Set(r);return(0,m.Au)(e,["INSTANCE"]).filter(e=>n.has(e.guid)).map(e=>i[e.guid])}return[]}(a.map(r=>e[r]));r.length<3||n.push(r)}return n}function B(e,r){return(0,i.B)(e,r)}function V(e){let r=(0,o.UN)().get(e),n=r?.childrenNodes.find(e=>m.n6(e.name,p)),a=n?.childrenNodes.filter(e=>u.Gs(e))??[];return l()(a.map(e=>{if(e.symbolId){let r=(0,o.UN)().get(e.symbolId);if(r)return r.isState?r.parentNode:r}return null}).filter(Boolean),e=>e.guid)}let G=e=>b.test(e.name)&&!(0,m.oJ)(e);function H(e){let r=(0,m.Au)(e.guid,["FRAME","INSTANCE"]).filter(G);return G(e)&&r.push(e),r}function W(e){switch(e){case"VARIANT":return 0;case"TEXT":return 1;case"BOOLEAN":return 2;case"INSTANCE_SWAP":return 3;case"GROUPED_INSTANCE_SWAP":return 4;case"IMAGE":return 5;case"NESTED_INSTANCE":return 6;default:return 7;case"SLOT":return 8}}function K(e,r){let n=W(e.def.type),a=W(r.def.type);return n!==a?n-a:"ARRAY"===e.devFriendlyProp.type&&"ARRAY"===r.devFriendlyProp.type?e.devFriendlyProp.index-r.devFriendlyProp.index:0}function Y(e,r=!0){let n=e.devFriendlyProp,i=r&&e.isOptional?"?":"";switch(n.type){case"SIMPLE":case"SIMPLE_CHOICE":case"IMAGE":case"GROUPED_INSTANCE_SWAP":return`${n.key}${i}`;case"ARRAY":if((0,c.kc)().first_draft_ts_arrays)return`${n.key}${i}`;return`${n.nonArrayKey}${i}`;case"DERIVED_BOOLEAN":return"";default:(0,a.xb)(n)}}function $(e){switch(e.devFriendlyProp.type){case"DERIVED_BOOLEAN":return"";case"SIMPLE":case"SIMPLE_CHOICE":case"IMAGE":case"GROUPED_INSTANCE_SWAP":return e.typeRepr.typeName;case"ARRAY":if((0,c.kc)().first_draft_ts_arrays){if(e.typeRepr.typeName.startsWith("{"))return`(${e.typeRepr.typeName})[]`;return`${e.typeRepr.typeName}[]`}return e.typeRepr.typeName;default:(0,a.xb)(e.devFriendlyProp)}}function j(e){let r=[],n=new Set;for(let a of e){let e=Y(a,!1);!e||n.has(e)||(r.push(a),n.add(e))}return r}function z(e){return e.length&&e[0]?e[0].toUpperCase()+e.slice(1):e}},853069:(e,r,n)=>{n.d(r,{$x:()=>l,C:()=>o,PJ:()=>m,VV:()=>c,iR:()=>u,vR:()=>d});var a=n(202655),i=n(747202);let o="Icons",s=[o],l="Unknown";function c(e){return m(e)}function d(e){return u(e.componentGroupPath)}function u(e){for(let r of s)if((0,a.Se)(e,r))return r;return null}function m(e){return e=e.endsWith("s")?e.slice(0,e.length-1):e,`Custom${(0,i.Sn)(e)}`}},503796:(e,r,n)=>{n.d(r,{hP:()=>_,zD:()=>f}),n(411855),n(465824);var a=n(621840),i=n(275556),o=n(966712),s=n(939863),l=n(184601),c=n(15859);n(198868);var d=n(118034);n(518583),n(55069);var u=n(479296);n(558409);var m=n(747202);let p=(0,o.ck)("ea5973fed84d89957eddd325cdb8549719adbc15"),h=e=>({prompt:e.description,negativePrompt:"blurry, bad",cfgScale:8,seed:Math.floor(1e4*Math.random()),height:e.size.height,width:e.size.width,numImages:1}),_=(0,u.n)(async(e,r,n=!1)=>{let a=(0,m.Lp)({clientLifecycleId:r}),i=(await l.Ay.design.generateImages({...h(e),markUserAction:n},a)).images[0];return`data:image/png;base64,${i}`});async function g({node:e,base64:r,name:n,scaleMode:o,backgroundFill:s,shouldContinueStream:l}){if(!e.isAlive)return;let u=await (0,d.xF)(r,["*"]),m=await (0,c.UD)(u,"image/png",n);if(!e.isAlive||!l())return;let p=[...e.fills];i.l7.ai("first-draft-set-image-fill",()=>{e.insertImageInFillPaint(m)});let h=e.fills[p.length],_=(0,a.B9)(h.image?.hash||[]);return i.l7.ai("first-draft-set-image-fill",()=>{h.imageScaleMode=o,e.fills=function(e,r){let n=e.findIndex(e=>"IMAGE"===e.type);return n>=0?e.map((e,a)=>a===n?r:e).flat():r}(p,s?[s,h]:[h]),e.name=n}),_}async function f({node:e,shouldContinueStream:r=()=>!0}){await g({node:e,base64:p,shouldContinueStream:r,name:(0,s.t)("ai_image_tools.blocked"),scaleMode:"FIT",backgroundFill:{type:"SOLID",color:{r:1,g:1,b:1,a:1},visible:!0,opacity:1,blendMode:"NORMAL"}})}async function E(e){let r=document.createElement("canvas"),n=r.getContext("2d");await new Promise((a,i)=>{let o=new Image;o.onload=function(){r.width=o.naturalWidth,r.height=o.naturalHeight,n.drawImage(o,0,0),a()},o.onerror=i,o.src=e});let a=r.width,i=r.height,o=n.getImageData(0,0,a,i),s=0,l=i,c=0,d=a,u=(e,r)=>0===o.data[r*a*4+4*e+3],m=e=>{for(let r=c;r<d;r++)if(!u(r,e))return!1;return!0},p=e=>{for(let r=s;r<l;r++)if(!u(e,r))return!1;return!0};for(;s<l&&m(s);)s++;for(;l-1>s&&m(l-1);)l--;for(;c<d&&p(c);)c++;for(;d-1>c&&p(d-1);)d--;let h=n.getImageData(c,s,d-c,l-s),_=r.ownerDocument.createElement("canvas");return _.width=h.width,_.height=h.height,_.getContext("2d").putImageData(h,0,0),_.toDataURL()}},207204:(e,r,n)=>{n(465824);var a=n(414507),i=n(299321),o=n(275556);n(496450);var s=n(904669),l=n(38329);n(966712);var c=n(776621),d=n(27087),u=n(44892);n(457630);var m=n(707465),p=n(640209),h=n(479296);n(247368);var _=n(853069);n(503796);var g=n(747202);function f(e,r,n){let a;let s=(0,g._F)(e,["FRAME","INSTANCE"]);a="LOCAL"===r.type?{type:i.AZ4.LOCAL,key:i.XJn.getKitKey(r.pageId)||""}:{type:i.AZ4.LIBRARY,key:r.key},o.l7.ai("first-draft-set-native-field",()=>{for(let e of s)e.firstDraftData={generationId:n??"",kit:a}})}(0,h.n)(async function({dsKit:e,instanceNode:r,iconDescription:n,clientLifecycleId:l}){let d;if(!r.symbolId)return;let m=(0,s.UN)(),h=m.get(r.symbolId);if(!h)return;let{key:g,version:E}=(await p.Gh.getFirstDraftMatchGroup({kit_key:e.key,is_local:!1,group_name:_.C,description:n})).data.meta;if(!g){(0,c.$D)(a.FigmaTeam.AI_GENERATION,Error("first-draft: Grouped components: Could not find component for grouped component"),{extra:{dsKit:e,iconDescription:n,mainComponentId:h.guid}});return}let y=E?`/component/${g}/canvas?ver=${E}`:`/component/${g}/canvas`;if(!(d=await u.Eo.getCanvas({canvas_url:y})))return;let b=i.NfO.deserializeProductComponentFromBuffer(g,d),I=m.get(b);I&&"SYMBOL"===I.type&&o.l7.ai("first-draft-swap-grouped-component",()=>{r.swapComponent(I),f(r,e,l)})});(0,h.n)(async function(e,r){let n=(0,m.U2)(l.D?.getState().selectedView),a=await d.Ay.post(`/api/first_draft/kit_contents/${e.key}/detach_info`,{keys:r,file_key:n});return a.data?.meta?.should_detach??[]})},286374:(e,r,n)=>{n.d(r,{Py:()=>w,gZ:()=>v});var a=n(263325),i=n(67151),o=n(431889),s=n(904669),l=n(966712),c=n(247368),d=n(202655),u=n(853069),m=n(801886),p=n(747202),h=n(198467),_=n(667507),g=n(207063);function f(e){return e.classPropName??"className"}function E(e){if("INSTANCE"===e.type&&e.symbolId){let r=(0,c.Ye)(e.symbolId);if(r?.jsxName)return r.jsxName}let r=e.getSharedPluginData("jsx","type");return r&&"HStack"!==r&&"VStack"!==r?r:null}function y(e,r){let n={};if(!r.skipNodeIds&&(!r.skipNodeIdsWithoutType||E(e))&&(n.id=(0,s.UN)().developerFriendlyIdFromGuid(e.guid)),r.includeName&&(n.name=e.name),r.includeType&&!("INSTANCE"===e.type&&!r.detachInstances)){let r=E(e);r&&(n.type=r)}if("DEFINITION"===r.componentUsageOrDefinition&&r.componentDefinitionTypeInfo){let a=e.componentPropertyReferences();if(a&&"visible"in a){let e=a.visible,i=r.componentDefinitionTypeInfo.parsedDefs.find(r=>r.rawProp===e);i&&(n.visible=`{${T(i.devFriendlyProp)}}`)}}return n}let b=["SYMBOL","INSTANCE","FRAME","GROUP","SECTION","RECTANGLE","ELLIPSE","LINE"];function I(e,r){let n=y(e,r);n.type=e.type;let i=(0,a.Ed)(e,{...m.LW,position:!0,size:!0});return i.length&&(n[f(r)]=i.join(" ")),`<Unhandled ${(0,_.d)(n)} />`}function T(e){let r="DERIVED_BOOLEAN"===e.type?e.devFriendlyProp:e,n=r.key;if("index"in r){if(!(0,l.kc)().first_draft_ts_arrays)return r.nonArrayKey;n+=`[${r.index}]`}return"DERIVED_BOOLEAN"===e.type?`!!${n}`:n}function v(e,r){return function(e,r={},n={includePropsType:!1},a){if(!("SYMBOL"===e.type||e.isStateGroup))throw Error(`Expected SYMBOL or isStateGroup, got: ${e.type}`);let o=a??(0,c.Ye)(e.guid);if(!o)throw Error(`Could not find typeInfo for node: ${e.guid}`);let s=Object.values(o.prefixTypes),u={...r,componentUsageOrDefinition:"DEFINITION",componentDefinitionTypeInfo:o},m=new g.f,_=o.parsedDefs.map(e=>"DERIVED_BOOLEAN"===e.devFriendlyProp.type?"":"SIMPLE_CHOICE"===e.devFriendlyProp.type?"VARIANT"===e.def.type&&"defaultValue"in e.def?`${e.devFriendlyProp.key} = ${JSON.stringify(e.def.defaultValue)}`:e.devFriendlyProp.key:"GROUPED_INSTANCE_SWAP"===e.devFriendlyProp.type||"IMAGE"===e.devFriendlyProp.type?e.devFriendlyProp.key:"SIMPLE"===e.devFriendlyProp.type?"defaultValue"in e.def?`${e.devFriendlyProp.key} = ${JSON.stringify(e.def.defaultValue)}`:e.devFriendlyProp.key:"ARRAY"===e.devFriendlyProp.type?(0,l.kc)().first_draft_ts_arrays?0!==e.devFriendlyProp.index?"":e.devFriendlyProp.key:e.devFriendlyProp.nonArrayKey:void(0,i.xb)(e.devFriendlyProp)).filter(Boolean);if(n.includePropsType?(_.length>0&&o.propsTypeRepr.typeDefBody&&(m.append(`type ${o.jsxName}Props = `),m.append((0,h.CT)(o.propsTypeRepr.typeDefBody)),m.newline()),m.append(`function ${o.jsxName}(`),_.length>0&&(m.append(`{ ${_.join(", ")} }`),m.append(`: ${o.jsxName}Props`)),m.append(") {")):(m.append(`const ${o.jsxName}: React.FC<${o.propsTypeRepr.typeDefBody??"{}"}> = (`),_.length>0&&m.append(`{${_.join(", ")}}`),m.append(") => {")),m.newline(),"SYMBOL"===e.type)m.append(u.formatJSX?(0,h.uG)(S(e,u)):`  return ${S(e,u)}`),m.newline(),m.append("}");else if(e.isStateGroup){let r=!0;for(let n of(0,p.Au)(e.guid,["COMPONENT"])){if("SYMBOL"!==n.type)continue;let e=n.variantProperties();e&&(r&&u.formatJSX&&m.append(h.BH),r||m.append(" else "),m.append("if ("),m.append(Object.entries(e).map(([e,r])=>`${(0,d.Cb)(e)} === ${JSON.stringify(r)}`).join(" && ")),m.append(") {"),u.formatJSX?(m.newline(),m.append((0,h.C5)((0,h.uG)(S(n,u)),h.BH)),m.newline(),m.append(`${h.BH}}`)):(m.append(`    return ${S(n,u)}`),m.newline(),m.append("}")),r=!1)}u.formatJSX?(m.newline(),m.append(`${h.BH}return null`)):m.append("  return null;"),m.newline(),m.append("}")}return{nodeId:e.guid,prefixTypes:u.formatJSX?s.map(e=>(0,h.S3)(e)):s,jsxStr:m.toString()}}(e,{skipNodeIds:!0,autoLayoutTagName:"div",frameTagName:"div",tailwindOptions:{size:!0,position:!0,flex:!0,radius:!1,color:!1,typography:!1},formatJSX:!0},{includePropsType:!0},r)}function S(e,r){if("SYMBOL"!==e.type)throw Error(`Unexpected node type: ${e.type}`);return w(e,{...r,parentComponentId:e.guid,tailwindOptions:r.tailwindOptions?{...r.tailwindOptions,position:!1}:{position:!1}})||"null"}function w(e,r){if(!1===e.visible)return null;let n={indent:"",...r},i=[];switch(e.type){case"INSTANCE":case"SYMBOL":case"SECTION":case"GROUP":case"FRAME":{if("INSTANCE"===e.type&&!n.detachInstances){i.push(`${n.indent}${function(e,r){if("INSTANCE"!==e.type)throw Error(`Expected INSTANCE, got ${e.type} for node ${e.guid}`);if(!e.symbolId)throw Error(`INSTANCE has no symbolId ${e.guid}`);let n=(0,c.Ye)(e.symbolId);if(!n)throw Error(`Could not get typeInfo for component ${e.symbolId}`);let i=y(e,r);if(!r.skipClassNames){let n=(0,a.Ed)(e,{...m.LW,position:!0});n.length&&(i[f(r)]=n.join(" "))}let h=(0,u.vR)(n);if(h&&e.symbolId){let r=(0,p.So)(e.symbolId,"SYMBOL");return Object.assign(i,(0,p.Kp)(h,r)),`<${(0,u.PJ)(h)} ${(0,_.d)(i)}/>`}Object.assign(i,function e(r){if(!r.symbolId)return{};let n=(0,c.Ye)(r.symbolId);if(!n)throw Error(`Could not find mainComponent for node ${r.guid}`);let a={};for(let[e,n]of Object.entries(r.componentProperties()))a[(0,d.aX)(e)]=n;let i={},u={};for(let e of n.parsedDefs){if("DERIVED_BOOLEAN"===e.devFriendlyProp.type||"ARRAY"===e.devFriendlyProp.type&&"NESTED_INSTANCE"!==e.def.type)continue;let n=e.devFriendlyProp.key;if(n in a){if("SIMPLE"===e.devFriendlyProp.type){let r=a[n].value;e.def.defaultValue!==r&&(u[n]=r);continue}if("SIMPLE_CHOICE"===e.devFriendlyProp.type){let r=e.devFriendlyProp.validOptions;if("INSTANCE_SWAP"===e.def.type){let e=(0,o.c)(a[n].value);if(!e)throw Error("Could not find component for componentProp");if("SYMBOL"===e.type){let a=Object.values(e.variantProperties??{})[0];-1!==r.indexOf(a)?u[n]=a:console.error(`Could not find ${a} in ${JSON.stringify(r)}`)}continue}if("VARIANT"===e.def.type){let e=a[n].value;-1!==r.indexOf(e)?u[n]=e:console.error(`Could not find ${e} in ${JSON.stringify(r)}`)}}}if("IMAGE"===e.def.type){let a=e.def.guidByParentComponentId[r.symbolId];if(a){let e=(0,p.uN)(r.guid,a);if(e){let r=(0,s.UN)().get(e),a=r?A(r):null;a&&(u[n]={description:a})}}}else if("NESTED_INSTANCE"===e.def.type)for(let r of Object.values(e.def.guidByParentComponentId))i[r]=e}let m=(0,s.UN)().developerFriendlyIdFromGuid(r.guid),h=m.startsWith("I")?`${m};`:`I${m};`;for(let n of(0,p.g5)(r.guid)){let r=(0,s.UN)().developerFriendlyIdFromGuid(n.guid).replace(h,"").split(";"),a=r[0];if(a&&1===r.length&&n.isBubbled&&n.symbolId){let r=e(n);if(Object.keys(r).length){let e=i[a];e&&"key"in e.devFriendlyProp?"ARRAY"===e.devFriendlyProp.type?(0,l.kc)().first_draft_ts_arrays?u[e.devFriendlyProp.key]=[...u[e.devFriendlyProp.key]??[],r]:u[e.devFriendlyProp.nonArrayKey]=r:u[e.devFriendlyProp.key]=r:u[(0,d.aX)(n.name)]=r}}}if((0,l.kc)().first_draft_ts_arrays)for(let[e,r]of Object.entries((0,d.hM)(Object.keys(u))))for(let n of(u[e]=r.map(e=>u[e]),r))delete u[n];return u}(e));let g="";if("DEFINITION"===r.componentUsageOrDefinition&&r.componentDefinitionTypeInfo){let a=e.componentPropertyReferences().mainComponent,o=r.componentDefinitionTypeInfo.parsedDefs.find(n=>{if(e.isBubbled&&"NESTED_INSTANCE"===n.def.type){for(let a of(0,d.wn)(r.componentDefinitionTypeInfo?.componentId??"",n))if(a===e.guid)return!0}return!!a&&n.rawProp===a});if(o){if("SLOT"===o.def.type)return`{${T(o.devFriendlyProp)}}`;if(1===n.parsedDefs.length){let e=n.parsedDefs[0].devFriendlyProp.key;e in i?i[e]=`{${T(o.devFriendlyProp)} ?? ${JSON.stringify(i[e])}}`:i[e]=`{${T(o.devFriendlyProp)}}`}else g=`{...${T(o.devFriendlyProp)}} `}}return`<${n.jsxName} ${(0,_.d)(i)} ${g}/>`}(e,n)}`);break}if("SYMBOL"===e.type&&"DEFINITION"!==n.componentUsageOrDefinition){i.push(`${n.indent}${function(e,r){if("SYMBOL"!==e.type)throw Error(`Expected SYMBOL, got ${e.type} for node ${e.guid}`);let n=y(e,r),a=(0,c.Ye)(e.guid);if(!a)throw Error(`Could not find typeInfo for component: ${e.guid}`);return n.name=a.jsxName,"variantProperties"in e&&Object.assign(n,e.variantProperties),`<ComponentType ${(0,_.d)(n)} />`}(e,n)}`);break}let[r,g,E]=function(e,r){if(-1===b.indexOf(e.type))throw Error(`Unexpected parent node type ${e.type} for node ${e.guid}`);let n=y(e,r),i=A(e);i&&(n.description=i);let o=d.Ii.test(e.name),s=e.fills.some(e=>"IMAGE"===e.type),l=!!i||o||s,c=(0,a.Ed)(e,r.tailwindOptions);c.length&&(n[f(r)]=c.join(" "));let u=function(e,r,n,a){if(-1===b.indexOf(e.type))throw Error(`Unexpected parent node type ${e.type} for node ${e.guid}`);switch(e.type){case"SYMBOL":case"INSTANCE":case"FRAME":case"GROUP":if(n)return"Image";return r?a.autoLayoutTagName??"AutoLayout":a.frameTagName??"Frame";case"SECTION":return"Section";default:return"UNKNOWN"}}(e,-1!==c.indexOf("flex"),l,r);if(l&&"DEFINITION"===r.componentUsageOrDefinition&&r.componentDefinitionTypeInfo&&r.parentComponentId){let a=r.componentDefinitionTypeInfo,i=r.parentComponentId,o=a.parsedDefs.find(r=>"IMAGE"===r.def.type&&r.def.guidByParentComponentId[i]===e.guid);if(o){let e=`{...${T(o.devFriendlyProp)}}`;return[`<${u} ${(0,_.d)(n)} ${e}>`,`<${u} ${(0,_.d)(n)} ${e} />`,`</${u}>`]}}return[`<${u} ${(0,_.d)(n)}>`,`<${u} ${(0,_.d)(n)} />`,`</${u}>`]}(e,n),I=e.childrenNodes.map(e=>w(e,{...n,tailwindOptions:{...n.tailwindOptions,position:!0},indent:n.formatJSX?n.indent+h.BH:n.indent}));if(I.length&&I.some(e=>e)){for(let e of(i.push(`${n.indent}${r}`),I))e&&i.push(e);i.push(`${n.indent}${E}`)}else i.push(`${n.indent}${g}`);break}case"TEXT":i.push(`${n.indent}${function(e,r){if("TEXT"!==e.type)throw Error(`Expected TEXT, got ${e.type} for node ${e.guid}`);let n=y(e,r),i=(0,a.Ed)(e,r.tailwindOptions);if(i.length&&(n[f(r)]=i.join(" ")),"DEFINITION"===r.componentUsageOrDefinition){let a=e.componentPropertyReferences();if(a&&"characters"in a){let e=a.characters,i=r.componentDefinitionTypeInfo&&r.componentDefinitionTypeInfo.parsedDefs.find(r=>r.rawProp===e),o=i?T(i.devFriendlyProp):(0,d.aX)(e);return`<Text ${(0,_.d)(n)}>{${o}}</Text>`}}let o=e.characters&&e.characters.includes('"')?`{${JSON.stringify(e.characters)}}`:e.characters??"";return`<Text ${(0,_.d)(n)}>${o}</Text>`}(e,n)}`);break;case"RECTANGLE":case"ROUNDED_RECTANGLE":case"LINE":case"ELLIPSE":i.push(`${n.indent}${function(e,r){if(!("ELLIPSE"===e.type||"RECTANGLE"===e.type||"ROUNDED_RECTANGLE"===e.type||"LINE"===e.type))throw Error(`Unexpected standalone node type ${e.type} for node ${e.guid}. Expected ELLIPSE, RECTANGLE, or LINE`);let n=y(e,r),i=(0,a.Ed)(e,r.tailwindOptions);switch(i.length&&(n[f(r)]=i.join(" ")),e.type){case"ELLIPSE":return`<Ellipse ${(0,_.d)(n)}/>`;case"ROUNDED_RECTANGLE":case"RECTANGLE":return`<Rectangle ${(0,_.d)(n)}/>`;case"LINE":return`<Line ${(0,_.d)(n)}/>`;default:return I(e,r)}}(e,n)}`);break;default:i.push(`${n.indent}${I(e,n)}`)}return i.length>0?n.formatJSX?i.join("\n"):i.join(""):null}function A(e){return"fills"in e&&e.fills.some(e=>"IMAGE"===e.type)&&"true"===e.getSharedPluginData("jsx","isImage")&&e.fills.find(e=>"IMAGE"===e.type)&&(e.getSharedPluginData("jsx","description")||e.getSharedPluginData("jsx","altText"))||null}},284538:(e,r,n)=>{n.d(r,{Qy:()=>p,v$:()=>h});var a=n(67151),i=n(299321),o=n(275556),s=n(905288),l=n(901357),c=n(904669),d=n(747202),u=n(356390),m=n(202655);function p(e,r=!1){let n=e[0];if(!n||"FRAME"!==n.type||n.isInstanceSublayer)return;let s=(0,c.UN)();if(r){let r=function(e){let r=function(e){switch(e){case"buildingBlocks":return m.vh;case"icons":return d.C;case"atoms":return"Atoms";case"copiedDesigns":return"Copied Designs";default:(0,a.xb)(e)}}(e),n=c.UN().getCurrentPage()?.childrenNodes.find(e=>"SECTION"===e.type&&e.name===r);if(n)return n;{let e=g((0,c.UN)().getCurrentPage());return o.l7.user("create-section",()=>{let n=(0,c.UN)().createNode("SECTION");return n.name=r,n.relativeTransform={...n.relativeTransform,m02:e.right()+100,m12:e.top()},n})}}("icons");for(let n of e)!function(e,r){let n=i.XJn.findIcons(e.guid),a=(0,c.UN)(),o=n.map(e=>a.get(e)),s={x:g(r).right()+50,y:50},l={};for(let e of o){if(!e)continue;let n=i.XJn.findSimilarNodes(e.guid,r.guid,!1,!0,!1),o=n[0]?a.get(n[0]):null;o||((o=a.createComponentFromNode(e.clone())).visible=!0,r.appendChild(o),o.relativeTransform={...o.relativeTransform,m02:s.x,m12:s.y},s.y+=o.size.y+20),l[e.guid]=o.guid,_(e,o)}}(n,r)}let l=n.absoluteBoundingBox,u=s.createComponentFromNode(n.clone());u.visible=!0,s.getCurrentPage()?.appendChild(u),u.x=l.x+l.w+200,u.y=l.y;let f=h(e,u);return{component:u,nodeMapping:f}}function h(e,r){let n=new Map;for(let a of e){let e=_(a,r);e&&(n=new Map([...n,...e]))}return u.Y5.commit(),n}function _(e,r){let n=e.parentNode;if(!n||n.isPrimaryInstance||n.isInstanceSublayer||"SYMBOL"!==r.type)return;let a=n.childrenGuids.findIndex(r=>r===e.guid),o=r.createInstance();if(!o)return;let s=i.XJn.applyOverridesToInstanceToMatchNode(o.guid,e.guid);return n.insertChild(o,a+1),"NONE"===n.stackMode&&(o.x=e.x,o.y=e.y),o.visible=e.visible,e.removeSelfAndChildren(),s}function g(e){let r=null;for(let n of e.childrenNodes){let e=new s.r(new l.M(n.x,n.y),new l.M(n.size.x,n.size.y));r=r?r.unionWith(e):e}return r??new s.r}},599280:(e,r,n)=>{n.d(r,{Hj:()=>g});var a=n(414507),i=n(299321),o=n(966712),s=n(717037),l=n(776621),c=n(999202),d=n(173454),u=n(640209),m=n(776047),p=n(642481);function h(e,r){if(!r)return{publishAssets:[],unpublishAssets:[]};let n=new Set(r.added.concat(r.modified)),a=[],i=r.removed;return e.forEach(e=>{n.has(e.key)&&a.push(e)}),{publishAssets:a,unpublishAssets:i}}function _(e){return e&&e!==d.E8.DELETED&&e!==d.E8.NOT_STAGED}async function g(e,r,n,a){let s=i.XJn.getKitKey(e);if(!s)return;let d=(0,c.LQ)(e);if(0===d.length)return;let m=n.publishType,g=m===p.tf.LOCAL_GENERATION,E=d.reduce((e,r)=>((m!==p.tf.LIBRARY_PUBLISH||_((n.localComponents[r.componentId]||n.localStateGroups[r.componentId])?.status))&&r.version&&(e[r.key]=r.version),e),{}),y=(0,c.vg)(e),b=y.reduce((e,r)=>((m!==p.tf.LIBRARY_PUBLISH||_(n.localComponents[r.defaultNodeId]?.status))&&r.version&&(e[r.key]=r.version),e),{}),I=i.XJn.getLocalExamples(e,d),T=I.reduce((e,r)=>(e[r.key]=r.version,e),{}),v=(0,c.pX)(),S={};v&&(m===p.tf.LIBRARY_PUBLISH&&_(n.localVariableSets[v.nodeId]?.status),S[v.key]=v.version);let w=await u.Gh.postFirstDraftPublishStatus({productComponentKeyToVersion:E,groupedComponentKeyToVersion:b,exampleKeyToVersion:T,variableSetKeyToVersion:S,publishType:m,kitKey:s}),{publishAssets:A,unpublishAssets:N}=h(d,w.data.meta.product_component_status),{publishAssets:C,unpublishAssets:L}=h(y,w.data.meta.grouped_component_status),{publishAssets:O,unpublishAssets:R}=h(I,w.data.meta.example_status),P=await f(O),D={};for(let e of O){let n=(0,o.kc)().first_draft_direct_gen?(0,c.fd)(e.nodeId):(0,c.Sd)(r,e);n&&(D[e.key]=n)}let{publishSets:k,unpublishSets:M}=function(e,r){if(!r)return{publishSets:[],unpublishSets:[]};let n=r.removed;return{publishSets:e.filter(e=>!n.includes(e.key)),unpublishSets:n}}(v?[v]:[],w.data.meta.variable_set_status);if(k.length>0&&!a){(0,l.x1)("First draft publish","Skipping kit publish because no theme variables were supplied");return}return{kit:{name:r,key:s,is_local:g},publish_product_components:A.map(e=>({name:e.name,jsx_name:e.jsxName,key:e.key,version:e.version,description:e.description,type_info:{jsx_name:e.jsxName,type_str:e.typeStr,jsx_component_def:e.jsxComponentDef?.jsxStr,prefix_types:e.prefixTypes,prefix_comments:e.prefixComments,description:e.description,type_info_version:(0,o.kc)().first_draft_direct_gen?p.Rd:p.Q6}})),unpublish_product_components:N,publish_grouped_components:C.map(e=>({name:e.name,key:e.key,version:e.version,description:e.description,group_name:e.groupName})),unpublish_grouped_components:L,publish_examples:O.map(e=>({key:e.key,version:e.version,example_info:{componentKeys:e.componentKeys,componentJsxNames:e.componentJsxNames,nodeId:e.nodeId,name:e.name,jsxInfo:D[e.key]??null},thumbnail_url:P[e.key]})),unpublish_examples:R,publish_variable_sets:a?k.map(e=>({key:e.key,name:e.name,version:e.version,theme_info:{theme_info_version:p.$5,customizable_variables:a,modes:e.modes}})):[],unpublish_variable_sets:M}}async function f(e){let r={};if(0===e.length)return r;let n={};for(let r of e){let[e,a]=i.Vzr.generateThumbnailForNode(r.nodeId,768,768,1,{});n[r.key]=a}let o=(await m.b.getUploadThumbnailsPresignedPostUrls(Object.keys(n).length)).data.meta.presigned_posts;return o.length<Object.keys(n).length?(0,l.$D)(a.FigmaTeam.AI_GENERATION,Error("Mismatch between number of thumbnails and presigned URLs")):await Promise.allSettled(Object.entries(n).map(async([e,n],i)=>{let{url:c,fields:d}=o[i];try{let i=await (0,s.ET)(a.FigmaTeam.AI_GENERATION,"uploadThumbnails",c,d,n,"application/octet-stream");r[e]=i}catch(e){(0,l.$D)(a.FigmaTeam.AI_GENERATION,Error("Unable to upload example thumbnail to S3"))}})),r}},104064:(e,r,n)=>{n(275556),n(904669),n(568214),n(809058);var a=(e=>(e[e.XXXS=4]="XXXS",e[e.XXS=8]="XXS",e[e.XS=12]="XS",e[e.S=16]="S",e[e.M=24]="M",e[e.L=32]="L",e[e.XL=48]="XL",e[e.XXL=64]="XXL",e[e.XXXL=96]="XXXL",e))(a||{})},850213:(e,r,n)=>{n.d(r,{Cr:()=>o,ZO:()=>i,k_:()=>a}),n(414507),n(299321),n(275556),n(804597),n(496450),n(904669),n(776621),n(202655),n(207204),n(747202),n(356390),n(931770),n(763764),n(33604);let a=6,i={fontFamilyTitle:"\u2726/font/title/bold/family",fontFamilyBody:"\u2726/font/body/regular/family",fontFamilyLabel:"\u2726/font/label/medium/family",textColor:"\u2726/color/1/content-primary",cornerRadius:"\u2726/cornerRadius/small",cornerRadiusFallback:"\u2726/cornerRadius/large",bgBrandColor:"\u2726/color/1/bg-brand",bgColor:"\u2726/color/2/bg-primary"},o={fontFamilyTitle:"\u2726/font/title/bold/family",fontFamilyBody:"\u2726/font/body/regular/family",fontFamilyLabel:"\u2726/font/label/medium/family",textColor:"\u2726/color/1/text-default",cornerRadius:"\u2726/cornerRadius/medium",cornerRadiusFallback:"\u2726/cornerRadius/large",bgBrandColor:"\u2726/color/1/bg-brand",bgColor:"\u2726/color/2/bg-primary"}},277080:(e,r,n)=>{var a=(e=>(e.LIGHT="light",e.DARK="dark",e))(a||{}),i=(e=>(e.DEFAULT="default",e.BRAND="brand",e))(i||{}),o=(e=>(e.BG="bg",e.CONTENT="content",e.BORDER="border",e))(o||{}),s=(e=>(e.PRIMARY="primary",e.SECONDARY="secondary",e.TERTIARY="tertiary",e))(s||{})},763764:(e,r,n)=>{n(378195),n(568214),n(138392),n(776621),n(277080)},33604:(e,r,n)=>{n(275556),n(804597),n(568214),n(708389),n(749401),n(801886),n(104064),n(277080),n(763764);var a=(e=>(e.Mobile="mobile",e.Website="website",e))(a||{})},801886:(e,r,n)=>{n.d(r,{GS:()=>M,I5:()=>A,LW:()=>K,Od:()=>j,lu:()=>F,u7:()=>k,vj:()=>x});var a=n(860008),i=n(330654);let o=i.object({type:i.union([i.literal("BOOLEAN"),i.literal("TEXT"),i.literal("VARIANT"),i.literal("INSTANCE_SWAP")]),defaultValue:i.any(),preferredValues:i.array(i.object({type:i.union([i.literal("COMPONENT"),i.literal("COMPONENT_SET")]),key:i.string()})).optional(),variantOptions:i.array(i.string()).optional()}),s=i.object({type:i.literal("GROUPED_INSTANCE_SWAP"),defaultValue:i.string(),groupName:i.string()}),l=i.object({type:i.literal("SLOT")}),c=i.object({guidByParentComponentId:i.record(i.string())}),d=c.extend({type:i.literal("IMAGE"),tagsByParentComponentId:i.record(i.object({desc:i.string().optional(),prompt:i.string().optional(),background:a.firstDraftImageCreateBackgroundEnum}))}),u=c.extend({type:i.literal("NESTED_INSTANCE"),componentId:i.string(),tagsByParentComponentId:i.record(i.object({fixedVariantProperties:i.record(i.string(),i.boolean()).optional()}))}),m=i.union([o,u,s,l,d]),p=i.union([i.literal("STRING"),i.literal("BOOLEAN"),i.literal("OBJECT"),i.literal("UNKNOWN")]),h=i.object({key:i.string(),originalKey:i.string().optional(),valueType:p}),_=h.extend({type:i.literal("SIMPLE")}),g=h.extend({type:i.literal("SIMPLE_CHOICE"),validOptions:i.array(i.string())}),f=h.extend({type:i.literal("ARRAY"),nonArrayKey:i.string(),index:i.number()}),E=h.extend({type:i.literal("IMAGE")}),y=h.extend({type:i.literal("GROUPED_INSTANCE_SWAP"),groupName:i.string()}),b=i.union([_,g,f,E,y]),I=i.object({type:i.literal("DERIVED_BOOLEAN"),devFriendlyProp:b,valueType:i.literal("BOOLEAN")}),T=i.union([b,I]),v=i.union([i.object({type:i.literal("IMAGE")}),i.object({type:i.literal("COMPONENT"),componentId:i.string()}),i.object({type:i.literal("COMPONENT_INLINED"),componentId:i.string()}),i.object({type:i.literal("COMPONENT_JSX"),componentId:i.string()})]),S=i.object({typeName:i.string(),typeDefBody:i.string().optional(),prefixComments:i.array(i.string()).optional(),referencedTypes:i.array(v).optional()}),w=i.object({def:m,devFriendlyProp:T,componentId:i.string().nullable(),isOptional:i.boolean(),rawProp:i.string(),typeRepr:S});var A=(e=>(e.BUILDING_BLOCK="BUILDING_BLOCK",e.GROUPED_COMPONENT="GROUPED_COMPONENT",e.NONE="NONE",e))(A||{});let N=i.union([i.object({type:i.literal("SIMPLE"),name:i.string(),typeInfo:i.lazy(()=>q)}),i.object({type:i.literal("GROUP"),name:i.string()})]),C=i.object({type:i.literal("LOCAL"),pageId:i.string()}),L=i.object({type:i.literal("LIBRARY"),key:i.string()}),O=i.union([C,L]);i.object({dsKitKey:i.union([C,L]).optional(),pageChildrenName:i.string().optional(),includeSelection:i.boolean().optional()}).optional();let R=i.object({type:i.string(),props:i.record(i.any())}).extend({children:i.lazy(()=>i.union([i.string().array(),R.array()]))}),P=i.union([i.object({status:i.literal("success"),key:i.string(),version:i.string(),guid:i.string(),jsxName:i.string()}),i.object({status:i.literal("error")})]),D=i.object({prevNodeId:i.string().nullable(),parentNodeId:i.string().nullable(),insertAtIndex:i.number().optional(),isIncomplete:i.boolean(),loadingComponentType:i.string(),autoFillParent:i.boolean(),insertBehavior:i.enum(["inline","viewport","default","viewport-ease","default-ease"]),frameName:i.string(),sharedPluginData:i.record(i.string()),theme:i.lazy(()=>H),themeProperties:i.lazy(()=>a.firstDraftThemePropertiesSchemaV2),deviceType:i.enum(["website","mobile"]),isEval:i.boolean(),shouldGenerateImages:i.boolean(),componentNameToInsertResult:i.record(P),componentNameToCustomJSXElement:i.record(N),createNewSitesWebpage:i.boolean(),imageArgs:i.object({initialUserPrompt:i.string()}).optional(),shouldAnimateLoading:i.boolean(),doneTextLayerIds:i.set(i.string()),clientLifecycleId:i.string(),addWireframeBorder:i.boolean(),registerV3Components:i.boolean(),v3ComponentLocations:i.record(i.string(),i.string()),nodeToReplace:i.string().optional()}).partial().extend({dsKitKey:O});i.object({jsxStr:i.string(),jsxJSON:i.array(R),prevJsxJSON:i.array(R),prevExpandedJsx:i.array(R),options:D});var k=(e=>(e.SPACING="spacing",e.CORNER_RADIUS="cornerRadius",e.FONT="font",e.COLOR="color",e.DARK_MODE="dark",e))(k||{}),M=(e=>(e.DEFAULT="default",e.SERIF="serif",e))(M||{}),F=(e=>(e.TITLE="title",e.BODY="body",e.LABEL="label",e))(F||{}),x=(e=>(e.BOLD="bold",e.MEDIUM="medium",e.REGULAR="regular",e))(x||{});let U=i.object({value:i.number(),units:i.enum(["RAW","PIXELS","PERCENT"])}),B=i.object({fontName:i.object({family:i.string(),style:i.string()}),letterSpacing:U.optional()}),V=i.object({r:i.number(),g:i.number(),b:i.number(),a:i.number()}),G=i.object({colorVariableMap:i.record(i.string(),V),numberVariableMap:i.record(i.string(),i.number()),fontVariableMap:i.record(i.string(),B).optional()}),H=i.object({accentColor:V.optional(),darkMode:i.boolean(),variableMaps:G.optional()}),W=i.object({position:i.boolean(),size:i.boolean(),flex:i.boolean(),color:i.boolean(),radius:i.boolean(),typography:i.boolean()}),K={position:!1,size:!1,flex:!1,color:!1,radius:!1,typography:!1},Y=i.object({includeName:i.boolean().optional(),includeType:i.boolean().optional(),skipNodeIds:i.boolean().optional(),skipNodeIdsWithoutType:i.boolean().optional(),skipClassNames:i.boolean().optional(),detachInstances:i.boolean().optional(),classPropName:i.string().optional(),autoLayoutTagName:i.string().optional(),frameTagName:i.string().optional(),componentUsageOrDefinition:i.union([i.literal("USAGE"),i.literal("DEFINITION")]).optional(),componentDefinitionTypeInfo:i.lazy(()=>q.optional()),parentComponentId:i.string().optional(),tailwindOptions:W.partial().optional(),formatJSX:i.boolean().optional(),indent:i.string().optional()});i.object({nodeIds:i.array(i.string()),options:Y}),i.object({options:Y});let $=i.object({nodeId:i.string().nullable(),jsxStr:i.string(),prefixTypes:i.array(i.string())}),j=3,z=i.object({children:i.string().optional(),className:i.string().optional()});i.object({componentName:i.string().optional(),overrides:i.record(z)}),i.object({key:i.string(),nodeId:i.string(),version:i.string(),descriptionLegacy:i.string(),componentKeys:i.array(i.string()),componentJSXNames:i.array(i.string())});let q=i.object({componentId:i.string(),defaultNodeId:i.string(),name:i.string(),jsxName:i.string(),typeStr:i.string(),propsTypeRepr:S,defs:i.record(i.object({type:i.enum(["BOOLEAN","TEXT","VARIANT","NUMBER","INSTANCE_SWAP"]),defaultValue:i.union([i.string(),i.boolean(),i.number().finite()]),variantOptions:i.array(i.string()).optional(),preferredValues:i.array(i.object({type:i.string(),key:i.string()})).optional()})),parsedDefs:i.array(w),prefixTypes:i.record(i.string()),prefixComments:i.array(i.string()),description:i.string(),componentGroupPath:i.string(),groupName:i.string().optional(),componentType:i.nativeEnum(A),key:i.string(),version:i.string(),typeInfoVersion:i.number()});q.extend({jsxComponentDef:$.optional()})},999202:(e,r,n)=>{n.d(r,{LQ:()=>g,Sd:()=>T,_:()=>y,fd:()=>I,pX:()=>b,vg:()=>_});var a=n(414507),i=n(299321),o=n(904669),s=n(966712),l=n(776621),c=n(247368),d=n(202655),u=n(853069),m=n(286374),p=n(801886),h=n(747202);function _(e){let{info:r}=f({rootNodes:{dsKitKey:{type:"LOCAL",pageId:e},pageChildrenName:u.C},includeJSX:!1});return r.filter(e=>(0,d.Se)(e.componentGroupPath,u.C))}function g(e){let{info:r}=f({rootNodes:{dsKitKey:{type:"LOCAL",pageId:e},pageChildrenName:d.vh},includeJSX:!!(0,s.kc)().first_draft_direct_gen});return r.filter(e=>(0,d.Se)(e.componentGroupPath,d.vh)).concat(E((0,d.VN)(e),!0))}function f(e){let r=(0,d.__)(e);return{info:E((0,d.tJ)([...r],{followInstances:!1}),e.includeJSX)}}function E(e,r){return(0,c.UY)(),e.map(e=>{try{let n=(0,c.NY)(e);if(!r)return n;let a=(0,m.gZ)(e,n);return{...n,jsxComponentDef:a}}catch(r){(0,l.$D)(a.FigmaTeam.AI_GENERATION,r,{extra:{nodeId:e.guid}})}}).filter(Boolean)}function y(){return i.CWU.getLocalVariableSetsInfo().filter(e=>!e.isSoftDeleted&&(0,h.n6)(e.name,d.i2)).map(e=>({key:e.keyForPublish,name:e.name,version:e.userFacingVersion,nodeId:e.id,defaultModeId:e.defaultModeID,modes:e.modes}))}function b(){let e=y().sort((e,r)=>e.nodeId.localeCompare(r.nodeId));if(0!==e.length&&!(e.length>1))return e[0]}function I(e){let r=(0,o.UN)().get(e);if(!r||"FRAME"!==r.type)return null;let n=(0,m.Py)(r,{skipNodeIds:!0,autoLayoutTagName:"div",frameTagName:"div",formatJSX:!0});return n?{jsx:n,buildingBlockToRegion:{}}:null}function T(e,r){let n=e=>{let r=(0,c.Ye)(e.symbolId??"");if(!r||r.componentType!==p.I5.BUILDING_BLOCK)throw Error("Expected building block");return r.jsxName},a=e=>"FRAME"===e.type&&((0,h.n6)(e.name,"spacer")||(0,h.n6)(e.name,"filler"));try{let i=e.toLowerCase().includes("mobile")?"mobile":e.toLowerCase().includes("website")?"website":"vstack-only";if("vstack-only"===i)return null;let s=(0,o.UN)().get(r.nodeId);if(!s||"FRAME"!==s.type)return null;for(let e of function e(r){if(r.isPrimaryInstance)return[r];if(r.isInstanceSublayer)return[];let n=[];for(let a of r.childrenNodes)n.push(...e(a));return n}(s)){let r=(0,c.Ye)(e.symbolId??"");if(!r||r.componentType!==p.I5.BUILDING_BLOCK)return null}if("VERTICAL"===s.stackMode&&s.childrenNodes.filter(e=>"INSTANCE"===e.type).length>=3&&s.childrenNodes.every(e=>"INSTANCE"===e.type||a(e))){let e=s.childrenNodes.filter(e=>"INSTANCE"===e.type).map(n),r=e.map(e=>`<${e} />`),a={},o=r[0];a[e[0]]="header";let l=r[r.length-1];a[e[e.length-1]]="footer";let c=r.slice(1,r.length-1),d="["+c.join(", ")+"]";for(let n=1;n<r.length-1;n++)a[e[n]]="mainContent";return{jsx:`<${"website"===i?"DesktopSingleCol":"MobileSingleCol"} header={${o}} mainContent={${d}} footer={${l}} />`,buildingBlockToRegion:a}}if("VERTICAL"===s.stackMode&&3===s.childrenNodes.length&&"INSTANCE"===s.childrenNodes[0].type&&"FRAME"===s.childrenNodes[1].type&&"VERTICAL"===s.childrenNodes[1].stackMode&&s.childrenNodes[1].childrenNodes.every(e=>"INSTANCE"===e.type||a(e))&&"INSTANCE"===s.childrenNodes[2].type){let e={},r=n(s.childrenNodes[0]),a=`<${r} />`;e[r]="header";let o=n(s.childrenNodes[2]),l=`<${o} />`;e[o]="footer";let c=s.childrenNodes[1].childrenNodes.filter(e=>"INSTANCE"===e.type).map(n),d=c.map(e=>`<${e} />`),u="["+d.join(", ")+"]";for(let r=0;r<c.length;r++)e[c[r]]="mainContent";return{jsx:`<${"website"===i?"DesktopSingleCol":"MobileSingleCol"} header={${a}} mainContent={${u}} footer={${l}} />`,buildingBlockToRegion:e}}if("website"===i&&"VERTICAL"===s.stackMode&&3===s.childrenNodes.length&&"INSTANCE"===s.childrenNodes[0].type&&"FRAME"===s.childrenNodes[1].type&&"HORIZONTAL"===s.childrenNodes[1].stackMode&&2===s.childrenNodes[1].childrenNodes.length&&s.childrenNodes[1].childrenNodes.every(e=>"FRAME"===e.type&&"VERTICAL"===e.stackMode&&e.childrenNodes.every(e=>"INSTANCE"===e.type))&&"INSTANCE"===s.childrenNodes[2].type){let e={},r=n(s.childrenNodes[0]),a=`<${r} />`;e[r]="header";let i=n(s.childrenNodes[2]),o=`<${i} />`;e[i]="footer";let l=s.childrenNodes[1].childrenNodes[0],c=s.childrenNodes[1].childrenNodes[1];if(!l||!c)return null;let d=l.absoluteRenderBounds.w<c.absoluteRenderBounds.w,u=d?c:l,m=d?l:c,p=m.absoluteRenderBounds.w,h=u.childrenNodes.map(n),_=h.map(e=>`<${e} />`),g="["+_.join(", ")+"]";for(let r=0;r<h.length;r++)e[h[r]]="mainContent";let f=m.childrenNodes.map(n),E=f.map(e=>`<${e} />`),y="["+E.join(", ")+"]";for(let r=0;r<f.length;r++)e[f[r]]="sidebarContent";return{jsx:`<${d?"DesktopTwoColWithLeftSidebar":"DesktopTwoColWithRightSidebar"} header={${a}} mainContent={${g}} sidebarContent={${y}} sidebarWidth={${p}} footer={${o}} />`,buildingBlockToRegion:e}}}catch(n){(0,l.xi)("getNodeJSXFromExample","unhandled error",{error:n,kitName:e,example:r})}return null}},599015:(e,r,n)=>{n.d(r,{Gs:()=>i});var a=n(330654);function i(e){return"INSTANCE"===e.type&&"true"===e.getSharedPluginData("first_draft_make_kit","is_kit_instance")}a.object({componentPropertyDefinitions:a.array(a.object({name:a.string(),type:a.string()})),componentPropertyReferences:a.record(a.string(),a.record(a.string(),a.string()))})},747202:(e,r,n)=>{n.d(r,{Au:()=>m,C:()=>y,Kp:()=>b,Lp:()=>T,Ny:()=>_,Sn:()=>I,So:()=>S,Uk:()=>v,_F:()=>w,g5:()=>p,j_:()=>f,lI:()=>h,n6:()=>E,oJ:()=>function e(r){let n=r.parentNode;return!!n&&("INSTANCE"===n.type||e(n))},uN:()=>A,yu:()=>g}),n(299321);var a=n(496450),i=n(904669),o=n(374626),s=n(776621),l=n(825871),c=n(378260),d=n(106757),u=n(335682);function m(e,r,n,a){if(!e)return[];let o=a??(0,i.UN)(),s=o.get(e);if(!s)return[];let l=s.findAllWithCriteriaGUIDs({types:r,...n}),c=[];for(let e of l){let r=o.get(e);r&&c.push(r)}return c}function p(e){let r=(0,a.NT)().get(e);return r?m(r.guid,["INSTANCE"]):[]}function h(){return(0,i.UN)().getCurrentPage()}function _(e){return(0,i.UN)().get(e)}function g(e){if(!e.symbolId)return null;let r=(0,i.UN)().get(e.symbolId);return r?r.isState?r.parentGuid:r.guid:null}function f(e){let r=(0,i.UN)().get(e);for(;r&&"SYMBOL"!==r.type;)r=r.parentNode;return r?.guid??null}function E(e,r){return(e=e.replace(/[^0-9a-z]/gi,"").toLowerCase())===(r=r.replace(/[^0-9a-z]/gi,"").toLowerCase())}let y="Icons";function b(e,r){return{description:r.name||""}}function I(e,r){return e=(e=e.replace(/[^0-9a-z]/gi,"")).charAt(0).toUpperCase()+e.substr(1),!r||e.startsWith(r)?e:`${r}${e}`}function T({clientLifecycleId:e}){return{orgId:o.zl.get(c._s)||null,teamId:o.zl.get(u.As)||null,fileKey:o.zl.get(u.ze)||null,userId:o.zl.get(d.kS)||null,clientLifecycleId:e,trackingSessionId:(0,l.f)()}}function v(e){return(e.isStateGroup?e.sharedStateGroupVersion:e.sharedSymbolVersion)??""}function S(e,r){let n=_(e);if(!n||n.type!==r)throw Error(`Unexpected node type for id=${e}. Expected ${r} got: ${n?.type}`);return n}function w(e,r,n,a){let i=[];if(r.includes(e.type)){if(n){if(n.sharedPluginData){let r=e.getSharedPluginDataKeys(n.sharedPluginData.namespace),a=n.sharedPluginData.keys||[];(0===a.length&&r.length>0||r.some(e=>a.includes(e)))&&i.push(e)}}else i.push(e)}return i.push(...m(e.guid,r,n,a)),i}function A(e,r){let n=(0,i.UN)().get(r);return n?n.getSublayerIdForInstanceOfSymbol(e):((0,s.xi)("first-draft","No component sublayer found for",{symbolSublayer:n}),null)}},516398:(e,r,n)=>{n.d(r,{C_:()=>d,WU:()=>h,cw:()=>p,fB:()=>g,hx:()=>_});var a=n(411855);n(188507);var i=n(652894),o=n(121913);n(38329),n(966712);var s=n(498750),l=n(563706);n(738269),n(22774),n(529906),n(239671),n(922358),n(373119),n(611978);let c=[];function d(e,r){a.useEffect(()=>{if(r)return;let n=e.current;if(n)return function(e,r){let n={element:e};if(!c.length){c.push(n);return}for(let[r,{element:a}]of c.entries()){let i=a.compareDocumentPosition(e);if(i===Node.DOCUMENT_POSITION_PRECEDING||i===Node.DOCUMENT_POSITION_CONTAINS){if(c[r-1]?.element===e)return;c.splice(r,0,n);return}}c.push(n)}(n),()=>{(function(e){let r=c.findIndex(r=>r.element===e);c.splice(r,1)})(n)}},[e,r])}function u(e){var r;if(e.focus)return e.focus();let n=((r=e.element)?(0,i.Kr)(r,{getShadowRoot:!0})[0]:null)||e.element;return n?.focus(),n}function m(e){for(let[r,{element:n}]of c.entries())if(n.contains(document.activeElement)){let n=c.length,a=c[(n+r+("forward"===e?1:-1))%n],i=a&&u(a);if(i)return i}let r="forward"===e?c[0]:c[c.length-1];return r?u(r):null}function p(e){m("backward"),(0,o.f)(o.h.FOCUS_CYCLE_PREVIOUS_AREA,{key:e})}function h(e){m("forward"),(0,o.f)(o.h.FOCUS_CYCLE_NEXT_AREA,{key:e})}function _(e){let{e:r,onClickHandler:n,onEscapeHandler:a}=e;n&&r.keyCode===s.Uz.ENTER&&n(r),a&&r.keyCode===s.Uz.ESCAPE&&a(r)}function g(e){return function(e){let r=l.Ay.mac&&(0,s.vN)(e,s.xH.CONTROL|s.xH.META);return"F6"===e.key&&(0,s.vN)(e,s.xH.CONTROL)||l.Ay.mac&&"F6"===e.key&&0===(0,s.sN)(e)||r&&"ArrowRight"===e.key}(e)||function(e){let r=l.Ay.mac&&(0,s.vN)(e,s.xH.CONTROL|s.xH.META);return"F6"===e.key&&(0,s.vN)(e,s.xH.SHIFT|s.xH.CONTROL)||l.Ay.mac&&"F6"===e.key&&(0,s.vN)(e,s.xH.SHIFT)||r&&"ArrowLeft"===e.key}(e)}},875847:(e,r,n)=>{n.d(r,{B_:()=>h,CI:()=>f,D:()=>c,Gi:()=>u,N5:()=>E,SS:()=>b,T9:()=>d,VA:()=>p,cU:()=>I,d:()=>m,gj:()=>_,jd:()=>v,oq:()=>y,sp:()=>g,ye:()=>T});var a=n(966712);n(915440),n(391388),n(279453);var i=n(428467),o=n(451e3),s=n(173454),l=n(668860);function c(e,r){return u(e[r])}function d(e){let r=!!e&&""===e.path;return(0,a.kc)().ps_benchmark?r:r&&!e.teamId}function u(e){let r=!!e&&""===e.path;return(0,a.kc)().ps_benchmark?r:r&&!e.team_id}function m(){return`temp-${+new Date}`}function p(e){return(0,a.kc)().ps_benchmark?e?.path==="":e?.path===""&&!e?.teamId}function h(e){return e?.path===""&&!!e?.teamId}function _(e,r,n,a){if(!e)return null;if(a)return r[a.drafts_folder_id]||null;for(let a in r){let i=r[a],o=n[a]?n[a][e]:null;if(!i.teamId&&""===i.path&&null==i.orgId&&o&&o.level===l.e6.OWNER)return i}return null}function g(e){return e&&!e.team_id&&""!==e.path&&!!e.org_id}function f(e){return e?.path===""?(0,s.Tb)():e?.path}function E(e,r){return null!=r&&r in e}function y(e,r){let n=r.folders[e];if(n&&n.org_id)return n.org_id;if(n&&n.team_id){let e=r.teams[n.team_id];if(e&&e.org_id)return e.org_id}}function b(e){return e.length<=0?"Please provide a name":e.length>255?"Sorry, name must be at max 255 characters.":e.match(/[\/\\:?*"|]/)?'The following characters are not allowed:  / : ? * " |':void 0}function I(e,r,n,s){if(!(0,a.kc)().ps_benchmark)return(0,o.EE)(e,r);let l=n&&(0,i.canViewTeam)(n,s);return r?`${location.origin}/files/${r}/project/${e}`:l?`${location.origin}/files/team/${n}/project/${e}`:s.user?.personal_drafts_folder_id===e?`${location.origin}/files/drafts-to-move`:`${location.origin}/files/project/${e}`}function T(e){return!!e&&!!e.team_id&&!e.path}function v(e){return!!e&&!!e.teamId&&!e.path}n(671653)},21067:(e,r,n)=>{n.d(r,{Zb:()=>f});var a=n(23334),i=n(299321),o=n(568214),s=n(297666),l=n(939863),c=n(392592),d=n(809831),u=n(279145),m=n(913964),p=(e=>(e[e.NONE=0]="NONE",e[e.UP=1]="UP",e[e.DOWN=2]="DOWN",e[e.RIGHT=4]="RIGHT",e[e.LEFT=8]="LEFT",e[e.UP_RIGHT=5]="UP_RIGHT",e[e.UP_LEFT=9]="UP_LEFT",e[e.DOWN_RIGHT=6]="DOWN_RIGHT",e[e.DOWN_LEFT=10]="DOWN_LEFT",e))(p||{}),h=(e=>(e[e.NONE=0]="NONE",e[e.HORIZONTAL=1]="HORIZONTAL",e[e.VERTICAL=2]="VERTICAL",e[e.BOTH=3]="BOTH",e))(h||{}),_=(e=>(e[e.NONE=0]="NONE",e[e.DECREASED=1]="DECREASED",e[e.INCREASED=2]="INCREASED",e))(_||{});class g{constructor(e){this.store=e,this.store=e,this.debounceNodeResizeUpdate=(0,s.s)(e=>{this.announceDomChange(i.x8F.NODE_RESIZED,e);let r=i.AlE.getActiveDocument();i.yGz.resetStoredSelectedNodeBounds(r)},200),this.debounceNodeMovementUpdate=(0,s.s)(e=>{this.announceDomChange(i.x8F.NODE_MOVED,e);let r=i.AlE.getActiveDocument();i.yGz.resetStoredSelectedNodeBounds(r)},200)}announceDomChange(e,r){let n=(0,d.XE)(this.store.getState().selectedView),a=this.store.getState();if(!a.screenreader.enabled)return;let o=function(e,r,n,a){let o=r.targetNodeType?E(r.targetNodeType,a):"";switch(e){case i.x8F.NODE_CREATED:if(r.targetNodeType===i.Z6A.STAMP&&r.stickableHostType)return(0,l.t)("fullscreen.accessibility.stamp_attached_announcement",{hostType:E(r.stickableHostType,a)});return(0,l.t)("fullscreen.accessibility.node_created_announcement",{node_type:o});case i.x8F.NODE_DELETED:return r.multiSelection?(0,l.t)("fullscreen.accessibility.multiple_node_deleted_announcement"):(0,l.t)("fullscreen.accessibility.node_deleted_announcement",{node_type:o});case i.x8F.TEXT_SELECTION:return(0,l.t)("fullscreen.accessibility.next_text_node_announcement",{nodeType:o});case i.x8F.TOOL:if(r.targetNodeType===i.Z6A.STAMP)return;return r.targetNodeType!==i.Z6A.NONE?(0,l.t)("fullscreen.accessibility.tool_selected",{nodeType:o,shortcut:(0,u.c1)(n,"toggle-menu")}):(0,l.t)("fullscreen.accessibility.tool_unselected");case i.x8F.TABLE_CELL_TEXT_SELECTION:if(null!=r.tableCellCol&&null!=r.tableCellRow)return(0,l.t)("fullscreen.accessibility.next_table_cell_announcement",{r:r.tableCellRow,c:r.tableCellCol});return(0,l.t)("fullscreen.accessibility.next_text_node_announcement",{nodeType:o});case i.x8F.NODE_RESIZED:let s,c,d;let m=r.nodeSizeDelta;if(!m)return;let p=0,h=0,_=0;switch(0!==m.x&&(p|=1,h=m.x>0?2:1),0!==m.y&&(p|=2,_=m.y>0?2:1),p){case 0:return;case 1:s=(0,l.t)("fullscreen.accessibility.node_resize_horizontal"),c=y(h),d=Math.abs(m.x);break;case 2:s=(0,l.t)("fullscreen.accessibility.node_resize_vertical"),c=y(_),d=Math.abs(m.y);break;default:let g=Math.abs(m.x),f=y(h),b=Math.abs(m.y),I=y(_);return(0,l.t)("fullscreen.accessibility.node_resize_bidirectional",{nodeType:o,resizedComparisonX:f,nodeResizeXDelta:(0,l.t)("fullscreen.accessibility.node_unit",{numUnits:g}),resizedComparisonY:I,nodeResizeYDelta:(0,l.t)("fullscreen.accessibility.node_unit",{numUnits:b})})}return(0,l.t)("fullscreen.accessibility.node_resize_unidirectional",{nodeType:o,nodeSizeDelta:d,resizeComparison:c,nodeDirection:s});case i.x8F.NODE_MOVED:let T,v,S=0,w=r.nodeMovementDelta;if(!w)return;switch(w.x>0?S|=4:w.x<0&&(S|=8),w.y<0?S|=1:w.y>0&&(S|=2),S){case 0:return;case 1:T=(0,l.t)("fullscreen.accessibility.node_movement_up"),v=Math.abs(w.y);break;case 2:T=(0,l.t)("fullscreen.accessibility.node_movement_down"),v=Math.abs(w.y);break;case 4:T=(0,l.t)("fullscreen.accessibility.node_movement_right"),v=Math.abs(w.x);break;case 8:T=(0,l.t)("fullscreen.accessibility.node_movement_left"),v=Math.abs(w.x);break;default:let A=(4&S)==4?(0,l.t)("fullscreen.accessibility.node_movement_right"):(0,l.t)("fullscreen.accessibility.node_movement_left"),N=Math.abs(w.x),C=(1&S)==1?(0,l.t)("fullscreen.accessibility.node_movement_up"):(0,l.t)("fullscreen.accessibility.node_movement_down"),L=Math.abs(w.y);return(0,l.t)("fullscreen.accessibility.node_movement_bidirectional",{nodeType:o,nodePositionXDelta:(0,l.t)("fullscreen.accessibility.node_unit",{numUnits:N}),nodeDirectionX:A,nodePositionYDelta:(0,l.t)("fullscreen.accessibility.node_unit",{numUnits:L}),nodeDirectionY:C})}return(0,l.t)("fullscreen.accessibility.node_movement_unidirectional",{nodeType:o,nodePositionDelta:v,nodeDirection:T});default:return}}(e,r,a.mirror.appModel.keyboardShortcuts,n),s=function(e){switch(e){case i.x8F.NODE_CREATED:case i.x8F.NODE_DELETED:return"creation-deletion";case i.x8F.NODE_RESIZED:return"resize";case i.x8F.NODE_MOVED:return"movement";case i.x8F.TEXT_SELECTION:case i.x8F.TABLE_CELL_TEXT_SELECTION:return"selection";case i.x8F.TOOL:return"tool";default:return}}(e);o&&s&&this.store.dispatch(c.F.enqueue({type:`accessibility-screen-reader-announcement-${s}`,message:o,role:"status",timeoutOverride:500}))}debounceNodeResizeUpdate(e){this.store.getState().screenreader.enabled&&this.debouncedResizeUpdate(e)}debounceNodeMovementUpdate(e){this.store.getState().screenreader.enabled&&this.debouncedMovementUpdate(e)}prefersReducedMotion(){return matchMedia("(prefers-reduced-motion: reduce)").matches}getAPCAContrast(e,r){return(0,o.yi)((0,a.aH)(e),(0,a.aH)(r))}}function f(e){new g(e)}function E(e,r){let n=i.Z6A[e];return(0,m.r)(n,r)}function y(e){switch(e){case 1:return(0,l.t)("fullscreen.accessibility.node_resize_decrease");case 2:return(0,l.t)("fullscreen.accessibility.node_resize_increase");default:return(0,l.t)("fullscreen.accessibility.node_resize_none")}}},951546:(e,r,n)=>{n.d(r,{Mk:()=>f,WY:()=>I});var a=n(299321),i=n(802691),o=n.n(i),s=n(38580),l=n(374626),c=n(776621),d=n(356390),u=n(404109),m=n(820904),p=n(788193),h=n(999198),_=n(173454);_.PW.RESPONSIVE_SET,a.PWo.RESPONSIVE_SET,_.PW.CODE_LIBRARY,a.PWo.CODE_LIBRARY,_.PW.CODE_FILE,a.PWo.CODE_FILE,_.PW.CODE_COMPONENT,a.PWo.CODE_COMPONENT;let g={[a.PWo.RESPONSIVE_SET]:{[a.Ocq.LOCAL]:h.X1,[a.Ocq.SUBSCRIBED]:h._t},[a.PWo.CODE_LIBRARY]:{[a.Ocq.LOCAL]:p.V,[a.Ocq.SUBSCRIBED]:p.Q},[a.PWo.CODE_FILE]:{[a.Ocq.LOCAL]:m.y,[a.Ocq.SUBSCRIBED]:m.d},[a.PWo.CODE_COMPONENT]:{[a.Ocq.LOCAL]:u.r,[a.Ocq.SUBSCRIBED]:u.I}},f={[_.PW.RESPONSIVE_SET]:{local:E(a.PWo.RESPONSIVE_SET,a.Ocq.LOCAL),subscribed:E(a.PWo.RESPONSIVE_SET,a.Ocq.SUBSCRIBED)},[_.PW.CODE_LIBRARY]:{local:E(a.PWo.CODE_LIBRARY,a.Ocq.LOCAL),subscribed:E(a.PWo.CODE_LIBRARY,a.Ocq.SUBSCRIBED)},[_.PW.CODE_FILE]:{local:E(a.PWo.CODE_FILE,a.Ocq.LOCAL),subscribed:E(a.PWo.CODE_FILE,a.Ocq.SUBSCRIBED)},[_.PW.CODE_COMPONENT]:{local:E(a.PWo.CODE_COMPONENT,a.Ocq.LOCAL),subscribed:E(a.PWo.CODE_COMPONENT,a.Ocq.SUBSCRIBED)}};function E(e,r){let n=g[e][r],i=(0,s.eU)({}),c=(0,l.FZ)(i,(e,r)=>{if("changed"in r){let n=r.changed;return{...e,...n.reduce((e,r)=>(e[r.assetId]=r,e),{})}}if("removed"in r){let n=new Set(r.removed);return o()(e,e=>e&&!n.has(e.assetId))}return"reset"in r?{}:e}),u=`assetByKeyAtom(${a.PWo[e]}, ${a.Ocq[r]})`;return c.debugLabel=u,c.onMount=i=>{var o;let s=()=>{i({changed:a.P5M.getAllAssets(e,r).map(n).filter(e=>null!==e)})};d.Y5.isReady()?s():d.Y5.onReady().then(s);let l=(o=e=>{i(e)},y[e][r]=o,()=>{y[e][r]=null});return()=>{l(),i({reset:!0})}},c}let y={[a.PWo.RESPONSIVE_SET]:{[a.Ocq.LOCAL]:null,[a.Ocq.SUBSCRIBED]:null},[a.PWo.CODE_LIBRARY]:{[a.Ocq.LOCAL]:null,[a.Ocq.SUBSCRIBED]:null},[a.PWo.CODE_FILE]:{[a.Ocq.LOCAL]:null,[a.Ocq.SUBSCRIBED]:null},[a.PWo.CODE_COMPONENT]:{[a.Ocq.LOCAL]:null,[a.Ocq.SUBSCRIBED]:null}};class b{syncAddedOrChangedAssets(e,r,n){if(r===a.Ocq.SUBSCRIBED){let i=g[e]?.[a.Ocq.SUBSCRIBED];if(!i){(0,c.x1)("design-systems",`No parser found for ${e} and ${r}`);return}y[e]?.[a.Ocq.SUBSCRIBED]?.({changed:n.map(i).filter(e=>null!==e)})}else if(r===a.Ocq.LOCAL){let i=g[e]?.[a.Ocq.LOCAL];if(!i){(0,c.x1)("design-systems",`No parser found for ${e} and ${r}`);return}y[e]?.[a.Ocq.LOCAL]?.({changed:n.map(i).filter(e=>null!==e)})}else(0,c.x1)("design-systems",`Invalid subscription status for AssetMirror: ${r}`)}syncRemovedAssets(e,r,n){y[e]?.[r]?.({removed:n})}resetMirrorCache(){for(let e of Object.values(y))for(let r of Object.values(e))r?.({reset:!0})}}function I(){new b}},960884:(e,r,n)=>{n.d(r,{Z:()=>o});var a=n(694687),i=n(529928);let o=(0,i.bt)(({currentUserOrgId:e,orgById:r})=>(0,a.td)(e,r));(0,i.bt)(({orgUsersByOrgId:e})=>e)},106757:(e,r,n)=>{n.d(r,{UQ:()=>l,kS:()=>s,p9:()=>o});var a=n(38580),i=n(529928);let o=(0,i.bt)(e=>e.user),s=(0,a.eU)(e=>e(o)?.id);(0,a.eU)(e=>e(o)?.created_at),(0,i.bt)(e=>e.userStateLoaded);let l=(0,i.bt)(e=>e.isStarterUser)},752353:(e,r,n)=>{n.d(r,{gh:()=>C});var a=n(299321),i=n(904669),o=n(776250),s=n(38329),l=n(966712),c=n(38580),d=n(374626),u=n(776621),m=n(47506),p=n(939863),h=n(392592),_=n(988022),g=n(149992),f=n(978757),E=n(809444),y=n(434507),b=n(198868);let I=(0,c.eU)(new Set),T=(0,c.eU)(new Set),v=(0,c.eU)("");function S(e){let r=e=>{let n=0;for(let a of e)"FRAME"===a.type&&(n+=1),"children"in a&&(n+=r(a.children));return n};return r(e)}function w(e,r=1){let n=JSON.parse(JSON.stringify(e));return n.length<1?n:r<1&&"opacity"in n[0]?n.map(e=>({...e,opacity:e.opacity*r})):n}function A(e,r,n,a=!0,i=1){if(Array.isArray(e[n])&&Array.isArray(r[n])){let o=a?[...w(r[n]),...w(e[n],i)]:[...w(e[n],i),...w(r[n])];r[n]=o}}class N{async autoSegmentNodesByRegion(e,r){let n=(0,b.D)(),a=[],i=[];for(let n of e){let{rootNode:e,newNodes:o}=await this.autoSegmentNodes(n,r);e&&i.push(e),o.forEach(e=>a.push(e))}d.zl.set(I,new Set(a.map(({id:e})=>e))),d.zl.set(T,new Set(i.map(({id:e})=>e))),(0,g.z)(i,a);let o=n.currentPage;return o.selection=o.selection.concat(i),!0}async autoSegmentNodes(e,r){let n;let c=(0,b.D)();try{var d;let u=performance.now(),m=(await Promise.all(e.map(e=>c.getNodeByIdAsync(e)))).filter(e=>e),_=S(m),g=function(e){let r=[...e],n=[];for(;r.length;){let e=r.pop();if(!e)break;n.push(e.id),"children"in e&&e.children.forEach(e=>{r.push(e)})}return n}(m),b=(n=await (0,f.N7)(m,c,r))?S([n]):0;if(d=b-_,(0,s.D.dispatch)(h.F.enqueue({type:"msal-frames-created",message:(0,p.t)("fullscreen.properties_panel.stack_panel.msal_crated_frames_count",{count:d})})),(0,l.kc)().ce_al_track_msal_duration&&(0,o.sx)("autolayout_auto_segment_selection",{duration_ms:performance.now()-u,selectionSizeBeforeMSAL:_,selectionSizeAfterMSAL:b},{forwardToDatadog:!0}),n){!function e(r,n){if(!r||"FRAME"!==r.type)return;for(let a of r.children)e(a,n);let i=a.Qa7.getBackgroundNodeCandidatesByGUID(r.id);if(0===i.backgroundNodes.length)return;let o=n.getNodeById(i.backgroundNodes[0]);if(r.resize(o.width,o.height),o.absoluteBoundingBox&&r.absoluteBoundingBox){let e=o.absoluteBoundingBox.x-r.absoluteBoundingBox.x,n=o.absoluteBoundingBox.y-r.absoluteBoundingBox.y;r.x+=e,r.y+=n}for(let e of i.backgroundNodes){let a=n.getNodeById(e);a&&function(e,r,n=!0,a="transferAndMaybeRemoveBackgroundNode",i=!0){if((0,E.Rm)(`${a}`,`Merging background node (${e.id}) into: ${r}`,3),e.removed)return;let o=1;i&&"opacity"in e&&(o=e.opacity),A(e,r,"fills",n,o),A(e,r,"effects",n,o),A(e,r,"strokes",n,o),"strokes"in e&&e.strokes.length>0&&(r.strokeWeight=e.strokeWeight,r.strokeJoin=e.strokeJoin,r.dashPattern=e.dashPattern,r.strokeAlign=e.strokeAlign,"strokeCap"in e&&!r.strokeCap&&(r.strokeCap=e.strokeCap),"strokeMiterLimit"in e&&(r.strokeMiterLimit=e.strokeMiterLimit),"strokeLeftWeight"in e&&"number"==typeof e.strokeLeftWeight&&0===r.strokeLeftWeight&&(r.strokeLeftWeight=e.strokeLeftWeight),"strokeRightWeight"in e&&"number"==typeof e.strokeRightWeight&&0===r.strokeRightWeight&&(r.strokeRightWeight=e.strokeRightWeight),"strokeTopWeight"in e&&"number"==typeof e.strokeTopWeight&&0===r.strokeTopWeight&&(r.strokeTopWeight=e.strokeTopWeight),"strokeBottomWeight"in e&&"number"==typeof e.strokeBottomWeight&&0===r.strokeBottomWeight&&(r.strokeBottomWeight=e.strokeBottomWeight)),"cornerRadius"in e&&"number"==typeof e.cornerRadius&&0===r.cornerRadius&&(r.cornerRadius=e.cornerRadius),"topLeftRadius"in e&&"number"==typeof e.topLeftRadius&&0===r.topLeftRadius&&(r.topLeftRadius=e.topLeftRadius),"bottomLeftRadius"in e&&"number"==typeof e.bottomLeftRadius&&0===r.bottomLeftRadius&&(r.bottomLeftRadius=e.bottomLeftRadius),"topRightRadius"in e&&"number"==typeof e.topRightRadius&&0===r.topRightRadius&&(r.topRightRadius=e.topRightRadius),"bottomRightRadius"in e&&"number"==typeof e.bottomRightRadius&&0===r.bottomRightRadius&&(r.bottomRightRadius=e.bottomRightRadius),"ELLIPSE"===e.type&&(0,y.n4)(e.width,e.height)&&(r.cornerRadius=r.width),function(e,r){if(!e||!e.boundVariables)return;let n=e.boundVariables;for(let e of["width","height","paddingLeft","paddingRight","paddingTop","paddingBottom","topLeftRadius","topRightRadius","bottomLeftRadius","bottomRightRadius","minWidth","maxWidth","minHeight","maxHeight","counterAxisSpacing","strokeWeight","strokeTopWeight","strokeRightWeight","strokeBottomWeight","strokeLeftWeight"]){let a=n[e];a&&r.setBoundVariable(e,a.id)}}(e,r),i&&e.remove()}(a,r,!0,"recursivelyMergeBackgroundFillToTLF")}}(n,c);let e=(0,i.UN)().get(n.id);return!e||e.isTopLevelFrame()||e.isState||(n.name="Frame"),{rootNode:n,newNodes:function e(r,n){let a=[];return n.has(r.id)||a.push(r),"children"in r&&r.children.forEach(r=>{let i=e(r,n);a=a.concat(i)}),a}(n,new Set(g))}}}catch(n){(0,u.x1)("auto-layout","Error running AAL segmentation",{e:n});let r=s.D.dispatch;"GraphResolutionError"===n.name?((0,_.ds)("msal_error_try_again",s.D.getState().openFile?.key,s.D.getState(),{error:n,nodeIds:e}),r(h.F.enqueue({type:"msal-failure-graph-resolution",message:(0,p.t)("fullscreen.visual_bell.try_again_msal")}))):(c.commitUndo(),c.triggerUndo(),(0,_.ds)("msal_error_couldnt_suggest_auto_layout",s.D.getState().openFile?.key,s.D.getState(),{error:n,nodeIds:e}),r(h.F.enqueue({type:"msal-failure-other",message:(0,p.t)("fullscreen.visual_bell.could_not_suggest_auto_layout")})))}return{rootNode:null,newNodes:[]}}async makeResponsive2(e){let r=(0,b.D)();for(let n of e)for(let e of n)await (0,f.cx)(e,r);return r.commitUndo(),!0}shouldRunSimpleStackDetection(e){let r=(0,b.D)();return(0,f.sg)(e,r)}runMakeResponsiveHeuristics(e){let r=(0,b.D)();(0,f.cx)(e,r)}trackShouldShowMSALOnboarding(e){d.zl.set(v,e),(0,m.YQ)({id:"would-have-used-msal-onboarding-event"})}async destroyAllAutoLayout(e){let r=(0,b.D)(),n=await (0,f.vk)(e,r),a=s.D.dispatch,i=n>0?(0,p.t)("fullscreen_actions.destroy-all-auto-layout-result-visual-bell-toast",{numAutoLayoutsRemoved:n}):(0,p.t)("fullscreen_actions.destroy-all-auto-layout-result-visual-bell-toast-zero");return a(h.F.enqueue({message:i})),(0,o.sx)("action_destroy_all_auto_layout",{numAutoLayoutsRemoved:n}),r.commitUndo(),!0}}function C(){new N}},81766:(e,r,n)=>{n.d(r,{z4:()=>d});var a=n(299321),i=n(38329),o=n(776621),s=n(788811),l=n(63104);class c{readyToAcceptAutosaveChanges(){return!!s.ZG()?.session()?.readyToAcceptChanges()}hasOngoingCommitTask(){return!!s.ZG()?.session()?.hasOngoingCommitTask()}async enqueueAutosaveCommit(e,r,n,i,o,c){let d=(0,s.ZG)();if(!d)return(0,l.W6)("AutosaveManager should not be null when committing"),!0;let u=d.session();return!u||(await u.enqueueAutosaveCommit({changes:e,commitPolicy:r,fileVersion:n,fileKey:i,newSessionID:a.h3O.currentSessionID(),numberOfUncleanRegisters:o,reason:c}),!0)}createAutosaveManager(e){let r=i.D.getState().user;if(!r){(0,o.Lo)("Autosave","Not creating manager for logged out user");return}(0,s.mu)(e,r.id)}destroyAutosaveManager(){(0,s.t)()}isConnected(){return s.ZG()?.managerState==="connected"}}function d(){new c}},356390:(e,r,n)=>{let a,i,o;n.d(r,{$q:()=>h,BI:()=>i,XT:()=>c,Y5:()=>a,Zi:()=>p,_W:()=>u,fT:()=>m,lQ:()=>s,s$:()=>l,uF:()=>d});let s=new Promise(e=>{o=e});function l(e){a=e,window._fullscreen_=a,o()}function c(e){i=e}function d(e){u=e}let u=null;function m(e){}function p(e){}function h(e){}},160402:(e,r,n)=>{n.d(r,{Iu:()=>s}),n(299321);let a=new Set;class i{nodeBoundsChanged(){for(let e of a)e()}}let o=null;function s(){return o||(o=new i),o}},478556:(e,r,n)=>{n.d(r,{n:()=>i}),n(383112),n(299321),n(632001);var a=n(173292);function i(e){(0,a.o)()}n(456363),n(939863),n(392592),n(772167),n(776726),n(179536)},541524:(e,r,n)=>{n.d(r,{C4:()=>g,D2:()=>m,Er:()=>u,FJ:()=>l,H3:()=>d,cB:()=>_,cu:()=>p,fG:()=>E,fb:()=>h,gU:()=>c,l7:()=>y,yH:()=>f});var a=n(234352),i=n(563850),o=n(299321),s=n(96328);let l="<!--(figma)",c="(/figma)-->",d='<span data-buffer="'+l,u=c+'"></span>',m="<!--(figmeta)",p="(/figmeta)-->",h='<span data-metadata="'+m,_=p+'"></span>';function g(e,r,n){let a='<meta charset="utf-8">'+d+(0,i.lF)(r)+u+(0,s.hX)(n);try{e.setData("text/html",a)}catch(e){console.warn("DataTransfer failed in clipboard event")}}function f(e){let r;try{r=e.getData("text/html")}catch(e){return console.warn("DataTransfer failed in clipboard event"),null}return function(e){let r=e.indexOf(l),n=e.indexOf(c);return r>=0&&n>=0&&r<n?(0,i.D4)(e.slice(r+l.length,n)):null}(r)}function E(e,r){let n=a.w.encodeMessage({type:"STYLE",pasteFileKey:null!=e?e:void 0,sessionID:0,ackID:0,nodeChanges:[{guid:{sessionID:0,localID:0},phase:"CREATED",...r}]});return o.glU.encodeClipboardData(n)}function y(e){return a.w.decodeMessage(o.glU.decodeClipboardData(e))}},601978:(e,r,n)=>{n.d(r,{Eh:()=>c,dM:()=>u,dX:()=>m});var a=n(966712),i=n(776621),o=n(460187),s=(e=>(e[e.Unknown=0]="Unknown",e[e.No=1]="No",e[e.Yes=2]="Yes",e))(s||{});let l=0;function c(e,r){if("srgb"===r)return e.getContext("2d");{let n=(0,o.p3)();return e.getContext("2d",{colorSpace:n?"srgb":r})}}let d=document.createElement("canvas").getContext("2d",{colorSpace:"srgb",willReadFrequently:!0})?.canvas;function u({canvas:e,canvasWidth:r,canvasHeight:n,renderCanvas:c,value:u,colorSpace:m,initializeCanvasColorSpace:p=!1}){if(p&&e.getContext("2d",{colorSpace:m}),((0,a.kc)().ee_color_management_force_canvas||(0,o.p3)())&&1!==l){if(d){d.width=r,d.height=n,c(d,u);let m=d.getContext("2d"),p=e.getContext("2d");if(m&&p)try{!function(e,r){if(e.canvas.width!==r.canvas.width||e.canvas.height!==r.canvas.height)throw Error("source ctx and target ctx dimensions don't match");if("getContextAttributes"in e&&"srgb"!==e.getContextAttributes().colorSpace)throw Error("source ctx is not srgb");if("getContextAttributes"in r&&"display-p3"!==r.getContextAttributes().colorSpace&&!((0,a.kc)().ee_color_management_force_canvas&&"srgb"===r.getContextAttributes().colorSpace))throw Error("target ctx is not display-p3");let[n,i]=[r.canvas.width,r.canvas.height],o=e.getImageData(0,0,n,i),s=new ImageData(o.data,o.width,o.height,{colorSpace:"getContextAttributes"in e?r.getContextAttributes().colorSpace:"srgb"});r.clearRect(0,0,n,i),r.putImageData(s,0,0)}(m,p),0===l&&(l=2)}catch{(0,i.Lo)("color management","polyfill failed",{ee_color_management_force_canvas:(0,a.kc)().ee_color_management_force_canvas,shouldUseCssColorLevel4Polyfill:(0,o.p3)(),is2dCanvasPolyfillSupportedByBrowser:s[l]}),c(e,u),l=1}}}else c(e,u)}function m(e){switch(e){case"fullscreen":case"mobile-viewer":return document.querySelector("#fullscreen-root canvas");case"prototype":return document.querySelector("#viewerContainer canvas");case"mirror":return document.querySelector("#mobileAppView canvas")}}},794950:(e,r,n)=>{n.d(r,{q:()=>l});var a=n(299321),i=n(966712),o=n(776621),s=n(399512);let l=new class{constructor(){this.onFrameCb=null,this.switchWebglColorSpace=(e,r,n)=>{let l=e.drawingBufferColorSpace;switch(r){case a.RYP.SRGB:if("srgb"===l)return;(0,i.kc)().viewer_p3_fix&&("mirror"===n||"prototype"===n)?(s.l.setCanvasColorProfile(a.RYP.SRGB),e.drawingBufferColorSpace="srgb"):(e.drawingBufferColorSpace="srgb",s.l.setCanvasColorProfile(a.RYP.SRGB));break;case a.RYP.DISPLAY_P3:if("display-p3"===l)return;(0,i.kc)().viewer_p3_fix&&("mirror"===n||"prototype"===n)?(s.l.setCanvasColorProfile(a.RYP.DISPLAY_P3),e.drawingBufferColorSpace="display-p3"):(e.drawingBufferColorSpace="display-p3",s.l.setCanvasColorProfile(a.RYP.DISPLAY_P3));break;default:(0,o.x1)("color management","unsupported color space",{targetColorSpace:r})}}}onFrame(){a.fZb&&a.fZb?.startProfile("color-management-on-frame",100),this.onFrameCb&&this.onFrameCb(),this.onFrameCb=null,a.fZb&&a.fZb?.stopProfile(100)}queueSwitchWebglColorSpace(e,r,n){"mirror"===n?this.switchWebglColorSpace(e,r,n):this.onFrameCb=()=>{this.switchWebglColorSpace(e,r,n)}}}},285381:(e,r,n)=>{n.d(r,{ZH:()=>T,il:()=>N,Ep:()=>b,R6:()=>I});var a=n(411855),i=n(299321),o=n(374626),s=n(15220),l=n(192437),c=n(356390),d=n(488983),u=n(100197),m=n(601978),p=n(436576),h=n(162620),_=n(794950);let g=(0,n(38580).eU)(!1);function f(e){let[r,n]=(0,o.fp)(g);return a.useEffect(()=>{r&&n(!1)},[r,n]),r?null:a.createElement(a.Fragment,null,e.children)}var E=n(665723);let y=a.createContext({canvasColorProfile:i.RYP.SRGB,documentColorProfile:i.ywP.LEGACY,documentExportColorProfile:i.RYP.SRGB});function b(){return a.useContext(y).canvasColorProfile}function I(){return a.useContext(y).documentColorProfile}let T=y.Consumer;function v(e){let{children:r,colorManagementStateJs:n}=e,o=(0,u.ut)(n?.documentColorProfile(),i.ywP.LEGACY),s=(0,p.H)(o),{colorProfilePreference:l}=(0,E.jK)(),c=a.useMemo(()=>({documentColorProfile:o,documentExportColorProfile:(0,h.j)(o,l),canvasColorProfile:s}),[l,o,s]);return a.createElement(y.Provider,{value:c},r)}function S(e){return(0,E.jK)(),a.createElement(v,{colorManagementStateJs:i.H4l},e.children)}function w({target:e,viewer:r}){let[n,i]=a.useState(null),o=a.useCallback(()=>{if(n)return!0;if((0,s.Vu)())return!1;let r=(0,m.dX)(e);if(r){let n=null;switch(e){case"fullscreen":case"mobile-viewer":n=(0,s.ap)()?r.getContext("webgl2"):r.getContext("webgl");break;case"prototype":case"mirror":n=(0,s.WQ)()?r.getContext("webgl2"):r.getContext("webgl")}return i(n),!0}return!1},[e,n]);a.useEffect(()=>{if(!o())switch(e){case"fullscreen":case"mobile-viewer":c.Y5.onReady().then(()=>{o()});break;case"prototype":case"mirror":r&&r.on("documentIsLoaded",()=>{o()})}},[o,e,r]);let l=b();return a.useEffect(()=>{n&&_.q.queueSwitchWebglColorSpace(n,l,e)},[l,e,n]),null}function A({viewer:e,target:r}){return a.createElement(l.tH,{boundaryKey:"color-management",fallback:l.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:d.y4},a.createElement(o.An,null,a.createElement(f,null,a.createElement(S,null,a.createElement(w,{target:r,viewer:e})))))}function N({viewer:e}){return a.createElement(A,{target:"prototype",viewer:e})}},460187:(e,r,n)=>{n.d(r,{Av:()=>I,Pv:()=>p,VG:()=>l,p3:()=>_,tK:()=>f});var a=n(411855),i=n(299321),o=n(517333),s=n(479296);function l(e){switch(e){case i.RYP.SRGB:return"srgb";case i.RYP.DISPLAY_P3:return"display-p3";default:throw Error(`unrecognized color profile: ${e}`)}}let c=e=>{try{if(e===i.RYP.SRGB)return!0;let r=document.createElement("canvas").getContext("webgl");if(!r)throw Error("failed to create webgl canvas context to determine support");if(!("drawingBufferColorSpace"in r))throw Error("webgl context does not contain drawingBufferColorSpace attribute");let n=l(e);if(r.drawingBufferColorSpace=n,r.drawingBufferColorSpace!==n)throw Error(`webgl context does not support color space: ${n}`);return!0}catch(e){return!1}},d=new Map,u=(0,s.n)(e=>{if(d.has(e))return d.get(e);let r=c(e);return d.set(e,r),r}),m=(0,s.n)(e=>{try{if(e===i.RYP.SRGB)return!0;let r=document.createElement("canvas"),n=l(e),a=r.getContext("2d",{colorSpace:n});if(a){if("getContextAttributes"in a){if(a.getContextAttributes().colorSpace!==n)throw Error("2d canvas context does not match the desired color space")}else throw Error("2d canvas context does not support getContextAttributes")}else throw Error("failed to create 2d canvas context to determine support");if(_()){let e=new ImageData(new Uint8ClampedArray([0,0,0,0]),1,1,{colorSpace:n});if(!("colorSpace"in e)||e.colorSpace!==n)throw Error(`image does not support color space: ${n}`)}return!0}catch(e){return!1}}),p=()=>"undefined"!=typeof CSS&&"function"==typeof CSS.supports&&CSS.supports("color","color(display-p3 1 1 1)"),h=()=>window.matchMedia("(color-gamut: p3)").matches,_=()=>!p();async function g(){if(!o.eD)return;let e=await o.eD.getActiveNSScreens();if(e){for(let r of e)if(!r.isCurrentWindow&&r.canRepresentDisplayGamutP3)return r.localizedName}}function f(e){switch(e.status){case"SupportedNatively":case"SupportedWithPolyfill":return!0;case"MonitorNotSupported":case"ClientNotSupported":return!1}}let E=()=>{let[e,r]=a.useState();return a.useEffect(()=>{g().then(r)},[]),e},y=()=>{let[e,r]=a.useState(h());return a.useEffect(()=>{let e=setInterval(()=>{r(h())},5e3);return()=>{clearInterval(e)}},[]),e},b=()=>o.eD&&"unmanaged"===o.eD.getColorSpace();function I(){let e=a.useMemo(()=>u(i.RYP.DISPLAY_P3),[]),r=a.useMemo(()=>m(i.RYP.DISPLAY_P3),[]),n=a.useMemo(()=>p(),[]),s=b(),l=E(),c=y();return e&&r?s?{status:"ClientNotSupported",diagnostics:{client:"desktop-app",shouldRestartDesktopAppInManagedColorSpace:!0}}:c?n?{status:"SupportedNatively",diagnostics:null}:{status:"SupportedWithPolyfill",diagnostics:null}:{status:"MonitorNotSupported",diagnostics:{alternativeMonitorName:l}}:{status:"ClientNotSupported",diagnostics:{client:o.eD?"desktop-app":"browser"}}}},665723:(e,r,n)=>{n.d(r,{YN:()=>y,eu:()=>g,hP:()=>E,it:()=>I,jK:()=>b}),n(411855);var a=n(299321),i=n(167249),o=n(38329),s=n(38580),l=n(374626),c=n(684107),d=n(827697),u=n(27087),m=n(988022),p=n(99506),h=n(585575);let _={colorProfilePreference:p.E9.DEFAULT,id:""},g=(0,i.N)("USER_UPDATE_COLOR_PROFILE"),f=(0,s.eU)(e=>{let r=e((0,c.Zx)({})),n=_.colorProfilePreference;"loading"===r.status&&void 0!==o.D&&o.D?.getState()?.user?.color_profile?n=o.D.getState().user?.color_profile:r.data?.userColorProfilePreference?.colorProfilePreference&&(n=r.data?.userColorProfilePreference?.colorProfilePreference);let a={colorProfilePreference:function(e){switch(e){case p.E9.DEFAULT:return h.M.DEFAULT;case p.E9.SRGB:return h.M.SRGB;case"display-p3":case p.E9.DISPLAY_P3:return h.M.DISPLAY_P3}}(n),id:r.data?.userColorProfilePreference?.id??_.id};return void 0!==o.D&&o.D?.getState()?.user?.color_profile!==a.colorProfilePreference&&o.D.dispatch(g({color_profile:a.colorProfilePreference})),a});function E(e){switch(e){case h.M.DEFAULT:case h.M.SRGB:return a.RYP.SRGB;case h.M.DISPLAY_P3:return a.RYP.DISPLAY_P3}}function y(){return l.zl.get(f)}function b(){return(0,l.md)(f)}function I({colorProfilePreference:e,id:r,eventName:n="user_manual_change",additionalDataToLog:a}){if(e===_.colorProfilePreference)return;!function(e){let r=o.D.getState();(0,m.uE)("color_profile_preference",r,{userColorProfile:e.userColorProfilePreference.colorProfilePreference,userColorProfileId:e.userColorProfilePreference.id,eventName:e.eventName,...e.additionalDataToLog??{}})}({userColorProfilePreference:{colorProfilePreference:e,id:r},eventName:n,additionalDataToLog:a});let i=u.Ay.put("/api/user",{color_profile:e});if(r)d.WB()?.optimisticallyUpdate({UserColorProfilePreference:{[r]:{colorProfilePreference:e}}},i);else{let r=o.D.getState().user?.id;if(!r)return;d.WB()?.optimisticallyCreate({UserColorProfilePreference:{"optimistic-id":{colorProfilePreference:e,userId:r,createdAt:new Date,updatedAt:new Date}}},i)}}},496201:(e,r,n)=>{n.d(r,{YL:()=>s});var a=n(23334),i=n(138392);class o{calculateColorWithRampValue(e,r){let n=(0,i.jA)((0,a.aH)(e),r);return n?(0,a.oU)(n):null}calculateColorWithRelativeAdjustment(e,r){let n=(0,i.Hd)((0,a.aH)(e),r);return n?(0,a.oU)(n):null}getRampValueForColor(e){return(0,i.Wn)((0,a.aH)(e))}}function s(){new o}},498083:(e,r,n)=>{let a;n.d(r,{AU:()=>c,T6:()=>m,lS:()=>a,on:()=>l});var i=n(38329),o=n(975350);let s={mousedown:new Set,mousemove:new Set,mouseup:new Set};function l(e,r){s[e].add(r)}function c(e,r){s[e].delete(r)}function d(e){return(r,n)=>{for(let a of s[e])a({x:r,y:n})}}function u(e,r,n){i.D.dispatch(o.vV({anchorPosition:{x:r,y:n}})),i.D.dispatch(o.CX({stablePath:e}))}function m(){a={handleMouseDown:d("mousedown"),handleMouseMove:d("mousemove"),handleMouseUp:d("mouseup"),createNewCommentAtPosition:u}}},968783:(e,r,n)=>{n.d(r,{vk:()=>m});var a=n(7674),i=n(304061),o=n(980820),s=n(402603),l=n(279145),c=n(378762);class d{constructor(){this.indexer={}}next(e){return null==this.indexer[e]?this.indexer[e]=0:this.indexer[e]++,this.indexer[e]}}let u={PNG:".png",JPEG:".jpg",SVG:".svg",PDF:".pdf"};function m(e,r,n,a){let i,o;if("CANVAS"===e)""===(i=n).trim()&&(i="Untitled"),o=i=i.replace(/\//g,"_");else{(i=r).endsWith("/")&&(i=i.substr(0,i.length-1));let e=i.lastIndexOf("/");for(let r of(o=-1!==e?i.substr(e+1,i.length):i,a)){let e=r.substr(0,r.lastIndexOf("/"));e.length>0&&(i=e+"/"+i)}}return{name:i,title:o}}function p(e){return("FRAME"===e.type||"SYMBOL"===e.type)&&!e.resizeToFit}(0,o.nF)(e=>{let r=e.getState(),n=[],o=[],h=r.mirror,_=h.sceneGraph,g=e=>{(null!=e.exportSettings&&e.exportSettings.length>0||p(e))&&n.push(e)};if((0,a.Im)(h.sceneGraphSelection)){let e=_.get((0,l.Nf)(h.appModel));e&&((0,i.hV)(e,g),(0,i.hV)(e,e=>{let r=e.parentNode;p(e)&&null!=r&&"CANVAS"===r.type&&o.push({nodeID:e.guid,name:e.name})}))}else(0,c.y2)(_,h.sceneGraphSelection,g),(0,c.YI)(_,h.sceneGraphSelection,e=>{p(e)&&o.push({nodeID:e.guid,name:e.name})});let f="Untitled";r.openFile&&(f=r.openFile.name);let E=[],y=new d,b=new d;for(let e of n){let r=(0,i.DS)(h.sceneGraph,e.guid).filter(e=>!e.visible);if(!e.visible||r.length>0)continue;let n=e.exportSettings;if(null!=n)for(let r of n){if(null==r.imageType)continue;let n=(0,i.DS)(h.sceneGraph,e.guid).map(e=>e.name),{name:a,title:o}=m(e.type,e.name,f,n),s=function(e,r,n,a){let i=`${e}-${r}-${n.imageType}-${n.suffix}`;return`${i}-${a.next(i)}`}(e.guid,a,r,b),{filename:l,isDuplicate:c}=function(e,r,n,a){let i;let o=!1;""===e.trim()&&(e="Untitled"),i=`${e}${r}${n}`;let s=a.next(`${i}`);return s>0&&(i=`${e}${r}-${s}${n}`,o=!0),{filename:i,isDuplicate:o}}(a,r.suffix||"",u[r.imageType],y);E.push({itemID:s,nodeID:e.guid,title:o,filename:l,exportSetting:r,warning:c?"Name duplicated":void 0,warningTooltip:c?`Renamed to ${l}`:void 0})}}e.dispatch(s.j({items:E,frames:o}))})},927871:(e,r,n)=>{n.d(r,{pH:()=>d});var a=n(776250),i=n(966712),o=n(27087),s=n(99506),l=n(755515);class c{constructor(e){this.store=e}trackComponentInstanceInsertion(e){let r=this.state.openFile?.key,n=!!this.state.user;if(null==r||!n||this.state.openFile?.editorType===s._Y.SLIDES||(0,i.kc)().dsa_restrict_actions_to_design&&!this.isInDesignFile())return;let a=[];for(let r in e){let n={component_key:r,count:e[r]};a.push(n)}try{o.Ay.post(`/api/component/${r}/insertions`,{insertions:a})}catch(e){}}trackComponentInstanceDetachment(e){let r=this.state.openFile,n=r?.key,l=!!this.state.user;if(null==r||null==n||!l)return;let c=r.editorType;if(c===s._Y.SLIDES||(0,i.kc)().dsa_restrict_actions_to_design&&!this.isInDesignFile()){a.az.trackDefinedEvent("design_systems_analytics.non_design_component_detached",{fileKey:n,componentKey:e,editorType:c||void 0});return}try{o.Ay.post(`/api/component/${n}/detachment/${e}`)}catch(e){}}trackComponentAction(e,r,n){let o=this.state.openFile,c=o?.key,d=!!this.state.user;if(null==o||null==c||!d)return;let u=o.editorType;if(u===s._Y.SLIDES||(0,i.kc)().dsa_restrict_actions_to_design&&!this.isInDesignFile()){e===l.Wc.DETACHMENT&&a.az.trackDefinedEvent("design_systems_analytics.non_design_component_detached",{fileKey:c,componentKey:Object.keys(r??{})[0],editorType:u||void 0});return}let m=Object.entries(r).map(([e,r])=>({key:e,count:r}));try{l.PT.recordComponentAction({action:e,action_source:n,fileKey:c,components:m})}catch(e){}}trackStyleAction(e,r,n){if(!(0,i.kc)().dsa_styles_variables_data_collection)return;let a=!!this.state.user;if(!this.isInDesignFile()||!a)return;let o=[];for(let[e,n]of Object.entries(r))o.push({key:e,count:n});if(0!==o.length)try{l.PT.recordStylesAction({action:e,action_source:n,fileKey:this.state.openFile?.key,styles:o})}catch(e){}}trackVariableAction(e,r,n){if(!(0,i.kc)().dsa_styles_variables_data_collection)return;let a=!!this.state.user;if(!this.isInDesignFile()||!a)return;let o=[];for(let[e,n]of Object.entries(r))o.push({key:e,count:n});if(0!==o.length)try{l.PT.recordVariablesAction({action:e,action_source:n,fileKey:this.state.openFile?.key,variables:o})}catch(e){}}isInDesignFile(){let e=this.state.openFile,r=e?.key;return null!=e&&null!=r&&e.editorType===s._Y.DESIGN}get state(){if(!this.store)throw Error("Calling _state without a valid store");return this.store.getState()}}function d(e){new c(e)}},559040:(e,r,n)=>{n.d(r,{zs:()=>i}),n(30637),n(392592);class a{constructor(e){this.store=e}showErrorBellInLocalDev(e){}onMissingEditScope(){this.showErrorBellInLocalDev("No edit scope is active")}onGuardrailViolation(){this.showErrorBellInLocalDev("Edit scope guardrail violated")}}function i(e){new a(e)}},350428:(e,r,n)=>{n.d(r,{A0:()=>b,Mc:()=>E,R4:()=>y});var a=n(411855),i=n(786013),o=n(299321),s=n(904669),l=n(966712),c=n(374626),d=n(335682),u=n(239737),m=n(222478),p=n(709731),h=n(30075),_=n(384775),g=n(41398),f=n(895083);function E(e,r=!1){let n=[];r?e.map(e=>{let r=(0,s.UN)().get(e);r&&r.visible&&0!==r.opacity&&n.push(r)}):e.forEach(e=>{let r=(0,s.UN)().get(e);r&&r.visible&&0!==r.opacity&&function e(r,n){if(r.visible&&0!==r.opacity)for(let a of(n.push(r),r.childrenNodes??[]))e(a,n)}(r,n)});let a=n.length>f.NB,i=[];return n.map(e=>{if((0,f.jX)(e,!1))return i.push(e.guid)}),{detectedUnnamedLayers:i.length>0,exceedingLayerLimit:a,renamableNodeGuids:i}}function y(e){let{detectedUnnamedLayers:r,exceedingLayerLimit:n,renamableNodeGuids:i}=E(e);r&&!n&&(0,_.$I)({moduleToOpen:{type:"custom",module:a.createElement(g.A,{source:o.uQ6.READY_FOR_DEV,numRenamableNodesForHandoff:i.length}),beforeModuleOpen:()=>{(0,p.B3)(m.JT.AUTO_RENAME_LAYERS)},name:h.Sn.RENAME_LAYERS_TOAST},trackingData:{source:"ready_for_dev_auto_rename_layers"}})}function b(e){if(!(0,u.W7)())return!1;let r=c.zl.get(d.yV);if(!r?.canEdit||r.editorType!==i._YF.DESIGN)return!1;switch(e){case o.uQ6.READY_FOR_DEV:return!!(0,l.kc)().aip_rename_layers_ready_for_dev;case o.uQ6.EXPORT_FRAME:case o.uQ6.EXPORT_PICKER:return!!(0,l.kc)().ai_prod_rename_layers_dev_export;case o.uQ6.CREATE_COMPONENT:case o.uQ6.CREATE_FRAME:case o.uQ6.DRAW_FRAME_AROUND_NODES:case o.uQ6.STACK_SELECTION:return!!(0,l.kc)().ai_prod_rename_layers_moments;case o.uQ6.LAYERS_PANEL_ACTION_ROW:return!!(0,l.kc)().aip_lpe;default:return!1}}},617453:(e,r,n)=>{n.d(r,{EU:()=>b,Ku:()=>_,RU:()=>y,UK:()=>h,UX:()=>f,W_:()=>S,dP:()=>g,lK:()=>T,qw:()=>E,sT:()=>I});var a=n(299321),i=n(966712),o=n(939863),s=n(287010),l=n(396697),c=n(100197),d=n(507956),u=n(949632),m=n(567245),p=n(652051);function h(){return a.Ez5.editorPreferences()}function _(){let e=(0,d.ks)(),r=(0,c.J2)(h().colorFormat);return r===a.NVY.CSS&&e||r===a.NVY.UIColor&&!e?a.NVY.RGB:r}function g(){return(0,c.ut)(a.Ez5?.editorPreferences().sidebarSplitPosition,l.R.sidebarSplitPosition)}function f(){return(0,c.ut)(a.Ez5?.editorPreferences().devHandoffInspectSplitPosition,320)}function E(){return(0,c.ut)(a.Ez5?.editorPreferences().propertiesPanelSplitPosition,l.R.propertiesPanelSplitPosition)}function y(){return(0,c.ut)(a.Ez5?.editorPreferences().bigNudgeAmount,s._q)}function b(){return(0,c.ut)(a.Ez5?.editorPreferences().smallNudgeAmount,s.bA)}function I(){return{smallNudgeAmount:b(),bigNudgeAmount:y()}}function T(){return(0,c.ut)(a.Ez5?.editorPreferences().renderRulers,!1)}let v=[{getObservable:()=>h().activeCanvasPixelPreview,getMessage:e=>({message:e?(0,o.t)("visual_bell.pixel_preview_enabled",{scaling:(0,u.d)().activeCanvasRetinaMode.getCopy()?"2x":"1x"}):(0,o.t)("visual_bell.pixel_preview_disabled")})},{getObservable:()=>h().renderGrid,getMessage:e=>({message:e?(0,o.t)("visual_bell.render_grid_visible"):(0,o.t)("visual_bell.render_grid_hidden")})},{getObservable:()=>h().snapToPixelGrid,getMessage:e=>({message:e?(0,o.t)("visual_bell.snap_to_pixel_grid_enabled"):(0,o.t)("visual_bell.snap_to_pixel_grid_disabled")})},{getObservable:()=>h().showMasks,getMessage:e=>({message:e?(0,o.t)("visual_bell.show_masks_visible"):(0,o.t)("visual_bell.show_masks_hidden")})},{getObservable:()=>(0,i.kc)().figjam_snap_to_dot_grid_reset?h().snapToDotGridStagingReset:h().snapToDotGrid,getMessage:e=>({message:e?(0,o.t)("visual_bell.snap_to_dot_grid_enabled"):(0,o.t)("visual_bell.snap_to_dot_grid_disabled")})},{getObservable:()=>h().snapToGeometry,getMessage:e=>({message:e?(0,o.t)("visual_bell.snap_to_geometry_enabled"):(0,o.t)("visual_bell.snap_to_geometry_disabled")})},{getObservable:()=>h().snapToObjects,getMessage:e=>({message:e?(0,o.t)("visual_bell.snap_to_objects_enabled"):(0,o.t)("visual_bell.snap_to_objects_disabled")})},{getObservable:()=>h().showFrameGrids,getMessage:e=>(0,m.jH)()?((0,m.Gk)(),{message:(0,o.t)("visual_bell.show_frame_grids_visible"),button:{text:(0,o.t)("visual_bell.show_frame_grids_hide_button"),action:e=>{e.stopPropagation(),a.Ez5.editorPreferences().showFrameGrids.set(!1)}}}):{message:e?(0,o.t)("visual_bell.show_frame_grids_visible"):(0,o.t)("visual_bell.show_frame_grids_hidden")}}];function S(){(0,p.Mo)(v)}},326069:(e,r,n)=>{n.d(r,{XR:()=>c});var a=n(377750),i=n(374626),o=n(531827),s=n(883211);class l{convertEmojiNameToString(e){let r=e.toLocaleLowerCase(),n=a.dN.searchSynchronized(r).filter(e=>e.id===r);return 0===n.length?"":function(e){let r=a.il.getDefaultSkin()||1;return String.fromCodePoint(...(e.skins[r-1]?e.skins[r-1].unified:e.skins[0].unified).split("-").map(e=>parseInt(e,16)))}(n[0])}setEmojiTypeaheadQuery(e){let r=e&&e.length>1?(0,o.oQ)(e):null;i.zl.set(s.ph,r)}clearEmojiTypeaheadQuery(){i.zl.set(s.ph,null)}isShowingEmojiTypeaheadResults(){let e=i.zl.get(s.ph);return!!e?.emojis?.length}setEmojiTypeaheadImageSet(e){i.zl.set(s.KG,e)}setEmojiTypeaheadTargetRect(e,r,n){i.zl.set(s.kh,{x:e,y:r,height:n,width:0})}}function c(){new l}},812821:(e,r,n)=>{let a;n.d(r,{CB:()=>a,eY:()=>m});var i=n(299321),o=n(38329),s=n(145519),l=n(460289),c=n(239671),d=n(301922);class u{constructor(){this._wheelActivatedAtMs=-1,this._triggerActiveWheelButtonListeners=[]}startChat(e,r,n){(0,d.q)().then(a=>{a||o.D.dispatch(s.F6({position:{x:e,y:r},source:n}))})}closeWheel(){o.D.dispatch(s.Ho())}handleShortcutPressWithType({viewportX:e,viewportY:r,source:n,openedViaHover:a,wheelType:d}){let u=o.D.getState();if("fullscreen"!==u.selectedView.view||u.selectedView.editorType!==c.nT.Whiteboard||this._wheelActivatedAtMs>0)return;this._wheelActivatedAtMs=window.performance.now();let m=u.multiplayerEmoji;"WHEEL"===m.type?(e=m.viewportX,r=m.viewportY,a=a??m.openedViaHover):a||i.glU.triggerAction("set-tool-default",null),o.D.dispatch(s.sp({wheelType:d&&("STAMP"===d?"STAMP2":"REACTION1"),isReadonly:u.mirror.appModel.isReadOnly,isJoinedToActiveVotingSession:(0,l.gR)(u),viewportX:e,viewportY:r,source:n,openedViaHover:a}))}handleShortcutPress(e,r,n){this.handleShortcutPressWithType({viewportX:e,viewportY:r,source:n})}addTriggerActiveWheelButtonListener(e){this._triggerActiveWheelButtonListeners.push(e)}removeTriggerActiveWheelButtonListener(e){let r=this._triggerActiveWheelButtonListeners.indexOf(e);r>=0&&this._triggerActiveWheelButtonListeners.splice(r,1)}handleShortcutRelease(e,r){if(this._wheelActivatedAtMs<0)return;let n=window.performance.now()-this._wheelActivatedAtMs;if(this._wheelActivatedAtMs=-1,n>300)for(let n of this._triggerActiveWheelButtonListeners)n({x:e,y:r})}updateEmojiWheelPosition(e,r){let n=o.D.getState();"fullscreen"===n.selectedView.view&&n.selectedView.editorType===c.nT.Whiteboard&&o.D.dispatch(s.sm({viewportX:e,viewportY:r}))}}function m(){a=new u}},283942:(e,r,n)=>{n.d(r,{BI:()=>f,W0:()=>m,f7:()=>E,jr:()=>g,nB:()=>_});var a=n(299321),i=n(498750),o=n(588169),s=n(860601),l=n(563706),c=n(946689),d=n(551608);n(801161);var u=n(356390),m=(e=>(e[e.YES=0]="YES",e[e.NO=1]="NO",e))(m||{}),p=(e=>(e[e.YES=0]="YES",e[e.NO=1]="NO",e))(p||{});let h=s.lQ;function _(e){h=e}function g(e,r=0,n=1){return!!function(e,r=0,n=1){return!!(u.Y5&&u.Y5.isRootElementVisible())&&!f(e,r,n)}(e,r,n)&&E(e,!0)}function f(e,r=1,n=1){let a=e.keyCode,o=(0,i.Fo)(e);if(a===i.Uz.TAB&&(0,i.sC)(e,i.xH.SHIFT));else if(l.Ay.mac&&e.ctrlKey&&(a===i.Uz.A||a===i.Uz.B||a===i.Uz.D||a===i.Uz.E||a===i.Uz.F||a===i.Uz.H||a===i.Uz.K||a===i.Uz.L||a===i.Uz.N||a===i.Uz.O||a===i.Uz.P||a===i.Uz.T||a===i.Uz.V));else if(a===i.Uz.DELETE||a===i.Uz.BACKSPACE||a===i.Uz.NUMPAD_DELETE||a===i.Uz.SPACE||a===i.Uz.ENTER||a===i.Uz.HOME||a===i.Uz.END||a===i.Uz.PAGE_UP||a===i.Uz.PAGE_DOWN||a===i.Uz.A&&1===n);else if(o&&a===i.Uz.Z&&1===r);else if(o||e.ctrlKey)return!1;return!0}function E(e,r=!1){let n;if("keydown"===e.type)n=a.Bx4.KEY_PRESS,h();else{if("keyup"!==e.type)return console.error("Invalid event passed to forwardKeyboardEvent"),!1;n=a.Bx4.KEY_RELEASE}let s=(0,o.v7)(),l={type:n,which:e.which,modifierKeys:(0,i.sN)(e),isRepeat:e.repeat,code:e.code??e.nativeEvent?.code,shouldUseLayoutAndCode:s!==a.aTn.UNKNOWN,layout:s},c=a.glU.handleKeyboardShortcut(l);return c&&e.preventDefault(),c}(0,c.ny)(g),(0,d.n)(g)},718083:(e,r,n)=>{n.d(r,{jx:()=>i});class a{constructor(e){this._store=e}get _state(){if(!this._store)throw Error("Calling _state without a valid store");return this._store.getState()}isInOrg(){return!!this._state.currentUserOrgId}}function i(e){new a(e)}},457025:(e,r,n)=>{n.d(r,{U2:()=>l,mr:()=>o});var a=n(960200);let i=new a.b("action");function o(e){i.trigger("action",e)}let s=new a.b("action");function l(e,r){s.trigger("action",[e,r])}},544949:(e,r,n)=>{n.d(r,{f:()=>_});var a=n(980820),i=n(662275),o=n(974105),s=n(396226),l=n(681655),c=n(984968),d=n(300874),u=n(851363),m=n(830114),p=n(449731),h=n(836479);(0,a.nF)(e=>{if(!l.F)return;let r=e.getState(),n=(0,o.e9)(r),a=n&&n.team_id&&r.teams[n.team_id];!a||(0,c.rR)(a,{type:c.sK.ADD_DESIGN_FILE})||(0,c.rR)(a,{type:c.sK.ADD_FIGJAM_FILE})||(0,c.rR)(a,{type:c.sK.ADD_SLIDES_FILE})?e.dispatch(i.to({type:m.O})):e.dispatch(i.to({type:p.DV,data:{team:a,resource:d.vL.FILE,action:u.ZN.CREATE_FILE,currentPlan:s.F.Plan.STARTER,upsellPlan:s.F.Plan.PRO,editorType:null}}))});let _=(0,a.nF)(e=>{l.F&&e.dispatch((0,h.u)({multiple:!1,accept:".sketch"}))})},769977:(e,r,n)=>{n.d(r,{Aq:()=>w,Ax:()=>l,Ay:()=>L,Bb:()=>I,E_:()=>h,Fx:()=>E,H0:()=>p,IM:()=>N,JT:()=>s,NY:()=>S,QU:()=>v,Re:()=>_,Ub:()=>d,Yc:()=>A,ZG:()=>C,_t:()=>u,bH:()=>y,co:()=>b,iL:()=>T,ju:()=>c,kO:()=>g,pA:()=>m,xe:()=>f});var a=n(904669),i=n(939863),o=n(113237);let s=[],l=8,c=436,d=36,u=524,m=4,p=24,h=24,_=6,g=18,f=12,E="#C4C4C4",y=4,b=[{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:1},blur:3},{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:3},blur:8},{type:"drop-shadow",color:{r:0,g:0,b:0,a:.18},offset:{x:0,y:0},blur:.5}],I={fontFamily:"Inter",fontSize:14,fontWeight:400,lineHeight:24,letterSpacing:-.084,width:436},T=8*I.fontSize/14,v={fontFamily:"Roboto Mono",fontSize:11,fontWeight:400,lineHeight:24,width:c};class S{static copySummaryDataToClipboard(e,r){let n=w(e,r);navigator.clipboard.writeText(n)}}function w(e,r){let n="";return n+=`${N(r)}

`,e.forEach(e=>{switch("h2"===e.type&&(n+="\n"),e.type){case"p":case"h1":case"h2":default:n+=e.content+"\n";break;case"li":n+=`\u2022 ${e.content}
`}}),n+=`
${(0,i.t)("whiteboard.ai.summary.summary_footer_disclaimer")}`}function A(e){return e.endsWith("...")?C():e+"."}function N(e){let r=new Date,n=parseInt(e,10);return n?(r.setTime(n),(0,i.t)("whiteboard.ai.summary.summary_header_disclaimer",{summaryGenerationDate:r})):(0,i.t)("whiteboard.ai.summary.summary_header_disclaimer_no_date")}function C(){return(0,i.t)("whiteboard.ai_summary.loading_text")}function L(e,r,n){let i=r.length>0,s=n&&n.length>0;if(!i||s)return!1;let l=(0,a.UN)().get(e);return!!l&&(!function(e,r,n=!0){e.isAlive&&(e.setWidgetSyncedState("syncedState:ai-summary-items",JSON.stringify(r)),n&&o.x.renderFirstPartyWidget(e.widgetId,e.guid))}(l,function(e){let r=JSON.parse(e),n=[{type:"p",context:"tldr",content:r.summary}];return r.supporting_points.forEach(({header:e,two_to_five_supporting_points:r})=>{n.push({type:"h2",content:e,context:"main_theme"}),r.forEach(e=>{n.push({type:"li",content:e,context:"supporting_point"})})}),n}(r)),!0)}},128803:(e,r,n)=>{n.d(r,{HP:()=>g,Nd:()=>S});var a=n(299321),i=n(323762),o=n(38329),s=n(939863),l=n(677664),c=n(988022),d=n(974105),u=n(450225),m=n(476560),p=n(306133),h=n(616121);function _(e,r){let n=d.d1(o.D.getState())?.key??"";(0,c.ds)(e,n,o.D.getState(),{domain:null!=r?(0,u.vO)(r):"",linkRenderType:u.Ci.LINK_PREVIEW,userId:o.D.getState().user?.id})}var g=(e=>(e.OPEN="open",e.VERTICAL="vertical",e.HORIZONTAL="horizontal",e.CONVERT_TO_TEXT="convert_to_text",e))(g||{});let f=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M12 12H16V13H13V27H27V24H28V27V28H13H12V27V13V12ZM27.0001 13H26.9913L27.0001 13.0088V13ZM20.0001 13H26.2999L17.0251 22.2747L17.7323 22.9818L27.0001 13.714V20H28.0001V12.5V12H27.5001H20.0001V13Z" fill="white" fill-opacity="0.8"/>
</svg>
`,E=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M17.7072 14L20.3536 16.6465L19.6465 17.3536L16.1465 13.8536L15.793 13.5L16.1465 13.1465L19.6465 9.64648L20.3536 10.3536L17.7072 13H21.5001C25.0762 13 28.0001 15.9239 28.0001 19.5C28.0001 21.3202 27.167 22.5686 26.3445 23.35C25.9353 23.7387 25.5272 24.0141 25.2208 24.1929C25.0671 24.2825 24.9377 24.3486 24.8448 24.393C24.7983 24.4153 24.7608 24.4322 24.7339 24.444C24.7204 24.4499 24.7095 24.4545 24.7014 24.4579L24.6914 24.462L24.688 24.4634L24.6868 24.4639L24.6862 24.4641C24.686 24.4642 24.6858 24.4643 24.5001 24C24.3144 23.5358 24.3142 23.5359 24.314 23.536L24.316 23.5351L24.3337 23.5275C24.3506 23.5201 24.3776 23.508 24.4131 23.491C24.4843 23.457 24.5893 23.4035 24.7169 23.3291C24.9729 23.1797 25.3148 22.9489 25.6557 22.625C26.3332 21.9814 27.0001 20.9799 27.0001 19.5C27.0001 16.4762 24.5239 14 21.5001 14H17.7072Z" fill="white" fill-opacity="0.8"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 20H12V21H16.5V29H17.5V21H22V20H17.5H16.5Z" fill="white" fill-opacity="0.8"/>
</svg>
`,y=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="40" height="40" fill="#9747FF"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M13 29V22H27V29H13ZM12 11C12 10.4477 12.4477 10 13 10H27C27.5523 10 28 10.4477 28 11V29C28 29.5523 27.5523 30 27 30H13C12.4477 30 12 29.5523 12 29V11Z" fill="white"/>
</svg>
`,b=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M13 29V22H27V29H13ZM12 11C12 10.4477 12.4477 10 13 10H27C27.5523 10 28 10.4477 28 11V29C28 29.5523 27.5523 30 27 30H13C12.4477 30 12 29.5523 12 29V11Z" fill="white" fill-opacity="0.8"/>
</svg>
`,I=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="40" height="40" fill="#9747FF"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M17 16H31V24H17V16ZM8 16C8 15.4477 8.44772 15 9 15H31C31.5523 15 32 15.4477 32 16V24C32 24.5523 31.5523 25 31 25H9C8.44772 25 8 24.5523 8 24V16Z" fill="white"/>
</svg>
`,T=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M17 16H31V24H17V16ZM8 16C8 15.4477 8.44772 15 9 15H31C31.5523 15 32 15.4477 32 16V24C32 24.5523 31.5523 25 31 25H9C8.44772 25 8 24.5523 8 24V16Z" fill="white" fill-opacity="0.8"/>
</svg>
`,v=`
<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M5.52518 13.6568L8.17683 11.0052L8.88394 11.7123L6.23229 14.3639C4.96308 15.6331 2.9053 15.6331 1.63609 14.3639C0.366889 13.0947 0.366889 11.0369 1.63609 9.76772L4.28774 7.11607L4.99485 7.82317L2.3432 10.4748C1.46452 11.3535 1.46452 12.7781 2.3432 13.6568C3.22188 14.5355 4.6465 14.5355 5.52518 13.6568ZM11.7124 8.88383L11.0053 8.17673L13.6569 5.52508C14.5356 4.6464 14.5356 3.22177 13.6569 2.34309C12.7782 1.46441 11.3536 1.46442 10.4749 2.34309L7.82328 4.99475L7.11617 4.28764L9.76782 1.63599C11.037 0.366784 13.0948 0.366784 14.364 1.63599C15.6332 2.90519 15.6332 4.96298 14.364 6.23218L11.7124 8.88383ZM6.26175 10.5043L10.5044 6.26164L9.73836 5.49561L5.49572 9.73825L6.26175 10.5043Z" fill="black" fill-opacity="0.5"/>
</svg>
`;function S({figma:e}){let{widget:r}=e,{Frame:n,AutoLayout:c,Text:d,SVG:g}=r;r.register(function(){let S=r.useWidgetId(),[w]=r.useSyncedState("url",null),A=w?decodeURIComponent(w):"null",N=(0,m.l)(e,r,"thumbnailImageHash"),[C]=r.useSyncedState("thumbnailImageWidth",null),[L]=r.useSyncedState("thumbnailImageHeight",null),O=C&&L?C/L:void 0,R=(0,m.l)(e,r,"faviconImageHash"),P=!!N,D=480-(P?112:8)-32-16,[k]=r.useSyncedState("title",null),[M]=r.useSyncedState("description",null),[F]=r.useSyncedState("provider",""),x=!!k,U=!!M,B=x||U,V=!(x||U||P),G=x!==U,[H,W]=r.useSyncedState("orientation",V?"horizontal":"vertical"),K=(0,p.H)(r,"title",{name:"Inter Medium",size:16,lineHeight:22},"vertical"===H?240:D,("vertical"===H?2:1)+(G?1:0)+("Twitter"===F||"X (formerly Twitter)"===F?4:0),!1),Y=(0,p.H)(r,"description",{name:"Inter",size:K?13:14,lineHeight:20},"vertical"===H?240:D,("vertical"===H?2:1)+(G?1:0),!1),$=(0,p.H)(r,"url",{name:"Inter",size:16,lineHeight:22},("vertical"===H?240:D)-24,1+(B?0:1),!0),j=B?(0,i.Js)(A):$,z=()=>{_(u.yc.OPEN_PREVIEW,A),o.D.dispatch((0,l.RK)({rawInput:A}))};r.usePropertyMenu([{itemType:"action",propertyName:"open",tooltip:(0,s.t)("whiteboard.embeds.inline_menu.open_link"),icon:f},{itemType:"separator"},{itemType:"action",propertyName:"vertical",tooltip:(0,s.t)("whiteboard.embeds.inline_menu.display_vertical"),icon:"vertical"===H?y:b},{itemType:"action",propertyName:"horizontal",tooltip:(0,s.t)("whiteboard.embeds.inline_menu.display_horizontal"),icon:"horizontal"===H?I:T},{itemType:"separator"},{itemType:"action",propertyName:"convert_to_text",tooltip:(0,s.t)("whiteboard.embeds.inline_menu.change_back_to_text"),icon:E}],({propertyName:e})=>{switch(e){case"open":z();break;case"convert_to_text":_(u.yc.CONVERT_TO_TEXT,A),a.glU.replaceNodeWithText(S,A);break;case"vertical":_(u.yc.SWITCH_ORIENTATION_VERTICAL,A),W("vertical");break;case"horizontal":_(u.yc.SWITCH_ORIENTATION_HORIZONTAL,A),W("horizontal");break;default:console.error("Unhandled property name for LinkPreview widget: %s",e)}});let q={fontFamily:"Inter",horizontalAlignText:"left",verticalAlignText:"bottom",width:"fill-parent",fill:{type:"solid",color:{r:0,g:0,b:0,a:.8},blendMode:"normal"}},X=r=>{let a=r?e.widget.h(n,{name:"container-frame",width:16,height:16,fill:{type:"image",imageHash:r,scaleMode:"fill"},cornerRadius:3}):e.widget.h(g,{src:v});return e.widget.h(c,{direction:"horizontal",horizontalAlignItems:"start",verticalAlignItems:"start",padding:{left:0,right:0,top:B?0:3,bottom:0}},a)},J=(r,a,i)=>e.widget.h(n,{name:"container-frame",width:r,height:a,fill:i?{type:"image",imageHash:i,scaleMode:"fill"}:h.De,effect:[{type:"inner-shadow",color:{r:0,g:0,b:0,a:.1},offset:"vertical"===H?{x:0,y:-1}:{x:-1,y:0},blur:0}],onClick:z}),Z=r=>{if(r)return e.widget.h(d,{fontSize:16,fontWeight:500,lineHeight:22,...q},r)},Q=(r,n)=>{if(n)return e.widget.h(d,{fontSize:r?13:14,lineHeight:20,fontWeight:400,...q,fill:{...q.fill,color:{r:0,g:0,b:0,a:r?.5:.8}}},n)},ee=(r,n)=>e.widget.h(d,{fontSize:r?13:16,lineHeight:r?20:22,fontWeight:400,textDecoration:"underline",...q,fill:{...q.fill,color:{r:0,g:0,b:0,a:.5}},onClick:z},n);return"vertical"===H?function(...r){return e.widget.h(c,{direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"center",width:"hug-contents",height:"hug-contents",fill:h.Vm,cornerRadius:12,stroke:{type:"solid",color:{r:0,g:0,b:0,a:.2},blendMode:"normal"},effect:[{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:2},blur:6}]},...r)}(!P&&e.widget.h(n,{width:304,height:.01}),P&&J(304,O?Math.max(Math.min(304/O,608),160):160,N),B&&((r,...n)=>e.widget.h(c,{direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"start",width:"fill-parent",height:"hug-contents",fill:h.Vm,spacing:4,padding:{left:24,right:24,bottom:0,top:r?16:24}},...n))(P,Z(K),Q(x,Y)),((r,...n)=>e.widget.h(c,{name:"service-name-autolayout",direction:"horizontal",verticalAlignItems:r?"center":"start",horizontalAlignItems:"start",width:"fill-parent",spacing:8,padding:r?{left:24,right:24,top:8,bottom:24}:20},...n))(B,X(R),ee(B,j))):"horizontal"===H?function(r,...n){return e.widget.h(c,{direction:"horizontal",horizontalAlignItems:"center",verticalAlignItems:"start",width:480,height:"hug-contents",fill:h.Vm,cornerRadius:12,spacing:r?16:0,stroke:{type:"solid",color:{r:0,g:0,b:0,a:.2},blendMode:"normal"},effect:[{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:2},blur:6},{type:"drop-shadow",color:{r:0,g:0,b:0,a:.08},offset:{x:0,y:0},blur:2}]},...n)}(P,!P&&e.widget.h(n,{width:.01,height:.01}),P&&J(112,112,N),((r,...n)=>e.widget.h(c,{direction:"vertical",horizontalAlignItems:"center",verticalAlignItems:"start",width:"fill-parent",height:"fill-parent",fill:h.Vm,spacing:r?4:8,padding:r?{left:0,right:0,bottom:16,top:16}:20},...n))(P,B&&((...r)=>e.widget.h(c,{direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"start",width:"fill-parent",height:"hug-contents",fill:h.Vm,spacing:4,padding:0},...r))(Z(K),Q(x,Y)),((...r)=>e.widget.h(c,{name:"service-name-autolayout",direction:"horizontal",verticalAlignItems:B?"center":"start",horizontalAlignItems:"center",width:"fill-parent",spacing:8},...r))(X(R),ee(B,j)))):void 0})}},884656:(e,r,n)=>{n.d(r,{Z:()=>s}),n(299321),n(776250);var a=n(38329);n(966712);var i=n(153808),o=n(578730);let s={fetchFontFile:(e,r,n)=>(0,o.M1)({source:e,id:r,postscriptName:n,fileKey:i.hk()?.openFileKey()||null,teamId:null,orgId:null}),fetchFontFileWithoutPickerInfo(e,r,n){var s;let l=i.hk()?.openFileKey();return l?(0,o.co)(e,r,n,l,!(s=a.D.getState())||!s.openFile||!!s.openFile.parentOrgId):Promise.reject()}}},876840:(e,r,n)=>{n.d(r,{qb:()=>o});var a=n(630331);class i{onFrameDistributionTrackedEvent(e){a.jp(e)}}function o(){new i}},856107:(e,r,n)=>{n.d(r,{_v:()=>o,kJ:()=>s});var a=n(647899);let i=class e{logFeatureGateExposure(e,r){a.w$.logExposureForFeatureGate(e,r)}getDynamicConfigNumberAsRoundedInt(r,n,i){return Math.round(a.w$.getDynamicConfigNumber(r,n,i,e.SourceLoggingString))}getExperimentNumberAsRoundedInt(r,n,i){return Math.round(a.w$.getExperimentNumber(r,n,i,e.SourceLoggingString))}getDynamicConfigNumberAsFloat(r,n,i){return a.w$.getDynamicConfigNumber(r,n,i,e.SourceLoggingString)}getExperimentNumberAsFloat(r,n,i){return a.w$.getExperimentNumber(r,n,i,e.SourceLoggingString)}getDynamicConfigString(r,n,i){return a.w$.getDynamicConfigString(r,n,i,e.SourceLoggingString)}getExperimentString(r,n,i){return a.w$.getExperimentString(r,n,i,e.SourceLoggingString)}getDynamicConfigBoolean(r,n,i){return a.w$.getDynamicConfigBoolean(r,n,i,e.SourceLoggingString)}getExperimentBoolean(r,n,i){return a.w$.getExperimentBoolean(r,n,i,e.SourceLoggingString)}};i.SourceLoggingString="fullscreen";let o=i;function s(){new o}},369870:(e,r,n)=>{n.d(r,{MP:()=>s,U1:()=>o,ck:()=>i,pb:()=>l});var a=n(966712);function i(){return a.Ay().frame_context?.type==="integration"}function o(){return i()&&"google-meet"===(0,a.Ay)().integration_host&&!!(0,a.Ay)().is_meet_hardware}function s(){return i()&&"zoom"===(0,a.Ay)().integration_host}class l{static isGoogleClassroomIntegration(){return i()&&"google-classroom"===(0,a.Ay)().integration_host}}},62098:(e,r,n)=>{n.d(r,{Yq:()=>s,u1:()=>l,zi:()=>c}),n(414507);var a=n(299321),i=(n(904669),n(776250),n(38329),n(966712),n(776621),n(988022),n(627592));n(760640),n(855031);let o=null;function s(){return o?.bufferedAmount||0}function l(){if(o){let e=o.url;(function(e){if(null!==o){o.onopen=null,o.onmessage=null,o.onclose=null,o.onerror=null;try{o.close()}catch(e){}o=null,(0,i.II)(),a.cgc.disconnect(e)}})("breakMultiplayerWebsocketForTesting"),console.log(`breakMultiplayerWebsocketForTesting: disconnected from ${e}`)}}function c(e=!1){o||(a.h3O.reconnect(e),console.log(`unbreakMultiplayerWebsocketForTesting: reconnected to ${o?o.url:null}`))}},217071:(e,r,n)=>{n.d(r,{F:()=>s});var a=n(852438),i=n(47506);let o=new Set;function s(e,r,n){let s=function(e){let r=Object.keys(e);return 0===r.length?new Set:new Set(r)}(r),l=!(0,a.yZ)(s,o);(0,i.YQ)({id:"Selection Changed",properties:{...n,numSelectedTextNodes:n.numSelectedByType&&n.numSelectedByType.TEXT||0,didSelectedNodeIdsChange:l}}),o=s}},327736:(e,r,n)=>{n.d(r,{bJ:()=>l});var a=n(374626),i=n(779709),o=n(52610),s=n(869156);function l(){new c}class c{constructor(){this.developerRelatedLinksManager=new i.GK}submitDeveloperRelatedLinks(e){this.developerRelatedLinksManager.addLinks(e)}didGetNodeStatusChange(){(0,o.Q)()}isVariableAvailableInLibraryAsset(e){let r=a.zl.get(s.e3);return r?.status==="loaded"&&r.data.some(r=>r.node_id===e)}}},581880:(e,r,n)=>{n.d(r,{_I:()=>p,eE:()=>m});var a=n(299321),i=n(776250),o=n(517333),s=n(737947),l=n(286640),c=n(939863),d=n(392592);let u="hardware_acceleration_disabled_warning_shown";function m(){if(o.eD)return null;let e=a.CeL.getDeviceInfo();return e?e.vendor.includes("Google Inc.")&&e.renderer.includes("SwiftShader"):null}function p(e,r){if(null!==e){if(!e){l.x4&&l.x4.getItem(u)&&((0,i.sx)("Hardware Acceleration Turned On"),delete l.x4[u]);return}if(!l.x4||!l.x4.getItem(u)){let e=()=>{l.x4.setItem(u,"1")};(0,i.sx)("Hardware Acceleration Warning Bell"),r(d.F.enqueue({type:"hardware_acceleration_disabled_warning",message:(0,c.t)("hardware_acceleration_detector.message"),button:{text:(0,c.t)("hardware_acceleration_detector.learn_more"),action:()=>{s.Ay.unsafeRedirect("https://help.figma.com/hc/articles/360039828614-Configure-your-browser-for-Figma#Advanced","_blank"),r(d.F.dequeue({})),e(),(0,i.sx)("Hardware Acceleration Warning Clicked",{dismissed:!1})}},timeoutOverride:1/0,onDismiss:()=>{(0,i.sx)("Hardware Acceleration Warning Clicked",{dismissed:!0}),e()}}))}}}},114716:(e,r,n)=>{n.d(r,{g:()=>s});var a=n(411855),i=n(288706),o=n(356390);function s(){let[e,r]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{if(o.Y5.isReady()){r(!0);return}let e=!1;return o.Y5.onReady().then(()=>{e||r(!0)}),()=>{e=!0}},[r]),e}(0,i.t_)(()=>o.Y5.isReady()||o.Y5.onReady())},409430:(e,r,n)=>{n.d(r,{T:()=>i});var a=n(604978);async function i(e,r){if(e in r){let n=r[e];switch(n.type){case"bytes":return Promise.resolve(n.bytes);case"promise":return n.promise}}let n=(0,a.Nd)(e);r[e]={type:"promise",promise:n};let i=await n;return r[e]={type:"bytes",bytes:i},i}},604978:(e,r,n)=>{n.d(r,{B0:()=>F,DK:()=>P,Dl:()=>M,EC:()=>R,Nd:()=>D,d$:()=>_,w6:()=>k});var a=n(563850),i=n(299321),o=n(232297),s=n(323591),l=n(563706),c=n(776621),d=n(27087),u=n(355992),m=n(94429),p=n(719867);let h=document.createElement("canvas"),_=4096,g=h.getContext("2d"),f=document.createElement("canvas"),E=function(){try{return f.getContext("2d",{colorSpace:"display-p3"})}catch{return null}}();async function y(e,r,n,a){let o=i.RYP.SRGB;if("image/png"===r){let r=(0,m.Ll)(e);if(e=r.withoutColorSpace,r.iccProfileRawData)try{o=(0,u.Y)(r.iccProfileRawData)}catch(e){}}let l=null;if("image/jpeg"===r){try{let r=(0,m.yy)(e);r&&(o=(0,u.Y)(r)??i.RYP.SRGB)}catch(e){}l=s.f.getOrientation(e),C&&(l=null)}let c=!1;"image/gif"===r&&(c=(0,m.fB)(e));let d=URL.createObjectURL(new Blob([e],{type:r}));try{let e=await k({url:d,height:null,width:null});return{...b(e,n,a,l,c),colorProfile:o}}finally{URL.revokeObjectURL(d)}}function b(e,r,n,a,i){let{width:o,height:l,originalWidth:c,originalHeight:d,isRotated:u}=function(e,r,n,a,i){let o=s.f.angleFromOrientation(i),l=s.f.orientationIsFlipped(i),c=e,d=r,u=e,m=r;if(90===o||270===o){let n=r;r=e,e=n,n=m,m=u,u=n}return n>0&&a>0&&(e>n&&(r=Math.round(r*n/e),e=n),r>a&&(e=Math.round(e*a/r),r=a),e=Math.max(1,e),r=Math.max(1,r)),h.width=e,h.height=r,g.translate(e/2,r/2),g.scale(e/u,r/m),l&&g.scale(-1,1),g.rotate(Math.PI/180*o),g.translate(-c/2,-d/2),{originalHeight:m,originalWidth:u,width:e,height:r,isRotated:0!==o}}(e.width,e.height,r,n,a);return g.drawImage(e,0,0),{width:o,height:l,originalWidth:c,originalHeight:d,isMultiFrameGIF:i,isRotated:u,bitmap:null,rgba:new Uint8Array(g.getImageData(0,0,o,l).data.buffer)}}function I(e){return Uint8Array.from(atob(e),e=>e.charCodeAt(0))}async function T(){let e="/9j/4AAQSkZJRgABAgEASABIAAD/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAMAAAITAAMAAAABAAEAAAAAAAAAAAAcAAAAAQAAABwAAAAB/9sAhAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAAQAAgDAREAAhEBAxEB/8QASwABAQAAAAAAAAAAAAAAAAAAAAsQAQAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAAAAAAAAAAAAAAARAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AJ/4AP/Z";if(!N.works)return 16==(await k({url:`data:image/jpeg;base64,${e}`,height:null,width:null})).width;{let r=new Blob([I(e)],{type:"image/jpeg"});return 16==(await createImageBitmap(r)).width}}async function v(){if(!N.works)return!1;let e=document.createElement("canvas");e.width=16,e.height=8;let r=e.getContext("2d"),n=new Blob([Uint8Array.from(atob("/9j/4AAQSkZJRgABAgEASABIAAD/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAMAAAITAAMAAAABAAEAAAAAAAAAAAAcAAAAAQAAABwAAAAB/9sAhAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAAQAAgDAREAAhEBAxEB/8QASwABAQAAAAAAAAAAAAAAAAAAAAsQAQAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAAAAAAAAAAAAAAARAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AJ/4AP/Z"),e=>e.charCodeAt(0))],{type:"image/jpeg"});r.drawImage(await createImageBitmap(n),0,0);let a=r.getImageData(0,0,16,8);r.clearRect(0,0,e.width,e.height);let i=URL.createObjectURL(n),o=new Image;await new Promise(e=>{o.onload=e,o.src=i}),r.drawImage(await createImageBitmap(o),0,0);let s=r.getImageData(0,0,16,8);if(a.data.length!==s.data.length)return!1;for(var l=0;l<a.data.length;++l)if(a.data[l]!==s.data[l])return!1;return!0}async function S(e,r){if(!e)return!1;try{let a=await createImageBitmap(r),i=a.width,o=a.height,s=!1,l=e.getParameter(e.ACTIVE_TEXTURE);e.activeTexture(e.TEXTURE0);let c=e.getParameter(e.FRAMEBUFFER_BINDING),d=e.getParameter(e.TEXTURE_BINDING_2D),u=null,m=null;try{if(m=e.createTexture(),e.bindTexture(e.TEXTURE_2D,m),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a),e.bindTexture(e.TEXTURE_2D,null),u=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,u),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,m,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,null),e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE){var n=new Uint8Array(4*i*o);e.readPixels(0,0,i,o,e.RGBA,e.UNSIGNED_BYTE,n),255===n[0]&&(s=!0)}}catch{}return e.bindFramebuffer(e.FRAMEBUFFER,c),e.bindTexture(e.TEXTURE_2D,d),e.deleteTexture(m),e.deleteFramebuffer(u),e.activeTexture(l),s}catch{return!1}}async function w(){C=await T(),l.Ay.webkit&&await v()}async function A(e){let r=new Blob([(0,a.D4)("iVBORw0KGgoAAAANSUhEUgAAAAEAAAAQBAMAAAAlsQiEAAAALVBMVEX///////////////////////////////////////////////////////8AAACgbBYXAAAAD3RSTlPx5NXDsJ2Ic19LOCgYDQAksqQSAAAAJklEQVQI12MAAQEGBQYDBgeGAIYEhgKGBoYJDAsYNjAcYHjAcAEAP7AGkQT7krEAAAAASUVORK5CYII=")],{type:"image/png"});try{try{return await createImageBitmap(r,{premultiplyAlpha:"none"}),{works:!0,allowsOptions:!0}}catch(n){return{works:await S(e,r),allowsOptions:!1}}}catch{return{works:!1,allowsOptions:!1}}}let N={works:!1,allowsOptions:!1},C=!1,L=null,O=null,R={init(e){O=(async()=>{if(e===i.UF0.YES)N={works:!0,allowsOptions:!0};else{let e=(0,o.iL)().ctx;if(!e)throw Error("Cannot find GL context");N=await A(e)}await w()})()},reset(){null!==L&&L.forgetCallbacks()},encode(e,r,n,o,s,l,c=i.RYP.SRGB,d=!1){let u,m=h,p=g;c===i.RYP.DISPLAY_P3&&f&&E&&(m=f,p=E);let _=e*r*4,y=p.createImageData(e,r);l&&(n=function(e,r){let n=new Uint8Array(r);for(let a=0;a<r;a+=4){let r=e[a+3|0],i=255.999/r;n[a]=e[a]*i,n[a+1|0]=e[a+1|0]*i,n[a+2|0]=e[a+2|0]*i,n[a+3|0]=r}return n}(n,_)),d&&(n=function(e,r){let n=new Uint8Array(r);return e.forEach((r,a)=>{a%4==3?n[a]=255:n[a]=e[a]}),n}(n,_)),new Uint8Array(y.data.buffer).set(n),m.width=e,m.height=r,p.putImageData(y,0,0),u=o?m.toDataURL("image/jpeg",s):m.toDataURL();let b=";base64,";return(0,a.D4)(u.slice(u.indexOf(b)+b.length))},async decodeAsync(e,r,a,i,o){if(await O,!N.works)return await y(e,r,a,i);if(null===L&&(L=new p.o),"image/heic"===r){let a;a=await n.e(160).then(n.t.bind(n,60160,23));let i=await a.default({blob:new Blob([e],{type:r}),toType:"image/png"});r="image/png";let o=Array.isArray(i)?i[0]:i;e=new Uint8Array(await o.arrayBuffer())}let c=null,{bitmap:d,isMultiFrameGIF:u,colorProfile:m}=await L.sendMessage({type:r,array:e,supportsCreateBitmapOptions:N.allowsOptions});if(!d)return console.warn("Something wrong in createImageBitmap thread.  Bitmap is null ... falling back to decode using image"),await y(e,r,a,i);let h=!1;"image/jpeg"===r&&(h=c!==s.a.ROTATE_0,null!==c&&c!==s.a.ROTATE_0&&C&&l.Ay.chrome&&0>l.Ay.compareVersions([l.Ay.version.toString(),"86"])&&(o=!1),C&&(c=null));let _=d.width,g=d.height;return o&&(null===c||c===s.a.ROTATE_0)&&(0===a||_<=a)&&(0===i||g<=i)?{width:_,height:g,originalWidth:_,originalHeight:g,isMultiFrameGIF:u,isRotated:h,bitmap:d,colorProfile:m}:{...b(d,a,i,c,u),colorProfile:m}},thumbnailSize(e,r){let n=Math.max(e,r),a=0;for(;n>512;)a++,n=Math.floor((n+1)/2);let i=R.dropMips(e,r,a);return{w:i[0],h:i[1],mipsToDrop:a}},dropMips(e,r,n){if(0===e||0===r)return(0,c.x1)("images","Width and height should not be zero"),[e,r];for(let a=0;a<n;++a)e=Math.floor((e+1)/2),r=Math.floor((r+1)/2);return[e,r]},scaleImageBitmap(e,r,n,a){h.width=r,h.height=n,g.translate(0,0),g.scale(1,1),g.rotate(0),g.drawImage(e,0,0,r,n);let i=h.toDataURL(a),o=i.indexOf(",");return I(i.slice(o+1))},async createCanvasAndDrawImage(e,r,n,a){let i,o;"undefined"!=typeof OffscreenCanvas?i=new OffscreenCanvas(e,r):i=M(e,r);let s=i.getContext("2d");if(!s)throw Error("Failed to get 2D context");return n(s),i instanceof OffscreenCanvas?o=await i.convertToBlob({type:a}):o=await new Promise((e,r)=>i.toBlob(n=>{n?e(n):r(Error("Failed to create blob from canvas"))},a)),{canvas:i,blob:o}},async generateThumbnail(e,r,n){if(e.bitmap){let{canvas:a,blob:i}=await this.createCanvasAndDrawImage(r,n,a=>{a.drawImage(e.bitmap,0,0,r,n)},e.mimeType),o=await i.arrayBuffer(),s=await createImageBitmap(a);return{compressedData:new Uint8Array(o),bitmap:s}}{let a=e.rgba;if(!a)throw Error("Failed to decode image");let i=new ImageData(new Uint8ClampedArray(a),e.width,e.height),{canvas:o}=await this.createCanvasAndDrawImage(e.width,e.height,a=>{a.putImageData(i,0,0),a.drawImage(a.canvas,0,0,e.width,e.height,0,0,r,n)},e.mimeType),s=o.getContext("2d");if(!s)throw Error("Failed to get context");let l=new Uint8Array(s.getImageData(0,0,r,n).data);return{compressedData:this.encode(r,n,l,"image/jpeg"===e.mimeType,60,!1),decompressedData:l}}}},P=128;async function D(e){return new Uint8Array((await d.Ay.crossOriginGet(e,void 0,{responseType:"arraybuffer",retryCount:3})).data)}function k(e){return new Promise((r,n)=>{let a=new Image;e.height&&(a.height=e.height),e.width&&(a.width=e.width),a.crossOrigin="";let i=Error();a.onerror=e=>{e.cause=i,n(e)},a.onload=()=>r(a),a.src=e.url})}function M(e,r){let n=document.createElement("canvas");return n.width=e,n.height=r,n}function F(e){return`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(e)))}`}},15859:(e,r,n)=>{n.d(r,{Jr:()=>O,UD:()=>R,xY:()=>C});var a=n(414507),i=n(251994),o=n(299321),s=n(788922),l=n(776250),c=n(297666),d=n(77909),u=n(966712),m=n(994190),p=n(776621),h=n(27087),_=n(604978),g=n(356390);let f=new Uint8Array([171,75,84,88,32,50,48,187,13,10,26,10]).toString();async function E(e,r,n,a){let i="figFile"===r.type?`/file/${r.fileKey}/image/batch`:`/community/file/${r.hubFileId}/image/batch`;try{let r=await h.Ay.post(i,{sha1s:e,max_size:n,needs_compressed_textures:a},{retryCount:1/0});if(200!==r.status||r.data.error)throw Error("api error while resolving images");return{s3_urls:r.data.meta.s3_urls,compressed_texture_s3_urls:r.data.meta.compressed_texture_s3_urls}}catch(r){throw console.warn(`Couldn't download image(s) with hashes ${e}`),r}}class y extends Error{constructor(e="IMAGE_MISSING"){super(e),Object.setPrototypeOf(this,y.prototype)}}class b extends Error{constructor(e="FILE_KEY_MISSING"){super(e),Object.setPrototypeOf(this,b.prototype)}}class I extends Error{constructor(e="IMAGE_EXPIRED"){super(e),Object.setPrototypeOf(this,I.prototype)}}var T=(e=>(e[e.AWAITING_SINATRA_LOOKUP=0]="AWAITING_SINATRA_LOOKUP",e[e.LOOKUP=1]="LOOKUP",e[e.AWAITING_COMPRESSED_TEXTURE_AVAILABILITY_LOOKUP=2]="AWAITING_COMPRESSED_TEXTURE_AVAILABILITY_LOOKUP",e[e.LOOKING_UPCOMPRESSED_TEXTURE_AVAILABILITY=3]="LOOKING_UPCOMPRESSED_TEXTURE_AVAILABILITY",e[e.UPLOADING=4]="UPLOADING",e[e.READY=5]="READY",e[e.MISSING=6]="MISSING",e[e.FAILED=7]="FAILED",e[e.PRESENT=8]="PRESENT",e))(T||{});let v=class e{constructor(e,r){this.hash=e,this._priority=r,this.compressedTextureS3Path=null,this.shouldDownloadCompressedTexture=null,this.retries=0,this.state=0,this._downloadPromise=null,this._imageIsReady=()=>{},this._readyPromise=new Promise(e=>{this._imageIsReady=e})}set priority(r){this._priority!==e.MAX_PRIORITY&&(this._priority=r)}get priority(){return this._priority}imageIsReady(){this._imageIsReady()}readyPromise(){return this._readyPromise}isExpired(){let e=null;try{if(!(e=new URL(this.s3Path).searchParams.get("Expires")))return!1;e=parseInt(e,10)}catch{return!1}return e<Date.now()/1e3}downloadFromS3(){if(!this.shouldDownloadCompressedTexture&&null==this.s3Path)throw Error("Called downloadFromS3 without s3Path");if(this.shouldDownloadCompressedTexture&&null==this.compressedTextureS3Path)throw Error("Called downloadFromS3 without compressedTextureS3Path when downloading compressed texture");return h.Ay.crossOriginGetAny(this.shouldDownloadCompressedTexture?this.compressedTextureS3Path:this.s3Path,null,{responseType:"arraybuffer"}).then(e=>e.data).catch(e=>{if(this.isExpired())throw new I;if(0!==e.status&&e.status<500){let r=this.s3Path?.includes("resize")?"Can't load image! Make sure Pixie service is running locally":"Image is missing from S3!";(0,p.x1)("image",r,{hash:this.hash,status:e.status}),(0,p.$D)(a.FigmaTeam.SCENEGRAPH_AND_SYNC,Error("Image missing from S3"))}throw e})}download(e){if(!this._downloadPromise){let e=this.downloadFromS3();e.finally(()=>{this._downloadPromise=null}).catch(e=>{}),this._downloadPromise=e}return this._downloadPromise}};v.MAX_PRIORITY=Number.MAX_SAFE_INTEGER;class S{constructor(){this.queue=[],this.byHash=new Map,this.needsSort=!1}get length(){return this.queue.length}ensureSorted(){this.needsSort&&(this.queue.sort((e,r)=>r.priority-e.priority),this.needsSort=!1)}numEligible(e){this.ensureSorted();let r=this.queue.findIndex(r=>r.priority<e);return r<0?this.queue.length:r}push(...e){for(let r of(this.queue.push(...e),e))this.byHash.set(r.hash,r);this.needsSort=!0}updatePriority(e,r){let n=this.byHash.get(e);return null!=n&&(n.priority=r,this.needsSort=!0,!0)}pop(e){if(this.ensureSorted(),0===this.queue.length||this.queue[0].priority<e)return null;let r=Date.now(),n=1/0;for(let e=0;e<this.queue.length;e++){let a=this.queue[e].retryTime;if(null==a||r>=a){let[r]=this.queue.splice(e,1);return this.byHash.delete(r.hash),{found:!0,image:r}}n=a<n?a:n}return{found:!1,retryDelay:n-r}}find(e){return this.byHash.get(e)??null}erase(e){let r=this.byHash.get(e);if(r){this.byHash.delete(e);let n=this.queue.findIndex(e=>e===r);n>=0&&this.queue.splice(n,1)}}debugString(){return this.queue.map(e=>`${e.hash}(${e.priority})`).join(",")}}function w(){return g.Y5.openFilePromise()}class A extends Error{constructor(e,r){super(e),this.lookupImages=r}}let N=class e{constructor(){this.pendingPasteRequests={},this.pendingImagesToRecord={},this.pendingRecordImagesTasks={},this.imagesNeedingDirectUpload=new Set,this.imageTimingLog=new Map,this.MAX_REQUESTS=3,this.SINATRA_BATCH_SIZE=100,this.verbose=(0,u.kc)().image_verbose,this.incomingImages=new Map,this.pendingLookupCallback=null,this.downloadQueue=new S,this.minPriority=0,this.downloadsPaused=!1,this.allImages=new Map,this.pendingDecodes=new Set,this.pendingDownloads=new Set,this.cancelDownloads=new Set,this.alreadyDownloaded=new Set,this.pendingUploads=new Set,this.uploadedImagesNeedingUrl=new Set,this.pendingImagesCallback=null,this.imageQueueEmpty=null,this.incomingImagesLookedUp=null,this.allImagesUploaded=null,this.progressCallbacks=[],this.imageMaxSize=void 0,this.compressedTextureLookupQueue=[],this.compressedTextureRetryCount=new Map,this.LOGGING_RATE=.1,this.flushPendingRecordImages=(0,c.s)(async()=>{let r=this.pendingImagesToRecord,n=this.pendingRecordImagesTasks,a=Object.keys(r);this.pendingImagesToRecord={},this.pendingRecordImagesTasks={};let i=await this.getEditingFileKey();a.forEach(async a=>{if(i===a){n[a].resolve();return}if(!a){n[a].reject("Invalid originFileKey");return}let s=1,c=r[a];for(;;){try{let r=await h.Ay.put(`/api/files/${i}`,{image_sha1s:c,image_origin_file_key:a}),{success:s,failed:d}=e.parseFileUpdateResponseForImages(c,r);for(let e of(o.Bko.imagePermissionsCopied(s),d))this.markImageMissing(e);for(let e of(d.length>0&&(0,l.sx)("image_permission_copy_failed",{shas:d.join(",")}),c))delete this.pendingPasteRequests[e];n[a].resolve();return}catch(e){if(e.status>=400&&e.status<500){for(let e of((0,m.Jj)(),(0,l.sx)("image_permission_copy_failed",{shas:c.join(",")}),c))this.markImageMissing(e),delete this.pendingPasteRequests[e];n[a].reject(`4xx error when pasting images ${e}`);return}}let r=1e3*s*Math.random();await new Promise(e=>setTimeout(e,r)),s=Math.min(2*s,64)}})},100)}static shouldUseCompressedTextures(){return e._shouldUseCompressedTextures}getEditingFileKey(){return g.Y5.openFileKeyPromise()}getOrCreateImageLogData(e){let r=this.imageTimingLog.get(e);return r||(r={},this.imageTimingLog.set(e,r)),r}recordImages(e,r){if(0===r.length)return Promise.resolve();if(!e)throw Error("No originFileKey specified");if(this.pendingImagesToRecord[e]=this.pendingImagesToRecord[e]||[],this.pendingImagesToRecord[e].push(...r),!this.pendingRecordImagesTasks[e]){let r,n;let a=new Promise((e,a)=>{r=e,n=a});this.pendingRecordImagesTasks[e]={promise:a,resolve:r,reject:n}}for(let n of r)this.pendingPasteRequests[n]=this.pendingRecordImagesTasks[e].promise;let n=this.pendingRecordImagesTasks[e].promise;return this.flushPendingRecordImages(),n}static parseFileUpdateResponseForImages(e,r){try{if(r?.data?.meta?.missing_shas){let n=new Set(r.data.meta.missing_shas);return{success:e.filter(e=>!n.has(e)),failed:Array.from(n)}}}catch{}return{success:e,failed:[]}}async resolveImageUrls(r){let n=await w(),a=await E(r,n,this.imageMaxSize,e.shouldUseCompressedTextures()),i=r.filter(e=>!(e in a.s3_urls));if(i.length>0){let r=await g.Y5.sourceFileKeyPromise();if(r){let n=await E(i,{type:"figFile",fileKey:r},void 0,e.shouldUseCompressedTextures());return{s3_urls:{...a.s3_urls,...n.s3_urls},compressed_texture_s3_urls:{...a.compressed_texture_s3_urls,...n.compressed_texture_s3_urls}}}}return{s3_urls:a.s3_urls,compressed_texture_s3_urls:a.compressed_texture_s3_urls}}queueImageForLookup(e){let r=e.hash;this.verbose&&(0,p.Lo)("image","incoming",{hash:r}),e.state=0,this.incomingImages.set(r,e),null==this.pendingLookupCallback&&(this.pendingLookupCallback=setTimeout(()=>{this.pendingLookupCallback=null,this.lookupImages().catch(e=>(0,p.$D)(a.FigmaTeam.SCENEGRAPH_AND_SYNC,e))},0))}setExternalSource(e,r){let n=new v(e,v.MAX_PRIORITY);n.s3Path=r,this.allImages.set(e,n),this.downloadQueue.push(n),this.imagesNeedingDirectUpload.add(e),this.maybeDownloadMoreImages()}triggerCompressedTextureAvailabilityLookup(e,r){let n=this.allImages.get(e);n&&2===n.state&&new Promise((e,n)=>{let a=this.compressedTextureLookupQueue.splice(0,this.SINATRA_BATCH_SIZE);if(0===a.length)return null;for(let e of a)this.markImageLookingUpCompressedTextureAvailability(e);h.Ay.post(`/file/${r}/compressed_texture_available/batch`,{sha1s:a}).then(r=>{e(r)}).catch(e=>{n(new A(e.message,a))})}).then(e=>{if(!e)return;let n=e.data.meta.results;for(let e of Object.keys(n))this.resolveCompressedTextureAvailabilityLookup(e,r,n[e])}).catch(e=>{for(let n of e.lookupImages)this.resolveCompressedTextureAvailabilityLookup(n,r,null)})}resolveCompressedTextureAvailabilityLookup(e,r,n){let a=this.allImages.get(e),i=this.compressedTextureRetryCount.get(e)||0;if("generating"===n&&i<20){let n=500*(1<<Math.min(i,4));this.compressedTextureLookupQueue.push(e),this.markImageNeedsCompressedTextureAvailabilityLookup(e),this.compressedTextureRetryCount.set(e,i+1),setTimeout(()=>this.enqueueImageToCheckCompressedTextureAvailability(e,r),n)}else{this.markImagePresent(e),this.downloadQueue.push(a);let r=this.getOrCreateImageLogData(e);switch(r.compressedTextureRetryCount=i,r.compressedTextureResult=n,n){case"generated":a.shouldDownloadCompressedTexture=!0;break;case"failed":case null:case"generating":this.compressedTextureRetryCount.delete(e),a.shouldDownloadCompressedTexture=!1}this.maybeDownloadMoreImages()}}enqueueImageToCheckCompressedTextureAvailability(e,r){setTimeout(()=>{this.triggerCompressedTextureAvailabilityLookup(e,r)},0)}setImageDownloadPriority(e,r){let n=this.getOrCreateImageLogData(e);if(n.downloadPriority=r,n.downloadPriorityTimestamp=performance.now(),!e){(0,p.xi)("setImageDownloadPriority","invalid hash");return}let a=this.allImages.get(e);if(null==a){a=new v(e,r),this.allImages.set(e,a),this.queueImageForLookup(a);return}4===a.state&&(0,p.x1)("image","Got download request for currently uploading image",{hash:e},{reportAsSentryError:!0}),a.priority=r,this.downloadQueue.updatePriority(e,r)&&this.maybeDownloadMoreImages()}setMinimumImagePriority(e){this.minPriority=e,this.maybeDownloadMoreImages()}pauseImageDownloads(){this.downloadsPaused=!0}resumeImageDownloads(){this.downloadsPaused=!1,this.maybeDownloadMoreImages()}maybeDownloadMoreImages(){for(;this.pendingDownloads.size<this.MAX_REQUESTS&&this.downloadQueue.length>0&&!this.downloadsPaused;){let r=this.downloadQueue.pop(this.minPriority);if(null==r)break;if(!r.found){let e=r.retryDelay;!Number.isFinite(e)||e<=0?(0,p.$D)(a.FigmaTeam.SCENEGRAPH_AND_SYNC,Error("Logic error in download queue, cannot compute next retry")):setTimeout(()=>this.maybeDownloadMoreImages(),e);break}let n=r.image,i=this.getOrCreateImageLogData(n.hash);if(n.hash){this.verbose&&(0,p.Lo)("image","download start",{hash:n.hash,ok:!this.pendingDownloads.has(n.hash)});let e=performance.now();i.downloadStartedTimestamp=e,this.pendingDownloads.add(n.hash)}n.download(this.imageMaxSize).then(r=>{if(this.cancelDownloads.delete(n.hash))return;this.verbose&&((0,p.Lo)("image","download done",{hash:n.hash,ok:!this.alreadyDownloaded.has(n.hash)}),this.getOrCreateImageLogData(n.hash).downloadFinishedTimestamp=performance.now()),this.alreadyDownloaded.add(n.hash);let i=null;if(this.imagesNeedingDirectUpload.has(n.hash))o.Bko.imageDownloadedForPaste(n.hash,r),this.imagesNeedingDirectUpload.delete(n.hash);else{let a=r;if(e.shouldUseCompressedTextures()&&r.slice(0,12).toString()===f){let e=(0,s.LF4)(r);i={width:e.pixelWidth,height:e.pixelHeight},o.Bko.setCompressedTextureMetadata(n.hash,i),a=e.levels[0].levelData,this.clearImageDecodePending(n.hash,!0)}o.Bko.imageDownloaded(n.hash,a)}i||this.pendingDecodes.has(n.hash)||((0,p.xi)("ImageManager","missing pending decode after download",{hash:n.hash}),(0,p.$D)(a.FigmaTeam.SCENEGRAPH_AND_SYNC,Error("missing pending decode after image marked as downloaded")),n.imageIsReady())},e=>{if(this.pendingDecodes.delete(n.hash)&&this.maybeResolveImageQueueEmptyAndPendingImages(),this.cancelDownloads.delete(n.hash))return;if(e instanceof y)this.markImageMissing(n.hash);else if(e instanceof b)(0,p.$D)(a.FigmaTeam.SCENEGRAPH_AND_SYNC,e),this.markImageFailed(n.hash);else if(e instanceof I)this.queueImageForLookup(n);else{if(e instanceof h.Dr&&403===e.status){this.markImageFailed(n.hash);return}let r=5e3*(1<<Math.min(n.retries,4));r+=r*Math.random(),n.retries+=1,(429===e.status||503===e.status)&&(r*=4),n.retryTime=Date.now()+r,this.downloadQueue.push(n)}let r=this.getOrCreateImageLogData(n.hash),i=this.allImages.get(n.hash);i&&(r.decodedImageState=i.state),r.errorOccurredTimestamp=performance.now()}).finally(()=>{this.pendingDownloads.delete(n.hash),this.maybeDownloadMoreImages()})}this.pendingImagesCallback?.(this.pendingImages),this.maybeResolveImageQueueEmptyAndPendingImages()}forceDownloadImage(e){this.setImageDownloadPriority(e,v.MAX_PRIORITY)}setImageDecodePending(e){this.verbose&&(0,p.Lo)("image","decode start",{hash:e,ok:!this.pendingDecodes.has(e)}),this.getOrCreateImageLogData(e).downloadFinishedTimestamp=performance.now(),this.pendingDecodes.add(e)}getSignedUrls(e){let r=new Map;for(let n of e){let e=this.allImages.get(n);e&&e.s3Path&&r.set(n,e.s3Path)}return r}clearImageDecodePending(e,r){this.verbose&&(0,p.Lo)("image","decode done",{hash:e,ok:this.pendingDecodes.has(e)});let n=this.getOrCreateImageLogData(e);n.decodeFinishedTimestamp=performance.now(),this.pendingDecodes.delete(e)&&this.maybeResolveImageQueueEmptyAndPendingImages(),r?(this.markImageReady(e),n.decodedImageState=5):(this.markImageFailed(e),n.decodedImageState=7),(0,u.kc)().image_log_timing&&Math.random()<this.LOGGING_RATE&&(0,l.sx)("image_log_timing",{hash:e,...n})}markImagePresent(e){let r=this.allImages.get(e);r&&(r.state=8,o.Bko.imageIsPresent(e))}markImageMissing(e){let r=this.allImages.get(e);r&&(r.state=6,o.Bko.imageIsMissing(e),r.imageIsReady())}markImageFailed(e){let r=this.allImages.get(e);r&&(r.state=7,r.imageIsReady())}markImageReady(e){let r=this.allImages.get(e);r&&(r.state=5,r.imageIsReady())}markImageNeedsCompressedTextureAvailabilityLookup(e){let r=this.allImages.get(e);r&&(r.state=2,this.lookupCompressedTextureAvailabilities(e))}markImageLookingUpCompressedTextureAvailability(e){let r=this.allImages.get(e);r&&(r.state=3)}async lookupImages(){let r=[];for(let e of this.incomingImages.values())0===e.state&&(r.push(e),e.state=1,this.verbose&&(0,p.Lo)("image","lookup",{hash:e.hash}));try{for(;r.length>0;){let n=r.splice(0,this.SINATRA_BATCH_SIZE);for(let e of n){let r=this.pendingPasteRequests[e.hash];if(r)try{await r}catch(r){(0,p.x1)("lookupImages","pastePromise failed",{hash:e.hash})}}let a=await this.resolveImageUrls(n.map(e=>e.hash));for(let r of n){let n=a.s3_urls[r.hash],i=null;e.shouldUseCompressedTextures()&&(i=a.compressed_texture_s3_urls[r.hash]),n?(r.s3Path=n,i?(r.compressedTextureS3Path=i,this.compressedTextureLookupQueue.push(r.hash),this.markImageNeedsCompressedTextureAvailabilityLookup(r.hash),this.lookupCompressedTextureAvailabilities(r.hash)):(this.markImagePresent(r.hash),this.downloadQueue.push(r)),this.verbose&&(0,p.Lo)("image","enqueued-batch",{hash:r.hash})):(this.markImageMissing(r.hash),this.verbose&&(0,p.Lo)("image","missing",{hash:r.hash})),this.incomingImages.delete(r.hash)}}}finally{for(let e of r)this.incomingImages.delete(e.hash)&&(0,p.xi)("image","incoming fallback delete",{hash:e.hash});null!=this.incomingImagesLookedUp&&this.incomingImagesLookedUp.resolve()}e.shouldUseCompressedTextures()||this.maybeDownloadMoreImages()}lookupCompressedTextureAvailabilities(e){w().then(r=>{"figFile"===r.type&&this.enqueueImageToCheckCompressedTextureAvailability(e,r.fileKey)})}forgetImage(e){if(this.imagesNeedingDirectUpload.has(e))return;this.verbose&&(0,p.Lo)("image","forget",{hash:e}),this.incomingImages.delete(e),this.downloadQueue.erase(e),this.pendingDownloads.has(e)&&this.cancelDownloads.add(e),this.alreadyDownloaded.delete(e),this.pendingDecodes.delete(e),this.imageTimingLog.delete(e),this.maybeResolveImageQueueEmptyAndPendingImages(),this.maybeResolveImagesLookedUp();let r=this.allImages.get(e);r&&(this.allImages.delete(e),5!==r.state&&r.imageIsReady())}getNumEligibleForDownload(){return this.downloadQueue.numEligible(this.minPriority)}get pendingImages(){let e=this.getNumEligibleForDownload();return this.verbose&&(0,p.Lo)("image","pendingImages",{incoming:this.incomingImages.size,eligible:e,downloads:this.pendingDownloads.size,decode:this.pendingDecodes.size}),this.incomingImages.size+e+this.pendingDownloads.size+this.pendingDecodes.size}setPendingImagesCallback(e){this.pendingImagesCallback=e}imageQueueEmptyPromise(){if(!this.imageQueueEmpty){let e=performance.now();this.imageQueueEmpty=(0,d.v)(),this.verbose&&(0,p.Lo)("image","queue empty defer installed",{start:e}),this.imageQueueEmpty.promise.finally(()=>{this.imageQueueEmpty=null;let r=performance.now()-e;this.verbose?(0,p.Lo)("image","queue empty defer cleared",{start:e,elapsed:r}):r>1e4&&(0,p.xi)("image","queue empty finished after a long time",{start:e,elapsed:r})}),this.emptyQueueCheck(this.imageQueueEmpty,e,3e4)}let e=this.imageQueueEmpty.promise;return this.maybeResolveImageQueueEmptyAndPendingImages(),e}imageLookupPromise(){this.incomingImagesLookedUp||(this.incomingImagesLookedUp=(0,d.v)(),this.incomingImagesLookedUp.promise.finally(()=>{this.incomingImagesLookedUp=null}));let e=this.incomingImagesLookedUp.promise;return this.maybeResolveImagesLookedUp(),e}emptyQueueCheck(e,r,n){setTimeout(()=>{if(e===this.imageQueueEmpty){let a=Math.round(.001*(performance.now()-r));(0,p.xi)("image","queue empty is taking a long time",{elapsedSec:a,pending:this.pendingImages,downloads:this.pendingDownloads.size,decodes:this.pendingDecodes.size}),this.verbose&&(0,p.Lo)("image","slow",{downloads:this.pendingDownloads,decodes:this.pendingDecodes});let i=Math.min(2*n,9e5);this.emptyQueueCheck(e,r,i)}},n)}maybeResolveImageQueueEmptyAndPendingImages(){let e=this.pendingImages;for(let r of this.progressCallbacks)r(e);this.imageQueueEmpty&&0===e&&(this.verbose&&(0,p.Lo)("image","resolve queue empty!"),this.imageQueueEmpty.resolve(),this.progressCallbacks=[]),this.maybeResolveImagesLookedUp()}maybeResolveImagesLookedUp(){0===this.incomingImages.size&&this.incomingImagesLookedUp?.resolve()}unresolvedImagesUnder(e,r,n){let a=n??o.AlE.getMutableActiveDocument();return o.Bko.findImagesUnder(a,e,r).map(e=>this.allImages.get(e)).filter(e=>void 0!==e&&5!==e.state&&4!==e.state)}loadAllImagesUnder(e,r,n,a=null,i){return this.loadAllImages(e,r,n,a,!0,i)}waitForImagesUnder(e,r,n,a=null,i){return this.loadAllImages(e,r,n,a,!1,i)}async loadAllImages(e,r,n,a=null,i,o){let s=performance.now();this.verbose&&(0,p.Lo)("image","loadAllImagesUnder",{reason:n,guids:e,start:s}),e.includes("0:0")&&"playground.initialLoad"!==n&&(0,p.x1)("image","loadAllImagesUnder called with full document",{reason:n});let l=0,c=new Promise(n=>{let s=this.unresolvedImagesUnder(e,r,o);if(0===(l=s.length))n({totalImages:l});else{var c;let e=l;for(let r of(c=e,a&&a(c,l),s))i&&this.setImageDownloadPriority(r.hash,v.MAX_PRIORITY),r.readyPromise().finally(()=>{var r;r=--e,a&&a(r,l),0===e&&n({totalImages:l})})}});return await c}async loadImageByHash(e){this.verbose&&(0,p.Lo)("image","loadImageByHash",{hash:e}),this.setImageDownloadPriority(e,v.MAX_PRIORITY),await this.imageQueueEmptyPromise()}setImageMaxSize(e){this.imageMaxSize=e}setShouldUseCompressedTextures(r){e._shouldUseCompressedTextures=r}markImageUploading(e){this.pendingUploads.add(e)}markImageUploaded(e){this.pendingUploads.has(e)||(0,p.xi)("image","markImageUploaded called for unknown image",{imageHash:e}),this.pendingUploads.delete(e),this.uploadedImagesNeedingUrl.add(e),this.maybeResolveImagesUploaded()}startUploadingImage(e,r,n,a){if(this.pendingUploads.has(a))return;this.pendingUploads.add(a);let i=new v(a,0);i.state=4,this.allImages.set(a,i);let s=`/api/upnode/image?purpose=canvas&sha1=${a}&fileKey=${e}`,l=0;h.Ay.post(s,r,{retryCount:1/0,headers:{...h.Ay.defaults.headers,"Content-Type":n},rawBody:!0,uploadEvents:{loadstart:()=>{i.retries=l,l+=1}}}).then(e=>{if(200!==e.status){(0,p.x1)("image","unexpected status code from image upload",{hash:a,status:e.status},{reportAsSentryError:!0});return}(0,p.Lo)("image","uploaded new image",{hash:a}),this.pendingUploads.delete(a),o.Bko.imageUploadFinished(a,o.d8m.SUCCESS),i.state=5,this.uploadedImagesNeedingUrl.add(a),this.maybeResolveImagesUploaded()},e=>{let r;415===e.status?((0,p.x1)("image","image upload failed, removing invalid image",{hash:a}),r=o.d8m.UNSUPPORTED_MEDIA):r=o.d8m.OTHER_FAILURE,this.pendingUploads.delete(a),o.Bko.imageUploadFinished(a,r),this.maybeResolveImagesUploaded()})}pendingUploadStats(){let e=new Set;for(let r of this.pendingUploads){let n=this.allImages.get(r);n&&n.retries>0&&e.add(r)}return[this.pendingUploads,e]}async maybeResolveImagesUploaded(){if(0===this.pendingUploads.size){let e=Array.from(this.uploadedImagesNeedingUrl);this.uploadedImagesNeedingUrl.clear();for(let r=0;r<e.length;r+=this.SINATRA_BATCH_SIZE){let n=e.slice(r,r+this.SINATRA_BATCH_SIZE),a=await this.resolveImageUrls(n);for(let e of n){let r=a.s3_urls[e];if(r){let n=this.allImages.get(e);if(n)n.s3Path=r;else{let n=new v(e,0);n.s3Path=r,n.state=5,this.allImages.set(e,n)}}}}this.allImagesUploaded?.resolve()}}imageUploadPromise(){this.allImagesUploaded||(this.allImagesUploaded=(0,d.v)(),this.allImagesUploaded.promise.finally(()=>{this.allImagesUploaded=null}));let e=this.allImagesUploaded.promise;return this.maybeResolveImagesUploaded(),e}logDebugInfo(e){for(let r of e){let e=this.allImages.get(r),n=new Set;for(let e of Object.values(this.pendingImagesToRecord))for(let r of e)n.add(r);(0,p.Lo)("ImageManager","Blocking image info",{hash:r,state:e?e.state:"NO IMAGE",inIncoming:r in this.incomingImages,inQueue:null!=this.downloadQueue.find(r),inPending:r in this.pendingDownloads,inFinished:r in this.alreadyDownloaded,inPendingRecord:r in n})}let[r,n]=this.pendingUploadStats(),a=Array.from(this.incomingImages.values()).map(e=>e.hash).join(","),i=Array.from(this.pendingDownloads).join(","),o=Array.from(this.alreadyDownloaded).join(","),s=this.downloadQueue.debugString(),l=Array.from(r).join(","),c=Array.from(n).join(",");(0,p.Lo)("ImageManager","ImageManager debug info",{incomingImages:a,downloadQueue:s,pendingDownloads:i,alreadyDownloaded:o,pendingUploads:l,uploadBackoffs:c,pendingImagesToRecord:this.pendingImagesToRecord})}getDebugState(){let e=o.Bko.getImageResourceDebugInfo(),r=new Map;return e.forEach(e=>{r.set(e.hash,{...e,tsState:this.allImages.get(e.hash)?.state})}),this.allImages.forEach((e,n)=>{r.has(n)||r.set(n,{hash:n,tsState:e.state})}),r}static includeOutsideContents(e){return e.some(e=>!1===e.contentsOnly)}};N._shouldUseCompressedTextures=!1;let C=N,L=new class{constructor(){this.imageManager=new C}copyImagePermissions(e,r){return this.imageManager.recordImages(e,r)}setImageDownloadPriority(e,r){this.imageManager.setImageDownloadPriority(e,r)}forceDownloadImage(e){this.imageManager.forceDownloadImage(e)}setMinimumImagePriority(e){this.imageManager.setMinimumImagePriority(e)}forgetImage(e){this.imageManager.forgetImage(e)}setImageDecodePending(e){this.imageManager.setImageDecodePending(e)}clearImageDecodePending(e,r){this.imageManager.clearImageDecodePending(e,r)}async downloadEmoji(e){return(await h.Ay.crossOriginGetAny(e,null,{responseType:"arraybuffer"})).data}markImageUploading(e){this.imageManager.markImageUploading(e)}markImageUploaded(e){this.imageManager.markImageUploaded(e)}startUploadingImage(e,r,n,a){this.imageManager.startUploadingImage(e,r,n,a)}pendingUploadStats(){return this.imageManager.pendingUploadStats()}logDebugInfo(e){this.imageManager.logDebugInfo(e)}pauseImageDownloads(){this.imageManager.pauseImageDownloads()}resumeImageDownloads(){this.imageManager.resumeImageDownloads()}getSignedUrls(e){return this.imageManager.getSignedUrls(e)}getImageHostDomain(){return window.location.hostname}setExternalSource(e,r){this.imageManager.setExternalSource(e,r)}};function O(){return L.imageManager}async function R(e,r,n){if(!o.Bko.imageTypeDecodeSupported(r))throw Error(`Image type ${r} is not supported and cannot be decoded`);let a=await _.EC.decodeAsync(e,r,_.d$,_.d$,(0,u.kc)().image_decode_bitmap_ts_api??!1),i=await crypto.subtle.digest("SHA-1",e),s={width:a.width,height:a.height,compressedData:e,hash:new Uint8Array(i),bitmap:a.bitmap?a.bitmap:void 0,mimeType:r,rgba:a.rgba?a.rgba:new Uint8Array,name:n},l=_.EC.thumbnailSize(a.width,a.height),c=await _.EC.generateThumbnail(s,l.w,l.h),d=await crypto.subtle.digest("SHA-1",c.compressedData);return{fullResolution:s,thumbnail:{width:l.w,height:l.h,compressedData:c.compressedData,hash:new Uint8Array(d),bitmap:c.bitmap,mimeType:r,rgba:c.decompressedData,name:n}}}async function P(e,r){let n=!!C.includeOutsideContents(r);await O().loadAllImagesUnder([n?e.containingCanvas||"-1:-1":e.guid],o.MoD.NON_ANIMATED_ONLY,"plugins.loadImagesAndExport")}(0,i.c)(P)},855418:(e,r,n)=>{n.d(r,{ZI:()=>eD,c3:()=>eP}),n(411855);var a=n(842700),i=n(763293),o=n(774844),s=n(10640),l=n(971015),c=n(138712),d=n(146085),u=n(694568),m=n(359419),p=n(583087),h=n(973332),_=n(353341),g=n(335125),f=n(143984),E=n(470370),y=n(163011),b=n(210163),I=n(704327),T=n(398781),v=n(341987),S=n(631437),w=n(897379),A=n(599741),N=n(921211),C=n(977750),L=n(766503),O=n(416580),R=n(826785),P=n(583602),D=n(593961),k=n(304173),M=n(841368),F=n(737834),x=n(516371),U=n(891326),B=n(975798),V=n(710752),G=n(914756),H=n(205478),W=n(615777);n(299321);var K=n(387504),Y=n(923e3),$=n(353598),j=n(279207),z=n(770184),q=n(348119),X=n(615780),J=n(931853),Z=n(390497),Q=n(704728),ee=n(661865),et=n(400232),er=n(805869),en=n(732431),ea=n(638157),ei=n(721935),eo=n(809586),es=n(206186),el=n(963563),ec=n(713122),ed=n(342811),eu=n(309620),em=n(396090),ep=n(805538),eh=n(394757),e_=n(297745),eg=n(457272),ef=n(338659),eE=n(81297),ey=n(507721),eb=n(403203),eI=n(527920),eT=n(952545),ev=n(91521),eS=n(593865),ew=n(607055),eA=n(577777),eN=n(416799),eC=n(733715),eL=n(964854),eO=n(199409),eR=n(969537);Q.A,a.V,er.A,i.V,ee.A,o.c,ew.A,s.i,ew.A,s.i,ei.A,a.V,ec.A,l.U,ed.A,c.R,eu.A,d.A,em.A,u.N,ep.A,m.n,eE.A,p.y,eA.A,a.V,h.p,_.E,eN.A,a.V,eC.A,a.V,eL.A,a.V,eO.A,a.V,$.A,a.V,j.A,a.V,z.A,a.V,q.A,a.V,X.A,a.V,J.A,a.V,en.A,a.V,ea.A,a.V,eo.A,g.p,et.A,f.K,ey.A,E.N,Y.A,y.m,eh.A,b.P,es.A,I.a,Z.A,T.O,es.A,I.a,eT.A,v.i,eT.A,S.A,el.A,w.r,eb.A,a.V,e_.A,A.H,N.K,ef.A,A.H,N.K,ev.A,K.V,N.K,eS.A,K.y,N.K,eg.A,C.O,ef.A,C.O,C.O,eR.A,L.F,O.U,R.m,P.m,D.b,k.n,M.J,F._,x.U,U.a,B.E,V.e,G.U,H.V,W.x,eI.A;let eP=new Path2D("M5 0C2.23857 0 0 2.23857 0 5V35C0 37.7614 2.23857 40 5 40H35C37.7614 40 40 37.7614 40 35V5C40 2.23857 37.7614 0 35 0H5ZM16.2875 29.6971L21.2875 9.69726L23.7127 10.3035L18.7127 30.3034L16.2875 29.6971ZM11.6163 14.1165L6.61626 19.1165L5.73251 20.0005L6.61626 20.8843L11.6163 25.8843L13.384 24.1165L9.268 20.0005L13.384 15.8843L11.6163 14.1165ZM28.384 14.1165L33.384 19.1165L34.268 20.0005L33.384 20.8843L28.384 25.8843L26.6163 24.1165L30.7326 20.0005L26.6163 15.8843L28.384 14.1165Z"),eD=40},22837:(e,r,n)=>{n.d(r,{fG:()=>b});var a=n(662072),i=n(654140),o=n(88334),s=n(633291),l=n(206215),c=n(691501),d=n(759664),u=n(652087),m=n(497538),p=n(814489),h=n(148483),_=n(204347),g=n(219066),f=n(172982);let E={ArrangeAsListBehavior:l.b,ConnectorToolBehavior:c.a,TableBehavior:h.H,TemplatePreviewBehavior:g.Z,VideoBehavior:f.s,SectionPresetBehavior:p.V,DevHandoffAnnotationsMouseBehavior:i.l,ResponsiveSetBehavior:u.j,SitesBlockBehavior:m.Y,SlideDeckAddBehavior:o.w,SlideDeckReorderRowBehavior:s.M,CooperNodeStatusBehavior:a.$,FrameQuickAddBehavior:d._};class y{createMouseBehavior(e){if(e in E)return new E[e];throw Error("unexpected mouse behavior name: "+e)}tableUiReorderHandleHoveredLength(){return _.Ro.reorderHandleHoveredLength}tableUiAddButtonHoveredRadius(){return _.Ro.addButtonHoveredRadius}}function b(){new y}},154979:(e,r,n)=>{n.d(r,{_p:()=>h});var a=n(623738),i=n(97631),o=n(324597),s=n(480952),l=n(261607),c=n(678340),d=n(69961),u=n(631378),m=n(126911);class p{constructor(e){this.getFullscreenMenuItem=e=>{let r=this.store?.getState();if(!r){console.warn("[CustomKeyboardShortcuts] no state found");return}if("fullscreen"!==r.selectedView.view){console.warn("[CustomKeyboardShortcuts] attempted to dispatch an action outside of fullscreen");return}let a=(0,l.b)(r),i=(0,s.V)(r,{isRecovery:!1,isUserInLimitedSpace:!1,fullscreenMemoryWarningLevel:c.Wy.SAFE,unreadCommentCount:void 0,pluginAndWidgetMenuArgs:a,isPublishingModalDisabled:!1}),o=n(586281).M({isReadOnly:r.mirror.appModel.isReadOnly,extensionMenuProps:a,includeDisabled:!1});return new u.x(r.mirror.appModel,r.selectedView,[...i,...o]).getItem(r.mirror.appModel,e)},this.getCallback=e=>{let r=this.getFullscreenMenuItem(e);return r&&r.callback&&this.store?.dispatch?(console.log("[CustomKeyboardShortcut] found action and running callback",{menuItem:r,itemDisplayText:e}),()=>r.callback((0,o.Dz)(r),r.args,this.store.dispatch)):(console.warn("[CustomKeyboardShortcut] could not find item for given action",{menuItem:r,itemDisplayText:e}),null)},this.store=e.store}getCustomKeyboardShortcuts(){if(!this.store||!d.nt.customKeyboardShortcuts.getValue())return[];let e=(0,a.Uc)(),r=[];return Object.entries(e).forEach(([e,{type:n,action:i}])=>{let o;try{o=this.getKeyboardShortcutFromText(e,null)}catch(e){o=null}let s=a.iZ.get(n);if(null===o||void 0===s){console.warn("[CustomKeyboardShortcuts] unable to parse shortcut or shortcutActionType",{actionType:s,text:e});return}r.push({keyboardShortcut:o,type:s,action:i})}),console.log("[CustomKeyboardShortcuts] received request to fetch custom keyboard shortcuts",{shortcutsStorage:e,shortcuts:r}),r}dispatchAction(e){console.log("[CustomKeyboardShortcuts] received request to dispatch",{action:e});let r=this.getCallback(e);return!!r&&(r(),!0)}getDisplayStringFromKey(e){let r=m.y.isApple();switch(e.toUpperCase()){case"'":return"\u2032";case"-":return"\u2013";case"ESCAPE":return"\u238B";case"ENTER":return"\u21A9";case"RETURN":return"\u23CE";case"TAB":return"\u21E5";case"LEFT":return"\u2190";case"RIGHT":return"\u2192";case"UP":return"\u2191";case"DOWN":return"\u2193";case"DELETE":return"\u2326";case"BACKSPACE":return"\u232B";case"CAPS LOCK":return"\u21EA";case"CONTROL":return r?"\u2303":"Ctrl";case"ALT":case"RIGHTALT":return r?"\u2325":"Alt";case"SHIFT":return r?"\u21E7":"Shift";case"META":return r?"\u2318":m.y.isWindows()?"Win":"Meta";default:return e}}getKeyboardShortcutFromText(e,r){let n=i.NF,a=0,o=e.split("+");for(let e of(o.length>0&&""===o[o.length-1]&&(o.pop(),o.length>0&&(o[o.length-1]=o[o.length-1]+"+")),o)){if(""===e)continue;let r=i.cy[e.toUpperCase()];if(e===i.NF||r&&(a&r)>0)return null;if(r&&(r&i.QI)!=0)a|=r;else{if(n!==i.NF)return null;n=e}}return n===i.NF&&0===a?null:{key:n,modifierMask:a,originalText:e,displayName:r}}getTextFromKeyboardShortcut(e){let r=m.y.isApple(),n=(e.displayName?this.getKeyboardShortcutFromText(e.displayName,null):null)??e,a=[];return n.modifierMask&i.pP&&a.push(this.getDisplayStringFromKey("Control")),n.modifierMask&i.xC&&a.push(this.getDisplayStringFromKey("Alt")),n.modifierMask&i.IL&&a.push(this.getDisplayStringFromKey("Shift")),n.modifierMask&i.No&&a.push(this.getDisplayStringFromKey("Meta")),n.modifierMask&i.eb&&a.push(this.getDisplayStringFromKey("RightAlt")),n.key!==i.NF&&a.push(this.getDisplayStringFromKey(n.key)),r?a.join(""):a.join("+")}}function h(e){new p({store:e})}},692609:(e,r,n)=>{n.d(r,{$K:()=>o,F0:()=>g,Fx:()=>m,GN:()=>C,QI:()=>E,Qu:()=>k,RG:()=>O,Te:()=>l,ax:()=>d,cQ:()=>S,ck:()=>A,db:()=>P,hu:()=>b,lR:()=>T,uN:()=>h}),n(411855),n(188507),n(299321),n(966712),n(632430);var a=n(529928);n(416095),n(100197);let{action:i,reducer:o}=(0,a.B5)("SYNC_PUBLISHABLE_SYMBOLS",[]),{action:s,reducer:l}=(0,a.B5)("SYNC_PUBLISHABLE_STATE_GROUPS",[]),{action:c,reducer:d}=(0,a.B5)("SYNC_PUBLISHABLE_STYLES",[]),{action:u,reducer:m}=(0,a.B5)("SYNC_PUBLISHABLE_MODULES",[]),{action:p,reducer:h}=(0,a.B5)("SYNC_SUBSCRIBED_SYMBOLS",[]),{action:_,reducer:g}=(0,a.B5)("SYNC_SUBSCRIBED_SYMBOLS_ON_CURRENT_PAGE",[]),{action:f,reducer:E}=(0,a.B5)("SYNC_SUBSCRIBED_STATE_GROUPS",[]),{action:y,reducer:b}=(0,a.B5)("SYNC_SUBSCRIBED_STATE_GROUPS_ON_CURRENT_PAGE",[]),{action:I,reducer:T}=(0,a.B5)("SYNC_DIRECTLY_SUBSCRIBED_STYLES",[]),{action:v,reducer:S}=(0,a.B5)("SYNC_DIRECTLY_SUBSCRIBED_STYLES_ON_CURRENT_PAGE",[]),{action:w,reducer:A}=(0,a.B5)("SYNC_INDIRECTLY_SUBSCRIBED_STYLES",[]),{action:N,reducer:C}=(0,a.B5)("SYNC_LOCAL_SYMBOLS_THAT_HAVE_USAGES",[]),{action:L,reducer:O}=(0,a.B5)("SYNC_LOCAL_SYMBOLS_THAT_HAVE_USAGES_ON_CURRENT_PAGE",[]),{action:R,reducer:P}=(0,a.B5)("SYNC_LOCAL_STYLES_THAT_HAVE_USAGES",[]),{action:D,reducer:k}=(0,a.B5)("SYNC_LOCAL_STYLES_THAT_HAVE_USAGES_ON_CURRENT_PAGE",[])},860707:(e,r,n)=>{n.d(r,{F4:()=>h,Yc:()=>b,aW:()=>y,bM:()=>f,cF:()=>d,dn:()=>p,le:()=>E,o_:()=>c});var a=n(299321),i=n(737947),o=n(966712),s=n(776621),l=n(356390);let c=1048576,d=1073741824,u=(0,o.kc)().wasm_4gb&&i.Ay.location&&"1"===new URLSearchParams(i.Ay.location.search).get("wasm-4gb"),m=i.Ay.location&&"true"===new URLSearchParams(i.Ay.location.search).get("recovery"),p=u?a.rCR.MAXIMUM:m?a.rCR.RECOVERY:a.rCR.DEFAULT;function h(e){let r=a.hMR.setHeapMemoryMode(e);return(0,s.Lo)("memory",`setHeapMemoryMode(${e}) ${r?"success":"failed"}`),r}let _=null,g=null;function f(e,r){"fullscreen-app"===e?_=r:g=r}function E(e){return"fullscreen-app"===e?_?.()??0:"prototype-lib"===e?g?.()??0:_?.()||g?.()||0}function y(){if(window.performance){let e=window.performance.memory;if(e)return e.usedJSHeapSize}return 0}function b(){return(a.hMR?.getTotalUsedHeapMemory()||0)+l.Y5.memorySpikeOnFileLoadBytes()}(0,o.kc)().memory_profiling_local&&(0,o.b5)()&&(window.startMemoryProfile=async()=>{let e=await window.showSaveFilePicker(),r=await e.createWritable({keepExistingData:!0});window.memoryProfileOperationsWritable=r}),(0,o.b5)()&&(window.getTopMemoryFunctions=()=>{let e=a.YyC.getAll(),r=new Map,n=new Map,i=new Map;for(let o of e)o.includes("allocCallCount")?r.set(o,a.YyC.getCount(o)):o.includes("allocMaxDelta")?n.set(o,a.YyC.getCount(o)):o.includes("allocTotalDelta")&&i.set(o,a.YyC.getCount(o));console.log("call count events",Array.from(r).sort((e,r)=>r[1]-e[1]).slice(0,10)),console.log("max delta events",Array.from(n).sort((e,r)=>r[1]-e[1]).slice(0,10)),console.log("total delta events",Array.from(i).sort((e,r)=>r[1]-e[1]).slice(0,10))},window.resetPerformanceEventCounters=()=>{a.YyC.resetAll()})},5092:(e,r,n)=>{n.d(r,{qZ:()=>p});var a=n(299321),i=n(374626),o=n(939863),s=n(582064),l=n(392592),c=n(112084),d=n(863670),u=n(356390);class m{setMentionsTypeaheadQuery(e){i.zl.set(d.h1,e)}clearMentionsTypeaheadQuery(e,r){if(e){let e=i.zl.get(d.h1),n=i.zl.get(d.LQ)?.index||null,a=i.zl.get(d.wm);(0,c.W)(e,r,n,a)}i.zl.set(d.h1,null),this.endSearchSession()}isShowingMentionsTypeaheadResults(){let e=i.zl.get(d.LQ);return!!e?.mentions?.length}setMentionsTypeaheadTargetRect(e,r,n){i.zl.set(d.MX,{x:e,y:r,height:n,width:0})}startSearchSession(){let e=(0,s.MZ)();return i.zl.set(d.wm,e),e}endSearchSession(){let e=i.zl.get(d.wm);return i.zl.set(d.wm,""),e}showVisualBellForPastedMentions(e,r){u.Y5.dispatch(l.F.enqueue({message:(0,o.t)("whiteboard.visual_bell.canvas_at_mentions_send_notifications_from_pasted_mentions",{numUsers:r}),button:{text:(0,o.t)("whiteboard.visual_bell.canvas_at_mentions_send_notifications_from_pasted_mentions_action"),action:()=>{a.fp8.allowSendNotificationsForPastedMentions(e)}}}))}}function p(){new m}},213190:(e,r,n)=>{n.d(r,{LZ:()=>l,qM:()=>s});var a=n(411855),i=n(299321);n(358145);var o=n(7860);function s(){let{isRightPanelCollapsed:e,isLeftPanelCollapsed:r}=a.useContext(o.t);return r||e}let l=new class{isMinimizedInUI3(){var e,r;return!!i.Ez5&&(e=i.Ez5.uiState().leftPanelCollapsedUI3.getCopy(),r=!i.Ez5.uiState().showPropertiesPanel.getCopy(),e||r)}}},843495:(e,r,n)=>{n.d(r,{Br:()=>M,D$:()=>b,Dh:()=>y,G9:()=>w,GL:()=>v,Hr:()=>E,NT:()=>k,T8:()=>x,Uc:()=>L,XP:()=>W,aB:()=>P,aY:()=>D,bw:()=>R,dH:()=>O,gX:()=>C,hq:()=>N,i:()=>S,iT:()=>A,n_:()=>H,tJ:()=>I,wr:()=>T});var a=n(234352),i=n(67151),o=n(299321),s=n(880934),l=n(776250),c=n(344780),d=n(297666),u=n(517333),m=n(585654),p=n(744939),h=n(38329);n(83909);var _=n(356390),g=n(848661),f=n(279702);let E=s.dI(s.Hr);function y(e){o.Egt.addToSelection(e)}function b(e){o.Egt.removeFromSelection(e)}function I(e,r=!0){o.Egt.replaceSelection(e,r)}function T(){o.Egt.clearSelection()}function v(e,r){o.Egt.selectNodesInRange(e,r)}function S(e,r){let n=h.D?.getState().mirror.sceneGraph.get(e);n&&(n.name=r)}function w(e,r){let n=h.D?.getState().mirror.sceneGraph.get(e);n&&(n.isSymbolPublishable=r)}function A(e,r){let n=h.D?.getState().mirror.sceneGraph.get(e);n&&(n.isPublishable=r)}function N(e){o.Egt.expandUpToRoot(e)}function C(e){o.glU?.updateAppModel(e)}function L(e){C({hoveredNode:e})}function O(e){o.Ez5.uiState().hoveredComponentPropDef.set(e)}function R(e){C({devHandoffCodeLanguage:e})}function P(e){C({devHandoffPreferences:e})}function D(){return o.Ez5?.propertiesPanelState()?.propertiesPanelTab}function k(e){return D()?.set(e)}function M(e){C({activeTextReviewPlugin:e})}let F=["x","y","width","height","minWidth","minHeight","maxWidth","maxHeight","angle","canBecomeFrame","canBecomeGroup","canBecomeSection","aspectRatioLockToggled","miterLimitAngle","terminalCap","dashCap","availableOTFeaturesForSelection","availableOTFeaturesForFonts","toggledOnOTFeaturesForSelection","toggledOffOTFeaturesForSelection","mixedStateOTFeaturesForSelection","detectedList","destinationOverlayPositionType","destinationOverlayBackgroundInteraction","destinationOverlayBackgroundType","destinationOverlayBackgroundColor","name","numSelected","numSelectedByType","arcStart","arcSweep","arcRadius","fontFamily","previewFontFamily","fontStyle","fontVariations","intrinsicLineHeight","textContent","prototypeInteractions","prototypeInheritedInternalInteractions","isValidPrototypingSourceSelected","selectionIsHyperlink","whiteboardControls","whiteboardColor","whiteboardDividedSwatchColors","whiteboardStrokeColor","whiteboardFontFamilies","whiteboardFontSizes","whiteboardTextAlignHorizontal","whiteboardTextAlignVertical","whiteboardStrokeStyle","whiteboardNumSelected","whiteboardNumSelectedByType","whiteboardSelectionCanSummarize","whiteboardSelectionCanCluster","whiteboardSelectionCanShowAiOnboardingBadge","whiteboardStickyAIControlsShown","whiteboardMindmapAIControlsShown","nodeSelectedValidForQuickAdd","whiteboardStrokeWeight","washiTapePaint","washiTapePaintIsMixed","connectorLineStyleForSelection","connectorStartCapForSelection","connectorEndCapForSelection","connectorTextBackgroundTransparent","codeBlockLanguage","codeBlockTheme","leftEndCap","rightEndCap","maxStrokeWeight","shapeWithTextTypeForSelection","shapeWithTextFillType","shapeWithTextOpacityOverride","platformShapeFillType","platformShapeOpacityOverride","authorVisibility","imageAspectRatio","imageHasNoStroke","imageOverlayPaint","sectionContentsHidden","isSection","variableConsumptionInfo","borderTopVisible","borderRightVisible","borderBottomVisible","borderLeftVisible","borderSharedWeight","stackCounterSpacing","directlySubscribedAssetKeys","numVideosSelected","videoAutoplay","videoMediaLoop","videoMuted","themeId","objectAnimationType","objectAnimationDirection","objectAnimationDuration","shadow","blur","htmlWidgetYouTubeVideoURL","htmlWidgetGoogleMapLocation","htmlWidgetGoogleMapZoom","htmlWidgetMailchimpFormURL","htmlWidgetMailchimpInputPlaceholder","htmlWidgetMailchimpSubmitButtonLabel","htmlWidgetMailchimpLayoutIsVertical","htmlWidgetGenericEmbedUrl","htmlWidgetGenericEmbedCodeType","htmlWidgetGenericEmbedIframeHtml","link","appear","hover","press","focus","scrollParallax","scrollTransform","cursor"];function x(e,r,n,s,l){c.rH.start("update-selection-properties");try{!function(e,r,n,s,l){let c={...e},d=function(e){let r=Object.create(null);for(let n of F)if(n in e){let a=e[n];a!==g.oV&&(r[n]=a),delete e[n]}return r}(c),u=function(e){let r={guid:{sessionID:0,localID:0}};for(let n in e){let a=e[n];a!==g.oV&&(r[n]=a)}return r}(c);if(s=function(e){switch(e){case f.zk.YES:case f.zk.YES_FORCE_TRACKING_AS_EDIT:case f.zk.YES_WITHOUT_TRACKING_AS_EDIT:return f.zk.YES;default:return f.zk.NO}}(s),r?.guid){if(d){let e=d.fontFamily&&d.fontStyle;if((0,i.KF)(!e,"UI should never simultaneously update font family and style"),d.fontFamily&&r.fontStyle&&(u.fontName={family:d.fontFamily,style:r.fontStyle,postscript:""}),r.fontFamily&&d.fontStyle&&(u.fontName={family:r.fontFamily,style:d.fontStyle,postscript:""}),d.fontVariations&&(u.fontVariations=d.fontVariations),d.variableConsumptionInfo?.variableConsumptionMap){let e=d.variableConsumptionInfo.variableConsumptionMap;u.variableConsumptionMap=(0,f.w3)(e)}}let e=a.w.encodeMessage({type:"NODE_CHANGES",sessionID:0,ackID:0,nodeChanges:[u]});o.glU?.updateSelectedStyleProperties(e,n,s===f.zk.YES),(0,i.KF)(null!=r.styleType,"unknown style type"),U(r.styleType)}else{let e=a.w.encodeMessage({type:"NODE_CHANGES",sessionID:0,ackID:0,nodeChanges:[u]});o.Egt.updateSelectionProperties(d,n,l,s===f.zk.YES,e)}}(e,r,n,s,l)}catch(e){throw e}finally{c.rH.stop("update-selection-properties")}}let U=(0,d.s)(e=>{(0,l.sx)("Style Edited",{styleType:e})},500),B=Object.create(null);var V=(e=>(e[e.SceneGraph=0]="SceneGraph",e[e.AppModel=1]="AppModel",e[e.Selection=2]="Selection",e[e.SelectionProperties=3]="SelectionProperties",e))(V||{});let G=new Set([0,1,2,3]);function H(e=G){e.has(0)&&_.Y5.fromFullscreen.on("sceneGraphMirrorUpdate",K),e.has(2)&&(_.Y5.fromFullscreen.on("selection:addSelectors",$),_.Y5.fromFullscreen.on("selection:removeSelectors",j),_.Y5.fromFullscreen.on("selection:replaceSelectors",z)),e.has(1)&&_.Y5.fromFullscreen.on("updateAppModel",q),e.has(3)&&_.Y5.fromFullscreen.on("selectionPropertiesUpdate",X)}function W(){let e=B;return B=Object.create(null),e}function K(e){(0,i.KF)(!B.invalidateSceneGraph,"We should get at most one sceneGraphMirrorUpdate per frame. We got two."),B.invalidateSceneGraph={rebuildRows:!e||e.rebuildRows}}function Y(e,r){return e[r]|e[r+1]<<8|e[r+2]<<16|e[r+3]<<24}function $(e){(0,i.KF)(!B.selection?.replace,"addSelectors and replaceSelectors called on the same frame"),B.selection||=Object.create(null),B.selection.add||=Object.create(null),B.selection.userTriggered||=e.userTriggered;let r=e.buffer;if(r)for(let e=0;e<r.length;e+=8){let n=Y(r,e),a=Y(r,e+4),i=s.dI({sessionID:n,localID:a});B.selection.add[i]=!0}}function j(e){(0,i.KF)(!B.selection?.replace,"removeSelectors and replaceSelectors called on the same frame"),B.selection||=Object.create(null),B.selection.remove||=Object.create(null),B.selection.userTriggered||=e.userTriggered;let r=e.buffer;if(r)for(let e=0;e<r.length;e+=8){let n=Y(r,e),a=Y(r,e+4),i=s.dI({sessionID:n,localID:a});B.selection.remove[i]=!0}}function z(e){(0,i.KF)(!B.selection?.add,"addSelectors and replaceSelectors called on the same frame"),(0,i.KF)(!B.selection?.remove,"removeSelectors and replaceSelectors called on the same frame"),B.selection||=Object.create(null),B.selection.replace||=Object.create(null),B.selection.userTriggered||=e.userTriggered;let r=e.buffer;if(r)for(let e=0;e<r.length;e+=8){let n=Y(r,e),a=Y(r,e+4),i=s.dI({sessionID:n,localID:a});B.selection.replace[i]=!0}}function q({changes:e,shouldIgnoreUserPrefs:r}){if(u.eD){let r;let n={},a={},i="actionEnabled__";for(let r of Object.keys(e))if(r.startsWith(i))n[r.substr(i.length)]=e[r].value;else{let n=(0,m.m)(r);if(void 0!==n){let i=e[r].value;for(let{name:e,propertyValue:r}of n.actions)a[e]=i===r}}e.keyboardShortcuts&&(r=(0,p.K)(e.keyboardShortcuts.value));let o=Object.keys(n).length>0,s=Object.keys(a).length>0,l=void 0!==r;(o||s||l)&&u.eD.updateFullscreenMenuState({actionEnabledState:o?n:void 0,actionCheckedState:s?a:void 0,actionShortcuts:r})}let n=Object.create(null),a=Object.create(null);for(let i in e)n[i]=e[i].value,a[i]=r?.[i];B.appModelChanges={...B.appModelChanges,...n},B.appModelChangesShouldIgnoreUserPrefs={...B.appModelChangesShouldIgnoreUserPrefs,...a}}function X(e){let r=e.buffer&&e.buffer.length>0?a.w.decodeMessage(e.buffer):null;delete e.buffer,(0,i.KF)(!B.selectionProperties,"Updating selectionProperties multiple times on a frame"),B.selectionProperties={message:r,derivedProperties:e}}},661060:(e,r,n)=>{n.d(r,{DI:()=>u,Ds:()=>g,e8:()=>m,vS:()=>p});var a=n(299321),i=n(38329),o=n(988022);let s=!1,l=!1,c=!1,d=!1;function u(){l=!0,h()}function m(){s=!1,l=!1,c=!1,d=!1}function p(e,r){let n=i.D.getState(),a=n.openFile?.key;a&&!d&&((0,o.ds)("Show Missing Fonts Popover",a,n,{fontListLoaded:e,counts:r,timeNow:performance.now()}),d=!0)}function h(){if(s&&l&&!c){let e=i.D.getState(),r=new Set(Object.values(e.fonts).map(e=>Object.values(e)).flat().map(e=>e.source)),n=e.openFile?.key,s=e.figFileDuplicatedFromHubFile,l=!1;void 0!==n&&void 0!==s&&(l=null!=s[n]),(0,o.ds)("has_missing_font",n,e,{has_google_fonts:r.has(a.jXp.GOOGLE),has_local_fonts:r.has(a.jXp.LOCAL),has_shared_fonts:r.has(a.jXp.SHARED),is_community_duplicated_file:l}),c=!0}}class _{markMissingFontScannerAsComplete(){s=!0,h()}}function g(){new _}},493862:(e,r,n)=>{n.d(r,{AW:()=>f,Ak:()=>v,Cd:()=>E,Ff:()=>b,IL:()=>N,Ki:()=>S,LD:()=>g,PV:()=>w,W5:()=>y,WA:()=>C,Xk:()=>A,Xl:()=>L});var a=n(299321);n(904669),n(966712);var i=n(374626),o=n(776621),s=n(30637),l=n(356390),c=n(554294),d=n(479296),u=n(730956);let m=null,p=0,h=!1,_=!1;function g(e){switch(e){case a.kul.UNJOINED:return"unjoined";case a.kul.UNJOINED_FROM_ERROR:return"unjoined_from_error";case a.kul.UNJOINED_FROM_VALIDATION_FAILURE:return"unjoined_from_validation_failure";case a.kul.GOT_SCHEMA:return"got_schema";case a.kul.JOINING_INITIAL_LOAD:return"joining_initial_load";case a.kul.JOINING_RECONNECT:return"joining_reconnect";case a.kul.JOINING_RECONNECT_AWAITING_QUERY_REPLY:return"joining_reconnect_awaiting_query_reply";case a.kul.JOINED:return"joined";case a.kul.SHOULD_UPGRADE:return"should_upgrade";case a.kul.UPGRADING:return"upgrading";case a.kul.WAITING_FOR_RELOAD:return"waiting_for_reload";case a.kul.DETACHED:return"detached";default:return"unknown"}}function f(){_||(_=!0,setInterval(()=>l.Y5.isReady()&&a.h3O.updateConnectionStateIfNeeded(!1),250),window.addEventListener("online",()=>{navigator.onLine&&l.Y5.isReady()&&a.h3O.updateConnectionStateIfNeeded(!0)}),window.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&l.Y5.isReady()&&a.h3O.updateConnectionStateIfNeeded(!0)}))}function E(e){m||(m=function(){try{let e=new Blob(["("+function(){onmessage=e=>setTimeout(()=>self.postMessage(""),e.data)}+")()"],{type:"text/javascript"}),r=new Worker(URL.createObjectURL(e));return(e,n)=>{r.onmessage||(r.onmessage=()=>{r.onmessage=null,e()},r.postMessage(n))}}catch(e){return console.error(e),(e,r)=>{setTimeout(e,r)}}}()),p=e,h||function e(){p&&(h=!0,m(function(){h=!1,p&&a.h3O.flush(),e()},p))}()}function y(e){let r=v(),n=S(r);return a.h3O.startLoadingAllPages(r,e),n.then(()=>{i.zl.set(c.nc,!1)}),n}let b=(0,d.n)(()=>a.h3O.isIncrementalSession()||a.h3O.isValidatingIncremental()),I=1,T=new Map,v=()=>I++;function S(e){return new Promise((r,n)=>{T.set(e,[r,n])})}function w(e){let r=T.get(e);if(r){let[n,a]=r;n(),T.delete(e)}}function A(){T.forEach((e,r)=>{let[n,a]=e;a()}),T.clear()}function N(e,r,n=a.DPQ.CONTAINING_PAGE){(0,s.nl)();let i=v(),o=S(i),l=n===a.DPQ.PLUGIN;return a.h3O.subscribeToContainingPage__DO_NOT_USE_DIRECTLY(e,i,r,l),o}function C(e,r,n=a.DPQ.CONTAINING_PAGE){if(0===e.length)return Promise.resolve();(0,s.nl)();let i=v(),o=S(i),l=n===a.DPQ.PLUGIN;return a.h3O.subscribeToContainingPages__DO_NOT_USE_DIRECTLY(e,i,r,l),o}function L(e){let r=()=>{let n=v();return new Promise(async(r,i)=>{e.delete("0:0"),(0,o.Lo)("Autosave",`Requesting dependencies for ${e.size} nodes while loading incrementally`,void 0,{logToConsole:a.NUh.ALWAYS}),await (0,u.oJ)(a.kul.JOINED),T.set(n,[r,i]),a.h3O.autosaveSubscribeToContainingPages(e,n)}).catch(()=>r())};return r()}},74505:(e,r,n)=>{n.d(r,{EE:()=>o,Om:()=>l,lB:()=>s});var a=n(299321);let i={};function o(e,r,n){return i[e]=n,a.glU.addNodePositionSubscription(e,r)}function s(e){delete i[e],a.glU.removeNodePositionSubscription(e)}function l(e,r){let n=i[e];n&&n(r)}},177505:(e,r,n)=>{n.d(r,{$P:()=>v,dh:()=>S,i:()=>b,uS:()=>I}),n(411855),n(188507);var a=n(299321);n(275556);var i=n(880934),o=n(904669),s=n(966712),l=n(392592),c=n(331972);n(662275);var d=n(31913);n(349410),n(83909);var u=n(929715);n(396226),n(356390),n(843495),n(493862);var m=n(457630);n(29680);var p=n(678340);n(335682),n(99506);var h=n(243987),_=n(301462),g=n(601607),f=n(694517);n(300874),n(851363);var E=n(286723);function y(e){return e.match(/^\s+$/)?null:e.match(/^[-\u2013\u2014\*\s]+([^-\u2013\u2014\*]+?)[-\u2013\u2014\*\s]*$/)}function b(e,r){if(!e)return!1;let n=!!y(r),a=e.parentNode?.childrenNodes.find(r=>r?.guid!==e.guid&&r?.isPageDivider&&!!y(r?.name))!==void 0;return!!r.match(/^(-+|\u2013+|\u2014+|\*+|\s+)$/)||((0,s.kc)().ce_page_separators_titles||a)&&!(0,s.O_)()&&n}function I({openFile:e,loadedPageNode:r,pageName:n}){return!!(!(!(0,s.kc)().ce_page_separators||!r||!e||(0,h.KI)(e))&&b(r,n))&&r?.childrenGuids.length===0}n(449731);let T=0;async function v(e,r,n,s,h,g,y,b,I,v){let S;if(v&&(0,c._$)(s,v,"overview_set_current_page"),e===r)return;let w=performance.now(),A=T+=1;g("action_page_switch_initiated",{pageSwitchId:T,oldPageNodeId:r,newPageNodeId:e,isIncremental:a.h3O.isIncrementalSession(),isAlreadyLoaded:h,currentNodeCount:a.CeL?.getFileNodeCount()},{forwardToDatadog:!0});let N=new Promise(e=>{S=e});a.Ez5.currentPageState().requestedPageChange.set(e),requestAnimationFrame(()=>{(0,u.J)(async()=>{if(await (0,o.UN)().setCurrentPageFromNodeAsync(e),r!==e){let o=(0,f.vw)(n),c=(0,p.P3)()>=75,u=c?new Set:n.fetchedPageIds||new Set;if(o&&(c&&s((0,d.EB)({fetchedPageIds:u})),s((0,d.SR)({isLoadingPage:!0})),s((0,f.yH)({version:o,currentPageNodeId:e,fetchedPageIds:u,eventType:"INCREMENTALLY_LOAD_NEW_PAGE"}))),I&&y&&b){let r=a.glU.navigateToFirstVisibleOrClosestChangeForPage(e);r===i.AD?s(l.F.dequeue({matchType:"view_changes"})):(a.Egt.setSelectedNodeAndCanvas(r,!0),y((0,m.QZ)({nodeId:r,...E.ob}),E.kh),b(r))}_.F.trackFromFullscreen("action_page_switch",{oldPageNodeId:r,newPageNodeId:e,pageSwitchIdForTracking:A,duration:performance.now()-w,currentNodeCount:a.CeL?.getFileNodeCount()},!0)}a.Ez5.currentPageState().requestedPageChange.set(""),S()})}),await N}function S(e=!0){return(0,g.Fk)(r=>{if(!e)return"0:1";let n=r.getCurrentPage();return n?n.guid:"0:1"})}},618056:(e,r,n)=>{n.d(r,{E3:()=>N,Lt:()=>M,N9:()=>O,Ou:()=>w,Tm:()=>P,bn:()=>A,c4:()=>x,iC:()=>F,n_:()=>k,qg:()=>R,rC:()=>E,sb:()=>C,x$:()=>S,y7:()=>L});var a=n(234352),i=n(67151),o=n(432258),s=n(23334),l=n(299321),c=n(224622),d=n(689136),u=n.n(d),m=n(568214),p=n(38329),h=n(988022),_=n(356390),g=n(247908),f=n(848661);let E={r:196/255,g:196/255,b:196/255,a:1},y=[{position:0,color:{r:1,g:1,b:1,a:1}},{position:1,color:{r:1,g:1,b:1,a:0}}],b=y.map(g.Ug),I=e=>{let r=c.s.identity();return r.translate(.5,.5),e&&(T(e.leftEndCap)||T(e.rightEndCap))&&(e.angle>=90||e.angle<-90)?r.rotate(Math.PI):!e||e.height>0&&e.width/e.height<=3?(r.rotate(-Math.PI/2),e&&(e.angle<-45&&e.angle>=-135?r.rotate(Math.PI/2):e.angle<-135||e.angle>135?r.rotate(Math.PI):e.angle>45&&e.angle<=135&&r.rotate(-Math.PI/2))):(e.angle>45||e.angle<-135)&&r.rotate(Math.PI),e&&e.hasReflection&&r.rotate(Math.PI),r.translate(-.5,-.5),r.toFigMatrix()};function T(e){if(!e)return!1;switch(e){case"ARROW_LINES":case"ARROW_EQUILATERAL":case"TRIANGLE_FILLED":case"CIRCLE_FILLED":case"DIAMOND_FILLED":return!0;case"ROUND":case"SQUARE":case"NONE":case"HIGHLIGHT":case"WASHI_TAPE_1":case"WASHI_TAPE_2":case"WASHI_TAPE_3":case"WASHI_TAPE_4":case"WASHI_TAPE_5":case"WASHI_TAPE_6":return!1}}let v=null;function S(e){if(!A(e.type))return null;if(0===e.stops.length){let r=p.D.getState();(0,h.ds)("zero_stop_gradient_detected",r.openFile?.key,r),e.stops.push({color:m.FN,position:0})}return e}function w(e){return C(e.type)?e:null}function A(e){return null!=e&&-1!==["GRADIENT_LINEAR","GRADIENT_RADIAL","GRADIENT_ANGULAR","GRADIENT_DIAMOND"].indexOf(e)}function N(e){return null!=e&&-1!==["IMAGE","VIDEO"].indexOf(e)}function C(e){return null!=e&&"SOLID"===e}function L(e){return"IMAGE"!==e.type&&"VIDEO"!==e.type?null:e}function O(e){return!e||(0,f.gl)(e)?null:e.map(L).filter(o.Vq)}function R(e){return Array.from(e.hash).map(e=>(e<16?"0":"")+e.toString(16)).join("")}let P=new class{constructor(){this.clearCache=e=>{null!=e?delete this.cache[e]:this.cache={}},this.getId=(e,r,n)=>`${n}-${r}-${e}`,this.initPaint=(e,r,n,a,i,o)=>this.initPaintWithDefaultImagePaint(e,r,n,a,v,o??!1,i),this.getPaintStopsAndStopsVar=(e,r,n,a)=>{let i=a?[{position:0,color:n},{position:1,color:e}]:[{position:0,color:e},{position:1,color:n}],o=i.map(g.Ug);return r&&(o[a?1:0].colorVar=r),{stops:i,stopsVar:o}},this.initPaintWithDefaultImagePaint=(e,r,n,a,i,o,s)=>{let l={type:e,opacity:1,visible:!0,blendMode:"NORMAL"};if("SOLID"===e?l.color=r:A(e)?(l.stops=y,l.stopsVar=b,l.transform=I(s)):N(e)&&i&&("VIDEO"===e?this.transferVideoAttributes(i,l):this.transferImageAttributes(i,l)),!n)return l;let c=this.cachePaint(n,a);if(this.transferGeneralAttributes(c,l),"SOLID"===e)c.color?this.transferColorAttributes(c,l):c.stops&&c.stops.length&&this.transferColorAttributes(c.stops[0],l);else if(A(e)){if(c.stops)this.transferGradientAttributes(c,l);else if(c.color){let e=x(c.color,o),r=(s&&T(s.rightEndCap))??!1,{stops:n,stopsVar:a}=this.getPaintStopsAndStopsVar({...c.color,a:1},c.colorVar,e,o?!r:r);l.stops=n,l.stopsVar=a}}else"IMAGE"===e?c.image&&c.imageThumbnail&&(this.transferImageAttributes(c,l),l.transform=c.imageTransform):"VIDEO"===e&&c.video&&this.transferVideoAttributes(c,l);return l},this.cachePaint=(e,r)=>(this.cache[r]=this.cache[r]||u()(e),A(e.type)?this.transferGradientAttributes(e,this.cache[r]):"SOLID"===e.type?this.transferColorAttributes(e,this.cache[r]):"IMAGE"===e.type?(this.transferImageAttributes(e,this.cache[r]),this.cache[r].imageTransform=e.transform):"VIDEO"===e.type&&this.transferVideoAttributes(e,this.cache[r]),this.cache[r]),this.transferGeneralAttributes=(e,r)=>{r.opacity=e.opacity,r.blendMode=e.blendMode,r.visible=e.visible},this.transferColorAttributes=(e,r)=>{r.color=e.color},this.transferGradientAttributes=(e,r)=>{r.stops=e.stops,r.stopsVar=e.stopsVar,r.transform=e.transform},this.transferImageAttributes=(e,r)=>{r.image=e.image,r.imageThumbnail=e.imageThumbnail,r.animatedImage=e.animatedImage,r.animationFrame=e.animationFrame,r.imageScaleMode=e.imageScaleMode,r.rotation=e.rotation,r.scale=e.scale,r.paintFilter=e.paintFilter,r.imageShouldColorManage=e.imageShouldColorManage,r.video=void 0},this.transferVideoAttributes=(e,r)=>{r.imageThumbnail=e.imageThumbnail,r.animationFrame=e.animationFrame,r.imageScaleMode=e.imageScaleMode,r.rotation=e.rotation,r.scale=e.scale,r.paintFilter=e.paintFilter,r.video=e.video,r.image=void 0},this.clearCache()}},D=!1;function k(){D||(D=!0,_.Y5.onReady().then(()=>{let e=l.glU.requestDefaultImageStyle(),r=a.w.decodeMessage(e);r.nodeChanges&&r.nodeChanges.length>0&&r.nodeChanges[0].fillPaints&&(v=r.nodeChanges[0].fillPaints[0])}))}function M(e,r){let n=L(e);if(!n)return e;if("STRETCH"===n.imageScaleMode){let e=c.s.identity();return e.translate(.5,.5),e.rotate(-(Math.PI/180*r)),e.translate(-.5,-.5),e.multiply(c.s.fromFigMatrix(n.transform)),{...n,transform:e.toFigMatrix()}}return{...n,rotation:n.rotation+r}}function F(e,r){let n=S(e);if(n){let e=n.stops;return r.index<e.length?e[r.index].color:n.stops[0].color}{let r=w(e);return(0,i.KF)(!!r,"paint is neither a gradient nor a solid"),{...r.color,a:r.opacity??1}}}function x(e,r=!1){var n={...e,a:0};if(!r){let r=(0,s.qN)(e),a=r.v>=.5?r.v-.4:r.v+.4;n=(0,s.kE)({...r,v:a})}return n}},379202:(e,r,n)=>{n.d(r,{Q:()=>i,r:()=>a});var a,i,o=n(299321),s=n(776250),l=n(297666),c=n(966712),d=n(563706),u=n(153808),m=n(860707);class p{constructor(e){for(let r of(this.reported=!1,this.initializationStart=null,this.events={},["applyNodeChanges","multiplayerMessageSize","initializePrototypeLib","viewerSceneDidCompleteInitialLoad","transferSentToWorker","transferMemory","transferMemorySize"]))e[r]=e[r]||[],e[r].push(this)}reset(){this.events={}}start(e){this.logTime(e+"Start"),"initializePrototypeLib"===e&&(this.initializationStart=performance.now())}end(e){this.logTime(e+"End")}logValue(e,r){this.events[e]=r}logTime(e){this.events[e]=Math.round(performance.now())}report(){this.logTime("reportedAt");let e={version:2,firstReport:!this.reported,totalUsedHeapMemory:o.hMR?.getTotalUsedHeapMemory(),maxUsedHeapMemory:o.hMR?.getMaxUsedHeapMemory(),fileKey:u.hk()?.openFileKey(),...this.events};setTimeout(()=>{(0,s.sx)("Prototype Lib Loaded",e),this.reported=!0})}}class h{constructor(e){for(let r of(this.startTimes={},this.meta={},this.track=(0,l.s)(e=>{(0,c.kc)().prototype_lib_perf_report&&(0,s.sx)("Prototype Lib Function",e)},200),["applyNodeChanges","getNodeChangesForSwap","multiplayerMessageSize"]))e[r]=e[r]||[],e[r].push(this)}reset(){this.startTimes={},this.meta={}}logValue(e,r){this.meta[e]=r}start(e){this.startTimes[e]=performance.now()}end(e){if(void 0!==this.startTimes[e]){let r=o.hMR.getTotalUsedHeapMemory(),n=o.hMR.getMaxUsedHeapMemory(),a={name:e,start:this.startTimes[e],end:performance.now(),totalUsedHeapMemory:r,maxUsedHeapMemory:n,...this.meta};this.track(a),this.reset()}}}(e=>{let r={},n=new h(r);e.loadTimer=new p(r);let a=[n,e.loadTimer];e.reset=function(){for(let e of a)e.reset()},e.start=function(e){r[e]?.forEach(r=>r.start(e))},e.end=function(e){r[e]?.forEach(r=>r.end(e))},e.logValue=function(e,n){r[e]?.forEach(r=>r.logValue(e,n))};let i=!0;e.reportOOM=function(r){if(!i)return;i=!1;let n=e.loadTimer.initializationStart?Math.round(performance.now()-e.loadTimer.initializationStart):0,a={totalMemoryInBytes:(0,m.le)(),failedSize:r,currentAllocatedBytes:o.hMR.getTotalUsedHeapMemory(),maxAllocatedBytes:o.hMR.getMaxUsedHeapMemory(),timeSinceInitialization:n,is64BitBrowser:d.Ay.is64BitBrowser};(0,s.sx)("Prototype Lib Out Of Memory",a)}})(a||(a={})),(e=>{let r=null;e.setLoadTimeTracker=function(e){r=e},e.getLoadTimeTracker=function(){return r}})(i||(i={}))},630331:(e,r,n)=>{n.d(r,{Ad:()=>j,B8:()=>K,Cd:()=>er,Cr:()=>ec,Dd:()=>W,Dg:()=>$,E7:()=>ei,H0:()=>J,HF:()=>X,JA:()=>et,LH:()=>ee,P2:()=>en,PY:()=>eu,Ts:()=>eb,Ug:()=>Y,V:()=>H,Zp:()=>es,fl:()=>eE,iW:()=>z,jp:()=>ep,k6:()=>G,kq:()=>el,o3:()=>em,p7:()=>Q,se:()=>Z,sl:()=>eo,vK:()=>q,w4:()=>ea,wl:()=>ed,ye:()=>L,zw:()=>O});var a=n(432258),i=n(7674),o=n(299321),s=n(776250),l=n(344780),c=n(513654),d=n(269584),u=n(966712),m=n(574705),p=n(84917),h=n(964172),_=n(988022),g=n(356390),f=n(122983),E=n(15859);let y={"frame.react-render":.1,"frame.scene-render":.2,"frame.scene-render.render-tree-generation":.2},b=["react","frame","frame.react-render","frame.scene-render","frame.scene-render.render-tree-generation","frame.style-updater","frame.symbol-updater","frame.trigger-action","fullscreen-handle-event","fullscreen-handle-event.trigger-action","frame.comments-render"],I=1,T=!1,v=null,S=0,w=null,A=0,N=-1/0,C=0,L=null,O=null,R=null,P=null,D=new d.zF,k=new d.zF,M=new d.zF,F=new d.zF,x=new d.zF,U=new d.xV,B={},V=!1;function G(e,r){I=e,T=(0,a.Vq)(r),L&&L.setMultiplayerPerfInfo({multiplayerUserCount:I,ongoingSpotlight:T})}function H(){v=null,w=null,L?.stopRecordingAndLog("closing-file"),L?.setFileInfo(null,"unknown")}function W(e,r){L&&(L.setFileInfo(e,(0,_.Dc)(r)),L.startRecording(!0),(0,E.Jr)().setPendingImagesCallback(L.pendingImagesChanged)),v=e,w=performance.now(),S++;let n=(0,u.tl)().editing_file;1===S&&n&&(0,s.sx)("Cold Boot Document Load",{fileKey:v,fileVersion:o.i6g.currentFileVersion(),loadedTime:w,fileNodeCount:o.CeL.getFileNodeCount(),fileTeamId:n.team_id,fileParentOrgId:(0,u.tl)().org_id})}function K(e){L?.setFileInfo(v,_.Dc(e))}function Y(){L?.stopRecordingAndLog("about-to-rebuild-scene")}function $(){L?.startRecording(!1)}function j(){L?.recordSingleFrameNamedEvent("tileRenderingActive")}function z(){L?.recordSingleFrameNamedEvent("createTableActive")}function q(){L?.recordSingleFrameNamedEvent("editTableTextActive")}function X(){L?.recordSingleFrameNamedEvent("reorderTableSpanActive")}function J(){L?.recordSingleFrameNamedEvent("connectDiagramShapeWithConnectorActive")}function Z(){L?.onNodeDragStart()}function Q(){L?.onNodeDragEnd()}function ee(e){L?.onTileRendererChanged(e)}function et(){L?.onContextRestored()}function er(e){L?.updateMaxRenderLayerCount(e)}function en(e){L?.updateMaxRenderedTileBytesUsed(e)}function ea(){L?.incrementNumAnimationsFromCpp()}function ei(){L?.incrementNumAnimationsFromTs()}function eo(){D.setIsActive()}function es(){k.setIsActive()}function el(){M.setIsActive()}function ec(){F.setIsActive()}function ed(){x.setIsActive()}function eu(){L?.recordSingleFrameNamedEvent("createStickyActive")}function em(){L?.recordSingleFrameNamedEvent("differentSectionClicked")}function ep(e){L?.recordSingleFrameNamedEvent(c.jY(e))}let eh=["ALT","META","SHIFT","CONTROL","RIGHT_ALT"];function e_(e){let{fileKey:r,fileNodeCount:n,multiplayerUserCount:a,ongoingSpotlight:o,recentInteractions:s,secondsSinceLoaded:l,version:c,randomID:d}=e,u={fileKey:r,fileNodeCount:n,multiplayerUserCount:a,ongoingSpotlight:o,secondsSinceLoaded:l,version:c,randomID:d,reportCount:A};for(let e=0;e<s.length;e++)u[`recentInteractions.${e}`]=JSON.stringify(s[e]);return(0,m.U)(e.deviceInfo,u),(0,i.Dy)(e.nodeTypeHistogram,u,"nodeTypeHistogram"),u}function eg(e){(0,s.sx)("Slow Editor Interaction",e),N=performance.now(),C=e.duration}function ef(...e){}function eE(){if(!g.Y5?.isReady())return;let e={},r=l.rH.report(),n=0;for(let a of r)!function r(n,a=""){let i=a.length>0?`${a}.${n.name}`:n.name,o=B[i]||n.hitCount,s=n.hitCount-o;s>n.elapsedTimes.length&&(V||(console.warn(`Too many elapsed hits of ${i} since last report`),V=!0),s=n.elapsedTimes.length);let l=0,c=n.elapsedTimes.length;for(let e=c-s;e<c;e++)l+=n.elapsedTimes[e];for(let a of(e[i]=l,B[i]=n.hitCount,n.children))r(a,i)}(a),n+=e[a.name];!function(){var r;if(n/1e3<.2)return;let[a,s]=null===v||null===w?[null,[]]:[{deviceInfo:(0,m.N)(),fileKey:v,fileNodeCount:o.CeL.getFileNodeCount(),multiplayerUserCount:I,ongoingSpotlight:T,nodeTypeHistogram:o.CeL.getNodeTypeHistogram(),recentInteractions:o.CeL.getRecentInteractions(),secondsSinceLoaded:(performance.now()-w)/1e3,version:1,randomID:(0,f.ds)(),reportCount:A},o.CeL.getSlowInteractions()];if(null==a)return;let l={};for(let r in e)-1!==b.indexOf(r)&&(l[r]=e[r]/1e3);let c=s.map(e=>{let r=e.interaction,n={kind:"interaction",type:r.type,subtype:r.subtype,frame:e.frame,collapsed:!1,duration:e.duration,...e_(a)};if(eh.forEach(e=>n["modifier."+e]=null),"MOUSE"===r.type)for(let e of(n.collapsed=r.collapsed,eh))n["modifier."+e]=-1!==r.modifiers.indexOf(e);return(0,i.Dy)(l,n,"timer"),n});for(let r in e){let n=e[r]/1e3,o=y[r];if("number"==typeof o&&n>=o){let e={kind:"timer",type:r,subtype:null,frame:null,collapsed:!1,duration:n,...e_(a)};(0,i.Dy)(l,e,"timer"),eh.forEach(r=>e["modifier."+r]=null),c.push(e)}}if(0===c.length)return;let d=[],u=c,p=60-(performance.now()-N)/1e3;if(0===(u=u.filter(e=>p<=0||e.duration>=2*C)).length&&d.push(`we're in the report cooldown period (${p}s to go) and no reports were long enough to override it (the last report duration was ${C}s)`),p>0&&u.length,null===w)return;let h=60-(performance.now()-w)/1e3;h>0&&d.push(`we're in the document loading cooldown period (${h}s to go)`),d.length>0?1===(r=d).length?r[0]:2===r.length?(r[0],r[1]):(r.slice(0,r.length-1).join(", "),r[2]):((u=u.sort((e,r)=>e.duration-r.duration)).forEach(eg),A++)}(),o.CeL.clearNodeTypeHistogram(),o.CeL.clearSlowInteractions()}function ey(e){let r=0,n=0,a=[];for(let i of e)1===i.path.length&&"frame"===i.path[0]?(n=i.elapsedTime,a.push(i)):i.path.length>1&&"frame"===i.path[0]?(r+=i.elapsedTime,a.push(i)):1===i.path.length&&a.push(i);if(r>0){let e=n-r;a.push({path:["frame","unaccounted-time"],elapsedTime:e})}return a}function eb(){if(!L&&(0,u.kc)().frame_distribution_tracker_edit){let e=e=>{let r=o.AiE.getAndClearHistogramBatchFields(),n=new Map;r.forEach((e,r)=>{n.set(r,e>0)}),e.optimizationExposures=JSON.stringify(Object.fromEntries(n))};(L=new c.AH("editor_frame_distributions",ey,2,!0,new h.s,r=>{e(r)},!1,(e,r=!1)=>{let n=o.AiE.getAndClearSlowFrameTrackerFields(),a=new Map;n.forEach((e,r)=>{a.set(r,e>0)}),e[p.N.optimizationExposuresKey]=JSON.stringify(Object.fromEntries(a));let i=o.yuz.getFullscreenCurrentFrameGpuMetricsJSON();e[p.N.gpuMetricsCurrentFrameKey]=i.toString();let s=o.fZb.getCurrentFrameCpuTimerTreeJSON();if(e[p.N.cpuTimerTreeCurrentFrameKey]=s.toString(),r){let r=o.yuz.getFullscreenPreviousFrameGpuMetricsJSON();e[p.N.gpuMetricsPreviousFrameKey]=r.toString();let n=o.fZb.getPreviousFrameCpuTimerTreeJSON();e[p.N.cpuTimerTreePreviousFrameKey]=n.toString()}let l=o.Ez5.activeRunningAnimations();e[p.N.activeAnimationsKey]=l},e=>{o.AiE.clearSlowFrameTrackerFields(),o.yuz.nextFrame(e),o.fZb?.nextFrame(e)})).addEventTracker("zoomActive",new d.vu),L.addEventTracker("panActive",new d.H0),L.addEventTracker("viewportHasGaps",new d.as(o.pWM.DEFINITELY_COVERED_ONLY)),L.addEventTracker("viewportIncludingOutdatedHasGaps",new d.as(o.pWM.DEFINITELY_COVERED_AND_OUTDATED)),L.addEventTracker("multipleMultiplayerUsersInFile",new d.nc(2,()=>I)),L.addEventTracker("multipleMultiplayerUsersInFileAndPanningOrZooming",new d.Pn(2,()=>I)),L.addEventTracker("viewportHasBlurryRegions",new d.eO(1)),L.addEventTracker("viewportHasVeryBlurryRegions",new d.eO(.5)),L.addEventTracker("viewportIsBlurry",new d.I7(1)),L.addEventTracker("viewportIsVeryBlurry",new d.I7(.5)),L.addEventTracker("timeSlicedEditRenderingActive",new d.t8),L.addEventTracker("stalenessIsHigh",new d.bF(1e3)),L.addEventTracker("stalenessIsVeryHigh",new d.bF(2e3)),L.addEventTracker("moveCursorActive",new d.vw),O=new d.Ti,L.addEventTracker("cursorChatActive",O),R=new d.W,L.addEventTracker("cursorReactionActive",R),L.trackOtherUserCursorMoved(),P=new d.Fy,L.addEventTracker("devModeAnnotationsVisible",P),L.addEventTracker("independentLayerAnimationActive",D),L.addEventTracker("nonIndependentLayerAnimationActive",k),L.addEventTracker("independentLayerActive",M),L.addEventTracker("independentLayerAdded",F),L.addEventTracker("independentLayerRemoved",x),L.addEventTracker("isTypingTextActive",U)}}},46878:(e,r,n)=>{n.d(r,{av:()=>S});var a=n(411855),i=n(318381),o=n(265241),s=n(387644),l=n(615777),c=n(897379),d=n(773959),u=n(821498),m=n(468242),p=n(599741),h=n(533589),_=n(511960),g=n(974502),f=n(839648),E=n(473199),y=n(266011),b=n(93207),I=n(636540),T=n(583719),v=n(966712);function S(e){switch(e){case"CLOSE_OVERLAY":return a.createElement(i.r,null);case"GO_BACK":return a.createElement(o.E,null);case"NAVIGATE_TO":default:return a.createElement(s.N,null);case"OPEN_OVERLAY":return a.createElement(l.x,null);case"OPEN_URL":return a.createElement(c.r,null);case"SCROLL_TO":return a.createElement(d.M,null);case"SWAP_WITH":return a.createElement(u.M,null);case"SWAP_STATE_TO":return a.createElement(m.x,null);case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":case"UPDATE_MEDIA_PLAY":case"UPDATE_MEDIA_PAUSE":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":return a.createElement(p.H,null);case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":case"UPDATE_MEDIA_MUTE":case"UPDATE_MEDIA_UNMUTE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":return a.createElement(h.D,null);case"UPDATE_MEDIA_SKIP_BY_OPTIONS":case"UPDATE_MEDIA_SKIP_FORWARD":case"UPDATE_MEDIA_SKIP_BACKWARD":return a.createElement(_.s,null);case"UPDATE_MEDIA_SKIP_TO":return a.createElement(g.C,null);case"SET_VARIABLE":if((0,v.kc)().ds_variable_props_unified_ui)return a.createElement(f.u,null);return a.createElement(E.D,null);case"SET_VARIABLE_MODE":if((0,v.kc)().ds_variable_props_unified_ui)return a.createElement(y.x,null);return a.createElement(b.E,null);case"CONDITIONAL":return a.createElement(I.$,null);case"NONE":return a.createElement(T.i,null)}}},279994:(e,r,n)=>{n.d(r,{h:()=>i});let a=[];function i(e){for(let r of a)r(e)}},990922:(e,r,n)=>{n.d(r,{$4:()=>b,jI:()=>E,up:()=>y});var a=n(776250),i=n(517333),o=n(38329),s=n(218549),l=n(988022),c=n(356390),d=n(150944),u=n(976269),m=n(109381),p=n(376142),h=n(253999),_=n(26277),g=n(264126);let f=new class{constructor(){this._suggestionsCache=new s.q(100),this._textReviewPluginRunner=new _.X,this._currentPromise=null}async setCurrentImplementation(e,r){let n=await (0,m.LJ)(),i=await (0,m.N_)(),s=(0,m.oz)();await e.initialize(r,[...n,...i,...s]),this._current=e;let c=await (0,m.LE)();console.log(`[spell-check] using implementation: ${this._current?.name}. Current language: ${r}. Supported languages: ${c}`);let d=o.D.getState().selectedView,u=(0,l.Dc)(d.editorType);(0,a.sx)("Spell Check Ready",{productType:u,language:r,implementationName:this._current?.name,userIgnoreWordsCount:(n||[]).length})}get current(){return this._currentPromise||(this._currentPromise=(async()=>(await this.ensureImplementationLoaded(),this._current))()),this._currentPromise}async ensureImplementationLoaded(){if(this._current)return;let e=await (0,m.x5)(),r=(0,h.up)(e),n=(0,m.Ev)(r);switch(e){case g.QC.DESKTOP:await this.setCurrentImplementation(new u.f,n);break;case g.QC.AGENT:await this.setCurrentImplementation(new d.UV,n);break;case g.QC.HUNSPELL:await this.setCurrentImplementation(new p.mz,n)}}async getSuggestionsForWord(e){return this._suggestionsCache.has(e)?Promise.resolve(this._suggestionsCache.get(e)||[]):(await this.current).getSuggestionsForWord(e).then(r=>(this._suggestionsCache.set(e,r),r))}async spellCheckText(e){return(await this.current).spellCheckText(e)}async runTextReviewPlugin(e){return _.X.shouldUsePluginForSpellChecking()?await this._textReviewPluginRunner.reviewText(e):[]}getAPIName(){return this._current?.name||"N/A"}shouldEnableWhenFirstActivated(){let e=navigator.languages||[navigator.language];return function(e,r){if(e)return!0;try{let e=r.map(e=>(e||"").toLowerCase()).map(e=>e.split("-")[0]);if(!(e.includes("en")||e.includes("ru")))return!1}catch(e){}return!0}(!!i.eD,e)}reset(){this._current=void 0,this._currentPromise=null,this._suggestionsCache.reset()}};async function E(e){return await f.ensureImplementationLoaded(),f._suggestionsCache.reset(),f._current.setLanguage(e)}async function y(e){await E((0,m.Ev)(e)),c.Y5&&c.Y5.isReady()&&c.Y5.triggerAction("redo-spell-checking")}let b=f},270271:(e,r,n)=>{n.d(r,{no:()=>c});var a=n(414507),i=n(904669),o=n(776621),s=n(769977);class l{getSummaryAsClipboardText(e){let r;let n=(0,i.UN)().get(e),l=n?.getWidgetSyncedState()["syncedState:ai-summary-items"],c=n?.getWidgetSyncedState()["syncedState:summarized-at"];try{r=JSON.parse(l)}catch(e){(0,o.$D)(a.FigmaTeam.AI_PRODUCTIVITY,Error(`Could not parse summary data, error: ${e}`))}return(0,s.Aq)(r,c)}}function c(){new l}},819983:(e,r,n)=>{n.d(r,{hR:()=>o});var a=n(201535);class i{rgbaToThumbhash(e,r,n){if(e>100||r>100){let a=e,i=r,o=e/r;e<r?e=Math.round((r=100)*o):r=Math.round((e=100)/o);let s=new OffscreenCanvas(a,i),l=s.getContext("2d"),c=new ImageData(new Uint8ClampedArray(n),a,i);l.putImageData(c,0,0);let d=new OffscreenCanvas(e,r).getContext("2d");d.drawImage(s,0,0,a,i,0,0,e,r),n=new Uint8Array(d.getImageData(0,0,e,r).data)}return(0,a.WB)(e,r,n)}thumbhashToRgba(e){let{w:r,h:n,rgba:i}=(0,a.Oe)(e);return{width:r,height:n,rgba:i}}}function o(){new i}},907009:(e,r,n)=>{n.d(r,{fT:()=>l});var a=n(299321),i=n(966712),o=n(898148);class s{isUI3(){return a.Ez5?.uiState().isUI3.getCopy()??!1}showUI3Colors(){return a.Ez5?.uiState().showUI3Colors.getCopy()??!1}showUI3ColorsInitialValue(){return(0,o.KL)()&&!!(0,i.kc)().figjam_ui3_color_palette}}function l(){new s}},424863:(e,r,n)=>{n.d(r,{nd:()=>s});var a=n(299321),i=n(47506);let o=null;function s(e,r){o&&o.pasteID===e&&o.fileKey===r?o.offset=o.offset+1:o={pasteID:e,fileKey:r,offset:1},2===o.offset&&a.glU.shouldNudgeComponentCreationForSelection()&&(0,i.YQ)({id:"Upsell Libraries Valid Paste For Nudge"})}},227944:(e,r,n)=>{n.d(r,{Zr:()=>o});var a=n(188507);n(794272);var i=n(279145);function o(e){return(0,a.d4)(r=>(0,i.Yh)(r.mirror.appModel,e))}},555074:(e,r,n)=>{n.d(r,{kl:()=>l,lJ:()=>c});var a=n(411855),i=n(794272),o=n(356390),s=n(279702);function l(e){return(0,i.R)(r=>r.mirror.selectionProperties[e])}function c(e){return[l(e),a.useCallback((r,n=s.zk.YES)=>{o.Y5.updateSelectionProperties({[e]:r},{shouldCommit:n})},[e])]}},289124:(e,r,n)=>{n.d(r,{_:()=>h});var a=n(299321),i=n(776250),o=n(38329),s=n(737947),l=n(966712),c=n(27087),d=n(939863),u=n(392592),m=n(356390);class p{async pasteVariablesWithLocalizationPopupDEPRECATED(e,r,n){let p=Array.from(e.entries()).map(([e,r])=>`${e}-${r}`).join(","),h=`/api/variables/publish_state?keys=${p}`,_=(await (0,c.GD)(h)).data.meta,g=new Set;return Object.keys(_).forEach(e=>!1===_[e]?g.add(e):null),g.size>0&&((0,i.sx)("prototype.variables_pasted",{numPublished:e.size-g.size,numUnpublished:g.size}),(0,l.kc)().variables_paste_remap_popup?(o.D.dispatch(u.F.dequeue({matchType:"localize_unpublished_variables"})),o.D.dispatch(u.F.dequeue({matchType:"unpublished_variables_localized"})),o.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.paste_unpublished_variable_localize"),type:"localize_unpublished_variables",button:{text:(0,d.t)("proto.paste_unpublished_variable_localize_cta"),action:()=>{let e=a.CWU.performVariableLocalizationFromPopup(g,r,n);if(m.Y5.commit(),Object.keys(e).includes("numberOfNewVariables")){let r=e.numberOfNewVariables;r>0&&o.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.unpublished_variables_localized",{numberOfVariables:r}),type:"unpublished_variables_localized"}))}}}}))):o.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.paste_unpublished_variable"),button:{text:(0,d.t)("proto.paste_unpublished_variable_cta"),action:()=>{s.Ay.unsafeRedirect("https://help.figma.com/hc/en-us/articles/14506821864087#copy_paste","_blank")}}}))),{}}async pasteVariablesWithLocalizationPopup(e,r,n){let p=Array.from(e.entries()).map(([e,r])=>`${e}|${r}`).join(","),h=`/api/variables/publish_state?keysAndLibrary=${p}`,_=(await c.Ay.post(h)).data.meta,g=new Set;return Object.keys(_).forEach(e=>!1===_[e]?g.add(e):null),g.size>0&&((0,i.sx)("prototype.variables_pasted",{numPublished:e.size-g.size,numUnpublished:g.size}),(0,l.kc)().variables_paste_remap_popup?(o.D.dispatch(u.F.dequeue({matchType:"localize_unpublished_variables"})),o.D.dispatch(u.F.dequeue({matchType:"unpublished_variables_localized"})),o.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.paste_unpublished_variable_localize"),type:"localize_unpublished_variables",button:{text:(0,d.t)("proto.paste_unpublished_variable_localize_cta"),action:()=>{let e=a.CWU.performVariableLocalizationFromPopup(g,r,n);if(m.Y5.commit(),Object.keys(e).includes("numberOfNewVariables")){let r=e.numberOfNewVariables;r>0&&o.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.unpublished_variables_localized",{numberOfVariables:r}),type:"unpublished_variables_localized"}))}}}}))):o.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.paste_unpublished_variable"),button:{text:(0,d.t)("proto.paste_unpublished_variable_cta"),action:()=>{s.Ay.unsafeRedirect("https://help.figma.com/hc/en-us/articles/14506821864087#copy_paste","_blank")}}}))),{}}}function h(){new p}},869156:(e,r,n)=>{n.d(r,{AZ:()=>A,BQ:()=>H,EP:()=>es,G6:()=>k,JG:()=>Z,K6:()=>M,Kd:()=>K,L5:()=>el,M6:()=>ec,Pt:()=>R,Rb:()=>O,SG:()=>ei,SR:()=>C,Xv:()=>W,bL:()=>F,e3:()=>J,hg:()=>V,iC:()=>er,jI:()=>z,kf:()=>$,lC:()=>D,nN:()=>N,nR:()=>P,pN:()=>Q,qd:()=>G,rW:()=>w,tZ:()=>U,u:()=>B,u5:()=>j,wM:()=>Y,wX:()=>x,yp:()=>L});var a=n(411855),i=n(432258),o=n(388393),s=n(299321),l=n(677469),c=n.n(l),d=n(44948),u=n(966712),m=n(374626),p=n(38580),h=n(391388),_=n(154483),g=n(696673);n(335682);var f=n(200889),E=n(790202),y=n(173454),b=n(533573),I=n(875157),T=n(859703),v=n(479296),S=n(289704);function w(e){let r=(0,m.md)(T.Gc);return en(e?r[e]??[]:[])}function A(e){return(0,m.md)((0,T.A6)(e))}function N(){return(0,m.md)(T.qy)}function C(){O(),L(),(0,m.md)(T.xA),R(),P(),(0,m.md)(T.jt)}function L(){return en((0,m.md)(T.TD))}function O(){return en((0,m.md)(T.uk))}function R(){return(0,m.md)(T.bO)}function P(){return(0,m.md)(T.LC)}function D(e){return(0,m.md)((0,T.ZG)(e))}function k(e){let r=(0,a.useMemo)(()=>e?(0,T.Eo)(e):(0,p.eU)(null),[e]),n=(0,m.md)(r);if(n)return n;if(!e)return;let i=s.CWU.getSubscribedVariableSetInfo(e);if(i)return(0,y.Rn)(i)}function M(e,r){let n=function(e){let r=e?(0,T.hy)(e):(0,p.eU)(null);return(0,m.md)(r)}(e);return n?.modeValues?.[r]??void 0}function F(e,r){return B(e)?.modeValues?.[r]??void 0}function x(e){let r=(0,d.wm)(()=>e,[e]),n=(0,a.useMemo)(()=>(0,p.eU)(e=>r.map(r=>(0,i.Vq)(r)?e(T.Cg)[r]??null:null)),[r]);return(0,m.md)(n)}function U(e){return B(e)?.name||(e?s.CWU.getVariableNameInStyleSelection(e)??void 0:void 0)}function B(e){let r=(0,a.useMemo)(()=>e?(0,T.Ev)(e):(0,p.eU)(null),[e]),n=(0,m.md)(r);if(n)return n;if(!e)return null;let i=s.CWU.getSubscribedVariableInfo(e);return i?(0,y.ZI)(i):null}function V(e,r){let n=(0,d.wm)(()=>e,[e]),i=(0,a.useMemo)(()=>(0,p.eU)(e=>n.map(n=>{if(!n)return null;let a=e((0,T.Ev)(n));if(a)return a;if(r){let e=s.CWU.getSubscribedVariableInfo(n);if(e)return(0,y.ZI)(e)}return null})),[r,n]);return(0,m.md)(i)}function G(e,r){let n=(0,d.wm)(()=>e,[e]),i=(0,a.useMemo)(()=>(0,p.eU)(e=>{let a={};return n.forEach(n=>{if(!n)return;let i=(0,T.BJ)(n,r??{});if(i){a[n]=e(i);return}a[n]=null}),a}),[n,r]);return(0,m.md)(i)}function H(e,r){let n=(0,a.useMemo)(()=>e?(0,T.BJ)(e,r??{}):(0,p.eU)(null),[e,r]);return(0,m.md)(n)}function W(e,r){return(0,a.useMemo)(()=>{if(!e||!r)return null;let n=new Map(Object.entries(r));return s.CWU.getVariableChainForModes(e,n)},[e,r])}function K(e){let r=B(e),n=k(r?.variableSetId);return n?"LOCAL"===n.subscriptionStatus?n.keyForPublish:n.key:null}function Y(e){let r=(0,a.useMemo)(()=>(0,T.Oj)(e),[e]),n=(0,m.md)(r);return(0,d.k9)(()=>{let e={};for(let r of Object.values(n))if("loaded"===r.status)for(let n of r.data.variableCollection?.variables??[])e[(0,o.ey)(n.key)]=n;return e},[n])}function $(e){let r=(0,a.useMemo)(()=>!e||(0,g.wJ)(e)?(0,p.eU)(null):(0,T.cp)(e),[e]),n=(0,g.$Q)(e),i=(0,T.Ri)(n),o=(0,m.md)(r),s=(0,m.md)(i),l=(0,E.je)(),c=!!l.data?.find(r=>r.fileKey===e);return(0,d.wm)(()=>{if(!c||!o&&!s)return h.Qw.loaded([]);if(o?.status==="loading"||o?.status==="disabled"||s?.status==="loading")return h.Qw.loading();let e=o&&h.Qw.from(o),r=e?{type:"team",value:e}:{type:"community",value:s};return h.Qw.loaded((0,S.cM)(r,!1))},[c,o,s])}function j(e){let r=(0,a.useMemo)(()=>!e||(0,g.wJ)(e)?(0,p.eU)(null):(0,T.cp)(e),[e]),n=(0,g.$Q)(e),i=(0,T.Ri)(n),o=(0,m.md)(r),s=(0,m.md)(i),l=(0,E.je)(),c=l.data?.find(r=>r.fileKey===e);return(0,d.wm)(()=>{if(!c||!o&&!s)return h.Qw.loaded([]);if(o?.status==="loading"||s?.status==="loading")return h.Qw.loading();let e=o&&h.Qw.from(o),r=e?{type:"team",value:e}:{type:"community",value:s};return h.Qw.loaded((0,S.kX)(r,!1))},[c,o,s])}function z(e={}){let r=e?.enabled??!0,n=!!(0,u.kc)().dse_lk_asset_updates_vars,a=q({enabled:r&&!n}),i=X({enabled:r&&n});return n?i:a}let q=(0,v.n)((e={})=>{let r=!1===e.enabled,n=(0,E.je)(),i=(0,d.wm)(()=>n.data?.map(e=>e.fileKey)??[],[n.data]),o=(0,a.useMemo)(()=>r?(0,T.Jo)(i):(0,T.H2)(i),[r,i]),s=(0,m.md)(o);return(0,d.wm)(()=>{let e=h.Qw.all(Object.values(s));return"loaded"!==e.status?e:h.Qw.loaded({items:c()(Object.values(s).map(e=>(0,S.kX)({type:"team",value:e},!1)))})},[s])}),X=(0,v.n)((e={})=>{let r=!1===e.enabled,n=(0,E.je)(),i=(0,d.wm)(()=>n.data?.map(e=>e.libraryKey)??[],[n.data]),o=(0,a.useMemo)(()=>r?(0,T.Jo)(i):(0,T.wh)(i),[r,i]),s=(0,m.md)(o);return(0,d.wm)(()=>{let e=h.Qw.all(Object.values(s));return"loaded"!==e.status?e:h.Qw.loaded({items:Object.values(s).flatMap(e=>(0,S.C$)(e,!1))})},[s])}),J=(0,p.eU)(null);function Z({enabled:e=!0}){let r=ea({enabled:e&&!!(0,u.kc)().dt_suggested_variables_validation}),[n,i]=(0,m.fp)(J);return(0,a.useEffect)(()=>{(null===n||n.status!==r.status)&&i(r)},[r,i,n]),"loaded"===r.status}function Q(e){let r=e?.enabled??!0,n=!!(0,u.kc)().dse_lk_asset_updates_vars,a=ee({enabled:r&&!n}),i=et({enabled:r&&n});return n?i:a}let ee=(0,v.n)(e=>{let r=(0,E.je)(),n=(0,d.wm)(()=>r.data?.filter(e=>!g.wJ(e.fileKey)).map(e=>e.fileKey)??[],[r.data]),i=(0,d.wm)(()=>r.data?.filter(e=>g.wJ(e.fileKey)).map(e=>e.fileKey)??[],[r.data]),o=e?.enabled===!1,s=(0,a.useMemo)(()=>{if(o){let e={};return n.forEach(r=>{e[r]=h.Qw.disabled()}),(0,p.eU)(e)}return(0,T.Yt)(n)},[o,n]),l=(0,m.md)(s),u=(0,a.useMemo)(()=>{if(o){let e={};return i.forEach(r=>{e[r]=h.Qw.disabled()}),(0,p.eU)(e)}return(0,T.hz)(i)},[o,i]),_=(0,m.md)(u);return(0,d.wm)(()=>{let e=h.Qw.all(Object.values({...l,..._}));return"loaded"!==e.status?e.transform(()=>({libraryVariableSets:[],libraryVariables:[]})):h.Qw.loaded({libraryVariableSets:[...c()(Object.values(l).map(e=>(0,S.kX)({type:"team",value:e},!1))),...c()(Object.values(_).map(e=>(0,S.kX)({type:"community",value:e},!1)))],libraryVariables:[...c()(Object.values(l).map(e=>(0,S.cM)({type:"team",value:e},!1))),...c()(Object.values(_).map(e=>(0,S.cM)({type:"community",value:e},!1)))]})},[l,_])}),et=(0,v.n)(e=>{let r=e?.enabled===!1,n=(0,E.je)(),i=(0,d.wm)(()=>n.data?.map(e=>e.libraryKey)??[],[n.data]),o=(0,a.useMemo)(()=>r?(0,T.Jo)(i):(0,T.Ho)(i),[r,i]),s=(0,m.md)(o);return(0,d.wm)(()=>{let e=h.Qw.all(Object.values(s));return"loaded"!==e.status?e.transform(()=>({libraryVariableSets:[],libraryVariables:[]})):h.Qw.loaded({libraryVariableSets:Object.values(s).flatMap(e=>(0,S.C$)(e,!1)),libraryVariables:Object.values(s).flatMap(e=>(0,S.q0)(e,!1))})},[s])});function er(e,r,n,a){if(e)return s.w3z.getIdsOfVariablesWithValue(e,r,{type:n.type,value:n.value},a)}function en(e){return a.useMemo(()=>e.filter(e=>!(0,b.eF)(e)),[e])}function ea(e){let r=O(),n=Q(e);return(0,a.useMemo)(()=>n?.status!=="loaded"?n.transform(()=>[]):h.Qw.loaded([...n.data?.libraryVariables??[],...r??[]]),[r,n])}function ei(e,r){let n=(0,I.iG)(e),i=ea(r);return(0,a.useMemo)(()=>{if("loaded"!==i.status)return i.transform(()=>[]);let r=i.data?.filter(e=>I.AQ(e,n))??[],a=[];for(let n of e){let e=b.Io[n];e&&i&&(a=a.concat(r.filter(r=>e.includes(r.resolvedType))))}return h.Qw.loaded([...a])},[e,i,n])}let eo=(0,_.fv)();function es(e){let r=e?.subscriptionStatus==="SUBSCRIBED"?eo(e):void 0,n=function(e){let r={},n=(0,E.je)();if(n.data){for(let a of e)for(let e of n.data)if(e.fileKey===a){r[a]=e.name;break}}return r}(r?[r]:[]),a=r?n[r]:void 0,i=e?.subscriptionStatus==="SUBSCRIBED"?e.library_key:void 0,o=(0,f.U)(i?[i]:[],{enabled:(0,u.kc)().dse_lk_asset_updates_vars}).data,s=i?o?.[i]:void 0;return(0,u.kc)().dse_lk_asset_updates_vars?s:a}function el(e){let r=e&&(0,y.GI)(e),n=k(r?e.rootVariableSetId:void 0);return(r?n:e)??null}function ec(){return(ei(["FONT_STYLE"]).data??[]).length>0}},281889:(e,r,n)=>{n.d(r,{RW:()=>E,Vr:()=>l,_n:()=>d,j2:()=>m,uE:()=>g,xQ:()=>I,xb:()=>h});var a=n(109388),i=n(960200),o=n(299321);let s=null;function l(e){return s=e,()=>{s=null}}let c=null;function d(e){return c=e,()=>{c=null}}let u=null;function m(e){return u=e,()=>{u=null}}let p=null;function h(e){return p=e,()=>{p=null}}let _=null;function g(e){return _=e,()=>{_=null}}let f=new i.b("VariableMirrorVariableResolvedValueEmitter");function E(e,r,n){return o.u4j.subscribeToLocalVariableResolvedValue(e,r),f.on(e,n),()=>{o.u4j.unsubscribeFromLocalVariableResolvedValue(e,r),f.removeListener(e,n)}}let y=new i.b("VariableMirrorExplicitModeEmitter");class b{localVariableSetUpdated(e){(0,a.unstable_batchedUpdates)(()=>{s?.({added:[e]})})}localVariableSetDeleted(e){(0,a.unstable_batchedUpdates)(()=>{s?.({deleted:e}),u?.({setDeleted:e})})}subscribedVariableSetUpdated(e,r){(0,a.unstable_batchedUpdates)(()=>{c?.({added:[e]}),_?.({setDeleted:e.id}),_?.({added:r})})}subscribedVariableSetDeleted(e){(0,a.unstable_batchedUpdates)(()=>{c?.({deleted:e}),_?.({setDeleted:e})})}localVariablesUpdated(e){u?.({added:e})}localVariableOverridesUpdated(e){p?.({added:e})}localVariableOverridesDeleted(e){p?.({deleted:e})}localVariablesDeleted(e){u?.({deleted:e}),e.forEach(e=>{f.trigger(e,{})})}variableResolvedValueUpdated(e,r){f.trigger(e,r)}explicitModeUpdated(e,r){y.trigger(e,r)}resetMirrorCache(){(0,a.unstable_batchedUpdates)(()=>{s?.(null),u?.(null),p?.(null),c?.(null),_?.(null)}),f.removeAllListeners()}}function I(){new b}},794581:(e,r,n)=>{n.d(r,{tG:()=>_});var a=n(299321),i=n(297666),o=n(966712),s=n(27087),l=n(680421),c=n(754168),d=n(356390),u=n(15859),m=n(534532);class p{constructor(){this.pendingPasteRequests={},this.pendingVideosToRecord={},this.pendingRecordVideosTasks={},this.allVideos={},this.flushPendingRecordVideos=(0,i.s)(async()=>{let e=this.pendingVideosToRecord,r=this.pendingRecordVideosTasks,n=Object.keys(e);this.pendingVideosToRecord={},this.pendingRecordVideosTasks={};let i=await this.getEditingFileKey();n.forEach(async n=>{if(i===n){r[n].resolve();return}if(!n){r[n].reject("Invalid originFileKey");return}let o=1,l=e[n];for(;;){try{let e=await s.Ay.put(`/api/files/${i}`,{video_sha1s:l,image_origin_file_key:n}),{success:o,failed:c}=u.xY.parseFileUpdateResponseForImages(l,e);for(let e of(a.tHB.markVideoPermissionsCopied(o),c))a.tHB.videoIsMissing(e);for(let e of l)delete this.pendingPasteRequests[e];r[n].resolve(),this.getAllVideoUrls();return}catch(e){if(e.status>=400&&e.status<500){for(let e of l)a.tHB.videoIsMissing(e),delete this.pendingPasteRequests[e];r[n].resolve();return}}let e=1e3*o*Math.random();await new Promise(r=>setTimeout(r,e)),o=Math.min(2*o,64)}})},100)}async getAllVideoUrls(){if(!(0,o.kc)().cross_env_paste)return;let e=await c.S.getVideos({fileKey:await this.getEditingFileKey()});this.allVideos=e.data.meta.videos}getSignedUrls(e){let r=new Map;for(let n of e)r.set(n,this.allVideos[n]);return r}recordVideos(e,r){if(0===r.length)return Promise.resolve();if(!e)throw Error("No originFileKey specified");if(this.pendingVideosToRecord[e]=this.pendingVideosToRecord[e]||[],this.pendingVideosToRecord[e].push(...r),!this.pendingRecordVideosTasks[e]){let r,n;let a=new Promise((e,a)=>{r=e,n=a});this.pendingRecordVideosTasks[e]={promise:a,resolve:r,reject:n}}for(let n of r)this.pendingPasteRequests[n]=this.pendingRecordVideosTasks[e].promise;let n=this.pendingRecordVideosTasks[e].promise;return this.flushPendingRecordVideos(),n}getEditingFileKey(){return d.Y5.openFileKeyPromise()}}let h=new class{constructor(){this.videoManager=new p,this.thumbnailGenerator=m.t}copyVideoPermissions(e,r){return this.videoManager.recordVideos(e,r)}createVideo(){return this.thumbnailGenerator.createVideo()}deleteVideo(e){this.thumbnailGenerator.deleteVideo(e)}getWidth(e){return this.thumbnailGenerator.getWidth(e)}getHeight(e){return this.thumbnailGenerator.getHeight(e)}getCoverImage(e){return this.thumbnailGenerator.getCoverImage(e)}loadVideo(e,r,n){return this.thumbnailGenerator.loadVideo(e,r,n)}getSignedUrls(e){return this.videoManager.getSignedUrls(e)}async setExternalSource(e,r){let n=await fetch(r),a=new Uint8Array(await n.arrayBuffer()),i=await d.Y5.openFileKeyPromise();(0,l.Cb)([{sha1:e,bytes:a}],i)}loadAllVideos(){return this.videoManager.getAllVideoUrls()}};function _(){return h.videoManager}},815485:(e,r,n)=>{n.d(r,{i:()=>i});let a=[];function i(e,r){for(let n of a)n(e,r)}},457630:(e,r,n)=>{let a;n.d(r,{$$:()=>b,Cj:()=>U,D6:()=>A,HD:()=>v,PD:()=>w,Pl:()=>P,QZ:()=>F,Qt:()=>y,Yb:()=>I,Z0:()=>f,_X:()=>D,gc:()=>a,kE:()=>E,lc:()=>M,ni:()=>k,qc:()=>T,th:()=>S});var i=n(411855),o=n(109388),s=n(299321),l=n(91408),c=n(886653),d=n(776621),u=n(572206),m=n(651963),p=n(433861),h=n(356390),_=n(617453),g=n(930269);function f(e,r,n=!0){let a={x:e.width/2+(r.x-e.offsetX)*e.zoomScale,y:e.height/2+(r.y-e.offsetY)*e.zoomScale};return n?u.Mi.rounded(a):a}function E(e,r){return Math.round(e/r-.5)}function y(e,r,n,a){return Math.round(a/2+(e-r)*n)}function b(e,r){return u.Mi.rounded({x:(r.x-e.width/2)/e.zoomScale+e.offsetX,y:(r.y-e.height/2)/e.zoomScale+e.offsetY})}function I(e,r,n){let a=f(e,{x:r.x,y:r.y},n);return{x:a.x,y:a.y,width:r.width*e.zoomScale,height:r.height*e.zoomScale}}function T(e){if(e.height<0||e.width<0||e.zoomScale<=0)throw(0,d.x1)("Viewport","invalid values",{info:e}),Error("Invalid Viewport");return{x:e.offsetX-e.width/e.zoomScale/2,y:e.offsetY-e.height/e.zoomScale/2,width:e.width/e.zoomScale,height:e.height/e.zoomScale}}function v(e,r){return{x:e.x+r.x,y:e.y+r.y,width:e.width,height:e.height}}function S(e){return(0,c.xx)((e,r,n,a)=>({x:e,y:r,height:n,width:a}))(e.x,e.y,e.height,e.width)}function w({subscribeToUpdates_expensive:e}){let r=D({subscribeToUpdates_expensive:e}),n=i.useContext(p.QZ).current||r,a=r.offsetX-n.offsetX,o=r.offsetY-n.offsetY,s=r.zoomScale-n.zoomScale;return{...r,deltaOffsetX:a,deltaOffsetY:o,deltaZoomScale:s}}function A(e,r){i.useEffect(()=>{h.Y5?.isReady()&&e.subscribeToUpdates_expensive&&(r(h.Y5.getViewportInfo()),(0,m.H)())},[r,e.subscribeToUpdates_expensive]),i.useEffect(()=>{if(h.Y5&&e.subscribeToUpdates_expensive){let e=e=>{(0,o.flushSync)(()=>{r(e)})};return h.Y5.viewport.on("onSetViewport",e),()=>{h.Y5.viewport.removeListener("onSetViewport",e)}}},[r,e.subscribeToUpdates_expensive])}function N(e){return i.useContext(e),i.useContext(p.HA).current||p.t4}function C(e){return N(e.subscribeToUpdates_expensive?p.k9:p.cY).x}function L(e){return N(e.subscribeToUpdates_expensive?p.lG:p.cY).y}function O(e){return N(e.subscribeToUpdates_expensive?p.Os:p.cY).width}function R(e){return N(e.subscribeToUpdates_expensive?p.zE:p.cY).height}function P(e){return N(e.subscribeToUpdates_expensive?p.zx:p.cY).zoomScale}function D(e){let r=C(e),n=L(e),a=O(e),o=R(e),s=N(e.subscribeToUpdates_expensive?p.j0:p.cY).offsetX,l=N(e.subscribeToUpdates_expensive?p.u7:p.cY).offsetY,c=P(e),d=N(e.subscribeToUpdates_expensive?p.l9:p.Vl).isPanning,u=N(e.subscribeToUpdates_expensive?p.b8:p.Vl).isZooming;return i.useMemo(()=>({x:r,y:n,width:a,height:o,offsetX:s,offsetY:l,zoomScale:c,isPanning:d,isZooming:u}),[r,n,a,o,s,l,c,d,u])}function k(){let e={subscribeToUpdates_expensive:!0},r=C(e),n=L(e),a=O(e),o=R(e);return i.useMemo(()=>({x:r,y:n,width:a,height:o}),[r,n,a,o])}function M(){a=void 0}function F(e){let r=new Promise(e=>{a=e});return s.glU.computeViewportSettingsForNode__DO_NOT_USE_DIRECTLY(e),r}let x=(0,l.jz)(g.rulerThickness);function U(){let e={subscribeToUpdates_expensive:!0},r=(0,_.lK)()?x:0,n=C(e)+r,a=L(e)+r,o=O(e)-r,s=R(e)-r;return i.useMemo(()=>({x:n,y:a,width:o,height:s}),[n,a,o,s])}},939745:(e,r,n)=>{n.d(r,{bJ:()=>c});var a=n(23334),i=n(568214),o=n(374626),s=n(225719);class l{isCustomPaletteColor(e,r){let n=o.zl.get(s.$R);if(n){let o=(0,a.aH)(e);for(let e of(0,s.Uh)(r))if(n[e].some(e=>(0,i.DA)(o,e)))return!0}return!1}}function c(){new l}},633648:(e,r,n)=>{n.d(r,{A9:()=>o});var a=n(161459);class i{constructor(){this.getDefaultPencilStrokeWeight=()=>a.wv,this.getDefaultHighlighterStrokeWeight=()=>a.g5}}function o(){new i}},72274:(e,r,n)=>{n.d(r,{Vi:()=>u,uE:()=>d});var a=n(939863),i=n(33404),o=n(609622),s=n(164782),l=n(128803),c=n(248639);let d={[c.k.EMBED_WIDGET]:s.g,[c.k.LINK_PREVIEW_WIDGET]:l.Nd,[c.k.AI_SUMMARY_WIDGET]:o.V,[c.k.HTML_WIDGET]:i.u};function u(e){return!!c.k[e]}c.k.EMBED_WIDGET,s.w.OPEN,s.w.CONVERT_TO_TEXT,c.k.LINK_PREVIEW_WIDGET,l.HP.OPEN,l.HP.VERTICAL,l.HP.HORIZONTAL,l.HP.CONVERT_TO_TEXT,c.k.AI_SUMMARY_WIDGET,c.k.HTML_WIDGET},488983:(e,r,n)=>{n.d(r,{Bz:()=>M,F$:()=>F,bY:()=>D,e3:()=>H,g4:()=>B,wl:()=>k,y4:()=>W});var a=n(681067),i=n(414507),o=n(299321),s=n(232297),l=n(776250),c=n(517333),d=n(686759),u=n(737947),m=n(966712),p=n(563706),h=n(776621),_=n(30637),g=n(490768),f=n(129318),E=n(760640),y=n(860707),b=n(474985);function I(e){return"prototype-lib"===e?Fig.prototypeLibURLs["compiled_wasm.wasm"]:Fig.fullscreenURLs["compiled_wasm.wasm"]}function T(e){return"prototype-lib"===e?Fig.prototypeLibURLs["compiled_wasm.js"]:Fig.fullscreenURLs["compiled_wasm.js"]}async function v(e,r){await (0,d.k0)(T(r));let n={wasmBinaryFile:I(r),preRun(){n.emscripten_realloc_buffer(1610612736)}};window.Module=n,(0,s.jS)({callMain:(0,s.eS)(),tsApisForCpp:e,registerRefreshCallback:e=>{(0,b.vw)(r,e)}})}async function S(e){try{await E.xK.timeAsync("loadingCode",()=>window.FULLSCREEN_PRELOADS?.js||(0,d.k0)(T(e)))}catch(e){throw Error("Failed to load fullscreen JS code")}return(0,s.N4)({isProduction:!0,executeEmscriptenJS:(0,s.eS)()})}async function w(e,r){let n=E.xK.time("instantiateStreaming",async()=>{try{return await WebAssembly.instantiateStreaming(e,r)}catch(e){if("string"==typeof e)throw Error(e);throw e}});return await E.xK.timeAsync("awaitInstantiateStreaming",()=>n)}async function A(e,r){if(!e.ok)throw Error(`Downloading wasm failed with ${e.status}`);let n=await e.arrayBuffer(),a=E.xK.time("instantiate",async()=>{try{return await WebAssembly.instantiate(n,r)}catch(e){if("string"==typeof e)throw Error(e);throw e}});return await E.xK.timeAsync("awaitInstantiate",()=>a)}let N=!1,C=null;async function L(e){!C||C===e||(0,_.nl)()||k()||("fullscreen-app"===C?(0,h.$D)(i.FigmaTeam.CLIENT_PLATFORM,Error("Previously downloaded fullscreen wasm, but is now downloading prototype-lib")):"prototype-lib"===C&&(0,h.$D)(i.FigmaTeam.CLIENT_PLATFORM,Error("Previously downloaded prototype-lib wasm, but is now downloading fullscreen")));let r=I(e);E.xK.start("loadingBinaryStart");let[n,a]=await Promise.all([window.FULLSCREEN_PRELOADS?.wasm||fetch(r),S(e)]);delete window.FULLSCREEN_PRELOADS;let{imports:o,receiveInstance:s,getReservedHeapSize:l}=a;if((0,y.bM)(e,l),"true"===n.headers.get("x-figma-local-build")&&(N=!0),WebAssembly.instantiateStreaming)try{let r=await w(n,o);return C=e,{receiveInstance:s,wasmResult:r}}catch(e){if(e&&(!e.message||e.message.includes("Incorrect response MIME type")||e.message.includes("Unexpected response MIME type")))console.warn('Detected a proxy interfering with the "application/wasm" MIME type. Falling back to a slower WebAssembly instantiation method instead.'),(0,h.$D)(i.FigmaTeam.UNOWNED,Error(`Working around error instantiating streaming fullscreen WASM: ${e}`)),n=await fetch(r);else throw(0,h.xi)("loader","Error loading wasm",{url:r,message:e?.message}),e}let c=await A(n,o);return C=e,{receiveInstance:s,wasmResult:c}}let O=(0,a.Kt)(async()=>await L("fullscreen-app")),R=(0,a.Kt)(async()=>await L("prototype-lib")),P=async e=>{switch(e){case"fullscreen-app":return await O();case"prototype-lib":return await R()}};function D(e){let r=e||G||C;if(r){let e=I(r).split("/");if(e.length<2)return;let n=e[e.length-2];if("fullscreen-wasm"===n)return{fullscreen_variant:"wasm"};if("prototype-lib"===n)return{prototype_variant:"lib"};if(n.startsWith("fullscreen-wasm-"))return{fullscreen_variant:n.replace("fullscreen-wasm-","")};if(n.startsWith("prototype-lib-"))return{prototype_variant:n.replace("prototype-lib-","")}}return{}}function k(){let e=u.Ay.location.pathname;for(let r of["/c","/community","/@","/user","/org","/team"])if(e.startsWith(r))return!0;return!1}let M=!/Mobi/.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent);function F(e="fullscreen-app"){return P(e).then(()=>{})}let x=document.location.pathname;function U(e){return"/preload-editor"===e||"/preload-android-proto"===e}function B(){return U(x)&&(0,p.KR)()&&p.m0||(0,g.Sh)(x)||c.eD&&c.eD.isFileBrowserTab()||c.S8||k()||U(u.Ay.location.pathname)&&!c.eD?"never":!(0,m.kc)().preload_fullscreen_on_load||"complete"===document.readyState||(0,u.Cs)()?"immediately":"eventually"}let V=null,G=null;async function H(e,r="fullscreen-app"){if(G&&G!==r&&!(0,_.nl)()&&("fullscreen-app"===G?(0,h.$D)(i.FigmaTeam.UNOWNED,Error("Previously initialized fullscreen wasm, but is now initializing prototype-lib")):"prototype-lib"===G&&(0,h.$D)(i.FigmaTeam.UNOWNED,Error("Previously initialized prototype-lib wasm, but is now initializing fullscreen"))),!I(r)||!window.WebAssembly)return location.href="/unsupported_browser",new Promise(()=>null);if((0,f.QL)("asan"))return G=r,v(e,r);try{V&&V!==e&&await u.Ay.reloadAndWaitForever("tsApisForCpp changed",{from:o.uCV[V.CommonApp().appType()],to:o.uCV[e.CommonApp().appType()]}),V=e;let{receiveInstance:n,wasmResult:a}=await P(r);(0,s.jS)({callMain:()=>{E.xK.time("callMain",()=>n(a.instance,a.module))},tsApisForCpp:V,registerRefreshCallback:e=>{(0,b.vw)(r,e)}}),G=r,(0,_.nl)()&&o.msz.setIsRunningInteractionTests();let i=D(r);(0,l.sx)("Fullscreen Loaded",{...i})}catch(e){throw(0,l.sx)("Fullscreen Load Failure",{error:e+""}),!e||"Failed to fetch"===e.message||"Could not download wasm module"===e.message||e.message.includes("NetworkError")||e.message.toLowerCase().includes("network error")||(e instanceof Error||(e=Error(`Fullscreen load failure: ${e}`)),(0,h.$D)(i.FigmaTeam.UNOWNED,e)),e.reportedToSentry=!0,e}}function W(){if(N)return!0;let e=Fig.fullscreenURLs["compiled_wasm.js"];return!!(e&&e.startsWith("/"))}},560718:(e,r,n)=>{n.d(r,{Ni:()=>i});var a=(e=>(e.COMMUNITY="community",e))(a||{}),i=(e=>(e.ALL_DISABLED="all_disabled",e.ENABLED="enabled",e))(i||{}),o=(e=>(e.REPORT="report",e.REPORT_AND_HIDE="report_and_hide",e))(o||{})},477782:(e,r,n)=>{n.d(r,{Tf:()=>y,Y6:()=>E,YC:()=>I,fA:()=>g,hi:()=>b,nb:()=>_,yF:()=>f}),n(411855),n(188507);var a=n(67151),i=n(38580),o=n(374626),s=n(711525),l=n(391388),c=n(420576),d=n(99506),u=n(279453),m=n(378356),p=n(27703),h=n(132135),_=(e=>(e.FILE="FILE",e.PROTOTYPE="PROTOTYPE",e.REPO="REPO",e.PINNED_FILE="PINNED_FILE",e.OFFLINE_FILE="OFFLINE_FILE",e))(_||{});function g(e){return{type:"FILE",file:e}}function f(e){let r=(0,c.LH)(e.repo,e.branches,e.selectedBranchKey);return r?r:(e.repo.default_file_key?(0,c.LH)(e.repo,e.branches,e.repo.default_file_key):null)||e.branches[0]}let E=(0,i.eU)(null);class y{static getId(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.file_key+","+e.prototype.page_id+","+e.prototype.id;case"REPO":return e.repo.id;case"OFFLINE_FILE":return e.file.fileKey;default:(0,a.xb)(e)}}static sameObject(e,r){if(e.type!==r.type)return!1;switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key===r.file.key;case"PROTOTYPE":return e.prototype.id===r.prototype.id;case"REPO":return e.repo.id===r.repo.id;case"OFFLINE_FILE":return e.file.fileKey===r.file.fileKey;default:(0,a.xb)(e)}}static getName(e){switch(e.type){case"FILE":case"PINNED_FILE":case"OFFLINE_FILE":return e.file.name;case"PROTOTYPE":return e.prototype.fig_file.name+" - "+e.prototype.name;case"REPO":return(0,c.oj)(e.repo);default:(0,a.xb)(e)}}static getAccessedAt(e){switch(e.type){case"FILE":return e.file.accessed_at;case"PROTOTYPE":return e.prototype.accessed_at;case"REPO":return e.accessed_at;case"PINNED_FILE":return null;case"OFFLINE_FILE":return new Date(e.file.lastUpdatedAt).toISOString();default:(0,a.xb)(e)}}static getSharedAt(e){switch(e.type){case"FILE":return e.file.shared_at;case"PROTOTYPE":return e.prototype.shared_at;case"REPO":return e.repo.shared_at;case"PINNED_FILE":case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getCreatedAt(e){switch(e.type){case"FILE":return e.file.created_at;case"PINNED_FILE":return e.file.createdAt.toISOString();case"PROTOTYPE":return e.prototype.fig_file.created_at;case"REPO":return e.branches.reduce((e,r)=>e<r.created_at?e:r.created_at,e.repo.created_at);case"OFFLINE_FILE":return new Date(e.file.createdAt).toISOString();default:(0,a.xb)(e)}}static getTouchedAt(e){switch(e.type){case"FILE":return e.file.touched_at??e.file.updated_at;case"REPO":return e.branches.reduce((e,r)=>null!==e&&e>r.touched_at?e:r.touched_at,null);case"PROTOTYPE":return e.prototype.accessed_at;case"PINNED_FILE":return null;case"OFFLINE_FILE":return new Date(e.file.lastUpdatedAt).toISOString();default:(0,a.xb)(e)}}static getTrashedAt(e){switch(e.type){case"FILE":return e.file.trashed_at;case"PROTOTYPE":return e.prototype.fig_file.trashed_at;case"REPO":return e.repo.trashed_at;case"PINNED_FILE":case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getTrashedUser(e){switch(e.type){case"FILE":return{id:e.file.trashed_user_id,handle:e.file.trashed_user?.handle};case"PROTOTYPE":case"REPO":case"PINNED_FILE":case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getIsFavorited(e){switch(e.type){case"FILE":return!!e.file.is_favorited;case"PROTOTYPE":return!!e.prototype.is_favorited;case"REPO":return!!e.repo.is_favorited;case"PINNED_FILE":case"OFFLINE_FILE":return!1;default:(0,a.xb)(e)}}static getFavoritedResourceType(e){switch(e.type){case"FILE":case"PINNED_FILE":case"REPO":case"OFFLINE_FILE":return d.bk.FILE;case"PROTOTYPE":return d.bk.PROTOTYPE;default:(0,a.xb)(e)}}static getFileKey(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.file_key;case"REPO":return e.repo.default_file_key??void 0;case"OFFLINE_FILE":return;default:(0,a.xb)(e)}}static getUrl(e,r){switch(e.type){case"FILE":return(0,h.to)(e.file);case"PINNED_FILE":return(0,h.jN)(e);case"PROTOTYPE":return e.prototype.url;case"REPO":let n=(0,c.mr)(e.repo,e.branches,r);return n?(0,c.CE)(n,e.repo,"file"):"";case"OFFLINE_FILE":return"";default:(0,a.xb)(e)}}static getEditUrl(e,r){switch(e.type){case"FILE":return(0,h.rl)(e.file);case"PINNED_FILE":return(0,h.jN)({...e,allowDefaulting:!0});case"PROTOTYPE":return e.prototype.url;case"REPO":let n=(0,c.mr)(e.repo,e.branches,r);return n?(0,h.rl)(n):"";case"OFFLINE_FILE":return"";default:(0,a.xb)(e)}}static getFavoriteResourceId(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.id;case"REPO":return e.repo.default_file_key;case"OFFLINE_FILE":return e.file.fileKey;default:(0,a.xb)(e)}}static getIsTeamTemplate(e){switch(e.type){case"FILE":return e.file.is_team_template;case"PINNED_FILE":return e.file.isTeamTemplate;case"PROTOTYPE":case"REPO":case"OFFLINE_FILE":return!1;default:(0,a.xb)(e)}}static getOrgId(e){switch(e.type){case"FILE":return e.file.parent_org?.id??e.file.parent_org_id;case"PINNED_FILE":return e.file.parentOrgId;case"PROTOTYPE":return e.prototype.fig_file.parent_org_id??e.prototype.fig_file.parent_org_id;case"REPO":return e.repo.parent_org?.id??e.repo.parent_org_id;case"OFFLINE_FILE":return e.file.orgId;default:(0,a.xb)(e)}}static getFavoriteResourceTeamId(e){switch(e.type){case"FILE":return e.file.parent_team?.id??e.file.team_id;case"PINNED_FILE":default:return null;case"PROTOTYPE":return e.prototype.parent_team?.id??e.prototype.fig_file?.team_id;case"REPO":return e.repo.parent_team?.id??e.repo.team_id}}static getSharedBy(e){switch(e.type){case"FILE":return e.file.shared_by_user?.id??e.file.shared_by;case"PROTOTYPE":return e.prototype.shared_by_user?.id??e.prototype.shared_by;case"REPO":return e.repo.shared_by_user?.id??e.repo.shared_by;case"PINNED_FILE":case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getSharedByName(e){switch(e.type){case"FILE":return e.file.shared_by_user?.name;case"PROTOTYPE":return e.prototype.shared_by_user?.name;case"REPO":return e.repo.shared_by_user?.name;case"PINNED_FILE":return(0,a.KF)(!0,"Cannot get shared by name from a pinned file"),null;case"OFFLINE_FILE":return(0,a.KF)(!0,"Cannot get shared by name from an offline file"),null;default:(0,a.xb)(e)}}static getOwner(e){switch(e.type){case"FILE":return e.file.owner;case"PINNED_FILE":case"PROTOTYPE":case"REPO":case"OFFLINE_FILE":(0,a.KF)(!0,"Did not expect to render owner for non-file tiles");return;default:(0,a.xb)(e)}}static useIsRenaming(e){let r=(0,o.md)(E);return y.isRenaming(e,r)}static isRenaming(e,r){if(!r)return!1;switch(e.type){case"FILE":return"FILE"===r.type&&r.id===e.file.key;case"OFFLINE_FILE":return"FILE"===r.type&&r.id===e.file.fileKey;case"REPO":return"REPO"===r.type&&r.id===e.repo.id;case"PINNED_FILE":case"PROTOTYPE":return!1;default:(0,a.xb)(e)}}static getIsPasswordProtected(e){switch(e.type){case"FILE":return(0,p.i4)(e.file);case"REPO":return(0,c.yR)(e.repo);case"PROTOTYPE":return(0,p.Uj)(e.prototype.fig_file)||(0,p.i4)(e.prototype.fig_file);case"PINNED_FILE":return(0,p.i4)({has_file_link_password:e.file.hasFileLinkPassword,link_access:e.file.linkAccess});case"OFFLINE_FILE":return!1;default:(0,a.xb)(e)}}static getFolderId(e){switch(e.type){case"FILE":return e.file.folder_id;case"REPO":return e.repo.folder_id;case"PROTOTYPE":return e.prototype.fig_file.folder_id;case"PINNED_FILE":return e.file.folderId;case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getTeamId(e){switch(e.type){case"FILE":return e.file.team_id;case"PINNED_FILE":return e.file.teamId;case"PROTOTYPE":return e.prototype.parent_team?.id??null;case"REPO":return e.repo.team_id;case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getThumbnailUrl(e){switch(e.type){case"FILE":return e.file.thumbnail_url_override??e.file.thumbnail_url;case"REPO":let r=f(e);return r?r.thumbnail_url_override??r.thumbnail_url:null;case"PROTOTYPE":return e.prototype.thumbnail_url;case"PINNED_FILE":return e.file.thumbnailUrlOverride??e.file.thumbnailUrl;case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getIsThumbnailFullWidth(e){switch(e.type){case"FILE":return!!e.file.thumbnail_guid;case"REPO":let r=f(e);return r?r.thumbnail_guid:null;case"PROTOTYPE":return!0;case"PINNED_FILE":return!!e.file.thumbnailGuid;case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getEditorType(e){switch(e.type){case"FILE":return e.file.editor_type;case"REPO":return d._Y.DESIGN;case"PROTOTYPE":return null;case"PINNED_FILE":case"OFFLINE_FILE":return e.file.editorType;default:(0,a.xb)(e)}}static getClientMeta(e){switch(e.type){case"FILE":return e.file.client_meta;case"REPO":let r=f(e);return r?r.client_meta:null;case"PROTOTYPE":case"OFFLINE_FILE":return null;case"PINNED_FILE":return e.file.clientMeta;default:(0,a.xb)(e)}}static getPreviewThumbnailUrls(e){return"FILE"===e.type?e.file.preview_thumbnail_urls:"REPO"===e.type?f(e)?.preview_thumbnail_urls:void 0}static getFileKeyForAutosaveChanges(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.file_key;case"REPO":return f(e)?.key;case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}}let b=(0,o.Iz)(e=>(0,i.eU)(r=>"FILE"===e.type||"PINNED_FILE"===e.type?r(u.sMs.Query({key:e.file.key})).transform(e=>!!e.file?.hasPermission):"REPO"===e.type?r(u.cfd.Query({repoId:e.repo.id})).transform(e=>!!s.oA(e.repo)?.canView):"PROTOTYPE"===e.type?r(u.eSI.Query({prototypeId:e.prototype.id})).transform(e=>!!s.oA(e.prototype)?.canRead):"OFFLINE_FILE"===e.type?l.Qw.loaded(!0):void(0,a.xb)(e)),y.sameObject),I={FILE:m.F.FILES,PROTOTYPE:m.F.PROTOTYPES,REPO:m.F.REPOS,PINNED_FILE:m.F.PINNED_FILES,OFFLINE_FILE:m.F.OFFLINE_FILES}},297174:(e,r,n)=>{n.d(r,{H:()=>_});var a=n(411855),i=n(75395),o=n(629019),s=n.n(o),l=n(163023),c=n(154254),d=n(693707),u=n(611978),m=n(776615),p=n(155108),h=n(366370);function _({children:e,large:r,brandTextColor:n,...o}){let _=(0,u._6)(),g=a.useRef(null);(0,d.Z)("light",g);let f=(0,m.ju)(_);return a.createElement("div",{ref:g,"data-editor-theme":f},a.createElement(i.E,{className:s()(p.x6,p.zB,r?p.as:p.Hg,n&&c.cx.colorTextBrand.$),...o},a.createElement("span",{className:p._d},a.createElement(l.B,{className:p.Kk,svg:h.A,useOriginalSrcFills_DEPRECATED:!0}),a.createElement("span",{className:p.IO},e))))}},813648:(e,r,n)=>{n.d(r,{LR:()=>E,_i:()=>b,kg:()=>y,ts:()=>f});var a=n(411855),i=n(188507),o=n(299321),s=n(91408),l=n(297666),c=n(572206),d=n(727749),u=n(902139),m=n(697551),p=n(501972),h=n(231472),_=n(816460),g=n(837746);function f(e,r=552,n=320){let[i,o]=a.useState(),[d,u]=a.useState(),[m,h]=a.useState(!1);return a.useLayoutEffect(()=>{let a=()=>{let a,i;switch(e.kind){case"mountCenter":a=window.innerWidth/2,i=window.innerHeight/2;break;case"buttonTarget":let l=(0,p.Tc)(e.buttonTarget);if(!l)return;let d=l.getBoundingClientRect();a=d.x+d.width/2,i=d.y;break;case"sourceRect":a=e.sourceRect.x+e.sourceRect.width/2,i=e.sourceRect.y}let u=a-n/2,f=i-r-12;window.innerWidth-u<n?(m||h(!0),u=window.innerWidth-n-_.wR):m&&h(!1),f=Math.max((0,s.hG)(g.tui)+_.wR,f),o(new c.Mi(u,f))};setTimeout(a,0);let i=(0,l.s)(a,100);return window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)}},[e,r,n,m]),{initialModalPosition:i,modalPosition:d,setModalPosition:u,modalWasClippedByRightSide:m}}function E(){let e=(0,i.wA)();return a.useCallback(()=>{o.glU&&o.glU.triggerAction("set-tool-default",null),e(u.KE())},[e])}function y(e){return e.mirror.appModel.currentTool===o.NLJ.NONE&&e.universalInsertModal.showing&&e.universalInsertModal.pinned===h.t.NOT_PINNED}function b(e,r,n,o){let s=(0,i.wA)(),l=(0,i.d4)(e=>(0,m.T9)({authedProfilesById:e.authedProfilesById,userId:e.user?.id}));return{unsave:a.useCallback(n=>{e&&s((0,d.s1)({id:e,resourceType:r,communityProfile:l||void 0,hideSuccessVisualBell:n,source:d.uR.INSERTS_MODAL,optimisticData:{pluginInstallId:o}}))},[e,s,r,l,o]),save:a.useCallback((a,i)=>{e&&s((0,d.d6)({id:e,resourceType:r,communityProfile:l||void 0,onSuccess:a,hideSuccessVisualBell:i,source:d.uR.INSERTS_MODAL,optimisticData:{resource:n}}))},[e,s,r,l,n])}}},318812:(e,r,n)=>{n.d(r,{BK:()=>l,Um:()=>s});var a=n(411855),i=n(188507),o=n(738269);function s(){return(0,i.d4)(e=>e.dropdownShown)}function l(e){let r=(0,i.wA)(),n=s();return(0,a.useMemo)(()=>{let{type:a,...i}=n||{},s=a===e;function l(){r(o.oB())}function c(n={}){r(o.j7({...n,type:e}))}return{...i,showing:s,hide:l,show:c,toggle:function(e={}){s?l():c(e)}}},[r,n,e])}(0,n(529928).bt)(e=>e.dropdownShown)},887811:(e,r,n)=>{n.d(r,{vD:()=>a}),n(939863),n(384162),n(555328);let a=(0,n(479296).n)(e=>(function(e){if(!e)return"OTH";let r={"software-development":"ENG","user-research":"UR",design:"DES",marketing:"MKT","product-management":"PM",other:"OTH"};if(e in r)return r[e];let n={"project-manager":"PM",designer:"DES",developer:"ENG",marketer:"MKT","product-manager":"PM",consultant:"OTH",sales:"MKT","ux-researcher":"UR",student:"OTH",educator:"OTH"};return e in n?n[e]:e.endsWith("-developer")?"ENG":e.endsWith("-designer")?"DES":e.includes("Eng")||e.includes("Dev")?"ENG":e.includes("Des")?"DES":e.includes("Lead")||e.includes("Man")?"PM":"OTH"})(e?.profile?.job_title??"OTH"))},112235:(e,r,n)=>{n.d(r,{$:()=>u});var a=n(411855),i=n(966712),o=n(62342),s=n(965480),l=n(514726),c=n(99506),d=n(239671);function u(){let e=function(){let e=(0,s.tS)();return(0,a.useCallback)(r=>r.lastPublishedAt&&r.editorType===c._Y.DESIGN?o.y1.PUBLISHED:r.fileRepoId?o.y1.REPO:r.editorType===c._Y.WHITEBOARD?e&&r.isTeamTemplate?o.y1.TEMPLATE:o.y1.WHITEBOARD:"slides"===r.editorType?e&&r.isTeamTemplate?o.y1.SLIDES_TEMPLATE:o.y1.SLIDES:r.editorType===d.oQ?o.y1.SITES:r.editorType===d.sq?o.y1.COOPER:o.y1.DESIGN,[e])}();return(0,a.useCallback)(r=>(0,i.kc)().figfileconverter_enable_file_icon?e(l.F.toLiveGraph({is_team_template:!1,...r})):e({editorType:r.editor_type,isTeamTemplate:r.is_team_template??!1,fileRepoId:r.file_repo_id,lastPublishedAt:r.last_published_at??""}),[e])}},29680:(e,r,n)=>{n.d(r,{B9:()=>I,KH:()=>h,T3:()=>p,aV:()=>E,ax:()=>_,dH:()=>f,eY:()=>m,f4:()=>g,p8:()=>y,q0:()=>b});var a=n(411855),i=n(188507);n(171812);var o=n(7674),s=n(299321),l=n(904669),c=n(408405);let d=e=>e?.mirror?.sceneGraph,u=()=>(0,i.Pj)();function m(){return(0,i.d4)(d)}function p(){return a.useMemo(()=>new l.qo(s.juq.PLAYGROUND),[])}let h=()=>(0,i.d4)(e=>e.mirror.sceneGraphSelection);function _(){return!(0,i.d4)(e=>(0,o.Im)(e.mirror.sceneGraphSelection))}function g(e){let r=u(),n=h(),i=(0,a.useRef)();i.current=()=>{e(r.getState())},(0,a.useEffect)(()=>{i.current()},[n])}function f(){return(0,i.d4)(e=>e?.mirror?.appModel?.currentTool)}function E(){return(0,i.d4)(e=>(0,c.T)(e?.progressBarState?.mode))}function y(e){return(0,i.d4)(r=>r.mirror.appModel[e])}let b=(0,a.createContext)(null);function I(){let e=(0,i.d4)(e=>e.mirror.sceneGraph);return(0,a.useContext)(b)||e}},678340:(e,r,n)=>{n.d(r,{KV:()=>I,P3:()=>f,Tm:()=>g,Wy:()=>m,Zz:()=>T,eE:()=>b,rq:()=>h,xk:()=>u});var a=n(299321),i=n(38580),o=n(374626),s=n(288706),l=n(860707),c=n(529928),d=n(447402);let u=60;var m=(e=>(e[e.SAFE=0]="SAFE",e[e.WARNING=1]="WARNING",e[e.ERROR=2]="ERROR",e[e.OOM=3]="OOM",e))(m||{});let p=(0,i.eU)(null);function h(e){}(0,i.eU)(e=>!!e(p));let _=(0,o.yu)((0,s.um)({mallocLevelBytes:0,heapMemoryLimit:1/0},()=>({mallocLevelBytes:(0,l.Yc)(),heapMemoryLimit:a.hMR.getHeapMemoryLimit()})),({setSelf:e})=>{e();let r=setInterval(e,5e3);return()=>clearInterval(r)}),g=(0,i.eU)(e=>{let{mallocLevelBytes:r,heapMemoryLimit:n}=e(_),a=e(p),i=r/n*100;return a&&(i=a),i=Math.round(100*(i=Math.max(0,i=Math.min(100,i)))+Number.EPSILON)/100},(e,r)=>{r(_)});function f(){return o.zl.set(g),o.zl.get(g)}let E=(0,c.bt)(e=>e.modalShown?.type===d.Lu),y=(0,i.eU)(e=>{let r=e(g);return e(E)?3:r>=75?2:r>=u?1:0},(e,r)=>{r(g)}),b=(0,o.Hj)(y,e=>a.glU.setMemoryWarningLevel(e));function I(e,r){return(0,l.Yc)()/r*e/a.hMR.getHeapMemoryLimit()}function T(){let e=a.Hcu.getSubtreeMemoryUsage(["0:2"]);return(0,l.Yc)()/a.Hcu.getSubtreeMemoryUsage(["0:0"])*e*100/a.hMR.getHeapMemoryLimit()}},479118:(e,r,n)=>{n.d(r,{Fy:()=>b,QR:()=>f,VI:()=>y,_Z:()=>g,lH:()=>E});var a=n(411855),i=n(188507),o=n(299321),s=n(904669),l=n(38580),c=n(374626),d=n(428654),u=n(168039),m=n(848661),p=n(100197),h=n(776615),_=n(554294);function g(){return function({selectedView:e,isLoadingVersionHistory:r,theme:n}){let i=e?.view==="prototype",l=i?null:(0,s.UN)().getCurrentPage(),u=a.useMemo(()=>l?.backgroundColor,[l]),g=!!(0,p.ut)(o.Ez5?.currentPageState().requestedPageChange,""),E=(0,c.md)(_.s6),y=(0,c.md)(_.rp),b=(0,c.md)(f),I=(0,c.md)(_.nc);return a.useMemo(()=>{let e;if(i)return{isLoading:!1};let a=(0,m.E7)(u);return(e=null!==a?d.F.format(a):n&&"dark"===(0,h.i_)(n)?"rgba(30, 30, 30, 1)":"rgba(229, 229, 229, 1)",null!=a?(a.a=.7,e=d.F.format(a)):e="rgba(229, 229, 229, 0.1)",E)?{background:e,isLoading:!1}:{background:e,isLoading:!!r||g||I||y||b,isLoadingMissingFonts:b}},[i,u,n,E,r,g,I,y,b])}({selectedView:(0,i.d4)(e=>e.selectedView),isLoadingVersionHistory:i.d4(e=>e.versionHistory)?.isLoadingPage,theme:(0,u.DP)()})}let f=(0,l.eU)(!1);function E(e){return e.some(e=>e.status!==o.xal.LOADED)}function y(e){return e.every(e=>e.status===o.xal.LOADED)}function b(e,r){for(let n of e)if(n.nodeId===r)return n.status;return null}},669178:(e,r,n)=>{n.d(r,{Dq:()=>f,g5:()=>g});var a=n(411855),i=n(188507);n(358145);var o=n(966712),s=n(915440),l=n(395281),c=n(632430),d=n(298527);n(416095);var u=n(279453),m=n(173454),p=n(372291);n(335682);var h=n(694687),_=n(860178);function g(e){let r=(0,i.d4)(e=>e.library),n=(0,p.Lm)(),s=(0,_.TA)(),l=(0,i.d4)(e=>e.recentlyUsed.libraryItems);return(0,a.useMemo)(()=>{let a=[],i=[];for(let c of l[e])if(null!==s?c.last_added_at_by_user_id?.[s]:void 0){if(c.type===m.PW.COMPONENT||c.type===m.PW.STATE_GROUP){let e=c.type===m.PW.COMPONENT?r.published.components[c.team_id]?.[c.file_key]?.[c.node_id]||r.defaultPublished.components[c.team_id]?.[c.file_key]?.[c.node_id]:c.type===m.PW.STATE_GROUP?r.published.stateGroups[c.team_id]?.[c.file_key]?.[c.node_id]||r.defaultPublished.stateGroups[c.team_id]?.[c.file_key]?.[c.node_id]:void 0;e&&a.push(e)}else if(c.type===m.PW.MODULE&&(0,o.kc)().dse_editor_templates_v1&&n.data){let e=function(e,r){return r[e.file_key]?.find(r=>r.node_id===e.node_id)}(c,n.data);e&&i.push(e)}}return{productComponents:a,templates:i}},[l,e,r,n,s])}function f(e){let r=(0,i.wA)(),n=(0,h.dq)(),o=!!e&&!!n,m=(0,d.n1)(),p=(0,s.Rs)(u.X9s,{teamId:e},{enabled:o});(0,a.useEffect)(()=>{if("loaded"===p.status&&o){let e=(p.data?.team?.workspace?.librarySubscriptions||[]).map(c.YD),n=(0,c.g1)(e,{ignoreCommunitySubs:!m});r(l.ve({subscriptions:n}))}},[r,m,p,o])}},499743:(e,r,n)=>{n.d(r,{p:()=>i});var a=n(188507);function i(){return(0,a.d4)(e=>e.sharingAttributionContextKey||null)}},737499:(e,r,n)=>{n.d(r,{BI:()=>c,F4:()=>d,Jj:()=>o,Jp:()=>l,Kx:()=>u,Rf:()=>i,Yi:()=>_,e8:()=>p,h4:()=>m,m0:()=>h,sc:()=>s});var a=n(563706);function i(){return window.FigmaMobile}function o(){return window.FigmaMobile}function s(){return o()}function l(){return window.FigmaMobile}function c(){return window.FigmaMobile}function d(){return window.FigmaMobile}function u(){return d()}function m(){return window.FigmaMobile}function p(){return window.FigmaMobile}function h(){return window.FigmaMobile}function _(e){let r=window.FigmaMobile;return"prototype"===e.view?a.Ay.isMobileBrowser&&!e.commentsEnabled:"fullscreen"===e.view&&!!r?.shouldOptimizeForIpadApp&&!e.commentsEnabled}},605328:(e,r,n)=>{n.d(r,{$P:()=>I,d0:()=>b,kn:()=>T});var a=n(411855),i=n(188507),o=n(171812),s=n(358145),l=n(860601),c=n(258786),d=n(975350),u=n(103907),m=n(356390),p=n(862442),h=n(457630),_=n(440535),g=n(911259),f=n(517911),E=n(514736),y=n(737499);function b(e,r,n,o,s){let c=(0,y.h4)(),g=(0,i.wA)(),f=(0,u.I_)(),b=(0,E.s)(),I=(0,p.Z)();a.useEffect(()=>{c&&(c._select_comment=e=>{let a=r.find(r=>r.id===e);a&&g(d.At({receiptsAPI:f.commentReceipts,thread:a,viewport:n,skipDeactivatingExistingActiveComment:!0,config:b,navigate:I}))})},[c,g,r,f,n,b,I]),a.useEffect(()=>{c&&(c._add_draft_comment=e=>{let r=(0,h.$$)(n.getViewportInfo(),e);g(d.vV({anchorPosition:r})),g(d.CX())})},[c,g,n]),a.useEffect(()=>{c&&(c._deselect_comment=e=>{g(d.UU())},c._remove_draft_comment=()=>{e===_.hm&&g(d.UU())})},[c,e,g]),a.useEffect(()=>{c&&(c._submit_comment_draft=e=>{g(d.Z5({messageMeta:e})),s()})},[c,e,g,s]),a.useEffect(()=>{c&&o&&(c._set_comments_visibility=e=>{m.Y5.triggerAction("toggle-show-comments",{source:"mobile_app"})})},[c,o]),a.useEffect(()=>{c&&(c._pan_canvas=e=>{let r=n.getViewportInfo();n.navigateTo({x:r.offsetX+e.x/r.zoomScale,y:r.offsetY+e.y/r.zoomScale},r.zoomScale)})},[c,n]),a.useEffect(()=>{c&&!c._recenter_comment&&(c._recenter_comment=l.lQ),c&&!c._recenter_draft_comment&&(c._recenter_draft_comment=l.lQ)},[c])}function I(e,r,n,l,c){let d=(0,y.sc)();a.useEffect(()=>{d?.updateCommentVisibility&&!l&&d.updateCommentVisibility(null!==c)},[d,l,c]);let u=(0,i.d4)(e=>e.comments.newComment),m=a.useMemo(()=>{if(e===_.hm){if(!u.anchorPosition)return null;{let e=(0,h.Z0)(n.getViewportInfo(),u.anchorPosition);return{x:e.x,y:e.y,width:36.8,height:36.8}}}let a=r.find(r=>r.id===e);if(!a||!a.canvasPosition)return null;let i=(0,h.Z0)(n.getViewportInfo(),a.canvasPosition),o=(0,f.c4)(a.comments).length,s=g.XC.getPinSize(o);return{x:i.x,y:i.y,width:1.15*s.width,height:1.15*s.height}},[e,u,r,n]),p=(0,s.ZC)(e),E=(0,s.ZC)(m);a.useEffect(()=>{e&&m&&e===p&&E&&!(0,o.c2)(m,E)&&(e===_.hm?d?.updateDraftCommentPinPosition?.(m):d?.updateCommentPinPosition?.(e,m))},[d,e,m,E,p])}function T(e,r){let n=(0,y.sc)(),i=a.useContext(c.W);a.useEffect(()=>{n?.updateCommentVisibility&&n.updateCommentVisibility(e)},[n,e]),a.useEffect(()=>{!e&&i&&r?.current&&(i.uninstallTapGestureRecognizer(r.current),i.uninstallMultiTouchLongPressGestureRecognizer(r.current,1))},[e,i,r])}},85098:(e,r,n)=>{n.d(r,{A8:()=>g,AD:()=>b,D4:()=>y,Py:()=>w,Q2:()=>_,Wq:()=>E,_i:()=>T,pl:()=>f,uC:()=>v,wF:()=>S});var a=n(411855),i=n(188507),o=n(432258),s=n(358145),l=n(966712),c=n(915440),d=n(711525),u=n(506599),m=n(226055),p=n(279453),h=n(335682);let _=4,g=8,f=22;function E(e){let r=(0,m.GS)(),n=y(),a=function(e){let{isPropertiesPanelCollapsed:r}=(0,u.iT)(),n=(0,l.kc)().async_spotlight?2:3;return!e||r?n:Math.max(n,Math.min(Math.floor(e/f),g))}(e);return r?a:n}function y(){let[e,r]=a.useState(_);return a.useEffect(()=>{let e=()=>{window.innerWidth<786?r(2):r(_)};return window.addEventListener("resize",e,!1),()=>{window.removeEventListener("resize",e,!1)}},[]),e}function b(e){return"sessionID"in e}let I=e=>{let{user:r,sessionID:n,presenterSessionID:a,lastObservedSessionID:i,fileCreatorID:o,mostActiveSpeakerID:s,observingSessionID:c}=e;return b(r)&&r.sessionID===n?0:b(r)&&a&&r.sessionID===a?1:b(r)&&c&&r.sessionID===c?2:(0,l.kc)().live_feedback_large_meetings&&b(r)&&i&&r.sessionID===i?3:b(r)&&r.userID===o?4:r.userID===s?5:r.name.toLocaleLowerCase().startsWith("anonymous")?Number.MAX_SAFE_INTEGER:6};function T(e,r){let n=e;return r&&(n=n.filter(e=>b(e)&&e.deviceName===r)),n=n.filter(e=>!b(e)||"editor"!==e.deviceName||void 0===e.sawMouse||!0===e.sawMouse)}function v(e,r,n,l,c){let d=(0,i.d4)(e=>e.multiplayer.sessionID),u=(0,i.d4)(e=>e.multiplayer.observingSessionID),m=(0,i.d4)(e=>e.multiplayer.presenterSessionID),p=(0,i.d4)(e=>e.multiplayer.deviceNameFilter),_=(0,h.q5)(),[g,f]=a.useState(null),E=(0,s.ZC)(u);E!==u&&(0,o.Vq)(E)&&-1!==E&&E!==g&&f(E);let y=a.useMemo(()=>({sessionID:d,observingSessionID:u,presenterSessionID:m,lastObservedSessionID:g,mostActiveSpeakerID:c,fileCreatorID:_?.creatorId,deviceNameFilter:p}),[d,u,m,g,c,_?.creatorId,p]),{users:v,overflowUsers:S}=a.useMemo(()=>(function(e,r,n,a,i){let{deviceNameFilter:o}=i,s=[],l=[...e];return l&&0!==l.length?(l.sort((e,r)=>{let n=I({...i,user:e})-I({...i,user:r});if(0!==n)return n;let a=e.name.toLocaleLowerCase(),o=r.name.toLocaleLowerCase();return b(e)&&b(r)&&a===o?e.sessionID-r.sessionID:a>o?1:-1}),(l=T(l,o)).length>=a&&(s=l.slice(a-1),l=l.slice(0,a-1)),{users:l,overflowUsers:s}):r&&!n?{users:[r],overflowUsers:[]}:{users:[],overflowUsers:[]}})(e,r,n,l,y),[e,r,n,l,y]);return{users:v,overflowUsers:S}}function S(){let e=(0,h.q5)(),r=e?.key,n=(0,c.Rs)(p.JvY,{fileKey:r??""},{enabled:!!r&&(0,l.kc)().file_view_history});return a.useMemo(()=>{if("loaded"!==n.status)return;let e=(0,d.oA)(n.data?.file?.fileViewHistory),r=e?.map(e=>({userID:e.user.id,name:e.user.name,imageUrl:e.user.imgUrl,viewedAt:e.viewedAt}))||[];return r.sort((e,r)=>r.viewedAt.getTime()-e.viewedAt.getTime()),r.slice(0,50)},[n])}function w(e){return"viewedAt"in e}},335682:(e,r,n)=>{n.d(r,{As:()=>w,Cq:()=>k,Dz:()=>b,Hu:()=>S,MY:()=>I,XJ:()=>C,_G:()=>O,_S:()=>L,bv:()=>M,q5:()=>P,sS:()=>A,tB:()=>T,tS:()=>D,vu:()=>R,yV:()=>v,ze:()=>N});var a=n(188507),i=n(259120),o=(n(776250),n(358145),n(794272)),s=n(966712),l=n(38580),c=n(288706),d=n(374626),u=n(130097),m=n(915440),p=(n(752553),n(391388)),h=n(860601),_=n(529928);n(99506);var g=n(279453),f=n(693223),E=n(945020),y=n(479296);async function b(e){let r=e.getState().selectedView,n="fullscreen"===r.view&&r.fileKey;return n&&(await (0,u.Ek)(g.ehp,{fileKey:n})).file||null}function I(){let e=(0,a.d4)(e=>e.selectedView),r="fullscreen"===e.view?e.fileKey:void 0,n=(0,m.Rs)(g.ehp,{fileKey:r||""},{enabled:!!r});return p.Qw.useTransform(n,({file:e})=>e)}function T(e){return e.openFile}let v=(0,_.bt)(T),S=(0,l.eU)(e=>{let r=e(v),n=e(f.m);return r?.teamId?n[r.teamId]??null:null}),w=(0,c.mg)(v,e=>e?.teamId??void 0);function A(e){return e.openFile?.key||null}(0,c.mg)(v,e=>e?.team?.workspaceId??void 0);let N=(0,_.bt)(A);function C(e){let r=T(e);return r?(0,i.l)(r.libraryKey):null}let L=(0,_.bt)(C),O=(0,y.D)(()=>(0,d.md)(L));function R(e){return e.openFile?.key&&e.fileByKey[e.openFile.key]||null}function P(){return(0,a.d4)(T)}let D=(0,y.D)(()=>P()?.key||null);function k(e){return M((0,o.R)(e=>({openFile:e.openFile,fileByKey:e.fileByKey})),e)}function M(e,r){let n=R(e);return r?.useSinatraType?n:n?(0,E.UE)(n):null}(0,s.kc)().preload_open_editor_file_data||h.lQ},694687:(e,r,n)=>{n.d(r,{dq:()=>s,h0:()=>l,sZ:()=>o,td:()=>i});var a=n(188507);function i(e,r){if(!e)return;let n=r[e];if(n)return n}function o(){return(0,a.d4)(({currentUserOrgId:e,orgById:r})=>i(e,r))}function s(){return(0,a.d4)(e=>e.currentUserOrgId)}let l=(0,n(529928).bt)(({currentUserOrgId:e})=>e)},594901:(e,r,n)=>{n.d(r,{AF:()=>l,FC:()=>s,h:()=>c,sj:()=>d});var a=n(188507);n(915440),n(711525),n(391388),n(279453);var i=n(147206),o=n(428467);function s(){return(0,a.d4)(o.getPermissionsState,a.bN)}function l(){return(0,a.d4)(e=>(0,i.Pq)({copyExportRestrictedArgs:e.openFile}))}function c(){return(0,a.d4)(e=>!!e.openFile&&(0,i.Pe)(e.openFile))}function d(e){let r=s();return(0,o.isFileFigjamDisabled)(e,r)}},754209:(e,r,n)=>{n.d(r,{$0:()=>k,By:()=>B,D_:()=>N,HG:()=>U,Lt:()=>L,Pi:()=>x,VA:()=>F,Ww:()=>D,c3:()=>C,dR:()=>M,oW:()=>P,y:()=>V});var a=n(411855),i=n(188507),o=n(67151),s=n(432258),l=n(299321),c=n(358145),d=n(374626),u=n(563706),m=n(489604),p=n(30637),h=n(153808),_=n(939863),g=n(392592),f=n(30686),E=n(964881),y=n(980820),b=n(293017),I=n(779709),T=n(843495),v=n(460289),S=n(611978),w=n(396462);let A=(0,p.nl)()?0:6e3;var N=(e=>(e.INITIAL="initial",e.NEXT="next",e))(N||{});let C=(0,y.nF)((e,r)=>{let n=e.getState().multiplayer.allUsers.find(e=>e.sessionID===r.presenterSessionID),a=n?.name??"",i=n?(0,_.t)("collaboration.spotlight.visual_bell.user_left_the_spotlight",{userName:a}):(0,_.t)("collaboration.spotlight.visual_bell.the_presenter_left_the_spotlight");e.dispatch(g.F.enqueue({message:i,type:"presentation_stopped_alert"}))}),L=(0,y.nF)((e,r)=>{e.dispatch(g.F.dequeue({matchType:"presentation_stopped_alert"}))}),O=(e,r,n,a)=>{let i=(0,s.Vq)(r)&&e!==r,o=n===r,l=a===r;return i&&!o&&!l};function R(){let e=(0,S.z3)(),r=(0,i.wA)(),n=(0,i.d4)(e=>e.multiplayer),o=a.useCallback(e=>{r(b.J4({...n,observingSessionID:e}))},[n,r]),s=a.useCallback(e=>{l.h3O.observeUser(e)},[]);return"prototype"===e?o:s}function P(e){let{multiplayer:{observingSessionID:r,presenterSessionID:n,sessionID:l}}=e,u=(0,i.wA)(),p=(0,S.z3)(),h=(0,d.md)(m.Dv),[_,g]=a.useState("initial"),f=(0,c.ZC)(n),E=r===n,y=l===n||h,b=O(f,n,r,l),[I,v]=a.useState(null);a.useEffect(()=>{let e=null;return null!=I&&(e=setTimeout(()=>v(null),1e3)),()=>{e&&clearTimeout(e)}},[I]);let N=R(),P=a.useCallback(()=>{(0,s.Vq)(n)&&("prototype"!==p&&(0,T.wr)(),N(n))},[n,N,p]),D=a.useCallback(()=>{P(),n&&v(n)},[n,P]);I===r&&v(null);let{isActive:k,start:M,cancel:F,complete:x}=(0,w.Z)(D),U=a.useCallback(()=>{F(),v(null)},[F]),B=b&&r===f,V=b&&!B,G=(0,s.uy)(n)&&(0,s.Vq)(f)&&r===f;k&&y&&U(),a.useEffect(()=>{B&&(u(L()),M(2e3),g("next"))},[u,B,M]),a.useEffect(()=>{V&&(u(L()),M(A),g("initial"))},[u,V,M]),a.useEffect(()=>{G&&(N(-1),U(),u(C({presenterSessionID:f})))},[U,u,f,G,e.multiplayer,N]),a.useEffect(()=>{k&&E&&U()},[E,U,k]);let H=(()=>{switch(_){case"next":return 2e3;case"initial":return A;default:(0,o.xb)(_)}})();return{isAutoFollowPending:!y&&(V||B||k||null!=I),cancelAutoFollowCallback:U,completeAutoFollowCallback:x,observeCurrentPresenter:P,autoFollowType:_,autoFollowDelayMs:H}}function D(){let e=(0,i.d4)(e=>e.multiplayer);return e.allUsers.find(r=>r.sessionID===e.sessionID)??null}function k(){let e=(0,i.d4)(e=>e.multiplayer);return e.allUsers.find(r=>r.sessionID===e.observingSessionID)??null}function M(){let e=(0,i.d4)(e=>e.multiplayer);return e.allUsers.find(r=>r.sessionID===e.presenterSessionID)??null}function F({multiplayer:e}){let r=function(){let e=U(),r=(0,v.XM)(),n=(0,E.hA)(),a=(0,E.l7)(),i=(0,f.e)();return!!e&&!r&&!n&&!a&&!i}(),n=e.presenterSessionID===e.sessionID,i=(0,S.z3)(),o=a.useCallback(()=>{"prototype"===i?h.hk()?.stopPresenting():l.h3O.stopPresenting()},[i]);a.useEffect(()=>{!r&&n&&o()},[r,n,o])}function x({multiplayer:e}){let r=R(),n=!B(),i=-1!==e.observingSessionID;a.useEffect(()=>{!n&&i&&r(-1)},[n,i,r])}function U(){return!((0,u.o4)()&&(0,u.Q1)()&&!(0,u.wg)()||I.z4?.getIsExtension())}function B(){let e=(0,v.XM)(),r=(0,v.e2)(),n=(0,E.hA)(),a=(0,E.l7)();return!!e||!!r||!!n||!!a}function V(){let e=(0,i.d4)(e=>e.multiplayer),r=e.sessionsNominatingCurrentUser[0];return r?e.allUsers.find(e=>e.sessionID===r)??null:null}},7e3:(e,r,n)=>{n.d(r,{TN:()=>l});var a=n(188507),i=n(428467),o=n(746869),s=n(106472);function l(e){let r=!!(0,s.q)({teamId:e,flag:o.uU}),n=(0,a.d4)(r=>r.teams[e]),l=(0,a.d4)(e=>(0,i.getPermissionsStateMemoized)(e));return o.ng.getProTrial(n,r,l)}},161325:(e,r,n)=>{n.d(r,{Fl:()=>b,ug:()=>T,wW:()=>E});var a=n(411855),i=n(188507),o=n(794272);n(567837);var s=n(30637),l=n(182976),c=n(337111),d=n(860178),u=n(336599),m=n(516056),p=n(547807);new class{constructor(){this.BatchedSchemaValidator=(0,p.vh)()}getBatched(e){return this.BatchedSchemaValidator.validate(async({xr:r})=>await r.get("/api/users/batched",p.td.toAPIParameters({userIds:e.userIds.join(",")})))}};let h=e=>r=>e&&r.publicUsers.byId[e]||null,_=e=>r=>{let n=r.multiplayer.allUsers.find(r=>r.userID===e);return n?I(n):null},g=e=>r=>{let n=r.user,a=_(e)(r);return n&&n.id===e?n:a||null},f=e=>r=>{let n=g(e)(r),a=h(e)(r);return n||a||null};function E(e){let r=(0,o.R)(g(e)),n=function(e){let r=(0,i.wA)(),n=`PUBLIC_USER_FETCH_${e}`,o=(0,i.d4)(e=>e.loadingState),s=(0,i.d4)(h(e)),m=function(e){let r=!!(0,d.iZ)();return!!e&&!b(e)&&r}(e),p=!!s,_=!p&&(0,u.VP)(o,n),g=!p&&(0,u.aF)(o,n),f=!p&&m&&!_&&!g;return(0,a.useEffect)(()=>{f&&(r(l.Cx({key:n})),y(e).then(e=>{r(c.yJ({user:e})),r(l.yH({key:n}))}).catch(()=>{r(l.of({key:n}))}))},[r,e,f,n]),{user:s,loading:_,hasError:g}}(r?null:e);return r?{user:r,loading:!1,hasError:!1}:n}let y=e=>m.k.getUser({userId:e}).then(e=>e.data.meta).catch(e=>{throw(0,s.Lg)()||console.warn("Failed to get public user"),e}),b=e=>e.startsWith("VISITOR-"),I=e=>({id:e.userID,name:e.name,handle:e.name,img_url:e.imageURL});async function T({state:e,dispatch:r,userId:n}){let a=f(n)(e);if(a)return a;if(b(n))return null;let i=e.user,o=b(n);if(!(!a&&!o&&i))return null;let s=await y(n);return r(c.yJ({user:s})),s}},993285:(e,r,n)=>{n.d(r,{N:()=>i});var a=n(411855);function i(e,r=!0){(0,a.useEffect)(()=>{if(!r)return;let n=!0,a=performance.now(),i=r=>{if(!n)return;let o=r-a;a=r,e(o),requestAnimationFrame(i)};return requestAnimationFrame(i),()=>{n=!1}},[r,e])}},263908:(e,r,n)=>{n.d(r,{M:()=>d});var a=n(411855),i=n(109388),o=n(629019),s=n.n(o),l=n(99944),c=n(28752);function d(e){if(!e.dragState?.dragPosition||!e.dragState?.dragOffset)return null;let r=e.dragState.dragPosition.subtract(e.dragState.dragOffset),n=(0,l.AE)(e.dragState.draggingResource);return(0,i.createPortal)(void 0!==e.icon?a.createElement("div",{className:s()(c.Az,{[c.Yg]:e.dragState.isDraggingOverCanvas}),style:{left:r.x,top:r.y,width:e.dragState.draggingThumbSize?.x,height:e.dragState.draggingThumbSize?.y}},e.icon):a.createElement("img",{src:n,alt:e.dragState.draggingResource,className:s()(c._D,{[c.Yg]:e.dragState.isDraggingOverCanvas}),style:{left:r.x,top:r.y,width:e.dragState.draggingThumbSize?.x,height:e.dragState.draggingThumbSize?.y},draggable:!1}),document.getElementById("fullscreen-root"))}},99944:(e,r,n)=>{n.d(r,{AE:()=>h,E:()=>_,Ik:()=>g});var a=n(67151),i=n(966712),o=n(964937),s=n(153234),l=n(939863),c=n(809831),d=n(867795),u=n(161405),m=n(626510),p=n(57150);function h(e){switch(e){case"Table":return(0,i.ck)("ac41ded88c50f0359c02ec3927394b7b33e210b6");case"CodeBlock":return(0,i.ck)("8a035152916712353b045f442c2c6c5879ef3e17");case"MindMap":return(0,i.ck)("1dd4c6f9e1fbf269895ee58e7be79d9f9ee79b9e");default:return""}}function _(e){switch(e){case"Table":return(0,l.t)("whiteboard.inserts.table_title");case"CodeBlock":return(0,l.t)("whiteboard.inserts.code_block_title");case"MindMap":return(0,l.t)("whiteboard.inserts.mind_map_title");case"Text":return(0,l.t)("whiteboard.inserts.text_title");case"Section":return(0,l.t)("whiteboard.inserts.section_title");default:(0,a.xb)(e)}}function g(e){let r="whiteboard"===(0,c.lg)(),n=(0,u.F5)(),a=async a=>(e.insertAction(a),r&&(0,u.oM)({type:d.p.MORE,id:e.resource,source:e.triggeredFrom,options:{...n,query:e.searchQuery}}),await Promise.resolve());return(0,m.t)(e,{insertAction:a,dragPreviewPointerPosition:p.N.CENTERED,getDragPreviewSrc:e.icon?()=>"data:image/svg+xml;utf8,"+(0,o.F)(e.icon):()=>h(e.resource),recordingKey:s.Pt(e.triggeredFrom,"whiteboardResource",e.resource)})}},698993:(e,r,n)=>{n.d(r,{S:()=>a}),n(411855),n(188507),n(299321),n(304061),n(794272),n(256975),n(964881),n(988022),n(507956),n(335682);function a(e){}},102310:(e,r,n)=>{n.d(r,{B:()=>s});var a=n(794272),i=n(507877),o=n(594901);function s(e){let r=(0,o.FC)(),n=(0,a.R)(r=>({selectedView:e?i.gN(e).payload:r.selectedView,currentOrgId:r.currentUserOrgId,orgById:r.orgById,currentTeamId:r.currentTeamId,teams:r.teams}));return{...r,...n}}},499777:(e,r,n)=>{n.d(r,{Xo:()=>l}),n(411855);var a=n(188507),i=n(374626),o=n(38580);n(293017);let s=(0,n(529928).bt)(e=>e.pickerShown);function l(){return(0,a.d4)(e=>e.pickerShown)}(0,i.Iz)(e=>(0,o.eU)(r=>{let n=r(s);return n?.id===e}))},193212:(e,r,n)=>{n.d(r,{U3:()=>s,aq:()=>o});var a=n(411855),i=n(171812);function o(){let e=a.useRef(!1);return a.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),a.useCallback(()=>e.current,[])}function s(e,r,n){let o=function(e,r){let n=a.useRef(null),i=r(e,n.current);return a.useEffect(()=>{i||(n.current=e)}),i?n.current:e}(n,i.c2);a.useEffect(()=>(window.addEventListener(e,r,o),()=>{window.removeEventListener(e,r,o)}),[e,r,o])}},801387:(e,r,n)=>{n.d(r,{Au:()=>d,P:()=>u,eO:()=>c}),n(411855),n(943632);var a=n(915440),i=n(711525),o=n(391388);n(99506);var s=n(279453);n(139961);var l=n(231959);function c(e){let r=e?.baseOrgUser?.workspaceUsers,n=r?.find(e=>e.isMainWorkspace);return n?.workspaceId??null}function d(e){let r=(0,a.Rs)(s.TKM,{orgId:e});return o.Qw.useTransform(r,e=>c(e.currentUser))}function u(e,r){let n=(0,a.Rs)(s.aON,{orgId:e??"",workspaceId:r??""},{enabled:!!e&&!!r});return null===r?(0,i.gB)(l.O):n.transform(e=>e.workspace)}var m=(e=>(e[e.IS_GUEST=1]="IS_GUEST",e[e.WRONG_WORKSPACE=2]="WRONG_WORKSPACE",e[e.TEAM_CREATION_CONTROL=3]="TEAM_CREATION_CONTROL",e[e.LG_LOADING=4]="LG_LOADING",e))(m||{})},820642:(e,r,n)=>{n.d(r,{HF:()=>U,M3:()=>A,RD:()=>S,Rj:()=>D,Ve:()=>w,Vz:()=>V,a6:()=>N,al:()=>k,bH:()=>F,cU:()=>M,cp:()=>O,ow:()=>L,pt:()=>v,re:()=>T,t0:()=>x,vK:()=>P,x0:()=>C,yS:()=>R,zv:()=>B});var a=n(67151),i=n(299321),o=n(133537),s=n(737947),l=n(498750),c=n(96328),d=n(939863),u=n(837324),m=n(466636),p=n(782501),h=n(99506),_=n(23001),g=n(813408),f=n(637590),E=n(501256),y=n(697551),b=n(132135);let I={id:"",hub_file_id:"",fig_file_version_id:"",name:"",version:"",release_notes:"",description:"",creator_policy:"",created_at:"",valid_prototype:!0,thumbnail_guid:null},T={id:"",category_id:null,creator:{id:"",handle:"",img_url:""},publisher:{is_restricted_by_current_user:!1,id:"",name:"",img_url:"",img_urls:{},profile_handle:"",primary_user_id:null,current_user_is_following:!1,current_user_is_followed:!1,location:null,follower_count:0,following_count:0,entity_type:g.o1.USER,badges:[],description:""},community_publishers:{accepted:[],pending:[]},versions:{},current_hub_file_version_id:"",redirect_canvas_url:"",thumbnail_url:"",created_at:"",unpublished_at:null,duplicate_count:0,like_count:0,view_count:0,comment_count:0,viewer_mode:h.y4.CANVAS,scaling_mode:null,realtime_token:"",client_meta:"",tags:[],thumbnail_is_set:!1,comments_setting:null,publishing_status:h.KB.APPROVED_PUBLIC,badges:[]};var v=(e=>(e.KEY="is-community-duplicate",e.VALUE="1",e))(v||{}),S=(e=>(e.CURRENT_FILE="currentFile",e.NEW_FILE="newFile",e))(S||{});function w(e){switch(e){case"currentFile":default:return(0,d.t)("browse_templates_modal.add_template");case"newFile":return(0,d.t)("browse_templates_modal.use_template")}}function A(e,r){return(0,y.Hc)(e,r,T)}function N(e,r){let n=r||e.current_hub_file_version_id;return(0,y.Hc)(n,e.versions,I)}function C(e){if(!e)return h.y4.CANVAS;switch(e){case h._Y.DESIGN:return h.y4.CANVAS;case h._Y.WHITEBOARD:return h.y4.WHITEBOARD;case h._Y.SLIDES:return h.y4.SLIDE_TEMPLATE;case h._Y.SITES:case h._Y.COOPER:return h.y4.CANVAS;default:(0,a.xb)(e)}}function L(e,r,n,a){let o;let s=e.figFilePublishedAsHubFile[r],l=A(s,e.hubFiles),c=N(l),g=y.b,f=e.fileByKey[r];!a&&!n&&(e.authedActiveCommunityProfile?.team_id||e.authedActiveCommunityProfile?.org_id)&&(o=(0,p.Tn)(e.authedActiveCommunityProfile));let b=(0,p.gO)(l,f,e,o),I=n?l.viewer_mode:C(f.editor_type);!n&&l.viewer_mode===h.y4.PROTOTYPE&&a&&i.X3B?.firstPagePrototypeStatus()===i.bOM.VALID&&(I=h.y4.PROTOTYPE);let T=[];s&&l?.tags?T=l.tags:f?.editor_type==="whiteboard"&&(T=["figjam"]);let v={...(0,E.Rs)(),tokens:T.map(e=>({state:_.d.OK,content:e}))},S={...(0,E.Rs)(),tokens:(l.community_publishers?[...l.community_publishers.accepted,...l.community_publishers.pending||[]]:[]).reduce((r,n)=>{let a=e.authedProfilesById[n.id];return(0,p.Ii)(a,b)?r:r.concat([{state:_.d.OK,content:n}])},[])};return{name:c.name||(f.name===(0,d.t)("fullscreen.fullscreen_view_selector.untitled")?"":f.name),description:c.description||g.description,categoryId:l.category_id,creatorPolicy:c.creator_policy||g.creatorPolicy,tags:v,viewerMode:I,scalingMode:l.scaling_mode,author:b,publishers:S,commentsSetting:l.comments_setting||g.commentsSetting,blockPublishingOnToS:(0,p.xw)(e),price:(0,m.vf)(l.monetized_resource_metadata),isPaid:!!l.monetized_resource_metadata,supportContact:l.support_contact||e.user?.email,carouselMedia:(0,u.N6)(l),coverImageCarouselMediaId:l.cover_image_carousel_media_id}}function O(e,r){return e?r?(0,m.Yp)(r)?r<m.mZ?(0,d.t)("community.seller.paid_resource_minimum_err"):(0,d.t)("community.seller.paid_resource_maximum_err"):(0,m.F8)(r)?(0,d.t)("community.seller.prices_must_follow_format"):void 0:(0,d.t)("community.publishing.price_is_required_for_paid_resources"):void 0}function R(e){let r=(0,y.Yp)(e||null).length;return 0===r?(0,d.t)("community.publishing.name_must_not_be_empty"):r<4?(0,d.t)("community.publishing.name_must_be_4_characters_long"):r>100?(0,d.t)("community.publishing.name_must_be_at_most_100_characters_long"):void 0}function P(e){if((0,y.Yp)(e||null).length>1e4)return(0,d.t)("community.publishing.description_must_be_at_most_10000_characters_long")}function D(e){if((0,y.Yp)(e||null).length>1e4)return(0,d.t)("community.publishing.creator_policy_must_be_at_most_10000_characters_long")}function k(e,r){return e&&!r?(0,d.t)("community.publishing.support_contact_must_not_be_empty"):!r||(0,o.xf)(r)||(0,c.gU)(r)?void 0:(0,d.t)("community.publishing.support_contact_must_be_a_valid_email_or_url")}function M(e){if(!e)return(0,d.t)("community.publishing.category_cant_be_empty")}function F(e,r){let n={name:R(e.name),description:P(e.description),creatorPolicy:D(e.creatorPolicy)};e.tags&&(r?n.tags=(0,y.Dp)(e.tags,(0,y.V4)(r,e.categoryId??""),r.flatMap(e=>e.tags)):n.tags=(0,y.Wh)(e.tags)??void 0),e.publisherIds&&(n.publisherIds=(0,y.IZ)(e.publisherIds.length)||void 0),n.carouselMedia=(0,p.vC)(e.carouselMedia),n.categoryId=M(e.categoryId);let a="isPaid"in e&&!!e.isPaid;return n.price=O(a,e.price),n.supportContact=k(a,e.supportContact),Object.keys(n).forEach(e=>!n[e]&&delete n[e]),n}function x(e){return e===f.G4.FULLSCREEN||e===f.G4.FULLSCREEN_WITH_COMMENTS}function U(e){return!!e&&!e.unpublished_at}function B(e){return!!e&&e.publishing_status===h.KB.APPROVED_PUBLIC}function V(e){let r=(0,b.X$)(e);return(0,l.Gc)(e=>{e?.preventDefault(),s.Ay.redirect(r,"_blank")})}},889973:(e,r,n)=>{n.d(r,{Z:()=>i});var a=n(126911);function i(e,r=!1){let n=e.deltaY,o=e.ctrlKey&&!r&&(a.y.isChrome()||a.y.isFirefox());return o?n/=-100:0!==n&&(n=n/Math.abs(n)*Math.min(Math.abs(n),10*Math.cbrt(Math.abs(n)))),o?Math.pow(4,n):Math.pow(.995,n)}},593803:(e,r,n)=>{n.d(r,{FB:()=>l,UA:()=>a,W4:()=>o,Wg:()=>s,s3:()=>c,sf:()=>i});let a=[["Afghanistan","AF"],["\xc5land Islands","AX"],["Albania","AL"],["Algeria","DZ"],["American Samoa","AS"],["Andorra","AD"],["Angola","AO"],["Anguilla","AI"],["Antarctica","AQ"],["Antigua and Barbuda","AG"],["Argentina","AR"],["Armenia","AM"],["Aruba","AW"],["Australia","AU"],["Austria","AT"],["Azerbaijan","AZ"],["Bahamas","BS"],["Bahrain","BH"],["Bangladesh","BD"],["Barbados","BB"],["Belarus","BY"],["Belgium","BE"],["Belize","BZ"],["Benin","BJ"],["Bermuda","BM"],["Bhutan","BT"],["Bolivia (Plurinational State of)","BO"],["Bonaire, Sint Eustatius and Saba","BQ"],["Bosnia and Herzegovina","BA"],["Botswana","BW"],["Bouvet Island","BV"],["Brazil","BR"],["British Indian Ocean Territory","IO"],["Brunei Darussalam","BN"],["Bulgaria","BG"],["Burkina Faso","BF"],["Burundi","BI"],["Cabo Verde","CV"],["Cambodia","KH"],["Cameroon","CM"],["Canada","CA"],["Cayman Islands","KY"],["Central African Republic","CF"],["Chad","TD"],["Chile","CL"],["China","CN"],["Christmas Island","CX"],["Cocos (Keeling) Islands","CC"],["Colombia","CO"],["Comoros","KM"],["Congo","CG"],["Congo (Democratic Republic of the)","CD"],["Cook Islands","CK"],["Costa Rica","CR"],["C\xf4te d'Ivoire","CI"],["Croatia","HR"],["Cuba","CU"],["Cura\xe7ao","CW"],["Cyprus","CY"],["Czechia","CZ"],["Denmark","DK"],["Djibouti","DJ"],["Dominica","DM"],["Dominican Republic","DO"],["Ecuador","EC"],["Egypt","EG"],["El Salvador","SV"],["Equatorial Guinea","GQ"],["Eritrea","ER"],["Estonia","EE"],["Eswatini","SZ"],["Ethiopia","ET"],["Falkland Islands (Malvinas)","FK"],["Faroe Islands","FO"],["Fiji","FJ"],["Finland","FI"],["France","FR"],["French Guiana","GF"],["French Polynesia","PF"],["French Southern Territories","TF"],["Gabon","GA"],["Gambia","GM"],["Georgia","GE"],["Germany","DE"],["Ghana","GH"],["Gibraltar","GI"],["Greece","GR"],["Greenland","GL"],["Grenada","GD"],["Guadeloupe","GP"],["Guam","GU"],["Guatemala","GT"],["Guernsey","GG"],["Guinea","GN"],["Guinea-Bissau","GW"],["Guyana","GY"],["Haiti","HT"],["Heard Island and McDonald Islands","HM"],["Holy See","VA"],["Honduras","HN"],["Hong Kong","HK"],["Hungary","HU"],["Iceland","IS"],["India","IN"],["Indonesia","ID"],["Iran (Islamic Republic of)","IR"],["Iraq","IQ"],["Ireland","IE"],["Isle of Man","IM"],["Israel","IL"],["Italy","IT"],["Jamaica","JM"],["Japan","JP"],["Jersey","JE"],["Jordan","JO"],["Kazakhstan","KZ"],["Kenya","KE"],["Kiribati","KI"],["Korea (Democratic People's Republic of)","KP"],["Korea (Republic of)","KR"],["Kuwait","KW"],["Kosovo","XK"],["Kyrgyzstan","KG"],["Lao People's Democratic Republic","LA"],["Latvia","LV"],["Lebanon","LB"],["Lesotho","LS"],["Liberia","LR"],["Libya","LY"],["Liechtenstein","LI"],["Lithuania","LT"],["Luxembourg","LU"],["Macao","MO"],["Macedonia (the former Yugoslav Republic of)","MK"],["Madagascar","MG"],["Malawi","MW"],["Malaysia","MY"],["Maldives","MV"],["Mali","ML"],["Malta","MT"],["Marshall Islands","MH"],["Martinique","MQ"],["Mauritania","MR"],["Mauritius","MU"],["Mayotte","YT"],["Mexico","MX"],["Micronesia (Federated States of)","FM"],["Moldova (Republic of)","MD"],["Monaco","MC"],["Mongolia","MN"],["Montenegro","ME"],["Montserrat","MS"],["Morocco","MA"],["Mozambique","MZ"],["Myanmar","MM"],["Namibia","NA"],["Nauru","NR"],["Nepal","NP"],["Netherlands","NL"],["New Caledonia","NC"],["New Zealand","NZ"],["Nicaragua","NI"],["Niger","NE"],["Nigeria","NG"],["Niue","NU"],["Norfolk Island","NF"],["Northern Mariana Islands","MP"],["Norway","NO"],["Oman","OM"],["Pakistan","PK"],["Palau","PW"],["Palestine, State of","PS"],["Panama","PA"],["Papua New Guinea","PG"],["Paraguay","PY"],["Peru","PE"],["Philippines","PH"],["Pitcairn","PN"],["Poland","PL"],["Portugal","PT"],["Puerto Rico","PR"],["Qatar","QA"],["R\xe9union","RE"],["Romania","RO"],["Russian Federation","RU"],["Rwanda","RW"],["Saint Barth\xe9lemy","BL"],["Saint Helena, Ascension and Tristan da Cunha","SH"],["Saint Kitts and Nevis","KN"],["Saint Lucia","LC"],["Saint Martin (French part)","MF"],["Saint Pierre and Miquelon","PM"],["Saint Vincent and the Grenadines","VC"],["Samoa","WS"],["San Marino","SM"],["Sao Tome and Principe","ST"],["Saudi Arabia","SA"],["Senegal","SN"],["Serbia","RS"],["Seychelles","SC"],["Sierra Leone","SL"],["Singapore","SG"],["Sint Maarten (Dutch part)","SX"],["Slovakia","SK"],["Slovenia","SI"],["Solomon Islands","SB"],["Somalia","SO"],["South Africa","ZA"],["South Georgia and the South Sandwich Islands","GS"],["South Sudan","SS"],["Spain","ES"],["Sri Lanka","LK"],["Sudan","SD"],["Suriname","SR"],["Svalbard and Jan Mayen","SJ"],["Sweden","SE"],["Switzerland","CH"],["Syrian Arab Republic","SY"],["Taiwan","TW"],["Tajikistan","TJ"],["Tanzania, United Republic of","TZ"],["Thailand","TH"],["Timor-Leste","TL"],["Togo","TG"],["Tokelau","TK"],["Tonga","TO"],["Trinidad and Tobago","TT"],["Tunisia","TN"],["Turkey","TR"],["Turkmenistan","TM"],["Turks and Caicos Islands","TC"],["Tuvalu","TV"],["Uganda","UG"],["Ukraine","UA"],["United Arab Emirates","AE"],["United Kingdom of Great Britain and Northern Ireland","GB"],["United States of America","US"],["United States Minor Outlying Islands","UM"],["Uruguay","UY"],["Uzbekistan","UZ"],["Vanuatu","VU"],["Venezuela (Bolivarian Republic of)","VE"],["Viet Nam","VN"],["Virgin Islands (British)","VG"],["Virgin Islands (U.S.)","VI"],["Wallis and Futuna","WF"],["Western Sahara","EH"],["Yemen","YE"],["Zambia","ZM"],["Zimbabwe","ZW"]],i=["CU","IR","KP","SY"],o=[["Alabama","AL"],["Alaska","AK"],["Arizona","AZ"],["Arkansas","AR"],["California","CA"],["Colorado","CO"],["Connecticut","CT"],["Delaware","DE"],["Florida","FL"],["Georgia","GA"],["Hawaii","HI"],["Idaho","ID"],["Illinois","IL"],["Indiana","IN"],["Iowa","IA"],["Kansas","KS"],["Kentucky","KY"],["Louisiana","LA"],["Maine","ME"],["Maryland","MD"],["Massachusetts","MA"],["Michigan","MI"],["Minnesota","MN"],["Mississippi","MS"],["Missouri","MO"],["Montana","MT"],["Nebraska","NE"],["Nevada","NV"],["New Hampshire","NH"],["New Jersey","NJ"],["New Mexico","NM"],["New York","NY"],["North Carolina","NC"],["North Dakota","ND"],["Ohio","OH"],["Oklahoma","OK"],["Oregon","OR"],["Pennsylvania","PA"],["Rhode Island","RI"],["South Carolina","SC"],["South Dakota","SD"],["Tennessee","TN"],["Texas","TX"],["Utah","UT"],["Vermont","VT"],["Virginia","VA"],["Washington","WA"],["West Virginia","WV"],["Wisconsin","WI"],["Wyoming","WY"],["District of Columbia","DC"],["American Samoa","AS"],["Guam","GU"],["Northern Mariana Islands","MP"],["Puerto Rico","PR"],["United States Minor Outlying Islands","UM"],["Virgin Islands, U.S.","VI"],["Armed Forces (AA)","AA"],["Armed Forces (AE)","AE"],["Armed Forces (AP)","AP"]].sort((e,r)=>e[1].localeCompare(r[1])),s=[["Alberta","AB"],["British Columbia","BC"],["Manitoba","MB"],["New Brunswick","NB"],["Newfoundland and Labrador","NL"],["Nova Scotia","NS"],["Nunavut","NU"],["Ontario","ON"],["Prince Edward Island","PE"],["Quebec","QC"],["Saskatchewan","SK"],["Northwest Territories","NT"],["Yukon","YT"]].sort((e,r)=>e[1].localeCompare(r[1])),l=[["Andhra Pradesh","AP"],["Arunachal Pradesh","AR"],["Assam","AS"],["Bihar","BR"],["Chhattisgarh","CT"],["Goa","GA"],["Gujarat","GJ"],["Haryana","HR"],["Himachal Pradesh","HP"],["Jharkhand","JH"],["Karnataka","KA"],["Kerala","KL"],["Madhya Pradesh","MP"],["Maharashtra","MH"],["Manipur","MN"],["Meghalaya","ML"],["Mizoram","MZ"],["Nagaland","NL"],["Odisha","OR"],["Punjab","PB"],["Rajasthan","RJ"],["Sikkim","SK"],["Tamil Nadu","TN"],["Telangana","TG"],["Tripura","TR"],["Uttar Pradesh","UP"],["Uttarakhand","UT"],["West Bengal","WB"],["Andaman and Nicobar Islands","AN"],["Chandigarh","CH"],["Dadra and Nagar Haveli and Daman and Diu","DH"],["Delhi","DL"],["Jammu and Kashmir","JK"],["Ladakh","LA"],["Lakshadweep","LD"],["Puducherry","PY"]].sort((e,r)=>e[1].localeCompare(r[1])),c=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE"].concat(["GF","GP","MQ","ME","YT","RE","MF","GI","AX","IS","NO","AD","LI","MC","SM","VA","GB","GG","JE","PM","GL","BL","SX","AW","CW","WF","PF","NC","TF","AI","BM","IO","VG","KY","FK","MS","PN","SH","GS","TC"])},940596:(e,r,n)=>{n.d(r,{Wh:()=>c,rt:()=>u});var a=n(38329),i=n(374626),o=n(38580),s=n(335682);let l={preserveValue:!1};function c(e,r=l){let n=(0,i.Iz)(e);return(0,o.eU)(e=>{let i=a.D?e(s.ze):"FILE_KEY";return r.preserveValue||n.setShouldRemove((e,r)=>r!==i),e(n(i))},(e,r,...a)=>r(n(e(s.ze)),...a))}let d=[];function u(e){let r=(0,o.eU)(e);return d.push({atomRef:new WeakRef(r),initialValue:e}),r}},272042:(e,r,n)=>{n.d(r,{ZN:()=>s,dO:()=>o});var a=n(517333),i=n(245389);async function o(e){try{let e=null;if(a.eD&&(e=await a.eD.getKeyboardLayout()),!window.isSecureContext)return{detectedLayouts:[],layoutJSON:{},desktopLayout:e,errorMessage:"Not in secure context, no navigator.keyboard object"};if(window.top!==window.self)return{detectedLayouts:[],layoutJSON:{},desktopLayout:e,errorMessage:"Not in top-level browser context, navigator.keyboard not available"};let r=navigator.keyboard;if(!r||!r.getLayoutMap)return{detectedLayouts:[],layoutJSON:{},desktopLayout:e,errorMessage:"No keyboard in navigator object"};let n=await r.getLayoutMap(),{detectedLayoutsWeb:o,layoutJSON:s}=function(e){let r={};return e.forEach((e,n)=>{r[n]=e}),{layoutJSON:r,detectedLayoutsWeb:i.WH.map(r=>{let n=Object.entries(r.list).map(([r,n])=>null==n?!(r in e):e.get(r)===n).filter(e=>!e).length;return{name:r.name,isValid:0===n}}).filter(e=>e.isValid).map(e=>e.name)}}(n);return{desktopLayout:e,detectedLayouts:o,layoutJSON:s}}catch(e){return console.error("Keyboard layout detection logging failed:",e),{detectedLayouts:[],layoutJSON:{},desktopLayout:null,errorMessage:"Unknown failure"}}}function s(e){return(e.desktopLayout?(0,i.pB)(e.desktopLayout):null)||(1===e.detectedLayouts.length&&i.g7[e.detectedLayouts[0]]?i.g7[e.detectedLayouts[0]]:null)}},315329:(e,r,n)=>{n.d(r,{n:()=>i}),n(411855),n(188507);var a=n(133537);function i(e,r){return!!(e?.is_ipad_user||(0,a.jm)(r))}n(38329),n(915440),n(563706),n(743282),n(939863),n(572900),n(265746),n(809831),n(99506),n(279453),n(988022),n(193212)},622896:(e,r,n)=>{n.d(r,{Bh:()=>_,SS:()=>f,bO:()=>g,oz:()=>E,z5:()=>y});var a=n(411855);n(188507);var i=n(432258);n(695956),n(89865),n(184058),n(966712);var o=n(915440),s=n(711525),l=n(886653);n(395281),n(632430);var c=n(298527),d=n(335682);n(416095);var u=n(279453),m=n(623746);n(756159),n(372291);var p=n(696673);n(869156);let h=a.createContext(null);function _(e){let{subscriptions:r,requestLibraryItems:n,releaseLibraryItems:o}=(0,i.sR)(a.useContext(h),"Must call `useLibraryData` from within <LibraryDataProvider>");return a.useEffect(()=>{if(e)return n(e),()=>o(e)},[n,o,e]),e&&r[e]||(0,s.Xm)()}function g(){let{subscriptions:e}=(0,i.sR)(a.useContext(h),"Must call `useLibraryDataSubscriptions` from within <LibraryDataProvider>");return e}function f({fileKey:e}){return _(e),null}function E(e,r){let n=[];for(let a of e.libraryHierarchyPaths)for(let e of a.styles)r?e.style_type===r&&n.push(e):n.push(e);return n}function y(e,r){return E(e.data,r)}a.memo(function({fileKey:e,onChange:r}){let n=e!==(0,d.tS)(),i=(0,p.wJ)(e),s=(0,c.Ck)(),{view:l,args:m,options:h}=i?{view:u.Acj,args:{hubFileId:e},options:{enabled:s()}}:{view:n?u.tIY:u.s5n,args:{fileKey:e},options:void 0},_=(0,o.Rs)(l,m,h);return a.useEffect(()=>{r(e,_)},[r,e,_]),null}),(0,l.cm)(function(e){if("loaded"!==e.status)return e;let r=e.data;if("communityLibraryByHubFileId"in r){let e=r.communityLibraryByHubFileId;if(!e)return(0,s.e1)([]);let n=e.libraryHierarchyPaths.map(r=>{let n=r.styles.map(r=>(0,m.KC)(r,{type:"hubFile",file:{id:e.hubFileId,libraryKey:e.libraryKey}}));return{pageName:r.pageName??void 0,containingFrameName:r.containingFrameName??void 0,nameHierarchyPath:r.nameHierarchyPath??void 0,components:[],stateGroups:[],styles:n}});return(0,s.gB)({fileKey:e.hubFileId,name:e.name,numComponents:0,numStateGroups:0,numStyles:e.numStyles??0,libraryHierarchyPaths:n})}let n=r.file;if(!n)return(0,s.e1)([]);let a=n.libraryHierarchyPaths.map(e=>{let r="components"in e?e.components.map(e=>(0,m.Qp)(e,{type:"team",file:n})):[],a="stateGroups"in e?e.stateGroups.map(e=>(0,m.SS)(e,{type:"team",file:n})):[],i=e.styles.map(e=>(0,m.KC)(e,{type:"team",file:n}));return{pageName:e.pageName??void 0,containingFrameName:e.containingFrameName??void 0,nameHierarchyPath:e.nameHierarchyPath??void 0,components:r,stateGroups:a,styles:i}});return(0,s.gB)({fileKey:n.key,name:n.name,numComponents:n.library&&"numComponents"in n.library&&n.library.numComponents||0,numStateGroups:n.library&&"numStateGroups"in n.library&&n.library.numStateGroups||0,numStyles:n.library?.numStyles??0,libraryHierarchyPaths:a})})},416095:(e,r,n)=>{n.d(r,{A0:()=>eg,Av:()=>er,CG:()=>tU,Cj:()=>tk,Dg:()=>ea,E2:()=>tB,ET:()=>tr,Ei:()=>t1,FS:()=>tY,Fl:()=>tK,G$:()=>tO,GA:()=>eD,Gd:()=>el,Gg:()=>e5,Gj:()=>t6,Gp:()=>tl,HF:()=>Q,Hb:()=>tR,Ht:()=>tL,IW:()=>ei,J1:()=>eQ,Jc:()=>Z,K3:()=>eC,KQ:()=>eW,LB:()=>ej,LC:()=>t_,LH:()=>t8,LI:()=>tM,LT:()=>tW,LX:()=>ex,Lk:()=>eF,MA:()=>tH,MF:()=>et,Mb:()=>eJ,NW:()=>tg,NY:()=>tG,QO:()=>tE,QT:()=>eI,Q_:()=>rr,Qg:()=>eT,RQ:()=>th,T4:()=>t$,Tz:()=>tJ,VC:()=>eS,VO:()=>tD,Vd:()=>ep,Vk:()=>td,WV:()=>tu,WY:()=>e2,X0:()=>eh,X7:()=>en,Ys:()=>eZ,_B:()=>tf,_Q:()=>tm,aD:()=>J,ad:()=>tV,bd:()=>tw,cU:()=>e9,cd:()=>e7,dG:()=>eA,dx:()=>tF,e8:()=>ti,eD:()=>t4,eS:()=>ta,gA:()=>eU,gi:()=>tC,hH:()=>e1,i_:()=>e$,iw:()=>e6,j7:()=>ed,jk:()=>eR,kD:()=>em,kG:()=>tT,kw:()=>tv,lG:()=>tI,lg:()=>ee,nJ:()=>rn,nV:()=>eu,nn:()=>re,oH:()=>tS,og:()=>ey,ov:()=>tt,pD:()=>rt,pq:()=>te,qB:()=>eO,r9:()=>tN,rC:()=>eH,rt:()=>eE,sv:()=>t9,t$:()=>t7,td:()=>to,th:()=>tq,ti:()=>e_,uD:()=>t0,uH:()=>tc,uJ:()=>eB,vu:()=>tQ,w$:()=>t2,w8:()=>ez,xl:()=>eo,yW:()=>tj,yh:()=>ec,yt:()=>ew,zE:()=>tp,zm:()=>e3});var a=n(411855),i=n(188507),o=n(943632),s=n(67151),l=n(414507),c=n(388393),d=n(299321),u=n(259120);n(932345);var m=n(758271),p=n.n(m),h=n(776250),_=n(297666),g=n(38329),f=n(794272),E=n(966712),y=n(886653),b=n(364898),I=n(776621),T=n(437304),v=n(96328),S=n(27087),w=n(47506),A=n(939863),N=n(154483),C=n(572900),L=n(265746),O=n(944682),R=n(395281),P=n(452246),D=n(182976),k=n(974105),M=n(44892),F=n(875847),x=n(237929),U=n(666068),B=n(173454),V=n(333370),G=n(479296),H=n(267701),W=n(335682),K=n(694687),Y=n(99506),$=n(540019),j=n(872712),z=n(388094),q=n(790202),X=n(694517),J=(e=>(e.CURRENT="current",e.ALL="all",e))(J||{});let Z=a.createContext(null);function Q(e){return e===B.E8.CURRENT||e===B.E8.CHANGED||e===B.E8.DELETED}function ee(e){return e===B.E8.NEW||e===B.E8.CHANGED||e===B.E8.DELETED}function et(e){switch(e.type){case B.PW.COMPONENT:return{type:e.type,key:e.component_key,version:e.content_hash};case B.PW.STATE_GROUP:return{type:e.type,key:e.key,version:e.version};case B.PW.STYLE:return{type:e.type,key:e.key,version:e.content_hash};case B.PW.VARIABLE_SET:case B.PW.VARIABLE:case B.PW.MODULE:return{type:e.type,key:e.key,version:e.version};default:(0,s.vA)(!1,`Unknown type ${e?.type}`)}}function er(e){let{key:r}=et(e);return(0,s.KF)(void 0!==r,"Asset had no key",{asset:e}),r}function en(e){return e.map(er)}function ea(e){return et(e).version}function ei(e){return!e.isShown||e.isCreating?null:e.style.isLocal?null:e.style}function eo(e,r){return`/file/${e}?node-id=${encodeURIComponent(r)}&main-component=1`}let es=(0,N.fv)();function el(e){return eo(es(e),e.node_id)}function ec(e,r,n){for(let n of Object.values(r))if("loaded"===n.status&&n.data.key===e)return n.data;for(let r of Object.values(n))if(r.key===e)return r;return null}function ed(e,r){let n=Object.create(null);if(!r)return n;let a=r.team_id||B.Yu,i=e[a]&&e[a][r.key]||Object.create(null);for(let e in i)null==i[e].unpublished_at&&(n[e]=i[e]);return n}function eu(e,r){let n=ed(e,r);return Object.keys(n).map(e=>n[e])}function em(e){let r=[];return ep(e,(n,a,i)=>{r.push(e[n][a][i])}),r}function ep(e,r){Object.keys(e).forEach(n=>{Object.keys(e[n]).forEach(a=>{Object.keys(e[n][a]).forEach(e=>{r(n,a,e)})})})}function eh(e){return Object.keys(e).map(r=>e[r]).filter(e=>!e.deletedFromSceneGraph)}function e_(e,r){let n=[];for(let a in e){let i=e[a];i.style_type!==r||i.deletedFromSceneGraph||n.push(i)}return n}function eg(e,r,n,a){let i=[];for(let o in r)for(let s in r[o])if(eO(e,n,{team_id:o,key:s},a))for(let e in r[o][s]){let n=r[o][s][e];i.push(n)}return i}let ef=new Set;async function eE(e){let r=new Map((e=e.filter(e=>e.canvas_url&&!M.Eo.hasKeyInCache((0,H.P)(e.canvas_url).url)&&!ef.has(e.key))).map(e=>[e.key,e.canvas_url])),n=e.map(e=>e.key);if(n.forEach(e=>ef.add(e)),(0,E.kc)().ds_file_proxy_for_style_assets)await Promise.all(n.map(e=>M.Eo.getCanvas({canvas_url:r.get(e)})));else{if(0===n.length)return;try{let e=await S.Ay.post("/style/canvases",{style_keys:n});for(let[n,a]of Object.entries(e.data.meta.urls))S.Ay.crossOriginGetAny(a,null,{responseType:"arraybuffer"}).then(({data:e})=>{let a=r.get((0,c.n3)(n));if(a){let r=(0,H.P)(a).url;M.Eo.putCanvas(r,e)}ef.delete((0,c.n3)(n))}).catch(()=>{ef.delete((0,c.n3)(n))})}catch(e){n.forEach(e=>ef.delete(e))}}}let ey=["TEXT","FILL","EFFECT","GRID"],eb=(e,r)=>{let n=r?1:2;switch(e){case"TEXT":return(0,A.t)("design_systems.styles.text_style",{numStyles:n});case"FILL":return(0,A.t)("design_systems.styles.color_style",{numStyles:n});case"EFFECT":return(0,A.t)("design_systems.styles.effect_style",{numStyles:n});case"GRID":return(0,A.t)("design_systems.styles.grid_style",{numStyles:n});case"EXPORT":return(0,A.t)("design_systems.styles.export_style");case"STROKE":return(0,A.t)("design_systems.styles.stroke_style");default:return(0,h.sx)("Unknown style type",{styleType:e}),(0,A.t)("design_systems.styles.styles",{numStyles:n})}};function eI(e){return eb(e,!1)}function eT(e,r){return r in e?{design:!!e[r]?.design,figjam:!!e[r]?.figjam,slides:!!e[r]?.slides}:{design:null,figjam:null,slides:null}}let ev=e=>null!==e.design&&null!==e.figjam&&null!==e.slides;function eS(e,r){var n;if(!r)return{design:!1,figjam:!1,slides:!1};let a=(n=e.subscriptions.forPresets,r?{...eT(n,r.key),isPresetSubscription:!0}:{design:!1,figjam:!1,slides:!1}),i=eT(e.subscriptions.forCurrentOrg,r.key);return ev(i)?i:a}function ew(e,r){if(!r)return{design:!1,figjam:!1,slides:!1};let n=eS(e,r),a=eT(e.subscriptions.forCurrentWorkspace,r.key);return ev(a)?a:n}function eA(e,r,n){if(!n)return{design:!1,figjam:!1,slides:!1};let a=ew(e,n),i=eT(e.subscriptions.byTeam[r]||{},n.key);return ev(i)?i:a}let eN=(e,r)=>{if(!r)return{design:!1,figjam:!1,slides:!1};let n=eS(e,r),a=eT(e.subscriptions.forCurrentUser,r.key);return ev(a)?a:n};function eC(e,r){let n=eN(e,r);if(ev(n))return n;for(let a in e.subscriptions.byTeam){let i=eA(e,a,r);i.design&&(n.design=!0),i.figjam&&(n.figjam=!0),i.slides&&(n.slides=!0)}return n}let eL=(e,r)=>e.key===r.key||e.source_file_key===r.key||e.key===r.source_file_key;function eO(e,r,n,a){let i;if(!r||!n||eL(r,n))return!1;i=(0,E.kc)().ps_benchmark?r.team_id?a?function(e,r,n){let a=eN(e,n);return ev(a)&&!a.isPresetSubscription?a:eA(e,r,n)}(e,r.team_id,n):eA(e,r.team_id,n):eC(e,n):r.team_id?eA(e,r.team_id,n):eC(e,n);let o=null;switch(r.editor_type){case"design":default:o=i.design;break;case"whiteboard":o=i.figjam;break;case"slides":o=i.slides}let s=e.subscriptions.byFile;return r.key in s&&n.key in s[r.key]?s[r.key][n.key]:ti(e,n.key)?o||null===o:o}function eR(e,r,n,a){return eO(e,{key:r.key,team_id:r.teamId,editor_type:r.editorType,source_file_key:r.sourceFileKey},n,a)}let eP=(0,N.fv)();function eD(e,r,n,a,i){if(n.length)return!0;for(let n of a){let a;let o=i[n];if(!o)continue;a="file_key"in o?eP(o):"loaded"===o.status&&eP(o.data);let s=(0,F.T9)(r.project);if(a&&eO(e,{key:r.key,team_id:r.teamId,editor_type:r.editorType,source_file_key:r.sourceFileKey},{key:a},s))return!0}return!1}let ek=(e,r)=>e.style_type===r.style_type?0:ey.indexOf(e.style_type)<ey.indexOf(r.style_type)?-1:1,eM=(e,r)=>-(0,b.Ez)(e.sort_position||"",r.sort_position||"");function eF(e,r){let n=ek(e,r);return 0===n?eM(e,r):n}function ex(e){e.sort(eM)}function eU(e,r){let n=e=>e&&e.toLowerCase?e.toLowerCase():"",a=e.containing_frame||{},i=r.containing_frame||{};return a.pageId!==i.pageId?n(a.pageName)<n(i.pageName)?-1:1:a.nodeId!==i.nodeId?n(a.name)<n(i.name)?-1:1:n(e.name)<n(r.name)?-1:1}function eB(e){let r=[...e];return ex(r),{stylesByPrefix:r.reduce((e,r)=>{let n=(0,x.In)(r.name);return e[n]=e[n]||[],e[n].push(r),e},Object.create(null)),sortedPrefixes:(0,V.wM)(r)}}let eV=!0;function eG(e,r){if(!e||!r)return!0;for(let n in e){if(!(n in r))return!0;let a=e[n],i=r[n];for(let e in a)if(a[e]!==i[e])return!0;for(let e in i)if(!(e in a))return!0}for(let n in r)if(!(n in e))return!0;return!1}function eH(e,r,n,a,i,o,s,l,c,d){let u=Object.create(null),m=0;for(let p in r.forEach(r=>{let c=r.nodeId,p=a[c];o[c]=eX(i[c]),u[c]=e(p,n[c],r,s,l,d);let h=u[c];h.status===B.E8.NEW&&h.type===B.PW.COMPONENT&&(m+=1)}),a)if(!(p in u)){let e=i[p];e&&e.url&&(0,M.qv)(e.url);let r=a[p];if(r.type===B.PW.COMPONENT||r.type===B.PW.STATE_GROUP){let e=(r.type,B.PW.COMPONENT,r);e.old_key&&c.add(e.node_id)}}for(let r in n)r in u||(o[r]=eX(i[r]),u[r]=e(a[r],n[r],null,s,l,d));return{newLocal:u,numNewComponents:m}}function eW(e){let r=e.getState();if(r.versionHistory.activeId&&r.versionHistory.activeId!==X.V_||!r.mirror?.sceneGraph)return;let n=(0,k.d1)(r),a=n?n.key:"",i=n?.library_key?(0,u.l)(n.library_key):(0,u.l)(""),o=new Set,s={},{newLocal:l,numNewComponents:c}=eH(e$,r.library.publishableSymbols,r.library.openFilePublished__LIVEGRAPH.components,r.library.local.components,r.library.local.thumbnails,s,a,i,o,B.PW.COMPONENT),{newLocal:d}=eH(ej,r.library.publishableStateGroups,r.library.openFilePublished__LIVEGRAPH.stateGroups,r.library.local.stateGroups,r.library.local.thumbnails,s,a,i,o,B.PW.STATE_GROUP),{newLocal:m}=eH(ez,r.library.publishableStyles,r.library.openFilePublished__LIVEGRAPH.styles,r.library.local.styles,r.library.local.thumbnails,s,a,i,o,B.PW.STYLE),{newLocal:p}=eH(eq,r.library.publishableModules,r.library.openFilePublished__LIVEGRAPH.modules,r.library.local.modules,r.library.local.thumbnails,s,a,i,o,B.PW.MODULE);if(eG(r.library.local.components,l)&&e.dispatch(R.I0({local:l,type:B.PW.COMPONENT})),eG(r.library.local.stateGroups,d)&&e.dispatch(R.I0({local:d,type:B.PW.STATE_GROUP})),eG(r.library.local.styles,m)&&e.dispatch(R.I0({local:m,type:B.PW.STYLE})),eG(r.library.local.modules,p)&&(0,E.kc)().dse_module_publish&&e.dispatch(R.I0({local:p,type:B.PW.MODULE})),function(e,r){if(!e&&!r)return!1;if(!e||!r||Object.keys(e).length!==Object.keys(r).length)return!0;for(let n in e)if(!r[n]||e[n].url!==r[n].url||e[n].content_hash!==r[n].content_hash)return!0;return!1}(r.library.local.thumbnails,s)&&e.dispatch(P.xp({thumbnails:s})),c>0&&eV&&((0,w.YQ)({id:"Parsed first components"}),eV=!1),o.size>0){let n=r.notifications.filter(e=>e.type===L._.MOVE_COMPONENTS_PROMPT);if(n.length>0){let r=n[0].type===L._.MOVE_COMPONENTS_PROMPT&&n[0].movableItemIds;r&&(0,T.Bq)(r,o)&&e.dispatch(C.$.dequeue({type:L._.MOVE_COMPONENTS_PROMPT}))}}}let eK="Generating a local library item that is neither in the library nor in the scene graph. Why.",eY=(e,r,n,a,i,o)=>{var s;if(!n){if(r)return{...r,status:B.E8.DELETED,deletedFromSceneGraph:!0};throw Error(eK)}let l=r&&null==r.unpublished_at,c=!!n.isPublishable,d=B.E8.NOT_STAGED;l&&!c?d=B.E8.DELETED:!l&&c?d=B.E8.NEW:l||c||(d=B.E8.NOT_STAGED);let{description:u,description_rt:m}=(s=n.description,{description:n.descriptionPlain??"",description_rt:s??""});return{node_id:n.nodeId,name:n.name,description:u,description_rt:m,file_key:a,file_key_source:N.Ps.LOCAL_FILE,library_key:i,isPublishable:c,deletedFromSceneGraph:!1,meta:e?e.meta:void 0,isLocal:!0,status:d,type:o,thumbnail_url:r&&r.thumbnail_url||void 0}};function e$(e,r,n,a,i){let o={...eY(e,r,n,a,i,B.PW.COMPONENT),type:B.PW.COMPONENT,height:n?.height,width:n?.width,x:n?.x,y:n?.y,componentPropDefError:n?.componentPropDefError,containing_frame:n?.containingFrame||r?.containing_frame||void 0,component_key:r?.component_key||void 0,content_hash:n?.versionHash||r?.content_hash||void 0,userFacingVersion:n?.userFacingVersion??c.F7.INVALID,old_key:n?.oldKey||void 0};if(!r)return o;let s=null==r.unpublished_at,l=!!n?.isPublishable;return s&&l&&(r&&r.content_hash===o.content_hash&&!rr(r.containing_frame,n?.containingFrame)&&rt(r.name,n?.name)&&rt(r.description,o.description)?o.status=B.E8.CURRENT:o.status=B.E8.CHANGED),o}function ej(e,r,n,a,i){let o=eY(e,r,n,a,i,B.PW.STATE_GROUP);if(!r){if(!n)throw Error(eK);return{...o,type:B.PW.STATE_GROUP,version:n.versionHash,userFacingVersion:n.userFacingVersion,containing_frame:n.containingFrame,width:n.width,height:n.height,stateGroupError:n.stateGroupError,componentPropDefError:n.componentPropDefError,fill_color:n.fill_color,default_state_key:n.default_state_key,old_key:n.oldKey||void 0}}let s={...o,type:B.PW.STATE_GROUP,version:n?.versionHash||r.version,userFacingVersion:n?.userFacingVersion||c.Rf.INVALID,containing_frame:n?.containingFrame||r.containing_frame,width:n?.width||r.min_node_width,height:n?.height||r.min_node_height,key:r.key||void 0,stateGroupError:n?.stateGroupError||d.bwI.NONE,componentPropDefError:n?.componentPropDefError||d.uXg.NONE,fill_color:n?.fill_color||r?.fill_color,default_state_key:n?.default_state_key||r?.default_state_key,old_key:n?.oldKey||void 0},l=null==r.unpublished_at,u=!!n?.isPublishable;return l&&u&&(r.version===s.version&&!rr(r.containing_frame,n?.containingFrame)&&rt(r.name,n?.name)&&rt(r.description,s.description)?s.status=B.E8.CURRENT:s.status=B.E8.CHANGED),s}function ez(e,r,n,a,i){let o=eY(e,r,n,a,i,B.PW.STYLE),s=r&&null==r.unpublished_at,l=!!n?.isPublishable,c=!1;if(s&&l&&(r&&r.content_hash===n?.versionHash&&rt(r.name,n?.name)&&rt(r.description,o.description)?rt(r.sort_position,n?.sortPosition)?o.status=B.E8.CURRENT:(o.status=B.E8.CHANGED,c=!0):o.status=B.E8.CHANGED),n)return{...o,type:B.PW.STYLE,key:n.styleKey,style_type:n.styleType,is_soft_deleted:n.isSoftDeleted,sort_position:n.sortPosition,content_hash:n.versionHash,userFacingVersion:n.userFacingVersion,hasOnlyBeenReordered:c,old_key:n.oldKey||void 0};if(r)return{...o,type:B.PW.STYLE,key:r.key,style_type:r.style_type,is_soft_deleted:!0,sort_position:r.sort_position,content_hash:r.content_hash,userFacingVersion:r.userFacingVersion,hasOnlyBeenReordered:c};throw Error(eK)}function eq(e,r,n,a,i){let o=eY(e,r,n,a,i,B.PW.MODULE);if(!r){if(!n)throw Error(eK);return{...o,type:B.PW.MODULE,moduleSource:n.moduleSource,height:n.height,width:n.width,x:n.x,y:n.y,containing_frame:n.containingFrame,version:n.versionHash,userFacingVersion:n.userFacingVersion,old_key:n.oldKey||void 0}}let s={...o,type:B.PW.MODULE,moduleSource:n?.moduleSource||r.moduleSource,height:n?.height||r.height,width:n?.width||r.width,x:n?.x,y:n?.y,containing_frame:n?.containingFrame||r.containing_frame||void 0,version:n?.versionHash||r.version,userFacingVersion:n?.userFacingVersion||c.Pg.INVALID,old_key:n?.oldKey||void 0,key:r.key},l=r&&null==r.unpublished_at,d=!!n?.isPublishable;return l&&d&&(r.version===s.version&&!rr(r.containing_frame,n?.containingFrame)&&rt(r.name,n?.name)&&rt(r.description,s.description)?s.status=B.E8.CURRENT:s.status=B.E8.CHANGED),s}function eX(e){return{kind:e&&e.kind||void 0,url:e&&e.url||void 0,content_hash:e&&e.content_hash||void 0}}let eJ=e=>`GET_PUBLISHED_COMPONENTS_FOR_${e}`,eZ=new Set;function eQ(e){for(let r of eZ)e(D.yH({key:r}))}let e0=new Set;function e1(e){return e0.has(e)}function e2(e){e0.add(e)}function e3(){e0.clear()}let e6=e=>`GET_DEFAULT_LIBRARIES_FOR_${e}`;function e5(e,r){let n={};return r.forEach(e=>{if(e.containing_frame?.containingStateGroup?.nodeId){let r=e.containing_frame?.containingStateGroup?.nodeId;n[r]||(n[r]=[]),n[r].push(e.name)}}),e.map(e=>({...e,stateNames:n[e.node_id]}))}let e8=new Set,e4=(0,N.fv)();async function e9(e,r=[],n,a,i,o,s){if(!r.length)return{};let l={};for(let n of r){let r=e.get(n);r&&r.styleKeyForPublish&&0!==d.glU.getNumUsagesOfStyle(r.styleKeyForPublish,!0)&&(l[r.styleKeyForPublish]=n)}let u=Object.keys(l).map(c.n3),m=await $.M4.fetch(j._x.UnpublishedStylesQuery({styleKeys:u,orgId:i})),h=p()([...m,...Object.values(n).filter(e=>e.key in l)],e=>e.key),_=new Set(h.map(e=>e.key)),g=u.filter(e=>e&&!_.has((0,c.n3)(e))),f=await $.M4.fetch(j.qE.MissingStyleKeysQuery({styleKeys:g}));delete f[o];let E=[],y={};for(let e of h){let r=e4(e);y[r]||(y[r]=[]),y[r].push(e),a[r]||e8.has(r)||(e8.add(r),E.push(r))}for(let[r,n]of Object.entries(f))for(let a of(y[r]||(y[r]=[]),n)){let n=l[a]&&e.get(l[a]);n&&y[r].push({type:B.PW.STYLE,name:n.name,file_key:r,file_key_source:N.Ps.REST_API,key:a,thumbnail_url:`/style/${a}/thumbnail?ver=${n.styleVersionHash}`,canvas_url:`/style/${a}/thumbnail?ver=${n.styleVersionHash}`,content_hash:n.styleVersionHash||void 0,userFacingVersion:(0,c.IA)(n.userFacingVersion),node_id:n.guid,isLocal:!1,style_type:n.styleType,library_key:n.sourceLibraryKey})}return await e7(E,s),y}async function e7(e,r){if(e.length>0){let a=[];async function n(e){try{let n=await S.Ay.post("/api/files/batch",{file_keys:e});n.data.meta||(0,I.x1)("designSystems","Unexpected empty API response",{data:JSON.stringify(n.data??null),numFiles:e.length,status:n.status}),r(O.uo({files:n.data.meta.files,subscribeToRealtime:!0}))}catch(e){(0,I.$D)(l.FigmaTeam.DESIGN_SYSTEMS_EDITOR,e)}}for(let r=0;r<e.length;r+=200){let i=e.slice(r,r+200);a.push(n(i))}await Promise.all(a)}}async function te(e,r,n){if(0===r.length)return[];let{styles:a,files:i}=(await S.Ay.post("/api/styles",{style_keys:r,org_id:n})).data.meta;return e(O.uo({files:i,subscribeToRealtime:!0})),a}function tt(e,r=[],n=[],a,i,o,s,l=!1){let u={},m=r.concat(n),p=[];for(let r of m){let n,s,m;let h=e.get(r);if(!h)continue;let _=tj(h)||void 0,g=h.publishID,f=h.isStateGroup;if(f?(h.sharedStateGroupVersion&&(n=h.sharedStateGroupVersion),h.stateGroupKey&&(s=h.stateGroupKey)):(h.sharedSymbolVersion&&(n=h.sharedSymbolVersion),h.componentKey&&(s=h.componentKey)),!g||!_)continue;let E=i[_];if(E){let e=E.team_id||B.Yu;if(m=((f?a.stateGroups[e]||{}:a.components[e]||{})[_]||{})[g],m?.type===B.PW.COMPONENT){let r=m.containing_frame?.containingStateGroup?.nodeId;r&&(m=a.stateGroups[e]?.[_]?.[r],f=!0)}}else e8.has(_)||(e8.add(_),p.push(_));if(m)u[er(m)]=m;else if(f){if(!s||u[s]||!h.reversedChildrenGuids.some(r=>{let n=e.get(r)?.componentKey;return n&&!u[n]}))continue;let a=d.glU.getDefaultStateForLocalStateGroup(r),i=e.get(a),[l,m]=i?[i.size.x,i.size.y]:[0,0];u[s]={type:B.PW.STATE_GROUP,name:h.name,file_key:_,file_key_source:N.Ps.PUBLISH_FILE,library_key:h.sourceLibraryKey,key:s,thumbnail_url:`/state_group/${s}/thumbnail?ver=${n}&fv=${o}`,canvas_url:`/state_group/${s}/canvas?ver=${n}&fv=${o}`,node_id:g||"",isLocal:!1,version:n||c.Rf.INVALID,userFacingVersion:(0,c.Rf)(h.userFacingVersion),containing_frame:{},min_node_width:m,min_node_height:l,default_state_key:""}}else{if(!s||u[s]||h.isState&&!l||null===o)continue;u[s]={type:B.PW.COMPONENT,name:h.name,file_key:_,file_key_source:N.Ps.PUBLISH_FILE,library_key:h.sourceLibraryKey,component_key:s,thumbnail_url:`/component/${s}/thumbnail?ver=${n}&fv=${o}`,canvas_url:`/component/${s}/canvas?ver=${n}&fv=${o}`,node_id:g||"",content_hash:h.sharedSymbolVersion||void 0,userFacingVersion:(0,c.F7)(h.userFacingVersion),isLocal:!1,min_node_height:h.size.x,min_node_width:h.size.y}}}return e7(p,s),Object.values(u)}function tr(e,r){return new Set(tt(e.mirror.sceneGraph,(0,z.C9)(e),(0,z.jf)(e),e.library.published,e.fileByKey,e.fileVersion,r).map(e=>er(e)))}let tn=(e,r,n,a,i,o,s)=>tt(e,r,n,a,i,o,s,!0).reduce((e,r)=>(r.type===B.PW.COMPONENT?r.component_key&&(e[r.component_key]=r):e[r.key]=r,e),Object.create(null));function ta(e){let r=(0,i.wA)(),{library:n,fileByKey:o,sceneGraph:s,fileVersion:l,subscribedComponents:c,subscribedStateGroups:d,subscribedComponentsOnCurrentPage:u,subscribedStateGroupsOnCurrentPage:m}=(0,f.R)(e=>({library:e.library,fileByKey:e.fileByKey,sceneGraph:e.mirror.sceneGraph,fileVersion:e.fileVersion,subscribedComponents:(0,z.C9)(e),subscribedStateGroups:(0,z.jf)(e),subscribedComponentsOnCurrentPage:(0,z.J5)(e),subscribedStateGroupsOnCurrentPage:(0,z.EY)(e)})),[p,h]="current"===e?[u,m]:[c,d];return a.useMemo(()=>tn(s,p,h,n.published,o,l,r),[s,p,h,n.published,o,l,r])}function ti(e,r){let n=e.defaultPublished.fileKeys.includes(r),a=e.defaultShapes.fileKeys.includes(r);return!!n||!!a}function to(e,r){let n=e.defaultPublished.libraryKeys.includes(r),a=e.defaultShapes.libraryKeys.includes(r);return!!n||!!a}let ts=(0,y.xx)(e=>{let r={},n=e.local.styles;for(let e in n){let a=n[e];r[a.key]=a}return r});function tl(e,r,n){let a=ts(n)[e];if(a)return{kind:B.AT.LOCAL,value:a};let i=n.used__LIVEGRAPH.styles[e];return i?.status==="loaded"?{kind:B.AT.LIBRARY,value:i.data}:r&&r.length?{kind:B.AT.DANGLING,value:{key:e,node_id:r[0]}}:void 0}function tc(e,r){if(!e)return"";if(e.kind!==B.AT.DANGLING)return e.value.name;{let n=r.get(e.value.node_id);return n?n.name:""}}let td=(0,y.xx)(e=>{let r={};return Object.keys(e).forEach(n=>{r[n]={},Object.keys(e[n]).forEach(a=>{r[n][a]=tu(e[n][a])})}),r});function tu(e){let r={};for(let n in e){let a=e[n];a.containing_frame?.containingStateGroup&&(r[n]={...a})}return r}function tm(e,r,n){let a=e.team_id,i=e.key,o=a?n[a]:null;if(o){let e=o[i];if(e)return e[r]}return null}function tp(e){let r=e.type===B.PW.STATE_GROUP&&!!(e.stateGroupError&&e.stateGroupError!==d.bwI.TOO_MANY_STATES_ERROR);return!!(e.componentPropDefError&&(e.componentPropDefError===d.uXg.CONFLICTING_NAMES_ERROR||e.componentPropDefError===d.uXg.CONFLICTING_NAMES_WITH_VARIANT_ERROR||e.componentPropDefError===d.uXg.UNUSED_DEF_ERROR)||r)}function th(e){return e.variableSetError!==d.HG$.NONE}let t_=()=>{},tg=new Promise(e=>{t_=e}),tf=()=>{},tE=new Promise(e=>{tf=e}),ty=()=>{},tb=new Promise(e=>{ty=e}),tI=e=>({callback:ty,promise:tb,resetPromise:tA,loadingKey:`GET_USED_COMPONENTS_STATE_GROUPS_FOR_${e.getState().openFile?.key}`}),tT=()=>{},tv=new Promise(e=>{tT=e}),tS=new Promise(e=>{});function tw(){t_(),tf(),tT(),tg=new Promise(e=>{t_=e}),tE=new Promise(e=>{tf=e}),tv=new Promise(e=>{tT=e}),tA()}function tA(){ty(),tb=new Promise(e=>{ty=e})}function tN(e,r,n){return e.team_id===n?-1:r.team_id===n?1:(e.team_name||"").localeCompare(r.team_name||"")}function tC(e,r,n){return e.sort((e,a)=>{var i;let o=(i=n?.groupByFolders,e.team_id!==a.team_id?tN(e,a,r):i&&e.file.folder_id!==a.file.folder_id?e.folder_name<a.folder_name?-1:1:(e.library_file_name||"").localeCompare(a.library_file_name||""));return n?.isDescending?o:-o})}function tL(e,r,n){let a;let i=e.node_id,o=r[i]||{},l=o.url||null;switch(e.type){case B.PW.COMPONENT:case B.PW.STYLE:a=e.content_hash;break;case B.PW.VARIABLE:case B.PW.VARIABLE_SET:case B.PW.STATE_GROUP:case B.PW.MODULE:case B.PW.RESPONSIVE_SET:case B.PW.CODE_COMPONENT:a=e.version;break;default:(0,s.xb)(e)}return(n||o.content_hash!==a||!(0,M.OM)(l))&&(e.type===B.PW.COMPONENT||e.type===B.PW.STATE_GROUP||e.type===B.PW.MODULE||e.type===B.PW.RESPONSIVE_SET||e.type===B.PW.CODE_COMPONENT?l=(0,M.r2)(i):e.type===B.PW.STYLE?l=(0,U.fP)(e)?(0,M.jh)():(0,M.aV)(i,e.style_type):e.type===B.PW.VARIABLE||e.type===B.PW.VARIABLE_SET?l=(0,M.jh)():(0,s.xb)(e)),l}function tO({numProductComponents:e,numStyles:r,numVariables:n,numVariableCollections:a,numModuleAssets:i}){let s=r>0?(0,A.t)("design_systems.libraries_modal.plural.num_style",{numStyles:r}):null,l=e>0?(0,A.t)("design_systems.libraries_modal.plural.num_component",{numComponents:e}):null,c=n>0?(0,A.t)("design_systems.libraries_modal.plural.num_variables",{numVariables:n}):null,d=(0,E.kc)().dse_editor_templates_v1&&i>0?(0,A.t)("design_systems.libraries_modal.plural.num_templates",{numTemplates:i}):null,u=0===n&&a>0?(0,A.t)("design_systems.libraries_modal.plural.variable_collections",{numVariableCollections:a}):null,m=(0,o.WI)([l,s,c,u,d]);return 0===m.length?(0,E.kc)().dse_editor_templates_v1?(0,A.t)("design_systems.libraries_modal.no_publishable_assets"):(0,A.t)("design_systems.libraries_modal.no_components_styles_variables"):(0,v.Yx)(m,"unit")}let tR=e=>e!==B.E8.DELETED&&e!==B.E8.NOT_STAGED,tP=(0,N.fv)();function tD(e,r,n,a,i){let o=r[e];if(!o)return null;let s=em(n).find(e=>e.type===B.PW.COMPONENT?e.component_key===o:e.key===o),l="another file";if(!s)return l;let c=(0,E.kc)().ds_use_lib_keys?i[s.library_key]:a[tP(s)];return c?c.name:l}function tk(e,r,n){let a=e.reduce((n,a)=>(r[a]?n[a]=r[a]:(0,s.KF)(!1,"Expected nodeIdsToMove to be a subset of movableNodeIdToOldKey",{nodeIdsToMove:e,movableNodeIdToOldKey:r}),n),Object.create(null));for(let e of n){let n=e.containing_frame?.containingStateGroup?.nodeId,i=r[e.node_id];if(!n||!i)continue;let o=!!r[n];a[n]||!o?a[e.node_id]=i:a[e.node_id]&&delete a[e.node_id]}return{moveRemappings:a,movableItemsToPublishAsNew:new Set(Object.keys(r).filter(e=>!a[e]))}}function tM(e){return e.isStateGroup||"SYMBOL"===e.type&&!e.isState||e.isCodeComponent}function tF(e){return B.YJ.includes(e.type)}function tU(e){return e.isLocal?d.Egt.getAssetKeyForPublish(e.node_id):er(e)}function tB(e){return e.containing_frame?.containingStateGroup?.nodeId??null}function tV(e){return!!tB(e)}function tG(e,r,n,a){let i;if(!e)return;let o=r.get(e);if(o&&o.containingStateGroupId&&(o=r.get(o.containingStateGroupId)),o){if(o.isSubscribedAsset){let e=o.componentKey??o.stateGroupKey;e&&(i=a?.[e])}else i=n?.[o.guid];return i}}function tH(e,r){function n(e){return e.toLowerCase()}let a=n(e.name),i=n(r.name);return a<i?-1:a>i?1:0}function tW(e){switch(e){case B.jg.THIRTY_DAYS:return(0,A.t)("design_systems.libraries_modal.30_days");case B.jg.SIXTY_DAYS:return(0,A.t)("design_systems.libraries_modal.60_days");case B.jg.NINETY_DAYS:return(0,A.t)("design_systems.libraries_modal.90_days");case B.jg.YEAR:return(0,A.t)("design_systems.libraries_modal.year");default:(0,s.xb)(e)}}function tK(e){return!!((0,E.kc)().dse_templates_proto&&e.description?.startsWith("Figma.TemporaryIsTemplate"))}function tY(e){return!!((0,E.kc)().dse_module_publish&&"MODULE"===e.type)}function t$(e,r){return(null!==e.design||null!==e.figjam||null!==e.slides)&&(!!e.design||!!e.figjam||!!e.slides)&&(!!e.design&&!r.designSubscribed||!!e.figjam&&!r.figjamSubscribed||!!e.slides&&!r.slidesSubscribed)}function tj(e){return(0,E.kc)().ds_publish_file_deprecation?e?e.isLooseComponent||e.isState?tq(e.componentKey):e.isStateGroup?tJ(e.stateGroupKey):null:null:e?.publishFile??null}let tz=(0,N.fv)();function tq(e,r){return e?(r||(r=t1(g.D.getState().library.published.components)),tz(r[e])??null):null}let tX=(0,N.fv)();function tJ(e,r){return e?(r||(r=t1(g.D.getState().library.published.stateGroups)),tX(r[e])??null):null}let tZ=(0,N.fv)();function tQ(e,r,n){return n[e]?tZ(n[e])??null:r[e]?tZ(r[e])??null:null}function t0(e){let r={};return ep(e,(n,a,i)=>{r[a]=r[a]||{},r[a][i]=e[n][a][i]}),r}function t1(e){let r={};return ep(e,(n,a,i)=>{let o=e[n][a][i];r[er(o)]=o}),r}function t2(e){let r=(0,i.wA)(),n=a.useMemo(()=>(0,_.s)(()=>{e&&e.value.node_id&&r(P.rb({styleNodeId:e.value.node_id,styleKind:e.kind}))}),[r,e]);a.useEffect(n)}let t3=(0,N.fv)();function t6(e){return(0,E.kc)().ds_use_lib_keys?`${e.library_key}:${e.node_id}`:`${t3(e)}:${e.node_id}`}let t5=(0,G.D)((e,r)=>e?e.parentOrgId:r);function t8(){return t5((0,W.q5)(),(0,K.dq)())}function t4(e){return t5(e.openFile,e.currentUserOrgId)}function t9(){let e=t8(),r=(0,i.d4)(e=>e.orgById);return(0,K.td)(e,r)}function t7(e){let r=(0,q.je)();return a.useMemo(()=>{if("loaded"===r.status)return r.data?.find(r=>r.fileKey===e)?.id},[e,r.data,r.status])}function re(e){return e===Y.pk.ORG||e===Y.pk.WORKSPACE}function rt(e,r){return!e&&!r||e===r}function rr(e,r){let n=e?e.nodeId:void 0,a=e?e.name:void 0,i=e?e.backgroundColor:void 0,o=e?e.pageId:void 0,s=r?r.nodeId:void 0,l=r?r.name:void 0,c=r?r.backgroundColor:void 0,d=r?r.pageId:void 0;return(n!==s||a!==l||i!==c||!!o||!d)&&!(null==e&&null==r||null!=e&&null!=r&&rt(e.nodeId,r.nodeId)&&rt(e.name,r.name)&&rt(e.backgroundColor,r.backgroundColor)&&rt(e.pageName,r.pageName)&&rt(e.pageId,r.pageId)&&function(e,r){if(null==e&&null==r)return!0;if(null==e||null==r)return!1;for(let n of["nodeId","name"])if(!rt(e[n],r[n]))return!1;return!0}(e.containingStateGroup,r.containingStateGroup))}function rn(e,r){return!e&&!r||!!e&&!!r&&e.nodeId==r.nodeId}},26328:(e,r,n)=>{n.d(r,{Yl:()=>s,eu:()=>o}),n(35645);var a=n(416095);n(173454);var i=n(48515);function o(e){return e.type===i.I.ALL||e.type===i.I.LOCAL||e.type===i.I.FILE||e.type===i.I.SITE_KIT}function s(e,...r){let n={};r.forEach(e=>{e.forEach(e=>{n[(0,a.Av)(e)]=e})});let i=[];return e.forEach(e=>{let r=(0,a.Av)(e);r in n?(e.ai_score&&(n[r].ai_score=e.ai_score),e.lexical_score&&(n[r].lexical_score=e.lexical_score)):i.push(e)}),i}},535257:(e,r,n)=>{n.d(r,{AG:()=>P,KK:()=>D,UR:()=>S,cC:()=>L,dm:()=>O,hH:()=>C,ik:()=>A});var a=n(35645),i=n.n(a),o=n(776250),s=n(966712),l=n(374626),c=n(647899),d=n(588666),u=n(154483),m=n(378905),p=n(420576),h=n(696673),_=n(69961),g=n(416095),f=n(666068),E=n(99506),y=n(540019),b=n(173454),I=n(508567),T=n(48515),v=n(239737);let S=40,w=(0,u.fv)();async function A(e,r,n,a,l,c,u,h,g,f){try{let y=a?.editorType===E._Y.WHITEBOARD,b=[],T=l?.view==="fullscreen"&&l?.fileKey||a?.key||"";b=(await I.$W.getComponents({query:e,openFileKey:T,fv:r||0,orgId:n||void 0,excludeAIResults:y,subscribedLibraryFileKeys:h.size<S?JSON.stringify(Array.from(h)):void 0,searchSessionId:g,logEligibility:!T&&await (0,v.Ci)(!0)||void 0,isUi3:_.nt.ui3.getValue()})).data.meta;let A=a?a.key:"",N=a&&((0,p.Kz)(a)?a.sourceFileKey:""),C=b.filter(e=>{if((0,m.TK)(e,N))return!1;let r=(0,s.u4)("ds_use_lib_keys",e.library_key in u,w(e) in c);return(0,s.kc)().asset_search_return_file_name?!!e.file_name||(r&&(0,o.sx)("asset_search.missing_file_name",{openFileKey:A,guid:e.node_id,libraryKey:e.library_key,fileKey:w(e),sourcePath:"getAllServerSideSearchResults"}),!1):r}),L=new Set;for(let e of h)L.add((0,d.$)(e));let O=await M(f),[R,P]=i()(C,e=>((0,s.kc)().ds_use_lib_keys?L.has(e.library_key)||a?.libraryKey===e.library_key:h.has(w(e))||w(e)===A)||O(e));return{subscribedSearchResults:R,unsubscribedSearchResults:P}}catch(r){return o.az.trackDefinedEvent("assets_panel.server_search_for_all_components_failure",{query:e}),{subscribedSearchResults:[],unsubscribedSearchResults:[]}}}let N=(0,u.fv)();async function C(e,r,n,a,c=!1){if(!n)return{communitySearchResults:null,unsubscribedCommunitySearchResults:null};try{if(!l.zl.get(h.JB))return{communitySearchResults:null,unsubscribedCommunitySearchResults:null};let{results:n}=(await I.$W.getAssetsFromCommunityLibraries({query:e,assetTypes:(0,I.in)([b.PW.COMPONENT,b.PW.STATE_GROUP]).join(","),includeVisualAssets:!!c||void 0})).data.meta,d=await M(a),[u,m]=i()(n,e=>r.has(N(e))||d(e));if((0,s.kc)().asset_search_return_file_name)for(let e of n)e.file_name||(0,o.sx)("asset_search.missing_file_name",{guid:e.node_id,libraryKey:e.library_key,fileKey:N(e),sourcePath:"getCommunityComponentSearchResults"});return{communitySearchResults:u,unsubscribedCommunitySearchResults:m}}catch(r){return o.az.trackDefinedEvent("assets_panel.search_for_components_from_community_libraries_error",{query:e}),{communitySearchResults:null,unsubscribedCommunitySearchResults:null}}}async function L(e,r,n,a=!1){if(!n)return[];try{if(!l.zl.get(h.JB))return[];let{results:n}=(await I.$W.getAssetsFromCommunityLibraries({query:e,assetTypes:(0,I.in)([b.PW.COMPONENT,b.PW.STATE_GROUP]).join(","),hubFileIds:[r],includeVisualAssets:!!a||void 0})).data.meta;return n}catch(r){return o.az.trackDefinedEvent("assets_panel.search_for_components_from_community_libraries_error",{query:e}),[]}}function O(e,r){return e.search(r).then(e=>e.map(e=>({...e.item,score:e.score})))}function R(e,r){let n=r.split(" ").filter(e=>e.length>2),a=e.name.toLowerCase().substring(e.name.lastIndexOf("/")+1);return n.length>0&&n.every(e=>a.includes(e.toLowerCase()))}function P(e,r,n,a,o){if(0===r.length)return e;if(a===T.I.FILE&&!o)return r;let s=r;o&&(s=function(e,r){let n=e.filter(e=>e.lexical_score),[a,o]=i()(n,e=>R(e,r)),s=e.filter(e=>e.ai_score),l=Math.max(...a.map(e=>e.lexical_score)),c=Math.min(...a.map(e=>e.lexical_score)),d=Math.max(...o.map(e=>e.lexical_score)),u=Math.min(...o.map(e=>e.lexical_score)),m=Math.max(...s.map(e=>e.ai_score)),p=Math.min(...s.map(e=>e.ai_score));return e=(e=e.map(e=>{if(e.lexical_score){let n;return n=R(e,r)?l===c?1:.9+.09999999999999998*((e.lexical_score-c)/(l-c)):d===u?.89:.89*(e.lexical_score-u)/(d-u),{...e,score:n}}return e})).map(e=>{if(e.ai_score){let r=m===p?.89:(e.ai_score-p)/(m-p)*.89;return e.lexical_score&&(r=Math.max(r,e.score)),{...e,score:r}}return e})}(s,n));let l=Math.max(...s.map(e=>e.score));return[...e.map(e=>{let r=(1-e.score)*.95*l;return{...e,score:r}}),...s].sort((e,r)=>r.score-e.score)}async function D(e,r,n,a){try{let i=await I.$W.getComponentsFromFile({query:e,fileKey:r,openFileKey:n,searchSessionId:a,logEligibility:!n&&await (0,v.Ci)(!0)||void 0,isUi3:_.nt.ui3.getValue()});if((0,s.kc)().asset_search_return_file_name)for(let e of i.data.meta)e.file_name||(0,o.sx)("asset_search.missing_file_name",{openFileKey:n,guid:e.node_id,libraryKey:e.library_key,fileKey:w(e),sourcePath:"getServerSideSearchResultsForFile"});return i.data.meta}catch(n){return o.az.trackDefinedEvent("assets_panel.server_search_for_file_failure",{query:e,fileKey:r}),[]}}y.M4.Query({fetch:async({query:e,libraryId:r,assetTypes:n})=>{let{results:a}=(await I.$W.getAssetsFromCommunityLibraries({query:e,assetTypes:(0,I.in)(n).join(","),hubFileIds:[r]}).catch(()=>({data:{meta:{results:[]}}}))).data.meta;return a},output:({data:e})=>e.map(f.aV),enabled:({query:e})=>null!=e&&e.trim().length>0});var k=(e=>(e.OPEN_FILE="OPEN_FILE",e.FILE_VERSION="FILE_VERSION",e.LOADING_STATE="LOADING_STATE",e))(k||{});async function M(e){let r=(await (0,c.hW)("exp_search_unpublished_assets")).getValue("enabled",!1);return n=>r&&e.has((0,g.Av)(n))}},207825:(e,r,n)=>{n.d(r,{u5:()=>o,vQ:()=>l});var a=n(383112);n(939863),n(186828);var i=n(155367);let o="originTab",s=[i.J7.BILLING];function l(e){let r=(0,a.K)(i.J7,e);if(r)return s.includes(r)?r:void 0}},698812:(e,r,n)=>{n.d(r,{EO:()=>i,XY:()=>o}),n(411855);var a=n(188507);n(943632),n(181912),n(881388),n(939863),n(66037),n(679892),n(694687),n(594901),n(227544),n(596607),n(428467);let i=e=>`LICENSE_GROUP_GET_${e}`;function o(e){return(0,a.d4)(r=>{var n;return!!e&&(n=r.orgById[e],!!(n?.bigma_enabled&&n?.license_groups_count))})}},99506:(e,r,n)=>{n.d(r,{A$:()=>eH,Ag:()=>el,B0:()=>J,BQ:()=>Q,D8:()=>ew,Dh:()=>R,E9:()=>_,El:()=>j,Fd:()=>w,GP:()=>O,G_:()=>k,Go:()=>eF,Hi:()=>eV,Il:()=>m,K:()=>er,KB:()=>ef,Lc:()=>u,Mr:()=>i,OL:()=>ec,P4:()=>eP,P5:()=>eT,PQ:()=>M,PW:()=>s,Pn:()=>ep,Pu:()=>eh,Qh:()=>eS,Rc:()=>h,Se:()=>e_,Uu:()=>Z,We:()=>$,Xn:()=>eo,Zf:()=>ek,_D:()=>X,_Y:()=>S,a0:()=>F,bQ:()=>eu,bU:()=>Y,bk:()=>A,bp:()=>eB,cA:()=>z,dQ:()=>ea,eD:()=>eL,h4:()=>ed,h9:()=>p,hM:()=>en,ho:()=>et,iS:()=>ex,iU:()=>eD,kI:()=>eN,o6:()=>T,pk:()=>P,sC:()=>eO,sm:()=>eE,tK:()=>v,tw:()=>C,ud:()=>c,un:()=>g,vt:()=>ey,wl:()=>em,xj:()=>o,xw:()=>l,xy:()=>eC,y4:()=>eU,zI:()=>K,zd:()=>eR});var a=n(104180),i=(e=>(e.FILE_SEEN="file_seen",e.DESIGN_FILE_SEEN="design_file_seen",e.WHITEBOARD_FILE_SEEN="whiteboard_file_seen",e.FILE_EDIT="file_edit",e.DESIGN_FILE_EDIT="design_file_edit",e.WHITEBOARD_FILE_EDIT="whiteboard_file_edit",e.DEV_MODE_FILE_SEEN="dev_mode_file_seen",e))(i||{});let o=(0,a.fc)(i);var s=(e=>(e.RESPONSIVE_SET="responsive_set",e.CONSTRAINED_TEMPLATE="constrained_template",e.CODE_COMPONENT="code_component",e))(s||{}),l=(e=>(e.INHERIT="INHERIT",e.NONE="NONE",e.OVERRIDE="OVERRIDE",e))(l||{}),c=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.DEV_MODE="dev_mode",e.SLIDES="slides",e.COLLABORATOR="collaborator",e.DEVELOPER="developer",e.EXPERT="expert",e))(c||{}),d=(e=>(e.MONTH="month",e.YEAR="year",e))(d||{}),u=(e=>(e.ORGANIZATION="Organization",e.ENTERPRISE="Enterprise",e))(u||{}),m=(e=>(e.ORG="Org",e))(m||{}),p=(e=>(e.PUBLISHED_PLUGIN="published-plugin",e.FIRST_PARTY="first-party",e))(p||{}),h=(e=>(e.INHERIT="INHERIT",e.OVERRIDE="OVERRIDE",e))(h||{}),_=(e=>(e.DEFAULT="default",e.SRGB="srgb",e.DISPLAY_P3="display_p3",e))(_||{}),g=(e=>(e.CREATOR="creator",e.PUBLISHER="publisher",e))(g||{}),f=(e=>(e.PENDING="pending",e.SUCCEEDED="succeeded",e.CANCELED="canceled",e.REFUNDED="refunded",e.TRIALING="trialing",e.SUBSCRIPTION_PAYMENT_FAILED="subscription_payment_failed",e.INVOICE_FINALIZATION_FAILED="invoice_finalization_failed",e.DISPUTED="disputed",e))(f||{}),E=(e=>(e.HUB_FILE="hub_file",e.PLUGIN="plugin",e.PROFILE="profile",e.WIDGET="widget",e))(E||{}),y=(e=>(e.MEMBERS="members",e.ALL_USERS="all_users",e))(y||{}),b=(e=>(e.ALLOW="ALLOW",e.DISABLE="DISABLE",e))(b||{}),I=(e=>(e.DESKTOP="desktop",e.IPAD="ipad",e))(I||{}),T=(e=>(e.STATUS_CHANGE="status_change",e))(T||{}),v=(e=>(e.PIXEL="PIXEL",e.SCALED="SCALED",e))(v||{}),S=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.SLIDES="slides",e.SITES="sites",e.COOPER="cooper",e))(S||{});let w=(0,a.fc)(S);var A=(e=>(e.FILE="file",e.PROTOTYPE="prototype",e.FOLDER="folder",e.TEAM="team",e.WORKSPACE="workspace",e))(A||{}),N=(e=>(e.COST_CENTER="costCenter",e.ORGANIZATION="organization",e.DIVISION="division",e.DEPARTMENT="department",e))(N||{});let C=(0,a.fc)(N);var L=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.EXTERNAL="external",e))(L||{}),O=(e=>(e.PRO_TRIAL="pro_trial",e.DOWNGRADED_ORG_TEAM="downgraded_org_team",e.PROMO_CODE="promo_code",e.ADMIN_OVERRIDE="admin_override",e))(O||{});let R=(0,a.fc)(O);var P=(e=>(e.ORG="Org",e.WORKSPACE="Workspace",e.TEAM="Team",e))(P||{}),D=(e=>(e.SELF_SELECTED="self",e.SELF_SELECTED_NOT_LISTED="not listed",e.SELF_SELECTED_DONT_KNOW="don't know",e.MOVED_BY_ADMIN="moved",e.AUTO_ASSIGNED="auto",e))(D||{}),k=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.DEV_MODE="dev_mode",e.SLIDES="slides",e))(k||{}),M=(e=>(e.ORG_VIEW="org_view",e.ORG_EDIT="org_edit",e.WORKSPACE_EDIT="workspace_edit",e.WORKSPACE_VIEW="workspace_view",e.VIEW="view",e.EDIT="edit",e.INHERIT="inherit",e.INVITE_ONLY="invite_only",e))(M||{});let F=(0,a.fc)(M);var x=(e=>(e.INCOMPLETE="incomplete",e.COMPLETE="complete",e))(x||{}),U=(e=>(e.INCOMPLETE="incomplete",e.COMPLETE="complete",e))(U||{}),B=(e=>(e.PENDING="pending",e.NEEDS_REVIEW="needs_review",e.REVIEW_REJECTED="review_rejected",e.REVIEW_ACCEPTED="review_accepted",e.AUTO_ACCEPTED="auto_accepted",e))(B||{}),V=(e=>(e.APPROVED="approved",e.REJECTED="rejected",e.UNREVIEWED="unreviewed",e))(V||{}),G=(e=>(e.NOT_STARTED="not_started",e.MATCH="match",e.MISMATCH="mismatch",e))(G||{}),H=(e=>(e.NOT_STARTED="not_started",e.AWAITING_BUILDS="awaiting_builds",e.IN_PROGRESS="in_progress",e.COMPLETED="completed",e))(H||{}),W=(e=>(e.FIGMA_FIRST_PARTY="figma_first_party",e.FIGMA_PARTNER="figma_partner",e.OFF_PLATFORM="off_platform",e.HAS_FREEMIUM_CODE="has_freemium_code",e))(W||{}),K=(e=>(e.BUILD="build",e.COMPLETED="completed",e.NONE="none",e))(K||{}),Y=(e=>(e.PUBLIC="public",e.PRIVATE="private",e.SECRET="secret",e))(Y||{});let $=(0,a.fc)(Y);var j=(e=>(e.STARTER="starter",e.FULL="full",e.RESTRICTED="restricted",e))(j||{});let z=(0,a.fc)(j);var q=(e=>(e.IP_ALLOWLIST="ip_allowlist",e.NETWORK_ACCESS_RESTRICTION="network_access_restriction",e))(q||{}),X=(e=>(e.ADMIN="admin",e.MEMBER="member",e.GUEST="guest",e))(X||{});let J=(0,a.fc)(X);var Z=(e=>(e.ROLE_UPGRADE="role_upgrade",e.INVITE_REDEEM="invite_redeem",e.ORG_INVITE_REDEEM="org_invite_redeem",e.INVITE_AUTOUPGRADE="invite_autoupgrade",e.RESOURCE_MOVED_TO_ORG="resource_moved_to_org",e.DRAFTS_SHARE="drafts_share",e.ACCESS_EDIT_LINK="access_edit_link",e.CREATE_TEAM="create_team",e.JOIN_TEAM="join_team",e.JOIN_TEAM_REQUEST="join_team_request",e.ADMIN_UPGRADE="admin_upgrade",e.SCIM="scim",e.FIGMA_ADMIN="figma_admin",e.DEPART_TEAM="depart_team",e.CREATE_FILE="create_file",e.EDIT_REQUEST_APPROVAL="edit_request_approval",e.EDIT_REQUEST_AUTO_APPROVAL="edit_request_auto_approval",e.RUN_PLUGIN="run_plugin",e.RESOURCE_MOVED_FROM_ORG_DRAFTS="resource_moved_from_org_drafts",e.DEFAULT_PAID_STATUS="default_paid_status",e.FJ_GA_REUPGRADE="fj_ga_reupgrade",e.EDIT_BUTTON="edit_button",e.EDIT_ACTION="edit_action",e.ACTIVE_EDIT_ACTION="active_edit_action",e.ORG_MERGE="org_merge",e.DEV_MODE_PRE_COMMIT_BETA_USE="dev_mode_pre_commit_beta_use",e.UNKNOWN="unknown",e.UNKNOWN_POPULATED_THROUGH_BACKFILL="unknown_populated_through_backfill",e.SCIM_RECOVERY="scim_recovery",e.ROLE_FALLBACK="role_fallback",e.PAID_STATUS_ON_ORG_CREATION="paid_status_on_org_creation",e.TEAM_ADDED_TO_ORG_THROUGH_FIGMA_ADMIN="team_added_to_org_through_figma_admin",e))(Z||{});let Q=(0,a.fc)(Z);var ee=(e=>(e.FILE="file",e.FILE_REPO="file_repo",e.FOLDER="folder",e.TEAM="team",e.ORG="org",e))(ee||{});let et=(0,a.fc)(ee);var er=(e=>(e.FOLDER="Folder",e.WORKSPACE="Workspace",e))(er||{}),en=(e=>(e.UNPINNED="unpinned",e.PINNED="pinned",e))(en||{}),ea=(e=>(e.STARTER="starter",e.FULL="full",e.RESTRICTED="restricted",e))(ea||{}),ei=(e=>(e.ORG="Org",e.TEAM="Team",e))(ei||{}),eo=(e=>(e.ADMIN="admin",e.MEMBER="member",e.GUEST="guest",e))(eo||{}),es=(e=>(e.INCOMPLETE="incomplete",e.ACTIVE="active",e.UNPAID="unpaid",e.SUSPENDED="suspended",e.SUSPENDED_MONTHLY_SUB_EDITOR_COUNT_EXCEEDED="suspended_monthly_sub_editor_count_exceeded",e.DEACTIVATED="deactivated",e))(es||{}),el=(e=>(e.STARTER="starter",e.STUDENT="student",e.PRO="pro",e.ORG="org",e.ENTERPRISE="enterprise",e))(el||{}),ec=(e=>(e.ORG="organization",e.TEAM="team",e))(ec||{}),ed=(e=>(e.ORG_USER="org_user",e.TEAM_USER="team_user",e))(ed||{}),eu=(e=>(e.PENDING="pending",e.APPROVED="approved",e.REJECTED="rejected",e))(eu||{}),em=(e=>(e.DEFAULT="default",e.INTERNAL="internal",e.CONFIG24="config24",e.APPLE_ALPHA="apple_alpha",e.GOOGLE_ALPHA="google_alpha",e))(em||{}),ep=(e=>(e.FIGMA="figma",e.APPLE="apple",e.GOOGLE="google",e))(ep||{}),eh=(e=>(e.ORG_VIEW="org_view",e.VIEW="view",e.INHERIT="inherit",e))(eh||{});let e_=(0,a.fc)(eh);var eg=(e=>(e.ACTIVE="active",e.DEACTIVATED="deactivated",e.EXPIRED="expired",e))(eg||{}),ef=(e=>(e.BLOCKED="blocked",e.ORG_PRIVATE="org_private",e.PENDING_USER_VISUAL_COMPLIANCE="pending_user_visual_compliance",e.PENDING_PUBLIC="pending_public",e.ORG_PRIVATE_PENDING_PUBLIC="org_private_pending_public",e.DELISTED="delisted",e.DELISTED_CREATOR_STRIPE_DISABLED="delisted_creator_stripe_disabled",e.APPROVED_PUBLIC="approved_public",e))(ef||{}),eE=(e=>(e.PENDING="pending",e.APPROVED="approved",e.DENIED="denied",e.REVOKED="revoked",e))(eE||{}),ey=(e=>(e.FILE="file",e.FILE_REPO="file_repo",e.FOLDER="folder",e.TEAM="team",e))(ey||{}),eb=(e=>(e.FILE="file",e.FILE_REPO="file_repo",e.FOLDER="folder",e.TEAM="team",e.PROTOTYPE="prototype",e))(eb||{}),eI=(e=>(e.MIGRATION_NOT_NEEDED="migration_not_needed",e.MIGRATION_NEEDED="migration_needed",e.MIGRATED="migrated",e))(eI||{}),eT=(e=>(e.NONE="NONE",e.ACCEPTED="ACCEPTED",e.STARTED_ONBOARDING="STARTED_ONBOARDING",e.ENABLED="ENABLED",e.DISABLED="DISABLED",e))(eT||{}),ev=(e=>(e.STUDENT_TEAM_NULL="not_student_team",e.STUDENT_TEAM_CURRENT="current_student_team",e.STUDENT_TEAM_EXPIRED="expired_student_team",e))(ev||{}),eS=(e=>(e.OK="ok",e.GRACE_PERIOD="grace_period",e.PAST_DUE="past_due",e.NO_MONTHLY_SUB_EDITOR_COUNT_EXCEEDED="no_monthly_sub_editor_count_exceeded",e.INCOMPLETE="incomplete",e))(eS||{});let ew=(0,a.fc)(eS);var eA=(e=>(e.MODEL_PREDICTION="model_prediction",e.USER_RECENTS_PREPENDED="user_recents_prepended",e.USER_RECENTS_POSTPENDED="user_recents_postpended",e))(eA||{}),eN=(e=>(e.UNVERIFIED="unverified",e.VERIFIED="verified",e.PENDING="pending",e.UNAVAILABLE="unavailable",e))(eN||{});let eC=(0,a.fc)(eN);var eL=(e=>(e.TEAM_ACCESS_VIEW="team_view",e.TEAM_ACCESS_EDIT="team_edit",e.TEAM_ACCESS_DISABLED="team_access_disabled",e))(eL||{}),eO=(e=>(e.VIEW="view",e.EDIT="edit",e))(eO||{});let eR=(0,a.fc)(eO);var eP=(e=>(e.LOCKED="locked",e.EDITORS_LIMITED="editors_limited",e.PROJECTS_LIMITED="projects_limited",e.FILES_LIMITED="files_limited",e.PROJECTS_LIMITED_LEGACY="projects_limited_legacy",e.FILES_LIMITED_LEGACY="files_limited_legacy",e.WHITEBOARD_FILES_LIMITED="whiteboard_files_limited",e.WHITEBOARD_FILES_LIMITED_BETA="whiteboard_files_limited_beta",e.SLIDE_FILES_LIMITED="slide_files_limited",e.SLIDE_FILES_LIMITED_BETA="slide_files_limited_beta",e))(eP||{});let eD=(0,a.fc)(eP);var ek=(e=>(e.STARTER="starter",e.FULL="full",e.RESTRICTED="restricted",e))(ek||{}),eM=(e=>(e.SEATS_MODEL_BILLING_2025="seats_model_billing_2025",e))(eM||{}),eF=(e=>(e.FOLDER="folder",e))(eF||{}),ex=(e=>(e.VERIFIED="verified",e.UNVERIFIED="unverified",e.BLOCKED="blocked",e))(ex||{}),eU=(e=>(e.CANVAS="canvas",e.PROTOTYPE="prototype",e.WHITEBOARD="whiteboard",e.LIBRARY="library",e.SLIDE_TEMPLATE="slide_template",e))(eU||{}),eB=(e=>(e.ADMIN="admin",e.MEMBER="member",e))(eB||{});let eV=(0,a.fc)(eB);var eG=(e=>(e.SELF_SELECTED="self",e.MOVED_BY_ADMIN="moved",e.AUTO_ASSIGNED="auto",e.SCIM_GROUP="scim_group",e))(eG||{});let eH=(0,a.fc)(eG)},279453:(e,r,n)=>{n.d(r,{$kt:()=>eo,AXx:()=>ts,AbW:()=>eq,Acj:()=>D,Aqu:()=>rS,BB3:()=>e3,BVX:()=>C,BXv:()=>y,B_E:()=>ru,BbB:()=>tp,Bu2:()=>e8,Ce_:()=>f,CfA:()=>P,CrP:()=>B,Csd:()=>e5,D2i:()=>ef,DSh:()=>rg,DtB:()=>r_,EW:()=>rx,EZU:()=>tv,Eb:()=>te,EmG:()=>re,FBc:()=>t1,FHz:()=>ee,FqP:()=>tB,Fr3:()=>e0,G0Y:()=>c,G9Z:()=>rH,GIl:()=>ep,GgD:()=>eN,GyZ:()=>rN,H1b:()=>rC,H2R:()=>J,H5I:()=>rA,HSg:()=>tV,HdA:()=>eT,ISl:()=>rW,IiJ:()=>tT,Ipg:()=>th,J2w:()=>eb,JJY:()=>tj,JKh:()=>eG,JM$:()=>ro,JS_:()=>rM,JgS:()=>tk,JkW:()=>ej,JuA:()=>tF,JvY:()=>eP,KLE:()=>N,KN$:()=>es,KiY:()=>tU,L1I:()=>eO,LD2:()=>ea,Lew:()=>tu,Lom:()=>rF,Lqr:()=>rT,M5e:()=>eC,M7X:()=>F,M9I:()=>m,M9q:()=>tL,N63:()=>ri,N8H:()=>rE,NI1:()=>tz,NLL:()=>R,NSA:()=>el,OCJ:()=>eE,OFA:()=>t$,OiG:()=>q,P0r:()=>U,P8Q:()=>eX,PG0:()=>eH,QD8:()=>em,QEv:()=>rO,QrR:()=>v,Ra2:()=>rD,RmP:()=>e$,SMQ:()=>ec,SWF:()=>tK,Sc8:()=>E,Sq1:()=>e6,Std:()=>tw,Stx:()=>eU,T0:()=>ra,TKM:()=>H,TNJ:()=>rb,Tej:()=>rP,Thl:()=>eQ,U8U:()=>tG,UAQ:()=>rs,UpR:()=>Z,V15:()=>t7,WKb:()=>rt,WND:()=>$,X$D:()=>rd,X9s:()=>rj,XGw:()=>er,XKS:()=>ry,XRH:()=>s,XRI:()=>ex,Xw7:()=>t4,Y9I:()=>tf,YOu:()=>eS,Yh6:()=>t2,Yrz:()=>eL,Z5M:()=>j,ZBn:()=>rr,ZzU:()=>ey,_iU:()=>T,aNI:()=>eM,aON:()=>rY,aQv:()=>tn,aRw:()=>e2,abL:()=>I,apG:()=>e1,bCq:()=>rG,bEy:()=>_,bUF:()=>rp,bUn:()=>rz,bel:()=>rv,bsh:()=>rU,c2_:()=>rc,cBJ:()=>eF,cQi:()=>eI,cfd:()=>t5,cmY:()=>rB,d0w:()=>ek,dA6:()=>eR,dDF:()=>eu,dTR:()=>ew,dq_:()=>tY,eHy:()=>k,eSI:()=>tZ,efs:()=>ta,ehp:()=>ty,epW:()=>eg,f19:()=>td,ftA:()=>x,fy7:()=>tl,gDr:()=>g,gk5:()=>tE,gkf:()=>e_,grH:()=>tg,hbX:()=>rm,hj8:()=>A,hjj:()=>tR,hqi:()=>d,i1D:()=>rK,iAs:()=>tt,iJD:()=>W,iL6:()=>rl,iQA:()=>e4,iY3:()=>eA,ib2:()=>ei,imP:()=>rk,jXq:()=>t_,jl4:()=>tA,jmg:()=>z,k$m:()=>eZ,kJx:()=>b,kQI:()=>rI,k_1:()=>tM,kdQ:()=>G,lrh:()=>rV,m0h:()=>eW,mCn:()=>ez,n8j:()=>eK,nD6:()=>p,nJE:()=>tN,nXJ:()=>tI,nn0:()=>eV,o27:()=>tr,o6H:()=>tq,o8f:()=>tO,o9Z:()=>ed,o9k:()=>tm,oBY:()=>ev,oGE:()=>tX,op7:()=>t8,oro:()=>M,pFu:()=>tJ,pKB:()=>w,pMp:()=>O,qBf:()=>K,qNg:()=>eY,qRE:()=>et,qYc:()=>t3,qZS:()=>eB,qjT:()=>Q,qn8:()=>rf,ruy:()=>h,rwE:()=>t9,s5h:()=>tS,s5n:()=>e9,sBg:()=>tH,sMZ:()=>rR,sMs:()=>eh,saW:()=>r$,sdp:()=>t6,sn$:()=>eJ,tIY:()=>tc,tWm:()=>Y,u3q:()=>tD,u6n:()=>ti,uXs:()=>e7,vE:()=>tQ,vgO:()=>X,vhY:()=>tP,vsj:()=>L,vtM:()=>tC,w2r:()=>tb,wZi:()=>en,wj_:()=>V,wtK:()=>u,x8f:()=>t0,yFE:()=>rh,yU5:()=>rw,y_L:()=>rL,yf7:()=>eD,yrH:()=>tW,z8m:()=>S,zkh:()=>to,zz3:()=>rn});var a=n(772841),i=n(394255);let o=new Set;function s(){return[...o]}function l(e,r,n){let s={_name:e,_argKeys:r,_hash:n,_data:null,_args:null};o.add(s);let l=null;return Object.assign(r=>({view:s,args:r,name:e,[a.rP]:void 0}),{...s,Query:(...e)=>(l||(l=(0,i.gc)(s)),l(...e)),_name:e})}let c=l("AccessibleFoldersV2",["orgId"],"9719a8277c1b644ee253ab1ecfdc1de3b59094dab93402f1e08675d9834b5b32"),d=l("ActiveFileUsersForFileView",["fileKey"],"5f1d95341891783b9628176ec323d3e47e0cecc92f5f55840722cecc727b5af6"),u=l("AddWorkspacePinnedFileView",["fileKey"],"9e4c5313c6e25ac1b88909fd8793f2a2ff0754c88f903b643ea7272beb0f5955"),m=l("AllowlistPluginsSectionView",["orgId"],"80441ad85857fedcebee9dcf2e5f8c6a8c38a6819352b7e9e9c16b42b04dabf1"),p=l("AppliedColorPaletteForFile",["fileKey"],"d7bb73a2b34fc6a8b262a0d3c6a14139aabe2f321f2198e9a8f64aaad1aaa3c3"),h=l("ApprovedLibrariesForOrgView",["orgId"],"86c216fb79dcfc9f41ec49ce29444c1c9cb39655e009cb588a8c68afba43aadb"),_=l("ApprovedLibrariesForOrgViewV2",["orgId"],"7a8eef2acda75d33309cfbfa9731228c4a9ea8dcd4a7eb4ea1f7309554ccd945"),g=l("ApprovedLibrariesForWorkspaceView",["workspaceId"],"fc76c577928b56705ad939877c7a6ac45121c2acc0180f16dc524454666ef2f2"),f=l("ApprovedLibrariesView",["workspaceId"],"c01ef8751391811d63ed49aab8a70c66a78532de852d58c820986536abecdb7c"),E=l("AutoRunPluginsView",["targetOrgId","targetUserId"],"fc89e7af16595f8972a32021ef9af977866c3f9518243670e308d9c9959a4114"),y=l("BillingTrialForResource",["resourceId","resourceType"],"eae7e0970266b809811d071443b722e7cd0bcea765f60ea9ac150d6c8983076a"),b=l("BlockingPrototypeData",["fileKey"],"38621d62e96faab0a1a844202aafcefd0798d38ff3bb76d1bc5ff12758922c2e"),I=l("BlockingUserState",[],"f156dee134b054963ffc5c9cb4b70eecc8779fbb2f3248d04dbae4c7a95ae28e"),T=l("BranchOpenMergeRequest",["branchFileKey"],"f8edbf534eda2e25b28944111acba2c4a4389bdabbe3317aad41c398fada7496"),v=l("BranchingPermissionsView",["fileKey"],"626a919494540f5057103b97474c87bce5baf396465b4b9457472d4845eae977"),S=l("BrowseTemplatesView",["currentOrgId"],"ace64503f7e7ab64486ebbba35dbde191c4a7771ffedaa84bf681954f3708f25"),w=l("CanGoToSourceAsset",["sourceFileKey"],"efd568b2f04ef549c7cc011801d442744741b49bd3ae2b9e9677079b907aef98"),A=l("ChurnFrictionPersonalizedModalView",["teamId"],"93f3a0916c256090428e71e69914e905858fff026f9d829047ac5c664826db9c"),N=l("CommunityHubLikeForProfile",["hubFileId","pluginId","profileId"],"0b2c5247975aa8bfb0f1b20240405ca5c36298ce51f868b46e4272567df5ba7c"),C=l("CommunityHubLikeForProfileFromResourceId",["profileId","resourceId"],"748e4041b2bb2e8ca623b94ff363617e2cdc9bf7ab64c77d58a89e6a74b21110"),L=l("CommunityLibraryComponentsAndStateGroups",["hubFileId"],"1025de35293602d9b5bc0d52f100c0cf619041354375810f9f421c1bd44b0e8b"),O=l("CommunityLibraryData",["hubFileId"],"da5373f9e2f4f4a46df6c93c35118c5a3880126d0ffcb526fede02f1156d0274"),R=l("CommunityLibraryModalAssetsData",["hubFileId"],"a67cc12d7a5409feb23c54d6050703a3414addc45fa5bba39f87d584ee5f5669"),P=l("CommunityLibraryModules",["hubFileId"],"2b82591429c7b065964339a15ca7657771761258816a4fe73de1e3e959e149a4"),D=l("CommunityLibraryStyleData",["hubFileId"],"5bae87f1b7658183946477d2d400ad6eefda9bf9933412630577b7347464ffde"),k=l("CommunityLibraryVariableCollectionDataWithVariables",["hubFileId"],"980680b3d4fe4284e9e62dafda4a105609aa17eaade134c91b1410d1e273d5c1"),M=l("CommunityPayment",["monetizedResourceMetadataId"],"0fc7e090505e4843be46ef517e18e051b23d36baebf2d6a9f90897b1e630fbcb"),F=l("CommunityPaymentsForRealtimeShim",[],"a02491b1f62c14f6c9e08fa74bf1fc03a9c2aae2a73cfca70b93dfa841d38bc4"),x=l("ComponentAttribution",["key"],"ed1272a51b3a21d2a7c8e394378c34db65cc9d6929f9174c9f9740b218de4b06"),U=l("ComponentUpdatesForFile",["fileKey"],"39aee058abbd5831fc44ade3c934deb6cef6b376f64bb5a3a4bb8c8c7596615f"),B=l("ComponentUpdatesForProject",["projectId"],"b4c2e4abea199f8d1c0d681a4a648e6c70c42cd356e98d3f5c644e007c2043c9"),V=l("ComponentUpdatesForTeam",["teamId"],"3014eb9858ae4d9b74952c17e33652f40d63c2f9cfca1bbce93a87415f9a984c"),G=l("ConfiguredUpgradeRequestModalView",["orgId","permission"],"ea3dcbd91ea890663c32046eba68800684041788311cbfda90d9132bf5fd5b42"),H=l("CurrentUserAssignedWorkspaceView",["orgId"],"728344fed7184255d8ebdfc4a58a2d0cb7c8f2e5e6a6ba163c3c6314bde44891"),W=l("CurrentWorkspaceView",["fileKey"],"b37ca03df4ca9a6b339690368ea9b85fb1b4fa8d6a7624a425b8d47d45da4f74"),K=l("DeleteWorkspacePinnedFileView",["pinnedFileId"],"400c688509ba6b5ce2cbe75bdd4f838b35f7c0b2b1219f347c559dd5b0439fdc"),Y=l("DestinationProjectsForTeam",["teamId"],"ea9f02e79eb81f5e6b7afa75932e59879fdd1e73b6597349ebafa95e8debb9e3"),$=l("DevModeActivity",["fileKey","nodeId"],"dbda44daa61bcff2c66b8956f51a3f2840847d268d0ef0b1020033db82bf68a6"),j=l("DevModeOptIn",["orgId"],"61d5df4716cb044bf5ff0c875b69f90e807db6d988bf8202e1cdc9d9113a19bb"),z=l("DeviceTryFileView",["fileKey"],"57262db6a4c99d03c727ef6e8a734ac28b5bc6fb68fcf7f7134381d122629cdc"),q=l("EditButtonView",["fileKey","orgId"],"90127e61e449869ced30ec951990d7922bf558c599d60e58c4f0553ab4b3d6d0"),X=l("EditWorkspacePinnedFileView",["pinnedFileId"],"fbb08d9925c6d89eda26ac07966be2da8ab92ce104682765c244b75c6559ac28"),J=l("EduGracePeriodsForUser",["updatedAtTimestamp"],"e3ca89452e79c6af703cb3cac17d31d0f9ed3b4518a8c495f1e47ea0ca4ce9d7"),Z=l("EduOffboardingData",[],"0158a27ab01fe1c83646bf0b7a2e6fdd43d68a852172299c3bf040300d2bca41"),Q=l("FavoritesByResourceId",["orgId","resourceId","resourceType","teamId"],"aa3e6368d181cc22bf9804f687ed0aa7160e94b401a8bf354cff60d1b1dc7cdd"),ee=l("FeedPostWithDetails",["publicUuid"],"a3fef5ec20b23ae2042dd159610d48be92741843e2bdc6cb12018152d00d16fb"),et=l("FeedPostsByFileKey",["fileKey"],"bc5f7ce9b6b8037a77563f57e0ac3110cfebf1e4cef5c8c119b739361a47f794"),er=l("FileAccountTypeRequest",["key"],"793dbbdda27e844e4ba0d1ba1e96e9cca78359ff5ae35fe241cabd7321650357"),en=l("FileBrowserRecentFilesView",[],"a7c3b4c9897b72e620b036f5b0504b22008b15be2d832f4c013b2bc97256b562"),ea=l("FileBrowserRecentFilesViewTmp",[],"a32e6a5d5468741635b228e933febff98134f960dd1a706a177b1775bdb446aa"),ei=l("FileBrowserSearchBarData",["currentOrgId"],"38ed175c128f4f8f5bf24a9edee93e58cd7403b18b3def89b85d87194ab2a6f0"),eo=l("FileBrowserSidebarData",["currentOrgId","currentTeamId"],"a178c74277375dff41570f967a7c178d27b3f54e0273f1a57698ce887d8f26f4"),es=l("FileBrowserSuggestedFilesView",[],"23ab37635e4180f05ca8f9252d1e6a541fbb4544b91955f2b0183f2bacb90175"),el=l("FileByKey",["fileKey"],"dc9f5c16fe652e3a08f7604ff7aca00782b52dca815f23099857f457656b47ac"),ec=l("FileByKeyForRealtimeShim",["fileKey"],"96682bad4a9d67e23784a0785860156f3466d0d8196235a7f14ebc7d4bd8c274"),ed=l("FileCanDiscover",["key"],"96e068ce8e3e91adb6ada99a23086bf39f17fbaf10c44448399f9f80a4c05162"),eu=l("FileCanEdit",["key"],"94cee8957063f301090ae45312a44a680028710d425c00134f19942e8ce38132"),em=l("FileCanManage",["key"],"246283961e7960c7be7bd6b654da8751e5b6ddd3c2162ec7ebe71e76dd5ca8f0"),ep=l("FileCanUseFigmaAi",["key"],"ea57dc893d02b5bfce6bba6572e5e8e68d19cfdad24d85302ae908d735cb7f2d"),eh=l("FileCanView",["key"],"914a954cda6128d4674d9717321742ee20290965e07c1887735178445097b0c9"),e_=l("FileCanvasMentionsByFileKey",["fileKey"],"08dde0f2074d269d13bef69135cfe0c6b7411282250ef00632a71679e548ead9"),eg=l("FileContext",["fileKey"],"8cc187b44b38fec43bdb46aa20835e670a620079611851c36642b9410213edc5"),ef=l("FileDevModeTrialRequestPending",["key"],"a5c61b0921141adc71048c1cda3bfa5a4eac655f267c39ba90883c66c3a71be0"),eE=l("FileEditRequestExistence",["fileKey"],"55b97a4e6d343306b9e53426dd411854cb998677ff56f3733553024d41bc28cd"),ey=l("FileExpirationView",["figFileKey"],"63f1f8b76ce0bf7092a474a9eb29db91e07f6414d0307424f2134a55e9b5767a"),eb=l("FileFeaturesEnabled",["fileKey"],"3e849cdd44aa88387c5f239dff61de34b50b1a524cbfd9b4c80ab5cd6dfb95fe"),eI=l("FileImport",["projectId"],"f6c6af4d4a7fb13f3b1842bcc703369552d5ddaec4fc7d572fd2b61a2bc67189"),eT=l("FileIsEligibleForDevModeTrial",["key"],"e287b51d6c2ad609915b2a150ae66ae8683f74674ed4578eaa159e6f578295c5"),ev=l("FileIsInDevModeTrial",["key"],"9c47d409f80c094280e94dd6ad27a4042b055e81b8ab9dec1e61f5f0fcce4a29"),eS=l("FileLastPublishedAt",["fileKey"],"9782734a5bbde893436055cfe9023d3fbcf2b011bd220dcce88e8439724dae61"),ew=l("FileManagePermission",["fileKey"],"267d6ad8ec4d4394aa92f0d7013ca42d5a2f85e33a907eba56356b5bc7c615af"),eA=l("FileNameViewDropdown",["branchFileKey"],"7fab62a7b61e27abc1bb8d1639d2525320ac7fad8af15d620747bbffc7d5fc13"),eN=l("FileNameViewRepoFiles",["repoId"],"b7027e0a80b4b9349ad978ce7eae759ebe7d490a55595dbf2aeefba2f179ad81"),eC=l("FileOperationsView",["fileKey"],"1804b2cde41f2c769e960f2bf7b9ff908ad05dfd6c9d28c90e4181fd2523064c"),eL=l("FileOrgExtensionSettingsView",["fileKey"],"8f268a3c9b6d35cca60e3275a2585672dabfccb3f7e1e09b3e0503a40a0f4ea2"),eO=l("FilePermissionsV2",["currentOrgId","fileKey","projectId","repoId","teamId"],"f210d533a16ac59e72a0b5211285a35b53ea7469bf66c6c60e2fb6d63a3365cb"),eR=l("FilePresenterData",["fileKey"],"0508e03c1064490b32dd1ef8d46d6c4fb0666684e8ede6c521a9b93e105b789a"),eP=l("FileRecentViewers",["fileKey"],"beffbee5cb41f1af7a6a6675342c7d0a186d674302f4361eee60cadf19936f7f"),eD=l("FileSearchResult",["projectId"],"7aec367ec7d989f848385aa24d88615661b904010261788704b616a78ebad9d6"),ek=l("FileShareModalCurrentUserPermissions",["fileKey"],"2b7c499ad38668ef23e6a577e92e5620a7ab57dd97db9a0e2d970aa2778b5cc5"),eM=l("FileShareModalPermissionsV3",["currentOrgId","fileKey","projectId","repoId","teamId"],"b6ec9f6bcc284e3daffb40e86db30329a33e618b22fe3f8943b5624f3bc43399"),eF=l("FileTemplateView",["fileKey"],"07af256a60fd0adcd20542e38051ae1f3f25a2182e1aef4328379f740dda7af7"),ex=l("FileTilePermissions",["fileKey"],"16e1042c05b100724a4456f1b6605a322bbfbc62b9bb2b24f083174a0e742104"),eU=l("FileVersions",["fileKey"],"aacbe606bf273c220e724b1ce7ec3fd780bb54542e8145d53ca721272f8e4465"),eB=l("FileWithCommentsAndReactions",["fileKey"],"320b98f9f7600fd901be2b9f44216c16660a2dbb22095278f44399f934e7cd5b"),eV=l("FileWithRoleRequests",["fileKey"],"90cffea1776cfa15881b4478aa311df28f8cf5692108cff7e7ebfe86b609445d"),eG=l("FileWorkshopMode",["fileKey"],"8e1a7b5f2c1eee980cebed68b2d38c1bf666c1f4185a414780d92a7d2a8deb50"),eH=l("FileWorkspacePinActionsView",["fileKey","orgId"],"ff1ee6ad5ffa76cdf66fdcf6239d4c3ece0c30e17159a2a939cd3529d1c58e55"),eW=l("FilesForProject",["projectId","updatedAtTimestamp"],"f73b349d1d5a7b04dc697bd894c11aaacf5c31bf48c08dbaa537e4ce4f8681f1"),eK=l("FilesForRepo",["repoId"],"a0d73a52ef398d7392a528f3bf8d6ef819b117c435fcb26b18fd1395cd6ba1b2"),eY=l("FilesForTeam",["teamId","updatedAtTimestamp"],"da9a9ae890c72ce524994c0377ffe4e663f93463472c6d2aae6d776b41ddc7c6"),e$=l("FolderCanCreateDesignFile",["id"],"e8f7503f972e1a56b3c8b525e17dae850c4c4bb85ef8d41526b7d04c1b690bb8"),ej=l("FolderCanCreateFigjamFile",["id"],"2b2414f681528cb92ec6370a5837d6fb3f9135acef044da93fcbf89cf8b690f0"),ez=l("FolderCreation",["teamId"],"cdae9f5ee3529d3a9af4dc89c36508707fbb8d82de41beff1c239c595da4c697"),eq=l("FolderMoveModalView",["currentOrgId","currentTeamId"],"77d5d59f25c4f134083f70601aff085fc0b4dc73d21e7f9bc1ef07b6af27e2c8"),eX=l("FolderPermissions",["currentOrgId","projectId"],"e21f3715ed355491f775052622b2cd1457f8fd849adba23a4701c7547f5243a5"),eJ=l("FolderSearchResult",["teamId"],"1c275c6f099475f4d0b36826c52c718fe51bd3d6c4f0744d4e03ed5c2cd6d9ce"),eZ=l("FontFileForOrgView",["orgId","updatedAtTimestamp"],"96df795c6f2b5c24fd35fdf938cbffaa6daa15858c8e08e1de28d99f0293787e"),eQ=l("FontFileForTeamView",["teamId","updatedAtTimestamp"],"f45907b6cab5229de747fa0f0e33269c6eafa7af8c97988d977b20b72e1ff19b"),e0=l("FrecencyHistoryView",[],"e3324951a552925847fc51cdaab9bd476cd70549ae51403db8e38fb0c2dc2813"),e1=l("GraftingUpdateSloData",["id"],"c74dd09f5501c9e038bfbe10638bb1f787f79b3cd99ac63ea64aa2051aeadae6"),e2=l("IdpUserView",["orgId"],"820f760218c7943e3eb7ebd45f16a3e1767665d33eeae2542c873aae73a4d8dc"),e3=l("InstalledPlugins",["orgId"],"9b50f9e18626564c831404d24d65a3671e9b05c2a1b392bd73deaf2a55b0d96a"),e6=l("LibrariesViewFilterStatesView",["orgId"],"ffd0230e3004653afc81053bf43a98054b88ef978ab6d7121a1a5a52648c2ade"),e5=l("LibraryAssetData",["libraryKey"],"f17978a705195fd06d8b47a55c7cb718ef49d67440eb4cad09267007683f6dd7"),e8=l("LibraryAssetDataOfType",["assetType","libraryKey"],"3bf3bd26c2b3f375c7707ee178feaa2cd31f899e7e7643facb13f9e22bca14de"),e4=l("LibraryComponentDataByLibraryKey",["libraryKey"],"cb950b657c2498dcce1b27b3959222e1e6648df960170fc8452abe05994782db"),e9=l("LibraryData",["fileKey"],"5d782f81bacbc39479a02e41e929cb453465bc98dd47068d24d649f021758f84"),e7=l("LibraryFileSelect",["projectId"],"2efc1533087a59d375256eb54a80d19b4810c3c1e690bd43de7eb1a50885344e"),te=l("LibraryInfo",["libraryKey"],"421a615f50d103e8bf1cbd71e73ba8f87ce3b8ef49db37a6046979288f532fd9"),tt=l("LibraryKeyToFileLink",["libraryKey"],"f019896bcb374f7c9ec24d91a60c1458f239612d747a12048e598f8eef380509"),tr=l("LibraryMetadataByLibraryKey",["libraryKey"],"22609fe82b8fdaf0a58d09eedf253c25332a5e2565f3d02f9be1e8abdf486cc8"),tn=l("LibraryModalAssetsData",["fileKey"],"83334c18f43f15d9060dfc0f19111fa474c2537f1745168a3b7bfe5fbf9a4032"),ta=l("LibraryModalVariablesData",["fileKey"],"2cc6bd48c20cb3a6b77c129fc99843877001877e27fb7937a2cae8cfd339b3d9"),ti=l("LibraryModuleData",["fileKey"],"1ff19bbb55657f0badbd04812be99149b34f7bac8200b422526703ac0af47eec"),to=l("LibraryModuleDataByLibraryKey",["libraryKey"],"b4a06ae788652824e9e96c6fe9fa730603169b8ab32b8b3448c81217c6218d3f"),ts=l("LibraryOrgSubscriptions",["orgId"],"fc756228f3eedfb155c0727a4482e35033e06035b31f5ad34bcc4b973b4e994c"),tl=l("LibraryPresetSubscriptionsV2",["group"],"f20f6eab48db105cffdd57c5d7093c23d0df93d047bd37c238dbb2a7bc30a44e"),tc=l("LibraryStyleData",["fileKey"],"d584c67731d73bb29706e1125e08b042519107a56b8918af2e54f7fc0d2f8f68"),td=l("LibraryTeamSubscriptions",[],"8c71cd9b1698bd408c22e50a34e06898161ee7e8767a5ea2c0c43bf9e4b41c75"),tu=l("LibraryUserSubscriptions",[],"0b763c1a28a17a498c836161815bc63425a01a24156ede34a3e10ff566cef857"),tm=l("LibraryVariableCollectionData",["fileKey"],"2e37eca2190d61e3cebbf599aa7a2ce92812394b5583915753c740965db2af78"),tp=l("LibraryVariableCollectionDataByLibraryKey",["libraryKey"],"a86878552241f799b448ff3374bbab645cf80bef997dc3ed09dae4a775d0eb9d"),th=l("LibraryVariableCollectionDataByLibraryKeyWithVariables",["libraryKey"],"df7cabf302409b860cb65072190d5bfd75978c88cc4a66f81c66591a2e1bbaa0"),t_=l("LibraryVariableCollectionDataWithVariables",["fileKey"],"ec5e283ef090bbe1521b37f2fde6921019dfa0c807f68b9dc801cea07cb96f7d"),tg=l("MergeStatusRepoFiles",["repoId"],"ba665e0010cb72c441175650656e9dfd4530a6e8e23e66362bf5de93976adc6c"),tf=l("MoveFileCurrentProject",["projectId"],"119018c5f6064fb75365bbb32f9a97357ac2c1705f07c731c1a1ae93f8c2a773"),tE=l("MoveFileDestination",["projectId"],"49be001c53cdd25baabd9177941d7eaab679840b54c596ca48aac4c894907e8d"),ty=l("OpenEditorFileData",["fileKey"],"f8fa4d14313194faa50f188858950d77c24e24307e4798bed8f1542350a276f2"),tb=l("OrgAdminUserView",["firstPageSize","orgId","queryParams","refetchToken"],"c84c9e7dc0fd13ce804aee1943da70990535c14db23745a338b61ace7e8fc382"),tI=l("OrgByIdForPlanUserView",["orgId"],"3f237e700bec8d5e020f77331b74555ec3df334e91e837c231037c338363d2c3"),tT=l("OrgByIdForPlanView",["orgId"],"036acf82a80e10419378be264e235d88858b2066b2b7bc4cfc1a6e86459fdfe2"),tv=l("OrgByIdForRealtimeShim",["orgId"],"45b44af1d000c72e420faa1f55de3950ea8ccd099c4d0aa3657e53aa60dc3a3a"),tS=l("OrgHasWorkspacesView",["orgId"],"04a21fd542b7ee3ef85f0a3c726075db2de4b464fb727c10032948d303c867d7"),tw=l("OrgJoinRequestExistence",["orgId"],"b5a651cbe35528ced6f03c9517a92b337f71e1d197f43441754b582162cf41c9"),tA=l("OrgTeamView",["extraTeamIds","firstPageSize","orgId","queryParams"],"cce8d8f07403ee25c821b53a0e4de166eb2bf53814a422cad419a3232f4fe4b0"),tN=l("OrgUpgradeRequestView",["orgId"],"c150d9228e809b0fd949c7e748e944cb2ee56cc6ccf1e3cfb014b637afed9aee"),tC=l("OrgUserDraftFolder",["orgId"],"c3abaf4a916fc700e5019ce8f048e4bb26b0d816ae3edfac7d8e501c34557823"),tL=l("OrgUserIsMfaRestrictedView",["orgId"],"62148fbd76d84f31f79df24bee08b60eb7439f20a71c6f8e438d4525caccdd9f"),tO=l("OrgUsersForRealtimeShim",[],"94ff2f2c624d8a54178c2bc0fad30e818a6ceea62866999c7ee230e8e26634da"),tR=l("PaginatedTemplatesByTeam",["editorType","firstPageSize","teamId"],"7b7c0d9306d0e5827f259e0d9cb137f2f6642a3b5741d42570d3ec55a31ee054"),tP=l("PendingAssetTransferRequestByResource",["folderId"],"cbf88519e7dfa823ab57fffc4b998ec635dc6e8f86cf86f053677043a34b67f3"),tD=l("PendingUserMentionByCommentView",["fileCommentId"],"98448f91af1f453b5b6734a0b5e8618acc07797291f479b99596c129d9a6edb9"),tk=l("PersistentUserNotificationBellData",[],"cd2c7714ef7cf543b28cb30b1774addabb15fdb8a6a1fc8fc864dd8f652ec67a"),tM=l("Plugin",["orgId","pluginId"],"e44a7d99e88ba0db4dabb24a2e274ddf81c49685b0924f4c714972d0a3432d00"),tF=l("PluginPreferencesView",["targetOrgId","targetUserId"],"33215b7caec97ed8df56998e236ebcc69f3d74e6117ee1c506775ec26de4ba78"),tU=l("PluginRequests",["orgId"],"454d04a089fae11ffe0a34d1912f610c3e449689c4c5479b4bbb0f34a75926d9"),tB=l("PluginSecurityFormResponse",["pluginId"],"ed6f9188040a98a2c1f2bf4010ff7559a4d6e6e0aec6449fd736e89f5256b763"),tV=l("PluginUpdatesForOrg",["orgId","updatedAtTimestamp"],"97f51ca7f7de806b407bc5e59cde7b601858fc18c8e3f11ff0e789d8db0cb5a8"),tG=l("PresetsDisabledView",["orgId","teamId"],"a09600f75f3368aec7e4d72abeac29662d75ca5211ca553f2bf747572cae228d"),tH=l("ProRequestUpgradeModalData",["teamId"],"50be44e91a9140285877ee5a5dbd2de4d02855331c1018e3048cac21afecf80f"),tW=l("ProTeamPaidStatusUserData",[],"85434a3b95848ce05e1009a22b6b7782d345224e45a04304bab3bbb94159d362"),tK=l("ProjectByIdForFolderSettings",["projectId"],"07930fb5ed6ff553bbb9765cd35440710a66bd4c5015d621ecd91f59280ea109"),tY=l("ProjectByIdForRealtimeShim",["projectId"],"f944680b6c28e7b0da4d55dd3f5caf76e9646fd47fc9e456958465c115b79ef5"),t$=l("ProjectCanCreateFile",["id"],"48cd9a0f3cae70b4519dfee12e3c4e6373f7d49c326691784d9f0307a5c99a0b"),tj=l("ProjectFileCount",["projectId"],"732fc307d17f77dcfae14da31f010ca424e0b00693ed9ceeaea49c58737e79f9"),tz=l("ProjectNameById",["projectId"],"ee3151bba9ee23d85613bced28494720eab6754082b94067c5ed62a666aa466d"),tq=l("ProjectNameForFile",["fileKey"],"57e4beaa1055ad81abd1721b24069467dc8cf818c6f7c2da569f151a64e7911a"),tX=l("ProjectTilePermissions",["projectId"],"98d11cbce5465239f87c8891d3f608c3c2e9c24dcf32250209ab67513c426f58"),tJ=l("ProjectsForTeam",["teamId"],"de767181d97beed84323939e47ae56b528561dce93a2e23febd43e997a7a8728"),tZ=l("PrototypeCanView",["prototypeId"],"020a4c68229e4d6434ea0875f966c6516845141d7edd61c5599279491e62ab80"),tQ=l("PrototypeTilePermissions",["prototypeId"],"977169b7f1e74b6a39209b07d77356440fe1425c9f181465b6b94ab06d8cd6f3"),t0=l("PublishUpsellTeamRoles",[],"61829dfc33b233a837b54c3461244f810dd29c97777d2c97e7b0635e0c793225"),t1=l("PublishedHubFileForFile",["fileKey"],"f9f10ce599aba8aaacc0cce749b581ca37973d3564a97a2bde57c1d5880897ea"),t2=l("PublishingModalView",["fileKey"],"26af199a77b18e0b7cce081d274a5cb0a7c39eabbc2b9a95ada762824b088840"),t3=l("RepoByIdForRealtimeShim",["repoId"],"15d9984a198b456e92e383624bd7006828b69980be255c539a4842104b5dd221"),t6=l("RepoCanMove",["id"],"93235f9bcf370a5cda86e6eb7cf3385b6c44639277789817045cbeff655a4c29"),t5=l("RepoCanView",["repoId"],"6c27c5d96e6e8e69a9a89db3e1afbf542685b6089c0aeceb04b258b7013f06f4"),t8=l("RepoFiles",["repoId"],"d9d84f09afe2dc952e07fdc661469d6cdf0cecca0d1caa6abeba5009bea5d3e3"),t4=l("RepoReviewerSuggestions",["repoId"],"94185a7fa65e3202424dc7fae7baa0a30927a7e2bae962b3821466ec9b597443"),t9=l("RepoTilePermissions",["repoId"],"089ccd9328d010393a08c592c836606d3202b848274ad2cf67b58e44d037c33b"),t7=l("ReposForFile",["fileKey"],"cd5aaa0045ebbb83512090df5cdc1797efcc0da19648e16a95e550cbdce95e7d"),re=l("ReposForProject",["folderId","updatedAtTimestamp"],"8633cc9357adf7d07c900c8ec5b781985460d010c9bb626be838c52e6ad1818e"),rt=l("ReposForTeam",["teamId","updatedAtTimestamp"],"f203f31bfc1a8cc456dcf68faf64e47ec3ac388ff7188b861e23d4d71e42d0e6"),rr=l("ResolvedComments",["fileKey"],"7b5ece4b590e0ceeb80a1dcd7a7bba3427da3ab5e5c56e469d8d213acd73ccab"),rn=l("RoleUpdatesForTeam",["teamId","updatedAtTimestamp"],"d0f401cc590b30c148f84c8df7c07a19dd9184547c4b47e750917a424122fca4"),ra=l("RoleUpdatesForUser",["updatedAtTimestamp"],"a73dbbc5ea1dbd06f7a583a31f6e897e79e1dd72d398530c30d2ad0bc97614dd"),ri=l("SearchFilterWorkspaceView",["orgId"],"130ec2bbc72113b8e1233d4a0abd1896574662972483dee3600bdf6a98524b62"),ro=l("SharedFontsModalOrgPermissions",["orgId"],"da9e724b9db2afa222dd079726861da793b44b08a5801fd1d7a780953a67447b"),rs=l("SharedFontsModalTeamPermissions",["teamId"],"4c09f410789665bd8657582291dadb309a0a3504d1090c3e117ab159c4683b7e"),rl=l("StateGroupAttribution",["key"],"27b016f8c329237c21ecda9585d660462fcc25fe6cf48287100dd6e5ee80761c"),rc=l("StateGroupUpdatesForFile",["fileKey"],"955039be3b00b8ff0c9a9044e7e63a467bf20aa3e41906e4136034e194cd197e"),rd=l("StateGroupUpdatesForProject",["projectId"],"350afa3757695c27414c8cc7bb2e40a9fafa17bfe9403b43188578f611912500"),ru=l("StateGroupUpdatesForTeam",["teamId"],"7f265fa0c2d368ca4b2580969a25117dd218fa853f9e1d99219bddf7ac67e208"),rm=l("StatsigTeamsOrderView",["currentOrgId"],"75513768b3c4f5dd170727d4cb2c746a34fccc6cbcf648c0cb937c740905618b"),rp=l("StyleAttribution",["key"],"da54a71323b1cd8e0d95c0c38ee76d928d5c44ff6a4c27632a3fd776ed6cdc84"),rh=l("StyleByKey",["key","openFileKey"],"9fca28d73be9c6104a34aaefa126ced59feeb78c72bcb596a109dcb8fb7a54ec"),r_=l("SubscribedLibrariesForFile",["fileKey","group","orgId","teamId","workspaceId"],"ec6b1e27ddfb2bd9bdc67c48b85af113e72023fc5c735fe20c86e5cc75ff9229"),rg=l("SubscriptionUpdateSloData",["id"],"6045b83d38bf38732a0efc83edc2666a35d0c8896c9cc8202bbe2a2895613563"),rf=l("TeamByIdForPlanUserView",["teamId"],"f39b43bea9a753c06167d221b76b8810f53aeb1b63eb489445fe98a6c440a5eb"),rE=l("TeamByIdForPlanView",["teamId"],"d614cad523b8c684b01342c6372b8dc69f14f3444e6240518b6469e7471afc9d"),ry=l("TeamByIdForRealtimeShim",["teamId"],"d2957a96a4dd6ce1077c1120cbf5bc5c624b68b9396a8ecb97db37baa0b154d9"),rb=l("TeamCanAdmin",["id"],"3e3501a7890c3d45c1d389d7facabebd9097ecb4ebedd019234797b5830ec048"),rI=l("TeamCanEdit",["id"],"647fb718fd02308dc586e1890f72734bf8943c769c83c39c1a0580282141d643"),rT=l("TeamCreationWorkspaceView",["orgId"],"4b495734c8ea0051ea5f3be97a956bbbea6619fc09a3409daffd50fa9c0d7023"),rv=l("TeamFileCountsByTeamId",["teamId"],"057bf801d17aa54f27a4c03ef1bcf79081fc24a12011e3a389ee2dd771846808"),rS=l("TeamFileLimitsInfo",["teamId"],"f845019ad5801fc7c1615e90af00eca250ab4833d41353c27c0083037f80d8b3"),rw=l("TeamFileLimitsInfoByProject",["projectId"],"0576e28b1614ed2868b1fe15dc584bfdad6ceac10bcdfd8dd2dd01a28b055f88"),rA=l("TeamOrphanedStatus",["teamId"],"c00352425f1fa323b0123bce3a7bd32c3fd1b4570013079c6a9b71a9f666f3ca"),rN=l("TeamPermissions",["teamId"],"5e2d5afe94e30fe1d14d76607831c5d84fa2cdfd09c3252f3fbcfdfe90143ffe"),rC=l("TeamRoles",["teamId"],"9819fcc572ef708f6253a07f96e440fe5a186b71766f2524192c51720aad06d7"),rL=l("TeamTilePermissions",["teamId"],"c722850f6e18857a80a2aa359f468725d35d86c9a376cc4a86e5545c62d89f0f"),rO=l("UserColorProfilePreferenceView",[],"216d0bed6c38dd4b9d6b5287c2398707f4b0513ada63f2fb0e62d6dc7d7c31a4"),rR=l("UserFlagByName",["name"],"cd42816fa66bc64de2dd9d1061495a885f71420bf68f6d0ade675cb082524f9d"),rP=l("UserForRcs",[],"ff9d6426f634aaad009c5aa67f5244bb05df6a1ac0efc21ed891c1303ae2d270"),rD=l("UserForRealtimeShim",[],"b1647159352134efef89e62372d3121349ec88dfad18563638157512f25d7034"),rk=l("UserPreferences",[],"4311d14222ff5a5342d3f531970281a90be090b7377c82826faa3dfa19bb8cee"),rM=l("UserTeamRoleRequestView",["updatedAtTimestamp"],"df21a854e805d7cbdb51e72eeefacfc6f7de0620e3f26242a5ede5e9aac8e750"),rF=l("VariableByKey",["key"],"5d779d98fcaece2af72cd5b8978adc4c512ebb13fb6078588c6bddcb37391f33"),rx=l("VariableCollectionAttribution",["key"],"5d401ee0e4d543c4ba8f4d9a0ec146a71f37b81887aa5282a93f88062466e2a8"),rU=l("VariableCollectionByKey",["key"],"6ba842fcc5d08769dea5f86ba00beacdc8cb2f3ebe759e1f288f67478e5df696"),rB=l("VariablesByVariableCollectionKey",["variableCollectionKey"],"baeaa6b48e5aa069c1fc8c752531102f7f21dee8a1800ca8fbf320a40f49b990"),rV=l("ViewerRestrictedDraftAccessLog",["fileKey","orgId","teamId"],"2edc48e717c6a97a0d412304f1e6fd64d8c76d3d426315ca05fe061789295636"),rG=l("WalkthroughMediaByFileKey",["fileKey"],"b0ff9031e4e5c2f7b005a99136a4083cd162342034f0be9b43da592a0fcd334f"),rH=l("WhitelistedPluginsForOrg",["orgId"],"8b12c1fda1b3d9919eddd625f78dd71b6e535c117bc48a086fcec9d089c4d4e4"),rW=l("WidgetUpdatesForOrg",["orgId","updatedAtTimestamp"],"526fd868484123016456ee7d0d494085f06676d26db4d6dbe2e94584f3a074e2"),rK=l("WorkspaceModalPluginRequests",["orgId"],"58f1c2b1c207cc030538bd134a593b0dd005064421d73d4b233e4ca6b39fe66e"),rY=l("WorkspacePageView",["orgId","workspaceId"],"41b48e9661239a19ff1b5c7f751344fd26243e106ce902a17f53769e4a3b3469"),r$=l("WorkspaceSelectorView",["orgId"],"319a12402ff14f049daaafe978f74ac04d5bfe465f6edd86807d88db4c337d0e"),rj=l("WorkspaceSubscribedLibrariesForTeam",["teamId"],"ed9dd271fe6e8012750d6f454edb506a18b052cc600e124df4413d8f1e8c831e"),rz=l("WorkspacesDirectoryView",["orgId"],"cdd0baaa07d5cb8e908e57241109feb0804fd1abac1463a790f0ba7b914ffc1b")},623746:(e,r,n)=>{n.d(r,{Bp:()=>Y,GA:()=>V,J4:()=>H,KC:()=>x,Nl:()=>j,Ns:()=>y,Qp:()=>M,SS:()=>F,TP:()=>T,Td:()=>$,U5:()=>O,U7:()=>P,Um:()=>A,V1:()=>E,WP:()=>L,WW:()=>I,YN:()=>X,YT:()=>C,ZW:()=>R,Zt:()=>q,aU:()=>N,aX:()=>U,cE:()=>G,ge:()=>S,k9:()=>w,uW:()=>W,vy:()=>z,yT:()=>v});var a=n(67151),i=n(388393),o=n(299321),s=n(880934),l=n(259120),c=n(378195),d=n(66562),u=n(966712),m=n(96328),p=n(154483),h=n(99506),_=n(173454),g=n(279702),f=n(666068);function E(e,r){if(null===e)return null;let n={};for(let r in e)n[(0,m._5)(r)]=e[r];return Object.assign(n,r||{})}function y(e,r){let n={};return(e.link_access&&(n.linkAccess=e.link_access),"proto_link_access"in e&&(n.protoLinkAccess=e.proto_link_access),"has_file_link_password"in e&&(n.hasFileLinkPassword=e.has_file_link_password),"has_proto_link_password"in e&&(n.hasProtoLinkPassword=e.has_proto_link_password),"org_audience"in e&&(n.orgAudience=e.org_audience),"org_browsable"in e&&(n.orgBrowsable=e.org_browsable),"viewer_export_restricted"in e&&(n.viewerExportRestrictedAt=e.viewer_export_restricted?new Date:null),e.name&&(n._name=e.name),n&&r)?{File:{[r]:n}}:null}let b=e=>{let r={};return(e.link_access&&(r.linkAccess=e.link_access),"proto_link_access"in e&&(r.protoLinkAccess=e.proto_link_access),"org_audience"in e&&(r.orgAudience=e.org_audience),"org_browsable"in e&&(r.orgBrowsable=e.org_browsable),e.name&&(r.name=e.name),r&&e.id)?{Repo:{[e.id]:r}}:null};function I(e){if(!e.id)return null;let r=b(e);return r?(e.default_file_key&&Object.assign(r,y(e,e.default_file_key)),r):null}function T(e,r,n){let a=void 0!==e.default_file_key?e.default_file_key:e.key;return a&&"optimistic"===r&&e.expires_at?{FigFileLinkExpirationConfig:{[`optimistic-id-${a}`]:{figFileKey:a,expiresAt:new Date(e.expires_at),accessReverted:!1,updatedAt:new Date,prevPrivateLinkAccess:h.PQ.ORG_VIEW,prevPrivateProtoLinkAccess:null,prevOrgBrowsable:null,setByUserId:n?.id||null,setByUser:n}}}:null}function v(e,r,n){let a=e.link_access===h.PQ.VIEW||e.link_access===h.PQ.EDIT||e.proto_link_access===h.Pu.VIEW;return r&&"optimistic"!==r&&(!a||"expires_at"in e)?{FigFileLinkExpirationConfig:{[r]:{expiresAt:e.expires_at?new Date(e.expires_at):null,accessReverted:!e.expires_at,setByUserId:n?.id||null,setByUser:n}}}:null}function S(e){return{key:e.key,name:e.name,file_repo_id:e.file_repo_id,source_file_key:e.source_file_key,editor_type:e.editor_type,folder_id:e.folder_id,team_id:e.team_id,parent_org_id:e.parent_org_id,has_proto_link_password:e.has_proto_link_password,proto_link_access:e.proto_link_access,created_at:e.created_at,trashed_at:e.trashed_at,prototype_url:e.prototype_url}}function w(e){return{checkpoint_token:"",edit_url:"",prototype_url:`${window.location.origin}/proto/${e.key}/${(0,m.sy)(e.name||"")}`,track_tags:"",url:`${window.location.origin}/file/${e.key}/${(0,m.sy)(e.name||"")}`,touched_at:"",client_meta:e.clientMeta||"",created_at:e.createdAt.toString(),creator_id:e.creator.id,deleted_at:e.deletedAt?e.deletedAt.toString():null,description:e.description||"",editor_type:e.editorType,file_repo_id:e.fileRepoId,folder_id:e.folderId,has_file_link_password:e.hasFileLinkPassword,has_proto_link_password:e.hasProtoLinkPassword,is_template:!!e.trackTags?.isTemplate,key:e.key,license:e.license,link_access:e.linkAccess,name:e.name||"",org_audience:!!e.orgAudience,org_browsable:e.orgBrowsable,parent_org_id:e.parentOrgId,proto_link_access:e.protoLinkAccess,source_file_key:e.sourceFileKey,starter_library_src_file_key:e.trackTags?.starterLibrarySrcFileKey,team_id:e.teamId,thumbnail_guid:e.thumbnailGuid,thumbnail_url:e.thumbnailUrl,thumbnail_url_override:e.thumbnailUrlOverride,trashed_at:e.trashedAt?e.trashedAt.toString():null,trashed_user:e.trashedUser,trashed_user_id:e.trashedUser?e.trashedUser.id:null,updated_at:e.updatedAt.toString(),viewer_export_restricted:e.viewerExportRestricted,is_try_file:e.isTryFile,library_key:e.libraryKey,last_published_at:e.lastPublishedAt,library_publish_scope_type:e.libraryKeyToFile?.libraryPublishScope?.publishScopeType}}function A(e){return{id:e.id,handle:e.handle,img_url:e.imgUrl,email:e.email||void 0,name:e.name||void 0}}function N(e,r,n,a){let i={id:e.id,resource_type:e.resourceType,resource_id_or_key:e.resourceId,level:e.level,created_at:e.createdAt.toString(),updated_at:e.updatedAt.toString(),pending:e.pending,org_user:n?{design_paid_status:n.accountType,whiteboard_paid_status:n.whiteboardPaidStatus||h.El.STARTER,user_id:n.userId,permission:n.permission}:void 0,team_user:a?{design_paid_status:a.designPaidStatus,whiteboard_paid_status:a.whiteboardPaidStatus,user_id:a.userId,team_id:a.teamId}:void 0};return e.pending?{...i,pending:!0,user_id:null,user:{email:e.pendingEmail||""}}:{...i,pending:!1,user_id:r.id,user:r}}function C(e){return{id:e.id,name:e.name,folder_id:e.folderId,default_file_key:e.defaultFileKey,deleted_at:e.deletedAt&&e.deletedAt.toString(),trashed_at:e.trashedAt&&e.trashedAt.toString(),created_at:e.createdAt.toString(),updated_at:e.updatedAt.toString(),team_id:e.teamId,link_access:e.linkAccess,proto_link_access:e.protoLinkAccess,has_file_link_password:e.hasFileLinkPassword,has_proto_link_password:e.hasProtoLinkPassword,org_audience:e.orgAudience,org_browsable:e.orgBrowsable,parent_org_id:e.parentOrgId,has_active_branches:e.hasActiveBranches}}function L(e,r){return{id:e.id,viewed_on:e.viewedOn.toString(),user_id:e.user.id,file_key:e.fileKey,user:r}}function O(e){let r={};return e.forEach(e=>r[e.id]=e),r}function R(e){switch(e){case h.vt.FILE:return"FileRole";case h.vt.FILE_REPO:return"RepoRole";case h.vt.FOLDER:return"ProjectRole";case h.vt.TEAM:return"TeamRole"}}function P(e){if(null!=e)return{backgroundColor:e.backgroundColor??void 0,containingStateGroup:"containingStateGroup"in e?function(e){if(null!=e)return{name:e.name??void 0,nodeId:e.nodeId??void 0}}(e.containingStateGroup):void 0,name:e.name??void 0,nodeId:e.nodeId??void 0,pageId:e.pageId??void 0,pageName:e.pageName??void 0}}function D(e){return{subscriptionStatus:"LIBRARY",type:_.PW.MODULE,node_id:e.nodeId,key:(0,i.mW)(e.key),version:(0,i.Pg)(e.version),userFacingVersion:i.Pg.INVALID,canvas_url:`/api/file_proxy/module_asset/${e.key}/canvas?ver=${e.checkpoint.key}`,containing_frame:P(e.containingFrame),thumbnail_url:`/module_asset/${e.key}/thumbnail?ver=${e.checkpoint.key}`,moduleSource:K(e.moduleSource),width:parseInt(e.width),height:parseInt(e.height)}}function k(e,r){return{description:e.description??void 0,description_rt:e.description_rt??void 0,library_key:(0,l.l)(r.file.libraryKey),id:e.id,name:e.name,unpublished_at:e.unpublishedAt?.toISOString()??null,updated_at:e.updatedAt?.toISOString()??null,..."hubFile"===r.type?{file_key:r.file.id,file_key_source:p.Ps.LIVEGRAPH_DATA_HUB_FILE,team_id:null}:{file_key:r.file.key,file_key_source:p.Ps.LIVEGRAPH_DATA,team_id:r.file.teamId}}}function M(e,r){return{...k(e,r),type:_.PW.COMPONENT,node_id:e.nodeId,canvas_url:`/component/${e.componentKey}/canvas?ver=${e.contentHash}`,component_key:(0,i.ii)(e.componentKey),containing_frame:P(e.containingFrame),content_hash:(0,i.F7)(e.contentHash),userFacingVersion:i.F7.INVALID,min_node_height:e.minNodeHeight??0,min_node_width:e.minNodeWidth??0,thumbnail_url:`/component/${e.componentKey}/thumbnail?ver=${e.contentHash}`}}function F(e,r){return{...k(e,r),type:_.PW.STATE_GROUP,node_id:e.nodeId,canvas_url:`/state_group/${e.key}/canvas?ver=${e.version}`,containing_frame:P(e.containingFrame),default_state_key:e.defaultStateKey,key:(0,i.q)(e.key),min_node_height:e.minNodeHeight??0,min_node_width:e.minNodeWidth??0,version:(0,i.Rf)(e.version),userFacingVersion:i.Rf.INVALID,thumbnail_url:`/state_group/${e.key}/thumbnail?ver=${e.version}`,fill_color:e.fillColor??void 0}}function x(e,r){return{...k(e,r),type:_.PW.STYLE,node_id:e.nodeId,canvas_url:`/style/${e.key}/canvas?ver=${e.checkpoint.key}`,checkpoint_id:e.checkpoint?.key,content_hash:(0,i.IA)(e.contentHash),userFacingVersion:i.IA.INVALID,key:(0,i.n3)(e.key),meta:e.meta?(0,f.iX)(e.meta):void 0,sort_position:e.sortPosition??"",style_type:e.styleType,thumbnail_url:`/style/${e.key}/thumbnail?ver=${e.checkpoint.key}`}}function U(e){switch(e){case"BOOLEAN":return o.rXF.BOOLEAN;case"COLOR":return o.rXF.COLOR;case"FLOAT":return o.rXF.FLOAT;case"MAP":return o.rXF.MAP;case"STRING":return o.rXF.STRING;case"SYMBOL_ID":return o.rXF.SYMBOL_ID;case"TEXT_DATA":return o.rXF.TEXT_DATA;default:(0,a.wc)(`Unhandled livegraph type: ${e}`)}}function B(e,r){return`/variable_set/${e}/canvas?ver=${r}`}function V(e,r,n){let a="",o="";return n?(a=c.wL(s.sH(e.nodeId)??s.Hr),o=d.wL(s.sH(e.variableCollection.nodeId)??s.Hr)):(a=c.Hc((0,i.ey)(e.key),(0,i.nK)(e.version)),o=d.Hc((0,i.yG)(e.variableCollection.key),(0,i.Vt)(e.variableCollection.version))),{...k({...e,description_rt:null,thumbnailUrl:null},r),subscriptionStatus:"LIBRARY",type:_.PW.VARIABLE,node_id:a,variableSetId:o,variableCollectionKey:(0,i.yG)(e.variableCollection.key),resolvedType:U(e.variableType),version:(0,i.nK)(e.version),userFacingVersion:i.nK.INVALID,sortPosition:e.sortPosition,key:(0,i.ey)(e.key),scopes:(0,g.gK)(e.scopes),canvas_url:B(e.variableCollection.key,e.variableCollection.checkpoint.key)}}function G(e,r,n){let a="";return a=n?d.wL(s.sH(e.nodeId)??s.Hr):d.Hc((0,i.yG)(e.key),(0,i.Vt)(e.version)),{...k({...e,description_rt:null,thumbnailUrl:null},r),subscriptionStatus:"LIBRARY",type:_.PW.VARIABLE_SET,node_id:a,version:(0,i.Vt)(e.version),userFacingVersion:i.Vt.INVALID,canvas_url:B(e.key,e.checkpoint.key),key:(0,i.yG)(e.key),checkpoint_id:e.checkpoint?.key,variableThumbnailsUrl:e.variableThumbnailsUrl??void 0,modes:function(e){if(null==e)return;let r=[];for(let n of e)r.push({id:n.id,name:n.name});return r}(e.modes),isExtendable:e.isExtendable??!1}}function H(e,r){return{...{description:e.description??void 0,description_rt:e.description_rt??void 0,id:e.id,name:e.name,unpublished_at:e.unpublishedAt?.toISOString()??null,..."hubFile"===r.type?{file_key:r.file.id,file_key_source:p.Ps.LIVEGRAPH_DATA_HUB_FILE,library_key:(0,l.l)(r.file.libraryKey),file_name:r.file.currentHubFileVersion?.name||"",publisher_name:r.file.communityPublishers?.[0]?.profile.name||"",isHubFile:!0}:"teamTemplate"===r.type?{file_key:r.file.key,file_key_source:p.Ps.LIVEGRAPH_DATA,library_key:(0,l.l)(r.file.libraryKey),file_name:r.file.template?.name||"",publisher_name:r.file.template?.publishedByUserNullable?.name||"",isHubFile:!1}:{file_key:r.file.key,file_key_source:p.Ps.LIVEGRAPH_DATA,library_key:(0,l.l)(r.file.libraryKey),file_name:r.file.name,isHubFile:!1,publisher_name:""}},...D(e)}}function W(e,r){return{...k({...e,description_rt:null,thumbnailUrl:null},r),...D(e)}}let K=e=>{switch(e){case"EDITOR_TEMPLATE":return o.QjO.EDITOR_TEMPLATE;case"SLIDES_TEMPLATE":return o.QjO.SLIDES_TEMPLATE;case"SITES_TEMPLATE":return o.QjO.SITES_TEMPLATE;case"LITE_TEMPLATE":return o.QjO.LITE_TEMPLATE;default:(0,a.wc)(`Unhandled livegraph module source: ${e}`)}};function Y(e){return{id:e.id,path:e.path,orgId:e.org_id??null,teamId:e.team_id,updatedAt:new Date(e.updated_at),createdAt:new Date(e.created_at),deletedAt:e.deleted_at?new Date(e.deleted_at):null,trashedAt:e.trashed_at?new Date(e.trashed_at):null,viewOnlyAt:e.is_view_only?new Date:null,inviteOnlyAt:e.is_invite_only?new Date:null,description:e.description}}function $(e,r,n){return(r||n)&&e?{autogen_password_controls:r?.autogenPasswordControls||!1,external_collaboration_controls:r?.externalCollaborationControls||!1,public_link_controls_setting:n?.publicLinkControlsSetting??r?.publicLinkControlsSetting,public_link_controls_max_expiration:n?.publicLinkControlsMaxExpiration??r?.publicLinkControlsMaxExpiration}:null}function j(e){return e?{...e,prevPrivateLinkAccess:e.prevPrivateLinkAccess,prevPrivateProtoLinkAccess:e.prevPrivateProtoLinkAccess,prevOrgBrowsable:!!e.prevOrgBrowsable,setByUser:e.setByUser?A(e.setByUser):null}:null}function z(e){let r={domains:[],isFetching:!1,fetchedAt:null};return e&&e.forEach(e=>{r.domains.push({id:e.id,created_at:e.createdAt?e.createdAt.toString():"",org_id:e.orgId,domain:e.domain,google_sso_only_at:e.googleSsoOnlyAt?e.googleSsoOnlyAt.toString():null,saml_sso_only_at:e.samlSsoOnlyAt?e.samlSsoOnlyAt.toString():null,verification_method:null,verified_at:null})}),r}function q(e,r){return r?{type:"hubFile",file:r}:e?{type:"team",file:e}:void 0}function X(e){let{currentUser:r}=e,n="recentFiles2"in r?r.recentFiles2:r.suggestedFiles;if(!n)return{recent_files:[],recent_repos:[]};let a=[],i=new Map,o=[];for(let e of n){let r=e.file;if(r&&!r.trashedAt&&!r.deletedAt&&((0,u.kc)().sites||"sites"!==r.editorType)){let n=r.trackTags?.isTemplate,s={accessed_at:"actionAt"in e?e.actionAt.toISOString():void 0,branch_checkpoint_id:r.branchCheckpointId,client_meta:r.clientMeta,created_at:r.createdAt.toISOString(),creator_id:r.creatorId,deleted_at:null,description:r.description,edit_url:r.editUrl,editor_type:r.editorType,file_repo_id:r.fileRepoId,folder_access_enabled:r.folderAccessEnabled,folder_id:r.folderId,handoff_url:r.handoffUrl,has_file_link_password:r.hasFileLinkPassword,has_proto_link_password:r.hasProtoLinkPassword,is_favorited:r.isFavorited,is_new_user_playground_library:r.newUserPlaygroundLibrary||void 0,is_team_template:r.isTeamTemplate,is_template:n||void 0,is_try_file:r.isTryFile,key:r.key,last_published_at:r.lastPublishedAt||null,license:r.license,link_access:r.linkAccess,name:r._name||"Untitled",org_audience:r.orgAudience??void 0,org_browsable:r.orgBrowsable,parent_org_id:r.parentOrgId,proto_link_access:r.protoLinkAccess,prototype_url:r.prototypeUrl,scheme:r.scheme,source_checkpoint_id:r.sourceCheckpointId,source_file_key:r.sourceFileKey,starter_library_src_file_key:r.trackTags?.starterLibrarySrcFileKey||void 0,team_id:r.teamId,thumbnail_guid:r.thumbnailGuid,thumbnail_url:r.thumbnailUrl,thumbnail_url_override:r.thumbnailUrlOverride,preview_thumbnail_urls:r.previewThumbnailUrls,touched_at:r.touchedAt,track_tags:r.trackTagsRaw?JSON.parse(r.trackTagsRaw):null,trashed_at:null,trashed_user_id:r.trashedUserId,updated_at:r.updatedAt?.toISOString(),url:r.url,viewer_export_restricted:r.viewerExportRestricted,can_edit:r.canEdit};if(r.fileRepoId&&r.repo){let n=i.get(r.fileRepoId);n?n.files.push(s):(n={repo:{created_at:r.repo.createdAt.toISOString(),default_file_key:r.repo.defaultFileKey,deleted_at:r.repo.deletedAt?.toISOString()||null,folder_id:r.repo.folderId,has_active_branches:r.repo.hasActiveBranches,has_file_link_password:r.repo.hasFileLinkPassword,has_proto_link_password:r.repo.hasProtoLinkPassword,id:r.repo.id,is_favorited:r.repo.isFavorited,link_access:r.repo.linkAccess,name:r.repo.name,org_audience:r.repo.orgAudience,org_browsable:r.repo.orgBrowsable,parent_org_id:r.repo.parentOrgId,proto_link_access:r.repo.protoLinkAccess,team_id:r.repo.teamId,trashed_at:r.repo.trashedAt?.toISOString()||null,updated_at:r.repo.updatedAt.toISOString()},files:[s],timestamp:"actionAt"in e?e.actionAt.toISOString():null},i.set(r.fileRepoId,n),o.push(n))}else a.push(s)}}return{recent_files:a,recent_repos:o}}},4564:(e,r,n)=>{n.d(r,{M:()=>c});var a=n(517333),i=n(441088),o=n(744472),s=n(442944);let l=null;function c(){return l||(a.eD&&(l=new o.k),(0,i.T)()&&(l=new s.y)),l}},820113:(e,r,n)=>{n.d(r,{B9:()=>p,JK:()=>l,LN:()=>u,_Z:()=>h,vr:()=>d,wU:()=>m}),n(411855);var a=n(966712),i=n(776621),o=n(479296);let s=["jpy","usd","gbp","cad","eur"],l=(0,o.D)(()=>{if(navigator){let e=navigator.languages;if(e&&e[0])return e[0];let r=navigator.language;if(r)return r}return"en-US"}),c={jpy:{annualFigma:1800,monthlyFigma:2250,orgFigma:6750,orgDevMode:3750,orgFigjam:750,enterprise:11250,enterpriseDevMode:5250,enterpriseFigjam:750,annualFigjam:450,monthlyFigjam:750},usd:{annualFigma:1200,monthlyFigma:1500,orgFigma:4500,orgDevMode:2500,orgFigjam:500,enterprise:7500,enterpriseDevMode:3500,enterpriseFigjam:500,annualFigjam:300,monthlyFigjam:500},eur:{annualFigma:1200,monthlyFigma:1500,orgFigma:4500,orgDevMode:2500,orgFigjam:500,enterprise:7500,enterpriseDevMode:3500,enterpriseFigjam:500,annualFigjam:300,monthlyFigjam:500},gbp:{annualFigma:1100,monthlyFigma:1400,orgFigma:4e3,orgDevMode:2200,orgFigjam:500,enterprise:7e3,enterpriseDevMode:3200,enterpriseFigjam:500,annualFigjam:300,monthlyFigjam:500},cad:{annualFigma:1600,monthlyFigma:2e3,orgFigma:6e3,orgDevMode:3500,orgFigjam:700,enterprise:1e4,enterpriseDevMode:5e3,enterpriseFigjam:700,annualFigjam:400,monthlyFigjam:700}};class d{constructor(e){this.fullFormat={jpy:"JPY",usd:"USD",eur:"EUR",gbp:"GBP",cad:"CAD"},null===e&&(0,i.us)("Currency should not be null. Defaulted to usd."),this.currency=e??"usd",this.hasCents="jpy"!==this.currency,this.locale=l()}formatMoney(e,r){let n={currency:this.currency,style:"currency"};this.hasCents&&r?.showCents||(n.maximumFractionDigits=0,n.minimumFractionDigits=0),this.hasCents&&(e*=.01);let a=e.toLocaleString(this.locale,n);return(a.startsWith("CA$")||a.startsWith("US$"))&&(a=a.slice(2)),r?.showFullFormat?`${a} ${this.fullFormat[this.currency]}`:a}getPrices(){return c[this.currency]}}function u(){let e=(0,a.Ay)().user_currency_from_ip;return h()?e:"usd"}function m(){return new d(u())}function p(){let e=new Set;return e.add("usd"),e.add(u()),Array.from(e)}function h(){let e=(0,a.Ay)().user_currency_from_ip;if(!e||!s.includes(e)||"usd"===e)return!1;let r=(0,a.Ay)().user_data;return!!r&&!!r.id}},401352:(e,r,n)=>{n.d(r,{Lb:()=>i});var a=n(286640);function i(e){let r=(0,a.DN)();r.get("CHECKED_OSS_SALES_EXPERIMENT_LOCAL_KEY")||r.set("CHECK_OSS_SALES_EXPERIMENT_LOCAL_KEY",e)}},833629:(e,r,n)=>{n.d(r,{D8:()=>o,Lh:()=>s,_q:()=>c,jO:()=>l}),n(776250),n(132135);var a=n(479296);n(335682),n(860178);var i=n(309798);(0,a.D)((e,r,n)=>null!=e&&null!=r&&function(e,r){return!!e&&!!e.track_tags&&!e.trashed_at&&!e.deleted_at&&!!e.is_template&&r.includes(e.track_tags.figma_basics_experiment)}(r,n)&&e===r.creator_id);var o=(e=>(e.PROPERTIES_PANEL_TITLE="properties-panel-title",e.SCRUBBABLE_CONTROL="scrubbable-control",e.PAINT_PANEL_ROW="paint-panel-row",e.TEXT_PANEL="text-panel",e))(o||{});function s(e,r){return e+"-"+r.toLowerCase().replace(" ","-")}function l(){let e=(0,i.f)("editor_onboarded"),r=(0,i.f)("figma_basics_tooltips_onboarding");return c({editor_onboarded:e,figma_basics_tooltips_onboarding:r,no_figma_basics_tooltips_onboarding:(0,i.f)("no_figma_basics_tooltips_onboarding"),cursor_bot_v2__basics_onboarded:(0,i.f)("cursor_bot_v2__basics_onboarded"),cursor_bot_v2__no_basics_onboarded:(0,i.f)("cursor_bot_v2__no_basics_onboarded")})}function c(e){return!!(e.editor_onboarded||e.figma_basics_tooltips_onboarding||e.no_figma_basics_tooltips_onboarding||e.cursor_bot_v2__basics_onboarded||e.cursor_bot_v2__no_basics_onboarded)}},296796:(e,r,n)=>{n.d(r,{OA:()=>m,rT:()=>u}),n(181912);var a=n(179940);n(939863);var i=n(438120),o=n(383986),s=n(916525),l=n(720647);let c=(e,r,n)=>{switch(e){case"product":return s.SL[r];case"role":return s.qY[r];case"seatType":case"seatChanges":return r;case"accountType":return s.U9[r];case"lastEdit":return s.rk[r];case"billingGroup":let a=decodeURIComponent(r),i=Object.keys(n).find(e=>n[e]?.name===a);if("unassigned"===r||"Unassigned"===r)return o.s;if(i)return i;return null;case"newEditor":return"true"===r;default:return null}},d=(e,r,n)=>{switch(e){case"productFilter":return s.Eg[r];case"roleFilter":return s.jN[r];case"permissionFilter":case"lastEditFilter":case"newEditorFilter":case"workspaceFilter":case"idpGroupFilter":case"seatTypeFilter":case"seatChangesFilter":return r;case"licenseGroupFilter":return encodeURIComponent((0,i.CC)(r,n));default:return null}};function u(e,r){if(!e)return null;let n=(0,a.qg)(e);return function(e){let r=e?.[s.e5.productFilter],n=e?.[s.e5.roleFilter],a=r===l.Te.DEV_MODE?s.B9:s.ZL;return!n||a.includes(n)?e:{...e,roleFilter:null}}(Object.keys(n).reduce((e,a)=>{if(!(a in s.Oo))return e;{let i=s.GX[a],o=n[a],l=c(a,o,r);return{...e,...l&&{[i]:l}}}},s.J0))}function m(e,r){return Object.keys(e).reduce((n,a)=>{let i=s.cC[a],o=e[a];return{...n,...o&&{[i]:d(a,o,r)}}},{})}},227544:(e,r,n)=>{n.d(r,{CA:()=>o}),n(181912),n(133537),n(966712),n(939863),n(99506),n(720647);var a=(e=>(e.OVERDUE="overdue",e.UNPAID="unpaid",e.REVIEW="review",e.LOCKED="locked",e.DEFAULT="default",e))(a||{}),i=(e=>(e.BILLING_STATUS="billing_status",e.TAX_ID_STATUS="tax_id_status",e.DEV_MODE_SUGGESTED_UPGRADES="dev_mode_suggested_upgrades",e))(i||{});function o(e){return null!==e&&null===e.value}},438120:(e,r,n)=>{n.d(r,{CC:()=>o});var a=n(939863);n(709217),n(99506),n(643067);var i=n(383986);function o(e,r){return e===i.s?(0,a.t)("license_group.unassigned"):r[e]?.name??""}n(916525)},937294:(e,r,n)=>{n.d(r,{YP:()=>c,gO:()=>l,n1:()=>u,p9:()=>d});var a=n(99506),i=n(428467),o=n(668860),s=n(410436),l=(e=>(e[e.CLICK_LEAVE=0]="CLICK_LEAVE",e[e.CLICK_WITHDRAW=1]="CLICK_WITHDRAW",e[e.CLICK_JOIN=2]="CLICK_JOIN",e[e.CLICK_REQUEST=3]="CLICK_REQUEST",e[e.BYPASS_REQUEST=4]="BYPASS_REQUEST",e[e.CLICK_JOIN_AS_ADMIN=5]="CLICK_JOIN_AS_ADMIN",e))(l||{});function c(e,r,n,l){let c=(0,i.hasViewerRoleAccessOnTeam)(e.id,n),d=function(e,r){if(!e.org_id)return!1;let n=r.orgTeams?.teams.find(r=>r.id===e.id);if(n)return!!n.orphaned;let a=r.roles.byTeamId[e.id];return!a||Object.values(a).every(e=>e.level<o.e6.ADMIN&&!e.pending)}(e,n);if(c)return 0;if(r&&r.status===s.c.PENDING)return 1;if(e.org_access===a.bU.PRIVATE&&d&&(0,i.canAdminOrg)(l,n)||e.org_access===a.bU.SECRET&&d&&(0,i.canAdminOrg)(l,n))return 4;if((0,i.canManageNonSecretOrgTeam)(e,n,n.user?.id))return 5;if(e.org_access===a.bU.PUBLIC)return 2;if(e.org_access===a.bU.PRIVATE)return 3;return null}let d=e=>`JOINING_ORG_TEAM_${e}`,u=e=>`JOINING_${e.length}_BATCH_ORG_TEAMS_${e[0]}`},724838:(e,r,n)=>{n.d(r,{Hw:()=>s});var a=n(133537);n(966712),n(931828),n(243987),n(428467),n(596607);var i=(e=>(e[e.NONE=0]="NONE",e[e.SINGLE_TEAM=1]="SINGLE_TEAM",e[e.MULTIPLE_TEAMS=2]="MULTIPLE_TEAMS",e))(i||{}),o=(e=>(e[e.NEVER=0]="NEVER",e[e.ONCE=1]="ONCE",e[e.TWICE=2]="TWICE",e[e.PERMANENTLY=3]="PERMANENTLY",e))(o||{});function s(e){return!!e&&!(0,a.qe)(e.email)}},596607:(e,r,n)=>{n.d(r,{LM:()=>c,WT:()=>m,Xy:()=>u,uE:()=>h,x9:()=>d,xw:()=>l,zR:()=>p});var a=n(943632);n(38329),n(281381),n(939863),n(720647);var i=n(99506);n(66037),n(498606);var o=n(117192),s=n(529928);function l(e){return e.currentUserOrgId&&e.user&&e.orgUsersByOrgId[e.currentUserOrgId]?e.orgUsersByOrgId[e.currentUserOrgId][e.user.id]:null}(0,s.bt)(l);let c=(0,s.bt)(function(e){let r=l(e);return r?.workspace_users?.find(e=>e.is_main_workspace)?.workspace_id}),d=o.x;function u(e){let r=Object.values(e).filter(e=>e.permission===i._D.ADMIN);return(0,a.KQ)(r,"created_at"),r}function m(e,r){let n=e.admin_users_metadata.map(e=>r[e.id]).filter(e=>!!e);return(0,a.KQ)(n,"created_at"),n}function p(e){return u(e).slice(0,3)}function h(e){return e?.permission===i._D.ADMIN}},643067:(e,r,n)=>{n.d(r,{G7:()=>p,H_:()=>i,Oe:()=>_,Ts:()=>o,eE:()=>s,kA:()=>h,mg:()=>u,nX:()=>m,wA:()=>c,yK:()=>l}),n(411855),n(188507),n(181912);var a=n(133537);function i(e,r){let n=e.map(e=>e.domain.toLowerCase()),i=(0,a.zN)(r);return 0!==n.length&&!!i&&n.indexOf(i)>-1}function o(e){return e?.id!==void 0}function s(e,r){let n=o(r)?r.email:r;return!!n&&(0,a.xf)(n)&&e.domains.length>0&&!i(e.domains,n)}function l(e){return!!e.currentUserOrgId&&!!e.orgById[e.currentUserOrgId]?.template_picker_disabled}function c(e){return e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null}n(966712),n(96328),n(881388),n(939863),n(99506),n(428467),n(23001),n(802026),n(679892),n(720647),n(147206);let d=new RegExp(/[https?:?\/\/]?[a-z.]*figma[\-.\da-z:]*\/files\/(\d+)/);function u(e){return d.test(e)}function m(e){let r=e.match(d);return r?r[1]:null}function p(e){return h(e)}function h(e){return!!e?.bigma_enabled}function _(e){return h(e)}},243987:(e,r,n)=>{n.d(r,{BR:()=>W,Ht:()=>E,Jm:()=>g,KI:()=>O,Ky:()=>H,LF:()=>b,PS:()=>R,PX:()=>v,Rq:()=>G,Rx:()=>x,S$:()=>D,SD:()=>U,UE:()=>B,WQ:()=>A,WW:()=>I,Wf:()=>y,XX:()=>L,ZZ:()=>P,cW:()=>S,dX:()=>F,fD:()=>V,h:()=>T,n0:()=>N,oc:()=>k,w5:()=>C,zZ:()=>f}),n(414507);var a=n(181912),i=n(133537),o=n(966712);n(776621);var s=n(650322),l=n(881388),c=n(939863),d=n(875847),u=n(99506),m=n(428467),p=n(802026),h=n(622139),_=n(36816),g=(e=>(e.FREE="free",e.PRO="pro",e.ORG="org",e.ENT="ent",e.EDU="edu",e))(g||{});let f="https://www.figma.com/pricing/#cid-20p4Q0lWSOxIWj30zTY6P2",E=2,y=1,b={[u._Y.DESIGN]:3,[u._Y.WHITEBOARD]:1,[u._Y.SLIDES]:3,[u._Y.SITES]:3,[u._Y.COOPER]:3},I=3,T=0,v=0,S=5;function w(e){return e>new Date}function A(e){let r=e&&!e.org_id&&e.grace_period_end&&a.A.utc(e.grace_period_end);return!!r&&r.valueOf()>Date.now()}function N(e){return!!e&&null!=e.subscription&&e.subscription!==u.Qh.INCOMPLETE}function C(e){return!!e&&(N(e)||e.student_team||!!e.grace_period_end&&w(new Date(e.grace_period_end)))}function L(e){if(!e)return!1;let{subscription:r,studentTeamAt:n,gracePeriodEnd:a}=e;return!!r&&r!==u.Qh.INCOMPLETE||!!n||a&&w(a)}function O(e){return function(e){let r=e.editorType,n=!!e.team&&!L(e.team),a=!e.teamId&&!e.parentOrgId,i=(0,o.kc)().ps_benchmark&&(0,d.jd)(e.project),s=b[r??u._Y.DESIGN];return r===u._Y.WHITEBOARD?n||a?s:1/0:n&&!i?s:1/0}(e)<1/0}function R(e){return Object.values(e.teams).filter(r=>(0,m.canEditTeam)(r.id,e)&&(!C(r)||r.student_team))}function P(e,r,n){var a,i,o;return a=e.team_id?r.teams[e.team_id]:null,i=r.user,o=r.userEduGracePeriods,(!!e.team_id||"org_edit"!==e.sharing_audience_control)&&!!(!e.team_id&&!(0,d.Gi)(e)||e.team_id&&(!n&&M(a,i,o)||!C(a)&&(e.is_invite_only||e.is_view_only)))}function D(e,r,n){return!(e.teamId||(0,d.VA)(e))||!!e.teamId&&(!!F(r,n)||(e.inviteOnlyAt||e.viewOnlyAt)&&!L(r))}function k(e,r){return M(r.teams[e],r.user,r.userEduGracePeriods)}function M(e,r,n){return!!e&&!!r&&(e.student_team?!((0,s.cn)(r)||(0,s.SH)(n,e.id).isInValidGracePeriod):e.restrictions_list?.includes(u.P4.LOCKED))}function F(e,r){return!!e&&!!r&&(e.studentTeamAt?!((0,s.cn)(r)||e.eduGracePeriod?.isValid):e.restrictionsList?.includes(u.P4.LOCKED))}function x(e){return Object.values(e.teams).some(r=>k(r.id,e)&&(0,m.canEditTeam)(r.id,e))}function U(e,r){let n=r.orgById[e];return n&&n.standing===p.ZG.SUSPENDED}function B(e,r){if(e.data&&e.data.message){let n=(0,c.Jv)(e);n&&r(l.s.error(n))}else{let n=(0,c.Jv)(e,(0,c.YD)("error.unknown_contact_support"));r(l.s.error(n))}}function V(e,r){return e===h.tY.MONTHLY?0:r}function G(e,r){return e===h.tY.MONTHLY?r:0}function H(e,r,n){let a="whiteboard"===n?"whiteboard_paid_status":"design_paid_status";return e.filter(e=>!(0,i.nD)(e.email)&&(e[a]===_.Zf.FULL&&!r.downgrade[n].includes(e.id)||r.upgrade[n].includes(e.id))).length}function W(e,r){let n=!1,a=null!==e?Object.values(e).reduce((e,a)=>{if(!a.user)return e;let i={id:a.user.id,design_paid_status:a.design_paid_status,whiteboard_paid_status:a.whiteboard_paid_status,email:a.user.email||"",handle:a.user.handle||"",img_url:a.user.img_url||""};return a.user?.id===r?.id?(n=!0,e.unshift(i)):e.push(i),e},[]):[];return!n&&r&&a.unshift({id:r.id,design_paid_status:_.Zf.STARTER,whiteboard_paid_status:_.Zf.STARTER,email:r.email,handle:r.handle,img_url:r.img_url}),a}},828527:(e,r,n)=>{n.d(r,{k:()=>o});var a=n(67151),i=n(776250);class o{constructor(e){this.eventName=e,this.fileKey=null,this.nodeChangesSizes=[],this.queries=[],this.replies=[],this.queriesTs=[],this.nodeChangesTs=[],this.repliesTs=[],this.alreadySent=!1,this.logEvent=e=>{if(this.fileKey&&!this.alreadySent)switch(e.type){case"sendSceneGraphQuery":this.queries.push(s(e.queries)),this.queriesTs.push(this.now());break;case"receiveNodeChanges":this.nodeChangesSizes.push(e.size),this.nodeChangesTs.push(this.now());break;case"receiveSceneGraphReply":this.replies.push(s(e.queries)),this.repliesTs.push(this.now());break;case"finishIncrementalLoading":if(e.fileKey===this.fileKey){if(this.nodeChangesSizes.length>0){let r={version:1,fileKey:e.fileKey,nodeChangesSizes:this.nodeChangesSizes,queries:this.queries,replies:this.replies,maxNodeChangesSize:Math.max.apply(null,this.nodeChangesSizes),...l(this.queriesTs,"query",5),...l(this.nodeChangesTs,"node",5),...l(this.repliesTs,"reply",5)};(0,i.sx)(this.eventName,r),this.alreadySent=!0}}else console.error(`IncrementalLoadTimer: file key mismatch ${e.fileKey} != ${this.fileKey}`);this.reset();break;default:(0,a.xb)(e)}}}reset(){this.fileKey=null,this.nodeChangesSizes=[],this.queries=[],this.replies=[],this.queriesTs=[],this.nodeChangesTs=[],this.repliesTs=[],this.alreadySent=!1}now(){return Math.round(performance.now())}setFileKey(e){this.fileKey=e}}function s(e){return[...e].sort().join(",")}function l(e,r,n){let a={};return e.forEach((e,i)=>{i<n&&(a[`${r}.${i}`]=e)}),a}},147206:(e,r,n)=>{n.d(r,{Ay:()=>T,C1:()=>L,D8:()=>P,DN:()=>R,F1:()=>E,GP:()=>b,Hv:()=>k,Jd:()=>S,Jf:()=>O,M4:()=>C,Pe:()=>I,Pq:()=>y,R$:()=>v,Vi:()=>N,XG:()=>A,qR:()=>w});var a=n(67151),i=n(966712),o=n(939863),s=n(570999),l=n(256975),c=n(420576),d=n(369870),u=n(99506),m=n(279453),p=n(540019);n(606137);var h=n(668860),_=n(36816);n(851363);var g=n(507956),f=n(234587);function E(){return(0,d.MP)()&&!(0,i.kc)().integ_zoom_allow_extensions?{canRun:!1,message:(0,o.t)("widgets.no_zoom_widgets_plugins")}:{canRun:!0}}function y({copyExportRestrictedArgs:e}){return!(e&&I(e))}function b(e){return(0,g.$A)(e.selectedView)?(0,l.tn)(e)&&y({copyExportRestrictedArgs:e.openFile}):(!(0,d.MP)()||!!(0,i.kc)().integ_zoom_allow_extensions)&&!e.mirror.appModel.isReadOnly}function I(e){return(0,i.kc)().file_export_perm_v2?!e.canExport:!e.canEdit&&e.viewerExportRestricted}let T=n(368178).A;function v(e,r){return!!(e&&e.external_restricted_org_id&&e.external_restricted_org_id!==r)}function S(e,r){return"whiteboard"===r?e&&e.whiteboard_paid_status===u.El.RESTRICTED:"slides"!==r&&e&&e.design_paid_status===u.El.RESTRICTED}function w(e,r){return"whiteboard"===r?e&&e.whiteboard_paid_status===_.Zf.RESTRICTED:"slides"!==r&&e&&e.design_paid_status===_.Zf.RESTRICTED}function A(e,r){return null===r||("whiteboard"===r?e&&e.whiteboardPaidStatus===_.Zf.RESTRICTED:"slides"!==r&&e&&e.designPaidStatus===_.Zf.RESTRICTED)}function N(e,r){return!A(e?.currentPlanUser,r)&&(e?.subscription!==null||e?.studentTeamAt!==null||e?.gracePeriodEnd&&e.gracePeriodEnd>new Date)}function C(e){return e&&!!e.orgId}function L(e,r){switch(e){case h.e6.OWNER:return r?(0,o.t)("permissions.level_name.branch_owner"):(0,o.t)("permissions.level_name.owner");case h.e6.ADMIN:return(0,o.t)("permissions.level_name.admin");case h.e6.EDITOR:return(0,o.t)("permissions.level_name.can_edit");case h.e6.VIEWER:return(0,o.t)("permissions.level_name.can_view");case h.e6.VIEW_PROTOTYPES:return(0,o.t)("permissions.level_name.can_view_prototypes");default:return(0,o.t)("permissions.level_name.none")}}function O(e,r){switch(r){case u._Y.DESIGN:return e.canCreateDesignFile;case u._Y.WHITEBOARD:return e.canCreateFigjamFile;case u._Y.SLIDES:return e.canCreateSlidesFile;case u._Y.SITES:return e.canCreateDesignFile&&!!(0,f.oz)();case u._Y.COOPER:return e.canCreateDesignFile&&(0,s.qx)();default:(0,a.xb)(r)}}function R({role:e,file:r,folder:n=null,isInDraftsFolder:a=!1}){if(e.level!==h.e6.VIEWER&&e.level!==h.e6.VIEW_PROTOTYPES)return null;let i=(0,c.Pn)(r);switch(e.level){case h.e6.VIEWER:{if(r.link_access===u.PQ.EDIT)return(0,o.t)("permissions.can_still_edit_anybody_with_the_link",{noun:i});if(r.link_access===u.PQ.ORG_EDIT&&e.org_user&&e.org_user.permission!==u._D.GUEST)return(0,o.t)("permissions.can_still_edit_org_member_with_link",{noun:i});if(e.pending)break;let s=!!n&&!n.is_invite_only&&!n.is_view_only;return D(!!e.teamLevel&&!a&&e.teamLevel>h.e6.VIEWER&&(!n||s),!!e.folderLevel&&e.folderLevel>h.e6.VIEWER,!!e.repoLevel&&e.repoLevel>h.e6.VIEWER)}case h.e6.VIEW_PROTOTYPES:{if(r.link_access===u.PQ.EDIT)return(0,o.t)("permissions.can_still_see_and_edit_anybody_with_the_link_noun",{noun:i});if(r.link_access===u.PQ.ORG_EDIT&&e.org_user&&e.org_user.permission!==u._D.GUEST)return(0,o.t)("permissions.can_still_see_and_edit_allow_editing_by_org_members_with_link",{noun:i});if(e.pending)break;let a=n&&!n.is_invite_only&&!n.is_view_only;if(e.teamLevel&&e.teamLevel>h.e6.VIEWER&&(!n||a))return(0,o.t)("permissions.can_still_see_and_edit_permission_team_file_is_in",{noun:i});if(e.folderLevel&&e.folderLevel>h.e6.VIEWER)return(0,o.t)("permissions.can_still_see_and_edit_permission_team_project_is_in",{noun:i});if(e.repoLevel&&e.repoLevel>h.e6.VIEWER)return(0,o.t)("permissions.can_still_see_and_edit_permission_main_file",{noun:i});if(r.link_access===u.PQ.VIEW)return(0,o.t)("permissions.can_still_edit_allow_view_anybody_with_link",{noun:i});if(r.link_access===u.PQ.ORG_VIEW&&e.org_user&&e.org_user.permission!==u._D.GUEST)return(0,o.t)("permissions.can_still_edit_allow_edit_anybody_with_link",{noun:i});if(e.teamLevel&&e.teamLevel>=h.e6.VIEWER&&(!n||a))return(0,o.t)("permissions.can_still_see_permission_team_file_is_on",{noun:i});if(e.folderLevel&&e.folderLevel>=h.e6.VIEWER)return(0,o.t)("permissions.can_still_see_permission_project_file_is_on",{noun:i});if(e.repoLevel&&e.repoLevel>=h.e6.VIEWER)return(0,o.t)("permissions.can_still_see_edit_permission_on_main_file",{noun:i})}}return null}function P({file:e,seenState:r,folder:n=null}){let a=(0,c.Pn)(e);if(e.link_access===u.PQ.EDIT)return(0,o.t)("permissions.can_still_edit_anybody_with_the_link",{noun:a});let i=!!n&&!n.is_invite_only&&!n.is_view_only;return D(!!r.teamLevel&&r.teamLevel>h.e6.VIEWER&&(!n||i),!!r.folderLevel&&r.folderLevel>h.e6.VIEWER,!!r.repoLevel&&r.repoLevel>h.e6.VIEWER)}function D(e,r,n){return e?(0,o.t)("permissions.can_still_edit_team_permissions"):r?(0,o.t)("permissions.can_still_edit_folder_permissions"):n?(0,o.t)("permissions.can_still_edit_edit_permissions"):null}async function k(e,r){let n=await p.M4.fetch(m.OFA.Query({id:e}));return!!n.project&&O(n.project,r)}},428467:(e,r,n)=>{n.d(r,{canAdminOrg:()=>z,canAdminTeam:()=>U,canEditFolder:()=>k,canEditFolderRole:()=>K,canEditTeam:()=>x,canEditTeamRole:()=>W,canGuestOrg:()=>$,canManageNonSecretOrgTeam:()=>J,canMemberOrg:()=>j,canOwnFolder:()=>M,canOwnTeam:()=>B,canUploadAndEditVideo:()=>ea,canUploadAndEditVideo_REDUX_GLOBAL_DEPRECATED:()=>ei,canViewFolder_DEPRECATED:()=>D,canViewTeam:()=>F,getExplicitRoleForUserAndFile:()=>C,getPermissionsState:()=>b,getPermissionsStateMemoized:()=>I,getReadOnlyOverrideMessageForFolder:()=>en,getResourceTeamId:()=>T,getRolesForResource:()=>L,hasActiveEduTeam:()=>Q,hasAdminRoleAccessOnTeam:()=>H,hasEditorRoleAccessOnTeam:()=>G,hasViewerRoleAccessOnTeam:()=>V,isFigJamDisabledForFolder:()=>er,isFigJamDisabledForOrg:()=>et,isFileFigjamDisabled:()=>ee,isOrgUserExternallyRestrictedFromState:()=>Z,isResourceOwner:()=>v,userIsAMemberOfAnOrg:()=>X});var a=n(786928),i=n(38329),o=n(966712),s=n(886653),l=n(650322),c=n(939863),d=n(875847),u=n(99506),m=n(596607),p=n(243987),h=n(140047),_=n(66037),g=n(668860);n(36816);var f=n(147206);function E(e,r,n,a,i,o,s,l,c,d,u,m,p,h,_){return{currentUserOrgId:e,user:r,fileByKey:n,repos:a,folders:i,teams:o,roles:s,orgById:l,orgUsersByOrgId:c,teamUserByTeamId:d,userEduGracePeriods:u,licenseGroups:m,orgTeams:p,openFile:h,currentTeamId:_}}let y=(0,s.xx)(E);function b(e){return E(e.currentUserOrgId,e.user,e.fileByKey,e.repos,e.folders,e.teams,e.roles,e.orgById,e.orgUsersByOrgId,e.teamUserByTeamId,e.userEduGracePeriods,e.licenseGroups,e.orgTeams,e.openFile,e.currentTeamId)}function I(e){return y(e.currentUserOrgId,e.user,e.fileByKey,e.repos,e.folders,e.teams,e.roles,e.orgById,e.orgUsersByOrgId,e.teamUserByTeamId,e.userEduGracePeriods,e.licenseGroups,e.orgTeams,e.openFile,e.currentTeamId)}function T(e,r){switch(e.resource_type){case u.vt.FILE:let n=r.fileByKey[e.resource_id_or_key];return n&&n.team_id;case u.vt.FILE_REPO:let a=r.repos[e.resource_id_or_key],i=r.folders[a?.folder_id];return i?.team_id??null;case u.vt.FOLDER:let o=r.folders[e.resource_id_or_key];return o?.team_id??null;case u.vt.TEAM:return e.resource_id_or_key}}function v(e,r,n,a){let i=function(e,r){switch(r){case u.vt.FILE:return e.byFileKey;case u.vt.FILE_REPO:return e.byRepoId;case u.vt.FOLDER:return e.byFolderId;case u.vt.TEAM:return e.byTeamId}}(a,n)[r];return!!i&&e in i&&i[e].level===g.e6.OWNER}function S(e,r){for(let n of e)if(n.level>=r)return!0;return!1}function w(e,r){let n=r.user?.id,a=r.roles;return e in a.byTeamId&&n&&n in a.byTeamId[e]?[a.byTeamId[e][n]]:[]}function A(e,r){let n=r.user&&r.user.id,a=[],i=r.roles;e in i.byFolderId&&n&&n in i.byFolderId[e]&&a.push(i.byFolderId[e][n]);let o=r.folders[e];return o&&o.team_id&&!o.is_invite_only&&(a=a.concat(w(o.team_id,r))),a}function N(e,r){let n=r.user&&r.user.id,a=r.roles,i=[];e in a.byRepoId&&n&&n in a.byRepoId[e]&&i.push(a.byRepoId[e][n]);let o=r.repos[e];return o&&(i=[...i,...A(o.folder_id,r)]),i}function C(e,r){let n=r.user&&r.user.id,a=r.roles;return e in a.byFileKey&&n&&n in a.byFileKey[e]?a.byFileKey[e][n]:null}function L(e,r,n){switch(e){case u.vt.FILE:return function(e,r){let n=[],a=C(e,r);null!==a&&n.push(a);let i=r.fileByKey[e];return i&&i.folder_id&&(n=n.concat(A(i.folder_id,r))),i&&i.file_repo_id&&(n=[...n,...N(i.file_repo_id,r)]),n}(r,n);case u.vt.FILE_REPO:return N(r,n);case u.vt.FOLDER:return A(r,n);case u.vt.TEAM:return w(r,n)}}function O(e,r,n){let a=(0,h._)(e,n);if(!a)return!1;let i=n.user?.id,s=a.org_id,l=(0,o.kc)().sc_open_team_deprecation,c=a.sharing_audience_control;if(s){let o=!l&&r<=g.e6.EDITOR&&j(s,n)&&a.org_access===u.bU.PUBLIC&&a.default_permission===u.sC.EDIT,d=S(w(e,n),r),m=r<=g.e6.ADMIN&&(d||J(a,n,i)),p=!l&&r<=g.e6.VIEWER&&j(s,n)&&a.org_access===u.bU.PUBLIC,h=j(s,n)&&(r<=g.e6.VIEWER&&c===u.PQ.ORG_VIEW||r<=g.e6.EDITOR&&c===u.PQ.ORG_EDIT);return(m||p||d||o||h)&&$(s,n)}return R(e,r,n)}function R(e,r,n){return S(w(e,n),r)&&!function(e,r,n){if(n.user&&!(0,l.cn)(n.user))return!1;let a=(0,h._)(e,n);if(!a)return!1;let i=!!n.user&&(0,l.GU)(n.userEduGracePeriods,(0,l.cn)(n.user),a.id,a.student_team).showAccessRestricted;return r>g.e6.VIEWER&&i}(e,r,n)}function P(e,r,n){let a;let i=n.user&&n.user.id,s=n.folders[e];if(!i||!s)return!1;let l=(0,d.oq)(s.id,n);if(l&&!$(l,n))return!1;let c=s.team_id&&n.teams[s.team_id],m=(0,o.kc)().sc_open_team_deprecation,p=s.sharing_audience_control;if(!m&&l&&j(l,n)&&r<=g.e6.VIEWER&&c&&c.org_access===u.bU.PUBLIC&&!s.is_invite_only||!m&&l&&j(l,n)&&r<=g.e6.EDITOR&&c&&c.org_access===u.bU.PUBLIC&&!s.is_invite_only&&!s.is_view_only&&c.default_permission===u.sC.EDIT||l&&j(l,n)&&(r<=g.e6.EDITOR&&p===u.PQ.ORG_EDIT||r<=g.e6.VIEWER&&p===u.PQ.ORG_VIEW))return!0;let h=A(e,n);return(h.forEach(e=>{e.resource_type===u.vt.FOLDER&&(a=e)}),!s.team_id||s.is_invite_only||s.is_view_only&&r>=g.e6.EDITOR)?!!a&&a.level>=r:S(h,r)}function D(e,r){return P(e,g.e6.VIEWER,r)}function k(e,r){return P(e,g.e6.EDITOR,r)}function M(e,r){return P(e,g.e6.OWNER,r)}function F(e,r){return O(e,g.e6.VIEWER,r)}function x(e,r){return O(e,g.e6.EDITOR,r)}function U(e,r){return O(e,g.e6.ADMIN,r)}function B(e,r){return O(e,g.e6.OWNER,r)}function V(e,r){return R(e,g.e6.VIEWER,r)}function G(e,r){return R(e,g.e6.EDITOR,r)}function H(e,r){return R(e,g.e6.ADMIN,r)}function W(e,r){return e.level!==g.e6.OWNER&&(e.level===g.e6.ADMIN?U(e.resource_id_or_key,r):x(e.resource_id_or_key,r))}function K(e,r){return e.level!==g.e6.OWNER&&e.level!==g.e6.ADMIN&&k(e.resource_id_or_key,r)}function Y(e,r,n){return n?e.orgUsersByOrgId[r]?.[n]??(0,a.J)(e,"org_user",r):null}function $(e,r){let n=r.user;if(!e||!n)return!1;let i=r.orgById[e]??(0,a.J)(r,"org",e);return q(Y(r,e,n.id),i,_.jh.GUEST)}function j(e,r,n){if(!e)return!1;n=n||r.user?.id;let i=r.orgById[e]??(0,a.J)(r,"org",e);return q(Y(r,e,n),i,_.jh.MEMBER)}function z(e,r,n){if(!e)return!1;let i=r.orgById[e]??(0,a.J)(r,"org",e);return n=n||r.user?.id,q(Y(r,e,n),i,_.jh.ADMIN)}function q(e,r,n){return!!r&&!!e&&(0,f.Ay)(e.permission)>=n}function X(e,r){return(0,m.x9)(e.orgUsersByOrgId,r).some(n=>j(n.org_id,e,r))}function J(e,r,n){return e.org_access!==u.bU.SECRET&&function(e,r,n){if(!(n=n||r.user?.id)||!e||!r.currentUserOrgId)return!1;let i=r.currentUserOrgId&&r.user&&r.orgUsersByOrgId[r.currentUserOrgId]?r.orgUsersByOrgId[r.currentUserOrgId][n]:null;null===i&&(i=(0,a.J)(r,"org_user",r.currentUserOrgId));let o=(0,h._)(e,r);if(!o||!i||r.currentUserOrgId!==o.org_id)return!1;if(H(e,r))return!0;let s=z(r.currentUserOrgId,r,n);return o.org_access!==u.bU.SECRET&&(s||!!(o.workspace_id&&function(e,r,n){n=n||r.user?.id;let a=r.currentUserOrgId;return!!(e&&n&&a&&r.orgUsersByOrgId?.[a]?.[n].workspace_users?.find(r=>r.permission===u.bp.ADMIN&&r.workspace_id===e))}(o.workspace_id,r,n)))}(e.id,r,n)}function Z(e){return(0,f.R$)(e.user,e.currentUserOrgId)}function Q(e,r){return!!r&&null!=Object.entries(e.teamUserByTeamId??{}).find(([n,a])=>{let i=e.teams[n];return!!i?.student_team_at&&null!=a[r]})}function ee(e,r){return"whiteboard"===e.editorType&&!!e.parentOrgId&&!!r.orgById[e.parentOrgId]?.figjam_disabled_at}function et(e,r){return!!e&&!!r.orgById[e]?.figjam_disabled_at}function er(e,r){return et((0,d.oq)(e.id,r)||null,r)}function en(e,r){if(e.level!==g.e6.VIEWER&&e.level!==g.e6.VIEW_PROTOTYPES)return null;let n=r.folders[e.resource_id_or_key];if(!n)return null;let a=e.user_id&&n.team_id&&r.roles.byTeamId[n.team_id]&&r.roles.byTeamId[n.team_id][e.user_id],i=!n.is_invite_only&&!n.is_view_only;return a&&a.level>g.e6.VIEWER&&i?(0,c.t)("permissions.can_still_edit_team_project_is_in"):null}function ea(e,r){return!!e&&!!e.canEdit&&(e.team?(0,p.w5)(e.teamId?r.teams[e.teamId]:void 0):!!e.parentOrgId)}function ei(){if(void 0===i.D)return!1;let e=i.D.getState(),r=b(e);return ea(e.openFile,r)}},556261:(e,r,n)=>{n.d(r,{FR:()=>M,Fh:()=>A,NN:()=>O,Tn:()=>k,UP:()=>R,b_:()=>L,bv:()=>P,dh:()=>C,gI:()=>D,wt:()=>N,wy:()=>S,yN:()=>w});var a=n(411855),i=n(188507),o=n(67151),s=n(171812),l=n(432258),c=n(776250),d=n(374626),u=n(391388),m=n(742808),p=n(647899),h=n(672517),_=n(694687),g=n(99506),f=n(596607);n(643067);var E=n(243987),y=n(984968);n(36816);var b=n(88407);let I=new Map;function T(e,r,n={}){let a=[e,n.component,n.attribute,n.model].join("__________");I.has(a)||(c.az.trackDefinedEvent(e,r),I.set(a,!0))}function v(e,r,n){if(!n){window.__jestConfig__?.rolloutFlags&&(n="cutover");let a=(0,p.gP)(e);(n=a?.get(r||"group_default",void 0))||(n="passthrough")}return n}function S(e){let{name:r}=(0,h.j6)(),n=v("tou_current_plan_user_migrator_config",e.migrationGroup,e.phase),c=a.useRef(!1),p="shadowread"===n||"cutover"===n,_=(0,i.d4)(e=>{let r=e.user?.id;return r?e.teamUserByTeamId?.[y.ZT(e)]?.[r]??null:null}),g=(0,i.d4)(e=>(0,f.xw)(e)),E=(0,d.md)((0,b.gq)(p))??u.Qw.loaded(null),I="loaded"===E.status?E.data:null;(0,m.I)(p&&"loaded"===E.status,n=>{T("plans.current_plan_user_lg_load_timing",{model:"planUser",type:I?.key.type??"",duration:n,component:e.component,attribute:e.attribute,trackingContext:r},{component:e.component,attribute:e.attribute,model:"planUser"})});let S=e.legacy(_??null,g??null);if("passthrough"===n)return S;let w=e.migrated(I);switch(("shadowread"===n||"cutover"===n)&&!c.current&&((0,l.Vq)(_)||(0,l.Vq)(g))&&"loaded"===E.status&&!(0,s.c2)(S,w)&&(T("plans.current_plan_user_view_shadow_error",{type:I?.key.type??"",component:e.component,attribute:e.attribute,phase:n,migrationGroup:e.migrationGroup,legacyValue:JSON.stringify(S),migratedValue:JSON.stringify(w),trackingContext:r},{component:e.component,attribute:e.attribute,model:"planUser"}),c.current=!0),n){case"shadowread":return S;case"cutover":return w;default:(0,o.xb)(n)}}function w(e){let{name:r}=(0,h.j6)(),n=v("tou_current_user_plan_migrator_config",e.migrationGroup,e.phase),i=a.useRef(!1),c="shadowread"===n||"cutover"===n,p=(0,y.ol)(),g=(0,_.sZ)(),f=(0,d.md)((0,b.rQ)(c))??u.Qw.loaded(null),E=(0,d.md)((0,b.Oh)(c))??u.Qw.loaded(null),I="loaded"===f.status?f.data:null,S="loaded"===E.status?E.data:null;(0,m.I)(c&&"loaded"===f.status,n=>{T("plans.current_plan_lg_load_timing",{model:"planPublicInfo",type:I?.key.type??"",duration:n,component:e.component,attribute:e.attribute,migrationGroup:e.migrationGroup,trackingContext:r},{component:e.component,attribute:e.attribute,model:"planPublicInfo"})}),(0,m.I)(c&&"loaded"===E.status,n=>{T("plans.current_plan_lg_load_timing",{model:"plan",type:S?.key.type??"",duration:n,component:e.component,attribute:e.attribute,migrationGroup:e.migrationGroup,trackingContext:r},{component:e.component,attribute:e.attribute,model:"plan"})});let w=e.legacy(p??null,g??null);if("passthrough"===n)return w;let A=e.migrated(I,S);switch(("shadowread"===n||"cutover"===n)&&!i.current&&((0,l.Vq)(p)||(0,l.Vq)(g))&&"loaded"===f.status&&!(0,s.c2)(w,A)&&(T("plans.current_plan_view_shadow_error",{type:I?.key.type??"",component:e.component,attribute:e.attribute,phase:n,legacyValue:JSON.stringify(w),migratedValue:JSON.stringify(A),migrationGroup:e.migrationGroup,trackingContext:r},{component:e.component,attribute:e.attribute}),i.current=!0),n){case"shadowread":return w;case"cutover":return A;default:(0,o.xb)(n)}}function A(e){let{name:r}=(0,h.j6)(),n=(0,d.md)((0,b.Oh)(!0));return((0,m.I)("loaded"===n.status,e=>{c.az.trackDefinedEvent("plans.current_plan_lg_load_timing",{model:"plan",type:n.data?.key.type??"",duration:e,component:"",attribute:"",trackingContext:r})}),e)?n:"loaded"===n.status?n.data:null}function N(e){let{name:r}=(0,h.j6)(),n=(0,d.md)((0,b.rQ)(!0));return((0,m.I)("loaded"===n.status,e=>{T("plans.current_plan_lg_load_timing",{model:"planPublicInfo",type:n.data?.key.type??"",duration:e,component:"",attribute:"",trackingContext:r})}),e)?n:"loaded"===n.status?n.data:null}function C(e){return w({...e,attribute:"planName",legacy:(e,r)=>r?.name||e?.name,migrated:(e,r)=>r?.name})}function L(e){return w({...e,attribute:"orgId",legacy:(e,r)=>r?.id,migrated:e=>{if(e?.key.type===g.OL.ORG)return e?.key.parentId??void 0}})}function O(e){return S({...e,attribute:"currentOrgUserUserId",legacy:(e,r)=>r?.user_id,migrated:e=>e?.userId??void 0})}function R(e){return w({...e,attribute:"planType",legacy:(e,r)=>r?g.OL.ORG:e?g.OL.TEAM:void 0,migrated:e=>e?.key.type})}function P(e){let r=R(e);return w({...e,attribute:"hasPlanUser",legacy:(e,n)=>{switch(r){case g.OL.ORG:return!!n;case g.OL.TEAM:return!!e;default:return!1}},migrated:e=>!!r&&!!e})}function D(e){return S({...e,attribute:"isOrgAdmin",legacy:(e,r)=>r?.permission===g._D.ADMIN,migrated:e=>e?.permission===g.Xn.ADMIN})}function k(e){return S({...e,attribute:"isOrgGuest",legacy:(e,r)=>r?.permission===g._D.GUEST,migrated:e=>e?.permission===g.Xn.GUEST})}function M(e){return w({...e,attribute:"isProTeam",legacy:e=>(0,E.w5)(e)&&!e?.org_id,migrated:e=>!!e&&[g.Ag.PRO,g.Ag.STUDENT].includes(e.tier)})}},344339:(e,r,n)=>{n.d(r,{LC:()=>s,i5:()=>o,s$:()=>i});var a=n(330654);n(99506);var i=(e=>(e.DISABLE_FIGJAM="disable_figjam",e.DISABLE_WORKSHOP="disable_workshop",e.VOICE="voice",e.DISABLE_AI_FEATURES="disable_ai_features",e))(i||{}),o=(e=>(e.ELIGIBLE="eligible",e.UPSELL="upsell",e.INELIGIBLE="ineligible",e))(o||{}),s=(e=>(e.ENABLED="enabled",e.DISABLED="disabled",e))(s||{});let l=a.object({supports:a.nativeEnum(o),enabled:a.nativeEnum(s)});a.object({disable_figjam:l,voice:l,disable_workshop:l,disable_ai_features:l})},846724:(e,r,n)=>{n.d(r,{HT:()=>m,T4:()=>l});var a=n(67151);n(133537);var i=n(720647),o=n(99506),s=n(344339);function l(e,r){if(e){if(r===i.G_.DESIGN)return e.designPaidStatus;if(r===i.G_.FIGJAM)return e.whiteboardPaidStatus;(0,a.xb)(r,"Unknown license type")}}let c={[s.s$.VOICE]:{environments:{gov:s.i5.INELIGIBLE},tiers:{[o.Ag.ORG]:s.i5.ELIGIBLE,[o.Ag.ENTERPRISE]:s.i5.ELIGIBLE,[o.Ag.PRO]:s.i5.ELIGIBLE,[o.Ag.STUDENT]:s.i5.ELIGIBLE,[o.Ag.STARTER]:s.i5.UPSELL}},[s.s$.DISABLE_WORKSHOP]:{environments:{gov:s.i5.ELIGIBLE},tiers:{[o.Ag.ORG]:s.i5.ELIGIBLE,[o.Ag.ENTERPRISE]:s.i5.ELIGIBLE,[o.Ag.PRO]:s.i5.UPSELL,[o.Ag.STUDENT]:s.i5.UPSELL,[o.Ag.STARTER]:s.i5.UPSELL}},[s.s$.DISABLE_FIGJAM]:{environments:{gov:s.i5.ELIGIBLE},tiers:{[o.Ag.ORG]:s.i5.ELIGIBLE,[o.Ag.ENTERPRISE]:s.i5.ELIGIBLE,[o.Ag.PRO]:s.i5.UPSELL,[o.Ag.STUDENT]:s.i5.UPSELL,[o.Ag.STARTER]:s.i5.UPSELL}},[s.s$.DISABLE_AI_FEATURES]:{environments:{gov:s.i5.ELIGIBLE},tiers:{[o.Ag.ORG]:s.i5.ELIGIBLE,[o.Ag.ENTERPRISE]:s.i5.ELIGIBLE,[o.Ag.PRO]:s.i5.ELIGIBLE,[o.Ag.STUDENT]:s.i5.ELIGIBLE,[o.Ag.STARTER]:s.i5.ELIGIBLE}}};function d(e,r,n=window.INITIAL_OPTIONS.cluster_name){return"gov"===n&&c[r].environments.gov?c[r].environments.gov:e&&c[r]?.tiers[e.tier]?c[r].tiers[e.tier]:s.i5.INELIGIBLE}function u(e,r,n=window.INITIAL_OPTIONS.cluster_name){if(d(e,r,n)===s.i5.INELIGIBLE||!e)return s.LC.DISABLED;let i=d(e,r,n);switch(r){case s.s$.VOICE:if(i===s.i5.ELIGIBLE)return e.voiceEnabled?s.LC.ENABLED:s.LC.DISABLED;return s.LC.DISABLED;case s.s$.DISABLE_FIGJAM:if(i===s.i5.ELIGIBLE)return e.figjamDisabledAt?s.LC.ENABLED:s.LC.DISABLED;return s.LC.DISABLED;case s.s$.DISABLE_WORKSHOP:if(i===s.i5.ELIGIBLE)return e.workshopEnabled?s.LC.DISABLED:s.LC.ENABLED;return s.LC.DISABLED;case s.s$.DISABLE_AI_FEATURES:if(i===s.i5.ELIGIBLE)return e.aiFeaturesEnabled?s.LC.ENABLED:s.LC.DISABLED;return s.LC.DISABLED;default:(0,a.xb)(r,"Unknown plan feature")}}function m(e){return{...e,voice:{supports:d(e,s.s$.VOICE),enabled:u(e,s.s$.VOICE)},disable_figjam:{supports:d(e,s.s$.DISABLE_FIGJAM),enabled:u(e,s.s$.DISABLE_FIGJAM)},disable_workshop:{supports:d(e,s.s$.DISABLE_WORKSHOP),enabled:u(e,s.s$.DISABLE_WORKSHOP)},disable_ai_features:{supports:d(e,s.s$.DISABLE_AI_FEATURES),enabled:u(e,s.s$.DISABLE_AI_FEATURES)}}}},960628:(e,r,n)=>{let a;n.d(r,{$y:()=>X,BT:()=>j,B_:()=>eE,G1:()=>ea,H4:()=>ey,I2:()=>M,IM:()=>et,It:()=>eN,KB:()=>D,LL:()=>N,ME:()=>ep,Mw:()=>W,OD:()=>el,Q4:()=>U,Ql:()=>V,Qx:()=>er,Rp:()=>x,Sf:()=>R,Sx:()=>Q,Ty:()=>k,VM:()=>B,W5:()=>F,Xx:()=>L,_C:()=>J,b_:()=>K,cI:()=>O,d1:()=>a,dG:()=>eA,f$:()=>es,fS:()=>ew,fd:()=>$,hY:()=>ef,i1:()=>q,iP:()=>Y,jG:()=>eS,jS:()=>G,n4:()=>em,nf:()=>Z,o5:()=>eo,oZ:()=>en,po:()=>P,q$:()=>z,qC:()=>eL,sd:()=>ee,wk:()=>C,xi:()=>A});var i=n(414507),o=n(299321),s=n(932345),l=n(904669),c=n(297666),d=n(776621),u=n(910620);let m=[],p=[],h=[],_=[],g=[],f=[],E=[],y=[],b=[],I=[],T=[],v=[],S=null,w=new class{constructor(){this.task=null,this.eventByGuid=new Map,this.styleEventByGuid=new Map,this.nodeEventByGuid=new Map,this.timeOutMs=100,this.flush=()=>{let e=[];for(let r of this.eventByGuid.values())if("NONE"!==r.nodeType)for(let n of r.events)e.push(this.injectTypeIntoEvent(r,n));for(let r of g)r(e);let r=[];for(let e of this.styleEventByGuid.values())if("NONE"!==e.nodeType)for(let n of e.events)r.push(n);for(let e of f)e(r);let n=[];for(let e of this.nodeEventByGuid.values())if("NONE"!==e.nodeType)for(let r of e.events)n.push({...r,nodeType:e.nodeType});for(let e of E)e(n);this.eventByGuid.clear(),this.styleEventByGuid.clear(),this.nodeEventByGuid.clear(),this.task=null}}onEventFired(e){null==this.task&&(this.task=scheduler.postTask(this.flush,{delay:this.timeOutMs,priority:"user-visible"}));let r=this.eventByGuid.get(e.id)??{nodeType:this.publicNodeTypeFromEvent(e),events:[]};if(!r)return;"NONE"===r.nodeType&&(r.nodeType=this.publicNodeTypeFromEvent(e));let n=r.events.find(r=>r.type===e.type&&r.origin===e.origin);if(n)for(let r of e.properties)n.properties.add(r);else{let n=(0,l.UN)().get(e.id);n&&(e.type===o.iIc.STYLE_PROPERTY_CHANGE||e.type===o.iIc.STYLE_CREATE||e.type===o.iIc.STYLE_DELETE?n.styleKeyForPublish&&r.events.push({id:e.id,origin:e.origin,type:e.type,properties:new Set(e.properties),styleKey:(0,s.nM)({key:n.styleKeyForPublish,version:n.styleVersionHash})}):r.events.push({id:e.id,origin:e.origin,type:e.type,properties:new Set(e.properties),devFriendlyId:(0,l.UN)().developerFriendlyIdFromGuid(e.id),oldContainingCanvas:e.oldContainingCanvas}))}this.eventByGuid.set(e.id,r);let a=(0,l.UN)().get(e.id);if(a){if(a.styleKeyForPublish){let n=r.events.filter(e=>e.type===o.iIc.STYLE_DELETE||e.type===o.iIc.STYLE_CREATE||e.type===o.iIc.STYLE_PROPERTY_CHANGE);this.styleEventByGuid.set(e.id,{nodeType:this.publicNodeTypeFromEvent(e),events:n})}else{let n=r.events.filter(e=>e.type===o.iIc.CREATE||e.type===o.iIc.PROPERTY_CHANGE||e.type===o.iIc.DELETE).map(e=>{let r="";return e.type===o.iIc.CREATE||e.type===o.iIc.PROPERTY_CHANGE?r=a.containingCanvas||"":e.type===o.iIc.DELETE&&(r=e.oldContainingCanvas?.toString()||""),""===r&&(0,d.$D)(i.FigmaTeam.EXTENSIBILITY,Error("Containing canvas for nodechange event is empty")),{...e,containingCanvas:r}});this.nodeEventByGuid.set(e.id,{nodeType:this.publicNodeTypeFromEvent(e),events:n})}}}publicNodeTypeFromEvent(e){let r=(0,l.UN)().get(e.id);return r&&r?.type!=="NONE"?(0,u.w)(r):"NONE"}injectTypeIntoEvent(e,r){return r.type===o.iIc.CREATE||r.type===o.iIc.DELETE||r.type===o.iIc.PROPERTY_CHANGE?{...r,nodeType:e.nodeType}:r}};function A(){a={selectionChange(e){for(let r of m)e?r.boxSelection():r.normal()},boxSelectionEnded(){for(let e of m)e.boxSelection.flush()},currentPageChange(){for(let e of p)e()},timerChange(e){for(let r of h)r(e)},documentChange(e){w.onEventFired(e)},codegenPreferencesChange(e){for(let r of y)r(e)},slidesViewChange(e){for(let r of b)r({view:e})},stackInvariantsEnforced(e){eC?.(e)},pluginPageLoaded(e){for(let r of I)r(e)},pluginAccessibleNodeIds(){let e=new Set;for(let r of T)r().forEach(r=>e.add(r));return Array.from(e)},pluginAccessiblePages(){let e=new Set;for(let r of v)r().forEach(r=>e.add(r));return Array.from(e)}}}function N(e){m.push({normal:e,boxSelection:(0,c.s)(e,500)})}function C(e){m=m.filter(r=>r.normal!==e||(r.boxSelection.cancel(),!1))}function L(e){p.push(e)}function O(e){p=p.filter(r=>r!==e)}function R(e){h.push(e)}function P(e){h=h.filter(r=>r!==e)}function D(e){_.push(e)}function k(e){_=_.filter(r=>r!==e)}function M(e){for(let r of _)if(!1===r(e))return!1;return!0}function F(e){I.push(e)}function x(e){I=I.filter(r=>r!==e)}function U(e){T.push(e)}function B(e){T=T.filter(r=>r!==e)}function V(e){v.push(e)}function G(e){v=v.filter(r=>r!==e)}function H(){g.length||f.length||E.length?o.NfO.setIsDocumentChangeCallbackRegistered(!0):o.NfO.setIsDocumentChangeCallbackRegistered(!1)}function W(e){g.push(e),H()}function K(e){g=g.filter(r=>r!==e),H()}function Y(e){f.push(e),H()}function $(e){f=f.filter(r=>r!==e),H()}function j(e){E.push(e),H()}function z(e){E=E.filter(r=>r!==e),H()}function q(e){y.push(e)}function X(e){y=y.filter(r=>r!==e)}function J(e){b.push(e),H()}function Z(e){b=b.filter(r=>r!==e),H()}let{set:Q,remove:ee,has:et,run:er}=eO(),{set:en,remove:ea,has:ei,run:eo,reset:es}=eO(),{set:el,remove:ec,has:ed,run:eu,reset:em}=eO(),{set:ep,remove:eh,has:e_,run:eg,reset:ef}=eO(),{set:eE,remove:ey,has:eb,run:eI,reset:eT,runOrTimeout:ev}=eO();function eS(e){S=e}function ew(){return!!S}function eA(){S=null}async function eN(){return!S||await S()}let eC=null;function eL(e){return eC=e,()=>eC=null}function eO(){let e;let r=new Promise(r=>{e=r}),n=null,a=()=>{r=new Promise(r=>{e=r}),n=null};return{set:r=>{n=r,e(r)},remove:e=>{e===n&&a()},has:()=>!!n,run:async(...e)=>{let n=await r;return await n(...e)},runOrTimeout:async(e,...n)=>{let a=new Promise(r=>{setTimeout(()=>{r()},e)}),i=await Promise.race([r,a]);return void 0===i?{didRun:!1}:{didRun:!0,returnValue:await i(...n)}},reset:a}}},215822:(e,r,n)=>{n.d(r,{$H:()=>eX,$u:()=>tu,AG:()=>tt,Ar:()=>eI,Bw:()=>e0,CA:()=>es,CB:()=>ew,DM:()=>td,EK:()=>Q,EY:()=>ek,GX:()=>X,Gc:()=>eZ,JT:()=>eQ,K$:()=>J,L1:()=>eK,L8:()=>e1,LW:()=>ts,M5:()=>e8,MB:()=>ep,MH:()=>eJ,Mi:()=>e2,Ms:()=>ed,NW:()=>te,Oe:()=>eh,Pl:()=>et,Q4:()=>eD,Qt:()=>eL,Qx:()=>ev,Rd:()=>eC,Rt:()=>eR,Ru:()=>e7,SW:()=>ez,T:()=>Z,Th:()=>tc,Tk:()=>eA,Tz:()=>ei,UH:()=>e4,VQ:()=>tm,W4:()=>tn,WC:()=>e6,Wg:()=>ea,YG:()=>ta,YQ:()=>tp,ZB:()=>eq,ZT:()=>eM,_H:()=>e5,_V:()=>to,_w:()=>eO,c2:()=>j,fR:()=>e3,i8:()=>ej,iz:()=>en,ky:()=>eP,lT:()=>ef,mI:()=>eY,mm:()=>eu,mx:()=>tl,my:()=>eN,nW:()=>eB,nf:()=>e$,oD:()=>eU,ou:()=>eG,pk:()=>e9,qH:()=>el,t3:()=>em,tH:()=>eW,u0:()=>eH,uF:()=>eT,vj:()=>ex,wf:()=>eF,xC:()=>tr}),n(661743);var a=n(188507),i=n(943632),o=n(414507),s=n(157663),l=n(133537),c=n(38329),d=n(966712),u=n(563706),m=n(563042),p=n(776621),h=n(96328),_=n(30637),g=n(27087),f=n(939863),E=n(392592),y=n(837324),b=n(466636),I=n(762194),T=n(545941),v=n(290796),S=n(782501),w=n(356390);n(848661);var A=n(560718),N=n(99506),C=n(147206),L=n(285334),O=n(23001),R=n(239671),P=n(813408),D=n(178787),k=n(376485),M=n(591463),F=n(13517),x=n(722416),U=n(375827),B=n(501256),V=n(507956),G=n(697551),H=n(258237),W=n(604978),K=n(441088),Y=n(410225),$=n(4564);async function j(e,{ignoreMissingEditorType:r,resourceType:n,isPublishing:a}){let i=await em(e,{resourceType:n});if(r&&i.error?.text===er)return i.manifest;if(i.error)throw Error((0,k.am)(i.error));return i.manifest}function z({parameters:e,parameterOnly:r},n){if(e&&function(e,r){if(!e.length)throw Error(`Expected "${r}.parameters" to have non-empty parameter list.`);let n=new Set;e.forEach(e=>{if(n.has(e.key))throw Error(`Expected "${r}.parameters" to have unique keys, but got more than one parameter with key: "${e.key}"`);n.add(e.key)});let a=!1;for(let{key:r,optional:n}of e){if(a&&!n)throw Error(`Optional parameters must be listed last in the parameter list. ${r} not marked as optional.`);n&&(a=!0)}}(e,n),r&&!e)throw Error(`Expected parameters to be defined for "${n}" marked as parameterOnly.`)}let q={[R.nT.Design]:k.FW.FIGMA,[R.nT.DevHandoff]:k.FW.DEV,[R.nT.Whiteboard]:k.FW.FIGJAM,[R.nT.Slides]:k.FW.SLIDES,[R.nT.Sites]:k.FW.SITES,[R.nT.Cooper]:k.FW.FIGMA,[R.nT.Illustration]:k.FW.FIGMA};function X(e){return q[e]}function J(){return(0,a.d4)(e=>"fullscreen"===e.selectedView.view?q[e.selectedView.editorType]:void 0)}function Z(){let e=c.D.getState().selectedView;if("fullscreen"===e.view)return q[e.editorType]}function Q(e,r){return Array.isArray(r)?r.includes(e):e===k.FW.FIGMA}k.FW.FIGMA,R.nT.Design,k.FW.DEV,R.nT.DevHandoff,k.FW.INSPECT,R.nT.DevHandoff,k.FW.FIGJAM,R.nT.Whiteboard,k.FW.SLIDES,R.nT.Slides,k.FW.SITES,R.nT.Sites;class ee extends Error{constructor(e,r){super(e),this.message=e,this.manifest=r}}function et(){return er}let er='Missing editorType in manifest.  Specify a combination of ["figma", "figjam", "dev"]';function en(e){return e?e.includes(k.FW.FIGMA)&&e.includes(k.FW.FIGJAM)?k.HK.UNIVERSAL:e.includes(k.FW.FIGJAM)?k.HK.FIGJAM:e.includes(k.FW.FIGMA)&&(0,k.Pe)(e)?k.HK.FIGMA_AND_INSPECT:(0,k.Pe)(e)?k.HK.INSPECT:k.HK.FIGMA:k.HK.FIGMA}function ea(e,r){switch(e){case k.HK.FIGJAM:return R.nT.Whiteboard;case k.HK.FIGMA:return R.nT.Design;case k.HK.FIGMA_AND_INSPECT:case k.HK.INSPECT:return R.nT.DevHandoff;case k.HK.UNIVERSAL:return r??(0,R.wN)((0,I.r)())}}function ei(e){return e===N._Y.WHITEBOARD?R.nT.Whiteboard:R.nT.Design}function eo(e,r){let n=new Set(k.UX);return e.filter(e=>!n.has(e)||r?.has(e))}function es(e){return k.Kd.some(r=>e.includes(r))}class el{constructor(e,r){this.permissions=e,this.trustedPluginOrigin=r}static none(){return new el([],void 0)}static forTest(e){return new el(e||k.XS,void 0)}static forConsoleGlobal(){let e=[...k.pR];return(0,d.kc)().first_draft_debug&&e.push("firstdraft"),new el(e,void 0)}static forFirstPartyPlugin(){return new el(k.XS,void 0)}static forLocalPlugin(e){let r=e.manifest.permissions||[];if((0,p.Lo)("ValidatedPluginPermissions","Validating permissions for local plugin",{pluginID:e.manifest.id,requestedPermissions:r}),(0,d.kc)().plugins_internal_apis)return new el(r,"*");let n=eo(r);return n.length<r.length&&(0,p.$D)(o.FigmaTeam.EXTENSIBILITY,Error("Untrusted local plugin denied internal api permissions")),new el(n,void 0)}static forInstalledPlugin(e){let r=e.manifest.permissions||[];if((0,p.Lo)("ValidatedPluginPermissions","Validating permissions for installed plugin",{pluginID:e.plugin_id,requestedPermissions:r}),(0,L.eZ)(e.plugin_id))return new el(eo(r,(0,L.xp)(e.plugin_id)),(0,L.HB)(e.plugin_id));let n=eo(r);return n.length<r.length&&(0,p.$D)(o.FigmaTeam.UNOWNED,Error("Untrusted installed plugin denied internal api permissions")),new el(n,void 0)}}function ec(e){try{return new URLPattern(e)}catch(e){return null}}function ed(e,r){let n=[],a=0;for(let[i,o]of r)n.push(e.substring(a,i)),a=o;return n.push(e.substring(a,e.length)),n.join("")}function eu(e,r,n){var a,i,o;let s,l,c,d,u;let m="widget"===n.resourceType||!!r.cachedContainsWidget;if("error"in r)l={type:k.ho.LOAD,text:r.error};else try{c=JSON.parse(r.manifest)}catch(e){l={type:k.ho.PARSE,text:e.message}}if("unknown"===n.resourceType){if(c)m=c.containsWidget;else if("manifest"in r)try{m=!!/containsWidget/.test(r.manifest)}catch{}}if(c){try{(0,x.MG)(c.editorType,M.ib,"manifest.editorType"),d=c.editorType}catch{}try{(0,x.MG)(c.capabilities,M.hb,"manifest.capabilities"),u=c.capabilities}catch{}}let p=(0,$.M)();if("manifest"in r&&p?.updateCachedContainsWidget({id:e,cachedContainsWidget:m}),!l)try{s=function(e,r){try{(0,x.MG)(e,"widget"===r.resourceType?M.Vf:M._O,"manifest")}catch(e){if(e instanceof Error)throw Error(function(e){let r="but got additional property",n=e.lastIndexOf(r);if(-1!==n){let a=e.substring(n+r.length).replace(/"/g,"").trim();return`Manifest has unexpected extra property: ${a}`}return e}(e.message));throw e}if("plugin"===r.resourceType){if(e.relaunchButtons){let r=new Set;e.relaunchButtons.forEach(n=>{if(r.has(n.command))throw new ee(`Expected "manifest.relaunchButtons" to have unique commands, but got more than one button with command: "${n.command}"`,e);r.add(n.command)})}!function(e){if(z(e,"manifest"),e.menu){if(e.parameters)throw Error("manifest.parameters should not be specified when menu items are defined");!function e(r){for(let n of r)(0,k.Av)(n)?z(n,n.name):(0,k.xg)(n)&&e(n.menu)}(e.menu)}}(e)}if(!function(e){if(!("editorType"in e))throw new ee(er,e);if(e.editorType.some(e=>!k.Ye.includes(e))||e.editorType.length<1||e.editorType.length>k.Ye.length)throw Error('Invalid editorType in manifest.  Specify a combination of ["figma", "figjam", "dev"]')}(e),!function(e){if(e.permissions){let r=e.permissions.find(e=>!k.XS.includes(e));if(void 0!==r)throw new ee(`Invalid permission specified: ${r}`,e)}}(e),!function(e){if(e.capabilities)for(let r of e.capabilities){if(k.Dk.includes(r)||function(e,r){throw new ee(`Invalid capability specified: ${r}`,e)}(e,r),"panel"===r||"inspect"===r||"codegen"===r||"linkpreview"===r||"vscode"===r){if(!(0,k.Pe)(e.editorType))throw new ee(`Capability "${r}" requires "editorType" to include "dev"`,e);if(e.containsWidget)throw new ee(`Capability "${r}" is not supported for widgets`,e)}if((0,K.T)()&&!e.capabilities.includes("vscode"))throw new ee('Manifest must include "vscode" capability to run in Figma for VS Code Extension',e)}}(e),!function(e){if(!e.capabilities?.includes("codegen")){if(e.codegenLanguages)throw new ee("codegenLanguages only supported for codegen plugins",e);if(e.codegenPreferences)throw new ee("codegenPreferences only supported for codegen plugins",e);return}if(!e.codegenLanguages||0===e.codegenLanguages.length)throw new ee("codegen plugins must define at least one language in codegenLanguages",e);if(!e.codegenPreferences)return;let r=e.codegenLanguages?.map(e=>e.value)??[],n=[],a=new Set;for(let i=0;i<e.codegenPreferences.length;i++){let o=e.codegenPreferences[i];for(let n of o.includedLanguages??[])if(!r.includes(n))throw new ee(`Unknown language "${n}" in codegenPreferences[${i}].includedLanguages`,e);if((0,k.MP)(o)&&n.push(o),(0,k.Wt)(o)){if(a.has(o.propertyName))throw new ee('codegenPreferences "action" itemType settings must have unique propertyName values',e);a.add(o.propertyName)}if((0,k.ZV)(o)){let r=0;if(o.options)for(let e of o.options)e.isDefault&&(r+=1);if(1!==r)throw new ee('codegenPreferences itemType: "select" should have exactly one default option',e)}}if(n.length>1)throw new ee('codegenPreferences should have at most one itemType: "unit"',e)}(e),"widget"===r.resourceType&&e.containsWidget&&(function(e){if(e.widgetApi&&e.editorType?.includes(k.FW.SLIDES))throw new ee("Widgets are not supported in Figma Slides",e)}(e),"1.0.0"!==e.widgetApi))throw new ee("Widgets must specify the 'widgetApi' manifest field. The latest version is '1.0.0'",e);if(e.networkAccess){let r=(0,F.pI)(e.networkAccess);if(!r.isValid)throw new ee(r.validationErr,e)}if(e.relatedLinkDomains){if(!(0,k.Pe)(e.editorType))throw new ee("'relatedLinkDomains' is only supported for plugins with 'editorType' containing 'dev'",e);for(let r of e.relatedLinkDomains){if(!r.startsWith("https://")||r.startsWith("http://"))throw new ee(`Invalid domain '${r}' in 'relatedLinkDomains'. Domains must start with 'https:// or 'http://'`,e);if(!ec(r))throw new ee(`Invalid domain '${r}' in 'relatedLinkDomains'.`,e)}}if(e.devResourceDomains){if(!(0,k.Pe)(e.editorType))throw new ee("'devResourceDomains' is only supported for plugins with 'editorType' containing 'dev'",e);for(let r of e.devResourceDomains){if(!r.startsWith("https://")||r.startsWith("http://"))throw new ee(`Invalid domain '${r}' in 'devResourceDomains'. Domains must start with 'https:// or 'http://'`,e);if(!ec(r))throw new ee(`Invalid domain '${r}' in 'devResourceDomains'.`,e)}}return e}(c,{resourceType:m?"widget":"plugin"})}catch(e){l={type:k.ho.VALIDATE,text:e.message},e.manifest&&(s=e.manifest)}let h=m?(a=d,{...eg,editorType:a||void 0}):(i=d,o=u,{...e_,editorType:i||void 0,capabilities:o||void 0});return{plugin_id:s&&s.id||"",name:function(e,r){if(e)return e.name;if(r.lastKnownName)return r.lastKnownName;if(!r.path)return"Error";{let e=r.path.split(/\/|\\/);return e.length>=2?e[e.length-2]:r.path}}(s,r),manifest:s??h,localFileId:e,localFilePath:r.path,error:l}}async function em(e,r){let n=(0,$.M)();try{if(!n)throw Error("desktopApp not available");let a=await n.getLocalFileExtensionManifest(e);return eu(e,a,r)}catch(n){return{plugin_id:"",name:"Error",manifest:"widget"===r.resourceType?eg:e_,localFileId:e,localFilePath:"",error:{type:k.ho.LOAD,text:n.message}}}}async function ep(e){let r;let n=(0,$.M)();try{if(!n)throw Error("desktopApp not available");r=await n.getLocalFileExtensionSource(e)}catch(e){throw Error(`Unable to load code: ${e}`)}if(r.buildErrCode)throw Error("Build error: "+r.stderr+"\nPath was: "+r.path);let a=r.source;return r.html&&(a=function(e,r){let n=e=>JSON.stringify(e).split(/(<!--|-->|\bimport)/g).map((e,r)=>1&r?e.slice(0,2)+'"+"'+e.slice(2):e).join("");if("string"==typeof r)return`const __html__ = ${n(r)};${e}`;let a=Object.entries(r).map(([e,r])=>`[${n(e)}]:${n(r)}`).join(",");return`const __uiFiles__ = {${a}};${e}`}(a,r.html)),a}function eh(e){return e.error?.text===er?e.name:`${e.error?`\u26A0  `:""}${e.name}`}let e_={id:"",name:"",api:"",main:""},eg={id:"",name:"",api:"",main:"",containsWidget:!0,widgetApi:""},ef={id:"",plugin_id:"",manifest:{...e_},name:"",version:"",release_notes:"",installed_by:"user",description:"",tagline:"",creator_policy:"",created_at:"",redirect_icon_url:"",redirect_cover_image_url:"",redirect_code_url:"",is_private:!1,playground_fig_file_key:null},eE={id:"",publisher:{is_restricted_by_current_user:!1,id:"",name:"",img_url:"",img_urls:{},profile_handle:"",primary_user_id:null,current_user_is_following:!1,current_user_is_followed:!1,location:null,follower_count:0,following_count:0,entity_type:P.o1.USER,badges:[],description:""},creator:{id:"",handle:"",img_url:""},category_id:null,versions:{},install_count:0,unique_run_count:0,view_count:0,like_count:0,comment_count:0,unpublished_at:null,current_plugin_version_id:"",roles:{},realtime_token:"",support_contact:"",created_at:"",org_id:null,redirect_thumbnail_url:null,thumbnail_url:null,tags:[],community_publishers:{accepted:[],pending:[]},comments_setting:A.Ni.ENABLED,is_widget:!1,editor_type:"design_and_whiteboard",publishing_status:null,badges:[]},ey={...eE,is_widget:!0},eb={name:"",currentVersionReleaseNotes:"",newVersionReleaseNotes:"",description:"",tagline:"",creatorPolicy:"",categoryId:"",tags:(0,B.Rs)(),iconSrc:"",coverImageSrc:"",widgetSnapshotImageSrc:"",widgetSnapshotImageError:null,supportContact:"",iconImageError:null,coverImageError:null,author:{user_id:""},twoFactorAuthDisabledError:null,emailNotVerifiedError:null,accountDetailsChangedError:null,freemiumRequiredForMigrating:null,commentsSetting:A.Ni.ENABLED,creators:[],publishers:{inputValue:"",tokens:[],errorMessage:""},blockPublishingOnToS:!1,playgroundFigFile:null,playgroundFilePublishType:v.J.Actions.NOOP};function eI(e){if(!e||!e.versions)return null;let r=e.current_plugin_version_id;return r&&e.versions[r]||null}function eT(e){let r=eI(e);return null===r?ef:r}function ev(e,r){if((0,Y.ZY)(r))return(0,Y.Qx)(r);let n=e[r]??{};for(let e in n)return n[e].current_plugin_version_id}let eS=e=>e?.containsWidget?ey:eE;function ew(e,r,n,a){if(n?.manifest?.id){if(e&&e[n?.manifest?.id])return e[n?.manifest?.id];if(r&&r[n?.manifest?.id])return r[n?.manifest?.id]}if(a){if(e&&e[a])return e[a];if(r&&r[a])return r[a]}return eS(n?.manifest)}function eA(e,r,n){if(n?.manifest?.id){if(e&&e[n?.manifest?.id])return e[n?.manifest?.id];if(r&&r[n?.manifest?.id])return r[n?.manifest?.id]}return null}function eN(e,r){return(0,G.Hc)(e,r,eE)}function eC(e,r){return(0,G.Hc)(e,r,ey)}function eL(e,r){let n={};return Object.keys(e).forEach(a=>{let i=e[a];i.roles.org&&i.roles.org.id===r&&(n[i.id]=i)}),n}function eO(e,r){let n={};return Object.keys(e).forEach(a=>{let i=e[a];Q(r,eT(i).manifest.editorType)&&(n[i.id]=i)}),n}function eR(e){return!!e?.roles?.org}function eP(e,r,n=!0){let a={};return Object.keys(e).forEach(i=>{let o=e[i],s=n?H.jY:H.Ro;((0,S.Dd)(o,r)||s(o,r))&&(a[i]=e[i])}),a}function eD(e){return(0,i.LN)(Object.keys(e).map(r=>eT(e[r]))).map(r=>e[r.plugin_id])}function ek(e,r){let n=e.roles,a=!r.is_public&&(0,T.AC)(e);return!!n.is_public!=!!r.is_public||n.org?.id!==r.org?.id||a}function eM(e){if(!e)throw Error("Code string cannot be empty");let r=(0,h.YH)(e).length;if(r>G.yO)throw Error(`plugin code exceeds max size of ${Math.floor(G.yO/1e6)}MB`);return r}function eF(e){return(0,S.Wl)(e,"Icon image")}async function ex(e,r){return eF(e),await eV(e,{width:W.DK,height:W.DK},r,(0,f.t)("community.publishing.error_icon_image_dimensions"))}function eU(e){return(0,S.Wl)(e,"Artwork image")}function eB(e){let r=e?.[0];if(!r)throw Error((0,f.t)("community.publishing.error_file_not_found"));return r}async function eV(e,r,n,a){let{width:i,height:o}=r,s=URL.createObjectURL(e),l=await (0,S.l8)(s);try{if(!function(e,r,n){let{width:a,height:i}=r;return e.width===a&&e.height===i||n&&e.width%a==0&&e.height%i==0&&e.width/a==e.height/i}(l,r,n))throw Error(a);if(l.width===i&&l.height===o)return e;let s=await new Promise((e,r)=>{let n=document.createElement("canvas");try{n.width=i,n.height=o,n.getContext("2d").drawImage(l,0,0,i,o),n.toBlob(n=>n?e(n):r(Error("Failed to resize image")))}catch(e){r(e)}finally{n.remove()}});return new File([s],e.name,{type:s.type})}finally{URL.revokeObjectURL(s),l.remove()}}async function eG(e){let r=(await g.Ay.post(`/api/${(0,G.n)(e)}`)).data.meta;if(!r.id)throw Error("cannot generate plugin ID");return r}function eH(e,r,n){return e.roles.org??(r&&n?{id:r.id,name:r.name,img_url:r.img_url}:null)}function eW(e,r){return r===k.Lu.ORG?e?{org:e}:(s.k.error("publishing a private plugin without a valid org entity."),null):{is_public:!0}}function eK(e){return e.name===eb.name&&e.newVersionReleaseNotes===eb.newVersionReleaseNotes&&e.supportContact===eb.supportContact&&e.description===eb.description&&e.iconSrc===eb.iconSrc&&e.coverImageSrc===eb.coverImageSrc&&null==e.iconBlob&&null==e.coverImageBlob}function eY(e,r,n,a,i){let o;let s=void 0!==r?e.localPlugins[r]:void 0,l=s&&s.manifest,c=ew(e.publishedPlugins,e.publishedWidgets,s,n),d=eT(c),u={...(0,B.Rs)(),tokens:(c.tags||[]).map(e=>({content:e,state:O.d.OK}))},m=l?.permissions?.includes("payments");try{o=(0,S.En)(c,e)}catch(e){throw Error("Unable to get Plugin Data. You might be trying to act on a personal plugin in an Org space.")}let{accepted:p,pending:h}=c.community_publishers,_={...(0,B.Rs)(),tokens:(c.community_publishers?[...p.map(e=>({...e,isPending:!1})),...h?.map(e=>({...e,isPending:!0}))||[]]:[]).reduce((r,n)=>(0,S.Ii)(e.authedProfilesById[n.id],o)?r:r.concat([{state:O.d.OK,content:n}]),[])};return{name:d.name||l&&l.name||eb.name,currentVersionReleaseNotes:d.release_notes||eb.newVersionReleaseNotes,newVersionReleaseNotes:eb.newVersionReleaseNotes,tags:u,supportContact:c.support_contact||e.user?.email||eb.supportContact,description:d.description||eb.description,tagline:d.tagline||eb.tagline,creatorPolicy:d.creator_policy??eb.creatorPolicy,iconSrc:d.redirect_icon_url||eb.iconSrc,widgetSnapshotImageSrc:a||d.redirect_snapshot_url||eb.widgetSnapshotImageSrc,widgetSnapshotImageBlob:i||eb.widgetSnapshotImageBlob,coverImageSrc:d.redirect_cover_image_url||eb.coverImageSrc,iconImageError:eb.iconImageError,coverImageError:eb.coverImageError,widgetSnapshotImageError:eb.widgetSnapshotImageError,twoFactorAuthDisabledError:eb.twoFactorAuthDisabledError,emailNotVerifiedError:eb.emailNotVerifiedError,accountDetailsChangedError:eb.accountDetailsChangedError,freemiumRequiredForMigrating:eb.freemiumRequiredForMigrating,author:o,publishers:_,creators:p.map(e=>({...e,isPending:!1})).concat((h??[]).map(e=>({...e,isPending:!0}))).filter(r=>!(0,S.Ii)(e.authedProfilesById[r.id],o)&&r.entity_type===P.o1.USER),commentsSetting:c.comments_setting||eb.commentsSetting,categoryId:c.category_id||eb.categoryId,blockPublishingOnToS:(0,S.xw)(e),playgroundFigFile:d.playground_fig_file,playgroundFilePublishType:v.J.Actions.NOOP,isPaid:!!c.monetized_resource_metadata||m,price:(0,b.vf)(c.monetized_resource_metadata),isSubscription:c.monetized_resource_metadata?.is_subscription,hasPaymentsApi:m,annualDiscount:c.monetized_resource_metadata?.annual_discount_percentage,isAnnualDiscountActive:!!c.monetized_resource_metadata?.annual_discount_active_at,carouselMedia:(0,y.N6)(c)}}function e$(e){return!!eT(e).id&&!e.unpublished_at}function ej(e){if(!e)return{};let r={};return e.forEach(e=>{e$(e)&&(r[e.id]=e)}),r}function ez(e,r,n,a){let i={};return(e.email_validated_at||(i.emailNotVerifiedError=(0,f.t)("community.publishing.please_verify_your_email_address_to_publish")),a||(e.saml_sso_only||e.google_sso_only||e.two_factor_app_enabled||e.phone_number)&&(r.code!==P.aP.FAILURE||r.error!==(0,f.t)("community.publishing.you_must_enable_two_factor_authentication_to_publish")))?!a&&(e.plugin_publishing_blocked_at||e.community_blocked_at||r.code===P.aP.FAILURE&&r.error===(0,f.t)("community.publishing.you_must_verify_your_account_details_to_publish"))?i.accountDetailsChangedError=(0,f.t)("community.publishing.we_detected_a_change_to_your_account_details_please_contact_support_figma_com_to_publish_this_plugin"):r.code===P.aP.FAILURE&&r.error&&(i.other=r.error):i.twoFactorAuthDisabledError=n?(0,f.t)("community.publishing.please_enable_two_factor_authentication_to_publish_this_widget"):(0,f.t)("community.publishing.please_enable_two_factor_authentication_to_publish_this_plugin"),i}function eq(e,r,n,a){if(!e)return{};let i={};0===(0,G.Yp)(e.name).length&&(i.name=(0,f.t)("community.publishing.name_must_not_be_empty")),0===(0,G.Yp)(e.tagline).length&&(i.tagline=(0,f.t)("community.publishing.add_a_tagline")),(0,m.ZB)(e.description)&&(i.description=(0,f.t)("community.publishing.add_a_description"));let o=(0,G.Yp)(e.supportContact);if(0===o.length?i.supportContact=(0,f.t)("community.publishing.support_contact_must_not_be_empty"):(0,l.xf)(o)||(0,h.gU)(o)||(i.supportContact=(0,f.t)("community.publishing.support_contact_must_be_a_valid_email_or_url")),0===(0,G.Yp)(e.iconSrc).length&&(i.iconImageError=(0,f.t)("community.publishing.icon_cant_be_empty")),i.carouselMedia=(0,S.vC)(e.carouselMedia),e.categoryId||(i.categoryId=(0,f.t)("community.publishing.category_cant_be_empty")),void 0===e.price||r.permissions?.includes("payments")||a?.third_party_m10n_status!==D.PN.FLAGGED||(i.freemiumRequiredForMigrating=(0,f.t)("community.seller.freemium_required_for_migration")),e.playgroundFigFile&&r.editorType?.length===1){let a=r.editorType[0],o=e.playgroundFigFile.editor_type;if(a===k.FW.FIGMA&&"design"!==o||a===k.FW.FIGJAM&&"whiteboard"!==o){let e=a===k.FW.FIGMA?(0,f.t)("community.publishing.playground_file.figma"):(0,f.t)("community.publishing.playground_file.figjam");i.playgroundFigFile=n?(0,f.t)("community.publishing.widget_playground_file_editor_type_error",{editorType:e}):(0,f.t)("community.publishing.plugin_playground_file_editor_type_error",{editorType:e})}}n&&0===(0,G.Yp)(e.widgetSnapshotImageSrc).length&&(i.widgetSnapshotImageError=(0,f.t)("community.publishing.snapshot_must_not_be_empty"));let s=function(e,r){if(!e.isPaid||e.hasPaymentsApi)return null;if(!e.price)return(0,f.t)("community.publishing.price_is_required_for_paid_resources");if((0,b.Yp)(e.price))return e.price<b.mZ?(0,f.t)("community.seller.paid_resource_minimum_err"):(0,f.t)("community.seller.paid_resource_maximum_err");if((0,b.F8)(e.price))return(0,f.t)("community.seller.prices_must_follow_format");if(!r||(0,T.AC)(r))return null;let n=r?.monetized_resource_metadata?.price;return e.isSubscription&&n&&(0,b.Mj)(n/100,e.price)?(0,f.t)("community.seller.price_increase_limit"):!r?.monetized_resource_metadata?.can_increase_price&&n&&(0,b.WD)(n/100,e.price)?(0,f.t)("community.seller.price_can_only_be_increased_once_every_thirty_days"):null}(e,a);s&&(i.price=s);let c=e.isPaid&&e.annualDiscount&&e.isAnnualDiscountActive?Number.isInteger(e.annualDiscount)?null:(0,f.t)("community.seller.discount_must_follow_format"):null;return c&&(i.annualDiscount=c),i}function eX(e,r,n){if(!e)return{};let a={},i=(0,G.Yp)(e.name).length;if(i<4?a.name=(0,f.t)("community.publishing.name_must_be_4_characters_long"):i>100&&(a.name=(0,f.t)("community.publishing.name_must_be_at_most_100_characters_long")),(0,G.Yp)(e.description).length>1e4&&(a.description=(0,f.t)("community.publishing.description_must_be_at_most_10000_characters_long")),(0,G.Yp)(e.newVersionReleaseNotes).length>1e4&&(a.newVersionReleaseNotes=(0,f.t)("community.publishing.release_notes_must_be_at_most_10000_characters_long")),(0,G.Yp)(e.creatorPolicy).length>1e4&&(a.creatorPolicy=(0,f.t)("community.publishing.creator_policy_must_be_at_most_10000_characters_long")),r)a.tags=(0,G.Dp)(e.tags.tokens.map(e=>e.content),r.find(r=>r.id===e.categoryId)?.tags||[],r.flatMap(e=>e.tags??[]));else{let r=e.tags.tokens.map(e=>e.content);e.tags.inputValue&&(r=r.concat([e.tags.inputValue]));let n=(0,G.Wh)(r);n&&(a.tags=n)}let o=(0,G.Lg)(e.tagline);return o&&(a.tagline=o),(0,G.Yp)(e.supportContact).length>100&&(a.supportContact=(0,f.t)("community.publishing.support_contact_must_be_at_most_100_characters_long")),e.iconImageError&&(a.iconImageError=e.iconImageError),e.coverImageError&&(a.coverImageError=e.coverImageError),a}function eJ(e){return(0,k.k0)(e.plugin)}function eZ(e){let r;let{localPlugins:n,publishedCanvasWidgetVersions:a,publishedWidgets:i}=c.D.getState(),s=!e.widgetVersionId,l=e.widgetId;if(l){if(s){let e=Object.values(n).filter(e=>e.plugin_id===l);e.length>1&&e3((0,f.t)("community.publishing.found_multiple_local_widgets_with_the_same_manifest_id")),1===e.length&&(r=e[0])}else{if(!(r=a[l]?.[e.widgetVersionId]||i[l]&&eT(i[l])))return;r.id===e.widgetVersionId||(0,_.nl)()||(0,_.Lg)()||(0,p.$D)(o.FigmaTeam.UNOWNED,Error(`plugin versionId=${r?.id} doesn't match node.widgetVersionId=${e.widgetVersionId}`))}return r}}function eQ(e){let r=e.canRunPluginState?e.canRunPluginState:c.D.getState();if(!(0,C.GP)(r))return{canRun:!1,message:"Cannot run plugin because canRunPlugins returned false"};if(!e0(r,e.plugin))return{canRun:!1,message:"Cannot run plugin within org"};let{plugin:n,editorType:a}=e;if((0,k.ZQ)(n))return(0,k.k0)(n)?{canRun:!1,message:"Cannot run local widget"}:{canRun:!0};if(a){if(!Q(q[a],n.manifest.editorType))return{canRun:!1,message:"Cannot run plugin with invalid editor type"};if(a===R.nT.DevHandoff&&!e8(n))return{canRun:!1,message:"Cannot run non-devmode plugin in dev mode"}}return{canRun:!0}}function e0(e,r){if(!e.currentUserOrgId)return!0;let n=e.orgById[e.currentUserOrgId];if(!n||(0,k.ZQ)(r)||(0,k.bH)(r))return!0;if(!n.public_plugins_allowed)return!1;let a=(0,k.k0)(r);return(a?!n.widgets_whitelist_enforced:!n.plugins_whitelist_enforced)||!!(a?e.whitelistedWidgets:e.whitelistedPlugins)[r.plugin_id]}function e1(e){return e.roles.is_public?{role:"public"}:e.roles.org?{role:"org",roleOrgId:e.roles.org.id}:{role:"private"}}function e2(e,r){return r?r.localFileId:e.id}function e3(e){(0,U.pN)({shouldShowVisualBell:!0});let r=(0,$.M)();w.Y5.dispatch(E.F.enqueue({type:"plugins-runtime-error",message:e,button:r?{text:"Show/Hide console",action:()=>{r.toggleDevTools("bottom")}}:void 0,error:!0}))}function e6(){w.Y5.dispatch(E.F.dequeue({matchType:"plugins-runtime-error"}))}function e5(e,r){return e.plugin_id===r?.plugin_id&&e?.id===r?.id}function e8(e,r){return!!(!(0,K.T)()||e.manifest.capabilities?.includes("vscode")||r?.allowNonVsCodePluginsInVsCode)&&(0,k.Pe)(e.manifest.editorType)&&!(0,k.k0)(e)}function e4(e){return e8(e)&&tu(e.manifest.capabilities)}function e9(e){return e8(e)&&e.manifest?.capabilities?.includes("codegen")}function e7(e){return e.manifest?.capabilities?.includes("textreview")}function te(e,r,n){if(!e)return r;switch(e){case R.nT.Whiteboard:case R.nT.Design:case R.nT.Slides:return Object.fromEntries(Object.entries(r).filter(([r,n])=>Q(q[e],n.manifest.editorType)));case R.nT.DevHandoff:return Object.fromEntries(Object.entries(r).filter(([e,r])=>e8(r,n)));default:return{}}}function tt(e,r){if(!e)return r;switch(e){case R.nT.Whiteboard:case R.nT.Design:return r.filter(r=>Q(q[e],r.manifest.editorType));case R.nT.DevHandoff:return r.filter(e=>e8(e));default:return[]}}function tr(e,r){if(!e)return r;switch(e){case R.nT.Whiteboard:case R.nT.Design:return Object.fromEntries(Object.entries(r).filter(([r,n])=>Q(q[e],eT(n).manifest.editorType)));case R.nT.DevHandoff:return Object.fromEntries(Object.entries(r).filter(([e,r])=>e8(eT(r))));default:return{}}}function tn(e){if(!("related-link-preview"!==e&&"codegen"!==e))return!1;let r=c.D.getState().selectedView;return(0,V.$A)(r)}function ta(e){return e?.manifest.editorType?.length===1&&(0,k.Pe)(e.manifest.editorType)}function ti(e){let r=function(e){let r=["vscode"];return e.filter(e=>!r.includes(e))}(e.manifest.capabilities??[]);return 1===r.length&&"codegen"===r[0]}function to(e){return ta(e)&&ti(e)}function ts(e){return(0,k.Pe)(e.manifest.editorType)&&ti(e)}function tl(e){let r=c.D.getState().selectedView;return(0,V.$A)(r)&&ts(e)}function tc(e,r,n){let a=c.D.getState().selectedView,i=r?.plugins_whitelist_enforced,o=i&&n&&!!n[e.plugin_id]||!i;return(0,V.$A)(a)&&!to(e)&&o}function td({idToSearch:e,localExtensionsByFileId:r,publishedExtensions:n}){let a=r&&r[e];if(a)return a;let i=n?.[e];return i?eI(i):null}function tu(e){return!!(e?.includes("inspect")||e?.includes("panel"))}function tm(e){let r=Z(),n=e&&e?.plugin&&to(e?.plugin);return e&&r&&Q(r,e.plugin.manifest.editorType)&&("dev"!==r||e8(e.plugin))&&!n}function tp(){return(0,K.T)()?"plugins-menu-open-directory-vscode":u.Ay.mac?"plugins-menu-open-directory-mac":"plugins-menu-open-directory-win"}},384792:(e,r,n)=>{n.d(r,{C3:()=>i,SH:()=>o}),n(215822);let a=null;function i(e){a=e}function o(){return a}},772192:(e,r,n)=>{n.d(r,{R:()=>o}),n(181912);var a=n(941381),i=n(336599);let o=new class{loadPluginsPublishedByUser(e){let r=e.getState().loadingState,n=a.uF.loadingKeyForPayload();(0,i.Sc)(r,n)&&e.dispatch(a.uF())}async loadPluginsAuthoredByCurrentOrg(e){let{loadingState:r,currentUserOrgId:n}=e.getState();if(!n)return;let o=a.LP.loadingKeyForPayload(n);(0,i.Sc)(r,o)&&await e.dispatch(a.LP(n))}loadWidgetsAuthoredByCurrentOrg(e){let{loadingState:r,currentUserOrgId:n}=e.getState();if(!n)return;let o=a.a8.loadingKeyForPayload(n);(0,i.Sc)(r,o)&&e.dispatch(a.a8(n))}}},829632:(e,r,n)=>{n.d(r,{R:()=>g});var a=n(262151),i=n(67151),o=n(157663),s=n(38329),l=n(966712),c=n(30637),d=n(877432),u=n(370934),m=n(960628),p=n(507956),h=n(561004);let _=class e{constructor(){this.runQueue=[],this.currentRunState=null,this.MAX_RESOLVE_ITERATIONS=10}enqueue(e){let{runPluginArgs:r,onStart:n,mode:i,reuseExistingRunState:o=!0}=e,{plugin:l}=r;if(!(0,p.$A)(s.D.getState().selectedView))return(0,a.bT)(r);if(l.manifest.containsWidget)throw Error("Cannot enqueue a plugin that contains a widget");let c=this.createTask(n),d=this.findExistingRunState(e);if(o&&d)this.log("enqueue","Found existing run state, pushing runTask onto existing runState",{existingRunState:d,runTask:c}),d.runTasks.push(c),d===this.currentRunState&&"settled"===d.status&&this.resolveAllPromises(this.currentRunState);else{let e={runPluginArgs:r,runTasks:[c],mode:i,status:"idle"};this.log("enqueue","Creating new run state and adding to queue",{runState:e}),this.addToQueue(e),this.runNextPlugin()}return c.promise}getCurrentRunStatusOrNull(){return this.currentRunState?.status??null}getRunQueueLength(){return this.runQueue.length}async runNextPlugin(){if(await this.maybeTerminatePluginBeforeRun(),(0,h.hw)())return;let e=this.runQueue.shift();if(!e)return;this.currentRunState=e,this.prepPluginForRun(e.runPluginArgs.plugin);let r=this.runPlugin(e);await this.resolveAllPromises(e),await r,this.log("runNextPlugin","Finished running plugin",{runState:e}),this.runNextPlugin()}runPlugin(e){this.log("runNextPlugin","Running plugin",{runState:e});let{runPluginArgs:r}=e;return(0,a.bT)(r)}setRunPluginForTest(e){if(!(0,c.nl)())throw Error("Cannot set run plugin for test when not running interaction tests");this.runPlugin=e}createTask(e){let r=()=>{},n=()=>{};return{promise:new Promise((e,a)=>{r=e,n=a}),resolve:r,reject:n,onStart:e}}async resolvePromise({resolve:e,reject:r,onStart:n}){try{let r=await n?.();e(r)}catch(e){r(e)}}async resolveAllPromises(e){this.log("runNextPlugin","Resolving all promises",{runState:e}),e.status="resolving";let r=0;for(;r<this.MAX_RESOLVE_ITERATIONS;){let n=e.runTasks;if(0===n.length)break;e.runTasks=[],await Promise.allSettled(n.map(e=>this.resolvePromise(e))),r++}await this.maybeTerminatePluginAfterRunSettled(e),e.status="settled",this.log("runNextPlugin","Resolved all promises",{runState:e})}addToQueue(e){switch(this.log("addToQueue","Adding to queue",{toAdd:e}),e.mode){case"run-forever":case"run-and-terminate":this.runQueue.push(e);break;default:(0,i.xb)(e.mode)}}async maybeTerminatePluginBeforeRun(){let e=(0,h.hw)();(0,l.kc)().plugins_reset_run_state&&!e&&this.currentRunState&&(this.currentRunState=null),(!!e!=!!this.currentRunState||this.currentRunState?.status==="settled"&&this.currentRunState?.runPluginArgs.plugin.plugin_id===e?.plugin_id)&&(this.log("maybeTerminatePluginBeforeRun","Terminating plugin"),await this.terminatePlugin())}async maybeTerminatePluginAfterRunSettled(e){let{mode:r}=e;switch(this.log("maybeTerminatePluginAfterRunSettled","Maybe terminating plugin",{toMaybeTerminate:e}),r){case"run-forever":this.runQueue.length>0&&await this.terminatePlugin();break;case"run-and-terminate":await this.terminatePlugin();break;default:(0,i.xb)(r)}}async terminatePlugin(){this.log("terminatePlugin","Terminating plugin"),this.currentRunState=null,await (0,h.wY)(),await (0,d.yQ)()}findExistingRunState({runPluginArgs:e,mode:r}){let n=this.currentRunState?.runPluginArgs.plugin.plugin_id;return n===e.plugin.plugin_id&&h.hw()?.plugin_id===n?this.currentRunState:this.runQueue.find(n=>n.runPluginArgs.plugin.plugin_id===e.plugin.plugin_id&&n.mode===r)}isCurrentlyRunning({runPluginArgs:e,mode:r}){return!!this.findExistingRunState({runPluginArgs:e,mode:r})}prepPluginForRun(e){this.log("prepPluginForRun","Prepping plugin for run",{plugin:e}),(0,u.dW)(e,null),(0,m.f$)(),(0,m.n4)(),(0,m.hY)()}log(r,n,a={}){if(!e.debug)return;let i={currentRunState:this.currentRunState,runQueue:this.runQueue,runningPluginState:h.iu,...a};o.k.log("[PluginManager]",`[${r}]`,n,i)}};_.instance=new _,_.debug=!1;let g=_},561004:(e,r,n)=>{n.d(r,{Kd:()=>b,Mt:()=>S,XF:()=>A,XY:()=>v,et:()=>w,fD:()=>g,hw:()=>f,iu:()=>_,lM:()=>E,mv:()=>I,nT:()=>C,qR:()=>y,wY:()=>N});var a=n(414507),i=n(517333),o=n(38329),s=n(374626),l=n(776621),c=n(30637),d=n(554294),u=n(707033),m=n(479296),p=n(229531);let h=null,_={currentPluginRunID:null,stats:null,currentWidget:void 0,setMediaEnabled:!1,allowedPluginOrigin:void 0,resetGlobalPluginAPI:null};function g(){return _.currentPluginRunID}function f(){return s.zl.get(d.GR)}function E(e){(0,l.kF)("pluginId",e?.plugin_id),s.zl.set(d.GR,e)}function y(e){(0,l.kF)("pluginTriggeredFrom",e),s.zl.set(d.vT,e??null)}function b(e){s.zl.set(d.$f,e)}function I(){return Math.random().toString(36).slice(2)}function T(e){(0,c.nl)(),(0,l.$D)(a.FigmaTeam.EXTENSIBILITY,e)}function v(e){h&&T(Error(`Did not close the previous plugin: type=${h.type}`)),h={type:"global",closePluginFunc:e}}function S(e,r){h?.type==="plugin"&&r?.ignorePreviousCloseFunc!==h.closePluginFunc&&T(Error(`Did not close the previous plugin: type=${h.type}`)),h?.type==="global"&&T(Error(`Did not close the previous plugin: type=${h.type}`)),h=e?{type:"plugin",closePluginFunc:e}:null}function w(){return h?.type==="global"}async function A(e){if(h){let{closePluginFunc:r,type:n}=h;h=null,"global"===n?await r():await r(e)}}let N=(0,m.n)(async e=>{await A(e?{message:e+"",isError:!0}:{}),C()});function C(){if((0,p.Tj)(void 0),_.currentWidget=void 0,E(null),y(null),b(null),_.currentPluginRunID=null,_.stats=null,s.zl.set(d.d4,null),s.zl.set(d.GR,null),i.eD&&_.setMediaEnabled&&(_.setMediaEnabled=!1),i.eD&&_.allowedPluginOrigin&&(i.eD.removeAllowedPluginOrigin(_.allowedPluginOrigin),_.allowedPluginOrigin=void 0),o.D){let e=(0,u.o8)(),r=(0,u.YR)();e&&r&&_.resetGlobalPluginAPI?.({userID:e,openFileKey:r})}}},285334:(e,r,n)=>{n.d(r,{HB:()=>M,Ph:()=>p,T0:()=>I,Up:()=>x,eZ:()=>k,sA:()=>U,xp:()=>F,yb:()=>B});var a=n(966712),i=n(30637),o=n(376485);let s="1039957324840667051",l="1042072203439057981",c="1017757619521383731",d="1037692671113105119",u="1030479012894344777",m="1100947233945489758",p="1274481464484630971",h="1220512233196109878",_="1220802563996996107",g="1221187540287746170",f="1029476790898052743",E="1270487405418367065",y="1028089855820989707",b="1100944790471783866",I="1268676638869538880",T="1217135789855512677",v="1217657098906612843",S={[s]:o.Kd,[l]:o.Kd,[c]:o.Kd,[d]:o.Kd,"1096460041736534298":["analytics"],[h]:["analytics","openexternal"],[_]:["analytics","filekey","openexternal"],"1098405969270214551":["analytics","filekey","openexternal"],"1151936790942917527":["analytics","openexternal"],"1101944648482192724":["analytics","openexternal"],"1094001923188252679":["analytics","filekey","openexternal"],[u]:o.Kd,[m]:o.Kd,"1030848035996871692":["hidecursors"],"1030845409121640454":["hidecursors"],[p]:["cortex","analytics"],[g]:["filekey"],"857346721138427857":["filekey"],"745330164019088593":["filekey"],"1377781599688680355":["cortex","analytics","filekey","firstdraft"],"1340067847030742527":["cortex","analytics","filekey","firstdraft"]},w={[s]:"https://recordwidget.vimeocdn.com",[l]:"https://recordwidget.vimeocdn.com",[c]:"https://recordwidget.vimeocdn.com",[d]:"https://recordwidget.vimeocdn.com",[u]:"https://www.figma.com",[m]:"https://www.figma.com"},A={"1034777534804649640":["analytics"],"1301665612022689456":["analytics","cortex"],[T]:["analytics","openexternal"],[v]:["analytics","filekey","openexternal"],"1271502283792345209":["cortex"],"1326353654536428586":["cortex"],"1441501928920333946":["cortex"],"1094384373580076374":["analytics","filekey","openexternal"],"1149460326641202255":["analytics","openexternal"],"1101526018404272582":["analytics","openexternal"],"1131307276886895456":["analytics","filekey","openexternal"],[f]:o.Kd,[E]:o.Kd,[y]:o.Kd,[b]:o.Kd,"1256428543638612749":["cortex"],[I]:["cortex","analytics"],"1277056884710848803":["cortex","analytics"],"1265815812125155376":["hidecursors"],"1029480467793180296":["hidecursors"],"1276624117086983457":["cortex"],"1313947182028153675":["cortex","analytics","filekey","firstdraft"],"1308848962842011451":["cortex","analytics","filekey","firstdraft"],"1338915561589337295":["cortex","analytics","filekey","firstdraft"],"1342184095219254574":["cortex","analytics","filekey","firstdraft"],"1248327534194310871":["openexternal"],"1247608093818933926":["openexternal"],"1098668453462136230":["analytics"],"1098643145465550199":["analytics","filekey","openexternal"],"1159008294965494982":["analytics","openexternal"],"1105998388939381214":["analytics","openexternal"],"1098069144593389942":["analytics","filekey","openexternal"],"1065825789137646656":o.Kd,"1105998344712102365":o.Kd,"1065825795062708289":["hidecursors"],"1065825813933952067":["hidecursors"]},N={[T]:(0,a.ck)("83e16c32f7fbe88022ff9fcff130cdd6c6423861")},C={[h]:(0,a.ck)("83e16c32f7fbe88022ff9fcff130cdd6c6423861")},L={[f]:"https://staging.figma.com",[E]:"https://staging.figma.com",[y]:"https://staging.figma.com",[b]:"https://staging.figma.com"},O=new Set([T,v]),R=new Set([h,_,g,"1220851659530313303"]),P={},D={};function k(e){return"prod"===(0,a.tl)().cluster_name?e in w||e in S:"staging"===(0,a.tl)().cluster_name?e in L||e in A:(0,i.nl)()||(0,i.Lg)()?e in P:!!(0,a.IX)()}function M(e){return"prod"===(0,a.tl)().cluster_name?e in w?w[e]:void 0:"staging"===(0,a.tl)().cluster_name?e in L?L[e]:void 0:(0,i.nl)()||(0,i.Lg)()?e in P?P[e]:void 0:(0,a.IX)()?"*":void 0}function F(e){if(!k(e))throw Error("Untrusted pluginID");return"prod"===(0,a.tl)().cluster_name?new Set(S[e]??[]):"staging"===(0,a.tl)().cluster_name?new Set(A[e]??[]):(0,i.nl)()||(0,i.Lg)()?new Set(D[e]??[]):(0,a.IX)()?new Set(o.UX):new Set}function x(){return"prod"===(0,a.tl)().cluster_name?R:"staging"===(0,a.tl)().cluster_name?O:((0,i.nl)()||(0,i.Lg)()||(0,a.IX)(),new Set)}function U(e){return"prod"===(0,a.tl)().cluster_name?C[e]:"staging"===(0,a.tl)().cluster_name?N[e]:void 0}function B(e){return"prod"===(0,a.tl)().cluster_name?"1286792998372727741"===e:"staging"===(0,a.tl)().cluster_name?"1286790870036328880"===e:!!((0,i.nl)()||(0,i.Lg)())||!!(0,a.IX)()}},212957:(e,r,n)=>{n.d(r,{S:()=>a});var a,i=n(181912),o=n(563706),s=n(96328),l=n(99506),c=n(833629);(e=>{e.getTooltipTrackingContext=function(e){return`Pro Onboarding Tooltip: ${(0,s.vE)(e)}`},e.getTrackingProperties=function(e){return{productArea:"pro_tier_onboarding",teamId:e}},e.isRecentlyUpgraded=function(e){return!!e&&!!e.last_upgraded_at&&90>=(0,i.A)().diff((0,i.A)(e.last_upgraded_at),"days",!0)},e.canSeeOnboardingInFile=function({editorType:e,selectedView:r,showStarterKit:n,userFlags:a,hasNotifications:i,isDevHandoffView:s,isAppUiShown:d,isLoading:u}){if(o.Ay.mobile||o.Ay.tablet||i||s||!d||u)return!1;let m="fullscreen"===r.view&&r.starterKitHasBeenHidden;if(e===l._Y.WHITEBOARD&&n&&!m)return!1;let p=(0,c._q)(a),h=!!a.figjam_editor_onboarded;return e===l._Y.DESIGN&&!!p||e===l._Y.WHITEBOARD&&!!h}})(a||(a={}))},746869:(e,r,n)=>{n.d(r,{ng:()=>a,uU:()=>g});var a,i=n(943632),o=n(181912),s=n(966712),l=n(140908),c=n(99506),d=n(243987),u=n(428467),m=n(986060),p=n(707465);let h="pro_trials_v3",_=c.GP.PRO_TRIAL,g="exp_pro_trials_v3_start_trial";(e=>{e.uxEnabled=()=>!!(0,s.kc)().pro_trials_v3_ux,e.entryEnabled=()=>(0,e.uxEnabled)()&&!!(0,s.kc)().exp_pro_trials_v3,e.expiryEnabled=()=>(0,e.uxEnabled)()&&!!(0,s.kc)().pro_trials_v3_expiry,e.isUserInVariant=l.wN,e.getTrackingProperties=function(e){return e?{productArea:h,text:e}:{productArea:h}},e.getProTrial=function(e,a,i){if(!e)return null;let o=n(e);if(!o)return null;let s=new Date(e.grace_period_end),l=r(s),c=e.id;return{status:o,isOwner:a,userCanEditTeam:(0,u.canEditTeam)(c,i),trialExpiresAt:s,daysLeft:l,teamId:c}},e.getUpgradableProTrials=function(r,n){let a=Object.values(n.teams),s=(0,i.WI)(a.map(a=>e.getProTrial(a,!!r[a.id]?.[g],n))),l=s.filter(e=>e.status===m.a.TRIAL_EXPIRED&&e.userCanEditTeam);l.sort((e,r)=>(0,o.A)(e.trialExpiresAt).diff(r.trialExpiresAt));let c=s.filter(e=>e.status===m.a.IN_TRIAL&&e.userCanEditTeam);return c.sort((e,r)=>(0,o.A)(e.trialExpiresAt).diff(r.trialExpiresAt)),{ongoingTrials:c,expiredTrials:l}},e.getEligibleProTrialTeams=function(r,n,a,i){let o=(0,d.Rx)(a),s=Object.values(a.teams).filter(s=>e.canStartProTrial(r,n,o,s,a,i));return s.sort((e,r)=>(r.editors??0)-(e.editors??0)),s},e.canStartProTrial=function(r,n,a,i,s,l){return!(!r||!e.entryEnabled()||(0,d.w5)(i)||i.stripe_customer_id||!n||a||!(0,u.canEditTeam)(i.id,s)||30>(0,o.A)().utc().diff((0,o.A)(r.created_at).utc(),"days",!0)||(0,o.A)().utc().diff((0,o.A)(r.created_at).utc(),"days",!0)>90||e.getProTrialStatus(i)||Object.keys(l).some(e=>!!l[e][g]))&&!!e.isUserInVariant(r.id)};let r=e=>Math.max(Math.ceil((0,o.A)(e).diff((0,o.A)(),"days",!0)),0);function n(r){return(0,e.uxEnabled)()&&r.grace_period_end&&r.grace_period_type&&_===r.grace_period_type?new Date(r.grace_period_end)<new Date?m.a.TRIAL_EXPIRED:m.a.IN_TRIAL:null}function a(e){return!!e&&e.status===m.a.IN_TRIAL&&e.userCanEditTeam}e.getProTrialStatus=n,e.isEligibleTrialEntryView=function(e){return"folder"===e.view||"team"===e.view||(0,p.YJ)(e)},e.canSeeProTrialUx=a,e.canSeeProTrialUxInFile=function(e,r){return a(e)&&r?.editorType&&r?.canEdit},e.canSeeProTrialExpiryUx=function(r){if(!(0,e.expiryEnabled)()||!r||r.status!==m.a.TRIAL_EXPIRED)return!1;let n=(0,o.A)().utc().diff((0,o.A)(r.trialExpiresAt).utc(),"days",!0);return!(n<0)&&n<7},e.canSeeExpiredProTrialBanner=function(r,n,a){if(!n)return!1;let i=!!r[n.id]?.[g],o=e.getProTrial(n,i,a);return e.canSeeProTrialExpiryUx(o)}})(a||(a={}))},94500:(e,r,n)=>{n.d(r,{Bx:()=>v,Cs:()=>P,Hs:()=>I,Jr:()=>L,KJ:()=>O,M9:()=>y,RL:()=>b,Rv:()=>E,UG:()=>C,Zh:()=>M,_P:()=>k,_Q:()=>g,e:()=>S,eA:()=>A,fz:()=>T,mf:()=>D,qb:()=>f,ql:()=>N,t0:()=>R,yE:()=>w});var a=n(67151),i=n(414507),o=n(299321),s=n(757028),l=n(498750),c=n(563706),d=n(776621),u=n(980820),m=n(738269);n(992271);var p=n(988022);n(356390),n(848661);var h=n(99506),_=n(707465);function g(e){switch(e){case"NONE":return o.bq3.NONE;case"PRESET":return o.bq3.PRESET;case"CUSTOM":return o.bq3.CUSTOM;case"PRESENTATION":return o.bq3.PRESENTATION;default:(0,a.xb)(e)}}function f(e){return e===o.bq3.PRESET||e===o.bq3.CUSTOM?"scale-down":e===o.bq3.PRESENTATION?"contain":"min-zoom"}function E(e){return"fixed"}function y(e){let r=g(e.initialDevice?.type??"NONE"),n=e.scalingInfo;return c.rr?{viewportScalingMode:"fit-width",contentScalingMode:n?.contentScalingMode??"fixed"}:{viewportScalingMode:n?.viewportScalingMode??f(r),contentScalingMode:n?.contentScalingMode??E(r)}}function b(e,r){return!r?.disableDefaultKeyboardNav&&([l.Uz.LEFT_ARROW,l.Uz.PAGE_UP].includes(e.keyCode)||e.shiftKey&&e.keyCode===l.Uz.N)}function I(e,r){return!(r?.disableDefaultKeyboardNav||r?.inlinePreview&&e.keyCode===l.Uz.SPACE&&e.shiftKey)&&[l.Uz.RIGHT_ARROW,l.Uz.SPACE,l.Uz.ENTER,l.Uz.N,l.Uz.PAGE_DOWN].includes(e.keyCode)}function T(e,r){return!r?.disableDefaultKeyboardNav&&e.keyCode===l.Uz.R&&!e.metaKey&&!e.shiftKey&&!e.ctrlKey}let v=(e,r)=>!r?.disableDefaultKeyboardNav&&e.keyCode===l.Uz.F&&!e.metaKey&&!e.shiftKey&&!e.ctrlKey&&!r.inlinePreview,S=(e,r)=>!r?.disableDefaultKeyboardNav&&e.keyCode===l.Uz.Z&&!e.metaKey&&!e.ctrlKey&&!r.inlinePreview&&r?.file?.editor_type!==h._Y.SLIDES,w=(e,r)=>e.keyCode===l.Uz.SPACE&&e.shiftKey&&!e.metaKey&&!e.ctrlKey&&!r?.inlinePreview,A=(e,r)=>!r?.disableDefaultKeyboardNav&&e.keyCode===l.Uz.C&&!e.metaKey&&!e.shiftKey&&!e.ctrlKey&&!r.inlinePreview;function N(e){return!1}let C=.2,L=(0,u.nF)((e,r)=>{if(r.userInitiated){let n={scalingMode:r.viewportScalingMode,contentScalingMode:r.contentScalingMode,source:r.source};e.dispatch(k({name:"Prototype Scale Changed",params:n}))}let n=e.getState().selectedView;if("prototype"===n.view){let a=(0,s.Ay)(n,e=>{void 0===e.scalingInfo&&(e.scalingInfo={}),r.hasOwnProperty("viewportScalingMode")&&(e.scalingInfo.viewportScalingMode=r.viewportScalingMode),r.hasOwnProperty("contentScalingMode")&&(e.scalingInfo.contentScalingMode=r.contentScalingMode)});e.dispatch(m.$T(a))}}),O=(0,u.nF)((e,{showHotspots:r})=>{let n=e.getState().selectedView;if(n&&"prototype"===n.view){let a={...n,showHotspots:r};e.dispatch(m.$T(a))}}),R=(0,u.nF)((e,{showDeviceFrame:r})=>{let n=e.getState().selectedView;(0,a.B1)(n,"selectedView must be defined to show device frame"),(0,a.vA)("prototype"===n.view,"must be in the view to show device frame");let i={...n,showDeviceFrame:r};e.dispatch(m.$T(i))}),P=(0,u.nF)((e,{newDevice:r})=>{let n=e.getState().selectedView;(0,a.B1)(n,"selectedView must be defined to set initial device frame"),(0,a.vA)("prototype"===n.view,"must be in the view to set initial device frame");let i={...n,initialDevice:r,overrideDevice:void 0};e.dispatch(m.$T(i))}),D=(0,u.nF)((e,{newDevice:r})=>{let n=e.getState().selectedView;(0,a.B1)(n,"selectedView must be defined to set override device frame"),(0,a.vA)("prototype"===n.view,"must be in the view to set override device frame");let i={...n,overrideDevice:r};e.dispatch(m.$T(i))}),k=(0,u.nF)((e,r)=>{let n=e.getState(),a=r.params||{},i=(0,_.U2)(n.selectedView);p.ds(r.name,i,n,a)}),M=(()=>{let e=(0,u.nF)((e,r)=>{let n=e.getState(),a=r.params||{},o=(0,_.U2)(n.selectedView);if(!o){(0,d.$D)(i.FigmaTeam.PROTOTYPING,Error("No file key for prototype event"));return}p.GS(r.name,o,n,a)});return({name:r,params:n})=>e({name:r,params:n})})()},830524:(e,r,n)=>{n.d(r,{C$:()=>s,Cp:()=>d}),n(411855),n(188507);var a=n(299321),i=n(286640);n(293017),n(809831),n(106757),n(788256);var o=n(479296);function s(e){let r=[e];for(;0!==r.length;){let e=r.shift();if(!1!==e.visible){if("TEXT"===e.type)return!0;r.push(...e.childrenNodes)}}return!1}n(696673),n(335682),n(833629);let l="last-used-left-panel-tab",c="ASSETS_TAB";function d(e){i.x4&&i.x4.setItem(l,e===a.xae.ASSETS?c:"LAYERS_TAB")}(0,o.D)(()=>{if(i.x4){let e=i.x4.getItem(l);if(e)return e===c?a.xae.ASSETS:a.xae.LAYERS}return null})},316081:(e,r,n)=>{n.d(r,{H4:()=>u,Ud:()=>d,XY:()=>p,cZ:()=>h});var a=n(411855),i=n(188507),o=n(67151),s=n(629019),l=n.n(s),c=n(922358);let d=Symbol("NotVisibleRunAnyway");class u{constructor(e){this._callback=e,this._previousValue=null}render({isVisible:e,className:r,displayAs:n,valueArgs:i=[]}){let o=!0===e||e===d?this._previousValue=this._callback(...i):this._previousValue,s=!0===e;return o instanceof Array?o.map((e,i)=>e&&a.createElement(m,{key:e.key??i,isVisible:s,className:r,displayAs:n},e)):o&&a.createElement(m,{key:o.key??void 0,isVisible:s,className:r,displayAs:n},o)}}class m extends a.Component{constructor(){super(...arguments),this.ref=e=>{this.el=e}}componentDidUpdate(e){this.el&&(!e.isVisible&&this.props.isVisible&&c.F2.focusSubtreeIfNecessary(this.el),e.isVisible&&!this.props.isVisible&&c.F2.blurSubtreeIfNecessary(this.el))}getClassNameForDisplayAs(){let{displayAs:e}=this.props;switch(e){case"block":return"";case"contents":return"displayContents";default:(0,o.xb)(e)}}render(){let{isVisible:e}=this.props,r=l()(this.props.className?this.props.className:"cachedSubtree",this.getClassNameForDisplayAs());return a.createElement("div",{ref:this.ref,className:r,style:{display:e?"":"none"}},this.props.children)}}m.defaultProps={displayAs:"contents"},m.displayName="CachedSubtreeComponent";let p=(0,i.Ng)(void 0,e=>({dispatch:e}));function h(e,r){"function"==typeof e?e(r):e&&(e.current=r)}},331626:(e,r,n)=>{n.d(r,{JG:()=>h,Jl:()=>_,SO:()=>p,U_:()=>m,X2:()=>E,gJ:()=>g,ul:()=>f});var a=n(67151),i=n(286640),o=n(809831),s=n(99506),l=n(555328),c=n(239671),d=n(809073),u=n(215822);function m(){let e=(0,o.my)();return e===c.nT.Whiteboard?d.$A.FigJam:(0,c.yY)(e)?d.$A.Design:e===c.nT.DevHandoff?d.$A.Handoff:e===c.nT.Slides?d.$A.Slides:null}let p="recent-face-stamps-figjam",h="recent-whiteboard-tools-figjam";function _(e,r){if(e===d.$A.FigJam)switch(r){case l.bD.PLUGIN:return"recent-plugins-figjam";case l.bD.WIDGET:return"recent-widgets-figjam";case l.bD.HUB_FILE:return"recent-templates-figjam";case d.dB.FACE_STAMP:return p;case d.dB.WHITEBOARD_TOOL:return h;default:return null}if(e===d.$A.Design)switch(r){case l.bD.PLUGIN:return"recent-plugins-figma-design";case l.bD.WIDGET:return"recent-widgets-figma-design";default:return null}return e===d.$A.Handoff?r===l.bD.PLUGIN?"recent-plugins-handoff":null:e===d.$A.Slides&&r===l.bD.HUB_FILE?"recent-templates-piper":null}function g(e,r){if(!i.x4)return[];let n=[],a=_(e,r),o=a&&i.x4.getItem(a);try{n=o&&JSON.parse(o)||[]}catch(e){}return n.map(e=>({...e,type:e.type||d.vt.CommunityResource}))}function f(e){let r=(0,u.uF)(e),n=e.community_publishers.accepted.map(e=>({isPending:!1,profile:{id:e.id,profileHandle:e.profile_handle,user:null,team:null,org:null,[e.entity_type]:{name:e.name}},role:s.un.CREATOR}));return r.community_publishers=n,r}function E(e){switch(e.type){case d.vt.CommunityResource:return e.id;case d.vt.TeamTemplate:return e.key;default:(0,a.xb)(e)}}},496470:(e,r,n)=>{n.d(r,{Aw:()=>N,XV:()=>v,v9:()=>A}),n(943632);var a=n(299321);n(275556);var i=n(89865),o=n.n(i),s=n(776250),l=n(374626),c=n(632430),d=n(44892),u=n(416095),m=n(237929),p=n(173454),h=n(809073);n(510879);var _=n(811529);n(731262);var g=n(378905),f=n(696673),E=n(875847),y=n(335682),b=n(794488),I=n(113916);let T=e=>null==e||e.type===p.PW.STATE_GROUP?null:e?.containing_frame?.containingStateGroup?.nodeId||null;function v(e,r,n,a){if(!e)return{selectedItem:null,relatedItems:[]};let i=null,s={},c=(0,I.QL)(e,a);if(c){let{publishID:e,fileKey:a}=c;if((0,f.wJ)(a))return function(e,r){let n=l.zl.get(y.yV),a=l.zl.get(b.z),i=(0,E.T9)(n?.project),{hubFileIdToSubscribedItems:s}=(0,_.o6)(r,n,a,i),{publishID:c,fileKey:d}=e,u=s[d]??[];if(0===u.length)return{selectedItem:null,relatedItems:[]};let m=o()(u,e=>e.node_id),p=S(m[c],m),h=w(p,u);return{selectedItem:p,relatedItems:h}}(c,n);let m=r[a];if(m){let r=(0,u.j7)(n.published.components,m),a=(0,u.j7)(n.published.stateGroups,m);s={...(0,d.Jl)(r),...a},i=S(r[e]??a[e],s)}}else{s=(0,d.Qx)(n);let r=T(i=n.local.components[e]??n.local.stateGroups[e]);r&&(i=s[r])}let m=w(i,Object.values(s??{}));return{selectedItem:i,relatedItems:m}}function S(e,r){let n=T(e);return n?r[n]:e}function w(e,r){if(!e||!e.containing_frame?.nodeId&&1===(0,m.ke)(e.name).length)return[];let n=(0,m.In)(e.name);return r.filter(r=>(0,u.nJ)(r.containing_frame,e?.containing_frame)&&(0,m.In)(r.name)===n)}function A(e,r,n,i,o,l,d,u){if(e){if((0,g.TK)(e,n)){if(e.type===p.PW.COMPONENT){let r=e.node_id;a.glU.replaceSymbolBackingInstances({[r]:i},l)}else{let r=a.glU.getSimilarStates(i,e.node_id,"");a.glU.replaceSymbolBackingInstances(r,l)}(0,s.sx)("Instance Swapped To Local Component",{source:o,...d,queryId:u})}else r(c.uO({item:e,instanceGUIDs:i,sourceForTracking:o,storeInRecentsKey:h.$A.Design,usedSwapInstanceKeyboardShortcut:l,queryId:u??void 0}))}}function N(e){a.glU.replaceSymbolBackingInstances(e,!1)}},939562:(e,r,n)=>{n.d(r,{wm:()=>i}),n(188507);var a=n(904669);let i=(0,n(38580).eU)((0,a.UN)())},707465:(e,r,n)=>{n.d(r,{$Z:()=>S,IE:()=>B,Iu:()=>U,Np:()=>A,Tk:()=>x,U2:()=>H,YJ:()=>W,YP:()=>M,bW:()=>D,s5:()=>G,vU:()=>F,xS:()=>w,yn:()=>k,zg:()=>V});var a=n(623977),i=n(966712),o=n(179940),s=n(687396),l=n(101231),c=n(31551),d=n(553492),u=n(687729),m=n(239671),p=n(567088),h=n(935938),_=n(124780),g=n(338880),f=n(507956),E=n(290806),y=n(799507),b=n(846456),I=n(879408),T=n(565532),v=n(935757);let S=new u.k([new s.$T,new I.f,new f.YY,new b.a,new l.m,new _.B,new c.G,new d._,new y.N,new E.u,new g.i,new T.T]);function w(e,r){return new URL(A(e,r),document.baseURI).href}function A(e,r){return S.selectedViewToPath(r,e)}let N=["drafts","fonts","libraries","search","settings","plugins","widgets","user"].concat(s.nw),C=RegExp(`^/files/([0-9]+)/(?:${N.join("|")})(.*)$`),L=RegExp("^/files/([0-9]+)/?$"),O=RegExp(`^/files/team/([0-9]+)/(?:${N.join("|")})(.*)$`),R=(e,r,n)=>{let a=e.split("/");return!a[1]||"files"!==a[1]||(0,i.kc)().ps_benchmark&&6===a.length&&"files"===a[1]&&"team"===a[2]&&"restore"===a[5]||(e.match(C)?a.splice(2,1):e.match(O)?a.splice(2,2):(a.length>=3&&r&&a[2]===r&&a.splice(2,1),a.length>=3&&n&&a[3]===n&&a.splice(2,2))),a},P=(e,r)=>{let n=e.split("/");return n[1]&&"files"===n[1]&&(e.match(C)?n.splice(2,1):n.length>=3&&r&&n[2]===r&&n.splice(2,1)),n};function D(e){let r=e.match(C);if(r)return r[1];let n=e.match(L);return n?n[1]:null}function k(e){let r=e.match(O);return r?r[1]:null}function M(e){let r=P(e,(0,v.pk)());return""===r[r.length-1]&&r.splice(r.length-1,1),r}function F(e,r,n,a){let s=[],l=(0,i.kc)().dev_mode_suggested_upgrades&&n&&!!(0,o.qg)(n).devModeSuggestions,c=n&&!!(0,o.qg)(n).dashDeepLink;return(0,i.kc)().ps_benchmark?s=R(r,e.currentUserOrgId,e.currentTeamId):l||c?(s=R(r,e.currentUserOrgId,e.currentTeamId),r.match(O)&&(s[3]=P(r,e.currentUserOrgId)[3])):s=P(r,e.currentUserOrgId),""===s[s.length-1]&&s.splice(s.length-1,1),S.pathToSelectedView(e,s,n,a)||{view:"recentsAndSharing"}}function x(e,r,n,a,i){if(r===a&&n===i)return e;let o=r===p.O.ORG?n:`team/${n}`,s=a===p.O.ORG?i:`team/${i}`;return e.replace(o,s)}function U(e,r){return S.selectedViewName(r,e)}function B(e){let r=e.modalShown;for(;r;){if("ACCOUNT_SETTINGS_MODAL"===r.type)return!0;r=r.prevModal}return!1}function V(e){return"fullscreen"===e.view&&e.workshopModeInfoLoaded&&e.workshopModeInfo&&e.editorType===m.nT.Whiteboard&&new Date<e.workshopModeInfo.until||!1}function G(e){return"fullscreen"===e.view&&e.nodeId||null}function H(e){switch(e.view){case"fullscreen":return e.fileKey||null;case"mobileViewer":return e.file?.key||null;case"prototype":return null==e.file&&a.ZQ({data:{selectedView:e}}),e.file.key;default:return null}}function W(e){if("recentsAndSharing"===e.view){var r;return void 0===e.tab||(r=e.tab)===h.G.RECENTLY_VIEWED||r===h.G.SUGGESTED}return!1}},416822:(e,r,n)=>{n.d(r,{j:()=>s,q:()=>l});var a=n(188507),i=n(966712),o=n(628705);function s(e){let{currentUserOrgId:r}=e;return r?`/${r}`:(0,i.kc)().ps_benchmark?(0,o.i)(e):""}function l(){return(0,a.d4)(s)}},793485:(e,r,n)=>{n.d(r,{Z:()=>E});var a=n(171812),i=n(299321),o=n(209426),s=n(38580),l=n(374626),c=n(456363),d=n(293017),u=n(626783),m=n(259927),p=n(416095),h=n(484892),_=n(656012),g=n(179243);let f=(0,s.eU)({});class E{constructor(e){this.store=e,this.dispatch=e=>{this.store.dispatch(e)}}showEyedropper(e,r,n,a,i,o,s,l,c,u){this.dispatch(d.Gm({color:e,width:r,height:n,rgba:a,grid:i,cursorPosition:o,assetId:s,variableSetModeId:l,resolvedVariableColor:c,dropperData:u}))}hideEyedropper(){this.dispatch(d.Gm(null))}getColorFromNativeEyeDropper(){return window.EyeDropper?new EyeDropper().open().then(({sRGBHex:e})=>e):Promise.reject()}updateSelectionImages(e){let r=l.zl.get(f),n=Object.keys(e).length!==Object.keys(r).length;if(!n){for(let a in r)if(!e[a]){n=!0;break}}n&&l.zl.set(f,e)}updateSelectionPaintsWithFillEncodedPaints(e,r,n,i,o,s){let l=(0,h.S)(e,r,n,i,o),c=this.store.getState().mirror.selectionPaints;(!(0,a.c2)(c.paints,l)||c.emptyDueToLimitExceeded||s)&&(this.store.dispatch(u.QA(l)),s&&this.store.dispatch(u.Xp(!0)))}updatePaintsDirectlyOnSingleNodeWithFillEncodedPaints(e,r){var n=[];for(let r of e){let e=(0,h.K)(r);e?n.push(e):console.error(`Failed to decode: ${r}`)}n=n.map((e,n)=>(e.variableScopes=new Set(r?r[n]:[]),e));let i=this.store.getState().mirror.selectionPaints;(!(0,a.c2)(i.paintsDirectlyOnSingleNode,n)||i.emptyDueToLimitExceeded)&&this.store.dispatch(u.n0(n))}updatePaintStyles(e,r,n){let i=this.store.getState().library,o=this.store.getState().mirror.sceneGraph,s=r.map(e=>{let r=(0,p.Gp)(e.key,e.guids,i);return r?{styleKey:e.key,version:e.version,styleGUIDs:e.guids,count:e.count,uniqueNodesCount:e.uniqueNodesCount,styleName:(0,p.uH)(r,o),variableScopes:new Set(e.variableScopes)}:{styleKey:e.key,version:e.version,styleGUIDs:e.guids,count:e.count,uniqueNodesCount:e.uniqueNodesCount,styleName:"",variableScopes:new Set(e.variableScopes)}});s.sort((e,r)=>e.count>r.count?-1:e.count===r.count&&e.styleName<r.styleName?-1:1),(!(0,a.c2)(e,s)||this.store.getState().mirror.selectionPaints.emptyDueToLimitExceeded)&&this.store.dispatch(n(s))}updateSelectionPaintsWithStyles(e){this.updatePaintStyles(this.store.getState().mirror.selectionPaints.styles,e,u.Lh)}updateSelectionTextAndEffectStyles(e){c.gq.syncFromFullscreen({styles:e})}updatePaintsDirectlyOnSingleNodeWithStyles(e){this.updatePaintStyles(this.store.getState().mirror.selectionPaints.stylesDirectlyOnSingleNode,e,u.uQ)}clearSelectionPaintsDueToLimitExceeded(){this.store.dispatch(u.Mc())}clearSelectionTextAndEffectStylesDueToLimitExceeded(){c.gq.syncFromFullscreen({styles:[]})}updateSelectionPaintFromDropper(e){let r=this.store.getState().currentSelectionPaintInPicker;if(null==r.originalPaint)return!1;let n=(0,h.K)(e);return null==n?(console.error(`Failed to apply paint: ${e}`),!1):(i.Osy.updatePaint((0,o.GP)(r.originalPaint),e,!0,null),this.store.dispatch(u.oI({...r,updatedPaintFromDropper:n.paint})),!0)}pickerHasSelectionPaintOpen(){return null!=this.store.getState().currentSelectionPaintInPicker.originalPaint}originalPaintForCurrentSelectionPaintsPicker(){let e=this.store.getState().currentSelectionPaintInPicker.originalPaint;return null==e?"":(0,o.GP)(e)}colorPickerSelectedVariable(){let e=this.store.getState().variablePickerShown;if(e.isShown&&e.resolvedType===i.rXF.COLOR&&"variable-picker-alias"===e.type)return{varId:e.variableID,modeId:e.modeID};let r=this.store.getState().pickerShown?.id,n=r?.startsWith(m.Yr),a=l.zl.get(g.E_);return n&&a?a:{}}isPrototypingModalOpen(){return this.store.getState().pickerShown?.id===m.o$}validateCopyBuffer(e,r){let n=this.store.getState().openFile?.key;n&&_.Z.postValidateCopy({nodeIds:e,fileKey:n,copyType:r})}}},435011:(e,r,n)=>{n.d(r,{hK:()=>s});var a=n(302245),i=n(609822),o=n(352898);let s=e=>e.selectedView;(0,a.Mz)(s,e=>"workspace"===e.view&&e.subView===o.V0.DIRECTORY?e.workspaceId:void 0);let l=(0,a.Mz)(s,e=>"team"===e.view?e.teamId:void 0),c=(0,a.Mz)(s,e=>"folder"===e.view?e.folderId:void 0),d=(0,a.Mz)(s,e=>e.currentTeamId,(e,r)=>"allProjects"===e.view?r:void 0),u=(0,a.Mz)(l,d,e=>e.teams,(e,r,n)=>e&&n[e]||r&&n[r]),m=(0,a.Mz)(c,e=>e.folders,(e,r)=>e&&r[e]),p=(0,a.Mz)(m,i.D,(e,r)=>e&&e.id!==r?e:void 0);(0,a.Mz)(u,p,(e,r)=>e||r)},284321:(e,r,n)=>{n.d(r,{$c:()=>eT,AC:()=>tI,Dc:()=>e2,F9:()=>X,FZ:()=>eh,GS:()=>eC,Io:()=>F,Iy:()=>ty,JI:()=>e9,Ln:()=>M,MH:()=>ea,MW:()=>eW,Mh:()=>U,Pd:()=>B,Pg:()=>W,Qp:()=>tb,Wz:()=>ec,bh:()=>el,cM:()=>Q,dM:()=>ei,dU:()=>eN,e_:()=>k,fA:()=>e1,h3:()=>ep,ju:()=>eK,oB:()=>e4,p9:()=>eA,qN:()=>tS,tK:()=>eo,x$:()=>tE,x6:()=>em,y6:()=>eU});var a=n(943632),i=n(7674),o=n(299321),s=n(259120),l=n(636149),c=n.n(l),d=n(595977),u=n.n(d),m=n(35645),p=n.n(m),h=n(802691),_=n.n(h),g=n(302245),f=n(966712),E=n(38580),y=n(374626),b=n(97395),I=n(154483),T=n(875847),v=n(951546),S=n(335682),w=n(529928),A=n(416095),N=n(243987),C=n(49116),L=n(998612),O=n(173454),R=n(243999),P=n(234945),D=n(693223);let k=e=>e.library,M=e=>e.library.libraryRemapping,F=e=>e.library.libraryPublishingMode,x=e=>e.openFile?.publishedHubFile,U=e=>e.library.openHubFilePublished__LIVEGRAPH.components,B=e=>e.library.openHubFilePublished__LIVEGRAPH.stateGroups,V=e=>e.library.openHubFilePublished__LIVEGRAPH.styles,G=e=>e.library.openHubFilePublished__LIVEGRAPH.variables,H=e=>e.library.openHubFilePublished__LIVEGRAPH.variableSets,W=(0,g.Mz)([U,V,G,H,B],(e,r,n,a,o)=>!(0,i.Im)(e)||!(0,i.Im)(r)||!(0,i.Im)(n)||!(0,i.Im)(a)||!(0,i.Im)(o)),K=(0,g.Mz)([S.sS,C.V2],(e,r)=>e&&r[e]||{}),Y=(0,g.Mz)([S.sS,C.Wg],(e,r)=>e&&r[e]||{}),$=e=>e.library.local.thumbnails,j=e=>e.library.openFilePublished__LIVEGRAPH.styles,z=e=>e.library.openFilePublished__LIVEGRAPH.variableSets,q=e=>e.library.openFilePublished__LIVEGRAPH.modules,X=(0,g.Mz)([K,j,z,q],(e,r,n,a)=>!(0,i.Im)(r)||!(0,i.Im)(e)||!(0,i.Im)(n)||!(0,i.Im)(a)),J=(0,g.Mz)([e=>e.library.local.styles,S.sS,F,e=>e.library.publishableStyles,V,x,$],(e,r,n,a,i,o,l)=>{if(n===O.o.HUBFILE&&o){let n=(0,s.l)(o.libraryKey),{newLocal:c}=(0,A.rC)(A.w8,a,i,e,l,{},r||"",n,new Set,O.PW.STYLE);return c}return e}),Z=(0,g.Mz)([j,V,F],(e,r,n)=>n===O.o.HUBFILE?r:e),Q=(0,g.Mz)([J,Z],(e,r)=>{if(!(0,f.kc)().ds_remove_redux_library_status)return e;let n={};for(let a of Object.values(e)){let e=eO(a,r[a.node_id],eP);n[a.node_id]={...a,status:e}}return n}),ee=(0,g.Mz)([e=>e.library.local.components,S.sS,F,U,x,e=>e.library.publishableSymbols,$],(e,r,n,a,i,o,l)=>{if(n===O.o.HUBFILE&&i){let n=(0,s.l)(i.libraryKey),{newLocal:c}=(0,A.rC)(A.i_,o,a,e,l,{},r||"",n,new Set,O.PW.COMPONENT);return c}return e}),et=(0,g.Mz)([K,U,F],(e,r,n)=>n===O.o.HUBFILE?r:e),er=(0,g.Mz)([function(e){return e.library.local.stateGroups},S.sS,F,B,x,e=>e.library.publishableStateGroups,$],(e,r,n,a,i,o,l)=>{if(n===O.o.HUBFILE&&i){let n=(0,s.l)(i.libraryKey),{newLocal:c}=(0,A.rC)(A.LB,o,a,e,l,{},r||"",n,new Set,O.PW.STATE_GROUP);return c}return e}),en=(0,g.Mz)([Y,B,F],(e,r,n)=>n===O.o.HUBFILE?r:e),ea=(0,g.Mz)([ee,et,er,en],(e,r,n,a)=>{if(!(0,f.kc)().ds_remove_redux_library_status)return e;let i={},o=(e,r)=>{if(r?.content_hash!==e.content_hash||!(0,A.pD)(r.name,e?.name)||!(0,A.pD)(r.description,e.description)||(0,A.Q_)(r.containing_frame,e?.containing_frame))return!0;let i=(0,A.E2)(e),o=i&&n[i]||null,s=(0,A.E2)(r),l=s&&a[s]||null;return o?!l||eD(o,l):null!=l};for(let n of Object.values(e)){let e=eO(n,r[n.node_id],o);i[n.node_id]={...n,status:e}}return i}),ei=(0,g.Mz)([er,en],(e,r)=>{if(!(0,f.kc)().ds_remove_redux_library_status)return e;let n={};for(let a of Object.values(e)){let e=eO(a,r[a.node_id],eD);n[a.node_id]={...a,status:e}}return n}),eo=(0,b.P8)([e=>{let r={};return Object.entries(e.library.localVariablesById).forEach(([e,n])=>{n.isSoftDeleted||(r[e]=n)}),r},e=>e.library.openFilePublished__LIVEGRAPH.variables,S.tB,F,x,G],(e,r,n,a,i,o)=>{let l={},c=a===O.o.HUBFILE&&i?o:r,d=n?.key??"",u=a===O.o.HUBFILE&&i?(0,s.l)(i.libraryKey):(0,s.l)(n?.libraryKey??"");for(let[r,n]of Object.entries(c))e.hasOwnProperty(r)||(l[r]={...n,subscriptionStatus:"LOCAL",isPublishable:!1,modeValues:{},keyForPublish:n.key,status:O.E8.DELETED,deletedFromSceneGraph:!0,isSoftDeleted:!0,file_key:d,file_key_source:I.Ps.LOCAL_FILE,library_key:u,hasOnlyBeenReordered:!1});for(let r of Object.values(e)){let e=c[r.node_id],n=eO(r,e,ek);l[r.node_id]={...r,status:n,file_key:d,file_key_source:I.Ps.LOCAL_FILE,library_key:u,key:e?.key,hasOnlyBeenReordered:r&&e&&r.version===e.version&&r.sortPosition!==e.sortPosition}}return l}),es=(0,g.Mz)([eo],e=>c()(Object.values(e),e=>e.variableSetId)),el=(0,b.P8)([e=>{let r={};return Object.entries(e.library.localVariableSetsById).forEach(([e,n])=>{n.isSoftDeleted||(r[e]=n)}),r},z,es,S.tB,F,x,H],(e,r,n,a,i,l,c)=>{let d=i===O.o.HUBFILE&&l?c:r,u=a?.key??"",m=i===O.o.HUBFILE&&l?(0,s.l)(l.libraryKey):(0,s.l)(a?.libraryKey??""),p={};for(let[r,n]of Object.entries(d))e.hasOwnProperty(r)||(p[r]={...n,subscriptionStatus:"LOCAL",modes:[],defaultModeID:"",isPublishable:!1,keyForPublish:n.key,status:O.E8.DELETED,deletedFromSceneGraph:!0,isSoftDeleted:!0,file_key:u,file_key_source:I.Ps.LOCAL_FILE,library_key:m,variableSetError:o.HG$.NONE});for(let r of Object.values(e)){let e=d[r.node_id],a=function(e,r,n){let a=eO(e,r,eM);if(a!==O.E8.CURRENT)return a;for(let e of n)if(e.status!==O.E8.CURRENT&&e.status!==O.E8.NOT_STAGED)return O.E8.CHANGED;return O.E8.CURRENT}(r,e,n[r.node_id]??[]);p[r.node_id]={...r,status:a,file_key:u,file_key_source:I.Ps.LOCAL_FILE,library_key:m,key:e?.key}}return p}),ec=(0,g.Mz)([ea],e=>{let r={};for(let n of Object.values(e)){let e=(0,A.E2)(n);null!=e&&(r[e]=r[e]??[],r[e].push(n))}return r}),ed=(0,g.Mz)([ea],e=>_()(e,e=>!(0,A.ad)(e)));function eu(e,r){return!!r&&!(r.version===e.version&&(0,A.pD)(r.name,e?.name)&&(0,A.pD)(r.description,e.description))}let em=(0,g.Mz)([e=>e.library.local.modules,q,e=>e.library.openHubFilePublished__LIVEGRAPH.modules,x,F],(e,r,n,a,i)=>{if(!(0,f.kc)().dse_module_publish)return{};let o={};if(i===O.o.HUBFILE&&a)for(let[r,a]of Object.entries(n))Object.keys(e).includes(r)||(o[r]={...a,status:O.E8.DELETED,deletedFromSceneGraph:!0});let s=i===O.o.HUBFILE?n:r;for(let r of Object.values(e)){let e=eO(r,s[r.node_id],eu);o[r.node_id]={...r,status:e}}return o}),ep=(0,g.Mz)([em],e=>(0,f.kc)().dse_editor_templates_v1?Object.fromEntries(Object.entries(e).filter(([,e])=>e.moduleSource===o.QjO.EDITOR_TEMPLATE)):{}),eh=(0,g.Mz)([ed,ei],(e,r)=>({...e,...r})),e_=(0,g.Mz)([eh],e=>u()(e,e=>(0,A.CG)(e))),eg=(0,g.Mz)([eh],e=>Object.values(e).some(e=>(0,A.HF)(e.status))),ef=(0,g.Mz)([em],e=>Object.values(e).some(e=>(0,A.HF)(e.status)));(0,g.Mz)([eg,ef],(e,r)=>e||r);let eE=(0,g.Mz)([eh,P.Xt],(e,r)=>Object.keys(r).reduce((r,n)=>(e[n]&&(r[n]=e[n]),r),Object.create(null))),ey=(0,g.Mz)([em,P.Xt],(e,r)=>Object.keys(r).reduce((r,n)=>(e[n]&&(r[n]=e[n]),r),Object.create(null))),eb=(0,g.Mz)([Q,eh,el,em],(e,r,n,a)=>Object.keys(e).length>0||Object.keys(r).length>0||Object.keys(n).length>0||Object.keys(a).length>0),eI=(0,w.bt)(eb),eT=(0,E.eU)(e=>{if(e(eI))return!0;for(let r of Object.keys(v.Mk))if((0,L.O)(r)&&v.Mk[r].local){for(let n of Object.values(e(v.Mk[r].local)))if(!n.isSoftDeleted)return!0}return!1}),ev=(e,r)=>null!=e.status&&(!!(0,A.lg)(e.status)||!!(0,A.Hb)(e.status)&&(r?r.has(e.node_id):!!e.old_key)),eS=(e,r)=>ev(e,r)&&(0,A.HF)(e.status),ew=(0,w.bt)(e=>e.userStateLoaded),eA=(0,E.eU)(e=>e(ew)&&e(S.yV)?.canEdit&&(e(tS)||e(eT))),eN=(0,g.Mz)([ea,ei,Q,(e,r)=>r],eL),eC=(0,g.Mz)([ea,ei,Q],(e,r,n)=>eL(e,r,n,void 0));function eL(e,r,n,a){let i={...e,...r,...n},o=new Set(a?Object.keys(a).filter(e=>"FORCED_COPY"!==a[e].publishType):Object.values(i).filter(e=>!!e.old_key).map(e=>e.node_id));return Array.from(o).map(r=>e[r]&&(0,A.E2)(e[r])).filter(e=>!!e).forEach(e=>{o.add(e)}),o}let eO=(e,r,n)=>{let a=r&&null==r.unpublished_at,i="isSoftDeleted"in e&&e.isSoftDeleted,o=!!e.isPublishable&&!i;return a&&!o?O.E8.DELETED:!a&&o?O.E8.NEW:a||o?n(e,r)?O.E8.CHANGED:O.E8.CURRENT:O.E8.NOT_STAGED},eR=(e,r)=>!(r&&r.content_hash===e?.content_hash&&(0,A.pD)(r.name,e.name)&&(0,A.pD)(r.description,e.description)),eP=(e,r)=>eR(e,r)||!(0,A.pD)(r.sort_position,e.sort_position),eD=(e,r)=>!(r&&r.version===e.version&&!(0,A.Q_)(r.containing_frame,e?.containing_frame)&&(0,A.pD)(r.name,e?.name)&&(0,A.pD)(r.description,e.description)),ek=(e,r)=>!e||!r||r.version!==e.version||r.sortPosition!==e.sortPosition,eM=(e,r)=>!(r&&r.version===e?.version);function eF(e,r,n,i){let[o,s]=p()(r,r=>ev(r,e)),[l,c]=p()(o,n),[d,u]=p()(s,e=>(0,A.HF)(e.status));return{modified:{erroneous:(0,a.Ul)(l,...i),wellFormed:(0,a.Ul)(c,...i)},unmodified:{published:(0,a.Ul)(d,...i),unpublished:(0,a.Ul)(u,...i)}}}function ex(e,r){return null==r?eV(e):eB(e,r)}let eU=(0,y.Iz)(e=>{let r=e?(0,w.bt)(r=>ex(r,e)):(0,w.bt)(eV),n=e?(0,w.bt)(r=>eN(r,e)):(0,E.eU)(new Set);return(0,E.eU)(e=>{let a=e(r),i=e(n),o=Object.values(e(R.t).data??{});return{...a,libraryAssets:{[O.PW.RESPONSIVE_SET]:eF(i,(0,L.O)(O.PW.RESPONSIVE_SET)?o.filter(e=>e.type===O.PW.RESPONSIVE_SET):[],()=>!1,[A.gA])}}})}),eB=(0,g.Mz)([Q,ea,ei,eh,el,eo,em,eN,(e,r)=>r],eG),eV=(0,g.Mz)([Q,ea,ei,eh,el,eo,em,eC],(e,r,n,a,i,o,s,l)=>eG(e,r,n,a,i,o,s,l,void 0));function eG(e,r,n,a,i,o,s,l,c){let d=(e,r)=>{if(!c)return 0;let n=c[e.node_id],a=c[r.node_id];return n&&a?"FORCED_COPY"===n.publishType&&"FORCED_COPY"!==a.publishType?1:"FORCED_COPY"!==n.publishType&&"FORCED_COPY"===a.publishType?-1:0:0},u=[...new Set(Object.values(o).filter(e=>!e.isPublishable).map(e=>e.variableSetId))].map(e=>i[e]).filter(e=>!!e);return{styles:eF(l,Object.values(e),()=>!1,[A.Lk,d]),components:eF(l,Object.values(r),A.zE,[A.gA,d]),stateGroups:eF(l,Object.values(n),A.zE,[A.gA,d]),productComponents:eF(l,Object.values(a),A.zE,[A.gA,d]),variableSets:eF(l,(0,f.kc)().ds_variables_extended_sets?Object.values(i):Object.values(i).filter(e=>!(0,O.GI)(e)),A.RQ,[A.MA]),variableSetsWithHiddenVariables:eF(l,u,()=>!1,[A.MA]),variables:eF(l,Object.values(o),()=>!1,[A.MA]),modules:eF(l,(0,L.O)(O.PW.MODULE)?Object.values(s):[],()=>!1,[A.gA])}}let eH=(0,b.P8)([es],e=>Object.fromEntries(Object.entries(e).map(([e,r])=>[e,eF(new Set,r,()=>!1,[A.MA])]))),eW=()=>(0,b.P8)([eH,(e,r)=>r],(e,r)=>{let n=e[r];return n?n.modified.wellFormed:[]}),eK=()=>(0,b.P8)([eH,(e,r)=>r],(e,r)=>{let n=e[r];return n?n.unmodified.unpublished.filter(e=>!e.isPublishable):[]}),eY=(0,g.Mz)([ex],e=>e.styles.modified.wellFormed),e$=(0,g.Mz)([Q],e=>Object.values(e).filter(e=>eS(e))),ej=(0,g.Mz)([ex],e=>e.components.modified.wellFormed),ez=(0,g.Mz)([ex],e=>e.stateGroups.modified.wellFormed),eq=(0,g.Mz)([ex],e=>e.productComponents.modified.wellFormed),eX=(0,g.Mz)([eq],e=>e.filter(e=>(0,A.HF)(e.status))),eJ=(0,g.Mz)([ex],e=>e.variableSets.modified.wellFormed),eZ=(0,g.Mz)([eJ],e=>e.filter(e=>(0,A.HF)(e.status))),eQ=(0,g.Mz)([ex],e=>(0,L.O)(O.PW.MODULE)?e.modules.modified.wellFormed:[]),e0=(0,g.Mz)([eQ],e=>e.filter(e=>(0,A.HF)(e.status))),e1=(0,g.Mz)([S.tB,D.P],(e,r)=>!!((0,f.kc)().cmty_lib_admin_publish&&e?.publishedHubFile)||!((0,f.kc)().ps_benchmark&&(0,T.jd)(e?.project))&&!!(e&&(0,N.w5)(e.teamId?r[e.teamId]:null))),e2=eY,e3=(0,g.Mz)([e2],e=>e.length>0),e6=(0,y.Iz)(e=>(0,w.bt)(r=>e3(r,e))),e5=(0,g.Mz)([e$],e=>e.length>0),e8=(0,w.bt)(e5),e4=(0,g.Mz)([ej,e1],(e,r)=>r?e:[]),e9=(0,g.Mz)([ez,e1],(e,r)=>r?e:[]),e7=(0,g.Mz)([eq,e1],(e,r)=>r?e:[]),te=(0,g.Mz)([e7],e=>e.length>0),tt=(0,y.Iz)(e=>(0,w.bt)(r=>te(r,e))),tr=(0,g.Mz)([eX,e1],(e,r)=>r?e:[]),tn=(0,g.Mz)([tr],e=>e.length>0),ta=(0,y.Iz)(e=>(0,w.bt)(r=>tn(r,e))),ti=(0,g.Mz)([eJ],e=>e),to=(0,g.Mz)([ti],e=>e.length>0),ts=(0,y.Iz)(e=>(0,w.bt)(r=>to(r,e))),tl=(0,g.Mz)([eZ],e=>e),tc=(0,g.Mz)([tl],e=>e.length>0),td=(0,y.Iz)(e=>(0,w.bt)(r=>tc(r,e))),tu=(0,g.Mz)([eQ,e1],(e,r)=>r?e:[]),tm=(0,g.Mz)([tu],e=>e.length>0),tp=(0,y.Iz)(e=>(0,w.bt)(r=>tm(r,e))),th=(0,g.Mz)([e0],e=>e.length>0),t_=(0,y.Iz)(e=>(0,w.bt)(r=>th(r,e))),tg=(0,y.Iz)(e=>(0,E.eU)(r=>{for(let n of Object.values(r(eU(e)).libraryAssets))if(n.modified.wellFormed.length>0&&(0,L.O)(n.modified.wellFormed[0].type))return!0;return!1})),tf=(0,y.Iz)(e=>(0,E.eU)(r=>{for(let n of Object.values(r(eU(e)).libraryAssets))if(n.modified.wellFormed.length>0&&(0,L.O)(n.modified.wellFormed[0].type)&&n.modified.wellFormed.some(e=>(0,A.HF)(e.status)))return!0;return!1})),tE=(0,y.Iz)(e=>{let r=(0,w.bt)(r=>e2(r,e)),n=(0,w.bt)(r=>e7(r,e)),a=(0,w.bt)(r=>ti(r,e)),i=(0,w.bt)(r=>tu(r,e));return(0,E.eU)(o=>{let s=o(r),l=o(n),c=o(a),d=o(i),u=o(eU(e)),m=Object.keys(u.libraryAssets).flatMap(e=>(0,L.O)(e)?u.libraryAssets[e].modified.wellFormed:[]);return[...s.map(e=>e.node_id),...l.map(e=>e.node_id),...c.map(e=>e.node_id),...d.map(e=>e.node_id),...m.map(e=>e.node_id)]})}),ty=(0,y.Iz)(e=>(0,E.eU)(r=>r(e6(e))||r(tt(e))||r(ts(e))||r(tp(e))||r(tg(e))));(0,y.Iz)(e=>(0,E.eU)(r=>r(e8)||r(ta(e))||r(td(e))||r(t_(e))||r(tf(e)))),(0,g.Mz)([eE,e7],(e,r)=>r.some(r=>e[r.node_id])),(0,g.Mz)([ey,tu],(e,r)=>r.some(r=>e[r.node_id]));let tb=(0,g.Mz)([e_,C.c5],(e,r)=>({...r,...e})),tI=(0,g.Mz)([tu],e=>e.map(e=>e.node_id)),tT=(0,E.eU)(e=>Object.values(e(R.t).data??{}).some(e=>(0,A.HF)(e.status))),tv=(0,w.bt)(X),tS=(0,E.eU)(e=>e(tv)||e(tT))},57392:(e,r,n)=>{n.d(r,{Bw:()=>$,I7:()=>et,P1:()=>J,S9:()=>X,WE:()=>ei,WJ:()=>ee,Yy:()=>Y,bA:()=>Z,cb:()=>en,ij:()=>B,j_:()=>z,jk:()=>q,lm:()=>x,mO:()=>j,nm:()=>eo,pk:()=>er,t_:()=>ea,wy:()=>es});var a=n(388393),i=n(299321),o=n(880934),s=n(695956),l=n.n(s),c=n(302245),d=n(374626),u=n(38580),m=n(288706),p=n(97395),h=n(776621),_=n(154483),g=n(974105),f=n(420576),E=n(848661),y=n(529928),b=n(416095),I=n(173454),T=n(950919),v=n(49116),S=n(234945),w=n(388094),A=n(207584);function N(e,r,n,i,o){let s=Object.create(null);for(let{key:r,version:a}of e)if(r){if(r in n){let e=r;r=n[r],a=o?.[e]===a?a:"FAKE_VERSION_FOR_MOVED_ITEM"}s[r]=s[r]||new Set,s[r].add(a)}for(let e of r)if(e in i){let r=i[e];s[r]=s[r]||new Set,s[r].add((0,a.Xf)("FAKE_VERSION_FOR_MOVED_ITEM"))}return s}let C=(0,c.Mz)([w._Q,S.O1,T.aR,T.BE,e=>{let{styles:r,destinationStyleKeyToLegacySourceStyle:n}=e.library.used__LIVEGRAPH;return Object.values(r).reduce((e,r)=>{if("loaded"!==r.status||!n[r.data.key])return e;let{key:a,version:i}=n[r.data.key];return e[a]=i,e},Object.create(null))}],N),L=(0,c.Mz)([w.m0,S.T_,T.aR,T.BE],N),O=(0,c.Mz)([w.v3],e=>N(e,[],{},{})),R=(0,c.Mz)([w.Du],e=>Object.values(e).reduce((e,r)=>(e.has(r.key)||e.set(r.key,new Set),r.pageIds.forEach(n=>e.get(r.key)?.add(n)),e),new Map));function P(e,r,n){if(0===e.size)return!1;if(1===e.size){let a=Array.from(e)[0],i=n(r);return i?.toLowerCase()!==a.toLowerCase()}return!0}let D=(0,_.fv)();function k({publishedAssetsByKey:e,usedVersionsByAssetKey:r,editingFile:n,getVersion:i,getUpdateAsset:o}){let s=[];for(let l of Object.keys(r)){let c=e[(0,a.sg)(l)];!(!c||n&&(0,f.dp)(n,D(c)))&&P(r[(0,a.sg)(l)],c,i)&&s.push(o(c))}return s}let M=(0,c.Mz)([A.wi,C,g.d1,T.uB,T.tp,T.J8,w.tY,S.tX],(e,r,n,a,i,o,s,l)=>{let c=!1,d=[],u=!1;return{styleUpdatesForAllPages:k({publishedAssetsByKey:e,usedVersionsByAssetKey:r,editingFile:n,getVersion:e=>e.content_hash,getUpdateAsset:e=>{let r={...e,oldSubscribedKeysToUpdate:[],localIdsToUpdate:[]};if(e.key in a&&(r.oldSubscribedKeysToUpdate=Array.from(a[e.key]),!o[e.key]))for(let e of(c=!0,r.oldSubscribedKeysToUpdate))s.has(e)&&(u=!0);if(e.key in i){for(let n of(r.localIdsToUpdate=Array.from(i[e.key]),o[e.key]||(c=!0),r.localIdsToUpdate))if(l.has(n)){u=!0;break}}return(s.has(e.key)||r.oldSubscribedKeysToUpdate.some(e=>s.has(e))||r.localIdsToUpdate.some(e=>l.has(e)))&&d.push(r),r}}),styleUpdatesForCurrentPage:d,includesMoveUpdatesOnAnyPage:c,includesMoveUpdatesOnCurrentPage:u}}),F=(0,p.P8)([v.Ls,L],(e,r)=>{let n=Object.keys(r),a=Object.keys(e);return l()(n,a)}),x=(0,c.Mz)([F,v.m3,w.S_,S.dK],(e,r,n,a)=>{let i=new Map;for(let o of e){let e=n[o];if(!e)continue;let s=a.get(e.nodeId),l=s?.parentNode;if(s&&l&&s.isState&&l?.stateGroupKey){let e=r[l.stateGroupKey];e&&i.set(o,e)}}return i}),U=(0,_.fv)(),B=(0,c.Mz)([v.Ls,v.Wg,L,g.d1,T.uB,T.tp,w.ty,S.BA],(e,r,n,a,i,o,s,l)=>{let c=!1,d=!1,u=k({publishedAssetsByKey:e,usedVersionsByAssetKey:n,editingFile:a,getVersion:e=>e.content_hash,getUpdateAsset:e=>{let r={...e,oldSubscribedKeysToUpdate:[],localIdsToUpdate:[]},n=e.component_key;if(n in i)for(let e of(r.oldSubscribedKeysToUpdate=Array.from(i[n]),c=!0,r.oldSubscribedKeysToUpdate))s.has(e)&&(d=!0);if(n in o){for(let e of(r.localIdsToUpdate=Array.from(o[n]),c=!0,r.localIdsToUpdate))if(l.has(e)){d=!0;break}}return r}}),m=[],p=[],h=[],_=[],g=new Set;for(let e of u){let n=e.containing_frame?.containingStateGroup?.nodeId;if(n){let a=r[U(e)]?.[n];if(a){let r=h.find(e=>e.key===a.key);if(null==r&&(r={...a,newStateKeyToOutdatedItems:{}},h.push(r)),e.component_key){let n=e.component_key;r.newStateKeyToOutdatedItems[n]={oldSubscribedKeysToUpdate:e.oldSubscribedKeysToUpdate,localIdsToUpdate:e.localIdsToUpdate},(s.has(e.component_key)||e.oldSubscribedKeysToUpdate.some(e=>s.has(e))||e.localIdsToUpdate.some(e=>l.has(e)))&&!g.has(a.key)&&(_.push(r),g.add(a.key))}}}else m.push(e),(e.component_key&&s.has(e.component_key)||e.oldSubscribedKeysToUpdate.some(e=>s.has(e))||e.localIdsToUpdate.some(e=>l.has(e)))&&p.push(e)}return{componentUpdatesForAllPages:m,stateGroupUpdatesForAllPages:h,includesMoveUpdatesOnAnyPage:c,componentUpdatesForCurrentPage:p,stateGroupUpdatesForCurrentPage:_,includesMoveUpdatesOnCurrentPage:d}}),V=(0,_.fv)(),G=(0,c.Mz)([v.a3,v.gJ,O,g.d1,R,e=>e.mirror.appModel.currentPage],(e,r,n,o,s,l)=>{let c={},d=new Set,u=i.glU?.getInternalCanvasNodeId();for(let i of Object.keys(n)){let m=e[(0,a.ey)(i)];if(!m||o&&(0,f.dp)(o,V(m)))continue;let p=r[(0,a.yG)(m.variableCollectionKey)];if(!p)continue;let _=c[(0,a.yG)(m.variableCollectionKey)]||{...p,libraryVariableIdsForUpdate:[]};if((0,I.GI)(_)){(0,h.x1)("variables","Encountered variable bound to variable set extension");continue}let g=n[m.key];if(g&&P(g,m,e=>e.version)&&_.libraryVariableIdsForUpdate.push(m.node_id),_.libraryVariableIdsForUpdate.length>0&&(c[(0,a.yG)(p.key)]=_,s.has(p.key))){let e=s.get(p.key);(e?.has(l)||u&&e?.has(u))&&d.add(p.key)}}let m=Object.values(c),p=m.filter(e=>d.has(e.key));return{variableSetUpdatesForAllPages:m,variableSetUpdatesForCurrentPage:p}}),H=(0,y.bt)(B),W=(0,y.bt)(M),K=(0,y.bt)(G),Y=(0,d.Iz)(e=>(0,u.eU)(r=>{let{componentUpdatesForAllPages:n,componentUpdatesForCurrentPage:a}=r(H);return e===b.aD.ALL?n:a})),$=(0,d.Iz)(e=>(0,u.eU)(r=>{let{stateGroupUpdatesForAllPages:n,stateGroupUpdatesForCurrentPage:a}=r(H);return e===b.aD.ALL?n:a})),j=(0,d.Iz)(e=>(0,u.eU)(r=>{let{styleUpdatesForAllPages:n,styleUpdatesForCurrentPage:a}=r(W);return e===b.aD.ALL?n:a})),z=(0,m.mg)(W,e=>e.styleUpdatesForAllPages),q=(0,d.Iz)(e=>(0,u.eU)(r=>{let{variableSetUpdatesForAllPages:n,variableSetUpdatesForCurrentPage:a}=r(K);return e===b.aD.ALL?n:a})),X=(0,u.eU)(e=>{let{componentUpdatesForAllPages:r,stateGroupUpdatesForAllPages:n,includesMoveUpdatesOnAnyPage:a}=e(H),{styleUpdatesForAllPages:i,includesMoveUpdatesOnAnyPage:o}=e(W),{variableSetUpdatesForAllPages:s}=e(K);return{componentUpdatesForAllPages:r,stateGroupUpdatesForAllPages:n,styleUpdatesForAllPages:i,variableSetUpdatesForAllPages:s,includesMoveStyleUpdatesOnAnyPage:o,includesMoveComponentUpdatesOnAnyPage:a}}),J=(0,u.eU)(e=>{let{componentUpdatesForCurrentPage:r,stateGroupUpdatesForCurrentPage:n,includesMoveUpdatesOnCurrentPage:a}=e(H),{styleUpdatesForCurrentPage:i,includesMoveUpdatesOnCurrentPage:o}=e(W),{variableSetUpdatesForCurrentPage:s}=e(K);return{componentUpdatesForCurrentPage:r,stateGroupUpdatesForCurrentPage:n,styleUpdatesForCurrentPage:i,variableSetUpdatesForCurrentPage:s,includesMoveStyleUpdatesOnCurrentPage:o,includesMoveComponentUpdatesOnCurrentPage:a}}),Z=(0,d.Iz)(e=>(0,u.eU)(r=>{let{componentUpdatesForAllPages:n,stateGroupUpdatesForAllPages:a,styleUpdatesForAllPages:i,variableSetUpdatesForAllPages:o}=r(X),{componentUpdatesForCurrentPage:s,stateGroupUpdatesForCurrentPage:l,styleUpdatesForCurrentPage:c,variableSetUpdatesForCurrentPage:d}=r(J);return e===b.aD.ALL?{scopedComponentUpdates:n,scopedStateGroupUpdates:a,scopedStyleUpdates:i,scopedVariableSetUpdates:o}:{scopedComponentUpdates:s,scopedStateGroupUpdates:l,scopedStyleUpdates:c,scopedVariableSetUpdates:d}})),Q=(0,m.mg)(X,({componentUpdatesForAllPages:e,stateGroupUpdatesForAllPages:r,styleUpdatesForAllPages:n,variableSetUpdatesForAllPages:a,includesMoveStyleUpdatesOnAnyPage:i,includesMoveComponentUpdatesOnAnyPage:o})=>{let s=e.length+r.length+n.length+a.length;return{updateCount:s,hasUpdates:s>0,includesMoveStyleUpdatesOnAnyPage:i,includesMoveComponentUpdatesOnAnyPage:o}}),ee=(0,m.mg)(J,({componentUpdatesForCurrentPage:e,stateGroupUpdatesForCurrentPage:r,styleUpdatesForCurrentPage:n,variableSetUpdatesForCurrentPage:a,includesMoveStyleUpdatesOnCurrentPage:i,includesMoveComponentUpdatesOnCurrentPage:o})=>{let s=e.length+r.length+n.length+a.length;return{updateCount:s,hasUpdates:s>0,includesMoveStyleUpdatesOnCurrentPage:i,includesMoveComponentUpdatesOnCurrentPage:o}}),et=(0,m.mg)(Q,({hasUpdates:e})=>e);(0,m.mg)(ee,({hasUpdates:e})=>e);let er=(0,d.Iz)(e=>(0,u.eU)(r=>r(e===b.aD.ALL?Q:ee).hasUpdates)),en=(0,m.mg)(Q,({updateCount:e})=>e);(0,m.mg)(ee,({updateCount:e})=>e);let ea=(0,d.p6)([X],({componentUpdatesForAllPages:e,stateGroupUpdatesForAllPages:r,styleUpdatesForAllPages:n,variableSetUpdatesForAllPages:a})=>({componentUpdateKeys:(0,b.X7)(e),stateGroupUpdateKeys:(0,b.X7)(r),styleUpdateKeys:(0,b.X7)(n),variableSetKeys:(0,b.X7)(a)})),ei=(0,y.bt)(e=>e.library.libraryUpdatesBannerDismissed);function eo(e,r){let n=(0,S.dK)(e).get((0,o.dI)(E.E7(r)?.guid)??o.AD);if(!n)return null;let a=n.guid,i=n.styleKeyForPublish,s=n.styleVersionHash;return i&&s?{GUID:a,key:i,version:s,isLocalStyle:n.isLocalStyle}:null}let es=(0,u.eU)(!1)},950919:(e,r,n)=>{n.d(r,{BE:()=>u,J8:()=>_,Q$:()=>g,aR:()=>d,tp:()=>h,uB:()=>p});var a=n(388393),i=n(302245),o=n(97395),s=n(529928),l=n(207584);let c=e=>e.library.movedLibraryItems,d=(0,i.Mz)([(0,o.Vh)(c,e=>e.subscribed),l.og],(e,r)=>({...e,...r})),u=(0,i.Mz)([c,l.KM],(e,r)=>({...e.local,...r}));function m(e){let r=Object.create(null);for(let n in e){let i=e[(0,a.sg)(n)];r[i]=r[i]||new Set,r[i].add((0,a.sg)(n))}return r}let p=(0,i.Mz)([d],m),h=(0,i.Mz)([u],m),_=e=>e.library.used__LIVEGRAPH.destinationStyleKeyToLegacySourceStyle,g=(0,s.bt)(_)},234945:(e,r,n)=>{n.d(r,{$4:()=>h,$J:()=>d,$u:()=>_,AF:()=>u,BA:()=>v,F4:()=>E,O1:()=>y,T_:()=>T,Xt:()=>s,dK:()=>l,dT:()=>g,f5:()=>S,qd:()=>c,rT:()=>f,t:()=>p,tX:()=>b,tn:()=>I});var a=n(302245),i=n(97395),o=n(529928);let s=e=>e.mirror.sceneGraphSelection,l=e=>e.mirror.sceneGraph,c=(0,i.Zm)(e=>Object.keys(s(e)));function d(e){let r=Object.keys(s(e));return 1===r.length?r[0]:null}let u=(0,a.Mz)([l,d],(e,r)=>r?e.get(r):null),m=()=>(e,r)=>l(e).get(r);function p(){let e=m();return(0,i.Zm)((r,n)=>{let a=e(r,n);return null==a?null:{key:a.styleKeyForPublish,version:a.styleVersionHash}})}function h(){let e=p();return(0,i.Zm)((r,n)=>new Map(n.map(n=>[n,e(r,n)])))}function _(e){return e.mirror.selectionProperties.numSelected||0}let g=(0,i.P8)([c,l],f);function f(e,r){let n=[];return e.forEach(e=>{let a=r.get(e);(a?.type==="INSTANCE"||a?.isInstanceSublayer)&&n.push(e)}),n}let E=(0,a.Mz)([l,c],(e,r)=>{let n=[];return r.forEach(r=>{let a=e.get(r);a&&n.push(a)}),n});(0,i.Zm)(e=>e.library.publishableStyles.map(e=>e.nodeId));let y=(0,i.Zm)(e=>e.library.localStylesThatHaveUsagesOnLoadedPages),b=(0,i.Zm)(e=>new Set(e.library.localStylesThatHaveUsagesOnCurrentPage)),I=(0,o.bt)(y),T=(0,i.Zm)(e=>e.library.localSymbolsThatHaveUsagesOnLoadedPages),v=(0,i.Zm)(e=>new Set(e.library.localSymbolsThatHaveUsagesOnCurrentPage));function S(e,r){let n=l(e);return!n.get(r)?.visible}},241691:(e,r,n)=>{n.d(r,{b:()=>i,e:()=>o});var a=n(880934);function i(e,r,n){if(!r)return null;let i=(()=>{let i;let o=e.library.used__LIVEGRAPH.sourceAssetKeyToDestinationKey[r];if(o)return o;if(!n)return null;if("type"in n){let r=e.library.local.styles[n.node_id];if(r?.key!==n.key)return null;i=r.node_id}else i=(0,a.dI)(n.guid);return i?e.library.used__LIVEGRAPH.localNodeIdToDestinationKey[i]:null})();return e.library.used__LIVEGRAPH.styles[i??r]??null}function o(e,r){let{stylePreviewShown:n}=e;return n.isShown&&!n.isCreating&&n.style===r}},388094:(e,r,n)=>{n.d(r,{C9:()=>A,Co:()=>T,Du:()=>_,EY:()=>L,J5:()=>N,LL:()=>k,MH:()=>R,OQ:()=>P,S_:()=>g,_Q:()=>y,jf:()=>C,kc:()=>O,m0:()=>m,sm:()=>x,tY:()=>F,ty:()=>D,v3:()=>h});var a=n(89865),i=n.n(a),o=n(184058),s=n.n(o),l=n(302245),c=n(97395),d=n(529928);function u(e){return(0,c.Vh)(e=>e.library,e)}let m=u(e=>e.subscribedSymbolsFromLoadedPages),p=u(e=>e.subscribedSymbolsOnCurrentPage),h=(0,c.P8)([e=>e.library.subscribedVariablesByIdFromLoadedPages],e=>Object.values(e)),_=e=>e.library.subscribedVariableSetsByIdFromLoadedPages,g=(0,l.Mz)([m],e=>i()(e,e=>e.key)),f=u(e=>e.subscribedStateGroupsFromLoadedPages),E=u(e=>e.subscribedStateGroupsOnCurrentPage),y=u(e=>e.directlySubscribedStylesFromLoadedPages),b=u(e=>e.directlySubscribedStylesOnCurrentPage),I=u(e=>e.indirectlySubscribedStylesFromLoadedPages),T=(0,l.Mz)([I],e=>e.length>0),v=(0,l.Mz)([y,I],(e,r)=>[...e,...r]);function S(e){return e.map(e=>e.nodeId)}function w(e){return s()(e.map(e=>e.key))}let A=(0,l.Mz)([m],S),N=(0,l.Mz)([p],S),C=(0,l.Mz)([f],S),L=(0,l.Mz)([E],S),O=(0,l.Mz)([y],S);(0,l.Mz)([b],S);let R=(0,l.Mz)([v],S),P=(0,l.Mz)([m],w),D=(0,l.Mz)([p],e=>new Set(e.map(e=>e.key))),k=(0,l.Mz)([f],w),M=(0,l.Mz)([y],w),F=(0,l.Mz)([b],e=>new Set(e.map(e=>e.key))),x=(0,d.bt)(M);(0,l.Mz)([v],w)},207584:(e,r,n)=>{n.d(r,{KM:()=>l,n1:()=>c,og:()=>s,wi:()=>d});var a=n(388393),i=n(302245),o=n(529928);let s=e=>e.library.used__LIVEGRAPH.sourceAssetKeyToDestinationKey,l=e=>e.library.used__LIVEGRAPH.localNodeIdToDestinationKey,c=(0,o.bt)(e=>e.library.used__LIVEGRAPH.sourceAssetKeyToFileName),d=(0,i.Mz)([e=>e.library.used__LIVEGRAPH.styles],function(e){let r={};for(let[n,i]of Object.entries(e))"loaded"===i.status&&(r[(0,a.n3)(n)]=i.data);return r})},837502:(e,r,n)=>{n.d(r,{Bg:()=>o,Cy:()=>l,Q3:()=>s}),n(939863);var a=n(139961);function i(e){switch(e){case null:case void 0:return a.w_.ALLOWED;default:return e}}function o(e){return i(e?.public_link_controls_setting)===a.w_.BANNED}function s(e){return[a.w_.EXPIRATION_REQUIRED,a.w_.EXP_AND_PWD_REQUIRED].includes(i(e?.public_link_controls_setting))}function l(e){return[a.w_.PASSWORD_REQUIRED,a.w_.EXP_AND_PWD_REQUIRED].includes(i(e?.public_link_controls_setting))}},452353:(e,r,n)=>{n.d(r,{Ey:()=>_,To:()=>g,zY:()=>h}),n(740222);var a=n(776250),i=n(686759),o=n(966712),s=n(178466),l=n(698349),c=n(479296);let d=(0,o.tl)().stripe_api_public;var u=(e=>(e.CARD="card",e.SEPA="sepa_debit",e.IDEAL="ideal",e.SOFORT="sofort",e))(u||{});let m=null;function p(){return new Promise((e,r)=>{m?e(m):d?(0,i.k0)("https://js.stripe.com/v3/",{cors:!1}).then(()=>{e(m=Stripe(d,{locale:(0,s.Gq)().getPrimaryLocale(!1)}))}).catch(r):r("No Stripe api key")})}let h=(0,c.D)(e=>new Promise((r,n)=>{p().then(n=>{r(n.elements().create("card",e))}).catch(n)})),_=(0,c.D)((e,r)=>new Promise((n,a)=>{p().then(i=>{i.createToken(e,r).then(e=>{n(e)}).catch(a)}).catch(a)})),g=(0,c.D)(async(e,r,n)=>{let i=await p(),{data:{meta:{client_secret:o}}}=await l.m.getSetupIntentSecret({subtotal_estimate:r,currency:n}),s=()=>document.querySelectorAll("[name*=privateStripeFrame]").length,c=s(),d=!1,u=setInterval(()=>{c!==s()&&((0,a.sx)("Stripe Authentication Modal"),clearInterval(u),d=!0)},1e3),m=await i.confirmCardSetup(o,{payment_method:{card:{token:e}}});if(clearInterval(u),m.error)throw(0,a.sx)("Payment Confirmation Error",{error_message:m.error.message}),m.error;return(0,a.sx)("Payment Confirmation Success"),m.setupIntent.is3DS=d,m.setupIntent})},790202:(e,r,n)=>{n.d(r,{Qh:()=>_,Sp:()=>N,gM:()=>T,je:()=>f,Ly:()=>I,l6:()=>E,He:()=>y,fi:()=>b});var a=n(411855),i=n(943632),o=n(432258),s=n(259120),l=n(758271),c=n.n(l),d=n(44948),u=n(966712);n(915440);var m=n(711525),p=n(30637);n(963067),n(298527);var h=n(420576);n(335682),n(279453),n(984968),n(773610),n(347127),n(999881),n(875847),n(243987);var _=(e=>(e.COMMUNITY="community",e.ORGANIZATION="organization",e.WORKSPACE="workspace",e.TEAM="team",e.FILE="file",e.USER="user",e))(_||{});let g=a.createContext(null);function f(){let{subscription:e,ensureSubscription:r}=(0,o.sR)(a.useContext(g),"Must call `useSubscribedLibraries` from within <SubscribedLibrariesContext>");a.useEffect(()=>{r()},[r]);let n=a.useMemo(()=>(0,m.gB)([]),[]);return(0,p.nl)()?n:e}function E(){let e=f();return(0,d.k9)(()=>{let r=new Set;return e.data?.forEach(e=>r.add(e.fileKey)),r},[e.data])}function y(){let e=f();return(0,d.k9)(()=>{let r=new Set;return e.data?.forEach(e=>r.add(e.libraryKey)),r},[e.data])}function b(){let{untransformedSubscription:e,ensureSubscription:r}=(0,o.sR)(a.useContext(g),"Must call `useSubscribedLibraries` from within <SubscribedLibrariesContext>");return a.useEffect(()=>{r()},[r]),e}function I(){let{untransformedSubscription:e}=(0,o.sR)(a.useContext(g),"Must call `useSubscribedLibraries` from within <SubscribedLibrariesContext>");if("loaded"!==e.status)return{};let r={},{file:n}=e.data;return n?.libraryOrgSubscriptions.length&&(r.org=n.libraryOrgSubscriptions.reduce((e,r)=>{let n=r.library?.file?.libraryKey;return n&&e.add((0,s.l)(n)),e},new Set)),n?.libraryTeamSubscriptions.length&&(r.team=n.libraryTeamSubscriptions.reduce((e,r)=>{let n=r.library?.file?.libraryKey;return n&&e.add((0,s.l)(n)),e},new Set)),n?.libraryFileSubscriptions.length&&(r.file=n.libraryFileSubscriptions.reduce((e,r)=>{let n=r.library?.file?.libraryKey;return n&&e.add((0,s.l)(n)),e},new Set)),n?.libraryUserSubscriptions.length&&(r.user=n.libraryUserSubscriptions.reduce((e,r)=>{let n=r.library?.file?.libraryKey;return n&&e.add((0,s.l)(n)),e},new Set)),r}function T(e,r,n,a,s,l){if("loading"===e.status||"errors"===e.status||"disabled"===e.status)return e;let d=e.data.file;if(null==d)return(0,m.gB)([]);let p=e.data.libraryPresetSubscriptionsV2,_=d.libraryOrgSubscriptions,g=d.team?.workspace?.librarySubscriptions,f=d.libraryTeamSubscriptions,E=d.libraryUserSubscriptions,y=d.libraryFileSubscriptions,b=[..._.filter(e=>a||!e.communityLibrary).filter(e=>n?null==(e.libraryFileSubscriptionOverride||e.libraryUserSubscriptionOverride):null==(e.libraryFileSubscriptionOverride||e.libraryWorkspaceSubscriptionOverride||e.libraryTeamSubscriptionOverride)).map(e=>v(e,"organization")),...y.filter(e=>a||!e.communityLibrary).map(e=>v(e,"file"))];if(!s&&!l&&a){let e=(p??[]).filter(e=>n?!((0,u.kc)().ps_benchmark&&(d?.parentOrgId&&null!=e.libraryOrgSubscriptionOverride||d?.teamId&&null!=e.libraryTeamSubscriptionOverride))&&null==(e.libraryFileSubscriptionOverride||e.libraryUserSubscriptionOverride):null==(e.libraryOrgSubscriptionOverride||e.libraryWorkspaceSubscriptionOverride||e.libraryTeamSubscriptionOverride||e.libraryFileSubscriptionOverride)).map(e=>S(e,"community"));b.push(...e)}if(n){let e=E.filter(e=>a||!e.communityLibrary).filter(e=>e.communityLibrary?null==e.libraryFileSubscriptionOverride:null==e.libraryFileSubscriptionOverride&&e.library?.file?.parentOrgId===s).map(e=>v(e,"user"));b.push(...e)}if(r){let e=f.filter(e=>a||!e.communityLibrary).filter(w).map(e=>v(e,"team")),r=(g||[]).filter(e=>a||!e.communityLibrary).filter(e=>null==(e.libraryFileSubscriptionOverride||e.libraryTeamSubscriptionOverride)).filter(e=>e.isSubscribed).map(e=>v(e,"workspace"));b.push(...e),b.push(...r)}else{let e=(function(e){let r=(0,u.kc)().ps_benchmark,n=e?.teamId;return r&&n?e?.currentUser?.orgAwareTeamRoles?.filter(e=>e.team?.id===n).map(e=>e.team?.libraryTeamSubscriptions).filter(o.Vq):e?.currentUser?.orgAwareTeamRoles?.map(e=>e.team?.libraryTeamSubscriptions).filter(o.Vq)})(d)?.map(e=>e.filter(e=>a||!e.communityLibrary).filter(A).map(e=>v(e,"team")))??[];b.push(...(0,i.Bq)(e))}let I=c()(b.filter(o.Vq),e=>e.fileKey).filter(e=>!(0,h._V)(d,e.fileKey));return(0,i.KQ)(I,"name"),(0,m.gB)(I)}function v(e,r){let n=e.communityLibrary;return n?S({communityLibrary:n,id:e.id},r):e.library&&e.library&&e.library.file?{fileKey:e.library.file.key,libraryKey:(0,s.l)(e.library.file.libraryKey),id:e.id,name:e.library.file.name,numComponents:e.library.numComponents??0,numStateGroups:e.library.numStateGroups??0,numStyles:e.library.numStyles??0,numStylesFill:e.library.numStylesFill??0,numStylesText:e.library.numStylesText??0,numStylesEffect:e.library.numStylesEffect??0,numStylesGrid:e.library.numStylesGrid??0,numVariables:e.library.numVariables??0,numVariablesBoolean:e.library.numVariablesBoolean??0,numVariablesFloat:e.library.numVariablesFloat??0,numVariablesColor:e.library.numVariablesColor??0,numVariablesString:e.library.numVariablesString??0,numModuleAssets:e.library.numModuleAssets??0,parentOrgId:e.library.file.parentOrgId,subscriptionType:r,thumbnailUrl:e.library.file.thumbnailUrl,thumbnailUrlOverride:e.library.file.thumbnailUrlOverride,thumbnailGuid:e.library.file.thumbnailGuid}:null}function S(e,r){return e?.communityLibrary?{fileKey:e.communityLibrary.hubFileId,libraryKey:(0,s.l)(e.communityLibrary.hubFile.libraryKey),id:e.id,name:e.communityLibrary.name,numComponents:e.communityLibrary.numComponents??0,numStateGroups:e.communityLibrary.numStateGroups??0,numStyles:e.communityLibrary.numStyles??0,numStylesFill:e.communityLibrary.numStylesFill??0,numStylesText:e.communityLibrary.numStylesText??0,numStylesEffect:e.communityLibrary.numStylesEffect??0,numStylesGrid:e.communityLibrary.numStylesGrid??0,numVariables:e.communityLibrary.numVariables??0,numVariablesBoolean:e.communityLibrary.numVariablesBoolean??0,numVariablesFloat:e.communityLibrary.numVariablesFloat??0,numVariablesColor:e.communityLibrary.numVariablesColor??0,numVariablesString:e.communityLibrary.numVariablesString??0,numModuleAssets:e.communityLibrary.numModuleAssets??0,parentOrgId:null,subscriptionType:r,thumbnailUrl:e.communityLibrary.hubFile.thumbnailUrl,thumbnailUrlOverride:null,thumbnailGuid:null}:null}function w(e){return null==e.libraryFileSubscriptionOverride}function A(e){return null==(e.libraryFileSubscriptionOverride||e.libraryUserSubscriptionOverride)}function N(e,r){switch(r){case"FILL":return e.numStylesFill;case"TEXT":return e.numStylesText;case"EFFECT":return e.numStylesEffect;case"GRID":return e.numStylesGrid;default:return 0}}},937890:(e,r,n)=>{n.d(r,{OL:()=>s,_M:()=>l,jx:()=>o,wZ:()=>i});var a=n(27087);function i(e,r){return a.Ay.put("/api/team_join_link",{team_id:e,level:r}).then(({data:e})=>e.meta).catch(e=>{throw e})}function o(e){return`${window.location.origin}/team_invite/redeem/${e.token}`}n(129318),n(147206);let s=e=>`RETRIEVING_TEAM_JOIN_LINK_${e}`,l=e=>`RESETTING_TEAM_JOIN_LINK_${e}`},984968:(e,r,n)=>{n.d(r,{BU:()=>L,Cl:()=>U,Ct:()=>z,Dj:()=>C,Eq:()=>B,H7:()=>Y,HE:()=>x,Me:()=>K,PS:()=>D,R5:()=>v,UQ:()=>k,ZT:()=>G,_L:()=>$,aW:()=>R,cD:()=>H,jv:()=>q,mx:()=>S,n$:()=>j,ol:()=>W,rR:()=>P,sK:()=>O});var a=n(188507);n(943632);var i=n(414507),o=n(138020),s=n(966712),l=n(130097),c=n(886653),d=n(776621),u=n(647899);n(939863);var m=n(99506),p=n(279453),h=n(243987);n(428467);var _=n(626322);n(945020);var g=n(567088),f=n(668860);n(840912),n(668526);var E=n(479296),y=n(875847),b=n(529928),I=n(540019),T=n(147206);async function v(e){let r=[],n={};return await Promise.all(e.map(async e=>{let a=await I.M4.fetchFile(e);if(!a?.trashed_at||!a?.team_id)return;r.push(a);let i=(await (0,l.Ek)(p.Aqu,{teamId:a.team_id})).team;i?.id&&(n[i.id]=i)})),await A(r,n)}async function S(e){let r=[],n={};return await Promise.all(e.map(async e=>{let a={...await I.M4.fetchFile(e.key),folder_id:e.folderId};if(a&&r.push(a),!e.folderId)return;let i=await (0,l.Ek)(p.yU5,{projectId:e.folderId}),s=i.project?.team;s?.id&&(n[s.id]={...s,teamFileCounts:{designFileCount:s.teamFileCounts?.designFileCount??0,whiteboardFileCount:s.teamFileCounts?.whiteboardFileCount??0,slideFileCount:(0,o.oA)(s.teamFileCounts?.slideFileCount)??"0"}})})),await A(r,n)}async function w(){return(await (0,u.hW)("slides_starter_team_limits_exp")).get("is_slide_restriction_on",!1)}let A=(0,E.D)(async(e,r)=>{let n={},a={},i={},s={};for(let r of e){if(!r.folder_id)continue;let e=s[r.folder_id]??await I.M4.fetchFolder(r.folder_id);s[r.folder_id]=e;let o=r?.editor_type==="design",l=r?.editor_type==="whiteboard",c=r?.editor_type==="slides",d=(0,y.ye)(e)?0:1;r.team_id&&o&&(n[r.team_id]=(n[r.team_id]||0)+d),r.team_id&&l&&(a[r.team_id]=(a[r.team_id]||0)+d),r.team_id&&c&&(i[r.team_id]=(i[r.team_id]||0)+d)}let l=Object.keys(n).find(e=>{let a=r[e];return a&&!R(a,{type:2,nDesignFilesToAdd:n[e],nCurrentDesignFiles:a.teamFileCounts?.designFileCount||0})});return l||(l=Object.keys(a).find(e=>{let n=r[e];return n&&!R(n,{type:5,nWhiteboardFilesToAdd:a[e],nCurrentWhiteboardFiles:n.teamFileCounts?.whiteboardFileCount||0})}))||!await w()?l:l=Object.keys(i).find(e=>{let n=r[e];return n&&!R(n,{type:7,nSlideFilesToAdd:i[e],nCurrentSlideFiles:parseInt((0,o.oA)(n.teamFileCounts?.slideFileCount)??"0",10)})})});function N(e,r){return!!e.edit_roles&&("whiteboard"===r&&e.edit_roles.whiteboard_files.length>0||"design"===r&&e.edit_roles.design_files.length>0)}function C(e){let r=e.team_role?.level,n=e.team_role?.pending||!1;return r&&r>=f.e6.EDITOR&&!n||!!e.edit_roles&&e.edit_roles.folders.length>0||!(0,T.qR)(e.team_user,m._Y.DESIGN)&&N(e,m._Y.DESIGN)||!(0,T.qR)(e.team_user,m._Y.WHITEBOARD)&&N(e,m._Y.WHITEBOARD)}function L(e){return!!(e.team_role||(e?.edit_roles?.design_files?.length||0)>0||(e?.edit_roles?.whiteboard_files?.length||0)>0||(e?.edit_roles?.folders?.length||0)>0||(e?.view_roles?.file_count||0)>0||(e?.view_roles?.folder_count||0)>0)}var O=(e=>(e[e.ADD_DESIGN_FILE=0]="ADD_DESIGN_FILE",e[e.ADD_PROJECT=1]="ADD_PROJECT",e[e.ADD_N_DESIGN_FILES=2]="ADD_N_DESIGN_FILES",e[e.ADD_EDITOR=3]="ADD_EDITOR",e[e.ADD_FIGJAM_FILE=4]="ADD_FIGJAM_FILE",e[e.ADD_N_FIGJAM_FILES=5]="ADD_N_FIGJAM_FILES",e[e.ADD_SLIDES_FILE=6]="ADD_SLIDES_FILE",e[e.ADD_N_SLIDES_FILES=7]="ADD_N_SLIDES_FILES",e))(O||{});function R(e,r){if(!e||e.restrictionsList?.includes(m.P4.LOCKED))return!1;if((0,h.XX)(e))return!0;switch(r.type){case 0:if(e.restrictionsList?.includes(m.P4.FILES_LIMITED_LEGACY))return!1;if(r.isDestinationTeamDrafts)return!0;if(r.nCurrentDesignFiles&&r.nCurrentDesignFiles>=h.WW)return!1;return!e.restrictionsList?.includes(m.P4.FILES_LIMITED);case 1:return!e.restrictionsList?.includes(m.P4.PROJECTS_LIMITED)&&!e.restrictionsList?.includes(m.P4.PROJECTS_LIMITED_LEGACY);case 2:if(e.restrictionsList?.includes(m.P4.FILES_LIMITED_LEGACY))return!1;if(r.isDestinationTeamDrafts||0===r.nDesignFilesToAdd)return!0;if(r.nCurrentDesignFiles+r.nDesignFilesToAdd>h.WW)return!1;return!e.restrictionsList?.includes(m.P4.FILES_LIMITED);case 3:if(e.restrictionsList?.includes(m.P4.EDITORS_LIMITED))return!1;return!0;case 4:if(e.restrictionsList?.includes(m.P4.WHITEBOARD_FILES_LIMITED_BETA))return!1;if(r.isDestinationTeamDrafts)return!0;if(r.nCurrentWhiteboardFiles&&r.nCurrentWhiteboardFiles>=h.WW)return!1;return!e.restrictionsList?.includes(m.P4.WHITEBOARD_FILES_LIMITED);case 5:if(e.restrictionsList?.includes(m.P4.WHITEBOARD_FILES_LIMITED_BETA))return!1;if(r.isDestinationTeamDrafts||0===r.nWhiteboardFilesToAdd)return!0;if(r.nCurrentWhiteboardFiles+r.nWhiteboardFilesToAdd>h.WW)return!1;return!e.restrictionsList?.includes(m.P4.WHITEBOARD_FILES_LIMITED);case 6:if(e.restrictionsList?.includes(m.P4.SLIDE_FILES_LIMITED_BETA))return!1;if(r.isDestinationTeamDrafts)return!0;if(r.nCurrentSlideFiles&&r.nCurrentSlideFiles>=h.WW)return!1;return!e.restrictionsList.includes(m.P4.SLIDE_FILES_LIMITED);case 7:if(e.restrictionsList?.includes(m.P4.SLIDE_FILES_LIMITED_BETA))return!1;if(r.isDestinationTeamDrafts||0===r.nSlideFilesToAdd)return!0;if(r.nCurrentSlideFiles+r.nSlideFilesToAdd>h.WW)return!1;return!e.restrictionsList.includes(m.P4.SLIDE_FILES_LIMITED)}}function P(e,r){return R({subscription:e.subscription,restrictionsList:e.restrictions_list||[],studentTeamAt:e.student_team?new Date:null,gracePeriodEnd:e.grace_period_end?new Date(e.grace_period_end):null},r)}function D(e){return!!e.student_team||!!e&&!!e.subscription&&[m.Qh.OK,m.Qh.GRACE_PERIOD].includes(e.subscription)}function k(e){let r=e.user?.id,n=e.openFile?.key;if(!r||!n)return null;let a=e.fileByKey?.[n]?.team_id;return a?e.teamUserByTeamId?.[a]?.[r]:null}let M=new RegExp(/[https?:?\/\/]?[a-z.]*figma[\-.\da-z:]*\/files\/([A-z0-9]*)\/team\/(\d+)/),F=new RegExp(/[https?:?\/\/]?[a-z.]*figma[\-.\da-z:]*\/files\/team\/(\d+)/);function x(e){return M.test(e)}function U(e){return F.test(e)}function B(e){let r=new URL(e).pathname.match("team/([A-z0-9]*)");return r?r[1]:null}let V=["recentsAndSharing","draftsToMove","communityHub","search","user"];function G(e){try{if(e.openFile)return e.openFile.teamId||"";if("teamId"in e.selectedView)return e.selectedView.teamId||"";if("abandonedDraftFiles"===e.selectedView.view&&e.selectedView.adminPlanType===g.O.TEAM)return e.selectedView.planId;if("folder"===e.selectedView.view){let r=e.selectedView.folderId;if(!e.folders[r])return(0,s.Ay)().page_load_team_id||"";return e.folders[r]?.team_id||""}if((V.includes(e.selectedView.view)||"deletedFiles"===e.selectedView.view||"limitedTeamSharedProjects"===e.selectedView.view||"trashedFolders"===e.selectedView.view||"desktopNewTab"===e.selectedView.view)&&!e.currentUserOrgId)return e.currentTeamId||""}catch(e){(0,d.$D)(i.FigmaTeam.GROWTH_PLATFORM,Error(`Error getting team ID from Redux state: ${e.message}`))}return""}function H(){return(0,a.d4)(e=>G(e))||""}function W(){return(0,a.d4)(e=>""===G(e)||null==e.teams?null:e.teams[G(e)])||null}let K=(0,b.bt)(e=>e.teams[G(e)]||null);function Y(e){return e.teams[G(e)]||null}function $(e,r,n){return e?Object.keys((0,_.t)(r.byTeamId,e.id)).filter(e=>n[e]):[]}function j(e,r){let n=[],a={};for(let r of e)r&&(a[r.id]=r,n.push(r.id));return e.sort((e,n)=>{let a=r.indexOf(e.id),i=r.indexOf(n.id);return -1===a&&-1===i?e.createdAt<n.createdAt?1:-1:a-i}),e.map(e=>e.id)}function z(e,r,n){let a=0,i={};for(let o of(r.forEach(e=>i[e.id]=e),Object.keys(n))){let r=i[o],s=n[o][e];if(r&&s){if(r.pro_team||r.org_access||r.student_team)return!1;s.level===f.e6.OWNER&&a++}}return a>1}function q(e){return!!e&&!!e.match(/^[0-9]+$/)}(0,c.xx)(function(e,r,n){return e?$(e,r,n).map(e=>n[e]):[]})},776726:(e,r,n)=>{n.d(r,{H1:()=>h,X0:()=>m,XJ:()=>d,z:()=>c});var a=n(299321),i=n(776250),o=n(38329),s=n(988022),l=n(463592);let c={includeMatches:!0,shouldSort:!1,findAllMatches:!1,ignoreLocation:!0};function d(e){return e.replace(/[\u201D\u201C\"\u2019\u2018]/g,"'")}function u(e){return e.textContent&&(e.textContent=d(e.textContent)),e}function m(e,r,n){let i=[];for(let o of e.indices){let s=o[0],l=o[1]+1,c=e.value;n.matchCase&&c.substring(s,l)!==r||n.wholeWords&&(s>0&&p(c[s-1])||l<e.value.length&&p(c[l]))||i.push({start:s,end:l,matchType:a.Ifi.TEXT_MATCH})}return i}function p(e){return/[\p{L}\p{N}\p{Pc}\p{M}]/u.test(e)}let h=new class{constructor(){this.searchLibrary=new l.CN({keys:["textContent","name","type"],exactMatch:!0,...c})}initializeIndex(){let e=performance.now(),r=a.YEY.getSearchableNodes(!0).map(u),n=o.D.getState();this.searchLibrary.set(r),(0,s.ds)("canvas_search_index_create",n.openFile?.key,n,{timeElapsedMs:Math.round(performance.now()-e),numberOfNodes:r.length})}destroyIndex(){this.searchLibrary.set([])}addNode(e){this.searchLibrary.add(e)}removeNode(e){this.searchLibrary.remove("guid",e)}async search(e,r={}){let n;this.updateIndex();let i=performance.now(),o=`'"${d(e)}"`,s=[{textContent:o}];if(r.searchLayerNames&&s.push({name:o}),r.layerTypes){let e=[];r.layerTypes.forEach(r=>{e.push({type:r})}),n={$and:[{$or:s},{$or:e}]}}else n={$or:s};let l=await this.searchLibrary.search(n),c={},u=0,p=0;for(let n of l){let i=[];for(let o of n.matches){let s=m(o,e,r);if("textContent"!==o.key&&s.length){let e=s[0];e.matchType=n.item.type===a.Z6A.CANVAS?a.Ifi.PAGE_MATCH:a.Ifi.LAYER_MATCH,i=[e,...i]}else i.push(...s)}if(i.length){u+=i.length,p++;let e=n.item.pageGuid,r={guid:n.item.guid,textMatches:i};c[e]?c[e].push(r):c[e]=[r]}}return{resultsByPage:c,metrics:{queryLength:e.length,numMatchingNodes:p,numMatches:u,queryTimeMs:Math.round(performance.now()-i)}}}logIndex(){this.updateIndex(),this.searchLibrary.logIndex()}updateIndex(){let e=performance.now(),r=a.YEY.getSearchableNodes(!1).map(u);if(r.length>2e3){this.initializeIndex();return}let n=[],o=[];for(let e of r)n.push(e.guid),(e.name||e.textContent)&&o.push(e);r.length&&this.searchLibrary.updateEntries("guid",n,o),r.length>0&&(0,i.sx)("canvas_search_index_update",{timeElapsedMs:Math.round(performance.now()-e),numberOfNodes:r.length})}}},494668:(e,r,n)=>{n.d(r,{$I:()=>c,YA:()=>d});var a=n(411855),i=n(497189),o=n(11190),s=n(939863),l=n(94823);function c(e){return({light:(0,s.t)("fullscreen_actions.theme.light"),dark:(0,s.t)("fullscreen_actions.theme.dark"),system:(0,s.t)("fullscreen_actions.theme.system_theme")})[e]}function d(e){return[{name:"theme-light-mode",checked:"light"===e,displayForQuickCommand:"theme-light-mode-quick-command",hideCheckForQuickCommand:!0,callback:(e,r,n)=>{n(l.Qh({theme:"light",userInitiated:!0}))},searchSynonyms:["theme","dark mode"],iconType:a.createElement(i.Z),hideForQuickCommand:"light"===e},{name:"theme-dark-mode",checked:"dark"===e,displayForQuickCommand:"theme-dark-mode-quick-command",hideCheckForQuickCommand:!0,callback:(e,r,n)=>{n(l.Qh({theme:"dark",userInitiated:!0}))},searchSynonyms:["theme","light mode"],iconType:a.createElement(o.a),hideForQuickCommand:"dark"===e},{name:"theme-system",checked:"system"===e,displayForQuickCommand:"theme-system-quick-command",hideCheckForQuickCommand:!0,callback:(e,r,n)=>{n(l.Qh({theme:"system",userInitiated:!0}))}}]}},783967:(e,r,n)=>{n.d(r,{w:()=>a}),n(96328);function a(){return!!window.INITIAL_OPTIONS?.user_data}},395116:(e,r,n)=>{n.d(r,{td:()=>c,uo:()=>d}),n(827697);var a=n(790724);n(286640);var i=n(27087),o=n(939863),s=n(980820),l=n(725561);let c="-1",d=2500;(0,s.nF)((e,r)=>{if(!r.userInitiated){e.dispatch(l.Q$(r));return}return(0,a.Q)({requestPromise:i.Ay.put("/api/user_notifications_bell/community/clear"),fallbackError:(0,o.t)("user_notification.an_error_occurred_marking_all_as_read"),store:e,next:e.dispatch,action:l.Q$(r)})})},935757:(e,r,n)=>{n.d(r,{I2:()=>x,Il:()=>U,Ri:()=>I,Um:()=>D,Y9:()=>B,YH:()=>b,_X:()=>L,kb:()=>E,nt:()=>R,pk:()=>P,tb:()=>y,tp:()=>O,yk:()=>V});var a=n(689136),i=n.n(a),o=n(841563),s=n.n(o),l=n(181912),c=n(77909),d=n(517333),u=n(966712),m=n(534688),p=n(742808),h=n(286640),_=n(567088),g=n(52571),f=n(516056);let E=(0,c.v)(),y=(0,c.v)(),b=!window.EARLY_ARGS?.file_minimal_user_state;function I(){b=!0}let T=null,v=null,S={REQUESTED:"web.api_user_state.requested"},w=new class{constructor(){this.batchedCustomEvents=[],this.onVisibilityChange=async()=>{"hidden"===document.visibilityState&&await this.sendBatchedEvents()},this._currentlySendingBatchedEvents=!1,this.sendBatchedEvents=async()=>{if(this._currentlySendingBatchedEvents)return;this._currentlySendingBatchedEvents=!0;let e=this.batchedCustomEvents;this.batchedCustomEvents=[];try{await (0,p.BO)(e)}catch(e){}this._currentlySendingBatchedEvents=!1},document.addEventListener("visibilitychange",this.onVisibilityChange),window.addEventListener("pagehide",this.sendBatchedEvents),this.sendBatchedEventsInterval=setInterval(this.sendBatchedEvents,5e3)}async cleanup(){document.removeEventListener("visibilitychange",this.onVisibilityChange),window.removeEventListener("pagehide",this.sendBatchedEvents),clearInterval(this.sendBatchedEventsInterval),await (0,m.g)()}reportUserStateCall(e){this.batchedCustomEvents.push({metric:S.REQUESTED,tags:{source:e,client_visibility:document.visibilityState}})}},A=null,N=null,C=null;function L(e,r){I();let n=P(),a=D();return A&&n===N&&a===C||(w.reportUserStateCall(e),A=f.k.getState({orgId:n||void 0,teamId:a||void 0},r),N=n,N=a,A.then(()=>{A=null,N=null,C=null}).catch(()=>{A=null,N=null,C=null})),A}function O(e){return g.H.getState(e)}function R(e){e||(e="personal"),T=e}function P(){return T?"personal"===T?null:T:T=(0,u.tl)().org_id||null}function D(){return v||(v=(0,u.tl)().team_id||null),v}let k="recent_user_data",M=e=>btoa(JSON.stringify(e)),F=e=>JSON.parse(atob(e));function x(e){B(e,!0)}function U(e){let r=V(),n=i()(r),a=(0,h.UG)();if(n.communityProfileId=e,!s()(r,n))try{a.set(k,M(n))}catch(e){console.error("Failed to set community profile",e)}}function B(e,r,n,a,o,c){if(d.S8)return;let m=V(),p=i()(m),g=(0,h.UG)();if(r?p.communityUserId=e:p.fileBrowserUserId=e,void 0!==n&&(p.userIdToOrgId||(p.userIdToOrgId={}),p.userIdToOrgId[e]=n),(0,u.kc)().ps_benchmark&&(void 0!==n||void 0!==o)&&(p.userIdToPlan||(p.userIdToPlan={}),n?p.userIdToPlan[e]=[_.O.ORG,n]:o&&(p.userIdToPlan[e]=[_.O.TEAM,o])),a&&(p.communityProfileId=a),c&&(p.seenRecurringBannerIds||(p.seenRecurringBannerIds={}),p.seenRecurringBannerIds[c]=l.A.utc().toISOString()),!s()(m,p))try{g.set(k,M(p))}catch(e){console.error("Failed to set recent workspace",e)}}function V(){let e={communityUserId:null,communityProfileId:null,fileBrowserUserId:null,userIdToOrgId:{},seenRecurringBannerIds:{}},r=(0,h.UG)();try{let n=r.get(k);n&&(e=F(n))}catch(e){console.error("Failed to get recent workspace",e)}return e}},694517:(e,r,n)=>{n.d(r,{Eg:()=>el,HF:()=>J,Ht:()=>V,Nb:()=>ed,Ul:()=>ee,V_:()=>B,_b:()=>es,_h:()=>ei,_t:()=>Y,cn:()=>K,hZ:()=>Q,kT:()=>W,tP:()=>G,un:()=>et,vF:()=>em,vw:()=>q,w_:()=>$,yH:()=>eu});var a=n(414507),i=n(299321),o=n(880934),s=n(776250),l=n(181912),c=n(38329),d=n(966712),u=n(38580),m=n(374626),p=n(218549),h=n(183297),_=n(776621),g=n(743282),f=n(27087),E=n(881388),y=n(265746),b=n(696808),I=n(392592),T=n(980820),v=n(738269),S=n(293017),w=n(31913),A=n(420576),N=n(843495),C=n(239671),L=n(610267),O=n(779086),R=n(754168),P=n(597642),D=n(267701),k=n(356390),M=n(493862),F=n(467232),x=n(540019),U=n(707465);let B="current_version",V=new p.q(40),G=(0,u.eU)("");var H=(e=>(e[e.Default=0]="Default",e[e.Recording=1]="Recording",e))(H||{});let W=x.M4.Query({fetch:async e=>{let r=e.fileKey;if(!r)return null;let n=performance.now(),a=await P.W.getPaginatedVersions({...e,fileKey:r,versionIds:e.versionIds?.join(",")}),i=performance.now()-n;return(0,s.sx)("version_diffing_performance_metrics",{name:"Lego versions fetched",durationMs:i}),a.data.meta?.versions||[]},key:"fileVersionsPaginated"});function K(e,r,n,a){return`${e}-${r}-${n.id}-${a}`}function Y(e,r){let n=c.D.getState(),a=n.openFile?.key,i=[r,n.mirror.sceneGraph.getInternalCanvas()?.guid].filter(e=>!!e);if(!a||!r)return null;let o=K(a,r,e,(0,L.N)(n.fileVersion));if(V.has(o))return V.get(o);let s=new Promise((n,s)=>(0,D.n)(`${e.canvas_url}&nodes_to_extract=${i.join(",")}`).then(([i,s,l])=>{let c=K(a,r,e,l),d=Promise.resolve({canvas:i,key:c});V.delete(o),V.set(c,d),n(d)}).catch(s));return V.set(o,s),s}function $(e){let r=c.D.getState(),n=r.openFile?.key,a=r.mirror.appModel.currentPage;if(!n||!a)return null;let i=K(n,a,e,(0,L.N)(r.fileVersion));V.delete(i)}let j=async(e,r,n,a)=>{let i=new URLSearchParams;i.set("diff_version",(0,A.C2)().toString()),i.set("from_file_version_id",r),i.set("migration_version",`${n}`),a&&a.length>0&&i.set("nodes_to_diff",a.join(","));let{data:{meta:{checkpoint_diff:o}}}=await f.Ay.post(`/api/file_diff/v2/checkpoint_diff/${e}?${i.toString()}`);return o},z=async e=>{let r=new Date().getTime(),{data:n}=await f.Ay.crossOriginGetAny(e,null,{responseType:"arraybuffer"}),a=new Date().getTime();return(0,s.sx)("versioning_performance_metrics",{name:"download_diff",durationMs:a-r},{forwardToDatadog:!0}),n};function q(e){for(let r of e.versions)if(r.id===e.activeId)return r;if(e.linkedVersion&&e.activeId===e.linkedVersion.id)return e.linkedVersion}async function X(e,r,n){let a=await j(r.getState().openFile.key,e,r.getState().fileVersion,n);if(!a.signed_url)return"Error viewing what's changed between file versions.";let o=!!r.getState().openFile?.canEdit,l=new Date().getTime(),[c]=await Promise.all([z(a.signed_url),(0,M.W5)(i._em.DEBUG_TOOL)]),d=new Date().getTime();return((0,s.sx)("versioning_performance_metrics",{name:"download_diff_and_load_pages",durationMs:d-l,isEditor:o},{forwardToDatadog:!0}),i.glU.loadHistoryChangesState(c))?"":"Error loading HistoryChangesState into memory."}function J(e,r){if(e)return r.versions.find(r=>r.id===e)}async function Z(e,r){let n=Date.now(),a=J(e,r.getState().versionHistory);if(!a)return{elapsedTime:Date.now()-n,numPagesWithChanges:0};let o=await X(a.id,r),s=Date.now()-n;if(o)throw(0,_.x1)("version diffing","error checking for visible changes",{error:o}),Error("Error checking for visible changes");return{elapsedTime:s,numPagesWithChanges:i.glU.getPagesWithChanges().length}}let Q=(0,T.nF)(async(e,r)=>{let n,a;let o=e.getState(),s=()=>{e.dispatch(v.$T({...o.selectedView,compareLatest:void 0}))},c=()=>{e.dispatch(S.Y6({mode:i.Oin.OFF})),s()},u=o.user;if(!(0,d.kc)().version_diffing||!(0,d.kc)().xr_debounce_threshold||!u||"fullscreen"!==o.selectedView.view||o.selectedView.editorType===C.nT.Whiteboard||o.mirror.appModel.topLevelMode===i.lyf.HISTORY||o.mirror.appModel.activeCanvasEditModeType===i.m1T.COMPARE_CHANGES)return c();let{openFileKey:m}=r;try{let e=await R.S.getLastInteraction({openFileKey:m});n=e.data.meta.last_view_at,a=e.data.meta.last_edit_at}catch{c()}let p=(0,l.A)(n),h=(0,l.A)(a),_=p>h?p:h;if(!_.isValid()||_<(0,l.A)().subtract(7,"days"))return c();let g=P.W.getPaginatedVersions({fileKey:m,createdAtOrBefore:_.toISOString()}),f=P.W.getPaginatedVersions({fileKey:m}),[E,y]=await Promise.all([g,f]),b=E.data.meta.versions,I=y.data.meta.versions;if(!(b.length>0&&I.length>0))return c();let T=b[0],w=I[0];if(!((0,l.A)(w.created_at)>(0,l.A)(T.created_at))||w.user_id===u.id||w.participating_users_array?.includes(u.handle))return c();e.dispatch(es()),e.dispatch(em({fromVersionId:T.id}))}),ee=(0,T.nF)(async(e,r)=>{let n=e.getState(),a=n.user;if(!(0,d.kc)().version_diffing||!a||"fullscreen"!==n.selectedView.view||n.selectedView.editorType===C.nT.Whiteboard||n.mirror.appModel.topLevelMode===i.lyf.HISTORY||n.mirror.appModel.activeCanvasEditModeType===i.m1T.COMPARE_CHANGES)return;let{openFileKey:o}=r,c=(0,l.A)(r.versionHistory.lastEdited),u=(0,l.A)(r.versionHistory.lastViewed),m=u>c?u:c;if(!m.isValid()||m<(0,l.A)().subtract(7,"days"))return;let p=Date.now(),h=P.W.getPaginatedVersions({fileKey:o,pageSize:1,createdAtOrBefore:m.toISOString()}),_=P.W.getPaginatedVersions({fileKey:o,pageSize:1}),[f,E]=await Promise.all([h,_]),y=f.data.meta.versions,b=E.data.meta.versions;if(y.length>0&&b.length>0){let r=y[0],n=b[0];if((0,l.A)(n.created_at)>(0,l.A)(r.created_at)&&n.user_id!==a.id&&!n.participating_users_array?.includes(a.handle)){let a={fileKey:o,eventId:(0,g.g)(),lastEdited:c.toISOString(),lastViewed:u.toISOString(),lastSeenVersion:r.id,lastSeenCreatedAt:r.created_at,latestVersion:n.id,latestCreatedAt:n.created_at};(0,s.sx)("Version Diffing Changed Since Last View",{...a,durationMs:Date.now()-p},{forwardToDatadog:!0}),e.dispatch(ea({lastSeenVersionId:r.id,trackingProps:a}))}}});function et(){let e=c.D,r=e.getState().versionHistory,n=q(r),a=r.fetchedPageIds||new Set,i=e.getState().mirror.appModel.currentPage;return n&&n.id!==B?en(n,e,a,i,o.Xy):Promise.reject("Version history inactive")}let er=null;function en(e,r,n,a,s,l){return new Promise((c,d)=>{let u=e.canvas_url;u||d("Couldn't get canvas URL for version.");let p=s===o.Xy,h=!p&&n.size>0,_=s??a,g=r.getState().mirror.appModel.currentPage;"LOAD_NEW_VERSION"===l&&g&&!s&&(_=g);let f=!r.getState().mirror.appModel.pagesList.every(e=>n.has(e.nodeId))&&!n.has(_);if(!f)return r.dispatch(w.SR({isLoadingPage:!1})),c();u+=`&nodes_to_extract=${_}`;let E=r.getState().selectedView;F.C.markVersionHistoryLoadStart(E.fileKey,E.nodeId,l);let y=(0,D.n)(u).then(([e])=>{if(y===er){var o;er=null;let s=r.getState().selectedView.editorType;if((o=r.getState().mirror.appModel.topLevelMode)===i.lyf.HISTORY||o===i.lyf.DEV_HANDOFF){let o;if(h)i.glU.applyFileToCurrentScene(e);else if(m.zl.set(G,""),!i.glU.loadFigFileForPreview(e))return d("Error loading this version into memory.");F.C.markVersionHistoryLoadEnd();let l=r.getState().selectedView.fileKey;o=s===C.nT.Whiteboard?"figjam":s===C.nT.Design||s===C.nT.Slides?(0,C.CO)(s):"unknown";let u=r.getState().selectedView.devModeFocusId?"focus_view":"version_history";F.C.report(l,o,u),f&&(p?r.getState().mirror.appModel.pagesList.forEach(e=>n.add(e.nodeId)):n.add(_),r.dispatch(w.EB({fetchedPageIds:n})),r.dispatch(w.SR({isLoadingPage:!1})),c()),E.nodeId&&E.nodeId!==a&&N.tJ([E.nodeId]),E.devModeFocusId&&i.w3z.focusOnNode(E.devModeFocusId,!1),r.dispatch(S.Y6({mode:i.Oin.OFF}))}}});er=y})}let ea=(0,T.nF)(async(e,r)=>{let n,a;let{lastSeenVersionId:i,trackingProps:o}=r;try{let r=await Z(i,e);n=r.elapsedTime,a=r.numPagesWithChanges}catch(e){return}if(0===a){(0,s.sx)("Version Diffing Notification Skipped",{...r.trackingProps,pagesWithChanges:0,durationMs:n},{forwardToDatadog:!0});return}(0,s.sx)("Version Diffing Notification Shown",{...r.trackingProps,pagesWithChanges:a,durationMs:n},{forwardToDatadog:!0}),e.dispatch(b.Q.enqueueFront({notification:{type:y._.SEE_WHATS_CHANGED,message:"See what's changed since the last time you viewed this file",acceptCallback:()=>{(0,s.sx)("Version Diffing Notification Opened",o),e.dispatch(es()),e.dispatch(em({fromVersionId:i}))},dismissCallback:()=>{(0,s.sx)("Version Diffing Notification Dismissed",o)}}}))}),ei=(0,T.nF)((e,{direction:r})=>{let n=e.getState(),a=(0,U.U2)(n.selectedView);a&&!n.versionHistory.loading&&(e.dispatch(w.ne({loading:!0})),(0,h.En)(`/api/versions/${a}`,30,n.versionHistory,r).then(n=>{a===(0,U.U2)(e.getState().selectedView)&&e.dispatch(w.BC({history:n,direction:r}))}))}),eo=(0,T.nF)(e=>{e.dispatch(w.p0()),e.dispatch(ei({direction:h.mL}))}),es=(0,T.nF)((e,r)=>{r?.type===1?k.Y5.triggerAction("enter-history-mode-for-recording"):k.Y5.triggerAction("enter-history-mode"),k.Y5.triggerAction("deselect-all"),e.dispatch(eo()),i.Ez5?.uiState().showPropertiesPanel.set(!0),(0,s.sx)("Toggle Version History",{source:r?.source||null})}),el=(0,T.nF)(e=>{e.dispatch(ec()),e.dispatch(I.F.dequeue({matchType:"versions"})),i.glU.exitVersionHistoryMode(e.getState().openFile?.canEdit??!1)}),ec=(0,T.nF)(e=>{e.dispatch(ed({id:B})),e.dispatch(em({fromVersionId:void 0})),i.Egt.clearSelection(),e.dispatch(I.F.dequeue({matchType:"comparing"})),e.dispatch(I.F.dequeue({matchType:"view_changes"})),e.dispatch(S.Y6({mode:i.Oin.OFF}))}),ed=(0,T.nF)(async(e,r)=>{if(r.id===B){m.zl.set(G,""),i.glU.loadFigFileForPreview(new Uint8Array);let n=e.getState();e.dispatch(v.$T({...n.selectedView,versionId:void 0,compareVersionId:void 0})),e.dispatch(w.Fm({id:r.id}));return}e.dispatch(w.Fm({id:r.id}));let n=e.getState(),o=r.versions?r.versions.find(e=>e.id===r.id):q(n.versionHistory);if(!o)return;e.dispatch(v.$T({...n.selectedView,compareVersionId:void 0}));let s=e.getState().mirror.appModel.currentPage,l=r.eventType,c=!!e.getState().selectedView.devModeFocusId;await en(o,e,new Set,s,r.nodeId,l).catch(r=>{if(c){let e=`[${l}] Failed load version for preview in focus view: ${r}`;(0,_.$D)(a.FigmaTeam.DEVELOPER_TOOLS,Error(`[LOAD_VERSION_FOR_PREVIEW] ${e}`))}e.dispatch(E.s.error(r))})}),eu=(0,T.nF)((e,r)=>{let n=r.version,i=r.currentPageNodeId,o=r.fetchedPageIds,s=r.eventType;en(n,e,o,i,void 0,s).then(()=>e.dispatch(w.ke({version:r.version}))).catch(r=>{let n=`[${s}] Failed load fig file for preview: ${r}`;(0,_.$D)(a.FigmaTeam.SCENEGRAPH_AND_SYNC,Error(`[VERSION_HISTORY_INCREMENTAL_LOAD] ${n}`)),e.dispatch(E.s.error(r))})}),em=(0,T.nF)(async(e,r)=>{if(!(0,d.kc)().version_diffing){e.dispatch(w.TO(r));return}let n=r.fromVersionId;if(!n)return;let a=J(n,e.getState().versionHistory);if(!a)return;let o=new Date().getTime(),l=await X(a.id,e);if(l){e.dispatch(E.s.error(l));return}let c=new Date().getTime(),u=e.getState().selectedView.editorType,m=O.lE[O.lE.COMPARE_CHANGES];if((0,s.sx)("versioning_performance_metrics",{name:"load_diff",durationMs:c-o,fromCheckpointKey:a.checkpoint_key,nodesToDiff:"all",editorType:u,source:m},{forwardToDatadog:!0}),a.canvas_url){let e=i.glU.getChangesToCompareFromHistoryChangesState();if(e.size>0){let r=Array.from(e).join(","),n=`${a.canvas_url}&nodes_to_extract=${r}`;(0,D.n)(n).then(([e])=>{i.glU.loadPartialHistoryScene(e)})}}let p=i.glU.startComparingChanges()?"":"Error starting history compare";if(p){e.dispatch(E.s.error(p));return}let h=e.getState();e.dispatch(v.$T({...h.selectedView,compareVersionId:n,compareLatest:void 0})),(0,s.sx)("Version History Compare Start",{fromVersionId:n}),e.dispatch(w.TO(r))})},433861:(e,r,n)=>{n.d(r,{Bj:()=>R,HA:()=>C,Os:()=>y,Pe:()=>m,QZ:()=>L,Vl:()=>N,aF:()=>O,b8:()=>w,cY:()=>A,f5:()=>h,j0:()=>I,k9:()=>f,kw:()=>g,l9:()=>S,lG:()=>E,t4:()=>_,u7:()=>T,zE:()=>b,zx:()=>v});var a=n(411855),i=n(171812),o=n(77909),s=n(860601),l=n(30637),c=n(572206),d=n(993285);let u=window.matchMedia("(prefers-reduced-motion: reduce)"),m={navigationDurationMs:200,animationTimingFunction:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,isGetViewportAtomic:!1},p=class e{constructor(e,r={}){this.getCommentDestinationForCanvasPosition=(e,r,n)=>this.viewport.getCommentDestinationForCanvasPosition(e,r,n),this.setCanvasSpaceCenter=(e,r,n)=>{this.viewport.setCanvasSpaceCenter(e,r,n)},this.setCurrentPageIdAsync=async e=>{await this.viewport.setCurrentPageIdAsync(e)},this.pageIdForNodeId=e=>this.viewport.pageIdForNodeId(e),this.getValidCommentsRect=()=>this.viewport.getValidCommentsRect(),this.viewport=e,this.config={...m,...r}}navigateTo(r,n,a={}){clearTimeout(this.delayTimeout),this.delayTimeout=void 0;let i=this.getViewportInfo();if(n||(n=i.zoomScale),u.matches||(0,l.nl)()||0===a.duration)return this.updateViewport(i,r,n),u.matches&&a.metricsCallback?.({prefersReducedMotion:!0}),Promise.resolve({cancelled:!1});let d=performance.now(),m=null,p=[],h=a.duration??this.config.navigationDurationMs;if(a.ignoreVisibleTargets){let n=c.Mi.subtract(r,{x:i.offsetX,y:i.offsetY});n=c.Mi.scale(1/i.zoomScale,n),n=c.Mi.abs(n);let o=Math.max(i.height,i.width)/2,s=e.DEFAULT_NAVIGATE_BUFFER*(1/i.zoomScale);if(c.Mi.max(n)<o-s)return a.metricsCallback?.({prefersReducedMotion:!1}),Promise.resolve({cancelled:!1})}let _=(0,o.v)(),g=!1,f=function(e){let r=document.getElementById("fullscreen-root");if(!r)return s.lQ;let n=()=>{r.addEventListener("mouseup",e),e()};return r.addEventListener("mousedown",n),()=>{r.removeEventListener("mousedown",n),r.removeEventListener("mouseup",e)}}(()=>{g=!0}),E=e=>{if(a.metricsCallback){let r=0,n=0;p.length&&(n=Math.round(p.reduce((e,n,a)=>((0===a&&e>17||n>17)&&r++,e+n))/p.length)),a.metricsCallback({numberOfSlowFrames:r,avgFrameDuration:n,animationCancelled:e,totalFrames:p.length,prefersReducedMotion:!1})}f(),_.resolve({cancelled:e})},y=n-i.zoomScale,b=c.Mi.scale(i.zoomScale,{x:i.offsetX,y:i.offsetY}),I=c.Mi.scale(n,r),T=c.Mi.subtract(I,b),v=this.getViewportInfo(),S=()=>{var e;let o=this.getViewportInfo();if(this.config.isGetViewportAtomic&&((e=v).offsetX!==o.offsetX||e.offsetY!==o.offsetY||e.zoomScale!==o.zoomScale)||g||a.signal?.aborted){E(!0);return}let s=performance.now(),l=s-d;null!=m&&p.push(Math.round(s-m)),m=s;let u=Math.min(l/h,1),_=this.config.animationTimingFunction(u);if(_>=1){E(!1),this.updateViewport(o,r,n);return}let f=i.zoomScale+y*_,I=c.Mi.add(b,c.Mi.scale(_,T)),w=c.Mi.scale(1/f,I);this.updateViewport(o,w,f),requestAnimationFrame(S),v=this.getViewportInfo()};return a.delay?this.delayTimeout=setTimeout(()=>{d=performance.now(),S()},a.delay):S(),_.promise}getViewportInfo(){return this.viewport.getViewportInfo()}getRawViewportInfo(){return this.viewport.getRawViewportInfo()}getCommentsWrapperOffset(e){return this.viewport.getCommentsWrapperOffset(e)}setZoomScale(e,r){this.viewport.setZoomScale(e,r)}setHovering(e){this.viewport.setHovering(e)}updateViewport(e,r,n){this.setZoomScale(e.zoomScale,n),this.setCanvasSpaceCenter(r,e,n)}};p.DEFAULT_NAVIGATE_BUFFER=60;let h=p,_={x:0,y:0,width:1,height:1,offsetX:0,offsetY:0,zoomScale:1,isPanning:!1,isZooming:!1},g=a.createContext(new h({getViewportInfo:()=>_,getRawViewportInfo:()=>_,getCommentsWrapperOffset:e=>({x:0,y:0}),setCanvasSpaceCenter:e=>{},setZoomScale:(e,r)=>{},setHovering:e=>{},setCurrentPageIdAsync:e=>Promise.resolve(),pageIdForNodeId:e=>"1:0",getCommentDestinationForCanvasPosition:(e,r,n)=>null,getValidCommentsRect:()=>null})),f=a.createContext(_.x),E=a.createContext(_.y),y=a.createContext(_.width),b=a.createContext(_.height),I=a.createContext(_.offsetX),T=a.createContext(_.offsetY),v=a.createContext(_.zoomScale),S=a.createContext(_.isPanning),w=a.createContext(_.isZooming),A=a.createContext(0),N=a.createContext(!1),C=a.createContext({current:_}),L=a.createContext({current:_});function O({latestViewport:e,children:r}){let n=a.useRef(e),i=a.useRef(e);return i.current=n.current,n.current=e,a.createElement(L.Provider,{value:i},a.createElement(C.Provider,{value:n},a.createElement(f.Provider,{value:e.x},a.createElement(E.Provider,{value:e.y},a.createElement(y.Provider,{value:e.width},a.createElement(b.Provider,{value:e.height},a.createElement(I.Provider,{value:e.offsetX},a.createElement(T.Provider,{value:e.offsetY},a.createElement(v.Provider,{value:e.zoomScale},a.createElement(S.Provider,{value:e.isPanning},a.createElement(w.Provider,{value:e.isZooming},r)))))))))))}function R(e){let{getViewport:r}=e,[n,o]=a.useState(r()||_),s=a.useCallback(()=>{o(e=>{let n=r()||_;return(0,i.c2)(e,n)?e:n})},[r,o]);return(0,d.N)(s),a.createElement(O,{latestViewport:n},e.children)}},902938:(e,r,n)=>{n.d(r,{AM:()=>s,qr:()=>l});var a=n(411855),i=n(188507);n(299321),n(931828);var o=n(327017);let s={MAIN_GUIDE:"https://help.figma.com/hc/articles/1500004414622",TROUBLESHOOT:"https://help.figma.com/hc/articles/4402390108951",ACCESSIBILITY:"https://help.figma.com/hc/articles/4402390110743",FEEDBACK_FORM:"https://form.asana.com?k=FPQgFCXUINQN6CmMtWiabQ&d=10497086658021"};function l(){let[e,r]=a.useState(null),n=(0,i.d4)(e=>e.voice.showWidget);return a.useEffect(()=>{n&&!e&&r(o.h.getInstance())},[n,e]),e}},866564:(e,r,n)=>{n.d(r,{_2:()=>i,w$:()=>o}),n(411855);var a=n(776250);n(439729),n(939863),n(335682),n(571232);let i="audio-paywall-key",o=(()=>{let e=!0,r=!1;return n=>{r||setTimeout(()=>{n>0&&e?(e=!1,(0,a.sx)("Context Viewed",{name:"join-call-with-others"})):e||0!==n||(r=!0,(0,a.sx)("Context Viewed",{name:"should-close-open-audio-nux"}))},200)}})()},327017:(e,r,n)=>{n.d(r,{h:()=>v,q:()=>y});var a=n(414507),i=n(776250),o=n(517333),s=n(966712),l=n(563706),c=n(36381),d=n(776621),u=n(988022),m=n(805286),p=n(301807),h=n(748207),_=n(618807),g=n(338400),f=n(636751);let E=e=>e>.1,y=.05,b=`Something there is that doesn't love a wall,
That sends the frozen-ground-swell under it,
And spills the upper boulders in the sun;
And makes gaps even two can pass abreast.
The work of hunters is another thing:
I have come after them and made repair
Where they have left not one stone on a stone,
But they would have the rabbit out of hiding,
To please the yelping dogs. The gaps I mean,
No one has seen them made or heard them made,
But at spring mending-time we find them there.
I let my neighbor know beyond the hill;
And on a day we meet to walk the line
And set the wall between us once again.
We keep the wall between us as we go.
To each the boulders that have fallen to each.
And some are loaves and some so nearly balls
We have to use a spell to make them balance:
\u2018Stay where you are until our backs are turned!\u2019
We wear our fingers rough with handling them.
Oh, just another kind of out-door game,
One on a side. It comes to little more:
There where it is we do not need the wall:
He is all pine and I am apple orchard.
My apple trees will never get across
And eat the cones under his pines, I tell him.
He only says, \u2018Good fences make good neighbors.\u2019
Spring is the mischief in me, and I wonder
If I could put a notion in his head:
\u2018Why do they make good neighbors? Isn't it
Where there are cows? But here there are no cows.
Before I built a wall I'd ask to know
What I was walling in or walling out,
And to whom I was like to give offense.
Something there is that doesn't love a wall,
That wants it down.\u2019 I could say \u2018Elves\u2019 to him,
But it's not elves exactly, and I'd rather
He said it for himself. I see him there
Bringing a stone grasped firmly by the top
In each hand, like an old-stone savage armed.
He moves in darkness as it seems to me,
Not of woods only and the shade of trees.
He will not go behind his father's saying,
And he likes having thought of it so well
He says again, \u2018Good fences make good neighbors.\u2019`.split(/\n/g).map(e=>e.trim()),I=0,T=class e{constructor(e){this.isMuted=!1,this.handlingTokenExpiration=!1,this.decryptedUserMap={},this.averageRecentVoiceLevel={},this.volumeDataInterval=null,this.micStateInterval=null,this.streamingAudioForCaptions=!1,this._microphonePermissionDenied=!0,this.captionsToggleEnabled=!1,this.volumeLevelsStore=(0,_._)({}),this.activeSpeakerIdStore=(0,_._)(null),this.recentlySpokeIdStore=(0,_._)(null),this.setMicrophone=async e=>{try{this.unpublishedLocalAudioTrack?.setDevice(e.deviceId),await this.localAudioTrack?.setDevice(e.deviceId),this.microphone=e}catch(e){throw e}},this.setPlaybackDevice=async e=>{try{this.client?.remoteUsers.forEach(r=>r.audioTrack?.setPlaybackDevice(e.deviceId)),this.playbackDevice=e}catch(e){throw e}},this.getMicrophones=e=>this.AgoraRTC.getMicrophones(e),this.getPlaybackDevices=e=>this.AgoraRTC?.getPlaybackDevices(e),this.currentMicrophone=async()=>this.microphone||(await this.getMicrophones())?.[0],this.currentPlaybackDevice=async()=>this.playbackDevice||(await this.getPlaybackDevices())?.[0],this.getParticipantIds=async()=>{if(!this.client||!this.userId)throw Error("Client not yet instantiated");let e=[];for(let r of this.client.remoteUsers){let n=await this.getDecryptedUserId(r.uid);n&&e.push(n)}return e.push(this.userId),e},this.startPollingMicState=()=>{o.eD&&(this.microphonePermissionDenied&&o.eD.setUsingMicrophone(!1),this.micStateInterval=setInterval(()=>{this.client&&(o.eD?.setIsInVoiceCall("DISCONNECTED"!==this.client.connectionState),o.eD?.setUsingMicrophone(!!this.isPublishingLocalTrack()))},5e3))},this.stopPollingMicState=()=>{this.micStateInterval&&(clearInterval(this.micStateInterval),this.micStateInterval=null)},this.isPublishingLocalTrack=()=>this.client?.localTracks.some(e=>e.getTrackId()===this.localAudioTrack?.getTrackId()),this.startPollingVolumeData=()=>{this.volumeDataInterval||(this.volumeDataInterval=setInterval(async()=>{if(!this.client||!this.userId)return;let e={};for(let e in this.averageRecentVoiceLevel)this.averageRecentVoiceLevel[e]*=.8;for(let r of this.client.remoteUsers){let n=await this.getDecryptedUserId(r.uid);if(!n)continue;let a=r.audioTrack?.getVolumeLevel()||0,i=this.averageRecentVoiceLevel[n];this.averageRecentVoiceLevel[n]=(i||0)+a,e[n]={isMuted:!r.audioTrack,volumeLevel:a}}let r=this.localAudioTrack?.getVolumeLevel()||0;this.averageRecentVoiceLevel[this.userId]=this.isMuted?0:(this.averageRecentVoiceLevel[this.userId]||0)+r,e[this.userId]={isMuted:this.isMuted,volumeLevel:r},this.checkLocalVolumeLevels(),this.volumeLevelsStore.set(e),this.updateActiveSpeakers(),this.updateRecentlySpoke()},200))},this.stopPollingVolumeData=()=>{this.volumeDataInterval&&(clearInterval(this.volumeDataInterval),this.volumeDataInterval=null)},this.checkLocalVolumeLevels=()=>{this.isMuted&&this.unpublishedLocalAudioTrack&&this.unpublishedLocalAudioTrack.getVolumeLevel()>.6&&this.callEventCallback?.(f.$E.WARNING_MICROPHONE_LEVELS_HIGH_AND_MUTED)},this.updateActiveSpeakers=()=>{let e=Object.entries(this.averageRecentVoiceLevel).filter(e=>e[1]>y).sort((e,r)=>e[1]>r[1]?-1:1).map(e=>e[0]);this.activeSpeakerIdStore.set(e)},this.updateRecentlySpoke=()=>{let e=Object.entries(this.averageRecentVoiceLevel).sort((e,r)=>e[1]>r[1]?-1:1).map(e=>e[0]);this.recentlySpokeIdStore.set(e)},this.onCallDisconnect=()=>{m.R9.sendVoiceMetadata(""),this.stopPollingVolumeData(),o.eD?.setIsInVoiceCall(!1),o.eD?.setUsingMicrophone(!1),this.localAudioTrack?.setEnabled(!1),this.unpublishedLocalAudioTrack?.setEnabled(!1)},this.attachDeviceListeners=e=>{e.onMicrophoneChanged=e=>{this.microphone?.deviceId===e.device.deviceId&&"INACTIVE"===e.state&&this.getMicrophones().then(e=>{this.microphone=e.length>0?e[0]:null})},e.onPlaybackDeviceChanged=e=>{this.playbackDevice?.deviceId===e.device.deviceId&&"INACTIVE"===e.state&&l.Ay.chrome&&this.getPlaybackDevices().then(e=>{this.playbackDevice=e.length>0?e[0]:null})}},this.audioCaptionQueues=new p.b,this.audioCaptionStream=new h.T,this.AgoraRTC=e,this.AgoraRTC.setLogLevel((0,s.kc)().voice_agora_debug_level_logs?0:3),this.AgoraRTC.setArea(["OVERSEA"]),this.localAudioTrack=null,this.unpublishedLocalAudioTrack=null,this.microphone=null,this.playbackDevice=null,this.attachDeviceListeners(e),(0,s.kc)().voice_debug_captions_enabled&&setTimeout(()=>{setInterval(()=>{this.audioCaptionStream.addNewCaption(this.userId?this.userId:"dummyUserId",Date.now(),b[I++%b.length])},1501)},1500)}static createInstance(){return this.instance?Promise.resolve():new Promise((r,n)=>{let a=document.createElement("script");a.src=(0,s.ck)("0706b46bdc09a419282285b791ea1dd3c019ecd6"),a.setAttribute("nonce",(0,s.tl)().csp_nonce),a.onload=()=>{let n=window.AgoraRTC;this.instance=new e(n),r()},a.onerror=()=>{n(Error("Provider audio script load error"))},document.body.appendChild(a)})}static getInstance(){return this.instance}static leave(){this.instance?.leave()}async join({appId:r,callId:n,token:a,callUserId:s,userId:c,encryptionKey:d,userEncryptionKey:m,setParticipantIdsCallback:p,callEventCallback:h,store:_,fileKey:g}){if(await this.setMicrophonePermissions(),!this.getSystemCompatibility())throw Error("System incompatible");this.setParticipantIdsCallback=p,this.userId=c,this.userEncryptionKey=m,this.callEventCallback=h;try{let e="vp8";l.Ay.safari&&+l.Ay.version>=13&&(e="h264"),await this.client?.leave(),this.client=this.AgoraRTC.createClient({mode:"live",codec:e}),this.AgoraRTC.setParameter("AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL",200),this.userId=c,this.handlingTokenExpiration=!1,this.client.setEncryptionConfig("aes-256-xts",d),this.attachClientListeners(n,a,c,d,h),await this.client.join(r,n,a,s),o.eD?.setIsInVoiceCall(!0),await this.client.setClientRole("host"),this.microphonePermissionDenied||(this.localAudioTrack=await this.AgoraRTC.createMicrophoneAudioTrack({AEC:!0,AGC:!0,ANS:!0,microphoneId:this.microphone?.deviceId}),this.unpublishedLocalAudioTrack=await this.AgoraRTC.createMicrophoneAudioTrack({AEC:!0,AGC:!0,ANS:!0,microphoneId:this.microphone?.deviceId})),this.localAudioTrack&&await this.client.publish(this.localAudioTrack),await this.unmute()}catch(o){(0,i.sx)("Voice Call - Error",{callId:n,token:a,userId:c,encryptionKey:d,message:`${o.message}`,agora_exception:!1,agora_recovery:!1,join:!0},{forwardToDatadog:!0});let r=Error(`Error joining call: ${o.message}`);throw await e.leave(),r}finally{(0,u.ds)("voice_user_joined",g,_.getState(),{callId:n,userId:c,encryptionKey:d,captions_enabled:this.captionsToggleEnabled}),(this.client?.connectionState!=="DISCONNECTED"||this.isPublishingLocalTrack())&&this.startPollingMicState()}}get uid(){return this.client?.uid}async renewToken(e){await this.client?.renewToken(e),this.handlingTokenExpiration=!1,(0,i.sx)("Voice Call - Token Renewed",{token:e,userId:this.client?.uid&&this.decryptedUserMap[this.client?.uid]})}async leave(){await this.client?.leave(),this.stopPollingMicState(),this.audioCaptionQueues.clear(),this.audioCaptionStream.clear()}async mute(){await this.localAudioTrack?.setEnabled(!1),this.audioCaptionQueues.removeTrack(this.userId,this.localAudioTrack?.getMediaStreamTrack()),o.eD?.setUsingMicrophone(!1),this.isMuted=!0}async unmute(){await this.localAudioTrack?.setEnabled(!0),(0,g.WO)()&&this.streamingAudioForCaptions&&this.audioCaptionQueues.addTrack(this.userId,this.localAudioTrack?.getMediaStreamTrack()),o.eD?.setUsingMicrophone(!0),this.isMuted=!1}streamAudioForCaptions(e){(0,g.WO)()&&this.streamingAudioForCaptions!==e&&(this.streamingAudioForCaptions=e,this.audioCaptionQueues.clear(),this.streamingAudioForCaptions&&(this.client?.remoteUsers.forEach(async e=>{let r=await this.getDecryptedUserId(e.uid);this.audioCaptionQueues.addTrack(r,e.audioTrack?.getMediaStreamTrack())}),this.localAudioTrack&&!this.isMuted&&this.audioCaptionQueues.addTrack(this.userId,this.localAudioTrack.getMediaStreamTrack())))}getSystemCompatibility(){return this.AgoraRTC.checkSystemRequirements()}isLocalUserSpeaking(){return!!this.userId&&E(this.averageRecentVoiceLevel[this.userId])}attachClientListeners(e,r,n,a,s){this.client?.removeAllListeners(),this.client?.on("user-published",async(e,r)=>{if(await this.client?.subscribe(e,r),"audio"===r){let r=e.audioTrack||null;if(r?.play(),this.playbackDevice&&r?.setPlaybackDevice(this.playbackDevice.deviceId),g.WO()&&r&&this.streamingAudioForCaptions){let n=await this.getDecryptedUserId(e.uid);this.audioCaptionQueues.addTrack(n,r.getMediaStreamTrack())}}}),this.client?.on("user-unpublished",async(e,r)=>{if(!o.eD||"audio"!==r)return;let n=await this.getDecryptedUserId(e.uid);if(!n)return;let a=new Set;for(let r of this.client?.remoteUsers||[]){let i=await this.getDecryptedUserId(r.uid),o=e.audioTrack?.getMediaStreamTrack().id;i===n&&o&&a.add(o)}this.audioCaptionQueues.removeUnpublishedTrack(n,a)});let l=!0;this.client?.on("network-quality",function(o){l&&(o.downlinkNetworkQuality>=4||o.uplinkNetworkQuality>=4)?(i.sx("Voice Call - Bad Call Quality",{callId:e,token:r,userId:n,encryptionKey:a,message:`Bad call quality detected. downlink = ${o.downlinkNetworkQuality}, uplink = ${o.uplinkNetworkQuality}`,agora_exception:!1,agora_recovery:!1,join:!1},{forwardToDatadog:!0}),l=!1):l=!0}),this.client?.on("user-joined",async e=>{this.setParticipantIdsCallback?.(await this.getParticipantIds());let r=await this.getDecryptedUserId(e.uid);r!==this.userId&&s(f.$E.USER_JOINED,r)}),this.client?.on("user-left",async e=>{this.setParticipantIdsCallback?.(await this.getParticipantIds());let r=await this.getDecryptedUserId(e.uid);r!==this.userId&&s(f.$E.USER_LEFT,r)}),this.client?.on("connection-state-change",async r=>{let n;switch(r){case"CONNECTED":if(m.R9.sendVoiceMetadata(e),this.setParticipantIdsCallback?.(await this.getParticipantIds()),this.startPollingVolumeData(),this._microphonePermissionDenied){n=f.$E.CONNECTED_WITH_MIC_DISABLED;break}n=f.$E.CONNECTED;break;case"DISCONNECTED":this.onCallDisconnect(),n=f.$E.DISCONNECTED;break;case"CONNECTING":n=f.$E.CONNECTING;break;case"DISCONNECTING":n=f.$E.DISCONNECTING;break;case"RECONNECTING":n=f.$E.RECONNECTING}void 0!==n&&s(n)}),this.client?.on("exception",o=>{let l;switch(o.code){case 2001:if(this.microphonePermissionDenied)break;l=f.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW;break;case 2002:l=f.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW;break;case 2003:if(this.microphonePermissionDenied)break;l=f.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW;break;case 2005:l=f.$E.WARNING_RECV_AUDIO_DECODE_FAILED;break;case 4001:if(this.microphonePermissionDenied)break;l=f.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER;break;case 4002:l=f.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER;break;case 4003:if(this.microphonePermissionDenied)break;l=f.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER;break;case 4005:l=f.$E.WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER}l&&s(l),o.code>=3e3?(console.error(o),i.sx("Voice Call - Error",{callId:e,token:r,userId:n,encryptionKey:a,message:o.msg,code:o.code,agora_exception:!1,agora_recovery:!0,join:!1},{forwardToDatadog:!0})):i.sx("Voice Call - Error",{callId:e,token:r,userId:n,encryptionKey:a,message:o.msg,code:o.code,agora_exception:!0,agora_recovery:!1,join:!1},{forwardToDatadog:!0})}),this.client?.on("token-privilege-will-expire",()=>{if(!this.handlingTokenExpiration){if(this.handlingTokenExpiration=!0,!this.client?.remoteUsers.length){s(f.$E.CALL_INACTIVE),i.sx("Voice Call - Token Will Expire",{callId:e,token:r,userId:n,encryptionKey:a,callInactive:!0});return}s(f.$E.TOKEN_WILL_EXPIRE_DETECT_MIC_INPUT),i.sx("Voice Call - Token Will Expire",{callId:e,token:r,userId:n,encryptionKey:a})}}),this.client?.on("token-privilege-did-expire",()=>{s(f.$E.TOKEN_EXPIRED),i.sx("Voice Call - Token Did Expire",{callId:e,token:r,userId:n,encryptionKey:a})})}async getDecryptedUserId(e){try{return this.decryptedUserMap[e]||(this.decryptedUserMap[e]=await (0,c.We)(this.userEncryptionKey,e.toString())),this.decryptedUserMap[e]}catch{(0,d.$D)(a.FigmaTeam.UNOWNED,Error(`Failed to decrypt encrypted user: ${e}`)),this.callEventCallback?.(f.$E.ERROR)}}async setMicrophonePermissions(){if(o.eD){this._microphonePermissionDenied=!await o.eD.requestMicrophonePermission();return}try{await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),this._microphonePermissionDenied=!1}catch(e){this._microphonePermissionDenied=!0}}get microphonePermissionDenied(){return this._microphonePermissionDenied}};T.instance=null;let v=T},571232:(e,r,n)=>{n.d(r,{Eo:()=>_,W5:()=>h,bF:()=>g});var a=n(411855),i=n(188507),o=n(171812),s=n(44948),l=n(358145),c=n(891093),d=n(805286),u=n(85098),m=n(860178);function p(){let e=(0,i.d4)(e=>e.multiplayer).allUsers,r=d.R9.useVoiceMetadataBySessionId();function n(e,r){return e.sessionID===r.sessionID&&e.sawMouse===r.sawMouse&&e.deviceName===r.deviceName&&e.name===r.name&&e.imageURL===r.imageURL}return{multiplayerUsersInVoiceCall:(0,s.Op)(()=>e.filter(e=>r[e.sessionID]?.connectedCallId),[e,r],n),multiplayerUsersNotInVoiceCall:(0,s.Op)(()=>e.filter(e=>!r[e.sessionID]?.connectedCallId),[e,r],n)}}function h(e,r){let n=(0,m.iZ)(),o=(0,i.d4)(e=>e.multiplayer.deviceNameFilter),s=(0,i.d4)(r=>e&&r.voice.activeCall[e]),{multiplayerUsersInVoiceCall:c,multiplayerUsersNotInVoiceCall:d}=p(),h=(0,i.d4)(e=>e.voice.userIdsInCallFromProvider),[_,g]=(0,a.useState)(new Set),[f,E]=(0,a.useState)([]),[y,b]=a.useState(),I=(0,l.ZC)(s);return a.useEffect(()=>{s&&!I&&!y&&r&&(b(!0),setTimeout(()=>{b(!1)},2e3))},[s,I,r,y]),a.useEffect(()=>{!function(){if(s&&h.length>1&&!y){let e=new Set(h);g(e);let r=[];for(let n of[...d,...c])e.has(n.userID)||r.push(n);E((0,u._i)(r,o))}else g(new Set(c.map(e=>e.userID))),E((0,u._i)(d,o))}()},[s,c,d,n,o,h,y]),{userIdsInCall:_,usersNotInCall:f}}function _(e,r){let n=(0,i.wA)(),{multiplayerUsersInVoiceCall:s,multiplayerUsersNotInVoiceCall:l}=p(),d=a.useMemo(()=>s.reduce((e,r)=>({...e,[r.userID]:r.userID in e?e[r.userID].add(r):new Set([r])}),{}),[s]),u=a.useMemo(()=>l.reduce((e,r)=>({...e,[r.userID]:r.userID in e?e[r.userID].add(r):new Set([r])}),{}),[l]),m=(0,i.d4)(e=>r&&r in e.activeFileUsers?e.activeFileUsers[r]:void 0,i.bN),h=(0,i.d4)(e=>e.voice.voiceUsersById),[_,g]=(0,a.useState)([]),[f,E]=(0,a.useState)([]),[y,b]=(0,a.useState)([]);return a.useEffect(()=>{let r=[],n=[],a=[];for(let i of e)if(i in d)n.push(...d[i]);else if(i in u)n.push(...u[i]);else if(m&&i in m){let e=m[i];r.push({imageURL:e.imageUrl,name:e.handle,userID:e.id})}else i in h?r.push(h[i]):a.push(i);(0,o.c2)(y,n)||b(n),(0,o.c2)(f,r)||E(r),(0,i.bN)(_,a)||g(a)},[m,e,d,u,h,_,y,f]),a.useEffect(()=>{r&&_.length>0&&n(c.NS({fileKey:r,userIds:_}))},[_,n,r]),{voiceUsersInMultiplayer:y,voiceUsersNotInMultiplayer:f}}function g(e,r){let{voiceUsersInMultiplayer:n,voiceUsersNotInMultiplayer:i}=_(e,r);return a.useMemo(()=>[...n,...i],[n,i])}},338400:(e,r,n)=>{n.d(r,{HJ:()=>b,Lk:()=>h,Mw:()=>E,WO:()=>f,YL:()=>g,gW:()=>_,nN:()=>y});var a=n(411855),i=n(188507),o=n(517333),s=n(358145),l=n(563706);n(178466);var c=n(891093),d=n(335682),u=n(984968),m=n(636751);let p=()=>!((0,l.wg)()||(0,l.o4)());function h(){let e=(0,d.q5)(),r=(0,i.d4)(e=>e.orgById),n=(0,i.d4)(e=>e.teams),o=e?.key,l=(0,i.d4)(e=>o&&!!e.voice.activeCall[o]),[c,u]=a.useState(!1),m=(0,s.ZC)(c);return a.useEffect(()=>{let a=p()&&4===g({openFile:e,teams:n,orgById:r});!0===m&&!a&&l||u(a)},[e,r,n,m,l]),c}var _=(e=>(e[e.FEATURE_DISABLED=0]="FEATURE_DISABLED",e[e.DISABLED_BY_ORG=1]="DISABLED_BY_ORG",e[e.INELIGIBLE_FILE_IN_PERSONAL_SPACE=2]="INELIGIBLE_FILE_IN_PERSONAL_SPACE",e[e.ELIGIBLE_WITH_UPGRADE=3]="ELIGIBLE_WITH_UPGRADE",e[e.ELIGIBLE=4]="ELIGIBLE",e))(_||{});function g(e){if("gov"===window.INITIAL_OPTIONS.cluster_name)return 0;let r=e.openFile;if(!r||!r.parentOrgId&&!r.teamId)return 0;if(r.parentOrgId){let n=e.orgById[r.parentOrgId];return n?n.voice_enabled?4:1:0}if(r.teamId){let n=e.teams[r.teamId];return n?(0,u.PS)(n)?4:3:0}return 2}function f(){return!!o.eD}function E(e){return e>=m.MK.STARTED&&e<m.MK.DONE}function y(e){return e<m.MK.NOT_STARTED}function b(e,r){o.eD?.setCaptionsEnabled(r),e(c.t7(r))}},325538:(e,r,n)=>{n.d(r,{Em:()=>o,TI:()=>s,Wl:()=>i});var a=n(411855);function i(e,r){let[n,i]=(0,a.useState)(null),[o,s]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{if(r&&!o){let n=function(r){i(r[e]||null)};return r.volumeLevelsStore.subscribe(n),s(!0),()=>{r.volumeLevelsStore.unsubscribe(n),s(!1)}}},[r]),r)?n:null}function o(e,r,n){let a=r=>{n(r[e]||null)};return r&&r.volumeLevelsStore.subscribe(a),{unsubscribe:()=>r?.volumeLevelsStore.unsubscribe(a)}}function s(e,r){let[n,i]=(0,a.useState)(),[o,s]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{if(r&&!o){let n=function(r){i(r[e]?.isMuted)};return r.volumeLevelsStore.subscribe(n),s(!0),()=>{r.volumeLevelsStore.unsubscribe(n),s(!1)}}},[r]),r)return n}},349719:(e,r,n)=>{n.d(r,{$g:()=>w,Au:()=>g,BG:()=>p,Bt:()=>d,GD:()=>T,LF:()=>v,N$:()=>A,Qn:()=>I,_L:()=>_,bf:()=>i,fL:()=>u,hQ:()=>y,le:()=>b,mX:()=>f,oF:()=>m,pY:()=>h,rx:()=>S,sZ:()=>E,u_:()=>c,wS:()=>N,w_:()=>C});var a,i,o=n(776621),s=n(743282);function l(e){window.parent.postMessage(e,"*")}function c(){l({type:"FIGMA_READY"})}function d(e){l({type:"CSS_PROPERTIES",data:{cssProperties:e}})}function u(e){l({type:"HTML_SKELETON",data:{htmlSkeleton:e}})}function m(e){l({type:"TEXT",data:{text:e}})}function p(e,r){l({type:"LAYERS",data:{rootNodeId:e,layers:r}})}function h(e){l({type:"ASSET",data:{asset:e}})}function _(e){l({type:"RELATED_LINK_CREATED",data:{link:e}})}function g(e){l({type:"RELATED_LINK_REMOVED",data:{link:e}})}function f(e){l({type:"SELECTED_LAYER_GUID",data:{guid:e}})}function E(e){l({type:"SELECTED_PAGE_GUID",data:{guid:e}})}function y(e){l({type:"CONFIGURE_AUTOCOMPLETE",data:{providers:e}})}function b(e){l({type:"GENERATED_CODE",data:{sections:e}})}let I=(0,n(479296).n)(e=>{l({type:"OPEN_IN_BROWSER",data:{href:e}})});function T(e){l({type:"FILE_NAME",data:{name:e}})}function v(e,r,n){l({type:"THUMBNAIL",data:{nodeId:e,thumbnailDataUri:r,thumbnailSize:n}})}function S(){l({type:"PAGE_LOADED"})}function w(){l({type:"IDLE_LOGOUT"})}function A(e){l({type:"MAPPING_SUGGESTION",data:{requestId:e.requestId,mappings:e.mappings||null,error:e.error||null}})}(a||(a={})).sendGenerateFigmadocMessage=function(e){return N.sendMessage({type:"GENERATE_FIGMADOC",request:{userCode:e}})},(e=>{e.sendGetLocalFileExtensionManifest=function(e){return N.sendMessage({type:"GET_LOCAL_FILE_EXTENSION_MANIFEST",request:{id:e}})},e.sendCreateMultipleNewLocalFileExtensions=function(e,r){return N.sendMessage({type:"CREATE_MULTIPLE_NEW_LOCAL_FILE_EXTENSIONS",request:{options:e,depth:r}})},e.sendGetLocalFileExtensionSourceMessage=function(e){return N.sendMessage({type:"GET_LOCAL_FILE_EXTENSION_SOURCE",request:{id:e}})},e.sendUpdateCachedContainsWidget=function(e){return N.sendMessage({type:"UPDATE_CACHED_CONTAINS_WIDGET",request:e})},e.sendGetLocalManifestFileExtensionIdsToCachedMetadataMap=function(){return N.sendMessage({type:"GET_LOCAL_MANIFEST_FILE_EXTENSION_IDS_TO_CACHED_METADATA_MAP",request:void 0})},e.sendRegisterManifestChangeObserverMessage=function(e){return C.registerCallback({type:"REGISTER_MANIFEST_CHANGE_OBSERVER"},e)},e.sendRegisterCodeChangeObserverMessage=function(e){return C.registerCallback({type:"REGISTER_CODE_CHANGE_OBSERVER"},e)},e.sendRegisterUIChangeObserverMessage=function(e){return C.registerCallback({type:"REGISTER_UI_CHANGE_OBSERVER"},e)},e.sendOpenExtensionDirectoryMessage=function(e){return l({type:"OPEN_EXTENSION_DIRECTORY",data:{id:e}})},e.sendOpenExtensionManifestMessage=function(e){return l({type:"OPEN_EXTENSION_MANIFEST",data:{id:e}})},e.sendRemoveFileExtensionMessage=function(e){return N.sendMessage({type:"REMOVE_LOCAL_FILE_EXTENSION",request:{id:e}})},e.sendGetLocalManifestFileExtensionIdsToCachedContainsWidgetMapMessage=function(){return N.sendMessage({type:"GET_LOCAL_MANIFEST_FILE_EXTENSION_IDS_TO_CACHED_CONTAINS_WIDGET_MAP",request:void 0})},e.sendToggleDevToolsMessage=function(){return l({type:"TOGGLE_DEV_TOOLS"})},e.sendGetAllLocalFileExtensionIdsMessage=function(){return N.sendMessage({type:"GET_ALL_LOCAL_FILE_EXTENSION_IDS",request:void 0})},e.sendWriteNewExtensionDirectoryToDiskMessage=function(e){return N.sendMessage({type:"WRITE_NEW_EXTENSION_DIRECTORY_TO_DISK",request:e})}})(i||(i={}));let N=new class{constructor(){this.pendingMessagesById={}}sendMessage(e){let r=(0,s.g)(),n={...e,requestId:r};return new Promise((e,a)=>{this.pendingMessagesById[r]={...n,resolve:e,reject:a},l(n)})}resolveMessage(e){let r=this.pendingMessagesById[e.requestId];if(!r){(0,o.x1)("MessageWithResponseManager.resolveMessage","No pending message found",{response:e,pendingMessagesById:this.pendingMessagesById},{reportAsSentryError:!0});return}e.response&&(r.resolve(e.response),delete this.pendingMessagesById[e.requestId])}},C=new class{constructor(){this.callbacksById={}}registerCallback(e,r){let n=(0,s.g)();return this.callbacksById[n]=r,l({...e,callbackId:n}),()=>this.cancelCallback(n)}resolveMessage(e){let r=this.callbacksById[e.callbackId];if(!r){(0,o.x1)("MessageWithCallbackManager.resolveMessage","No callback found",{response:e,callbacksById:this.callbacksById},{reportAsSentryError:!0});return}r(e.callbackData)}async cancelCallback(e){await N.sendMessage({type:"CANCEL_CALLBACK",request:{callbackId:e}}),delete this.callbacksById[e]}}},421234:(e,r,n)=>{function a(e,r){return`${location.origin}/files/${r?r+"/":""}workspace/${e}/directory/teams`}function i(e){let r={},n=0,a=0;return e.forEach(e=>{if(e.workspace_id){let n=r[e.workspace_id]??0;n++,r[e.workspace_id]=n}else e.team_id?n++:a++}),{libraryCountByWorkspaceId:r,unassignedLibrariesCount:n,draftLibrariesCount:a}}n.d(r,{fO:()=>a,wM:()=>i}),n(411855),n(966159),n(733556),n(711525),n(939863),n(349410),n(352898),n(679892),n(99506)},657193:(e,r,n)=>{n.d(r,{Ay:()=>O,yP:()=>C});var a=n(737947),i=n(966712),o=n(687396),s=n(837324),l=n(410424),c=n(941381),d=n(944682),u=n(738269),m=n(270056),p=n(293017),h=n(782656),_=n(445092),g=n(988022),f=n(420576),E=n(355513),y=n(630331),b=n(243987),I=n(707465),T=n(783967),v=n(935757),S=n(239671),w=n(668526),A=n(402465),N=n(396248);let C=(e,r)=>I.$Z.selectedViewHasMissingResources(e,r),L=0,O=e=>r=>function(n){var O,R;let P=e.getState().selectedView;r(n);let D=e.getState();if(u.Qv.matches(n)){let r=D.selectedView;if(r===A.o0&&(r=(0,i.Ay)().selected_view||(0,I.vU)(D,a.Ay.location.pathname,a.Ay.location.search,a.Ay.location.hash)),"fullscreen"===r.view&&r.fileKey){let{fileKey:a}=r,i=e.getState().fileByKey[a];i&&!n.payload.fromRealtime&&(0,S.oD)(r.editorType)!==i.editor_type&&(r.editorType=(0,S.wN)(i.editor_type??"design"))}if(C(D,r)&&(r={view:"resourceUnavailable",resourceType:(O=r,new o.$T().selectedViewMissingResourceType(D,O))}),"teamUpgrade"===r.view&&r.teamId){let e=D.teams[r.teamId];e&&e.pro_team&&!(0,b.WQ)(e)&&(r={view:"team",teamId:r.teamId,teamViewTab:w.A$.SETTINGS})}r!==A.o0?e.dispatch(u.$T(r)):D.user?.drafts_folder_id?e.dispatch(u.$T({view:"folder",folderId:D.user.drafts_folder_id})):e.dispatch(u.$T({view:"recentsAndSharing"}))}else if(p.OB.matches(n)){let e={view:"fullscreen",fileKey:n.payload.file.key,editorType:n.payload.fullscreenEditorType},r=(0,I.Np)(D,e);a.Ay.replace(r,{...e,jsCommitHash:(0,E.Qr)()})}else if(u.$T.matches(n)){if("prototype"!==P.view&&"prototype"===n.payload.view&&(0,N.q)()){let e=(0,I.Np)(D,n.payload);a.Ay.redirect(e)}"fullscreen"===n.payload.view&&("fullscreen"!==P.view||n.payload.editorType!==P.editorType)&&y.B8(n.payload.editorType);let{selectedView:r}=e.getState();if(!("inlinePreview"in r&&r.inlinePreview)&&!n.payload.fromPopstate){let r=(0,I.Np)(D,n.payload);a.Ay.location.pathname+a.Ay.location.search!==r?(("fullscreen"!==n.payload.view||n.payload.fileKey!==i.Ay().editing_file?.key)&&!v.YH&&(0,T.w)()&&(0,v._X)("fileBrowserHistory middleware selectView").then(r=>{e.dispatch(u.Qv(r.data.meta))}),!n.payload.forceReplaceState&&a.Ay.location.state&&(R=n.payload,null==P||null==R?P!==R:I.$Z.requireHistoryChange(P,R))?a.Ay.push(r,{...n.payload,previousSelectedView:P,jsCommitHash:(0,E.Qr)()}):a.Ay.replace(r,{...n.payload,previousSelectedView:P,jsCommitHash:(0,E.Qr)()})):null==a.Ay.location.state&&a.Ay.replace(r,{...n.payload,previousSelectedView:P,jsCommitHash:(0,E.Qr)()}),e.getState()?.user?.appData?.loggedOut&&"fullscreen"!==n.payload.view&&a.Ay.reload("User Logged out")}if("searchAndBrowse"===n.payload.subView){let e=n.payload.data;e&&!e.category&&(0,E.hL)((0,s.vC)(e))}else(0,E.OR)(D,n.payload)}else if(l.Af.matches(n)&&"hubFile"===D.selectedView.subView)(0,E.OR)(D,{hubFileId:n.payload.hubFileId,subView:"hubFile",view:"communityHub"});else if(c.l5.matches(n)){let r=e.getState().selectedView,i=n.payload.publishedPlugins,o=r&&"communityHub"===r.view&&"plugin"===r.subView&&r.publishedPluginId;if(o&&i&&i.some(e=>e.id===o)){if(a.Ay){let e=(0,I.Np)(D,r);a.Ay.replace(e,{...r,jsCommitHash:(0,E.Qr)()})}(0,E.OR)(D,r)}}else if(m.yJ.matches(n)){let r=e.getState().selectedView;"folder"===r.view&&r.folderId===n.payload.folder.id&&(0,E.OR)(D,r)}else if(m.bE.matches(n)){let r=e.getState().selectedView;if("folder"===r.view&&r.folderId===n.payload.id){(0,E.OR)(D,r);let e=(0,I.Np)(D,r);a.Ay.replace(e,{...r,jsCommitHash:(0,E.Qr)()})}}else if(h.yJ.matches(n)){let r=e.getState().selectedView;if("fullscreen"===r.view){let e=r.fileKey&&D.fileByKey[r.fileKey];if(e){let i=(0,f.L8)(e,D.repos);if(i&&i.id===n.payload.repo.id){(0,E.OR)(D,r);let e=(0,I.Np)(D,r);a.Ay&&a.Ay.replace(e,{...r,jsCommitHash:(0,E.Qr)()})}}}}else if(d.yJ.matches(n)){let r=e.getState().selectedView;if("fullscreen"===r.view&&n.payload.file.key===r.fileKey||"prototype"===r.view&&n.payload.file.key===r.file.key){(0,E.OR)(D,r);let e=(0,I.Np)(D,r);a.Ay&&a.Ay.replace(e,{...r,jsCommitHash:(0,E.Qr)()})}}else if(_.Rz.matches(n)){let r=e.getState().selectedView;r?.view==="search"&&(a.Ay.replace((0,I.Np)(D,r),{...r,jsCommitHash:(0,E.Qr)()}),(0,E.OR)(D,r))}else u.Oe.matches(n)?(0,g.uE)("File Browser Sidebar Clicked",e.getState(),{clickedResourceType:n.payload.clickedResourceType,resourceIdOrKey:n.payload.resourceIdOrKey}):0===L&&(L=setTimeout(function(){L=0,null===e.getState().selectedView&&e.dispatch(u.$T({view:"recentsAndSharing"}))},0));return n}},731078:(e,r,n)=>{n.d(r,{Pf:()=>o,ck:()=>a,hv:()=>i});var a=(e=>(e[e.CURRENT_USER=0]="CURRENT_USER",e[e.TEAM=1]="TEAM",e[e.ORG=2]="ORG",e[e.WORKSPACE=3]="WORKSPACE",e))(a||{}),i=(e=>(e[e.INIT=0]="INIT",e[e.POSITIONING=1]="POSITIONING",e[e.UPLOADING=2]="UPLOADING",e))(i||{}),o=(e=>(e[e.SMALL=120]="SMALL",e[e.LARGE=500]="LARGE",e))(o||{})},288300:(e,r,n)=>{n.d(r,{MM:()=>s,Rt:()=>o,Vq:()=>l});var a=n(330654),i=n(867795),o=(e=>(e.ALL="All",e.STICKERS_AND_COMPONENTS="Stickers",e.TEMPLATES="Templates",e.TEAM_TEMPLATES="TeamTemplates",e.WIDGETS="Widgets",e.PLUGINS="Plugins",e.MORE="More",e.ORG_FACE_STAMPS="OrgFaceStamps",e))(o||{});let s=a.enum(["universal-insert-figjam-all","universal-insert-figjam-all-use-case","universal-insert-figjam-templates","universal-insert-figjam-stickers","universal-insert-figjam-stickers-compact-view","universal-insert-figjam-widgets","universal-insert-figjam-plugins","universal-insert-figjam-more","universal-insert-figjam-collage","universal-insert-figjam-all-whiteboard-tools"]);function l(e){switch(e){case i.p.ALL:return"universal-insert-figjam-all";case i.p.TEMPLATES:return"universal-insert-figjam-templates";case i.p.STICKERS_AND_COMPONENTS:return"universal-insert-figjam-stickers";case i.p.WIDGETS:return"universal-insert-figjam-widgets";case i.p.PLUGINS:return"universal-insert-figjam-plugins";case i.p.MORE:return"universal-insert-figjam-more";case i.p.RECENTS_COLLAGE:return"universal-insert-figjam-collage";default:throw Error("Unhandled modal tab in convertModalTabToTrackingSource")}}},179536:(e,r,n)=>{n.d(r,{_V:()=>o,b4:()=>i,kM:()=>a});var a=(e=>(e[e.Text=0]="Text",e[e.FrameOrGroup=1]="FrameOrGroup",e[e.Component=2]="Component",e[e.Instance=3]="Instance",e[e.Image=4]="Image",e[e.Shape=5]="Shape",e[e.Other=6]="Other",e[e.MatchCase=7]="MatchCase",e[e.WholeWords=8]="WholeWords",e))(a||{});let i=[0,1,2,3,4,5,6],o=[7,8]},694241:(e,r,n)=>{n.d(r,{Yv:()=>i,fJ:()=>a});let a="f195f195-f195-f195-f195-f195f195f195";var i=(e=>(e.DEFAULT="DEFAULT",e.CUSTOM="CUSTOM",e))(i||{})},555328:(e,r,n)=>{n.d(r,{I0:()=>y,KS:()=>p,PM:()=>T,Qv:()=>_,U:()=>b,Ug:()=>m,aL:()=>c,bD:()=>s,cS:()=>g,dj:()=>A,hE:()=>l,m3:()=>I,po:()=>w,vt:()=>u,xQ:()=>E,zF:()=>v});var a=n(330654),i=n(440535),o=n(178787),s=(e=>(e.HUB_FILE="hub_file",e.PLUGIN="plugin",e.WIDGET="widget",e.COMMENT="comment",e))(s||{}),l=(e=>(e.SUBSCRIPTION="subscription",e.ONE_TIME="one_time",e))(l||{}),c=(e=>(e.DETAIL="detail",e.INSERTS="inserts",e.QUICK_ACTIONS="quick_actions",e.PLUGIN_ROW="plugin_row",e.REDESIGNED_PLUGIN_ROW="redesigned_plugin_row",e.SEARCH="search",e))(c||{}),d=(e=>(e[e.NO_USER=0]="NO_USER",e[e.NO_PROFILE=1]="NO_PROFILE",e))(d||{}),u=(e=>(e.HUB_FILE="hub_file",e.PLUGIN="plugin",e.WIDGET="widget",e))(u||{}),m=(e=>(e.HUB_FILE="hub_file",e.PLUGIN="plugin",e.WIDGET="widget",e.PROFILE="profile",e))(m||{});let p=i.iG.extend({author:a.ignore(),parent_id:a.string().nullable(),reply_count:a.number(),last_replied_at:a.string().nullable(),resource_version_id:a.string(),message_meta:a.array(a.ignore()),rating_value:a.number().optional()});a.object({plugin:a.ignore().nullish(),plugin_install:a.ignore().nullish(),whitelisted_plugin:a.ignore().nullish(),hub_file:a.ignore().nullish(),profile:a.ignore().nullish(),community_comment:a.ignore().nullish(),widget:a.ignore().nullish(),community_resource_payment:a.ignore().nullish()});var h=(e=>(e[e.SHOW_404=0]="SHOW_404",e[e.REDIRECT_TO_INTERNAL_PROFILE=1]="REDIRECT_TO_INTERNAL_PROFILE",e))(h||{}),_=(e=>(e.ALL="ALL",e.ME="ME",e.RATINGS_REVIEWS="RATINGS_REVIEWS",e.COMMENTS="COMMENTS",e))(_||{}),g=(e=>(e.COMMUNITY_LANDING="community_landing",e.FILE_BROWSER_RECOMMENDED_TEMPLATES="file_browser_recommended_templates",e.FIGJAM_TEMPLATES_PICKER="figjam_templates_picker",e.BROWSE_PLUGINS_MODAL="browse_plugins_modal",e.BROWSE_WIDGETS_MODAL="browse_widgets_modal",e.CURATED_PAGE="curated_page",e.NA="na",e.CONFIG_VOTE="config_vote",e.COMMUNITY_WIDGETS_PAGE="community_widgets_page",e.FIGJAM_SIMPLE_TEMPLATES_PICKER="figjam_simple_templates_picker",e.FIGMA_INSERTS_NUX="figma_inserts_nux",e.FILE_BROWSER_TEMPLATES_BAR="file_browser_templates_bar",e.COMMUNITY_LIBRARIES_QUICKSTART="community_libraries_quickstart",e.FIGJAM_SECTION_PRESET_PICKER="figjam_section_preset_picker",e.CATEGORY_PAGE="category_page",e.PIPER_TEMPLATE_MODAL="piper_template_modal",e.SLIDES_FEATURED_CREATORS="slides_featured_creators",e))(g||{}),f=(e=>(e.PM="PM",e.DES="DES",e.ENG="ENG",e.MKT="MKT",e.UR="UR",e.OTH="OTH",e.ALL="ALL",e.STARTER="STARTER",e))(f||{});function E(e){return null!=e&&"is_widget"in e&&e.is_widget}function y(e){return null!=e&&"current_plugin_version_id"in e&&!e.is_widget}function b(e){return null!=e&&"client_meta"in e}function I(e){return!!e?.monetized_resource_metadata}function T(e){return!!e?.monetized_resource_metadata?.has_freemium_code}function v(e){return"third_party_m10n_status"in e&&e.third_party_m10n_status===o.PN.FLAGGED}var S=(e=>(e.POST_COMPOSER="POST_COMPOSER",e.NAVBAR="NAVBAR",e.RECENT_FILES_DIRECT_LINK="RECENT_FILES_DIRECT_LINK",e.IFRAME="IFRAME",e))(S||{}),w=(e=>(e.ACTIVE="active",e.INACTIVE="inactive",e))(w||{}),A=(e=>(e.PASTE="paste",e.DROP="drop",e.FILE_INPUT="file_input",e))(A||{}),N=(e=>(e[e.TRY_IT_OUT=0]="TRY_IT_OUT",e[e.OPEN=1]="OPEN",e))(N||{});a.object({id:a.string().nullish(),hubFileId:a.string().nullish(),pluginId:a.string().nullish(),widgetId:a.string().nullish(),oneStars:a.number(),twoStars:a.number(),threeStars:a.number(),fourStars:a.number(),fiveStars:a.number(),totalRatings:a.number(),avgRating:a.number().nullish(),createdAt:a.date().nullish(),updatedAt:a.date().nullish()})},112976:(e,r,n)=>{n.d(r,{w:()=>a});let a={displayText:"",disabled:!0,separator:!0}},239671:(e,r,n)=>{n.d(r,{Bu:()=>I,CO:()=>v,Nw:()=>u,YP:()=>f,co:()=>m,fB:()=>T,fP:()=>p,nT:()=>h,oD:()=>g,oQ:()=>s,sL:()=>E,sq:()=>l,wN:()=>b,xq:()=>_,y9:()=>y,yY:()=>d});var a=n(299321),i=n(776621),o=n(99506);let s="si"+function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-2-n)}).join("")}(45,149,163)+"s",l="co"+function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-36-n)}).join("")}(2,149)+"per",c=function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-61-n)}).join("")}(32,202,198)+"lu"+function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-5-n)}).join("")}(4,119,129,109,125,126,124)+"o"+function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-30-n)}).join("")}(39,179);function d(e){return 1===e||7===e}function u(e){return 2===e||d(e)}function m(e){return 4===e||u(e)}function p(e,r){switch(e){case 1:case 7:case 3:return r===o._Y.DESIGN;case 2:return r===o._Y.WHITEBOARD;case 4:return r===o._Y.SLIDES;case 5:return r===o._Y.SITES;case 6:return r===o._Y.COOPER;default:return(0,i.x1)("editorType","Unknown editor type",{editorType:e}),!1}}var h=(e=>(e[e.Design=1]="Design",e[e.Whiteboard=2]="Whiteboard",e[e.DevHandoff=3]="DevHandoff",e[e.Slides=4]="Slides",e[e.Sites=5]="Sites",e[e.Cooper=6]="Cooper",e[e.Illustration=7]="Illustration",e))(h||{});function _(e){switch(e){case 1:return a._YF.DESIGN;case 2:return a._YF.WHITEBOARD;case 3:return a._YF.DEV_HANDOFF;case 4:return a._YF.SLIDES;case 5:return a._YF.SITES;case 6:return a._YF.COOPER;case 7:return a._YF.ILLUSTRATION;default:return(0,i.x1)("editorType","Unknown editor type",{editorType:e}),a._YF.DESIGN}}function g(e){switch(e){case 2:return o._Y.WHITEBOARD;case 4:return o._Y.SLIDES;case 5:return o._Y.SITES;case 3:case 1:case 7:return o._Y.DESIGN;case 6:return o._Y.COOPER;default:return(0,i.x1)("editorType","Unknown editor type",{editorType:e}),o._Y.DESIGN}}function f(e){switch(e){case 2:return"whiteboard";case 4:return"slides";case 5:return"sites";case 3:return"dev_handoff";default:return"design"}}function E(e){if(null==e)return null;switch(e){case o._Y.DESIGN:return 1;case o._Y.WHITEBOARD:return 2;case o._Y.SLIDES:return 4;case o._Y.SITES:return 5;case o._Y.COOPER:return 6}}function y(e){if(null==e)return null;switch(e){case o._Y.DESIGN:return"DESIGN";case o._Y.WHITEBOARD:return"WHITEBOARD";case o._Y.SLIDES:return"SLIDES";case o._Y.SITES:return"SITES";case o._Y.COOPER:return"COOPER"}}function b(e){if(null==e)return 1;switch(e){case o._Y.DESIGN:return 1;case o._Y.WHITEBOARD:return 2;case o._Y.SLIDES:return 4;case o._Y.SITES:return 5;case o._Y.COOPER:return 6}}function I(e){switch(e){case 1:return"design";case 2:return"whiteboard";case 3:return"dev_handoff";case 4:return"slides";case 5:return s;case 6:return l;case 7:return c;default:return e}}function T(e){switch(e){case a._YF.DESIGN:return 1;case a._YF.WHITEBOARD:return 2;case a._YF.DEV_HANDOFF:return 3;case a._YF.SLIDES:return 4;case a._YF.SITES:return 5;case a._YF.COOPER:return 6;case a._YF.ILLUSTRATION:return 7;default:return(0,i.x1)("editorType","Unknown editor type",{editorType:e}),1}}function v(e){switch(e){case 1:return"design";case 2:return"whiteboard";case 3:return"dev_handoff";case 4:return"slides";case 5:return s;case 6:return l;case 7:return c;default:return(0,i.x1)("editorType","Unknown editor type",{editorType:e}),""}}},454351:(e,r,n)=>{n.d(r,{A:()=>a,b:()=>i});var a=(e=>(e.FILE="file",e.REPO="repo",e.FILE_IMPORT="file_import",e))(a||{}),i=(e=>(e[e.FOLDER_ROW=0]="FOLDER_ROW",e[e.NEW_FOLDER_TEAM=1]="NEW_FOLDER_TEAM",e))(i||{})},945020:(e,r,n)=>{n.d(r,{M8:()=>c,UE:()=>_,Ws:()=>h,ai:()=>l,av:()=>f,f6:()=>s,kF:()=>d,lF:()=>g,zy:()=>E});var a=n(711525),i=n(330654),o=n(376485),s=(e=>(e.FILE_BROWSER_SIDEBAR_RECENTS="file_browser_sidebar_recents",e.FILE_BROWSER_SIDEBAR_DRAFTS="file_browser_sidebar_drafts",e.FILE_BROWSER_SIDEBAR_FOLDER="file_browser_sidebar_folder",e.FILE_BROWSER_THUMBNAILS_RECENTS="file_browser_thumbnails_recents",e.FILE_BROWSER_TOOLBAR_RECENTS="file_browser_toolbar_recents",e.FILE_BROWSER_TOOLBAR_FOLDER="file_browser_toolbar_folder",e.FILE_BROWSER_TOOLBAR_DRAFTS="file_browser_toolbar_drafts",e.FILE_BROWSER_TOPBAR_DELETED="file_browser_topbar_deleted",e.FILE_BROWSER_TOPBAR_RECENTS="file_browser_topbar_recents",e.FILE_BROWSER_TOPBAR_FOLDER="file_browser_topbar_folder",e.FILE_BROWSER_TOPBAR_DRAFTS="file_browser_topbar_drafts",e.FILE_BROWSER_TOPBAR_OFFLINE="file_browser_topbar_offline",e.FILE_BROWSER_EMPTY_FOLDER="file_browser_empty_folder",e.FILE_BROWSER_FEED="file_browser_feed",e.FILE_BROWSER_FOLDER_CONTEXT_MENU="file_browser_folder_context_menu",e.FILE_BROWSER_FOLDER_EMPTY_TILE="file_browser_folder_empty_tile",e.FILE_BROWSER_STARTER_TEAM_OVERVIEW="file_browser_starter_team_overview",e.FILE_BROWSER_TEAM_FILE_LIMIT_PAYWALL="file_browser_team_file_limit_paywall",e.FILE_BROWSER_TEAM_FOLDER_BUTTONS="file_browser_team_folder_buttons",e.FILE_BROWSER_NUX="file_browser_nux",e.FILE_BROWSER_ONBOARDING="file_browser_onboarding",e.FILE_BROWSER_TEMPLATES_BAR="file_browser_templates_bar",e.CURSOR_BOT_END_MODAL="cursor_bot_end_modal",e.DESIGN_TOOLTIPS_PLUS_OUTRO_MODAL="design_tooltips_plus_outro_modal",e.DESIGN_VIDEO_OUTRO_MODAL="design_video_outro_modal",e.FIGJAM_NUDGE_MODAL="figjam_nudge_modal",e.DESKTOP_NEW_TAB_BUTTON="desktop_new_tab_button",e.FIGJAM_WHATS_NEW_MODAL="figjam_whats_new_modal",e.FIGJAM_AI_ONBOARDING_MODAL="figjam_ai_onboarding_announcement",e.OFFLINE_NOTIFICATION="offline_notification",e.COMMUNITY_COLLECTIONS_PAGE="community_collections_page",e.FIGJAM_MAKE_SOMETHING_POPUP="figjam_make_something_popup",e.CONFIG_24_FEATURE_ANNOUNCEMENT_CAROUSEL="config_24_feature_announcement_carousel",e.DESIGN_TO_SLIDES_ENTRYPOINT="design_to_slides_entrypoint",e.BOARD_TO_DECK_FILE_MENU="figjam-file-editor-menu",e.BOARD_TO_DECK_SHARE_MODAL="figjam-share-modal",e.BOARD_TO_DECK_SELECTION="figjam-selection-inline-menu",e.BOARD_TO_DECK_PAGES_CONTEXT_MENU="figjam-page-context-menu",e))(s||{}),l=(e=>(e.NEW_TAB="new_tab",e.SAME_TAB="same_tab",e))(l||{});let c="multiplayer_user_state_change";var d=(e=>(e[e.NONE=0]="NONE",e[e.FOR_OPEN=1]="FOR_OPEN",e[e.FOR_MENU=2]="FOR_MENU",e))(d||{});let u=i.object({extensionId:i.string(),extensionType:i.enum(["plugin","widget"]),currentExtensionVersionId:i.string().nullable(),localFileId:i.number().nullable()}),m=i.object({displayName:i.string(),runPluginArgs:o.Ps.optional(),extensionInfo:u.optional().nullable()}),p=i.object({parameterValues:i.record(i.string()).optional().nullable()});function h(e){return e?{id:e.id,name:e.name,org_id:e.orgId,img_url:e.imgUrl??void 0,subscription:e.subscription,restrictions_list:e.restrictionsList,student_team_at:e.studentTeamAt?e.studentTeamAt.toString():null,grace_period_end:e.gracePeriodEnd?e.gracePeriodEnd.toString():null,deleted_at:e.deletedAt?e.deletedAt.toString():null,created_at:e.createdAt.toString(),student_team:!!e.studentTeamAt}:null}function _(e,r){let n={key:e.key,isAbandonedDraftFile:{status:a.tT.Loaded,data:!1},teamId:e.team_id,folderId:e.folder_id,clientMeta:e.client_meta,parentOrgId:e.parent_org_id||null,fileRepoId:e.file_repo_id,sourceFileKey:e.source_file_key,linkAccess:e.link_access,hasFileLinkPassword:e.has_file_link_password,hasProtoLinkPassword:e.has_proto_link_password,updatedAt:new Date(e.updated_at||e.created_at),trashedAt:e.trashed_at?new Date(e.trashed_at):null,deletedAt:e.deleted_at?new Date(e.deleted_at):null,creatorId:e.creator_id,createdAt:new Date(e.created_at),name:e.name,_name:e.name,editorType:e.editor_type||"design",orgBrowsable:e.org_browsable||null,thumbnailGuid:e.thumbnail_guid||null,sourceCheckpointId:e.source_checkpoint_id||null,license:e.license,isTeamTemplate:!!e.is_team_template,figFileLinks:[],isFavorited:!!e?.is_favorited,isTryFile:e.is_try_file,votingSessions:null,template:null,canPublishTemplate:!1,viewerExportRestricted:!!e.viewer_export_restricted,publishedHubFile:null,ownerRole:null,trackTags:{isTemplate:e.is_template||null},libraryKey:e.library_key??""};if(!r)return n;let{team:i,folder:o,repo:s,sourceFile:l,can_delete:c,can_edit:d,can_edit_canvas:u,can_access_dev_mode_entry_point:m,can_access_full_dev_mode:p,can_manage:h,can_view:_,can_export:g,hasEduGracePeriod:f,org:E,orgUser:y,teamUser:b}=r;return{...n,team:function(e,r=!1){return e?{id:e.id,name:e.name,orgId:e.org_id,subscription:e.subscription,imgUrl:e.img_url||null,restrictionsList:e.restrictions_list||[],studentTeamAt:e.student_team_at?new Date(e.student_team_at):e.student_team?new Date:null,trialPeriodEnd:null,gracePeriodEnd:e.grace_period_end?new Date(e.grace_period_end):null,deletedAt:e.deleted_at?new Date(e.deleted_at):null,createdAt:new Date(e.created_at),eduGracePeriod:{id:"",isValid:r},licenseGroupId:e.license_group_id,licenseGroup:e.license_group,workspaceId:e.workspace_id,orgAccess:e.org_access,studentTeamState:e.student_team_state}:null}(i,f),project:o?function(e,r=!0,n=!0){return{id:e.id,orgId:e.org_id||null,teamId:e.team_id,path:e.path,inviteOnlyAt:e.is_invite_only?new Date:null,viewOnlyAt:e.is_view_only?new Date:null,trashedAt:e.trashed_at?new Date(e.trashed_at):null,subscription:e.is_subscribed?{}:null,description:e.description,canEdit:r,canRename:n,canCreateDesignFile:e.canCreateDesignFile,canCreateFigjamFile:e.canCreateFigjamFile,canCreateSlidesFile:e.canCreateSlidesFile}}(o):null,repo:s?{id:s.id,name:s.name,folderId:s.folder_id,teamId:s.team_id,defaultFileKey:s.default_file_key,canEdit:!0}:null,sourceFile:l?{key:l.key,name:l.name,fileRepoId:l.file_repo_id,canManage:l.can_manage,canView:l.can_view}:null,canDelete:c,canEdit:d,canEditCanvas:u,canAccessDevModeEntryPoint:m,canAccessFullDevMode:p,canManage:h,canView:_,canExport:g,org:E?{figjamDisabledAt:E.figjam_disabled_at,inviteWhitelist:{guestInviteSetting:E.invite_whitelist_guest_invite_setting},name:E.name,isSlidesDisabled:(0,a.Wk)(!!E.is_slides_disabled)}:null,currentPartialOrgUser:y?{draftsFolderId:y.drafts_folder_id,designPaidStatus:y.design_paid_status,whiteboardPaidStatus:y.whiteboard_paid_status,accountType:y.design_paid_status,designAccountTypeRequest:null,whiteboardAccountTypeRequest:null,devModeAccountTypeRequest:null}:null,currentTeamUser:b?{whiteboardPaidStatus:b.whiteboard_paid_status,designPaidStatus:b.design_paid_status,designAccountTypeRequest:null,whiteboardAccountTypeRequest:null}:null}}m.omit({runPluginArgs:!0}).extend({selectedRunPluginArgs:p.optional().nullable()});var g=(e=>(e[e.BAR=0]="BAR",e[e.SPINNER=1]="SPINNER",e))(g||{});class f{constructor(e,r,n){this.tabCloseText=e,this.unsaved=r,this.error=n,this.hasUnsavedChanges=!1,this.hasUnsavedChanges=r.hasAutosaveChanges||r.hasMultiplayerChanges}equals(e){return e&&this.tabCloseText===e.tabCloseText&&this.unsaved.hasAutosaveChanges===e.unsaved.hasAutosaveChanges&&this.unsaved.hasMultiplayerChanges===e.unsaved.hasMultiplayerChanges&&this.error===e.error}}var E=(e=>(e[e.CUT=0]="CUT",e[e.COPY=1]="COPY",e[e.PASTE=2]="PASTE",e))(E||{})},813408:(e,r,n)=>{n.d(r,{I7:()=>g,aP:()=>l,k2:()=>s,kM:()=>f,o1:()=>d,xK:()=>h});var a=n(330654),i=n(882225),o=n(583894),s=(e=>(e.RESOURCE_PAGE="resource_page",e.EDITOR="editor",e.UNIVERSAL_POSTING="universal_posting",e.ADMIN="admin",e))(s||{}),l=(e=>(e[e.EDIT=0]="EDIT",e[e.UPLOADING=1]="UPLOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE",e))(l||{});let c=a.object({"500_500":a.string().optional(),"120_120":a.string().optional()});var d=(e=>(e.USER="user",e.TEAM="team",e.ORG="org",e))(d||{});let u=a.object({email:a.string().optional(),user_id:a.string(),is_primary_user:a.boolean(),can_sell_on_community:a.boolean().optional()}),m=i.n.and(a.object({id:a.string(),name:a.string(),profile_handle:a.string(),img_url:a.coerce.string().optional(),img_urls:c,current_user_is_following:a.coerce.boolean(),current_user_is_followed:a.coerce.boolean(),is_restricted_by_current_user:a.coerce.boolean(),entity_type:a.nativeEnum(d),primary_user_id:a.string().nullable(),location:a.string().nullable(),follower_count:a.number(),following_count:a.number(),isPending:a.boolean().optional(),associated_users:a.array(u).optional(),has_published:a.boolean().optional(),description:a.string().nullish()})),p=a.object({accepted:a.array(m),pending:a.array(m).optional()}),h=a.object({creator:o.aw,publisher:m,community_publishers:p}),_=o.aw.pick({id:!0,email:!0}),g=a.object({accepted:a.array(o.aw),pending:a.array(_).optional()});var f=(e=>(e.OWNER="owner",e.PUBLISHER="publisher",e.NONE="none",e))(f||{})},709290:(e,r,n)=>{n.d(r,{QT:()=>o});var a=n(330654);n(304769);var i=(e=>(e.COLLABORATOR="collaborator",e.DEVELOPER="developer",e.EXPERT="expert",e.LIMITED="limited",e))(i||{});let o=a.nativeEnum(i)},279702:(e,r,n)=>{n.d(r,{Ae:()=>p,Gf:()=>l,PW:()=>u,gK:()=>h,w3:()=>_,zk:()=>d});var a=n(67151),i=n(494387),o=n(299321),s=n(880934);let l={isInitialized:!1,hasMissingFonts:!1,activeUserAction:o.QOV.DEFAULT,currentTool:o.NLJ.SELECT,currentStampToolName:null,activeCanvasEditModeType:o.m1T.DESIGN_LAYOUT,showUi:!0,showKeyboardShortcuts:!1,topLevelMode:o.lyf.LAYOUT,urlNodeId:"-1:-1",hideMultiplayerCursors:!1,showArtboardOutline:!1,useRealmsForPluginDev:!1,showComments:!0,currentSelectedGradientStop:{type:o.vRS.NONE,index:-1},currentSelectedProperty:{type:o.rrT.NONE,indices:[]},isUserPresent:!1,showTogglePrototypeModeButton:!1,forcePublishFlattened:!1,prototypeCanvasUiVisible:!1,showTooltips:!1,prototypeBackgroundPickerOpen:!1,pastableStyleCount:0,statePropertyToFocus:"",hoveredNode:"",multiplayerSessionState:o.kul.UNJOINED,isReadOnly:!0,isSceneReadOnly:!0,hyperlinkLocation:null,onCanvasNameEditorInfo:{mode:o.nzw.NONE,x:0,y:0,angle:0,padding:{x:0,y:0},margin:{x:0,y:0},cornerRadius:0,fontSize:11,measurementId:"",initMeasurementText:"",isCentered:!1,invertTextPosition:!1},votingSessionInfo:{sessionId:"",votingStage:o.W8Y.NO_SESSION,userVoteLimit:0,votedNodes:[],userIdToVoteStampIds:{}},loadingEmbeds:[],temporarilyExpandedInstanceLayers:[],keyboardShortcuts:{},selectedInteractions:[],hoveredInteractions:[],currentPage:"0:1",pagesList:[],devHandoffCodeLanguage:{type:"first-party",id:"WEB"},devHandoffPreferences:{codeExtensionPreferences:{}},branchingSceneState:o.aTl.ATTACHED_FILE_TIP,lastBranchingStagingAction:o.YIO.NONE,themePreference:null,sceneGeneration:0,spellCheckSuggestions:{figma:{suggestions:[],rangeText:"",rangeStart:0,rangeEnd:0,noSuggestionsFound:!1}},onCanvasPillInfo:null,activeTextReviewPlugin:null,hotReloadPluginDev:!0,useLocalRelatedLinkPlugin:!1};var c=(e=>(e[e.MIXED_OR_NO_SYMBOLS=0]="MIXED_OR_NO_SYMBOLS",e[e.SYMBOLS_ONLY=1]="SYMBOLS_ONLY",e))(c||{}),d=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.YES_WITHOUT_TRACKING_AS_EDIT=2]="YES_WITHOUT_TRACKING_AS_EDIT",e[e.YES_FORCE_TRACKING_AS_EDIT=3]="YES_FORCE_TRACKING_AS_EDIT",e[e.NO_BUT_TRACK_AS_EDIT=4]="NO_BUT_TRACK_AS_EDIT",e))(d||{}),u=(e=>(e[e.NOT_ASSET=0]="NOT_ASSET",e[e.ASSET_ICON=1]="ASSET_ICON",e[e.ASSET_IMAGE=2]="ASSET_IMAGE",e[e.ASSET_GIF=4]="ASSET_GIF",e[e.ASSET_VIDEO=8]="ASSET_VIDEO",e[e.ASSET_COMPONENT=16]="ASSET_COMPONENT",e))(u||{});function m(e){switch(e){case o.rXF.BOOLEAN:return"BOOLEAN";case o.rXF.COLOR:return"COLOR";case o.rXF.FLOAT:return"FLOAT";case o.rXF.STRING:return"STRING";case o.rXF.SYMBOL_ID:return"SYMBOL_ID";case o.rXF.MAP:return"MAP";case o.rXF.FONT_STYLE:return"FONT_STYLE";case o.rXF.TEXT_DATA:return"TEXT_DATA";default:(0,a.xb)(e)}}function p(e){return e.map(e=>o.j0r[e])}function h(e){return e?e.map(e=>o.j0r[e]):[o.j0r.ALL_SCOPES]}function _(e){let r={entries:[]};return Object.keys(e).forEach(n=>{let a=e[n];if(a){if(a.isMixed)return;{let e=function(e){function r(e){if(e.type!==o.Z_n.ALIAS)return null;let r=i.sD.fromString(e.value);return r?i.sD.toKiwi(r):null}switch(e.type){case o.Z_n.BOOLEAN:return{dataType:"BOOLEAN",resolvedDataType:"BOOLEAN",value:{boolValue:e.value}};case o.Z_n.FLOAT:return{dataType:"FLOAT",resolvedDataType:"FLOAT",value:{floatValue:e.value}};case o.Z_n.COLOR:return{dataType:"COLOR",resolvedDataType:"COLOR",value:{colorValue:e.value}};case o.Z_n.STRING:return{dataType:"STRING",resolvedDataType:"STRING",value:{textValue:e.value}};case o.Z_n.ALIAS:{let n=r(e);if(!n)return null;return{dataType:"ALIAS",resolvedDataType:m(e.resolvedType),value:{alias:n}}}case o.Z_n.NODE_FIELD_ALIAS:{let r=[];for(let n of e.value.stablePathToNode){let e=(0,s.sH)(n);if(!e)return null;r.push(e)}let n=e.value.nodeField,a=e.value.indexOrKey;if(!r||!n||!a)return null;if("COMPONENT_PROP_ASSIGNMENTS"===n)return{dataType:"NODE_FIELD_ALIAS",resolvedDataType:m(e.resolvedType),value:{nodeFieldAliasValue:{stablePathToNode:{guids:r},nodeField:n,indexOrKey:a}}};return null}case o.Z_n.FONT_STYLE:{let n=e.value.asFloat&&r(e.value.asFloat)?{resolvedDataType:"FLOAT",fontStyleKey:"asFloat",variableId:r(e.value.asFloat)}:e.value.asString&&r(e.value.asString)?{resolvedDataType:"STRING",fontStyleKey:"asString",variableId:r(e.value.asString)}:null;if(!n)return null;return{dataType:"FONT_STYLE",resolvedDataType:"FONT_STYLE",value:{fontStyleValue:{[n.fontStyleKey]:{dataType:"ALIAS",resolvedDataType:n.resolvedDataType,value:{alias:n.variableId}}}}}}case o.Z_n.MAP:case o.Z_n.EXPRESSION:case o.Z_n.SYMBOL_ID:case o.Z_n.TEXT_DATA:return null}}(a);e&&r.entries?.push({variableData:e,variableField:n})}}else r.entries.push({variableField:n})}),r}},172981:(e,r,n)=>{n.d(r,{O:()=>s});var a=n(67151),i=n(939863),o=n(155367);function s(e,r){switch(e){case o.J7.ACTIVITY:return(0,i.t)("org_admin_tab.activity");case o.J7.DASHBOARD:return(0,i.t)("org_admin_tab.dashboard");case o.J7.WORKSPACES:return(0,i.t)("org_admin_tab.workspaces");case o.J7.TEAMS:return(0,i.t)("org_admin_tab.teams");case o.J7.MEMBERS:return(0,i.t)("org_admin_tab.members");case o.J7.BILLING:switch(r){case o.G_.OVERVIEW:return(0,i.t)("org_admin_tab.overview");case o.G_.BILLING_GROUPS:return(0,i.t)("org_admin_tab.billing_groups");case o.G_.INVOICES:return(0,i.t)("org_admin_tab.invoices");default:return(0,i.t)("org_admin_tab.billing")}case o.J7.RESOURCES:switch(r){case o._d.LIBRARIES:return(0,i.t)("resources_tab.libraries");case o._d.SHARED_FONTS:return(0,i.t)("resources_tab.fonts");case o._d.APPROVED_PLUGINS:return(0,i.t)("resources_tab.approved_plugins");case o._d.APPROVED_WIDGETS:return(0,i.t)("resources_tab.approved_widgets");default:return(0,i.t)("org_admin_tab.resources")}case o.J7.SETTINGS:return(0,i.t)("org_admin_tab.settings");case o.J7.CONTENT:switch(r){case o.SN.WORKSPACES:return(0,i.t)("org_admin_tab.workspaces");case o.SN.TEAMS:return(0,i.t)("org_admin_tab.teams");case o.SN.ABANDONED_DRAFTS:return(0,i.t)("org_admin_tab.abandoned_drafts");case o.SN.CONNECTED_PROJECTS:return(0,i.t)("org_admin_tab.connected_projects");default:return(0,i.t)("org_admin_tab.content")}default:(0,a.xb)(e)}}},155367:(e,r,n)=>{n.d(r,{G_:()=>s,J7:()=>a,P9:()=>l,SN:()=>i,_d:()=>o});var a=(e=>(e.DASHBOARD="",e.WORKSPACES="workspaces",e.TEAMS="teams",e.MEMBERS="members",e.CONTENT="content",e.ACTIVITY="activity",e.BILLING="billing",e.RESOURCES="resources",e.SETTINGS="settings",e))(a||{}),i=(e=>(e.WORKSPACES="workspaces",e.TEAMS="teams",e.ABANDONED_DRAFTS="abandoned-drafts",e.CONNECTED_PROJECTS="connected-projects",e))(i||{}),o=(e=>(e.LIBRARIES="",e.SHARED_FONTS="fonts",e.APPROVED_PLUGINS="plugins",e.APPROVED_WIDGETS="widgets",e))(o||{}),s=(e=>(e.OVERVIEW="overview",e.INVOICES="invoices",e.BILLING_GROUPS="billing-groups",e))(s||{}),l=(e=>(e.OVERVIEW="overview",e.SEAT_REQUESTS="seat-requests",e))(l||{})},916525:(e,r,n)=>{n.d(r,{B9:()=>T,Eg:()=>f,GX:()=>p,J0:()=>m,LU:()=>l,Od:()=>s,Oo:()=>u,SL:()=>g,U9:()=>y,ZL:()=>I,cC:()=>h,dy:()=>o,e5:()=>d,jN:()=>w,oU:()=>c,qY:()=>S,rk:()=>A});var a=n(720647),i=n(99506),o=(e=>(e.ASC="asc",e.DESC="desc",e))(o||{}),s=(e=>(e.NAME="name",e.LAST_ACTIVE="last_active",e.LAST_DESIGN_ACTIVE="last_design_active",e.LAST_WHITEBOARD_ACTIVE="last_whiteboard_active",e.LAST_EDIT="last_edit",e.LAST_DESIGN_EDIT="last_design_edit",e.LAST_WHITEBOARD_EDIT="last_whiteboard_edit",e.DESIGN_ROLE="design_role",e.DESIGN_UPGRADE_DATE="design_upgrade_date",e.WHITEBOARD_ROLE="whiteboard_role",e.WHITEBOARD_UPGRADE_DATE="whiteboard_upgrade_date",e.LICENSE_GROUP="license_group",e.WORKSPACE="workspace",e.SCIM_DATA="scim_data",e.DESIGN_UPGRADE_REASON="design_upgrade_reason",e.WHITEBOARD_UPGRADE_REASON="whiteboard_upgrade_reason",e.BILLABLE_PRODUCT_SEAT="seat",e.SEARCH_SCORE="score",e.DEV_MODE_ROLE="dev_mode_role",e.DEV_MODE_UPGRADE_DATE="dev_mode_upgrade_date",e))(s||{});let l=["last_active","last_design_active","last_whiteboard_active","last_edit","last_design_edit","last_whiteboard_edit","design_upgrade_date","whiteboard_upgrade_date","dev_mode_upgrade_date"],c={columnName:"name",isReversed:!1};var d=(e=>(e.productFilter="productFilter",e.licenseGroupFilter="licenseGroupFilter",e.workspaceFilter="workspaceFilter",e.idpGroupFilter="idpGroupFilter",e.permissionFilter="permissionFilter",e.roleFilter="roleFilter",e.lastEditFilter="lastEditFilter",e.newEditorFilter="newEditorFilter",e.seatTypeFilter="seatTypeFilter",e.seatChangesFilter="seatChangesFilter",e))(d||{}),u=(e=>(e.product="product",e.workspace="workspace",e.billingGroup="billingGroup",e.idpGroup="idpGroup",e.accountType="accountType",e.role="role",e.lastEdit="lastEdit",e.newEditor="newEditor",e.seatType="seatType",e.seatChanges="seatChanges",e))(u||{});let m={productFilter:null,licenseGroupFilter:null,workspaceFilter:null,idpGroupFilter:null,permissionFilter:null,roleFilter:null,lastEditFilter:null,newEditorFilter:!1,seatTypeFilter:null,seatChangesFilter:null},p={product:"productFilter",role:"roleFilter",billingGroup:"licenseGroupFilter",workspace:"workspaceFilter",idpGroup:"idpGroupFilter",accountType:"permissionFilter",lastEdit:"lastEditFilter",newEditor:"newEditorFilter",seatType:"seatTypeFilter",seatChanges:"seatChangesFilter"},h={productFilter:"product",licenseGroupFilter:"billingGroup",workspaceFilter:"workspace",idpGroupFilter:"idpGroup",permissionFilter:"accountType",roleFilter:"role",lastEditFilter:"lastEdit",newEditorFilter:"newEditor",seatTypeFilter:"seatType",seatChangesFilter:"seatChanges"},_={FIGMA:"figma",FIGJAM:"figjam",DEV_MODE:"dev_mode"},g={[_.FIGMA]:a.Te.DESIGN,[_.FIGJAM]:a.Te.WHITEBOARD,[_.DEV_MODE]:a.Te.DEV_MODE},f={[a.Te.DESIGN]:_.FIGMA,[a.Te.WHITEBOARD]:_.FIGJAM,[a.Te.DEV_MODE]:_.DEV_MODE},E={IDP:"provisional",UNVERIFIED:"unverified"},y={[i._D.ADMIN]:i._D.ADMIN,[i._D.GUEST]:i._D.GUEST,[i._D.MEMBER]:i._D.MEMBER,[E.IDP]:E.IDP,[E.UNVERIFIED]:E.UNVERIFIED};var b=(e=>(e.VIEWER="starter",e.FULL="full",e.VIEWER_RESTRICTED="restricted",e.DEV_MODE_ONLY="dev_mode_only",e))(b||{});let I=["starter","full","restricted"],T=["full","dev_mode_only","restricted"],v={EDITOR:"editor",VIEWER:"viewer",VIEWER_RESTRICTED:"viewer-restricted",DEV_MODE_ONLY:"dev-mode-only"},S={[v.EDITOR]:"full",[v.VIEWER]:"starter",[v.VIEWER_RESTRICTED]:"restricted",[v.DEV_MODE_ONLY]:"dev_mode_only"},w={full:v.EDITOR,starter:v.VIEWER,restricted:v.VIEWER_RESTRICTED,dev_mode_only:v.DEV_MODE_ONLY},A={"3mo":"3mo","6mo":"6mo","1yr":"1yr"}},833030:(e,r,n)=>{n.d(r,{Kq:()=>a,ig:()=>i}),n(99506);var a=(e=>(e.NAME="name",e.OWNER="owner_name",e.PROJECTS="projects",e.MEMBERS="member_count",e.WORKSPACE="workspace_name",e.ORG_ACCESS="org_access",e))(a||{}),i=(e=>(e.JOINED="JOINED",e.NOT_JOINED="NOT_JOINED",e))(i||{})},66037:(e,r,n)=>{n.d(r,{Ru:()=>I,WU:()=>T,Wd:()=>b,jh:()=>y,x0:()=>S});var a=n(67151),i=n(330654),o=n(304769),s=n(720647),l=n(99506),c=n(500615),d=n(709290),u=n(394046),m=n(447618),p=n(583894),h=n(269340),_=(e=>(e.SELF_SELECTED="self",e.SELF_SELECTED_NOT_LISTED="not listed",e.SELF_SELECTED_DONT_KNOW="don't know",e.SCIM_GROUP="scim_group",e.MOVED_BY_ADMIN="moved",e.AUTO_ASSIGNED="auto",e))(_||{});let g=i.nativeEnum(_),f=i.object({id:i.string(),license_group_id:i.string().nullable(),org_user_id:i.string(),assigned_at:i.string(),created_at:i.string(),actor_user_id:i.string().nullable(),update_reason:g,updated_at:i.string(),idp_group:u.m.nullable().optional(),idp_group_uuid:i.string().nullish()}),E=i.object({id:i.string(),license_group_id:i.string().nullable(),org_user_id:i.string(),created_at:i.string(),updated_at:i.string()});l.El.FULL,l.El.STARTER,l.El.RESTRICTED;var y=(e=>(e[e.GUEST=0]="GUEST",e[e.MEMBER=2]="MEMBER",e[e.ADMIN=3]="ADMIN",e))(y||{}),b=(e=>(e.ORG_USER="org_user",e.IDP_USER="idp_user",e.ORG_INVITE="org_invite",e))(b||{});let I=i.object({design_paid_status:l.cA,whiteboard_paid_status:l.cA,dev_mode_paid_status:l.cA,id:i.string(),org_id:i.string(),user_id:i.string(),user:p.aw,permission:l.B0,description:i.string().nullish(),drafts_folder_id:i.string(),created_at:i.string(),updated_at:i.string(),disabled_at:i.string().nullish(),account_type:i.string().optional(),account_type_changed_at:i.string().optional(),last_edit:i.string().nullish(),last_seen:i.string().nullish(),last_design_edit:i.union([i.string(),c.t]).nullish(),last_whiteboard_edit:i.union([i.string(),c.t]).nullish(),last_design_seen:i.union([i.string(),c.t]).nullish(),last_whiteboard_seen:i.union([i.string(),c.t]).nullish(),last_dev_mode_seen:i.union([i.string(),c.t]).nullish(),scim_account_type:i.string().nullish(),scim_whiteboard_paid_status:i.string().nullish(),scim_dev_mode_paid_status:i.string().nullish(),scim_is_admin:i.boolean().nullish(),scim_seat_type:d.QT.nullish(),user_state_changed_at:i.string().optional(),design_upgrade_reason:m.P.nullish(),whiteboard_upgrade_reason:m.P.nullish(),dev_mode_upgrade_reason:m.P.nullish(),scim_metadata:i.record(i.string().nullish()).nullish(),agreed_to_community_tos_at:i.string().nullish(),license_group_member:f.nullish(),license_group_admins:i.array(E).optional(),license_admin:i.boolean().optional(),is_email_validated:i.boolean().optional().nullable(),show_figjam_user_onboarding:i.boolean().nullable(),has_shown_figjam_admin_onboarding:i.boolean().nullable(),has_shown_figjam_admin_launch_onboarding:i.boolean().nullable(),ecc_upgrading_locked:i.boolean().nullish(),type:i.literal("org_user").default("org_user"),workspace_users:i.array(h.C).optional(),is_dev_mode_beta_user:i.boolean().optional(),active_seat_type:o.cD.nullish()}),T=I;function v(e,r){switch(r){case s.G_.DESIGN:return e.design_paid_status;case s.G_.FIGJAM:return e.whiteboard_paid_status;case s.G_.DEV_MODE:return e.dev_mode_paid_status;default:(0,a.xb)(r)}}function S(e,r){switch(r){case s.G_.DESIGN:case s.G_.FIGJAM:return v(e,r);case s.G_.DEV_MODE:return v(e,s.G_.DESIGN)===l.El.FULL?l.El.FULL:v(e,r);default:(0,a.xb)(r)}}s.G_.FIGJAM,s.G_.DESIGN,s.G_.DEV_MODE},802026:(e,r,n)=>{n.d(r,{CT:()=>T,Gv:()=>g,X1:()=>b,ZG:()=>p});var a=n(330654),i=n(99506),o=n(253609),s=n(798614),l=n(343279),c=n(222233),d=n(139961),u=(e=>(e.ANY="any",e.GOOGLE="google",e.SAML="saml",e))(u||{});let m=a.union([a.literal("AUTO"),a.literal("GOOD"),a.literal("DELINQUENT"),a.literal("SUSPENDED"),a.literal("DEACTIVATED")]),p={AUTO:"AUTO",GOOD:"GOOD",DELINQUENT:"DELINQUENT",SUSPENDED:"SUSPENDED",DEACTIVATED:"DEACTIVATED"};var h=(e=>(e.MANUAL="manual",e.DISABLED="disabled",e.QUARTERLY="quarterly",e.CHARGE_IMMEDIATELY="quarterly_auto_charge",e))(h||{});let _=a.nativeEnum(h);var g=(e=>(e.REQUIRE_APPROVAL="require_approval",e.BANNED="banned",e))(g||{});let f=a.nativeEnum(g);var E=(e=>(e.US="US",e.EU="EU",e))(E||{});let y=a.nativeEnum(E);a.object({name:a.string(),img_url:a.string().optional(),id:a.string()});var b=(e=>(e.Initial="Initial",e.ChoosePlan="ChoosePlan",e.AddCollaborators="AddCollaborators",e.PseudoCreateTeam="PseudoCreateTeam",e.CreateTeam="CreateTeam",e.TeamSelect="TeamSelect",e.SeatSelect="SeatSelect",e.Details="Details",e.Payment="Payment",e.Review="Review",e.Confirmation="Confirmation",e))(b||{}),I=(e=>(e.DEPROVISION="deprovision",e))(I||{}),T=(e=>(e.GUESTS="guests",e))(T||{});l.bV.extend({id:a.string(),name:a.string(),legal_name:a.string().optional(),domain_capture:a.boolean(),created_at:a.string().optional(),updated_at:a.string().optional(),deleted_at:a.string().optional(),img_url:a.string().optional(),handle:a.string().optional(),figjam_disabled_at:a.date().nullable(),realtime_token:a.string().optional(),standing:m,stripe_customer_id:a.string().optional(),invite_whitelist_enforced:a.boolean(),invite_whitelist_enforced_guests:a.boolean(),invite_whitelist_guest_invite_setting:f.nullable(),invite_whitelist_member_allowlist_enabled:a.boolean().nullable(),ip_ranges:a.array(a.string()),past_due_at:a.string().nullable(),plugins_whitelist_enforced:a.boolean(),widgets_whitelist_enforced:a.boolean(),plugin_requests_allowed:a.boolean(),widget_requests_allowed:a.boolean(),public_plugins_allowed:a.boolean(),voice_enabled:a.boolean().optional(),billing:_.nullable(),google_sso_only:a.boolean(),saml_sso_only:a.boolean(),locked_quantity_full_members:a.number().nullable(),locked_quantity_figjam_members:a.number().nullable(),featured_scim_metadata:i.tw.nullable(),community_profile_id:a.string().optional(),community_profile_handle:a.string().optional(),template_picker_disabled:a.boolean().optional(),experiment_eligible:a.boolean().optional(),bigma_enabled:a.boolean().optional(),bigma_enabled_at:a.number().optional(),security_add_on_enabled_at:a.number().optional(),mfa_required:a.string().optional(),discovery_enabled:a.boolean().optional(),workshop_enabled:a.boolean().optional(),cursor_chat_disabled:a.boolean().optional(),design_default_paid_status:i.cA.optional(),whiteboard_default_paid_status:i.cA.optional(),k12_google_org:a.boolean(),shared_org_license_group_settings:d.Vh.nullable(),vat_gst_id:a.string().optional().nullable(),tax_id_verification_status:i.xy.optional(),are_custom_templates_allowed:a.boolean(),should_auto_renew:a.boolean(),has_automatic_upcoming_invoice:a.boolean(),target_locality:y.optional(),org_domains:c.N.optional().nullable(),workspaces_count:a.number().optional(),cmty_publish_as_user_enabled:a.boolean().optional(),license_groups_count:a.number().optional(),workspaces_nux_active_at:a.string().optional(),ai_features_disabled:a.boolean().optional(),ai_features_disabled_at:a.string().optional(),ai_data_sharing_enabled:a.boolean().optional(),is_dev_mode_opt_in_accepted:a.boolean().optional(),has_invalid_upgrades:a.boolean().optional(),figma_provided_libraries_disabled:a.boolean().optional(),billing_api:o.z,stripe_memo:a.string().optional(),self_serve:a.boolean().optional(),invoice_currency:a.nativeEnum(s.S).optional(),is_slides_disabled:a.boolean().optional(),activity_logs_max_query_duration_in_days:a.number().optional(),tier:a.nativeEnum(i.Ag),billing_tier:a.nativeEnum(i.Ag)})},622139:(e,r,n)=>{n.d(r,{$V:()=>u,CO:()=>l,EB:()=>d,NW:()=>i,R$:()=>s,UW:()=>c,tY:()=>a,tn:()=>o});var a=(e=>(e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.ANNUAL=1]="ANNUAL",e[e.MONTHLY=2]="MONTHLY",e[e.STUDENT=3]="STUDENT",e))(a||{}),i=(e=>(e.MONTH="month",e.YEAR="year",e))(i||{});let o={UPGRADE_NEW_TEAM:"upgrade_new_team",PLAN_COMPARISON:"plan_comparison",CREATE_TEAM:"create_team",ADD_COLLABORATORS:"add_collaborators",CHOOSE_PLAN:"choose_plan",PAYMENT_AND_ADDRESS:"payment_and_address",CONFIRM_PAY:"confirm_pay"};var s=(e=>(e.MONTHLY="monthly",e.ANNUAL="annual",e))(s||{});let l="US",c="JP",d=e=>({line1:"",line2:"",country:e||l,city:"",region:"",postal_code:""});function u(e){return""===e.line1&&""===e.line2&&""===e.city&&""===e.region&&""===e.postal_code}var m=(e=>(e.PRODUCT_PRO_DESIGN_ANNUAL="prod_BTrZbmnROhwnmX",e.PRODUCT_PRO_DESIGN_MONTHLY="prod_BUXN0CamqLCsuF",e.PRODUCT_PRO_FIGJAM_ANNUAL="figjam_annual_usd_36",e.PRODUCT_PRO_FIGJAM_MONTHLY="figjam_monthly_usd_5",e))(m||{})},376485:(e,r,n)=>{n.d(r,{Ag:()=>b,Au:()=>ed,Av:()=>ec,C:()=>en,Dk:()=>L,FW:()=>Y,Gb:()=>eh,HK:()=>E,Kd:()=>T,LR:()=>Z,Lu:()=>ep,Lz:()=>ea,MP:()=>k,Pe:()=>ee,Ps:()=>eE,Px:()=>z,R2:()=>er,UX:()=>v,Wt:()=>P,XS:()=>C,Ye:()=>$,ZQ:()=>X,ZV:()=>F,am:()=>em,bH:()=>J,f5:()=>eo,ho:()=>y,k0:()=>Q,n_:()=>e_,ow:()=>et,pL:()=>j,pR:()=>w,sM:()=>ei,u8:()=>f,xg:()=>eu});var a,i=n(330654),o=n(107877),s=n(560718),l=n(99506),c=n(813408),d=n(288300),u=n(882225),m=n(979215),p=n(483327),h=n(401730),_=n(178787),g=n(629521),f=(e=>(e[e.PUBLIC_PLUGINS_DISALLOWED=0]="PUBLIC_PLUGINS_DISALLOWED",e[e.PLUGIN_NOT_ORG_APPROVED=1]="PLUGIN_NOT_ORG_APPROVED",e[e.PLUGIN_INSTALLED_FOR_ORG=2]="PLUGIN_INSTALLED_FOR_ORG",e[e.PLUGIN_INSTALLED_FOR_USER=3]="PLUGIN_INSTALLED_FOR_USER",e[e.PLUGIN_INSTALLABLE=4]="PLUGIN_INSTALLABLE",e))(f||{}),E=(e=>(e.FIGMA="design",e.FIGJAM="whiteboard",e.UNIVERSAL="design_and_whiteboard",e.INSPECT="inspect",e.FIGMA_AND_INSPECT="design_and_inspect",e))(E||{}),y=(e=>(e.LOAD="LOAD",e.PARSE="PARSE",e.VALIDATE="VALIDATE",e))(y||{}),b=(e=>(e.Plugin="plugin",e.Widget="widget",e))(b||{});let I=i.object({type:i.nativeEnum(y),text:i.string()}),T=["camera","microphone","displaycapture"],v=["openexternal","analytics","cortex","debug","firstdraft","filekey","hidecursors",...T],S=i.object({command:i.string(),name:i.string(),multipleSelection:i.boolean().optional()}),w=["currentuser","activeusers","teamlibrary","fileusers","payments","clipboardwrite"],A=i.object({name:i.string(),key:i.string(),description:i.string().optional(),optional:i.boolean().optional(),allowFreeform:i.boolean().optional()}),N=i.array(A),C=[...w,...v];[...C];let L=["textreview","panel","inspect","codegen","linkpreview","vscode"],O=i.object({label:i.string(),value:i.string(),isDefault:i.boolean().optional()}),R=i.object({itemType:i.literal("action"),propertyName:i.string(),includedLanguages:i.array(i.string()).optional(),label:i.string().optional()});function P(e){return R.safeParse(e).success}let D=i.object({itemType:i.literal("unit"),scaledUnit:i.string(),defaultScaleFactor:i.number().optional(),default:i.boolean().optional(),includedLanguages:i.array(i.string()).optional()});function k(e){return D.safeParse(e).success}let M=i.object({itemType:i.literal("select"),propertyName:i.string(),label:i.string().optional(),options:i.array(O),includedLanguages:i.array(i.string()).optional()});function F(e){return M.safeParse(e).success}let x=i.union([R,D,M]),U=i.array(x),B=i.object({label:i.string(),value:i.string()}),V=i.object({command:i.string(),name:i.string(),parameters:N.optional(),parameterOnly:i.boolean().optional()}),G=i.object({separator:i.literal(!0)}),H=i.object({name:i.string()}).extend({menu:i.lazy(()=>i.array(i.union([V,G,H])))}),W=i.object({allowedDomains:i.array(i.string()),reasoning:i.string().optional(),devAllowedDomains:i.array(i.string()).optional()}),K=i.union([H,V,G]);var Y=(e=>(e.FIGMA="figma",e.FIGJAM="figjam",e.INSPECT="inspect",e.DEV="dev",e.SITES="sites",e.SLIDES="slides",e))(Y||{});let $=Object.values(Y),j=i.object({id:i.string().optional(),name:i.string(),api:i.string(),main:i.string(),ui:i.union([i.string(),i.record(i.string(),i.string())]).optional(),build:i.string().optional(),enableProposedApi:i.boolean().optional(),enablePrivatePluginApi:i.boolean().optional(),menu:K.array().optional(),networkAccess:W.optional(),relaunchButtons:S.array().optional(),relatedLinkDomains:i.array(i.string()).optional(),devResourceDomains:i.array(i.string()).optional(),parameters:N.optional(),parameterOnly:i.boolean().optional(),editorType:i.filteredArray(i.nativeEnum(Y)).optional(),containsWidget:i.boolean().optional(),widgetApi:i.string().optional(),permissions:i.filteredArray(i.union([i.enum(w),i.enum(v)])).optional(),enableReadOnly:i.boolean().optional(),capabilities:i.filteredArray(i.enum(L)).optional(),codegenLanguages:i.array(B).optional(),codegenPreferences:U.optional(),documentAccess:i.enum(["dynamic-page"]).optional()});(e=>{e.PluginVersionSchema=i.object({id:i.string(),name:i.string().nullable(),version:i.string().nullable(),releaseNotes:i.string().nullable(),description:i.string().nullable(),tagline:i.string().nullable(),creatorPolicy:i.string().nullable(),manifest:i.string().nullable(),createdAt:i.date(),iconPath:i.string().nullable(),coverImagePath:i.string().nullable(),codePath:i.string().nullable(),plugin:i.object({currentPluginVersionId:i.string().nullable()})}),e.PluginInstallSchema=i.object({id:i.string(),pluginId:i.string(),pinnedStatus:i.nativeEnum(l.hM),createdAt:i.date(),plugin:i.object({id:i.string(),currentPluginVersionId:i.string().nullable(),publishingStatus:i.nativeEnum(l.KB).nullable(),isWidget:i.boolean().nullable(),viewableInEditor:i.boolean(),orgId:i.string().nullable(),approvedAt:i.date().nullable(),approvalStatus:i.number().nullable(),communityPublishers:i.lazy(()=>e.CommunityPublisherSchema).array().nullable(),currentPluginVersion:e.PluginVersionSchema.nullable()}).nullable()}),e.OrgSchema=i.object({id:i.string(),installedPlugins:i.array(e.PluginInstallSchema)}),e.CommunityTeamSchema=i.object({id:i.string(),name:i.string()}),e.OrgInfoSchema=i.object({id:i.string(),name:i.string()}),e.CommunityProfileSchema=i.object({id:i.string(),profileHandle:i.string(),user:i.object({id:i.string(),name:i.string().nullable()}).nullable(),team:e.CommunityTeamSchema.nullable(),org:e.OrgInfoSchema.nullable()}),e.CommunityPublisherSchema=i.object({role:i.nativeEnum(l.un),isPending:i.boolean(),profile:e.CommunityProfileSchema})})(a||(a={}));let z=i.object({id:i.string(),plugin_id:i.string(),name:i.string(),version:i.string(),current_plugin_version_id:i.string().optional(),release_notes:i.string(),description:i.string(),tagline:i.string().nullable(),creator_policy:i.string().nullable(),is_private:i.boolean(),manifest:j,created_at:i.string(),org_id:i.string().optional(),redirect_icon_url:i.string(),redirect_cover_image_url:i.string(),redirect_code_url:i.string(),redirect_snapshot_url:i.string().nullish(),community_publishers:i.array(a.CommunityPublisherSchema).optional(),installed_by:i.union([i.literal("user"),i.literal("org")]).nullish(),playground_fig_file_key:i.string().nullish(),playground_fig_file:i.ignore().optional(),playground_file_version_id:i.string().nullish()}),q=i.object({plugin_id:i.string(),name:i.string(),manifest:j,localFileId:i.number(),localFilePath:i.string(),error:I.optional(),cachedContainsWidget:i.boolean().optional(),lastKnownPluginId:i.string().optional(),testCode:i.string().optional()});function X(e){return void 0!==e.localFileId}function J(e){return!X(e)&&!!e.is_private}function Z(e){return!X(e)&&!J(e)}function Q(e){return!!e.manifest?.containsWidget}function ee(e){return!!(e?.includes("dev")||e?.includes("inspect"))}function et(e,r,n){return!!(!n||!e||J(e)||X(e))||!!n.public_plugins_allowed&&((Q(e)?!n.widgets_whitelist_enforced:!n.plugins_whitelist_enforced)||!!r[e?.plugin_id])}let er=i.object({org:i.object({id:i.string(),name:i.string()}).optional(),is_public:i.boolean().optional()}),en=i.object({id:i.string(),versions:i.record(z),current_plugin_version_id:i.string().nullable(),is_widget:i.coerce.boolean()}),ea=en.merge(i.object({install_count:i.number(),view_count:i.number(),like_count:i.number(),comment_count:i.number(),category_id:i.string().nullable(),roles:er,org_id:i.string().nullable(),realtime_token:i.string(),created_at:i.string(),redirect_thumbnail_url:i.string().nullable(),thumbnail_url:i.string().nullable(),tags:i.array(i.string()).optional(),tags_v2:i.record(i.string()).optional(),current_user_has_run:i.boolean().optional(),current_user_first_ran_at:i.string().nullish(),unique_run_count:i.number(),editor_type:i.nativeEnum(E),unpublished_at:i.string().nullable(),support_contact:i.string().nullable(),comments_setting:i.nativeEnum(s.Ni).nullable(),related_content:(0,o.M6)(i.lazy(()=>ea)),hide_related_content_by_others:i.coerce.boolean().optional(),publishing_status:i.nativeEnum(l.KB).nullable(),score:i.number().optional(),install_status:i.nativeEnum(f).optional(),profile_install_status:i.nativeEnum(f).optional(),commenting_is_restricted:i.boolean(),monetization_status:i.nativeEnum(_.UC).nullish(),community_resource_payment:h.fe.optional(),third_party_m10n_status:i.nativeEnum(_.PN).nullish(),creator_policy:i.string().optional(),plugin_publishers:c.I7.optional(),carousel_media_urls:i.optional(g.fE),carousel_videos:i.optional(g.Fy)})).and(c.xK).and(u.n).and(p.Y).and(m.q),ei=ea.and(i.object({is_widget:i.literal(!0)}));function eo(e){return e.third_party_m10n_status===_.PN.MIGRATING}let es=i.object({name:i.string(),data:i.unknown().optional(),icon:i.union([i.string(),i.instanceof(Uint8Array)]).optional(),iconUrl:i.string().optional()}),el=i.record(es);function ec(e){return"command"in e&&"name"in e}function ed(e){return"separator"in e&&e.separator}function eu(e){return"name"in e&&"menu"in e}function em({type:e,text:r}){switch(e){case"LOAD":return"Manifest load error: "+r;case"PARSE":return"Manifest not valid JSON: "+r;case"VALIDATE":return"Manifest error: "+r}}Symbol("relaunchMixedDescription");var ep=(e=>(e.ORG="ORG",e.PUBLIC="PUBLIC",e))(ep||{});function eh(e,r){return r?`GET_PLUGIN_ALLOW_LIST_${e}_${r}`:`GET_PLUGIN_ALLOW_LIST_${e}`}function e_(e,r){return r?`GET_WIDGET_ALLOW_LIST_${e}_${r}`:`GET_WIDGET_ALLOW_LIST_${e}`}let eg=i.enum(["default","textreview","inspect","codegen","linkpreview","auth"]),ef=i.union([i.enum(["contextmenu","filemenu","runlast","osmenu","relaunch","quick-actions","universal-insert","parameter-entry","paste_from_url","textreview","handoff-relaunch","handoff-panel","codegen","related-link-click","related-link-preview","related-link-auth","pinned","try-plugin-params","auto-run"]),d.MM]),eE=i.object({plugin:i.union([z,q]),command:i.string(),queryMode:i.boolean(),runMode:eg,triggeredFrom:ef,openFileKey:i.string(),ignoreForRunLastPlugin:i.boolean().optional(),deferRunEvent:i.boolean().optional(),parameterValues:el.optional(),isWidget:i.boolean(),widgetAction:i.string().nullable().optional(),forcePluginVersionId:i.string().nullable().optional()})},265361:(e,r,n)=>{n.d(r,{E:()=>s});var a=n(67151),i=n(939863),o=n(720647);function s(e){switch(e){case o.G_.DESIGN:return(0,i.t)("general.figma_design");case o.Te.WHITEBOARD:case o.G_.FIGJAM:return(0,i.t)("general.figjam");case o.G_.DEV_MODE:return(0,i.t)("general.dev_mode");default:(0,a.xb)(e)}}},559403:(e,r,n)=>{n.d(r,{o:()=>a});let a={r:0,g:0,b:0,a:255}},935938:(e,r,n)=>{n.d(r,{G:()=>i});var a=n(671653),i=(e=>(e.RECENTLY_VIEWED="recently-viewed",e.SUGGESTED="suggested",e.SHARED_FILES="shared-with-you",e.SHARED_PROJECTS="shared-projects",e))(i||{});a.C0.NAME,a.C0.CREATED_AT,a.C0.ACCESSED_AT,a.C0.NAME,a.C0.CREATED_AT,a.C0.ACCESSED_AT,a.C0.NAME,a.C0.CREATED_AT,a.C0.SHARED_AT,a.C0.NAME,a.C0.CREATED_AT,a.C0.SHARED_AT},629521:(e,r,n)=>{n.d(r,{Fy:()=>p,P1:()=>s,Sq:()=>_,dE:()=>h,fE:()=>d});var a=n(330654),i=n(487386),o=(e=>(e[e.CURATED_IMAGE=0]="CURATED_IMAGE",e[e.EMBED=1]="EMBED",e))(o||{});let s=a.record(a.string().refine(e=>Object.keys(i.B.COMMUNITY_HUB_FILE_THUMBNAIL).includes(e)),a.string().url()),l=a.object({url:a.string().url()}),c=l.extend({id:a.string(),sha1:a.string(),resized_thumbnail_urls:a.optional(s),created_at:a.coerce.date()}),d=a.record(a.string(),c);l.extend({sha1:a.string(),buffer:a.instanceof(Uint8Array)});let u=a.object({url:a.string().url(),thumbnail_url:a.string().url()}),m=u.extend({id:a.string(),sha1:a.string(),thumbnail_sha1:a.string(),video_file_uuid:a.string().uuid()}),p=a.record(a.string(),m);function h(e){return"buffer"in e}function _(e){return"id"in e}u.extend({sha1:a.string(),buffer:a.instanceof(Uint8Array),thumbnail_sha1:a.string(),thumbnail_buffer:a.instanceof(Uint8Array)})},397065:(e,r,n)=>{n.d(r,{N:()=>a});var a=(e=>(e[e.URGENT_ALERT=9999]="URGENT_ALERT",e[e.HIGH_PRIORITY_MODAL=20]="HIGH_PRIORITY_MODAL",e[e.OVERRIDING_MODAL=15]="OVERRIDING_MODAL",e[e.DEFAULT_MODAL=10]="DEFAULT_MODAL",e[e.SECONDARY_MODAL=5]="SECONDARY_MODAL",e[e.SURVEY=1]="SURVEY",e))(a||{})},967409:(e,r,n)=>{n.d(r,{$L:()=>u,Du:()=>M,Ej:()=>U,Hn:()=>F,KB:()=>h,L0:()=>P,Lk:()=>A,Lr:()=>y,MU:()=>W,Mm:()=>G,Mp:()=>V,OZ:()=>B,Or:()=>H,Rr:()=>p,Rx:()=>b,Rz:()=>K,WY:()=>o,W_:()=>R,Wr:()=>g,XW:()=>v,Xr:()=>_,Zr:()=>E,_M:()=>O,a7:()=>L,dC:()=>s,dt:()=>S,f9:()=>m,fS:()=>I,gw:()=>w,hf:()=>x,j9:()=>T,jD:()=>d,mp:()=>N,q6:()=>k,qm:()=>C,qy:()=>l,tC:()=>D,uH:()=>i,uR:()=>c});var a=n(939863),i=(e=>(e.FILES="files",e.PROJECTS="projects",e.TEAMS="teams",e.USERS="users",e.HUB_FILES="hub_files",e.PUBLIC_PLUGINS="public_plugins",e.PRIVATE_PLUGINS="private_plugins",e.PUBLIC_PROFILES="public_profiles",e.PUBLIC_WIDGETS="public_widgets",e.PRIVATE_WIDGETS="private_widgets",e))(i||{}),o=(e=>(e.RESOURCE="resource",e.CREATOR="creator",e.SPACE="space",e))(o||{}),s=(e=>(e.USERS="users",e.PROJECTS="projects",e.TEAMS="teams",e.ORGS="orgs",e))(s||{}),l=(e=>(e.FOLDER="folders",e.TEAM="teams",e.ORG="orgs",e))(l||{}),c=(e=>(e.DROPDOWN="dropdown",e.AUTOCOMPLETE="autocomplete",e))(c||{}),d=(e=>(e.PILL="pill",e.CLEAR_ALL="clear_all",e.ALL_TYPES="all_types",e.SELECTION="selection",e))(d||{}),u=(e=>(e.ALL_FILES="FILES",e.DESIGN_FILES="DESIGN_FILES",e.FIGJAM_FILES="FIGJAM_FILES",e.SLIDES="SLIDES",e.USERS="USERS",e.PROJECTS="PROJECTS",e.TEAMS="TEAMS",e.PLUGINS="PLUGINS",e.WIDGETS="WIDGETS",e.SITES="SITES",e))(u||{}),m=(e=>(e.NAME="name",e.FUZZY_NAME="fuzzy-name",e.NAME_WORD_DELIMITER_V2="name-word-delimiter-v2",e.DEEP_SEARCH_TEXT="deep-search-text",e.PAGE_NAME="page-name",e.FRAME_NAME="frame-name",e.FRAGMENT_RETRIEVAL="fragment-retrieval",e))(m||{}),p=(e=>(e.ONE_TYPE="one_type",e.ALL_TYPES_BLOCKING="all_types_blocking",e.ALL_TYPES_STREAMING="all_types_streaming",e))(p||{});function h(e){switch(e){case"files":return(0,a.t)("search.preview_section.files_capitalized");case"projects":return(0,a.t)("search.preview_section.projects_capitalized");case"users":return(0,a.t)("search.preview_section.people_capitalized");case"teams":return(0,a.t)("search.preview_section.teams_capitalized");case"private_plugins":return(0,a.t)("search.preview_section.plugins_capitalized");case"hub_files":return(0,a.t)("search.preview_section.community_capitalized");default:return""}}function _(e){if(!e)return null;switch(e.value){case"FILES":case"DESIGN_FILES":case"FIGJAM_FILES":case"SLIDES":case"SITES":return"files";case"USERS":return"users";case"PROJECTS":return"projects";case"TEAMS":return"teams";case"PLUGINS":return"private_plugins";case"WIDGETS":return"private_widgets";default:return null}}function g(e){switch(e){case"files":return"FILES";case"users":return"USERS";case"projects":return"PROJECTS";case"teams":return"TEAMS";case"private_plugins":return"PLUGINS";case"private_widgets":return"WIDGETS";default:return null}}var f=(e=>(e.DESIGN="design",e.FIGJAM="whiteboard",e.SLIDES="slides",e.SITES="sites",e))(f||{});function E(e){if(e)switch(e.value){case"DESIGN_FILES":return"design";case"FIGJAM_FILES":return"whiteboard";case"SLIDES":return"slides";case"SITES":return"sites";default:return}}function y(e){if(!e)return null;let r={};for(let[n,a]of Object.entries(e))a&&("creatorIds"===n?r["creator_ids[]"]=a:"folderIds"===n&&a.length>0?r["folder_ids[]"]=a:"teamIds"===n&&a.length>0?r["team_ids[]"]=a:"orgIds"===n&&a.length>0?r["org_ids[]"]=a:r[n]=a);return r}var b=(e=>(e.ORG="internal",e.ORG_GUEST="internal_guest",e.PERSONAL="personal",e.COMMUNITY="community",e))(b||{});let I={internal:{modelTypes:["files","projects","users","teams","private_plugins","private_widgets"],correspondingModelTypes:{hub_files:"files",public_profiles:"users",public_plugins:"private_plugins",public_widgets:"private_widgets"},defaultModelType:"files"},internal_guest:{modelTypes:["files","projects","users","teams"],correspondingModelTypes:{hub_files:"files",public_profiles:"users"},defaultModelType:"files"},personal:{modelTypes:["files","projects","users"],correspondingModelTypes:{hub_files:"files",public_profiles:"users"},defaultModelType:"files"},community:{modelTypes:["hub_files","public_plugins","public_profiles","public_widgets"],correspondingModelTypes:{files:"hub_files",users:"public_profiles",private_plugins:"public_plugins",private_widgets:"public_widgets"},defaultModelType:"hub_files"}};var T=(e=>(e.POPULARITY="popularity",e.RECENCY="recency",e.RELEVANCY="relevancy",e.NAME="name",e.AUTHOR_NAME="author_name",e.INSTALL_COUNT="install_count",e.MEMBER_COUNT="member_count",e.UPDATED_AT="updated_at",e.TOUCHED_AT="touched_at",e.CREATED_AT="created_at",e.EMAIL="email",e))(T||{}),v=(e=>(e.NAME="name",e.AUTHOR_NAME="author_name",e.UPDATED_AT="updated_at",e.INSTALL_COUNT="install_count",e.RELEVANCY="relevancy",e.RUN_COUNT="run_count",e))(v||{}),S=(e=>(e.NAME="name",e.AUTHOR_NAME="author_name",e.UPDATED_AT="updated_at",e.INSTALL_COUNT="install_count",e.RELEVANCY="relevancy",e))(S||{}),w=(e=>(e.POPULARITY="popularity",e.RECENCY="recency",e))(w||{}),A=(e=>(e.RELEVANCY="relevancy",e.NAME="name",e.TOUCHED_AT="touched_at",e.CREATED_AT="created_at",e.OWNER="owner",e))(A||{}),N=(e=>(e.RELEVANCY="relevancy",e.NAME="name",e.CREATED_AT="created_at",e))(N||{}),C=(e=>(e.RELEVANCY="relevancy",e.NAME="name",e.FILES_LAST_TOUCHED_AT="files_last_touched_at",e.CREATED_AT="created_at",e.MEMBER_COUNT="member_count",e))(C||{}),L=(e=>(e.RELEVANCY="relevancy",e.NAME="name",e.EMAIL="email",e))(L||{}),O=(e=>(e.RELEVANCY="relevancy",e))(O||{}),R=(e=>(e.RELEVANCY="relevancy",e))(R||{}),P=(e=>(e.PREVIEW="preview",e.FULL_PAGE="full_page",e.OUTSIDE_FILE_BROWSER="outside_file_browser",e))(P||{}),D=(e=>(e.OPEN="open",e.CLOSE="close",e))(D||{});function k(e){switch(e){case"files":return(0,a.t)("search.search_model_type_header.files");case"projects":return(0,a.t)("search.search_model_type_header.projects");case"teams":return(0,a.t)("search.search_model_type_header.teams");case"users":return(0,a.t)("search.search_model_type_header.people");case"hub_files":return(0,a.t)("search.search_model_type_header.hub_files");case"public_plugins":return(0,a.t)("search.search_model_type_header.public_plugins");case"private_plugins":return(0,a.t)("search.search_model_type_header.private_plugins");case"public_profiles":return(0,a.t)("search.search_model_type_header.creators");case"public_widgets":return(0,a.t)("search.search_model_type_header.public_widgets");case"private_widgets":return(0,a.t)("search.search_model_type_header.private_widgets")}}function M(e){switch(e){case"teams":return(0,a.t)("file_browser.team");case"hub_files":return(0,a.t)("activity_log.resource.file");case"public_plugins":case"private_plugins":return(0,a.t)("community.plugins.plugin");case"public_profiles":return(0,a.t)("search.preview_section.creator");case"public_widgets":case"private_widgets":return(0,a.t)("community.plugins.widget");case"users":case"files":case"projects":return(0,a.t)("permissions.level_name.none")}}function F(e){if(1===(e=Array.from(new Set(e))).length)return e[0];{let r=e.pop();return e.join(", ")+" and "+r}}function x(e){switch(e){case"files":return(0,a.t)("search.search_model_type.empty_state_files");case"projects":return(0,a.t)("search.search_model_type.empty_state_projects");case"teams":return(0,a.t)("search.search_model_type.empty_state_teams");case"users":return(0,a.t)("search.search_model_type.empty_state_people");case"hub_files":return(0,a.t)("search.search_model_type.empty_state_hub_files");case"public_plugins":return(0,a.t)("search.search_model_type.empty_state_public_plugins");case"private_plugins":return(0,a.t)("search.search_model_type.empty_state_private_plugins");case"public_profiles":return(0,a.t)("search.search_model_type.empty_state_creators");case"public_widgets":return(0,a.t)("search.search_model_type.empty_state_public_widgets");case"private_widgets":return(0,a.t)("search.search_model_type.empty_state_private_widgets");default:return""}}let U=["files","projects","users","teams"],B=["files","projects","users","hub_files"],V=["public_plugins","private_plugins","public_widgets","private_widgets","public_profiles"],G=["public_plugins","private_plugins","public_widgets","private_widgets","teams","public_profiles"],H=4,W=10,K=30},637590:(e,r,n)=>{n.d(r,{A5:()=>i,Ft:()=>p,G4:()=>d,QB:()=>y,SC:()=>h,Sc:()=>_,U6:()=>u,bN:()=>m,bb:()=>o,ck:()=>f,jX:()=>g,kV:()=>s,ou:()=>l});var a=n(622139),i=(e=>(e[e.INVITE=0]="INVITE",e[e.PUBLISH_COMMUNITY=1]="PUBLISH_COMMUNITY",e[e.PUBLISH_TEMPLATE=2]="PUBLISH_TEMPLATE",e[e.POST_TO_FEED=3]="POST_TO_FEED",e[e.COLLABORATORS=4]="COLLABORATORS",e[e.EMBED_CODE=5]="EMBED_CODE",e[e.SHARE_SETTINGS=6]="SHARE_SETTINGS",e[e.FOLDER_MEMBERS=7]="FOLDER_MEMBERS",e[e.SHARE_GOOGLE_DEVICE_DISCLAIMER=8]="SHARE_GOOGLE_DEVICE_DISCLAIMER",e[e.SHARE_TO_GOOGLE_CLASSROOM=9]="SHARE_TO_GOOGLE_CLASSROOM",e))(i||{}),o=(e=>(e.ACCOUNT="account",e.PLUGINS="plugins",e.COMMUNITY="community",e.NOTIFICATIONS="notifications",e))(o||{});function s(e){return"search"===e.view}let l={UNIVERSAL_PUBLISHING:"publish",ACCOUNT_SETTINGS:"settings"};var c=(e=>(e.IN_VIEW="in_view",e.DIRECT="direct",e))(c||{}),d=(e=>(e[e.DEFAULT=0]="DEFAULT",e.FULLSCREEN="fullscreen",e.FULLSCREEN_WITH_COMMENTS="fullscreen_comments",e))(d||{}),u=(e=>(e.ONBOARDING="onboarding",e))(u||{});function m(e){return"org"===e.view}var p=(e=>(e[e.PROJECT=0]="PROJECT",e[e.TEAM=1]="TEAM",e[e.WORKSPACE=2]="WORKSPACE",e[e.LICENSE_GROUP=3]="LICENSE_GROUP",e))(p||{}),h=(e=>(e.UPGRADE_EXISTING_TEAM="upgrade_existing_team",e.CREATE_AND_UPGRADE="create_and_upgrade",e.CREATE="create",e))(h||{}),_=(e=>(e[e.UNDETERMINED=0]="UNDETERMINED",e[e.STARTER=1]="STARTER",e[e.TEAM=2]="TEAM",e[e.ORG=3]="ORG",e))(_||{});function g(e){return"upgrade_existing_team"===e}function f(e,r){return"create"===e&&(r===a.tn.CREATE_TEAM||r===a.tn.ADD_COLLABORATORS)||r===a.tn.PLAN_COMPARISON}let E=["deletedFiles","teamCreation","folder","addAnnualPlan","addCollaborators","team","teamUpgrade","orgAdminSettings","licenseGroup","workspace","billingGroupDashboard","search","user","promoReview","eduReview","teamFeed","resourceUnavailable","feed","sharedWithYou","teamAdminConsole","recentsAndSharing","draftsToMove","allProjects","limitedTeamSharedProjects","orgDomainManagement","abandonedDraftFiles"];function y(e){return E.includes(e.view)}},139961:(e,r,n)=>{n.d(r,{Sm:()=>s,Vh:()=>u,w_:()=>c});var a=n(330654),i=(e=>(e.TEAM_CREATION_CONTROLS_ANYONE="team_creation_controls_anyone",e.TEAM_CREATION_CONTROLS_ADMIN_ONLY="team_creation_controls_admin_only",e))(i||{});let o=a.nativeEnum(i);var s=(e=>(e.MEMBERS="members",e.ALL_USERS="all_users",e.DISABLED="disabled",e))(s||{});let l=a.nativeEnum(s);var c=(e=>(e.ALLOWED="public_link_controls_setting_allowed",e.PASSWORD_REQUIRED="public_link_controls_setting_password_required",e.EXPIRATION_REQUIRED="public_link_controls_setting_expiration_required",e.EXP_AND_PWD_REQUIRED="public_link_controls_setting_password_and_expiration_required",e.BANNED="public_link_controls_setting_banned",e))(c||{});let d=a.nativeEnum(c),u=a.object({team_creation_controls:o.optional().nullable(),external_collaboration_controls:a.boolean(),ip_account_restriction:a.boolean().optional(),ip_allowlist:a.boolean().optional(),idle_timeout_duration_in_secs:a.number().optional().nullable(),autogen_password_controls:a.boolean(),public_link_controls_setting:d.optional().nullable(),public_link_controls_max_expiration:a.number().optional().nullable(),configured_upgrade_request_setting:l.optional().nullable(),configured_upgrade_request_message:a.string().optional().nullable()})},840912:(e,r,n)=>{var a=(e=>(e.NAME="Name",e.ACTIVE_AT="Last active",e.PERMISSIONS="Team permissions",e.DESIGN_PAID_STATUS="Design role",e.FIGJAM_PAID_STATUS="FigJam role",e))(a||{})},410436:(e,r,n)=>{n.d(r,{c:()=>a});let a={PENDING:"pending",APPROVED:"approved",DENIED:"denied",WITHDRAWN:"withdrawn"}},36816:(e,r,n)=>{n.d(r,{Zf:()=>s,j4:()=>l,wF:()=>c});var a=n(330654),i=n(304769),o=n(583894),s=(e=>(e.FULL="full",e.RESTRICTED="restricted",e.STARTER="starter",e))(s||{}),l=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e))(l||{});let c=a.normalize("TeamUser",a.object({id:a.primaryKey(),team_id:a.string(),user_id:a.string(),design_paid_status:a.nativeEnum(s),whiteboard_paid_status:a.nativeEnum(s),drafts_folder_id:a.string().nullable().optional(),created_at:a.string(),updated_at:a.string(),user:o.aw.optional(),show_figjam_user_onboarding:a.boolean().nullable(),active_seat_type:i.cD.nullish()}))},668526:(e,r,n)=>{n.d(r,{A$:()=>a,Iv:()=>i});var a=(e=>(e.HOME="",e.MEMBERS="members",e.SETTINGS="settings",e.PROFILE="profile",e.BILLING="billing",e))(a||{}),i=(e=>(e.DASHBOARD="dashboard",e.MEMBERS="members",e.DRAFTS="drafts",e.BILLING="billing",e.SETTINGS="settings",e.CONTENT="content",e))(i||{}),o=(e=>(e.ABANDONED_DRAFTS="abandoned-drafts",e.CONNECTED_PROJECTS="connected-projects",e))(o||{}),s=(e=>(e.OVERVIEW="overview",e.INVOICES="invoices",e))(s||{}),l=(e=>(e.OVERVIEW="overview",e.SEAT_REQUESTS="seat-requests",e))(l||{})},851363:(e,r,n)=>{n.d(r,{Fb:()=>u,ZN:()=>g,bL:()=>_,kE:()=>h,kU:()=>m,pE:()=>f,qg:()=>c});var a=n(966712),i=n(330654),o=n(99506),s=n(343279),l=n(383986);let c=118;var d=(e=>(e.REQUIRES_SOURCE_ACTION="requires_source_action",e))(d||{}),u=(e=>(e.ORG_BROWSABLE="org_browsable",e.HIDDEN="hidden",e))(u||{}),m=(e=>(e.STUDENT_TEAM_NULL="not_student_team",e.STUDENT_TEAM_CURRENT="current_student_team",e.STUDENT_TEAM_EXPIRED="expired_student_team",e))(m||{});let p=i.nativeEnum(m),h=i.normalize("Team",s.bV.extend({created_at:i.string(),id:i.primaryKey(),img_url:i.string().optional(),org_id:i.string().nullable(),name:i.string(),description:i.string(),projects:i.number().nullish(),editors:i.number().nullish(),realtime_token:i.string().optional(),restrictions_list:i.array(o.iU).nullable(),subscription:o.D8.nullable(),subscription_raw:o.D8.nullable(),org_access:o.We.nullable(),stripe_customer_id:i.string().nullable(),student_team_at:i.string().nullable(),student_team_state:p,student_autoverifying_team_at:i.string().nullable(),student_team:i.boolean(),pro_team:i.boolean(),org_team:i.boolean(),starter_team:i.boolean(),grace_period_end:i.string().nullable(),grace_period_type:o.Dh.nullable(),last_upgraded_at:i.string().nullable(),updated_at:i.string().nullable().optional(),deleted_at:i.string().nullable(),community_profile_id:i.string().optional(),community_profile_handle:i.string().optional(),license_group_id:i.string().nullable(),license_group:l.W.nullable(),workspace_id:i.string().nullable(),default_permission:o.zd.optional().nullable(),is_favorited:i.boolean().optional(),vat_gst_id:i.string().optional(),tax_id_verification_status:o.xy.optional(),cmty_publish_as_user_enabled:i.boolean().optional(),ai_features_disabled:i.boolean().optional(),figma_provided_libraries_disabled:i.boolean().optional(),legal_name:i.string().nullable(),design_default_paid_status:o.cA.optional(),whiteboard_default_paid_status:o.cA.optional(),sharing_audience_control:o.a0.optional(),org_browsable:i.boolean().optional(),hidden:i.boolean().optional()}));function _(e,r){let n=(0,a.kc)().ps_benchmark;return r?`${location.origin}/files/${r}/team/${e}`:`${location.origin}/files/team/${e}${n?"/all-projects":""}`}var g=(e=>(e.MOVE_FILES="move_files",e.DUPLICATE_FILES="duplicate_files",e.RESTORE_FILES="restore_files",e.MOVE_FOLDER="move_folder",e.IMPORT_FILES="import_files",e.CREATE_FILE="create_file",e.CREATE_FOLDER="create_folder",e.CREATE_FILE_FROM_TEMPLATE="create_file_from_template",e.CREATE_PAGE="create_page",e.DUPLICATE_PAGE="duplicate_page",e.CREATE_MORE_VARIABLE_MODES="create_more_variable_modes",e.PUBLISH_MORE_VARIABLE_MODES="publish_more_variable_modes",e.CREATE_FILE_FROM_DROPDOWN="create_file_from_dropdown",e))(g||{}),f=(e=>(e.PUBLISH_COMPONENTS="publish_components",e.USE_AUDIO="use_audio",e.VIEW_ONLY_PROJECT="view_only_project",e.INVITE_ONLY_PROJECT="invite_only_project",e))(f||{})},671653:(e,r,n)=>{n.d(r,{C0:()=>a,Jh:()=>s,XU:()=>c,cT:()=>d,mo:()=>u,rJ:()=>o,rR:()=>m,t2:()=>l,ue:()=>i});var a=(e=>(e[e.NAME=0]="NAME",e[e.CREATED_AT=1]="CREATED_AT",e[e.TOUCHED_AT=2]="TOUCHED_AT",e[e.TRASHED_AT=3]="TRASHED_AT",e[e.OWNER=4]="OWNER",e[e.SEARCH_RELEVANCE=5]="SEARCH_RELEVANCE",e[e.PROJECT_NAME=6]="PROJECT_NAME",e[e.ACCESSED_AT=7]="ACCESSED_AT",e[e.SHARED_AT=8]="SHARED_AT",e))(a||{}),i=(e=>(e[e.ASC=0]="ASC",e[e.DESC=1]="DESC",e))(i||{}),o=(e=>(e[e.ANY=0]="ANY",e[e.SELF=1]="SELF",e[e.OTHER=2]="OTHER",e))(o||{}),s=(e=>(e[e.CAN_BE_VIEWED=0]="CAN_BE_VIEWED",e[e.CAN_BE_RESTORED_DELETED=1]="CAN_BE_RESTORED_DELETED",e))(s||{}),l=(e=>(e[e.ANY=0]="ANY",e[e.DESIGN=1]="DESIGN",e[e.FIGJAM=2]="FIGJAM",e[e.PROTOTYPE=3]="PROTOTYPE",e[e.SLIDES=4]="SLIDES",e[e.SITES=5]="SITES",e))(l||{}),c=(e=>(e[e.LIST=0]="LIST",e[e.GRID=1]="GRID",e))(c||{}),d=(e=>(e.ALL="",e.SHARED="shared",e.ORG_DELETED_DRAFTS="deleted_user_drafts",e))(d||{});function u(e){switch(e){case 1:default:return"can_be_restored_deleted";case 0:return"can_be_viewed"}}var m=(e=>(e[e.TIME=0]="TIME",e[e.ALPHABETICAL=1]="ALPHABETICAL",e[e.OTHER=2]="OTHER",e))(m||{})},583894:(e,r,n)=>{n.d(r,{D6:()=>o,P5:()=>i,aw:()=>d,pl:()=>u,vA:()=>c,z4:()=>l});var a=n(330654),i=(e=>(e.NONE="none",e.ACCEPTED="accepted",e.STARTED_ONBOARDING="started_onboarding",e.DISABLED="disabled",e.ENABLED="enabled",e))(i||{}),o=(e=>(e.FILE="file",e.EXTENSION="extension",e))(o||{}),s=(e=>(e.NUM_CUSTOMERS="num_customers",e.PAYOUTS="payouts",e.GROSS="gross",e.LAST_UPDATED="last_updated_at",e.ALL_TIME_TOTAL_EARNED="all_time_total_earned",e.NUM_PURCHASES="num_purchases",e))(s||{});function l(e){return e&&({none:0,accepted:1,started_onboarding:2,disabled:3,enabled:4})[e]||0}var c=(e=>(e.ALWAYS="always",e.NEVER="never",e))(c||{});let d=a.object({id:a.string(),name:a.string().optional(),handle:a.string(),img_url:a.string(),email:a.string().optional(),description:a.string().nullish(),org_id:a.string().optional()});var u=(e=>(e.EDITOR_ON_MAIN="Editor on main",e.EDITOR_ON_TEAM="Editor on team",e))(u||{})},59530:(e,r,n)=>{n.d(r,{V5:()=>a});let a=new Set(["seen_pro_cart_abandon_survey","seen_drafts_collaboration_survey","seen_first_use_survey","seen_type_of_work_survey","seen_org_admin_survey","seen_pro_admin_survey","seen_org_cart_abandon_survey","seen_remote_templates_opt_out_survey","seen_editor_new_user_survey","seen_editor_new_user_research_intake","seen_starter_team_loophole_survey","dismissed_starter_team_loophole_survey","completed_starter_team_loophole_survey"])},589640:(e,r,n)=>{n.d(r,{o:()=>a});var a=(e=>(e.INTERNAL_PROFILE="INTERNAL_PROFILE",e.INTERNAL_PROFILE_POSTS="INTERNAL_PROFILE_POSTS",e.PUBLIC_PROFILE="PUBLIC_PROFILE",e.PLUGINS="PLUGINS",e))(a||{})},636751:(e,r,n)=>{n.d(r,{$E:()=>a,MK:()=>s,bU:()=>i});var a=(e=>(e[e.CONNECTED=0]="CONNECTED",e[e.CONNECTED_WITH_MIC_DISABLED=1]="CONNECTED_WITH_MIC_DISABLED",e[e.DISCONNECTED=2]="DISCONNECTED",e[e.CONNECTING=3]="CONNECTING",e[e.DISCONNECTING=4]="DISCONNECTING",e[e.RECONNECTING=5]="RECONNECTING",e[e.ERROR=6]="ERROR",e[e.CALL_INACTIVE=7]="CALL_INACTIVE",e[e.TOKEN_WILL_EXPIRE_DETECT_MIC_INPUT=8]="TOKEN_WILL_EXPIRE_DETECT_MIC_INPUT",e[e.TOKEN_WILL_EXPIRE=9]="TOKEN_WILL_EXPIRE",e[e.TOKEN_EXPIRED=10]="TOKEN_EXPIRED",e[e.TOKEN_SILENTLY_RENEWED=11]="TOKEN_SILENTLY_RENEWED",e[e.USER_JOINED=12]="USER_JOINED",e[e.USER_LEFT=13]="USER_LEFT",e[e.ERROR_MICROPHONE_PERMISSIONS_DENIED=14]="ERROR_MICROPHONE_PERMISSIONS_DENIED",e[e.WARNING_MICROPHONE_LEVELS_HIGH_AND_MUTED=15]="WARNING_MICROPHONE_LEVELS_HIGH_AND_MUTED",e[e.UNMUTE=16]="UNMUTE",e[e.MUTE=17]="MUTE",e[e.ERROR_ON_LEAVE=18]="ERROR_ON_LEAVE",e[e.SYSTEM_INCOMPATIBLE=19]="SYSTEM_INCOMPATIBLE",e[e.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW=20]="WARNING_AUDIO_INPUT_LEVEL_TOO_LOW",e[e.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW=21]="WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW",e[e.WARNING_SEND_AUDIO_BITRATE_TOO_LOW=22]="WARNING_SEND_AUDIO_BITRATE_TOO_LOW",e[e.WARNING_RECV_AUDIO_DECODE_FAILED=23]="WARNING_RECV_AUDIO_DECODE_FAILED",e[e.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER=24]="WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER",e[e.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER=25]="WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER",e[e.WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER=26]="WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER",e[e.WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER=27]="WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER",e))(a||{}),i=(e=>(e[e.NONE=0]="NONE",e[e.HEADPHONES=1]="HEADPHONES",e[e.FULL=2]="FULL",e))(i||{}),o=(e=>(e.ERROR="error",e.WARNING="warning",e.MESSAGE="message",e.SUCCESS="success",e.PENDING="pending",e))(o||{}),s=(e=>(e[e.DONE=100]="DONE",e[e.STARTED=1]="STARTED",e[e.NOT_STARTED=0]="NOT_STARTED",e[e.DISK_ERROR=-1]="DISK_ERROR",e[e.NETWORK_ERROR=-2]="NETWORK_ERROR",e))(s||{})},493536:(e,r,n)=>{},352898:(e,r,n)=>{n.d(r,{Fi:()=>o,V0:()=>a,dN:()=>i,m2:()=>s,rj:()=>l});var a=(e=>(e.ADMIN="admin",e.DIRECTORY="directory",e))(a||{}),i=(e=>(e.TEAMS="teams",e))(i||{});let o=["teams"];var s=(e=>(e.TEAMS="teams",e.MEMBERS="members",e.LIBRARIES="libraries",e.SETTINGS="settings",e))(s||{});let l=["teams","members","libraries"]},18993:(e,r,n)=>{n.d(r,{aY:()=>R,bE:()=>O});var a=n(411855),i=n(188507),o=n(67151),s=n(646240),l=n(915440),c=n(662275),d=n(756085);n(335682);var u=n(860178),m=n(99506),p=n(279453),h=n(643067),_=n(556261),g=n(56099),f=n(215822);n(829632);var E=n(554294),y=n(802257),b=n(507956),I=n(154254),T=n(939863),v=n(175290),S=n(553015),w=n(809840),A=n(237870),N=n(585878),C=(e=>(e.STOP_AUTO_RUN_FROM_USER="stop-auto-run-from-user",e.STOP_AUTO_RUN_FROM_ORG="stop-auto-run-from-org",e.CONFIRM_REPLACE="confirm-replace",e.ENABLE_AUTO_RUN="enable-auto-run",e))(C||{});let L=(0,A.Ju)(function({commonShowModalArgs:e,newPluginName:r,autoRunModalType:n}){let s,l;let d=(0,i.wA)(),u=()=>{y.s.updateUserAutoRunPluginId(e.pluginID,m.xw.NONE),d(c.Lo())},p=()=>d(c.Lo()),h=(0,_.yN)({migrationGroup:g.L.GROUP_5,component:"AutoRunConfirmModal",attribute:"orgName",legacy:(e,r)=>r?.name||void 0,migrated:(e,r)=>e?.key.type===m.OL.ORG?r?.name:void 0}),f={currentAutoRunPluginName:a.createElement(w.E,{fontWeight:"bold"},e.currentAutoRunPluginName)},E={orgName:a.createElement(w.E,null,h||""),orgPluginName:a.createElement(w.E,{fontWeight:"bold"},e.orgPluginName)},b={orgPluginName:a.createElement(w.E,{fontWeight:"bold"},e.orgPluginName),newPluginName:a.createElement(w.E,{fontWeight:"bold"},r),orgName:a.createElement(w.E,null,h||"")};switch(n){case"stop-auto-run-from-user":s=a.createElement(a.Fragment,null,a.createElement(w.E,{color:"default",fontWeight:"medium"},(0,T.tx)("dev_handoff.autorun_confirm_modal.stop_auto_run_desc",f)),a.createElement("div",{className:I.cx.mt16.$},a.createElement(v.Y,{direction:"horizontal",horizontalAlignItems:"end",height:"hug-contents"},a.createElement(S.$,{variant:"secondary",onClick:p},(0,T.t)("dev_handoff.autorun_confirm_modal.cancel")),a.createElement(S.$,{variant:"primary",onClick:()=>{u(),d((0,c.to)({type:L,data:{commonShowModalArgs:e,autoRunModalType:"enable-auto-run"}}))}},(0,T.t)("dev_handoff.autorun_confirm_modal.stop_auto_run")))));break;case"enable-auto-run":s=a.createElement(a.Fragment,null,a.createElement(w.E,{color:"default",fontWeight:"medium"},(0,T.tx)("dev_handoff.autorun_confirm_modal.enable_auto_run_desc",E)),a.createElement("div",{className:I.cx.mt16.$},a.createElement(v.Y,{direction:"horizontal",horizontalAlignItems:"end",height:"hug-contents"},a.createElement(S.$,{variant:"secondary",onClick:p},(0,T.t)("dev_handoff.autorun_confirm_modal.dont_enable")),a.createElement(S.$,{variant:"primary",onClick:()=>{y.s.updateUserAutoRunPluginId(e.pluginID,m.xw.INHERIT),d(c.Lo())}},(0,T.t)("dev_handoff.autorun_confirm_modal.enable_auto_run")))));break;case"confirm-replace":s=a.createElement(a.Fragment,null,a.createElement(w.E,{color:"default",fontWeight:"medium"},(0,T.tx)("dev_handoff.autorun_confirm_modal.confirm_replace",b)),a.createElement("div",{className:I.cx.mt16.$},a.createElement(v.Y,{direction:"horizontal",horizontalAlignItems:"end",height:"hug-contents"},a.createElement(S.$,{variant:"secondary",onClick:p},(0,T.t)("dev_handoff.autorun_confirm_modal.cancel")),a.createElement(S.$,{variant:"primary",onClick:()=>{y.s.updateUserAutoRunPluginId(e.pluginID,m.xw.OVERRIDE),d(c.Lo())}},(0,T.t)("dev_handoff.autorun_confirm_modal.replace")))));break;case"stop-auto-run-from-org":s=a.createElement(a.Fragment,null,a.createElement(w.E,{color:"default",fontWeight:"medium"},(0,T.tx)("dev_handoff.autorun_confirm_modal.stop_auto_run_from_org",E)),a.createElement("div",{className:I.cx.mt16.$},a.createElement(v.Y,{direction:"horizontal",horizontalAlignItems:"end",height:"hug-contents"},a.createElement(S.$,{variant:"secondary",onClick:p},(0,T.t)("dev_handoff.autorun_confirm_modal.cancel")),a.createElement(S.$,{variant:"primary",onClick:u},(0,T.t)("dev_handoff.autorun_confirm_modal.stop_auto_run")))));break;default:(0,o.xb)(n)}switch(n){case"stop-auto-run-from-user":case"stop-auto-run-from-org":l=(0,T.t)("dev_handoff.autorun_confirm_modal.title_stop_auto_run");break;case"confirm-replace":l=(0,T.t)("dev_handoff.autorun_confirm_modal.title_replace_auto_run");break;case"enable-auto-run":l=(0,T.t)("dev_handoff.autorun_confirm_modal.title_enable_auto_run",{pluginName:e.orgPluginName});break;default:(0,o.xb)(n)}return a.createElement(N.XV,{title:l,onClose:()=>d(c.Lo()),maxWidth:360},a.createElement("div",{className:I.cx.p16.$,"data-testid":"autorun-confirm-modal"},s))},"AutoRunConfirmModal");function O(e){let r=e?.plugin_id??"",n=e?.name??"",l=function(){let e=P(),r=D(),n=(0,_.b_)({component:"usePluginToAutoRun",migrationGroup:g.L.GROUP_11}),a=u.iZ()?.id;if(!(e.loaded&&r.loaded))return{loaded:!1,plugin:null};let i=null;switch(e.autoRunPrefs?.autoRunPluginBehavior){case m.xw.NONE:i=null;break;case m.xw.OVERRIDE:i=e.autoRunPrefs.autoRunPlugin;break;case m.xw.INHERIT:default:i=r.autoRunPrefs?.autoRunPlugin??null}let o=i?(0,d.mf)(i,n??"",a??"",null)??null:null;return{loaded:!0,plugin:R(o)?o:null}}(),p=D(),h=(0,b.ks)(),f=h&&l.plugin?.plugin_id===r,I=(0,s.Xr)(E.Lx),T=P(),v=(0,i.wA)();return{isPluginSetToAutoRun:f,callback:a.useCallback(()=>{if(!h||(I(!0),!l.loaded||!p.loaded))return;let e=T.autoRunPrefs?.autoRunPluginBehavior,a={pluginID:r,orgPluginName:p.autoRunPrefs?.autoRunPlugin.currentPluginVersion?.name||"",currentAutoRunPluginName:l.plugin?.name||""};switch(e){case void 0:case m.xw.NONE:y.s.updateUserAutoRunPluginId(r,m.xw.OVERRIDE);break;case m.xw.OVERRIDE:r!==l.plugin?.plugin_id?y.s.updateUserAutoRunPluginId(r,m.xw.OVERRIDE):p.autoRunPrefs?v((0,c.to)({type:L,data:{commonShowModalArgs:a,autoRunModalType:C.STOP_AUTO_RUN_FROM_USER}})):y.s.updateUserAutoRunPluginId(r,m.xw.NONE);break;case m.xw.INHERIT:p.autoRunPrefs?r!==p.autoRunPrefs.autoRunPluginId?v((0,c.to)({type:L,data:{commonShowModalArgs:a,newPluginName:n,autoRunModalType:C.CONFIRM_REPLACE}})):v((0,c.to)({type:L,data:{commonShowModalArgs:a,autoRunModalType:C.STOP_AUTO_RUN_FROM_ORG}})):y.s.updateUserAutoRunPluginId(r,m.xw.OVERRIDE);break;default:(0,o.xb)(e)}},[h,I,l.loaded,l.plugin?.name,l.plugin?.plugin_id,p.loaded,p.autoRunPrefs,T.autoRunPrefs?.autoRunPluginBehavior,r,v,n])}}function R(e){return e&&(0,f.UH)(e)}function P(){let e=(0,u.iZ)();return k((0,l.Rs)(p.Sc8,{targetOrgId:null,targetUserId:e?.id??""},{enabled:!!e?.id}))}function D(e){let r=(0,_.yN)({attribute:"id,isEnterprise",component:"useOrgAutoRunPlugin",migrationGroup:g.L.GROUP_11,legacy:(e,r)=>({id:r?.id,isEnterprise:(0,h.kA)(r)}),migrated:e=>({id:e?.key.type!==m.OL.ORG?void 0:e?.key.parentId??void 0,isEnterprise:e?.tier===m.Ag.ENTERPRISE})}),n=(0,l.Rs)(p.Sc8,{targetOrgId:r?.id??"",targetUserId:null},{enabled:r.isEnterprise});return r.isEnterprise?k(n,e):{loaded:!0,autoRunPrefs:null}}function k(e,r){if("loaded"!==e.status)return{loaded:!1,autoRunPrefs:null};let n=e.data.pluginPreferences,a=!!(r||n?.autoRunEnabled);return n&&n.autoRunPluginId&&n.autoRunPlugin&&a?{loaded:!0,autoRunPrefs:{autoRunPluginId:n.autoRunPluginId,autoRunPluginBehavior:n.autoRunBehavior,autoRunPlugin:n.autoRunPlugin}}:{loaded:!0,autoRunPrefs:null}}},656399:(e,r,n)=>{n.d(r,{Q:()=>d});var a=n(411855),i=n(171812);n(268537),n(46481),n(939863);var o=n(308977),s=n(92597);n(318812);var l=n(99506);n(498606);var c=n(756689);function d(){let{setCodegenSettings:e,localCodegenSettings:r}=(0,c.VR)(),n=(0,o.v4)(),d=(0,s.gc)(),u=a.useMemo(()=>r?.behavior===l.Rc.OVERRIDE&&(0,i.he)(r?.language,n)&&(0,i.he)(r?.preferences,d),[n,d,r]);return{updateDefaultCodegenSettings:a.useCallback(()=>{e({behavior:u?l.Rc.INHERIT:l.Rc.OVERRIDE,language:n,preferences:d})},[n,d,u,e]),isSetToDefault:u}}n(298543),n(227795)},176626:(e,r,n)=>{n.d(r,{Ew:()=>a.E,IN:()=>c.IN,L_:()=>o.L,VY:()=>s.V,Wh:()=>c.Wh,Yx:()=>l.Y,_x:()=>i._x,gH:()=>c.gH,mN:()=>i.mN});var a=n(8481),i=n(559497);n(804926);var o=n(678003),s=n(18795),l=n(122296),c=n(396635)},118658:(e,r,n)=>{var a=n(411855),i=n(250821),o=n(110610),s=n(782186),l=n(109388),c=n(188507),d=n(939683),u=n(44948),m=n(820286),p=n(374626),h=n(268537),_=n(192437),g=n(154254),f=n(939863),E=n(785315),y=n(256975),b=n(738269),I=n(986270),T=n(902139),v=n(802915),S=n(798099),w=n(780700);n(756085);var A=n(318812),N=n(555328),C=n(498606),L=n(554294);n(756689);var O=n(978527),R=n(507956),P=n(728587),D=n(298543),k=n(7959),M=n(76158),F=n(76154),x=n(53380),U=n(362679);function B(){let e=$(),r=!!e,[n,i]=a.useState({x:0,y:0});return a.useEffect(()=>{if(r){let e=e=>{i({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)}},[r]),e?l.createPortal(a.createElement(O.V,{plugin:e,className:g.cx.h16.w16.bRadius2.$,style:{position:"fixed",left:n.x-8,top:n.y-8,pointerEvents:"none",zIndex:1e5}}),document.body):null}function V(e){let{pinnedPlugins:r,unpinPlugin:n,movePin:i,runPlugin:o}=e,s=(0,p.md)(L.be),[l,d]=a.useState(!1),m=$(),h=(0,c.wA)(),{shownPlugins:_,overflowPlugins:f}=r.length>3?{shownPlugins:r.slice(0,2),overflowPlugins:r.slice(2)}:{shownPlugins:r,overflowPlugins:[]},E=s?.plugin_id??null,y=f.findIndex(e=>e.plugin_id===E);if(-1!==y){let e=f[y];m||f.splice(y,1),_.push(e)}let b=_[_.length-1]?.plugin_id,T=(0,u.k9)(()=>new Set(r.map(e=>e.plugin_id)),[r]);return a.useEffect(()=>{h(I.Vg({resourceType:N.bD.PLUGIN,resourceIds:Array.from(T)}))},[T,h]),a.createElement("div",{className:g.cx.flex.flexRow.flexGrow1.itemsEnd.$,"data-testid":"pinned-plugins"},a.createElement("div",{className:g.cx.hFull.wFull.flex.flexRow.justifyEnd.alignCenter.$},a.createElement(K,{target:{type:"begin"},variant:"vertical"}),_.map(e=>{let r=e.plugin_id===E&&!!m&&-1!==y;return a.createElement("div",{key:e.plugin_id,style:{visibility:r?"hidden":"visible",display:"contents"}},a.createElement(G,{plugin:e,unpinPlugin:n,movePin:i,runPlugin:o,setIsDropdownShown:d}),a.createElement(K,{target:{type:"after",id:e.plugin_id},variant:"vertical",disabled:r}))}),f.length>0&&a.createElement(H,{isDropdownShown:!!m||l,setIsDropdownShown:d,plugins:f,unpinPlugin:n,lastShownPluginID:b,movePin:i,runPlugin:o})))}function G({plugin:e,unpinPlugin:r,movePin:n,runPlugin:o,setIsDropdownShown:s}){let l=(0,w.Gt)(e.plugin_id,"pinned"),u=(0,p.md)(L.be),m=u?.plugin_id??null,[h,_]=(0,p.fp)(E.H),f=(0,d.U)(),I=a.useRef(null),S=(0,y._I)(),N=(0,R.ks)()&&!S,D=(0,c.wA)(),k=(0,A.Um)(),U=(0,v.p)(e.plugin_id,l),B=U.length>0,V=(0,F.yG)(e.plugin_id,"pinned")&&B,G=a.useCallback(r=>{if(B){V?D(b.oB()):D((0,F.dr)({pluginId:e.plugin_id,tileType:"pinned"}));return}l()},[B,l,V,D,e.plugin_id]),[{isDragging:H},K]=(0,i.i)(()=>({type:"pinned-plugin",collect:e=>({isDragging:!!e.isDragging()}),item:e,canDrag:()=>m!==e.plugin_id&&!N,end:(r,a)=>{let i=a.getDropResult();a.didDrop()&&i&&n(e.plugin_id,i)}}),[N,n,m,e.plugin_id]),Y=k?.type===j&&k.data.pluginId===e.plugin_id,$=a.useCallback(r=>{r.stopPropagation(),r.preventDefault(),Y?D(b.oB()):D(b.j7({type:j,data:{targetRect:r.currentTarget.getBoundingClientRect(),pluginId:e.plugin_id}}))},[D,Y,e.plugin_id]),z=I.current?.getBoundingClientRect();return a.createElement("div",{className:g.cx.relative.$,ref:I},a.createElement("button",{className:u?.plugin_id===e.plugin_id?x.TU:x.y_,"data-tooltip-type":Y||H?void 0:C.Ib.TEXT,"data-tooltip":Y||H?void 0:e.name,onClick:r=>{N?(_(E._.PLUGIN),D(T.IN({fdPreviewResource:{id:e.plugin_id,type:M.s.PLUGIN}}))):B?G(r):o&&(_(E._.PLUGIN),m!==e.plugin_id&&(l(),f("Dev Handoff Ran Pinned Plugin",{pluginId:e.plugin_id})),s(!1))},onContextMenu:$},a.createElement(O.V,{plugin:e,draggable:!1,className:g.cx.h16.w16.bRadius2.$,ref:K,style:{opacity:H?.5:1}})),Y&&a.createElement(W,{plugin:e,unpinPlugin:r}),V&&z&&a.createElement(P.j,{showPoint:!1,items:U,onSelectItem:r=>{r.callback&&(r.callback("",null,D),s(!1),f("Dev Handoff Ran Pinned Plugin Submenu",{pluginId:e.plugin_id}))},parentRect:z,dispatch:D,lean:"left"}))}function H({plugins:e,unpinPlugin:r,lastShownPluginID:n,isDropdownShown:i,setIsDropdownShown:o,movePin:s,runPlugin:l}){let c=a.useRef(null);return a.useEffect(()=>{let e=e=>{c.current&&!c.current.contains(e.target)&&o(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[o]),a.createElement(a.Fragment,null,a.createElement("div",{className:x.zA,ref:c},a.createElement(k.YW,{svg:U.A,onClick:()=>o(!i),onMouseDown:S.dG,recordingKey:"overflow_pins",selected:!1,tooltipForScreenReadersOnly:!0,"data-tooltip-type":C.Ib.TEXT,"data-tooltip":(0,f.t)("dev_handoff.inspect_panel.more_plugins")}),i&&a.createElement("div",{className:x.Wm},a.createElement(K,{target:{type:"after",id:n},variant:"horizontal"}),e.map(e=>a.createElement(a.Fragment,{key:e.plugin_id},a.createElement(G,{plugin:e,unpinPlugin:r,movePin:s,runPlugin:l,setIsDropdownShown:o}),a.createElement(K,{target:{type:"after",id:e.plugin_id},variant:"horizontal"}))))))}function W({plugin:e,unpinPlugin:r}){let n=(0,A.Um)();return a.createElement(D.Cf,{targetRect:n?.data.targetRect,lean:"left",minWidth:64,maxWidth:120,disableDropdownScrollContainer:!0,propagateCloseClick:!0},a.createElement(h.c$,{onClick:()=>r(e.plugin_id)},(0,f.tx)("dev_handoff.inspect_panel.unpin")))}function K({target:e,variant:r,disabled:n=!1}){let[{isOver:i},s]=(0,o.H)(()=>({accept:"pinned-plugin",drop:()=>e,collect:e=>({isOver:!!e.isOver()}),canDrop:()=>!n}),[e,n]),l={position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",flexGrow:"begin"===e.type?1:0,..."vertical"===r?"begin"===e.type?{position:"relative",justifyContent:"end",minWidth:16,height:32,marginRight:-8}:{width:16,height:32,top:0,left:-8}:{width:32,height:16,top:-8,left:0}};return a.createElement("div",{style:{position:"relative",flexGrow:"begin"===e.type?1:0,width:0,height:0,display:"flex",overflow:"visible",zIndex:1}},a.createElement("div",{style:l,ref:s},i&&a.createElement(Y,{variant:r,target:e})))}function Y({variant:e,target:r}){return a.createElement("div",{style:{background:"var(--color-icon-brand)",..."horizontal"===e?{height:2,width:32}:{height:32,width:2},..."begin"===r.type?{marginRight:6}:{}}})}function $(){let e=(0,s.u)(),[r,n]=a.useState(null);return a.useEffect(()=>e.getMonitor().subscribeToStateChange(()=>{n(e.getMonitor().getItem())}),[e,n]),r}a.memo(function(e){return!function(){let[e,r]=a.useState(!1);return a.useEffect(()=>{let e=requestAnimationFrame(()=>{r(!0)});return()=>cancelAnimationFrame(e)},[]),e}()?null:a.createElement(_.tH,{boundaryKey:"PinnedPlugins",fallback:a.createElement(a.Fragment,null)},a.createElement(m.hh,null,a.createElement(V,{...e}),a.createElement(B,null)))});let j="PINNED_PLUGIN_DROPDOWN"},756689:(e,r,n)=>{n.d(r,{VR:()=>L});var a=n(411855),i=n(188507),o=n(432258),s=n(939683);n(404843);var l=n(915440),c=n(27087);n(986291);var d=n(256975),u=n(5605);n(370934),n(92597);var m=n(931828),p=n(756085),h=n(785899);n(843495),n(335682);var _=n(860178),g=n(99506),f=n(279453),E=n(556261),y=n(56099);n(215822),n(285334);var b=n(507956),I=n(67151),T=n(299321),v=n(757028),S=n(966712);let w={language:{type:"first-party",id:"WEB"},preferences:{customSettings:null,unit:g.tK.PIXEL,scaleFactor:null},behavior:g.Rc.INHERIT};class A{constructor(e,r,n){if(this.workingPreferences=e,this.parentPreferences=r,this.parentEnabledPreferences=n,!r||!n)return;let{codegenEnabled:a,pinnedPluginsEnabled:i}={...n},o={...r};a||(o.codegenSettings=null),!i&&(0,S.kc)().dev_mode_org_pinned_plugins_ent&&(o.pins=[],o.removedInheritedPins=[]),this.parentPreferences=o}orgPinsNotInUserPins(){let e=[];for(let r of this.parentPreferences?.pins??[])this.workingPreferences.pins.find(e=>e.pluginId===r.pluginId)||e.push(r);return e}get pinnedPluginIDs(){let e=[...this.workingPreferences.pins,...this.orgPinsNotInUserPins()],r=new Set(this.workingPreferences.removedInheritedPins);return e.filter(e=>!r.has(e.pluginId)&&(!e.inherited||N(this.parentPreferences,e.pluginId))).map(e=>e.pluginId)}get codegenSettings(){return this.parentPreferences&&this.workingPreferences.codegenSettings?.behavior!==g.Rc.OVERRIDE?this.parentPreferences?.codegenSettings??null:this.workingPreferences.codegenSettings}update(e){return new A((0,v.Ay)(this.workingPreferences,e),this.parentPreferences,this.parentEnabledPreferences)}pinPlugin(e){var r;let n=(r=this.workingPreferences,r?.pins.findIndex(r=>r.pluginId===e&&r.inherited));return null!=n&&-1!==n?this.update(r=>{r.pins[n].inherited=!1,r.removedInheritedPins=r.removedInheritedPins.filter(r=>r!==e)}):N(this.workingPreferences,e)?this:this.update(r=>{r.pins.push({pluginId:e,inherited:!1}),r.removedInheritedPins=r.removedInheritedPins.filter(r=>r!==e)})}unpinPlugin(e){return this.update(r=>{r.pins=r.pins.filter(r=>r.pluginId!==e),N(this.parentPreferences,e)&&r.removedInheritedPins.push(e)})}movePin(e,r){return"after"===r.type&&e===r.id||"begin"===r.type&&this.pinnedPluginIDs[0]===e?this:this.update(n=>{let a=N(this.workingPreferences,e),i=N(this.parentPreferences,e),o=!!(!a&&i);switch(n.pins=n.pins.filter(r=>r.pluginId!==e),r.type){case"begin":n.pins.unshift({pluginId:e,inherited:o});break;case"after":{let a=n.pins.findIndex(e=>e.pluginId===r.id);if(-1!==a)n.pins.splice(a+1,0,{pluginId:e,inherited:o});else{let a=this.orgPinsNotInUserPins(),i=a.findIndex(e=>e.pluginId===r.id);if(-1===i)throw Error("Invalid pin to move after");n.pins.push(...a.slice(0,i+1).map(e=>({...e,inherited:!0})),{pluginId:e,inherited:o})}}}})}get localCodegenSettings(){if(!this.codegenSettings)return null;let e=this.codegenSettings?.language,r=this.lgLanguageToLocalLanguage(e);if(!r)return null;let n=this.codegenSettings.preferences,a=this.lgUnitToLocalUnit(n.unit);return{language:r,preferences:{scaleFactor:n.scaleFactor??void 0,customSettings:n.customSettings??void 0,unit:a},behavior:this.codegenSettings.behavior}}setCodegenSettingLanguage(e){return this.update(r=>{let n=this.localLanguageTypeToLgLanguageType(e.type);if(!n)throw Error("Invalid language type");let a={...e,type:n,pluginLanguage:e.pluginLanguage??null};r.codegenSettings={language:a,preferences:this.codegenSettings?.preferences||w.preferences,behavior:this.codegenSettings?.behavior||w.behavior}})}setCodegenSettingUnit(e){return this.update(r=>{if(!this.codegenSettings)return;let n=this.localUnitToLgUnit(e);if(!n)throw Error("Invalid unit");let a=this.codegenSettings.preferences?{...this.codegenSettings.preferences,unit:n}:{scaleFactor:null,unit:n,customSettings:null};r.codegenSettings={language:this.codegenSettings.language,preferences:a,behavior:this.codegenSettings.behavior}})}setCodegenSettingCustomSettings(e,r){return this.update(n=>{if(!this.codegenSettings)return;let a=this.localLanguageTypeToLgLanguageType(e.type);if(!a)throw Error("Invalid language type");let i={...e,type:a,pluginLanguage:e.pluginLanguage??null},o={scaleFactor:this.codegenSettings.preferences?.scaleFactor??null,unit:this.codegenSettings.preferences?.unit??null,customSettings:{...this.codegenSettings.preferences?.customSettings,...r.customSettings}};n.codegenSettings={language:i,preferences:o,behavior:this.codegenSettings.behavior}})}setCodegenSetting(e){return this.update(r=>{if(!e){r.codegenSettings=null;return}let{behavior:n,language:a,preferences:i}=e,o=this.localLanguageTypeToLgLanguageType(a.type);if(!o)throw Error("Invalid language type");let s={...a,type:o,pluginLanguage:a.pluginLanguage??null},l={unit:this.localUnitToLgUnit(i.unit),customSettings:i.customSettings??null,scaleFactor:i.scaleFactor??null};r.codegenSettings={behavior:n,language:s,preferences:l}})}localUnitToLgUnit(e){switch(e){case T.tKW.PIXEL:return g.tK.PIXEL;case T.tKW.SCALED:return g.tK.SCALED;default:return null}}lgUnitToLocalUnit(e){switch(e){case g.tK.PIXEL:return T.tKW.PIXEL;case g.tK.SCALED:return T.tKW.SCALED;default:return}}localLanguageTypeToLgLanguageType(e){switch(e){case"first-party":return g.h9.FIRST_PARTY;case"published-plugin":return g.h9.PUBLISHED_PLUGIN;default:return null}}lgLanguageToLocalLanguage(e){let r;switch(e.type){case g.h9.FIRST_PARTY:r={id:e.id,type:e.type,pluginLanguage:e.pluginLanguage??void 0};break;case g.h9.PUBLISHED_PLUGIN:if(!e.pluginLanguage)return null;r={id:e.id,type:e.type,pluginLanguage:e.pluginLanguage};break;default:(0,I.xb)(e.type)}return r}serialize(){return{pins:this.workingPreferences.pins.map(e=>({pluginId:e.pluginId,inherited:e.inherited})),removedInheritedPins:Array.from(new Set(this.workingPreferences.removedInheritedPins)),codegenSettings:this.workingPreferences.codegenSettings}}}function N(e,r){return e?.pins.some(e=>e.pluginId===r)}let C={pins:[],removedInheritedPins:[],codegenSettings:null};function L(){let{loaded:e,preferences:r}=function(){let e=(0,_.TA)(),{loaded:r,preferences:n}=R((0,l.Rs)(f.JuA,{targetOrgId:null,targetUserId:e}));return{loaded:r,preferences:n}}(),{loaded:n,preferences:c,codegenEnabled:h,pinnedPluginsEnabled:I}=function(){let e=(0,E.yN)({migrationGroup:y.L.GROUP_6,component:"useLGOrgPluginPreferences",attribute:"targetOrgId",legacy:(e,r)=>r?.id??null,migrated:e=>e?.key.type===g.OL.ORG?e.key.parentId??null:null});return R((0,l.Rs)(f.JuA,{targetOrgId:e,targetUserId:null}))}(),T=(0,i.wA)(),v=(0,s.U)(),S=(0,b.ks)(),w=(0,d._I)(),N=S&&!w;(0,a.useEffect)(()=>{r&&D(null)},[r]);let L=(0,a.useMemo)(()=>new A(r??C,c??null,{codegenEnabled:h,pinnedPluginsEnabled:I}),[r,c,h,I]),[P,D]=(0,a.useState)(null),k=(0,a.useMemo)(()=>{let e=new Map;for(let n of[...r?.pins??[],...c?.pins??[]])n.plugin&&e.set(n.pluginId,n.plugin);return e},[c?.pins,r?.pins]),M=(0,a.useMemo)(()=>P?.pinnedPluginIDs??L.pinnedPluginIDs,[L,P]),F=(0,E.b_)({migrationGroup:y.L.GROUP_6,component:"usePluginPreferences"})??null,x=(0,_.TA)(),U=(0,p.YN)(),B=(0,a.useMemo)(()=>M.map(e=>{let r=k.get(e);if(!r||!r.publishingStatus||r.publishingStatus!==g.KB.APPROVED_PUBLIC&&r.publishingStatus!==g.KB.ORG_PRIVATE)return null;let n=(0,p.mf)(r,F,x,null);return n&&(N||U(n))?n:null}).filter(o.Vq),[M,k,F,x,N,U]),V=e=>{D(e),O(e.serialize()).catch(()=>{D(null)})};return{pinnedPlugins:B,unpinPlugin(e){V(L.unpinPlugin(e)),v("Dev Handoff Unpin Plugin",{pluginID:e})},pinPlugin(e){T(m.b({[u.xb]:!0})),V(L.pinPlugin(e)),v("Dev Handoff Pin Plugin",{pluginID:e})},movePin(e,r){V(L.movePin(e,r)),v("Dev Handoff Moved Plugin",{pluginID:e})},localCodegenSettings:L.localCodegenSettings,setCodegenSettings(e){V(L.setCodegenSetting(e))},setCodegenSettingsLanguage(e){V(L.setCodegenSettingLanguage(e))},setCodegenSettingsUnit(e){V(L.setCodegenSettingUnit(e))},setCodegenSettingsCustomSettings(e,r){V(L.setCodegenSettingCustomSettings(e,r))},loaded:e&&n}}async function O(e){await c.Ay.post("/api/plugin_preferences/user",{preferences:e})}function R(e){if("loaded"!==e.status)return{loaded:!1,preferences:null,codegenEnabled:!1,pinnedPluginsEnabled:!1};let r=e.data.pluginPreferences,{codegenEnabled:n,pinnedPluginsEnabled:a}=r||{};return{loaded:!0,preferences:r?.preferences,codegenEnabled:n??!1,pinnedPluginsEnabled:a??!1}}h.qZ.CSS,g.h9.FIRST_PARTY,g.tK.PIXEL,g.Rc.INHERIT},118034:(e,r,n)=>{n.d(r,{qg:()=>d,vX:()=>g,xF:()=>m});var a=n(171812),i=n(776621),o=n(1469),s=n(479296),l=n(13517),c=n(743794);async function d(e,r,n){let o={fonts:{},images:{}},s=new Map,l=null,d=e();for(let u=0;u<20&&(function(e,r){let n=e=>{if(!e)return;let{children:a,fillSrc:i,textStyle:o}=e.renderMetaData;if(o&&(p(r,o.style),o.ranges.forEach(e=>p(r,e.style))),i&&!r.images.hasOwnProperty(i)&&(r.images[i]={hasLoaded:!1}),a)for(let e of(0,c.MI)(a))n(e)};n(e)}(d.rootNode,o),(Object.values(o.fonts).some(({hasLoaded:e})=>!e)||Object.values(o.images).some(({hasLoaded:e})=>!e))&&await h(o,s,r,n),l=d,d=e(),!(0,a.c2)(l?.syncedState,d.syncedState));u++)19===u&&(0,i.x1)("resources","Loading reconciliation resources reached max iterations");return{imgInfoMap:s,vRoot:d}}async function u(e,r,n){try{let a=await m(e,n),i=r.createImage(a).hash,{width:o,height:s}=(await Promise.all([g(a)]))[0];return{hash:i,width:o,height:s}}catch(e){r.logWarning("Unable to load image. See the warning below for more info."),r.logWarning(e)}return null}let m=(0,s.n)(async(e,r)=>{if(function(e){try{let r=new URL(e);return"http:"===r.protocol||"https:"===r.protocol}catch(e){return!1}}(e)){if(!(0,l.pT)(e,r))throw Error(`Image URL ${e} does not satisfy the allowedDomains specified in the manifest.json`);e=(0,o.p)(e)}let n=await fetch(e);if(!n.ok)throw Error(`Unable to fetch image. Response status: ${n.status}`);return new Uint8Array(await n.arrayBuffer())});function p(e,r){let{fontName:n}=r;if(!n)return;let a=`${n.family} ${n.style}`;e.fonts.hasOwnProperty(a)||(e.fonts[a]={fontName:n,hasLoaded:!1})}async function h(e,r,n,a){let i=async e=>{let i=await u(e,n,a);i&&r.set(e,i)},o=Object.values(e.fonts).filter(({hasLoaded:e})=>!e).map(async e=>{await n.loadFontAsync(e.fontName),e.hasLoaded=!0}),s=Object.entries(e.images).filter(([,{hasLoaded:e}])=>!e).map(async([e,r])=>{await i(e),r.hasLoaded=!0});await Promise.all([...o,...s])}let _=e=>{let r="";return[].slice.call(new Uint8Array(e)).forEach(e=>r+=String.fromCharCode(e)),window.btoa(r)};function g(e){return new Promise(r=>{let n=new Image;n.onload=()=>{r({width:n.width,height:n.height})};let a=_(e);n.src="data:image;base64,"+a})}},501256:(e,r,n)=>{n.d(r,{F5:()=>o,Rs:()=>l,Z:()=>s,nx:()=>c});var a=n(824520),i=n(23001);function o(e,r){let n=!!(e.tokens&&e.tokens.length||e.inputValue&&e.inputValue.length);return e.tokens.some(e=>e.state===i.d.ERROR)&&(n=!1),e.inputValue&&e.inputValue.length&&r(e.inputValue).state===i.d.ERROR&&(n=!1),n}function s(e){let r=[];for(let n of e.tokens){let e="string"==typeof n.content?n.content:n.content.email;r.push(e.toLowerCase())}return e.inputValue&&r.push(e.inputValue.toLowerCase()),r}function l(){return{inputValue:"",tokens:[],errorMessage:""}}function c(e=l(),r){return a.cL.matches(r)?l():a.hZ.matches(r)?{...r.payload}:a.Ox.matches(r)?{...e,tokens:e.tokens.concat(r.payload),inputValue:""}:a.pf.matches(r)?{...e,inputValue:r.payload}:a.g.matches(r)?{...e,errorMessage:r.payload}:e}},279145:(e,r,n)=>{n.d(r,{Nf:()=>b,Rn:()=>f,TY:()=>h,Yh:()=>E,c1:()=>y,fj:()=>m,jv:()=>_,pi:()=>p});var a=n(299321),i=n(966712),o=n(588169),s=n(563706),l=n(738269),c=n(293017),d=n(69961),u=n(279702);function m(e={...u.Gf},r){return l.Ts.matches(r)?u.Gf:(c.p5.matches(r)&&r.payload.appModelChanges&&-1===(e={...e,...r.payload.appModelChanges,isInitialized:!0}).currentSelectedGradientStop.index&&(e.currentSelectedGradientStop={index:0,type:a.vRS.COLOR}),e)}let p="fullscreen-menu-dropdown";function h(e){return e?.type===p}let _="quick-actions-dropdown",g=Object.create(null);function f(e){let r=g[e];return r||(r=g[e]=`actionEnabled__${e}`),r}function E(e,r){return!!e[f(r)]}function y(e,r){let n="\u{1F310}";switch(r){case"set-tool-bend":return s.Ay.mac?"\u2318":"Ctrl";case"stack-reorder-left":case"stack-counter-align-left":return"\u2190";case"stack-reorder-left-end":return"\u2325\u2190";case"stack-reorder-right":case"stack-counter-align-right":return"\u2192";case"stack-reorder-right-end":return"\u2325\u2192";case"stack-reorder-up":case"stack-counter-align-top":return"\u2191";case"stack-reorder-up-end":case"stack-reorder-down-end":return"\u2325\u2191";case"stack-reorder-down":case"stack-counter-align-bottom":return"\u2193";case"set-tool-default-desc-figjam":case"set-tool-default-desc-figma":return"V";case"set-tool-marker":return"M";case"set-tool-stamp":case"set-tool-sites-link":return"E";case"set-tool-type":return"T";case"set-tool-connector-elbowed":return"X";case"toggle-publish":return s.Ay.mac?"\u23252":"Alt+2";case"toggle-inline-preview":return"\u21E7Space";case"toggle-inline-html-preview":return"\u2325\u21E7Space";case"toggle-sidebar":if(d.nt.ui3.getValue())switch((0,o.v7)()){case a.aTn.US_QWERTY:case a.aTn.UNKNOWN:case a.aTn.DVORAK:return s.Ay.mac?"\u21E7\\":"Shift+\\"}break;case"set-tool-sites-responsive-set":return"W";case"set-tool-code-component":return"`";case"deselect-all":return"\u238B";case"multi-edit-text":return"Enter";case"page-next":if((0,i.kc)().ce_mac_page_shortcuts&&s.Ay.mac)return n+"\u2193";break;case"page-previous":if((0,i.kc)().ce_mac_page_shortcuts&&s.Ay.mac)return n+"\u2191"}if(e[r]){let n=e[r];if(n&&n.length>=1)return n[0].text}return""}function b(e){return e&&e.currentPage?e.currentPage:"0:1"}},378762:(e,r,n)=>{n.d(r,{K3:()=>m,YI:()=>u,bp:()=>c,sp:()=>p,y2:()=>d});var a=n(67151),i=n(304061),o=n(738269),s=n(293017),l=n(418914);function c(e=Object.create(null),r){if(o.Ts.matches(r)||l.a.matches(r))return Object.create(null);if(s.p5.matches(r)&&r.payload.selection){let{add:n,remove:i,replace:o}=r.payload.selection;if((0,a.KF)(!((n||i)&&o),"We expect either an add or remove OR a replace."),o)return o;let s=Object.assign(Object.create(null),e,n);for(let e in i)delete s[e];return s}return e}function d(e,r,n){for(let a in r){let r=e.get(a);r&&(0,i.hV)(r,n)}}function u(e,r,n){for(let a in r){let r=e.get(a);r&&n(r)}}function m(e,r){return!!e[r]}function p(e,r,n){return!!function(e,r,n){if(r[n])return e.get(n)||null;let a=null;return(0,i.Si)(e,n,e=>{if(!a&&r[e.guid]&&(a=e),a)return"stop"}),a}(e,r,n)}},272917:(e,r,n)=>{n.d(r,{A:()=>s});var a=n(980820),i=n(875458),o=n(576144);function s(e={},r){if(i.D.matches(r)){let n={...e};for(let a of r.payload)n[a.file_key]={...e[a.file_key],...a};return n}return e}(0,a.nF)(async(e,{fileKey:r})=>{let n=e.getState(),a=n.currentUserOrgId,s=n.currentTeamId;if(r in n.recentCustomTemplates||!a&&!s)return;let l=await o.q.getRecents({fileKeys:r,...a?{orgId:a}:s?{teamId:s}:{}});l&&l.data.meta.templates.length>0&&e.dispatch(i.D([l.data.meta.templates[0]]))})},750486:(e,r,n)=>{n.d(r,{pw:()=>u,q5:()=>d,y2:()=>m});var a=n(286640),i=n(738269),o=n(712303);let s={[o.P.VIEW_MODE]:"view-bar-view-mode-option",[o.P.SORT_MODE]:"view-bar-sort-options"};function l(e){let r=a.x4&&a.x4.getItem(e)||"{}";try{return JSON.parse(r)}catch(e){return{}}}function c(e,r){if(a.x4)try{let n=JSON.stringify(r);a.x4.setItem(e,n)}catch(e){}return r}function d(e={},r){if(i.Qv.matches(r))return l(s[o.P.VIEW_MODE]);if(i.uV.matches(r)){let n={...e,[r.payload.viewId]:r.payload.viewMode};return c(s[o.P.VIEW_MODE],n)}return e}function u(e={},r){if(i.Qv.matches(r))return l(s[o.P.SORT_MODE]);if(i.ZR.matches(r)){let n={...e,[r.payload.viewId]:r.payload.sortMode};return c(s[o.P.SORT_MODE],n)}return e}function m(e,r,n){return r[e]??n}},166748:(e,r,n)=>{var a=n(547807),i=n(27087),o=n(594469);new class{constructor(){this.ColorPaletteSchemaValidator=(0,a.YV)("ColorPaletteSchemaValidator",o.kfm.sinatra(),null)}createColorPalette(e){return this.ColorPaletteSchemaValidator.validate(async({xr:r})=>await r.post("/api/color_palettes",a.td.toAPIParameters(e)))}updateColorPalette(e){return this.ColorPaletteSchemaValidator.validate(async({xr:r})=>await r.put(`/api/color_palettes/${e.uuid}`,a.td.toAPIParameters(e)))}async deleteColorPalette(e){await i.Ay.del(`/api/color_palettes/${e}`)}setUserColorPaletteOverrideForFile(e,r){return i.Ay.post(`/api/files/${e}/color_palette`,a.td.toAPIParameters({colorPaletteUuid:r}))}async setTeamDefaultPalette(e,r){await i.Ay.post(`/api/teams/${e}/default_color_palette`,a.td.toAPIParameters({colorPaletteUuid:r}))}async clearTeamDefaultPalette(e){await i.Ay.del(`/api/teams/${e}/default_color_palette`)}}},767518:(e,r,n)=>{n.d(r,{U:()=>o});var a=n(547807),i=(e=>(e.VIEW_OR_PENDING="view_or_pending",e.VIEW_PROTOTYPE_OR_PENDING="view_prototype_or_pending",e))(i||{});let o=new class{constructor(){this.ContactsSchemaValidator=(0,a.vh)(),this.AtMentionsSchemaValidator=(0,a.vh)(),this.searchAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.AtMentionsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/at_mentions",a.td.toAPIParameters(e)))),this.getAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.AtMentionsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/at_mentions",a.td.toAPIParameters(e)))),this.ShareModalSchemaValidator=(0,a.vh)(),this.searchShareModalContacts=e=>this.ShareModalSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/share",a.td.toAPIParameters(e))),this.getShareModalContacts=e=>this.ShareModalSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/share",a.td.toAPIParameters(e))),this.FeedAtMentionsSchemaValidator=(0,a.vh)(),this.getFeedAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedAtMentionsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/feed_at_mentions",a.td.toAPIParameters(e)))),this.searchFeedAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedAtMentionsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/feed_at_mentions",a.td.toAPIParameters(e)))),this.FaceStampsMentionSchemaValidator=(0,a.vh)(),this.searchFaceStamps=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FaceStampsMentionSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/face_stamps",a.td.toAPIParameters(e)))),this.getRecentFaceStamps=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FaceStampsMentionSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/face_stamps",a.td.toAPIParameters(e)))),this.FeedPostCreatorsSchemaValidator=(0,a.vh)(),this.getFeedPostCreators=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedPostCreatorsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/feed_post_creators",a.td.toAPIParameters(e)))),this.searchFeedPostCreators=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedPostCreatorsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/feed_post_creators",a.td.toAPIParameters(e))))}getContacts(e){return this.ContactsSchemaValidator.validate(async({xr:r})=>await r.get("/api/contacts",a.td.toAPIParameters(e)))}}},988771:(e,r,n)=>{n.d(r,{Y:()=>o});var a=n(547807),i=n(27087);let o=new class{constructor(){this.GenerateImageTokenSchemaValidator=(0,a.vh)()}getGenerateImageToken(e){return this.GenerateImageTokenSchemaValidator.validate(async({xr:r})=>await r.get(`/api/feed_posts/generate_image_token/${e.fileKey}`,a.td.toAPIParameters({org_id:e.orgId,token_version:e.tokenVersion})))}markFeedViewed(e){i.Ay.post(`/api/feed_posts/${e.publicUuid}/mark_viewed`)}vote(e){i.Ay.post(`/api/feed_posts/${e.publicUuid}/vote`,{vote_option:e.voteOption})}}},877627:(e,r,n)=>{n.d(r,{If:()=>s});var a=n(547807),i=n(330654);let o=i.object({save_location:i.string(),folder_name:i.string().optional(),org_id:i.string().optional()}),s=(0,a.YV)("ClaimTryFileSchemaValidator",o,null,!0);new class{claimTryFile(e){return s.validate(async({xr:r})=>await r.put(`/api/file/claim/${e.fileKey}`))}}},640209:(e,r,n)=>{n.d(r,{Gh:()=>m});var a=n(38329),i=n(966712),o=n(547807),s=n(330654),l=n(642481),c=n(707465);let d=s.object({userPromptRaw:s.string(),jsx:s.string().optional(),theme:s.record(s.any()).optional(),trace:s.any().optional(),layoutJsx:s.string().optional(),v3Components:s.record(s.string()).optional(),userPrompt:s.string().optional(),userPromptFull:s.string().optional(),systemPrompt:s.string().optional()}),u=s.object({prompt_version:s.string().optional(),eval_results:s.array(d)});s.union([s.object({status:s.literal("pending")}),s.object({status:s.literal("failed")}),u.extend({status:s.literal("success")})]);let m=new class{constructor(){this.FirstDraftPublishStatusSchemaValidator=(0,o.vh)(),this.FirstDraftAllKitsSchemaValidator=(0,o.vh)(),this.FirstDraftMatchGroupSchemaValidator=(0,o.vh)(),this.FirstDraftMatchPresetModesSchemaValidator=(0,o.vh)(),this.FirstDraftPublishLocalKitSchemaValidator=(0,o.vh)(),this.FirstDraftGenerateThemeV5SchemaValidator=(0,o.vh)(),this.FirstDraftAllEvalSetsSchemaValidator=(0,o.vh)(),this.FirstDraftRunEvalsSchemaValidator=(0,o.vh)(),this.FirstDraftEvalStatusSchemaValidator=(0,o.vh)(),this.FirstDraftGetRetrievedExamplesSchemaValidator=(0,o.vh)()}postFirstDraftPublishStatus({productComponentKeyToVersion:e,groupedComponentKeyToVersion:r,exampleKeyToVersion:n,variableSetKeyToVersion:o,publishType:s,kitKey:d}){let u=(0,c.U2)(a.D?.getState().selectedView);return this.FirstDraftPublishStatusSchemaValidator.validate(async({xr:a})=>await a.post("/api/first_draft/kit_status",{product_components:e,grouped_components:r,examples:n,variable_sets:o,is_local:s===l.tf.LOCAL_GENERATION,kit_key:d,type_info_version:(0,i.kc)().first_draft_direct_gen?l.Rd:l.Q6,theme_info_version:l.$5,file_key:u}))}getFirstDraftAllKits(){let e=(0,c.U2)(a.D?.getState().selectedView);return this.FirstDraftAllKitsSchemaValidator.validate(async({xr:r})=>await r.get("/api/first_draft/all_kits",o.td.toAPIParameters({file_key:e})))}getFirstDraftMatchGroup(e){let r=(0,c.U2)(a.D?.getState().selectedView);return this.FirstDraftMatchGroupSchemaValidator.validate(async({xr:n})=>await n.get("/api/first_draft/match_group",o.td.toAPIParameters({file_key:r,...e})))}postFirstDraftMatchPresetModes(e){let r=(0,c.U2)(a.D?.getState().selectedView);return this.FirstDraftMatchPresetModesSchemaValidator.validate(async({xr:n})=>await n.post("/api/first_draft/match_preset_modes",{kit_key:e.kit_key,is_local:e.is_local,user_prompt:e.user_prompt,file_key:r}))}postFirstDraftPublishLocalKit({fileKey:e,publishMetadata:r}){return this.FirstDraftPublishLocalKitSchemaValidator.validate(async({xr:n})=>await n.post(`/api/first_draft/publish_local_kit/${e}`,{publish_metadata:r,file_key:e}))}postFirstDraftGenerateThemeV5({userPrompt:e,isLocal:r,kitKey:n}){let i=(0,c.U2)(a.D?.getState().selectedView);return this.FirstDraftGenerateThemeV5SchemaValidator.validate(async({xr:a})=>await a.post("/api/first_draft/generate_theme",{user_prompt:e,is_local:r,kit_key:n,file_key:i}))}getFirstDraftAllEvalSets(){return this.FirstDraftAllEvalSetsSchemaValidator.validate(async({xr:e})=>await e.get("/api/first_draft/all_eval_sets"))}postFirstDraftRunEvals({model:e="gpt-4-turbo-2024-04-09",selectedEval:r,isLocal:n,kitKey:a,evalPrompts:i,promptVersion:o}){let s={model:e,is_local:n,kit_key:a,prompt_version:o};return i?s.eval_prompts=i:s.eval_set_id=r,this.FirstDraftRunEvalsSchemaValidator.validate(async({xr:e})=>await e.post("/api/first_draft/run_evals",s))}getFirstDraftsEvalStatus({s3Key:e}){return this.FirstDraftEvalStatusSchemaValidator.validate(async({xr:r})=>await r.post("/api/first_draft/eval_status",{s3_key:e}))}getFirstDraftRetrievedExamples({kitKey:e,isLocal:r,prompt:n}){return this.FirstDraftGetRetrievedExamplesSchemaValidator.validate(async({xr:a})=>await a.post("/api/first_draft/get_retrieved_examples",{kit_key:e,is_local:r,prompt:n}))}}},379791:(e,r,n)=>{n.d(r,{G:()=>l});var a=n(547807),i=n(330654),o=n(66037),s=(e=>(e.DEV_MODE_BETA_SUGGESTED_UPGRADES="dev_mode_beta_suggested_upgrades",e.MEMBERS_TAB="members_tab",e))(s||{});let l=new class{constructor(){this.GuestResourcesSchemaValidator=(0,a.vh)(),this.OrgUserSchemaValidator=(0,a.YV)("OrgUserSchemaValidator",o.WU,null,!1),this.UpdateOrgUsersSchemaValidator=(0,a.YV)("UpdateOrgUsersSchemaValidator",i.array(o.WU),null,!1),this.CreateStarterTeamSchemaValidator=(0,a.vh)(),this.FetchDevModeNudgesExpEntryValidator=(0,a.vh)()}getGuestResources(e){return this.GuestResourcesSchemaValidator.validate(async({xr:r})=>await r.get(`/api/org_user/${e.orgUserId}/guest_resources`))}updateOrgUser(e){let{id:r,changes:n}=e;return this.OrgUserSchemaValidator.validate(({xr:e})=>e.put(`/api/org_users/${r}`,a.td.toAPIParameters(n)))}updateOrgUsers(e){let{orgId:r,...n}=e;return this.UpdateOrgUsersSchemaValidator.validate(({xr:r})=>r.put(`/api/orgs/${e.orgId}/org_users`,a.td.toAPIParameters(n)))}createStarterTeam(){return this.CreateStarterTeamSchemaValidator.validate(({xr:e})=>e.post("/api/org_user/create_starter_team"))}postOrgUserFlags(e){let{orgUserId:r,flags:n}=e;return a._5.validate(({xr:e})=>e.post(`/api/org_users/${r}/flags`,{flags:n}))}declineDevModeSuggestedUpgrades(e){return a._5.validate(async({xr:r})=>await r.del(`/api/orgs/${e.org_id}/org_users/dev_mode_suggested_upgrades`,e))}requestOrgAccountTypeRequest(e){return a._5.validate(async({xr:r})=>await r.post(`/api/orgs/${e.org_id}/org_users/request_upgrade`,e))}getMemberCSVExport(e){return a._5.validate(({xr:r})=>r.post(`/api/orgs/${e.orgId}/export_members`))}logDevModeNudgesExperimentEntry(e){return this.FetchDevModeNudgesExpEntryValidator.validate(async({xr:r})=>await r.put(`/api/orgs/${e.org_id}/log_dev_mode_nudges_exp_entry`,e))}fetchDevModeNudgesExperimentEntry(e){return this.FetchDevModeNudgesExpEntryValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/fetch_dev_mode_nudges_exp_entry`))}}},679892:(e,r,n)=>{n.d(r,{Eh:()=>y});var a,i=n(547807),o=n(27087),s=n(330654),l=n(942506),c=n(963810),d=n(566971),u=n(66037),m=n(36816),p=n(851363);(e=>{e.isOrgInvite=function(e){return e.type===u.Wd.ORG_INVITE},e.isOrgUser=function(e){return e.type===u.Wd.ORG_USER},e.isIdpUser=function(e){return e.type===u.Wd.IDP_USER}})(a||(a={}));let h=u.Ru.pick({id:!0,user:!0,type:!0}),_=s.discriminatedUnion("type",[u.WU,l.S,d.n]),g=s.object({users:s.array(s.union([_,h])).optional(),cursor:s.ignore(),designEditorCutoff:s.ignore().optional(),whiteboardEditorCutoff:s.ignore().optional(),devModeEditorCutoff:s.ignore().optional(),totalUserCount:s.number()}),f=p.kE.pick({id:!0,name:!0,img_url:!0}),E=m.wF.pick({id:!0,team_id:!0,user:!0,active_seat_type:!0}),y=new class{constructor(){this.IdpUsersSchemaValidator=(0,i.vh)(),this.LicenseGroupsSchemaValidator=(0,i.vh)(),this.BillingDataSchemaValidator=(0,i.YV)("BillingDataSchemaValidator",c.p.nullable(),null),this.TeamsSchemaValidator=(0,i.vh)(),this.TeamSchemaValidator=(0,i.vh)(),this.EligibleUpgradesFigjamSchemaValidator=(0,i.vh)(),this.OrgNameSchemaValidator=(0,i.vh)(),this.DomainsSchemaValidator=(0,i.vh)(),this.AdminsSchemaValidator=(0,i.YV)("AdminsSchemaValidator",e=>e.array(u.WU),null,!1),this.OrgUsersPaginatedSchemaValidator=(0,i.YV)("OrgUsersPaginatedSchemaValidator",g,null,!1),this.OrgUsersPaginatedSchemaValidatorPassthrough=(0,i.vh)(),this.UserSchemaValidator=(0,i.YV)("UserSchemaValidator",u.WU,null,!1),this.OauthConnectionsSchemaValidator=(0,i.vh)(),this.ShowVatGstSchemaValidator=(0,i.vh)(),this.LicenseGroupsMembersCountsSchemaValidator=(0,i.vh)(),this.WorkspaceTeamsCountsSchemaValidator=(0,i.vh)(),this.OrgUsersCountSchemaValidator=(0,i.vh)(),this.OrgUsersFilterCountsSchemaValidator=(0,i.vh)(),this.OrgTeamsFilterCountsSchemaValidator=(0,i.vh)(),this.OrgAdminsSchemaValidator=(0,i.vh)(),this.OrgTeamsCountSchemaValidator=(0,i.vh)(),this.SetDomainCaptureSchemaValidator=(0,i.vh)(),this.EligibleUpgradesSchemaValidator=(0,i.YV)("EligibleUpgradesSchemaValidator",e=>e.object({eligible_teams:e.array(f),eligible_team_users:e.array(E)}),null,!1)}getIdpUsers(e){return this.IdpUsersSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/idp_users`))}getLicenseGroups(e){return this.LicenseGroupsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.currentOrgId}/license_groups`))}getBillingData(e){return this.BillingDataSchemaValidator.validate(async({xr:r})=>{let n=await r.get(`/api/orgs/${e.orgId}/billing_data`);return n.data.meta?n:{...n,data:{...n.data,meta:null}}})}updateOrgPaymentMethod(e){return this.BillingDataSchemaValidator.validate(async({xr:r})=>{let n=await r.put(`/api/orgs/${e.orgId}/billing_data`,e.paymentMethod);return n.data.meta?n:{...n,data:{...n.data,meta:null}}})}changeShippingAddress(e){return o.Ay.put(`/api/orgs/${e.orgId}`,{shipping_address:e.shippingAddress})}getTeams(e){return this.TeamsSchemaValidator.validate(async({xr:r})=>{let{orgId:n,...a}=e;return await r.get(`/api/orgs/${e.orgId}/teams`,i.td.toAPIParameters(a))})}getTeam(e){return this.TeamSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/teams/${e.teamId}`))}getEligibleUpgradesFigjam(){return this.EligibleUpgradesFigjamSchemaValidator.validate(async({xr:e})=>await e.get("/api/orgs/eligible_upgrades_figjam"))}getOrgName(e){return this.OrgNameSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/org_name`))}getDomains(e){return this.DomainsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.currentOrgId}/domains`))}addDomainUsers(e){return o.Ay.post(`/api/orgs/${e.currentOrgId}/add_domain_users`,{user_ids:e.userIds})}getAdmins(e){return this.AdminsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/admins`,i.td.toAPIParameters({include_license_admins:e.includeLicenseAdmins})))}getOrgUsersPaginatedV2(e){let{orgId:r,after:n,minimalFields:a,pageSize:o,sort:s,filter:l,...c}=e;return this.OrgUsersPaginatedSchemaValidatorPassthrough.validate(async({xr:e})=>await e.get(`/api/v2/orgs/${r}/org_users`,i.td.toAPIParameters({...c,...l||{},...s||{},minimalFields:a||void 0,pageSize:o||void 0,after:n?JSON.stringify(n):void 0})))}getUser(e){return this.UserSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/user/${e.userId}`))}getOauthConnections(e){return this.OauthConnectionsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/oauth_connections`))}getShowVatGst(e){return this.ShowVatGstSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/show_vat_gst`))}getLicenseGroupsMembersCounts(e){return this.LicenseGroupsMembersCountsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/license_groups/members/counts`))}getWorkspaceTeamsCounts(e){return this.WorkspaceTeamsCountsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/workspaces/teams/counts`))}getOrgUsersCount(e){return this.OrgUsersCountSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/org_users/count`))}getOrgUsersFilterCounts(e){return""===e.searchQuery&&delete e.searchQuery,this.OrgUsersFilterCountsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/org_users/filter_counts`,i.td.toAPIParameters({searchQuery:e.searchQuery,product:e.product,licenseGroupId:e.licenseGroupId,workspaceId:e.workspaceId,permission:e.permission,role:e.role,seatType:e.seatType})))}getOrgTeamsFilterCounts(e){let{orgId:r,searchQuery:n,orgAccess:a,teamsWithoutOwners:i,teamsMemberOf:o,workspaceId:s,sortBy:l,sortOrder:c}=e;return this.OrgTeamsFilterCountsSchemaValidator.validate(async({xr:e})=>{let d={search_query:n,org_access:a||void 0,teams_without_owners:i?String(i):void 0,teams_member_of:void 0!==o?JSON.stringify(o):void 0,workspace_id:s||void 0,sort_by:l,order_by:c};return await e.get(`/api/orgs/${r}/team_counts`,d)})}getOrgAdmins(e){return this.OrgAdminsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/org_admins`))}apiAutogenControls(e){let{orgId:r,autogen_password_controls:n}=e;return o.Ay.put(`/api/orgs/${r}`,{autogen_password_controls:n})}delWorkspaces(e){return o.Ay.del(`/api/orgs/${e.orgId}/workspaces`,{workspace_ids:e.workspaceIds})}validateTrial(e){return o.Ay.post(`/api/orgs/${e.orgId}/validate_trial`)}selfAssignWorkspace(e){return o.Ay.post(`/api/orgs/${e.orgId}/self_assign_workspace`,{workspace_id:e.workspaceId})}postDevModeOptInTermsAccepted(e){return o.Ay.post(`/api/orgs/${e.orgId}/dev_mode_terms_accepted`)}putToggleSlidesDisabled(e){return o.Ay.put(`/api/orgs/${e.orgId}/toggle_slides_disabled`,{slides_disabled:e.slidesDisabled})}updateAiDataSharing(e){return o.Ay.put(`/api/orgs/${e.orgId}/ai_data_sharing`,{enabled:e.enabled})}getOrgTeamsCount(e){return this.OrgTeamsCountSchemaValidator.validate(({xr:r})=>r.get(`/api/orgs/${e.orgId}/teams_count`))}setDomainCapture(e){return this.SetDomainCaptureSchemaValidator.validate(({xr:r})=>r.put(`/api/orgs/${e.org_id}/domain_capture`,{enable:!0}))}getEligibleUpgrades(){return this.EligibleUpgradesSchemaValidator.validate(async({xr:e})=>await e.get("/api/orgs/eligible_upgrade_data"))}}},802257:(e,r,n)=>{n.d(r,{s:()=>o});var a=n(547807),i=n(27087);let o=new class{updateOrgPreferences(e,r){let{preferences:n,...a}=r,o={preferences:n};return e.bigma_enabled?(o.auto_run_plugin_id=a.auto_run_plugin_id,o.auto_run_enabled=a.auto_run_enabled,o.codegen_enabled=a.codegen_enabled,o.pinned_plugins_enabled=a.pinned_plugins_enabled):!1===a.pinned_plugins_enabled&&(o.pinned_plugins_enabled=!1),i.Ay.post(`/api/plugin_preferences/org/${e.id}`,o)}updateUserAutoRunPluginId(e,r){return i.Ay.put("/api/plugin_preferences/user",a.td.toAPIParameters({autoRunBehavior:r,autoRunPluginId:e}))}}},357142:(e,r,n)=>{n.d(r,{a:()=>m});var a=n(414507),i=n(776621),o=n(547807),s=n(27087),l=n(675665),c=n(835476),d=n(540019),u=(e=>(e.HOMEPAGE="homepage",e.CATEGORY="category",e))(u||{});let m=new class{constructor(){this.CommunityResourceWithContentSchemaValidator=(0,o.YV)("CommunityResourceWithContentSchemaValidator",c.Q3,"cmty_rdp_resource_platform",!0),this.CommunityResourcesSchemaValidator=(0,o.Rq)("CommunityResourcesSchemaValidator",c.Y9,"cmty_feed_resource_platform",!0),this.ResourcesPaginatedQuery=d.M4.PaginatedQuery({fetch:async(e,{pageParam:r})=>{try{let n=await this.CommunityResourcesSchemaValidator.validate(async({xr:n})=>{let a=o.td.toAPIParameters({...e,resourceType:e.resourceType?e.resourceType.join(","):"",tags:e.tags?e.tags.join(","):"",cursor:r});return await n.getPaginated("/api/resources",a)});return{data:n.data.meta,nextPage:n.data.pagination.nextPage,prevPage:n.data.pagination.prevPage}}catch(e){throw(0,i.$D)(a.FigmaTeam.COMMUNITY,e),e}}})}getResourceWithContentID(e){return this.CommunityResourceWithContentSchemaValidator.validate(async({xr:r})=>await r.get(`/api/${l.S[e.resourceType]}/${e.contentId}/versions`))}likeResource(e){return s.Ay.post(`/api/resource/${e.resourceId}/like`)}unlikeResource(e){return s.Ay.del(`/api/resource/${e.resourceId}/like`)}}},344950:(e,r,n)=>{n.d(r,{G:()=>i});var a=n(547807);let i=new class{constructor(){this.FileUsersSchemaValidator=(0,a.vh)(),this.TeamSchemaValidator=(0,a.vh)(),this.RolesSchemaValidator=(0,a.vh)()}getFileUsers(e){return this.FileUsersSchemaValidator.validate(async({xr:r})=>await r.get(`/api/roles/file_users/${e.fileKey}`))}getTeam(e){return this.TeamSchemaValidator.validate(async({xr:r})=>await r.get(`/api/roles/team/${e.teamId}`))}getRoles(e){return this.RolesSchemaValidator.validate(async({xr:r})=>await r.get(`/api/roles/${e.resourceType}/${e.resourceId}`))}}},403442:(e,r,n)=>{n.d(r,{H:()=>s});var a=n(547807),i=n(36816),o=(e=>(e.DEV_MODE_BETA_SUGGESTED_UPGRADES="dev_mode_beta_suggested_upgrades",e.MEMBERS_TAB="members_tab",e))(o||{});let s=new class{constructor(){this.UpdateTeamUsersSchemaValidator=(0,a.YV)("UpdateTeamUsersSchemaValidator",i.wF.array(),null),this.DevModeNudgesExpEntryValidator=(0,a.vh)()}updateTeamUsers(e){return this.UpdateTeamUsersSchemaValidator.validate(async({xr:r})=>await r.put(`/api/teams/${e.team_id}/team_user_batch`,e))}declineDevModeSuggestedUpgrades(e){return a._5.validate(async({xr:r})=>await r.del(`/api/teams/${e.team_id}/team_users/dev_mode_suggested_upgrades`,e))}dismissDevModeSuggestedUpgrades(e){return a._5.validate(async({xr:r})=>await r.put(`/api/teams/${e.team_id}/dismiss_dev_mode_suggested_upgrades`))}logDevModeNudgesExperimentEntry(e){return this.DevModeNudgesExpEntryValidator.validate(async({xr:r})=>await r.put(`/api/teams/${e.team_id}/log_dev_mode_nudges_exp_entry`,e))}fetchDevModeNudgesExperimentEntry(e){return this.DevModeNudgesExpEntryValidator.validate(async({xr:r})=>await r.get(`/api/teams/${e.teamId}/fetch_dev_mode_nudges_exp_entry`))}}},576144:(e,r,n)=>{n.d(r,{q:()=>o});var a=n(547807),i=n(27087);n(540019).M4.Query({fetch:async e=>await o.getNumTemplatesByTeam({teamId:e.teamId,editorType:e.editorType}).then(e=>e.data.meta.total)});let o=new class{constructor(){this.RecentsSchemaValidator=(0,a.vh)(),this.TeamBrowseFromSize10SchemaValidator=(0,a.vh)(),this.SearchPaginatedSchemaValidator=(0,a.vh)(),this.TeamTemplateLimitValidator=(0,a.vh)(),this.TeamTemplateCountValidator=(0,a.vh)()}getRecents(e){return this.RecentsSchemaValidator.validate(async({xr:r})=>await r.get("/api/templates",{org_id:e.orgId,team_id:e.teamId,file_keys:e.fileKeys}))}getTeamBrowsePaginated(e){return this.TeamBrowseFromSize10SchemaValidator.validate(async({xr:r})=>await r.get(`/api/templates/${e.orgId}/team/${e.teamId}/browse`,a.td.toAPIParameters({from:e.from,size:e.size,templateType:e.templateType})))}getSearchPaginated(e){let{orgId:r,...n}=e;return this.SearchPaginatedSchemaValidator.validate(({xr:r})=>r.get(`/api/templates/${e.orgId}/search`,a.td.toAPIParameters(n)))}getFilteredTeamTemplates(e){let{orgId:r,...n}=e;return i.Ay.post(`/api/templates/${r}/browse`,n)}getTeamTemplateLimitReached(e){return this.TeamTemplateLimitValidator.validate(({xr:r})=>r.get(`/api/templates/${e.teamId}/limits`,a.td.toAPIParameters({editorType:e.editorType})))}getNumTemplatesByTeam(e){return this.TeamTemplateCountValidator.validate(({xr:r})=>r.get(`/api/templates/${e.teamId}/count`,a.td.toAPIParameters({editorType:e.editorType})))}}},369351:(e,r,n)=>{n.d(r,{sr:()=>s});var a=n(517333),i=n(547807),o=n(27087);let s=new class{constructor(){this.CommunitySchemaValidator=(0,i.vh)(),this.UserNotificationsSchemaValidator=(0,i.vh)(),this.UpdatedNotificationSchemaValidator=(0,i.vh)(),this.CommunityServerDrivenSchemaValidator=(0,i.vh)(),this.ServerDrivenSchemaValidator=(0,i.vh)(),this.ServerDrivenPlanSchemaValidator=(0,i.vh)(),this.WebTokenRegistrationSchemaValidator=(0,i.vh)()}getCommunity(e){return this.CommunitySchemaValidator.validate(async({xr:r})=>await r.get("/api/user_notifications/community",{currentView:e?.currentView}))}getUserNotifications(e){return this.UserNotificationsSchemaValidator.validate(async({xr:r})=>await r.get("/api/user_notifications",i.td.toAPIParameters(e,["currentView"])))}updateNotification(e){return this.UpdatedNotificationSchemaValidator.validate(({xr:r})=>r.put("/api/user_notifications",i.td.toAPIParameters({id:e.notification_id,currentView:e.currentView,medium:a.S8?"desktop_bell":"web",appVersion:"1",clientType:"web",["resolve"===e.notification_action?"resolvedAt":"rejectedAt"]:"true"},["currentView"])))}getCommunityServerDriven(e){return this.CommunityServerDrivenSchemaValidator.validate(async({xr:r})=>await r.get("/api/user_notifications/community/server_driven",i.td.toAPIParameters({currentView:e.currentView,clientType:"web",appVersion:"1"},["currentView"])))}getServerDriven(e){return this.ServerDrivenSchemaValidator.validate(async({xr:r})=>await r.get("/api/user_notifications/server_driven",i.td.toAPIParameters(e,["currentView"])))}getServerDrivenPlan(e){return this.ServerDrivenPlanSchemaValidator.validate(async({xr:r})=>await r.get("/api/user_notifications/server_driven/plan",i.td.toAPIParameters({...e,appVersion:"1",clientType:"web"},["currentView"])))}recordNotificationClicked(e){return o.Ay.post("/api/user_notification/clicked",{id:e.id,currentView:e.currentView,medium:e.medium})}enrollUserInStatusChange(e){return o.Ay.post(`/api/user_notifications/status_change_signup/${e.fileKey}`)}updateStatusChangePreferences(e){return o.Ay.post(`/api/user_notifications/status_change_optin/${e.fileKey}`,{opt_in:e.optIn})}sendFirebaseToken(e){return this.WebTokenRegistrationSchemaValidator.validate(({xr:r})=>r.post("/api/web_token_registration",i.td.toAPIParameters({firebaseToken:e.firebaseToken},[])))}}},713318:(e,r,n)=>{n(411855),n(516398),n(126760)},842164:(e,r,n)=>{n.d(r,{J4:()=>i,vF:()=>a});var a=(e=>(e[e.INCLUDE=0]="INCLUDE",e[e.CHILDREN=1]="CHILDREN",e[e.OMIT=2]="OMIT",e))(a||{});function i(e){return e&&0===e.inclusion?e:void 0}},423163:(e,r,n)=>{n.d(r,{L:()=>I});var a=n(411855),i=n(188507),o=n(147755),s=n(862350),l=n(951792),c=n(288006),d=n(974563),u=n(256296),m=n(121913),p=n(154254),h=n(939863),_=n(809840),g=n(809831),f=n(529906),E=n(99506),y=n(237870),b=n(922358);let I=(0,y.Ju)(function({open:e,onClose:r}){let[n,y]=(0,f.y)(),I=(0,o.X)(),T=(0,i.d4)(e=>e.screenreader.errorType),v=(0,g.lg)(),S=(0,a.useCallback)(()=>{v===E._Y.WHITEBOARD&&b.F2.focusCustomCanvasFocusElement(),r()},[r,v]),w=s.hS({open:e,onClose:S});return a.createElement(l.bL,{manager:w,width:"md"},a.createElement(c.vo,null,a.createElement(c.Y9,null,a.createElement(c.hE,null,(0,h.tx)("fullscreen.accessibility_settings.dialog_title"))),a.createElement(c.nB,null,a.createElement("div",{className:p.cx.pb8.$},a.createElement(d.d,{disabled:"platform_error"===T,checked:n,onChange:(e,{source:r})=>{(0,m.f)(e?m.h.TOGGLE_DOM_ON_MENU:m.h.TOGGLE_DOM_OFF_MENU,{isMouseEvent:"mouse"===r}),y(e)},label:a.createElement(u.J,null,(0,h.tx)("fullscreen.accessibility_settings.enable_screenreader_label")),ref:I},"platform_error"===T?(0,h.t)("fullscreen.accessibility.platform_error"):(0,h.t)("fullscreen.accessibility_settings.enable_screenreader_description_figjam_beta"),"render_error"===T&&a.createElement("span",{role:"alert",className:p.cx.block.mt8.$},a.createElement(_.E,{color:"danger"},(0,h.tx)("fullscreen.accessibility.dom_error"))))))))},"ACCESSIBILITY_SETTINGS",y.ZU.YES)},726732:(e,r,n)=>{n.d(r,{N:()=>l,Y:()=>c});var a=n(966712),i=n(374626),o=n(977230);let s="showFigmentDebugger";function l(e,r){try{if(!(0,a.kc)().internal_only_debug_tools||!(0,a.kc)().figment_debugger||null==e)return;i.zl.set(o.a4,{requestJsons:e,networkState:r})}catch(e){console.error("[Figment Debugger] Error tracking request")}}function c(){var e;let r=function(){try{if(null==localStorage)return!1;let e=localStorage.getItem(s);return"true"===e}catch(e){return!1}}();e=!r,localStorage.setItem(s,e?"true":"false"),i.zl.set(o.eE,!r)}},819338:(e,r,n)=>{var a=n(411855);n(358145),n(611978),a.createContext(null)},928491:(e,r,n)=>{n.d(r,{az:()=>ey,pw:()=>J,Ro:()=>el,w7:()=>ed,CH:()=>eu,fZ:()=>Q,rE:()=>eb,z6:()=>ec,Sw:()=>K,Pq:()=>W});var a=n(411855),i=n(629019),o=n.n(i),s=n(864089),l=n(281381),c=n(163023),d=n(939863),u=n(809840),m=n(498606),p=n(80332);let h="avatar--avatar--fFibd",_="avatar--dim--UbqLc",g="avatar--avatarWithHandle--Z3934",f="avatar--avatarWithOutwardBorder--3JJ57",E="avatar--avatarWithInwardBorder--L469R",y="avatar--clickableAvatarWithHandle--d90vX";var b=n(161143),I=n(606692),T=n(103941),v=n(380410),S=n(774283),w=n(316216),A=n(241577),N=n(311790),C=n(426431),L=n(91025),O=n(855072),R=n(175827),P=n(670658),D=n(440877),k=n(241932),M=n(420959),F=n(592526),x=n(522313),U=n(562014),B=n(266042);let V=[b.A,I.A,T.A,v.A,S.A,w.A,A.A,N.A,C.A,L.A,O.A,R.A,P.A,D.A,k.A,M.A,F.A,x.A],G=["avatar--workspaceAvatarBlue--XbbpI","avatar--workspaceAvatarPurple--FOGSP","avatar--workspaceAvatarGreen--PWm5o","avatar--workspaceAvatarTeal--4j3FH"],H=[];for(let e=0;e<V.length*G.length;e+=1){let r=e%V.length,n=V[r],a=(e+Math.floor(e/V.length))%G.length,i=G[a];H.push({svgSrc:n,className:i})}function W(e){return e.startsWith("https://www.gravatar.com/avatar/")}function K(e){return e&&!W(e)?e:void 0}let Y={CIRCLE:`${h} avatar--circle--ag36Q`,SQUARE:`${h} avatar--square--p4eL1`,ROUNDED_SQUARE:`${h} avatar--roundedSquare--cq522`};function $(e){return"number"==typeof e?{imgSize:e,fallbackSize:e}:e}class j{constructor(e,r){this.lower=e,this.upper=r}contains(e){return e>=this.lower&&e<this.upper}}let z=new j(65,91),q=new j(97,123),X=new j(48,58);class J extends a.Component{render(){let e={display:"flex",justifyContent:"center",color:this.props.tint||(0,p.Xx)(this.props.color),backgroundColor:this.props.color||void 0,opacity:this.props.opacity},r=this.props.enabled||!0,{size:n,fontSize:i}=this.props;n&&(e.width=`${n}px`,e.height=`${n}px`,e.lineHeight=`${n}px`,e.fontSize=`${i??n/2}px`);let s=Y[this.props.shape||"CIRCLE"];return a.createElement("span",{"data-testid":this.props.dataTestId,style:e,className:o()(s,this.props.className||"",{[_]:!r,[f]:"outward"===this.props.borderStyle,[E]:"inward"===this.props.borderStyle}),"aria-hidden":"true"},this.props.children)}}class Z extends a.Component{render(){return a.createElement(J,{dataTestId:"initial-avatar",...this.props},this.props.initial)}}function Q(e){let r={};if(e.size&&e.svgSizeRatio){let n=e.size*e.svgSizeRatio;r.width=`${n}px`,r.height=`${n}px`}if(!e.removeCustomFill){let n=(0,p.Xx)(e.color);r.fill=n}return a.createElement(J,{...e},a.createElement("div",{style:r},a.createElement(c.B,{svg:e.svg,autosize:!0})))}class ee extends a.Component{render(){let{size:e}=this.props,r=e?`${e}px`:void 0,n=Y[this.props.shape||"CIRCLE"],i=this.props.enabled||!0;return a.createElement(c.B,{className:`${n} ${this.props.className||""} ${i?"":_}`,style:this.props.style||{},svg:this.props.src,autosize:!0,width:r,height:r,dataTestId:"svg-avatar"})}}class et extends a.Component{constructor(e){super(e),this.state={loadError:!1}}render(){let e={},r=this.props.style||{};if(this.props.size){let n=this.state.loadError?$(this.props.size)?.fallbackSize:$(this.props.size)?.imgSize,a=`${n}px`;e.width=a,e.height=a,r.width=a,r.height=a}let n=this.props.enabled||!0,i=Y[this.props.shape||"CIRCLE"],l=this.state.loadError||!this.props.imgUrl?this.props.children:a.createElement(s.oW,{"data-testid":"image-avatar",className:`${n?"":_}`,style:e,src:this.props.imgUrl,onError:()=>this.setState({loadError:!0}),alt:""});return a.createElement("div",{className:o()(i,this.props.className,{[_]:!n,[f]:"outward"===this.props.borderStyle,[E]:"inward"===this.props.borderStyle}),style:r},l)}}let er=[z,q,X],en={colors:p.us,getInitial:e=>e?e[0]:null,defaultFallbackAvatarSvg:U.A},ea=["fallback_text","handle","name","email"],ei=(e,r=en)=>class extends a.Component{constructor(){super(...arguments),this.computeFallbackInitial=()=>{let e=ep((this.props.initializableEntityProperties?this.props.initializableEntityProperties:ea).map(e=>this.props.entity[e]));return e&&"string"==typeof e?r.getInitial(e):null},this.computeFallbackColor=()=>(0,p.$L)(this.props.entity.id,r.colors)}render(){let n=this.props.fallbackInitial||this.computeFallbackInitial(),i=this.computeFallbackColor()||null,o=this.props.entity.img_url||this.props.entity.imageURL||this.props.entity.imageUrl||this.props.entity.imgUrl||null;return a.createElement(e,{imgUrl:o,fallbackInitial:n,fallbackColor:this.props.defaultFallbackAvatarSvg&&!n?null:i,fallbackTintColor:this.props.defaultFallbackAvatarSvg?void 0:r.defaultFallbackTintColor,...this.props,defaultFallbackAvatarSvg:this.props.defaultFallbackAvatarSvg||r.defaultFallbackAvatarSvg})}};class eo extends a.Component{renderFallback(){let{size:e,fontSize:r,fallbackSvg:n,avatarSvg:i,svgSizeRatio:o}=this.props,s=$(e)?.fallbackSize;if(i)return a.createElement(Q,{size:s,fontSize:r,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape,svg:i,svgSizeRatio:o,opacity:this.props.opacity});if(n)return a.createElement(ee,{size:$(e)?.fallbackSize,src:n,shape:this.props.shape});if(this.props.hideFallbackInitial)return a.createElement(J,{size:$(e)?.fallbackSize,fontSize:r,className:this.props.className,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape});let l=this.props.fallbackInitial;return l?a.createElement(Z,{size:$(e)?.fallbackSize,fontSize:r,className:this.props.className,initial:l,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape,borderStyle:this.props.borderStyle}):this.props.defaultFallbackAvatarSvg?a.createElement(ee,{className:this.props.className,size:$(e)?.fallbackSize,src:this.props.defaultFallbackAvatarSvg,style:{fill:this.props.fallbackTintColor||void 0,background:this.props.fallbackColor||void 0},enabled:this.props.enabled,shape:this.props.shape}):a.createElement(J,{size:$(e)?.fallbackSize,fontSize:r,className:this.props.className,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape})}render(){return!this.props.imgUrl||W(this.props.imgUrl)?this.renderFallback():a.createElement(et,{size:this.props.size||null,imgUrl:this.props.imgUrl,className:`${this.props.className||""}`,enabled:this.props.enabled,shape:this.props.shape,borderStyle:this.props.borderStyle},this.renderFallback())}}eo.displayName="Avatar";let es=ei(eo,{...en,getInitial:e=>{let r=e.charCodeAt(0);return er.some(e=>e.contains(r))?e[0]:null}}),el=es;function ec({entity:e,size:r=40,shape:n="SQUARE"}){if(e.imgUrl)return a.createElement(es,{shape:n,entity:e,size:r});let i=(0,p.sC)(e?.id,H);return a.createElement(ee,{src:i.svgSrc,size:r,shape:n,className:i.className})}let ed=ei(eo,{...en,defaultFallbackAvatarSvg:B.A,getInitial:e=>e.charCodeAt(0)===e.codePointAt(0)?e[0]:null});function eu(e){return a.createElement(ed,{shape:"SQUARE",...e})}class em extends a.Component{render(){let e=this.props.size||0,r=Math.round(e/4)+1,n=Math.round(r/5);return a.createElement("span",{className:"avatar--avatarBellWrapper--sd6MY",style:e?{width:`${e}px`,height:`${e}px`}:void 0},this.props.showBell&&a.createElement("div",{className:"avatar--bell--Lk6s9",style:e?{width:`${r}px`,height:`${r}px`,top:`-${n}px`,right:`-${n}px`}:void 0}),this.props.children)}}em.displayName="AvatarBellWrapper";let ep=(e=[],r="?")=>e.find(e=>e)||r,eh=(e,r)=>class extends a.Component{constructor(){super(...arguments),this.onClick=e=>{this.props.onClick&&this.props.onClick(e,this.props.entity)}}render(){let n=this.props["data-tooltip-proxy-element-id"]||`avatar_${this.props.entity.id}_tooltip_proxy`;return a.createElement("div",{className:`${g} ${this.props.onClick?y:""} ${this.props.enabled?"avatar--disabledDimAvatarWithHandle--5l6cM":""} ${this.props.className||""}`,onClick:this.props.onClick?this.onClick:void 0,"data-tooltip-proxy-element-id":n,"data-onboarding-key":this.props["data-onboarding-key"]},a.createElement("div",{id:n,"data-tooltip-type":m.Ib.TEXT,"data-tooltip":this.props["data-tooltip"],"data-tooltip-offset-x":this.props["data-tooltip-offset-x"],"data-tooltip-offset-y":this.props["data-tooltip-offset-y"],"data-tooltip-max-width":this.props["data-tooltip-max-width"]},e&&a.createElement(e,{...this.props,className:void 0})),a.createElement(r,{...this.props}),this.props.children)}};var e_=(e=>(e.DEFAULT="default",e.HEADING_MEDIUM="heading_medium",e))(e_||{});let eg={default:void 0,heading_medium:"avatar--labelHeadingMedium--IeX2-"};class ef extends a.Component{render(){let{labelSize:e="default"}=this.props,r=eg[e],n=this.props.showTruncatedTextTooltip?a.createElement(u.E,{truncate:!0},this.props.text):a.createElement("span",{className:"avatar--handle--wlTXK"},this.props.text),i=this.props.showTruncatedTextTooltip?void 0:this.props.tooltipText??void 0;return a.createElement("div",{className:o()("avatar--info--vDGTn",r),title:i},a.createElement("div",{className:o()("avatar--handleRow--0K2-H",g,r,{[y]:this.props.onLabelClick}),onClick:this.props.onLabelClick},this.props.text.length>0&&n,this.props.showIsMe&&a.createElement("span",{className:o()("avatar--isMe--LeNkH",r)},(0,d.tx)("avatar.tooltip.you")),this.props.badge&&a.createElement(l.Ex,{...this.props.badge}),this.props.isScimUser&&a.createElement(l.Ex,{color:l.zE.DEFAULT,text:(0,d.t)("members_table.org_user_name_cell.scim_badge")})),this.props.email&&a.createElement("div",{className:this.props.onEmailClick?"avatar--emailHover--ekuTn":"",onClick:this.props.onEmailClick},a.createElement("div",{className:"avatar--email--G3FcZ"},this.props.email)))}}let eE=e=>class extends a.Component{render(){let r=[this.props.overrideHandle,this.props.entity.handle,this.props.entity.name];this.props.fallbackToEmail&&r.push(this.props.entity.email);let n=ep(r,this.props.defaultText),i=`${n}${this.props.includeUserEmailAddress?`
${this.props.entity.email}`:""}`,{onEmailClick:o,onLabelClick:s,...l}=this.props;return a.createElement(e,{text:n,email:this.props.includeUserEmailAddress?this.props.entity.email:null,tooltipText:this.props.showTooltip?i:null,onEmailClick:o,onLabelClick:s,...l})}},ey=eh(es,eE(ef)),eb=eh(eu,eE(ef))},266431:(e,r,n)=>{n.d(r,{Id:()=>h});var a=n(411855),i=n(135876),o=n(163023),s=n(939863),l=n(742809),c=n(731078),d=n(928491),u=n(608613),m=n(813620);let p=(e,r={})=>function(n){let d=null==n.size?120:n.size,p=()=>{n.dispatch((0,l.X)({entity:n.entity,entityType:n.entityType,shape:r.editorShape?r.editorShape:void 0}))},h={width:`${d}px`,minWidth:`${d}px`,height:`${d}px`,minHeight:`${d}px`},_=n.avatarEditorState&&n.avatarEditorState.status===c.hv.UPLOADING&&n.entity===n.avatarEditorState.entity,g=r.className?r.className:u.n1,f=a.createElement(i.x,{isLoading:_,className:`${u.Lq} ${g}`},()=>a.createElement(e,{size:d,...n})),E=a.createElement("div",{className:`${g} ${n.overlayClass||""}`},a.createElement(o.B,{className:`${u.Lw} ${u.Kk} ${g} ${n.overlayClass||""}`,svg:n.icon||m.A}));return r.withButton?a.createElement("div",{className:`${u.iE} ${u.n1}`,style:h},f,E,a.createElement("div",{className:u.hc,onClick:p},(0,s.tx)("avatar_editor.edit"))):a.createElement("div",{className:`${u.iQ} ${g}`,onClick:p,style:h},f,E)};p(d.Ro);let h=p(d.Ro,{withButton:!0});p(d.CH,{editorShape:"SQUARE",className:u.Ew}),p(d.z6,{editorShape:"SQUARE",className:u.Ew})},407844:(e,r,n)=>{n.d(r,{_:()=>o}),n(411855);var a=n(299321);n(629019),n(560945),n(179479),n(799569),n(946689),n(163023),n(939863);var i=n(100197);function o(){return(0,i.ut)(a.Ez5?.uiState().editorBannerHeight,0)}n(239671),n(164795),n(896572)},164795:(e,r,n)=>{var a=(e=>(e[e.TestThemeBanner=0]="TestThemeBanner",e[e.TestWarningBanner=1]="TestWarningBanner",e[e.TestOOMBanner=2]="TestOOMBanner",e[e.TestInfoBanner=3]="TestInfoBanner",e[e.StarterTeamOverFreeLimitAndLocked=4]="StarterTeamOverFreeLimitAndLocked",e[e.EduGracePeriodAccessRestricted=5]="EduGracePeriodAccessRestricted",e[e.EduGracePeriodShowReminder=6]="EduGracePeriodShowReminder",e[e.OrphanedOrgDraftsFile=7]="OrphanedOrgDraftsFile",e[e.TeamAbandonedDraftsFile=8]="TeamAbandonedDraftsFile",e[e.PersonalProjectDeprecatedFile=9]="PersonalProjectDeprecatedFile",e[e.ProTeamPastDue=10]="ProTeamPastDue",e[e.ProTeamChargeFailed=11]="ProTeamChargeFailed",e[e.ProTeamNoMonthlySubEditorCountExceeded=12]="ProTeamNoMonthlySubEditorCountExceeded",e[e.ProTrialsExpiryBanner=13]="ProTrialsExpiryBanner",e[e.MultiplayerSessionUpgrade=14]="MultiplayerSessionUpgrade",e[e.AdminI18nLocalWarnBanner=15]="AdminI18nLocalWarnBanner",e[e.FigJamTryDraftsBanner=16]="FigJamTryDraftsBanner",e[e.FigJamTryClaimBanner=17]="FigJamTryClaimBanner",e[e.CommunityResourceCTANuxBanner=18]="CommunityResourceCTANuxBanner",e[e.communityM10nApprovalBanner=19]="communityM10nApprovalBanner",e[e.communityM10nFinishSetupBanner=20]="communityM10nFinishSetupBanner",e[e.communityM10nAdtlInfoNeededBanner=21]="communityM10nAdtlInfoNeededBanner",e[e.communityResourceInReviewBanner=22]="communityResourceInReviewBanner",e[e.CommunityResourceCreatorBanner=23]="CommunityResourceCreatorBanner",e[e.ExternalContentControlBanner=24]="ExternalContentControlBanner",e[e.MemoryWarningBanner=25]="MemoryWarningBanner",e[e.MemoryErrorBanner=26]="MemoryErrorBanner",e[e.MemorySafeBanner=27]="MemorySafeBanner",e[e.AdminUserDisposableDomainWarningBanner=28]="AdminUserDisposableDomainWarningBanner",e[e.FileIsTeamTemplate=29]="FileIsTeamTemplate",e[e.FreemiumPreviewBanner=30]="FreemiumPreviewBanner",e[e.FileCreationFailureBanner=31]="FileCreationFailureBanner",e[e.DevModePaywallBanner=32]="DevModePaywallBanner",e[e.DevModeInTrialBanner=33]="DevModeInTrialBanner",e[e.devModeStarterTrialBanner=34]="devModeStarterTrialBanner",e[e.DesktopDownloadBanner=35]="DesktopDownloadBanner",e[e.BrowserDeprecationBanner=36]="BrowserDeprecationBanner",e[e.FragmentTextSearchQualityBanner=37]="FragmentTextSearchQualityBanner",e[e.Gen1DesignViewerBanner=38]="Gen1DesignViewerBanner",e[e.DesktopDeprecationBanner=39]="DesktopDeprecationBanner",e[e.UI3LoggedOutCta=40]="UI3LoggedOutCta",e))(a||{}),i=(e=>(e.INFO="info",e.WARN="warn",e.SUCCESS="success",e.ERROR="error",e.WARN_SOFT="warn_soft",e.CONFIDENTIALITY="confidentiality",e.BRAND_STRONG="brand_strong",e.DANGER="danger",e.INFO_SOFT="info_soft",e))(i||{}),o=(e=>(e.STRUCTURED="structured",e.CUSTOM="custom",e))(o||{})},888762:(e,r,n)=>{n.d(r,{F9:()=>A});var a=n(411855),i=n(188507),o=n(737947),s=n(498750),l=n(163023),c=n(939863),d=n(66944),u=n(546856),m=n(738269),p=n(672517),h=n(215822),_=n(990989),g=n(350913),f=n(37637),E=n(156467),y=n(927625),b=n(464628),I=n(29196),T=n(237494);function v({onClick:e,widget:r}){let n=function(){let e=(0,i.wA)();return a.useCallback((r,n)=>{if((0,s.oJ)(n)){o.Ay.redirect((0,g.YW)(r.id),"_blank");return}e(m.$T({view:"communityHub",subView:"widget",widgetId:r.id}))},[e])}();return{onTileClicked:a.useCallback(a=>{e?.(r.id),n(r,a)},[r,e,n]),version:(0,h.uF)(r)}}function S({version:e,widget:r,lastViewedAtForNewBadge:n,removeBorder:i}){return a.createElement(_.WM,{removeBorder:i},a.createElement(_.Wh.BottomLeft,null,a.createElement(f.dn,{editorType:e.manifest.editorType})),a.createElement("a",{href:(0,g.YW)(r.id)},!!(n&&Date.parse(r.created_at)>Date.parse(n))&&a.createElement(y.Q7,null),a.createElement(b.z,{src:e.redirect_snapshot_url||e.redirect_icon_url,context:"community"})))}function w({version:e,widget:r,viewContext:n}){let o=!!r.org_id,s=(0,i.d4)(e=>e.orgById),u="search"===(0,i.d4)(({selectedView:e})=>e).view,m=r.org_id&&s[r.org_id];return a.createElement(a.Fragment,null,a.createElement(_.dY.MetadataContainer,null,o?a.createElement(_.dY.PublisherAvatar,{publishers:r.community_publishers?.accepted}):a.createElement(_.dY.PublisherAvatarWithDropdown,{publishers:r.community_publishers?.accepted}),a.createElement(_.dY.TextMetadataLayout,{primaryText:e.name,secondaryText:o?a.createElement(_.dY.MetadataAuthor,{publishers:r.community_publishers?.accepted}):a.createElement(_.dY.MetadataAuthorWithDropdown,{publishers:r.community_publishers?.accepted}),planIconEntity:u?m:null})),a.createElement(_.dY.ResourceActionContainer,null,o?a.createElement(_.dY.ButtonWrapper,null,a.createElement("div",{className:I.m_},a.createElement(l.B,{className:I.hz,svg:T.A}),(0,c.tx)("community.cards.private"),"OrgWidgetsView"===n&&a.createElement(d.d,{resource:r}))):a.createElement(_.dY.ButtonWrapper,null,a.createElement(E.g,{resource:r,viewContext:n}))))}let A=(0,p.tf)(function(e){let{onTileClicked:r,version:n}=v(e);return a.createElement(_.sU,{onClick:r,image:a.createElement(S,{version:n,widget:e.widget,lastViewedAtForNewBadge:e.lastViewedAtForNewBadge}),bottomRow:a.createElement(w,{widget:e.widget,version:n,viewContext:e.viewContext})})});(0,p.tf)(function(e){let{onTileClicked:r,version:n}=v(e);return a.createElement(_.sU,{onClick:r,image:a.createElement(_.WM,null,a.createElement(_.Wh.TopLeft,null,a.createElement(u.Mr,{resource:e.widget})),a.createElement(_.Wh.BottomLeft,null,a.createElement(f.dn,{editorType:n.manifest.editorType})),a.createElement("a",{href:(0,g.YW)(e.widget.id)},a.createElement(b.z,{src:n.redirect_snapshot_url||n.redirect_icon_url,context:"community"}))),bottomRow:a.createElement(a.Fragment,null,a.createElement(_.dY.MetadataContainer,null,a.createElement(_.dY.TextMetadataLayout,{primaryText:n.name})),a.createElement(_.dY.ResourceActionContainer,null,a.createElement(_.dY.ButtonWrapper,null,a.createElement(E.g,{resource:e.widget}))))})})},877655:(e,r,n)=>{n.d(r,{bX:()=>T});var a=n(411855),i=n(188507),o=n(776250),s=n(860601),l=n(27087),c=n(799569),d=n(946689),u=n(893281),m=n(154254),p=n(939863),h=n(466636),_=n(709595),g=n(662275),f=n(178787),E=n(237870),y=n(158950),b=n(488578),I=n(373494);let T=(0,E.Ju)(function(e){let{name:r,user:n,monetizedResource:s}=e,[c,d]=a.useState(!1),[_,E]=a.useState(null),[I,T]=a.useState(""),w=(0,i.wA)(),A=()=>{w((0,g.to)({type:v,data:{user:n}}))},N=()=>{w((0,g.to)({type:S,data:{user:n}}))};return a.createElement(b.Rw,{size:"small",content:a.createElement("div",{className:m.cx.flexColumn.colorText.$},(0,p.tx)("community.buyer.we_re_sorry_to_hear_resource_name_didnt_work_out",{resourceName:a.createElement("span",{className:m.cx.fontBold.$},r)}),a.createElement("div",{className:m.cx.my16.$},a.createElement(u.z,{value:_,onChange:e=>{E(e)}},Object.values(f.bG).map(e=>a.createElement(u.Z,{className:m.cx.font11.selectNone.$,key:e,value:e},(0,h.vi)(e)))),_===f.bG.OTHER?a.createElement("div",{className:m.cx.mt8.$},a.createElement(y.v,{value:I,onChange:e=>T(e.target.value),placeholder:(0,p.t)("community.buyer.refund_reason.add_additional_details"),maxLength:f.JV})):null)),onConfirm:()=>{d(!0),(0,o.sx)("Request Refund Modal Confirm",{refundReason:_,refundOtherReasonText:I,monetizedResourceMetadataId:s.id}),l.Ay.post(`/api/community/buyer/${s.id}/refund`,{refund_reason:_,refund_other_reason_text:I}).then(()=>{d(!1),w(g.Ce()),A()}).catch(e=>{d(!1),w(g.Ce()),N()})},hideOnConfirm:!1,isLoading:c,confirmationTitle:(0,p.tx)("community.buyer.need_a_refund"),disableConfirm:!_,confirmText:(0,p.tx)("general.confirm"),cancelText:(0,p.tx)("general.close"),autoFocusCta:!1,popStack:!0})},"CommunityRequestRefundModal"),v=(0,E.Ju)(function(e){let{user:r}=e,n=(0,i.wA)();return a.createElement(b.Nb,{size:"small",hide:s.lQ,title:(0,p.t)("community.buyer.refund_requested")},a.createElement(c.s_,{dispatch:n}),(0,p.tx)("community.buyer.keep_an_eye_out",{here:a.createElement(d.CY,{onClick:()=>{(0,_.c9)(r),n(g.Ce())},trusted:!0},(0,p.tx)("community.buyer.here"))}),a.createElement("div",{className:I.v0},a.createElement(d.tM,{onClick:()=>n(g.Ce())},(0,p.tx)("general.close"))))},"CommunityRefundRequestedSuccessModal"),S=(0,E.Ju)(function(e){let{user:r}=e;return a.createElement(b.Rw,{size:"small",confirmationTitle:(0,p.tx)("community.buyer.unable_to_process_refund"),content:a.createElement("span",{className:m.cx.colorText.$},(0,p.tx)("community.buyer.error_requesting_refund_please_contact_support")),confirmText:(0,p.tx)("community.buyer.get_support"),onConfirm:()=>(0,_.oW)(r),cancelText:(0,p.tx)("general.close"),autoFocusCta:!1})},"CommunityErrorRequestingRefundModal")},814138:(e,r,n)=>{n.d(r,{A:()=>W});var a=n(411855),i=n(188507),o=n(67151),s=n(171812),l=n(629019),c=n.n(l),d=n(776250),u=n(946689),m=n(449124),p=n(355819),h=n(154254),_=n(939863),g=n(175290),f=n(553015),E=n(809840),y=n(612776),b=n(662275),I=n(226055),T=n(99506),v=n(540019),S=n(450515),w=n(744410),A=n(34762),N=n(113094),C=n(721732),L=n(814367),O=n(424396),R=n(207776),P=n(132208);function D({text:e}){return a.createElement(E.E,{"data-testid":"extension-security-form-error",color:"danger"},e)}function k(e){let{canShowErrors:r}=(0,C.I)();return r&&(0,S.G6)(e)}function M(e){let{onChange:r,question:n}=e,{prompt:i,value:o,placeholder:s}=n,l=k(n);return a.createElement("div",{className:h.cx.flex.flexColumn.gap8.$},i&&a.createElement("div",null,function(e){let r=e.match(/\[([^\]]+)\]\(([^)]+)\)/);if(!r||!r.index)return e;let[n,i,o]=r;return a.createElement("span",{"data-testid":"parsed-text-content"},e.slice(0,r.index),a.createElement("a",{href:o,target:"_blank",className:h.cx.colorTextBrand.cursorPointer.$},i),e.slice(r.index+n.length))}(i)),a.createElement(u.ks,{className:h.cx.wFull.$,value:o??"",onChange:r,placeholder:s}),l&&a.createElement(D,{text:(0,_.t)("community.publishing.data_security.incomplete_text")}))}function F(e){let{question:r,dispatch:n,path:i}=e,{prompt:o,options:s}=r,l=k(r);return a.createElement("div",{className:h.cx.flex.flexColumn.gap16.$},a.createElement(E.E,{fontWeight:"semi-bold"},o),a.createElement(a.Fragment,null,s.map((e,r)=>{let o=`path-${i.join("-")}-option-input-${r}`;return a.createElement("div",{className:h.cx.flex.flexColumn.$,key:`option-${r}`},a.createElement("div",{className:h.cx.flex.gap8.$},a.createElement("input",{type:"radio",id:o,checked:e.isSelected??!1,onChange:()=>{n({type:"UPDATE_SINGLE_SELECT_QUESTION",questionIndex:i[0],optionIndex:r})},className:h.cx.cursorPointer.$}),a.createElement("label",{htmlFor:o,className:h.cx.cursorPointer.$},e.label)),e.subQuestions&&e.isSelected&&a.createElement("div",{className:h.cx.ml20.flex.flexColumn.gap8.pt8.$},e.subQuestions.map((e,o)=>a.createElement(U,{key:`sub-question-${o}`,question:e,dispatch:n,path:i.concat(r,o)}))))})),l&&a.createElement(D,{text:(0,_.t)("community.publishing.data_security.incomplete_single_select")}))}function x(e){let{dispatch:r,path:n,question:i}=e,{prompt:o,options:s}=i,l=k(i);return a.createElement("div",{className:h.cx.flex.flexColumn.gap16.$},a.createElement(E.E,{fontWeight:"semi-bold"},o),a.createElement(a.Fragment,null,s.map((e,i)=>{let o=`path-${n.join("-")}-option-input-${i}`;return a.createElement("div",{className:h.cx.flex.flexColumn.$,key:`option-${i}`},a.createElement("div",{className:h.cx.flex.gap8.$},a.createElement("input",{type:"checkbox",checked:e.isSelected??!1,onChange:()=>{r({type:"UPDATE_MULTI_SELECT_QUESTION",questionIndex:n[0],optionIndex:i})},id:o,className:h.cx.cursorPointer.$}),a.createElement("label",{htmlFor:o,className:h.cx.cursorPointer.$},e.label)),e.subQuestions&&e.isSelected&&a.createElement("div",{className:h.cx.ml20.flex.flexColumn.gap8.pt8.$},e.subQuestions.map((e,o)=>a.createElement(U,{key:`sub-question-${o}`,question:e,dispatch:r,path:n.concat(i,o)}))))})),l&&a.createElement(D,{text:(0,_.t)("community.publishing.data_security.incomplete_multi_select")}))}function U(e){let{question:r,dispatch:n,path:i}=e;switch(r.inputType){case"single_select":return a.createElement(F,{question:r,dispatch:n,path:i});case"multi_select":return a.createElement(x,{question:r,dispatch:n,path:i});case"text":return a.createElement(M,{question:r,onChange:e=>{1===i.length?n({type:"UPDATE_TEXT_QUESTION",questionIndex:i[0],value:e.currentTarget.value}):3===i.length&&n({type:"UPDATE_TEXT_SUBQUESTION",path:[i[0],i[1],i[2]],value:e.currentTarget.value})},path:i});default:return null}}function B(e){let{extensionType:r,securityForm:n,dispatch:i}=e,o="plugin"===r?(0,_.tx)("community.publishing.security_form.plugin_description"):(0,_.tx)("community.publishing.security_form.widget_description"),s="plugin"===r?(0,_.tx)("community.publishing.security_form.plugin_sharing_description"):(0,_.tx)("community.publishing.security_form.widget_sharing_description");return a.createElement("div",{className:h.cx.p16.flex.flexColumn.$,"data-testid":"extension-security-form"},a.createElement("div",{className:h.cx.pb16.$},a.createElement(E.E,{fontSize:14,fontWeight:"medium"},(0,_.tx)("community.publishing.security_form.header"))),a.createElement("div",{className:h.cx.pb16.$},o),a.createElement("div",{className:h.cx.pb16.$},s,a.createElement("a",{href:"plugin"===r?"https://help.figma.com/hc/articles/360042293394":"https://help.figma.com/hc/articles/4410337103639",target:"_blank",className:h.cx.colorTextBrand.cursorPointer.$},(0,_.tx)("community.publishing.security_form.learn_more"))),a.createElement("div",{className:h.cx.flex.flexColumn.gap32.$},n.questions.map((e,r)=>a.createElement(U,{key:`question-${r}`,question:e,dispatch:i,path:[r]}))))}function V({onDiscard:e,onDone:r,securityFormFromDB:n,localSecurityFormResponse:o,onOptOut:l,currentFormStatus:u,extensionId:m}){let p=a.useMemo(()=>!(0,s.c2)(o,n),[o,n]),{canShowErrors:E,numberOfErrors:T,optedOutOfSecurityForm:v,extensionType:w}=(0,C.I)(),A=(0,S.qu)(n),L=(0,i.wA)(),R=(0,I.GS)(),P=(0,y.zI)({isUI3:R});return a.createElement("div",{className:c()(h.cx.flex.gap8.p16.justifyBetween.alignCenter.absolute.bottom0.left0.right0.bSolid.bt1.colorBorder.colorBg.$,{[O._]:P})},!A&&a.createElement("button",{className:h.cx.bgTransparent.noWrap.if(v,h.cx.colorTextSecondary,h.cx.colorTextBrand.cursorPointer).$,onClick:()=>{L((0,b.to)({type:N.i,data:{onConfirm:l,status:u,extensionType:w},showModalsBeneath:!0})),(0,d.sx)("Data Security Plugin Form",{action:"Remove security details",extensionType:w,extensionId:m})},disabled:v},(0,_.tx)("community.publishing.security_form.opt_out_button")),a.createElement(g.Y,{width:"fill-parent",horizontalAlignItems:"end"},a.createElement(f.$,{variant:"secondary",onClick:()=>{e(),(0,d.sx)("Data Security Plugin Form",{action:"Discard changes",extensionType:w,extensionId:m})},disabled:!p},(0,_.tx)("community.publishing.security_form.discard_changes")),a.createElement(f.$,{variant:"primary",onClick:r,disabled:E&&T>0},(0,_.tx)("general.done"))))}function G({currentFormStatus:e}){let r,n,i;if(!e)return null;switch(e){case T.bQ.APPROVED:r=a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement(E.E,{fontWeight:"semi-bold"},(0,_.tx)("community.publishing.security_banner.approved.title"))),a.createElement("div",null,a.createElement(E.E,null,(0,_.tx)("community.publishing.security_banner.approved.description")))),n=R.A,i="success";break;case T.bQ.PENDING:r=a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement(E.E,{fontWeight:"semi-bold"},(0,_.tx)("community.publishing.security_banner.pending.title"))),a.createElement("div",null,a.createElement(E.E,null,(0,_.tx)("community.publishing.security_banner.pending.description")))),n=P.A,i="brand";break;case T.bQ.REJECTED:r=a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement(E.E,{fontWeight:"semi-bold"},(0,_.tx)("community.publishing.security_banner.rejected.title"))),a.createElement("div",null,a.createElement(E.E,null,(0,_.tx)("community.publishing.security_banner.rejected.description"))),a.createElement("div",null),a.createElement("div",null,a.createElement(E.E,null,(0,_.tx)("community.publishing.security_banner.rejected.description.check_email")))),n=P.A,i="brand";break;default:(0,o.xb)(e)}return a.createElement(m.z,{iconSrc:n,variant:i,orientation:"vertical"},r)}function H({localSecurityFormResponse:e,securityFormFromDB:r,setSecurityFormResponse:n,extensionType:i,onDone:o,currentFormStatus:s,existingSecurityFormResponse:l,extensionId:c}){let d={questions:r.questions,version:r.version},[u,m]=(0,a.useReducer)(L.V,e??d),{setCanShowErrors:h,setOptedOutOfSecurityForm:_,optedOutOfSecurityForm:g}=(0,C.I)();return a.useEffect(()=>{n(u),(0,S.qu)(u)||_(!1)},[n,u,_]),a.createElement(a.Fragment,null,a.createElement(p.P,{className:O.j,maxHeight:800},a.createElement(G,{currentFormStatus:s}),a.createElement(B,{securityForm:u,dispatch:m,extensionType:i})),a.createElement(V,{onOptOut:()=>{m({type:"RESET_FORM"}),_(!0)},onDiscard:()=>{m({type:"DISCARD_CHANGES",originalState:d}),h(!1)},onDone:()=>{if((0,S.wT)(e,l)&&!g){h(!0);return}o()},securityFormFromDB:r,localSecurityFormResponse:e,currentFormStatus:s,extensionId:c}))}function W(e){let{version:r,setSecurityFormResponse:n,extensionType:i,localSecurityFormResponse:o,existingSecurityFormResponse:s,onDone:l,optedOutOfSecurityForm:c,setOptedOutOfSecurityForm:d,extensionId:u}=e,[m]=(0,v.IT)(K(r),{enabled:!s}),p=(0,I.GS)(),_=(0,y.zI)({isUI3:p}),g=(s?{version:String(s.formVersion),questions:s.responses}:null)??("loaded"===m.status?m.data:null);return g?a.createElement(C.B,{localSecurityFormResponse:o,existingSecurityFormResponse:s,optedOutOfSecurityForm:c,setOptedOutOfSecurityForm:d,extensionType:i},a.createElement(H,{localSecurityFormResponse:o,securityFormFromDB:g,setSecurityFormResponse:n,extensionType:i,onDone:l,currentFormStatus:s?.status??null,existingSecurityFormResponse:s,extensionId:u})):_?a.createElement("div",{className:h.cx.p8.$},a.createElement(A.R,null)):null}let K=v.M4.Query({fetch:async e=>await w.is.getBlankSecurityForm(e)})},761939:(e,r,n)=>{n.d(r,{IW:()=>R,fV:()=>L,fp:()=>O});var a=n(411855),i=n(188507),o=n(540193),s=n(498750),l=n(915440),c=n(391388),d=n(452441),u=n(493323),m=n(32863),p=n(163023),h=n(939863),_=n(837324),g=n(445092),f=n(782501),E=n(477782),y=n(594901),b=n(279453),I=n(967409),T=n(508567),v=n(707612),S=n(805443),w=n(639685),A=n(630834),N=(e=>(e.FILES="FILES",e.PLUGINS="PLUGINS",e.WIDGETS="WIDGETS",e))(N||{});function C(e){return a.createElement("div",{className:S.bx},a.createElement("div",{className:S.Uz},"FILES"===e.tab?(0,h.t)("community.universal_posting_modal.resource_empty.files_title"):"PLUGINS"===e.tab?(0,h.t)("community.universal_posting_modal.resource_empty.plugins_title"):(0,h.t)("community.universal_posting_modal.resource_empty.widgets_title")),a.createElement("div",{className:S.SL},"FILES"===e.tab?(0,h.t)("community.universal_posting_modal.resource_empty.files_subtitle"):"PLUGINS"===e.tab?(0,h.t)("community.universal_posting_modal.resource_empty.plugins_subtitle"):(0,h.t)("community.universal_posting_modal.resource_empty.widgets_subtitle")))}function L(e){var r,n,s,l;let d=(0,i.d4)(e=>e.currentUserOrgId),u=(n=(0,o.ql)(d||null),s=a.useMemo(()=>{let e=n.data||[];return c.Qw.loaded(e.filter(e=>e.parent_org_id===d))},[n,d]),l=e.editorTypes,r=a.useMemo(()=>{if(!l||0===l.length)return s;let e=s.data||[];return c.Qw.loaded(e.filter(e=>null!=e.editor_type&&l.includes(e.editor_type)))},[s,l]),a.useMemo(()=>"loaded"!==r.status?[]:r.data.map(e=>({type:E.nb.FILE,file:e})),[r]));return 0===u.length?a.createElement(C,{tab:"FILES"}):a.createElement("div",{className:S.Vg,onClick:e.deselectActiveFile,role:"presentation"},u.map(r=>{if(r.type!==E.nb.FILE)return null;let n=r.file;if(e.filterFn&&!e.filterFn(n))return null;let i=n.hub_file&&(0,_.r7)(n.hub_file);return a.createElement(P,{key:n.key,file:n,disabled:i,setActiveFile:e.setActiveFile,activeFileKey:e.activeFileKey})}))}function O({activeSearchQuery:e,activeFileKey:r,setActiveFile:n,deselectActiveFile:o,searchResults:s,editorTypes:c}){let d=(0,y.FC)(),m=(0,i.d4)(e=>e.authedProfilesById),p=(0,i.d4)(e=>e.figFileDuplicatedFromHubFile),g=a.useMemo(()=>(s||[]).map(({model:{key:e}})=>({key:e})),[s]),E=(0,l.p)(b.dDF,g),I=a.useMemo(()=>E.map(({result:e})=>e.transform(e=>!!e.file?.hasPermission)),[E]);if(!s)return a.createElement("div",{className:S.g4},a.createElement(u.kt,{size:"small"}));let T=s.filter((e,r)=>e.model.editor_type&&(void 0===c||c?.includes(e.model.editor_type))&&!(0,f.JJ)(e.model,I[r].unwrapOr(!1),{...d,authedProfilesById:m,figFileDuplicatedFromHubFile:p},null));return 0===T.length?a.createElement("div",{className:S.bx},a.createElement("div",{className:S.Uz},(0,h.tx)("community.universal_posting_modal.recent_editable_files_search.no_files_matching",{searchQuery:a.createElement("span",{className:S.ZF},e)}))):a.createElement("div",{className:S.Vg,onClick:o,role:"presentation"},T.map(e=>{let i=e.model,o=i.hub_file&&(0,_.r7)(i.hub_file);return a.createElement(P,{key:i.key,file:i,disabled:o,setActiveFile:n,activeFileKey:r})}))}function R(e){let{query:r,setQuery:n,setSearchResults:o,hasCloseButton:l=!0}=e,c=(0,i.wA)(),u=a.useCallback(()=>{r&&(c(g.Dy({entryPoint:"community:universal_posting"})),o(null),T.$W.getFigFiles({query:r,desc:!0,sort:I.Lk.RELEVANCY,orgId:void 0,isGlobal:!0}).then(({data:{meta:e}})=>{o(e.results)}))},[r,c,o]),_=a.useCallback(()=>{n("")},[n]),f=a.useCallback(e=>(e.keyCode===s.Uz.ENTER&&u(),!0),[u]),E=a.useCallback(e=>{n(e)},[n]);a.useEffect(()=>{let e=setTimeout(u,300);return()=>clearTimeout(e)},[r,u]);let y=a.useRef(null),{searchInputRef:b,onMouseDown:v,onMouseUp:N,onBlur:C,onClearSearchClick:L,onSearchKeyDown:O,onSearchChange:R}=(0,m.ne)({...e,focusOnMount:!1,clearSearch:_,onChange:E,onSubmit:u,isKeyDownHandled:f},y);return a.createElement("div",{className:S.Tm},a.createElement(p.B,{className:S.qc,svg:w.A}),a.createElement(d.L,{ref:b,placeholder:e.placeholderText??(0,h.t)("community.universal_posting_modal.search_bar.placeholder"),className:S.Rt,value:r,onMouseDown:v,onMouseUp:N,onBlur:C,onChange:R,onKeyDown:O,spellCheck:!1}),!!r&&l&&a.createElement(p.B,{className:S.i3,svg:A.default,onClick:L}))}function P(e){let{file:r,disabled:n,setActiveFile:i,activeFileKey:o}=e;return a.createElement(v.GQ,{onClick:e=>{e.stopPropagation(),n||i(r)},file:r,subtitle:a.createElement(v.lJ,{file:r}),activeFileUsers:[],currentUser:null,isSelected:!n&&o===r.key,disabled:n,tooltipText:n?(0,h.t)("community.publishing.this_file_has_been_published_to_community_as_a_library"):void 0})}},580999:(e,r,n)=>{n.d(r,{Qi:()=>g,U6:()=>f});var a=n(411855),i=n(188507),o=n(737947),s=n(498750),l=n(417659),c=n(738269),d=n(707465),u=n(928491),m=n(721345);let p={underline:m.ah,noUnderline:m.HU};class h extends a.PureComponent{constructor(){super(...arguments),this.onClick=e=>{if(e.preventDefault(),e.stopPropagation(),(0,s.oJ)(e)||this.props.openInNewTab){o.Ay.redirect(this.props.hrefPath||"","_blank");return}let r=_(this.props);this.props.dispatch(c.$T(r))}}render(){let e={...this.props.publisher,img_url:this.props.publisher.img_urls["120_120"]},r=a.createElement(a.Fragment,null,this.props.showAvatar&&a.createElement("div",{className:this.props.avatarClassName||m.Du},a.createElement(u.Ro,{size:this.props.avatarSize||32,entity:e})),!this.props.hideName&&a.createElement("span",{className:this.props.childrenClassName||m.fh},this.props.publisher.name));return a.createElement("div",{className:`${this.props.className||""}`},this.props.disabled?a.createElement("span",{className:this.props.childrenClassName||m.oY},r):a.createElement("a",{href:new l.xn({profileHandle:this.props.publisher.profile_handle}).href,className:this.props.childrenClassName||this.props.authorLinkStyle,onClick:this.onClick},r))}}let _=e=>({view:"communityHub",subView:"handle",handle:e.publisher.profile_handle}),g=(0,i.Ng)((e,r)=>{let n=_(r);return{hrefPath:(0,d.Np)(e,n),authorLinkStyle:"communityHub"===e.selectedView.view&&"landing"===e.selectedView.subView?p.noUnderline:p.underline}})(h);function f(e){let r=(0,i.wA)(),n={view:"communityHub",subView:"handle",handle:e.profile.profile_handle},u=(0,i.d4)(e=>(0,d.Np)(e,n));return a.createElement("a",{href:new l.xn({profileHandle:e.profile.profile_handle}).href,className:m.M2,onClick:e=>{if(e.preventDefault(),e.stopPropagation(),(0,s.oJ)(e)){o.Ay.redirect(u||"","_blank");return}r(c.$T(n))}},e.children)}(0,i.Ng)((e,r)=>({hrefView:_(r),hrefPath:(0,d.Np)(e,_(r)),authorLinkStyle:p.underline}))(h)},517127:(e,r,n)=>{n.d(r,{T:()=>b});var a=n(411855),i=n(188507),o=n(776250),s=n(320063),l=n(860601),c=n(799569),d=n(946689),u=n(939863),m=n(662275),p=n(931828),h=n(335682),_=n(860178),g=n(237870),f=n(488578),E=n(673051),y=n(472286);let b=(0,g.Ju)(function({onAgree:e}){let r=(0,i.wA)(),n=(0,_.iZ)(),g=(0,h.q5)();!function(){let e=(0,_.iZ)(),r=(0,h.q5)();(0,s.h)(()=>{o.az.trackDefinedEvent("preset_libraries.apple_eula_displayed",{userId:e?.id??void 0,fileTeamId:r?.teamId??void 0,fileParentOrgId:r?.parentOrgId??void 0,fileKey:r?.key,asyncModal:!1})})}();let b=a.useCallback(e=>{o.az.trackDefinedEvent("preset_libraries.apple_eula_clicked",{actionType:e,userId:n?.id??void 0,fileTeamId:g?.teamId??void 0,fileParentOrgId:g?.parentOrgId??void 0,fileKey:g?.key,asyncModal:!1})},[g,n]);return a.createElement(f.Nb,{hide:l.lQ,disableClickOutsideToHide:!0,className:y.kL},a.createElement("div",{className:y.wx},(0,u.tx)("community.eula.license_agreement_v2"),a.createElement(c.s_,{onClose:()=>b("x"),dispatch:r,customStyle:{right:"4px",top:"4px"}})),a.createElement("div",{className:y.IP},a.createElement("div",{className:y.rf},a.createElement("div",{className:y.r3},(0,u.tx)("community.eula.license_agreement_preamble")),a.createElement(E.N,null))),a.createElement("div",{className:y.qr},a.createElement(d.tM,{onClick:()=>{b("decline"),r(m.Lo())},className:y.lO},(0,u.tx)("community.eula.disagree")),a.createElement(d.vd,{onClick:()=>{e(),b("accept"),r(p.b({apple_eula_accepted:!0}))},className:y.lO},(0,u.tx)("community.eula.agree"))))},"APPLE_EULA_MODAL_TYPE",g.ZU.YES)},195907:(e,r,n)=>{n.d(r,{Pn:()=>u});var a=n(411855),i=n(297666),o=n(428322),s=n(939863),l=n(63666),c=n(15839),d=n(996887);let u="seen_community_comments_compose";function m({dismissModal:e}){let r=a.useRef(null),n=a.useCallback((0,i.s)(()=>{r.current&&(r.current.style.opacity="0")},0,!0),[r]),c=a.useCallback((0,i.s)(()=>{r.current&&(r.current.style.opacity="1")},450),[r]);a.useEffect(()=>(window.addEventListener("scroll",n,!1),window.addEventListener("scroll",c,!1),()=>{window.removeEventListener("scroll",n,!1),window.removeEventListener("scroll",c,!1)}),[n,c]);let u=a.useCallback(e=>{let n=r.current;n&&(e.isIntersecting?n.style.visibility="visible":n.style.visibility="hidden")},[r]);return a.createElement(l.NJ,{targetKey:"sort-state-dropdown",dismissModal:e,width:301,display:"hidden",containerRef:r,className:d.pO},a.createElement(o.a,{onIntersectionChange:u}),a.createElement("div",{className:d.Hj},(0,s.tx)("community.onboarding.see_more_of_what_you_love")),(0,s.tx)("community.onboarding.whether_you_want_to_focus_on_creators_you_follow_discover_new_files_and_plugins_or_find_out_what_s_trending_you_can_customize_your_feed_here"))}e=>a.createElement(m,{...e}),c.q3.SELF_CONTAINED},933464:(e,r,n)=>{var a,i,o,s=n(411855),l=n(109388),c=n(188507),d=n(629019),u=n.n(d);n(776250);var m=n(563706),p=n(563042),h=n(799569),_=n(268537),g=n(946689),f=n(395771),E=n(163023),y=n(348425),b=n(736242),I=n(939863),T=n(872860),v=n(545941),S=n(71425),w=n(738269),A=n(662275);n(902139);var N=n(672517),C=n(756085),L=n(318812),O=n(4564),R=n(215822);n(555328);var P=n(498606),D=n(978527),k=n(298543),M=n(7959),F=n(33876),x=n(103567),U=n(632788),B=n(488578);n(574056);var V=n(350913),G=n(37637),H=n(162506),W=n(769533),K=n(362679),Y=n(13556),$=n(665150),j=n(961803),z=n(331536),q=n(12747),X=n(237494),J=n(215877),Z=n(551034),Q=n(132623),ee=n(247866),et=n(583288);let er=class e extends s.PureComponent{constructor(){super(...arguments),this.state={isMouseOver:!1,shouldShowErrorModal:!1},this.isWidget=!!this.props.plugin.manifest?.containsWidget,this.onPublish=()=>{this.props.onPublishClick&&this.props.onPublishClick(this.props.plugin.localFileId)},this.onDelete=()=>{this.props.dispatch(S.qR(this.props.plugin.localFileId))},this.onClick=()=>{this.props.onTileClick?this.props.onTileClick():this.onRevealLocally()},this.onRevealLocally=()=>{(0,O.M)().openExtensionDirectory(this.props.plugin.localFileId)},this.showError=()=>{this.setState({shouldShowErrorModal:!0})},this.hideError=()=>{this.setState({shouldShowErrorModal:!1})},this.tileDropdownType=this.isWidget?e.DEVELOPMENT_PLUGIN_DROPDOWN:e.DEVELOPMENT_WIDGET_DROPDOWN,this.onContextMenu=e=>{this.props.dispatch(w.j7({type:this.tileDropdownType,data:{type:"context",localFileId:this.props.plugin.localFileId,clientX:e.clientX,clientY:e.clientY}}))},this.shouldShowContextMenu=()=>this.props.dropdownShown&&this.props.dropdownShown.type===this.tileDropdownType&&this.props.dropdownShown.data.localFileId===this.props.plugin.localFileId&&"context"===this.props.dropdownShown.data.type,this.shouldShowPointingDropdown=()=>null!=this.props.dropdownShown&&this.props.dropdownShown.type===this.tileDropdownType&&this.props.dropdownShown.data.localFileId===this.props.plugin.localFileId&&"pointing"===this.props.dropdownShown.data.type,this.onDotsClick=()=>{this.props.dispatch(w.j7({type:this.tileDropdownType,data:{type:"pointing",localFileId:this.props.plugin.localFileId}}))},this.dotsIconRef=e=>{this.dotsIconEl=l.findDOMNode(e)},this.onMouseEnter=()=>{this.setState({isMouseOver:!0})},this.onMouseLeave=()=>{this.setState({isMouseOver:!1})}}render(){let e=s.createElement(s.Fragment,null,s.createElement(_.c$,{onClick:this.onPublish},(0,I.tx)("community.plugins.publish_new_version")),s.createElement(_.c$,{onClick:this.onRevealLocally},function(e){switch(e){case"plugins-menu-dev-create-new":return(0,I.t)("fullscreen.plugins_menu.new_plugin");case"widgets-menu-dev-create-new":return(0,I.t)("fullscreen.plugins_menu.new_widget");case"widgets-menu-dev-import-from-manifest":return(0,I.t)("fullscreen.plugins_menu.import_widget_from_manifest");case"plugins-menu-dev-import-from-manifest":return(0,I.t)("fullscreen.plugins_menu.import_plugin_from_manifest");case"plugins-menu-open-directory-mac":return(0,I.t)("fullscreen.plugins_menu.open_directory_mac");case"plugins-menu-open-directory-win":return(0,I.t)("fullscreen.plugins_menu.open_directory_win");case"plugins-menu-open-directory-vscode":return(0,I.t)("fullscreen.plugins_menu.open_directory_vscode");default:return""}}((0,R.YQ)())),s.createElement(_.wv,null),s.createElement(_.c$,{onClick:this.onDelete},(0,I.tx)("community.permissions_modal_publish_tab.footer.remove"))),{name:r,error:n}=this.props.plugin,a=this.isWidget?(0,I.t)("community.plugins.widget"):(0,I.t)("community.plugins.plugin");return s.createElement("div",{className:H.bp},s.createElement("div",{className:n?H.rS:H.el,onClick:n?this.showError:this.onClick,onContextMenu:this.onContextMenu,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},n?s.createElement("div",{className:H.yd},s.createElement(y.t,{svg:ee.A})):this.isWidget?s.createElement("div",{className:H.im},this.props.isPublished?s.createElement("img",{className:H.K0,src:`/community/icon?resource_type=widget&resource_id=${this.props.plugin.plugin_id}`,alt:""}):s.createElement(y.t,{svg:j.A})):s.createElement("div",{className:H.im},s.createElement(y.t,{svg:J.A,fallbackSvg:Z.A})),s.createElement("div",{className:H.In},s.createElement("div",{className:n?H.iH:H.YG},r,this.props.isPublished?s.createElement(y.t,{svg:$.A}):null),n&&this.state.isMouseOver?s.createElement(b.o,{className:H.cV,text:"Error: "+n.text}):s.createElement(f.R,{className:H.cV,text:this.props.plugin.localFilePath.replace("/manifest.json","")})),n&&s.createElement(E.B,{className:H.rs,svg:m.Ay.mac?z.A:q.A})),s.createElement(M.YW,{svg:K.A,fallbackSvg:Y.A,className:u()(H.q6,this.shouldShowPointingDropdown()?H.Yh:""),onClick:this.onDotsClick,ref:this.dotsIconRef,"data-tooltip-type":P.Ib.TEXT,"data-tooltip":(0,I.t)("community.plugins.options"),selected:this.shouldShowPointingDropdown()}),this.shouldShowContextMenu()&&s.createElement(_.ms,{className:H.Gm,style:{left:this.props.dropdownShown.data.clientX,top:this.props.dropdownShown.data.clientY}},e),this.shouldShowPointingDropdown()&&s.createElement(k.Cf,{className:H.Gm,minWidth:122,targetRect:this.dotsIconEl.getBoundingClientRect(),propagateCloseClick:!0},e),this.state.shouldShowErrorModal&&s.createElement(B.aF,{size:"small",title:(0,I.t)("community.plugins.plugin_or_widget_issue",{resourceType:a})},s.createElement(h.s_,{...this.props}),s.createElement("div",{className:H.hM},this.props.plugin.error?this.props.plugin.error.text:n?.text),s.createElement("div",{className:H.H1},s.createElement(g.$$,{onClick:this.hideError},(0,I.tx)("general.done")))))}};function en(e){return s.createElement("div",{className:e.containerClassName||H.x$,onContextMenu:e.onOptionsClick,onClick:e.onClick||(e=>e.preventDefault())},s.createElement(G.li.IconAndBadgeContainer,{className:H.yq},s.createElement("div",{className:H.zr},e.pluginIcon),e.showEditorTypeIcon&&s.createElement(G.li.BadgeContainer,null,s.createElement(G.dn,{editorType:e.editorType,is16x16:!0}))),s.createElement("div",{className:H.Kz},s.createElement("div",{className:H.P8},s.createElement("div",{className:H.iZ},e.title),e.titleSuffix),s.createElement("div",{className:m.rr?H.uN:H.UB},"string"==typeof e.subTitle?(0,p.$J)(e.subTitle):e.subTitle)),s.createElement("div",{className:H.Hq},s.createElement(M.YW,{ref:e.optionsIconRef,svg:K.A,fallbackSvg:Y.A,className:H.UI,onClick:e.onOptionsClick,selected:e.isSelected,"data-tooltip-type":P.Ib.TEXT,"data-tooltip":(0,I.t)("community.plugins.options"),disabled:e.disabled})))}er.DEVELOPMENT_PLUGIN_DROPDOWN="DEVELOPMENT_PLUGIN_DROPDOWN",er.DEVELOPMENT_WIDGET_DROPDOWN="DEVELOPMENT_WIDGET_DROPDOWN",(a||(a={})).Tile=function(e){let r=(0,L.Um)(),n=r?.type===U.lD&&r.data.localFileId===e.plugin.localFileId,a=(0,c.wA)(),i=s.useRef(null);return s.createElement(s.Fragment,null,s.createElement(en,{pluginIcon:s.createElement("div",{className:H.TM},e.plugin.error?s.createElement(E.B,{className:H.QW,svg:et.A}):s.createElement(y.t,{className:H.ft,svg:W.A})),editorType:e.plugin.manifest.editorType||[],showEditorTypeIcon:e.showEditorTypeIcon,onOptionsClick:r=>{if(r.stopPropagation(),n){a(w.oB());return}let o=i.current;a(w.j7({type:U.lD,data:{localFileId:e.plugin.localFileId,targetRect:o.getBoundingClientRect()}}))},optionsIconRef:i,isSelected:n,title:e.plugin.name,subTitle:s.createElement(F.A,{localResource:e.plugin,publishedResource:void 0}),disabled:!1,containerClassName:e.containerClassName,onClick:e.onClick}),n&&s.createElement(U.T9,{localResource:e.plugin}))},(e=>{function r(e){if((0,v.AC)(e))return s.createElement(T.L,{height:"16"});if((0,R.Rt)(e)){let r=e.roles.org?.name;return s.createElement(E.B,{svg:X.A,className:H.kQ,"data-tooltip-type":P.Ib.TEXT,"data-tooltip":r?(0,I.t)("community.plugins.private_for_plugin_org_name",{orgName:r}):(0,I.t)("community.plugins.private_for_plugin_org")})}if(e.roles.is_public)return s.createElement(E.B,{className:H.Ac,svg:Q.A,"data-tooltip-type":P.Ib.TEXT,"data-tooltip":(0,I.t)("community.plugins.published_to_community")})}e.Tile=function(e){let n=(0,L.Um)(),a=n?.type===U.lD&&n.data.pluginId===e.plugin.id&&n.data.targetRect,i=(0,c.wA)(),o=s.useRef(null),l=(0,R.uF)(e.plugin),d=(0,C.WK)(e.plugin.id),u=s.useCallback(()=>r(e.plugin),[e.plugin])();return s.createElement(s.Fragment,null,s.createElement(en,{containerClassName:e.containerClassName,onClick:e.onClick,pluginIcon:s.createElement(D.V,{plugin:l}),editorType:l.manifest.editorType||[],showEditorTypeIcon:!0,onOptionsClick:()=>{if(a){i(w.oB());return}let r=o.current;i(w.j7({type:U.lD,data:{pluginId:e.plugin.id,targetRect:r.getBoundingClientRect()}}))},optionsIconRef:o,disabled:!!e.plugin.unpublished_at,isSelected:a,title:l.name,titleSuffix:u,subTitle:s.createElement(F.A,{localResource:d,publishedResource:e.plugin})}),a&&s.createElement(U.T9,{publishedResource:e.plugin,viewResource:()=>{i(w.$T({view:"communityHub",subView:"plugin",publishedPluginId:e.plugin.id})),i(A.Ce())}}))},e.PluginManagementTitleBadge=r})(i||(i={})),(o||(o={})).Tile=function(e){let r=(0,R.uF)(e.plugin);return s.createElement("div",{className:e.containerClassName??H.x$},s.createElement(G.li.IconAndBadgeContainer,{className:H.yq},s.createElement("div",{className:H.zr},s.createElement(D.V,{plugin:r})),s.createElement(G.li.BadgeContainer,null,s.createElement(G.dn,{editorType:r.manifest.editorType,is16x16:!0}))),s.createElement("div",{className:H.Kz},s.createElement(x.PE,{resource:e.plugin})))},(0,N.tf)(function({plugin:e,className:r,onClick:n}){let a=(0,R.uF)(e),i=(0,c.wA)();return s.createElement("a",{className:r||H.m6,"data-plugin-id":e.id,key:e.id,onClick:r=>{r.metaKey||(r.preventDefault(),n?.(),i(w.$T({view:"communityHub",subView:"plugin",publishedPluginId:e.id})))},href:(0,V.ho)(e.id)},s.createElement(G.li.IconAndBadgeContainer,{className:H.yk},s.createElement("div",{className:H.A9},s.createElement(D.V,{plugin:a})),s.createElement(G.li.BadgeContainer,null,s.createElement(G.dn,{editorType:a.manifest.editorType,is16x16:!0}))),s.createElement("div",{className:H.XV},s.createElement("div",{className:H.vc},a.name),s.createElement("div",{className:H.ar},(0,v.G8)(a,p.$J))))})},884289:(e,r,n)=>{n.d(r,{WW:()=>V});var a=n(411855),i=n(188507),o=n(776250),s=n(320063),l=n(860601),c=n(62342),d=n(163023),u=n(154254),m=n(939863),p=n(749949),h=n(837324),_=n(162895),g=n(738269),f=n(662275),E=n(318812),y=n(193212),b=n(99506),I=n(556261),T=n(56099),v=n(215822),S=n(239671),w=n(376485),A=n(596578),N=n(728587),C=n(298543),L=n(928754),O=n(37637),R=n(883691),P=n(558011),D=n(501191);function k(e,r,n,a){(0,o.sx)("extension_opened_from_community",{extension_id:e,file_type:r,editor_type:n,searchSessionId:a})}function M(e){return e===S.nT.Whiteboard?c.y1.WHITEBOARD:c.y1.DESIGN}function F(e){return a.createElement("button",{type:"button",className:R.t,onClick:e.onClick,"data-testid":e.dataTestId},a.createElement("div",{className:R.Z3},a.createElement("div",{className:u.cx.w32.flex.justifyCenter.$},e.icon),a.createElement("div",{className:R.CA},e.text)),e.rightIcon)}function x(e){let r=e.fileName?e.fileName:e.playgroundFile?(0,m.t)("community.using.playground_file"):e.fileIconType===c.y1.WHITEBOARD?(0,m.t)("community.using.figjam_board"):(0,m.t)("community.using.figma_file");return a.createElement(F,{onClick:e.onClick,"data-testid":e.dataTestId,icon:a.createElement("div",{className:R.dD},a.createElement(O.Zt,{fileIconType:e.fileIconType})),text:r})}function U(e){let r=(0,i.wA)(),{files:n,resource:o,editorTypes:s}=e,l=(0,p.J)(),d=e=>{if(!e.org_id)return;let n=(0,h.qD)(o),a={extension:{pluginId:n.plugin_id,iconUrl:n.redirect_icon_url,name:n.name},isWidget:o.is_widget,orgId:e.org_id,workspaceDetails:{workspaceId:e.workspace_id,workspaceName:e.workspace_name,fileKey:e.key,fileName:e.name},openedFrom:"community",fullscreenEditorType:null};r((0,f.to)({type:L.S,data:a}))},u=e=>{k(o.id,"existing_file",(0,S.wN)(e.editor_type),l),r(_.aI({resource:o,fullscreenEditorType:e.editor_type===b._Y.DESIGN&&(0,w.Pe)(s)?S.nT.DevHandoff:(0,v.Tz)(e.editor_type),fileKey:e.key,userId:e.user_id}))};return n?.length===0?null:a.createElement(a.Fragment,null,a.createElement("div",{className:R.Dh},(0,m.tx)("community.detail_view.recent_files")),a.createElement("div",{className:R.Dr},n?n.map(e=>a.createElement(x,{key:e.key,fileIconType:e.editor_type===b._Y.DESIGN&&e.last_published_at?c.y1.PUBLISHED:e.editor_type===b._Y.DESIGN?c.y1.DESIGN:c.y1.WHITEBOARD,fileName:e.name,onClick:()=>{r(g.oB()),e.can_run?u(e):e.requests_allowed&&d(e)}})):a.createElement("div",{className:R.d1},[...Array(6)].map((e,r)=>a.createElement("div",{key:r,className:R.iM})))))}function B({hasSecondaryDropdown:e,text:r,primaryFullscreenEditorType:n,resource:o}){let s=(0,i.wA)(),l=(0,v.uF)(o),c=(0,p.J)();return a.createElement(F,{onClick:()=>{if(!e){let e=!!(l.playground_fig_file||n===S.nT.DevHandoff);k(o.id,e?"playground":"new_file",n,c),s(g.oB()),s(_.aI({resource:o,fullscreenEditorType:n,isPlaygroundFile:e}))}},icon:a.createElement(d.B,{svg:D.A,className:R.K1}),text:r,rightIcon:e?a.createElement(d.B,{svg:P.A,className:R.Yr}):void 0})}function V(e,r,n){let c=(0,i.wA)(),d=(0,E.Um)(),u=d?.type===G&&d.data.resourceId===e.id&&d.data.viewContext===n,h=a.memo(function({primaryFullscreenEditorType:n}){let i;let h=(0,I.yN)({migrationGroup:T.L.GROUP_1,component:"PluginTrySwitchEditorDropdown",attribute:"figjamDisabledAt",legacy:(e,r)=>r?.figjam_disabled_at??null,migrated:(e,r)=>r?.figjamDisabledAt??null}),f=(0,p.J)(),[E,b]=a.useState();(0,s.h)(()=>{!async function(){let r=await A.C.getRecentFiles({extensionId:e.id,isWidget:!!e.is_widget});(0,o.sx)("recent_files_for_plugins_loaded",{response_count:r.data.meta.length,extension_id:e.id,searchSessionId:f}),b(r.data.meta.filter(e=>e.can_run||e.requests_allowed).slice(0,6))}()});let L=(0,v.uF)(e),O=L.manifest.editorType?.sort()??[],P=!!L.playground_fig_file||n===S.nT.DevHandoff,D=O.includes(w.FW.FIGMA)&&O.includes(w.FW.FIGJAM);D&&(n!==S.nT.Design&&n!==S.nT.DevHandoff||h?n===S.nT.Whiteboard&&(i=S.nT.Design):i=S.nT.Whiteboard);let F=(()=>{let r=[{displayText:(0,m.t)("community.using.new_file"),preventDismissOnSelected:!0,render:()=>a.createElement(x,{fileIconType:M(n),onClick:()=>{k(e.id,"new_file",n,f),c(g.oB()),c(_.aI({resource:e,fullscreenEditorType:n}))}})}];return D&&i&&r.push({displayText:(0,m.t)("community.using.new_file"),preventDismissOnSelected:!0,render:()=>a.createElement(x,{fileIconType:M(i),onClick:()=>{k(e.id,"new_file",i,f),c(g.oB()),c(_.aI({resource:e,fullscreenEditorType:i}))}})}),r})(),V={displayText:(0,m.t)("community.using.new_file"),className:R.pz,preventDismissOnSelected:!0,render:()=>a.createElement(B,{hasSecondaryDropdown:F.length>1,text:(0,m.t)("community.using.new_file"),primaryFullscreenEditorType:n,resource:e}),children:F.length>1?F:void 0},G={displayText:(0,m.t)("community.using.playground_file"),className:R.pz,preventDismissOnSelected:!0,render:()=>a.createElement(B,{hasSecondaryDropdown:!1,text:(0,m.t)("community.using.playground_file"),primaryFullscreenEditorType:n,resource:e})};(0,y.U3)("resize",()=>{u&&c(g.oB())});let H=(()=>{let r=[];if(void 0===E||E.length>0)r.push({displayText:"recentFiles",preventDismissOnSelected:!0,render:()=>a.createElement(U,{files:E,resource:e,editorTypes:O})});else if(!P&&D)return F;return P?r.push(G):r.push(V),r})();return a.createElement(N.j,{showPoint:!1,lean:r,className:R.qN,subMenuClassName:R._3,type:C.it.MATCH_BACKGROUND,rootAndSubmenuMaxWidth:280,minWidth:280,autoHeight:!0,onSelectItem:l.lQ,hidePointWhenContentOffScreen:!0,items:H,parentRect:d?.data.targetRect,dispatch:c})});return{dropdownIsShown:u,toggleSwitchEditorDropdown:(r,a)=>{let i=r.current?.getBoundingClientRect();i&&((void 0!==a?a:!u)?c(g.j7({type:G,data:{resourceId:e.id,viewContext:n,targetRect:i}})):c(g.oB()))},PluginTrySwitchEditorDropdown:h}}let G="PLUGIN_TRY_SWITCH_EDITOR_DROPDOWN"},749449:(e,r,n)=>{n.d(r,{KM:()=>p,YJ:()=>f,fJ:()=>g,x5:()=>h});var a=n(411855),i=n(629019),o=n.n(i),s=n(154254),l=n(939863),c=n(612776),d=n(226055),u=n(78129),m=n(865991),p=(e=>(e.PUBLISH="publish",e.PERMISSIONS="permissions",e.DATA_SECURITY="data_security",e))(p||{});let h=["publish","data_security","permissions"],_=[{tab:h[0],title:()=>(0,l.t)("community.publishing.publish_tab"),isVisible:()=>!0},{tab:h[1],title:()=>(0,l.t)("community.publishing.data_security_tab"),isVisible:()=>!0},{tab:h[2],title:()=>(0,l.t)("community.publishing.permissions_tab"),dataOnboardingKey:u.k,isVisible:()=>!0}];function g(e){let r=(0,d.GS)(),n=(0,c.zI)({isUI3:r});return a.createElement("div",{className:e.tab===e.selectedTab?o()(m.xR,{[m.E3]:n}):o()(m.Mf,{[m.E3]:n}),key:e.tab,role:"tab",onClick:()=>e.onClick(e.tab),onMouseDown:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),tabIndex:0,"data-onboarding-key":e.dataOnboardingKey},e.title())}function f(e){return a.createElement("div",{className:s.cx.flex.itemsCenter.$,role:"tablist"},_.map(r=>e.allowedTabs.includes(r.tab)&&r.isVisible()?a.createElement(g,{key:r.tab,selectedTab:e.selectedTab,onClick:e.onClick,tab:r.tab,title:r.title,dataOnboardingKey:r.dataOnboardingKey}):null))}},350913:(e,r,n)=>{n.d(r,{X$:()=>o,YW:()=>l,ab:()=>c,ho:()=>s,ox:()=>d});var a=n(837324),i=n(97128);function o(e,r){return(0,a.UI)({path:i.Uo.FILE,id:e,name:r})}function s(e,r){return(0,a.UI)({path:i.Uo.PLUGIN,id:e,name:r})}function l(e,r){return(0,a.UI)({path:i.Uo.WIDGET,id:e,name:r})}function c(e,r){return new URL(s(e,r),location.href).href}function d(e,r){return new URL(l(e,r),location.href).href}},180881:(e,r,n)=>{n.d(r,{H:()=>m});var a=n(411855),i=n(188507),o=n(939863),s=n(545941),l=n(941381),c=n(555328),d=n(237870),u=n(488578);let m=(0,d.Ju)(function({plugin:e}){let r,n,d,m;let p=(0,i.wA)(),h=e.is_widget?(0,o.t)("community.plugins.widget"):(0,o.t)("community.plugins.plugin"),_=()=>{p(l.et({resource:e}))};return(0,s.AC)(e)?(n=(0,o.t)("community.plugins.withdraw_from_review"),r=e.roles.org?(0,o.t)("community.plugins.this_action_will_remove_your_public_resource_type_review_submission_your_resource_type_will_still_be_available_to_members_of_org_name",{resourceType:h,orgName:e.roles.org.name}):(0,o.t)("community.plugins.this_action_will_remove_your_public_resource_type_review_submission",{resourceType:h}),d=(0,o.t)("community.plugins.withdraw"),m=()=>{e.roles.org?p(l.zn({pluginId:e.id,role:e.roles})):_()}):((0,c.m3)(e)?(n=(0,o.t)("community.plugins.delist_your_resource_type",{resourceType:h}),r=(0,o.t)("community.resource.delisting_this_resource_will_prevent_people_from_discovering_or_purchasing_this_resource"),d=(0,o.t)("community.resource.delist")):(n=(0,o.t)("community.plugins.unpublish_resource_type",{resourceType:h}),r=(0,o.t)("community.plugins.this_action_will_cause_your_resource_type_to_disappear_current_users_will_lose_access_to_your_resource_type_immediately_you_cannot_undo_this_action_however_if_you_publish_your_resource_type_again_later_it_will_keep_its_url",{resourceType:h}),d=(0,o.t)("community.resource.unpublish")),m=_),a.createElement(u.Rw,{confirmationTitle:n,content:r,onConfirm:m,confirmText:d,size:"small",destructive:!0,disableClickOutsideToHide:!0,enableEscapeToClose:!0,popStack:!0})},"UnpublishPluginModal",d.ZU.YES)},273226:(e,r,n)=>{n.d(r,{B_:()=>G,FF:()=>eo,Fv:()=>q,O2:()=>R,OE:()=>O,Pp:()=>F,Ql:()=>V,Rq:()=>er,T1:()=>en,X9:()=>H,Yi:()=>J,ZH:()=>Z,_P:()=>z,aO:()=>ee,dl:()=>U,eM:()=>B,f3:()=>Q,fx:()=>ei,iz:()=>K,k4:()=>X,lg:()=>ea,m5:()=>$,qe:()=>P,s_:()=>es,ui:()=>j,wd:()=>Y,wh:()=>L,xP:()=>W,xb:()=>x,zn:()=>M});var a=n(411855),i=n(527395),o=n(937456),s=n(710752),l=n(77437),c=n(31524),d=n(459593),u=n(439492),m=n(785273),p=n(313177),h=n(470230),_=n(460307),g=n(700021),f=n(299321),E=n(776250),y=n(966712),b=n(852438),I=n(939863),T=n(378905),v=n(848661),S=n(705129),w=n(968109),A=n(283293),N=n(144919),C=n(626241);let L=304;var O=(e=>(e[e.DEFINITION=0]="DEFINITION",e[e.ASSIGNMENT=1]="ASSIGNMENT",e))(O||{}),R=(e=>(e[e.REGULAR=0]="REGULAR",e[e.WIDE=1]="WIDE",e[e.UNBOUNDED=2]="UNBOUNDED",e[e.RESIZABLE_SIDEBAR=3]="RESIZABLE_SIDEBAR",e))(R||{});function P(e){switch(e){case f.J0O.BOOL:return N.A;case f.J0O.NUMBER:return C.A;case f.J0O.TEXT:return A.A;case f.J0O.INSTANCE_SWAP:return w.A}}let D={[f.J0O.BOOL]:{SIZE_24_SMALL:i.$,SIZE_16:o.X},[f.J0O.TEXT]:{SIZE_24_SMALL:s.e,SIZE_16:l.I},[f.J0O.INSTANCE_SWAP]:{SIZE_24_SMALL:c.y,SIZE_16:d.m},[f.J0O.NUMBER]:{SIZE_24_SMALL:i.$,SIZE_16:o.X}},k={[f.J0O.BOOL]:{SIZE_24_SMALL:i.$,SIZE_16:o.X},[f.J0O.TEXT]:{SIZE_24_SMALL:u.p,SIZE_16:m.T},[f.J0O.INSTANCE_SWAP]:{SIZE_24_SMALL:p.V,SIZE_16:d.m},[f.J0O.NUMBER]:{SIZE_24_SMALL:h.O,SIZE_16:_.c}};function M(e,r=!1){let n=((0,y.kc)().ds_variable_props_unified_ui?k:D)[e][r?"SIZE_16":"SIZE_24_SMALL"];return a.createElement(n,null)}function F(e,r,n,a){e&&(0,E.sx)("ds_component_props_def_create_modal_open",{product_component_guid:e.guid,product_component_is_state_group:e.isStateGroup,is_bottoms_up_creation:r,prop_type:f.J0O[n],source:a})}function x(e){switch(e){case f.J0O.BOOL:return(0,I.t)("design_systems.component_properties.boolean");case f.J0O.TEXT:return(0,I.t)("design_systems.component_properties.text");case f.J0O.INSTANCE_SWAP:return(0,I.t)("design_systems.component_properties.instance_swap");case f.J0O.VARIANT:return(0,I.t)("design_systems.component_properties.variant");case f.J0O.NUMBER:return(0,I.t)("design_systems.component_properties.number")}}function U(e,r){if((0,v.gl)(r))return v.oV;if((0,y.kc)().ds_variable_props_binding_vars&&r&&"object"==typeof r&&"type"in r&&r.type===f.Z_n.ALIAS||(0,y.kc)().ds_variable_props_binding_props&&r&&"object"==typeof r&&"type"in r&&r.type===f.Z_n.NODE_FIELD_ALIAS)return r;switch(e){case f.J0O.BOOL:return"true"===r;case f.J0O.TEXT:case f.J0O.INSTANCE_SWAP:case f.J0O.NUMBER:return r;default:throw Error(`Unexpected component prop type: ${e}`)}}function B(e){switch(e){case g.R.VISIBLE:return{defaultType:f.J0O.BOOL,types:[f.J0O.BOOL]};case g.R.TEXT:return{defaultType:f.J0O.TEXT,types:[f.J0O.TEXT,f.J0O.NUMBER]};case g.R.OVERRIDDEN_SYMBOL_ID:return{defaultType:f.J0O.INSTANCE_SWAP,types:[f.J0O.INSTANCE_SWAP]}}}function V(e){switch(e){case f.J0O.BOOL:return!0;case f.J0O.TEXT:return"";case f.J0O.INSTANCE_SWAP:return null;case f.J0O.VARIANT:return(0,I.t)("design_systems.states_panel.default_property_value");case f.J0O.NUMBER:return"0"}}function G(e,r){switch(e){case f.J0O.INSTANCE_SWAP:return!!r;case f.J0O.TEXT||f.J0O.VARIANT:return!!r?.length;case f.J0O.NUMBER:return er(r);default:return!0}}let H={format:e=>e?(0,I.t)("design_systems.component_properties.boolean_true"):(0,I.t)("design_systems.component_properties.boolean_false"),isEqual:(e,r)=>e===r};function W(e,r){if(!r.length)return null;let n=e(r[0]);return n&&r.every(r=>e(r)===n)?n:null}function K(e,r){switch(e){case f.uXg.CONFLICTING_NAMES_ERROR:case f.uXg.CONFLICTING_NAMES_WITH_VARIANT_ERROR:return(0,I.t)("design_systems.component_properties.error_conflicting_name");case f.uXg.UNUSED_DEF_ERROR:return(0,I.t)("design_systems.component_properties.error_unused_property");default:return r?(0,I.t)("design_systems.component_properties.has_unpublished_preferred_values"):""}}function Y(e,r){if(!e.length)return null;let{backingSymbolGUID:n,backingStateGroupGUID:a}=(0,S.nD)(new Set(e),r);return a&&(0,v.hS)(a)?r.get(a):n&&(0,v.hS)(n)?r.get(n):v.oV}function $(e,r,n){let a;if(r.size)return a=r.has(v.oV)?v.oV:e===f.J0O.INSTANCE_SWAP?Y([...r],n):r.size>1?v.oV:r.values().next().value,U(e,a)}function j(e,r,n){return(0,T.TK)(e,n)?f.glU.getDefaultStateForLocalStateGroup(r):f.glU.getDefaultStateForSubscribedStateGroup(r,e.default_state_key)}function z(e){if(e)try{return new URL(e).hostname}catch(e){}}var q=(e=>(e.PILL="pill",e.ICON="icon",e))(q||{});function X(e,r){let n;if(e.length){for(let a of e){let e=r.get(a);if(e){if(e.isInstance){let r=e.symbolId;if(!r)continue;if(void 0===n)n=r;else if(r!==n)return}else if(e.isCodeInstance){let r=e.backingCodeComponent?.guid;if(!r)continue;if(void 0===n)n=r;else if(r!==n)return}}}return n}}function J(e,r){let n;if(e.length){for(let a of e){let e=r.get(a);if(!e||"INSTANCE"!==e.type)continue;let i=e.symbolId;if(!i)continue;let o=r.get(i);if(!o)continue;if(o.isLooseComponent)return;let s=o.containingStateGroupId;if(s){if(void 0===n)n=s;else if(s!==n)return}}return n}}function Z(e,r){if(!e.length)return new Set;let n=new Set(r[e[0]]?.hiddenProps);return e.reduce((e,n)=>r[n]?.hiddenProps?(0,b.iR)(e,new Set(r[n].hiddenProps)):e,n)}function Q(e,r){return e?r[e]?.componentPropDefError??f.uXg.NONE:f.uXg.NONE}function ee(e,r){let n=r[e]?.defs;return n?Object.values(n).sort((e,r)=>e.sortPosition<r.sortPosition?-1:1):[]}let et=/^[+-]?(\d+(\.\d*)?|\.\d+)$/;function er(e){if(!et.test(e))return!1;let r=parseFloat(e);return!isNaN(r)&&isFinite(r)&&""!==e.trim()}function en(e){return er(e)?Number(parseFloat(e).toFixed(2)):(console.warn("Failed converting string to float:",e),0)}function ea(e){return isNaN(e)?(console.warn("Failed converting number to string:",e),"0"):e.toFixed(2).replace(/\.?0+$/,"")}function ei(e){if(e?.length===1)switch(e[0]){case"TEXT_DATA":return g.R.TEXT;case"VISIBLE":return g.R.VISIBLE;default:return}}function eo(e){return{type:f.Z_n.NODE_FIELD_ALIAS,resolvedType:e.value.varValue.resolvedType,value:{stablePathToNode:e.value.stablePath,nodeField:"COMPONENT_PROP_ASSIGNMENTS",indexOrKey:e.value.explicitDefId}}}function es(e){return a.useMemo(()=>e===f.J0O.BOOL?{variableType:f.rXF.BOOLEAN,requestedTypes:[f.rXF.BOOLEAN],variableScope:f.j0r.ALL_SCOPES}:e===f.J0O.TEXT?{variableType:f.rXF.TEXT_DATA,requestedTypes:[f.rXF.STRING],variableScope:f.j0r.TEXT_CONTENT}:e===f.J0O.NUMBER?{variableType:f.rXF.FLOAT,requestedTypes:[f.rXF.FLOAT],variableScope:f.j0r.ALL_SCOPES}:void 0,[e])}},467302:(e,r,n)=>{n.d(r,{nj:()=>u});var a=n(411855);n(188507);var i=n(299321);n(880934);var o=n(44948),s=n(848661);n(234945);var l=n(273226),c=n(510879);n(107244);var d=n(958317);function u(e,r,n,u){let m;let p=(0,o.k9)(()=>n?function(e,r,n){let a=(0,l.ZH)(r,n);return(0,l.aO)(e,n).filter(e=>!a.has(e.explicitDefID))}(n,[e],r):[],[e,n,r]),h=(0,o.k9)(()=>n?(0,d.Jm)(n,r):[],[n,r]),_=(0,o.k9)(()=>(function(e,r,n,a){let o={};return e.forEach(e=>{let c=new Set,d=new Set;for(let o of r){let r=a[o]?.assignments?.[e.explicitDefID];if(r){if(r.isMixed){c.add(s.oV);continue}if(r.value&&"object"==typeof r.value&&"value"in r.value&&r.value.value&&"object"==typeof r.value.value&&"stablePathToNode"in r.value.value&&"indexOrKey"in r.value.value){let e=r.value.value.stablePathToNode,a=e&&1===e.length?n.get(e[0]):null;if(a&&a.isState&&a.containingStateGroupId){let e=i.Egt.getExplicitPropDefIDBinding(a.guid,r.value.value.indexOrKey);r.value.value.stablePathToNode=[a.containingStateGroupId],r.value.value.indexOrKey=e}}if(null!=r.value){let e=JSON.stringify(r.value);d.has(e)||c.add(r.value),d.add(e)}}}o[e.explicitDefID]=(0,l.m5)(e.type,c,n)}),o})(p,[e],u,r),[e,r,u,p]),g=(0,o.k9)(()=>n&&u.get(n)?.isStateGroup?function(e,r,n){let a=n.get(e);return a?.isStateGroup?a.childrenNodes.reduce((e,n)=>{let a=r[n.guid]?.stateVariantProps;return a?e.push({...a,guid:n.guid}):e.push({propertyValues:n.statePropertyValues,guid:n.guid}),e},[]):[]}(n,r,u):[],[n,r,u]),f=(0,o.k9)(()=>n?function(e,r,n){let a=n[e]?.stateGroupVariantProps?.propertySortOrder??[];return(0,c.s)(n,r,a)}(n,[e],r):{},[e,n,r]),E=u.get(e)?.symbolId;return E&&u.get(E)?.isState||(m=[]),m=g.filter(e=>E===e.guid),a.useMemo(()=>({typedPropDefsExcludingHidden:p,variantPropDefs:h,assignmentValuesByDefId:_,allStateVariantProps:g,backingStateVariantProps:m,statePropertyValues:f}),[p,h,_,g,m,f])}},567488:(e,r,n)=>{n.d(r,{Yc:()=>A,yQ:()=>N});var a=n(411855),i=n(109388),o=n(188507),s=n(313177),l=n(700021),c=n(794272),d=n(153234),u=n(46481),m=n(939863),p=n(738269),h=n(662275),_=n(318812),g=n(498606),f=n(420186),E=n(227795),y=n(121003),b=n(273226),I=n(476951),T=n(107244),v=n(224690),S=n(646476);let w=e=>e.stopPropagation();function A(e,r){let n=a.useMemo(v.On,[]),i=a.useMemo(T.Ms,[]),{containingProductComponent:o,defReferencedBySelection:s,nodesHaveInstanceSublayer:d,selectionHasProductComponent:u}=(0,c.R)(a=>{let o=(0,T.Lg)(a),s=o?a.mirror.sceneGraph.get(o):null,l=i(a,r);return{containingProductComponent:s,defReferencedBySelection:n(a,e),nodesHaveInstanceSublayer:l,selectionHasProductComponent:(0,T.Ln)(a)}});return!a.useMemo(()=>!!o?.guid&&!d&&(!u||e!==l.R.VISIBLE),[o,d,u,e])||!!s}function N({nodeField:e,defaultValue:r,guids:n}){let l=a.useRef(null),N=A(e,n),C=function(e){let r=(0,c.R)(e=>e.modalShown),n=a.useMemo(()=>(0,b.eM)(e).defaultType,[e]),i=y.sD.concat("-",e),o=(0,_.Um)(),s=!!o&&o.type===i&&o.data.nodeField===e,l=!!r&&r.type===I.n.type&&r.data?.propType===n;return s||l}(e),L=function(e,r,n,s){let l=(0,o.wA)(),d=a.useMemo(()=>(0,b.eM)(e).defaultType,[e]),u=a.useMemo(v.p1,[]),{containingProductComponent:m,hasExistingDefs:_}=(0,c.R)(r=>{let n=(0,T.Lg)(r);return{containingProductComponent:n?r.mirror.sceneGraph.get(n):null,hasExistingDefs:!!u(r,n,e).length}});return a.useCallback(()=>{if(r.current){if(_)l(p.j7({type:y.sD.concat("-",e),data:{nodeField:e,targetRect:r.current.getBoundingClientRect()}}));else{(0,b.Pp)(m,!0,d,b.Fv.ICON);let a=i.findDOMNode(r.current),o=a?(0,f.cn)(a,b.wh):{};l(h.to({type:I.n,data:{prePopulatedDefaultValue:n,propType:d,refField:e,initialX:o?.x??0,initialY:o?.y??0}}))}}},[r,_,void 0,l,e,m,d,n])}(e,l,r),O=function(e){let r=a.useMemo(v.p1,[]),{hasExistingDefs:n}=(0,c.R)(n=>{let a=(0,T.Lg)(n);return{hasExistingDefs:!!r(n,a,e).length}}),i=a.useMemo(()=>(0,b.eM)(e).defaultType,[e]);return n?(0,m.t)("design_systems.component_properties.apply_component_property",{propType:(0,b.xb)(i).toLocaleLowerCase()}):(0,m.t)("design_systems.component_properties.create_component_property_of_type",{propType:(0,b.xb)(i).toLocaleLowerCase()})}(e);return N?null:a.createElement(a.Fragment,null,a.createElement("div",{ref:l},a.createElement(E.YW,{recordingKey:d.Pt("applyPropRefButton",e),selected:C,"data-tooltip-type":g.Ib.TEXT,"data-tooltip":O,onMouseDown:w,onClick:L},a.createElement(u.U,{svg:S.A},a.createElement(s.V,null)))),a.createElement(y.Xn,{source:b.Fv.ICON,nodeField:e,defaultValue:r}))}},983850:(e,r,n)=>{n.d(r,{qC:()=>b,tO:()=>T});var a=n(411855),i=n(188507),o=n(700021),s=n(299321);n(629019);var l=n(153234);n(522739),n(457921);var c=n(939863);n(29680),n(721478);var d=n(45148),u=n(690710),m=n(893606),p=n(939791),h=n(273226),_=n(288063);n(467302);var g=n(373038),f=n(222730),E=n(444730),y=n(473394);n(501891);let b=20;var I=(e=>(e[e.ALL_PROPS=0]="ALL_PROPS",e[e.VARIANT_PROPS=1]="VARIANT_PROPS",e[e.TYPED_PROPS=2]="TYPED_PROPS",e))(I||{});function T({typedPropDefs:e,variantPropDefs:r,propDimension:n,enableHidingOverflowRowsInUI3:o,...l}){let[d,p]=a.useState(void 0),[_,g]=a.useState([]),[f,E]=a.useState(!1),y=(0,m.R)(),b=(0,i.d4)(u.i$)===s.iCO.STATE&&n===h.OE.DEFINITION;a.useEffect(()=>{p(void 0),g([])},[r,e]);let I=!!r.length,T=!!e.length&&!b,w={shouldShowVariantProps:I,shouldShowTypedProps:T,selectedSection:d,selectedPropIndices:_,onSelectProps:(e,r)=>{p(e),g(r)},isInStateAuthoringView:b};if(y&&o){let{numHiddenRows:i,variantPropDefsToShow:o,typedPropDefsToShow:s}=function(e,r,n,a,i){let o=(r?a.length:0)+(n?i.length:0);if(e||o<=5)return{numHiddenRows:0,variantPropDefsToShow:r?a:[],typedPropDefsToShow:n?i:[]};let s=4,l=a;return r?s-=(l=a.slice(0,4)).length:l=[],{numHiddenRows:o-4,variantPropDefsToShow:l,typedPropDefsToShow:n?i.slice(0,s):[]}}(f,I,T,r,e);return a.createElement(a.Fragment,null,a.createElement(v,{variantPropDefs:o,typedPropDefs:s,propDimension:n,...w,...l}),i>0&&!f&&a.createElement(S,{label:(0,c.t)("design_systems.component_properties.show_more_property_rows",{count:i}),onClick:()=>E(!0)}))}return a.createElement(v,{variantPropDefs:r,typedPropDefs:e,propDimension:n,...w,...l})}function v({shouldShowVariantProps:e,shouldShowTypedProps:r,selectedSection:n,selectedPropIndices:i,onSelectProps:s,isInStateAuthoringView:c,propDimension:u,variantPropDefs:m,typedPropDefs:p,guids:b,assignmentValues:I,allStateVariantProps:T,backingStateVariantProps:v,statePropertyValues:S,productComponentGUID:w,forBubbledProps:A,hideErrors:N,containerWidth:C,viewOnlyMode:L,hideIcon:O,recordingKey:R,errorBoxFlushWithContainer:P,splitVariantAndTypedProps:D,sceneGraph:k,inPlayground:M,instanceSwapPickerInitialHeight:F,instanceSwapPickerInitialPosition:x,entrypointForInstanceSwapPicker:U}){return a.createElement(_.n,null,a.createElement(a.Fragment,null,e&&u===h.OE.DEFINITION&&a.createElement(y.L,{defs:m,guids:b,selectedIndices:n===o.u.VARIANT?i:[],onSelectIndices:e=>s(o.u.VARIANT,e),isInStateAuthoringView:c,recordingKey:l.Pt(R,"propDefs",o.u.VARIANT)}),e&&w&&u===h.OE.ASSIGNMENT&&a.createElement(E.T,{variantPropDefs:m,guids:b,allStateVariantProps:T,backingStateVariantProps:v,stateGroupGUID:w,statePropertyValues:S,forBubbledProps:A,containerWidth:C,sceneGraph:k,viewOnly:0===L||1===L,hideIcon:O,recordingKey:l.Pt(R,"propDefs",o.u.VARIANT)}),e&&r&&D&&a.createElement("div",{className:"props_section--divider--5xEyL"}),r&&u===h.OE.DEFINITION&&a.createElement(f.e,{defs:p,guids:b,selectedIndices:n===o.u.TYPED?i:[],onSelectIndices:e=>s(o.u.TYPED,e),recordingKey:l.Pt(R,"propDefs",o.u.TYPED)}),r&&u===h.OE.ASSIGNMENT&&a.createElement(g.c,{typedPropDefs:p,guids:b,assignmentValues:I,forBubbledProps:A,containerWidth:C,viewOnly:0===L||2===L,hideIcon:O,sceneGraph:k,inPlayground:M,instanceSwapPickerInitialHeight:F,instanceSwapPickerInitialPosition:x,recordingKey:l.Pt(R,"propDefs",o.u.TYPED),entrypointForInstanceSwapPicker:U}),!N&&a.createElement(d.aq,{flushWithContainer:P})))}function S({label:e,onClick:r}){return a.createElement("button",{onClick:r,"aria-label":e},a.createElement(p.Ad,{label:null,input:a.createElement("div",{className:"props_section--ui3ShowMoreText--9ZaYD"},e)}))}},215440:(e,r,n)=>{n.d(r,{Ae:()=>m});var a=n(461816),i=n.n(a),o=n(302245),s=n(966712),l=n(97395),c=n(234945),d=n(107244);(0,l.P8)([d.C1,d.tO,d.S8,d.Rk,d.TJ],(e,r,n,a,i)=>i?void 0:e&&n&&e[n]?e[n].primaryInstances:(0,s.kc)().dse_editor_templates_v1&&r&&a&&r[a]?r[a].primaryInstances:void 0);let u=(0,l.P8)([c.dK,d.C1,d.tO,d.S8,d.Rk,d.TJ,d.QW],(e,r,n,a,o,l,c)=>{if(l)return;let d=[],u=new Set;if(r&&a&&r[a]){let n=e.get(a);if(!n)return;if(!n.isStateGroup||0===c.length)return i()(r[a].primaryInstances?.filter(e=>e.isBubbled)||[],e=>[e.connectedGUIDs,...e.bubbledNestedInstances.map(e=>e.connectedGUIDs)]);for(let e of c)for(let n of r[e]?.primaryInstances?.filter(e=>e.isBubbled)||[]){if(n.connectedGUIDs&&!u.has(n.connectedGUIDs[0])){for(let e of n.connectedGUIDs)u.add(e);d.push(n.connectedGUIDs)}for(let e of n.bubbledNestedInstances)if(e.connectedGUIDs&&!u.has(e.connectedGUIDs[0])){for(let r of e.connectedGUIDs)u.add(r);d.push(e.connectedGUIDs)}}return d}if((0,s.kc)().dse_editor_templates_v1&&n&&o&&n[o])return i()(n[o].primaryInstances?.filter(e=>e.isBubbled)||[],e=>[e.connectedGUIDs,...e.bubbledNestedInstances.map(e=>e.connectedGUIDs)])}),m=(0,l.P8)([d.C1,c.AF],(e,r)=>{if(!r||!r.isAlive||"INSTANCE"!==r.type)return[];let n=r.guid;return e&&n&&e[n]?e[n].bubbledNestedInstanceGUIDs?.map(e=>[e])??[]:[]});(0,o.Mz)([u,m],(e,r)=>e||r||[])},25888:(e,r,n)=>{n.d(r,{UT:()=>u,z4:()=>m});var a=n(302245),i=n(848661),o=n(234945),s=n(224690),l=n(958317);let c=(0,a.Mz)([s.W0],e=>e.length>0),d=(0,a.Mz)([l.x1],e=>e.length>0);(0,a.Mz)([c,d],(e,r)=>e||r);let u=(0,a.Mz)([o.F4],e=>{if(!e.length)return null;let r=new Set(e.map(e=>e.textContent)),[n]=r;return 1===r.size?n:i.oV});function m(){return(0,a.Mz)([(0,l.Cu)(),(0,s.Ee)()],(e,r)=>[...e,...r])}(0,a.Mz)([l.x1,s.W0],(e,r)=>[...e,...r])},107244:(e,r,n)=>{n.d(r,{C1:()=>c,Lg:()=>f,Ln:()=>D,Ms:()=>R,Nw:()=>h,PY:()=>P,QW:()=>_,Rk:()=>p,S8:()=>E,TJ:()=>O,UR:()=>w,VC:()=>g,Yw:()=>u,d:()=>L,nM:()=>M,tK:()=>I,tO:()=>d,tc:()=>A,y7:()=>m});var a=n(302245);n(663668);var i=n(469297);n(848661);var o=n(416095),s=n(234945),l=n(273226);let c=e=>e.mirror.selectionProperties.componentProps,d=e=>e.mirror.selectionProperties.moduleProps,u=e=>e.mirror.selectionProperties.resettableComponentPropAssignments,m=(0,a.Mz)([s.dK,s.qd],k),p=(0,a.Mz)([s.dK,s.qd],function(e,r){return(0,l.xP)(r=>e.get(r)?.containingModuleId,r)??void 0}),h=(0,a.Mz)([s.dK,s.qd],M),_=(0,a.Mz)([s.dK,s.qd],(e,r)=>{let n=new Set;for(let a of r){let r=e.get(a)?.containingSymbolId;r&&n.add(r)}return Array.from(n)}),g=()=>(0,a.Mz)([s.dK,(e,r)=>r],(e,r)=>M(e,r)??k(e,r)),f=(()=>{let e=g();return r=>e(r,(0,s.qd)(r))})(),E=(0,a.Mz)([m,h],(e,r)=>e??r),y=()=>(0,a.Mz)([(e,r)=>r,s.dK],(e,r)=>{let n=(0,i.p)(e,e=>{let n=r.get(e);return!!n&&(0,o.LI)(n)});for(let a of e){let e=r.get(a),i=e?.containingStateGroupId??e?.containingSymbolId;if(i&&i!==n)return}return n??void 0}),b=()=>(0,a.Mz)([(e,r)=>r,s.dK],(e,r)=>(0,i.p)(e,e=>{let n=r.get(e);return!!n&&(0,o.FS)(n)})??void 0);(()=>{let e=y();return r=>e(r,(0,s.qd)(r))})();let I=()=>(0,a.Mz)([g(),y()],(e,r)=>e??r),T=()=>(0,a.Mz)([b()],e=>e),v=(()=>{let e=I();return r=>e(r,(0,s.qd)(r))})();(0,a.Mz)([v,s.dK],(e,r)=>e?r.get(e):null);let S=(()=>{let e=T();return r=>e(r,(0,s.qd)(r))})();(0,a.Mz)([S,s.dK],(e,r)=>e?r.get(e):null);let w=(0,a.Mz)([c,s.qd],(e,r)=>{if(e)return(0,l.xP)(r=>e[r]?.containingInstance,r)??void 0}),A=()=>(0,a.Mz)([c,(e,r)=>r],(e,r)=>{if(e)return(0,l.xP)(r=>e[r]?.containingInstanceBackingSymbol,r)??void 0}),N=(0,a.Mz)([c,s.qd],(e,r)=>{if(e)return x(e,r)}),C=(0,a.Mz)([c,s.qd,s.dK],(e,r,n)=>{if(e)return F(e,r,n)}),L=()=>(0,a.Mz)([c,(e,r)=>r,s.dK],(e,r,n)=>{if(!e)return;let a=[];for(let e of r){let r=n.get(e);if(!r||r.isLooseComponent||r.isState||r.isStateGroup)return;r.symbolId&&a.push(e)}return F(e,a,n)??x(e,a)}),O=(0,a.Mz)([C,N],(e,r)=>r??e),R=()=>(0,a.Mz)([s.dK,(e,r)=>r],(e,r)=>r.some(r=>e.get(r)?.isInstanceSublayer??!1)),P=(()=>{let e=R();return r=>e(r,(0,s.qd)(r))})(),D=(0,a.Mz)([s.F4],e=>e.some(e=>"SYMBOL"===e.type||!!e.isStateGroup));function k(e,r){return(0,l.xP)(r=>e.get(r)?.containingSymbolId,r)??void 0}function M(e,r){return(0,l.xP)(r=>e.get(r)?.containingStateGroupId,r)??void 0}function F(e,r,n){return(0,l.xP)(r=>{let a=e[r]?.backingSymbol;if(a)return n.get(a)?.containingStateGroupId},r)??void 0}function x(e,r){return(0,l.xP)(r=>e[r]?.backingSymbol??e[r]?.containingInstanceBackingSymbol,r)??void 0}(0,a.Mz)([s.F4],e=>e.every(e=>"SYMBOL"===e.type||"INSTANCE"===e.type||!!e.isSymbolSublayer||!!e.isInstanceSublayer))},958317:(e,r,n)=>{n.d(r,{Cu:()=>g,Jm:()=>b,YH:()=>y,x1:()=>E});var a=n(700021),i=n(299321),o=n(302245),s=n(97395),l=n(939863),c=n(848661),d=n(112162),u=n(234945),m=n(273226),p=n(510879),h=n(731262),_=n(107244);function g(){return(0,s.P8)([h.uL,_.C1,u.dK,(e,r)=>r],(e,r,n,a)=>{if(!r||0===a.length)return[];let o=(0,m.Yi)(a,n)??(0,_.nM)(n,a);if(!o||a.includes(o))return[];let s=r[o]?.stateGroupVariantProps;if(!s)return[];let d=(0,p.s)(r,a,s.propertySortOrder);return(s.propertySortOrder||[]).map(e=>{let r=!function(e){if(2===e.length){let r=e.map(e=>e.toLowerCase());for(let e of h.NE){let n=r.indexOf(e[0]),a=r.indexOf(e[1]);if(-1!==n&&-1!==a)return!0}}return!1}(s.propertyValues[e])?i.J0O.VARIANT:i.J0O.BOOL,n=d[e]||h.xJ;return(0,c.gl)(n)?{name:e,value:(0,l.t)("inspect_panel.property.mixed"),type:r}:{name:e,value:n,type:r}})})}let f=()=>(0,s.P8)([_.C1,(0,_.tK)(),(0,_.d)()],(e,r,n)=>{if(!e)return[];let a=n??r;return a?b(a,e):[]}),E=(()=>{let e=f();return r=>e(r,(0,u.qd)(r))})(),y=(0,o.Mz)([E],e=>{let r=e.map(e=>e.name),n=(0,l.t)("design_systems.component_properties.variant_property_default_name");return(0,d.g)(n,r)});function b(e,r){let n=r[e]?.stateGroupVariantProps;if(!n)return[];let o=(0,m.aO)(e,r),s=(0,m.f3)(e,r);return n.propertySortOrder.map(e=>{let r=s===i.uXg.CONFLICTING_NAMES_WITH_VARIANT_ERROR&&o.some(r=>r.name===e),l=n.propertyValues[e];return{name:e,values:l,type:i.J0O.VARIANT,kind:a.u.VARIANT,error:r?i.uXg.CONFLICTING_NAMES_WITH_VARIANT_ERROR:i.uXg.NONE}})}},218973:(e,r,n)=>{n.d(r,{$j:()=>C,Ht:()=>A,Jl:()=>F,M4:()=>M,Pd:()=>k,Se:()=>O,fl:()=>S,gq:()=>N,ig:()=>L,j5:()=>v,qd:()=>R,vD:()=>w,w2:()=>D});var a=n(411855),i=n(243742),o=n(629019),s=n.n(o),l=n(939863),c=n(287010),d=n(973149),u=n(798099),m=n(226055),p=n(848661),h=n(279702),_=n(498606),g=n(952675),f=n(205135),E=n(216899),y=n(41747),b=n(686880),I=n(389785);let T={scrubMultiplier:1,wheelMultiplier:1,smallNudgeAmount:c.bA,bigNudgeAmount:c._q};function v(e){let{onValueChange:r}=e,n=(0,a.useCallback)(e=>r?.(e,h.zk.YES),[r]),i=(0,m.GS)(),o=e.isTokenizable?E.$:f.p_;return a.createElement(b.b,{...T,...e,scrubbingDisabled:e.scrubbingDisabled||e.disabled||null==e.value||e.value===p.oV&&!e.mixedMathHandler},e.childrenAtEnd?null:e.children,a.createElement(o,{onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,recordingKey:e.recordingKey,className:s()(e.inputClassName,I.sC),dataTestId:e.dataTestId,noLeftBorder:e.noLeftBorder,squareRightBorder:e.squareRightBorder,formatter:e.formatter,property:e.value??null,onMouseDown:u.dG,onChange:n,allowEmpty:e.allowEmpty,mixedMathHandler:e.mixedMathHandler,mixedMathCallback:e.mixedMathCallback,onFocus:e.onFocus,onBlur:e.onBlur,onClick:e.onClick,onMixedMathNudge:e.onMixedMathNudge,disabled:e.disabled??null===e.value,softDisabled:e.softDisabled,placeholder:e.placeholder,autoFocus:e.autoFocus,noBorderOnFocus:!0,forwardedRef:e.forwardedRef,ellipsis:i}),e.childrenAtEnd?e.children:null)}function S({onMouseEnter:e,onMouseLeave:r,onMouseEnterNonPropagating:n,...i}){let o={...T,...i,noBorderOnFocus:i.noBorderOnFocus||i.disableSelectFocus};return a.createElement("div",{className:i.className},a.createElement(g.a3,{id:i.id,inputClassName:i.inputClassName,dropdownClassName:i.dropdownClassName,dropdownWidth:i.dropdownWidth,willShowDropdown:i.willShowDropdown,formatter:i.formatter,property:i.value,onChange:(e,r=h.zk.YES)=>{i.onValueChange?.(e,r)},onKeyDown:i.onKeyDown,onKeyUp:i.onKeyUp,onInputFocus:i.onFocus,onInputBlur:i.onBlur,onMouseEnter:e,onMouseEnterNonPropagating:n,onMouseLeave:r,mixedMathHandler:i.mixedMathHandler,dispatch:i.dispatch,disabled:i.disabled,dropdownShown:i.dropdownShown,autoFocus:i.autoFocus,recordingKey:i.recordingKey,scrubbableControlProps:o,icon:i.icon,forwardedRef:i.forwardedRef,isTokenizable:i.isTokenizable,dataTestId:i.dataTestId,allowEmpty:i.allowEmpty,unNamespacedInputRecordingKey:i.unNamespacedInputRecordingKey,placeholder:i.placeholder,omitValueFromDropdown:i.omitValueFromDropdown,noPlaceholderLine:i.noPlaceholderLine,onboardingKey:i.onboardingKey,disableSelectFocus:i.disableSelectFocus,openBelowTarget:i.openBelowTarget,chevronClassName:i.chevronClassName,dropdownAlignment:i.dropdownAlignment,enablePreview:i.enablePreview,optionsWithDisabledPreviews:i.optionsWithDisabledPreviews},i.children))}function w(e){let{min:r,max:n,smallNudgeAmount:i,bigNudgeAmount:o,formatter:s}=e,l=(0,a.useMemo)(()=>new d.Lk({min:r,max:n,smallNudgeAmount:i,bigNudgeAmount:o}),[r,n,i,o]);return a.createElement(S,{...e,formatter:s??l})}function A(e){let{min:r,max:n,smallNudgeAmount:i,bigNudgeAmount:o}=e,s=(0,a.useMemo)(()=>new d.X9({min:r,max:n,smallNudgeAmount:i,bigNudgeAmount:o}),[r,n,i,o]);return a.createElement(v,{...e,formatter:s})}function N(e){let{min:r,max:n,smallNudgeAmount:i,bigNudgeAmount:o,onEvaluateExpressionError:s}=e,l=(0,a.useMemo)(()=>new d.Lk({min:r,max:n,smallNudgeAmount:i,bigNudgeAmount:o,onEvaluateExpressionError:s}),[r,n,i,o,s]);return a.createElement(v,{...e,formatter:l})}function C({min:e=0,max:r,floatingPointFormat:n,onEvaluateExpressionError:i,...o}){let{smallNudgeAmount:s,bigNudgeAmount:l}=o,c=(0,a.useMemo)(()=>new d.Lk({min:Math.max(e,0),max:r,smallNudgeAmount:s,bigNudgeAmount:l,floatingPointFormat:n,onEvaluateExpressionError:i}),[e,r,s,l,n,i]);return a.createElement(v,{...o,formatter:c})}function L({min:e=0,max:r,...n}){let{smallNudgeAmount:i,bigNudgeAmount:o}=n,s=(0,a.useRef)(!1),l=(0,a.useMemo)(()=>new d.NB({min:Math.max(e,0),max:r,smallNudgeAmount:i,bigNudgeAmount:o}),[e,r,i,o]),c=(0,p.gl)(n.value)&&n.mixedMathHandler,u=n.disabled||n.scrubbingDisabled||"number"!=typeof n.value&&!Array.isArray(n.value)&&!c,m=n.isTokenizable?E.$:f.p_;return a.createElement(b.b,{...T,...n,formatter:l,scrubbingDisabled:u,onScrubBegin:e=>{s.current=!0,n.onScrubBegin?.(e)},onScrubEnd:e=>{s.current=!1,n.onScrubEnd?.(e)},className:n.className},n.children,a.createElement(m,{forwardedRef:n.forwardedRef,disabled:n.disabled,className:n.inputClassName,formatter:l,property:n.value??null,source:s.current?"scrub":"document",onChange:e=>n.onValueChange(e,h.zk.YES),mixedMathHandler:n.mixedMathHandler,onMixedMathNudge:n.onMixedMathNudge,onBlur:n.onBlur,onFocus:n.onFocus,onNudge:n.onNudge,onKeyDown:n.onKeyDown,onClick:n.onClick,onPaste:n.onPaste,recordingKey:n.recordingKey,noBorderOnFocus:!0,shouldClearOnFocus:n.shouldClearOnFocus,placeholder:n.placeholder,dataTestId:n.dataTestId}))}function O({min:e,max:r,allowEmpty:n,...i}){let{smallNudgeAmount:o,bigNudgeAmount:s}=i,l=(0,a.useRef)(!1),c=(0,a.useMemo)(()=>new d.PZ({min:e,max:r,smallNudgeAmount:o,bigNudgeAmount:s,allowEmpty:n}),[e,r,o,s,n]),u=(0,p.gl)(i.value)&&i.mixedMathHandler,m=i.disabled||i.scrubbingDisabled||"number"!=typeof i.value&&!u,_=i.isTokenizable?E.$:f.p_;return a.createElement(b.b,{...T,...i,formatter:c,scrubbingDisabled:m,onScrubBegin:e=>{l.current=!0,i.onScrubBegin?.(e)},onScrubEnd:e=>{l.current=!1,i.onScrubEnd?.(e)},className:i.className},i.children,a.createElement(_,{forwardedRef:i.forwardedRef,disabled:i.disabled,className:i.inputClassName,formatter:c,property:i.value??null,source:l.current?"scrub":"document",allowEmpty:n,onChange:e=>i.onValueChange(e,h.zk.YES),mixedMathHandler:i.mixedMathHandler,onMixedMathNudge:i.onMixedMathNudge,onBlur:i.onBlur,onFocus:i.onFocus,onNudge:i.onNudge,onKeyDown:i.onKeyDown,onPaste:i.onPaste,recordingKey:i.recordingKey,noBorderOnFocus:!0,shouldClearOnFocus:i.shouldClearOnFocus,placeholder:i.placeholder,dataTestId:i.dataTestId}))}function R({max:e=3600,displayFractions:r=!1,...n}){let i=(0,a.useMemo)(()=>new d.f0(e,r),[e,r]);return a.createElement(v,{...n,formatter:i})}let P={...T,scrubMultiplier:4,wheelMultiplier:2};function D({min:e=0,max:r=1,decimals:n,hidePercentSign:i,...o}){let{smallNudgeAmount:s,bigNudgeAmount:l}=o,c=(0,a.useMemo)(()=>new d.LN({min:e,max:r,smallNudgeAmount:s,bigNudgeAmount:l,decimals:n,hidePercentSign:i}),[e,r,s,l,n,i]);return a.createElement(v,{...P,...o,formatter:c,postScrubMultiplier:.001,postBigNudgeAmount:.1})}function k(e){let r="ui3"===(0,i.DP)().version,{inputClassName:n,...o}=e,c=e.ui3RightJustifyPercentSign??!0,d=(0,y.P)((0,l.t)("fullscreen.scrubbable.opacity"));return r?a.createElement(D,{...o,inputClassName:s()(n,{[I.Ww]:c}),"data-tooltip-type":_.Ib.TEXT,"data-tooltip":d,hidePercentSign:c,childrenAtEnd:c},c?a.createElement("span",{className:I.QK},(0,l.tx)("fullscreen.scrubbable.percent")):e.children):a.createElement(D,{...e,"data-tooltip-type":_.Ib.TEXT,"data-tooltip":(0,l.t)("fullscreen.scrubbable.opacity"),tooltipForScreenReadersOnly:!0})}function M(e){let r=(0,a.useMemo)(()=>new d.cu({min:7.16,max:180}),[]);return a.createElement(v,{...e,formatter:r,postScrubMultiplier:.5,postBigNudgeAmount:.1,postWheelMultiplier:.2})}function F(e){let{min:r,smallNudgeAmount:n=c.bA,bigNudgeAmount:i=c._q,formatter:o}=e,s=(0,a.useRef)(!1),l=(0,a.useMemo)(()=>o??new d.h7({min:r,smallPixelNudgeAmount:n,bigPixelNudgeAmount:i}),[r,n,i,o]),u=e.isTokenizable?E.$:f.p_;return a.createElement(b.b,{...T,"data-tooltip-type":e["data-tooltip-type"],"data-tooltip":e["data-tooltip"],tooltipForScreenReadersOnly:e.tooltipForScreenReadersOnly,className:e.className,value:e.value,onValueChange:e.onValueChange,smallNudgeAmount:n,bigNudgeAmount:i,scrubMultiplier:e.scrubMultiplier,disabled:e.disabled,scrubbingDisabled:e.disabled,dispatch:e.dispatch,formatter:l,onScrubBegin:()=>{s.current=!0},onScrubEnd:()=>{s.current=!1},noBorderOnHover:e.noBorderOnHover},e.children,a.createElement(u,{disabled:e.disabled,className:e.inputClassName,formatter:l,property:e.value,source:s.current?"scrub":"document",onChange:r=>e.onValueChange(r,h.zk.YES),recordingKey:e.recordingKey,noBorderOnFocus:!0,shouldClearOnFocus:e.shouldClearOnFocus,placeholder:e.placeholder}))}},760066:(e,r,n)=>{n.d(r,{sA:()=>A,sJ:()=>w});var a=n(411855),i=n(464137),o=n(629019),s=n.n(o),l=n(255942),c=n(153234),d=n(522739),u=n(163023),m=n(939863),p=n(13379),h=n(869156),_=n(318812),g=n(498606),f=n(893606),E=n(282263),y=n(683859),b=n(550624),I=n(389785),T=n(180840),v=n(5068);let S=a.forwardRef(function({children:e,disabled:r,icon:n,inputClassName:i,isActive:o,nonTextChild:l,noBorder:u,onMouseDownCapture:m,onContextMenuCapture:p,onFocus:h,onBlur:_,recordingKey:g},f){return a.createElement(d.D8,{forwardedRef:f,recordingKey:c.Pt(g,"comboInputControl","container"),className:s()(i,{[T.mc]:!0,[T.vu]:o,[T.KH]:!u,[T.r9]:r,[T.fE]:l}),onMouseDownCapture:m,onContextMenuCapture:p,onFocus:h,onBlur:_},a.createElement("div",{className:T.I6},e),!r&&n)}),w=a.forwardRef(function({inputClassName:e,inputRef:r,currentFieldValue:n,recordingKey:o,disabled:d,children:p,hideIcon:h=!1,nonTextChild:E,isActive:w,onPickerOpen:A,disableEntryPoint:N=!1,noBorder:C,hasBindingContextMenu:L,onClickDetachButton:O,onFocus:R,onBlur:P},D){let k=a.useId(),M=(0,a.useContext)(y.p),F=M?.boundVariableId,x=(0,a.useRef)(null),U=(0,f.R)(),{showing:B,show:V,data:G,hide:H}=(0,_.BK)(b.v+k),W=a.useCallback(()=>{A?A():M?.showBindingUI(x.current,{currentFieldValue:n}),H()},[n,H,A,M]),K=a.useCallback(()=>{M?.onVariableSelected?.(void 0),H(),O?.()},[H,M,O]),Y=c.rf(c.Pt(o,"detachIcon"),"click",K),$=c.rf(o,"mousedown",e=>{if(e&&!N&&e.shiftKey){W(),e.preventDefault(),e.stopPropagation();return}}),j=c.rf(o,"contextmenu",e=>{e&&!N&&L&&r?.current&&(V({data:{position:{top:e.clientY,left:e.clientX}}}),e.preventDefault(),e.stopPropagation())});return a.createElement(a.Fragment,null,a.createElement(S,{recordingKey:o,inputClassName:s()(e,I.Gp),disabled:d,isActive:null!=w?w:!!M?.isShowingBindingUI,ref:(0,l.A)(D,x),onMouseDownCapture:$,onContextMenuCapture:j,nonTextChild:E,noBorder:C,icon:h||N?null:F?a.createElement("div",{className:T.AM,role:"button",tabIndex:0,"data-tooltip-type":g.Ib.TEXT,"data-tooltip":(0,m.t)("variables.binding_ui.detach_variable_tooltip"),"aria-label":(0,m.t)("variables.binding_ui.detach_variable_tooltip"),onClick:Y},a.createElement(i.o,{className:T.HQ})):a.createElement(u.B,{recordingKey:c.Pt(o,"comboBoxButton"),className:s()(T.Kk),role:"button",ariaLabel:(0,m.t)("fullscreen.properties_panel.apply_variable"),"data-tooltip-type":U?g.Ib.TEXT:void 0,"data-tooltip":U?(0,m.t)("fullscreen.properties_panel.apply_variable"):void 0,svg:v.default,onClick:W,dataTestId:c.Pt("variable-control-icon",o??""),tabIndex:-1}),onFocus:R,onBlur:P},p),L&&r&&B&&"number"==typeof G?.position?.top&&"number"==typeof G?.position?.left&&a.createElement(b.G,{inputRef:r,isBound:!!M?.boundVariableId,left:G.position.left,onClose:H,onOpenVariablePicker:W,onUnbindVariable:Y,recordingKey:c.Pt(o,"contextMenu"),top:G.position.top}))}),A=a.memo(function({fields:e,currentFieldValue:r,resolvedType:n,editingStyleGuid:i,inputClassName:o,inputRef:s,disabled:l,recordingKey:c,disableEntryPoint:d,hideIcon:u,noBorder:m,children:p,hasBindingContextMenu:_,onClickDetachButton:g,onBlur:f,onFocus:y}){let b=(0,h.SG)(e).data??[];return a.createElement(E._X,{fields:e,resolvedType:n,editingStyleGuid:i},a.createElement(w,{recordingKey:c,inputClassName:o,inputRef:s,disabled:l,currentFieldValue:r,disableEntryPoint:!!d||0===b.length,hideIcon:u,noBorder:m,hasBindingContextMenu:_,onClickDetachButton:g,onBlur:f,onFocus:y},p))});a.forwardRef(function({currentFieldValue:e,disabled:r,isActive:n,recordingKey:i,children:o,onPickerOpen:d,dataTestId:u,openOnRightClick:m,inputClassName:h},_){let g=(0,a.useContext)(y.p),f=(0,a.useRef)(null),E=a.useCallback(()=>{d?d():g?.showBindingUI(f.current,{currentFieldValue:e})},[e,d,g]),b=c.rf(i,"mousedown",e=>{if(e&&!r){if(m){if((0,p.i)(e)){e.preventDefault(),e.stopPropagation();return}if(e.shiftKey&&1&e.buttons){E(),e.preventDefault(),e.stopPropagation();return}}else if(1&e.buttons){E(),e.preventDefault(),e.stopPropagation();return}}}),I=c.rf(i,"contextmenu",e=>{e&&!r&&(E(),e.preventDefault(),e.stopPropagation())});return a.createElement("div",{ref:(0,l.A)(_,f),className:s()(h,{[T.jX]:!0,[T.NH]:n&&!h}),onMouseDownCapture:b,onContextMenu:I,"data-testid":u},o)})},489921:(e,r,n)=>{n.d(r,{A:()=>N});var a=n(411855),i=n(563706),o=n(188507),s=n(776250),l=n(181912),c=n(966712),d=n(374626),u=n(27087),m=n(939863),p=n(392592),h=n(101505),_=n(456104),g=n(582947),f=n(397065),E=n(394828),y=n(740280),b=n(864114),I=n(463546);let T=(0,g.r1)("seen_mobile_proto_download_modal_prompt");function v(){let e=(0,o.wA)(),r=(0,d.md)(T),n=(0,o.d4)(e=>e.userAnalyticsData?.is_active_mobile_user),i=(0,o.d4)(e=>e.user?.created_at),g=(0,l.A)(i).add(14,"day").isSameOrAfter((0,l.A)()),{isShowing:v,show:S,complete:w}=(0,_.e)({overlay:I.y3_,priority:f.N.DEFAULT_MODAL},[r]);if((0,a.useEffect)(()=>{S({canShow:e=>!!(0,c.kc)().mobile_download_modal_prompts&&!g&&!e&&!n})},[S,n,g]),!v)return null;let A=()=>{u.Ay.post("/api/send_mobile_download_email",{type:"prototype"}),(0,s.sx)("post_proto_mobile_app_download_prompt_email_me_cta_clicked"),w(),e(p.F.enqueue({message:(0,m.t)("rcs.mobile_comment_reply_upsell.email_sent")}))};return a.createElement(y.X,{isShowing:v,title:(0,m.tx)("mobile_download_prompts.mobile_interactions"),description:(0,m.tx)("mobile_download_prompts.run_your_mobile_prototypes"),media:a.createElement(E.y,{aspectRatio:1.75,alt:"A graphic show mobile prototypes with a qr code",src:(0,c.ck)("b50fba0faeea245feed92fe60337297d827e4984")}),primaryCta:{label:(0,m.tx)("mobile_download_prompts.email_me"),type:"button",onClick:()=>A(),ctaTrackingDescriptor:h.c.MOBILE_APP_DOWNLOAD_PROTOTYPE_PROMPT_CLICKED},trackingContextName:"Mobile Prototype Download Modal Prompt",onClose:()=>{w()},userFlagOnShow:"seen_mobile_proto_download_modal_prompt",position:b.Q.BOTTOM_RIGHT,secondaryCta:{label:(0,m.tx)("mobile_download_prompts.learn_more"),type:"link",href:"https://help.figma.com/hc/en-us/articles/1500007537281-Guide-to-the-Figma-mobile-app",ctaTrackingDescriptor:h.c.LEARN_MORE}})}var S=n(141810),w=n(754407),A=n(402609);let N=a.memo(function(){return a.createElement(a.Fragment,null,a.createElement(A.p,null,a.createElement(S.w,null)),!i.Xb&&a.createElement(A.p,null,a.createElement(v,null)),a.createElement(A.p,null,a.createElement(w.b,null)))})},433546:(e,r,n)=>{n.d(r,{wH:()=>l}),n(411855),n(188507);var a=n(517333),i=n(931828);function o(e){switch(e){case"default":return"color_management_desktop_app_setting_default";case"unmanaged":return"color_management_desktop_app_setting_unmanaged";case"managed":return"color_management_desktop_app_setting_managed";case"srgb":return"color_management_desktop_app_setting_srgb"}}function s(e,r){return e.getState().userFlags[r]}function l(e){if(!a.eD)return;let r=a.eD?.getLegacyColorSpacePreference();!function(e,r,n){let{isDefault:a,isManaged:s,isSrgb:l,isUnmanaged:c}=r,d={};a&&"default"!==n&&(d.color_management_desktop_app_setting_default=!1),c&&"unmanaged"!==n&&(d.color_management_desktop_app_setting_unmanaged=!1),s&&"managed"!==n&&(d.color_management_desktop_app_setting_managed=!1),l&&"srgb"!==n&&(d.color_management_desktop_app_setting_srgb=!1);let u=a&&"default"===n||c&&"unmanaged"===n||s&&"managed"===n||l&&"srgb"===n;void 0===n||u||(d[o(n)]=!0),Object.keys(d).length>0&&e(i.b(d))}(e.dispatch,{isDefault:!!s(e,o("default")),isUnmanaged:!!s(e,o("unmanaged")),isManaged:!!s(e,o("managed")),isSrgb:!!s(e,o("srgb"))},r)}n(309798)},91564:(e,r,n)=>{n.d(r,{$z:()=>E,IX:()=>f});var a=n(411855),i=n(188507),o=n(629019),s=n.n(o),l=n(966712);n(946689);var c=n(758297);n(154254),n(939863);var d=n(67294),u=n(27703),m=n(335682),p=n(694687),h=n(836834);let _=(0,l.ck)("b13789723ab5e9138ab263193f7d82aff4c47674"),g=(0,l.ck)("f290b00b2b225be3eb5056cb4473d87953764837");var f=(e=>(e[e.LARGE=0]="LARGE",e[e.MEDIUM=1]="MEDIUM",e[e.SMALL=2]="SMALL",e))(f||{});function E({size:e=1,useCurrentFileAsThumbnail:r=!1}){let n=(0,p.sZ)(),o=(0,i.d4)(e=>e.user),l=(0,m.tS)(),f=(0,u.ud)(),E={modalGraphic:h.Xs,orgAvatar:h.DH,userAvatar:h._5,exampleFileThumbnail:h.eO,thumbnailContainer:h.jI,avatar:h.hq,thumbnailInnerContainer:h.ac},y={modalGraphic:h.tb,orgAvatar:h.NQ,userAvatar:h.cY,exampleFileThumbnail:h.Id,thumbnailContainer:h.pR,avatar:h.F0,thumbnailInnerContainer:h.rr},b={2:{modalGraphic:h.oK,orgAvatar:h.wz,userAvatar:h.D0,exampleFileThumbnail:h.xe,thumbnailContainer:h.Yc,avatar:h.KM,thumbnailInnerContainer:h.rr},1:y,0:E}[e],I=a.createElement("img",{src:_,alt:"",className:h.fP});if(null!=l&&r){let e=f[l]?.thumbnail_url;e&&(I=a.createElement("img",{src:e,alt:"",className:h.fP}))}return a.createElement("div",{className:b.modalGraphic},a.createElement("img",{src:g,alt:"",className:b.exampleFileThumbnail}),o&&a.createElement(c.n,{className:s()(b.avatar,b.orgAvatar),userId:o.id,orgId:n?.id,size:2===e?16:1===e?24:32}),o&&a.createElement("div",{className:s()(b.avatar,b.userAvatar)},a.createElement(d.H8,{user:o,size:2===e?d.Pf.SMALL16:1===e?d.Pf.MEDIUM:d.Pf.LARGE})),a.createElement("div",{className:b.thumbnailContainer},a.createElement("div",{className:b.thumbnailInnerContainer},I)))}},161074:(e,r,n)=>{n(299321)},776008:(e,r,n)=>{n.d(r,{E:()=>i});var a=n(314866);function i(e,r=[]){return null==e.data||r.includes(e.data)||!a.Kd.includes(e.data)?"other":e.data}},844647:(e,r,n)=>{n(411855),n(188507),n(320063);var a=n(38580);n(931828),n(456104),n(594524),n(502665),n(683694),n(723239);var i=n(582947);n(205548),n(875847),n(335682),n(99506),n(833629),n(397065),n(143678),n(916108),n(218997),n(242872),n(15839),n(463546),(0,a.eU)(!1),(0,i.r1)("dismissed_move_drafts_nudge")},288527:(e,r,n)=>{n.d(r,{s:()=>a}),n(411855),n(188507),n(931828),n(251960),n(456104),n(683694),n(723239),n(582947),n(205548),n(875847),n(335682),n(99506),n(279453),n(833629),n(397065),n(143678),n(218997),n(844647),n(242872),n(15839),n(463546);let a="Node Count Reached for Draft"},888699:(e,r,n)=>{n.d(r,{l5:()=>s});var a=n(38580),i=n(794321),o=(e=>(e.NOT_STARTED="NOT_STARTED",e.MODAL_SHOWING="MODAL_SHOWING",e.USE_CASE_STEPS="USE_CASE_STEPS",e.COMPLETED="COMPLETED",e))(o||{});(0,a.eU)("NOT_STARTED");let s=(0,a.eU)(i.fD.NONE);(0,a.eU)(!1)},92073:(e,r,n)=>{n.d(r,{Iv:()=>a});let a="sites-preview"},992303:(e,r,n)=>{n.d(r,{zM:()=>i}),n(411855),n(188507);var a=n(939863);n(501114),n(809840),n(693897),n(809831),n(226055),n(251960),n(456104),n(335682),n(239671),n(397065),n(340514),n(384775),n(157147),n(746806),n(601538),n(463546),n(178911);let i="open-playground-file-onboarding-event";(0,a.tx)("rcs.playground_file.switch_devmode_to_design_title")},384303:(e,r,n)=>{n.d(r,{oE:()=>o,zK:()=>i}),n(411855),n(939863),n(251960),n(456104);var a=n(582947);n(397065),n(218997),n(15839),n(463546);let i="plugin-publish-invite-publishers-onboarding-event",o="plugin-publish-invite-publishers-click-event";(0,a.r1)("seen_plugin_publish_invite_publishers_onboarding")},998109:(e,r,n)=>{n(411855),n(320063),n(939863),n(226055),n(456104),n(696673),n(335682),n(309798),n(833629),n(397065),n(402609),n(340514),n(756159),n(746806),n(463546),n(455263)},455263:(e,r,n)=>{n(835691),n(309798);var a=n(268223),i=n(463546);let o=(0,a.Op)({initial:"ready_to_show",states:[{id:"ready_to_show",transitions:[(0,a.nr)("curator_content_shown","ui3_onboarding_was_shown_in_current_session",{condition:({event:e})=>e.properties.shown===i.S$7.id})]},{id:"ui3_onboarding_was_shown_in_current_session",terminal:!0}]});(0,a.rn)("track_ui3_onboarding_shown",o)},421407:(e,r,n)=>{n.d(r,{n:()=>a});let a=(0,n(38580).eU)(!1)},147723:(e,r,n)=>{n.d(r,{Ih:()=>a}),n(931828);let a="seen_ready_for_dev_callout"},179283:(e,r,n)=>{n.d(r,{Fw:()=>i}),n(966712);var a=n(38580);n(877723),n(321961),n(809831),n(226055),n(239671),n(239737),n(132572);let i="has_onboarded_ui3";(0,a.eU)(!1)},767553:(e,r,n)=>{n.d(r,{uQ:()=>i}),n(411855);var a=n(38580);n(723325);let i=1;(0,a.eU)(null),(0,a.eU)(null)},507956:(e,r,n)=>{n.d(r,{$A:()=>v,LS:()=>w,YY:()=>A,ks:()=>S});var a=n(188507),i=n(618768),o=n(299321),s=n(880934),l=n(904669),c=n(737947),d=n(966712),u=n(374626),m=n(179940),p=n(96328),h=n(939863),_=n(393812),g=n(233560),f=n(749229),E=n(56676),y=n(420576),b=n(321487),I=n(241437),T=n(239671);function v(e){return e?.view==="fullscreen"&&e?.editorType===T.nT.DevHandoff}function S(){return(0,a.d4)(e=>v(e.selectedView))}function w(){return(0,a.d4)(e=>v(e.selectedView)&&(0,_.Mx)(e)&&(e.mirror.appModel.currentTool===o.NLJ.SELECT||e.mirror.appModel.currentTool===o.NLJ.ANNOTATE||e.mirror.appModel.currentTool===o.NLJ.MEASURE))}class A{pathToSelectedView(e,r,n,a){let i=n?(0,m.v6)(n):{},o=r[1];if(("design"===o||"file"===o)&&("1"===i["ready-for-dev"]||("dev"===i.mode||"dev"===i.m)&&"auto"!==i.m)){let n="branch"===r[3]&&r[4]?r[4]:r[2],o=e?.fileByKey[n];if(null==o){let{editing_file:e}=(0,d.Ay)();e&&e.key===n&&(o=e)}let s={view:"fullscreen",editorType:e?.user?T.nT.DevHandoff:T.nT.Design,fileKey:n};(a=a?a.slice(1):"")&&("commentPreferences"===a?s.showCommentPreferencesPicker=!0:s.commentThreadId=a),i["node-id"]&&(s.nodeId=i["node-id"]),i["node-type"]&&(s.nodeType=i["node-type"]),i["version-id"]&&(s.versionId=i["version-id"]),i["cc-version-id"]&&(i["node-id"]||i["cc-node-id"])&&(s.compareChangesVersionId=i["cc-version-id"]),i["cc-activity-id"]&&(i["node-id"]||i["cc-node-id"])&&(s.compareChangesActivityId=i["cc-activity-id"]),i["cc-filter-status"]&&(i["cc-version-id"]||i["cc-activity-id"])&&(i["node-id"]||i["cc-node-id"])&&(s.filterStatusVersions="1"===i["cc-filter-status"]),i["cc-node-id"]&&i["cc-version-id"]&&(s.compareChangesNodeId=i["cc-node-id"]),i["try-plugin-id"]&&(s.tryPluginId=i["try-plugin-id"]),i["try-plugin-version-id"]&&(s.tryPluginVersionId=i["try-plugin-version-id"]),i["try-plugin-name"]&&(s.tryPluginName=i["try-plugin-name"]),"1"===i["is-playground-file"]&&(s.isPlaygroundFile=!0),i["dev-mode-features-modal"]&&(s.devModeSupermodalTab=i["dev-mode-features-modal"]);let l=(0,g.b)(e);return"1"===i.vars&&(0,d.kc)().dt_dev_variables_table?(s.showDevModeVariablesTable=!0,u.zl.set(E.$,f.Nh.DirectUrl),i["var-id"]&&(s.devModeVariablesTableSelectedVariable=i["var-id"])):l&&"1"===i["ready-for-dev"]&&(s.showOverview=!0),s.showDevModeVariablesTable||u.zl.set(E.$,null),v(s)&&("dev"===i.mode||"dev"===i.m)&&(s.mode="dev",l&&i["focus-id"]&&!s.showOverview&&(s.devModeFocusId=i["focus-id"],i["node-id"]||(s.nodeId=i["focus-id"]))),s}return null}requireHistoryChange(e,r){return!1}selectedViewToPath(e,r){if(v(e)||"fullscreen"===e.view&&!0===e.showOverview){let n;if(e.fileKey===I.Zt)return`/test/interactions${c.Ay.location.search}`;let a=this.selectedViewName(e,r),o=a?(0,p.sy)(a):"",u={},h=e.fileKey,_=e.fileKey&&r.fileByKey[e.fileKey],g="design";if(_){let e=(0,y.L8)(_,r.repos);n=(0,y.gN)(_,e,g)}else n=`/${g}/${h}`,o?n+=`/${o}`:n+="/Untitled";if(e.nodeId&&s.fn(s.sH(e.nodeId))&&(u["node-id"]=(0,b.EO)(e.nodeId)),(0,d.kc)().node_type_in_url&&e.nodeId&&s.fn(s.sH(e.nodeId)))try{let r=l.UN().get(e.nodeId)?.type;u["node-type"]=r?.toLowerCase()}catch(e){if(!(e instanceof i.wL))throw e}return e.versionId&&(u["version-id"]=e.versionId),e.compareChangesVersionId&&(u["cc-version-id"]=e.compareChangesVersionId),e.filterStatusVersions&&(u["cc-filter-status"]=1),e.compareChangesNodeId&&(u["cc-node-id"]=(0,b.EO)(e.compareChangesNodeId)),e.devModeFocusId&&(u["focus-id"]=(0,b.EO)(e.devModeFocusId)),e.showOverview&&(u["ready-for-dev"]="1"),e.showDevModeVariablesTable&&(u.vars="1",e.devModeVariablesTableSelectedVariable&&(u["var-id"]=(0,b.Ml)(e.devModeVariablesTableSelectedVariable))),u.m="dev",Object.keys(u).length>0&&(n+=`?${(0,m.lF)(u)}`),e.commentThreadId&&(n+=`#${e.commentThreadId}`),n}return null}selectedViewName(e,r){if(v(e)){let n=null;if(e.fileKey){let a=r.fileByKey[e.fileKey];if(a){let e=(0,y.L8)(a,r.repos);n=e?(0,y.At)(a,e):a.name}}return n??(0,h.t)("dev_handoff.dev_handoff_view_selector.untitled")}return null}selectedViewHasMissingResources(e,r){return!!v(r)&&!!r.fileKey&&!(r.fileKey in e.fileByKey)}}},10582:(e,r,n)=>{n.d(r,{b:()=>p});var a=n(411855),i=n(243742),o=n(629019),s=n.n(o),l=n(946689),c=n(154254),d=n(501114),u=n(58440),m=n(236412);function p(e){let r="ui3"===(0,i.DP)().version,n=void 0!==e.media,o=void 0!==e.title,p=(e.stepCounter||e.primaryCta||e.secondaryCta||e.overrideFooter)!==void 0;return a.createElement(a.Fragment,null,a.createElement(u.AT,{isTooltip:e.isTooltip,title:e.title,description:e.description,onClose:e.onClose,emphasized:e.emphasized,hideCloseButton:e.hideCloseButton}),o&&!r&&a.createElement(l.Kz,{direction:"y",multiple:n?1.5:1}),n&&a.createElement(a.Fragment,null,e.media,!r&&a.createElement(l.Kz,{direction:"y",multiple:2})),o&&a.createElement("div",{className:s()(c.cx.font11.fontNormal.lh16.$,m.g),style:d.sx.add({letterSpacing:"0.055px"}).$},e.description),p&&a.createElement(a.Fragment,null,!r&&a.createElement(l.Kz,{direction:"y",multiple:n||!o?2:3}),e.overrideFooter?e.overrideFooter:a.createElement(u.CJ,{stepCounter:e.stepCounter,primaryCta:e.primaryCta,secondaryCta:e.secondaryCta,emphasized:e.emphasized})))}},58440:(e,r,n)=>{n.d(r,{AT:()=>b,CJ:()=>I});var a=n(411855),i=n(343887),o=n(139689),s=n(629019),l=n.n(s),c=n(966712),d=n(153234),u=n(799569),m=n(154254),p=n(939863),h=n(501114),_=n(672517),g=n(205058),f=n(928002),E=n(630834);let y=(0,_.tf)(({onClick:e,disabled:r,dataOnboardingKey:n,dataTestId:s="close-button","aria-label":l=(0,p.t)("general.close"),...c})=>a.createElement(i.K,{"aria-label":l,disabled:r,onClick:e,actionOnPointerDown:!0,htmlAttributes:{"data-onboarding-key":n,"data-test-id":s,"data-not-draggable":!0},recordingKey:(0,d.Pt)(c,"closeButton")},a.createElement(o.A,null)));function b(e){return a.createElement("div",{className:l()(m.cx.flex.justifyBetween.itemsCenter.$,f.nK,{[f.QC]:e.emphasized,[f.aj]:!e.title})},e.title?a.createElement("div",{className:l()(m.cx.font13.fontMedium.flexGrow1.if(!e.hideCloseButton,m.cx.pr32).$,f.AH),style:h.sx.add({letterSpacing:"-0.032px"}).$},e.title):a.createElement("div",{className:l()(m.cx.font11.fontNormal.lh16.wFull.if(!e.hideCloseButton,m.cx.pr32).$,f.Vs),style:h.sx.add({letterSpacing:"0.055px"}).$},e.description),!e.hideCloseButton&&((0,c.kc)().feature_education_fpl?a.createElement("div",{className:l()(f.b,{[f.Rf]:e.emphasized,[f.uI]:e.isTooltip})},a.createElement(y,{onClick:()=>e.onClose("close_button_clicked"),"aria-label":(0,p.t)("general.close")})):a.createElement(u.Jn,{onClick:()=>e.onClose("close_button_clicked"),innerText:"close","aria-label":(0,p.t)("general.close"),className:l()(f.b,{[f.Rf]:e.emphasized,[f.uI]:e.isTooltip}),svg:E.default})))}function I(e){return a.createElement("div",{className:l()(m.cx.flex.itemsCenter.justifyBetween.font11.fontMedium.lh16.$,f.J)},a.createElement("div",{className:m.cx.if(e.emphasized,m.cx.colorTextOnbrandSecondary,m.cx.colorTextSecondary).$,style:h.sx.add({letterSpacing:"0.055px"}).$},e.stepCounter&&(0,p.tx)("rcs.rcs_shared.step_counter",{currentStepNum:e.stepCounter.stepNum,totalNumSteps:e.stepCounter.totalNumSteps})),a.createElement("div",{className:m.cx.flex.gap8.$},e.secondaryCta&&a.createElement(g.F,{defaultVariant:"secondary",emphasized:e.emphasized,ctaButtonMeta:e.secondaryCta}),e.primaryCta&&a.createElement(g.F,{defaultVariant:"primary",emphasized:e.emphasized,ctaButtonMeta:e.primaryCta})))}},394828:(e,r,n)=>{n.d(r,{w:()=>d,y:()=>c});var a=n(411855),i=n(154254),o=n(501114),s=n(226055),l=n(697334);function c(e){let r=(0,s.GS)();return a.createElement("div",{className:l.Z,style:o.sx.colorIconOnbrand.colorBorder.bSolid.bb1.flex.add({aspectRatio:e.aspectRatio.toString()}).add(r?{margin:"0"}:{margin:"0 -16px"}).$},a.createElement("img",{src:e.src,alt:e.alt,className:i.cx.flex.justifyCenter.alignCenter.overflowHidden.$}))}function d(e){let r=(0,s.GS)();return a.createElement("div",{style:o.sx.colorIconOnbrand.colorBorder.bSolid.bt1.bb1.flex.add({aspectRatio:e.aspectRatio.toString(),width:"-webkit-fill-available"}).add(r?{margin:"0"}:{margin:"0 -16px"}).$},a.createElement("video",{autoPlay:!0,muted:!0,loop:!0,"object-fit":"initial","aria-hidden":"true",style:o.sx.flex.justifyCenter.alignCenter.overflowHidden.$},a.createElement("source",{src:e.src,type:"video/mp4"})))}},21322:(e,r,n)=>{n.d(r,{j:()=>i});var a=n(411855);function i(e){(0,a.useEffect)(()=>{let r=r=>{"Escape"===r.key&&e()};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[e])}},700886:(e,r,n)=>{n(411855),n(188507),n(629019),n(358145),n(799569),n(946689),n(154254),n(939863),n(501114),n(553015),n(896474),n(662275),n(101505),n(672517),n(226055);var a=n(237870);n(147829),n(488578),n(205058),(0,a.Ju)(()=>null,"FeatureAnnouncement");function i(e){return React.createElement("div",{className:cx.absolute.left0.pl8.$,hidden:e.hidden},React.createElement(Button,{variant:"text",onClick:e.onBack},React.createElement("div",{className:cx.font13.lh24.flex.itemsCenter.pr12.$},React.createElement(Icon,{icon:"chevron-left-32"}),tx("general.back"))))}function o(e){return React.createElement("div",{className:cx.absolute.right0.pr8.$,hidden:e.hidden},React.createElement(Button,{variant:"text",onClick:e.onNext},React.createElement("div",{className:cx.font13.lh24.flex.itemsCenter.pl12.$},tx("general.next"),React.createElement(Icon,{icon:"chevron-right-32"}))))}function s(e){return React.createElement("div",{className:cx.absolute.right0.pr8.$,hidden:e.hidden},React.createElement(Button,{variant:"text",onClick:e.onDone},React.createElement("div",{className:cx.font13.lh24.flex.itemsCenter.$},tx("general.done"))))}function l(e){let r=r=>r+1===e.stepNum;return React.createElement("div",{className:cx.flex.gap8.h32.justifyCenter.itemsCenter.absolute.left0.right0.mxAuto.$},Array(e.totalNumSteps).fill(0).map((e,n)=>React.createElement("div",{className:cx.w8.h8.bRadius8.b1.colorBorder.if(r(n),cx.colorBgInverse,cx.colorBg).$,key:n})))}},86411:(e,r,n)=>{n.d(r,{l:()=>i});var a=n(411855);function i(e,r,n){(0,a.useEffect)(()=>{let a=a=>{e&&r.current&&!r.current.contains(a.target)&&n()};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[e,r,n])}},8267:(e,r,n)=>{n.d(r,{M:()=>o});var a=n(411855),i=n(134288);let o=a.forwardRef((e,r)=>{let n={};return e.shouldDisableAnimation||(n={initial:{translateY:10},animate:{translateY:0},transition:{duration:.2,ease:"easeInOut",translateY:{duration:1}},transformTemplate:(r,n)=>e.transformString?`${e.transformString} ${n}`:n}),a.createElement(i.P.div,{"data-preferred-theme":e.isTooltip?"dark":void 0,className:e.className,style:e.style,ref:r,role:"tooltip",layoutId:e.shouldDisableAnimation?void 0:"FeatureCallout",variants:n},e.children)})},116135:(e,r,n)=>{n.d(r,{WZ:()=>u});var a=n(411855),i=n(67151),o=n(939863),s=n(101505),l=n(594524),c=n(147829);n(700886);var d=n(340514);function u(e){let{steps:r,onComplete:n}=e,{currentStep:u,next:m,reset:p}=(0,l.A)({numSteps:r.length,onComplete:()=>h("done_button_clicked")}),h=(0,a.useCallback)(e=>{n(e),p()},[n,p]),_=e.steps[u],g=u===e.steps.length-1,f=_?.onStepShow;(0,a.useEffect)(()=>{f?.()},[f]);let E=_?.whenTargetLost??"next",y=_?.fixedPosition,b=(0,a.useCallback)(()=>{if(!y)switch(E){case"complete":return h("target_lost");case"move_to_center":return;case"next":if(g)return h("target_lost");return m();default:(0,i.xb)(E)}},[y,E,g,m,h]);if(!_)return h("no_step_error"),null;let I=g?{label:_.primaryCtaLabel??(0,o.tx)("rcs.rcs_shared.done"),type:"button",onClick:m,ctaTrackingDescriptor:s.c.DONE}:{label:_.primaryCtaLabel??(0,o.tx)("rcs.rcs_shared.next"),type:"button",onClick:m,ctaTrackingDescriptor:s.c.NEXT};return a.createElement(c.M,{isShowing:e.isShowing,testId:e.testId,userFlagOnShow:e.userFlagOnShow},a.createElement(d.on,{..._,onClose:()=>h("close_button_clicked"),primaryCta:I,stepCounter:{stepNum:u+1,totalNumSteps:e.steps.length},..._.fixedPosition?{}:{onTargetLost:b}}))}n(740280)},864114:(e,r,n)=>{n.d(r,{Q:()=>a,R:()=>i});var a=(e=>(e.BOTTOM_RIGHT="bottom_right",e.CENTER="center",e.EDITOR_TOP_LEFT="editor_top_left",e.UI3_EDITOR_TOP_LEFT="ui3_editor_top_left",e))(a||{}),i=(e=>(e.TERTIARY_MODAL="TERTIARY_MODAL",e.SECONDARY_MODAL="SECONDARY_MODAL",e.MODAL="MODAL",e.UNSET="UNSET",e))(i||{})},281249:(e,r,n)=>{n(411855),n(188507),n(629019),n(818),n(726864),n(457630),n(507956),n(354235),n(719624),n(837746),n(663237),n(317258)},40963:(e,r,n)=>{n.d(r,{bU:()=>o,wh:()=>a}),n(966712);let a=new Set(["name","characters","symbolDescription","description","url"]),i=RegExp(`^(background|circle|column|component|dialog|document|ellipse|frame|group|icon|image|internal only canvas|line|padding|page|path|polygon|rectangle|row|star|text|union|vector)\\s*[\\d\\.]*$|^\\w\u2022+\\w( \\(\\d+ characters\\))?$`);function o(e,r){if(""===e)return"";if("show"===r)return e;let n='"'===e[0]&&'"'===e[e.length-1],a=n?e.substring(1,e.length-1):e;if(i.test(a.toLowerCase()))return e;let o=n?'"':"";return o+a[0]+a.substring(1,a.length-1).replace(/\S/g,"\u2022")+a[a.length-1]+o}},603478:(e,r,n)=>{n.d(r,{p:()=>s});var a=n(411855),i=n(966712),o=n(949012);a.memo(function(){return(0,i.kc)().internal_only_debug_tools?a.createElement(c,null):null});let s=a.memo(function(){return(0,i.kc)().internal_only_debug_tools?a.createElement(d,null):null}),l={loading:()=>null,error:function(){return a.useEffect(()=>{console.error("Failed to load FigmaScope")},[]),null}},c=o.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(2674),n.e(7336)]).then(n.bind(n,99063)).then(e=>e.EmbeddedFigmaScopeViewForEditorEnabled),{...l,componentName:"EmbeddedFigmaScopeViewForEditorEnabled"}),d=o.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(2674),n.e(7336)]).then(n.bind(n,99063)).then(e=>e.EmbeddedFigmaScopeViewForViewerEnabled),{...l,componentName:"EmbeddedFigmaScopeViewForViewerEnabled"})},515823:(e,r,n)=>{n.d(r,{_:()=>l});var a=n(966712),i=n(38580),o=n(694687),s=n(279453);let l=(0,i.eU)(e=>{let r=(0,a.kc)().mfa_for_guests,n=e(o.h0);if(!r||!n)return!1;let i=e(s.M9q.Query({orgId:n}));if("loaded"!==i.status)return!1;let l=i.data.currentUser.baseOrgUser?.isMfaRestricted;return l?.status==="loaded"&&!0===l.data})},392340:(e,r,n)=>{n.d(r,{Q:()=>c});var a=n(411855);n(188507);var i=n(776250),o=n(966712),s=n(915440),l=n(279453);function c(e,r){let n=a.useMemo(()=>({stuckMs:1e4,onEvent:(r,n,a)=>{var s,l;return s=e.currentOrgId,l=e.currentTeamId,void((0,o.kc)().file_browser_sidebar_lg_logging&&(0,i.sx)("File Browser Sidebar LG",{lgEvent:r,traceId:a.traceId,hasBeenOffline:a.wasOffline,hasBeenBackgrounded:a.wasBackgrounded,timeElapsedMs:a.timeElapsedMs,orgId:s,teamId:l,errors:JSON.stringify(n.errors)}))}}),[e.currentOrgId,e.currentTeamId]);return(0,s.oS)(l.$kt,e,{...r,subscriptionLogger:n})}},836397:(e,r,n)=>{n.d(r,{AN:()=>o}),n(411855),n(188507),n(299321),n(511617),n(697170),n(737947),n(563706),n(761870),n(195847),n(21452),n(946689),n(163023),n(939863);var a=n(672517);n(138369),n(809831),n(151166),n(198371),n(892677),n(420576),n(122983),n(737499),n(335682),n(611978),n(860178),n(239671);var i=n(463033);n(224857),n(915440),n(660656),n(738269),n(279453),n(540019),n(428467),n(713190),n(868861),n(510227),n(787337),n(893606),n(601538),n(804026),n(679282),n(966712),n(950949),n(662275),n(297174),n(407844),n(164795),n(826695),n(492167),n(629019),n(520614),(0,a.tf)(i.$n),n(373494);let o=120},804026:(e,r,n)=>{n(411855),n(188507),n(181912),n(737947),n(761870),n(939863),n(662275),n(335682),n(611978),n(793670)},679282:(e,r,n)=>{n.d(r,{PQ:()=>T});var a=n(411855),i=n(188507),o=n(67151),s=n(994531),l=n(697170),c=n(737947),d=n(733556),u=n(966712),m=n(586459),p=n(563706),h=n(761870),_=n(21452),g=n(140908),f=n(138369),E=n(942830),y=n(447532),b=n(293692);function I({origin:e,iFrameHandler:r,overrideUseFedCMPrompt:n}){let y=(0,d.J)(E.o,[]),I=(0,i.wA)(),T=!!(0,g.S$)(),v=n??T,S=(0,f.Sp)(),w=a.useRef(!1),A=a.useCallback(async({credential:n})=>{(0,_.g)("google_one_tap_login_start",e,{},{forwardToDatadog:!0});let a=(0,b.z)(n);if(!a)return;let i={name:a.name,token:n,tokenType:s.V.ID_TOKEN};if(r){r(i);return}try{I(h.WY({redirectUrl:c.Ay.location.pathname}));let r=await (0,l.W8)(i,{dispatch:I,apiUrl:l._B,origin:e});(0,_.g)("google_one_tap_login_complete",e,{},{forwardToDatadog:!0}),I(h.My({userId:r.id}))}catch(e){I(h.Qg({message:e.message}))}},[e,r,I]);return a.useEffect(()=>{if(y.status===m.r.SUCCESS&&!w.current){w.current=!0;let r=!(0,p.o4)()||S(),n=y.value,{google_client_id:a}=(0,u.Ay)();(0,o.KF)(void 0!==a,"google_client_id should be defined in initialOptions"),n.accounts.id.initialize({client_id:a,callback:A,cancel_on_tap_outside:!1,itp_support:r,use_fedcm_for_prompt:v}),n.accounts.id.prompt(r=>{if(v){let n=r.getMomentType();(0,_.g)("google_one_tap_prompt_moment",e,{momentType:n,reason:"dismissed"===n?r.getDismissedReason():void 0},{forwardToDatadog:!0});return}"display"===r.getMomentType()?r.isDisplayed()?(0,_.g)("google_one_tap_prompt_displayed",e,{},{forwardToDatadog:!0}):(0,_.g)("google_one_tap_prompt_display_failed",e,{reason:r.getNotDisplayedReason()},{forwardToDatadog:!0}):"skipped"===r.getMomentType()?(0,_.g)("google_one_tap_prompt_skipped",e,{reason:r.getSkippedReason()},{forwardToDatadog:!0}):"dismissed"===r.getMomentType()&&(0,_.g)("google_one_tap_prompt_dismissed",e,{reason:r.getDismissedReason()},{forwardToDatadog:!0})})}},[y,A,e,v,S]),null}function T(e){return u.kc()?.google_one_tap_killswitch||(0,u.sL)()||e.hideOnMobile&&(0,p.o4)()?null:a.createElement(y.d,null,a.createElement(I,{...e}))}},448211:(e,r,n)=>{n.d(r,{EO:()=>u,ZG:()=>m,iT:()=>s,l0:()=>d,xR:()=>l});var a=n(224622),i=n(778883),o=n(939863);function s(e){return"SECTION"===e}function l(e){if(0===Math.round(e.angle))return e;let r=(0,i.getCenteredRotation)(e.angle,e.width,e.height);return{...e,x:e.x-r[0][2],y:e.y-r[1][2]}}n(457630),n(357864);let c={x:0,y:0,width:1e3,height:1e3,angle:0};function d(e,r){let n=0!==Math.round(e.angle)?{transform:`rotate(${(360-e.angle).toString()}deg)`}:{},a=c;return"canvas"!==r&&(a=r),{position:"absolute",left:100*e.x/a.width+"%",top:100*e.y/a.height+"%",width:100*e.width/a.width+"%",height:100*e.height/a.height+"%",...n}}function u(e,r,n={x:1e3,y:1e3},i=a.s.identity().toFigMatrix()){let o=e.x/n.x,s=e.y/n.y,l=a.s.fromFigMatrix(i);if(!l.invert())return{position:"absolute",height:"1px",width:"1px"};l.multiply(a.s.fromFigMatrix(r));let c=l.offset(),d=l.toDegrees();return{position:"absolute",top:`${c.y/n.y*100}%`,left:`${c.x/n.x*100}%`,height:`${100*s}%`,width:`${100*o}%`,transform:`rotate(${d}deg)`,transformOrigin:"top left"}}function m(e){switch(e){case"DIAMOND":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-diamond");case"ELLIPSE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-ellipse");case"ENG_DATABASE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-database");case"ENG_FILE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-file");case"ENG_FOLDER":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-folder");case"ENG_QUEUE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-queue");case"PARALLELOGRAM_RIGHT":case"PARALLELOGRAM_LEFT":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-parallelogram-right");case"ROUNDED_RECTANGLE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-rounded-rectangle");case"SQUARE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-square");case"TRIANGLE_DOWN":case"TRIANGLE_UP":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-triangle-down");case"TRAPEZOID":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-trapezoid");case"STAR":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-star");case"SHIELD":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-shield");case"HEXAGON":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-hexagon");case"PENTAGON":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-pentagon");case"OCTAGON":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-octagon");case"PLUS":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-plus");case"PREDEFINED_PROCESS":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-predefined-process");case"MANUAL_INPUT":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-manual-input");case"CHEVRON":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-chevron");case"DOCUMENT_SINGLE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-document-single");case"DOCUMENT_MULTIPLE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-document-multiple");case"ARROW_LEFT":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-arrow-left");case"ARROW_RIGHT":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-arrow-right");case"SUMMING_JUNCTION":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-summing-junction");case"OR":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-or");case"SPEECH_BUBBLE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-speech-bubble");case"INTERNAL_STORAGE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-internal-storage");default:throw Error(`Unhandled shape type: ${e}`)}}},913964:(e,r,n)=>{n.d(r,{r:()=>o}),n(299321);var a=n(939863),i=n(239671);function o(e,r){switch(e){case"SECTION":return(0,a.t)("fullscreen.accessibility_dom.node_name_section");case"STICKY":return(0,a.t)("fullscreen.accessibility_dom.node_name_sticky");case"ROUNDED_RECTANGLE":case"SHAPE_WITH_TEXT":return(0,a.t)("fullscreen.accessibility_dom.node_name_shape");case"CONNECTOR":return(0,a.t)("fullscreen.accessibility_dom.node_name_connector");case"CODE_BLOCK":return(0,a.t)("fullscreen.accessibility_dom.node_name_code_block");case"LINE":return(0,a.t)("fullscreen.accessibility_dom.node_name_line");case"TEXT":return(0,a.t)("fullscreen.accessibility_dom.node_name_text");case"TABLE":return(0,a.t)("fullscreen.accessibility_dom.node_name_table");case"TABLE_CELL":return(0,a.t)("fullscreen.accessibility_dom.node_name_table_cell_generic");case"WIDGET":return(0,a.t)("fullscreen.accessibility_dom.node_name_widget");case"INSTANCE":if(r===i.nT.Whiteboard)return(0,a.t)("fullscreen.accessibility_dom.node_name_instance");return(0,a.t)("fullscreen.accessibility_dom.design.node_name_instance");case"STAMP":return(0,a.t)("fullscreen.accessibility_dom.node_name_stamp");case"CANVAS":if(r===i.nT.Whiteboard)return(0,a.t)("fullscreen.accessibility_dom.node_name_canvas");return(0,a.t)("fullscreen.accessibility_dom.design.node_name_canvas");default:return(0,a.t)("fullscreen.accessibility_dom.node_name_fallback")}}},681816:(e,r,n)=>{n.d(r,{B5:()=>O});var a=n(411855),i=n(188507),o=n(171812),s=n(424587),l=n(299321),c=n(629019),d=n.n(c),u=n(966712),m=n(646240),p=n(563706),h=n(939863),_=n(738269),g=n(259927),f=n(809831),E=n(356390),y=n(843495),b=n(457630),I=n(237395),T=n(425187),v=n(745968),S=n(448211),w=n(839653),A=n(951034),N=n(794535),C=n(610171),L=n(120825);let O={alwaysPan:!1,noPanViewportMultiplier:.9,panJustEnoughViewportMultiplier:1.5},R={jumpOnAbort:!0};function P(e){let r=(0,s.qE)(e.headerLevel,2,6);return e.header?a.createElement(a.Fragment,null,a.createElement("div",{role:"heading","aria-level":r,id:e.header.headerId},e.header.label),e.children):a.createElement(a.Fragment,null,e.children)}function D({accessibilityScope:e,nodeId:r,...n}){let i=(0,I.W)(r,e);if(!i)return null;let{childIds:o,...s}=i;return a.createElement(k,{...n,...s,nodeId:r,childIds:o,accessibilityScope:e})}let k=a.memo(({childIds:e,...r})=>{let{accessibilityScope:n,isDebugMode:i,navigate:o,nodeId:s,headingLevel:l,suppressIds:c,type:d,absoluteTransform:u,dimensions:m,transformProperties:p}=r,h=(0,S.iT)(d)?l+1:l,_=e.length;return a.createElement(M,{...r,size:_},e.map((e,r)=>a.createElement(D,{key:e,nodeId:e,accessibilityScope:n,isDebugMode:i,navigate:o,headingLevel:h,setSize:_,setPosition:r+1,suppressIds:c,parent:{dimensions:m,transformProperties:p,absoluteTransform:u,guid:s}})))},function({directTextContent:e,innerTextContent:r,tableCells:n,transformProperties:a,childIds:s,stampFrequencies:l,accessibleLabel:c,absoluteTransform:d,dimensions:u,parent:m,...p},{directTextContent:h,innerTextContent:_,tableCells:g,transformProperties:f,childIds:E,stampFrequencies:y,accessibleLabel:b,absoluteTransform:I,dimensions:T,parent:v,...S}){return(0,i.bN)(p,S)&&(0,i.bN)(u,T)&&(0,i.bN)(d,I)&&(0,i.bN)(a,f)&&(0,i.bN)(l,y)&&(0,i.bN)(c,b)&&(0,i.bN)(s,E)&&(0,i.bN)(m?.absoluteTransform,v?.absoluteTransform)&&(0,i.bN)(m?.dimensions,v?.dimensions)&&(0,i.bN)(m?.transformProperties,v?.transformProperties)&&(0,o.c2)(e,h)&&(0,o.c2)(r,_)&&(0,o.c2)(n,g)});function M({children:e,setSize:r=1,setPosition:n=1,headingLevel:o=2,author:s,transformProperties:c,directTextContent:I,innerTextContent:A,tableCells:C,headerLabel:D,guid:k,isDebugMode:M,navigate:x,ariaRole:U,name:B,shapeType:V,size:G,type:H,nodeId:W,suppressIds:K,stampFrequencies:Y,accessibleLabel:$,contentsHidden:j,dimensions:z,absoluteTransform:q,parent:X}){let J;let Z=(0,i.Pj)(),Q=Z.getState().comments.showResolved,ee=(0,i.d4)(e=>e.mirror.appModel.showComments),et=Z.getState().mirror.sceneGraph,er=(0,S.iT)(H)?o+1:o,en=(0,f.E3)(),ea=(0,w.E)({type:H,shapeType:V,ariaRole:U,name:B,setData:{size:r,i:n,headerLevel:o},numChildren:G,stampFrequencies:Y,accessibleLabel:$,contentsHidden:j,editorType:en}),ei=!X;if((0,u.kc)().a11y_dom_css_positioning)J=ei?(0,S.EO)(z,q):(0,S.EO)(z,q,X.dimensions,X.absoluteTransform);else{let e=ei?"canvas":X.transformProperties;J=(0,S.l0)(c,e)}let eo=(0,N.rp)(I,N.d2.SEMANTIC),es=(0,N.rp)(A,N.d2.SEMANTIC),el=(0,N.Dm)(et,W,C),ec=D?{label:D,headerId:`sectionHeaderFor-${k}`}:null,ed=(0,i.d4)(e=>{let r=Object.keys(e.mirror.sceneGraphSelection);return(e.mirror.appModel.activeCanvasEditModeType!==l.m1T.TEXT&&1===r.length?r[0]:"")===k}),{groupCommentNodeId:eu,groupCommentTransformProperties:em,groupSize:ep}=function(e,r){let n,a,i;let o=r.get(e)?.parentGuid,s=o?r.get(o):void 0;for(;s?.resizeToFit;){n=s.guid??e;let a=s.parentGuid;s=a?r.get(a):void 0}if(n){let r=l.glU.getSortedChildGuids(n);r.length>0&&r[r.length-1]===e?(i=r.length,a=(0,S.xR)(l.Egt.getNodeTransformProperties(n))):n=void 0}return{groupCommentNodeId:n,groupCommentTransformProperties:a,groupSize:i}}(k,et);(function(e,r,n,i,o,s,l,c,d){let u=(0,m.Xr)(T.f),p=(0,f.E3)();a.useEffect(()=>{e&&u({type:"SET_CURRENTLY_SELECTED_NODE",payload:{nodeId:d,ariaLabel:(0,w.E)({type:r,shapeType:n,name:i,accessibleLabel:o,setData:{size:s,i:l,headerLevel:c},editorType:p})}})},[o,c,l,e,i,d,n,s,r,u,p])})(ed,H,V,B,$,r,n,o,W),a.useLayoutEffect(()=>{if(K)return;let e=document.getElementById(k);e&&(ed&&!l.VDs.getExpectingTextInput()?(e.setAttribute("tabindex","0"),e.focus()):(e.setAttribute("tabindex","-1"),e.blur()))},[k,ed,K]);let[eh,e_]=(0,v.l)(M?[X,s,c,I,A,D,k,ed,U,B,V,H,W,K]:[]);return a.createElement(a.Fragment,null,a.createElement("div",{id:K?void 0:k,ref:e_,role:U,className:d()(L.rH,M&&eh),style:J,"aria-label":ea,tabIndex:-1,contentEditable:p.Ay.windows&&ed?"true":void 0,onContextMenu:e=>{Z.dispatch(_.j7({type:g.K9,data:{clientX:e.clientX,clientY:e.clientY}})),e.preventDefault()},onFocus:e=>{e.target!==e.currentTarget||e.relatedTarget===e.currentTarget||ed||(y.wr(),y.Dh([k]),E.Y5.commit(),x((0,b.QZ)({nodeId:k,...O}),R))},"data-guid":K?k:void 0,"data-fullscreen-intercept-dangerously-include-tab":!0},a.createElement(P,{header:ec,headerLevel:er},es.length>0?es:null,eo.length>0?eo:null,null!=s&&(0,h.tx)("fullscreen.accessibility.author",{authorName:s}),el.length>0?el:null,e),ee?a.createElement(F,{guid:k,navigate:x,isDebugMode:M,parentTransformProperties:c,showResolved:Q,intermediateTransformProperties:void 0,parentAbsoluteTransform:q,parentDimensions:z}):null),ee&&eu?a.createElement(F,{guid:eu,navigate:x,isDebugMode:M,parentTransformProperties:"canvas",intermediateTransformProperties:em??c,showResolved:Q,groupSize:ep,parentAbsoluteTransform:void 0,parentDimensions:void 0}):null)}function F({guid:e,isDebugMode:r,navigate:n,isTopLevel:i,groupSize:o,parentTransformProperties:s,intermediateTransformProperties:l,showResolved:c,parentAbsoluteTransform:d,parentDimensions:u}){let m=(0,C.x)(e,c),p=a.createElement(A.X,{threads:m,navigate:n,isDebugMode:r,parentTransformProperties:s,intermediateTransformProperties:l,parentAbsoluteTransform:d,parentDimensions:u});if(!m||0===m.length)return null;if(i)return a.createElement("div",{role:"region","aria-labelledby":"canvas-comments-heading"},a.createElement("h2",{id:"canvas-comments-heading"},(0,h.tx)("fullscreen.accessibility_dom.unattached_comments")),p);if(!o)return p;{let e=(0,h.t)("fullscreen.accessibility_dom.grouped_comments",{groupSize:o});return a.createElement("div",{role:"group","aria-label":e},p)}}},274071:(e,r,n)=>{function a(){let e=document.getElementById("fullscreen-root")?.getElementsByClassName("focus-target");if(null==e)return null;for(let r of e){let e="application"===r.getAttribute("role")||"application"===r.role;if(r.hasAttribute("readonly")&&e)return r}return null}function i(){a()?.focus()}n.d(r,{$z:()=>i,lo:()=>a}),n(411855),n(188507),n(299321),n(794272),n(96328),n(939863),n(392592),n(529906),n(21067),n(356390),n(239671),n(861802),n(913964)},405206:(e,r,n)=>{n.d(r,{a1:()=>h});var a=n(411855),i=n(902008),o=n(629019),s=n.n(o),l=n(268537),c=n(638889),d=n(46481);n(154254);var u=n(467492),m=n(813421);function p(e){return a.createElement("div",{className:u.zc},e.children)}function h(e){return a.createElement(l.c$,{disabled:!e.isEnabled,onClick:e.onClick,onPointerUp:e.onPointerUp,recordingKey:e.recordingKey,className:s()(u.NV,{[u.Kt]:e.inPanel}),buttonRef:e.buttonRef,onboardingKey:e.onboardingKey,simulateHover:e.simulateHover,tooltip:e.tooltip},!e.hideCheck&&a.createElement("div",{className:u.l8},e.isChecked&&a.createElement(d.U,{svg:m.A},a.createElement(i.l,null))),e.children&&a.createElement(p,null,e.children),a.createElement("div",{className:u.Qq},e.text),null!=e.shortcut&&a.createElement(c.S,{shortcut:e.shortcut,className:u.LE}))}},81804:(e,r,n)=>{n.d(r,{rA:()=>o});var a=n(299321),i=n(179536);let o={[a.D1Y.TEXT]:0,[a.D1Y.FRAME_OR_GROUP]:0,[a.D1Y.COMPONENT]:0,[a.D1Y.INSTANCE]:0,[a.D1Y.IMAGE]:0,[a.D1Y.SHAPE]:0,[a.D1Y.OTHER]:0};[...i.b4,...i._V];var s=(e=>(e[e.PREV=-1]="PREV",e[e.NONE=0]="NONE",e[e.NEXT=1]="NEXT",e))(s||{})},467594:(e,r,n)=>{n.d(r,{c:()=>_,o:()=>g});var a=n(411855),i=n(96796),o=n(153234),s=n(163023),l=n(47506),c=n(738269),d=n(516398),u=n(498606),m=n(718520),p=n(289298);class h extends o.uA{constructor(e){super(e),this._onChevronToggleDropdown=()=>{if(this.props.inLoggedOutDesktopRevampExp?.()){this.props.showAuthModalForLoggedOutExp?.();return}if(!this.props.dispatch||!this.props.dropdownKey)return;if(this.props.showingDropdown){this.props.dispatch(c.oB());return}let e=this.chevronRef.current;this.props.dispatch(c.j7({type:this.props.dropdownKey,data:{...this.props.additionalDispatchData,targetRect:e.getBoundingClientRect()}})),this.props.rcsHandlerId&&(0,l.YQ)({id:this.props.rcsHandlerId,properties:{dropdownKey:this.props.dropdownKey}})},this.onChevronClicked=o.cZ(this,this.props.toggleOnClick?"click":"mousedown",e=>{this._onChevronToggleDropdown(),this.props.dispatch&&this.props.dropdownKey&&e.stopPropagation()}),this._onChevronStopPropagation=e=>{e.stopPropagation()},e.divRef?this.chevronRef=e.divRef:this.chevronRef=a.createRef()}render(){let e=[m.FH,this.props.showingDropdown?m.u:"",this.props.className||"",this.props.disableHoverAnimation?m.y$:""].join(" "),r=[m.cN,this.props.svgContainerClassName||""].join(" ");return a.createElement("div",{className:e,ref:this.chevronRef,"data-tooltip-type":u.Ib.TEXT,"data-tooltip":this.props.tooltipText,onMouseDown:this.props.toggleOnClick?void 0:this.onChevronClicked,onClick:this.props.toggleOnClick?this.onChevronClicked:this._onChevronStopPropagation,"data-testid":this.props.dataTestId,"data-onboarding-key":this.props.dataOnboardingKey,tabIndex:this.props.tabIndex,role:0===this.props.tabIndex?"button":void 0,onKeyDown:e=>(0,d.hx)({e,onClickHandler:e=>{this._onChevronToggleDropdown()},onEscapeHandler:e=>{this.chevronRef?.current?.blur()}}),"aria-label":this.props.ariaLabel},this.props.isUI3?a.createElement(i.O,null):a.createElement(s.B,{svg:this.props.iconOverride||p.A,className:r}),this.props.children)}}function _(e){return a.createElement(h,{...e})}function g(e){return a.createElement(h,{...e})}h.displayName="Chevron"},7860:(e,r,n)=>{n.d(r,{t:()=>i});var a=n(411855);n(299321),n(358145),n(818),n(506599),n(187882);let i=(0,a.createContext)({isLeftPanelCollapsed:!1,isRightPanelCollapsed:!1})},708212:(e,r,n)=>{n.d(r,{q:()=>O});var a=n(411855),i=n(188507),o=n(568214),s=n(966712),l=n(572206),c=n(799569),d=n(271779),u=n(939863),m=n(392592),p=n(553015),h=n(738269),_=n(662275),g=n(801161),f=n(259927),E=n(463304),y=n(498606),b=n(237870),I=n(336298),T=n(697373),v=n(228131),S=n(488578),w=n(421689),A=n(667241),N=n(710010);let C={shouldZoomToStart:!1,shouldWheelPan:!0,enableZoomControls:!0,enableZoomKeyControls:!0,minZoomFactor:.01,maxZoomFactor:10,crossOrigin:"use-credentials"};var L=(e=>(e[e.LEFT=-1]="LEFT",e[e.RIGHT=1]="RIGHT",e))(L||{});let O=(0,b.Ju)(function(e){let r=(0,i.wA)(),[n,b]=a.useState(e.selectedIdx),L=a.useRef(null),[O,R]=a.useState(null),P=a.useRef(null),{onUpdateAltText:D}=e,[k,M]=a.useState(e.attachments),F=(0,T.UR)(v.b.ATTACHMENT_MODAL_BACKGROUND_COLOR),x=F?(0,o.H0)(F):void 0,U=e=>{if(L.current){let r=L.current?.children[e].firstChild;r?.blur()}},B=e=>{U(n),b(e),R(null)},V=e=>{B((n+e+k.length)%k.length)},G=e=>{let r=n===(-1===e?0:k.length-1);return a.createElement(p.$,{onClick:()=>V(e),icon:-1===e?"chevron-left-32":"chevron-right-32",variant:"text",disabled:r})},H=e=>{if("ArrowLeft"===e.key)0!==n&&V(-1);else if("ArrowRight"===e.key){if(n===k.length-1)return;V(1)}},W=()=>(r(_.Lo()),!0);(0,E.O1)(W,E.KD.FULL_SCREEN_MODAL);let K=(e,n)=>{e.preventDefault(),e.stopPropagation(),r(h.j7({type:f.DT,data:{id:"comment_attachment_context_menu",clientX:e.clientX,clientY:e.clientY,attachment:n}}))},Y=a.useRef(null),$=a.useCallback(()=>{if(P.current&&!O){let e=P.current.getBoundingClientRect(),n=new l.Mi(e.left+e.width/2,e.top);r(g.jD()),R(n)}else R(null)},[r,O]),j=a.useCallback(e=>{if(Y.current){let a=Y.current.value.trim();(a||e)&&D(a,n).then(e=>{e&&(200!==e.status?r(m.F.enqueue({message:(0,u.t)("comments.failed_to_update_alt_text")})):M(e=>(e[n]={...e[n],altText:a},e)))}).catch(e=>{r(m.F.enqueue({message:(0,u.t)("comments.failed_to_update_alt_text")}))})}R(null)},[r,D,n]);return a.createElement(a.Fragment,null,a.createElement(d.i,{displayAs:d.C.Block},a.createElement(S.aF,{className:N.zw,size:"any",onKeyDown:e=>{H(e)}},a.createElement("div",{className:N.qG},a.createElement("div",{className:N.N1},a.createElement("div",{className:N.qd},k[n].metadata.file_name??(0,u.t)("comments.attachment_default_name",{fileExtension:k[n].mediaType.split("/")[1]})),a.createElement(c.Jn,{className:N.yu,recordingKey:"commentMediaDetailModal",onClick:W,innerText:(0,u.t)("comments.close"),"aria-label":(0,u.t)("comments.close")})),a.createElement("div",{className:N.xs},a.createElement(w.DH,{imageSrc:k[n].imageUrl,onContextMenu:e=>{K(e,k[n])},pageBackgroundColor:x??void 0,...C}),!!(0,s.kc)().comments_media_alt_text&&(e.canEdit||k[n].altText)&&a.createElement("button",{className:k.length>1?N.dE:N.R5,"data-tooltip-type":y.Ib.TEXT,"data-tooltip":O?void 0:(0,u.t)("comments.add_description"),"data-tooltip-show-above":!0,onClick:()=>O?j(k[n].altText):$(),ref:P},(0,u.t)("comments.alt_text"))),k.length>1&&a.createElement("div",{className:N.Qc},G(-1),a.createElement("div",{ref:L,className:N.iT},k.map((e,r)=>a.createElement("div",{key:e.thumbnailUrl,className:N.ub},a.createElement(A.M,{thumbnailUrl:e.thumbnailUrl,altText:e.altText||(0,u.t)("comments.attachment_thumbnail_alt_text_default"),isSelected:r===n,onClick:e=>{B(r)},onRightClick:r=>K(r,e)})))),G(1)))),O&&a.createElement(I.A,{text:k[n].altText??"",location:O,onEnter:()=>j(k[n].altText),onEscape:()=>(R(null),!0),inputRef:Y,canEdit:e.canEdit})))},"AttachmentDetailModal",b.ZU.NO)},667241:(e,r,n)=>{n.d(r,{M:()=>m});var a=n(411855),i=n(493323),o=n(939863),s=n(277810),l=n(456622);let c=e=>e.height<256&&e.width<256,d=e=>e.height/e.width>2||e.width/e.height>2,u=e=>e.width>e.height?{width:256,height:128}:{width:128,height:256};function m(e){let r=e.dimensions??void 0,n=r&&(c(r)?r:d(r)?u(r):(0,s.$K)(r.width,r.height,256));return a.createElement("button",{className:e.isSelected?l.ig:l.vi,onClick:()=>{e.onClick(e.thumbnailUrl)},style:n&&{width:`${n.width}px`,height:`${n.height}px`},onContextMenu:r=>{e.onRightClick&&e.onRightClick(r)}},a.createElement("img",{src:e.thumbnailUrl,crossOrigin:"use-credentials",alt:e.altText||(0,o.t)("comments.attachment_thumbnail_alt_text_default"),className:l.q_}),a.createElement("div",{className:e.overlayText||e.isUploading?l.Xu:l.VO},e.isUploading&&a.createElement(i.kt,null),e.overlayText))}},30990:(e,r,n)=>{n.d(r,{a:()=>_});var a=n(411855),i=n(188507),o=n(939863),s=n(738269),l=n(662275),c=n(259927),d=n(328775),u=n(708212),m=n(667241),p=n(884857),h=n(456622);function _(e){let r=(0,i.wA)(),{attachments:n}=e,_=a=>{r((0,l.to)({type:u.q,data:{attachments:n,selectedIdx:n.map(e=>e.thumbnailUrl).indexOf(a),onUpdateAltText:g,canEdit:e.canEdit},showModalsBeneath:!0}))},g=(r,a)=>{let i=n[a];return d.l.put(e.fileKey,i.id,r)},f=(e,n)=>{e.preventDefault(),e.stopPropagation(),r(s.j7({type:c.DT,data:{id:"comment_attachment_context_menu",clientX:e.clientX,clientY:e.clientY,attachment:n}}))};return a.createElement("div",{className:p.KK},n.slice(0,3).map((e,r)=>a.createElement("div",{key:e.id,className:h.Kn},a.createElement(m.M,{thumbnailUrl:e.thumbnailUrl,altText:e.altText||(0,o.t)("comments.attachment_thumbnail_alt_text_default"),overlayText:n.length>3&&2===r?`+${n.length-3}`:void 0,onClick:_,onRightClick:r=>f(r,e),dimensions:0===r&&1===n.length?e.metadata.dimensions:void 0}))))}},984871:(e,r,n)=>{n.d(r,{Z5:()=>c,i$:()=>o,uw:()=>l});var a=n(411855),i=n(966712);let o={minZoomPercentage:76,zoomScaleOverlap:64,clusterClickResultViewportPercentage:35,rebuildClustersZoomDelay:50,disableSidebar:!1},s=new Set;function l(e){if(!(0,i.kc)().internal_only_debug_tools)return;let r="function"==typeof e?e({...o}):e;o={...o,...r},requestAnimationFrame(()=>{s.forEach(e=>e(o))})}function c(){let[e,r]=a.useState(o);return a.useEffect(()=>{let e=e=>{r(e)};return s.add(e),()=>{s.delete(e)}},[r]),e}},517911:(e,r,n)=>{n.d(r,{Ao:()=>s,Ko:()=>c,LX:()=>o,c4:()=>d,xN:()=>l});var a=n(841563),i=n.n(a),o=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ACTIVE=1]="ACTIVE",e[e.DIMMED=2]="DIMMED",e))(o||{});function s(e,r){return`${100*Math.round(e.x/100)},${100*Math.round(e.y/100)},${r}`}function l(e,r){if(e.isSinglePin&&r.isSinglePin){var n,a;return n=e.pins[0],a=r.pins[0],n.x!==a.x||n.y!==a.y||!i()(n.avatars,a.avatars)||!i()(n.previewMessageMeta,a.previewMessageMeta)||n.isUnread!==a.isUnread||n.numUnreadReplies!==a.numUnreadReplies||n.isResolved!==a.isResolved||!i()(n.selectionBoxAnchor,a.selectionBoxAnchor)||!i()(n.otherBoundingBoxes,a.otherBoundingBoxes)||!i()(n.isPinnedToFile,a.isPinnedToFile)}return e.pins.length!==r.pins.length||e.isUnread!==r.isUnread||e.isPinnedToFile!==r.isPinnedToFile}let c={length:0,leafNodes:new Set([]),all:()=>[],getParentOf:()=>null,zoomScale:-1};function d(e){let r=new Map,n=[];return e.forEach(e=>{if(r.has(e.user.id)){let a=r.get(e.user.id);n[a].num_unread_comments+=e.isUnread?1:0,n[a].num_comments+=1}else n.push({avatar_url:e.user.img_url,avatar_user_id:e.user.id,avatar_user_handle:e.user.handle,num_unread_comments:e.isUnread?1:0,num_comments:1}),r.set(e.user.id,n.length-1)}),n}},593392:(e,r,n)=>{n.d(r,{p:()=>l});var a=n(411855),i=n(572206),o=n(457630),s=n(350022);function l(e){let r=(0,o.Cj)(),n=i.Mi.scale(-1,r);return a.createElement("div",{className:s.M,style:{top:r.y,left:r.x,height:r.height,width:r.width}},a.createElement("div",{className:s.W,style:{top:n.y,left:n.x}},e.children))}},400333:(e,r,n)=>{n.d(r,{HH:()=>C,xT:()=>T});var a=n(411855),i=n(188507),o=n(629019),s=n.n(o),l=n(776250),c=n(934480),d=n(733334),u=n(946689),m=n(46221),p=n(939863),h=n(677664),_=n(611978),g=n(860178),f=n(416822),E=n(498606),y=n(516093),b=n(527429),I=n(771931);function T(e){let r=RegExp("^\\w+:"),n=e.match(r);return""===e||n&&["http:","https:","mailto:","tel:"].includes(n[0].toLowerCase())?e:"https://"+e}let v=a.memo(e=>{let{text:r,hyperlink:n}=e,o=a.useMemo(()=>(0,c.x6)(r),[r]),s=(0,_.z3)(),l=(0,i.wA)();return a.createElement(u.CY,{onClick:()=>{l((0,h.RK)({rawInput:T(n)}))},"data-tooltip-type":E.Ib.SPECIAL,"data-tooltip":E.MW.HYPERLINK_POPUP,"data-tooltip-show-above":!0,"data-tooltip-unconstrain-width":!0,"data-tooltip-editor-type":s,"data-tooltip-url-string":n,"data-tooltip-interactive":!0,"data-tooltip-precise":!0,trusted:!1},o)}),S=a.memo(e=>{let{userId:r,imgUrl:n,handle:i,href:o}=e;return a.createElement(u.CY,{href:o,target:"_blank","data-tooltip-type":E.Ib.SPECIAL,"data-tooltip":y.N,"data-tooltip-show-above":!0,"data-tooltip-user-img-url":n,"data-tooltip-user-handle":i,"data-tooltip-unconstrain-width":!0,"data-mention-user-id":r,trusted:!0},i)}),w=a.memo(function(e){let r=g.iZ()?.community_profile_id,{handle:n,commentId:i,profileId:o,profileName:s,profileImgUrl:c}=e,m=(0,d.F)(n),p=(0,d.F)(s);return a.createElement(u.CY,{href:`/${m}`,target:"_blank","data-tooltip-type":E.Ib.SPECIAL,"data-tooltip":y.N,"data-tooltip-show-above":!0,"data-tooltip-user-img-url":c,"data-tooltip-user-handle":p,"data-tooltip-unconstrain-width":!0,onClick:()=>{(0,l.sx)("at_mention_link_clicked",{mentioned_profile_id:o,profile_id:r,comment_id:i})},trusted:!0},m)}),A=a.memo(e=>{let{text:r,tokenStyles:n}=e,i=a.useMemo(()=>(0,c.x6)(r),[r]),o=n?.map(e=>"b"===e?I.hp:"i"===e?I.u5:"s"===e?I.Vc:"lightbold"===e?I.XH:void 0)||[];return a.createElement(m.M,null,a.createElement("span",{className:s()(o)},i))}),N=a.memo(e=>{let{text:r,userId:n,profileId:i,user:o,orgPath:s,profiles:l,commentId:c,tokenStyles:u,hyperlink:m}=e,p=(0,d.F)(r);if(n)return a.createElement(S,{href:`/files${s}/user/${n}`,userId:n,handle:(0,d.F)(o?.handle)||void 0,imgUrl:o?.img_url});if(i&&p){let e="@"+p,r=l?.[i];return r?a.createElement(w,{handle:e,commentId:c,profileId:r.id,profileName:r.name,profileImgUrl:r.img_url}):a.createElement("span",null,e)}if(null===i&&p){let e="@"+p;return a.createElement("span",null,e)}let h=m&&T(m);return h&&p&&(0,b.$)(h)?a.createElement(v,{text:p,hyperlink:h}):p?a.createElement(A,{text:p,tokenStyles:u}):null}),C=a.memo(e=>{let r=(0,f.q)(),n=(0,i.d4)(r=>e.mentionedProfiles||r.communityHub?.comments?.mentionedProfiles),o=(e,r,n,i,s)=>e.map((e,l)=>{let c="";if(e.styles?.includes("ul")?c=I.ty:e.styles?.includes("ol")&&(c=I.A9),e.children?.length){let d=e.children.map((e,d)=>a.createElement("li",{key:`li-${r}-${l}-${d}`,className:c},o(e.children,`${r}-${l}-${d}`,n,i,s)));if(e.styles?.includes("ul"))return a.createElement("ul",{key:`ul-${r}-${l}`},d);if(e.styles?.includes("ol"))return a.createElement("ol",{key:`ol-${r}-${l}`},d)}return a.createElement(N,{key:`${r}-${l}`,orgPath:n,profiles:i||null,commentId:s,text:(0,d.F)(e.t)||void 0,hyperlink:e.link,user:e.user_annotated,userId:e.user_id,profileId:e.profile_id,tokenStyles:e.styles||null})}),{messageMeta:s,showEditedIndicator:l,commentId:c}=e,u=e.className||I.zD;return a.createElement("div",{className:I.$t+" "+u,"data-testid":"comment-message",dir:"auto"},o(s,c,r,n,c),l&&a.createElement("span",{className:I.oh,key:"edited_indicator"},"\xa0",(0,p.tx)("comments.edited")))});C.displayName="CommentMessage"},448879:(e,r,n)=>{n.d(r,{y:()=>a}),n(411855),n(226055),n(617453),n(187882),n(837746);let a={showNotificationSettings:!0,disableCommentsWhenHandToolEnabled:!0,repositionViewportOnCommentSelection:!0,clusterBy:"page",orphanedBy:"deleted_pages"}},152811:(e,r,n)=>{n.d(r,{L9:()=>L,T4:()=>P,ek:()=>x,hh:()=>V,pO:()=>G,vO:()=>U});var a=n(411855),i=n(188507),o=n(299321),s=n(880934),l=n(904669),c=n(841563),d=n.n(c),u=n(934480),m=n(939863),p=n(331972),h=n(964881),_=n(975350),g=n(63397),f=n(994988),E=n(103907),y=n(654034),b=n(714705),I=n(697551),T=n(860178),v=n(100197),S=n(440535),w=n(555328),A=n(697373),N=n(531461);let C=new Set([]);function L(e){return({creationDate:(0,m.t)("comments.sort_by_date"),recent:(0,m.t)("comments.sort_by_last_action"),unread:(0,m.t)("comments.sort_by_unread"),slide:(0,m.t)("comments.sort_by_slide")})[e]}let O=(e,r)=>Date.parse(r.comments[0].created_at)-Date.parse(e.comments[0].created_at),R={creationDate:O,recent:(e,r)=>Date.parse(r.lastRepliedAt||r.comments[r.comments.length-1].created_at)-Date.parse(e.lastRepliedAt||e.comments[e.comments.length-1].created_at),unread:(e,r)=>{let n=Number(e.comments.some(e=>e.isUnread)),a=Number(r.comments.some(e=>e.isUnread));return n===a?O(e,r):a-n},slide:(e,r)=>0};function P(e){return({resolved:(0,m.t)("comments.show_resolved_comments"),yours:(0,m.t)("comments.only_your_threads"),currentPage:(0,m.t)("comments.only_current_page"),currentSlide:(0,m.t)("comments.only_current_slide")})[e]}let D=e=>!e.comments[0].resolved_at,k=e=>e.sidebarItemType===S.kT.COMMENT_THREAD,M=e=>e.sidebarItemType===S.kT.FEED_POST,F={currentPage:!1,currentNode:!1,currentSlide:!1,currentDevModeFocus:!1};function x(e){return({commentsOnly:(0,m.t)("comments.only_comments"),postsOnly:(0,m.t)("comments.only_posts")})[e]}let U={postsOnly:[N.mW.RESOLVED],all:[],commentsOnly:[]};async function B(e,r){if(r){let n=r.replace(u.Py,u.H3);return await e.search(n).then(e=>new Set(e.map(e=>e.item.parentId||e.item.id)))}return C}let V=a.createContext({});function G(e){let r=(0,E.wq)(),n=(0,i.wA)(),c=(0,I.UP)(),u=(0,i.d4)(e=>e.comments.showResolved),m=(0,i.d4)(e=>e.comments.showOnlyParticipating),C=(0,i.d4)(e=>e.mirror.appModel.currentPage),L=e.currentNode||C,O=(0,T.TA)()||void 0,P=(0,i.d4)(e=>e.selectedView.commentThreadId),x=(0,v.ut)(o.Ez5?.singleSlideView().focusedSlideId,s.AD),G=(0,h.hA)(),H=(0,A.Ld)(),[W,K]=a.useState("creationDate"),[Y,$]=a.useState({...F,resolved:!u,yours:m,currentDevModeFocus:!!G,...e.initialFilterState}),[j,z]=a.useState("all"),[q,X]=a.useState(""),[J,Z]=a.useState(null),Q=(0,b.kC)(r),ee=a.useMemo(()=>({resolved:D,yours:e=>O&&e.comments.some(e=>e.user_id===O||(0,y.F$)(e).includes(O))||!1,currentPage:e=>C&&e.page===C||!1,currentNode:e=>{let r=e.comments[0].client_meta;return!!r?.in_frame&&r.node_id===L},currentSlide:e=>{let r=e.comments[0].client_meta?.node_id,n=r?(0,l.UN)().get(r):void 0,a=n?n.findContainingSlideOrSelf():s.AD;return x===s.AD||a===s.AD||a===x},currentDevModeFocus:e=>{let r=G?(0,l.UN)().get(G):null;if(!r)return!0;let n=e.comments[0]?.client_meta?.node_id,a=n?(0,l.UN)().get(n):null;return(0,p.WJ)(r,a)}}),[O,C,L,x,G]),et=a.useMemo(()=>({all:()=>!0,commentsOnly:k,postsOnly:M}),[]),er=a.useCallback(e=>{X(e)},[]),en=a.useCallback(e=>{n(_.nL({activeSort:e})),K(e)},[n]),ea=a.useCallback(e=>{"resolved"===e&&(n(_.U3({showResolved:Y.resolved})),c&&n((0,f.mH)(Y.resolved))),"yours"===e&&(n(_.RO({showOnlyParticipating:!Y.yours})),c&&n(g.Zj(Y.yours?w.Qv.ALL:w.Qv.ME))),$(r=>(r[e]=!r[e],{...r}))},[n,Y,c]),ei=a.useMemo(()=>{let e=new Set;for(let r of Object.values(N.mW))Y[r]&&e.add(r);return e},[Y]),eo=a.useCallback(e=>{z(e)},[]);a.useEffect(()=>{U[j].forEach(e=>{("resolved"===e?!ei.has(e):ei.has(e))&&ea(e)})},[j,ei,ea]),a.useEffect(()=>{q?B(Q,q).then(e=>{d()(J,e)||Z(e)}):Z(null)},[r,q,J,Q]);let es=a.useMemo(()=>({...R,...H}),[H]),el=a.useMemo(()=>(function(e,r,n,a,i,o,s,l){if("loaded"!==e.status)return e;let c=[...e.data];for(let e of(l&&(c=c.filter(e=>l.has(e.id))),a))c=c.filter(o[e]);return c=c.filter(s[n]),{...e,data:c.sort(i[r])}})(r,W,j,ei,es,ee,et,J),[r,W,j,ei,es,ee,et,J]),ec=a.useMemo(()=>"loaded"===el.status?{...el,data:el.data.filter(e=>e.sidebarItemType!==S.kT.WALKTHROUGH_MEDIA)}:el,[el]),ed=a.useMemo(()=>({setSort:en,toggleFilter:ea,setMode:eo,setQuery:er}),[er,en,ea,eo]),eu=a.useMemo(()=>({activeQuery:q,activeSort:W,activeMode:j,activeFilters:ei,threads:r,filteredThreads:el,filteredSidebarItems:ec,threadManager:ed}),[q,W,j,ei,r,el,ec,ed]),em=a.useMemo(()=>{if(r&&"loaded"===r.status)return r.data.find(e=>e.id===P)},[P,r]);return a.useEffect(()=>{em&&em.comments[0].resolved_at&&Y.resolved&&ea("resolved")},[Y,em,ea]),a.useEffect(()=>{$(e=>({...e,currentDevModeFocus:!!G}))},[G,$]),a.createElement(V.Provider,{value:eu},e.children)}},238559:(e,r,n)=>{n.d(r,{Uu:()=>g,wV:()=>f});var a=n(411855),i=n(188507),o=n(975350),s=n(654034),l=n(457630),c=n(860178),d=n(336174),u=n(475409),m=n(252296),p=n(705237),h=n(230413);let _=n(699670).ss;function g(e){let r=(0,i.d4)(e=>e.comments.typeahead);return e.mentionsDisabled&&r?.type==="mentions"?null:a.createElement(E,{onInsert:e.onInsert,onClear:e.onClear,isCommunityMentions:!1,decoratorsRef:e.decoratorsRef,width:e.width,direction:e.direction,targetRect:e.targetRect,useFixedPosition:!0,useWindowAsViewport:!0})}function f(e){let r=(0,i.d4)(e=>e.comments.typeaheadPositionOffset),n=a.useMemo(()=>{let n=e.position||{x:0,y:0};return{top:r.top+n.y,right:r.right+n.x,bottom:r.bottom+n.y,left:r.left+n.x,width:r.width,height:r.height}},[r,e.position]),o=(0,s.mz)();return a.createElement(E,{onInsert:e.onInsert,onClear:e.onClear,isCommunityMentions:e.isCommunityMentions,decoratorsRef:e.decoratorsRef,width:o,direction:h.ri.DOWNWARDS,targetRect:n})}function E(e){let r;let n=(0,i.d4)(e=>e.comments.emojiPicker),s=(0,i.d4)(e=>e.comments.typeahead),[g,f]=(0,a.useState)(null);a.useEffect(()=>{s?.type==="suggestions"&&f(u.NS)},[s?.type]);let E=(0,i.wA)(),y=a.useCallback(()=>{E(o.RI({visible:!1}))},[E]),b=a.useCallback(e=>{E(o.We(e))},[E]),I=(0,l._X)({subscribeToUpdates_expensive:!0}),T=a.useMemo(()=>e.useWindowAsViewport?{isPanning:!1,isZooming:!1,height:window.innerHeight}:I,[e.useWindowAsViewport,I]),v=(T?.isPanning||T?.isZooming)&&n?.visible;a.useEffect(()=>{v&&y()},[v,y]);let S=(0,c.iZ)(),w=!!(n&&n.visible||s),{onClear:A}=e,N=a.useCallback(()=>{n&&n.visible&&y(),s&&A()},[n,s,y,A]),{decoratorsRef:C}=e;return a.useEffect(()=>{C&&(C.current={visible:w,clearDecorators:N})},[N,C,w]),r={...r=e.useFixedPosition||e.direction!==h.ri.UPWARDS?g&&e.targetRect.height>0&&e.targetRect.bottom>T.height-g&&e.targetRect.top>T.height-e.targetRect.bottom?e.useFixedPosition?{useFixedPosition:!0,targetRect:e.targetRect,direction:h.ri.UPWARDS}:{positionFromBottom:{left:e.targetRect.left,bottom:T.height-e.targetRect.top},direction:h.ri.UPWARDS}:{useFixedPosition:e.useFixedPosition,targetRect:e.targetRect,direction:h.ri.DOWNWARDS}:{positionFromBottom:e.positionFromBottom,direction:h.ri.UPWARDS},useWindowAsViewport:e.useWindowAsViewport},a.createElement("div",{style:{pointerEvents:"auto"}},n&&n.visible&&a.createElement(d._,{onInsert:n.onPick,onCancel:n.onCancel??y,targetRect:n.targetRect}),s&&"emojis"===s.type&&a.createElement(m.j,{dispatchTypeahead:b,typeahead:s,onInsert:e.onInsert,onClear:e.onClear,width:e.width,setMaxTypeaheadHeight:f,isComments:!0,...r}),S&&s&&"mentions"===s.type&&(s.search||s.mentions.length>0)&&a.createElement(p.E,{dispatch:E,setTypeahead:b,typeahead:s,onInsert:e.onInsert,onClear:e.onClear,entity:S,isCommunityMentions:e.isCommunityMentions,width:e.width,recordingKey:"mentionsTypeaheadView",dataTestId:"comment-mentions-typeahead",setMaxTypeaheadHeight:f,zIndex:e.isCommunityMentions?void 0:_,isComments:!0,...r}),s&&"suggestions"===s.type&&a.createElement(u.Cs,{setTypeahead:b,typeahead:s,onInsert:e.onInsert,onClear:e.onClear,width:e.width,...r}))}},884101:(e,r,n)=>{n.d(r,{Kb:()=>I,ny:()=>b});var a=n(411855),i=n(629019),o=n.n(i),s=n(934480),l=n(96328),c=n(939863),d=n(120694),u=n(498606),m=n(227795),p=n(451818),h=n(142803),_=n(855226);function g(e){return void 0!==e.numUsers}let f={};function E(e,r){let n=e.map(e=>e.handle).slice(0,r),a=e.length-r;return a>0&&n.push((0,l.td)(a,"other")),(0,l.Yx)(n)}d.i.forEach(e=>{f[`:${e.id}:`]=e});let y=a.forwardRef(function(e,r){let n=g(e.reaction)?e.reaction.numUsers:e.reaction.users.length,i=Object.keys(e.reaction.skinTonesToUsers).length,l=i>0?Object.keys(e.reaction.skinTonesToUsers):[""],c=l.map(r=>(0,s.UF)(`${e.reaction.emoji}${r}`)[0]),d={};if(!g(e.reaction)){let r=[],n=[];if(i>0)l.forEach(a=>{let o=`${e.reaction.emoji}${a}`;r.push((0,s.UF)(o)[0].unicode);let l=E(e.reaction.skinTonesToUsers[a],Math.floor(40/i));n.push([o,l])});else{r.push((0,s.UF)(e.reaction.emoji)[0].unicode);let a=E(e.reaction.users,40);n.push([e.reaction.emoji,a])}d={emojiUnicodeList:r,emojiShortcodeToUsers:n}}return a.createElement("button",{className:o()({[h.bs]:e.reaction.selected,[h.mJ]:!e.reaction.selected,[h.aN]:!e.visible}),"data-tooltip-type":u.Ib.SPECIAL,"data-tooltip":p.h,"data-tooltip-data":JSON.stringify(d),"data-tooltip-max-width":200,onClick:e.onClick,"data-testid":`reaction-button-${e.reaction.emoji}`,ref:r},c.map(e=>a.createElement("span",{key:`${e.meta}`,className:h.A9},e.unicode)),a.createElement("span",{className:h.U9},n))});function b(e){let r=e.styleClassName?e.styleClassName:h.BB;return a.createElement(m.YW,{svg:_.A,"data-tooltip-type":u.Ib.TEXT,"data-tooltip":(0,c.t)("comments.add_reaction"),onClick:e.onClick,selected:e.selected,className:r,selectedClassName:e.selectedStyleClassName,dataTestId:"add-reaction-button","data-fullscreen-intercept":e["data-fullscreen-intercept"]})}function I(e){let{reactions:r,collapseOverflow:n,onClickExisting:i,children:s,prependToList:l}=e,d=a.useRef(null),u=a.useRef({}),[m,p]=a.useState(null),[_,g]=a.useState(!n);a.useLayoutEffect(()=>{if(!d.current)return;let{width:e}=d.current.getBoundingClientRect(),n=-parseInt(h.h)+parseInt(h.bB),a=0;for(let i of r){let o=u.current[i.emoji];if(!o)return;if((n+=parseInt(h.h)+o.getBoundingClientRect().width)>e||a===r.length-1&&n+40+parseInt(h.h)>e)break;a+=1}p(a)},[r]);let f=null===m?null:r.length-m,E=r.map((r,n)=>{let o=i?e=>i(r,e):void 0;return a.createElement(y,{key:r.emoji,reaction:r,onClick:o,ref:e=>u.current[r.emoji]=e,visible:_||e.addedReaction||null===m||n<m})}),b=!(_||e.addedReaction)&&null!==f&&f>0;return a.createElement(a.Fragment,null,a.createElement("div",{className:o()({[h.KD]:!0,[h.l$]:b,[h._s]:!(_||e.addedReaction)&&null===f}),ref:d},...l??[],E,!b&&s),b&&a.createElement("div",{className:h.Jd},a.createElement("button",{className:h.mJ,onClick:()=>{g(!0)},"data-testid":"show-more-reactions-button"},(0,c.tx)("comments.num_hidden_more",{numHidden:f}))))}},636662:(e,r,n)=>{n.d(r,{K:()=>u});var a=n(411855),i=n(966712),o=n(96328),s=n(939863),l=n(67294),c=n(710381),d=n(573576);function u(e){let r=a.useCallback(()=>{if(e.replyContainerRef?.current){let r=(0,i.kc)().comments_smooth_scroll?"smooth":"auto";e.replyContainerRef.current.scrollIntoView({block:"end",behavior:r})}},[e.replyContainerRef]),n=a.createElement(c.C,{fallback:null,errorFallback:a.createElement(c.e,{type:"thread"}),editorRef:e.editorRef,editorType:e.editorType,dispatch:e.dispatch,user:e.user,typeahead:e.typeahead,mentionables:e.mentionables,threadPosition:e.threadPosition,setHyperlinkLocation:e.setHyperlinkLocation,hyperlinkLocation:e.hyperlinkLocation,setHyperlinkEditorRef:e.setHyperlinkEditorRef,messageMeta:e.messageMeta,attachments:e.attachments,submitText:e.submitText,placeholderText:e.placeholderText,onCancel:e.onCancel,onSubmit:e.onSubmit,onComposeFocus:e.onComposeFocus,onEditStart:e.onEditStart,editorOnInsert:e.editorOnInsert,editorOnClear:e.editorOnClear,viewportPositionFromClientPosition:e.viewportPositionFromClientPosition,isDisabled:e.isDisabled,mountInputFocused:e.mountInputFocused,updateMessage:e.updateMessage,updateAttachment:e.updateAttachment,deleteAttachment:e.deleteAttachment,setIsEditorFocused:e.setIsEditorFocused,isEmojiPickerDisabled:e.isEmojiPickerDisabled,hideEmojiPicker:e.hideEmojiPicker,allowAttachments:e.allowAttachments,recordingKey:e.recordingKey,className:e.className,authorChanged:e.authorChanged,createdAt:e.createdAt,threadId:e.threadId,fileKey:e.fileKey,editingExistingComment:e.editingExistingComment,scrollToBottom:e.replyContainerRef&&r,maintainSelectionOnFocus:e.maintainSelectionOnFocus,ariaLabel:e.authorNames?(0,s.t)("fullscreen.accessibility.reply_to_comment_with_authors",{username:(0,o.Yx)(e.authorNames)}):(0,s.t)("fullscreen.accessibility.reply_to_comment")});return a.createElement("div",{className:d.MP,ref:e.replyContainerRef},a.createElement("div",{className:d.i8},a.createElement(l.H8,{user:e.user||{}})),n)}},815549:(e,r,n)=>{n(411855),n(188507),n(943632),n(966712);var a=n(38580);n(776621),n(939863),n(662275),n(625651),n(396226),n(177505),n(29680),n(335682),n(99506),n(243987),n(300874),n(851363),n(887326),n(187882),n(454351),n(449731),n(362369),n(391993),(0,a.eU)(!1)},36127:(e,r,n)=>{n.d(r,{bK:()=>u,oZ:()=>m,r8:()=>l,uK:()=>d});var a=n(783145),i=n(38580),o=n(374626);let s=(0,i.eU)({}),l=(0,o.Iz)(e=>(0,i.eU)(r=>r(s)[e],(r,n,a)=>{n(s,r=>({...r,[e]:a}))}));(0,i.eU)(e=>Object.values(e(s)));let c=(0,i.eU)(!1),d=(0,i.eU)({autoScroll:!1});async function u(e,r,n,i){let{guid:u}=e;o.zl.set(d,e=>e.autoScroll?{...e,guid:u}:e),i||o.zl.set(c,!0),await function(e,r){let{guid:n,name:i}=e,s=.03*i.length;return new Promise(c=>{(0,a.i)(i.length,0,{onUpdate:a=>{!r.signal.aborted&&e.isAlive&&o.zl.set(l(n),{guid:n,boundingBox:e.absoluteBoundingBox,state:"deleting",name:i.slice(0,Math.floor(a))})},duration:s,ease:"linear",onComplete:c})})}(e,n),await function(e,r,n){let{guid:i}=e,s=.07*r.length;return new Promise(c=>{(0,a.i)(0,r.length,{onUpdate:a=>{!n.signal.aborted&&e.isAlive&&o.zl.set(l(i),{guid:i,boundingBox:e.absoluteBoundingBox,state:"writing",name:r.slice(0,Math.floor(a))})},duration:s,ease:"linear",onComplete:c})})}(e,r,n),l.remove(u),o.zl.set(s,e=>{let r={...e};return delete r[u],r}),i||o.zl.set(c,!1)}function m(){l.removeAll()}},112084:(e,r,n)=>{n.d(r,{W:()=>o});var a=n(38329),i=n(988022);function o(e,r,n,o){var s,l,c,d;let u=a.D.getState(),m=(s=r,l=e,c=n,d=a.D,{search_session_id:o,node_id:s,node_type:function(e,r){if(!e)return null;let n=r.getState().mirror.sceneGraph.get(e);return n?.type||null}(s,d),query_length:l?.length,contains_at_symbol:l?.includes("@"),result_row_index:c});(0,i.ds)("canvas_mention_search_cancelled",u.openFile?.key,u,m)}n(863670)},634951:(e,r,n)=>{n.d(r,{LL:()=>y,be:()=>b,k6:()=>T,xG:()=>I});var a=n(411855);n(563850);var i=n(414507),o=n(299321),s=n(275556),l=n(966712),c=n(776621),d=n(409430),u=n(604978),m=n(957385),p=n(616121);let h=Object.create(null);function _(e){return(0,u.w6)(e).catch(()=>null)}let g=new m.A,f=(0,l.ck)("cbbdc3ccc2f650369332a454328722aa11cbd78a");async function E({profileImageUrl:e,userName:r,userColor:n,noCircleOutline:a}){let o=500*window.devicePixelRatio,s=81.25*window.devicePixelRatio,[l,d]=await Promise.all([_({url:f,height:o,width:o}),e?_({url:e,height:o,width:o}):null]),m=(0,u.Dl)(o,o),h=m.getContext("2d");if(!l)return"";!function(...e){for(let r of e)if(r&&(!(r instanceof HTMLImageElement)||!r.src||!r.width||!r.height)){let e=r.outerHTML||Object.prototype.toString.call(r);(0,c.$D)(i.FigmaTeam.FIGJAM,Error(`Expected object to be a valid HTMLImageElement but it wasn't: '${e}'`))}}(l,d);try{a||h.drawImage(l,0,0,o,o)}catch(e){return v(l,e),""}if(h.arc(o/2,o/2,o/2-s,0,2*Math.PI,!0),h.clip(),d){let e=o-2*s;try{h.drawImage(d,s,s,e,e)}catch(e){return v(d,e),""}}else{if(!n||!r)return"";h.fillStyle=n,h.fillRect(0,0,o,o),h.textBaseline="middle",h.textAlign="center";let e=187.5*window.devicePixelRatio;h.font=`${e}px Inter`,h.fillStyle===p.$C?h.fillStyle=p.PN:h.fillStyle="white",h.fillText(r.substring(0,1).toUpperCase(),o/2,o/2+10*window.devicePixelRatio)}h.scale(window.devicePixelRatio,window.devicePixelRatio);let E=m.toDataURL("image/png");return g.set(E,e,r,n,a),E}function y(e,r,n,i){let[o,s]=(0,a.useState)(g.get(e,r,n,i)||"");return(0,a.useEffect)(()=>{if(!e&&!(r&&n)){s("");return}let a=!1,l=g.get(e,r,n,i);return l!==o&&(l?s(l):E({profileImageUrl:e,userName:r,userColor:n,noCircleOutline:i}).then(e=>{a||s(e)})),()=>{a=!0}},[e,r,n,i,o]),o}async function b(e,r){let n=await (0,d.T)(e,h);(0,c.Lo)("activateStampToolWithImageURL","setting stamp tool",{label:r,bytesLength:n?.length}),o.glU.activateStampTool(n,r)}async function I(e,r,n,a,i,l){let c=await (0,d.T)(e,h);(0,s.l7)(l,"drop-face",()=>o.glU.dropFaceOntoCanvas(c,"Face Stamp",r,n,a,i))}function T(e,r){if(e.image)return(0,l.ck)(e.image);if(e.imageFunc)return e.imageFunc(r);throw Error(`Invalid emoji ${e} has no image nor imageFunc`)}function v(e,r){if(r&&(0,c.$D)(i.FigmaTeam.FIGJAM,r),!e)return;let n=e.outerHTML||Object.prototype.toString.call(e);(0,c.$D)(i.FigmaTeam.FIGJAM,Error(`Expected object to be a valid HTMLImageElement but it wasn't: '${n}'`))}},782540:(e,r,n)=>{n.d(r,{n:()=>o});var a=n(145519),i=n(301922);let o=[{type:"REACTION",name:"r-fire",image:"d1e0d7ed5e1aa13e8854dbd88b9fd650377a02f2",position:2},{type:"REACTION",name:"r-surprised",image:"1429964104bceac90c5c8e731ce4cc50b27e2797",position:1},{type:"REACTION",name:"r-eyes",image:"ffd0635e8f9322352eff0c15411ac0b536b98d87",position:8},{type:"REACTION",name:"r-wave",image:"0606e9d967b5abb6d9a2853c2fff589f2ec2fc05",position:7},{type:"ACTION",name:"r-chat",image:"d1de3f6fe1f8ffa74d3db5203b2df761d0fed1cc",position:6,action:(e,r)=>{(0,i.q)().then(n=>{n||r(a.F6({position:e,source:"emoji_wheel_reactions"}))})}},{type:"REACTION",name:"r-sad",image:"78f60a21d2616c2a24c7645d8636dec855e48ffb",position:5},{type:"REACTION",name:"r-laugh",image:"a83de90bf34495081ce2e8bcaf28d1d2c16e5186",position:4},{type:"REACTION",name:"r-love",image:"ff5be810b821d264cc2c95f665d24a867c34e587",position:3}]},861802:(e,r,n)=>{n.d(r,{WJ:()=>m,hf:()=>d,sn:()=>o,tR:()=>u});var a=n(966712),i=n(939863);let o="s-heart";function s(e){return[{type:"STAMP",name:"s-thumbsUp",image:e.thumbsUp,position:2,label:"Thumbs up",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.thumbs_up")},{type:"STAMP",name:"s-plusOne",offset:.72,image:e.plusOne,position:1,label:"+1",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.plus_one")},{type:"STAMP",name:"s-star",image:e.star,position:8,label:"Star",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.star")},{type:"STAMP",name:"s-question",image:e.question,position:7,label:"Question",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.question")},{type:"STAMP",name:"s-thumbsDown",image:e.thumbsDown,position:6,label:"Thumbs down",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.thumbs_down")},{type:"STAMP",name:"s-dot",imageFunc:e.dots,position:5,label:"Dot",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.dot")},{type:"STAMP",name:"s-profile",offset:.73,imageFunc:e.profile,position:4,label:"Profile",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.profile")},{type:"STAMP",name:"s-heart",image:e.heart,position:3,label:"Heart",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.heart")}]}let l={F24E1E:"f5c62908951d5597fd78d43b466a590616ba2693","0FA958":"a80c699432955f63c3613761744dfb61758780ae",FFC700:"a9d0704b01ae94a42c00e495f58e169966099333","5551FF":"87a816dc22c9fe975e6cb531cc7f2b47ff66f26e",D27C2C:"a7115640741f347d4fec9f4f82bf88465e6081f4",848484:"1775b53401dbbb5bfb48ae9b00b650952e5c8d67",EBEBEB:"c3312ab90b95e13d91b5a826628708663e502ddc",667799:"27be94d8a31dc67f2fdf0bc0ed1cd2c7d6c48cba","007BE5":"4f73e22fc8d7e9d55bfb24dcc7b7d6201ca51fb3","9747FF":"d337617455a562b3a0859d87fac6d82f86d8d729",FF24BD:"19e369b3f6531ed8571b6fed7db7e2fe7b4d4517",F24822:"4c9a2a1f92768b87946ec3a4d9000f0fe99d760c",FFCD29:"13a81b40823bfed9e05f4b0eedab902453bf47b3","14AE5C":"fd086d9788aa1e5a4dd7c10436a59d5d51c6c063"},c={"s-heart":"421d20c98db007d377890189b093545f16498acc","s-thumbsDown":"0bda50cfaecc87b58d0a78e8a8768b55a9f67c03","s-star":"cbc8d70c16c1fcf0d8690429564495cce3ab11c0","s-thumbsUp":"5e39a5f28101ed8ca9d9e38275066867c47294e9","s-question":"75a4d8d5c7e5fc18ad3f76ce2c1166b68f9ec046","s-plusOne":"0d4a582f5dd156228c1443c9fd19a331ff8f087b"};function d(e){return s({heart:c["s-heart"],thumbsDown:c["s-thumbsDown"],star:c["s-star"],thumbsUp:c["s-thumbsUp"],question:c["s-question"],profile:()=>e,dots:e=>{let r=l[e]||l["667799"];return(0,a.ck)(r)},plusOne:c["s-plusOne"]})}let u=(0,a.ck)("2b2029d1eabf48358e208427103a2023435751dc"),m=s({heart:"cdb352553f6650801d744ab73fd416222f120bd6",thumbsDown:"1b9c978d009d03d1abececfe15edf721a7c14374",star:"a9c2008e62c6d5a4421a22cd960b5ca54fdbe93f",thumbsUp:"d7c56a0ef07da63ed9f641ab04637704a4744c74",question:"4fe56356e345e558e669ff6e369f0265ee0b7fe7",profile:()=>(0,a.ck)("cb417fb549d06a2fb42e182cddd2b94b1996b768"),dots:()=>u,plusOne:"96363e23778476978d264bfcbd286bc0cbafe6cd"})},970332:(e,r,n)=>{n(411855),n(629019),n(799569),n(946689),n(939863),n(175290),n(101505),n(672517),n(226055),n(833629),n(63666),n(936181),n(989326),n(275596)},173101:(e,r,n)=>{n(411855),n(188507),n(299321),n(931828);var a=n(356390);n(114716),n(309798),(0,n(479296).D)(()=>a.Y5.fromFullscreen)},600907:(e,r,n)=>{n(411855),n(188507),n(299321),n(931828);var a=n(356390);n(114716),n(309798),(0,n(479296).D)(()=>a.Y5.fromFullscreen)},469572:(e,r,n)=>{n.d(r,{a2:()=>l}),n(411855),n(188507);var a=n(297666),i=n(38580),o=n(374626);n(931828);let s={x:(0,i.eU)(void 0),y:(0,i.eU)(void 0),cornerRadius:(0,i.eU)(void 0),angle:(0,i.eU)(void 0),width:(0,i.eU)(void 0),height:(0,i.eU)(void 0),fontSize:(0,i.eU)(void 0),fontStyle:(0,i.eU)(void 0),fontFamily:(0,i.eU)(void 0),fillPaints:(0,i.eU)(void 0),strokePaints:(0,i.eU)(void 0),effects:(0,i.eU)(void 0)},l=(0,a.s)(e=>{let r=s[e];r&&o.zl.set(r,e=>!e)},200,!0)},381915:(e,r,n)=>{n(411855),n(893606)},824767:(e,r,n)=>{n.d(r,{Zk:()=>v,x0:()=>T}),n(411855);var a=n(414507),i=n(966712),o=n(374626),s=n(38580),l=n(711525),c=n(776621),d=n(30637),u=n(809831),m=n(502665);n(860178);var p=n(279453),h=n(859487);n(132572);var _=n(301819),g=n(982749);n(335218);var f=n(138334);let E=(0,o.E3)("frecencyHistory",{numItems:0,userIds:{}},{subscribeToChanges:!1},{debounceTime:1e3}),y=(0,s.eU)(e=>e(p.Fr3.Query({})));class b{constructor({json:e,setJson:r,userId:n,fullscreenEditorType:a}){this.MAX_ENTRIES=5e3,this.numItems=e.numItems,this.userIds=e.userIds,this.setJson=r,this.fullscreenEditorType=a??"none",this.userId=n??"anonymous",this.cachedActions=this.initActions(),this.cachedQueries=this.initQueries()}addUsage(e,r){let n=this.getActions();n.addUsage(e)&&this.incrementTotalItems();let a=this.getQueries();a.addUsage(r,e)&&this.incrementTotalItems(),this.userIds[this.userId]={...this.userIds[this.userId],[this.fullscreenEditorType]:{actions:n.serialize(),queries:a.serialize()}},this.numItems>this.MAX_ENTRIES&&this.prune(),this.save(),h.I.updateFrecencyHistory({actionKey:e,timestamp:Date.now(),editorType:this.fullscreenEditorType})}prune(){let e=Object.entries(this.userIds).flatMap(([e,r])=>Reflect.ownKeys(r).flatMap(n=>{let a=r[n];if(!a)return[];let{actions:i,queries:o}=a,s=Object.entries(i).flatMap(([r,{timestamps:a}])=>({userId:e,editorType:n,action:r,timestamp:a[0]})),l=Object.entries(o).flatMap(([r,a])=>Object.entries(a).flatMap(([a,{timestamps:i}])=>({userId:e,editorType:n,action:a,query:r,timestamp:i[0]})));return s.concat(l)}));e.sort((e,r)=>e.timestamp-r.timestamp);let r=this.MAX_ENTRIES/2;for(let n=0;n<r;n++){let{userId:r,editorType:a,action:i,query:o}=e[n],s=this.userIds[r][a];s&&(void 0!==o?delete s.queries[o][i]:delete s.actions[i],this.userIds[r][a]=s,this.numItems-=1)}}incrementTotalItems(){this.numItems+=1}initActions(){let e=this.userIds[this.userId]?.[this.fullscreenEditorType]?.actions??{};return new _.l(e)}initQueries(){let e=this.userIds[this.userId]?.[this.fullscreenEditorType]?.queries??{};return new g.B(e)}getActions(){return this.cachedActions}getQueries(){return this.cachedQueries}save(){try{this.setJson({numItems:this.numItems,userIds:this.userIds}),I=this}catch(e){(0,c.x1)("error","Failed to save frecency data",e,{reportAsSentryError:!0})}}setMaxEntriesForTesting(e){(0,d.Lg)()&&(this.MAX_ENTRIES=e)}}let I=null;function T(){let e=o.zl.get(m.N).data,r=o.zl.get(u.u8);I&&I.userId===e&&I.fullscreenEditorType===r||(I=new b({json:o.zl.get(E),setJson:e=>o.zl.set(E,e),userId:e,fullscreenEditorType:r}));let n=function(e,r){if(!e.data)return null;let n=(0,l.oA)(e.data.actionsHistory);return n&&n.frecencyHistory?function(e,r){let n=function(e){let r;try{r=JSON.parse(e)}catch(r){return(0,c.$D)(a.FigmaTeam.AI_FOR_PRODUCTION,Error(`Invalid JSON value for frecency history from DB: ${e}`),{}),null}let n=f.SR.safeParse(r);if(!n.success)return(0,c.$D)(a.FigmaTeam.AI_FOR_PRODUCTION,Error(`Invalid format for frecency history object from DB: ${e}`),{}),null;let i={};for(let[e,r]of Object.entries(n.data)){let n=Number(e);if(!f.B3.safeParse(n).success)return(0,c.$D)(a.FigmaTeam.AI_FOR_PRODUCTION,Error(`Invalid key in frecency history object from DB: ${e}`),{}),null;i[n]=r}return i}(e);if(n&&r){let e=n[r]?.actions;if(e)return new _.l(e)}return null}(n.frecencyHistory,r):null}(o.zl.get(y),o.zl.get(u.u8));return{actions:(0,i.kc)().qa_recently_used_db_read&&n?n:I.getActions(),queries:I.getQueries()}}function v(){o.zl.set(E,{numItems:0,userIds:{}}),I=null}},887326:(e,r,n)=>{var a=n(411855),i=n(188507),o=n(299321),s=n(275556),l=n(627776),c=n(517333),d=n(966712),u=n(886653),m=n(153234),p=n(607899),h=n(256975),_=n(738269);n(103907);var g=n(259927),f=n(324597),E=n(989324),y=n(483990);n(325469);var b=n(672517);n(756085),n(261607),n(12493);var I=n(875847),T=n(728325),v=n(283942),S=n(122983),w=n(369870);n(227944),n(678340);var A=n(428467),N=n(707465);n(284321);var C=n(239671),L=n(279145),O=n(143678),R=n(507956),P=n(728587);n(47506);var D=n(374626),k=n(572206),M=n(114950),F=n(371399),x=n(760834),U=n(662275),B=n(237870),V=n(746806),G=n(406270);(0,B.Ju)(function(){let e=(0,i.wA)(),r=a.useCallback(()=>{e(U.AS())},[e]),[n,o]=(0,D.fp)(M.c),[s,l]=(0,D.fp)(x.MW),[c,d]=(0,D.fp)(F.O);return a.createElement(V.vx,{title:"Code Connect Debug Settings",headerSize:"small",initialPosition:new k.Mi(0,0),onClose:r},a.createElement("div",{className:G.kL},a.createElement("div",{className:G.zN},a.createElement("input",{type:"checkbox",onChange:e=>o(e.target.checked),checked:n}),a.createElement("span",{className:G.Pf},"Debugger break in template execution")),a.createElement("div",{className:G.zN},a.createElement("input",{type:"checkbox",onChange:e=>l(e.target.checked),checked:s}),a.createElement("span",{className:G.Pf},"Log Code Connect document")),a.createElement("div",{className:G.zN},a.createElement("input",{type:"checkbox",onChange:e=>d(e.target.checked),checked:c}),a.createElement("span",{className:G.Pf},"Log JS before execution"))))},"CodeConnectDebugModal"),n(931828);var H=n(335682);n(309798),n(99506);var W=n(848661),K=n(498606),Y=n(218973),$=n(984871),j=n(659350);function z(e){let[r,n]=a.useState(e.initialValue),o=a.useCallback(e=>{(0,W.gl)(e)||n(e.valueOf())},[n]),s=(0,i.wA)();return a.useEffect(()=>{(0,$.uw)({[e.configPropertyName]:r})},[r,e.configPropertyName]),a.createElement(Y.Ht,{className:j.hF,"data-tooltip-type":K.Ib.TEXT,min:e.minVal,max:e.maxVal,bigNudgeAmount:e.bigNudgeAmount,smallNudgeAmount:e.smallNudgeAmount,"data-tooltip":e.propertyDescription,dispatch:s,value:r,onValueChange:o},a.createElement("span",{className:j.Pf},e.displayName))}(0,B.Ju)(function(){let e=(0,i.wA)(),r=a.useCallback(()=>{e(U.AS())},[e]);return a.createElement(V.vx,{title:"Comments Debug Settings",headerSize:"small",initialPosition:new k.Mi(0,0),onClose:r},a.createElement("div",{className:j.kL,onMouseDown:e=>{e.stopPropagation()}},a.createElement(z,{configPropertyName:"minZoomPercentage",initialValue:$.i$.minZoomPercentage,displayName:"Clustering Zoom Level Threshold",propertyDescription:"The zoom level threshold at which we will no longer apply clustering",minVal:1,maxVal:25600,bigNudgeAmount:5,smallNudgeAmount:.1}),a.createElement(z,{configPropertyName:"zoomScaleOverlap",initialValue:$.i$.zoomScaleOverlap,displayName:"Pin Overlap",propertyDescription:"The base number of pixels we check for overlapping pins when clustering, this value is multiplied by the current zoomScale to compute bounding box",minVal:1,maxVal:2e4,bigNudgeAmount:100,smallNudgeAmount:10}),a.createElement(z,{configPropertyName:"clusterClickResultViewportPercentage",initialValue:$.i$.clusterClickResultViewportPercentage,displayName:"Cluster Click Result Viewport Percentage",propertyDescription:"After a cluster click, one of the pins in the cluster will be positioned this percentage between the center of the viewport and the edge of the viewport. However, we will always zoom in far enough to break the cluster, even if one of the pins ends up being positioned farther away than this percentage.",minVal:1,maxVal:100,bigNudgeAmount:5,smallNudgeAmount:1}),a.createElement(z,{configPropertyName:"rebuildClustersZoomDelay",initialValue:$.i$.rebuildClustersZoomDelay,displayName:"Rebuild Cluster User Zoom Delay",propertyDescription:"Delay in ms that occurs between a zoomScale change and the clusters rebuilding",minVal:0,maxVal:1e4,bigNudgeAmount:100,smallNudgeAmount:10})))},"CommentDebugSettingsModal"),n(965626),n(889185);var q=n(27087),X=n(973131),J=n(585878),Z=n(283339);class Q extends Error{}async function ee({dispatch:e,fileKey:r,log:n=()=>{}}){try{n("Generating file version...");let a=(await X.m(r,"Exported to ML account","",e,!0))?.id;if(void 0===a)throw Error("undefined versionId");n(`Exporting file version ${a}...`);let{meta:{run_key:i}}=(await q.Ay.post(`/api/ml/export/file_version/${a}`)).data;n(`Waiting for run ${i}...`);for(let e=30;e>=0;e--){await new Promise(e=>setTimeout(e,1e3));let{meta:{ready:r,s3_uri:a}}=(await (0,q.Ay)({url:`/api/ml/export/status/${encodeURIComponent(i)}`})).data;if(r){n(`Export manifest is ready at ${a}`);break}if(0===e){n("Timed out!");return}}n("Succeeded!")}catch(e){if(e instanceof Q)return;n("Failed!"),n(`${e}`)}}(0,B.Ju)(function(){let e=(0,i.wA)(),r=a.useCallback(()=>{e(U.AS())},[e]),[n,o]=a.useState([]),s=(0,H.tS)();return a.useEffect(()=>{let n=!1,a=e=>{if(n)throw new Q;o(r=>r.concat([e]))};return null===s?a("No open file"):ee({dispatch:e,fileKey:s,log:a}),()=>{n=!0,r()}},[r,e,s]),a.createElement(J.XV,{title:"ML Export",headerSize:"large",minWidth:300,onClose:r},a.createElement("div",{className:Z.k},n.join("\n")))},"MLExportModal");var et=n(193948);let er="preferences-menu",en=(0,S.ck)();class ea extends m.o6{constructor(){super(...arguments),this.multilevelDropdownRef=e=>{this.multilevelDropdown=e},this.onKeyDown=e=>{(0,v.jr)(e,v.W0.NO)},this.selectPreferencesMenu=()=>{this.multilevelDropdown&&this.multilevelDropdown.setActiveItemPath(this.getPathToPreferences())},this.getPathToPreferences=()=>[(0,y.A)(er)]}componentDidUpdate(e,r){if(super.componentDidUpdate(e,r),this.props.selectionToUpdate&&this.props.selectionToUpdate===o.m7W.PREFERENCES){let e=this.multilevelDropdown&&this.multilevelDropdown.getActiveItemAtDepth(0);!e||(0,f.k$)(e)||(0,f.gN)(e)||(0,f.id)(e)||!e.name||e.name!==er?(this.selectPreferencesMenu(),this.props.dispatch(_.ho({type:L.pi,data:{selectionToUpdate:null}}))):this.props.dispatch(_.oB())}}menuItems(){return(0,E.p)({fileMenuArgs:{branchingActionsStatus:this.props.branchingActionsStatus,saveAsState:this.props.saveAsState,topLevelMode:this.props.appModel.topLevelMode,unreadCommentCount:this.props.unreadCommentCount,isOrgMember:this.props.isOrgMember,shouldShowSlideConversionEntrypoint:!1},pluginAndWidgetMenuArgs:this.props.pluginAndWidgetMenuArgs,additionalDebugItems:this.props.debugMenuItems,theme:this.props.theme,backToFileArgs:{shouldShowBackToFiles:(!en||en&&(0,w.MP)()&&!!(0,d.kc)().integ_zoom_allow_file_switching)&&!c.eD&&!(0,l.ce)(),isDisabled:!this.props.userStateLoaded},zoomArgs:{canZoomOut:this.props.canZoomOut,canZoomIn:this.props.canZoomIn},publishingModalArgs:{isPublishingModalDisabled:this.props.isPublishingModalDisabled}})}render(){let e=this.props.positionOnChevron&&this.props.chevronRef?.current?.getBoundingClientRect()||null;return a.createElement("div",{className:`${g.Dm}`},a.createElement(ei,{recordingKey:"mainMenu",ref:this.multilevelDropdownRef,menuItems:this.menuItems(),onKeyDown:this.onKeyDown,controlledByID:this.props.controlledByID,"aria-labelledby":this.props["aria-labelledby"],activatePathOnMount:this.props.dropdown.data.togglePreferences?this.getPathToPreferences():void 0,showPoint:!this.props.isUI3&&this.props.appModel.showUi,targetRect:e??(this.props.appModel.showUi?this.props.dropdown.data.targetRect:{top:0,left:0}),alwaysShowCheckMarkOffset:!0,allowCodegenOptions:this.props.selectedView.editorType===C.nT.Design,lean:this.props.isUI3?"right":void 0,...this.props}))}}ea.displayName="FullscreenMainMenu",(0,i.Ng)((e,r)=>{let n={view:"recentsAndSharing"},a=e.openFile;a&&a.folderId&&(0,I.N5)(e.folders,a.folderId)&&(n={view:"folder",folderId:a.folderId});let i=e.selectedView;return{appModel:e.mirror.appModel,userStateLoaded:e.userStateLoaded,selectedView:i,recentlyUsedPlugins:r.recentlyUsedPlugins,backToFilesHref:(0,N.Np)(e,n),saveAsState:e.saveAsState,dropdown:r.dropdown,branchingActionsStatus:r.branchingActionsStatus,memoryWarningLevel:r.memoryWarningLevel,debugMenuItems:r.debugMenuItems,selectionToUpdate:e.dropdownShown?.data?.selectionToUpdate,theme:e.theme.themePreference,unreadCommentCount:r.unreadCommentCount,canZoomIn:r.canZoomIn,canZoomOut:r.canZoomOut,isOrgMember:(0,A.canMemberOrg)(e.currentUserOrgId,e),isLimitedDevMode:(0,R.$A)(e.selectedView)&&!(0,h.tn)(e),isPublishingModalDisabled:r.isPublishingModalDisabled}})(ea);class ei extends a.Component{constructor(){super(...arguments),this.multilevelDropdownRef=e=>{this.multilevelDropdown=e},this.getActiveItemAtDepth=e=>this.multilevelDropdown?this.multilevelDropdown.getActiveItemAtDepth(e):null,this.setActiveItemPath=e=>{this.multilevelDropdown&&this.multilevelDropdown.setActiveItemPath(e)},this.onSelectItem=(e,r)=>{s.l7.user(`fullscreen-menu-${e.name??e.action??"unknown"}`,()=>{if(e.callback&&e.callback((0,f.Dz)(e),e.args,this.props.dispatch,r),e.action&&!e.input){let n=e.action;e.loadingIndicatorString?this.props.dispatch(p.n.set({message:e.loadingIndicatorString,callback:()=>{T.VU.get(n,e.source??"menu",e.args)(r)}})):T.VU.get(n,e.source??"menu",e.args)(r)}})},this.transformMenuItems=(0,u.xx)(e=>(0,et.jv)(e,{appModel:this.props.appModel,selectedView:this.props.selectedView,sceneGraph:this.props.sceneGraph,sceneGraphSelection:this.props.sceneGraphSelection,removeDisabledItems:this.props.removeDisabledItems,alwaysShowCheckMarkOffset:this.props.alwaysShowCheckMarkOffset,isLimitedDevMode:this.props.isLimitedDevMode}))}componentDidMount(){this.closeIfNoItems()}componentDidUpdate(){this.closeIfNoItems()}componentWillUnmount(){this.props.controlledByID&&document.getElementById(this.props.controlledByID)?.focus()}hasMenuValidItems(){let e=this.transformMenuItems(this.props.menuItems);return e.length>0&&e.some(e=>!e.separator&&(this.props.allowDisabledOnly||!e.disabled))}closeIfNoItems(){this.hasMenuValidItems()||this.props.dispatch(_.oB())}render(){let e=this.transformMenuItems(this.props.menuItems);return this.hasMenuValidItems()?a.createElement(b.fu,{name:O.e0.EDITOR_MENU},a.createElement(P.j,{ref:this.multilevelDropdownRef,items:e,onKeyDown:this.props.onKeyDown,onSelectItem:this.onSelectItem,parentRect:this.props.targetRect,activatePathOnMount:this.props.activatePathOnMount,lean:this.props.lean,...this.props})):null}}ei.displayName="FullscreenMultilevelDropdown"},176857:(e,r,n)=>{n.d(r,{ou:()=>E});var a=n(36867),i=n(38329),o=n(966712),s=n(218549),l=n(829486),c=n(419527),d=n(335218);class u{constructor(e,r){this.factors=e,this.opts=r;let n=e.reduce((e,r)=>e+r.weight,0);if(1!==n)throw Error(`Total weight must be 1, but was ${n}`)}scoreFactor(e,r,n){return n.normalizedScore(e,r,this.opts)*n.weight}score(e,r){return this.factors.reduce((n,a)=>{let i=a.normalizedScore(e,r,this.opts);if(i<0||i>1)throw Error(`Normalized score for '${a.name}' must be between 0 and 1, but was ${i}`);return n+this.scoreFactor(e,r,a)},0)}sort(e,r,n){return this.score(e,r)>this.score(e,n)?-1:1}debugData(e,r){let n=this.score(e,r),a=`- Total Score: ${n.toFixed(2)}`;return{score:n,details:["Weighted sort (w=weight, s=score):",a,...this.factors.sort((n,a)=>this.scoreFactor(e,r,a)-this.scoreFactor(e,r,n)).map(n=>{let a=n.normalizedScore(e,r,this.opts),i=n.debugInfo&&n.debugInfo(e,r,this.opts)||"";return`- ${n.name}: w=${n.weight} x s=${a.toFixed(2)} = ${this.scoreFactor(e,r,n).toFixed(2)} ${i}`})].join("\n")}}}let m=new s.q(1e3);function p(e,r,n){let i=r.fullscreenMenuAction.stringMatchedAgainst,o=r.fullscreenMenuAction.stringMatchScore;if(!i||!o)return 0;let s=m.get(i);if(!s){let e=new a.A(i,n.acceptsUnicode).matchAgainstText(i);m.set(i,e?.score??1),s=e?.score??1}let l=Math.max(s,o);return o/l}function h(e,r){let n=r.fullscreenMenuAction.substringMatchedAgainst,a=r.fullscreenMenuAction.substringMatchScore;if(!n||!a)return 0;let i=new l.dU(n).perfectScore();return 0===i?0:a/i}let _={normalizedScore:(e,r,n)=>Math.max(p(e,r,n),h(e,r)),weight:.4,name:"String match",debugInfo(e,r,n){let a=p(e,r,n),i=h(e,r);return a>0||i>0?`Fuzzy match: ${a.toFixed(2)}, Synonym match: ${i.toFixed(2)}`:""}},g={normalizedScore:(e,r)=>r.fullscreenMenuAction.tags?.includes(c.$.AI)?1:0,weight:.1,name:"isAI"},f={normalizedScore:(e,r)=>r.fullscreenMenuAction.disabled?0:1,weight:.3,name:"isEnabled"};function E({actions:e,acceptsUnicode:r="ja"===i.D.getState().user?.locale||!!(0,o.kc)().fuzzy_escape_regexp}){return new u([_,{normalizedScore(r,n){var a;let i=(0,d.n)(n.fullscreenMenuAction);return(a=e.data(i)?.score()??0)/(a+1e3)},weight:.2,name:"Action Frecency"},g,f],{acceptsUnicode:r})}},631378:(e,r,n)=>{n.d(r,{x:()=>y});var a=n(67151),i=n(220848),o=n.n(i),s=n(36867),l=n(966712),c=n(829486),d=n(324597),u=n(586211),m=n(279145),p=n(169006),h=n(132572),_=n(824767),g=n(193948),f=n(189431),E=n(176857);class y{constructor(e,r,n,a){for(let i of(this.searchMap={},this.searchMapKeys=[],this.includeDisabled=!1,this.acceptsUnicode=!1,this.queryStringMap={},this.includeDisabled=!!(a&&a.includeDisabled),this.acceptsUnicode=!!(a&&a.acceptsUnicode),n.forEach(n=>this.addFigmaMenuItemsToSearchMap(e,r,n)),this.searchMapKeys=Object.keys(this.searchMap),this.searchMapKeys)){let e=this.searchMap[i],r=e.queryString?`${e.queryString} ${i}`:i;this.queryStringMap[r]=e}}isDisabled(e,r){return r.disabled?r.disabled:!(r.name||(0,m.Yh)(e,r.action)||r.quickAction?.alwaysEnabled)}addFigmaMenuItemsToSearchMap(e,r,n){if(!n||(0,d.k$)(n)||(0,d.gN)(n)||(0,d.id)(n)||!(0,g.UN)(n,{isDesktopMenu:!1,isReadOnly:e.isReadOnly,isSearching:!0,selectedView:r}))return;let i="children"in n;if(!(0,d._o)(n)||i||n.hideForQuickCommand||this._addToIndexInternal(n),"plugins-menu"!==n.name&&"widgets-menu"!==n.name&&i)for(let i of((0,a.KF)(null!=n.children,"this should be the type of menu groups that has FullscreenMenuItem as children"),n.children))this.addFigmaMenuItemsToSearchMap(e,r,i)}_addToIndexInternal(e){let{itemDisplayText:r,searchItem:n}=function(e){let r=(0,p.EG)(e),n={fullscreenMenuAction:e,queryString:"",searchKey:r};if("plugins-menu-item"===e.name){let r=e.extensionSearchString||"";n.searchKey=r}return e.isRepairCommand&&(0,l.kc)().internal_only_debug_tools&&!(0,h.h8)()&&(n.queryString="repair"),e.searchSynonyms&&!(0,h.h8)()&&(n.queryString=[n.queryString,...e.searchSynonyms].join(" ")),{itemDisplayText:r,searchItem:n}}(e);this.searchMap[r]=n}getItem(e,r){if(!(r in this.searchMap))return;let n={...this.searchMap[r].fullscreenMenuAction};return n.disabled=this.isDisabled(e,n),n}_buildSearchResult(e,r,n,a){let i={...r},o={...i.fullscreenMenuAction};return o.stringMatchedAgainst=n?.text||"",o.substringMatchScore=a?.score||0,o.substringMatchedAgainst=a?.text||"",o.stringMatchScore=this._getStringMatchScore(o,n),o.popularityScore=(0,u.a)(o.action),o.disabled=this.isDisabled(e,o),{...i,fullscreenMenuAction:o}}_getStringMatchScore(e,r){return void 0!==e.isLowPriorityMatch&&e.isLowPriorityMatch?0:r?.score||0}_searchByFuzzyMatchAndSubstringMatch(e,r){if(!r)return[];let n=new s.A(r,this.acceptsUnicode);if(!n.isValidQuery())return[];let a=new c.dU(r),i=[];for(let[r,s]of Object.entries(this.queryStringMap)){let l=n.matchAgainstText(r),d=l?.score||0,u=[];for(let e of(u.push(a.matchAgainstText(r,c.cT.VISIBLE)),s.fullscreenMenuAction.searchSynonyms||[])){let r=a.matchAgainstText(e,c.cT.HIDDEN);u.push(r)}let m=o()(u,e=>e.score),p=m?.score||0;(d>0||p>0)&&i.push(this._buildSearchResult(e,s,l,m))}return i}_searchByFuzzyMatch(e,r){let n=new s.A(r,this.acceptsUnicode);if(!n.isValidQuery())return[];let a=[],i=n.matchAgainst(Object.keys(this.queryStringMap));if(i.length)for(let r of i){if((0,h.h8)()&&r.score<1)continue;let n={...this.queryStringMap[r.text]};a.push(this._buildSearchResult(e,n,r))}return a}_searchForSearchItem(e,r){if(!r)return[];let n=[];n=(0,h.h8)()?this._searchByFuzzyMatchAndSubstringMatch(e,r):this._searchByFuzzyMatch(e,r);let a=(0,h.h8)()?(0,E.ou)({...(0,_.x0)(),acceptsUnicode:this.acceptsUnicode}):f.r;return n=n.sort((e,n)=>a.sort(r,e,n)),this.includeDisabled||(n=n.filter(e=>!e.fullscreenMenuAction.disabled)),n}search(e,r){return this._searchForSearchItem(e,r).map(e=>e.fullscreenMenuAction)}searchIncludeKey(e,r){return this._searchForSearchItem(e,r).map(e=>[e.searchKey,e.fullscreenMenuAction])}list(e){let r=this.searchMapKeys.map(r=>{let n={...this.searchMap[r].fullscreenMenuAction};return n.popularityScore=(0,u.a)(n.action),n.disabled=this.isDisabled(e,n),n});return r.sort((e,r)=>(r.popularityScore||0)-(e.popularityScore||0)),r}map(e){let r={};return this.searchMapKeys.forEach(n=>{let a={...this.searchMap[n].fullscreenMenuAction};a.popularityScore=(0,u.a)(a.action),a.disabled=this.isDisabled(e,a),r[a.name||a.action||n]=a}),r}}},1688:(e,r,n)=>{n.d(r,{$O:()=>s,Z8:()=>o}),n(188507),n(414507),n(38329),n(966712);var a=n(38580),i=n(374626);n(711525),n(752553),n(776621),n(986270),n(756085),n(720289),n(335682),n(860178),n(279453),n(215822),n(945020),n(376485);let o=(0,a.eU)([]);function s(){return i.zl.get(o)}},354235:(e,r,n)=>{n.d(r,{d:()=>F}),n(206354);var a=n(411855),i=n(109388),o=n(188507),s=n(243742),l=n(299321),c=n(880934),d=n(904669),u=n(776250),m=n(91408),p=n(886653),h=n(572206),_=n(809831),g=n(356390),f=n(617453),E=n(373119),y=n(843495),b=n(99506),I=n(100197),T=n(651963),v=n(433861),S=n(837746);let w=new Set(["DOCUMENT","CANVAS","NONE"]),A=(0,m.jz)(S.y9S),N=(0,m.jz)(S.IuL),C=(0,m.jz)(S.LQy),L=(0,m.jz)(S.MJh),O=(e,r,n)=>n?e===b._Y.WHITEBOARD?r?C:N:r?L:0:0,R=(0,p.xx)((e,r,n,a,i)=>{let{x:o,y:s,offsetX:l,offsetY:c,width:d,height:u,zoomScale:m}=e;r&&(o+=A,s+=A,l+=A/m/2,c+=A/m/2,d-=A,u-=A,d=Math.max(d,0),u=Math.max(u,0));let p=O(a,i,n);return u-=p,u=Math.max(u,1),c-=p/m/2,{...e,x:o,y:s,offsetX:l,offsetY:c,width:d,height:u}}),P=e=>{let r=e.split(",");if(r.length)return r[0].replace(/[\[\]\s]/g,"")},D=e=>e.replace(/[\[\]\s]/g,"").split(",");function k(e,r,n){let a;let i=l.glU.getActiveCommentAnchorData();a=n&&i&&i.stablePath!==c.x7&&i.stablePath.length>0?i.stablePath:l.glU.getCommentAnchorDataAtPosition(e.x,e.y).stablePath;let o={canvasPosition:e,pageId:r,viewport:g.Y5.getViewportInfo(),createdIn:window.FigmaMobile?"mobileViewer":"fullscreen"};if(null==a||a===c.x7)return o;let s=l.Egt.getBoundsForStablePath(a);if(!s&&n&&((0,u.sx)("Comment stablePathBounds invalid",{usingActiveNode:!0},{forwardToDatadog:!0}),s=l.Egt.getBoundsForStablePath(a)),!s)return((0,u.sx)("Comment stablePathBounds invalid",{usingActiveNode:!1},{forwardToDatadog:!0}),r)?{...o,nodeId:r,inFrame:!1,stablePath:[r]}:o;let d={x:s.x,y:s.y},m=h.Mi.subtract(e,d),p=P(a);return{...o,nodeId:p,nodeOffset:m,inFrame:r!==p,stablePath:D(a)}}function M(e){let r=(0,I.J2)((0,f.UK)().renderRulers),n=(0,o.d4)(e=>e.mirror.appModel.showUi),u=(0,_.lg)(),m=a.useRef(g.Y5.getViewportInfo()),[p,h]=a.useState(g.Y5.getViewportInfo()),E="ui3"===(0,s.DP)().version;!function(e){let r=(0,o.d4)(e=>"prototype"===e.selectedView.view||"communityHub"===e.selectedView.view);a.useEffect(()=>{!r&&g.Y5.isReady()&&(e(g.Y5.getViewportInfo()),(0,T.H)())},[e,r]),a.useEffect(()=>{let r=r=>{(0,i.flushSync)(()=>{e(r)})};return g.Y5.viewport.on("onSetViewport",r),()=>{g.Y5.viewport.removeListener("onSetViewport",r)}},[e])}(a.useCallback(e=>{m.current=e,h(e)},[h]));let b=a.useMemo(()=>({getViewportInfo:()=>R(m.current,r,n,u,E),getRawViewportInfo:()=>m.current,getCommentsWrapperOffset:e=>({x:0,y:1}),setCanvasSpaceCenter:e=>l.glU.setCanvasSpaceCenter(e.x,e.y),setZoomScale:(e,r)=>l.glU.setCanvasZoomScale(r),setHovering:e=>{if(!e){(0,y.Uc)(c.AD);return}let r=l.glU.getCommentAnchorDataAtPosition(e.x,e.y).stablePath,n=r?(0,d.UN)().getFromStablePath(D(r)):null;n&&!w.has(n.type)?(0,y.Uc)(n.guid):(0,y.Uc)(c.AD)},setCurrentPageIdAsync:async e=>await (0,d.UN)().setCurrentPageFromNodeAsync(e),pageIdForNodeId:e=>l.glU.getPageIdFromNode(e),getCommentDestinationForCanvasPosition:k,getValidCommentsRect:()=>null}),[r,n,u,E]),S=a.useMemo(()=>new v.f5(b,{...v.Pe,isGetViewportAtomic:!0}),[b]);return a.createElement(v.kw.Provider,{value:S},a.createElement(v.aF,{latestViewport:p},e.children))}function F(e){return(0,E.q)()?a.createElement(M,null,e.children):a.createElement(a.Fragment,null,e.children)}},286723:(e,r,n)=>{n.d(r,{DS:()=>G,Qp:()=>Y,R$:()=>K,WD:()=>$,_W:()=>F,aF:()=>H,kh:()=>M,ob:()=>k,q0:()=>x,r1:()=>U,t$:()=>B});var a=n(411855),i=n(188507);n(234352);var o=n(414507),s=n(299321),l=n(904669),c=n(203264),d=n(776250),u=n(91408),m=n(320063);n(966712);var p=n(374626),h=n(38580),_=n(915440),g=n(711525),f=n(776621),E=n(411751),y=n(950997),b=n(493323),I=n(939863),T=n(413145),v=n(970516),S=n(335682),w=n(99506),A=n(279453),N=n(540019),C=n(694517),L=n(800876),O=n(610267),R=n(585878),P=n(930269),D=n(323761);let k={alwaysPan:!0,maxScale:1},M={alwaysNavToSimilarViewport:!0},F=300,x=.5,U=4;function B(e,r){let n=(0,i.d4)(e=>e.openFile?.key),a=(0,i.d4)(e=>e.mirror.appModel.currentPage),o=r??a,s=(0,i.d4)(e=>e.fileVersion);return!!n&&!!o&&!!e&&(0,C.cn)(n,o,e,(0,O.N)(s))===p.zl.get(C.tP)}L.mg.COMPARE_THUMBNAIL;let V=(0,h.eU)("");function G(e){let r=new l.qo(s.juq.LIVE_FILE),n=(0,c.ei)(e,!1,r),u=n?.createdAt||null,h=u?new Date(u).toISOString():void 0,E=n?.lastEditedAt||null,y=E?new Date(E&&E%6e4==0&&E<17061264e5?E+6e4:E).toISOString():void 0,b=c.E1()?.toISOString(),I=(0,i.d4)(e=>"fullscreen"===e.selectedView.view&&e.selectedView.filterStatusVersions),v=function(e){let r=(0,S.tS)(),n=function(e){let r=(0,S.q5)(),n=r?.key,i=(0,_.Rs)(A.WND,{nodeId:e,fileKey:n??""},{enabled:!!n&&!!e}),[s,l]=(0,p.fp)(V);return(0,m.h)(()=>l("")),a.useMemo(()=>{if("loaded"===i.status){let r=i.data.file;if(r.status===g.tT.Error)return(0,f.$D)(o.FigmaTeam.DEVELOPER_TOOLS,Error("[Dev mode activity] Error fetching activity log: File error = "+r.error)),null;let n=r.data?.devModeActivity;if(!r.data||!n||0===n.length)return[];let a=n.filter(e=>e.activityType===w.o6.STATUS_CHANGE).sort((e,r)=>r.timestamp.getTime()-e.timestamp.getTime()),c=`${e} - ${a.length}`;return e&&c!==s&&(l(c),(0,d.sx)("dev_mode.activity.fetch_activity_log",{numEntries:a.length},{forwardToDatadog:!0})),a}return"errors"===i.status?((0,f.$D)(o.FigmaTeam.DEVELOPER_TOOLS,Error("[Dev mode activity] Error fetching activity log: "+JSON.stringify(i.errors))),null):"loading"===i.status?"loading":null},[i,s,e,l])}(e??""),i=e?("loading"===n?null:n)?.map(e=>e.version?.id).filter(T.t):void 0,s=(0,C.kT)({fileKey:r,pageSize:200,versionIds:i}),[l]=(0,N.IT)(s,{enabled:!!r});return a.useEffect(()=>{"errors"===l.status&&(0,f.$D)(o.FigmaTeam.FEEDBACK,Error(`Version fetch in CC error: ${l.errors}`))},[l.status]),{versions:l.data||[],requestStatus:"loading"===n?"loading":l.status}}(I?e:void 0),L=a.useMemo(()=>I?v.versions:function(e,r,n,a){let i=[],o=!1;function s(){if(i.length>0){let e=i[i.length-1];e.frameCreated=!0,e.frameEdited=void 0}}for(let l of e){let e={...l};if(e.canvas_url&&(!o&&a&&e.created_at&&e.created_at<a&&(o=!0,e.lastViewed=!0),!r||!(e.edited_at>r))){if(n&&e.edited_at<n)return s(),i;i.push(e)}}return s(),i}(v.versions,y,h,b),[v.versions,y,h,b,I]),{requestStatus:O}=v;return{versions:L,versionsQueryLoaded:"loaded"===O||"disabled"===O}}function H({title:e,onClose:r,children:n}){let i=(0,u.jz)(P.compareChangesModalWidth);return a.createElement(R.XV,{title:e,fixedCenter:!0,disableClickOutsideToHide:!0,onClose:r,headerClassName:D.wx,containerClassName:D.ik,maxWidth:i,innerContainerClassName:D.Hb,focus:!0},n)}function W(e){return!!e&&e.hasOwnProperty("getImage")}function K(e){let{view:r,opacity:n,Overlay:i,hideNoImageText:o,header:s}=e,l=()=>void 0!==n?{opacity:n}:{},c=a.useMemo(()=>W(e.image)?e.image:e.image&&{data:e.image.image,width:e.image.width,height:e.image.height,scale:e.image.scale||U},[e]);return a.createElement("div",{className:r===E.Ss.SIDE_BY_SIDE?D.KJ:D.DF},!!s&&a.createElement("div",{className:D.Lg},s),!c&&a.createElement("div",{className:D.$0},!o&&(0,I.tx)("collaboration.feedback.compare_changes_modal.no_image_found")),W(e.image)?a.createElement(y.Nf,{className:D.Sl,style:{...l()},image:c,Overlay:i}):c&&a.createElement(y.ec,{className:D.Sl,style:{...l()},image:c,Overlay:i}))}function Y(){return a.createElement("div",{className:D.GE},a.createElement(b.qc,null))}function $(e,r){let n=e?.toString();n&&r(v.lW({stringToCopy:n}))}},415702:(e,r,n)=>{n.d(r,{xX:()=>l,$_:()=>c});var a=n(411855);n(188507),n(299321),n(776250);var i=n(181912);n(966712),n(493323),n(163023),n(46481);var o=n(939863);n(694517),n(498606);var s=n(928491);function l(e,r=!1){let n=(0,i.A)(new Date),a=(0,i.A)(e);return a.isSame(n,"day")?(0,o.t)("collaboration.feedback.time_hour_minutes",{time:a.toDate()}):a.isSame(n,"year")?(0,o.t)("collaboration.feedback.time_date_minutes_without_year",{time:a.toDate()}):r?(0,o.t)("collaboration.feedback.time_date_minutes",{time:a.toDate()}):(0,o.t)("collaboration.feedback.date",{time:a.toDate()})}function c(e,r){return e?a.createElement(s.Ro,{size:r,entity:{img_url:e}}):a.createElement("div",{className:"diffing_compare_summary--noUserImage--XijV0"})}n(227795)},236192:(e,r,n)=>{n.d(r,{Ah:()=>eq,Cr:()=>eZ,YL:()=>eJ,aS:()=>e8,jP:()=>eQ,ur:()=>eX});var a=n(411855),i=n(188507),o=n(67151),s=n(414507),l=n(603953),c=n(155543),d=n(575382),u=n(841368),m=n(326331),p=n(743717),h=n(630819),_=n(397863),g=n(13583),f=n(299321),E=n(629019),y=n.n(E),b=n(776250),I=n(20848),T=n(91408),v=n(966712),S=n(498750),w=n(711525),A=n(183297),N=n(563706),C=n(563042),L=n(153234),O=n(522739),R=n(776621),P=n(268537),D=n(946689),k=n(564577),M=n(493323),F=n(163023),x=n(46481),U=n(154254),B=n(881388),V=n(939863),G=n(392592),H=n(809840),W=n(205857),K=n(598393),Y=n(165514),$=n(944682),j=n(738269),z=n(293017),q=n(662275),X=n(188276),J=n(650769),Z=n(259927),Q=n(483990),ee=n(101505),et=n(672517),er=n(385111),en=n(226055),ea=n(974105),ei=n(396226),eo=n(27703),es=n(356390),el=n(122983),ec=n(243987),ed=n(428467),eu=n(262151),em=n(206193),ep=n(694517),eh=n(300874),e_=n(239671),eg=n(945020),ef=n(851363),eE=n(498606),ey=n(779086),eb=n(507956),eI=n(379025),eT=n(846456),ev=n(415702),eS=n(1691),ew=n(60088),eA=n(298543),eN=n(227795),eC=n(449731),eL=n(524513),eO=n(798661),eR=n(837746),eP=n(380910),eD=n(321385),ek=n(548832),eM=n(548603),eF=n(796529),ex=n(347196),eU=n(949207),eB=n(432023),eV=n(95779),eG=n(540206),eH=n(501191),eW=n(660164),eK=n(124784),eY=n(120118),e$=n(950142);let ej=(0,T.jz)(eR.uj0),ez=(0,T.jz)(eR.QBm);function eq(e){return e===f.m1T.HISTORY||e===f.m1T.COMPARE_CHANGES||e===f.m1T.DEV_HANDOFF_HISTORY}function eX(e){return e.label?e.label:e.participating_users_array&&e.participating_users_array[0]?e.participating_users_array[0]:e.user.handle?e.user.handle:((0,R.x1)("version","Verison history got user without a handle",{item:e}),(0,R.$D)(s.FigmaTeam.SCENEGRAPH_AND_SYNC,Error("Verison history got user without a handle")),"(unknown user)")}function eJ(e){switch(e.item.view){case"branch_child_create":return(0,V.tx)("collaboration.feedback.new_branch_created");case"branch_child_merge":return(0,V.tx)("collaboration.feedback.branch_merged");case"branch_child_update":return(0,V.tx)("collaboration.feedback.branch_updated_from_main_file");case"branch_create":return(0,V.tx)("collaboration.feedback.branch_created");case"branch_merge":return(0,V.tx)("collaboration.feedback.branch_merged_into_main_and_archived");case"branch_update":return(0,V.tx)("collaboration.feedback.updated_from_main");case"branch_archive":return(0,V.tx)("collaboration.feedback.branch_archived");case"branch_restore":return(0,V.tx)("collaboration.feedback.branch_restored");case"file_restore":if(e.item.label)return(0,V.tx)("collaboration.feedback.version_restored_label",{label:e.item.label});return(0,V.tx)("collaboration.feedback.version_restored")}return a.createElement(a.Fragment,null,eX(e.item))}function eZ(e){let{time:r}=e,n=a.useMemo(()=>(0,ev.xX)(r,!0),[r]),{onChange:i}=e;return a.useEffect(()=>{i&&i(n)},[i,n]),a.createElement(a.Fragment,null,n)}class eQ extends L.uA{constructor(e){super(e),this.descriptionRef=a.createRef(),this.onClick=L.cZ(this,"click",()=>{setTimeout(()=>{this.props.isAllowedToChangeVersion()&&!this.props.isActive&&this.props.onSelect&&this.props.onSelect(this.props.versionId)},300)}),this.disabledOnClickHandler=L.cZ(this,"click",()=>{setTimeout(()=>{if((0,b.sx)("CTA Clicked",{name:"Disabled Version History",teamId:this.props.team?.id}),this.props.isStarterTeam){if(!this.props.team){(0,R.$D)(s.FigmaTeam.MONETIZATION_UPGRADES,Error("Paywall: no team present"));return}this.props.dispatch(q.to({type:eC.DV,data:{team:this.props.team,editorType:this.props.editorType,resource:eh.Bi.VERSION_HISTORY,currentPlan:ei.F.Plan.STARTER,upsellPlan:ei.F.Plan.PRO}}))}},300)}),this.onMouseEnter=e=>{let r=this.descriptionRef.current;r&&r.scrollHeight>r.clientHeight&&this.setState({hovered:!0})},this.onMouseLeave=e=>{this.setState({hovered:!1})},this.onDoubleClick=L.cZ(this,"dblclick",()=>{this.props.onCreateSavepoint?this.props.onCreateSavepoint():this.props.onEditSavepoint&&this.props.onEditSavepoint(this.props.versionId)}),this.onMenuClick=L.cZ(this,"contextmenu",e=>{this.props.onSavepointMenuCallback&&this.props.versionId!==ep.V_&&this.props.onSavepointMenuCallback(this.props.versionId,this.props.checkpointKey||"",e)}),this.onBranchClick=L.cZ(this,"click",e=>{e.stopPropagation(),this.props.dispatch(j.$T({view:"fullscreen",fileKey:this.props.branchFileKey,editorType:e_.nT.Design}))}),this.onCompareClick=L.cZ(this,"click",e=>{e.stopPropagation(),setTimeout(()=>{this.props.onCompareChanges&&this.props.isAllowedToChangeVersion()&&this.props.isCurrentVersionActive&&!this.props.isComparing&&this.props.onCompareChanges(this.props.versionId)},300)}),this.onCompareCurrentClick=L.cZ(this,"click",e=>{e.stopPropagation(),setTimeout(()=>{this.props.onCompareChangesFromCurrent&&this.props.isAllowedToChangeVersion()&&!this.props.isComparing&&this.props.onCompareChangesFromCurrent()},300)}),this.toggleSeeMore=e=>{e.preventDefault(),e.stopPropagation(),this.setState({expandedDescription:!this.state.expandedDescription})},this.ref=e=>{e&&(this.versionRowDiv=e)},this.generateEditorName=(e,r)=>a.createElement("div",{className:eP.Lw,"data-tooltip-type":eE.Ib.TEXT,"data-tooltip":r,"data-tooltip-show-left":!0,"data-tooltip-max-width":1e3,key:`who_${e}`,dir:"auto"},r),this.generateBranchLink=e=>{if(!this.props.fileByKey||!this.props.branchFileKey)return null;{let r=this.props.fileByKey[this.props.branchFileKey];return r&&!r.deleted_at?a.createElement("span",{className:eP.qC,onClick:this.onBranchClick},e||(r.name??(0,V.tx)("collaboration.feedback.branch"))):a.createElement("span",{className:eP.at},r?.name??(0,V.tx)("collaboration.feedback.branch"))}},this.setFormattedTime=e=>{this.setState({formattedTime:e})},this.state={expandedDescription:!1,hovered:!1}}componentDidMount(){super.componentDidMount(),this.versionRowDiv&&this.props.isActive&&!this.props.first&&this.versionRowDiv.scrollIntoView(!1)}componentDidUpdate(e,r){super.componentDidUpdate(e,r);let n=this.props.description,a=e.description;n!==a&&(this.state.expandedDescription&&n&&a&&n.length>=a.length||this.setState({expandedDescription:!1}))}render(){let e,r,n;let i=this.descriptionRef.current,o=!!(i&&(this.state.expandedDescription||i.scrollHeight>i.clientHeight||this.state.hovered)&&!this.props.isActive),s=(0,ev.$_)(this.props.userUrl,15),m=this.props.versionId===ep.V_,p=!m&&!(0,ey.AI)({view:this.props.view??"file_default",label:this.props.label})&&!this.props.isLinked,h=this.props.version?.frameCreated||this.props.version?.frameEdited||this.props.version?.lastViewed,_=p&&!h,g=this.props.isPreview?eP.qv:eP.AS;this.props.disabled&&!this.props.isStarterTeam&&(g=eP.Y0+" "+g),m&&(g=eP.j$+" "+g),(this.props.isActive||this.props.isComparing)&&(g=eP.SU+" "+g),this.props.onSelect&&(g=eP.kD+" "+g);let f=this.props.isActive&&!m?eP.Nh:this.state.expandedDescription?eP.lV:o?eP.LF:eP.h_,E=this.state.expandedDescription?(0,V.tx)("collaboration.feedback.show_less"):(0,V.tx)("collaboration.feedback.show_more"),y=[],b=0;if(this.props.participatingImagesDict){let n=Object.keys(this.props.participatingImagesDict).length;for(let[i,o]of Object.entries(this.props.participatingImagesDict))if(e=(0,ev.$_)(o,15),r=this.generateEditorName(b,i),y.push(a.createElement("span",{className:eP.zL,key:i},(!this.props.first||"current_version"!=this.props.versionId)&&e,r)),++b>4&&b<n&&!this.props.isActive){y.push(a.createElement("div",{className:eP.lw,key:"number-additional-editors"},(0,V.tx)("collaboration.feedback.num_editors_number_editor_count_more",{numEditors:n-Number(b)})));break}}else this.props.user&&this.props.userUrl?(e=(0,ev.$_)(this.props.userUrl,15),r=this.generateEditorName(b,this.props.user),y.push(a.createElement("span",{className:eP.zL,key:"branching-solo-editor"},(!this.props.first||"current_version"!=this.props.versionId)&&e,r))):_&&"file_multiplayer"===this.props.view&&"Figma System"===this.props.user&&y.push(a.createElement("div",{className:eP.EB,key:"figma-system"},this.props.user));let I=eP.N5;this.props.hideLine?I="":this.props.first&&this.props.last?I=eP.y5:this.props.first?I=eP.pi:this.props.last&&(I=eP.p8);let T=this.props.isUI3?void 0:s,v=null,S="text"in this.props?this.props.text.toLowerCase():void 0;_||(T="components published"===S||"published to community hub"===S?a.createElement(x.U,{className:eP.mk,svg:eK.A,useOriginalSrcFills_DEPRECATED:!0},a.createElement(l.z,null)):a.createElement(eS.D,null)),_&&this.props.last&&(T=a.createElement(eS.D,null));let w=this.props.isUI3&&this.props.devModeActivity&&this.props.devModeActivity.length>0;if(w){let{status:e,nodes:r}=(0,Y.D0)(this.props.devModeActivity);v=a.createElement(eO.e,{status:e,nodes:r}),T=a.createElement(eO.M,{status:e})}if(this.props.isBranchingVersion)switch(this.props.view){case"branch_child_create":T=a.createElement(x.U,{className:eP.F4,svg:ex.A},a.createElement(c.o,null)),v=(0,V.tx)("collaboration.feedback.branch_child_create",{link:this.generateBranchLink()}),this.props.isPreview&&this.props.first&&!this.props.hideLine&&(I=eP.zj),this.props.last&&(I=this.props.isUI3?"":eP.JE);break;case"branch_child_merge":T=a.createElement(x.U,{className:eP.Wi,svg:eF.A},a.createElement(d.C,null)),v=(0,V.tx)("collaboration.feedback.merged",{link:this.generateBranchLink(this.props.label)});break;case"branch_child_update":T=a.createElement(eS.D,null),v=(0,V.tx)("collaboration.feedback.branch_child_update",{link:this.generateBranchLink()}),this.props.isPreview&&this.props.first&&!this.props.hideLine&&(I=eP.zj),this.props.last&&(I=this.props.isUI3?"":eP.JE);break;case"branch_merge":T=a.createElement(x.U,{className:eP.mq,svg:eG.A,useOriginalSrcFills_DEPRECATED:!0},a.createElement(d.C,null)),v=(0,V.tx)("collaboration.feedback.branch_merge",{link:this.generateBranchLink((0,V.t)("collaboration.feedback.main_branch_name"))});break;case"branch_create":T=a.createElement(x.U,{className:eP.VO,svg:eM.A},a.createElement(c.o,null)),v=(0,V.tx)("collaboration.feedback.branch_created");break;case"branch_update":T=a.createElement(x.U,{className:eP.F4,svg:ex.A},a.createElement(c.o,null)),v=(0,V.tx)("collaboration.feedback.branch_updated_from",{link:this.generateBranchLink((0,V.t)("collaboration.feedback.main_branch_name"))});break;case"branch_archive":T=a.createElement(x.U,{className:eP.lf,svg:ek.A},a.createElement(l.z,null)),v=(0,V.tx)("collaboration.feedback.branch_archived");break;default:T=a.createElement(eS.D,null)}let A=[];this.props.version?.frameCreated&&A.push(this.props.isSection?(0,V.tx)("collaboration.feedback.compare_changes_modal.section_created"):(0,V.tx)("collaboration.feedback.compare_changes_modal.frame_created")),this.props.version?.lastViewed&&A.push((0,V.tx)("collaboration.feedback.compare_changes_modal.last_viewed_by_you")),p&&!_&&this.props.time?A.push(a.createElement("div",{className:eP.IF},a.createElement(eZ,{time:this.props.time}))):_&&this.props.time?A.push(this.renderTime(this.props.time,eP.Ov,this.props.showCompareChanges)):"displayText"in this.props?A.push(this.props.displayText):A.push(this.props.text),this.props.isUI3&&this.props.isComparing&&!this.props.isComparingLoading&&!m&&(n=a.createElement("div",{className:eP.UY},a.createElement("div",{className:eP.sh},A[0]),a.createElement(F.B,{svg:eD.A,className:eP.KD}),a.createElement("div",{className:eP.$D},(0,V.tx)("collaboration.feedback.current_file"))));let N=a.createElement(a.Fragment,null,this.props.isBranchingVersion&&this.props.fileByKey&&this.props.branchFileKey?a.createElement("div",{className:eP.RI,dir:"auto"},v):w?a.createElement("div",{className:eP.Pf,dir:"auto"},v):n?a.createElement("div",{className:eP.Pf,dir:"auto"},n):a.createElement("div",{className:eP.Pf,dir:"auto"},A[0])),O=(0,C.$J)(this.props.description),R=y.length>0&&a.createElement("div",{className:eP.VM},y),P=!p&&this.props.time&&a.createElement("span",{className:eP.DS,"data-tooltip-type":eE.Ib.TEXT,"data-tooltip":(0,ev.xX)(this.props.time)}," ",this.props.isLinked?a.createElement(eZ,{onChange:this.setFormattedTime,time:this.props.time}):a.createElement(k.h1,{onChange:this.setFormattedTime,date:this.props.time})),D=A.length>1||O||o||R||P,U=a.createElement(a.Fragment,null,A.length>1&&a.createElement("div",{className:eP.HK},A.slice(1).map((e,r)=>a.createElement("div",{className:eP.Pf,dir:"auto",key:r},e))),(!this.props.isUI3||O)&&a.createElement("div",{className:f,style:{paddingRight:this.getLabelRightPosition(this.props.showCompareChanges)},ref:this.descriptionRef,dir:"auto"},O),o&&a.createElement("div",{className:eP.B0,onClick:this.props.disabled?void 0:this.toggleSeeMore},a.createElement("div",{className:eP.yT},E)),this.props.isUI3?a.createElement(a.Fragment,null,R,P,this.props.rowBodyFooter||!P&&(R||i)&&a.createElement("div",null)):a.createElement("div",null,R,P,this.props.rowBodyFooter)),B=this.props.isActive&&this.props.onSavepointMenuCallback&&!m&&a.createElement(eN.K0,{onClick:this.props.disabled?void 0:this.onMenuClick,className:eP.Wh,"data-tooltip-type":eE.Ib.TEXT,"data-tooltip":(0,V.t)("collaboration.feedback.more_options"),recordingKey:L.Pt(this.props,"versonContext")},a.createElement(x.U,{svg:eV.A},a.createElement(u.J,null))),G=this.props.onHoverMenuCallback&&!this.props.onSavepointMenuCallback?a.createElement(eN.K0,{onClick:this.props.onHoverMenuCallback,className:this.props.forceShowHoverMenu?eP.xL:eP.Gb,"data-tooltip-type":eE.Ib.TEXT,"data-tooltip":(0,V.t)("collaboration.feedback.more_options"),recordingKey:L.Pt(this.props,"versonContextHover")},a.createElement(x.U,{svg:eV.A},a.createElement(u.J,null))):null,H=a.createElement("button",{onClick:this.onCompareClick,className:eP.kr},(0,V.tx)("collaboration.feedback.compare")),W=a.createElement("button",{onClick:this.onCompareCurrentClick,className:eP.kr},(0,V.tx)("collaboration.feedback.compare")),K=a.createElement("button",{onClick:this.props.onDoneComparingClick,className:eP.kr},(0,V.tx)("collaboration.feedback.done_version_history"));return a.createElement(a.Fragment,null,(!_||this.props.showAutosaves)&&a.createElement("div",{className:g,ref:this.ref,onClick:this.props.disabled?this.disabledOnClickHandler:this.onClick,onMouseEnter:this.props.disabled&&!this.props.isStarterTeam?void 0:this.onMouseEnter,onMouseLeave:this.props.disabled&&!this.props.isStarterTeam?void 0:this.onMouseLeave,onContextMenu:this.props.disabled?void 0:this.onMenuClick,onDoubleClick:this.props.disabled&&this.props.isStarterTeam?void 0:this.onDoubleClick,"data-testid":"version-row"},!this.props.isUI3&&a.createElement("div",{className:I}),a.createElement("div",{className:_?eP.RV:eP.mP},a.createElement("div",{className:eP.Tc},a.createElement("div",{className:D?eP.eF:eP.nw,style:{right:this.getLabelRightPosition(this.props.showCompareChanges)}},this.props.iconOverride?this.props.iconOverride(a.createElement("div",{className:I})):this.props.isUI3?a.createElement("div",{className:eP.Gl},a.createElement("div",{className:I}),T):T,this.props.isUI3?a.createElement("div",{className:eP.B_},a.createElement("div",{className:eP.eP},N,U),B,this.props.onHoverMenuCallback&&G,this.props.showCompareChanges&&!this.props.isCurrentVersionActive&&!this.props.isComparingLoading&&m&&W,this.props.showCompareChanges&&this.props.isCurrentVersionActive&&!this.props.isComparingLoading&&!m&&!this.props.isComparing&&H,this.props.showCompareChanges&&this.props.isCurrentVersionActive&&!this.props.isComparingLoading&&this.props.isComparing&&K,this.props.showCompareChanges&&this.props.isCurrentVersionActive&&this.props.isComparingLoading&&!m&&!this.props.isComparing&&a.createElement("div",{className:eP.Ob},a.createElement(M.kt,null))):N),!this.props.isUI3&&B,!this.props.isUI3&&G),!this.props.isUI3&&U)))}renderTime(e,r,n){let i=a.createElement(eZ,{time:e,onChange:this.setFormattedTime});return a.createElement("div",{className:r},i)}getLabelRightPosition(e){return e?"65px":"35px"}}function e0({shouldShowUpgradeLink:e,startUpgrade:r,hasRestrictedVersions:n}){let i=er.h.useTrackingContext({trigger:em.b.HISTORY_UPSELL});return a.createElement(et.fu,{name:"Version History Paywall Panel",properties:{...i}},a.createElement("div",{className:eP.NM},a.createElement(H.E,{fontWeight:"semi-bold"},(0,V.tx)(n?"upsell.history.need_to_travel_back_in_time":"upsell.history.everything_else_is_history")),a.createElement("div",null,e?a.createElement(H.E,null,(0,V.tx)("upsell.history.upsell_upgrade_description",{upgradeLink:a.createElement(D.Ph,{className:eP.s6,onClick:r,trackingProperties:{trackingDescriptor:ee.c.UPGRADE,upsellSource:em.b.HISTORY_UPSELL,canUserAccessProFeature:!1},trusted:!0},a.createElement(H.E,null,(0,V.tx)("upsell.history.upsell_upgrade")))})):a.createElement(H.E,null,(0,V.tx)("upsell.history.upsell_learn_more_description",{upgradeLink:a.createElement(D.Ph,{className:eP.s6,href:"/pricing",trusted:!0,trackingProperties:{canUserAccessProFeature:!1}},(0,V.tx)("upsell.history.learn_more"))})))))}function e1(){return a.createElement(a.Fragment,null,a.createElement("span",{className:eP.ot},N.Ay.mac?(0,V.tx)("collaboration.feedback.shortcut_mac"):(0,V.tx)("collaboration.feedback.shortcut")))}eQ.displayName="VersionRow";class e2 extends L.uA{constructor(e){super(e),this.label="",this.description="",this.hasLabeled=!1,this.autoExpandUnlabeledOnly=!0,this.autoExpandGroupId="",this.expandLast=!1,this.toggleAutoItemById=e=>{let r=new Set(this.state.expandedIds);r.has(e)||this.autoExpandUnlabeledOnly&&!this.hasLabeled||this.autoExpandGroupId===e?(r.delete(e),this.hasLabeled||(this.autoExpandUnlabeledOnly=!1),this.setState({autoExpandForCurrentSelection:!1})):(r.add(e),this.hasLabeled||(this.autoExpandUnlabeledOnly=!0)),this.autoExpandGroupId="",this.setState({expandedIds:r})},this.drawRows=(e,r,n,a)=>{let i=[],o=0,s=-1,l=-1,c=0,d=e.length-1-e.slice().reverse().findIndex(e=>(0,ey.AI)(e)),u=e.length-1-e.slice().reverse().findIndex(e=>this.props.user?.handle&&(e.participating_users_array?.includes(this.props.user?.handle)||e.user.handle===this.props.user?.handle));for(;o<e.length;){let r=e[o];if((0,ey.AI)(r)){let m=n&&(0===o&&r.disabled||0===i.length);c>0&&(this.renderAutoVersionBatch(i,e,s,l,n&&(r.disabled&&0===s||0===i.length),!1,this.state.showAutosaves,a),m=!1),i.push(this.renderRow(r,m,o===e.length-1||o===d&&!this.state.showAutosaves||o===u&&this.state.showOnlyUserVersionHistory,a)),c=0,s=-1,l=-1}else s<0&&(s=o),l=o,c++;o++}return c>0&&this.renderAutoVersionBatch(i,e,s,l,n&&(e[0].disabled&&0===s||0===i.length),r,this.state.showAutosaves,a),i},this.hasLabeledVersions=e=>{for(let r of e)if(r.label&&r.label.length>0)return!0;return!1},this.startLoadingVersion=e=>{this.props.dispatch(j.$T({...this.props.selectedView,versionId:e.id})),this.props.dispatch(z.Y6({mode:f.Oin.KEEP_UI,type:eg.lF.SPINNER})),this.setState({isLoadingVersion:!0,loadingVersionId:e.id}),(0,b.sx)("History Version Savepoint Viewed",{savepointId:e.id,savedAt:e.touched_at})},this.finishedLoadingVersion=()=>{let e=this.state.loadingVersionId;if(e&&e.length>0){let r=this.getVersionByID(e);if(r&&!this.props.modalShown){let e;if(null!=r.label&&r.label.length>0)e=(0,V.t)("collaboration.feedback.viewing_version",{label:r.label});else{let n=(0,ev.xX)(r.touched_at);e=(0,V.t)("collaboration.feedback.viewing_version",{label:n})}e.length>34&&(e=e.substring(0,34)+"\u2026"),this.props.dispatch(G.F.enqueue({type:"versions",message:e}))}}this.setState({isLoadingVersion:!1,loadingVersionId:""})},this.loadVersionById=e=>{if(e===this.props.versionHistory.activeId)return;if(e===ep.V_){this.props.dispatch((0,ep.Nb)({id:ep.V_}));return}let r=this.getVersionByID(e);r&&this.loadVersion(r)},this.loadVersion=e=>{e.id!==this.props.versionHistory.activeId&&(this.startLoadingVersion(e),requestAnimationFrame(()=>{this.props.dispatch((0,ep.Nb)({id:e.id,eventType:"LOAD_NEW_VERSION"}))}))},this.isAllowedToChangeVersion=()=>null===this.props.modalShown&&!(0,eu.hM)(),this.onKeyDown=L.C0(this,"keydown",e=>{if(!this.props.dropdownShown&&!this.props.modalShown&&!this.props.versionHistory.compareId){if(e.keyCode===S.Uz.ESCAPE)this.props.modalShown||0!==Object.keys(this.props.mirror.sceneGraphSelection).length||this.props.dispatch((0,ep.Eg)());else if(e.keyCode===S.Uz.UP_ARROW||e.keyCode===S.Uz.DOWN_ARROW){if(!this.isAllowedToChangeVersion())return;let r=this.props.versionHistory.versions.length;this.setState({autoExpandForCurrentSelection:!0}),this.autoExpandGroupId="";let n=-1;if(this.props.versionHistory.activeId===ep.V_)e.keyCode===S.Uz.DOWN_ARROW&&(n=0);else{let r=this.props.versionHistory.versions.findIndex(e=>e.id===this.props.versionHistory.activeId);-1!==r&&(n=e.keyCode===S.Uz.UP_ARROW?r-1:r+1)}if(n<0){this.props.dispatch((0,ep.Nb)({id:ep.V_}));return}n>=r&&(n=r-1);let a=this.props.versionHistory.versions[n];a.disabled||this.loadVersion(a)}}}),this.startComparingChanges=e=>{this.props.dispatch(z.Y6({mode:f.Oin.KEEP_UI,type:eg.lF.SPINNER})),this.setState({isLoadingCompareChanges:!0,loadingCompareId:e.id})},this.finishedComparingChanges=()=>{let e=this.state.loadingCompareId;if(e&&e.length>0&&!this.props.modalShown){let r=this.getVersionByID(e);if(!r)return;if(0===f.AWq.getChunkChangeCount()){f.Egt.clearSelection();let e=(0,V.t)("collaboration.feedback.no_visible_changes");e.length>56&&(e=e.substring(0,56)+"\u2026"),this.props.dispatch(G.F.dequeue({})),this.props.dispatch(G.F.enqueue({type:"comparing",message:e}))}else{let e=null!=r.label&&r.label.length>0?r.label:(0,ev.xX)(r.touched_at),n=(0,V.t)("collaboration.feedback.comparing_changes_toast",{fromVersionLabel:e});n.length>56&&(n=n.substring(0,56)+"\u2026"),this.props.dispatch(G.F.dequeue({})),this.props.dispatch(G.F.enqueue({type:"comparing",message:n}))}}this.setState({isLoadingCompareChanges:!1,loadingCompareId:""}),this.props.dispatch(z.Y6({mode:f.Oin.OFF}))},this.compareChangesById=e=>{if(e===ep.V_)return;if(e===this.props.versionHistory.compareId){this.props.dispatch((0,ep.vF)({fromVersionId:e}));return}let r=this.getVersionByID(e);r&&this.compareChanges(r)},this.compareChangesFromCurrent=()=>{let e=this.props.versionHistory.activeId;if(!e)return;let r=this.getVersionByID(e);r&&(this.props.dispatch((0,ep.Nb)({id:ep.V_})),this.compareChanges(r))},this.compareChanges=e=>{e.id!==this.props.versionHistory.compareId&&(this.startComparingChanges(e),requestAnimationFrame(()=>{this.props.dispatch((0,ep.vF)({fromVersionId:e.id}))}))},this.loadMore=()=>{this.expandLast=!0,this.props.dispatch((0,ep._h)({direction:A.AS}))},this.startUpgrade=()=>{let e=this.getOpenFile(),r=e.teamId&&this.props.teams[e.teamId];if(!r){(0,R.$D)(s.FigmaTeam.MONETIZATION_UPGRADES,Error("Paywall: no team present"));return}this.props.dispatch(q.to({type:W.V,data:{upsellSource:em.b.HISTORY_UPSELL,teamId:r.id,openCheckoutInNewTab:!0}}))},this.restoreVersion=e=>{this.canEditFile()&&(this.props.dispatch($.PF({fileKey:this.getOpenFile().key,versionId:e.id})),(0,b.sx)("History Version Checkpoint Restored",{versionId:e.id,savedAt:e.touched_at}))},this.duplicateVersion=e=>{let r=this.getOpenFile(),n=(0,el.xp)(r,r.project,(0,ed.getPermissionsState)(this.props));n?this.props.dispatch(q.to({type:eC.DV,data:{team:n,resource:eh.vL.FILE,action:ef.ZN.DUPLICATE_FILES,editorType:r.editorType,currentPlan:ei.F.Plan.STARTER,upsellPlan:ei.F.Plan.PRO}})):(this.props.dispatch($.YW({file:this.getOpenFile(),versionId:e.id})),(0,b.sx)("History Version Checkpoint Duplicated",{versionId:e.id,savedAt:e.touched_at}))},this.clearVersion=e=>{this.props.dispatch(X.D({fileKey:this.getOpenFile().key,savepointID:e,label:"",description:""}))},this.addSavepoint=()=>{this.canEditFile()&&this.props.dispatch(q.to({type:eL.yU,data:{}}))},this.editSavepoint=e=>{if(this.canEditFile()&&e){let r=this.getVersionByID(e);r?.label&&(this.label=r.label),r?.description&&(this.description=r.description),this.props.dispatch(q.to({type:eL.yU,data:{description:this.description,label:this.label,savepointID:e}}))}},this.showUndoMergeModal=e=>{this.props.dispatch(q.to({type:eI.G,data:{version:e}}))},this.dropdownCallback=(e,r)=>{let{version:n}=r;switch(e){case"savepoint-clear":this.clearVersion(n.id);break;case"savepoint-restore":this.restoreVersion(n);break;case"savepoint-duplicate":this.duplicateVersion(n);break;case"savepoint-edit":case"savepoint-label":this.editSavepoint(n.id);break;case"savepoint-compare":this.compareChangesFromCurrent();break;case"savepoint-link":try{!function(e,r,n){e(J.zT({...r,versionId:n})),e(G.F.enqueue({type:"link_copied_to_clipboard",message:(0,Q.A)("link-copied")}))}(this.props.dispatch,this.props.selectedView,n.id)}catch(e){this.props.dispatch(B.s.error("Failed to copy link"))}break;case"savepoint-undo-merge":this.showUndoMergeModal(n)}},this.getVersionByID=e=>{let r=this.props.versionHistory,n=r.versions.find(r=>r.id===e);return r.linkedVersion?.id===e?r.linkedVersion:n},this.onSavepointMenu=(e,r,n)=>{if(this.props.dropdownShown&&this.props.dropdownShown.type===Z.$O){n.preventDefault();return}n.stopPropagation(),n.preventDefault();let a=this.getVersionByID(e),i=this.getOpenFile(),{clientX:o,clientY:s}=n;this.props.dispatch(j.j7({type:Z.$O,data:{clientX:o,clientY:s,version:a,callback:this.dropdownCallback,editName:a.label?"savepoint-edit":"savepoint-label",enableClear:a.label&&a.label.length>0,disableDuplicate:this.props.selectedView.editorType===e_.nT.Slides&&(0,w.oA)(i.org?.isSlidesDisabled)||this.props.selectedView.editorType===e_.nT.Whiteboard&&!!i.org?.figjamDisabledAt}}))},this.onDoneComparingClick=L.cZ(this,"click",e=>{e.stopPropagation(),setTimeout(()=>{this.isAllowedToChangeVersion()&&this.props.versionHistory.compareId&&(this.props.dispatch((0,ep.Nb)({id:ep.V_})),f.Egt.clearSelection(),this.props.dispatch(G.F.dequeue({matchType:"comparing"})),this.props.dispatch(G.F.dequeue({matchType:"view_changes"})))},300)}),this.renderRow=(e,r,n,i)=>{let o=this.getOpenFile();return a.createElement(eQ,{key:`history-item-${e.id}`,description:e.description,label:e.label,disabled:e.disabled,text:eX(e),displayText:a.createElement(eJ,{item:e}),view:e.view?e.view:null,participatingImagesDict:e.participating_images_dict,time:e.touched_at,isActive:this.props.versionHistory.activeId===e.id,isCurrentVersionActive:this.props.versionHistory.activeId===ep.V_,isComparingLoading:this.state.loadingCompareId===e.id,isComparing:this.props.versionHistory.compareId===e.id,devModeActivity:e.dev_mode_activity,user:e.user&&e.user.handle,userUrl:e.user&&((0,ey.pW)(e)||e.label)?e.user.img_url:null,clearVersion:this.clearVersion.bind(this,e.id),onSelect:this.loadVersionById,onCompareChanges:this.compareChangesById,onCompareChangesFromCurrent:this.compareChangesFromCurrent,isAllowedToChangeVersion:this.isAllowedToChangeVersion,versionId:e.id,checkpointKey:e.checkpoint_key,dispatch:this.props.dispatch,recordingKey:L.Pt(this.props,"version",e.id),onSavepointMenuCallback:this.onSavepointMenu,onEditSavepoint:this.editSavepoint,first:r,last:n,isBranchingVersion:(0,ey.pW)(e),fileByKey:this.props.fileByKey,branchFileKey:e.branch_file_key,showAutosaves:this.state.showAutosaves,showCompareChanges:this.showCompareChanges(),onDoneComparingClick:this.onDoneComparingClick,isStarterTeam:i,team:o.teamId?this.props.teams?.[o.teamId]:void 0,editorType:o.editorType,isUI3:this.props.isUI3})},this.onClose=()=>{if(this.props.onClose){this.props.onClose();return}this.props.dispatch((0,ep.Eg)())},this.state={isLoadingVersion:!1,loadingVersionId:"",isLoadingCompareChanges:!1,loadingCompareId:"",expandedIds:new Set,autoExpandForCurrentSelection:!1,showAutosaves:!0,showOnlyUserVersionHistory:!1}}renderAutoVersionBatch(e,r,n,i,o,s,l,c){let d;if(n<0||null===r||r.length<1)return;let u=r[n].id,h=this.state.expandedIds.has(u)||this.autoExpandUnlabeledOnly&&!this.hasLabeled;if(this.state.autoExpandForCurrentSelection)for(let e=n;e<=i;e++)r[e].id===this.props.versionHistory.activeId&&(h=!0,this.autoExpandGroupId=this.props.versionHistory.activeId);this.expandLast&&s&&(h||this.toggleAutoItemById(u),this.expandLast=!1);let _=i-n+1,g=!0;if(1===_&&(h=!0,g=!1),d=s&&(1===_||!h)?o?eP.y5:eP.p8:o?eP.pi:eP.N5,g&&l&&e.push(a.createElement(O.D8,{key:`auto_row_${n}`,recordingKey:L.Pt(this.props,`autoVersionBatch.${n}`),className:r[n].disabled?eP.Ao:eP.QQ,onClick:this.toggleAutoItemById.bind(this,u)},!this.props.isUI3&&a.createElement("div",{className:d}),a.createElement("div",{className:eP.Jt},this.props.isUI3?a.createElement("div",{className:eP.Gl},a.createElement("div",{className:d}),h?a.createElement(m.r,null):a.createElement(p.R,null)):a.createElement(eS.D,null),a.createElement("div",{className:eP.aJ},(0,V.tx)("collaboration.feedback.autosave_count",{count:_}),!this.props.isUI3&&a.createElement(F.B,{key:"expand-caret",className:h?eP.ey:eP.GE,svg:h?eU.A:eB.A}))))),h)for(let a=n;a<=i;a++)e.push(this.renderRow(r[a],o&&n===i,s&&a===i,c))}componentDidMount(){super.componentDidMount(),this.props.versionHistory.activeId||this.props.dispatch((0,ep.Nb)({id:ep.V_})),document.addEventListener("keydown",this.onKeyDown),es.Y5.fromFullscreen.on("sceneGraphMirrorUpdate",this.finishedLoadingVersion),I.j.on("loadedCompareChanges",this.finishedComparingChanges)}componentWillUnmount(){super.componentWillUnmount(),document.removeEventListener("keydown",this.onKeyDown),es.Y5.fromFullscreen.removeListener("sceneGraphMirrorUpdate",this.finishedLoadingVersion),I.j.removeListener("loadedCompareChanges",this.finishedComparingChanges)}getOpenFile(){let e=this.props.openFile;return null==e&&(0,R.x1)("history","history view should only be possible to open when we have a file"),(0,o.KF)(null!=e,"history view should only be possible to open when we have a file"),e}canEditFile(){return this.props.openFile?.canEdit}showCompareChanges(){return(0,v.kc)().version_diffing&&this.props.selectedView.editorType===e_.nT.Design}render(){let e=this.getOpenFile(),r=e.team,n=this.props.versionHistory.versions.filter(e=>!this.state.showOnlyUserVersionHistory||this.props.user?.handle&&(e.participating_users_array?.includes(this.props.user?.handle)||e.user.handle===this.props.user?.handle)),i=n.filter(e=>!e.disabled),o=n.filter(e=>e.disabled).slice(0,ec.cW);this.hasLabeled=this.hasLabeledVersions(i)||this.hasLabeledVersions(o);let s=null,l=(0,A.u9)(this.props.versionHistory),c=!(0,ec.XX)(r)&&!this.props.currentUserOrgId&&(o.length>0||!l),d=!!r&&(0,ed.canEditTeam)(r.id,(0,ed.getPermissionsState)(this.props));c&&(s=a.createElement(e0,{startUpgrade:this.startUpgrade,shouldShowUpgradeLink:d,hasRestrictedVersions:!!o.length}));let u=a.createElement("div",{className:eP.UX},!this.props.versionHistory.loading&&(0,A.u9)(this.props.versionHistory)&&a.createElement("a",{className:eP.nf,onClick:this.loadMore},(0,V.tx)("collaboration.feedback.show_older"))),m=this.props.versionHistory.docHasChanged&&!this.props.versionHistory.loading,p=this.props.versionHistory.linkedVersion,h=p&&i.some(e=>p.id===e.id),_=!this.state.showOnlyUserVersionHistory||p?.user.id===this.props.user?.id,g=(0,eb.$A)(this.props.selectedView),E=(0,eT.C)(this.props.selectedView),b=!this.canEditFile(),I=i.map(e=>(0,ey.AI)(e)?1:0).reduce((e,r)=>e+r,0);return a.createElement("div",null,this.props.progressBarState.mode!==f.Oin.ON_AND_LOCKED&&a.createElement(et.fu,{name:"Version History Panel",properties:{teamId:r?.id}},a.createElement("div",{className:y()(eP.kL,Z.Dm),style:g||E||this.props.isUI3?{width:g||this.props.isUI3?"100%":ej+ez,borderLeft:g?"unset":void 0,minWidth:E&&this.props.isUI3?"240px":"unset"}:{position:"fixed",top:"auto",bottom:"auto",width:ej+ez,height:"100%"}},a.createElement(e3,{onClose:this.onClose,addSavepoint:this.addSavepoint,filterOptions:{showAutosaves:this.state.showAutosaves,setShowAutosaves:e=>this.setState({showAutosaves:e}),showOnlyUserVersionHistory:this.state.showOnlyUserVersionHistory,setShowOnlyUserVersionHistory:e=>this.setState({showOnlyUserVersionHistory:e})},isViewOnly:b,recordingKey:L.Pt(this.props,"toolbar")}),a.createElement("div",{"data-not-draggable":!0},a.createElement("div",{className:eP.dG},!this.hasLabeled&&!b&&!g&&a.createElement("div",{className:eP.fy},a.createElement("div",null,(0,V.tx)("collaboration.feedback.press_shortcut_to_add_to_version_history_while_editing",{shortcut:a.createElement(e1,null)}))),p&&!h&&_&&a.createElement(eQ,{description:p.description,label:p.label,versionId:p.id,onSavepointMenuCallback:this.onSavepointMenu,displayText:(0,V.tx)("collaboration.feedback.get_version_text_linked_version_linked_version",{versionText:a.createElement(eJ,{item:p})}),view:p.view?p.view:null,time:p.touched_at,isActive:this.props.versionHistory.activeId===p.id,isCurrentVersionActive:this.props.versionHistory.activeId===ep.V_,isComparingLoading:this.state.loadingCompareId===p.id,isComparing:this.props.versionHistory.compareId===p.id,userUrl:p.user.img_url,dispatch:this.props.dispatch,onSelect:this.loadVersionById,onCompareChanges:this.compareChangesById,onCompareChangesFromCurrent:this.compareChangesFromCurrent,isAllowedToChangeVersion:this.isAllowedToChangeVersion,isLinked:!0,first:!0,last:!0,isBranchingVersion:(0,ey.pW)(p),checkpointKey:p.checkpoint_key,showAutosaves:this.state.showAutosaves,showCompareChanges:this.showCompareChanges(),onDoneComparingClick:this.onDoneComparingClick,isUI3:this.props.isUI3,editorType:e.editorType}),this.props.versionHistory.loading&&a.createElement("div",{className:eP.u1},a.createElement(M.kt,null)),m&&a.createElement(eQ,{displayText:(0,V.tx)("collaboration.feedback.current_version"),view:null,isActive:this.props.versionHistory.activeId===ep.V_,isCurrentVersionActive:this.props.versionHistory.activeId===ep.V_,isComparingLoading:this.state.loadingCompareId===ep.V_,isComparing:!!this.props.versionHistory.compareId,userUrl:this.props.user.img_url,versionId:ep.V_,dispatch:this.props.dispatch,addSavepoint:this.addSavepoint,onSelect:this.loadVersionById,onCompareChanges:this.compareChangesById,onCompareChangesFromCurrent:this.compareChangesFromCurrent,isAllowedToChangeVersion:this.isAllowedToChangeVersion,first:!0,last:!1,recordingKey:L.Pt(this.props,"currentVersion"),onCreateSavepoint:this.addSavepoint,onSavepointMenuCallback:this.onSavepointMenu,showAutosaves:this.state.showAutosaves,hideLine:0===i.length||!this.state.showAutosaves&&0===I,showCompareChanges:this.showCompareChanges(),onDoneComparingClick:this.onDoneComparingClick,isUI3:this.props.isUI3,editorType:e.editorType}),this.drawRows(i,0===o.length,!m),this.drawRows(o,!0,!1,d),s),0===o.length&&u))))}}function e3(e){let{onClose:r,addSavepoint:n,filterOptions:i,isViewOnly:o}=e,{toggleDropdown:s,dropdownTargetRef:l,isDropdownShown:c}=(0,ew.B)("FILTER_VERSIONS_DROPDOWN"),d=(0,en.GS)();a.useEffect(()=>{},[c,l]);let u=()=>{i?.setShowOnlyUserVersionHistory(!i?.showOnlyUserVersionHistory)},m=i?[a.createElement(P.MM,{key:"all",checked:!i.showOnlyUserVersionHistory,onClick:()=>i.showOnlyUserVersionHistory?u():null},(0,V.tx)("collaboration.feedback.all_filter_text")),a.createElement(P.MM,{key:"only_yours",disabled:o,checked:i.showOnlyUserVersionHistory,onClick:()=>i.showOnlyUserVersionHistory?null:u()},(0,V.tx)("collaboration.feedback.only_yours_filter")),a.createElement(P.wv,{key:"sep"}),a.createElement(P.MM,{key:"autosaves",checked:i.showAutosaves,onClick:()=>{i?.setShowAutosaves(!i.showAutosaves)}},(0,V.tx)("collaboration.feedback.show_autosave_versions"))]:[];return a.createElement("div",{className:eP.N1},a.createElement("div",{className:eP.qd},(0,V.tx)("collaboration.feedback.version_history")),a.createElement("div",{className:d?U.cx.flex.itemsCenter.gap4.$:U.cx.flex.itemsCenter.$},i&&a.createElement("div",{ref:l},a.createElement(eN.YW,{selected:!!i.showOnlyUserVersionHistory,"data-tooltip-type":eE.Ib.TEXT,"data-tooltip":(0,V.t)("collaboration.feedback.filter_tooltip"),onClick:s,onMouseDown:e=>c&&e.stopPropagation()},a.createElement(x.U,{svg:eY.A},a.createElement(h.S,null)))),c&&l.current&&a.createElement(eA.Jz,{showPoint:!0,targetRect:l.current.getBoundingClientRect(),options:m,hideDropdown:s,autofocusPrevElementOnSelect:!0,autofocusPrevElementOnEsc:!0,autofocusPrevElementOnTab:!1,propagateCloseClick:!0}),!o&&a.createElement(eN.K0,{onClick:n,"data-tooltip-type":eE.Ib.TEXT,"data-tooltip":(0,V.t)("collaboration.feedback.add_to_version_history_tooltip"),dataTestId:"versions-add-savepoint",recordingKey:L.Pt(e,"plusVersion")},a.createElement(x.U,{svg:eH.A,fallbackSvg:eW.A},a.createElement(_.x,null))),a.createElement(eN.K0,{onClick:r,"data-tooltip-type":eE.Ib.TEXT,"data-tooltip":(0,V.t)("collaboration.feedback.close_tooltip"),recordingKey:L.Pt(e,"button-close")},a.createElement(x.U,{svg:e$.A},a.createElement(g.L,null)))))}function e6({versions:e,selectedVersion:r,setVersion:n,last:o,idx:s,isSection:l}){let c=(0,i.wA)(),d=(0,eo.ud)(),u=(0,en.GS)();return a.createElement(a.Fragment,null,e.map((i,m)=>a.createElement(eQ,{key:`history-item-${i.id}`,description:i.description,label:i.label,disabled:i.disabled,text:eX(i),displayText:a.createElement(eJ,{item:i}),view:i.view?i.view:null,participatingImagesDict:i.participating_images_dict,time:i.touched_at,isActive:r?.id===i.id,user:i.user&&i.user.handle,userUrl:i.user&&((0,ey.pW)(i)||i.label)?i.user.img_url:null,onSelect:()=>n(i),isAllowedToChangeVersion:()=>!0,versionId:i.id,checkpointKey:i.checkpoint_key,dispatch:c,first:0===s&&0===m,last:o&&m===e.length-1,isBranchingVersion:(0,ey.pW)(i),fileByKey:d,branchFileKey:i.branch_file_key,showAutosaves:!0,version:i,isSection:l,isUI3:u,editorType:null,devModeActivity:i.dev_mode_activity})))}function e5({versions:e,selectedVersion:r,setVersion:n,last:i,idx:o}){let s;let[l,c]=a.useState(r&&!!e.find(e=>e.id===r.id)),d=K.VI()?.isSection,u=(0,en.GS)();s=i&&(1===e.length||!l)?0===o?eP.y5:eP.p8:0===o?eP.pi:eP.N5;let h=u?a.createElement(O.D8,{className:eP.QQ,onClick:()=>c(!l)},a.createElement("div",{className:eP.Jt},a.createElement("div",{className:eP.Gl},l?a.createElement(m.r,null):a.createElement(p.R,null)),a.createElement("div",{className:eP.aJ},(0,V.tx)("collaboration.feedback.autosave_count",{count:e.length})))):a.createElement(O.D8,{className:eP.QQ,onClick:()=>c(!l)},a.createElement("div",{className:s}),a.createElement("div",{className:eP.Jt},a.createElement(eS.D,null),a.createElement("div",{className:eP.aJ},(0,V.tx)("collaboration.feedback.autosave_count",{count:e.length}),a.createElement(F.B,{key:"expand-caret",className:l?eP.ey:eP.GE,svg:l?eU.A:eB.A}))));return a.createElement("div",{key:`auto_row_${o}`},h,l&&a.createElement(e6,{versions:e,selectedVersion:r,setVersion:n,last:i,idx:o,isSection:d}))}function e8({versions:e,selectedVersion:r,setVersion:n}){let i=[],o=[],s=0,l=K.VI()?.isSection;function c(e){o.length>0&&(i.push(a.createElement(e5,{key:s,versions:[...o],selectedVersion:r,setVersion:n,idx:s,last:e})),s++,o=[])}for(let d=0;d<e.length;d++){let u=e[d];(0,ey.AI)(u)||u.frameCreated||u.frameEdited||u.lastViewed?(c(!1),i.push(a.createElement(e6,{key:s,versions:[u],selectedVersion:r,setVersion:n,idx:s,last:d===e.length-1,isSection:l})),s++,o=[]):o.push(u)}return c(!0),a.createElement(a.Fragment,null,i)}e2.displayName="VersionHistoryView",(0,i.Ng)(ea.l$)(e2)},118335:(e,r,n)=>{n.d(r,{PZ:()=>eg,SI:()=>ep});var a=n(411855),i=n(188507),o=n(234352),s=n(171812),l=n(414507),c=n(97860),d=n(618768),u=n(299321),m=n(880934),p=n(904669),h=n(629019),_=n.n(h),g=n(203264),f=n(776250),E=n(344780),y=n(38329),b=n(966712),I=n(374626),T=n(38580),v=n(395900),S=n(776621),w=n(559036),A=n(411751),N=n(950997),C=n(939863),L=n(239349),O=n(681912),R=n(598393),P=n(786110),D=n(738269),k=n(293017),M=n(662275),F=n(681655),x=n(128752),U=n(29680),B=n(335682),V=n(860178),G=n(694517),H=n(945020),W=n(237870),K=n(632857),Y=n(381984),$=n(928229),j=n(625599),z=n(65453),q=n(153886),X=n(274133),J=n(67519),Z=n(754369),Q=n(286723),ee=n(23318),et=n(236192),er=n(548470),en=n(323761);let ea=[2,3,6,13,25,50,75,100,200,300,1e3];function ei(e,r,n){if(!n)return!1;let a=r.get((0,m.dI)(e));if(!a)return!1;let i=a.absoluteBoundingBox;return!!i&&i.x<n.x+n.w&&i.x+i.w>n.x&&i.y<n.y+n.h&&i.y+i.h>n.y}function eo(e,r){return{x:e.x-r.x,y:e.y-r.y,width:e.w,height:e.h}}function es(e,r,n=!1){if(!r)return null;let a=e.get(r);return a?n?a.absoluteRenderBounds:a.absoluteBoundingBox:null}function el(e){return!!(e?.basis?.styleType||e?.change?.styleType)}function ec(e,r,n){let a=e?.basis?.guid?(0,m.dI)(e.basis.guid):m.AD,i=el(e)?null:es(r.scene,a,!1),o=e?.change.guid?(0,m.dI)(e.change.guid):m.AD,s=e?.state==="removed"||el(e)?null:es(n.scene,o,!1);return{before:{id:a,box:i&&r.baseBox?eo(i,r.baseBox):null},after:{id:o,box:s&&n.baseBox?eo(s,n.baseBox):null}}}function ed({frameId:e,historyFrameId:r,historySceneGraph:n,chunkChanges:i,discreteDiffing:c,setChunkChanges:d}){let p=(0,U.eY)(),[h,_]=(0,I.fp)(P.Ib),g=a.useMemo(()=>c?u.Egt.getLayerGUIDMapping(r,n.scene,e,p.scene):void 0,[c,e,r,n.scene,p.scene]);return a.useEffect(()=>{if(i)return;let a=u.egF.getNodeTree(r,n.scene,!c),h=u.egF.getNodeTree(e,p.scene,!c);if(!a||!h){_(new Map),d({});return}E.sn.reset("dev_mode.compare_changes.diffing",r),E.sn.start("dev_mode.compare_changes.diffing",{key:r});let{deltaTree:y,deltaNodeMap:b}=function(e,r,n,a,i,c,d=!0){let p;let h=new Map,_=o.w.decodeMessage(e.nodeChanges).nodeChanges,g=o.w.decodeMessage(r.nodeChanges).nodeChanges;if(!_||!g)return{deltaTree:{},deltaNodeMap:h};let f=new Map,E=0;!function e(r){if(E>=_.length)return(0,S.$D)(l.FigmaTeam.DEVELOPER_TOOLS,Error("History node index out of bounds")),null;for(let n of(f.set(r.id,{change:_[E],node:r}),E++,r.children))e(n)}(e.tree);let y=d?n.get((0,m.dI)(g[0].guid)):null,b=_[0]&&d?a.get((0,m.dI)(_[0].guid)):null,I=y?.absoluteBoundingBox||null,T=b?.absoluteBoundingBox||null;function v(e,r,n){h.set(e,r.value),(0,j.NI)(n,r)}let w=0,A=function e(r,p={}){let _,E;if(w>=g.length)return(0,S.$D)(l.FigmaTeam.DEVELOPER_TOOLS,Error("Node index out of bounds")),{};let y=g[w],b=0===w;w++;let A=c?c.get(r.id)??m.AD:r.id,N=f.get(A),C={previousChange:N?.change,currentChange:y,isRootNode:b};if(N){let e=function(e,r,n,a,i){let l=new Map;for(let[c,d]of $.AW){let p=null,h=null;if((0,K.ar)(c)&&(e[c]&&e[c].guid&&(p=(0,m.dI)(e[c].guid)),r[c]&&r[c].guid&&(h=(0,m.dI)(r[c].guid))),p||h){let m=function(e,r){if(r){if("styleIdForStrokeFill"===c){e.strokePaints=r.fillPaints;return}for(let n of d)e[n]=r[n]}},_=h?u.egF.getNodeTree(h,a.scene,i)?.nodeChanges:null,g=p?u.egF.getNodeTree(p,n.scene,i)?.nodeChanges:null,f=_?o.w.decodeMessage(_).nodeChanges?.[0]:null,E=g?o.w.decodeMessage(g).nodeChanges?.[0]:null;if(m(r,f),m(e,E),f&&!E)l.set(c,{state:"removed",previousChange:f,currentChange:{phase:"REMOVED"}});else if(!f&&E)l.set(c,{state:"added",previousChange:{phase:"REMOVED"},currentChange:E});else if(f&&E){for(let e of["name",...d])if(!(0,s.cF)(f[e],E[e])){l.set(c,{state:"changed",previousChange:f,currentChange:E});break}}}}return l}(y,N?.change,n,a,i);for(let e of $.cs)if(!(0,s.cF)(N.change[e],y[e])&&("textData"!==e||N.change[e]?.characters!==y[e]?.characters)){if("transform"===e&&b||d&&!ei(N.change.guid,a,I)&&!ei(y.guid,n,I))continue;C.state="changed";break}e.size>0&&(C.changedStyles=e)}else(!d||ei(y.guid,n,I))&&(C.state="added");for(let n of(y.guid&&(C.state||C.changedStyles)&&(E={value:C}),_=E||p,E&&v((0,m.dI)(y.guid),E,p),r.children.forEach(r=>e(r,_)),N?.node?.children||[]))f.has(n.id)&&function({checkOverlap:e,parent:r,nodeId:n}){let i=f.get(n);if(e&&!ei(i?.change.guid,a,T))return;let o={value:{state:"removed",previousChange:i?.change,currentChange:{phase:"REMOVED"}}};h.has((0,m.dI)(f.get(n)?.change.guid))&&(0,S.$D)(l.FigmaTeam.DEVELOPER_TOOLS,Error("Error generating deleted nodes"));let s=(0,m.dI)(i?.change.guid);v(s,o,r),f.delete(s)}({checkOverlap:d,nodeId:n.id,parent:_});return f.delete(A),p}(r.tree);if(!A.value&&A.children&&1===A.children.length){let e=A.children[0];delete e.parent,p=e}else p=A;return{deltaTree:p,deltaNodeMap:h}}(a,h,p,n,!c,g,!0);_(b),d((0,j.X$)(y,function(e){let r=e.value,n=null,a=r.state;return("added"===r.state||"changed"===r.state)&&(n={isRootNode:!!r.isRootNode,basis:r.previousChange?r.previousChange:{phase:"REMOVED"},change:r.currentChange,state:a}),"removed"===r.state&&r.previousChange&&(n={isRootNode:!!r.isRootNode,basis:r.previousChange,change:{phase:"REMOVED"},state:a}),r.changedStyles&&(n||(n={isRootNode:!!r.isRootNode,basis:r.previousChange,change:r.currentChange,state:a}),n.changedStyles=r.changedStyles),{result:n}}));let I=E.sn.tryStop("dev_mode.compare_changes.diffing",r);I&&(0,f.sx)("dev_mode.compare_changes.diffing",{type:"node_changes",durationMs:I},{forwardToDatadog:!0})},[e,_,i,d,r,n.scene,p.scene,g,n,p,c]),a.useEffect(()=>()=>{_(new Map)},[_]),null}function eu(e,r){if(e.isState){let r=e.parentNode?.name;return r?`${r}/${e.name}`:e.name}if(r.singleBackingSymbol&&r.singleBackingStateGroup){let n=r.singleBackingSymbol.name;return n?`${e.name}/${n}`:e.name}return e.name}function em(e){return{node:(0,L.mJ)(e),backingSymbolData:(0,Z.$)([e])}}function ep({nodeId:e,detachedComponentsScene:r,documentIndex:n,showError:a}){let i=n===d.x1?u.juq.HISTORY:r?u.juq.DETACHED_COMPONENTS:c.G,o=new p.qo(i),s=o.get(e)?.absoluteRenderBounds||{x:0,y:0,w:0,h:0},l=0,m=!0;return()=>({nodeBounds:{x:s.x,y:s.y,width:s.w,height:s.h},getImage:({scale:a,clipRect:i})=>{let s;let c=Date.now();c-l>1e4&&(l=c,(s=new v.jk("performance.dev_mode.compare_changes.get_image",{})).start());let d=(0,ee.L6)(e,n,r,a,i);if(s){let e=s.stop(),r=d?.image?.length??0;e&&r&&(0,f.sx)("performance.dev_mode.compare_changes.get_image",{elapsedMs:e,imageBytes:r,sceneType:o.getSceneTypeDebugString(),isFirstImage:m},{forwardToDatadog:!0})}return m=!1,d&&{data:d.image,width:d.width,height:d.height,scale:d.width/d.canvasSpaceBounds.width,canvasSpaceBounds:d.canvasSpaceBounds}},showError:a})}function eh({version:e,isSection:r}){let n=new Date(e.touched_at?e.touched_at:e.created_at),i=e.label;e.frameCreated?i=r?(0,C.tx)("collaboration.feedback.compare_changes_modal.section_created"):(0,C.tx)("collaboration.feedback.compare_changes_modal.frame_created"):e.lastViewed&&(i=(0,C.tx)("collaboration.feedback.compare_changes_modal.last_viewed_by_you"));let o=i?a.createElement(et.Cr,{time:n}):null;return a.createElement("div",{className:en.sh},a.createElement("div",{className:en.dp},i||a.createElement(et.Cr,{time:n})),a.createElement("div",{className:en.m7},o))}let e_=(0,T.eU)(null);function eg(e){let{nodeId:r,onCloseModal:n,modalTitle:i,currentImage:o,historicImage:s,historicHeader:l,currentHeader:c,versions:d,selectedVersion:h,setSelectedVersion:g,renderLoadingBar:y,modalError:T,discreteDiffingInput:v,initialSelectedNodeId:S,skipCorrectHistoryCanvasCheck:w,preferencesApi:L,origin:P}=e,D=(0,B.tS)(),k=V.iZ()?.id,[M,F]=a.useState(A.Ss.SIDE_BY_SIDE),[x,U]=a.useState(Q.q0),[G,H]=a.useState(!0),[W,K]=a.useState(null),[X,J]=a.useState(null),[Z,ee]=a.useState(!0),[ei,eo]=a.useState(!0),el=R.VI()?.isSection,[eu,em]=a.useState(()=>S?{id:S,zoomToSelection:!0}:null),[ep,eg]=(0,I.fp)(e_),[ey,eb]=a.useState(void 0),eI=(0,I.fp)(N.w1)[1],eT=(0,Q.t$)(h||null,r)||!!v,ev=w||eT,eS=a.useMemo(()=>v?.sceneGraph?v.sceneGraph:new p.qo(u.juq.HISTORY),[v?.sceneGraph]),ew=(0,O.G)();a.useEffect(()=>{eu&&eu.id!==r&&(0,f.sx)("Diff Modal New Layer Selected",{userId:k,fileKey:D,frameId:r,versionId:h?.id,layer_id:eu.id})},[eu]);let eA=a.useRef(h);a.useEffect(()=>{eA.current!==h&&(eA.current=h,eb(void 0),em(null))},[h,eA]);let eN=void 0!==o,eC=void 0!==s,eL=a.useCallback(e=>{"Escape"===e.key&&(eu?(em(null),e.stopPropagation(),e.preventDefault()):n())},[n,eu]);a.useEffect(()=>(document.addEventListener("keydown",eL),()=>{document.removeEventListener("keydown",eL)}),[eL]),a.useEffect(()=>{if("cc_versions"===P&&ey&&!ei){(0,j.mf)(ey)?(0,f.sx)("Diff Modal No Changes Between Versions",{userId:k,fileKey:D,frameId:r,versionId:h?.id,initialVersion:Z,versionMetadata:!1},{forwardToDatadog:!0}):(0,f.sx)("dev_mode.compare_changes.version_has_changes",{userId:k,fileKey:D,frameId:r,versionId:h?.id,initialVersion:Z,versionMetadata:!1},{forwardToDatadog:!0});let e=E.sn.tryStop("dev_mode.compare_changes.switch_versions",h?.id);e&&(0,f.sx)("dev_mode.compare_changes.switch_versions",{elapsedMs:e},{forwardToDatadog:!0})}},[P,Z,ei,ey,h,r,D,k]),a.useEffect(()=>{h&&null===s&&(0,f.sx)("dev_mode.compare_changes.no_image",{userId:k,fileKey:D,frameId:r,versionId:h?.id},{forwardToDatadog:!0})},[s,h,r,D,k]);let eO=()=>a.createElement(A.BL,{isPreviewAvailable:eN,showOptions:eN,view:M,onSideBySideClick:()=>{F(A.Ss.SIDE_BY_SIDE)},onOverlayClick:()=>{F(A.Ss.OVERLAY)},additionalStyles:en.tH}),[eR,eP]=a.useState(new Set),eD=a.useCallback((e,r)=>{r?eP(r=>new Set([...r,...e])):eP(r=>{let n=new Set(e);return new Set([...r].filter(e=>!n.has(e)))})},[eP]),ek=(0,a.useCallback)(e=>{let r=e?.value;if(r){let n="removed"===r.state?r.beforeNodeId:r.afterNodeId;em({id:n,zoomToSelection:!1}),K(r.beforeNodeId),J(r.afterNodeId);let a=[n],i=e?.parent;for(;i;){let e=i.value;if(e){let r="removed"===e.state?e.beforeNodeId:e.afterNodeId;a.push(r)}i=i.parent}eD(a,!0)}else em(null),K(null),J(null)},[eD]),eM=(0,a.useCallback)(e=>{e?eg("removed"===e.state?e.beforeNodeId:e.afterNodeId):eg(m.AD)},[eg]),eF=(0,a.useCallback)(e=>eg(e),[eg]),ex=(0,a.useCallback)((e,r)=>{e===eu?.id?(em(null),K(null),J(null)):(em({id:e,zoomToSelection:!0}),eg(e),K((0,m.dI)(r.basis.guid)),J((0,m.dI)(r.change.guid)))},[eu?.id,eg]),eU=(0,a.useMemo)(()=>ey&&(0,Y.kF)(ey,$.FO.LEGO,void 0,q.O0)||{},[ey]),eB=!(0,j.mf)(eU),eV=v?v.nodeId:r,{beforeBoxes:eG,afterBoxes:eH}=function(e){let{frameId:r,historyFrameId:n,view:i,displayableChanges:o,historySceneGraph:s}=e;return(0,a.useMemo)(()=>{if(!r||!n)return{};let e=function(e,r,n,a){let i=(0,p.UN)(),o=es(r,n,!0),s=es(i,e,!0);return(0,j.X$)(a,e=>{let n=ec(e.value,{scene:r,baseBox:o},{scene:i,baseBox:s});return{result:{beforeBox:n.before.box,afterBox:n.after.box,afterBoxNodeId:n.after.id,beforeBoxNodeId:n.before.id}}})}(r,s,n,o);return{beforeBoxes:(0,j.X$)(e,e=>{let a=e.value,i=a.beforeBoxNodeId===n||a.afterBoxNodeId===r;return a.afterBox?a.beforeBox?{result:{rect:a.beforeBox,beforeNodeId:a.beforeBoxNodeId,afterNodeId:a.afterBoxNodeId,state:"changed",isRootFrame:i}}:{result:{rect:a.afterBox,beforeNodeId:a.beforeBoxNodeId,afterNodeId:a.afterBoxNodeId,state:"added",isRootFrame:i}}:{result:{rect:a.beforeBox,beforeNodeId:a.beforeBoxNodeId,afterNodeId:a.afterBoxNodeId,state:"removed",isRootFrame:i}}}),afterBoxes:(0,j.X$)(e,e=>{let a=e.value,i=a.beforeBoxNodeId===n||a.afterBoxNodeId===r;return a.afterBox?a.beforeBox?{result:{rect:a.afterBox,beforeNodeId:a.beforeBoxNodeId,afterNodeId:a.afterBoxNodeId,state:"changed",isRootFrame:i}}:{result:{rect:a.afterBox,beforeNodeId:a.beforeBoxNodeId,afterNodeId:a.afterBoxNodeId,state:"added",isRootFrame:i}}:{result:{rect:a.beforeBox,beforeNodeId:a.beforeBoxNodeId,afterNodeId:a.afterBoxNodeId,state:"removed",isRootFrame:i}}})}},[r,n,i,o])}({frameId:r,historyFrameId:eV,historySceneGraph:eS,view:M,displayableChanges:eU,activeNode:ep,selectedNode:eu});a.useEffect(()=>{if(!eu?.id||!eu?.zoomToSelection||!r||!eV)return;let{baseBeforeBox:e,baseAfterBox:n,resultBoxes:a}=function(e,r,n,a,i){let o=(0,p.UN)(),s=es(r,n,!0),l=es(o,e,!0),c=[];for(let e of a){let n=(0,j.lE)(i,r=>(0,m.dI)(r.change.guid)===e||(0,m.dI)(r.basis.guid)===e);if(n){let e=ec(n,{scene:r,baseBox:s},{scene:o,baseBox:l});c.push({beforeBox:e.before.box,afterBox:e.after.box,beforeBoxNodeId:e.before.id,afterBoxNodeId:e.after.id})}}return{baseBeforeBox:s,baseAfterBox:l,resultBoxes:c}}(r,eS,eV,[eu.id],eU),{beforeBox:i,afterBox:o}=a[0]??{},s=1/0,l=1/0,c=-1/0,d=-1/0;i&&e&&(i.x-=e.w/2,i.y-=e.h/2,s=Math.min(s,i.x),l=Math.min(l,i.y),c=Math.max(c,i.x+i.width),d=Math.max(d,i.y+i.height)),o&&n&&(o.x-=n.w/2,o.y-=n.h/2,s=Math.min(s,o.x),l=Math.min(l,o.y),c=Math.max(c,o.x+o.width),d=Math.max(d,o.y+o.height)),s!==1/0&&eI({x:s,y:l,width:c-s,height:d-l})},[eu,eI,r,eU]),a.useEffect(()=>()=>{eI(void 0)},[eI]);let eW=eG?{rootBox:eG,onBoxClicked:ek,onBoxHovered:eM,selectedNodeId:eu?.id,expandedLayers:eR,ignoreState:"added",interactive:M===A.Ss.SIDE_BY_SIDE,hoveredNodeIdAtom:e_,recordingKey:"before"}:null,eK=eH?{rootBox:eH,onBoxClicked:ek,onBoxHovered:eM,selectedNodeId:eu?.id,expandedLayers:eR,ignoreState:"removed",interactive:M===A.Ss.SIDE_BY_SIDE,hoveredNodeIdAtom:e_,recordingKey:"after"}:null,eY=!y&&!T;return a.createElement(Q.aF,{title:i,onClose:n},a.createElement("div",{className:en.xZ},a.createElement("div",{className:en.f},y&&!T&&a.createElement("div",{className:en.Lq},a.createElement(z.G,{hasLoadedDiffs:!1})),eY&&a.createElement("div",{className:en.ND},(d||eB)&&a.createElement("div",{className:_()(en._H,"devHandoffLeftPanel")},g&&a.createElement("div",{className:en.b6},a.createElement("div",{className:_()(en.Zl)},(0,C.tx)("collaboration.feedback.compare_changes_modal.history"),(0,b.kc)().dt_compare_changes_debug_helpers&&a.createElement(eE,{fileKey:D,setSelectedVersion:g})),a.createElement(et.aS,{versions:d||[],selectedVersion:h,setVersion:e=>{e.id!==h?.id&&(0,f.sx)("Diff Modal Selected Version Changed",{userId:k,fileKey:D,frameId:r,versionId:e.id}),E.sn.reset("dev_mode.compare_changes.switch_versions",e.id),E.sn.start("dev_mode.compare_changes.switch_versions",{key:e.id}),eo(!0),Z&&ee(!1),g(e)}})),a.createElement(Y.zg,{changesToDisplay:eU,selectedNode:eu?.id,expandedLayers:eR,setLayerExpanded:eD,onHover:eF,onClick:ex})),a.createElement("div",{className:en.vF},M===A.Ss.SIDE_BY_SIDE&&a.createElement("div",{className:en.m_},a.createElement("div",{className:en.ZJ},l?a.createElement("div",{className:en.K9},a.createElement("div",{className:en.gO},l)):h&&a.createElement(eh,{version:h,isSection:el})),a.createElement("div",{className:en.t4}),a.createElement("div",{className:en.ZJ},c?a.createElement("div",{className:en.K9},a.createElement("div",{className:en.gO},c)):a.createElement("div",{className:en.K9},(0,C.tx)("collaboration.feedback.compare_changes_modal.current_image_header")))),M===A.Ss.SIDE_BY_SIDE&&a.createElement("div",{className:en.Ik},a.createElement(A.qW,{zoomPercentageOptions:ea,resetStateOnChangeValue:r,compareThumbnailSource:$.FO.LEGO,zoomOnMousePointer:!0},a.createElement("div",{className:en.bV},eC?a.createElement(er.H1,{value:eW},a.createElement(Q.R$,{image:s,view:M,Overlay:er.q1})):a.createElement(Q.Qp,null),a.createElement("div",{className:en.mq}),eN?a.createElement(er.H1,{value:eK},a.createElement(Q.R$,{image:o,view:M,Overlay:er.q1})):a.createElement(Q.Qp,null)),eN&&eO())),M===A.Ss.OVERLAY&&a.createElement("div",{className:en.Ik},a.createElement(A.xY,{zoomPercentageOptions:ea,resetStateOnChangeValue:r,zoomOnMousePointer:!0},a.createElement("div",{className:en.Kk},eC?a.createElement(er.H1,{value:eW},a.createElement(Q.R$,{image:s,view:M,hideNoImageText:!0,Overlay:er.q1})):a.createElement(Q.Qp,null),G&&(eN?a.createElement(er.H1,{value:eK},a.createElement(Q.R$,{image:o,view:M,hideNoImageText:!0,opacity:x,Overlay:er.q1})):a.createElement(Q.Qp,null))),eN&&a.createElement(A.u,{opacity:x,isAfterImageShown:G,onToggleClick:()=>H(!G),onOpacityChange:e=>U(e.a)}),eN&&eO())),ev&&r&&eV&&a.createElement(ed,{frameId:r,historyFrameId:eV,historySceneGraph:eS,chunkChanges:ey,discreteDiffing:!!v,setChunkChanges:e=>{eo(!1),eb(e)}}))),T&&a.createElement("div",{className:en.Q9},(0,C.tx)("collaboration.feedback.compare_changes_modal.error")),a.createElement("div",null)),eY&&(ev?ey&&(0,j.mf)(ey)?a.createElement(q.Ox,{text:(0,C.t)("collaboration.feedback.compare_changes_modal.no_changes")}):a.createElement(ef,{layerChangeNodeId:X,layerBasisNodeId:W,layerBasisSceneGraph:eS,selectedVersion:h||void 0,displayableChanges:eU,showSelectLayerHint:!eu,preferencesApi:L??ew}):a.createElement(q.Ox,{text:""}))))}function ef({layerChangeNodeId:e,layerBasisNodeId:r,layerBasisSceneGraph:n,selectedVersion:i,displayableChanges:o,showSelectLayerHint:s,preferencesApi:l}){return s?a.createElement(q.Ox,{text:(0,C.t)("collaboration.feedback.compare_changes_modal.select_a_layer")}):a.createElement(q.wv,{layerChangeNodeId:e,layerBasisNodeId:r,layerBasisSceneGraph:n,selectedVersion:i,displayableChanges:o,preferencesApi:l})}function eE({fileKey:e,setSelectedVersion:r}){let n=(0,a.useRef)(null),[i,o]=(0,a.useState)("Upload local file");return a.createElement("label",{className:en.$8},i,a.createElement("input",{style:{display:"none"},ref:n,type:"file",accept:".fig",onChange:async()=>{let a=n.current?.files?.[0];if(a&&F.F){let n=await (0,x._G)(y.D,(0,b.kc)(),F.F,a),i=y.D.getState().mirror.appModel.currentPage,s=`${e}-${i}-debug`;G.Ht.set(s,Promise.resolve({key:s,canvas:n.bytes})),o(a.name),r({id:"debug"})}}}))}(0,W.Ju)(function(e){let{nodeId:r,layerName:n}=e,o=(0,i.wA)(),s=(0,i.d4)(e=>"fullscreen"===e.selectedView.view?e.selectedView.editorType:null),c=(0,i.d4)(e=>e.versionHistory.activeId),{Sprig:m}=(0,w.A)(),p=(0,B.tS)(),h=g.E1()?.toISOString(),_=(0,I.fp)(P.Ib)[1],{versions:b,versionsQueryLoaded:T}=(0,Q.DS)(r),v=(0,i.d4)(e=>e.selectedView.compareChangesVersionId??null),A=(0,i.d4)(e=>e.selectedView.compareChangesActivityId??null),N=(0,a.useMemo)(()=>v?b.find(e=>e.id===v)??null:A?b.find(e=>e.dev_mode_activity?.some(e=>e.id===A))??null:null,[b,v,A]),L=a.useCallback(e=>{!e&&(K(void 0),function(e,r,n,a){let i=y.D.getState().selectedView;r(D.$T({...i,compareChangesVersionId:e,filterStatusVersions:n,compareChangesNodeId:void 0,compareChangesActivityId:void 0}))}(e,o,!1,0),c&&c!==G.V_&&(o(k.Y6({mode:u.Oin.KEEP_UI,type:H.lF.SPINNER})),requestAnimationFrame(()=>{o((0,G.Nb)({id:c,nodeId:r??void 0,eventType:"LOAD_NEW_VERSION",versions:b}))}))),e!==v&&(K(void 0),function(e,r){let n=y.D.getState().selectedView;r(D.$T({...n,compareChangesVersionId:e,compareChangesActivityId:void 0}))}(e,o))},[o,v,c,b,r]),[O,R]=(0,I.fp)(G.tP),[F,x]=a.useState(!0),[U,V]=a.useState(!1),[W,K]=a.useState(void 0),Y=void 0!==W,[$,j]=a.useState(void 0),z=void 0!==$,q=(0,Q.t$)(N,r);a.useEffect(()=>{if(!F||!Y||!z||!T)return;x(!1);let e=E.sn.tryStop("dev_handoff.view_history",r);e&&(0,f.sx)("dev_handoff.view_history",{elapsedMs:e,origin:"cc_versions"},{forwardToDatadog:!0}),m("track","open_compare_changes",{origin:"cc_versions"})},[m,F,Y,z,T,r]);let J=(0,X.P)();a.useEffect(()=>{if(J&&T){if(N){v||L(N.id);return}if(0===b.length){K(null),L(void 0);return}if(h){for(let e of b)if(e.lastViewed){L(e?.id);return}}L(b[0]?.id)}},[J,h,A,N,v,L,b,T]),a.useEffect(()=>{if(q||!N)return;let e=performance.now();G._t(N,r)?.then(({canvas:r,key:n})=>{let a=performance.now();if(n===O)return;if(!u.glU.loadPartialHistoryScene(r))throw Error("Error loading history canvas");R(n);let i=performance.now(),o=Math.trunc(a-e),s=Math.trunc(i-a);f.sx("version_diffing_performance_metrics",{name:"historic_nodes_load_time",fileKey:p,fetchBytesDurationMs:o,loadNodesDurationMs:s,canvasBytesLength:r.byteLength,fetchMode:"node",entrypoint:"lego_layer"})}).catch(e=>{S.$D(l.FigmaTeam.DEVELOPER_TOOLS,Error(`Error fetching history canvas: ${e}`)),G.w_(N),V(!0)})},[q,N,O,R,s,p,r]),a.useEffect(()=>{let e=setTimeout(()=>{if(!q){K(void 0);return}K(ep({nodeId:r,documentIndex:d.x1,showError:()=>{K(null)}}))},Q._W);return()=>clearTimeout(e)},[r,N,q]),a.useEffect(()=>{let e=setTimeout(()=>{let e=()=>{j(void 0),(0,S.$D)(l.FigmaTeam.DEVELOPER_TOOLS,Error("Current image loading error")),V(!0)},n=ep({nodeId:r,showError:e});if(!n){e();return}j(n)},Q._W);return()=>clearTimeout(e)},[r]);let Z=a.useCallback(()=>{_(new Map),L(void 0),o(M.Ce())},[_,L,o]);return a.createElement(eg,{nodeId:r,onCloseModal:Z,modalTitle:n?(0,C.t)("collaboration.feedback.compare_changes_modal.layer_name_header",{layerName:n}):(0,C.t)("collaboration.feedback.compare_changes_modal.header"),currentImage:$,historicImage:W,versions:b,selectedVersion:N,setSelectedVersion:e=>{L(e.id)},renderLoadingBar:F,modalError:U,origin:"cc_versions"})},J.mH,W.ZU.YES),(0,W.Ju)(function(e){let{nodeId:r,detachedInfoStatus:n,origin:o}=e,s=(0,i.wA)(),{Sprig:l}=(0,w.A)(),[d,h]=a.useState(!0),[_,g]=a.useState(!1),[y,b]=a.useState(void 0),[I,T]=a.useState(void 0),v=void 0!==y,S=void 0!==I,A="loaded"===n.status,N=A?n.result:void 0;a.useEffect(()=>{if(!d||!v||!S||!A)return;h(!1);let e=E.sn.tryStop("dev_handoff.view_history",r);e&&(0,f.sx)("dev_handoff.view_history",{elapsedMs:e,origin:o},{forwardToDatadog:!0}),l("track","open_compare_changes",{origin:"cc_detached_component"})},[l,d,v,S,r,A,o]),a.useEffect(()=>{let e=setTimeout(()=>{if(!A||!N?.dataComponentId){b(void 0);return}b(ep({nodeId:N?.dataComponentId,detachedComponentsScene:N?.dataLocation==="temp-scene",showError:()=>{b(null)}}))},Q._W);return()=>clearTimeout(e)},[A,N]),a.useEffect(()=>{let e=setTimeout(()=>{let e=()=>{T(void 0),g(!0)},n=ep({nodeId:r,showError:e});if(!n){e();return}T(n)},Q._W);return()=>clearTimeout(e)},[r]);let L=a.useCallback(()=>{s(M.Ce())},[s]),O=(0,C.t)("collaboration.feedback.compare_changes_modal.header"),R=(0,C.tx)("inspect_panel.node_type.main_component"),P={nodeId:N?.dataComponentId??m.AD,sceneGraph:new p.qo(N?.dataLocation==="temp-scene"?u.juq.DETACHED_COMPONENTS:c.G)};return a.createElement(eg,{nodeId:r,onCloseModal:L,modalTitle:O,currentImage:I,historicImage:y,historicHeader:R,renderLoadingBar:d,modalError:_,discreteDiffingInput:P})},J.dF,W.ZU.YES),(0,W.Ju)(function(e){let{changeNodeId:r,basisNodeId:n,initialSelectedNodeId:o,isComparingOverrides:s=!1}=e,l=(0,i.wA)(),{Sprig:d}=(0,w.A)(),u=em(r),m=em(n),[h,_]=a.useState(!1),[g,y]=a.useState(void 0),[b,I]=a.useState(void 0),T=void 0!==g,v=void 0!==b;a.useEffect(()=>{if(!T||!v)return;let e=E.sn.tryStop("dev_handoff.view_history",r),n=s?"cc_overrides":"cc_nodes";e&&(0,f.sx)("dev_handoff.view_history",{elapsedMs:e,origin:n},{forwardToDatadog:!0}),d("track","open_compare_changes",{origin:n})},[d,s,T,v,r]),a.useEffect(()=>{y(ep({nodeId:n,showError:()=>y(null)}))},[n]),a.useEffect(()=>{let e=()=>{I(void 0),_(!0)},n=ep({nodeId:r,showError:e});if(!n){e();return}I(n)},[r]);let S=a.useCallback(()=>{l(M.Ce())},[l]),A=(0,C.t)("collaboration.feedback.compare_changes_modal.header"),N={nodeId:n,sceneGraph:new p.qo(c.G)};return u.node&&m.node?a.createElement(eg,{nodeId:r,onCloseModal:S,modalTitle:A,currentImage:b,historicImage:g,currentHeader:eu(u.node,u.backingSymbolData),historicHeader:eu(m.node,m.backingSymbolData),renderLoadingBar:!1,modalError:h,discreteDiffingInput:N,initialSelectedNodeId:o}):null},J.Dx,W.ZU.YES)},778744:(e,r,n)=>{n.d(r,{Ec:()=>U});var a=n(411855),i=n(188507);n(299321);var o=n(629019),s=n.n(o),l=n(776250),c=n(153234),d=n(522739),u=n(163023),m=n(939863),p=n(501114),h=n(677664);n(809831);var _=n(450225);n(356390);var g=n(321487),f=n(99506),E=n(288641),y=n(502442);let b="hyperlink_popup--icon--7YW8G",I="hyperlink_popup--inlineText--U1QY9",T="hyperlink_popup--path--UM5d- hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9",v="hyperlink_popup--text--kzWyq hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9",S="hyperlink_popup--clickable--VAzTE",w="hyperlink_popup--divider--NSUKF",A="hyperlink_popup--open--EsmHi",N="hyperlink_popup--edit--Q80cZ";var C=n(97648),L=n(626744),O=n(677752),R=n(430602),P=n(614603),D=n(143091),k=n(350057),M=n(503878),F=n(667875);function x(e){let r,n;let o=(0,i.wA)(),x=r=>{o((0,h.RK)({rawInput:e.urlString,event:r})),e.immediatelyDismissHyperlinkPopup&&e.immediatelyDismissHyperlinkPopup()},U=r=>{e.data.type===y.F.MAILTO||e.data.type===y.F.TEL?(0,E.UA)(o,e.data.url.pathname,"HyperlinkPopup"):console.error("We don't yet enable copy for other hyperlinks"),e.immediatelyDismissHyperlinkPopup&&e.immediatelyDismissHyperlinkPopup(),r.stopPropagation()},B=r=>{e.immediatelyDismissHyperlinkPopup&&e.immediatelyDismissHyperlinkPopup(),e.showHyperlinkEditor(),(0,l.sx)("Show Hyperlink Editor",{source:"HyperlinkPopup"}),r.stopPropagation()},V=r=>{(e.data.type===y.F.GENERIC||e.data.type===y.F.FIGMA_FILE||e.data.type===y.F.FIGMA_PROTOTYPE||e.data.type===y.F.FIGMA_VERSION)&&e.getLinkMetadata&&o(e.getLinkMetadata({clipboardText:e.data.url.toString(),url:e.data.url.toString(),isTextIframe:!1,entrypoint:_.WJ.MODAL}))},G=r=>{e.data.type===y.F.MAILTO||e.data.type===y.F.TEL?U(r):x(r)},{data:H}=e;switch(H.type){case y.F.GENERIC:case y.F.FIGMA_FILE:case y.F.FIGMA_PROTOTYPE:case y.F.FIGMA_VERSION:let W=H.url.host.replace(/http(s)?(:)?(\/\/)?|(\/\/)?(www\.)?/,""),K=H.url.pathname+H.url.search+H.url.hash,Y=K.split(/\//),$="design"===Y[1]||"board"===Y[1]||"proto"===Y[1],j="board"===Y[1];switch(H.type){case y.F.GENERIC:n=D.A;break;case y.F.FIGMA_FILE:case y.F.FIGMA_VERSION:n=$?j?C.A:O.A:D.A;break;case y.F.FIGMA_PROTOTYPE:n=M.A}if((0,g.F4)(H.url.host)&&$&&Y[2]&&Y[3]){let e=decodeURI(H.url.pathname.split(/\//)[3]).replace(/-/g," ");r=a.createElement("div",{className:v},e)}else r=a.createElement(a.Fragment,null,a.createElement("div",{className:"hyperlink_popup--domain--k0xkl hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9"},W),K&&"/"!==K&&a.createElement("div",{className:T},K));break;case y.F.PAGE:n=R.A,r=a.createElement("div",{className:v},H.text);break;case y.F.FRAME:let z=H.text;z&&e.editorType===f._Y.SITES&&(z="/"===z?(0,m.t)("sites.panel.home"):z),n=P.A,r=a.createElement(a.Fragment,null,a.createElement("div",{className:v},z),H.secondaryText&&a.createElement("div",{className:"hyperlink_popup--secondaryText--bLzWO hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9"},a.createElement(u.B,{className:"hyperlink_popup--pageSeparator--SAx-p",svg:L.A}),H.secondaryText));break;case y.F.INVALID:n=D.A,r=a.createElement("div",{className:v},(0,m.tx)("hyperlink.invalid_link",{link:H.urlString}));break;case y.F.MISSING:case y.F.NOT_LOADED:n=D.A,r=a.createElement("div",{className:v},H.text);break;case y.F.MAILTO:r=a.createElement("div",{className:T},H.url.pathname),n=k.A;break;case y.F.TEL:n=F.A,r=a.createElement("div",{className:T},H.url.pathname)}let q=e.canEdit,X=e.canEdit&&(H.type===y.F.GENERIC||H.type===y.F.FIGMA_FILE||H.type===y.F.FIGMA_VERSION||H.type===y.F.FIGMA_PROTOTYPE),J=function(){switch(e.data.type){case y.F.GENERIC:case y.F.FIGMA_FILE:case y.F.FIGMA_PROTOTYPE:return(0,m.t)("hyperlink.prefix.open");case y.F.FIGMA_VERSION:return(0,m.t)("hyperlink.prefix.open_past_version");case y.F.PAGE:case y.F.FRAME:return(0,m.t)("hyperlink.prefix.go_to");case y.F.MAILTO:case y.F.TEL:return(0,m.t)("hyperlink.prefix.email");case y.F.INVALID:case y.F.MISSING:case y.F.NOT_LOADED:return null}}(),Z=(()=>{switch(e.data.type){case y.F.MAILTO:return(0,m.t)("hyperlink.send_mail");case y.F.TEL:return(0,m.t)("hyperlink.call_telephone");default:return null}})(),Q=(()=>{if(e.editorType===f._Y.SITES)switch(e.data.type){case y.F.GENERIC:case y.F.FIGMA_FILE:case y.F.FIGMA_PROTOTYPE:return(0,m.tx)("hyperlink.prefix.open")}return a.createElement(a.Fragment,null,J?a.createElement("span",{className:I},J," "):null,r)})(),ee=(r,i)=>a.createElement(d.GG,{type:"button",className:s()({[S]:r,[A]:!r}),onAuxClick:G,onMouseDown:G,recordingKey:e.recordingKey},r&&a.createElement(u.B,{className:b,style:p.sx.if(n===C.A,p.sx.add({transform:"rotate(90deg)"})).$,svg:n}),i),et=a.createElement(d.GG,{type:"button",className:`${A} ${S}`,onAuxClick:x,onMouseDown:x,recordingKey:c.Pt(e,"secondaryButton")},Z),er=(r,n)=>a.createElement(d.GG,{type:"button",recordingKey:c.Pt(e,"editHyperlinkPopup"),className:s()({[N]:!r,"hyperlink_popup--editContainer--W1EMp":r,[S]:r}),onMouseDown:B},r&&a.createElement(a.Fragment,null,a.createElement(u.B,{className:b,svg:D.A}),a.createElement("div",{className:s()(I,"hyperlink_popup--editText--IGsdw")},(0,m.tx)("hyperlink.edit"))),n);return a.createElement("div",{role:"none",className:"hyperlink_popup--popup--fByJA _overlayBase--_overlayBase--Rkj8l",onMouseEnter:()=>{e.onMouseEnter&&e.onMouseEnter()}},(()=>{switch(e.editorType){case f._Y.SITES:switch(H.type){case y.F.GENERIC:case y.F.FIGMA_FILE:case y.F.FIGMA_PROTOTYPE:return a.createElement(a.Fragment,null,q&&a.createElement(a.Fragment,null,er(!0,r),a.createElement("div",{className:w})),ee(!1,Q));default:return a.createElement(a.Fragment,null,ee(!0,Q),q&&a.createElement(a.Fragment,null,a.createElement("div",{className:w}),er(!1,(0,m.tx)("hyperlink.edit"))))}case f._Y.WHITEBOARD:return a.createElement(a.Fragment,null,ee(!0,Q),q&&a.createElement(a.Fragment,null,a.createElement("div",{className:w}),er(!1,(0,m.tx)("hyperlink.edit"))),X&&a.createElement(a.Fragment,null,a.createElement("div",{className:w}),a.createElement(d.D8,{dataTestId:"hyperlink.preview",role:"button",recordingKey:c.Pt(e,"unfurlHyperlinkPopup"),className:N,onMouseDown:V},(0,m.tx)("hyperlink.create_preview"))));default:return a.createElement(a.Fragment,null,ee(!0,Q),Z&&a.createElement(a.Fragment,null,a.createElement("div",{className:w}),et),q&&a.createElement(a.Fragment,null,a.createElement("div",{className:w}),er(!1,(0,m.tx)("hyperlink.edit"))))}})())}function U(e){let{data:r,editorType:n,urlString:i,canEdit:o,onMouseEnter:s,immediatelyDismissHyperlinkPopup:l,getLinkMetadata:c,showHyperlinkEditor:d}=e;return a.createElement(x,{data:r,editorType:n,urlString:i,canEdit:o,recordingKey:"hyperlinkPopup",onMouseEnter:s,immediatelyDismissHyperlinkPopup:l,getLinkMetadata:c,showHyperlinkEditor:d})}},811641:(e,r,n)=>{n.d(r,{Jq:()=>u});var a=n(411855),i=n(629019),o=n.n(i),s=n(153234),l=n(743282),c=n(154500);let d=(0,l.g)();var u=(e=>(e.ESSENTIAL="essential",e.TOOLS="tools",e.VIEW="view",e.ZOOM="zoom",e.TEXT="text",e.SHAPE="shape",e.SELECT="select",e.CURSOR="cursor",e.EDIT="edit",e.COPY="copy",e.TRANSFORM="transform",e.ARRANGE="arrange",e.COMPONENTS="components",e.ADVANCED="advanced",e.ACCESSIBILITY="accessibility",e))(u||{});a.forwardRef((e,r)=>{let{tabInfo:n,completedTabs:i,onNavClick:o}=e;return a.createElement(a.Fragment,null,n.map((s,l)=>a.createElement(m,{key:s.id,tabInfo:n,completedTabs:i,onNavClick:o,recordingKey:e.recordingKey,tab:s,index:l,ref:r})))});let m=a.forwardRef((e,r)=>{let{tab:n,index:i,onNavClick:l,completedTabs:u}=e,m=s.rf(s.Pt(e,n.id),"click",e=>{l(n.id)});return void 0!==n.active?a.createElement("div",{role:"tab",ref:e=>{r.current||(r.current=[]),r.current[i]=e},"aria-selected":n.active,"aria-controls":d,key:n.id,id:n.id,className:n.className,"data-completed":u[n.id],onClick:m,tabIndex:-1},n.displayName):a.createElement("div",{key:n.id,className:o()(n.className,c.GM)})})},624488:(e,r,n)=>{n.d(r,{k:()=>a}),n(411855),n(188507),n(629019),n(966712),n(139588),n(125708),n(818),n(226055),n(29680),n(713318),n(381915),n(187882),n(544403),n(837746);let a="left-panel-container"},187882:(e,r,n)=>{n.d(r,{Ye:()=>m,n0:()=>p}),n(411855),n(188507);var a=n(299321);n(275556),n(904669),n(776250),n(179479),n(358145);var i=n(374626),o=n(38580);n(438741),n(939863),n(392592);var s=n(226055);n(83909),n(356390),n(617453);var l=n(396697);n(843495);var c=n(29680);n(396462);var d=n(940596),u=n(100197);function m(){let e=(0,s.GS)(),r=!(0,u.ut)(a.Ez5?.editorPreferences().showSidebar,l.R.showSidebar),n=(0,u.ut)(a.Ez5?.uiState().leftPanelCollapsedUI3,!l.R.showSidebar);return e?n:r}function p(){return(0,c.p8)("pagesList")}n(359108),(0,i.Iz)(e=>(0,d.Wh)(()=>(0,o.eU)(e))),(0,d.Wh)(()=>(0,o.eU)(!1))},664457:(e,r,n)=>{n.d(r,{j:()=>_});var a=n(411855),i=n(299321),o=n(794272),s=n(966712),l=n(268537),c=n(939863),d=n(733169),u=n(416095),m=n(837287);let p=l.ms,h=l.c$,_="component-insert-leaf-context-menu";a.memo(function(){let{dropdownShown:e,defaultFileKeys:r,openFileKey:n}=(0,o.R)(e=>({dropdownShown:e.dropdownShown,defaultFileKeys:e.library.defaultPublished.fileKeys,openFileKey:e.openFile?.key||null})),l=e?.data?.component,g=l?.file_key===n,f=(0,d.bL)({libraryKey:l?.library_key,nodeId:l?.node_id,disabled:!(0,s.kc)().dse_lk_go_to_source});if(!e||e.type!==_||!l||r.includes(l.file_key))return null;let E=f.data;return!(0,s.kc)().dse_lk_go_to_source||g||E?.link?a.createElement(p,{className:m.H,style:e.data.position},g?a.createElement(h,{recordingKey:`goToLocalComponent.${l.node_id}`,onClick:()=>i.glU.goToSymbolOrStateGroupById(l.node_id,!1)},(0,c.tx)("design_systems.instance_swap_picker.go_to_main_component")):a.createElement(h,{recordingKey:`goToSubscribedComponent.${l.node_id}`,href:(0,s.kc)().dse_lk_go_to_source?E?.link:(0,u.Gd)(l),target:"_blank"},(0,c.tx)("design_systems.instance_swap_picker.go_to_main_component"))):null})},756159:(e,r,n)=>{n.d(r,{Cl:()=>D,I1:()=>C,RG:()=>R,jz:()=>M,pz:()=>L,yP:()=>O});var a=n(259120),i=n(89865),o=n.n(i),s=n(966712),l=n(38580),c=n(374626),d=n(684107),u=n(711525),m=n(860601),p=n(696673),h=n(999881),_=n(875847),g=n(218103),f=n(94968),E=n(896446),y=n(49921),b=n(289704),I=n(335682),T=n(529928),v=n(279453),S=n(243987),w=n(790202),A=n(984968),N=n(173454);let C=(0,l.eU)(e=>{let r=e(I.yV);if(!r)return(0,u.Xm)();let n=r.parentOrgId,a=!!r.teamId,i=(0,_.T9)(r?.project),o=e((0,d.sj)({fileKey:r.key??"",teamId:r.teamId??"-1",workspaceId:r.team?.workspaceId??null,orgId:n,group:(0,h.M)()??null})),s=e(p.JB),l=e(A.Me),c=(0,S.w5)(l);return(0,w.gM)(o,a,i,s,n,c)}),L=(0,T.OX)(N.o.LIBRARY,"SET_LIBRARY_PUBLISHING_MODE"),O=(0,T.bt)(e=>e.openFile?.publishedHubFile?.id),R=(0,T.bt)(e=>e.openFile?.publishedHubFile?.libraryKey?(0,a.l)(e.openFile.publishedHubFile.libraryKey):null),P=(0,T.bt)(e=>e.openFile?.editorType),D=(0,l.eU)(null),k=(e,r)=>r,M=(()=>{let e=(0,c.M2)((0,l.eU)(e=>{let r=e(O),n=e(P),a={variableSets:{},variables:{},styles:{},components:{},stateGroups:{},modules:{}};if(!r||!(0,s.kc)().cmty_lib_admin_publish&&"slides"!==n)return a;let i=e(v.vsj.Query({hubFileId:r})),l=(0,g.J)(i),c=(0,E.o)(i),d=e(v.Acj.Query({hubFileId:r})),u=(0,y.F)(d),m=e(v.eHy.Query({hubFileId:r})),p=(0,b.kX)({type:"community",value:m},!0),h=(0,b.cM)({type:"community",value:m},!0),_=e(v.CfA.Query({hubFileId:r})),I=(0,f.i)(_);return a.variables=o()(h,"node_id"),a.variableSets=o()(p,"node_id"),a.styles=o()(u,"node_id"),a.components=o()(l,"node_id"),a.stateGroups=o()(c,"node_id"),a.modules=o()(I,"node_id"),a},m.lQ)),r=(0,T.Pj)(e,"SET_OPEN_HUB_FILE_PUBLISHED_LIVEGRAPH",{variableSets:{},variables:{},styles:{},components:{},stateGroups:{},modules:{}}),n=(0,c.FZ)(r,k);return(0,T.S9)(n,r.reducer)})()},140796:(e,r,n)=>{n.d(r,{E1:()=>y,aU:()=>E});var a=n(411855),i=n(188507),o=n(776250),s=n(320063),l=n(255942),c=n(723325),d=n(32863),u=n(582064),m=n(356390),p=n(283942),h=n(335682),_=n(743415),g=n(828811);let f=e=>!!e.isNewAssetsPanel;function E(e){let{isVisible:r,query:n,placeholder:c,onChange:E,className:y,extraSpacing:b,hideXIcon:I,hideSearchIcon:T,isFigjam:v,isLibraryModalUi3:S,autofocus:w,selectOnFocus:A,entryPointForTracking:N,forwardedRef:C,recordingKey:L}=e,O=(0,i.wA)(),R=(0,h.q5)(),P=(0,i.d4)(e=>e.search.sessionId),D=(0,_.k)(),k=a.useRef(null),M=function({isVisible:e,autofocus:r,selectOnFocus:n,ref:i}){return a.useCallback(()=>{i?.current&&e&&r&&i.current.focus(n)},[r,e,i,n])}({isVisible:r,autofocus:w,selectOnFocus:A,ref:k}),F=a.useCallback(e=>!!(e.altKey&&m.Y5.isReady())&&(0,p.f7)(e,!0),[]);(0,s.h)(()=>{function e(){O(u.ky())}return M(),e(),e});let x=a.useCallback(()=>{"editor:assets_panel"===N&&o.az.trackDefinedEvent("assets_panel.search_cleared",{searchQuery:n,assetsPanelVersion:D,fileKey:R?.key,fileTeamId:R?.teamId??void 0,fileOrgId:R?.parentOrgId??void 0}),f(e)?e.onClearSearch():E(""),O(u.ky())},[N,e,O,n,D,R?.key,R?.teamId,R?.parentOrgId,E]),U=a.useCallback(e=>{N&&(""===e&&P?O(u.ky()):""===e||P||O(u.Dy({entryPoint:N})),E(e))},[O,N,P,E]),B=a.useCallback(()=>{""===n||P||O(u.Dy({entryPoint:N})),"editor:assets_panel"===N&&o.az.trackDefinedEvent("assets_panel.search_focused",{assetsPanelVersion:D,fileKey:R?.key,fileTeamId:R?.teamId??void 0,fileOrgId:R?.parentOrgId??void 0}),f(e)&&e.onFocus()},[N,R?.key,R?.parentOrgId,R?.teamId,e,D,P,O,n]),V=a.useCallback(()=>{"editor:assets_panel"===N&&o.az.trackDefinedEvent("assets_panel.search_unfocused",{assetsPanelVersion:D,fileKey:R?.key,fileTeamId:R?.teamId??void 0,fileOrgId:R?.parentOrgId??void 0}),f(e)&&e.onBlur()},[N,R?.key,R?.parentOrgId,R?.teamId,e,D]);return v||S?a.createElement(d.IW,{ref:(0,l.A)(k,C),className:y,focusOnMount:!1,query:n,placeholder:c,clearSearch:x,onChange:U,onFocus:B,onBlur:V,isKeyDownHandled:F,hideXIcon:I,recordingKey:L,withUI3Icon:S}):f(e)?a.createElement(g.K,{ref:(0,l.A)(k,C),onFocus:B,onBlur:V,focusOnMount:!1,query:n,clearSearch:x,onChange:U,placeholder:e.placeholder,isKeyDownHandled:F,recordingKey:L}):a.createElement(d.Lp,{ref:(0,l.A)(k,C),className:y,focusOnMount:!1,extraSpacing:b,query:n,placeholder:c,clearSearch:x,onChange:U,onFocus:B,onBlur:V,isKeyDownHandled:F,hideXIcon:I,hideSearchIcon:T,recordingKey:L,dataTestId:"asset-panel-search-bar-input"})}function y({autofocus:e,className:r,column:n,extraSpacing:i,hideSearchIcon:o,hideXIcon:d,isFigjam:u,isVisible:m,onChange:p,path:h,placeholder:_,query:g,recordingKey:f,selectOnFocus:y,entryPointForTracking:b,forwardedRef:I,...T}){let v=a.useRef(null),S=a.useCallback(()=>{y&&v.current?.select()},[y]),{setKeyboardNavigationElement:w}=(0,c.M3)({path:h,column:n,disabled:!m,onFocus:S});return(0,s.h)(()=>{v.current&&w?.(v.current.searchInput)}),a.createElement(E,{forwardedRef:(0,l.A)(v,I),autofocus:e,className:r,extraSpacing:i,hideSearchIcon:o,hideXIcon:d,isFigjam:u,isVisible:m,onChange:p,placeholder:_,query:g,selectOnFocus:y,entryPointForTracking:b,setKeyboardNavigationElement:w,recordingKey:f,...T})}},448406:(e,r,n)=>{n.d(r,{PI:()=>l,rp:()=>s});var a=n(91408),i=n(173454),o=n(262311);(0,a.hG)(o.ZV),(0,a.hG)(o.FX);var s=(e=>(e.WIDE="WIDE",e.SMALL="SMALL",e.NORMAL="NORMAL",e.SLIDES_ASSETS="SLIDES_ASSETS",e))(s||{});function l(e,r){let n=!0,a=!0;for(let r of e){let e,o;if(r.type!==i.PW.STYLE){if("min_node_width"in r)e=r.min_node_width,o=r.min_node_height;else{if(!("width"in r))continue;e=r.width,o=r.height}if(!e||!o)return"NORMAL";if(e<3*o&&(n=!1),(e>64||o>64)&&(a=!1),!n&&!a)break}}return n?"WIDE":a&&!r?"SMALL":"NORMAL"}},48515:(e,r,n)=>{n.d(r,{I:()=>a});var a=(e=>(e.ALL="all",e.RECENT="recent",e.LOCAL="local",e.FILE="file",e.SITE_KIT="site kit",e))(a||{})},734013:(e,r,n)=>{n.d(r,{DG:()=>i}),n(411855);var a=n(286640);function i(e,r){null!==a.x4&&a.x4.setItem(`library-section-expanded-${e}`,JSON.stringify(r))}},135076:(e,r,n)=>{n.d(r,{U:()=>a});let a=n(411855).createContext(null)},180715:(e,r,n)=>{n.d(r,{T:()=>a});let a=(0,n(38580).eU)(!1)},311692:(e,r,n)=>{var a=n(411855),i=n(109388),o=n(188507),s=n(776250),l=n(91408),c=n(895235),d=n(320063),u=n(646240),m=n(374626),p=n(498750),h=n(572206),_=n(723325),g=n(154254),f=n(939863),E=n(154483),y=n(175290),b=n(612776),I=n(286954),T=n(632430),v=n(452246),S=n(662275),w=n(44892),A=n(788744),N=n(756317),C=n(146817),L=n(279260),O=n(473744),R=n(151283),P=n(534804),D=n(356390),k=n(335682),M=n(575288),F=n(416095),x=n(933342),U=n(267931),B=n(284321),V=n(173454),G=n(809073),H=n(237870),W=n(811529),K=n(743415),Y=n(875387),$=n(662163),j=n(239737),z=n(746806),q=n(66742),X=n(151538),J=n(180715),Z=n(776018),Q=n(837746);let ee=(0,l.jz)(Q.LdP),et=(0,l.jz)(Q.wkK),er=(0,E.fv)();(0,H.Ju)(function({asset:e,searchSessionId:r,query:n,sectionPosition:l,sectionNameForTracking:E,assetTypeDropdownSelection:H,sectionDepth:Q,containerWidth:en,onGetKeyboardNavigationItemById:ea}){let ei=a.useRef(null),eo=(0,u.Xr)(J.T),es=a.useMemo(()=>er(e),[e]),el=(0,L.C)(e.library_key),ec=(0,m.md)(Y.TG),ed=(0,m.md)($.xL),eu=!!(0,b.GM)()()&&ed.includes(es),em=(0,W._9)(es,!0,"asset_panel_visual_assets_flyout_insert"),ep=(0,A.mq)(es),eh=(0,k.q5)(),e_=(0,o.wA)(),eg=(0,o.d4)(e=>(0,B.e_)(e).local.thumbnails),ef=(0,U.H)(),eE=(0,o.d4)(e=>e.instanceSwapPickerShown),ey=(0,K.k)(),eb=(0,x.tM)();(0,d.h)(()=>{s.az.trackDefinedEvent("assets_panel.flyout_opened",{assetKey:(0,C.V)(e),assetType:(0,C.q)(e.type),assetLibraryKey:e.library_key,isLocal:e.isLocal,fileParentOrgId:eh?.parentOrgId??void 0,fileTeamId:eh?.teamId??void 0,assetsPanelVersion:ey,partnerType:(0,R.X)(e.library_key),queryId:eb??void 0})}),(0,d.h)(()=>()=>{e_((0,I.vq)()),eo(!1)}),a.useEffect(()=>{if(!(0,F.dx)(e)||!e.isLocal)return;let r=e.node_id?eg[e.node_id]:null,n=e.type===V.PW.COMPONENT?e.content_hash:e.version;r?.content_hash!==n&&requestAnimationFrame(()=>{let r=(0,w.r2)(e.node_id);null!=r&&e_(v.T1({thumbnails:[{nodeId:e.node_id,url:r,type:e.type}],source:V.$1.LOCAL}))})},[e,e_,eg]);let eI=a.useCallback(()=>{requestAnimationFrame(()=>ei?.current?.ensureModalOnScreen())},[]),eT=a.useCallback(()=>{eE?.isShown&&e_((0,I.vq)())},[e_,eE]),ev=(0,P.Hu)(e.library_key),eS=(0,j.Nv)(!0),ew=a.useCallback(()=>{if("loaded"!==el.status)return;let a=D.Y5.getViewportInfo(),i={canvasPosition:{x:a.offsetX,y:a.offsetY},insertAsChildOfCanvas:!0,percentageOffset:new h.Mi(.5,.5),storeInRecentsKey:G.$A.Design,useSmartPositioning:!0,fromPlayground:el.data};e.type===V.PW.COMPONENT?(e_((0,T.Yf)({item:e,...i})),eu&&em(!0)):e.type===V.PW.STATE_GROUP?e_((0,T.b$)({item:e,...i})):e.type===V.PW.MODULE&&e_((0,T.Bs)({item:e,...i,insertionCallback:()=>D.Y5.triggerAction("commit")}));let o={aiResultsEnabled:eS,assetKey:(0,F.Av)(e),assetType:(0,C.q)(e.type),queryId:eb??void 0,scoreAi:e.ai_score??void 0,scoreLexical:e.lexical_score??void 0,assetTypeDropdownSelection:H,assetsPanelVersion:ey,fileKey:eh?.key??void 0,fileParentOrgId:eh?.parentOrgId??void 0,fileTeamId:eh?.teamId??void 0,isExample:(0,O.o)(e,ec),libraryKey:e.library_key,partnerType:(0,R.X)(e.library_key),sectionDepth:Q,sourceSection:E??void 0};s.az.trackDefinedEvent("assets_panel.flyout_insert",{...o,libraryType:ev,searchSessionId:r??void 0,searchQuery:n,sectionPosition:l}),s.az.trackDefinedEvent("asset_search.result_inserted",{...o,libraryType:ev,position:l,query:n,sessionId:r??void 0,entryPoint:"assets-panel"})},[e,H,el,e_,eS,ev,eh?.key,eh?.parentOrgId,eh?.teamId,ec,n,eb,r,Q,E,l,ey,eu,em]);a.useEffect(()=>{let e=e=>{let r=i.findDOMNode(ei.current?.getEl());if(r){if(!r.contains(e.target)){if(eo(!1),(0,c.NX)(e.target,"data-does-not-dismiss-component-flyout"))return;e_(S.ES({type:Z.V}));return}eo(!0)}};return document.addEventListener("pointerdown",e),()=>{document.removeEventListener("pointerdown",e)}},[e_,eo]);let eA=a.useCallback(r=>{let n=r.event.code??r.event.key,a=(0,C.V)(e),i=ea?.(a);if(!i)return;let o=r.event.keyCode===p.Uz.TAB,s=r.event.shiftKey;if((0,_.c2)(r.event,!1)){i.getItemAbove()?.focus(),r.accept();return}if((0,_.Nt)(r.event,!1)){i.getItemBelow()?.focus(),r.accept();return}if((0,_.yn)(n,!1)||o&&s){i.getItemToTheLeft()?.focus(),r.accept();return}if((0,_.lv)(n,!1)||o&&!s){i.getItemToTheRight()?.focus(),r.accept();return}if("Enter"===n){ew(),r.accept();return}},[e,ew,ea]);var eN=a.createElement("div",{className:g.cx.minW0.flex1.$},a.createElement("div",null,(0,f.t)("design_systems.assets_panel.details")),a.createElement(y.Y,{spacing:0,direction:"horizontal"},e&&a.createElement(q.Q,{assetFileKey:es,assetLibraryKey:e.library_key,assetNodeId:e.node_id}),ep&&a.createElement("div",{className:g.cx.pr4.$},a.createElement(N.KP,{fileKey:es,variant:"secondary",tooltipLocation:"below"}))));let[eC,eL,eO]=(0,M.J)(!1),eR=a.useCallback(()=>{eC.current&&ef()},[eC,ef]);return"loaded"!==el.status?null:a.createElement(z.vx,{alwaysEnsureModalOnScreen:!0,allowAutoExpanding:!0,canRenderBelowViewport:!1,headerSize:"large",initialPosition:new h.Mi(en+1,ee),onClick:eT,onClose:ef,onKeyDown:eA,title:eN,truncateTitleText:!0,initialWidth:et,ref:ei,dataTestId:"component-flyout-modal",hidden:eL,noCancelDragAndDrop:!0},a.createElement("div",{"data-not-draggable":!0},a.createElement(X.V,{asset:e,onLoaded:eI,onInsert:ew,flyoutHidden:eL,onCloseIfHidden:eR,setFlyoutHidden:eO,sectionPosition:l,sectionNameForTracking:E,sectionDepth:Q})))},Z.V)},790429:(e,r,n)=>{n.d(r,{J:()=>u,S:()=>m});var a=n(411855),i=n(188507),o=n(662275),s=n(284321),l=n(49116),c=n(173454),d=n(776018);function u(e,r,n){let s=(0,i.wA)(),l=(0,i.d4)(e=>e.modalShown);return a.useCallback(()=>{l?.type===d.V&&l?.data&&s(o.hm({data:{...l?.data,asset:e,sectionPosition:r,sectionNameForTracking:n},type:d.V}))},[e,s,l,r,n])}function m(e){let r=(0,i.d4)(l.Ls),n=(0,i.d4)(l.m3),a=(0,i.d4)(s.MH),o=(0,i.d4)(s.dM);if(e.type===c.PW.COMPONENT){let n=e.isLocal?a[e.node_id]:e.component_key?r[e.component_key]:void 0;return!!n&&n.content_hash!==e.content_hash}if(e.type===c.PW.STATE_GROUP){let r=e.isLocal?o[e.node_id]:e.key?n[e.key]:void 0;return!!r&&r.version!==e.version}return!1}},811529:(e,r,n)=>{n.d(r,{ND:()=>v,Sg:()=>T,_9:()=>O,cx:()=>R,ff:()=>S,mZ:()=>b,o6:()=>N,sJ:()=>w});var a=n(411855),i=n(188507),o=n(943632),s=n(776250),l=n(374626),c=n(632430),d=n(226055),u=n(44892),m=n(473744),p=n(335682),h=n(416095),_=n(933342),g=n(173454),f=n(875387),E=n(479296),y=n(743415);let b="assets-panel",I=()=>({subscribedFiles:[],fileKeyToSubscribedItems:{}}),T=(0,E.n)((e,r)=>{let n=v((0,u.Jl)(e)),a=v(r,e);return{allItems:[].concat(n.allItems,a.allItems),publishedItems:[].concat(n.publishedItems,a.publishedItems),privateItems:[].concat(n.privateItems,a.privateItems),erroneousItems:[].concat(n.erroneousItems,a.erroneousItems),numUpdates:n.numUpdates+a.numUpdates,numPublished:n.numPublished+a.numPublished}});function v(e,r,n){let a=(0,u.y3)(e),i=[],o=[],s=[],l=n?Object.values(n):[],c=0,d=0,m=new Set;if(r)for(let e of Object.keys(r)){let n=r[e],a=n.containing_frame?.containingStateGroup?.nodeId;a&&n.old_key&&m.add(a)}for(let e of a)if(e.deletedFromSceneGraph||(i.push(e),e.status===g.E8.NOT_STAGED||e.status===g.E8.DELETED?s.push(e):o.push(e)),(0,u.UB)(e.status)&&d++,e.status!==g.E8.CURRENT&&e.status!==g.E8.NOT_STAGED||(e.type===g.PW.COMPONENT||e.type===g.PW.STATE_GROUP)&&(0,h.Hb)(e.status)&&e.old_key||e.type===g.PW.STATE_GROUP&&(0,h.Hb)(e.status)&&m.has(e.node_id)){c++;continue}return{allItems:i,publishedItems:o,privateItems:s,erroneousItems:l,numUpdates:c,numPublished:d}}function S(e,r,n,a,i,o){var s;let l=A(e.published.stateGroups,n,e,r,!!a),c=(s=!!a,A(e.published.components,n,e,r,s,e=>e.containing_frame?.containingStateGroup==null)),d={},u={};for(let e of c.subscribedFiles)(!i||e.key===i)&&(o&&e.key===o||(d[e.key]=e,u[e.key]=(u[e.key]||[]).concat(c.fileKeyToSubscribedItems[e.key])));for(let e of l.subscribedFiles)(!i||e.key===i)&&(o&&e.key===o||(d[e.key]=e,u[e.key]=(u[e.key]||[]).concat(l.fileKeyToSubscribedItems[e.key])));return{subscribedFiles:Object.values(d),fileKeyToSubscribedItems:u}}function w(e,r,n,a,i){let s=e.data;if(!s)return I();let l=[],c={};for(let e in Object.entries(s).forEach(([e,o])=>{let s=r[e];s&&(!n||(0,h.jk)(a,n,s,i))&&o.length>0&&(c[e]=[...o])}),c){let n=r[e];n&&l.push(n)}return(0,o.KQ)(l,"name"),{subscribedFiles:l,fileKeyToSubscribedItems:c}}function A(e,r,n=null,a=null,i,s=()=>!0){let l=Object.create(null);for(let o in e){let c=e[o];for(let e in c){let o=r[e];if(!o||a&&n&&!(0,h.jk)(n,a,o,i))continue;let d=[];for(let r in c[e]){let n=c[e][r];s(n)&&d.push(n)}d.length>0&&(l[e]=d)}}let c=[];return Object.keys(l).forEach(e=>{let n=r[e];n&&c.push(n)}),(0,o.KQ)(c,"name"),{fileKeyToSubscribedItems:l,subscribedFiles:c}}function N(e,r,n,a,i=[]){let o=C(e.published.stateGroups,n,e,r,a,void 0,i),s=C(e.published.components,n,e,r,a,e=>e.containing_frame?.containingStateGroup==null,i),l={},c={};for(let e of[s,o])for(let r of e.subscribedHubFiles)l[r.id]=r,c[r.id]=(c[r.id]||[]).concat(e.hubFileIdToSubscribedItems[r.id]);return{subscribedHubFiles:Object.values(l),hubFileIdToSubscribedItems:c}}function C(e,r,n=null,a=null,i,s=()=>!0,l=[]){let c={};for(let o in e){let d=e[o];for(let e in d){let o=r[e],u=l.includes(e);if(!o||n&&a&&!(0,h.jk)(n,a,{key:o.id},i)&&!u)continue;let m=[];for(let r in d[e]){let n=d[e][r];s(n)&&m.push(n)}m.length>0&&(c[e]=m)}}let d=Object.keys(c).map(e=>r[e]);return(0,o.v7)(d,e=>e.versions[e.current_hub_file_version_id].name),{hubFileIdToSubscribedItems:c,subscribedHubFiles:d}}var L=(e=>(e[e.Grid=0]="Grid",e[e.List=1]="List",e))(L||{});function O(e,r,n){let o=(0,i.wA)(),l=(0,p.q5)(),d=(0,y.M)(),u=(0,h.t$)(e);return(0,a.useCallback)(a=>{l&&(o(c.am({libraryFileSubscription:{file_key:l.key,library_file_key:e,is_subscribed:a,id:u},userInitiated:!0,isCommunityLibrary:r})),a?(0,s.sx)("Library File Enabled",{fileKey:l.key,fileTeamId:l.teamId,fileOrgId:l.parentOrgId,libraryFileKey:e,entryPoint:n},{forwardToDatadog:!0}):(0,s.sx)("Library File Disabled",{fileKey:l.key,fileTeamId:l.teamId,fileOrgId:l.parentOrgId,libraryFileKey:e,entryPoint:n},{forwardToDatadog:!0}),o((0,_.QB)({ignoreLoadingState:d})))},[l,o,e,u,r,d,n])}function R(e){let r=(0,d.GS)(),n=(0,l.md)(f.TG);return!!e&&(!!(0,g.Do)(e)||e.type===g.PW.MODULE||(e.type===g.PW.COMPONENT||e.type===g.PW.STATE_GROUP)&&(r||(0,m.o)(e,n)))}},426046:(e,r,n)=>{n.d(r,{Ee:()=>O,N2:()=>L});var a=n(411855);n(188507);var i=n(463033),o=n(183686),s=n(398634),l=n(629019),c=n.n(l),d=n(153234),u=n(522739),m=n(723325),p=n(46481),h=n(154254),_=n(939863);n(963067);var g=n(226055);n(298527);var f=n(663767),E=n(173454),y=n(715762);n(776250),n(320063),n(295680),n(335682),n(132135),n(811529);var b=n(721910);n(623680);let I="empty_states--emptyStateContent--i0Ad8",T="empty_states--emptyStateIcon--kLLCD",v="empty_states--emptyStateIconWrapper--SHUbu",S="empty_states--emptyStateText--gZR-A",w="empty_states--link--kfp3o blue_link--blueLink--9rlnd";var A=n(400232),N=n(951864),C=n(337987);function L(e,r){return e?r?y.r6.BROWSE_LIBRARIES_ACTIONS:y.r6.BROWSE_LIBRARIES_ASSETS_PANEL:r?y.r6.ACTIONS_EXPLORE_LIBRARIES_LINK:y.r6.ASSETS_PANEL_EXPLORE_LIBRARIES_LINK}function O({onClickExplore:e,width_ui3:r,fromActionsModal:n,bgTransparentUI3:i=!1}){let o=(0,g.GS)(),s=a.useMemo(()=>L(o,!!n),[n,o]),{onToggleLibraryModal:l}=(0,f.u)({entrypoint:s,modalType:"editor",initialTab:E.Wv.TEAM_LIBRARIES}),c=a.useCallback(()=>{e?.(),l()},[e,l]);return o?a.createElement(R,{onClick:c,width:r,bgTransparent:i,fromActionsModal:!!n}):a.createElement(P,{onClick:c})}function R({onClick:e,width:r,bgTransparent:n=!1,fromActionsModal:s}){let{setKeyboardNavigationElement:l}=(0,m.M3)({path:[b.ON.CONTENTS,b.zr.CTA],disabled:s});return a.createElement("div",{className:c()("empty_states--ui3EmptyState--8bWkh",h.cx.if(n,h.cx.bgTransparent,h.cx.colorBgSecondary).$),style:{width:r},"data-testid":"empty-state-assets-ui3"},a.createElement("div",{className:"empty_states--ui3LibraryIcon--56jRu"},a.createElement(o.l,null)),a.createElement("div",{className:"empty_states--ui3EmptyStateTitle--UwoAZ"},(0,_.tx)("design_systems.assets_panel.empty_state_title_ui3")),a.createElement("div",null,a.createElement("div",{className:"empty_states--ui3EmptyStateSubtitle---Yamk"},(0,_.tx)("design_systems.assets_panel.empty_state_subtitle_ui3")),a.createElement("a",{href:"https://help.figma.com/hc/articles/360038662654",target:"_blank",rel:"noopener",className:"empty_states--ui3Link--jomud empty_states--link--kfp3o blue_link--blueLink--9rlnd"},(0,_.tx)("design_systems.assets_panel.learn_more"))),a.createElement(i.$n,{onClick:e,recordingKey:d.Pt("assetsEmptyState","exploreLibraries"),ref:l},(0,_.tx)("design_systems.assets_panel.empty_state_cta_ui3")))}function P({onClick:e}){return a.createElement("div",{className:"empty_states--emptyState--ZaBY3 text--fontPos11--2LvXf text--_fontBase--QdLsd","data-testid":"empty-state-assets-ui2"},a.createElement("div",{className:"empty_states--emptyStateTitle--TWkpO text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,_.tx)("design_systems.assets_panel.components")),a.createElement("div",{className:I},a.createElement(p.U,{className:T,svg:A.A},a.createElement("div",{className:v},a.createElement(s.P,null))),a.createElement("div",{className:S},(0,_.tx)("design_systems.assets_panel.create_a_component")," ",a.createElement("a",{className:w,href:"https://help.figma.com/hc/articles/360038662654",target:"_blank",rel:"noopener"},(0,_.tx)("design_systems.assets_panel.learn_more")))),a.createElement("div",{className:I},a.createElement(p.U,{className:T,svg:N.A,fallbackSvg:C.A},a.createElement("div",{className:v},a.createElement(o.l,null))),a.createElement("div",{className:S},a.createElement(u.GG,{className:w,onClick:e,recordingKey:d.Pt("assetsEmptyState","exploreLibraries")},(0,_.tx)("design_systems.assets_panel.explore_libraries")))))}},238837:(e,r,n)=>{function a(e,r){let n={},a={},i=[];return e.forEach(e=>{let o=r(e);if(!o)return;let s=o.containing_frame;if(s?.pageId){let r=s.pageId,i=s.pageName||"";a[r]=i,n[r]=n[r]||[],n[r].push(e)}else i.push(e)}),{itemsByPageId:n,pageNamesByPageId:a,itemsWithoutPage:i}}n.d(r,{VL:()=>i,fM:()=>o,tz:()=>a}),n(943632),n(966712),n(939863),n(680681),n(473744),n(416095),n(173454),n(811529);let i="0:1";function o(e,r,n,a){if(0!==n.length){if(1===Object.keys(e).length&&1===Object.keys(r).length){let r=Object.keys(e)[0];e[r].push(...n),n.splice(0,n.length)}else r[i]&&e[i]?(e[i].push(...n),n.splice(0,n.length)):a&&(r[i]||(r[i]="Page 1"),e[i]=[...n],n.splice(0,n.length))}}function s(e,r,n){sortAlphabeticallyOrPrioritizeExamplesByFn(r,{sortFn:e=>e.name,priorityFn:e=>isExampleAsset(e,{isPreset:n?.isPreset??!1})});let a=Object.create(null);for(let n of r){let r=getNameParts(n.name),i="";for(let o=0;o<r.length;o++){let s;let l=r[o],c=i,d=o<r.length-1;if(i+=l+(d?"/":""),s=a[c]?a[c]:e,d&&!a[i]){let e={type:"NAME_GROUP",name:l,key:l,items:[],subtrees:[]};a[i]=e,s.subtrees.push(e)}d||s.items.push(n)}}}function l(e,r,n){let a={},i=[],o=[],l={};for(let e of r)if(getFeatureFlags().dse_templates_proto&&e.type===AssetType.COMPONENT&&isTemplate(e))i.push(e);else if(isCanvasAsset(e)&&e.containing_frame?.nodeId&&""!==e.containing_frame.name){let r=e.containing_frame.nodeId;a[r]=a[r]||[],a[r].push(e),l[r]=e.containing_frame}else o.push(e);if(getFeatureFlags().dse_templates_proto&&i.length>0){let r={type:"NAME_GROUP",name:"Templates",key:`${e.key}-${c}`,items:[],subtrees:[]};e.subtrees.push(r),s(r,i,{isPreset:n?.isPreset??!1})}let d=Object.keys(a).length;if(d>0||1===d&&o.length){for(let r in a){let i=l[r],o=a[r],c={type:"NAME_GROUP",name:i.name||"",key:r,items:[],subtrees:[]};e.subtrees.push(c),s(c,o,{isPreset:n?.isPreset??!1})}s(e,o,{isPreset:n?.isPreset??!1})}else s(e,getFeatureFlags().dse_templates_proto?r.filter(e=>!isTemplate(e)):r,{isPreset:n?.isPreset??!1})}let c="template-subtree";var d=(e=>(e[e.COMPONENT=0]="COMPONENT",e[e.TEMPLATE=1]="TEMPLATE",e))(d||{})},44160:(e,r,n)=>{n.d(r,{KO:()=>f});var a=n(411855),i=n(776250),o=n(374626),s=n(395900),l=n(607283),c=n(335682),d=n(940596),u=n(233333);let m="performance.ds_eco.asset_panel_loading",p=new s.jk(m,{}),h=((0,d.rt)(!1),(0,d.rt)(!1)),_=(e,r)=>{let n=(0,c.q5)(),s=(0,u.D)(),[d,_]=(0,o.fp)(h);a.useEffect(()=>{if(!s&&!d&&r){_(!0);let r=p.stop();r&&(0,i.sx)(m,{elapsedMs:r,fileKey:n?.key,teamId:n?.teamId,orgId:n?.parentOrgId,isUi3RedesignedAssetPanel:!1,numLibraries:e.allElementsTree.allElements.length,numComponents:g(e.allElementsTree.allElements),numComponentsShown:e.elementsInView.filter(e=>e.type===l.zq.TILE).length,numSectionsShown:e.elementsInView.filter(e=>e.type===l.zq.ROW).length},{forwardToDatadog:!0})}},[e.isDirty,e.elementsInView,e.allElementsTree,s,d,n,_,r])},g=e=>{let r=0;return e.forEach(e=>{e.type===l.zq.TILE?r+=1:e.type===l.zq.ROW&&(0,l.We)(e)&&(r+=g(e.children))}),r};function f({elementsCache:e,hasRenderedItems:r}){return _(e,r),null}},603396:(e,r,n)=>{n.d(r,{n:()=>l});var a=n(411855),i=n(188507),o=n(146817),s=n(776018);function l(e){let r=(0,i.d4)(e=>e.modalShown);return a.useMemo(()=>{if(r?.type!==s.V||r?.data.asset==null)return!1;try{return(0,o.V)(e)===(0,o.V)(r.data.asset)}catch(e){return!1}},[e,r])}},969504:(e,r,n)=>{n.d(r,{F:()=>c});var a=n(411855),i=n(188507),o=n(738269),s=n(933342),l=n(639318);function c(e,r,n,c){let d=(0,i.wA)(),{query:u,searchSessionId:m}=(0,s.Gq)(),p=(0,l.K)();return a.useCallback(a=>{a.preventDefault(),a.stopPropagation(),d(o.j7({type:r,data:{component:e,position:{top:a.clientY,left:a.clientX},onJumpToLocalComponent:p,searchSessionId:m,query:u,sectionPosition:n,sectionNameForTracking:c}}))},[d,r,e,p,m,u,n,c])}},56063:(e,r,n)=>{n.d(r,{b:()=>d});var a=n(411855),i=n(188507),o=n(271245),s=n(335682),l=n(336599),c=n(705129);let d=function({disabled:e=!1}={}){let r=(0,i.wA)(),n=(0,s.q5)(),d=(0,i.d4)(e=>e.fileVersion),u=(0,i.d4)(e=>e.loadingState),m=a.useRef(0),p=null!=n&&null!=d?(0,c.yD)(n.key):void 0;a.useEffect(()=>{!e&&null!=p&&(0,l.Sc)(u,p)&&m.current<3&&(m.current+=1,r((0,o.zK)()))},[r,p,u,e])}},986231:(e,r,n)=>{n.d(r,{Y:()=>u});var a=n(411855),i=n(299321),o=n(374626),s=n(154483),l=n(453681),c=n(173454);let d=(0,s.fv)();function u(e){let r=(0,o.md)(l.rg);return a.useMemo(()=>e.type!==c.PW.STATE_GROUP?void 0:e.isLocal?i.glU.getStateGroupNumVariants(e.node_id):e.team_id?r[e.team_id]?.[d(e)]?.[e.node_id]:void 0,[e,r])}},811559:(e,r,n)=>{n.d(r,{lX:()=>B});var a=n(411855),i=n(188507);n(299321);var o=n(629019),s=n.n(o),l=n(512495),c=n.n(l),d=n(568214),u=n(91408);n(320063);var m=n(153234);n(554322);var p=n(572206),h=n(939863),_=n(428654);n(798099);var g=n(981354),f=n(809831),E=n(226055),y=n(44892);n(356390);var b=n(141123),I=n(232205),T=n(237929),v=n(267931),S=n(49116),w=n(776615),A=n(999198),N=n(173454),C=n(498606),L=n(186380),O=n(776018),R=n(820396),P=n(402271),D=n(811529),k=n(870061),M=n(262311),F=n(948729);let x=(0,u.hG)(M.QU);function U(e){switch(e){case"list-compact":case"list":case"list-no-padding":return!0;case"grid":case"grid-compact":case void 0:return!1}}function B(e){var r,n,i;let{item:o}=e,{nameStyle:s,background:l}=(r=e.item,n=e.displayType,i=e.noBackground,a.useMemo(()=>{let e={};if(i)return{nameStyle:e,background:null};let a=(0,y.zR)(r,null);return a&&!U(n)&&(e.background=_.F.format(a),e.color=(0,d.G$)(a)),{nameStyle:e,background:a}},[n,i,r])),u=e.showName;(e.hideNameOverlay||e.shouldShowNamePopout&&!U(e.displayType))&&(u=!1);let m=F.UA,p=c()({},e,{style:{marginLeft:e.gutterWidth}});return a.createElement(V,{...p},a.createElement(G,{...e},a.createElement(H,{...e,backgroundColor:l,className:void 0,style:e.isDragged?void 0:e.style}),u&&a.createElement("div",{className:function(e,r){switch(e){case"grid":case"grid-compact":case void 0:return r;case"list-compact":return F.OD;case"list":case"list-no-padding":return F.vZ}}(e.displayType,m),style:s},(()=>{if(U(e.displayType)&&!e.isSearch){let r=(0,T.kH)(o.name);return e.item.type===N.PW.RESPONSIVE_SET?(0,A.NR)(r):r}return o.name})()),e.item.type===N.PW.STATE_GROUP&&!!e.numVariants&&e.numVariants>0&&a.createElement(K,{isList:U(e.displayType),numVariants:e.numVariants})))}(0,u.hG)(M.Us);let V=a.memo(a.forwardRef(function(e,r){let n;let i=U(e.displayType),o=a.useRef(null),s=r||o,l=e.height||120,c=e.width||120;l-=l%2,c-=c%2;let d=e.itemPadding??0;c+=2*d,l+=2*d;let u=i?e.style:{...e.style,width:c,height:l},m=(0,k.o)(e.item,{shouldShowName:e.shouldShowNamePopout,isList:i});n="list-compact"===e.displayType?F.nl:"list"===e.displayType?F.yg:"list-no-padding"===e.displayType?F.oV:e.isDragged?F.Vs:e.isFigJam||e.isSlides?F.bo:e.useBaseTile?F.aS:"grid-compact"===e.displayType?F.Ms:F.fh;let p=(0,N.Do)(e.item)?null:e.item.description,h=e.item.type===N.PW.STATE_GROUP&&!!e.numVariants&&e.numVariants>0,_=e.shouldShowNamePopout&&!i,g=!e.shouldHideDescription&&p;if(e.isFigJam||e.isSlides)return a.createElement("div",{className:`${n} ${e.className||""}`,style:u,onMouseUp:e.onMouseUp,"data-tooltip":e.isDragged?void 0:(0,T.kH)(e.item.name),"data-tooltip-type":e.isDragged?void 0:C.Ib.TEXT,"data-tooltip-timeout-delay":e.isDragged?void 0:500,"data-tooltip-show-above":e.tooltipShownAbove},e.children);if(m){let r=(g||_||h)&&!e.shouldHideTooltip;return a.createElement("div",{ref:s,className:`${n} ${e.className||""}`,style:u,onMouseUp:e.onMouseUp,"data-tooltip-type":r?C.Ib.SPECIAL:void 0,"data-tooltip":r?P.B:void 0,"data-tooltip-component-name":_?(0,T.kH)(e.item.name):void 0,"data-tooltip-file-name":e.fileName,"data-tooltip-component-description":g?p:void 0,"data-tooltip-num-variants":h?e.numVariants:void 0,"data-tooltip-show-right":!0,"data-tooltip-max-width":240,"data-tooltip-interactive":!0,"data-tooltip-show-immediately":!!e.showTooltipImmediately||void 0,"data-tooltip-hide-immediately":!!e.showTooltipImmediately||void 0},e.children)}return a.createElement("div",{ref:s,className:`${n} ${e.className||""}`,style:u,onMouseUp:e.onMouseUp},e.children)}));function G(e){let r="whiteboard"===(0,f.lg)(),n=U(e.displayType),o=(0,D.cx)(e.item),s=(0,v.H)(),l=(0,i.d4)(e=>e.modalShown?.type),c=a.useCallback(()=>{l===O.V&&s()},[l,s]),{onInsertableResourcePointerDown:d,dragState:u}=(0,I.j)({resource:e.item,isList:n,sourceForTracking:e.draggable?.sourceForTracking||"",sectionNameForTracking:e.draggable?.sectionNameForTracking,sectionDepth:e.draggable?.sectionDepth,clickToInsert:!!e.draggable?.clickToInsert,addToDiagrammingRecentsBehavior:e.addToDiagrammingRecentsBehavior,afterSuccessfulInsert:e.draggable?.afterSuccessfulInsert,draggingThumbMaxDimensions:o?void 0:new p.Mi((e.width||0)-x,(e.height||0)-x),sectionPosition:e.sectionPosition,recomputeCancelRectsOnPointerUp:l===O.V,onDragStart:()=>{e.draggable?.onDragStart?.(),c()}}),h=`componentThumb.${e.recordingNodePath}`,_=m.rf(h,"contextmenu",r=>{e.onContextMenu&&e.onContextMenu(r)},{recordMetadata:e=>{let r=e.currentTarget.getBoundingClientRect(),n=new p.Mi(r.left,r.top),a=new p.Mi(e.clientX,e.clientY).subtract(n);return{percentageMousePos:new p.Mi(a.x/r.width,a.y/r.height)}},playbackMetadata:r=>{let n=e.height||0,a=e.width||0;return{currentTarget:{getBoundingClientRect:()=>({top:0,left:0,height:n,width:a})},clientX:0+r.percentageMousePos.x*a,clientY:0+r.percentageMousePos.y*n}}}),g=m.rf(h,"click",r=>{e.onItemClick&&e.onItemClick(r,e.item)});return a.createElement(a.Fragment,null,a.createElement("div",{className:(r||e.isSlides)&&u?F.Vk:F.GR,style:{padding:e.itemPadding},onPointerDown:r=>{e.draggable&&d(r)},onContextMenu:_,onDoubleClick:r=>{e.onItemDoubleClick&&e.onItemDoubleClick(r,e.item)},onClick:g,"data-testid":h},e.children),a.createElement(b.q,{dragState:u,isList:n}))}function H({displayType:e,item:r,isDragged:n,isFigJam:i,isSlides:o,backgroundColor:l,shouldShowShadowOnHover:c,height:d=120,width:u=120,noBackground:m,style:p,alwaysShowBorder:h,thumbWrapperClassName:f}){let E;let y=a.useContext(w.uW),b=(0,g.X)(),I=d-d%2,T=u-u%2,v=U(e);E=v?m?F.v:F.Tq:m||i?F.Yc:`${F.wi} ${F.wi}`;let S={width:2*T,height:2*I,padding:i?0:x,...p};m||!l||i||(h||o||(S.boxShadow=(0,w.pw)(y,l,b)),S.background=_.F.format(l)),n&&(v?(S.width=void 0,S.height=void 0):S.background=void 0);let A=a.useMemo(()=>r.type===N.PW.RESPONSIVE_SET&&"LIBRARY"===r.subscriptionStatus&&r.fullPage?F.NK:c?F.Ib:i||o?F.FF:F.N4,[i,o,r,c]);return a.createElement("div",{className:F.Ol,style:n&&v?void 0:{width:T,height:I}},a.createElement("div",{className:s()(E,f,{[F.XK]:h}),style:S},r.type===N.PW.VARIABLE_SET?a.createElement(W,{variableSetID:r.node_id}):a.createElement(L.M,{className:A,item:r,shouldGenerateLocalThumbnail:!0,draggable:!1})))}let W=a.memo(function({variableSetID:e}){let r=(0,i.d4)(e=>(0,S.a3)(e)),n=a.useMemo(()=>{let n=new Set;for(let a of Object.values(r))if(a.variableSetId===e&&(n.add(a.resolvedType),n.size>=3))break;return[...n.values()]},[r,e]),o=(n.length-1)/2;return a.createElement("div",{className:F.bF},n.map((e,r)=>a.createElement("div",{className:F.aC,key:e,style:{marginTop:(o-r)*20}},a.createElement(R.i,{type:e,showTooltip:!1}))))});function K({isList:e,numVariants:r}){let n=(0,E.GS)();return r<=1?null:a.createElement("div",{className:e?F.hs:F.xC,"data-tooltip":(0,h.t)("design_systems.assets_panel.variant_count",{numVariants:r}),"data-tooltip-type":C.Ib.TEXT,"data-tooltip-show-above":!0,"data-tooltip-timeout-delay":n?500:void 0,"data-tooltip-show-immediately":!n||void 0,"data-tooltip-hide-immediately":!0},r)}},734017:(e,r,n)=>{n.d(r,{K:()=>b,h:()=>S});var a=n(411855),i=n(109388),o=n(188507),s=n(432258),l=n(966712),c=n(268537),d=n(939863),u=n(501114),m=n(974105),p=n(696673),h=n(733169),_=n(27703),g=n(29680),f=n(416095),E=n(173454),y=n(776018),b=(e=>(e.ASSETS_PANEL="library-item-tile-context-menu-for-assets-panel",e.LIBRARY_MODAL="library-item-tile-context-menu-for-library-modal",e.ACTIONS_ASSETS="library-item-tile-context-menu-for-actions-assets",e))(b||{});let I=e=>"library-item-tile-context-menu-for-assets-panel"===e||"library-item-tile-context-menu-for-library-modal"===e||"library-item-tile-context-menu-for-actions-assets"===e,T=c.ms,v=c.c$,S=a.memo(({dropdownShown:e,hideForLocalComponents:r,hidePublishingForLocalComponents:n,onOpenFlyout:c,onJumpToLocalComponent:b,selectedView:S,usePortal:w})=>{let A=(0,g.eY)(),N=(0,o.d4)(e=>e.modalShown),C=(0,o.d4)(e=>e.library.defaultPublished.libraryKeys),L=(0,_.ud)(),O=a.useMemo(()=>(0,m.d1)({fileByKey:L,selectedView:S}),[L,S]),R=I(e?.type)?e.data.component:null,P=(0,h.bL)({libraryKey:R?.library_key,nodeId:R?.node_id,mainComponent:!0,disabled:!(0,l.kc)().dse_lk_go_to_source}),D=a.useCallback(e=>{let r=A.get(e.node_id);null!=r&&(r.isStateGroup?r.isPublishable=!e.isPublishable:r.isLooseComponent?r.isSymbolPublishable=!e.isPublishable:r.isModule&&(0,l.kc)().dse_editor_templates_v1&&(r.isPublishable=!e.isPublishable))},[A]),k=(0,h.Sw)(R?.file_key,R?.library_key).unwrapOr(!1),M=a.useMemo(()=>(0,l.kc)().dse_lk_go_to_source?null!=P.data:k,[k,P.data]),F=R.file_key===O?.key,x=a.useMemo(()=>!!(!I(e?.type)||!O||F&&r||C.includes(R?.library_key))||!F&&!M,[M,O,C,e?.type,r,F,R]),U=a.useMemo(()=>F&&!n?a.createElement(v,{onClick:()=>D(R),key:"togglePublishable"},R.isPublishable?(0,d.tx)("design_systems.publishing_modal.hide_when_publishing"):(0,d.tx)("design_systems.publishing_modal.show_when_publishing")):null,[n,F,R,D]),B=a.useMemo(()=>{let e=R?.type===E.PW.MODULE&&(0,l.kc)().dse_editor_templates_v1?(0,d.tx)("design_systems.assets_panel.go_to_main_template"):(0,d.tx)("design_systems.assets_panel.go_to_main");return F?b?a.createElement(v,{onClick:()=>b?.(R.node_id),recordingKey:"libraryItemTileContextMenu.goToMain",key:"goToMainLocal"},e):null:(0,l.kc)().dse_lk_go_to_source?P.data?.type==="team"?a.createElement(v,{href:P.data.link,target:"_blank",key:"goToMainSubscribed"},e):null:(0,p.wJ)(R.file_key)?null:a.createElement(v,{href:(0,f.Gd)(R),target:"_blank",key:"goToMainSubscribed"},e)},[F,R,b,P.data]),V=a.useMemo(()=>c?a.createElement(v,{disabled:N?.type===y.V,onClick:()=>c(R,e?.data?.sectionPosition,e?.data?.sectionNameForTracking),key:"openFlyout"},(0,d.tx)("design_systems.assets_panel.view_details")):null,[c,R,e?.data?.sectionNameForTracking,e?.data?.sectionPosition,N?.type]),G=a.useMemo(()=>x?null:[U,B,V].filter(s.Vq),[B,V,U,x]);if(!G||0===G.length)return null;let H=a.createElement(T,{style:u.sx.add(e?.data?.position).add(u.sx.fixed).$},G);return w?i.createPortal(H,document.body):H})},721910:(e,r,n)=>{n.d(r,{JS:()=>o,Mk:()=>s,ON:()=>c,c_:()=>a,nE:()=>i,o8:()=>l,yW:()=>E,zr:()=>f});let a="components",i="examples",o="templates",s="assets",l="privateToThisFile";var c=(e=>(e[e.HEADER=0]="HEADER",e[e.BREADCRUMB=1]="BREADCRUMB",e[e.CONTENTS=2]="CONTENTS",e))(c||{}),d=(e=>(e[e.LIBRARIES=0]="LIBRARIES",e[e.PAGES=1]="PAGES",e[e.ASSETS=2]="ASSETS",e))(d||{}),u=(e=>(e[e.SEARCH_AND_FILTER=0]="SEARCH_AND_FILTER",e[e.LIBRARY_SEARCH_CHIP=1]="LIBRARY_SEARCH_CHIP",e))(u||{}),m=(e=>(e[e.SEARCH=0]="SEARCH",e[e.SETTINGS=1]="SETTINGS",e))(m||{}),p=(e=>(e[e.BACK=0]="BACK",e[e.LIBRARY=1]="LIBRARY",e[e.ELLIPSIS=2]="ELLIPSIS",e[e.STUBS=3]="STUBS",e))(p||{}),h=(e=>(e[e.SITE_KIT=0]="SITE_KIT",e[e.TEMPLATES=1]="TEMPLATES",e[e.EXAMPLES=2]="EXAMPLES",e[e.COMPONENTS=3]="COMPONENTS",e[e.FOLDERS=4]="FOLDERS",e))(h||{}),_=(e=>(e[e.SITE_KIT=0]="SITE_KIT",e[e.LOCAL_AND_SUBSCRIBED=1]="LOCAL_AND_SUBSCRIBED",e[e.PRESETS=2]="PRESETS",e[e.VISUAL_ASSETS=3]="VISUAL_ASSETS",e))(_||{}),g=(e=>(e[e.LIBRARIES=0]="LIBRARIES",e))(g||{}),f=(e=>(e[e.CTA=0]="CTA",e[e.UI_KITS=1]="UI_KITS",e))(f||{}),E=(e=>(e.DESIGN="design",e.SITE="site",e))(E||{})},551640:(e,r,n)=>{n(411855),n(188507),n(723325),n(662275),n(813648),n(933342),n(135076),n(311692),n(718242)},718242:(e,r,n)=>{n.d(r,{LH:()=>f,Nh:()=>E,Qk:()=>y,R2:()=>b,ZV:()=>I,mb:()=>g,uo:()=>_});var a=n(411855),i=n(943632),o=n(776250),s=n(966712),l=n(38580),c=n(696673),d=n(680681),u=n(335682);n(48515);var m=n(743415);n(662163);var p=n(239737),h=n(721910);function _(e,r,n){let a=[...e];return r&&n&&(0,d.NX)(r)?(0,d.k9)({libraries:a,approvedLibraryFileKeysByResourceType:r,approvedLibraryKeysByResourceType:n}):(0,i.KQ)(a,"name"),a}function g(e,r,n){return _(e.map(e=>({...e,key:e.fileKey})),r,n)}function f(e){let r=[...e];return(0,i.v7)(r,e=>e.versions[e.current_hub_file_version_id].name),r}function E(e,{includeEmptyLibraries:r}={}){let n=e.numComponents+e.numStateGroups,a=(0,s.u4)("dse_editor_templates_v1",e.numModuleAssets,0)??0;return r||n>0||a>0?{name:e.name,fileKey:e.fileKey,libraryKey:e.libraryKey,numComponents:n,numTemplates:a,thumbnailUrl:e.thumbnailUrlOverride??e.thumbnailUrl,thumbnailShouldCover:!!e.thumbnailGuid||(0,c.wJ)(e.fileKey),type:h.yW.DESIGN}:null}function y(e){return(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement)&&"application"!==e.role}function b(e,r=8){let[n,i]=a.useState(window.innerHeight);a.useEffect(()=>{let e=()=>{i(window.innerHeight)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let o=a.useMemo(()=>n-(e??0)-r,[r,e,n]);if(e)return o}function I(e){let r=(0,p.Nv)(!0),n=(0,m.k)(),i=(0,u.tS)();return a.useCallback(a=>{let{type:s,sectionPosition:l,searchQuery:c,searchSessionId:d,...u}=e,m={aiResultsEnabled:r,altKey:a.altKey,assetsPanelVersion:n,fileKey:i??void 0};o.az.trackDefinedEvent("assets_panel.keyboard_insert",{...e,...m}),o.az.trackDefinedEvent("asset_search.result_inserted",{...u,...m,assetType:s,position:l,query:c,sessionId:d,entryPoint:"assets-panel"})},[e,r,i,n])}n(623680),(0,l.eU)(!1)},905485:(e,r,n)=>{n.d(r,{G:()=>o});var a=n(411855);let i=a.createContext({getLibrary:()=>void 0,getPage:()=>void 0,getFolder:()=>void 0});function o(){return a.useContext(i)}},836328:(e,r,n)=>{n.d(r,{MB:()=>i});var a=n(411855);function i({onBoth:e,onClick:r,onKeyDown:n}){return a.useCallback(a=>{e?.(a),0!==a.detail?r?.(a):n?.(a)},[e,r,n])}n(498750),n(723325),n(356390),n(283942),n(721910),n(718242),n(623680),n(205236),n(243074);let o=a.createContext(null)},606624:(e,r,n)=>{var a=n(411855),i=(e=>(e[e.Mount=0]="Mount",e[e.Back=1]="Back",e[e.Forward=2]="Forward",e[e.ToggleView=3]="ToggleView",e))(i||{});(0,a.createContext)({lastNavAction:0,lastNavDirection:0,setLastNavAction:()=>{},lastActionWasBackSwipe:!1})},178543:(e,r,n)=>{n(411855),n(629019);var a=n(91408);n(966712),n(153234),n(522739),n(864089),n(723325),n(976999),n(154254),n(939863),n(612776),n(957987),n(335682),n(662163),n(721910),n(718242),n(836328),n(707440),n(623680),n(799550);var i=n(578482);(0,a.jz)(i.Sx),(0,a.jz)(i.T5)},707440:(e,r,n)=>{var a=n(411855),i=n(109388);n(188507),n(776250);var o=n(153234),s=n(268537),l=n(939863),c=n(501114);n(738269),n(662275),n(696673);var d=n(830445);n(151283),n(335682),n(132135),n(99506),n(284321),n(811529),n(622073),n(611964),n(18339),n(721910);let u=o.Pt("assetsLibrary","contextMenu"),m=s.ms,p=s.c$;a.memo(({dropdownShown:e,usePortal:r})=>{if(!e||"asset-panel-library-context-menu"!==e.type)return null;let{data:n}=e;if(!n)return null;let{libraryHref:s,position:h,isLocalLibrary:_,partnerType:g,hideUnsubscribe:f=!1,onGoToLibrary:E,onPublish:y,onUnsubscribe:b,onSendFeedback:I}=n;if(!h)return null;let T=a.createElement(m,{style:c.sx.add({top:`${h.top}px`,right:`${h.right}px`,bottom:`${h.bottom}px`,left:`${h.left}px`}).add(c.sx.fixed).$},_?a.createElement(p,{onClick:y,recordingKey:o.Pt(u,"publishLibrary")},(0,l.tx)("design_systems.assets_panel.publish_library")):a.createElement(a.Fragment,null,!f&&a.createElement(p,{onClick:b,recordingKey:o.Pt(u,"unsubscribe")},(0,l.tx)("design_systems.assets_panel.remove_library_from_file")),a.createElement(p,{href:s,target:"_blank",recordingKey:o.Pt(u,"goToLibrary"),onClick:E},(0,l.tx)("design_systems.assets_panel.go_to_library"))),g&&a.createElement(p,{href:(0,d.iu)(g),target:"_blank",recordingKey:o.Pt(u,"sendFeedback"),onClick:I},(0,l.tx)("design_systems.assets_panel.send_feedback_to_creator")));return r?i.createPortal(T,document.body):T})},26042:(e,r,n)=>{n.d(r,{hK:()=>s});var a=n(411855);n(188507);var i=n(297666);n(355819),n(752207),n(939863);var o=n(988022);function s({height:e}){return a.createElement("div",{style:{height:e}})}n(335682),n(914214),(0,i.s)((e,r,n,a)=>{(0,o.uE)("action_left_panel_scroll",{user:e},{assetsPanelVersion:3,tab:"assets",fileKey:r,fileTeamId:n,fileOrgId:a})},500)},220289:(e,r,n)=>{n(411855),n(188507),n(629019),n(776250),n(358145),n(966712),n(153234),n(30637),n(736174),n(950431),n(723325);var a=n(154483);n(175290),n(612776),n(801161),n(788744),n(146817),n(957987),n(473744),n(830445),n(543817),n(335682),n(933342),n(284321),n(234945),n(274071),n(48515),n(135076),n(180715),n(790429),n(811529),n(603396),n(969504),n(986231),n(811559),n(734017),n(875387),n(662163),n(739212),n(721910),n(836328),n(623680),n(799550),n(164655),(0,a.fv)()},238011:(e,r,n)=>{n.d(r,{x:()=>i}),n(411855),n(629019),n(358145),n(295680),n(662163);var a=n(721910);function i(e){return{name:e.library_file_name,fileKey:e.library_file_key,libraryKey:e.library_key,numComponents:e.num_components,numTemplates:15,thumbnailUrl:e.thumbnail_url,thumbnailShouldCover:!0,authorName:e.author_name,type:a.yW.DESIGN}}n(178543),n(26042),n(153234),n(522739),n(939863),n(957987),n(335682),n(718242),n(146817),n(448406),n(811529),n(551640),n(905485),n(220289),n(836328),n(623680),n(366508),n(832556),n(799550)},366508:(e,r,n)=>{n.d(r,{Y:()=>v});var a=n(943632),i=n(259120),o=n(966712),s=n(607283),l=n(939863),c=n(696673),d=n(473744),u=n(237929),m=n(137459),p=n(173454),h=n(238837),_=n(721910),g=n(718242),f=n(619084),E=n(443808);function y(e){let r=(0,u.ke)(e.name),n=e.type===p.PW.RESPONSIVE_SET?e.containingFrame?.name:e.containing_frame?.name;return n?[n,...r]:r}function b(e,r="",{isPreset:n}={isPreset:!1}){let a=new Map,i=[];(0,d.gO)(e,{sortFn:e=>y(e).join("/"),priorityFn:e=>(0,d.Nz)(e,{isPreset:n})});let o=Object.create(null);for(let n of e){let e=y(n),l="";for(let c=0;c<e.length;c++){let d=e[c],u=l,m=c<e.length-1;l+=d+(m?"/":"");let p=null;if(o[u]&&(p=o[u]),m){let n=o[l]??{name:d,key:`${r}-${e.slice(0,c+1).join("/")}`,items:[],subtrees:new Map,type:s.l$.NAME_GROUP,previewAsset:void 0};o[l]||(o[l]=n,p?p.subtrees.set(d,n):a.set(d,n))}m||(p?p.items.push(n):i.push(n))}}return a.forEach(e=>{(function e(r){r.previewAsset=S(r),r.subtrees.forEach(r=>e(r))})(e)}),{sortedItems:i,sortedSubtrees:a}}function I(e,r,{isPreset:n}){let a=new Map,{itemsByPageId:i,pageNamesByPageId:o,itemsWithoutPage:c}=(0,h.tz)(e,e=>e),{itemsByPageId:u,pageNamesByPageId:m,itemsWithoutPage:p}=(0,h.tz)(r,e=>e),g={...o,...m};(0,h.fM)(i,g,c),(0,h.fM)(u,g,p,!0);let f=Object.keys(g);for(let e of((0,d.gO)(f,{sortFn:e=>g[e],priorityFn:e=>(0,d.dS)(g[e],{isPreset:n})}),f)){let r=g[e],o=e in i?i[e]:void 0,c=o,m=[],p=null,h=null;if(o&&o.length>0){c=o.filter(e=>!(0,d.Nz)(e,{isPreset:n}));let{sortedItems:e,sortedSubtrees:r}=b(m=o.filter(e=>(0,d.Nz)(e,{isPreset:n})),"examples",{isPreset:n});m.length>0&&(h={name:(0,l.t)("design_systems.assets_panel.examples"),items:e,subtrees:r,key:_.nE,type:s.l$.COMPONENTS,previewAsset:void 0})}if(c&&c.length>0){let{sortedItems:e,sortedSubtrees:r}=b(c,"components",{isPreset:n});p={name:(0,l.t)("design_systems.assets_panel.components"),items:e,subtrees:r,key:_.c_,type:s.l$.COMPONENTS,previewAsset:void 0}}let f=null,E=u[e];if(E&&E.length>0){let{sortedItems:e,sortedSubtrees:r}=b(E,"templates",{isPreset:n});f={name:(0,l.t)("design_systems.assets_panel.templates"),items:e,subtrees:r,key:_.JS,type:s.l$.TEMPLATES,previewAsset:void 0}}let{sortedItems:y,sortedSubtrees:I}=b([...m??[],...c??[],...E??[]],"assets",{isPreset:n}),T={name:r,items:y,subtrees:I,key:_.Mk,type:s.l$.COMPONENTS,previewAsset:void 0},v={name:r,id:e,previewAsset:function({componentSubtree:e,exampleSubtree:r,templateSubtree:n}){let a=S(r),i=S(n),o=S(e);return a||i||o}({componentSubtree:p,exampleSubtree:h,templateSubtree:f}),components:p,examples:h,templates:f,assets:T,type:_.yW.DESIGN};a.set(e,v)}return a}function T(e,r){let{allItems:n,publishedItems:a,privateItems:i,numPublished:o}=e;return o>0&&r&&i.length>0?a:n}function v({localComponentsInfo:e,localTemplatesInfo:r,localThumbnailUrl:n,localThumbnailShouldCover:d,subscribedComponentsInfo:u,subscribedTemplatesInfo:p,subscribedCommunityComponentsInfo:y,subscribedCommunityTemplatesInfo:v,canPublish:w,openFileKey:A,openFileLibraryKey:N,approvedLibraryFileKeysByResourceType:C,approvedLibraryKeysByResourceType:L,siteKitAssetData:O,siteKitThumbnailComponents:R}){let{fileKeyToSubscribedItems:P,subscribedFiles:D}=u,k=[...D],M={};if((0,o.kc)().dse_editor_templates_v1&&p)for(let e of(M=p.fileKeyToSubscribedItems,p.subscribedFiles))k.find(r=>r.key===e.key)||k.push(e);let F=function(e,r,n,a,o){let s=new Map;for(let l of(0,g.uo)(e,a,o)){let e=l.key,a=r[e]??[],o=n[e]??[],c=I(a,o,{isPreset:!1}),d={name:l.name,fileKey:e,libraryKey:(0,i.l)(l.library_key??""),pages:c,numComponents:a.length,numTemplates:o.length,thumbnailUrl:l.thumbnail_url_override??l.thumbnail_url,thumbnailShouldCover:!!l.thumbnail_guid,type:_.yW.DESIGN};s.set(e,d)}return s}(k,P,M,C,L),x=function(e,r){if(!e&&!r)return new Map;let{hubFileIdToSubscribedItems:n,subscribedHubFiles:a}=e??{hubFileIdToSubscribedItems:{},subscribedHubFiles:[]},{hubFileIdToSubscribedItems:o,subscribedHubFiles:s}=r??{hubFileIdToSubscribedItems:{},subscribedHubFiles:[]},l=[...a,...s],c=new Map;for(let e of(0,g.LH)(l)){let r=e.id,a=n[r]??[],s=o[r]??[],l=I(a,s,{isPreset:!0});if(a.length+s.length>0){let n={name:(0,m.oA)(e),fileKey:r,libraryKey:(0,i.l)(e.library_key??""),pages:l,numComponents:a.length,numTemplates:s.length,thumbnailUrl:e.thumbnail_url,thumbnailShouldCover:!0,type:_.yW.DESIGN};c.set(r,n)}}return c}(y,(0,o.kc)().dse_editor_templates_v1?v:void 0),U=function(e,r,n,a,i,d,u){let{privateItems:m,numPublished:p}=e,{privateItems:h,numPublished:g}=r??{privateItems:[],numPublished:0},f=p+g>0&&i&&m.length+h.length>0,E=T(e,i),y=r?T(r,i):[],v=(0,c.wJ)(d),S=I(E,y,{isPreset:v}),w={name:(0,o.kc)().dse_local_assets_copy?(0,l.t)("design_systems.assets_panel.created_in_this_file"):(0,l.t)("design_systems.assets_panel.local_assets"),fileKey:d,libraryKey:u,pages:S,numComponents:E.length,numTemplates:y.length,thumbnailUrl:n,thumbnailShouldCover:a,type:_.yW.DESIGN};if(f){let e=null;if(m.length>0){let{sortedItems:r,sortedSubtrees:n}=b(m,"p_components",{isPreset:v});e={name:(0,l.t)("design_systems.assets_panel.components"),items:r,subtrees:n,key:_.c_,type:s.l$.COMPONENTS,previewAsset:void 0}}let r=null;if(h.length>0){let{sortedItems:e,sortedSubtrees:n}=b(h,"p_templates",{isPreset:v});r={name:(0,l.t)("design_systems.assets_panel.templates"),items:e,subtrees:n,key:_.JS,type:s.l$.TEMPLATES,previewAsset:void 0}}let{sortedItems:n,sortedSubtrees:a}=b([...m??[],...h??[]],"assets",{isPreset:v}),i={name:(0,l.t)("design_systems.assets_panel.assets"),items:n,subtrees:a,key:_.Mk,type:s.l$.COMPONENTS,previewAsset:void 0},o={name:(0,l.t)("design_systems.assets_panel.hidden"),id:_.o8,previewAsset:m[0]??h[0],components:e,examples:null,templates:r,assets:i,type:_.yW.DESIGN};w.pages.set(_.o8,o)}return w}(e,r,n,d,w,A,N),B=new Map([...F,...x]);B.set(U.fileKey,U);let V=O?(0,f.P)(O):null,G=V?{...V.library,pages:function(e,r){let n=new Map,{itemsByPageId:i,pageNamesByPageId:o,itemsWithoutPage:c}=(0,h.tz)(e,e=>({containing_frame:e.containingFrame??void 0}));(0,h.fM)(i,o,c);let d=Object.keys(o);for(let e of((0,a.v7)(d,e=>o[e]),d)){let a=o[e],l=i[e]??[];if(!a||0===l.length)continue;let{sortedItems:c,sortedSubtrees:d}=b(l,"assets"),u={name:a,items:c,subtrees:d,key:_.Mk,type:s.l$.RESPONSIVE_SETS,previewAsset:void 0},m={name:a,id:e,previewAsset:r[e]??S(u),assets:u,type:_.yW.SITE,numAssets:function e(r){return r.items.length+Array.from(r.subtrees.values()).reduce((r,n)=>r+e(n),0)}(u)};n.set(e,m)}let u=(0,E.uZ)();if(u.length>0){let e={name:(0,l.t)("design_systems.assets_panel.embeds"),id:"embeds",embeds:u,previewAsset:void 0,assets:{name:"",items:[],subtrees:new Map,key:"EMPTY_ASSETS_NOT_USED",type:s.l$.COMPONENTS,previewAsset:void 0},type:_.yW.SITE,numAssets:u.length};n.set("embeds",e)}return n}(V.assets,R)}:null;return G&&B.set(G.fileKey,G),{localAssets:U,libraries:F,presets:x,siteKit:G,allLibrariesUnsorted:B}}function S(e){let r=e?function e(r){let n=Array.from(r.items.values());for(let[a,i]of r.subtrees.entries())n.push(...e(i));return n}(e):[];return r.length>0?r[0]:void 0}},832556:(e,r,n)=>{n(411855);var a=n(91408),i=n(578482);(0,a.jz)(i.RU),(0,a.jz)(i.nT)},623680:(e,r,n)=>{n(411855),n(358145);var a=n(940596);n(721910),n(905485),n(606624),n(799550),n(662163),n(858855);var i=(e=>(e.IconSets="icon_sets",e.Illustrations="illustrations",e))(i||{}),o=(e=>(e.Libraries="All libraries",e.Pages="Library",e.Assets="Page",e.Search="Search",e.Recents="Recents",e.VisualAssets="Visual assets",e))(o||{});(0,a.rt)({}),(0,a.rt)(!1),(0,a.rt)(!1),(0,a.rt)(!1);(0,a.rt)(void 0)},808801:(e,r,n)=>{n(411855);var a=n(91408);n(448406),n(799550);var i=n(578482);(0,a.jz)(i.H0),(0,a.jz)(i.Mj);let o={NORMAL:115,WIDE:void 0,SMALL:72};o.NORMAL,o.WIDE,o.SMALL},740115:(e,r,n)=>{n(411855),n(448406),n(811529),n(551640),n(808801)},858855:(e,r,n)=>{n.d(r,{U:()=>c}),n(411855);var a=n(188507);n(335682);var i=n(416095),o=n(336599),s=n(790202),l=n(233333);function c(){let e=(0,s.je)(),r=(0,a.d4)(e=>e.loadingState);return!!(0,l.D)()&&(!e.data||e.data.some(e=>{let n=(0,i.Mb)(e.fileKey);return!(0,o.D2)(r,n)}))}n(773610)},799550:(e,r,n)=>{n.d(r,{MA:()=>d});var a=n(411855),i=n(374626),o=n(286640),s=(e=>(e.LIST="list",e.GRID="grid",e))(s||{});let l="assets-panel-view-mode-v2",c=(0,i.E3)(l,"grid");function d(){let[e,r]=(0,i.fp)(c),n=a.useCallback(e=>e.key===l&&null!=e.newValue,[]),s=a.useCallback(n=>{if(n)try{let a=JSON.parse(n);("grid"===a||"list"===a)&&e!==a&&r(a)}catch(e){}},[e,r]);return(0,o.tl)({onSync:s,shouldSyncValue:n}),[e,r]}(0,i.E3)("asset-panel-show-folders",!1)},443808:(e,r,n)=>{n.d(r,{uZ:()=>l}),n(411855),n(109388),n(299321),n(275556),n(629019),n(776250);var a=n(91408),i=n(966712);n(153234),n(864089),n(723325),n(752207),n(154254),n(534804),n(356390),n(626510),n(57150),n(274071),n(811529),n(721910),n(551640),n(836328),n(623680),n(740115),n(799550),n(773610),n(28752),n(948729);var o=n(578482);n(164655),(0,a.jz)(o.Mj);let s=[{name:"URL or HTML",type:"embed",thumbnail_url:(0,i.ck)("39b4c2c91a14bd6000430aca4f38b9d452d1f67d"),preview_url:(0,i.ck)("39b4c2c91a14bd6000430aca4f38b9d452d1f67d"),width:640,height:360,background_color:"var(--color-bg-secondary)",feature_flag:"sts_generic_embed"},{name:"YouTube",type:"embed",thumbnail_url:(0,i.ck)("c89e882e58779c46c4e5656b3775f715309928fc"),preview_url:(0,i.ck)("528dac2da25ce6a68901dd629c4606171f762fcc"),width:600,height:400,background_color:"var(--color-bg-danger-tertiary)",feature_flag:"sts_widget_youtube"},{name:"Google Map",type:"embed",thumbnail_url:(0,i.ck)("e3414cd8bb4b5e1e76366525ddf193782545e567"),preview_url:(0,i.ck)("5732708498034ce891d9f33c7269ee8679bb3191"),width:600,height:400,background_color:"var(--color-bg-brand-tertiary)",feature_flag:"sts_widget_google_maps"},{name:"Mailchimp",type:"embed",thumbnail_url:(0,i.ck)("9fe3833386aadd6fd49a7370ec5226bec8d4275b"),preview_url:(0,i.ck)("d7e138cef4cc27e9232fbfd3613728b05cb530ca"),width:400,height:50,feature_flag:"sts_widget_mailchimp"}];function l(){return(0,i.kc)().ds_sts_kit?s.filter(e=>!e.feature_flag||(0,i.kc)()[e.feature_flag]):[]}},773610:(e,r,n)=>{n.d(r,{Es:()=>v,Nn:()=>T,fi:()=>w,ie:()=>S});var a=n(411855),i=n(288706),o=n(138020),s=n(966712),l=n(38580),c=n(374626),d=n(711525),u=n(752553),m=n(647899),p=n(809831),h=n(99506),_=n(279453),g=n(623746),f=n(239671),E=n(479296),y=n(619084);let b=(0,l.eU)(async e=>{let r=e(p.u8)===f.nT.Sites&&(0,s.kc)().ds_sts_kit;if(!r)return{libraryKey:"",enabled:!1};let n=(await (0,m.w0)("ds_sts_lib_key")).get("libraryKey","",e=>"string"==typeof e),a=!!n&&r;return{libraryKey:a?n:"",enabled:a}}),I=(0,i.oA)(b,()=>({libraryKey:"",enabled:!1})),T=(0,E.n)(()=>{let{libraryKey:e,enabled:r}=(0,c.md)(I);return(0,u.IT)((0,_.Bu2)({libraryKey:e,assetType:h.PW.RESPONSIVE_SET}),{enabled:r})[0]});function v(){let e=T(),r=a.useMemo(()=>e.data?(0,y.P)(e.data):null,[e.data]);return a.useMemo(()=>"loading"===e.status?(0,d.Xm)():r?(0,d.gB)(r):{status:"disabled",data:null,errors:null},[r,e.status])}function S(e){return"loaded"===T().status&&e===y.k}function w(){let e=T(),r=(0,o.oA)(e.data?.libraryKeyToFile?.file),n=r?.libraryKey??"",i=!!n,s=(0,u.IT)((0,_.iQA)({libraryKey:n}),{enabled:i})[0];return a.useMemo(()=>{let e=(0,o.oA)(s.data?.libraryKeyToFile?.file);if(!r||!e)return{};let a=e.libraryHierarchyPaths.flatMap(e=>e.components).map(e=>(0,g.Qp)(e,{type:"team",file:{key:y.k,teamId:null,name:r.name,libraryKey:n}})),i={};for(let e of a.filter(A)){let r=e.containing_frame?.pageId;r&&(i[r]=e)}return i},[n,s.data?.libraryKeyToFile,r])}function A(e){return"thumbnail"===e.name.toLocaleLowerCase()}},507662:(e,r,n)=>{n.d(r,{T:()=>P});var a=n(411855),i=n(188507),o=n(737947),s=n(320063),l=n(358145),c=n(662275),d=n(672517),u=n(819229),m=n(335682),p=n(594901),h=n(428467),_=n(556261),g=n(56099),f=n(707465),E=n(134200),y=n(239671),b=n(173454),I=n(237870),T=n(285278),v=n(894773),S=n(220116),w=n(269842),A=n(715762),N=n(157630),C=n(730598),L=n(711302);function O(e){let r=(0,i.d4)(e=>e.selectedView),n=(0,l.ZC)(r),o=(0,i.d4)(e=>e.modalShown?.type),s=(0,i.wA)(),d="fullscreen"!==r.view&&n?.view===r.view,u=!("fullscreen"===r.view&&n?.view==="fullscreen"&&r.fileKey===n.fileKey)&&!d;a.useEffect(()=>{n&&u&&o===e&&s(c.Ce())},[s,e,o,u,n])}let R=a.memo(function({initialTab:e,teamId:r,initialUpdatesModalScope:n,entrypoint:l,sessionId:c}){O(b.cX);let p=(0,i.d4)(e=>e.selectedView),h=(0,i.d4)(e=>(0,f.IE)(e)),E=(0,m.q5)(),I=(0,_.b_)({migrationGroup:g.L.GROUP_6,component:"LibraryPreferencesModal"}),T=new URLSearchParams(o.Ay.location.search).get("teamToMoveFileToOnNavigate"),v=(0,u.R)();(0,s.h)(()=>{v({updateSource:"library_modal_open"})});let w=(0,A.YM)();return a.createElement(d.fu,{name:"Library Preference Modal",properties:{fileKey:E?.key,fileTeamId:E?.teamId,selectedTeamId:"team"===p.view?p.teamId:null,orgId:I,inPublishDraftExp:!!T,entryPoint:l}},h?a.createElement(D,null):"fullscreen"===p.view&&p.editorType!==y.nT.Whiteboard?w?a.createElement(L.b,{entrypoint:l,initialTab:e,initialUpdatesModalScope:n,sessionId:c}):a.createElement(S.B,{entrypoint:l,initialTab:e,initialUpdatesModalScope:n}):"team"===p.view?a.createElement(k,{initialTab:e,teamId:p.teamId}):r?a.createElement(k,{initialTab:e,teamId:r}):void 0)}),P=(0,I.Ju)(R,b.cX);function D(){let e=(0,A._K)();return a.createElement(w.s,{width:e,title:a.createElement(C.c,{availableTabs:[b.Wv.LIBRARIES],selectedTab:b.Wv.LIBRARIES})},a.createElement(N.Z,null,a.createElement(T.s,{showingDefaultSubscriptionsForUser:!0,showingDefaultSubscriptionsForTeamId:null,width:e})))}function k({initialTab:e,teamId:r}){let n=(0,i.wA)(),o=(0,i.d4)(e=>e.sharedFonts),s=(0,i.d4)(e=>(0,E.p)(e)),l=(0,i.d4)(e=>(0,h.canAdminOrg)(e.currentUserOrgId,e)),c=(0,p.FC)(),d=a.useMemo(()=>{let e=[b.Wv.LIBRARIES];return s&&e.push(b.Wv.FONTS),e},[s]),{selectedTab:u,setSelectedTab:m}=(0,A.SE)(d,e),_=(0,A._K)(s);return a.createElement(w.s,{width:_,title:a.createElement(C.c,{availableTabs:d,selectedTab:u,setSelectedTab:m})},a.createElement(N.Z,{showSharedFonts:s},u===b.Wv.LIBRARIES&&a.createElement(T.s,{showingDefaultSubscriptionsForTeamId:r,showingDefaultSubscriptionsForUser:!1,width:_}),u===b.Wv.FONTS&&a.createElement(v.y,{dispatch:n,teamId:r,width:_,resourceType:"team",useModalViewComponent:!0,canAdminOrg:l,permissionsState:c,sharedFonts:o})))}(0,I.Ju)(function({entrypoint:e}){O(b.EJ);let r=(0,i.wA)();return a.useEffect(()=>{v.y.loadSharedFonts(r)},[r]),a.createElement(R,{initialTab:b.Wv.FONTS,entrypoint:e})},b.EJ)},398529:(e,r,n)=>{n.d(r,{RV:()=>E});var a=n(411855),i=n(188507),o=n(966712),s=n(493323),l=n(163023),c=n(939863),d=n(830445),u=n(318812),m=n(291829),p=n(538697),h=n(117567),_=n(618208);function g({variableSet:e,modeDropdownStyle:r,entity:n,defaultModeId:o,isLibraryFileEnabled:s,fileKeyOrHubFileId:l}){let d=(0,i.wA)(),h=(0,u.Um)(),_="auto_inherit_mode_string",g=e.modes?e.modes[0].name:"",E=a.useMemo(()=>({name:(0,c.t)("variables.mode_properties_panel.select.option.default_with_name",{modeName:g}),id:_}),[g]),y=o?e.modes?.find(e=>e.id===o):E,[b,I]=(0,a.useState)(y),T=a.useMemo(()=>b?.id===_?E:e.modes?.find(e=>e.id===b?.id),[e,b,E]),v=a.useCallback(r=>{I(r),r.id===_?m.j.deleteDefaultMode({fileKeyOrHubFileId:l,entityType:n.entityType,entityId:n.entityId,variableSetKey:e.key}):m.j.setDefaultMode({fileKeyOrHubFileId:l,entityType:n.entityType,entityId:n.entityId,variableSetKey:e.key,defaultModeId:r.id}).catch(e=>{I(b)})},[b,l,n.entityType,n.entityId,e.key]);return e.modes&&1!==e.modes.length&&n&&y?a.createElement(p.l6,{id:`subscription-dropdown-${e.id}`,property:T,dispatch:d,dropdownShown:h,onChange:v,formatter:f,dropdownWidth:150,className:r,disabled:!s,dataTestId:`mode-dropdown-${e.id}`},a.createElement(p.c$,{value:E},(0,c.t)("variables.mode_properties_panel.select.option.default_with_name",{modeName:g})),a.createElement(p.sK,null),e.modes?.map(e=>a.createElement(p.c$,{key:e.id,value:e},f.format(e)))):a.createElement("div",{className:r})}let f={format:e=>e.name};function E({forBestMatches:e,variableSets:r,shouldDisplayDefaultModeDropdown:n,fileKey:i,hubFileId:u,entity:p,isLibraryFileEnabled:f}){let[E,y]=(0,a.useState)({}),[b,I]=(0,a.useState)(!1),T=a.useMemo(()=>{let e=i||u;if(e)return(0,d.ee)(e,i?"fileKey":"hubFileId")},[i,u]);if(!r||0===r.length)return null;n&&=r.some(e=>e.modes&&e.modes.length>1);let v=(0,o.kc)().ds_workspace_team_default_modes&&!b&&n&&p&&T;return(v&&m.j.getDefaultModes({fileKeyOrHubFileId:T,entityType:p.entityType,entityId:p.entityId}).then(e=>{y(e.data.meta),I(!0)}).catch(()=>{I(!0)}),v)?a.createElement(s.qc,null):a.createElement("div",null,!e&&a.createElement("div",{className:h.wx},a.createElement("div",{className:h.Pf},(0,c.tx)("design_systems.libraries_modal.header_variable_collections")),(0,o.kc)().ds_workspace_team_default_modes&&n&&a.createElement("div",{className:h.Pf},(0,c.tx)("design_systems.libraries_modal.header_default_mode"))),a.createElement("div",{className:e?h.VN:h.iE},r.map(r=>a.createElement("div",{className:h.nk,key:r.id},e?a.createElement(a.Fragment,null,a.createElement(l.B,{className:h.oS,svg:_.A}),a.createElement("span",{className:h.UU},r.name),r.numVariableMatches&&a.createElement("span",{className:h.K0},(0,c.tx)("design_systems.libraries_modal.plural.num_variable_match",{numVariables:r.numVariableMatches}))):a.createElement("div",{className:h.kW},a.createElement("span",{className:h.UU},r.name),n&&p&&T&&(0,o.kc)().ds_workspace_team_default_modes&&a.createElement(g,{variableSet:r,modeDropdownStyle:h.nI,fileKeyOrHubFileId:T,entity:p,defaultModeId:E[r.key],isLibraryFileEnabled:f})||a.createElement("div",{className:h.nI}),a.createElement("span",{className:h.K0},(0,c.tx)("design_systems.libraries_modal.plural.num_variables",{numVariables:r.numVariables})))))))}},333370:(e,r,n)=>{n.d(r,{KU:()=>g,Md:()=>y,Nr:()=>E,Pc:()=>p,VB:()=>b,dm:()=>_,l0:()=>m,lM:()=>d,wM:()=>u});var a=n(67151),i=n(299321),o=n(776250),s=n(378905),l=n(237929),c=n(173454);function d(e,r){let n={name:"",type:"STYLE_FOLDER",level:0,styles:[],subfolders:[],styleTypeSection:r};return e.forEach(e=>{let a=n,i=(0,l.ke)(e.name);i.pop(),i.forEach(e=>{let n=a.name?a.name+"/"+e:e,i=a.subfolders.find(e=>e.name===n);if(!i){let e={name:n,type:"STYLE_FOLDER",level:a.level+1,styles:[],subfolders:[],styleTypeSection:r};a.subfolders.push(e),i=e}a=i}),a.styles.push(e)}),n}function u(e){if(!e.length)return[];let r=d(e,e[0].style_type),n=[],a=e=>{e.styles.length>0&&n.push(e.name),e.subfolders.forEach(a)};return a(r),n}function m(e){let r=[...e.subfolders].reverse(),n=[...e.styles];for(;r.length>0;){let e=r.pop();e&&(n.push(e),n.push(...e.styles),r.push(...[...e.subfolders].reverse()))}return n}function p(e){return e.split("/").filter(e=>e).map(e=>e.trim()).join("/")}function h(e){return"STYLE_FOLDER"===e.type?e.name:(0,l.In)(e.name)}function _(e){return m(e).filter(e=>e.type===c.PW.STYLE)}function g(e){return m(e).filter(e=>"STYLE_FOLDER"===e.type)}function f(e){return e.type===c.PW.STYLE?(0,l.ke)(e.name).length:e.level}function E(e,r){(0,s.TK)(e,r)&&(i.glU.deleteNode(e.node_id),(0,o.sx)("Style Deleted",{styleType:e.style_type,from:"styleListContextMenu"}))}function y(e,r,n,a){if(!e&&!n||!r)return!1;let i=!a&&""!==a||"STYLE_FOLDER"===r.type&&n===r&&e?.type===c.PW.STYLE&&f(e)>f(n)&&a!==(0,l.In)(r.name);return!(e===r||n===r&&(r.type===c.PW.STYLE||!i)||"STYLE_FOLDER"===r.type&&(e?.type===c.PW.STYLE&&n?.type===c.PW.STYLE||e?.type==="STYLE_FOLDER"&&n?.type===c.PW.STYLE||e&&(h(e)+"/").startsWith(r.name+"/")||n&&(h(n)+"/").startsWith(r.name+"/")&&!i))}function b(e,r,n,o,s,u,p){if(e.forEach(e=>{(function(e,r){let n=e.filter(e=>e.type===c.PW.STYLE).map(e=>e.node_id),a=[];r.forEach(e=>{n.indexOf(e.node_id)>-1&&a.push(e)});let i=e[0],o=m(d(a,i.type===c.PW.STYLE?i.style_type:i.styleTypeSection)).filter(e=>e.type===c.PW.STYLE);for(let e=0;e<n.length;e++)if(n[e]!==o[e].node_id)return!0;return!1})(s=function(e,r){let n=new Set,a=new Set;for(let r of e)(r.type===c.PW.STYLE?[r]:(function e(r){let n=[];return r.styles.forEach(e=>{n.push(e)}),r.subfolders.forEach(r=>{n.push(r),n.push(...e(r))}),n})(r).concat([r])).forEach(e=>e.type===c.PW.STYLE?a.add(e.node_id):n.add(e.name));return r.filter(e=>"STYLE_FOLDER"===e.type?!n.has(e.name):!a.has(e.node_id))}([e],s),u)&&(u=I(e,s,u))}),!s)return;let h=new Set(e.map(e=>"STYLE_FOLDER"===e.type||p?function(e,r,n,i){if(!e)return i.some(e=>e.type===c.PW.STYLE&&""===(0,l.In)(e.name))?null:-1;if(!r)return n.length-1;let o=n.map(e=>e.node_id);if(e.type===c.PW.STYLE&&r.type===c.PW.STYLE||"STYLE_FOLDER"===e.type&&r.type===c.PW.STYLE)return null;if(e.type===c.PW.STYLE&&"STYLE_FOLDER"===r.type&&f(e)===f(r)){let n=o.indexOf(e.node_id),a=function(e,r){let n=_(e),a=new Set(r.filter(e=>e.type===c.PW.STYLE).map(e=>e.node_id)),i=n[0];return n.forEach(e=>{e.sort_position&&i.sort_position&&e.sort_position<i.sort_position&&a.has(e.node_id)&&(i=e)}),i}(r,i),s=o.indexOf(a.node_id);return n<s?n:s-1}{let s=i.indexOf(r);if(-1!==s){let e=i.slice(s,i.length).find(e=>e.type===c.PW.STYLE);if(!e)return n.length-1;let r=o.indexOf(e.node_id);return(0,a.KF)(-1!==r,"style to insert before does not exist in the stored list"),r-1}{let r=i.indexOf(e),s=i.slice(r+1).reverse().find(e=>e.type===c.PW.STYLE);if(!s)return n.length-1;let l=o.indexOf(s.node_id);return(0,a.KF)(-1!==l,"style to insert after does not exist in the stored list"),l}}}(r,n,u,s):function(e,r,n,i){if(!e)return -1;if(!r)return n.length-1;let o=n.map(e=>e.node_id);if(e.type===c.PW.STYLE&&"STYLE_FOLDER"===r.type)return o.indexOf(e.node_id);{let e=i.indexOf(r),s=i.slice(e,i.length).find(e=>e.type===c.PW.STYLE);if(!s)return n.length-1;let l=o.indexOf(s.node_id);return(0,a.KF)(-1!==l,"style to insert before does not exist in the stored list"),l-1}}(r,n,u,s)));if(h.size>1||h.has(null))return;let g=h.values().next().value,E=u[g],y=u[g+1],b=new Map,T=E;for(let r of e){let e=r=>{r.type===c.PW.STYLE?(i.glU.insertStyleBetween(r.node_id,T?.node_id||"",y?.node_id||""),T=r):(r.styles.forEach(r=>{e(r)}),r.subfolders.forEach(r=>{e(r)}))};e(r);let n=""===o?[]:o.split("/"),a=[...n,(0,l.kH)(r.name)];if(a.join("/")!==r.name){let e=(r,n)=>{if(r.type===c.PW.STYLE){let e=[...n,(0,l.kH)(r.name)].join("/");b.set(r.node_id,e),i.glU.renameNode(r.node_id,e)}else b.set(r.name,n.join("/")),r.styles.forEach(r=>{e(r,n)}),r.subfolders.forEach(r=>{let a=[...n,(0,l.kH)(r.name)];e(r,a)})};e(r,"STYLE_FOLDER"===r.type?a:n)}else b.set("STYLE_FOLDER"===r.type?r.name:r.node_id,r.name)}return b}let I=(e,r,n)=>{let a=(0,l.ke)(e.name);e.type===c.PW.STYLE&&a.pop();let o=r.filter(e=>e.type===c.PW.STYLE),s=[];for(;a.length;){let e=a.join("/");if(0===(s=o.filter(r=>(0,l.In)(r.name).startsWith(e))).length)a.pop();else break}if(s.length){let r,a=s[0];s.forEach(e=>{null!=e.sort_position&&null!=a.sort_position&&e.sort_position<a.sort_position&&(a=e)}),r=e.type===c.PW.STYLE?e:_(e)[0];let o=n.indexOf(r),l=n[o-1],d=n[o+1];i.glU.insertStyleBetween(a.node_id,l?.node_id||"",d?.node_id||"");let u=[...n];return u.splice(u.indexOf(a),1),u.splice(u.indexOf(l)+1,0,a),u}return n}},142232:(e,r,n)=>{n.d(r,{Mz:()=>N,RL:()=>L,TM:()=>R,a7:()=>C,se:()=>O});var a=n(411855),i=n(188507),o=n(414507),s=n(388393),l=n(299321),c=n(776250),d=n(939683);n(320063),n(358145);var u=n(374626),m=n(395900),p=n(776621),h=n(632430),_=n(479984),g=n(662275),f=n(493862),E=n(869156),y=n(844053),b=n(335682);n(396462),n(860178);var I=n(940596),T=n(416095),v=n(57392),S=n(715762),w=n(84819);function A(){(0,p.$D)(o.FigmaTeam.SCENEGRAPH_AND_SYNC,Error("Query for library consumers aborted during reconnect"))}async function N(e){let r=(0,f.Ak)(),n=(0,f.Ki)(r),{componentKeys:a,localIds:i}=e.reduce((e,r)=>(r.component_key&&e.componentKeys.push(r.component_key),e.componentKeys.push(...r.oldSubscribedKeysToUpdate),e.localIds.push(...r.localIdsToUpdate),e),{componentKeys:[],localIds:[]});l.BXd.downloadAllSubscribedInstancesForUpdate(a,[],i,r);try{await n}catch(e){A()}}async function C(e){let r=(0,f.Ak)(),n=(0,f.Ki)(r),{componentKeys:a,stateGroupKeys:i,localIds:o}=e.reduce((e,r)=>{for(let[n,a]of(e.stateGroupKeys.push(r.key),Object.entries(r.newStateKeyToOutdatedItems)))e.componentKeys.push(n,...a.oldSubscribedKeysToUpdate),e.localIds.push(...a.localIdsToUpdate);return e},{componentKeys:[],stateGroupKeys:[],localIds:[]});l.BXd.downloadAllSubscribedInstancesForUpdate(a,i,o,r);try{await n}catch(e){A()}}async function L(e){let r=(0,f.Ak)(),n=(0,f.Ki)(r),{styleKeys:a,localIds:i}=e.reduce((e,r)=>(e.styleKeys.push(r.key,...r.oldSubscribedKeysToUpdate),e.localIds.push(...r.localIdsToUpdate),e),{styleKeys:[],localIds:[]});l.BXd.downloadAllSubscribedStyleConsumersForUpdate(a,i,r);try{await n}catch(e){A()}}function O(e,r=T.aD.ALL,n){let o=(0,i.wA)(),I=(0,v.bA)(r),R=(0,u.md)(b.yV),{scopedComponentUpdates:P,scopedStateGroupUpdates:D,scopedStyleUpdates:k,scopedVariableSetUpdates:M}=(0,u.md)(I),F=(0,i.d4)(y.c),x=F.file_key,U=R?.parentOrgId?.toString(),B=F.file_team_id?.toString(),V=F.productType,{sessionId:G}=(0,w.sz)()??{},H=(0,E.wM)(M.map(e=>e.key)),W=a.useCallback((e,n)=>{if(Object.values(S.AX).includes(e)){let r=e===S.AX.REVIEW_INSTANCE_UPDATES_MODAL_UPDATE_INSTANCE||e===S.AX.DROPDOWN_UPDATE_SELECTED_INSTANCE;return`Instance Actions Menu > ${e} > ${r?"Update instance":"Update all"}`}return Object.values(S.r6).includes(e)?`${e} > Updates Modal > ${r} > ${n?"Update all":"Update"}`:""},[r]),K=a.useCallback(async(r,n)=>{let a=l.BXd.getTimestampForLibraryUpdateStart();(0,f.Ff)()&&await N(r),await o(h.rX({components:r,usedItemsByKey:e,instanceIdsToUpdate:n??[],updateStartTime:a}))},[o,e]),Y=a.useCallback(async(r,n)=>{let a=l.BXd.getTimestampForLibraryUpdateStart();(0,f.Ff)()&&await C(r),await o(h.As({stateGroups:r,usedItemsByKey:e,instanceIdsToUpdate:n??[],updateStartTime:a}))},[o,e]),$=a.useCallback(async e=>{let r=l.BXd.getTimestampForLibraryUpdateStart();(0,f.Ff)()&&await L(e),await o(h.t5({styles:e,updateStartTime:r}))},[o]),j=a.useCallback(async e=>{let r=l.BXd.getTimestampForLibraryUpdateStart();if((0,f.Ff)()){let r=(0,f.Ak)(),n=(0,f.Ki)(r);l.BXd.downloadAllSubscribedVariableSetConsumersForUpdate(e.map(e=>e.key),r);try{await n}catch(e){A()}for(let r of e){let e=[];if(r.libraryVariableIdsForUpdate){for(let[n,a]of l.CWU.getUsedSubscribedVariablesInSetByVariableKey(r.key)){let r=H[(0,s.ey)(n)];r&&(a.size>0||!a.has(r.version))&&e.push(`VariableID:${n}/${r.version}`)}r.libraryVariableIdsForUpdate=e}else(0,p.x1)("variables","Expected variableSet to be an UpdateRootVariableSet")}}await o(h._K({variableSets:e,updateStartTime:r}))},[o,H]),z=a.useCallback((e,r)=>{K([e],r),c.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:x,fileParentOrgId:U,fileTeamId:B,productType:V,libraryModalSessionId:G,components:[e.component_key].toString(),entrypoint:W(n,!1)})},[n,x,U,B,W,V,K,G]),q=a.useCallback((e,r)=>{Y([e],r),c.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:x,fileParentOrgId:U,fileTeamId:B,productType:V,libraryModalSessionId:G,stateGroups:[e.key].toString(),entrypoint:W(n,!1)})},[n,x,U,B,W,V,Y,G]),X=a.useCallback(e=>{$([e]),c.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:x,fileParentOrgId:U,fileTeamId:B,productType:V,libraryModalSessionId:G,styles:[e.key].toString(),entrypoint:W(n,!1)})},[n,x,U,B,W,V,$,G]),J=a.useCallback(e=>{j([e]),c.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:x,fileParentOrgId:U,fileTeamId:B,libraryModalSessionId:G,productType:V,variableSets:[e.key].toString(),entrypoint:W(n,!1)})},[n,x,U,B,W,V,j,G]),Z=(0,d.U)();return{updateComponent:z,updateStateGroup:q,updateStyle:X,updateVariableSet:J,updateAll:a.useCallback(async()=>{Z("library.update_all.attempt",{},{forwardToDatadog:!0});let e=new m.jk("updateAll",{});e.start();try{let r=P.length+D.length+k.length+M.length;o(_.ni({total:r})),o(g.Ce()),c.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:x,fileParentOrgId:U,fileTeamId:B,productType:V,libraryModalSessionId:G,components:P.map(e=>e.component_key).toString(),stateGroups:D.map(e=>e.key).toString(),styles:k.map(e=>e.key).toString(),variableSets:M.map(e=>e.key).toString(),entrypoint:W(n,!0)}),await K(P,void 0),await Y(D,void 0),await $(k),await j(M),o(_.kX());let a=e.stop();Z("library.update_all.success",{elapsedMs:a},{forwardToDatadog:!0})}catch(r){throw o(_.V2()),Z("library.update_all.failure",{elapsedMs:e.stop()},{forwardToDatadog:!0}),r}},[K,P,Y,D,$,k,j,M,x,U,B,V,W,n,o,Z,G])}}function R(e,r){let{updateComponent:n,updateStateGroup:o}=O(e,void 0,r),s=(0,i.wA)(),c=a.useCallback((e,r)=>{let n=l.glU.getOutdatedStyleConsumers(r);s(h.Qn({styleUpdateInfo:e,oldStyleGUID:r,consumerGUIDsToUpdate:n}))},[s]);return{updateIndividualInstances:a.useCallback((e,r)=>{for(let r of Object.values(e))n(r.updateAsset,r.instanceIdsToUpdate);for(let e of Object.values(r))o(e.updateAsset,e.instanceIdsToUpdate)},[n,o]),updateAllConsumersOfStyleVersion:c}}(0,I.rt)(!1)},372291:(e,r,n)=>{n.d(r,{RX:()=>I,Lm:()=>b});var a=n(411855),i=n(299321),o=n(772841),s=n(44948),l=n(966712),c=n(374626),d=n(391388);n(776621),n(335682);var u=n(623746),m=n(790202),p=n(943632),h=n(38580),_=n(684107),g=n(437304),f=n(279453);(0,c.Iz)(e=>(0,_.x8)({fileKey:e}));let E=(0,c.Iz)(e=>(0,h.eU)(r=>{let n={};for(let a of e)n[a]=r(f.u6n.Query({fileKey:a}));return n}),p.lu);(0,c.Iz)(e=>(0,h.eU)(r=>{let n={};for(let a of e)n[a]=r(f.zkh.Query({libraryKey:a}));return n}),g._f);let y="all_sources";function b(){let e=(0,m.je)();return function(e,r){let n=(0,a.useMemo)(()=>E(e),[e]),i=(0,c.md)(n);return(0,s.wm)(()=>{let e=d.Qw.all(Object.values(i));return"loaded"!==e.status?e.transform(()=>({})):d.Qw.loaded(Object.fromEntries(Object.entries(i).map(([e,n])=>[e,function(e,r=y){var n,a;if(e?.status!=="loaded")return[];let i=e.data.file;if(i?.status!==o.tT.Loaded)return[];let s=i.data;return s?.modules?.status!==o.tT.Loaded?[]:(n=s.modules.data.map(e=>(0,u.J4)(e,{type:"team",file:s})),a=r,n.filter(e=>(a===y||e.moduleSource===a)&&I(e)))}(n,r)])))},[i,r])}((0,s.wm)(()=>e.data?.map(e=>e.fileKey)??[],[e.data]),i.QjO.EDITOR_TEMPLATE)}function I(e){if(!(0,l.kc)().dse_module_publish)return!1;switch(e.moduleSource){case i.QjO.EDITOR_TEMPLATE:return!!(0,l.kc)().dse_editor_templates_v1;case i.QjO.SLIDES_TEMPLATE:return!0;case i.QjO.SITES_TEMPLATE:return!!(0,l.kc)().sites;case i.QjO.LITE_TEMPLATE:return!!(0,l.kc)().cooper}}},60088:(e,r,n)=>{n.d(r,{B:()=>u});var a=n(411855),i=n(109388),o=n(188507),s=n(743282),l=n(738269),c=n(298543),d=n(728587);function u(e){let r=(0,o.wA)(),n=a.useMemo(()=>e||(0,s.g)(),[e]),u=(0,o.d4)(e=>e.dropdownShown?.type===n),m=a.useMemo(()=>document.createElement("div"),[]);a.useEffect(()=>(document.body.appendChild(m),()=>{document.body.removeChild(m)}),[m]);let p=a.useRef(null),h=i.findDOMNode(p.current),_=h?.getBoundingClientRect()||null,g=e=>{e.callback&&e.callback("",null,r)};return{toggleDropdown:()=>{u?r(l.oB()):r(l.j7({type:n}))},dropdownTargetRef:p,Dropdown:function(e){let n=(0,c.UV)(e);return a.createElement(a.Fragment,null,u&&_&&i.createPortal(a.createElement(d.j,{parentRect:_,dispatch:r,onSelectItem:g,...e,...n}),m))},isDropdownShown:u}}},319008:(e,r,n)=>{n.d(r,{Nz:()=>et});var a=n(411855),i=n(188507),o=n(67151),s=n(243742),l=n(299321),c=n(629019),d=n.n(c),u=n(323434),m=n(134288),p=n(776250),h=n(344780),_=n(358145),g=n(966712),f=n(374626),E=n(563706),y=n(99380),b=n(438741),I=n(489604),T=n(554322),v=n(572206),S=n(153808),w=n(939863),A=n(463304),N=n(457630),C=n(29680),L=n(335682),O=n(754209),R=n(78933),P=n(611978),D=n(247014),k=n(951840),M=n(407844);n(666258),n(168289),n(396021),n(270296);var F=n(746806),x=n(857063),U=n(214090),B=n(712053),V=n(538975),G=n(371536),H=n(78422),W=(e=>(e[e.Default=0]="Default",e[e.Mobile=1]="Mobile",e[e.Prototype=2]="Prototype",e[e.Slide=3]="Slide",e))(W||{});let K=(e,r)=>{let n=(0,N.ni)(),i=(0,T.Av)(),l=(0,M._)(),c=(0,C.p8)("showUi"),d=(0,P._6)(),u="prototype"===d.view&&"slides"===d.file.editor_type,m=function({isUI3:e,prototypeHeaderHidden:r,showUi:n,style:a,toolbarHeight:i,editorBannerHeight:s}){let l=0;if(e)l=0;else switch(a){case 3:case 0:case 1:l=n?i:0;break;case 2:l=r?0:i;break;default:(0,o.xb)(a)}return 0!==s&&(l+=s),l}({isUI3:"ui3"===(0,s.DP)().version&&!u,prototypeHeaderHidden:r,showUi:c,style:e,toolbarHeight:i,editorBannerHeight:l});return a.useMemo(()=>({left:n.x,top:m,width:n.width}),[n,m])},Y=(e,r)=>{let n;let i=function(e){let r;let n=(0,N.ni)(),i=(0,M._)(),o=n.y+i;switch(e){case 1:r=4;break;case 2:r=o;break;case 3:r=0;break;case 0:r=10}return a.useMemo(()=>({left:n.x,top:o,width:n.width-(0===e?10:0),height:n.height-i-r}),[n,e,o,r,i])}(r),o=0;switch(r){case 0:n={borderWidth:5},o=5;break;case 1:n={borderTopWidth:4},o=4;break;case 3:n={borderWidth:5,borderRadius:"0.8rem",boxSizing:"border-box"},o=5;break;case 2:n={}}return a.useMemo(()=>({style:{...i,...n,"--multiplayerBorderColor":e,borderStyle:"solid","--multiplayerBorderWidth":`${o}px`},borderInfo:{width:o,color:e}}),[e,i,n,o])};function $(e){let{children:r,prototypeHeaderHidden:n}=e,i=(0,P.z3)(),o=0;"prototype"===i?o=2:E.Xb&&(o=1);let s=K(o,n||!1),l=2===o?H.Y$:void 0,c=2===o&&n?H.Fd:void 0;return a.createElement("div",{className:d()(H.GE,l,c),style:s,"data-testid":"multiplayer-bell-container"},r)}function j(){let{style:e,borderInfo:r}=a.useContext(B.h);return e={...e,borderColor:r.color},a.createElement("div",{"data-testid":"viewport-frame",className:d()(H.KM),style:e})}function z(){let{style:e,borderInfo:r}=a.useContext(B.h);return e={...e,color:"brand"===r.color?"var(--color-bg-brand)":r.color,"--borderColorTransitionDurationSeconds":`${G.Bn}s`},a.createElement("div",{className:H.KM,style:e})}function q(e){let{children:r,colorOverride:n,overlayStatus:i}=e,o=(0,O.$0)(),s=(0,O.dR)(),l=(0,O.Ww)(),c=(0,P._6)(),d=0;"prototype"===c.view?d=c.isPresenterView?3:2:E.Xb&&(d=1);let u=Y((()=>{if(n)return n;if(!i)return s&&l?.sessionID===s?.sessionID?l?.color??"transparent":o?.color??"transparent";{let{self:e,others:r}=i;return"none"!==e?"recording"===e?"var(--ramp-red-600)":"brand":"following"===r&&"none"===e?o?.color??"transparent":"transparent"}})(),d);return a.createElement(B.h.Provider,{value:u},r)}var X=(e=>(e.PRESENTING="presenting",e.PROMPT_TO_ACCEPT_NOMINATION="prompt_to_accept_nomination",e.SHOWING_EXPLAINER="showing_explainer",e.PREPARING_TO_RECORD="preparing_to_record",e.RECORDING="recording",e.NONE="none",e))(X||{}),J=(e=>(e.PENDING_AUTO_FOLLOW="pending_auto_follow",e.FOLLOWING="following",e.PROMPT_TO_REJOIN="prompt_to_rejoin",e.NONE="none",e))(J||{});function Z(){return"prototype"!==(0,P.z3)()}function Q(e,r,n,i){let o=(0,_.ZC)(e),s=(0,_.ZC)(r),l=a.useRef(performance.now());return a.useEffect(()=>{if("presenting"===e){let e=h.sn.tryStop("start_spotlight");e&&((0,p.sx)("start_spotlight",{elapsedMs:e},{forwardToDatadog:!0}),(0,g.kc)().workspace_activity_write&&n&&n.team&&n.team.workspaceId&&k.i.recordActivity({activityUnitType:D.qj.FILE_COLLABORATION,fileKey:n.key,collaborationType:D.Uz.SPOTLIGHT_STARTED,numPeopleInFile:i.current}))}else if("pending_auto_follow"===r){let e=h.sn.tryStop("join_spotlight");e&&(0,p.sx)("join_spotlight",{elapsedMs:e},{forwardToDatadog:!0})}else if("following"===r){let e=h.sn.tryStop("start_following");e&&(0,p.sx)("start_following",{elapsedMs:e},{forwardToDatadog:!0})}},[e,r,n,i]),(e!==o||r!==s)&&(l.current=performance.now()),{statusChangedAt:l.current}}function ee(e){let{multiplayer:r,prototypeHeaderHidden:n}=e,i=(0,O.Ww)(),s=(0,O.dR)(),c=(0,O.$0)(),d=(0,O.y)(),p=(0,L.q5)(),h=(0,R.T)(),_=(0,b.y7)(),g=(0,b.oJ)(),E=(0,b.$)(),T=a.useContext(y.q5),[N,C]=a.useState(!1);a.useEffect(()=>{C(!1)},[s?.sessionID]),a.useEffect(()=>{c?.sessionID===s?.sessionID&&C(!1)},[c?.sessionID,s?.sessionID]);let{isAutoFollowPending:D,cancelAutoFollowCallback:k,completeAutoFollowCallback:M,observeCurrentPresenter:B,autoFollowType:W,autoFollowDelayMs:K}=(0,O.oW)(e),{isWaitingForFirstFollower:Y,stopPresenting:j}=function(e){let[r,n]=a.useState(!1),i=e.followerCount,[o,s]=(0,f.fp)(I.Dv);0===i||r||n(!0);let c=(0,b.jA)(e)||o;(0,b.jA)(e)&&o&&s(!1),!c&&r&&n(!1);let d=c&&0===i&&!r,u=(0,R.T)(),m=(0,P.z3)(),p=a.useCallback(()=>{u(R.N.STOP),"prototype"===m?S.hk()?.stopPresenting():l.h3O.stopPresenting()},[u,m]),h=a.useCallback(()=>!!d&&(p(),!0),[p,d]);return(0,A.O1)(h,A.KD.MULTIPLAYER_SPOTLIGHT),{isWaitingForFirstFollower:d,stopPresenting:p}}(r),X=function(e){let{multiplayer:r,showingExplainer:n,isPendingPresenting:a,recorder:i}=e;return i.isRecording?"recording":i.mediaStream?"preparing_to_record":(0,b.jA)(r)||a?"presenting":n?"showing_explainer":(0,b.NB)(r)?"prompt_to_accept_nomination":"none"}({multiplayer:r,showingExplainer:(0,f.md)(I.ah),isPendingPresenting:(0,f.md)(I.Dv),recorder:T}),J=function(e){let{multiplayer:r,isAutoFollowPending:n,presenterUser:a,suppressRejoinPrompt:i}=e;return n?"pending_auto_follow":(0,b.L3)(r)?"following":a&&!i?"prompt_to_rejoin":"none"}({multiplayer:r,isAutoFollowPending:D,presenterUser:s,suppressRejoinPrompt:N}),ee=a.useRef(r.allUsers.length);ee.current=r.allUsers.length;let{statusChangedAt:et}=Q(X,J,p,ee),[er,en]=function(e,r){switch(e){case"presenting":if("following"===r||"prompt_to_rejoin"===r)return[e,"none"];return[e,r];case"prompt_to_accept_nomination":if("pending_auto_follow"===r)return["none",r];return[e,"none"];case"showing_explainer":case"none":return[e,r];case"preparing_to_record":case"recording":return[e,"none"];default:(0,o.xb)(e)}}(X,J),ea=a.useCallback(()=>{C(!0),k(),h(R.N.IGNORE)},[k,h]),ei=W===O.D_.INITIAL,eo=a.useCallback(()=>"pending_auto_follow"===en&&!!D&&W===O.D_.INITIAL&&(k(),!0),[W,k,D,en]);(0,A.O1)(eo,A.KD.MULTIPLAYER_SPOTLIGHT);let es=Z(),el="showing_explainer"===er,ec="none"!==er,ed="none"!==en,eu=a.useRef(null);a.useEffect(()=>{"preparing_to_record"===er&&T.mediaStream&&eu.current&&(eu.current.srcObject=T.mediaStream)},[er,T.mediaStream]);let em=["presenting","prompt_to_accept_nomination","showing_explainer","preparing_to_record","recording"].includes(er)||["following"].includes(en),[ep,eh]=(0,f.fp)(I.uc);return em!==ep&&eh(em),a.createElement(q,{overlayStatus:{self:er,others:en}},a.createElement(u.N,null,em&&a.createElement(m.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:G.Bn}},a.createElement(z,null))),a.createElement(u.N,null,ec&&a.createElement(m.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:G.Bn}},a.createElement($,{prototypeHeaderHidden:n},(()=>{switch(er){case"presenting":if(null===i)return null;if(Y){let e=(0,w.tx)("collaboration.spotlight.bell.presenter.waiting_for_followers"),r=(0,w.t)("collaboration.spotlight.bell.presenter.cancel");return a.createElement(U.Y,{color:"brand",message:{text:e},renderKey:`${i.sessionID}`,progressBar:!0,progressBarDurationMs:6e3,autoHide:!1,button:{text:r,onClick:j}})}return a.createElement(U.Y,{color:"brand",message:{text:a.createElement(x.s,{count:r.followerCount})},renderKey:`${i.sessionID}`,progressBar:!1,progressBarDurationMs:0,autoHide:!1,button:{text:(0,w.t)("collaboration.spotlight.bell.presenter.stop"),onClick:j},docked:es});case"prompt_to_accept_nomination":if(!i||!d)return null;return a.createElement(U.Y,{color:"brand",useSecondaryColor:!0,message:{text:(0,w.tx)("collaboration.spotlight.bell.follower.nominated",{nominatorName:d.name})},renderKey:`${i.sessionID}`,progressBar:!1,progressBarDurationMs:0,autoHide:!1,button:{text:(0,w.t)("collaboration.spotlight.tooltip.spotlight_me"),onClick:()=>{_(r)}},showCloseButton:!0,onCloseCallback:()=>{g(i.sessionID,r)}});case"showing_explainer":if(null===i)return null;let e=s?(0,w.tx)("collaboration.spotlight.bell.explainer.takeover",{currentPresenter:s?.name}):(0,w.tx)("collaboration.spotlight.bell.explainer");return a.createElement(U.Y,{color:"brand",useSecondaryColor:!0,message:{text:e},renderKey:`${r.sessionID}`,autoHide:!1,progressBar:!1,progressBarDurationMs:0,button:null,docked:!1});case"preparing_to_record":case"recording":if(!i)return null;return a.createElement(V.e,{onStopPresenting:j});case"none":return null;default:(0,o.xb)(er)}})()))),a.createElement(u.N,null,ed&&a.createElement(m.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:G.Bn}},a.createElement($,{prototypeHeaderHidden:n},(()=>{switch(en){case"pending_auto_follow":{if(!s)return null;let e=s.name,r=ei?{text:(0,w.tx)("collaboration.spotlight.bell.follower.spotlighting_presenter_alternate_copy",{presenterName:e}),onClick:M}:{text:(0,w.tx)("collaboration.spotlight.bell.follower.switching_to_new_presenter",{presenterName:e})},n=ei?{text:(0,w.t)("collaboration.spotlight.bell.follower.not_now"),onClick:ea}:null;return a.createElement(U.Y,{color:s?.color,message:r,renderKey:`${s.sessionID}`,progressBar:ei,progressBarDurationMs:K||0,autoHide:!1,button:n,ghost:el})}case"following":{let e=r.observingSessionID===r.presenterSessionID;if(null===c)return null;let n=c?.name||"",i=e?(0,w.tx)("collaboration.spotlight.bell.follower.spotlight_on_presenter",{observedUserName:n}):(0,w.tx)("collaboration.spotlight.bell.follower.following_non_presenter",{observedUserName:n}),o={text:e?(0,w.t)("collaboration.spotlight.bell.stop_following"):(0,w.t)("collaboration.spotlight.bell.stop"),onClick:()=>E(r)};return a.createElement(U.Y,{color:c?.color,message:{text:i},renderKey:`${r.observingSessionID}`,autoHide:!0,progressBar:!1,progressBarDurationMs:0,button:o,docked:es,ghost:el})}case"prompt_to_rejoin":let e=()=>(0,b.KI)(B,r,"Spotlight Rejoined",et);if(null!==c||null===s)return null;let n=(0,w.tx)("collaboration.spotlight.bell.follower.reprompt_spotlight_on_presenter",{presenterUserName:s.name}),i=(0,w.t)("collaboration.spotlight.bell.follower.follow");return a.createElement(U.Y,{color:s?.color,message:{text:n,onClick:e},renderKey:`${s.sessionID}`,autoHide:!1,progressBar:!1,progressBarDurationMs:0,button:{text:i,onClick:e},showCloseButton:!0,onCloseCallback:()=>(0,b.KI)(()=>C(!0),r,"Spotlight Rejoin Dismissed",et),useSecondaryColor:!0,ghost:el});case"none":return null;default:(0,o.xb)(en)}})()))),(()=>{if("preparing_to_record"!==er&&"recording"!==er||!T.mediaStream)return null;let e=T.mediaStream.getVideoTracks();if(0===e.length)return null;let r=e[0].getSettings();if(!r.width||!r.height)return null;let n=r.width/400,i=r.height/225,o=n>i?400:r.width/r.height*225,s=n>i?r.height/r.width*400:225;return a.createElement(F.vx,{initialPosition:new v.Mi(12,-30),initialHeight:s,initialWidth:o,transparentContentBackground:!0,initialConstraints:{x:"left",y:"bottom"},canRenderBelowViewport:!0},a.createElement("video",{className:H.bw,ref:eu,autoPlay:!0,playsInline:!0,muted:!0}))})())}function et(e){let{prototypeHeaderHidden:r}=e,n=(0,i.d4)(({multiplayer:e})=>e),o=(0,O.HG)(),s=(0,O.By)(),l=-1!==n.observingSessionID;return((0,O.VA)({multiplayer:n}),(0,O.Pi)({multiplayer:n}),s)?null:o?a.createElement(ee,{multiplayer:n,prototypeHeaderHidden:r}):l?a.createElement(er,{prototypeHeaderHidden:r}):null}function er(e){let{prototypeHeaderHidden:r}=e,n=(0,O.$0)(),o=(0,L.q5)(),s=(0,i.d4)(e=>e.multiplayer.allUsers.length),l=a.useRef(s);l.current=s,Q("none","following",o,l);let c=`${n?.sessionID}`,d=a.useMemo(()=>{let e=n?.name||"";return{text:(0,w.tx)("collaboration.spotlight.bell.follower.following_non_presenter",{observedUserName:e})}},[n]),u=Z();return null===n?null:a.createElement(q,null,a.createElement(j,null),a.createElement($,{prototypeHeaderHidden:r},a.createElement(U.Y,{color:n?.color,message:d,renderKey:c,autoHide:!0,progressBar:!1,progressBarDurationMs:0,button:null,docked:u})))}},666258:(e,r,n)=>{n.d(r,{$i:()=>l,a8:()=>s});var a=n(299321),i=n(38580),o=n(168289);(0,i.eU)(2e3),(0,i.eU)(2e3),(0,i.eU)(""),(0,i.eU)(0),(0,i.eU)(!1),(0,i.eU)(!1),(0,i.eU)(null);let s=(0,i.eU)(o.h0.AWAITING_PLAYBACK);(0,i.eU)(a.z7E.DEFAULT),(0,i.eU)(o.zu.DEFAULT),(0,i.eU)(void 0);let l=(0,i.eU)(o.JJ.CANVAS);(0,i.eU)(0)},168289:(e,r,n)=>{n.d(r,{JJ:()=>i,h0:()=>d,zu:()=>o});var a=(e=>(e.SET_CHAT="setChat",e.CLEAR_CHAT="clearChat",e.TARGET_DOM_NODE="targetDOMNode",e.TARGET_SCENE_NODE="targetSceneNode",e.INSERT_NODE="insertNode",e.ADJUST_ZOOM_LEVEL="adjustZoomLevel",e.MOVE_CURSOR_TO_CENTER_SCREEN="moveCursorToCenterScreen",e.CHANGE_TOOL="changeTool",e.MOVE_VIEWPORT="moveViewport",e.SET_CURSOR_DIRECTION="setCursorDirection",e.SET_PROPERTIES_PANEL_TAB="setPropertiesPanelTab",e.UPDATE_SELECTED_NODE_PROPERTIES="updateSelectedNodeProperties",e.SCROLL_PROPERTIES_PANEL="scrollPropertiesPanel",e.FOCUS_INPUT="focusInput",e.SELECT_SCENE_NODE="selectSceneNode",e.SET_VIEWPORT_FRAME_TYPE="setViewportFrameType",e))(a||{}),i=(e=>(e.CANVAS="canvas",e.PROPERTIES_PANEL="properties-panel",e.TEXT_PANEL="text-panel",e))(i||{}),o=(e=>(e.DEFAULT="left",e.RIGHT="right",e))(o||{}),s=(e=>(e[e.DEFAULT=0]="DEFAULT",e[e.INSIDE_SCENE_NODE=1]="INSIDE_SCENE_NODE",e[e.CANVAS_COORDINATE=2]="CANVAS_COORDINATE",e))(s||{}),l=(e=>(e[e.TOP_LEFT=0]="TOP_LEFT",e[e.BOTTOM_LEFT=1]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e))(l||{}),c=(e=>(e.CREATE_FRAME="How to draw a frame",e.FORMAT_FRAME="How to use the design panel",e.CREATE_TEXT="Add words where needed",e.FORMAT_TEXT="How to format text",e))(c||{}),d=(e=>(e.PLAYING="playing",e.AWAITING_PLAYBACK="awaitingPlayback",e))(d||{}),u=(e=>(e.LEFT="left",e.CENTER="center",e.RIGHT="right",e))(u||{}),m=(e=>(e.TOP="top",e.CENTER="center",e.BOTTOM="bottom",e))(m||{}),p=(e=>(e.TEST="test",e.PRODUCT_FRAME="productFrame",e.PRODUCT_FRAME_CHERRIES_FRAME="productFrameCherriesFrame",e.PRODUCT_FRAME_TOMATO_FRAME="productFrameTomatoFrame",e.CHERRIES_FRAME_CHERRIES_IMAGE="cherriesFrameCherriesImage",e.CHERRIES_FRAME_CHERRIES_TEXT="cherriesFrameCherriesText",e.CHERRIES_FRAME_PRICE_TEXT="cherriesFramePriceText",e.CHERRIES_FRAME_GROWN_TEXT="cherriesFrameGrownText",e.NO_BASICS_FILE_FRAME="noBasicsFileFrame",e.NO_BASICS_FILE_TEXT="noBasicsFileText",e))(p||{}),h=(e=>(e.ESC_KEY="esc key",e.STOP_BTN="stop button",e.NEXT_BTN="next tutorial button",e.PREV_BTN="previous tutorial button",e.STATE_MANAGER_ERROR="state manager error",e))(h||{})},396021:(e,r,n)=>{n(275556),n(776621),n(198868),n(759096),n(168289),n(450503)},965626:(e,r,n)=>{n(411855),n(568214),n(22332),n(154254),n(309798),n(99506),n(332531),n(666258),n(168289),n(396021),n(170460),n(450503)},260833:(e,r,n)=>{n(411855),n(629019),n(946689),n(154254),n(939863),n(175290),n(101505),n(672517),n(309798),n(833629),n(970332),n(666258),n(168289),n(63666),n(936181),n(989326)},301922:(e,r,n)=>{n.d(r,{q:()=>s});var a=n(38329),i=n(130097);n(915440),n(335682);var o=n(279453);function s(){return new Promise((e,r)=>{let n=a.D.getState().openFile?.key;if(!n)return e(!1);(0,i.Ek)(o.J2w,{fileKey:n}).then(r=>e(!!r.file?.org?.cursorChatDisabledAt))})}},182919:(e,r,n)=>{n(411855);var a=n(299321);n(966712),n(563706),n(864089),n(939863),n(226055);var i=(e=>(e[e.NONE=0]="NONE",e[e.EYEDROPPER=1]="EYEDROPPER",e[e.CHAT=2]="CHAT",e[e.HIGH_FIVE=3]="HIGH_FIVE",e))(i||{});a.NLJ.SELECT,a.NLJ.HAND,a.NLJ.DROPPER_COLOR,a.NLJ.SELECT,a.NLJ.HAND,a.NLJ.DROPPER_COLOR},407171:(e,r,n)=>{n.d(r,{__:()=>s,cP:()=>l});var a=n(299321),i=n(966712),o=n(776945);function s(e,r,n){let o=a.z7E[r];return n?(0,i.CZ)(`multiplayer_cursors/ui3/${o}/${e.substring(1)}.png`):(0,i.CZ)(`multiplayer_cursors/v1/${o}/${e.substring(1)}.png`)}function l(e,r){if(r){let r=o.JR[e.substring(1)]??o.JR[o.p4];return`data:image/png;base64, ${r}`}let n=o.De[e.substring(1)]??o.De[o.p4];return`data:image/png;base64, ${n}`}},332531:(e,r,n)=>{var a={};n.r(a),n.d(a,{GLARE_ANIMATION:()=>U,GRAY_BACKGROUND:()=>x,NONE:()=>V,ORANGE_GRADIENT:()=>F,PINK_GRADIENT:()=>k,animateBg:()=>M,glareAnimation:()=>B});var i=n(411855);n(188507);var o=n(299321),s=n(629019),l=n.n(s),c=n(344780),d=n(568214);n(22332);var u=n(966712);n(192437),n(798099),n(809831);var m=n(226055);n(949632),n(630331),n(457630),n(805286),n(460289),n(754209),n(100197),n(433861),n(593392);var p=(e=>(e.PINK_GRADIENT="PINK_GRADIENT",e.ORANGE_GRADIENT="ORANGE_GRADIENT",e.GRAY_BACKGROUND="GRAY_BACKGROUND",e.GLARE_ANIMATION="GLARE_ANIMATION",e.NONE="NONE",e))(p||{});let h=new Map([["happy birthday","PINK_GRADIENT"],["bday","PINK_GRADIENT"],["hbd","PINK_GRADIENT"],["fire","ORANGE_GRADIENT"],["fiire","ORANGE_GRADIENT"],["fiiire","ORANGE_GRADIENT"],["fiiiire","ORANGE_GRADIENT"],["lit","ORANGE_GRADIENT"],["heat","ORANGE_GRADIENT"],["hot","ORANGE_GRADIENT"],["spicy","ORANGE_GRADIENT"],["lowkey","GRAY_BACKGROUND"],["slick","GLARE_ANIMATION"],["this is clean","GLARE_ANIMATION"],["this clean","GLARE_ANIMATION"],["cleann","GLARE_ANIMATION"],["sharp","GLARE_ANIMATION"],["immaculate","GLARE_ANIMATION"],["pristine","GLARE_ANIMATION"],["polished","GLARE_ANIMATION"],["spotless","GLARE_ANIMATION"],["shiny","GLARE_ANIMATION"]]);(0,u.kc)().figjam_latin_emote_easter_eggs&&(h.set("me encanta","PINK_GRADIENT"),h.set("hola","PINK_GRADIENT"),h.set("bienvenides","PINK_GRADIENT"));let _=new Map([[(0,u.ck)("a83de90bf34495081ce2e8bcaf28d1d2c16e5186"),["lol","lmao","rofl","lmfao","hehe","haha","sksk","cryingg","dyingg","so funny","rotfl"]],[(0,u.ck)("d1e0d7ed5e1aa13e8854dbd88b9fd650377a02f2"),["fire","fiire","fiiire","fiiiire","spicy","oh snap","dope","hot","heat","so good","siick","siiick","siiiick","on point","rad","sweeet","sweeeet","wagmi","wgmi","gmi"]],[(0,u.ck)("0606e9d967b5abb6d9a2853c2fff589f2ec2fc05"),["hey","hiya","heyo","hello","howdy","whats up","what's up","good morning","gm","greetings","bye","later","ciao","see ya","cya","wave"]],[(0,u.ck)("ffd0635e8f9322352eff0c15411ac0b536b98d87"),["taking a look","sus","let me look","let me see","lemme see","i see what you did there"]],[(0,u.ck)("ff5be810b821d264cc2c95f665d24a867c34e587"),["gorgeous","stunning","love","loove","looove","loooove","looooove","luv","woww","awww","<3","yass","cute","amazingg","heart eyes","beautiful","my eyeballs are literally two giant hearts right now and i couldn't be happier","beautiful","adorable"]],[(0,u.ck)("78f60a21d2616c2a24c7645d8636dec855e48ffb"),["ngmi","bummer","sad face","uh oh",":(","noo","oh no","sorry to hear that","rip","rats","big sad","tragic","fail","womp","that sucks"]],[(0,u.ck)("1429964104bceac90c5c8e731ce4cc50b27e2797"),["wtf","whoa","no way",":O","woah","whaat","whaaat","shook","shooketh","omg","omfg","speechless","oh snap","surprised"]],[(0,u.ck)("e15fa4fbba4b88b4f1f04ba64bb12abf12bcbc6c"),["gift","hbd","bday","birthday"]],[(0,u.ck)("778eea842ed4020f6209e97c77abcd84984e5c94"),["cool","coool","swag","chill"]],[(0,u.CZ)("emoji/5/noto/medium/1f410.png"),["goat"]]]);(0,u.kc)().figjam_latin_emote_easter_eggs&&(_.set((0,u.ck)("62f55b94bf05d9a49731714238dd5e6ce716225d"),["me encanta","ole","vamos"]),_.set((0,u.ck)("88ea7d675b3ebeebbd917bf6857afa502b51d928"),["bienvenidos","bienvenides","bienvenidas"]),_.set((0,u.ck)("89a607910c3edfcaf5efa1e19bc8b646f2e47a6a"),["fuego","picante"]),_.set((0,u.ck)("8b29bcdf89d32bafec42bee873327384b55eb54b"),["hola","brillante","excelente","bien","muy bien","sol"]));var g=(e=>(e[e.Standard=0]="Standard",e))(g||{});let f=new Map;_.forEach((e,r)=>{!function(e,r,n){e.forEach(e=>n.set(e,r))}(e,r,f)});var E=n(368588);n(517333);var y=n(313894);n(38329),n(737433);var b=n(939683),I=n(886653);n(617453),n(193212),(0,n(38580).eU)(!1),(class e extends y.w{constructor({startingRelativePosition:r,startingRotation:n,position:a,viewportZoomScale:i,cursorOnRightForWindup:o,cursorOnRightForCollision:s,sessionId:l,getUserCursorTransform:c}){super(),this.type="AnimatedCursorEntity",this.lifetime=.85,s&&(this.sortOrder=-1),this.position=a,this.viewportZoomScale=i,this.cursorOnRightForWindup=o,this.cursorOnRightForCollision=s;let d={transform:`translate(${r.x}px, ${r.y}px) rotate(${n}rad)`},u={transform:`translate(${(this.cursorOnRightForWindup?1:-1)*90}px, 70px) rotate(${this.cursorOnRightForWindup?1:-1}rad) scale(0.9)`},m={transform:`translate(${(this.cursorOnRightForCollision?1:-1)*10}px, 0px) scale(2)`},p=e.RANDOM_VECTORS.map(e=>({transform:`translate(${10*e.x}px, ${10*e.y}px) ${m.transform}`})),h=1e3/60;this.customData={sessionId:l,animations:[{keyframes:[d,u],timing:{duration:12*h,easing:"cubic-bezier(.26,.32,.12,1)"}},{keyframes:[u,m],timing:{delay:12*h,duration:4*h,easing:"cubic-bezier(.16,.5,.47,1.25)"}},{keyframes:p,timing:{delay:16*h,duration:4*h,easing:`steps(${p.length})`}},{keyframes:[m,m],timing:{delay:20*h,duration:18*h}}],getReturnToCursorTransform:r=>{let n=(this.cursorOnRightForCollision?1:-1)*10,a=c(),o=(a.position.x-this.position.x)*i,s=(a.position.y-this.position.y)*i,l=a.rotation;return`translate(${e.lerp(n,o,r)}px,${e.lerp(0,s,r)}px) rotate(${e.lerp(0,l,r)}rad) scale(${e.lerp(2,1,r)})`}}}static lerp(e,r,n){return e*(1-n)+r*n}}).RANDOM_VECTORS=[{x:.626086772987037,y:-.24715772511262912},{x:.16558013014491735,y:-.4962441097195551}];let T=class e{constructor(){this.wiggleMeter=0,this.wiggleMode=!1,this.lastUpdateTime=0,this.shakeFactor=0,this.shakeGracePeriod=0,this.speedFactor=0,this.mouseX=0,this.mouseY=0,this.hasLastMousePosition=!1,this.lastMouseX=0,this.lastMouseY=0,this.lastDirectionX=0,this.lastDirectionY=0,this.subscriptions=[],this.mouseLeftCanvas=!1,this.highFiveKeyPressed=!1,this.mouseButtonHeld=!1}getWiggleMode(){return this.wiggleMode}getShakeFactor(){return this.shakeFactor}getAboutToHide(){return this.getWiggleMode()&&this.wiggleMeter<e.WIGGLE_MODE_ABOUT_TO_HIDE_TIME/e.WIGGLE_MODE_DEACTIVATION_TIME}onWiggleModeChange(e){return this.subscriptions.push(e),()=>{let r=this.subscriptions.indexOf(e);r>=0&&this.subscriptions.splice(r,1)}}setWiggleMode(e){if(e!==this.wiggleMode)for(let r of(this.wiggleMode=e,this.subscriptions))r(this.wiggleMode)}setMouseLeftCanvas(e){this.mouseLeftCanvas=e}getMouseLeftCanvas(){return this.mouseLeftCanvas}setHighFiveKeyPressed(e){this.highFiveKeyPressed=e}getHighFiveKeyPressed(){return this.highFiveKeyPressed}setMouseButtonHeld(e){this.mouseButtonHeld=e,this.update()}getMousePosition(){return{x:this.mouseX,y:this.mouseY,overCanvas:!this.mouseLeftCanvas}}stopWigglingNow(){this.speedFactor=0,this.shakeFactor=0,this.shakeGracePeriod=0,this.wiggleMeter=0,this.hasLastMousePosition=!1,this.lastDirectionX=0,this.lastDirectionY=0,this.setWiggleMode(!1),this.update()}startOrRefreshWiggle(){this.setWiggleMode(!0),this.wiggleMeter=1}getDeltaTime(){let e=performance.now(),r=e-this.lastUpdateTime;return this.lastUpdateTime=e,r/1e3}update(e,r){e?this.setMousePositionAndUpdate(e,r):this.updateWiggleMeter(r)}setMousePositionAndUpdate(r,n){if(this.mouseLeftCanvas||this.mouseButtonHeld)return;let a="number"==typeof n?n:this.getDeltaTime();if(a<=0)return;this.mouseX=r.x,this.mouseY=r.y;let i=1,o=(this.mouseX-this.lastMouseX)/a,s=(this.mouseY-this.lastMouseY)/a;if(this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,!this.hasLastMousePosition){this.hasLastMousePosition=!0;return}let l=Math.sqrt(o*o+s*s);if(l>0){let e=o/l,r=s/l;i=e*this.lastDirectionX+r*this.lastDirectionY,this.lastDirectionX=e,this.lastDirectionY=r}let c=a/e.WIGGLE_MODE_MOVEMENT_DECAY_TIME,d=a/e.WIGGLE_MODE_MOVEMENT_MIN_TIME+c;this.speedFactor+=Math.min(l*e.WIGGLE_MODE_MOVEMENT_SENSITIVITY,d),this.speedFactor=Math.max(0,this.speedFactor-c),this.speedFactor=Math.min(1,this.speedFactor);let u=this.speedFactor>=.8,m=u&&i<0,p=Math.abs(this.lastDirectionX)>Math.abs(this.lastDirectionY);u&&m&&p&&(this.shakeFactor+=1/(this.wiggleMode?e.WIGGLE_MODE_REPLENISH_SHAKES:e.WIGGLE_MODE_MIN_SHAKES_TO_TRIGGER),this.shakeGracePeriod=1),this.shakeGracePeriod>0?this.shakeGracePeriod=Math.max(this.shakeGracePeriod-a/e.WIGGLE_MODE_SHAKE_GRACE_PERIOD,0):this.shakeFactor-=a/e.WIGGLE_MODE_SHAKE_RESET_TIME,this.shakeFactor=Math.min(Math.max(this.shakeFactor,0),1),u&&(Math.abs(this.shakeFactor)>=.8?this.wiggleMeter=1:this.wiggleMode&&Math.abs(this.shakeFactor)>=.3&&(this.wiggleMeter=Math.max(this.wiggleMeter,Math.abs(this.shakeFactor)))),this.updateWiggleMeter(a)}updateWiggleMeter(r){if((r="number"==typeof r?r:this.getDeltaTime())<=0)return;this.wiggleMeter<=0?this.setWiggleMode(!1):this.wiggleMeter>=1&&this.setWiggleMode(!0);let n=0;n=this.mouseLeftCanvas?-e.WIGGLE_MODE_LEAVE_CANVAS_GRACE_PERIOD:this.highFiveKeyPressed?e.WIGGLE_MODE_HIGH_FIVE_KEY_TIME:this.wiggleMode?-e.WIGGLE_MODE_DEACTIVATION_TIME:-e.WIGGLE_MODE_MOUSE_RESET_TIME,this.wiggleMeter+=r/n,this.wiggleMeter=Math.min(Math.max(this.wiggleMeter,0),1)}};function v(e,r){let n=3*e,a=3*e,i=1.7999999999999998*e,o=[];for(let e=0;e<=100;e+=2){if(0===e||100===e){o.push(S(0,0,0));continue}let r=Math.floor(Math.random()*n)-n/2,s=Math.floor(Math.random()*a)-a/2,l=Math.floor(Math.random()*i)-i/2;o.push(S(r,s,l))}return new Animation(new KeyframeEffect(r,o,{duration:100,easing:"ease-in-out",iterations:1/0}),document.timeline)}function S(e,r,n){return{transform:`translate(${e}px, ${r}px) rotate(${n}deg)`}}function w(e){return!!e.length&&e.some(e=>"running"===e.playState)}function A(e){let{content:r,children:n}=e,[a,o]=(0,i.useState)(0),s=(0,i.useRef)(0),l=(0,i.useRef)([]),c=i.useRef(null),[d,u]=(0,i.useState)([]),m=(0,b.am)(),p=(0,i.useMemo)(()=>0===r.length?0:((r.match(/\!+$/g)||[])[0]||"").length,[r]),h=(0,i.useCallback)(e=>{clearTimeout(s.current),s.current=setTimeout(()=>{o(e=>(e>0&&h(250),Math.max(e-1,0)))},e)},[]);return(0,i.useEffect)(()=>{o(p),h(1e3)},[p,h]),(0,i.useEffect)(()=>{if(!c.current)return;a>1&&!l.current.length&&(l.current=[v(1,c.current),v(1.5,c.current),v(2,c.current),v(2.5,c.current),v(3,c.current)]);let e=w(l.current);if(a>1){let e=Math.min(a-1-1,l.current.length-1);l.current.forEach((r,n)=>{n===e?r.play():r.cancel()})}else l.current.forEach(e=>e?.cancel());let r=w(l.current);!e&&r&&m("cursor_chat_rumble_triggered"),u(l.current.map(e=>e?.playState))},[a,m]),i.createElement("div",{"data-testid":"chat-animation-wrapper","data-test-animation-state":d,ref:c},n)}T.WIGGLE_MODE_DEACTIVATION_TIME=6,T.WIGGLE_MODE_ABOUT_TO_HIDE_TIME=3,T.WIGGLE_MODE_HIGH_FIVE_KEY_TIME=.5,T.WIGGLE_MODE_MOUSE_RESET_TIME=.6,T.WIGGLE_MODE_MOVEMENT_SENSITIVITY=4e-5,T.WIGGLE_MODE_MOVEMENT_MIN_TIME=.1,T.WIGGLE_MODE_MOVEMENT_DECAY_TIME=1.5,T.WIGGLE_MODE_MIN_SHAKES_TO_TRIGGER=6.5,T.WIGGLE_MODE_REPLENISH_SHAKES=3.5,T.WIGGLE_MODE_SHAKE_GRACE_PERIOD=.3,T.WIGGLE_MODE_SHAKE_RESET_TIME=.5,T.WIGGLE_MODE_LEAVE_CANVAS_GRACE_PERIOD=.3,(0,I.xx)(function(e){return e.reduce((e,r)=>(e[r.sessionID]=r,e),{})}),n(36127),p.NONE;n(301922);var N=n(67151),C=n(407171);function L({color:e,isHighFiveHandOut:r,temporarilyHide:n,isCursorHandOnRight:a,aboutToHide:o=!1}){return i.createElement("div",{className:l()({"cursor_high_five--highFiveAnimationContainer--jWFVT":!0,"cursor_high_five--highFiveAnimHighFiveHandOut--6q5Bu":r,"cursor_high_five--highFiveAnimHighFiveHandAboutToHide--tFRSO":o})},i.createElement("div",{style:{opacity:n?"0":"1"},className:l()({"cursor_high_five--highFiveWaveContainer--M1fBF":!0,"cursor_high_five--cursorHandOnRight--wSZLI":a})},i.createElement(D,{color:e})))}let O="#FFFFFF",R=new Set([O,"#0FA958","#5551FF","#9747FF","#848484","#D27C2C","#F24E1E","#FFC700","#667799","#9747FF","#007BE5","#FF24BD","#F24822","#FFCD29","#14AE5C"]);function P({color:e}){let[r,n]=i.useState(!1);if(!R.has(e))return(0,N.KF)(!!e,`Unknown color ${e} for Cursor High Fives`),i.createElement(i.Fragment,null);let a=(0,C.__)(r?O:e,o.z7E.HIGH_FIVE,!1);return i.createElement("img",{className:"cursor_high_five--handImage--mJVid",src:a,alt:"",onError:()=>n(!0)})}function D({color:e}){return i.createElement(P,{key:e,color:e})}n(182919),n(939863),n(145519),n(330505);let k="cursor_chat_emotes--PINK_GRADIENT--1KQ3C",M="cursor_chat_emotes--animateBg---meP2",F="cursor_chat_emotes--ORANGE_GRADIENT--cC1fw",x="cursor_chat_emotes--GRAY_BACKGROUND--DAHAE",U="cursor_chat_emotes--GLARE_ANIMATION--SuTBw",B="cursor_chat_emotes--glareAnimation--x1WJw",V="cursor_chat_emotes--NONE---FYHz";var G=n(170460),H=n(91408);n(301462),n(601607),n(676938);var W=n(837746);(0,H.hG)(W.tui),n(616121);let K=(0,i.memo)(function({name:e,color:r,cursorType:n,chatMessage:s,isHighFiving:_,focusOnTextCursor:g,temporarilyHide:f,isCursorHandOnRight:y,isCursorPointingRight:b,editorType:I,isCursorAndChatAreaOffscreen:T,sessionId:v,prefersReducedMotion:S,isHighFivingSupported:w,useChatAnimation:N,disableMessageFade:O,isStaticView:R,isHoveringWidgetWithHiddenCursors:P}){let D=(0,m.GS)(),[k,M]=(0,i.useState)(1),F=(0,i.useMemo)(()=>(0,d.GL)(r),[r]),[x,U]=(0,i.useState)(p.NONE),B=()=>U(p.NONE),[V,H]=(0,i.useState)(R),[W,K]=s||[];(0,i.useEffect)(()=>{let e,r;return W||K?(H(!0),M(1)):(H(!1),B()),O||(e=setTimeout(()=>{M(0)},5e3),r=setTimeout(()=>{H(!1),B()},8e3)),()=>{M(0),H(!1),B(),clearTimeout(e),clearTimeout(r)}},[W,K,O]);let Y="whiteboard"===I;(0,i.useEffect)(()=>{if(Y&&W&&!T)for(let e of h.keys()){let r=h.get(e);r&&function(e,r){var n;let a=e.toLocaleLowerCase(),i=!(1===(n=a.charAt(a.length-r.length-1)).length&&/[A-Za-z]/.test(n));return a.endsWith(r)&&i}(W,e)&&U(r)}},[W,T,Y]);let $=i.useRef(null);(0,i.useEffect)(()=>{if($.current&&$.current.innerText===W){let e=c.sn.tryStop(`view_cursor_chat_message_${v}_${W}`);e&&c.Vq.add("view_cursor_chat_message",e)}},[W,$,v]);let j=(0,u.kc)().cursor_bot&&b&&n===o.z7E.DEFAULT,z=n===o.z7E.PEN,q=i.createElement("div",{className:l()({[G.iU]:V,[G.VW]:!V,[G.S8]:D&&!z,[G.z8]:j}),style:{color:F}},i.createElement("div",{className:V?G.bu:G.iY,style:{opacity:V?F===d.e3?.8:.5:1},dir:"auto"},e),V&&i.createElement("div",{className:G.Lo,style:{opacity:F===d.YN?.8*k:k,boxShadow:Y?void 0:`2px 4px 8px ${r}40`},dir:"auto"},K&&i.createElement("div",{className:K.length>0&&(W?.length??0)>0?G.vD:""},K),W&&i.createElement("div",{ref:$},W)),i.createElement("div",{className:`${G.hD} ${a[x]}`,style:"NONE"!==x?{background:r,overflow:"hidden",borderRadius:"2px 20px 20px 20px"}:{background:r},onAnimationEnd:()=>B()}));return g?null:i.createElement("div",{className:G.Dy,style:{opacity:P?0:1},"data-testid":`multiplayer-cursor-${v}`},i.createElement("div",{className:G.or},w?i.createElement(i.Fragment,null,i.createElement("div",{className:G.p},i.createElement(L,{color:r,isHighFiveHandOut:_,temporarilyHide:f,isCursorHandOnRight:y})),i.createElement("img",{className:l()({[G.u0]:!0,[G.Bj]:!0,[G.DE]:_,[G.z8]:j}),src:(0,C.__)(r,_?o.z7E.DEFAULT:n,D),alt:`${_?"highfive cursor":"hand cursor"}`,onError:({currentTarget:e})=>{e.onerror=null,e.src=(0,C.cP)(r,D)}})):i.createElement("img",{className:l()({[G.u0]:!0,[G.z8]:j}),src:(0,C.__)(r,n,D),alt:"cursor",onError:({currentTarget:e})=>{e.onerror=null,e.src=(0,C.cP)(r,D)}}),v&&i.createElement(E.o,{sessionId:v})),(N||Y)&&!S?i.createElement(A,{content:W||""},q):q)}),Y=i.memo(function({isCursorAndChatAreaOffscreen:e,x:r,y:n,children:a}){let o={display:e?"none":"block",willChange:"transform",transform:e?"translate3D(-10000px, -10000px, 0)":`translate3D(${r}px, ${n}px, 0)`};return i.createElement("div",{style:o},a)}),$=(e,r,n)=>{let a=React.useRef(null);a.current=e?.sessionId??a.current,useEffect(()=>{a.current&&n&&cursorChatTracker?.setOtherUserChattingState(a.current,r)},[n,r]),useEffect(()=>(a.current&&cursorChatTracker?.setOtherUserChattingState(a.current,!1),()=>{a.current&&cursorChatTracker?.setOtherUserChattingState(a.current,!1)}),[])}},624875:(e,r,n)=>{n.d(r,{O:()=>o}),n(411855),n(188507);var a=n(91408),i=(n(498750),n(153234),n(572206),n(939863),n(293017),n(287010),n(973149),n(617453),n(205135),n(7959),n(746806),n(837746));n(105773);let o="nudge-amount";(0,a.hG)(i.md8)},371591:(e,r,n)=>{n.d(r,{Bf:()=>ti,UB:()=>ts,xH:()=>to});var a,i=n(411855),o=n(188507),s=n(67151),l=n(404396),c=n(948500),d=n(336935),u=n(426710),m=n(249964),p=n(93098),h=n(286482),_=n(5050),g=n(54837),f=n(935829),E=n(915906),y=n(732720),b=n(701817),I=n(508275),T=n(844463),v=n(841614),S=n(386424),w=n(752046),A=n(960141),N=n(556006),C=n(77437),L=n(353566),O=n(675507),R=n(303511),P=n(666309),D=n(222903),k=n(47493),M=n(459593),F=n(368785),x=n(785273),U=n(382707),B=n(206703),V=n(769335),G=n(711229),H=n(514118),W=n(217754),K=n(923968),Y=n(542061),$=n(947718),j=n(360407),z=n(970961),q=n(826097),X=n(299321),J=n(304061),Z=n(904669),Q=n(629019),ee=n.n(Q),et=n(966712),er=n(218549),en=n(886653),ea=n(163023),ei=n(348425),eo=n(939863),es=n(721439),el=n(931770),ec=n(498606),ed=n(820396),eu=n(11931),em=n(234587),ep=n(533228),eh=n(921100),e_=n(459476),eg=n(608974),ef=n(107018),eE=n(877424),ey=n(479641),eb=n(404754),eI=n(608026),eT=n(233891),ev=n(464300),eS=n(763634),ew=n(954037),eA=n(116198),eN=n(443043),eC=n(77499),eL=n(462725),eO=n(968109),eR=n(498902),eP=n(251232),eD=n(21458),ek=n(181033),eM=n(404605),eF=n(912109),ex=n(882354),eU=n(436902),eB=n(416014),eV=n(813601),eG=n(624204),eH=n(401127),eW=n(408026),eK=n(828099),eY=n(852732),e$=n(554593),ej=n(263699),ez=n(751395),eq=n(994891),eX=n(638894),eJ=n(729005),eZ=n(772661),eQ=n(69688),e0=n(376449),e1=n(348844),e2=n(528517),e3=n(596922),e6=n(313888),e5=n(531800),e8=n(691151),e4=n(900952),e9=n(142284),e7=n(297447),te=n(660257),tt=n(353560),tr=n(618208);let tn=new er.q(750);function ta(e){switch(e.stackMode){case"HORIZONTAL":if("WRAP"===e.stackWrap)switch(e.stackPrimaryAlignItems){case"MIN":case"SPACE_EVENLY":case"SPACE_BETWEEN":case void 0:return eZ.A;case"CENTER":return eJ.A;case"MAX":return eQ.A;default:(0,s.xb)(e.stackPrimaryAlignItems)}else switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return ej.A;case"CENTER":return e$.A;case"MAX":return eY.A;default:(0,s.xb)(e.stackCounterAlignItems)}case"VERTICAL":switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return eq.A;case"CENTER":return ez.A;case"MAX":return eX.A;default:(0,s.xb)(e.stackCounterAlignItems)}}return eC.A}(e=>{function r(e){return void 0!==e.objectsPanelThumbnailId}function n(e,n,a){let o={src:eB.A,tooltip:""};if(!e)return o;let Y=e.type;switch((0,J.GI)(e)&&(Y="STAMP"),Y){case"BOOLEAN_OPERATION":switch(e.booleanOperation){case"UNION":return{src:a?i.createElement(E.C,null):ev.A,tooltip:(0,eo.t)("layer_icon.tooltip.union")};case"INTERSECT":return{src:a?i.createElement(y.q,null):eI.A,tooltip:(0,eo.t)("layer_icon.tooltip.intersect")};case"SUBTRACT":return{src:a?i.createElement(b.j,null):eT.A,tooltip:(0,eo.t)("layer_icon.tooltip.subtract")};case"XOR":return{src:a?i.createElement(I.p,null):eS.A,tooltip:(0,eo.t)("layer_icon.tooltip.exclude")};default:return o}case"VECTOR":return{src:a?i.createElement(T.g,null):te.A,tooltip:(0,eo.t)("layer_icon.tooltip.vector")};case"STAR":return{src:a?i.createElement(v.j,null):e1.A,tooltip:(0,eo.t)("layer_icon.tooltip.star")};case"LINE":return{src:a?i.createElement(S.z,null):eD.A,tooltip:(0,eo.t)("layer_icon.tooltip.line")};case"ELLIPSE":return{src:a?i.createElement(w.H,null):eA.A,tooltip:(0,eo.t)("layer_icon.tooltip.ellipse")};case"RECTANGLE":case"ROUNDED_RECTANGLE":return{src:a?i.createElement(A.M,null):eB.A,tooltip:(0,eo.t)("layer_icon.tooltip.rectangle")};case"REGULAR_POLYGON":return{src:a?i.createElement(N.X,null):eU.A,tooltip:(0,eo.t)("layer_icon.tooltip.polygon")};case"TEXT":return{src:a?i.createElement(C.I,null):e9.A,tooltip:(0,eo.t)("layer_icon.tooltip.text")};case"SLICE":return{src:a?i.createElement(L.z,null):eW.A,tooltip:(0,eo.t)("layer_icon.tooltip.slice")};case"GROUP":case"FRAME":if((0,em.oz)()&&r(e)&&e.parentNode?.isResponsiveSet)return{src:(0,eu.l)(e.size.x),tooltip:(0,eo.t)("layer_icon.tooltip.layout")};if(e.isStateGroup)return{src:a?i.createElement(O.k,null):e6.A,tooltip:(0,eo.t)("layer_icon.tooltip.component")};if((0,ep.R)(e))return{src:a?function(e){switch(e.stackMode){case"HORIZONTAL":if("WRAP"===e.stackWrap)switch(e.stackPrimaryAlignItems){case"MIN":case"SPACE_EVENLY":case"SPACE_BETWEEN":case void 0:return i.createElement(l.d,null);case"CENTER":return i.createElement(c.B,null);case"MAX":return i.createElement(d.E,null);default:(0,s.xb)(e.stackPrimaryAlignItems)}else switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return i.createElement(u.J,null);case"CENTER":return i.createElement(m.P,null);case"MAX":return i.createElement(p.n,null);default:(0,s.xb)(e.stackCounterAlignItems)}case"VERTICAL":switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return i.createElement(h.D,null);case"CENTER":return i.createElement(_.h,null);case"MAX":return i.createElement(g.A,null);default:(0,s.xb)(e.stackCounterAlignItems)}}return i.createElement(f.q,null)}(e):ta(e),tooltip:(0,eo.t)("layer_icon.tooltip.auto_layout")};if(e.resizeToFit)return{src:a?i.createElement(R.g,null):eL.A,tooltip:(0,eo.t)("layer_icon.tooltip.group")};else return{src:a?i.createElement(f.q,null):eC.A,tooltip:(0,eo.t)("layer_icon.tooltip.frame")};case"RESPONSIVE_SET":if((0,em.oz)())return{src:i.createElement(P.A,null),tooltip:(0,eo.t)("layer_icon.tooltip.webpage")};return{src:a?i.createElement(f.q,null):eC.A,tooltip:(0,eo.t)("layer_icon.tooltip.frame")};case"CODE_COMPONENT":if((0,em.oz)())return{src:i.createElement(D.O,null),tooltip:(0,eo.t)("layer_icon.tooltip.code_component")};return{src:eC.A,tooltip:(0,eo.t)("layer_icon.tooltip.component")};case"CODE_INSTANCE":if((0,em.oz)())return{src:i.createElement(D.O,null),tooltip:(0,eo.t)("layer_icon.tooltip.code_instance")};return{src:eC.A,tooltip:(0,eo.t)("layer_icon.tooltip.component")};case"CODE_LAYER":if((0,em.oz)())return{src:i.createElement(D.O,null),tooltip:(0,eo.t)("layer_icon.tooltip.code_layer")};return{src:eC.A,tooltip:(0,eo.t)("layer_icon.tooltip.component")};case"CODE_LIBRARY":if((0,em.oz)())return{src:i.createElement(D.O,null),tooltip:(0,eo.t)("layer_icon.tooltip.code_library")};return{src:eC.A,tooltip:(0,eo.t)("layer_icon.tooltip.component")};case"CODE_FILE":if((0,em.oz)())return{src:i.createElement(D.O,null),tooltip:(0,eo.t)("layer_icon.tooltip.code_file")};return{src:eC.A,tooltip:(0,eo.t)("layer_icon.tooltip.component")};case"MODULE":return{src:e8.A,tooltip:(0,eo.t)("layer_icon.tooltip.module")};case"SYMBOL":if((0,et.kc)().dse_templates_proto&&r(e)&&e.isTemplate)return{src:e8.A,tooltip:(0,eo.t)("layer_icon.tooltip.template")};if(r(e)&&e.isState||n?.isStateGroup)return{src:a?i.createElement(k.y,null):e5.A,tooltip:(0,eo.t)("layer_icon.tooltip.variant")};return{src:a?i.createElement(O.k,null):e6.A,tooltip:(0,eo.t)("layer_icon.tooltip.component")};case"INSTANCE":return{src:a?i.createElement(M.m,null):eO.A,tooltip:(0,eo.t)("layer_icon.tooltip.instance")};case"STICKY":return{src:a?i.createElement(F.a,null):e2.A,tooltip:(0,eo.t)("layer_icon.tooltip.sticky")};case"SHAPE_WITH_TEXT":return{src:a?i.createElement(x.T,null):eG.A,tooltip:(0,eo.t)("layer_icon.tooltip.shape_with_text")};case"CONNECTOR":return{src:a?i.createElement(U.y,null):ew.A,tooltip:(0,eo.t)("layer_icon.tooltip.connector")};case"STAMP":return{src:a?i.createElement(B.w,null):e0.A,tooltip:(0,eo.t)("layer_icon.tooltip.stamp")};case"SECTION":return{src:a?i.createElement(V.e,null):eV.A,tooltip:(0,eo.t)("layer_icon.tooltip.section")};case"WIDGET":{let r=e.guid?(0,Z.UN)().get(e.guid.toString()):null;if(r&&"EMBED_WIDGET"===r.widgetId)return{src:a?i.createElement(G.G,null):eN.A,tooltip:(0,eo.t)("layer_icon.tooltip.embed")};if(r&&"LINK_PREVIEW_WIDGET"===r.widgetId)return{src:a?i.createElement(H.N,null):ek.A,tooltip:(0,eo.t)("layer_icon.tooltip.link_preview")};return{src:a?i.createElement(W.h,null):tt.A,tooltip:(0,eo.t)("layer_icon.tooltip.widget")}}case"CANVAS":return{src:eF.A,tooltip:(0,eo.t)("layer_icon.tooltip.canvas")};case"TABLE":return{src:a?i.createElement(K.r,null):e4.A,tooltip:(0,eo.t)("layer_icon.tooltip.table")};case"SLIDE":return{src:eK.A,tooltip:(0,eo.t)("layer_icon.tooltip.slide")}}return o}function a(e){let r=(0,en.xx)((e,r)=>{let n;return(n=tn.get(e))&&n.thumbnailId===r||(n={thumbnailId:r,svg:el.NO(e)},tn.set(e,n)),n.svg}),{guid:n,node:a,isMenuIcon:o,isMenuIconPurple:s,className:l,editModeType:c,detachedInfo:d,disabled:u,locked:m,hovered:p,outOfView:h,scrollLeft:_,horizontalScrollEnabled:g,useUI3Icon:f}=e,E=a?r(n,a.objectsPanelThumbnailId):"",y=a?.hasEnabledAnimatedPaint,b=a?.hasEnabledVideoPaint;return i.createElement(eY,{className:l,node:a,isMenuIcon:o,isMenuIconPurple:s,thumbnailSrc:E,onDoubleClick:()=>{e.node&&(e.navigateAndPanTo?e.navigateAndPanTo(e.node.guid):X.glU.panToNode(e.node.guid,!1))},animated:y||b,staticImage:a?.hasEnabledStaticImagePaint,editModeType:c,detachedInfo:d,isDefaultResponsiveSet:e.isDefaultResponsiveSet,disabled:u,locked:m,hovered:p,outOfView:h,scrollLeft:_,horizontalScrollEnabled:g,useUI3Icon:f})}e.LayerIcon=a,a.displayName="LayerIcon";let Q=e=>e.mirror.sceneGraph;e.ConnectedLayerIcon=function(e){let r=(0,o.d4)(Q);return i.createElement(a,{...e,node:r.get(e.guid)||null})};class er extends i.PureComponent{getAllPaints(e){return[...e.fillPaints||[],...e.strokePaints||[],...e.backgroundPaints||[]]}renderBaseIcon(){let{node:e,parentNode:r,isMenuIcon:n,isMenuIconPurple:a,className:o,disabled:s,locked:l,hovered:c,outOfView:d,scrollLeft:u,horizontalScrollEnabled:m,useUI3Icon:p}=this.props;return i.createElement(eY,{className:o,node:e,parentNode:r,isMenuIcon:n,isMenuIconPurple:a,animated:this.hasEnabledAnimatedPaintNodeChange(e),staticImage:this.hasEnabledStaticPaintNodeChange(e),disabled:s,locked:l,hovered:c,outOfView:d,scrollLeft:u,horizontalScrollEnabled:m,useUI3Icon:p})}renderVariableIcon(){let{variableResolvedType:e}=this.props.node;return null==e?this.renderBaseIcon():i.createElement(ed.i,{type:e})}renderVariableCollectionIcon(){return i.createElement(ea.B,{svg:tr.A,className:this.props.className,autosize:!0})}renderStyleIcon(){let{node:e,className:r}=this.props;switch(e.styleType){case"GRID":let n=(0,es.s$)(e);return i.createElement(ea.B,{svg:n,className:r,autosize:!0,width:"10px"});case"FILL":return i.createElement(ea.B,{svg:ef.A,className:r});case"EFFECT":return i.createElement(ea.B,{svg:eg.A,className:r});case"TEXT":return i.createElement(ea.B,{svg:eE.A,className:r});default:return this.renderBaseIcon()}}hasEnabledAnimatedPaintNodeChange(e){for(let r of this.getAllPaints(e))if(r.animatedImage)return!0;return!1}hasEnabledStaticPaintNodeChange(e){for(let r of this.getAllPaints(e))if(r.image)return!0;return!1}render(){let{node:e,className:r}=this.props;return e.styleType?this.renderStyleIcon():"VARIABLE"===e.type?this.renderVariableIcon():"VARIABLE_SET"===e.type?this.renderVariableCollectionIcon():"CANVAS"===e.type?i.createElement(ea.B,{svg:ey.A,className:r}):this.renderBaseIcon()}}e.NodeChangeIcon=er;class eY extends i.PureComponent{render(){let e,r;let{node:a,parentNode:o,animated:s,staticImage:l,thumbnailSrc:c,isMenuIcon:d,isMenuIconPurple:u,onDoubleClick:m,editModeType:p,detachedInfo:h,outOfView:_,horizontalScrollEnabled:g}=this.props;if(!a)return null;let f=eh.V3;c&&(f=eh.W5),d&&(f=u?eh.aN:eh.TK);let E=!1,y="";this.props.isDefaultResponsiveSet?(e=i.createElement(Y.Q,null),y=(0,eo.t)("layer_icon.tooltip.home")):a.mask?(e=this.props.useUI3Icon?i.createElement($.d,null):eM.A,y=(0,eo.t)("layer_icon.tooltip.mask")):(s||l)&&(0,J.oY)(a.type)&&!(0,J.GI)(a)?s?(e=this.props.useUI3Icon?i.createElement(j._,null):eR.A,y=(0,eo.t)("layer_icon.tooltip.video")):(e=this.props.useUI3Icon?i.createElement(z._,null):eP.A,y=(0,eo.t)("layer_icon.tooltip.image")):c?(e=(0,ea.V)(c),y=n(a,o).tooltip):p===X.m1T.DEV_HANDOFF&&h?.status==="loaded"&&"SYMBOL"!==a.type&&"INSTANCE"!==a.type?(e=e_.A,E=!0):({src:e,tooltip:y}=n(a,o,this.props.useUI3Icon),r=function(e){if(e)switch(e.type){case"TEXT":return e7.A;case"STICKY":return e3.A;case"SHAPE_WITH_TEXT":return eH.A;case"FRAME":if((0,ep.R)(e))return ta(e);break;case"CANVAS":return ex.A}}(a));let b=!E&&"ABSOLUTE"===a.stackPositioning&&(this.props.useUI3Icon?i.createElement(q.I,{className:eh.E7}):i.createElement(ea.B,{className:eh.E7,svg:eb.A}));return i.createElement("span",{className:ee()(this.props.className||f,eh.P0,{[eh.EA]:g,[eh.EU]:g&&_}),onDoubleClick:m,"data-tooltip":y||null,"data-tooltip-show-above":!0,"data-tooltip-type":ec.Ib.TEXT},"string"==typeof e?i.createElement(ei.t,{svg:e,fallbackSvg:r}):i.createElement("span",{style:{stroke:"none",fill:"none"}},e),b)}}})(a||(a={}));let ti=a.ConnectedLayerIcon,to=a.LayerIcon,ts=a.NodeChangeIcon},741944:(e,r,n)=>{var a=n(91408),i=n(837746);(0,a.hG)(i.Nqv)},533228:(e,r,n)=>{function a(e){let r=e.stackMode;return"HORIZONTAL"===r||"VERTICAL"===r}n.d(r,{R:()=>a}),n(411855)},739212:(e,r,n)=>{n(411855),n(188507),n(693656),n(299321);var a=n(304061);n(904669),n(966712);var i=n(886653);n(752353);var o=n(378762);n(741944),n(716413);var s=(e=>(e.Object="OBJECT",e.Webpage="WEBPAGE",e.CodeComponent="CODE_COMPONENT",e))(s||{});(0,i.xx)((e,r)=>{let n=1/0;return(0,o.YI)(e,r,r=>{r&&(n=Math.min(n,(0,a.F0)(e,r.guid)))}),n===1/0&&(n=0),n})},357864:(e,r,n)=>{n(693656),n(299321),n(304061),n(153234),n(72274),n(378762),n(273226),n(741944),n(930269)},716413:(e,r,n)=>{(0,n(411855).createContext)(null)},102930:(e,r,n)=>{n.d(r,{N:()=>g});var a=n(411855),i=n(463033),o=n(91408),s=n(201888),l=n(643739),c=n(946689),d=n(939863),u=n(293017);n(726864);var m=n(583894),p=n(746806),h=n(837746),_=n(209056);(0,o.hG)(h.oVP);class g extends a.PureComponent{constructor(e){super(e),this.onClose=()=>{this.props.dispatch(u.Z1()),(0,l.hW)(m.vA.NEVER)},this.onClickOpenInApp=()=>{this.props.dispatch(u.Z1()),(0,l.hW)(this.state.alwaysChecked?m.vA.ALWAYS:m.vA.NEVER),(0,s.Sr)(location.href,s.B3.OPEN_IN_DESKTOP_MODAL)},this.onClickAlwaysOpenDesktopApp=()=>{this.setState({alwaysChecked:!this.state.alwaysChecked})},this.state={alwaysChecked:(0,l.hu)()!==m.vA.NEVER}}static shouldShowOnce(){return(0,l._p)()&&void 0===(0,l.hu)()}static shouldAutoOpen(){return(0,l._p)()&&(0,l.hu)()===m.vA.ALWAYS}static toggleAutoOpen(){let e=(0,l.hu)()===m.vA.ALWAYS;(0,l.hW)(e?m.vA.NEVER:m.vA.ALWAYS)}static isAutoOpenEnabled(){return(0,l.hu)()===m.vA.ALWAYS}static enableAutoOpen(){(0,l.hW)(m.vA.ALWAYS)}static disableAutoOpenIfUnset(){void 0===(0,l.hu)()&&(0,l.hW)(m.vA.NEVER)}render(){return a.createElement(p.vx,{initialPosition:this.props.initialPosition,title:(0,d.t)("desktop_open_views.open_in_desktop_modal.title"),headerSize:"small",dragHeaderOnly:!0,onClose:this.onClose},a.createElement("div",{className:_.k},a.createElement("div",{className:_.K},a.createElement(c.tB,{id:"always-open-desktop-app",checked:this.state.alwaysChecked,onClick:this.onClickAlwaysOpenDesktopApp}),a.createElement(c.JU,{htmlFor:"always-open-desktop-app"},(0,d.tx)("desktop_open_views.open_in_desktop_modal.always_open_in_app_checkbox"))),a.createElement("div",{className:_.K},a.createElement(i.$n,{variant:"secondary",onClick:this.onClose},(0,d.tx)("desktop_open_views.modal.dismiss_button")),a.createElement(i.$n,{variant:"primary",onClick:this.onClickOpenInApp},(0,d.tx)("desktop_open_views.open_in_desktop_modal.open_in_app_button")))))}}g.displayName="OpenDesktopAppModal"},875331:(e,r,n)=>{n.d(r,{VS:()=>_});var a=n(411855),i=n(188507),o=n(299321);n(629019);var s=n(939683);n(540721),n(358145),n(966712),n(586459),n(316082),n(964881),n(13379),n(226055),n(929715),n(617453);var l=n(634480),c=n(862442),d=n(177505),u=n(479118);n(335682);var m=n(611978);n(99506),n(100197),n(414507),n(915440),n(711525),n(391388),n(776621);var p=n(330654);n(493323),n(331737),n(71656),n(939863),n(279453),n(754168),n(653671),p.record(p.object({thumbnail_url:p.string(),thumbnail_meta:p.object({}).passthrough().transform(e=>JSON.stringify(e)),created_at:p.string().optional()})),n(445448),n(498750),n(356390),n(843495),n(187882);var h=(e=>(e.RANGE="range",e.INDIVIDUAL="individual",e))(h||{});function _({pagesList:e,isComparingChanges:r,enabled:n=!0}){let p=(0,c.Z)("page_change_navigator_navigate"),h=(0,l.E)(),_=(0,s.U)(),g=(0,i.wA)(),f=(0,m._6)(),E=(0,d.dh)(n),y=(0,i.d4)(e=>e.versionHistory);return(0,a.useCallback)(async a=>{n&&await (0,d.$P)(a,E,y,g,(0,u.Fy)(e,a)===o.xal.LOADED,_,p,h,r,f)},[e,p,h,_,g,f,E,y,r,n])}n(465702),n(275556)},653671:(e,r,n)=>{n.d(r,{l7:()=>d});var a=n(904669),i=n(38580),o=n(586459),s=n(940596);(0,i.eU)(null),(0,s.Wh)(()=>(0,i.eU)([]));let l=(0,s.Wh)(()=>(0,i.eU)(null));(0,s.Wh)(()=>(0,i.eU)(o.r.INIT));let c=(0,s.Wh)(()=>(0,i.eU)(null)),d=(0,i.eU)(e=>e(c),(e,r,n)=>{let i=e(c),o="function"==typeof n?n(i):n;if(i!==o){if(r(c,o),o){let e=(0,a.UN)().get(o);r(l,e?.name||"")}else r(l,null)}});(0,i.eU)(null)},445448:(e,r,n)=>{n(411855),n(188507),n(299321),n(629019),n(966712),n(153234),n(163023),n(939863),n(392592),n(809831),n(226055),n(177505),n(678340),n(479118),n(100197),n(601607),n(498606),n(815549),n(498750),n(283942),n(7959),n(376600)},359108:(e,r,n)=>{n(411855),n(188507),n(299321),n(776250),n(293017),n(335682),n(44160)},465702:(e,r,n)=>{n(411855),n(188507),n(299321),n(904669),n(939683),n(929715),n(177505),n(479118),n(335682),n(653671)},109058:(e,r,n)=>{n.d(r,{v:()=>b});var a=n(411855),i=n(109388),o=n(775541),s=n(299321),l=n(344780),c=n(554322),d=n(964172),u=n(501114),m=n(860707),p=n(837746),h=n(111536);let _=[{label:"Time between frames (ms)",id:"inter-frame-time",max:100,barWidth:1},{label:"React work (ms)",id:"react",max:100,barWidth:1},{label:"Frame handler (ms)",id:"frame",max:100,barWidth:1,children:[{label:"Scene render (ms)",id:"scene-render",max:100,barWidth:1,children:[{label:"Render tree creation (ms)",id:"render-tree-generation",max:100,barWidth:1}]},{label:"React + redux (ms)",id:"react-render",max:100,barWidth:1},{label:"Symbol updater (ms)",id:"symbol-updater",max:100,barWidth:1},{label:"Style updater (ms)",id:"style-updater",max:100,barWidth:1},{label:"Comments renderer (ms)",id:"comments-render",max:100,barWidth:1}]},{label:"C++ event handling (ms)",id:"fullscreen-handle-event",max:100,barWidth:1},{label:"malloc call count (#)",id:"cpp-malloc-call-count",autoResize:!0,max:100,barWidth:1},{label:"malloc size totals (KB)",id:"cpp-malloc-size-totals",autoResize:!0,max:1,barWidth:1},{label:"Used JS memory (MB)",id:"total-memory",max:10,autoResize:!0,barWidth:1},{label:"Used c++ heap memory (MB)",id:"cpp-heap-memory",max:10,autoResize:!0,barWidth:1},{label:"Render job queue length",id:"render-job-queue-length",max:4,autoResize:!0,barWidth:1},{label:"Time between render tree swaps (ms)",id:"render-tree-swap-time",max:300,autoResize:!0,barWidth:1},{label:"Stale content time (ms)",id:"render-tree-stale-time",max:500,autoResize:!0,barWidth:1},{label:"Est viewport coverage (ms)",id:"estimated-viewport-coverage",max:1,autoResize:!0,barWidth:1},{label:"Min viewport sharpness",id:"min-sharpness",max:1,autoResize:!0,barWidth:1},{label:"Avg viewport sharpness",id:"avg-sharpness",max:1,autoResize:!0,barWidth:1}];function g(e,r){var n=e.getBoundingClientRect();e.width=n.width*r,e.height=n.height*r,e.style.width=`${n.width}px`,e.style.height=`${n.height}px`;let a=e.getContext("2d");a&&(a.scale(r,r),a.imageSmoothingEnabled=!1)}class f extends a.PureComponent{constructor(e){super(e),this.ctx=null,this.lastDisplayedUpdateTime=0,this.displayedNumber=null,this.buffer=[],this.dpr=1,this.canvasRef=a.createRef(),this.lastRenderedHitCount=0,this.updateFromTimer=e=>{let r=e.hitCount-this.lastRenderedHitCount,n=0;for(let a=Math.max(0,e.elapsedTimes.length-r);a<e.elapsedTimes.length;a++)n+=e.elapsedTimes[a];this.append(n),this.lastRenderedHitCount=e.hitCount},this.yAxisMaxValue=e.max,this.bufferCapacity=Math.ceil(e.width/e.barWidth)}componentDidMount(){if(this.canvasRef.current){this.dpr=window.devicePixelRatio;let e=this.canvasRef.current;this.ctx=e.getContext("2d"),g(e,this.dpr)}}append(e){if(!this.ctx)return;let r=this.ctx.canvas,n=this.ctx;for(this.dpr!==window.devicePixelRatio&&(this.dpr=window.devicePixelRatio,g(r,this.dpr)),this.buffer.push(e);this.buffer.length>=this.bufferCapacity;)this.buffer.shift();let a=1/0,i=-1/0;for(let e of this.buffer)a=Math.min(a,e),i=Math.max(i,e);let o=this.props.width,s=this.props.height,l=this.props.barWidth,c=s-20;n.font="9px monospace",n.fillStyle=this.props.bg,n.textBaseline="top",n.fillRect(0,0,o,20),n.fillStyle=this.props.fg;let d=performance.now();if((null===this.displayedNumber||d-this.lastDisplayedUpdateTime>150)&&(this.displayedNumber=e,this.lastDisplayedUpdateTime=d),n.fillText(`sample: ${this.displayedNumber.toFixed(1)}`,0,0),n.fillText(`${a.toFixed(1)} - ${i.toFixed(1)}`,0,10),n.fillStyle=this.props.bg,this.props.autoResize){if(e>this.yAxisMaxValue){let a=Math.pow(2,Math.ceil(Math.log2(e/this.yAxisMaxValue)));this.yAxisMaxValue*=a,n.fillRect(0,s-c,o,(a-1)*c/a),n.drawImage(r,0,(s-c)*this.dpr,o*this.dpr,c*this.dpr,0,s-c/a,o,c/a)}else if(this.yAxisMaxValue>2*Math.max(this.props.max,i)){let e=Math.pow(2,Math.ceil(Math.log2(this.yAxisMaxValue/Math.max(this.props.max,i))));this.yAxisMaxValue/=e,n.drawImage(r,0,(s-c/e)*this.dpr,o*this.dpr,c/e*this.dpr,0,s-c,o,c)}}n.drawImage(r,l*this.dpr,(s-c)*this.dpr,(o-l)*this.dpr,c*this.dpr,0,s-c,o-l,c);let u=Math.floor(c*Math.min(1,e/this.yAxisMaxValue));n.fillRect(o-l,s-c,l,c),n.fillStyle=this.props.fg,n.fillRect(o-l,s-u,l,u)}render(){return a.createElement("canvas",{className:h.wP,ref:this.canvasRef,width:this.props.width,height:this.props.height})}}f.displayName="Sparkline";class E extends a.PureComponent{constructor(e){super(e),this.sparklines=new Map,this.lastFrameTime=null,this.tsmerMetrics=new d.s,this.updateTimers=()=>{if(this.tsmerMetrics.onFrame(),null==this.lastFrameTime)this.lastFrameTime=performance.now();else{let e=performance.now(),r=this.sparklines.get("inter-frame-time");r&&(r.append(e-this.lastFrameTime),this.lastFrameTime=e)}let e=this.sparklines.get("total-memory");e&&e.append(((0,m.aW)()??0)/1048576);let r=this.sparklines.get("cpp-heap-memory");r&&r.append(s.hMR.getTotalUsedHeapMemory()/1048576);let n=this.sparklines.get("cpp-malloc-call-count");n&&n.append(s.hMR.getAllocCallCount());let a=this.sparklines.get("cpp-malloc-size-totals");a&&a.append(s.hMR.getAllocTotal()/1024),s.hMR.resetAllocCountsAndTotal();let i=this.sparklines.get("render-job-queue-length");i&&i.append(s.CeL.getRendererJobQueueLength());let o=this.sparklines.get("render-tree-swap-time");o&&o.append(this.tsmerMetrics.lastEditFrameTime());let c=this.sparklines.get("render-tree-stale-time");c&&c.append(this.tsmerMetrics.lastFrameStaleness());let d=this.sparklines.get("estimated-viewport-coverage");d&&d.append(s.glU.estimatedViewportRenderCoverage(s.pWM.DEFINITELY_COVERED_ONLY));let u=this.sparklines.get("min-sharpness");u&&u.append(s.glU.minViewportSharpness());let p=this.sparklines.get("avg-sharpness");p&&p.append(s.glU.avgViewportSharpness());let h=l.rH.report(),_=[],g=e=>{_.push(e.name);let r=this.sparklines.get(_.join(","));for(let n of(r&&r.updateFromTimer(e),e.children))g(n);_.pop()};for(let e of h)g(e);requestAnimationFrame(this.updateTimers)},this.sparklineRef=e=>r=>{r&&this.sparklines.set(e.join(","),r)},this.frameRequest=null,this.renderHUDNode=(e,r=[])=>{let n=r.concat([e.id]),i=150-10*r.length,o=u.sx.add({color:"black"}).$.color,s=u.sx.add({backgroundColor:"white"}).$.backgroundColor,l=!!(this.state?.nodesHiddenState??{})[e.id];return a.createElement("div",{key:e.id},a.createElement("div",{className:h.n5},a.createElement("div",null,a.createElement("div",null,a.createElement("button",{style:{backgroundColor:"gray",display:"inline-block",marginRight:"2px"},onClick:()=>{this.toggleNodeHidden(e.id)}},l?"(+)":"(-)"),e.label),!l&&a.createElement(f,{ref:this.sparklineRef(n),fg:o,bg:s,barWidth:e.barWidth,max:e.max,height:40,autoResize:!!e.autoResize,width:i}))),e.children&&!l&&a.createElement("div",{className:h.Q3},e.children.map(e=>this.renderHUDNode(e,n))))},this.state={nodesHiddenState:{react:!0,frame:!0,"fullscreen-handle-event":!0,"cpp-malloc-call-count":!0,"cpp-malloc-size-totals":!0,"total-memory":!0,"cpp-heap-memory":!0,"render-job-queue-length":!0,"render-tree-swap-time":!0,"render-tree-stale-time":!0,"estimated-viewport-coverage":!0,"min-sharpness":!0,"avg-sharpness":!0}}}componentDidMount(){this.frameRequest=requestAnimationFrame(this.updateTimers)}componentWillUnmount(){this.frameRequest&&cancelAnimationFrame(this.frameRequest)}toggleNodeHidden(e){let r=this.state?.nodesHiddenState??{},n=!!r[e];this.setState({nodesHiddenState:{...r,[e]:!n}})}render(){let e=this.props.isFigjamFile?0:parseInt(p.uj0,10)+5,r=(0,c.bG)()+5;return a.createElement("div",{className:h.vY,style:{right:e,top:r}},_.map(e=>this.renderHUDNode(e)))}}E.displayName="PerfHUD";let y=null;function b(e){y?(i.unmountComponentAtNode(y),document.body.removeChild(y),y=null):(y=document.createElement("div"),document.body.appendChild(y),(0,o.H)(y).render(a.createElement(E,{isFigjamFile:e})))}},161115:(e,r,n)=>{n.d(r,{qg:()=>i,r5:()=>a}),n(411855),n(83909),n(356390),n(555074),n(301462),n(279702);let a=["NORMAL","SELECT_DIVIDER","DARKEN","MULTIPLY","LINEAR_BURN","COLOR_BURN","SELECT_DIVIDER","LIGHTEN","SCREEN","LINEAR_DODGE","COLOR_DODGE","SELECT_DIVIDER","OVERLAY","SOFT_LIGHT","HARD_LIGHT","SELECT_DIVIDER","DIFFERENCE","EXCLUSION","SELECT_DIVIDER","HUE","SATURATION","COLOR","LUMINOSITY"];function i(e,r){return e===r}["PASS_THROUGH"].concat(a)},889449:(e,r,n)=>{n.d(r,{U:()=>p});var a=n(411855),i=n(498750),o=n(138369),s=n(809831),l=n(29680),c=n(860178),d=n(239671),u=n(605967),m=n(209359);function p(e){let r=a.useRef(null);(0,l.f4)(()=>{let e=window.getSelection();if(!e)return;let n=e.focusNode;for(;n;){if(n===r.current){e.removeAllRanges();break}n=n.parentNode}});let n=(0,c.iZ)(),p=(0,s.my)()===d.nT.Design,h=(0,o.Kf)({isDesign:p,isUnauth:!n}),_=e.flowPanel??null,g=e.localStylesPanel??null;return h()?null:a.createElement("div",{ref:r,onKeyDown:e=>{if((0,i.Fo)(e)&&e.keyCode===i.Uz.A){let r=window.getSelection();if(r){let n=document.createRange();n.selectNodeContents(e.currentTarget),r.removeAllRanges(),r.addRange(n),e.preventDefault()}}},className:m.z},_,g,a.createElement(u.m,null))}},56285:(e,r,n)=>{n.d(r,{Af:()=>ei,DP:()=>z,ZN:()=>en,aj:()=>H,bm:()=>q,nu:()=>er,x5:()=>ea});var a=n(411855),i=n(188507),o=n(414507),s=n(299321),l=n(629019),c=n.n(l),d=n(297666),u=n(966712),m=n(844157),p=n(776621),h=n(939863),_=n(308977),g=n(581250),f=n(452246),E=n(723081),y=n(617453),b=n(848661),I=n(29680),T=n(416095),v=n(666068),S=n(284321),w=n(234945),A=n(173454),N=n(507956),C=n(750029),L=n(846848),O=n(428877),R=n(836283),P=n(137906),D=n(564092),k=n(875157),M=n(32067),F=n(788612),x=n(253598),U=n(393062),B=n(116131);let V=new Set(["SOLID","GRADIENT_ANGULAR","GRADIENT_DIAMOND","GRADIENT_LINEAR","GRADIENT_RADIAL"]),G=new E.ro;function H(e){let{blendMode:r,onError:n}=e,i=(0,b.gl)(r)||"string"==typeof r;return r&&!i&&(console.error(TypeError(`Expected mixed | string | undefined, got ${typeof r}`)),n&&n(r),r=void 0),a.createElement(F._p,{redact:["Normal","Pass through"],indent:e.indent,className:e.className,name:(0,h.t)("inspect_panel.colors.blend"),value:G.format(r)})}let W=(e={})=>{let{isShort:r=!1,format:n=s.NVY.HEX,isInStyle:a}=e,i=r?B.lA:B.K5,o=n===s.NVY.HEX?"":B.cZ,l=a?B.UU:void 0;return c()(i,o,l)};function K(e){let{isInStyle:r}=e;return a.createElement("div",{className:B.Z3,"data-testid":"inspectMultilineColorRow"},a.createElement(F.d1,{className:c()({[B.UU]:r},B.y4),label:e.styleName,defaultLabel:e.defaultStyleName,isVariable:e.isVariable,variableId:e.variableId,isSuggestedVariable:e.isSuggestedVariable},!0!==e.hideColorChit?a.createElement(C.J,{className:B.Gz,paint:e.paint,tooltip:e.description}):a.createElement("div",null)),a.createElement(H,{className:W({isInStyle:r}),indent:!0,blendMode:e.paint.blendMode,onError:r=>{let n=TypeError(`Expected string | undefined, got ${typeof r}`);console.error(n),(0,p.$D)(o.FigmaTeam.DEVELOPER_TOOLS,n,{extra:{type:typeof r,value:r,source:"MultiLinePaintValue",props:e}})}}),e.colors.map((n,i)=>a.createElement($,{key:i,valueFormatter:e.formatter,format:e.format,color:n,paint:e.paint,alwaysShowOpacity:e.alwaysShowOpacity,hideColorChit:e.hideColorChit,isInStyle:r})))}function Y(e){let{format:r}=e,{paint:n,valueFormatter:i}=e.formattableColor,{variable:o,isSuggested:s,variableDisplayName:l,matchingVars:c}=e.formattableColor.variable??{};if(!n.color)return null;let d={...n.color,a:n.opacity??1},m=o?.id??o?.node_id,p=!1;if(o&&(p=!s||!(0,u.kc)().dt_inferred_vars_modal),p)return a.createElement(K,{paint:n,className:B.yW,styleName:l,colors:[d],format:r,formatter:i,hideColorChit:e.hideColorChit,isVariable:!0,variableId:m,isSuggestedVariable:s,isInStyle:e.isInStyle});let h=(0,U.q)(d,r,i);return a.createElement(F._p,{className:W({format:r,isInStyle:e.isInStyle}),copyValue:h.copyValue,matchingVars:c},!0!==e.hideColorChit?a.createElement(C.J,{className:B.Gz,paint:n}):a.createElement("div",null),a.createElement("span",{className:B.As,"data-testid":"inspectColorRow"},h.value),U.x.has(e.format)&&a.createElement(x.J,{value:d.a}))}function $(e){let r=(0,U.q)(e.color,e.format,e.valueFormatter);return a.createElement(F._p,{className:W({isShort:!e.hideColorChit,format:e.format,isInStyle:e.isInStyle}),copyValue:r.copyValue,variableId:e.variableId,matchingVars:e.matchingVars},a.createElement("div",null),a.createElement("span",{className:B.As},r.value),U.x.has(e.format)&&a.createElement(x.J,{value:e.color.a,showOpaque:e.alwaysShowOpacity||!1}))}function j(e){let{format:r}=e,{paint:n,colors:i,valueFormatter:o,typeFormatter:s}=e.formattableColor;return a.createElement(K,{paint:n,className:B.to,defaultStyleName:(0,h.t)("inspect_panel.colors.gradient",{gradientType:s(n.type)}),colors:i,format:r,formatter:o,hideColorChit:e.hideColorChit,alwaysShowOpacity:!0,isInStyle:e.isInStyle})}function z(e){let{formattableColor:r}=e;switch(r.paint.type){case"SOLID":return a.createElement(Y,{...e});case"GRADIENT_LINEAR":case"GRADIENT_RADIAL":case"GRADIENT_DIAMOND":case"GRADIENT_ANGULAR":return a.createElement(j,{...e});default:return null}}function q(e){return e.visible&&e.type&&V.has(e.type)}let X=()=>{let e=(0,i.d4)(e=>e.mirror.selectionProperties.fillPaints),r=M.VW()?.type,n=a.useMemo(()=>!e||(0,b.gl)(e)?[]:e,[e]),o=(0,M.pF)(e=>(0,m.b)(e.mirror.selectionProperties,"inheritFillStyleKey")),l=(0,i.d4)(S.e_),c=(0,i.d4)(e=>e.mirror.selectionProperties.inheritFillStyleKey),d=r&&(0,k.Ku)(r),u=(0,O.Ig)(),p=c?(0,T.Gp)(c,[],l):void 0,h=n.filter(q).map(e=>(0,O.dc)(e,u,d||s.j0r.ALL_FILLS));return p&&o?[(0,O.rP)(o,p,h)]:h},J=()=>{let e=(0,i.d4)(e=>e.mirror.selectionProperties.textDecorationFillPaints),r=(0,i.d4)(e=>e.mirror.selectionProperties.textDecoration),n=a.useMemo(()=>"UNDERLINE"!==r||!e||(0,b.gl)(e)?[]:e,[r,e]),o=(0,O.Ig)();return n.filter(q).map(e=>(0,O.dc)(e,o,s.j0r.TEXT_FILL))},Z=()=>{let e=(0,M.jY)(),r=(0,M.uQ)(),n=(0,g.Q)(),o=(0,_.v4)(),s=(0,N.ks)(),l=(0,i.d4)(e=>(0,w.$u)(e)>1?e.mirror.selectionPaints.paints:e.mirror.selectionPaints.paintsDirectlyOnSingleNode),c=(0,O.Ig)(),d=a.useMemo(()=>l.filter(e=>q(e.paint)).map(e=>(0,O.dc)(e.paint,c)),[l,c]),u=(0,i.d4)(e=>(0,w.$u)(e)>1?e.mirror.selectionPaints.styles:e.mirror.selectionPaints.stylesDirectlyOnSingleNode),m=(0,i.d4)(S.e_),p=a.useMemo(()=>{let r=u.map(e=>({ds:(0,T.Gp)(e.styleKey,e.styleGUIDs,m),name:e.styleName})),n=[];return r.forEach(({ds:r,name:a})=>{if(!r)return;let i=r.kind===A.AT.DANGLING?{...r.value,style_type:"FILL"}:r.value,o=e=>e.filter(q).map(e=>(0,O.dc)(e,c)),s=(0,v.QH)(i);if(s&&"FILL"===s.type)n.push((0,O.rP)(a,r,o(s.fillPaints)));else{let i=e.get(r.value.node_id);i&&n.push((0,O.rP)(a,r,o(i.fills)))}}),n},[u,m,e,c]);return a.useMemo(()=>{let e=[...p,...d];return(0,D.QT)(e,r,n.inspectionMode,o,s)},[p,d,r,n.inspectionMode,o,s])},Q=(e,r)=>e.type===R.q.STYLE?a.createElement(et,{color:e,format:r.format}):a.createElement(ee,{color:e,format:r.format,hideColorChit:r.hideColorChit});function ee(e){return a.createElement(z,{format:e.format,formattableColor:e.color,hideColorChit:e.hideColorChit})}function et(e){let r=(0,i.wA)(),n=e.color.dsStyle.kind,o=e.color.dsStyle.value.node_id,s=a.useMemo(()=>(0,d.s)(()=>{o&&r(f.rb({styleNodeId:o,styleKind:n}))}),[r,n,o]);a.useEffect(s,[s]);let l=e.color.dsStyle.value;return n===A.AT.DANGLING&&(l.style_type="FILL",l.node_id=o),a.createElement(a.Fragment,null,a.createElement(F._p,{className:B.VB,copyValue:e.color.name,dataTestId:"styleNameRow"},a.createElement(P.zi,{dsStyle:l,hideNameInTooltip:!0}),a.createElement(F._p,{className:B.yW,value:e.color.name})),e.color.paints.map(r=>a.createElement("div",{key:r.encodedPaint,"data-testid":"stylePaintRow"},a.createElement(z,{format:e.format,formattableColor:r,hideColorChit:e.hideColorChit,isInStyle:!0}))))}function er(e){let r=(0,y.Ku)(),n=e.formattableColors,i=a.useMemo(()=>({format:r}),[r]);return a.createElement(F.x0,{limit:5,data:n,renderElement:Q,extras:i})}function en(){let e=(0,N.ks)(),r=(0,M.uQ)(),n=I.eY().get(r??"")?.type,i=X(),o=J(),s=(0,g.Q)(),l=(0,_.v4)(),c=(0,N.ks)(),d="TEXT"===n?[...i,...o]:i,u=(0,D.QT)(d,r,s.inspectionMode,l,c),m=(0,y.Ku)(),p=a.useMemo(()=>a.createElement(ei,{id:"colors-panel"}),[]),f=M.T4.useCopyAllColors(u,m);return u.length<1?null:a.createElement(F.VZ,{title:e?"TEXT"===n?(0,h.t)("dev_handoff.inspect_panel.fills.text"):(0,h.t)("dev_handoff.inspect_panel.fills.background"):(0,h.t)("inspect_panel.colors.title"),additionalHeaders:p,copyAllValue:f,recordingKey:"colors"},a.createElement(er,{formattableColors:u}))}function ea(){let e=Z(),r=(0,y.Ku)(),n=a.useMemo(()=>a.createElement(ei,{id:"colors-panel"}),[]),i=M.T4.useCopyAllColors(e,r);return e.length<1?null:a.createElement(F.VZ,{title:(0,h.t)("inspect_panel.colors.title"),additionalHeaders:n,copyAllValue:i,recordingKey:"colors"},a.createElement(er,{formattableColors:e}))}function ei(e){let r=(0,i.wA)(),n=(0,y.Ku)(),o=(0,i.d4)(e=>e.dropdownShown),l=(0,N.ks)(),c=(0,F.SV)("inspection_panel_color_format_change"),d=a.useCallback(e=>{(0,y.UK)().colorFormat.set(e),c({value:L.Fr.format(e)})},[c]);return a.createElement("div",{className:B.IX},a.createElement(L.bO,{id:`inspect-color-type-select:${e.id}`,className:B.NC,dropdownClassName:B.O4,property:n,formatter:L.Fr,onChange:d,dispatch:r,dropdownShown:o,dropdownAlignment:"right"},a.createElement(L.ef,{value:s.NVY.HEX}),a.createElement(L.ef,{value:s.NVY.RGB}),!l&&a.createElement(L.ef,{value:s.NVY.CSS}),a.createElement(L.ef,{value:s.NVY.HSL}),a.createElement(L.ef,{value:s.NVY.HSB}),l&&a.createElement(L.ef,{value:s.NVY.UIColor})))}},32067:(e,r,n)=>{n.d(r,{Cj:()=>A,O1:()=>v,T4:()=>a,VW:()=>T,Wf:()=>I,jY:()=>S,pF:()=>w,uQ:()=>y,um:()=>b});var a,i=n(411855),o=n(188507);n(943632);var s=n(299321),l=n(378195),c=n(413145),d=n(884139),u=n(970516),m=n(617453),p=n(848661);n(555074);var h=n(869156),_=n(601607),g=n(428877),f=n(836283),E=n(533573);function y(){let e=(0,o.d4)(e=>e.mirror.selectionProperties?.numSelected===1),r=(0,o.d4)(e=>e.mirror.sceneGraphSelection);return e&&Object.keys(r).find(e=>e)||null}function b(e,r){return e&&Number(e).toLocaleString("en",{maximumFractionDigits:r,useGrouping:!1})}function I(e=0){return Number(e).toLocaleString("en",{maximumFractionDigits:2,useGrouping:!1})}function T(){let e=y(),r=(0,_.Jk)(e);if(null!=e&&null!=r)return r}function v(){let e=function(){let e=(0,o.d4)(e=>e.mirror.sceneGraphSelection);return i.useMemo(()=>{let r=Object.keys(e);return 0===r.length?null:r},[e])}(),r=(0,_.ew)(e??[]);if(e)return r}function S(){let e=(0,o.d4)(e=>e.mirror.objectsPanelRowRebuildCounter);return(0,_.hr)((e,r)=>e,e)}function w(e){return(0,o.d4)(r=>{let n=e(r);if(null!=n&&(0,p.hS)(n))return n})}function A(e,r){let n=(0,o.wA)(),a=i.useCallback(()=>{let a=window.getSelection();if(a&&a.toString().length>0||!e)return null;n(u.lW({stringToCopy:e.toString(),ignoreLineBreaks:!1})),r&&r()},[r,e,n]);return e?a:void 0}(e=>{let r={prefix:"",suffix:"",delimiter:": ",quoted:!1};function n(e,n){let a="",i={...r,...n};return e.forEach(e=>{if(e[1]){let{prefix:r,suffix:n,delimiter:o,quoted:s}=e.length>2?{...i,...e[2]}:i,l=s?`"${e[1]}"`:e[1];a+=`${r}${e[0]}${o}${l}${n}
`}}),a}e.copyPairs=n;let a=["true","false","nil","null"];function u(e,r){return`var(--${(0,d.OX)(r)}, ${e})`}e.unquoteEnumerableValues=function(e){return e.map(e=>{let[r,n]=e;return"string"==typeof n&&a.includes(n.toLowerCase())?[r,n,{quoted:!1}]:e})};let p=(e,r,n)=>{let{paint:a}=e,{variable:i}=e.variable??{};switch(a.type){case"SOLID":if(1===n){let r=e.valueFormatter(e.colors[0],{hexCSSValue:!0});return i?u(r,i.name):r}return function(e,r){let n=s.phr.convertGradientPaintToCSS(e.encodedPaint);return(r?n.replace(/(#[a-f0-9]{6})|(rgba\(\d{1,3}, \d{1,3}, \d{1,3}, \d\.\d{1,2})/gi,e=>u(e,r.name)):null)??n}(e,i);case"GRADIENT_LINEAR":case"GRADIENT_RADIAL":case"GRADIENT_DIAMOND":case"GRADIENT_ANGULAR":return s.phr.convertGradientPaintToCSS(e.encodedPaint)}};function _(e,r){return e?.map(n=>p(n,r,e?.length||0))?.join(",\n")}e.copyColors=_;let y={MULTIPLY:"multiply",SCREEN:"screen",OVERLAY:"overlay",DARKEN:"darken",LIGHTEN:"lighten",COLOR_DODGE:"color-dodge",SATURATION:"saturation",COLOR:"color",LUMINOSITY:"luminosity"},T=(e=[])=>e.flatMap(e=>e.type===f.q.STYLE?e.paints:e),v="background";e.useCopyAllColors=function(e,r){let a=(0,o.d4)(e=>e.mirror.selectionProperties.numSelected)||0,s=T(e),l=i.useCallback(()=>{if(1===a&&s){let e=new Set;if(s.forEach(r=>{r.paint.blendMode&&e.add(r.paint.blendMode)}),e.size<=1){let a=_(s,r),i=[];a&&i.push([v,a]);let o=[...e],l=o[0]?y[o[0]]:void 0;return l&&i.push(["background-blend-mode",l]),n(i,{suffix:";"})}}return n(s.reduce((e,n)=>{let a=n.paint.blendMode,i=a?y[a]:void 0;i&&e.push(["background-blend-mode",i]);let o=p(n,r,1),s=o?[v,o]:void 0;return s&&e.push(s),e},[]).filter(e=>e).map(e=>e),{suffix:";"})},[s,a,r]);return s?l:void 0};let S=(r,a,i,o)=>{let s=a.includes(" "),l=T(i),c=l.length>1||1===l.length&&"SOLID"!==l[0].paint.type,d=e.copyColors(l,r);if(!c&&!s)return`${o??"border"}: ${a} solid ${d}`;let u=s?[["border-width",a],["border-style","solid"]]:[[`${o??"border"}`,`${a} solid`]];return d&&u.push(c?["border-image-source",d]:["border-color",d]),n(u,{suffix:";\n"})};function w(e){return e.map(e=>void 0===e?"":"string"==typeof e?e:`${I(e)}px`)}e.useStrokeCopyValue=function(e,r,n){let a=(0,m.Ku)(),o=T(r);return i.useMemo(()=>S(a,e,o,n),[a,e,o,n])},e.useCopyAllStrokes=function(e){let r=(0,m.Ku)();return i.useMemo(()=>e.map(e=>S(r,e.strokeWeight,e.strokeColors,e.borderCSSKey)).join("\n"),[r,e])},e.withPixels=w;let A=(r,a,i,o)=>{if("FOREGROUND_BLUR"===r.type||"BACKGROUND_BLUR"===r.type)return n([["backdrop-filter",`blur(${r.radius}px)`]]);let s=e.copyColors(a,i);if(!r.offset)return;let[l,d,u,m,p]=o&&5===o.length?o:[null,null,null,null,null];return n([["box-shadow",[w([(0,E.NX)({variable:l})||r.offset?.x,(0,E.NX)({variable:d})||r.offset?.y,(0,E.NX)({variable:u})||r.radius,(0,E.NX)({variable:m})||r.spread]).join(" "),(0,E.NX)({variable:p})||s,"INNER_SHADOW"===r.type?"inset":void 0].filter(c.t).join(" ")]],{suffix:";"})};e.useCopyShadow=function(e,r){let n=(0,m.Ku)(),a=function(e,r){let n=i.useMemo(()=>e?[{color:e,colorVar:void 0}]:[],[void 0,e]);return(0,g.y6)(n)}(e.color);return i.useMemo(()=>A(e,a,n,r),[e,a,n,r])},e.useCopyAllShadows=function(e){let r=(0,m.Ku)(),n=(0,g.OE)(e,e=>e.color),a=e.flatMap(e=>[e.xVar,e.yVar,e.radiusVar,e.spreadVar,e.colorVar]).map(e=>e?.value?.alias?l.dI(e.value.alias):void 0),o=(0,h.hg)(a??[]);return i.useCallback(()=>n.filter(e=>e.color).map((e,n)=>A(e.value,[e.color],r,[o?.[5*n],o?.[5*n+1],o?.[5*n+2],o?.[5*n+3],o?.[5*n+4]])).join("\n"),[n,r,o])};let N=(e,r,n)=>{switch(e){case"Linear":return"linear";case"Ease in":return"ease-in";case"Ease out":return"ease-out";case"Ease in and out":return"ease-in-out";case"Ease in back":return"cubic-bezier(0.3, -0.05, 0.7, -0.5)";case"Ease out back":return"cubic-bezier(0.45, 1.45, 0.8, 1)";case"Ease in and out back":return"cubic-bezier(0.7, -0.4, 0.4, 1.4)";default:if(void 0==e)return;if(r){if(n)return`{ mass: ${n[0]}, stiffness: ${n[1]}, damping: ${n[2]} }`;return e}return`cubic-bezier(${e})`}},C=e=>`${b(1e3*e,2)}ms`,L=r=>{let n=`// ${r.event}
`,a=r.action,i=[];return r.delay&&i.push(["animation-delay",C(r.delay)]),r.action&&(i.push([`// ${a?.action}`,`"${a?.value??""}"`]),a?.hasAnimation&&(i.push(["// Animate",a?.animation??""]),a?.isSpringTransition?i.push(["// Spring",N(a?.curve,a?.isSpringTransition,a?.curveFunction)]):(i.push(["animation-timing-function",N(a?.curve)]),i.push(["animation-duration",C(a.duration??0)])))),n+e.copyPairs(i,{suffix:";"})};e.useCopyAllInteractions=function(e){return i.useCallback(()=>e.map(e=>L(e)).join("\n"),[e])};let O=e=>{let r=e.image?.name??"Image",a=`${r}.${e.animatedImage?"gif":"png"}`;return n([[`// ${e.animatedImage?"GIF":"Image"}`,r],["background",`url("${a}")`],["background-size",(e=>"FILL"==e?"cover":"FIT"==e?"contain":void 0)(e.imageScaleMode)],["opacity",e.opacity<1?e.opacity.toFixed(2):void 0],["background-blend-mode",y[e.blendMode]]],{suffix:";"})};e.useCopyImages=function(e){return i.useCallback(()=>e.map(e=>O(e)).join("\n"),[e])}})(a||(a={}))},788612:(e,r,n)=>{n.d(r,{Cm:()=>ec,HF:()=>em,I7:()=>ei,M6:()=>es,N7:()=>Q,SH:()=>j,SV:()=>K,VZ:()=>q,YE:()=>eu,ZQ:()=>H,_p:()=>ed,d1:()=>er,lz:()=>ep,nd:()=>ee,r4:()=>eg,sD:()=>ea,x0:()=>e_});var a=n(411855),i=n(188507),o=n(75395),s=n(343887),l=n(615925),c=n(304061),d=n(629019),u=n.n(d),m=n(776250),p=n(830646),h=n(794272),_=n(966712),g=n(498750),f=n(860601),E=n(563706),y=n(153234),b=n(736242),I=n(939863),T=n(780761),v=n(964881),S=n(970516),w=n(672517),A=n(973149),N=n(356390),C=n(848661),L=n(869156),O=n(335682),R=n(239671),P=n(498606),D=n(507956),k=n(7959),M=n(712685),F=n(32067),x=n(673867),U=n(659211);function B({name:e,fileKey:r,border:n,children:i,hideHeader:o,noPadding:s,noBorder:l,recordingKey:d,dataTestId:p,onClick:_}){let{selectedNodeId:f,selectedPageId:y,isMultiSelect:b,sceneGraph:I,editorType:T}=(0,h.R)(e=>{let r=Object.keys(e.mirror.sceneGraphSelection);return{selectedPageId:e.mirror.appModel.currentPage,selectedNodeId:r[0],isMultiSelect:r.length>1,sceneGraph:e.mirror.sceneGraph,editorType:"fullscreen"!==e.selectedView.view?R.nT.Design:e.selectedView.editorType}}),S=!!(0,v.hA)(),w=n=>{e&&(0,m.sx)("inspection_panel_shortcut",{...n,file_key:r,name:e,editor_type:T})},A=n?U.F7:U.YK;return o&&(A=n?U.S4:U.Tq),s&&(A=U.JY),l&&(A=u()(A,U.mD)),a.createElement(k.zi,{className:A,tabIndex:-1,onKeyDown:e=>{let r=!1;if((0,g.Fo)(e)&&e.keyCode===g.Uz.C?(r=!0,w({action:"copy"})):(0,g.Fo)(e)&&e.keyCode===g.Uz.A?(r=!0,w({action:"select_all"})):E.Ay.mac?"Meta"===e.key&&(r=!0):"Control"===e.key&&(r=!0),(e.target?.type==="text"||e.target?.type==="textarea"||e.target?.tabIndex===0)&&(r=!0),r);else{let r=window.getSelection();if(!r)return;let n=0===r.toString().length;r.removeAllRanges(),(n||e.keyCode!==g.Uz.ESCAPE)&&N.Y5.forwardKeyboardEvent(e.nativeEvent)}},onDoubleClick:n=>{if(e)return(0,m.sx)("inspection_panel_dbl_clicked",{name:e,x:n.clientX,y:n.clientY,modifiers:(0,g.sN)(n),fileKey:r,editor_type:T}),!1},onClick:n=>{let a,i;if(e){if(_?.(n),f&&I)try{let e=(0,c.Ql)(I,f);a=e?.guid,i=e?.type}catch{}return(0,m.sx)("inspection_panel_clicked",{name:e,x:n.clientX,y:n.clientY,modifiers:(0,g.sN)(n),fileKey:r,selectedPageId:y,selectedNodeId:f,topLevelFrameId:a,topLevelNodeType:i,isMultiSelect:b,editor_type:T,isDevModeFocusView:S}),!1}},recordingKey:d,"data-testid":p,id:p},i)}let V=(e,r)=>{let[n,i]=a.useState(!1),o=a.useCallback(()=>i(!0),[i]),s=a.useCallback(()=>i(!1),[i]);return a.useMemo(()=>({value:n?e:r,eventHandlers:{onMouseOver:o,onMouseOut:s},isHovered:n}),[n,e,r,o,s])},G=(e,r)=>{let[n,i]=a.useState(!1),o=a.useCallback(()=>i(!0),[i]),s=a.useCallback(()=>i(!1),[i]);return a.useMemo(()=>[n?e:r,{onMouseDown:o,onMouseUp:s}],[n,e,r,o,s])};function H(e,r){let{value:n,eventHandlers:i,isHovered:o}=V(r),[s,l]=G(e);return a.useMemo(()=>({value:s||n,eventHandlers:{...i,...l},isHovered:o}),[s,l,n,i,o])}let W=a.createContext({});function K(e,r){let n=a.useContext(W),i=a.useMemo(()=>({name:(r||n).recordingKey}),[r,n]),o=(0,p.j)(e,i);return(r||n).recordingKey?o:f.lQ}let Y=(0,w.tf)(o.E),$=(0,w.tf)(s.K);function j(e){let{title:r,copyAllValue:n,additionalHeaders:o,eventHandlers:s,isHovered:c,recordingKey:d}=e,m=K("inspection_panel_copy_all_click",a.useContext(W)),p=(0,i.wA)(),h=(0,y.rf)(d,"click",a.useCallback(()=>{if(!n)return;let e="string"==typeof n?n:n();p(S.lW({stringToCopy:e,ignoreLineBreaks:!1})),m({value:e})},[m,p,n])),{ref:g,...f}=(0,x.X)(r,c),E=a.useRef(null),b=(0,D.ks)(),T=(0,a.useMemo)(()=>({name:"Copy properties button",selectedAll:!1,source:"properties",title:r,isDevMode:b}),[b,r]);return r?a.createElement("div",{className:u()(U.Dn,{[U._]:e.snug,[U.iY]:e.noPadding}),ref:E},a.createElement(k.xw,{innerRef:g,...f,doNotReserveSpaceForChevron:e.doNotReserveSpaceForChevron,forceNoChevron:e.doNotReserveSpaceForChevron,className:u()(U.yr,{[U.Xx]:e.thin}),"data-testid":"inspectPanelTitle","data-onboarding-key":e.onboardingKey},r),a.createElement("div",{className:U.W0},n&&!(0,_.kc)().dt_dev_view_variables&&a.createElement(Y,{htmlAttributes:s,className:U.cL,onClick:h,trackingProperties:T},(0,I.tx)("inspect_panel.copy")),o,n&&(0,_.kc)().dt_dev_view_variables&&a.createElement($,{htmlAttributes:{...s,"data-tooltip":(0,I.t)("inspect_panel.copy"),"data-tooltip-type":P.Ib.TEXT},onClick:h,trackingProperties:T,"aria-label":(0,I.t)("inspect_panel.copy")},a.createElement(l.X,null))),e.children):null}var z=(e=>(e[e.DEFAULT=0]="DEFAULT",e[e.NONE=1]="NONE",e))(z||{});function q(e){let{children:r,title:n="",copyAllValue:o,recordingKey:s}=e,l=(0,i.d4)(O.sS),c=a.useMemo(()=>`inspect:${s.toLowerCase()}`,[s]),d=a.useMemo(()=>({recordingKey:`inspect:${s}`}),[s]),{value:m,eventHandlers:p,isHovered:h}=H(U.Rp,U.fF);return a.createElement(B,{border:!0,fileKey:l,name:c,hideHeader:e.hideHeader,noPadding:e.noPadding,noBorder:e.noBorder,recordingKey:(0,y.Pt)(s,"panel"),dataTestId:`${s}-inspection-panel`,onClick:e.onClick},a.createElement(W.Provider,{value:d},e.formattedHeader??(!0!==e.hideHeader&&a.createElement(j,{title:n,copyAllValue:o,eventHandlers:p,additionalHeaders:e.additionalHeaders,isHovered:h,snug:e.snugTitle,thin:e.thinTitle,noPadding:e.noPadding,doNotReserveSpaceForChevron:e.doNotReserveSpaceForChevronInTitle,recordingKey:(0,y.Pt)(s,"header"),onboardingKey:e.headerOnboardingKey},e.headerChildren)),a.createElement("div",{className:u()(U.HH,m)},r)))}let X={maximumFractionDigits:2,useGrouping:!1},J={maximumFractionDigits:2},Z={maximumFractionDigits:2,useGrouping:!1,style:"unit",unit:"degree",unitDisplay:"narrow"},Q={...Z,unitDisplay:"short"};function ee(e,r){let n=e.toLocaleString("en",X);return`${n}${r}`}function et(e){switch(e.format){case"pixels":if("number"==typeof e.value)return ee(e.value,"px");if(Array.isArray(e.value)){let r=e.value.map(e=>e.toLocaleString("en",J)).join("px, ");return`${r}px`}return`${e.value}`;case"percent":if(!e.value)return;return Number(e.value).toLocaleString("en",{...X,style:"percent"});case"fig_number":return e.value?A.wf.format(e.value):void 0;case"millis":return e.value&&ee(1e3*e.value,"ms");case"degrees":return e.value&&e.value.toLocaleString("en",Z);case"mixed":return e.value.map(et).join(", ");default:return e.value?.toString()}}function er(e){let[r,n]=a.useState(!1),i=e.label||e.defaultLabel,o=e.label?U.Nw:U.G1;e.labelClassName&&(o+=` ${e.labelClassName}`);let s=ea(i),l=(0,L.u)(e.variableId);return a.createElement(ed,{className:e.className,copyValue:e.label,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),isHovered:r,variableId:e.variableId},e.children&&a.createElement("div",null,e.children),i&&a.createElement("div",{className:U.Pq},e.isVariable||e.isSuggestedVariable?a.createElement(M.wG,{text:i,isDeleted:l?.subscriptionStatus==="LOCAL"&&l?.isSoftDeleted,containerClassName:U.gO,disableHover:!0,isHovered:r,isInferred:e.isSuggestedVariable,tooltip:e.isSuggestedVariable?(0,I.t)("dev_handoff.variables.inferred_color"):void 0}):a.createElement("span",{ref:s,className:o,dir:"auto"},i)))}function en(){return a.createElement("span",{className:U.jg})}function ea(e){let r=a.useRef(null),n=r.current,i=n&&(n.offsetHeight<n.scrollHeight||n.offsetWidth<n.scrollWidth);return a.useEffect(()=>{n&&i&&e&&(n.setAttribute("data-tooltip",e.toString()),n.setAttribute("data-tooltip-type",P.Ib.TEXT))},[e,n,i]),r}function ei({title:e}){return a.createElement("div",{className:U.Dn},a.createElement(k.xw,{className:U.yr},e))}let eo=e=>e?.valueOf()===(0,I.t)("collaboration.branching_node_treatments.value.empty_dash");function es({basis:e,change:r,name:n}){return a.createElement("div",{className:u()(U.zy)},a.createElement("span",{className:U.rG},n),a.createElement("div",{className:u()(U.vd,U.mW)},a.createElement(o.E,{onClick:e.onClick,className:u()(U.Hz,U.ij,eo(e.value)&&U.T7)},e.value),a.createElement(o.E,{onClick:r.onClick,className:u()(U.Zg,U.ij,eo(r.value)&&U.T7)},r.value)))}function el({valueProps:e,isHovered:r,variableContainerClassName:n,rowRef:i}){let{variableId:o}=e,s=(0,L.u)(o);if("mixed"===e.format){let o=e.value.some(e=>!!e.variable);return a.createElement("div",{className:u()(U.M3,o&&U.Vd)},e.value.map((s,l)=>a.createElement("div",{key:l},a.createElement(el,{valueProps:s,isHovered:r,variableContainerClassName:n,rowRef:i}),l<e.value.length-1&&!o&&a.createElement("span",null,", "))))}let l=`${et(e)}`;if(e.variable){let i=s?.subscriptionStatus==="LOCAL"&&s.isSoftDeleted;return a.createElement(M.wG,{dataTestId:"styledValueVariable",containerClassName:u()(U.gO,n),text:e.variable,disableHover:!0,isHovered:r,isInferred:e.isSuggestedVariable,isDeleted:i,tooltip:e.isSuggestedVariable?(0,I.t)("dev_handoff.variables.inferred_value",{value:l}):l})}return a.createElement(a.Fragment,null,l)}function ec(e,r){let n=K("inspection_property_copy_click");return(0,F.Cj)(e,()=>{n({property:r,value:e})})}function ed(e){let r="onValueClicked"in e&&e.onValueClicked,n="value"in e?et(e):void 0,i=null===e.copyValue?void 0:e.copyValue||n,s=ec(i,e.name),[l,c]=a.useState(!1),d=(0,x.X)(e.name),m=(0,x.X)(n),p=a.useRef(null),h=(0,T.i2)()&&!e.disableVariableInspection,_=(0,T.Yq)(p),g="redact"in e?e.redact:void 0,f=a.useMemo(()=>void 0===g?new Set:new Set(Array.isArray(g)?g:[g]),[g]),E=e.className||U.k$,y=e.multipleLines?U.mW:U.Nw,I=e.multipleLines?U.G3:U.Bz,v=()=>{c(!0),e.onMouseEnter?.()},S=()=>{c(!1),e.onMouseLeave?.()},w=void 0===e.copyValue||null===e.copyValue,{onCopy:A}=e,N=s||A?()=>{!s||w||s?.(),A?.()}:void 0;if(!("value"in e)){let r=a.createElement("div",{className:E},e.name&&e.showName&&a.createElement("span",{className:I,...d,"data-tooltip-tip-align-left":!0},e.name),e.children);return N?a.createElement("div",{className:u()(U.A9,U.ri),onMouseEnter:v,onMouseLeave:S,"data-testid":e.dataTestId,ref:p},a.createElement(o.E,{className:U.Uh,onClick:N},r),h&&a.createElement(T.$Q,{variableId:e.variableId,matchingVars:e.matchingVars,rowRef:p,isHovered:e.isHovered??l})):a.createElement("div",{className:u()(h&&U.ri,e.forceCopyableStyling&&U.zs),onMouseEnter:v,onMouseLeave:S,"data-testid":e.dataTestId,ref:p},r,h&&a.createElement(T.$Q,{variableId:e.variableId,matchingVars:e.matchingVars,rowRef:p,isHovered:e.isHovered??l}))}return!e.value||(0,C.gl)(e.value)||f.has(e.value)?null:a.createElement("div",{className:u()(i?U.A9:U.HD,{[U.ri]:h,[U.z7]:h&&(l||_)}),onMouseEnter:v,onMouseLeave:S,"data-testid":e.dataTestId,ref:p},a.createElement("div",{className:E,onClick:N,"data-testid":"inspectionPropertyRow"},e.indent&&a.createElement("div",null),e.name?a.createElement("span",{className:I,"data-testid":"inspectionPropertyName",...d,"data-tooltip-tip-align-left":!0,"data-tooltip-show-above":e.showTooltipAbove},a.createElement(b.o,{text:e.name})):a.createElement(en,null),a.createElement("span",{className:y,"data-testid":"inspectionPropertyValue",...m,"data-tooltip-tip-align-left":!0,"data-tooltip-show-above":e.showTooltipAbove},r?a.createElement(o.E,{className:U.TH,onClick:e=>{e.stopPropagation(),r()}},a.createElement(el,{valueProps:e,isHovered:l,rowRef:p})):a.createElement(el,{valueProps:e,isHovered:l,rowRef:p}))),h&&a.createElement(T.$Q,{variableId:e.variableId,matchingVars:e.matchingVars,rowRef:p,isHovered:l}))}function eu(e){return a.createElement(ed,{...e,format:"pixels"})}function em(e){let r={...e,copyValue:e.value?.toLocaleString("en",Q)};return a.createElement(ed,{...r,format:"degrees"})}function ep(e){return a.createElement(ed,{...e,format:"millis"})}function eh({value:e,extras:r,renderElement:n}){return n(e,r)}function e_(e){let{data:r}=e,n=e.showMoreAmount||100,[i,s]=a.useState(e.limit),l=a.useCallback(()=>{s(Math.min(r.length,i+n))},[r,i,n,s]),c=Math.max(e.data.length-i,0),d="extras"in e?e.extras:{};return a.createElement(a.Fragment,null,e.data?.slice(0,i).map((r,n)=>a.createElement(eh,{value:r,extras:d,renderElement:e.renderElement,key:n})),0!==c&&a.createElement(o.E,{onClick:l,className:U.jP,key:"show-more"},(0,I.tx)("inspect_panel.property.remaining_more",{remaining:c})))}function eg(e){return a.createElement(ed,{...e,format:"percent",copyValue:void 0!==e.value?Number(e.value).toLocaleString(void 0,{maximumFractionDigits:2}):e.copyValue,value:e.value,name:e.name,variable:e.variable,isSuggestedVariable:e.isSuggestedVariable,matchingVars:e.matchingVars,redact:e.redact,className:e.className,indent:e.indent})}},189283:(e,r,n)=>{n.d(r,{yg:()=>F});var a=n(411855),i=n(188507),o=n(75395),s=n(299321),l=n(378195),c=n(629019),d=n.n(c),u=n(163023),m=n(939863),p=n(308977),h=n(581250),_=n(780761),g=n(226055),f=n(617453),E=n(869156),y=n(526243),b=n(507956),I=n(56285),T=n(32067),v=n(788612),S=n(297281),w=n(447591),A=n(428877),N=n(564092),C=n(533573),L=n(965544),O=n(520489),R=n(666139);let P=new S.ck;function D(e){return e?.value?.alias?l.dI(e.value.alias):void 0}function k(e,r,n){return(0,v.Cm)(T.T4.withPixels([(0,C.NX)({variable:r})||e]).join(""),n)}function M(e){let r=(0,_.i2)(),n=a.useRef(null),i=a.useRef(null),s=a.useRef(null),c=a.useRef(null),p=a.useRef(null),h=P.format(e.type),y=(0,f.Ku)(),[b,S]=a.useState(!1),[A,C]=a.useState(!1),{spread:M,radius:F,offset:x,blendMode:U,showShadowBehindNode:B,visible:V,radiusVar:G,spreadVar:H,xVar:W,yVar:K,colorVar:Y}=e,[$,j,z,q]=(0,E.hg)([W,K,G,H,Y].map(e=>e?.value?.alias?l.dI(e.value.alias):void 0)),X=k(x?.x,$,(0,m.t)("inspect_panel.shadows.x")),J=k(x?.y,j,(0,m.t)("inspect_panel.shadows.y")),Z=k(F,z,(0,m.t)("inspect_panel.shadows.blur")),Q=k(M,q,(0,m.t)("inspect_panel.shadows.spread_tooltip")),ee=(0,N.xp)("MISSING",x?.x??0,void 0,!0),et=(0,N.xp)("MISSING",x?.y??0,void 0,!0),er=(0,N.xp)("MISSING",F??0,void 0,!0),en=(0,N.xp)("MISSING",M??0,void 0,!0),ea=(0,g.GS)();if(!V)return null;let ei="DROP_SHADOW"===e.type||"INNER_SHADOW"===e.type,eo="DROP_SHADOW"===e.type&&B,es=d()(O.qR,r&&O.DW);return a.createElement("div",{ref:n,className:O.cx},a.createElement(v.d1,{className:O.n1,labelClassName:O.Q5,label:e.styleName,defaultLabel:h},ea?(0,w.v)(e):a.createElement(u.B,{className:O.$x,svg:R.A})),ei&&a.createElement(v._p,{className:es,onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),isHovered:b,disableVariableInspection:!0,forceCopyableStyling:!0},a.createElement("div",{className:O.vP},(0,m.tx)("inspect_panel.shadows.x")),a.createElement(o.E,{className:O.cu,ref:i,onClick:X},a.createElement(L.S,{value:(0,T.Wf)(x?.x),varData:W})),r&&a.createElement(a.Fragment,null,a.createElement(_.$Q,{variableId:D(W),matchingVars:ee?.matchingVars,rowRef:n,rowRefForModalId:i,isHovered:b}),a.createElement("div",null)),a.createElement("div",{className:O.vP},(0,m.tx)("inspect_panel.shadows.y")),a.createElement(o.E,{className:O.cu,ref:s,onClick:J},a.createElement(L.S,{value:(0,T.Wf)(x?.y),varData:K})),r&&a.createElement(_.$Q,{variableId:D(K),matchingVars:et?.matchingVars,rowRef:n,rowRefForModalId:s,isHovered:b})),a.createElement(v._p,{className:es,onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),isHovered:A,disableVariableInspection:!0,forceCopyableStyling:!0},a.createElement("div",{className:O.vP},(0,m.tx)("inspect_panel.shadows.blur")),a.createElement(o.E,{className:O.cu,ref:c,onClick:Z},a.createElement(L.S,{value:(0,T.Wf)(F),varData:G})),r&&a.createElement(a.Fragment,null,a.createElement(_.$Q,{variableId:D(G),matchingVars:er?.matchingVars,rowRef:n,rowRefForModalId:c,isHovered:A}),a.createElement("div",null)),ei&&a.createElement(a.Fragment,null,a.createElement("div",{className:O.vP},(0,m.tx)("inspect_panel.shadows.spread_tooltip")),a.createElement(o.E,{className:O.cu,ref:p,onClick:Q},a.createElement(L.S,{value:(0,T.Wf)(M),varData:H})),r&&a.createElement(_.$Q,{variableId:D(H),matchingVars:en?.matchingVars,rowRef:n,rowRefForModalId:p,isHovered:A}))),ei&&a.createElement(a.Fragment,null,a.createElement(I.aj,{blendMode:U,className:eo?O.qx:O.W0}),eo&&a.createElement(v._p,{name:(0,m.t)("inspect_panel.shadows.behind_transparent_areas"),value:(0,m.t)("inspect_panel.shadows.behind_transparent_areas_true"),className:O.qx}),!!e.formattableColor&&a.createElement(I.DP,{formattableColor:e.formattableColor,format:y,isInStyle:!0})))}function F(){let e=(0,i.d4)(e=>e.mirror.selectionProperties.numSelected)||0,r=(0,y.Z)(),n=r[0],o=T.T4.useCopyAllShadows(n?.effects??[]),l=a.useMemo(()=>a.createElement(I.Af,{id:"shadows-panel"}),[]),c=function(e,r){let n=(0,T.uQ)(),a=(0,h.Q)(),i=(0,p.v4)(),o=(0,b.ks)(),l=(0,A.Ig)();return e.map(e=>{if(!e.color)return{...e,styleName:r};let c=(0,A.oI)({color:e.color,colorVar:e.colorVar,variableScope:s.j0r.EFFECT_COLOR,displayValue:l}),d=(0,N.uA)(c,n,i.id,o,a.inspectionMode);return{...e,styleName:r,formattableColor:d}}).filter(e=>!!e)}(n?.effects??[],n?.styleName),d=a.useCallback(e=>a.createElement(M,{styleName:e.styleName,key:e.id,id:e.id,type:e.type,offset:e.offset,radius:e.radius,spread:e.spread,formattableColor:e.formattableColor,blendMode:e.blendMode,visible:e.visible,colorVar:e.colorVar,xVar:e.xVar,yVar:e.yVar,radiusVar:e.radiusVar,spreadVar:e.spreadVar,showShadowBehindNode:e.showShadowBehindNode}),[]);return 1!==e||!r||r.length<1||n.effects.length<1?null:a.createElement(v.VZ,{title:(0,m.t)("inspect_panel.shadows.title"),recordingKey:"shadows",copyAllValue:o,additionalHeaders:l},a.createElement(v.x0,{limit:2,data:c,renderElement:d,extras:n.styleName}))}},184027:(e,r,n)=>{n.d(r,{lk:()=>o,zK:()=>l,zM:()=>s});var a=n(411855),i=n(860601);let o=a.createContext(i.lQ);var s=(e=>(e[e.CREATE_STYLE=0]="CREATE_STYLE",e[e.EDIT_STYLE=1]="EDIT_STYLE",e[e.CREATE_VARIABLE_STYLE=2]="CREATE_VARIABLE_STYLE",e))(s||{});let l=a.createContext(null)},824374:(e,r,n)=>{n.d(r,{u:()=>A});var a=n(411855),i=n(986175),o=n(693554),s=n(966712),l=n(153234),c=n(46481),d=n(939863),u=n(723081),m=n(798099),p=n(848661),h=n(498606),_=n(161115),g=n(227795),f=n(538697),E=n(234587),y=n(733692),b=n(744684),I=n(811550);class T extends f.c${}class v extends f.l6{renderInput(){let e=y.p6;return"NORMAL"!==(0,p.E7)(this.props.property)&&(e=y.DU),a.createElement(g.K0,{className:e,tabIndex:-1,onPointerDown:m.dG,onMouseDown:this.onMouseDown,"data-tooltip-type":h.Ib.TEXT,"data-tooltip":(0,d.t)("fullscreen.properties_panel.color_picker.blend_mode_select.tooltip.blend_mode")},a.createElement(S,{value:(0,p.E7)(this.props.property),defaultBlendMode:"NORMAL"}))}}function S({value:e,defaultBlendMode:r}){return(0,_.qg)(e,r)?a.createElement(c.U,{svg:I.A},a.createElement(i.N,null)):a.createElement(c.U,{svg:b.A},a.createElement(o.l,null))}let w=new u.ro,A=a.memo(function(e){let r=(0,E.cJ)(),n=_.r5.map((n,i)=>{let o="LINEAR_BURN"===n&&r;return"SELECT_DIVIDER"===n?a.createElement(f.sK,{key:i}):a.createElement(T,{key:i,value:n,disabled:o,recordingKey:l.Pt(e,n)})});return a.createElement(v,{id:"color-picker-blend-mode-select",dropdownClassName:y.Qg,inputClassName:y.p6,className:y.rO,property:e.blendMode,onChange:e.onBlendModeChange,formatter:w,dispatch:e.dispatch,dropdownShown:e.dropdownShown,onMouseDown:m.dG,minTop:6,recordingKey:e.recordingKey,enablePreview:!0,targetDomNode:(0,s.kc)().fpl_window?document.body:void 0},n)})},846848:(e,r,n)=>{n.d(r,{Fr:()=>X,S7:()=>ee,bO:()=>z,ef:()=>q,mu:()=>eo,qi:()=>es,qo:()=>$,sX:()=>J});var a=n(411855),i=n(188507),o=n(424587),s=n(582288),l=n(23334),c=n(299321),d=n(629019),u=n.n(d),m=n(91408),p=n(966712),h=n(498750),_=n(563706),g=n(153234),f=n(522739),E=n(46481),y=n(939863),b=n(293017),I=n(428654),T=n(775664),v=n(973149),S=n(356390),w=n(617453),A=n(869156),N=n(499777),C=n(301462),L=n(279702),O=n(498606),R=n(218973),P=n(750029),D=n(205135),k=n(227795),M=n(7959),F=n(538697),x=n(533573),U=n(712685),B=n(116416),V=n(335021),G=n(581135),H=n(244979),W=n(837746),K=n(455910),Y=n(964829);let $=(0,m.jz)(W.uj0);function j(e,r){return Object.keys(e).every(n=>e[n]===r[n])}class z extends F.l6{}class q extends F.c${}let X={format:e=>e===c.NVY.HEX?"Hex":c.NVY[e]};var J=(e=>(e.FULL="full",e.WHITEBOARD="whiteboard",e))(J||{});let Z=(e,r)=>({hslva:r===c.NVY.HSL?(0,l.oB)(e):(0,l.qN)(e),rgba:e}),Q=e=>{let r="",n="";switch(e){case"SOLID":case"IMAGE":case"EMOJI":case"VIDEO":r=e;break;case"GRADIENT_LINEAR":r="GRADIENT",n="LINEAR";break;case"GRADIENT_RADIAL":r="GRADIENT",n="RADIAL";break;case"GRADIENT_ANGULAR":r="GRADIENT";break;case"GRADIENT_DIAMOND":r="GRADIENT",n="DIAMOND"}return{paintPickerTab:r,paintPickerFilter:n}};function ee({recordingKey:e,...r}){let[n,i]=(0,a.useState)(Z(r.color,r.colorFormat)),d=(0,a.useRef)(r.color),m=(0,a.useRef)(r.colorFormat),h=(0,N.Xo)();(0,a.useEffect)(()=>{if((j(r.color,d.current)||j(r.color,n.rgba))&&m.current===r.colorFormat)return;let e=Z(r.color,r.colorFormat);e.hslva=function(e,r,n){("l"in r&&(0===r.l||1===r.l)||"v"in r&&0===r.v)&&(r={...r,s:e.s});let a=(0,o.xN)(e.h,0)&&(0,o.xN)(r.h,1),i=(0,o.xN)(e.h,1)&&(0,o.xN)(r.h,0);return((0,o.xN)(n.r,n.g)&&(0,o.xN)(n.r,n.b)||a||i)&&(r={...r,h:e.h}),r}(n.hslva,e.hslva,r.color),d.current=r.color,m.current=r.colorFormat,i(e)},[n,r.color,r.colorFormat]);let _=(e,n)=>{let a=(0,l.w_)(e);i({hslva:e,rgba:a}),r.onColorChange(a,n?L.zk.YES:L.zk.NO_BUT_TRACK_AS_EDIT),n&&r.analytics&&C.F.trackFromFullscreen(r.analytics.name,{source:"slider",color:T.z5.format(a),...r.analytics.properties})},f=(e,n)=>{if(!r.onOpacityChange){_(e,n);return}let a=(0,l.w_)(e);i({hslva:e,rgba:a}),r.onOpacityChange(a.a,n?L.zk.YES:L.zk.NO_BUT_TRACK_AS_EDIT),n&&r.analytics&&C.F.trackFromFullscreen(r.analytics.name,{source:"slider",color:T.z5.format(a),...r.analytics.properties})},b=(e,n)=>{r.onColorChange(e,n),r.analytics&&C.F.trackFromFullscreen(r.analytics.name,{source:"hex",color:T.z5.format(e),...r.analytics.properties})},I=e=>{e.stopPropagation();let{paintPickerTab:n,paintPickerFilter:a}=Q(r.paintPickerAnalytics?.paintType);S.Y5.triggerAction("toggle-dropper",{canAcceptStyles:r.canAcceptStyles,canAcceptVariables:r.canAcceptVariables,pickerShown:h?.id,paintPickerTab:n,paintPickerFilter:a,paintPickerSessionId:r.paintPickerSessionId})};return"whiteboard"===r.displayType?(()=>{let i=r.currentTool===c.NLJ.DROPPER_COLOR;return a.createElement("div",{className:K.BA},a.createElement("div",{className:K.s1},!r.dropperDisabled&&a.createElement("div",{className:K.go},a.createElement(k.YW,{svg:Y.A,fill:"dark"===r.theme?"white":"black",selected:i,onPointerDown:I,recordingKey:g.Pt(e,"dropperButton"),"data-tooltip-type":O.Ib.TEXT,"data-tooltip":(0,y.t)("fullscreen.color_controls.eyedropper"),tooltipForScreenReadersOnly:!0,className:u()({[K.fG]:!i&&"dark"===r.theme})})),a.createElement(er,{recordingKey:g.Pt(e,"hexInput"),...r,onColorChange:b})),a.createElement("div",{className:u()(K.MX,{[K.zB]:!r.hideOpacity})},a.createElement(B.e,{width:140,color:n.hslva,changeCallback:_,containerClass:K.aw,recordingKey:g.Pt(e,"hueControl")}),!r.hideOpacity&&a.createElement(V.x,{width:140,color:n.hslva,changeCallback:f,containerClass:K.aw,recordingKey:g.Pt(e,"opacityControl")})),a.createElement(G.T,{size:184,color:n.hslva,changeCallback:_,ignoreWheelCallback:!0,recordingKey:g.Pt(e,"slvControl")}))})():a.createElement("div",null,a.createElement(G.T,{size:$,color:n.hslva,changeCallback:_,recordingKey:g.Pt(e,"slvControl"),containerClass:K.pZ}),a.createElement(M.Id,null,a.createElement("div",{className:K.ne},a.createElement("div",{className:K.go},a.createElement(k.YW,{selected:r.currentTool===c.NLJ.DROPPER_COLOR,onMouseDown:I,recordingKey:g.Pt(e,"dropperButton"),"data-tooltip-type":O.Ib.TEXT,"data-tooltip":(0,y.t)("fullscreen.properties_panel.color_picker.eyedropper"),tooltipForScreenReadersOnly:!0},a.createElement(E.U,{svg:Y.A},a.createElement(s.G,null)))),a.createElement("div",{className:K.xJ},a.createElement(B.e,{width:156,color:n.hslva,changeCallback:_,containerClass:K.aw,recordingKey:g.Pt(e,"hueControl")}),a.createElement(V.x,{width:156,color:n.hslva,changeCallback:f,containerClass:K.aw,recordingKey:g.Pt(e,"opacityControl")}))),a.createElement(M.fI,null,a.createElement(z,{id:"color-input-type-select",className:K.NC,inputClassName:K.Hi,dropdownClassName:K.O4,property:r.colorFormat,formatter:X,onChange:e=>{(0,w.UK)().colorFormat.set(e)},dispatch:r.dispatch,dropdownShown:r.dropdownShown,recordingKey:g.Pt(e,"colorFormatSelect"),targetDomNode:(0,p.kc)().fpl_window?document.body:void 0},a.createElement(q,{value:c.NVY.HEX,recordingKey:g.Pt(e,"hexOption")}),a.createElement(q,{value:c.NVY.RGB,recordingKey:g.Pt(e,"rgbOption")}),a.createElement(q,{value:c.NVY.CSS,recordingKey:g.Pt(e,"cssOption")}),a.createElement(q,{value:c.NVY.HSL,recordingKey:g.Pt(e,"hslOption")}),a.createElement(q,{value:c.NVY.HSB,recordingKey:g.Pt(e,"hsvOption")})),r.colorFormat===c.NVY.HEX&&a.createElement(er,{recordingKey:g.Pt(e,"hexInput"),...r}),r.colorFormat===c.NVY.RGB&&a.createElement(en,{recordingKey:g.Pt(e,"rgbInput"),...r}),r.colorFormat===c.NVY.CSS&&a.createElement(ea,{recordingKey:g.Pt(e,"cssInput"),...r}),(r.colorFormat===c.NVY.HSL||r.colorFormat===c.NVY.HSB)&&a.createElement(ei,{value:n.hslva,changeCallback:_,recordingKey:g.Pt(e,"hslvInput"),...r}))))}ee.displayName="ColorControls";let et=a.forwardRef((e,r)=>a.createElement("div",{ref:r,className:u()({[K.x4]:!e.isWhiteboard,[K.mP]:e.isWhiteboard})},e.children));function er(e){let r=(0,i.wA)(),n=(0,a.useRef)(null),o="whiteboard"===e.displayType;(0,a.useEffect)(()=>{o&&n.current&&(n.current.dataset.preferredTheme=e.theme)},[o,e.theme]);let s=(0,a.useMemo)(()=>o?T.z5:new T.rC({parseAlpha:!0}),[o]),l=e=>{e.keyCode===h.Uz.ESCAPE&&r(b.XE())},c=!(o||e.hideOpacity);return a.createElement(et,{ref:n,isWhiteboard:o},a.createElement(D.AN,{className:u()({[K.uh]:!o,[K.vh]:o}),squareRightBorder:!0,noBorderOnFocus:!0,formatter:s,property:e.color,onChange:e.onColorChange,autoFocus:!_.Ay.isIpad,onKeyDown:l,recordingKey:g.Pt(e,"color"),forwardedRef:e.hexInputRef}),c&&a.createElement(R.Pd,{className:K.ke,value:e.color.a,onValueChange:(r,n)=>{e.onColorChange({...e.color,a:r},n)},noLeftBorder:!0,noBorderOnFocus:!0,dispatch:r,onKeyDown:l,recordingKey:g.Pt(e,"opacity")}))}class en extends g.o6{constructor(){super(...arguments),this.formatter=new v.o1({normalizeFactor:255,min:0,max:1}),this.onRChange=e=>this.props.onColorChange({...this.props.color,r:e}),this.onGChange=e=>this.props.onColorChange({...this.props.color,g:e}),this.onBChange=e=>this.props.onColorChange({...this.props.color,b:e}),this.onAChange=(e,r)=>{this.props.onColorChange({...this.props.color,a:e},r)},this.onKeyDown=e=>{e.keyCode===h.Uz.ESCAPE&&this.props.dispatch(b.XE())}}render(){return a.createElement(et,null,a.createElement(R.j5,{className:K.Qh,dispatch:this.props.dispatch,formatter:this.formatter,value:this.props.color.r,onValueChange:this.onRChange,onKeyDown:this.onKeyDown,scrubMultiplier:1/255,autoFocus:!0,noBorderOnFocus:!0,squareRightBorder:!0,"data-tooltip-type":O.Ib.TEXT,"data-tooltip":(0,y.t)("fullscreen.color_controls.red"),recordingKey:g.Pt(this.props,"red")}),a.createElement(R.j5,{className:K.Qh,dispatch:this.props.dispatch,formatter:this.formatter,value:this.props.color.g,onValueChange:this.onGChange,onKeyDown:this.onKeyDown,scrubMultiplier:1/255,noLeftBorder:!0,noBorderOnFocus:!0,squareRightBorder:!0,"data-tooltip-type":O.Ib.TEXT,"data-tooltip":(0,y.t)("fullscreen.color_controls.green"),recordingKey:g.Pt(this.props,"green")}),a.createElement(R.j5,{className:K.Qh,dispatch:this.props.dispatch,formatter:this.formatter,value:this.props.color.b,onValueChange:this.onBChange,onKeyDown:this.onKeyDown,scrubMultiplier:1/255,noBorderOnFocus:!0,noLeftBorder:!0,squareRightBorder:!0,"data-tooltip-type":O.Ib.TEXT,"data-tooltip":(0,y.t)("fullscreen.color_controls.blue"),recordingKey:g.Pt(this.props,"blue")}),!this.props.hideOpacity&&a.createElement(R.Pd,{className:K.ke,dispatch:this.props.dispatch,value:this.props.color.a,onValueChange:this.onAChange,onKeyDown:this.onKeyDown,noLeftBorder:!0,noBorderOnFocus:!0,recordingKey:g.Pt(this.props,"opacity")}))}}en.displayName="RgbInputs";class ea extends g.o6{constructor(){super(...arguments),this.formatter=I.F,this.onKeyDown=e=>{e.keyCode===h.Uz.ESCAPE&&this.props.dispatch(b.XE())}}render(){return a.createElement(et,null,a.createElement(D.AN,{className:K.AH,formatter:this.formatter,property:this.props.color,onChange:this.props.onColorChange,recordingKey:g.Pt(this.props,"color"),autoFocus:!0,noBorderOnFocus:!0,onKeyDown:this.onKeyDown}))}}ea.displayName="CssInputs";class ei extends g.o6{constructor(){super(...arguments),this.formatter360=new v.o1({normalizeFactor:360,min:0,max:1}),this.formatter100=new v.o1({normalizeFactor:100,min:0,max:1}),this.onHChange=e=>this.props.changeCallback({...this.props.value,h:e},!0),this.onSChange=e=>this.props.changeCallback({...this.props.value,s:e},!0),this.onLChange=e=>this.props.changeCallback({...this.props.value,l:e},!0),this.onVChange=e=>this.props.changeCallback({...this.props.value,v:e},!0),this.onAChange=(e,r)=>{this.props.onColorChange({...this.props.color,a:e},r)},this.onKeyDown=e=>{e.keyCode===h.Uz.ESCAPE&&this.props.dispatch(b.XE())}}render(){return a.createElement(et,null,a.createElement(R.j5,{className:K.Qh,dispatch:this.props.dispatch,squareRightBorder:!0,formatter:this.formatter360,scrubMultiplier:1/360,value:this.props.value.h,onValueChange:this.onHChange,recordingKey:g.Pt(this.props,"hue"),autoFocus:!0,noBorderOnFocus:!0,"data-tooltip-type":O.Ib.TEXT,"data-tooltip":(0,y.t)("fullscreen.color_controls.hue"),onKeyDown:this.onKeyDown}),a.createElement(R.j5,{className:K.Qh,dispatch:this.props.dispatch,noLeftBorder:!0,squareRightBorder:!0,formatter:this.formatter100,scrubMultiplier:.01,value:this.props.value.s,onValueChange:this.onSChange,recordingKey:g.Pt(this.props,"saturation"),noBorderOnFocus:!0,"data-tooltip-type":O.Ib.TEXT,"data-tooltip":(0,y.t)("fullscreen.color_controls.saturation"),onKeyDown:this.onKeyDown}),a.createElement(R.j5,{className:K.Qh,dispatch:this.props.dispatch,noLeftBorder:!0,squareRightBorder:!0,formatter:this.formatter100,scrubMultiplier:.01,value:"l"in this.props.value?this.props.value.l:this.props.value.v,onValueChange:"l"in this.props.value?this.onLChange:this.onVChange,recordingKey:g.Pt(this.props,"value"),noBorderOnFocus:!0,"data-tooltip-type":O.Ib.TEXT,"data-tooltip":"l"in this.props.value?(0,y.t)("fullscreen.color_controls.lightness"):(0,y.t)("fullscreen.color_controls.brightness"),onKeyDown:this.onKeyDown}),!this.props.hideOpacity&&a.createElement(R.Pd,{className:K.ke,dispatch:this.props.dispatch,value:this.props.color.a,onValueChange:this.onAChange,noLeftBorder:!0,noBorderOnFocus:!0,recordingKey:g.Pt(this.props,"opacity"),onKeyDown:this.onKeyDown}))}}function eo(e){let r=(0,i.wA)(),n=(0,a.useRef)(null);(0,a.useEffect)(()=>{n.current&&(n.current.dataset.preferredTheme=e.theme)},[e.theme]);let o=(0,a.useMemo)(()=>new T.rC({parseAlpha:!0}),[]),s=e=>{e.keyCode===h.Uz.ESCAPE&&r(b.XE())};return a.createElement(et,{ref:n,isWhiteboard:!1},a.createElement("div",{className:K.Q6},a.createElement(P.J,{color:e.color,onMouseDown:e.onChitMouseDown}),a.createElement(D.AN,{className:K.uh,squareRightBorder:!0,noBorderOnFocus:!0,formatter:o,property:e.color,onChange:e.onColorChange,onKeyDown:s,recordingKey:g.Pt(e,"color")})),a.createElement(R.Pd,{decimals:e.opacityDecimals,className:K.ke,value:e.color.a,onValueChange:(r,n)=>{e.onColorChange({...e.color,a:r},n)},noLeftBorder:!0,noBorderOnFocus:!0,dispatch:r,onKeyDown:s,recordingKey:g.Pt(e,"opacity")}))}function es({variableId:e,color:r,opacity:n,onMouseDown:i,recordingKey:o}){let s=(0,A.u)(e),l=s?.name??"",c=!!s&&(0,x.eF)(s);return a.createElement(a.Fragment,null,c?null:a.createElement("div",{onFocus:e=>e.stopPropagation()},a.createElement(P.J,{color:r,opacity:n,onMouseDown:i,recordingKey:g.Pt(o,"chit"),className:H.x7})),a.createElement(f.D8,{role:"button",tabIndex:0,className:H.eV,onMouseDown:i,recordingKey:g.Pt(o,"pill")},a.createElement(U.wG,{isDeleted:c,text:l,tooltip:l})))}ei.displayName="HslvInputs"},407058:(e,r,n)=>{n.d(r,{SY:()=>ep});var a=n(411855),i=n(414507),o=n(343887),s=n(113675),l=n(202512),c=n(445978),d=n(299321),u=n(275556),m=n(776250),p=n(38329),h=n(966712),_=n(153234),g=n(776621),f=n(30090),E=n(448169),y=n(946689),b=n(46481),I=n(47506),T=n(939863),v=n(672517),S=n(973149),w=n(723081),A=n(798099),N=n(226055),C=n(959232),L=n(988022),O=n(356390),R=n(283942),P=n(15859),D=n(618056),k=n(931770),M=n(53119),F=n(428467),x=n(279702),U=n(498606),B=n(420186),V=n(186126),G=n(527718),H=n(662862),W=n(394071),K=n(205135),Y=n(832637),$=n(390534),j=n(7959),z=n(538697),q=n(987850),X=n(239737),J=n(132572),Z=n(222478),Q=n(141273),ee=n(671209),et=n(607008),er=n(77843),en=n(306143),ea=n(460088),ei=n(498902),eo=n(69782),es=n(521709);class el extends z.l6{}class ec extends z.c${}let ed=B.qo,eu=(e,r)=>e.every((e,n)=>e===r[n]);async function em(e){let r=Array.from(e.animatedImage.hash).map(e=>e.toString(16).padStart(2,"0")).join("");await (0,P.Jr)().loadImageByHash(r);let n=(0,k.Sl)(e);return d.CUU.requestGIFData(n)}function ep(e){let r=(0,N.GS)(),n=(0,X.PE)(),{withinMeter:i}=(0,q.X)(Z.JT.REMOVE_BACKGROUND),o=(0,Q.Os)(),s=n&&i&&!o,l=n&&!o;return a.createElement(v.fu,{name:"Image Settings Modal"},a.createElement(eh,{...e,isUI3:r,canUseRemoveBackground:s,isAiEnabled:l}))}class eh extends a.Component{constructor(e){super(e),this.onRotateClockwiseClick=()=>{this.props.onChange((0,D.Lt)(this.props.paint,90),x.zk.YES),u.l7.user("image-rotate-clockwise",()=>{d.glU.repairThumbnails()})},this.onScalingFactorChange=e=>{this.props.onChange({...this.props.paint,scale:e})},this.onPaintColorAdjustChange=(e,r,n)=>{let a={...this.props.paint.paintFilter,[e]:r};this.props.onChange({...this.props.paint,paintFilter:a},n?x.zk.YES:x.zk.NO),this.setState({forceThumbnailUpdate:n}),n&&(0,h.kc)().aip_adjust_sliders_tracking&&m.az.trackDefinedEvent("ai_productivity.fills_panel_image_adjust_slider_updated",{sliderName:e,sliderValue:r?.toString()})},this.onGIFFrameChange=e=>{let r=Math.round(e);this.setState({animationFrameForScrubber:r,playing:!1})},this.onVideoTimeChange=e=>{this.setState({currentTimeForScrubber:e,playing:!1})},this.setGIFCoverFrame=e=>{if(!this.state.animatedFrameData){console.warn("No frame stored in state to update");return}let r=e??this.state.animationFrameForScrubber;if((null!=e||r!==this.props.paint.animationFrame)&&!this.props.updateStillImageAndSelectionPropertiesForGIF({...this.props.paint,animationFrame:r},this.state.animatedFrameData.data)){console.warn("Failed to update image");return}},this.setGIFPlaying=e=>{this.setState({playing:e})},this.setVideoPlaying=e=>{this.setState({playing:e})},this.onUpdateAnimatedFrameData=e=>{this.setState({animatedFrameData:e})},this.onUpdateCurrentTime=e=>{this.setState({currentTimeForScrubber:e})},this.setVideoDuration=e=>{this.setState({videoDuration:e})},this.uploadImagePaint=()=>{let e=this.props.paint.blendMode,r=this.props.paint.opacity;d.glU.uploadPaintImage(e,r)},this.uploadMediaPaint=()=>{let e=this.props.paint.blendMode,r=this.props.paint.opacity;d.glU.uploadPaintMedia(e,r)},this.waitingForGIF=!1,this.clearGIFContentRequest=()=>{this.waitingForGIF=!1},this.setupGIF=()=>{this.setState({animatedImage:null,animationFrameForScrubber:this.props.paint.animationFrame,playing:!1}),this.waitingForGIF=!0,em(this.props.paint).then(e=>{this.waitingForGIF&&this.setState({animatedImage:(0,M.J)(e)})}).catch(e=>(0,g.$D)(i.FigmaTeam.FIGJAM,e))},this.loadVideoJs=async()=>{if(!this.state.videoJsLib){let e=await (0,f.Fe)();this.setState({videoJsLib:e})}},this.setupVideoJs=()=>{this.setState({currentTimeForScrubber:0,videoDuration:0,playing:!1,videoJsLib:null,isVideoLoaded:!1}),this.loadVideoJs()},this.setIsVideoLoaded=e=>{this.setState({isVideoLoaded:e})},this.setUserClickedVideoControls=e=>{this.setState({userClickedVideoControls:e})},this.isAnimatedImage=()=>!!this.props.paint.animatedImage,this.isVideo=()=>!!this.props.paint.video||"VIDEO"===this.props.paint.type,this.isDragTarget=()=>!0,this.onDragEnter=()=>{this.setState({isDragHover:!0})},this.onDragLeave=()=>{this.setState({isDragHover:!1})},this.onDrop=e=>{this.setState({isDragHover:!1});let r=this.props.paint.blendMode,n=this.props.paint.opacity;this.props.dropImageOnPaintThumbnail(r,n,e)},this.onImageButtonCointainerMouseOver=()=>{this.setState({isPreviewHover:!0})},this.onImageButtonCointainerMouseOut=()=>{this.setState({isPreviewHover:!1})},this.onImageButtonFocus=()=>{this.setState({isImageButtonFocused:!0})},this.onImageButtonBlur=()=>{this.setState({isImageButtonFocused:!1})},this.state={isDragHover:!1,isPreviewHover:!1,isImageButtonFocused:!1,forceThumbnailUpdate:!1,animatedImage:null,animatedFrameData:null,animationFrameForScrubber:e.paint.animationFrame||0,currentTimeForScrubber:0,videoDuration:0,playing:!1,videoJsLib:null,isVideoLoaded:!1,userClickedVideoControls:!1}}componentDidMount(){if(this.isAnimatedImage()?this.setupGIF():this.isVideo()&&this.setupVideoJs(),(0,J.qF)()&&!this.isAnimatedImage()&&!this.isVideo()){let e=p.D.getState();(0,L.ds)("bg_removal_available",e.openFile?.key,e,{source:"image_settings_panel"})}}UNSAFE_componentWillReceiveProps(e){this.props.paint.animationFrame!==e.paint.animationFrame&&this.setState({animationFrameForScrubber:e.paint.animationFrame})}componentDidUpdate(e){let r=null!=e.paint.animatedImage,n=null!=this.props.paint.animatedImage;!r&&n?this.setupGIF():r&&n?eu(e.paint.animatedImage.hash,this.props.paint.animatedImage.hash)||this.setupGIF():r&&!n&&this.clearGIFContentRequest(),"STRETCH"===this.props.paint.imageScaleMode&&(0,I.YQ)({id:"Image panel has cropped image"})}componentWillUnmount(){this.setVideoPlaying(!1),this.clearGIFContentRequest()}renderInlinePreview(){return this.isVideo()?a.createElement(H.A,{imagePaint:this.props.paint,openFileKey:this.props.openFileKey,width:ed,height:152,className:ea.IP,currentTime:this.state.currentTimeForScrubber,onUpdateCurrentTime:this.onUpdateCurrentTime,setDuration:this.setVideoDuration,playing:this.state.playing,setPlaying:this.setVideoPlaying,videoJsLib:this.state.videoJsLib,isVideoLoaded:this.state.isVideoLoaded,setIsVideoLoaded:this.setIsVideoLoaded,userClickedControls:this.state.userClickedVideoControls,setUserClickedControls:this.setUserClickedVideoControls}):this.isAnimatedImage()?a.createElement(V.Y,{imagePaint:this.props.paint,width:ed,height:152,className:ea.km,animatedImage:this.state.animatedImage,animationFrame:this.state.animationFrameForScrubber,onUpdateFrameData:this.onUpdateAnimatedFrameData,playing:this.state.playing}):a.createElement(G.K,{imagePaint:this.props.paint,width:ed,height:152,className:ea.km,forceUpdate:this.state.forceThumbnailUpdate})}renderMediaControls(){if(this.isVideo()){if(!(0,F.canUploadAndEditVideo_REDUX_GLOBAL_DEPRECATED)())return a.createElement($.c,null);if(this.props.paint.video)return a.createElement(en.P,{paint:this.props.paint,currentTime:this.state.currentTimeForScrubber||0,duration:this.state.videoDuration,onVideoTimeChange:this.onVideoTimeChange,disabled:null==this.props.paint.video,isVideoLoaded:this.state.isVideoLoaded,setPlaying:this.setVideoPlaying,playing:null!=this.props.paint.video&&this.state.playing,setUserClickedControls:this.setUserClickedVideoControls})}else if(this.isAnimatedImage())return a.createElement(ee.F,{paint:this.props.paint,animationFrame:this.state.animationFrameForScrubber||0,numFrames:this.state.animatedImage?this.state.animatedImage.numFrames():null,onGIFFrameChange:this.onGIFFrameChange,disabled:null==this.state.animatedImage,setPlaying:this.setGIFPlaying,playing:null!=this.state.animatedImage&&this.state.playing,setGIFCoverFrame:this.setGIFCoverFrame});else return a.createElement(v.fu,{name:"Color Adjust Sliders"},a.createElement("div",{className:ea.Vq},["exposure","contrast","vibrance","temperature","tint","highlights","shadows"].map(e=>a.createElement(eE,{key:e,propertyName:e,onChange:this.onPaintColorAdjustChange,filterColorAdjust:this.props.paint.paintFilter,min:"contrast"===e?-.3:-1,max:"contrast"===e?.3:1,recordingKey:_.Pt(this.props,e)}))))}render(){let e=this.isVideo(),r=(0,F.canUploadAndEditVideo_REDUX_GLOBAL_DEPRECATED)(),n=(0,J.qF)()&&!this.isVideo()&&!this.isAnimatedImage()&&this.props.isUI3&&this.props.canUseRemoveBackground&&!this.props.paint.image?.name.includes(er.LO),i=(0,h.kc)().aip_buttercup&&(0,J.qF)()&&!this.isVideo()&&!this.isAnimatedImage()&&this.props.isUI3&&this.props.isAiEnabled,s=this.props.paint.image&&"Checker"===this.props.paint.image.name;var d=(this.state.isPreviewHover||this.state.isImageButtonFocused||s?ea.rv:ea.ZS)+(this.state.isDragHover?" "+ea.mw:"");return e&&!r&&(d=ea.ZS),a.createElement(j.Id,null,a.createElement(j.fI,{"data-onboarding-key":"image-scale-mode-select"},a.createElement(eg,{...this.props,recordingKey:_.Pt(this.props,"imageScale")}),"TILE"===this.props.paint.imageScaleMode&&a.createElement(ef,{className:ea.GA,value:"TILE"!==this.props.paint.imageScaleMode?1:this.props.paint.scale,onChange:this.onScalingFactorChange,recordingKey:_.Pt(this.props,"scalingFactor")}),i&&a.createElement("span",{className:ea.ZM},a.createElement(W.$O,{paint:this.props.paint,showRemoveBackground:n})),!(0,h.kc)().aip_buttercup&&n&&a.createElement("span",{className:ea.Yw},a.createElement(o.K,{onClick:()=>(0,W.I3)(this.props.paint),"aria-label":(0,T.t)("fullscreen.properties_panel.remove_background"),recordingKey:_.Pt(this.props,"removeBackground"),htmlAttributes:{"data-tooltip":(0,T.t)("fullscreen.properties_panel.remove_background"),"data-tooltip-type":U.Ib.TEXT,"data-tooltip-show-above":!0}},a.createElement(b.U,{svg:eo.A},a.createElement(l.$,null)))),a.createElement("span",{className:ea.Ts},a.createElement(o.K,{onClick:this.onRotateClockwiseClick,"aria-label":(0,T.t)("fullscreen.properties_panel.rotate_90"),recordingKey:_.Pt(this.props,"rotateClockwise"),htmlAttributes:{"data-tooltip":(0,T.t)("fullscreen.properties_panel.rotate_90"),"data-tooltip-type":U.Ib.TEXT}},a.createElement(b.U,{svg:es.A},a.createElement(c.R,null))))),a.createElement(E.Y,{className:d,style:{backgroundImage:`url('${(0,C.A)()}')`},isDragTarget:this.isDragTarget,onMouseOver:this.onImageButtonCointainerMouseOver,onMouseOut:this.onImageButtonCointainerMouseOut,onTargetDragEnter:this.onDragEnter,onTargetDragLeave:this.onDragLeave,onTargetDrop:this.onDrop,recordingKey:_.Pt(this.props,"dropTarget")},a.createElement("div",{className:ea.mQ},this.renderInlinePreview(),a.createElement("div",{className:ea.dW,style:{width:ed,height:152}},e&&r&&a.createElement(y.nR,{className:ea.QY,onFocus:this.onImageButtonFocus,onBlur:this.onImageButtonBlur,onClick:this.uploadMediaPaint},(0,T.tx)("fullscreen.properties_panel.choose_video")),!e&&a.createElement(et.A,{onImageButtonBlur:this.onImageButtonBlur,onImageButtonFocus:this.onImageButtonFocus,uploadImagePaint:this.uploadImagePaint})))),this.renderMediaControls(),this.isAnimatedImage()&&a.createElement(Y.u,{title:(0,T.t)("fullscreen.properties_panel.gifs_in_figma_prototypes"),icon_DEPRECATED:ei.A,userFlag:"dismissed_gifs_cover_frame_hint",hintText:(0,T.t)("fullscreen.properties_panel.choose_which_frame_displayed")}))}}eh.displayName="ImageSettingsModal";let e_=["FILL","FIT","STRETCH","TILE"];class eg extends a.PureComponent{constructor(){super(...arguments),this.imageScaleModeFormatter=new w.D,this.onImageScaleModeChange=e=>{"STRETCH"===e?O.Y5.triggerActionInUserEditScope("crop-image"):this.props.onChange({...this.props.paint,imageScaleMode:e})}}render(){let e=e_.map((e,r)=>a.createElement(ec,{key:r,value:e,recordingKey:_.Pt(this.props,e)}));return a.createElement(el,{id:"image-scale-mode-select",className:ea.Nd,property:this.props.paint.imageScaleMode,onChange:this.onImageScaleModeChange,formatter:this.imageScaleModeFormatter,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,onMouseDown:A.dG,recordingKey:this.props.recordingKey,targetDomNode:(0,h.kc)().fpl_window?document.body:void 0},e)}}eg.displayName="ImageScaleSelection";class ef extends a.PureComponent{constructor(){super(...arguments),this.formatter=new S.LN({min:.01,max:100})}render(){return a.createElement(K.Q7,{className:this.props.className,formatter:this.formatter,property:this.props.value,disabled:this.props.disabled,onChange:this.props.onChange,recordingKey:this.props.recordingKey})}}function eE({min:e=-1,max:r=1,propertyName:n,...i}){let o=(0,a.useId)();return a.createElement(j.fI,null,a.createElement("div",{id:o,className:ea.tx},function(e){switch(e){case"exposure":return(0,T.t)("fullscreen.properties_panel.exposure");case"contrast":return(0,T.t)("fullscreen.properties_panel.contrast");case"vibrance":return(0,T.t)("fullscreen.properties_panel.saturation");case"temperature":return(0,T.t)("fullscreen.properties_panel.temperature");case"tint":return(0,T.t)("fullscreen.properties_panel.tint");case"highlights":return(0,T.t)("fullscreen.properties_panel.highlights");case"shadows":return(0,T.t)("fullscreen.properties_panel.shadows")}}(n)),a.createElement("div",{className:ea.CD},a.createElement(s.A,{"aria-labelledby":o,min:e,max:r,step:.01,bigStep:.1,value:i.filterColorAdjust?.[n]||0,defaultValue:0,hints:[0],rangeAnchor:0,onChange:(e,{commit:r})=>{i.onChange(n,e,r)},recordingKey:i.recordingKey,htmlAttributes:{"data-hold-focus":!0,onKeyDownCapture:e=>{O.Y5.isReady()&&(0,R.f7)(e)}}})))}ef.displayName="ScalingFactorInputs"},607008:(e,r,n)=>{n.d(r,{A:()=>v});var a=n(411855),i=n(188507),o=n(463033),s=n(869452),l=n(966712),c=n(768137),d=n(939863),u=n(662275),m=n(893606),p=n(239737),h=n(222478),_=n(709731),g=n(562432),f=n(30075),E=n(384775),y=n(880173),b=n(144119),I=n(460088);function T({uploadImagePaint:e,recordingKey:r}){let{close:n}=(0,g.cq)(),c=(0,b.sO)(),m=(0,i.wA)(),T=(0,p.PE)();return a.createElement("div",{className:I.sn},a.createElement(o.IK,{onClick:e,recordingKey:r},c?(0,d.tx)("slides.properties_panel.replace_media"):(0,d.tx)("fullscreen.properties_panel.image_settings.upload_new")),T&&!(0,l.kc)().aip_disable_ai_make_images&&a.createElement("div",{className:I.zr},a.createElement(o.IK,{onClick:()=>{n(),(0,_.B3)(h.JT.GENERATE_IMAGE),scheduler.postTask(()=>{(0,E.$I)({moduleToOpen:{type:"custom",module:a.createElement(y.A,null),name:f.Sn.GENERATE_IMAGE},trackingData:{source:"image_settings_swap_image_generate_new"}}),m(u.Ce())})},iconPrefix:a.createElement(s.T,null),variant:"secondary"},(0,d.tx)("fullscreen.properties_panel.image_settings.generate_new"))))}function v(e){return(0,m.R)()?a.createElement(T,{uploadImagePaint:e.uploadImagePaint}):a.createElement(c.nR,{className:I.QY,onFocus:e.onImageButtonFocus,onBlur:e.onImageButtonBlur,onClick:e.uploadImagePaint},(0,d.tx)("fullscreen.properties_panel.choose_image"))}},835808:(e,r,n)=>{n.d(r,{QG:()=>s});var a=n(411855),i=n(188507),o=n(32067);function s(){let[e,r]=function(){let e=(0,i.d4)(e=>e.mirror.sceneGraph),r=(0,o.VW)(),n=(0,i.d4)(e=>e.mirror.selectionProperties.masterSymbolGUID);if(!r||!r.isAlive)return[null,null];if(r?.isStateGroup)return[null,r??null];if(r?.type==="SYMBOL"||r?.type==="INSTANCE"){let a=r??null;if(r?.type==="INSTANCE"&&(a=n?e.get(n):null),!a)return[null,null];if(!a?.isState)return[a??null,null];let i=a?.parentGuid?e.get(a?.parentGuid):null;return[a??null,i?.isStateGroup?i:null]}return[null,null]}(),n=a.useMemo(()=>{let n=e?.symbolLinks?.filter(e=>e.uri).map(e=>e)||[];if(n.length>0)return n;let a=r?.symbolLinks?.filter(e=>e.uri).map(e=>e)||[];if(a.length>0)return a},[e,r]),s=e?.description,l=r?.description,c=s&&l?l+"\n\n"+s:s||l;return a.useMemo(()=>({links:n,description:c}),[n,c])}},541878:(e,r,n)=>{n.d(r,{Ho:()=>a,JI:()=>i,Kj:()=>s,OK:()=>c,Yj:()=>l}),n(299321);let a=1,i=.76;function o(e,r){return 1e-6>Math.abs(e-r)}var s=(e=>(e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH",e))(s||{});function l(e,r){switch(e){case 0:return"JPEG"===r?.75:.5;case 1:return"JPEG"===r?.8:.76;case 2:return 1}}function c(e,r){return o(e,l(0,r))?0:o(e,l(1,r))?1:2}},179447:(e,r,n)=>{n.d(r,{J5:()=>W,K8:()=>G,Tq:()=>B,Vq:()=>V,lq:()=>U,sZ:()=>H});var a=n(411855),i=n(140686),o=n(256296),s=n(166842),l=n(299321),c=n(776250),d=n(966712),u=n(153234),m=n(520581),p=n(763658),h=n(572206),_=n(46481),g=n(939863),f=n(501114),E=n(293017),y=n(798099),b=n(226055),I=n(356390),T=n(285381),v=n(848661),S=n(498606),w=n(7959),A=n(538697),N=n(994481),C=n(746806),L=n(541878),O=n(836589),R=n(126815);let P=e=>({format:r=>{switch(r){case"DOCUMENT":return(0,g.t)("fullscreen.properties_panel.export_settings_color_profile.document",{documentColorProfile:e===l.RYP.DISPLAY_P3?(0,g.t)("fullscreen.properties_panel.export_settings_color_profile.p3"):(0,g.t)("fullscreen.properties_panel.export_settings_color_profile.srgb")});case"SRGB":return(0,g.t)("fullscreen.properties_panel.export_settings_color_profile.srgb");case"DISPLAY_P3_V4":return(0,g.t)("fullscreen.properties_panel.export_settings_color_profile.display_p3")}}});class D extends A.l6{}class k extends A.c${}let M=()=>({format:e=>{switch(e){case L.Kj.LOW:return(0,g.t)("fullscreen.properties_panel.export_settings_quality.low");case L.Kj.MEDIUM:return(0,g.t)("fullscreen.properties_panel.export_settings_quality.medium");case L.Kj.HIGH:return(0,g.t)("fullscreen.properties_panel.export_settings_quality.high")}}});class F extends A.l6{}class x extends A.c${}function U({id:e,value:r,suffixClassName:n,onSuffixChange:i,recordingKey:o}){let s=a.useCallback(e=>{i(e.target.value)},[i]),l=(0,b.GS)();return a.createElement(m.E,{name:"export_settings_suffix_text_input"},a.createElement(w.ks,{id:e,className:n,placeholder:l?(0,g.t)("fullscreen.properties_panel.export_suffix_placeholder"):(0,g.t)("fullscreen.properties_panel.export_suffix"),value:r,onChange:s,onMouseDown:y.dG,recordingKey:o}))}class B extends a.PureComponent{constructor(){super(...arguments),this.close=()=>{this.props.dispatch(E.XE()),I.Y5.deselectProperty()},this.onColorProfileChange=e=>{let r=(0,v._W)(this.props.exportSettings,{});this.props.onChange({...r,colorProfile:e}),(0,c.sx)("export_color_profile_change",{colorProfile:e,assetType:r.imageType})},this.onUseBicubicSamplerChange=e=>{let r=(0,v._W)(this.props.exportSettings,{});this.props.onChange({...r,useBicubicSampler:e})},this.onContentsOnlyChange=e=>{let r=(0,v._W)(this.props.exportSettings,{});this.props.onChange({...r,contentsOnly:e})},this.onSVGIDChange=e=>{let r=(0,v._W)(this.props.exportSettings,{});this.props.onChange({...r,svgIDMode:e?"ALWAYS":"IF_NEEDED"})},this.onSVGTextOutlinesChange=e=>{let r=(0,v._W)(this.props.exportSettings,{});this.props.onChange({...r,svgOutlineText:e})},this.onUseAbsoluteBoundsChange=e=>{let r=(0,v._W)(this.props.exportSettings,{});this.props.onChange({...r,useAbsoluteBounds:e})},this.onSVGSimplifyStrokeChange=e=>{let r=(0,v._W)(this.props.exportSettings,{});this.props.onChange({...r,svgForceStrokeMasks:!e})},this.onExportQualityChange=(e,r)=>{let n=(0,v._W)(this.props.exportSettings,{}),a=(0,L.Yj)(e,r);this.props.onChange({...n,quality:a})}}render(){let e=(0,v._W)(this.props.exportSettings,null);if(!e)return null;let r=new h.Mi(this.props.pickerShown?.initialX,this.props.pickerShown?.initialY),n="SVG"===e.imageType&&a.createElement("div",null,a.createElement(w.fI,{className:O.nM},a.createElement(i.S,{checked:"ALWAYS"===e.svgIDMode,onChange:this.onSVGIDChange,label:a.createElement(o.J,{htmlAttributes:{"data-tooltip":(0,g.t)("fullscreen.properties_panel.export_layer_names_using_id_attributes"),"data-tooltip-type":S.Ib.TEXT}},(0,g.tx)("fullscreen.properties_panel.include_id_attribute")),recordingKey:u.Pt(this.props,"svgID")})),l.glU.shouldShowTextNodeExportOptions()&&a.createElement(w.fI,{className:O.nM},a.createElement(i.S,{checked:!!e.svgOutlineText,onChange:this.onSVGTextOutlinesChange,label:a.createElement(o.J,{htmlAttributes:{"data-tooltip":(0,g.t)("fullscreen.properties_panel.export_text_as_outlined_path_element"),"data-tooltip-type":S.Ib.TEXT}},(0,g.tx)("fullscreen.properties_panel.outline_text")),recordingKey:u.Pt(this.props,"svgTextOutlines")})),l.glU.isStrokeMaskableAsSVG()&&a.createElement(w.fI,{className:O.nM},a.createElement(i.S,{checked:!e.svgForceStrokeMasks,onChange:this.onSVGSimplifyStrokeChange,label:a.createElement(o.J,{htmlAttributes:{"data-tooltip":(0,g.t)("fullscreen.properties_panel.export_stroke_as_inlined_path_element"),"data-tooltip-type":S.Ib.TEXT}},(0,g.tx)("fullscreen.properties_panel.simplify_stroke")),recordingKey:u.Pt(this.props,"svgSimplifyStroke")})));return a.createElement(C.vx,{title:(0,g.t)("fullscreen.properties_panel.export"),initialPosition:r,headerSize:"small",onClose:this.close,recordingKey:u.Pt(this.props,"modal")},a.createElement(p.k,{name:"export_settings_modal"},a.createElement(w.Id,null,this.props.isUI3&&a.createElement(N.dx,{left:a.createElement(w.JU,{htmlFor:"export-settings-suffix",className:O.hD},`${(0,g.t)("fullscreen.properties_panel.export_suffix_label")}: `),right:a.createElement(U,{id:"export-settings-suffix",value:e.suffix||"",onSuffixChange:this.props.onSuffixChange,suffixClassName:this.props.suffixClassName,recordingKey:u.Pt(this.props,"suffix")})}),a.createElement(T.ZH,null,({documentExportColorProfile:r})=>{let n=a.createElement(V,null),i=a.createElement(G,{documentExportColorProfile:r,onColorProfileChange:this.onColorProfileChange,colorProfile:e.colorProfile,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:this.props.recordingKey});return this.props.isUI3?a.createElement(N.dx,{left:n,right:i}):a.createElement(w.fI,{className:O.ju},n,i)}),(0,d.kc)().ce_jpeg_export_quality_selector&&a.createElement(K,{onExportQualityChange:this.onExportQualityChange,exportSettings:e,isUI3:this.props.isUI3,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:this.props.recordingKey}),"PDF"===e.imageType?null:a.createElement(w.fI,{className:O.nM},a.createElement(m.E,{name:"export_settings_use_contents_only_checkbox"},a.createElement(i.S,{checked:!!e.contentsOnly,onChange:this.onContentsOnlyChange,label:a.createElement(o.J,null,(0,g.tx)("fullscreen.properties_panel.ignore_overlapping_layers")),recordingKey:u.Pt(this.props,"contentsOnly")}))),(0,d.kc)().bicubic_image_sampler&&a.createElement(w.fI,{className:O.nM},a.createElement("div",{style:f.sx.flex.justifyStart.itemsBaseline.$},a.createElement(m.E,{name:"export_settings_use_bicubic_sampler_checkbox"},a.createElement(i.S,{checked:!!e.useBicubicSampler,onChange:this.onUseBicubicSamplerChange,label:a.createElement(o.J,null,(0,g.tx)("fullscreen.properties_panel.bicubic_sampler")),recordingKey:u.Pt(this.props,"useBicubicSampler")}),a.createElement(_.U,{svg:R.A},a.createElement(s.B,{style:f.sx.ml4.$,"data-tooltip-type":S.Ib.TEXT,"data-tooltip-show-above":!0,"data-tooltip":(0,g.t)("fullscreen.properties_panel.bicubic_sampler_tooltip")}))))),l.glU.shouldShowTextNodeExportOptions()&&a.createElement(w.fI,{className:O.nM},a.createElement(m.E,{name:"export_settings_use_absolute_bounds_checkbox"},a.createElement(i.S,{checked:!!e.useAbsoluteBounds,onChange:this.onUseAbsoluteBoundsChange,label:a.createElement(o.J,null,(0,g.tx)("fullscreen.properties_panel.include_bounding_box")),recordingKey:u.Pt(this.props,"useAbsoluteBounds")}))),n)))}}function V(){return a.createElement(w.JU,{className:O.hD,htmlFor:"export-settings-color-profile"},`${(0,g.t)("fullscreen.properties_panel.export_settings_color_profile")}: `)}function G({documentExportColorProfile:e,onColorProfileChange:r,colorProfile:n,dropdownShown:i,dispatch:o,...s}){return a.createElement(m.E,{name:"export_settings_color_profile_select"},a.createElement(D,{id:"export-settings-color-profile",dataTestId:"export-settings-color-profile",dropdownWidth:160,chevronClassName:O.ho,inputClassName:O.AM,property:n??"DOCUMENT",formatter:P(e),onChange:r,dispatch:o,dropdownShown:i,onMouseDown:y.dG,recordingKey:u.Pt(s,"colorProfile")},a.createElement(k,{value:"DOCUMENT",recordingKey:u.Pt(s,"colorProfile","document")}),a.createElement(k,{value:"SRGB",recordingKey:u.Pt(s,"colorProfile","srgb")}),a.createElement(k,{value:"DISPLAY_P3_V4",recordingKey:u.Pt(s,"colorProfile","display-p3-v4")})))}function H(){return a.createElement(w.JU,{className:O.hD,htmlFor:"export-settings-quality"},`${(0,g.t)("fullscreen.properties_panel.export_settings_quality")}: `)}function W({onExportQualityChange:e,quality:r,imageType:n,dropdownShown:i,dispatch:o,...s}){return a.createElement(m.E,{name:"export_settings_quality_select"},a.createElement(F,{id:"export-settings-quality",dataTestId:"export-settings-quality",dropdownWidth:160,chevronClassName:O.ho,inputClassName:O.AM,property:(0,L.OK)(r,n),formatter:M(),onChange:r=>{n&&e(r,n)},dispatch:o,dropdownShown:i,onMouseDown:y.dG,recordingKey:u.Pt(s,"exportQuality")},a.createElement(x,{value:L.Kj.HIGH,recordingKey:u.Pt(s,"exportQuality","high")}),a.createElement(x,{value:L.Kj.MEDIUM,recordingKey:u.Pt(s,"exportQuality","medium")}),a.createElement(x,{value:L.Kj.LOW,recordingKey:u.Pt(s,"exportQuality","low")})))}function K({onExportQualityChange:e,exportSettings:r,dropdownShown:n,dispatch:i,recordingKey:o,isUI3:s}){if(!r||!r.quality||!r.imageType)return null;if("JPEG"===r.imageType||(0,d.kc)().ce_pdf_export_quality_selector&&"PDF"===r.imageType){let l=a.createElement(H,null),c=a.createElement(W,{onExportQualityChange:e,quality:r.quality,imageType:r.imageType,dropdownShown:n,dispatch:i,recordingKey:o});return s?a.createElement(N.dx,{left:l,right:c}):a.createElement(w.fI,{className:O.ju},l,c)}return null}B.displayName="ExportSettings"},227795:(e,r,n)=>{n.d(r,{DK:()=>g,K0:()=>f,Me:()=>E,YW:()=>y});var a=n(411855),i=n(629019),o=n.n(i),s=n(62935),l=n(498750),c=n(522739),d=n(163023),u=n(348425),m=n(672517),p=n(984375),h=n(447141),_=n(783423);let g=a.forwardRef(function(e,r){let n=o()(e.className,e.containerClassName,h.U,e.disabled?h.Ah:h.pq,{[h.vR]:e.selected,[e.selectedClassName??""]:e.selected,[h.No]:e.isBackgroundTransparent});return a.createElement(f,{...e,className:n,ref:r},a.createElement(a.Fragment,null,a.createElement(u.t,{svg:e.svg,fallbackSvg:e.fallbackSvg,useOriginalSrcFills_DEPRECATED:e.useOriginalSrcFills_DEPRECATED,style:{fill:e.fill}}),a.createElement(d.B,{className:h.ai,svg:_.A})))}),f=a.forwardRef(function(e,r){let n=(0,s.M)(r);function i(){n.current.blur()}let d=o()(e.className,{[h.vR]:e.selected,[e.selectedClassName??""]:e.selected,[h.Ah]:!e.selected&&e.disabled,[h.pq]:!e.selected&&!e.disabled,[h.No]:e.isBackgroundTransparent}),m=e.tooltipForScreenReadersOnly||!e.showTooltipWhenSelectedIsTrue&&e.selected,_=e.href?c.lt:c.GG;return a.createElement(_,{forwardedRef:n,className:d,style:e.style,tabIndex:null!=e.tabIndex?e.tabIndex:e.disabled?-1:0,onClick:e.disabled?void 0:e.onClick,onDoubleClick:e.disabled?void 0:e.onDoubleClick,onKeyDown:e.disabled?void 0:r=>{switch(r.keyCode){case l.Uz.ENTER:case l.Uz.SPACE:(e.onMouseDown||e.onClick||e.onKeyDown)&&r.preventDefault(),e.onMouseDown?.(r),e.onKeyDown?e.onKeyDown(r):e.onClick?.(r);break;case l.Uz.ESCAPE:i()}},onPointerDown:e.disabled?void 0:e.onPointerDown,onMouseDown:e.disabled?void 0:e.onMouseDown,onMouseUp:e.disabled?void 0:i,onMouseMove:e.disabled?void 0:e.onMouseMove,onMouseEnter:e.disabled?void 0:e.onMouseEnter,onMouseLeave:e.disabled?void 0:e.onMouseLeave,onContextMenu:e.disabled?void 0:e.onContextMenu,href:e.disabled?void 0:e.href,type:e.type,target:e.target,"data-fullscreen-intercept":e["data-fullscreen-intercept"],"data-tooltip-type":m?null:e["data-tooltip-type"],"data-tooltip":m?null:e["data-tooltip"],"data-tooltip-show-immediately":m?null:e["data-tooltip-show-immediately"],"data-tooltip-max-width":m?null:e["data-tooltip-max-width"],"data-tooltip-show-above":m?null:e["data-tooltip-show-above"],"data-tooltip-shortcut-key":m?null:e["data-tooltip-shortcut-key"],"data-tooltip-offset-x":m?null:e["data-tooltip-offset-x"],"data-tooltip-offset-y":m?null:e["data-tooltip-offset-y"],"aria-label":e["aria-label"]??(0,p.En)(e),disabled:e.disabled,"aria-disabled":e.disabled,"data-onboarding-key":e["data-onboarding-key"],"data-testid":e.dataTestId,"aria-expanded":e["aria-expanded"],"aria-haspopup":e["aria-haspopup"],"aria-owns":e["aria-owns"],recordingKey:e.recordingKey},e.children||a.createElement(u.t,{svg:e.svg,fallbackSvg:e.fallbackSvg,useOriginalSrcFills_DEPRECATED:e.useOriginalSrcFills_DEPRECATED,style:{fill:e.fill}}))}),E=(0,m.tf)(f),y=f;(0,m.tf)(y)},754369:(e,r,n)=>{n.d(r,{$:()=>_});var a=n(411855),i=n(188507),o=n(299321),s=n(44948),l=n(374626),c=n(848661),d=n(29680),u=n(335682),m=n(57392),p=n(279145),h=n(705129);function _(e){let r=(0,p.Rn)("restore-symbol-or-state-group"),n=(0,i.d4)(e=>e.mirror.appModel[r]),_=(0,d.B9)(),g=(0,l.md)(u._S),f=(0,s.k9)(()=>{let r=new Set;for(let n of e){let e=_.get(n);if(e?.type!=="INSTANCE")continue;let a=e.symbolId;a&&r.add(a)}return r},[e,_]),{backingSymbolGUID:E,backingStateGroupGUID:y}=(0,h.nD)(f,_),b=a.useMemo(()=>(0,c.gl)(E)||null===E?null:_.get(E),[E,_]),I=a.useMemo(()=>(0,c.gl)(y)||null===y?null:_.get(y),[y,_]),T=a.useMemo(()=>!!b&&b.isSubscribedAsset&&b.sourceLibraryKey!==g,[b,g]),v=a.useMemo(()=>!!(b&&o.Egt.nodeIsSoftDeleted(b.guid)),[b]),S=a.useMemo(()=>!!(I&&o.Egt.nodeIsSoftDeleted(I.guid)),[I]),w=a.useMemo(()=>{if(I)return I;if(!b)return null;if(v){let e=o.Egt.findBestAncestorInRestorePath(b.guid),r=""===e?null:_.get(e);if(r?.isStateGroup)return r}return null},[b,I,v,_]),A=(0,i.d4)(m.lm),N=a.useMemo(()=>I&&S?I:b&&v?b:null,[b,v,S,I]),C=a.useMemo(()=>{let e;return e=N?N.isStateGroup?"STATE_GROUP":w?"SYMBOL_AS_STATE":"SYMBOL_AS_NON_STATE":null,n||(e=null),e},[n,N,w]),L=a.useMemo(()=>b?.componentKey&&A.get(b.componentKey)?"DELETED_SUBSCRIBED_STATE":"SYMBOL_AS_STATE"===C?"DELETED_LOCAL_STATE":null,[A,b,C]);return a.useMemo(()=>({backingSymbolGUID:E,backingStateGroupGUID:y,singleBackingSymbol:b,singleBackingStateGroup:I,isBackingSymbolShared:T,isBackingSymbolSoftDeleted:v,isBackingStateGroupSoftDeleted:S,affiliatedStateGroup:w,affiliatedStateGroupId:w?.guid,symbolOrStateGroupToRestore:N,restoreType:C,stateResetType:L}),[E,y,b,I,T,v,S,w,N,C,L])}},690122:(e,r,n)=>{n.d(r,{p:()=>l});var a=n(411855),i=n(848661),o=n(29680),s=n(754369);function l(e){let r=(0,o.B9)(),{backingSymbolGUID:n,backingStateGroupGUID:l}=(0,s.$)(e),c=a.useMemo(()=>{let n=[];for(let a of e){let e=r.get(a);if(e&&"INSTANCE"!==e.type){for(;e?.isInstanceSublayer;)e=e.parentNode;e?.type==="INSTANCE"&&n.push(e)}}return n},[e,r]),d=a.useMemo(()=>{let e=null;for(let n of c){if(!n.symbolId)continue;let a=r.get(n.symbolId);if(a){if(e){if(e.guid!==a.guid)return i.oV}else e=a}}return e?.isState&&e.parentGuid&&(e=e.parentNode),e},[c,r]),u=a.useMemo(()=>{let n=[];for(let a of e){let e=r.get(a);e&&"INSTANCE"===e.type&&e.isInstanceSublayer&&n.push(e)}return n},[e,r]),m=a.useMemo(()=>!!(null==d&&(n||l)),[d,n,l]),p=a.useMemo(()=>!!(null==n&&null==l&&d),[d,n,l]);return a.useMemo(()=>({backingSymbolOrStateGroupOfContainingInstances:d,containingInstancesOfSublayers:c,onlyInstances:m,onlyInstanceSublayers:p,nestedInstances:u}),[d,c,m,p,u])}},412297:(e,r,n)=>{n.d(r,{h_:()=>H});var a=n(411855),i=n(188507),o=n(299321),s=n(275556),l=n(841563),c=n.n(l),d=n(776250),u=n(794272),m=n(374626),p=n(153234),h=n(268537),_=n(939863),g=n(738269),f=n(662275),E=n(106757),y=n(356390),b=n(844053),I=n(335682),T=n(416095),v=n(57392),S=n(113916),w=n(498606),A=n(279145),N=n(224690),C=n(715762),L=n(782555),O=n(616900),R=n(142232),P=n(298543),D=n(227795),k=n(958568),M=n(754369),F=n(690122),x=n(501891),U=n(258376),B=n(362679);let V="instance-option-dropdown";function G(e){e.stopPropagation()}function H(e){let{instanceAndSublayerGUIDs:r,resettableInstanceOverrides:n,showAllInstanceOptions:l}=e,{appModel:m,detachInstanceShortcut:h}=(0,u.R)(e=>({appModel:e.mirror.appModel,detachInstanceShortcut:(0,A.c1)(e.mirror.appModel.keyboardShortcuts,"detach-instance")})),E=a.useMemo(N.$H,[]),b=(0,i.d4)(e=>E(e,r)),{isBackingSymbolSoftDeleted:I,restoreType:v}=(0,M.$)(r),{onlyInstances:S,nestedInstances:P}=(0,F.p)(r),k=a.useRef(null),{needsUpdate:H}=Y(r),$=function(e){let{needsUpdate:r,numSelectedInstancesToUpdate:n,componentInstanceUpdateInfo:o,stateInstanceUpdateInfo:s}=Y(e),l=(0,T.eS)(T.aD.ALL),{updateIndividualInstances:c}=(0,R.TM)(l,C.AX.DROPDOWN_UPDATE_SELECTED_INSTANCE),u=(0,i.wA)(),m=a.useMemo(()=>({source:"INSTANCE_PANEL",instanceAndSublayerGUIDs:e}),[e]),p=(0,O.jX)(m),h=a.useCallback(()=>{u((0,f.to)({type:L.F,data:m}))},[u,m]),g=K();return a.useMemo(()=>{let e=[];return r&&(e.push({type:"option",value:"update-selected-instance",displayText:(0,_.t)("design_systems.instance_panel.update_selected",{numSelectedInstancesToUpdate:n}),callback:()=>c(o,s)}),p&&e.push({type:"option",value:"review-instance-update",displayText:(0,_.t)("design_systems.instance_panel.review_update"),callback:()=>{d.az.trackDefinedEvent("design_systems_analytics.instance_review_update_click",g),h()}})),e},[o,r,n,p,s,h,g,c])}(r),j=a.useMemo(()=>{let e=[...$];if(!l)return e;if(l&&$.length>0&&e.push({type:"separator"}),"SYMBOL_AS_STATE"===v&&e.push({type:"option",value:"restore-symbol-or-state-group",displayText:(0,_.t)("design_systems.instance_panel.restore_variant"),callback:()=>{y.Y5.triggerActionInUserEditScope("restore-symbol-or-state-group")}}),S&&e.push({type:"option",value:"detach-instance",displayText:(0,_.t)("fullscreen_actions.detach-instance"),shortcut:h,callback:()=>{s.l7.user("detach-instances",()=>o.glU.detachInstances(r))}}),(0,A.Yh)(m,"push-changes-to-main")&&0===P.length&&!I&&(e.length>0&&e.push({type:"separator"}),e.push({type:"option",value:"push-changes-to-main",displayText:(0,_.t)("fullscreen_actions.push-changes-to-main"),callback:()=>{y.Y5.triggerActionInUserEditScope("push-changes-to-main")}})),n&&Object.values(n).some(e=>e)){if(Object.keys(n).forEach(a=>{let i=parseInt(a);n?.[i]&&(e.length>0&&i===o.YnC.OVERRIDES_FOR_LAYER_AND_SUBLAYERS&&e.push({type:"separator"}),e.push({type:"option",value:i,displayText:function(e){switch(e){case o.YnC.OVERRIDES_FOR_LAYER_AND_SUBLAYERS:return(0,_.t)("design_systems.instance_panel.reset_all_changes");case o.YnC.EXPORTS:return(0,_.t)("design_systems.instance_panel.reset_exports");case o.YnC.EFFECTS:return(0,_.t)("design_systems.instance_panel.reset_effects");case o.YnC.LAYER:return(0,_.t)("design_systems.instance_panel.reset_others");case o.YnC.VISIBLE:return(0,_.t)("design_systems.instance_panel.reset_visibility");case o.YnC.NAME:return(0,_.t)("design_systems.instance_panel.reset_name");case o.YnC.FILL:return(0,_.t)("design_systems.instance_panel.reset_fill");case o.YnC.STROKE:return(0,_.t)("design_systems.instance_panel.reset_stroke");case o.YnC.TEXT:return(0,_.t)("design_systems.instance_panel.reset_text");case o.YnC.TEXT_STYLE:return(0,_.t)("design_systems.instance_panel.reset_text_style");case o.YnC.SIZE:return(0,_.t)("design_systems.instance_panel.reset_size");case o.YnC.PROTOTYPE_INTERACTIONS:return(0,_.t)("design_systems.instance_panel.reset_interactions");case o.YnC.OVERLAY:return(0,_.t)("design_systems.instance_panel.reset_overlay");case o.YnC.NUM_VALUES:}return""}(i),callback:()=>{s.l7.user("reset-overrides",()=>o.glU.resetSymbolOverridesForNodes(r,i))}}))}),b)for(let r in b)for(let n in b[r]){let a=b[r][n];e.push({type:"option",value:"reset-component-prop-assignment",displayText:(0,_.t)("design_systems.instance_panel.reset_property_assignment",{assignmentName:a.name}),callback:()=>{s.l7.user("reset-prop-assignments",()=>o.glU.resetComponentPropAssignmentForInstances(a.instanceGUIDs,n))}})}}else e.length>0&&e.push({type:"separator"}),e.push({type:"option",value:o.YnC.OVERRIDES_FOR_LAYER_AND_SUBLAYERS,displayText:(0,_.t)("design_systems.instance_panel.no_changes_to_reset"),callback:()=>{},disabled:!0});return e},[$,l,v,S,m,P.length,I,n,h,r,b]),{toggleDropdown:z,dropdownShown:q}=function(e){let r=(0,i.wA)(),n=(0,i.d4)(r=>r.dropdownShown?.type===V&&c()(r.dropdownShown.data?.guids,e)),o=K();return{dropdownShown:n,toggleDropdown:a.useCallback(a=>{a.stopPropagation(),n?r(g.oB()):(r(g.j7({type:V,data:{guids:e}})),d.az.trackDefinedEvent("design_systems_analytics.instance_update_available_button_click",o))},[n,r,e,o])}}(r),X=p.Pt(e,"toggleInstanceOptionDropdown",r.join("-"));return l||H?a.createElement("span",null,a.createElement("div",{ref:k},H?a.createElement(D.YW,{className:x.l_,onClick:z,selected:q,onMouseDown:G,svg:U.A,"data-tooltip-type":w.Ib.TEXT,"data-tooltip":(0,_.t)("design_systems.instance_panel.update_available"),recordingKey:X}):a.createElement(D.YW,{onClick:z,selected:q,onMouseDown:G,"data-tooltip-type":w.Ib.TEXT,"data-tooltip":(0,_.t)("design_systems.instance_panel.instance_options"),svg:B.A,recordingKey:X,disabled:0===j.length})),a.createElement(W,{targetRef:k,instanceDropdownOptions:j,recordingKey:e.recordingKey,dropdownShown:q})):null}function W({targetRef:e,instanceDropdownOptions:r,recordingKey:n,dropdownShown:i}){return null!=e.current&&i?a.createElement(P.Cf,{targetRect:e.current.getBoundingClientRect(),propagateCloseClick:!0},r.map((e,r)=>"option"===e.type?a.createElement(h.c$,{className:x.VM,onClick:e.callback,recordingKey:p.Pt(n,e.displayText),key:"reset-component-prop-assignment"===e.value?p.Pt(e.value,r):e.value,disabled:e.disabled},e.displayText,e.shortcut&&a.createElement("span",null,e.shortcut)):a.createElement(h.wv,{key:r}))):null}function K(){let e=(0,i.d4)(b.c),r=(0,m.md)(I.yV),n=(0,m.md)(E.p9);return{fileKey:e.file_key,fileParentOrgId:r?.parentOrgId?.toString(),fileTeamId:e.file_team_id?.toString(),userId:n?.id}}function Y(e){let{componentUpdatesForAllPages:r,stateGroupUpdatesForAllPages:n}=(0,i.d4)(v.ij),o=a.useMemo(S.bd,[]),s=(0,i.d4)(r=>o(r,e)),{componentInstanceUpdateInfo:l,stateInstanceUpdateInfo:c}=(0,k.cB)(r,n,s),d=(0,k.jR)(l,c);return{needsUpdate:d>0&&d===s.length,numSelectedInstancesToUpdate:d,componentInstanceUpdateInfo:l,stateInstanceUpdateInfo:c}}},721478:(e,r,n)=>{n.d(r,{NA:()=>$,iN:()=>z});var a=n(411855),i=n(109388),o=n(188507),s=n(700021),l=n(299321),c=n(629019),d=n.n(c),u=n(44948),m=n(794272),p=n(153234),h=n(520581),_=n(667167),g=n(163023),f=n(736242),E=n(939863),y=n(286954),b=n(843495),I=n(848661),T=n(29680),v=n(237929),S=n(496470),w=n(532888),A=n(498606),N=n(420186),C=n(386976),L=n(371686),O=n(567488),R=n(45714),P=n(224690),D=n(7959),k=n(893606),M=n(939791),F=n(754369),x=n(690122),U=n(412297),B=n(225373),V=n(371623),G=n(151575),H=n(501891),W=n(968109),K=n(405622),Y=n(289298),$=(e=>(e[e.NAME_ONLY=0]="NAME_ONLY",e[e.INSTANCE_SWAP_PICKER=1]="INSTANCE_SWAP_PICKER",e))($||{});function j(e){e.stopPropagation()}function z(e){let{canCollapse:r,resettableInstanceOverrides:n,instanceAndSublayerGUIDs:i,shouldHideButtons:o,isInComponentPlayground:l}=e,c=(0,a.useRef)(null),{onlyInstances:u,onlyInstanceSublayers:m}=(0,x.p)(i),p=function(e){let r=(0,T.B9)();return a.useMemo(()=>{if(0===e.length)return null;let n=r.get(e[0]);return n?.symbolId},[e,r])}(i),h=(0,k.R)();if(!u&&!m)return null;let _=h&&!l&&0===e.instanceNameDisplayOverride,g=a.createElement(a.Fragment,null,a.createElement(q,{...e,panelTitleRef:c,dropdownIdPrefix:"instance-panel-instance-swap-picker",shouldUseUI3RowCompatibleStyles:_}),!o&&a.createElement("span",{className:H.MC},a.createElement(O.yQ,{nodeField:s.R.OVERRIDDEN_SYMBOL_ID,defaultValue:p,guids:i}),a.createElement(G.F,{instanceAndSublayerGUIDs:i,recordingKey:e.recordingKey}),a.createElement(U.h_,{resettableInstanceOverrides:n,instanceAndSublayerGUIDs:i,recordingKey:e.recordingKey,showAllInstanceOptions:!0})));return _?a.createElement(M.DE,{label:null,input:g,icon:null}):a.createElement(D.fI,{className:d()(H.LO,{[H.Z0]:r,[H.YF]:l}),ref:c},g)}function q({panelTitleRef:e,panelTitleOverridesClassName:r,pickerButtonTextOverridesClassName:n,flushLeft:c,dropdownIdPrefix:O,shouldHideInstanceIcon:k=!1,chevronOverride:M,shouldUseUI3RowCompatibleStyles:U,...G}){let{instanceNameDisplayOverride:$,containerWide:z,instanceAndSublayerGUIDs:q,shouldHideButtons:X,highlightNodesOnHover:J}=G,Z=`${O}-${q.join("-")}`,Q=(0,T.B9)(),ee=a.useMemo(P.en,[]),{propDef:et,instanceSwapPickerShown:er}=(0,m.R)(e=>({propDef:ee(e,q,s.R.OVERRIDDEN_SYMBOL_ID),instanceSwapPickerShown:e.instanceSwapPickerShown})),{preferredValues:en,preferredValuesFetchError:ea,retryPreferredValuesFetch:ei}=(0,C.xP)(et??void 0),eo=a.useMemo(()=>ea?a.createElement(L.u,{onRetry:ei,recordingKey:"instancePropAssignment"}):void 0,[ea,ei]),es=(0,o.wA)(),{backingSymbolGUID:el,backingStateGroupGUID:ec,affiliatedStateGroupId:ed}=(0,F.$)(q),{backingSymbolOrStateGroupOfContainingInstances:eu,containingInstancesOfSublayers:em,onlyInstances:ep,onlyInstanceSublayers:eh}=(0,x.p)(q),e_=(0,o.d4)(w.t_),eg=(0,o.d4)(e=>e.library),ef=(0,u.k9)(()=>{let e=ec??el;if(!e||(0,I.gl)(e))return[];let{selectedItem:r}=(0,S.XV)(e,e_,eg,Q);return r?[r]:[]},[ec,el,e_,eg,Q]),eE=a.useMemo(()=>!!eh&&!!eu&&eu!==I.oV,[eh,eu]),ey=p.rf(p.Pt(G.recordingKey,"instanceName",q.join("-")),"mouseenter",()=>{J&&l.Ez5.canvasViewState().temporarilyHoveredNodes.set(q)}),eb=p.rf(p.Pt(G.recordingKey,"instanceName",q.join("-")),"mouseleave",()=>{J&&l.Ez5.canvasViewState().temporarilyHoveredNodes.set([])}),eI="";if(null!=ec||ed){if((0,I.gl)(ec))eI=(0,E.t)("design_systems.instance_panel.mixed");else{let e=ec?Q.get(ec):null,r=ed?Q.get(ed):null;eI=(0,v.kH)(r?.name||e?.name||"")}}else null!=el?eI=(0,I.gl)(el)?(0,E.t)("design_systems.instance_panel.mixed"):(0,v.kH)(Q.get(el)?.name||""):null!=eu&&(eI=(0,I.gl)(eu)?(0,E.t)("design_systems.instance_panel.mixed"):(0,v.kH)(eu.name||""));let eT="";if(ep){let e=Q.get(q[0])?.name;q.every(r=>Q.get(r)?.name===e)&&e&&(eT=e)}let{modalWidth:ev}=(0,_.TQ)(_.Zl.INSTANCE_SWAP_PICKER),eS=(0,_.qc)(),ew=a.useCallback(()=>{if(X)return;let r=e.current?(0,N.VZ)(i.findDOMNode(e.current),ev,!eS):void 0;es((0,y.zE)({initialPosition:r,id:Z,modal:!0}))},[X,e,ev,eS,es,Z]),eA=a.useCallback(()=>{eE&&b.tJ(em.map(e=>e.guid))},[eE,em]),eN="";ep?eN=er.isShown&&er.id===Z?H.sK:X?H.qw:H.vS:eh&&(eN=eE?H.EA:H.me);let eC=M??a.createElement(g.B,{className:H.t4,svg:Y.A});return a.createElement(h.E,{name:"instance_title_control"},0===$?a.createElement("div",{className:U?H.Bt:H.Qp,onMouseEnter:ey,onMouseLeave:eb},a.createElement(f.o,{className:U?H.iB:z?H.u$:H.vF,text:eT??eI})):1!==$&&et?a.createElement("div",{className:H.I0},a.createElement(R.L,{nodeField:s.R.OVERRIDDEN_SYMBOL_ID,currentValue:et.defaultValue,instanceGUIDs:q})):a.createElement(D.xZ,{className:d()(eN,r),recordingKey:p.Pt(G,"panelTitle",q.join("-")),onClick:eh?eA:ew,onMouseDown:j,doNotReserveSpaceForChevron:c},!k&&a.createElement(g.B,{className:H.$C,svg:W.A}),a.createElement("div",{"data-testid":"instance-panel-title-component-name",className:n||H.We},eI),!X&&a.createElement(a.Fragment,null,!eh&&eC,eE&&a.createElement(g.B,{className:H.N1,width:"24px",height:"24px",svg:K.A,"data-tooltip-type":A.Ib.TEXT,"data-tooltip":(0,E.t)("design_systems.instance_panel.select_instance")}))),er.isShown&&er.id===Z&&a.createElement(B.T,{selectedItems:ef,title:(0,E.t)("design_systems.instance_panel.swap_instance"),itemsToSwap:q,recordingKey:p.Pt(G,"instanceSwapPicker"),pickerType:_.Zl.INSTANCE_SWAP_PICKER,preferredItems:en,preferredValuesErrorComponent:eo,entrypointForLogging:V.S.InstancePickerEntrypoint.SELECTED_INSTANCE_SWAP}))}},225373:(e,r,n)=>{n.d(r,{Cc:()=>eQ,T:()=>eZ,lL:()=>eY});var a=n(411855),i=n(109388),o=n(188507),s=n(432258),l=n(343887),c=n(463033),d=n(18991),u=n(343427),m=n(629019),p=n.n(m),h=n(776250),_=n(91408),g=n(297666),f=n(44948),E=n(622422),y=n(794272),b=n(966712),I=n(374626),T=n(498750),v=n(527735),S=n(153234),w=n(647899),A=n(743282),N=n(572206),C=n(593517),L=n(667167),O=n(946689),R=n(163023),P=n(46481),D=n(154254),k=n(939863),M=n(154483),F=n(501114),x=n(738269),U=n(293017),B=n(286954),V=n(271245),G=n(182976),H=n(662275),W=n(801161),K=n(931828),Y=n(798099),$=n(298527),j=n(378905),z=n(696673),q=n(44892),X=n(788744),J=n(756317),Z=n(680681),Q=n(453681),ee=n(221173),et=n(957987),er=n(543817),en=n(875847),ea=n(669178),ei=n(335682),eo=n(694687),es=n(416095),el=n(933342),ec=n(99506),ed=n(336599),eu=n(643067),em=n(458136),ep=n(137459),eh=n(173454),e_=n(809073),eg=n(498606),ef=n(386976),eE=n(664457),ey=n(186380),eb=n(448406),eI=n(48515),eT=n(811559),ev=n(715762),eS=n(507662),ew=n(538697),eA=n(239737),eN=n(16774),eC=n(760445),eL=n(746806),eO=n(247307),eR=n(517418),eP=n(371623),eD=n(75640),ek=n(657124),eM=n(705129),eF=n(837746),ex=n(661735),eU=n(951864),eB=n(280999),eV=n(731719);let eG=(0,_.hG)(eF.jkd),eH=e=>{switch(e){case eb.rp.SMALL:return{height:22,width:22,gridClassName:""};case eb.rp.NORMAL:return{height:72,width:72,gridClassName:""};case eb.rp.WIDE:case eb.rp.SLIDES_ASSETS:return{height:52,width:256,gridClassName:""}}},eW=(0,M.fv)(),eK=(e,r)=>{let n=eH(r),i=(0,b.kc)().ds_use_lib_keys?`${e.node_id}-${e.library_key}`:`${e.node_id}-${eW(e)}`;return a.createElement(eT.lX,{key:i,item:e,height:n?.height,width:n?.width,showName:!1,shouldHideDescription:!0,shouldShowNamePopout:!0,isFigJam:!0,noBackground:!1,displayType:null===r?"list-compact":"grid",isSearch:!1,className:null===r?ex.Tv:ex.B_})};function eY(e,r){return a.createElement(ey.M,{item:e,shouldGenerateLocalThumbnail:!0,className:null===r?ex.Tv:ex.B_,draggable:!1})}let e$=e=>["drilldownItem-productComponent",e.node_id],ej=e=>e.length>1,ez=(0,M.fv)();function eq(e){let{openFile:r,onSwapCallback:n,instanceSwapPickerShown:i,multiselect:l,onMultiselectCallback:c,selectedItems:d,scrollContainerHeight:u,isLoadingSubscribedLibraries:m,shouldPerformSwapOnClick:_,itemsToSwap:g,incrementNumSearchesForTracking:S,dropdownAccessory:A,pickerType:N,pickerToggleRef:P,preferredItems:M,overrideDefaultItem:U,showPreferredSectionByDefault:Y,preferredValuesErrorComponent:ei,sessionId:eg,isSearching:ef,setIsSearching:ey,entrypointForLogging:eT}=e,eL=N===L.Zl.INSTANCE_SWAP_PICKER||N===L.Zl.PREFERRED_VALUES_PICKER,eO=(0,L.qc)(),[eF]=(0,eD.Pk)(),eB=eO&&!eF,{library:eV,dropdownShown:eH,fileByKey:eW,hubFiles:ej,sceneGraphSelection:eq,isListView:eX,loadingState:eJ}=(0,y.R)(e=>({library:e.library,dropdownShown:e.dropdownShown,fileByKey:e.fileByKey,hubFiles:e.hubFiles,sceneGraphSelection:e.mirror.sceneGraphSelection,isListView:e.instanceSwapPickerListLayout,loadingState:e.loadingState})),eZ=(0,o.d4)(e=>e.universalInsertModal.showing),eQ=r.key,e1=(0,o.wA)(),e2=l?null:d[0]??null,e3=a.useMemo(()=>ez(U),[U]),e6=a.useMemo(()=>e3??q.uj(d),[e3,d]),e5=a.useMemo(()=>(0,eR.Dr)(eV,eO?eR.Wx.COMPONENTS_FIRST:eR.Wx.SUBPATHS_FIRST,eB),[eB,eO,eV]),e8=a.useMemo(()=>(0,eR.Oj)(eV,r,eW,ej,e6),[eV,r,eW,ej,e6]),e4=(0,ea.g5)(e_.$A.Design).productComponents.filter(e=>!(0,z.tz)(ez(e))).map(eR.Kk),e9=a.useMemo(()=>M?M.map(eR.Kk):[],[M]),e7=a.useMemo(()=>(0,eR._D)(e8,eW,ej,eO?eR.Wx.COMPONENTS_FIRST:eR.Wx.SUBPATHS_FIRST,eB),[e8,eW,ej,eO,eB]),[te,tt,tr]=a.useMemo(()=>e6&&e7[e6]?.length>0?[e6,e7[e6],e8[e6]]:e5.length>0?[eQ,e5,(0,es.X0)(q.Qx(eV))]:eL&&Object.entries(e7).find(([e,r])=>r.length>0)||[null,[]],[e6,e7,e5,eL,e8,eQ,eV]),[tn,ta]=a.useState(()=>Y?{type:L.iN.PREFERRED}:te&&(eL||te!==eQ)?{type:L.iN.FILE,key:te}:{type:L.iN.RECENT});eP.S.useLaunchedEvent({pickerType:N,sessionId:eg,dropdownSelection:tn,entrypoint:eT});let[ti,to]=a.useState(null),ts=(0,o.Pj)(),tl=a.useMemo(()=>{if((0,b.kc)().ds_instance_swap_use_ai_results)return[];let e=[],n=(0,es.X0)(q.Qx(eV));e.push(...n);let a=[];return Object.values(e8).forEach(e=>{a.push(...e)}),e.push(...a),(e=>{let n=[];n=e.filter(e=>e.type===eh.PW.COMPONENT);let a=e.filter(e=>e.type===eh.PW.STATE_GROUP),i=(0,es.Vk)(eV.published.components),o=(0,es.A0)(eV,i,{key:r.key,team_id:r.teamId,editor_type:r.editorType,source_file_key:r.sourceFileKey},(0,en.T9)(r.project)),s=Object.values((0,es.WV)(eV.local.components)),l=o.concat(s),c=(0,es.Gg)(a,l);return n.push(...c),n})(e)},[e8,eV,r]),tc=(0,eA.Nv)(!0),td=eP.S.useOpenFileProperties(),tu=a.useCallback(e=>tn.type===L.iN.FILE?tn.key===eQ?e.filter(e=>"LEAF"===e.type&&e.item.isLocal):e.filter(e=>"LEAF"===e.type&&(0,j.TK)(e.item,tn.key)&&(0,es.Av)(e.item)):tn.type===L.iN.PREFERRED?e.filter(e=>"LEAF"===e.type&&M&&!!M.find(r=>r.node_id===e.item.node_id)):e,[tn,eQ,M]),{getConfig:tm}=(0,w.I7)("exp_search_unpublished_assets"),tp=a.useMemo(()=>tm().getValue("enabled",!1)&&tn.type===L.iN.FILE?tn.key===eQ?{type:eI.I.LOCAL}:{type:eI.I.FILE,fileKey:tn.key}:{type:eI.I.ALL},[tn,tm,eQ]),th=a.useCallback(async(e,n,a)=>{let i=[];if((0,b.kc)().ds_instance_swap_use_ai_results){if(m)return[];el.YG.refreshSourcesIfNeeded(ts);let n=e6?e8[e6]:void 0;i=(await el.YG.computeResultsReduxSearchTypeHelper(e,tp,r.editorType===ec._Y.DESIGN,I.zl.get(Q.qp),!0,n,e6??void 0)).normalizedSearchResults.filter(e=>e.type!==eh.PW.MODULE).map(e=>({item:e,score:e.score}))}else i=await (0,em.q)(e,tl);let o=(0,C.xd)(i.map(e=>e.item),e=>e.name,e=>ez(e)+e.node_id),s=tc&&(0,b.kc)().ds_instance_swap_use_ai_results;if(eL){let r=tu(o).length;h.az.trackDefinedEvent("instance_swap_picker.search",{...td,sessionId:eg,searchSessionId:n,query:e,queryId:a,numResults:o.length,numFilteredResults:r,aiResultsEnabled:s,dropdownType:(0,L.Z4)(tn,eQ),libraryKey:tn.type===L.iN.FILE?tn.key:void 0,isPreferredValues:N===L.Zl.PREFERRED_VALUES_PICKER})}else(0,h.sx)("Component Insert Search",{searchSessionId:n,query:e,queryId:a,numResults:o.length,aiResultsEnabled:s});return S(),o},[tc,eL,S,m,ts,e6,e8,tp,r.editorType,tl,tu,td,eg,tn,eQ,N]),t_=a.useCallback((e,r)=>{e.preventDefault(),e.stopPropagation(),e1(x.j7({type:eE.j,data:{component:r.item,position:{top:e.clientY,left:e.clientX}}}))},[e1]),{validDropdownSelection:tg,validRootDrilldownItems:tf}=a.useMemo(()=>{if(tn.type===L.iN.RECENT&&ef)return{validDropdownSelection:tn,validRootDrilldownItems:e4};let e=[];if(tn.type===L.iN.PREFERRED&&e9.length>0?e=e9:tn.type===L.iN.RECENT&&e4.length>0?e=e4:tn.type===L.iN.FILE&&e7.hasOwnProperty(tn.key)?e=e7[tn.key]:tn.type===L.iN.FILE&&eQ===tn.key&&(e=e5),0===e.length){let e,r;if(te)e={type:L.iN.FILE,key:te},r=tt;else if(e9.length>0)e={type:L.iN.PREFERRED},r=e9;else if(e4.length>0)e={type:L.iN.RECENT},r=e4;else if(Object.keys(e7).length>0){let n=Object.keys(e7)[0];e={type:L.iN.FILE,key:n},r=e7[n]}else e={type:L.iN.RECENT},r=e4;return{validDropdownSelection:e,validRootDrilldownItems:r}}return{validDropdownSelection:tn,validRootDrilldownItems:e}},[tn,e9,e4,e7,eQ,e5,te,tt,ef]),tE=a.useMemo(()=>{if(l){if(e6&&tr)return U?{[ez(U)]:q.O9(U,tr)}:{[e6]:(0,eR.OK)(d,tr)}}else{let e=U||e2;if(e&&tr){let r=q.O9(e,tr);return{[ez(e)]:r}}}return{}},[l,e6,tr,d,U,e2]),[ty,tb]=a.useState({}),tI=a.useMemo(()=>({...tE,...ty}),[tE,ty]),[tT,tv]=a.useState({index:-1,parentId:null}),tS=a.useCallback(()=>tv({index:-1,parentId:null}),[]),tw=a.useCallback((e,r)=>{tS(),tg&&tg.type===L.iN.FILE&&(tb({[tg.key]:e}),eL&&h.az.trackDefinedEvent("instance_swap_picker.navigate",{...td,sessionId:eg,direction:r,path:e.join(" / "),libraryKey:tg.key,viewMode:eX?"list":"grid",isPreferredValues:N===L.Zl.PREFERRED_VALUES_PICKER}))},[tS,eX,eL,td,N,eg,tg]),tA=a.useMemo(()=>tg.type===L.iN.FILE&&tI[tg.key]||[],[tg,tI]),tN=(0,eN.b)({hideTooltips:!0}),tC=(0,$.n1)(),tL=a.useCallback(()=>{N!==L.Zl.PREFERRED_VALUES_PICKER&&(i.isShown&&i.modal?(i.returnFocusToToggle&&P?.current&&P.current.focus(),e1(W.jD()),e1((0,B.vq)())):N===L.Zl.RESOURCE_INSERT_MODAL&&eZ&&(e1(K.b({seen_component_onboarding_modal:!0})),tN()))},[i,P,e1,N,tN,eZ]),tO=a.useCallback(e=>{if(eX)return null;let r=e.filter(e=>"LEAF"===e.type).map(e=>e.item);return(0,eb.PI)(r)},[eX]),tR=a.useCallback(r=>{let n;ta(n=r===L.iN.PREFERRED?{type:L.iN.PREFERRED}:r===L.iN.RECENT?{type:L.iN.RECENT}:{type:L.iN.FILE,key:r}),e.searchBarRef?.current&&e.searchBarRef.current.focus(),eL?h.az.trackDefinedEvent("instance_swap_picker.library_switch",{...td,sessionId:eg,dropdownType:(0,L.Z4)(n,eQ),libraryKey:n.type===L.iN.FILE?r:void 0,isPreferredValues:N===L.Zl.PREFERRED_VALUES_PICKER}):(0,h.sx)("Component Insert Library Switch",{isSearching:ef})},[e.searchBarRef,eL,td,eg,eQ,N,ef]),tP=(0,eo.sZ)(),tD=(0,eu.Oe)(tP),tk=tn.type===L.iN.FILE?tn.key:void 0,tM=(0,X.Sd)(),tF=(0,X.Fl)(),tU=a.useMemo(()=>({format:r=>"ENABLED_LIBRARIES_LABEL"===r?(0,k.t)("design_systems.instance_swap_picker.enabled_libraries"):r===eQ?(0,b.kc)().dse_local_assets_copy?(0,k.t)("design_systems.instance_swap_picker.created_in_this_file"):(0,k.t)("design_systems.instance_swap_picker.local_components"):r===L.iN.RECENT?ef?(0,k.t)("design_systems.instance_swap_picker.all_libraries"):e.pickerType===L.Zl.RESOURCE_INSERT_MODAL?(0,k.t)("universal_insert.recents"):(0,k.t)("design_systems.instance_swap_picker.recently_used"):r===L.iN.PREFERRED?(0,k.t)("design_systems.instance_swap_picker.preferred"):eW[r]?.name??(0,ep.oA)(ej[r])??""}),[eQ,eW,ej,ef,e.pickerType]),tB=a.useMemo(()=>{switch(tn.type){case L.iN.FILE:if(tn.key===eQ)return"Local components";return"Subscribed libraries";case L.iN.RECENT:return"Recently used";case L.iN.PREFERRED:return"Preferred values"}},[tn,eQ]),tV=a.useCallback(()=>{e1(H.to({type:eS.T,data:{initialTab:eh.Wv.LIBRARIES,entrypoint:ev.r6.INSTANCE_SWAP_BROWSE_LIBRARIES_LINK}}))},[e1]),tG=a.useCallback(e=>{if("LEAF"!==e.type||0===d.length)return!1;let{item:r}=e;if(ti&&!l){let e=(0,eM.Ml)(ti,Object.keys(eq));if(ed.VP(eJ,e))return r.node_id===ti.node_id&&(0,j.EF)(r,ti)}return d.some(e=>r.type===eh.PW.COMPONENT&&e.type===eh.PW.COMPONENT?!!r.component_key&&r.component_key===e.component_key||!r.component_key&&!e.component_key&&r.node_id===e.node_id:r.type===eh.PW.STATE_GROUP&&e.type===eh.PW.STATE_GROUP&&(!!r.key&&r.key===e.key||!r.key&&!e.key&&r.node_id===e.node_id))},[ti,eq,eJ,l,d]),tH=a.useCallback(e=>{let{currentDrilldownItems:r,index:n,parentId:a}=e,i=Math.max(Math.min(tT.index,n),0),o=Math.min(Math.max(tT.index,n),r.length-1),s=r.slice(i,o+1).filter(e=>"LEAF"===e.type);c?.(s.map(e=>e.item),tG(r[n])?eR.Wu.DESELECT:eR.Wu.SELECT),tv({index:n,parentId:a})},[tG,c,tT.index]),tW=(0,er.u)({alwaysSwap:eL,canSwap:_,itemsToSwap:g,openFileKey:eQ,onSwap:n,sourceForTracking:"Instance Swap Picker"}),tK=a.useCallback((e,r,n,a,i)=>{if(!eQ)return;if(l&&a){if(e.shiftKey&&-1!==tT.index&&tT.parentId===a.parentId){tH(a);return}tv({index:a.index,parentId:a.parentId})}let o=e.altKey;ti&&e1(G.yH({key:(0,eM.Ml)(ti,Object.keys(eq))})),to(r.item),tW(e,r.item,i?.queryId),tL();let s={aiResultsEnabled:tc&&(0,b.kc)().ds_instance_swap_use_ai_results,assetKey:(0,es.Av)(r.item),position:a?.index,query:i?.query,queryId:i?.queryId,scoreAi:r.item.ai_score??void 0,scoreLexical:r.item.lexical_score??void 0,sessionId:eg,dropdownType:(0,L.Z4)(tn,eQ),fromSearch:n,libraryKey:tn.type===L.iN.FILE?tn.key:void 0,viewMode:eX?"list":"grid"},c={...td,...s,type:r.item.type===eh.PW.COMPONENT?"component":"state_group",searchSessionId:eg};if(N===L.Zl.INSTANCE_SWAP_PICKER){let e=function(e){return e?e.type===eh.PW.COMPONENT?e.component_key:e.type===eh.PW.STATE_GROUP?e.key:void 0:void 0},n=d[0],a={prevInstanceType:n?.type,prevInstanceNodeId:n?.node_id,prevInstanceComponentKey:e(n)},i=r.item,o={newInstanceItemType:i.type,newInstanceNodeId:i.node_id,newInstanceComponentKey:e(i)};h.az.trackDefinedEvent("instance_swap_picker.insert_instance",{...c,...a,...o}),h.az.trackDefinedEvent("asset_search.result_inserted",{...s,assetType:c.type,entryPoint:"instance-swap",fileKey:td.fileKey,fileOrgId:td.orgId,fileTeamId:td.teamId,userId:td.userId})}else if(N===L.Zl.PREFERRED_VALUES_PICKER){let e=tG(r);(0,h.sx)("Preferred Values Picker Toggle Component",{...c,action:e?"deselect":"select"})}else(0,h.sx)("Component Insert Panel Insert Instance",{type:r.item.type===eh.PW.COMPONENT?"component":"state_group",fromSearch:n,altKey:o,viewMode:eX?"list":"grid",dropdownType:(0,L.Z4)(tn,eQ)})},[eQ,l,ti,tW,tL,tc,eg,tn,eX,td,N,tT.index,tT.parentId,tH,e1,eq,d,tG]),tY=a.useRef(null),t$=a.useRef(null),tj=a.useCallback(e=>{e&&setTimeout(()=>t$.current?.focus(),0)},[]),tz=a.createElement(a.Fragment,null,a.createElement(ek.p,{id:(0,L.YU)(N),property:tg.type===L.iN.FILE?tg.key:tg.type,formatter:tU,rightIcon:a.createElement(et.P,{resourceId:tk}),onChange:tR,dispatch:e1,dropdownShown:eH,dropdownAlignment:"left",dropdownWidth:230,openOnKeyPressed:[T.Uz.SPACE,T.Uz.ENTER],inputClassName:N===L.Zl.RESOURCE_INSERT_MODAL?ex.je:void 0,className:N===L.Zl.RESOURCE_INSERT_MODAL?ex.kc:ex.Kv,ref:tY,inputRef:t$,onDropdownHidden:tj,role:"combobox",dataTestId:"instance-swap-picker-library-select"},(()=>{function e(e){return a.createElement(ek.c,{key:e,value:e})}function n(e){return a.createElement(ek.c,{key:e,value:e,removeTextRightPadding:!0,rightSettingsIcon:a.createElement(ee.t,null)})}function i(e){return a.createElement(ek.c,{key:e,value:e,removeTextRightPadding:!0,rightSettingsIcon:a.createElement(J.FX,null)})}let{pass:o,fail:l}=(0,v.j)(Object.keys(e7),z.wJ),c=[];e9.length&&c.push(e(L.iN.PREFERRED));let d=(0,en.T9)(r.project);if(e6&&e6!==eQ&&!Y&&!(0,es.qB)(eV,{key:r.key,team_id:r.teamId,editor_type:r.editorType,source_file_key:r.sourceFileKey},{key:e6},d)&&eW[e6]&&(c.length>0&&c.push(a.createElement(ew.sK,{key:"non-subscribed-divider"})),c.push(e(e6)),l=l.filter(e=>e!==e6)),tD&&(0,Z.NX)(tM)){let e=l.map(e=>eW[e]).filter(s.Vq).map(({key:e,name:r})=>({key:e,name:r}));(0,Z.k9)({libraries:e,approvedLibraryFileKeysByResourceType:tM,approvedLibraryKeysByResourceType:tF}),l=e.map(({key:e})=>e)}if((ef||e4.length>0)&&(c.length>0&&c.push(a.createElement(ew.sK,{key:"recent-divider"})),c.push(e(L.iN.RECENT))),eL){for(let r of(e5.length>0&&(c.length>0&&c.push(a.createElement(ew.sK,{key:"local-divider"})),c.push(e(eQ))),l.length>0&&c.length>0&&c.push(a.createElement(ew.sK,{key:"subscribed-divider"})),l))tD&&(0,Z.HZ)(r)?c.push(i(r)):c.push(e(r));if(tC)for(let e of o)c.push(n(e));return c}for(let r of(e5.length>0&&c.push(e(eQ)),l.length>0&&c.push(a.createElement(ew.sK,{key:"subscribed-divider"})),l))tD&&(0,Z.HZ)(r)?c.push(i(r)):c.push(e(r));if(tC)for(let e of o)c.push(n(e));return c})()),A),tq=a.useRef(null),tX=a.createElement("div",{className:N===L.Zl.RESOURCE_INSERT_MODAL?p()(ex.FK,ex.k2):ex._M},eO?a.createElement(a.Fragment,null,tz,a.createElement("div",{className:D.cx.ml4.$},a.createElement(eD.sX,{pickerType:N,includeFolderSetting:tg.type===L.iN.FILE&&!ef,ref:tq,sessionId:eg,queryId:ef?e.queryId:void 0}))):tz),tJ=a.useCallback(()=>{ta({type:L.iN.RECENT}),eL&&h.az.trackDefinedEvent("instance_swap_picker.search_all_libraries_from_empty",{...td,sessionId:eg,query:e.query,queryId:e.queryId,isPreferredValues:N===L.Zl.PREFERRED_VALUES_PICKER})},[eL,td,N,e.query,e.queryId,eg]),tZ=a.createElement(e0,{onClick:tJ,type:tn.type}),tQ=a.createElement("div",{className:eL?ex.y7:ex.uR,style:{height:u+(e.pickerType===L.Zl.RESOURCE_INSERT_MODAL?eC.Kr:0)}},a.createElement("div",{className:eL?ex.qv:void 0},(0,k.tx)("design_systems.instance_swap_picker.no_components")),a.createElement(O.nR,{className:eL?ex.ut:ex.oU,onClick:tV},a.createElement("div",null,a.createElement(R.B,{svg:eU.A,style:F.sx.colorIcon.$})),(0,k.tx)("design_systems.instance_swap_picker.browse_libraries"))),t0=function(e,r,n){let a=(0,I.md)(Q.qp),i=e?r[e]:null,o=(0,f.k9)(()=>i?new Set(i.map(e=>(0,es.Av)(e))):[],[i]),s=(0,f.k9)(()=>{Object.keys(a)},[a]),l=(0,E.h)(e),c=(0,E.h)(s),d=(0,E.h)(o),u=(0,E.h)(n)&&!n;return l||c||d||u}(e6,e8,m),t1=Object.keys(e7).length>0;return a.createElement(C.uO,{recordingKey:e.recordingKey,scrollContainerHeight:u,onSearch:th,searchFilter:tu,setIsSearching:ey,onLeafItemContextMenu:t_,onLeafItemDrilldown:tK,onLeafItemDraggable:eL?void 0:{sourceForTracking:"component-insert-modal",clickToInsert:!1,afterSuccessfulInsert:tL,sectionNameForTracking:tB},rootDrilldownItems:tf,initialPath:tA,beforeItems:tX,beforeItemsRefs:[t$,tq],focusBeforeItems_DEPRECATED_UI2:()=>tY.current?.focus(),emptyState:tQ,isSelectedItem:tG,multiselect:l,onMultiselectCallback:c,getBackgroundColorForLeafItemThumbnail:q.zR,getLeafItemTooltip:eL?eR.pf:void 0,getLeafItemThumbnail:eL||eX?eY:eK,drilldownItemsRecordingKey:"instanceSwapDrilldownItems",drilldownItemsKeySupplement:tn.type===L.iN.FILE?tn.key:tn.type,getLeafItemRecordingKey:e$,getThumbnailGridLayoutForItems:tO,onDrilldownPathChange:tw,additionalRowBottomMargin:eL?C.qy:0,renderLeafItemNames:!!eL||eX,searchBarRef:e.searchBarRef,pickerToggleRef:P,extraHeightOnSearch:eL||e.pickerType===L.Zl.RESOURCE_INSERT_MODAL?0:eG,validLibrariesArePresent:t1,isLoading:m||(0,ed.VP)(eJ,V.fi),searchDebounceTime:e.searchDebounceTime,searchEmptyStateCTA:tZ,searchBarPlaceholderText:tn.type===L.iN.PREFERRED?(0,k.t)("design_systems.instance_swap_picker.search_preferred"):tn.type===L.iN.RECENT?(0,k.t)("design_systems.instance_swap_picker.search_all_libraries"):null!=tn.key&&eW[tn.key]?(0,k.t)("design_systems.instance_swap_picker.search_filename",{filename:eW[tn.key].name}):(0,k.t)("design_systems.instance_swap_picker.search"),pickerType:e.pickerType,errorComponent:tn.type===L.iN.PREFERRED?ei:void 0,query:e.query,setQuery:e.setQuery,contextValue:e.drilldownPickerContextValue,shouldUpdateServerResults:t0,searchTypeOption:tp,sessionId:eg})}let eX=(0,M.fv)();function eJ(e){let{multiselect:r,onMultiselectCallback:n,selectedItems:i,searchDebounceTime:s,shouldPerformSwapOnClick:l=!0,itemsToSwap:c,onSwapCallback:d,searchBarRef:u,setNumSearchesForTracking:m,scrollContainerHeight:p,pickerToggleRef:h,toggleGridViewButton:_,preferredItems:g,overrideDefaultItem:f,preferredValuesErrorComponent:E,sessionId:b,entrypointForLogging:I}=e,T=a.useRef(f).current,{instanceSwapPickerShown:v,loadingState:S,library:w}=(0,y.R)(e=>({instanceSwapPickerShown:e.instanceSwapPickerShown,loadingState:e.loadingState,library:e.library})),A=(0,o.d4)(ei.tB),N=a.useMemo(()=>!!g&&ej(g),[g]),C=A?.key||null,O=eX(T),R=a.useMemo(()=>O??q.uj(i),[O,i]),P=a.useMemo(()=>{if(null==A||null==C)return!0;let e=(0,en.T9)(A?.project);if(R&&A&&(0,es.qB)(w,{key:A.key,team_id:A.teamId,editor_type:A.editorType,source_file_key:A.sourceFileKey},{key:R},e)&&!(0,es.hH)(R)){let e=(0,es.Mb)(R);return!ed.D2(S,e)}if(N&&R&&R!==C)return ed.VP(S,(0,ef._A)(C));let r=(0,eM.yD)(C);return!ed.D2(S,r)},[A,C,N,R,w,S]),D=a.useCallback(()=>m?.(e=>e+1),[m]);return((0,eO.x)(P),(v.isShown||e.pickerType!==L.Zl.INSTANCE_SWAP_PICKER)&&C&&A)?a.createElement(eq,{openFile:A,instanceSwapPickerShown:v,multiselect:r,onMultiselectCallback:n,selectedItems:i,scrollContainerHeight:p,recordingKey:e.recordingKey,shouldPerformSwapOnClick:l,itemsToSwap:c,onSwapCallback:d,pickerToggleRef:h,searchBarRef:u,isLoadingSubscribedLibraries:P,searchDebounceTime:s,incrementNumSearchesForTracking:D,pickerType:e.pickerType,dropdownAccessory:e.pickerType===L.Zl.RESOURCE_INSERT_MODAL?_:null,preferredItems:g,preferredValuesErrorComponent:E,overrideDefaultItem:T,showPreferredSectionByDefault:N,query:e.query,setQuery:e.setQuery,drilldownPickerContextValue:e.drilldownPickerContextValue,sessionId:b,isSearching:e.isSearching,setIsSearching:e.setIsSearching,queryId:e.queryId,entrypointForLogging:I}):null}function eZ(e){let{pickerType:r,initialWidth:n,initialHeight:s,title:l,pickerToggleRef:c}=e,d=r===L.Zl.INSTANCE_SWAP_PICKER||r===L.Zl.PREFERRED_VALUES_PICKER,{instanceSwapPickerShown:u,dropdownShown:m}=(0,y.R)(e=>({instanceSwapPickerShown:e.instanceSwapPickerShown,dropdownShown:e.dropdownShown})),p=(0,o.wA)(),_=a.useRef(null),[f,E]=a.useState((0,A.g)()),b=u.isShown?new N.Mi(u.initialX,u.initialY):new N.Mi(0,0),I=a.useCallback(()=>{m?.type===(0,L.YU)(r)&&p(x.oB())},[p,m,r]),T=a.useCallback(()=>{u.isShown&&u.modal&&p((0,B.qX)({...u,modal:!1,returnFocusToToggle:!1})),_.current?.focus()},[p,u]),[v,w]=a.useState(0),C=a.useCallback(()=>{(0,h.sx)(`${d?"Instance Swap Picker":"Component Insert"} Total Searches`,{numSearches:v}),p((0,B.vq)())},[p,v,d]),O=a.useRef(null),R=d?320:428,{modalWidth:P}=(0,L.TQ)(r),D=(0,L.qc)(),k=a.useCallback(()=>u.isShown&&u.initialY?s||Math.min(window.innerHeight-u.initialY-20,R):R,[R,s,u]),[M,F]=a.useState(k),U=i.findDOMNode(O.current?.getEl());a.useLayoutEffect(()=>{let e=(0,g.s)(()=>{if(!U)return;let e=U.getBoundingClientRect();e.bottom>window.innerHeight&&F(M-(e.bottom-window.innerHeight)-20)},200);return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[M,F,U]);let V=a.useRef(void 0),[G,H]=a.useState(""),[W,K]=a.useState(!1),Y=a.createElement(eQ,{isSwapPicker:d,searchBarRef:_,sessionId:f,queryId:W?V.current:void 0}),$=a.createElement("div",{className:ex.Hn},a.createElement("div",{className:ex.D0},l),!D&&Y),j=a.useCallback(()=>{m?.type.includes(eD.fn)&&p(x.oB())},[p,m?.type]);return a.createElement(eL.vx,{title:d?$:l,initialPosition:b,initialHeight:M,initialWidth:n??P,isCloseHidden:d&&!D,dragHeaderOnly:!0,onDragStart:I,onDragEnd:T,onClose:C,ref:O,autoflowHeight:!0,recordingKey:S.Pt(e.recordingKey,"modal"),disableHeaderBottomBorder:D,onClick:j},a.createElement(eJ,{...e,searchBarRef:_,toggleGridViewButton:Y,setNumSearchesForTracking:w,scrollContainerHeight:M,pickerToggleRef:c,query:G,setQuery:H,sessionId:f,isSearching:W,setIsSearching:K,drilldownPickerContextValue:{queryId:V},queryId:V.current}))}function eQ({isSwapPicker:e,isPreferredValues:r,searchBarRef:n,sessionId:i,queryId:s}){let c=(0,o.wA)(),m=eP.S.useTrackViewToggle({sessionId:i,queryId:s,isPreferredValues:!!r}),p=(0,o.d4)(e=>r?e.preferredValuesPickerListLayout:e.instanceSwapPickerListLayout),_=r?U.U8:U.fG,g=a.useCallback(a=>{a.stopPropagation(),c(_({isListLayout:!p})),n?.current&&n.current.focus(),e?m(!p):(0,h.sx)(`${r?"Preferred Values Picker":"Component Insert"} View Toggle`,{viewMode:p?"grid":"list"})},[c,_,p,n,e,m,r]);return a.createElement(l.K,{"aria-label":p?(0,k.t)("design_systems.instance_swap_picker.show_as_grid"):(0,k.t)("design_systems.instance_swap_picker.show_as_list"),onClick:g,recordingKey:S.Pt("toggleGridViewButton",r?"preferredValues":"instanceSwapPicker"),htmlAttributes:{onMouseDown:Y.dG,"data-tooltip":p?(0,k.t)("design_systems.instance_swap_picker.show_as_grid"):(0,k.t)("design_systems.instance_swap_picker.show_as_list"),"data-tooltip-type":eg.Ib.TEXT}},a.createElement(P.U,{svg:p?eB.A:eV.A},p?a.createElement(d.t,null):a.createElement(u.Z,null)))}function e0({onClick:e,type:r}){let n=(0,L.qc)();if(r===L.iN.RECENT)return null;let i=(0,k.tx)("design_systems.instance_swap_picker.search_all_libraries");return n?a.createElement(c.$n,{onClick:e,variant:"secondary"},i):a.createElement(O.N_,{onClick:e,className:ex.nf,canFocus:!0,trusted:!0},i)}},28630:(e,r,n)=>{n.d(r,{g:()=>m});var a=n(302245),i=n(848661),o=n(496470),s=n(234945),l=n(113916),c=n(705129);let d=e=>e.fileByKey,u=e=>e.library;function m(){return(0,a.Mz)([(e,r,n)=>r,(e,r,n)=>n,d,u],(e,r,n,a)=>{if(!r.get(e))return null;let{selectedItem:i}=(0,o.XV)(e,n,a,r);return i})}(0,a.Mz)([d,u,s.dK,l.i2],(e,r,n,a)=>{let s=null,{backingSymbolGUID:l,backingStateGroupGUID:d}=(0,c.nD)(new Set(a),n);if(d&&(0,i.hS)(d)?s=d:l&&(0,i.hS)(l)&&(s=l),!s)return null;let{selectedItem:u}=(0,o.XV)(s,e,r,n);return u})},750693:(e,r,n)=>{n.d(r,{P$:()=>e4,Pi:()=>e9,So:()=>tt,eT:()=>e1,rM:()=>tr});var a,i=n(411855),o=n(188507),s=n(424587),l=n(140686),c=n(256296),d=n(385668),u=n(343887),m=n(416580),p=n(536825),h=n(288107),_=n(631437),g=n(243742);n(388393);var f=n(299321),E=n(275556),y=n(209426),b=n(904669),I=n(378195),T=n(629019),v=n.n(T),S=n(539321),w=n(776250),A=n(297666);n(62935),n(794272);var N=n(966712),C=n(153234),L=n(522739);n(96328);var O=n(763658),R=n(448169),P=n(192437);n(946689);var D=n(163023),k=n(46481),M=n(752207),F=n(947131),x=n(939863),U=n(293017),B=n(632430),V=n(662275),G=n(411294),H=n(626783),W=n(906899),K=n(259927),Y=n(483990),$=n(775664),j=n(723081),z=n(798099),q=n(297336),X=n(226055),J=n(356390);n(617453);var Z=n(848661),Q=n(618056),ee=n(931770),et=n(555074),er=n(869156),en=n(318812);n(335682);var ea=n(499777);n(416095);var ei=n(833629);n(241691),n(173454);var eo=n(279702),es=n(484892),el=n(498606),ec=n(420186),ed=n(218973),eu=n(469572),em=n(909279),ep=n(775372),eh=n(528815),e_=n(750029),eg=n(925782),ef=n(184027),eE=n(316125),ey=n(247908),eb=n(602029),eI=n(248752),eT=n(205135),ev=n(7959);n(137906);var eS=n(991586),ew=n(798103),eA=n(110382),eN=n(238093),eC=n(893606);n(343559);var eL=n(939791),eO=n(781867),eR=n(807676),eP=n(61511),eD=n(533573),ek=n(158406),eM=n(712685),eF=n(875157),ex=n(117110),eU=n(906426),eB=n(234587);n(144119);var eV=n(347127),eG=n(459049),eH=n(911216),eW=n(447141),eK=n(244979),eY=n(424148),e$=n(819785),ej=n(695038),ez=n(27921),eq=n(874038),eX=n(953663),eJ=n(641053);let eZ=new Set([f.j0r.STROKE]),eQ=e=>{J.Y5.updateSelectionProperties({exportBackgroundDisabled:!e})},e0=(e,r,n)=>{(0,N.kc)().ce_properties_panel_tracking&&(0,w.sx)("editor-paints-panel-fill-change"),J.Y5.updateSelectionProperties({fillPaints:e},{shouldCommit:r,overwrite:n??f.WXh.ONLY_WHEN_NOT_EMPTY}),(0,eu.a2)("fillPaints")},e1=i.memo(function(e){let{dispatch:r}=e,n=(0,eB.cJ)(),a=(0,X.GS)(),o=i.useCallback((e,{fromSearch:n}={})=>{r(B.AV({style:e,inheritStyleKeyField:"inheritFillStyleKey",fromSearch:n}))},[r]),s=(0,eN.yT)({...e,styleType:"FILL",inheritStyleKeyField:"inheritFillStyleKey"}),d=(0,eE.xm)(e),u=(0,i.useCallback)(()=>{(0,N.kc)().ce_properties_panel_tracking&&(0,w.sx)("editor-paints-panel-fill-color-picker-show")},[]);return i.createElement(P.tH,{boundaryKey:"FillPanel",fallback:P.H4.NONE_I_KNOW_WHAT_IM_DOING},i.createElement(O.k,{name:"fill_panel"},i.createElement("div",{className:"displayContents","data-test-id":"fill_panel"},i.createElement(ev.Zk,null,i.createElement(e5,{propertyList:e.fillPaints,onChange:e0,onApplyStyle:o,currentSelectedProperty:e.currentSelectedProperty,selectedPropertyType:f.rrT.FILL,recordingKey:C.Pt(e,"paintList"),pickerInStyleCreationShown:e.pickerInStyleCreationShown,onPickerShown:u,variableScopes:e.variableScopes,isPanelBodyCollapsedAtom:e.isPanelBodyCollapsedAtom,...d,...s}),i.createElement(eg.JH,{isPanelBodyCollapsedAtom:e.isPanelBodyCollapsedAtom},(()=>{if(e.selectionContainsFrames&&e.hasExports&&!n){if(a){if(!e.fillPaints||(0,Z.hS)(e.fillPaints)&&0===e.fillPaints.length)return;return i.createElement(eL.Ad,{label:i.createElement(i.Fragment,null),input:i.createElement(l.S,{muted:!0,mixed:e.exportBackgroundDisabled===Z.oV,checked:!1===e.exportBackgroundDisabled,onChange:eQ,recordingKey:C.Pt(e,"exportDisableCheckbox"),label:i.createElement(c.J,{htmlAttributes:{"data-tooltip":(0,x.t)("fullscreen.properties_panel.fill.include_the_canvas_or_group_background_in_exports"),"data-tooltip-type":el.Ib.TEXT}},(0,x.tx)("fullscreen.properties_panel.fill.show_in_exports")),htmlAttributes:{"data-tooltip":(0,x.t)("fullscreen.properties_panel.fill.include_the_canvas_or_group_background_in_exports"),"data-tooltip-type":el.Ib.TEXT}})})}return i.createElement(ev.fI,{className:eK.Kx},i.createElement(eh.t,{className:eK.kv,id:"frame-background-export-background-disabled",property:e.exportBackgroundDisabled===Z.oV?Z.oV:!e.exportBackgroundDisabled,onChange:eQ,recordingKey:C.Pt(e,"exportDisableCheckbox")}),i.createElement(ev.JU,{className:eK.mH,htmlFor:"frame-background-export-background-disabled","data-tooltip-type":el.Ib.TEXT,"data-tooltip":(0,x.t)("fullscreen.properties_panel.fill.include_the_canvas_or_group_background_in_exports")},(0,x.tx)("fullscreen.properties_panel.fill.show_in_exports")))}})())))))});function e2(){(0,N.kc)().ce_properties_panel_tracking&&(0,w.sx)("editor-paints-panel-stroke-color-picker-show")}class e3 extends i.PureComponent{constructor(){super(...arguments),this.settingsId="stroke-settings",this.state={showSwapButton:!1,syncState:"NONE",individualBorderOption:ep.om.ALL},this.stopPropagation=e=>e.stopPropagation(),this.onPaintsChange=(e,r,n)=>{(0,N.kc)().ce_properties_panel_tracking&&(0,w.sx)("editor-paints-panel-stroke-change",{key:"color"}),J.Y5.updateSelectionProperties({strokePaints:e},{shouldCommit:r,overwrite:n??f.WXh.ONLY_WHEN_NOT_EMPTY}),(0,eu.a2)("strokePaints")},this.onNonPaintsChange=(e,r=eo.zk.YES)=>{let n=(0,Z._W)(this.props.strokePaints,[]);if(n.length>0&&!n.find(e=>e.visible)){let e=n.map(e=>({...e,visible:!0}));J.Y5.updateSelectionProperties({strokePaints:e},{shouldCommit:eo.zk.NO,overwrite:f.WXh.ONLY_WHEN_NOT_EMPTY})}J.Y5.updateSelectionProperties(e,{shouldCommit:r}),(0,eu.a2)("strokePaints")},this.onApplyStyle=(e,{fromSearch:r}={})=>{this.props.dispatch(B.AV({style:e,inheritStyleKeyField:"inheritFillStyleKeyForStroke",fromSearch:r}))},this.bordersAlignmentOnChange=(e,r=eo.zk.YES)=>{if(this.state.individualBorderOption!==ep.om.ALL){let{strokeAlign:r}=e;(0,w.sx)("Individual Border Alignment Changed",{position:(0,Z.hS)(r)?r:"__mixed__"})}this.onNonPaintsChange(e,r)},this.forwardedRef=i.createRef(),this.toggleSettings=()=>{if(this.props.pickerShown?.id===this.settingsId)this.props.dispatch(U.XE());else{if(!this.forwardedRef||!this.forwardedRef.current)return;(0,w.sx)("editor-paints-panel-advanced-stroke-show");let e=(0,ec.cn)(this.forwardedRef.current);this.props.dispatch(U.u1({id:this.settingsId,initialX:e.x,initialY:e.y})),this.props.dispatch(U.Uv()),this.props.dispatch(W.sw())}},this.setIndividualBorderOption=e=>{this.setState({individualBorderOption:e})},this.selectBorderSides=(e,r=eo.zk.YES)=>{if(this.setState({individualBorderOption:e}),e===ep.om.CUSTOM)return;let n=e===ep.om.ALL,a={borderTopVisible:n||e===ep.om.TOP,borderRightVisible:n||e===ep.om.RIGHT,borderBottomVisible:n||e===ep.om.BOTTOM,borderLeftVisible:n||e===ep.om.LEFT};J.Y5.updateSelectionProperties(a,{shouldCommit:r}),(0,eu.a2)("strokePaints")},this.nodesSupportIndividualBorders=(e,r)=>{let n=new Set(["RECTANGLE","ROUNDED_RECTANGLE","SYMBOL","INSTANCE"]);for(let a of e)if(n.has(a.type)||"FRAME"===a.type&&!a.resizeToFit||"FRAME"===a.type&&r<2&&this.nodesSupportIndividualBorders(a.childrenNodes,r+1))return!0;return!1},this.supportsIndividualBorders=()=>{if(!this.props.numSelectedByType)return!1;if((0,q.vx)(this.props.numSelectedByType,"RECTANGLE")||(0,q.vx)(this.props.numSelectedByType,"ROUNDED_RECTANGLE")||(0,q.vx)(this.props.numSelectedByType,"SYMBOL")||(0,q.vx)(this.props.numSelectedByType,"INSTANCE"))return!0;if((0,q.vx)(this.props.numSelectedByType,"FRAME")){let e=Object.keys(this.props.sceneGraphSelection).map((0,b.UN)().get).filter(e=>!!e);return this.nodesSupportIndividualBorders(e,0)}return!1},this.onBidirectionalEndpointRowMouseEnter=e=>{this.stopPropagation(e),this.props.leftEndCap&&this.props.rightEndCap&&(0,Z.hS)(this.props.leftEndCap)&&(0,Z.hS)(this.props.rightEndCap)&&this.props.leftEndCap!==this.props.rightEndCap&&this.setState({showSwapButton:!0})},this.onBidirectionalEndpointRowMouseLeave=e=>{this.stopPropagation(e),this.hideSwapButton()},this.hideSwapButton=()=>{this.setState({showSwapButton:!1})},this.updateSyncState=e=>{if("reset"===e){this.setState({syncState:"NONE"});return}switch(this.state.syncState){case"NONE":"changed start"===e?this.setState({syncState:"CHANGED_START"}):"changed end"===e&&this.setState({syncState:"CHANGED_END"});break;case"CHANGED_START":"changed end"===e&&this.setState({syncState:"CHANGED_BOTH"});break;case"CHANGED_END":"changed start"===e&&this.setState({syncState:"CHANGED_BOTH"})}},this.componentDidUpdate=e=>{e.sceneGraphSelection!==this.props.sceneGraphSelection&&this.setState({syncState:"NONE",individualBorderOption:ep.om.ALL})}}render(){let e=(0,eN.yT)({...this.props,styleType:"FILL",inheritStyleKeyField:"inheritFillStyleKeyForStroke"}),r=(0,eN.A8)(e.inheritStyleKey),n=!(this.props.numSelectedByType&&(0,q.vx)(this.props.numSelectedByType,"TABLE"))&&(r||(0,Z._W)(this.props.strokePaints,[]).length>0||this.props.strokePaints===Z.oV),a=this.props.pickerShown?.id===this.settingsId,o=2===this.props.strokePanelTerminalPointCount&&this.props.strokePanelMode!==f.yTM.WASHI_TAPE,s=this.props.strokePanelMode!==f.yTM.WASHI_TAPE,l=this.supportsIndividualBorders();return i.createElement(O.k,{name:"stroke_panel"},i.createElement(ev.Zk,{"data-testid":"stroke-panel-id"},i.createElement(e5,{propertyList:this.props.strokePaints,selectedPropertyType:f.rrT.STROKE,onChange:this.onPaintsChange,onApplyStyle:this.onApplyStyle,currentSelectedProperty:this.props.currentSelectedProperty,pickerInStyleCreationShown:this.props.pickerInStyleCreationShown,recordingKey:C.Pt(this.props,"paintList"),onPickerShown:e2,variableScopes:eZ,...(0,eE.Rz)(this.props),...e,onToggleListLayout:this.toggleSettings,onToggleAdvancedSettings:n&&s?this.toggleSettings:void 0,advancedSettingsTooltip:(0,x.t)("fullscreen.properties_panel.fill.advanced_stroke_settings"),isPanelBodyCollapsedAtom:this.props.isPanelBodyCollapsedAtom}),n&&i.createElement(eG.t,{forwardedRef:this.forwardedRef,borderSharedWeight:this.props.borderSharedWeight,maxStrokeWeight:this.props.maxStrokeWeight,strokeAlign:this.props.strokeAlign,strokeCap:this.props.strokeCap,terminalCap:this.props.terminalCap,strokeJoin:this.props.strokeJoin,arcRadius:this.props.arcRadius,arcSweep:this.props.arcSweep,connectorLineStyle:this.props.connectorLineStyle,miterLimitAngle:this.props.miterLimitAngle,onNonPaintsChange:this.onNonPaintsChange,numSelectedByType:this.props.numSelectedByType,updateSyncState:this.updateSyncState,hideSwapButton:this.hideSwapButton,syncState:this.state.syncState,showSwapButton:this.state.showSwapButton,selectBorderSides:this.selectBorderSides,setIndividualBorderOption:this.setIndividualBorderOption,onBordersAlignmentChange:this.bordersAlignmentOnChange,onBidirectionalEndpointRowMouseEnter:this.onBidirectionalEndpointRowMouseEnter,onBidirectionalEndpointRowMouseLeave:this.onBidirectionalEndpointRowMouseLeave,showAdvancedStrokeSettings:s,showIndividualBorderControls:l,showEndPointControls:o,showStrokePicker:a,strokePanelMode:this.props.strokePanelMode,individualBorderOption:this.state.individualBorderOption,toggleSettings:this.toggleSettings,stopPropagation:this.stopPropagation,strokePanelTerminalPointCount:this.props.strokePanelTerminalPointCount,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,pickerShown:this.props.pickerShown,recordingKey:this.props.recordingKey,leftEndCap:this.props.leftEndCap,rightEndCap:this.props.rightEndCap,dashPattern:this.props.dashPattern,dashCap:this.props.dashCap})))}}e3.displayName="StrokePanel";let e6=i.memo(function({title:e,propertyList:r,onChange:n,onApplyStyle:a,addProperty:s,overrideAddPropertyTooltip:l,onReorder:c,renderProperty:d,onDeleteProperty:u,onToggleListLayout:m,styleType:p,inheritStyleKey:h,inheritStyleKeyField:_,inheritStyleID:g,stylePickerListLayout:E,removeAllProperties:y,library:b,defaultColor:I,openFile:T,stylePickerShown:v,currentSelectedProperty:S,selectedPropertyType:w,modalShown:A,sceneGraphSelection:N,selectedStyleProperties:L,recordingKey:O,onToggleAdvancedSettings:R,advancedSettingsTooltip:P,isPanelBodyCollapsedAtom:D}){let k=(0,o.wA)(),M=(0,ea.Xo)(),F=(0,en.Um)(),x=!!i.useContext(ef.zK),B=x?`style-modal-${(0,ek.qj)(_)}`:(0,ek.qj)(_),V=(0,eN.WH)(h,g,p),G=(0,eA.AH)(V?.key??null,(0,Z.E7)(g)),H=V?.isLocal?V:G?.status==="loaded"?G.data:null,W=function(){let e=(0,er.Rb)(),r=(0,er.Pt)(),n=e.length>0,a=Object.keys(r).length>0;return n||a}(),K=r&&(0,Z.hS)(r)&&(r.length>1||r.some(e=>!(0,Q.sb)(e.type)))?"createStyle":W?"createVariable":"createStyle",Y=i.useCallback(()=>M&&M.id===B?M:null,[M,B]),$=i.useCallback(({initialX:e,initialY:r})=>{Y()?k(U.XE()):k(U.u1({id:B,initialX:e,initialY:r}))},[k,B,Y]),j=i.useCallback(e=>{$(e)},[$]),z=i.useCallback((e,r)=>{n([e],r,f.WXh.ONLY_WHEN_NOT_DISABLED)},[n]),q=(0,et.kl)("numSelectedByType"),X=(0,eg.y5)(D||null),J=i.useCallback(()=>{s(),X()},[s,X]),ee=i.useMemo(()=>{if(q)return(0,eF.aZ)(w,q)},[w,q]);return i.createElement(i.Fragment,null,i.createElement(eI.Kx,{title:e,propertyList:r,onChange:n,addProperty:J,overrideAddPropertyTooltip:l,renderProperty:d,onDeleteProperty:u,onReorder:c,removeAllProperties:y,currentSelectedProperty:S,selectedPropertyType:w,recordingKey:O,dropdownShown:F,openFile:T,library:b,modalShown:A,pickerShown:M,sceneGraphSelection:N,selectedStyleProperties:L,stylePickerShown:v,inheritStyleKey:h,inheritStyleKeyField:_,inheritStyleID:g,stylePickerListLayout:E,styleType:p,onToggleListLayout:m,onPickerIconClick:j,dispatch:k,onToggleAdvancedSettings:R,advancedSettingsTooltip:P,isPanelBodyCollapsedAtom:D}),(()=>{let e=Y();if(!e)return;let n=r&&(0,Z.hS)(r)&&1===r.length?r[0]:{type:"SOLID",color:{r:1,g:1,b:1,a:1},opacity:1};return i.createElement(eE.ku,{paint:n,paintId:(0,eN.OS)(_),selectedStyle:H,inheritStyleKeyField:_,onChange:z,onApplyStyle:x?void 0:a,pickerShown:e,defaultColor:I,dropdownShown:F,initialView:"library",supportedViews:["library"],initialCreationModalView:K,recordingKey:C.Pt(O,"paintPicker"),variableScopes:ee,hasVisiblePaintBelow:!1,isInStyleModal:x})})())});function e5(e){let r=(0,i.useContext)(ef.zK),n=(0,o.wA)(),a=null!=r,s=(0,i.useCallback)(()=>a,[a]),l=(0,eN.dd)(e.selectedStyleProperties),c=(0,i.useCallback)(()=>{switch(e.selectedPropertyType){case f.rrT.STROKE:l||((0,eu.a2)("strokePaints"),J.Y5.triggerActionInUserEditScope("add-stroke-to-selection"));break;case f.rrT.FILL:l?J.Y5.triggerActionInUserEditScope("add-fill-to-style-selection"):J.Y5.triggerActionInUserEditScope("add-fill-to-selection"),(0,eu.a2)("fillPaints")}},[e.selectedPropertyType,l]),{onChange:d,propertyList:u,stylePickerShown:m,inheritStyleKeyField:p,selectedPropertyType:h,pickerInStyleCreationShown:_,variableScopes:g,pickerShown:E,onApplyStyle:y,onPickerShown:b,recordingKey:I}=e,T=(0,i.useCallback)(e=>{s()||n(U.XE()),n(U.Uv());let r=(0,Z._W)(u,[]).filter((r,n)=>n!==e);(0,em.f)(f.VD3.IGNORE,f.e0R.UNKNOWN,()=>{d(r)}),J.Y5.deselectProperty()},[s,d,n,u]),v=(0,X.GS)(),S=(0,i.useCallback)((e,r,n)=>{d(e,r,n),(0,Z._W)(u,[]).length!==e.length&&Q.Tm.clearCache()},[d,u]),w=(0,i.useCallback)(()=>{Q.Tm.clearCache()},[]),A=(0,i.useCallback)(()=>{n(U.Y({isListLayout:!e.stylePickerListLayout})),n(W.sw())},[n,e.stylePickerListLayout]),N=(0,eE.xm)(e),L=(0,i.useCallback)((e,r,n,a,o,l,c,d,f)=>{let S=s()?"preview-paint":"paint",w=Q.Tm.getId(r,h,S),A=(0,Z._W)(u,[]).slice(0,r).some(e=>e.visible);return i.createElement(e8,{key:`paint-${r}`,id:w,inheritStyleKeyField:p,index:r,singletonRow:(0,Z._W)(u,[]).length<=1,selectedPropertyType:h,paint:e,selected:m.isShown?E?.id===w:n,isDragging:a,hasFocus:o,stylePickerShown:m,onPickerShown:b,pickerInStyleCreationShown:_,onChange:l,onMouseDown:c,onMouseMove:d,onMouseUp:f,onRemovePaint:()=>T(r),onApplyStyle:y,recordingKey:C.Pt(I,r),variableScopes:g,isUI3:v,hasVisiblePaintBelow:A,...N})},[p,s,v,y,b,_,E?.id,u,I,T,h,m,g,N]),O=(()=>{if(!v)return;let r=(0,Z._W)(e.propertyList,[]);switch(e.selectedPropertyType){case f.rrT.STROKE:return 0===r.length?(0,x.t)("fullscreen.properties_panel.section_stroke.tooltip_addStroke"):(0,x.t)("fullscreen.properties_panel.section_stroke.tooltip_addStrokeFill");case f.rrT.FILL:return(0,x.t)("fullscreen.properties_panel.section_fill.tooltip_addFill");default:return}})();return i.createElement(e6,{title:(()=>{switch(e.selectedPropertyType){case f.rrT.STROKE:return(0,x.t)("fullscreen.properties_panel.fill.stroke");case f.rrT.FILL:return(0,x.t)("fullscreen.properties_panel.fill.fill");default:return""}})(),propertyList:e.propertyList,onChange:S,currentSelectedProperty:e.currentSelectedProperty,selectedPropertyType:e.selectedPropertyType,addProperty:c,overrideAddPropertyTooltip:O,renderProperty:L,pickerShown:e.pickerShown,onReorder:w,recordingKey:e.recordingKey,...(0,eN.yT)(e),onToggleListLayout:A,library:e.library,defaultColor:e.defaultColor,onApplyStyle:e.onApplyStyle,onToggleAdvancedSettings:v?e.onToggleAdvancedSettings:void 0,advancedSettingsTooltip:v?e.advancedSettingsTooltip:void 0,isPanelBodyCollapsedAtom:e.isPanelBodyCollapsedAtom})}class e8 extends i.PureComponent{constructor(){super(...arguments),this.state={isDragHover:!1},this.context=null,this.row=i.createRef(),this.pickerShownInStyleModal=()=>!this.isInStyleModal()&&!!this.props.pickerInStyleCreationShown,this.handleOpenImagePicker=e=>{this.props.selectedPropertyType!==e.propertyType||this.props.index!==e.index||this.pickerShown()||this.pickerShownInStyleModal()||this.showPicker()},this.handleCloseImagePicker=e=>{this.props.selectedPropertyType===e.propertyType&&this.props.index===e.index&&this.pickerShown()&&this.hidePicker()},this.onPaintPickerChange=(e,r)=>{e.visible=!0,this.props.onChange(e,r)},this.onVisibleChange=e=>{this.props.onChange({...this.props.paint,visible:e})},this.pickerShown=()=>this.isInStyleModal()?this.props.pickerInStyleCreationShown?.id===this.props.id?this.props.pickerInStyleCreationShown:null:this.props.pickerShown?.id===this.props.id?this.props.pickerShown:null,this.showPicker=()=>{if(!this.row.current)return;let e=(0,ec.cn)(this.row.current);this.props.onPickerShown?.(),J.Y5.updateAppModel({currentSelectedProperty:{type:this.props.selectedPropertyType,indices:[this.props.index]}}),this.isInStyleModal()?this.props.dispatch((0,G.D)({id:this.props.id,initialX:e.x,initialY:e.y})):this.props.dispatch(U.u1({id:this.props.id,initialX:e.x,initialY:e.y,data:{isInStyleModal:this.isInStyleModal()}})),this.isInStyleModal()||(this.props.dispatch(W.sw()),this.props.dispatch(U.Uv()))},this.hidePicker=()=>{this.isInStyleModal()?this.props.dispatch((0,G.w)()):this.props.dispatch(U.XE()),J.Y5.deselectProperty()},this.togglePicker=()=>{this.pickerShown()?this.hidePicker():this.showPicker()},this.isDragTarget=()=>!!(0,Z.E7)(this.props.paint),this.onDragEnter=()=>{this.setState({isDragHover:!0})},this.onDragLeave=()=>{this.setState({isDragHover:!1})},this.onDrop=e=>{this.setState({...this.state,isDragHover:!1});let r=(0,Z.E7)(this.props.paint);if(!r)return;let n=J.Y5.fileArrayToString;if(n){let a=n(Array.from(e.files));f.glU.dropImageOnPaintThumbnail(r.blendMode||"NORMAL",r.opacity||1,a,this.props.index,this.props.selectedPropertyType)}},this.dropImageOnPaintThumbnail=(e,r,n)=>{let a=J.Y5.fileArrayToString;if(a){let i=a(Array.from(n.files));f.glU.dropImageOnPaintThumbnail(e,r,i,this.props.index,this.props.selectedPropertyType)}},this.updateStillImageAndSelectionPropertiesForGIF=(e,r)=>E.l7.user("update-gif-image",()=>(0,ee.SK)(e,r,this.props.selectedPropertyType)),this.onDetachVariableClick=()=>{(0,em.f)(f.VD3.VARIABLE_DETACH,f.e0R.DIRECT,()=>{let e=(0,eR.y)(this.props.paint);this.onPaintPickerChange(e,eo.zk.YES)})}}isInStyleModal(){return null!=this.context}componentDidMount(){this.isInStyleModal()||(J.Y5.fromFullscreen.on("openImagePicker",this.handleOpenImagePicker),J.Y5.fromFullscreen.on("closeImagePicker",this.handleCloseImagePicker))}componentWillUnmount(){this.isInStyleModal()||(J.Y5.fromFullscreen.removeListener("openImagePicker",this.handleOpenImagePicker),J.Y5.fromFullscreen.removeListener("closeImagePicker",this.handleCloseImagePicker)),this.isInStyleModal()&&this.pickerShown()&&this.hidePicker()}hasBoundColorVariable(){return!!this.props.paint.colorVar}render(){let e=this.renderButtons();return i.createElement("div",null,i.createElement(R.Y,{isDragTarget:this.isDragTarget,onTargetDragEnter:this.onDragEnter,onTargetDragLeave:this.onDragLeave,onTargetDrop:this.onDrop,recordingKey:C.Pt(this.props,"dropTarget")},i.createElement(L.D8,{recordingKey:C.Pt(this.props,"dragTarget")},i.createElement(e9,{ref:this.row,id:this.props.id,paint:this.props.paint,firstIconButton:e.length>0?e[0]:null,secondIconButton:e.length>1?e[1]:null,shownPickerMatchesThisPaint:!!this.pickerShown(),togglePicker:this.togglePicker,isDragHover:this.state.isDragHover,onChange:this.props.onChange,selected:this.props.selected,singletonRow:this.props.singletonRow,isDragging:this.props.isDragging,hasFocus:this.props.hasFocus,noBorderOnFocus:this.props.noBorderOnFocus,recordingKey:this.props.recordingKey,onMouseDown:this.props.onMouseDown,onMouseMove:this.props.onMouseMove,onMouseUp:this.props.onMouseUp,isUI3:this.props.isUI3,...(0,eE.Rz)(this.props)}))),this.pickerShown()&&i.createElement(eE.ku,{paint:this.props.paint,paintId:this.props.id,selectedStyle:null,inheritStyleKeyField:this.props.inheritStyleKeyField,dropImageOnPaintThumbnail:this.dropImageOnPaintThumbnail,updateStillImageAndSelectionPropertiesForGIF:this.updateStillImageAndSelectionPropertiesForGIF,onChange:this.onPaintPickerChange,onApplyStyle:this.isInStyleModal()?void 0:this.props.onApplyStyle,onClose:this.hidePicker,recordingKey:C.Pt(this.props,"paintPicker"),defaultColor:this.props.defaultColor,dropdownShown:this.props.dropdownShown,pickerShown:this.pickerShown(),variableScopes:this.props.variableScopes,hasVisiblePaintBelow:this.props.hasVisiblePaintBelow,isInStyleModal:this.isInStyleModal()}))}renderButtons(){let e=[],r=this.props.isUI3?this.props.selected&&this.props.hasFocus:void 0;if(this.props.hideVisibilityToggle||this.hasBoundColorVariable()||e.push({button:i.createElement(eO.B,{visible:this.props.paint.visible,onChange:this.onVisibleChange,recordingKey:C.Pt(this.props,"visibleToggle"),selected:r}),opensPicker:!1,key:"visibleToggle"}),this.hasBoundColorVariable()&&e.push({button:i.createElement("span",{className:eK.zm},i.createElement(d.T,{selected:r},i.createElement(u.K,{"aria-label":(0,x.t)("fullscreen.properties_panel.fill.detach_variable"),onClick:this.onDetachVariableClick,recordingKey:C.Pt(this.props,"paint","detachVariableButton"),htmlAttributes:{onMouseDown:z.dG,"data-tooltip":(0,x.t)("fullscreen.properties_panel.fill.detach_variable"),"data-tooltip-type":el.Ib.TEXT}},i.createElement(k.U,{svg:eY.A},i.createElement(m.U,null))))),opensPicker:!1,key:"detatchVariableButton"}),this.props.onRemovePaint){let n=this.props.isUI3?{"data-tooltip-type":el.Ib.TEXT,"data-tooltip":(0,x.t)("fullscreen.properties_panel.fill.remove")}:{};e.push({button:i.createElement(d.T,{selected:r},i.createElement(u.K,{recordingKey:C.Pt(this.props,"removeButton"),onClick:this.props.onRemovePaint,"aria-label":(0,x.t)("fullscreen.properties_panel.fill.remove"),htmlAttributes:{...n,onMouseDown:z.dG}},i.createElement(k.U,{svg:e$.A,fallbackSvg:ej.A},i.createElement(p.O,null)))),opensPicker:!1,key:"removeButton"})}return e}}function e4({children:e}){return i.createElement("div",{onFocus:e=>e.stopPropagation()},e)}e8.displayName="PaintListItem",e8.contextType=ef.zK;let e9=i.forwardRef((e,r)=>{let n=r=>{r.stopPropagation(),e.togglePicker()},a=()=>{e.onFocus?.(),e.shownPickerMatchesThisPaint&&!o()&&e.togglePicker()},o=()=>{let r=e.paint.colorVar?.value?.alias;return r?I.dI(r):null};(0,i.useEffect)(()=>()=>{e.onInputBlur&&e.onInputBlur()},[]);let s=o(),l=e.firstIconButton?i.createElement(te,{opensPicker:e.firstIconButton.opensPicker,componentKey:e.firstIconButton.key},e.firstIconButton.button):null,c=e.secondIconButton?i.createElement(te,{opensPicker:e.secondIconButton.opensPicker,componentKey:e.secondIconButton.key},e.secondIconButton.button):null,d=e.selected&&!e.hasFocus,u=e.fitToSize?eK.Cv:eK.BT,m=e.fitToSize?eK.np:eK.wM,p=i.createElement(i.Fragment,null,i.createElement("div",{className:v()(s?u:m,{[eK.NI]:e.selected,[eK.L3]:d}),onMouseDown:n,onMouseDownCapture:r=>{if(r.shiftKey||2&r.buttons){e.togglePicker(),r.preventDefault(),r.stopPropagation();return}},onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},"data-onboarding-key":(0,ei.Lh)(ei.D8.PAINT_PANEL_ROW,e.id)},s?i.createElement(ex.y,{isSelected:e.selected&&e.hasFocus},i.createElement(tr,{selected:e.selected,hasFocus:e.hasFocus,variableId:s,paint:e.paint,onMouseDown:n,recordingKey:e.recordingKey})):i.createElement(e7,{clearPaintFromCache:()=>Q.Tm.clearCache(e.id),onChange:e.onChange,onInputBlur:e.onInputBlur,onInputFocus:e.onInputFocus,onScrubBegin:e.onScrubBegin,onScrubEnd:e.onScrubEnd,paint:e.paint,allowAutoAndMixed:e.allowAutoAndMixed,disableOpacity:e.disableOpacity,togglePicker:e.togglePicker,chitOverride:e.chitOverride,recordingKey:e.recordingKey}))),h=i.createElement("div",{className:eK.RK,"data-onboarding-key":(0,ei.Lh)(ei.D8.PAINT_PANEL_ROW,e.id)},p,i.createElement("div",{className:eK.$r},l,c));if(e.preventDragging)return e.isUI3?i.createElement(eL.pG,{ref:r,appendedClassName:v()(eK.p,{[eK.Tp]:e.isDragHover,[eW.CZ]:e.selected,[eW.kR]:d}),input:p,leftIcon:l,rightIcon:c,onFocus:a,recordingKey:e.recordingKey,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp}):i.createElement(ev.fI,{forwardedRef:r,className:e.isDragHover?`${eK.Tp} ${eK.p}`:eK.p,selected:e.selected,selectedSecondary:e.selected&&!e.hasFocus,onFocus:a,recordingKey:e.recordingKey,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp},h);if(e.isUI3){let n=v()(eK.p,{[eK.Tp]:e.isDragHover,[eW.CZ]:e.selected,[eW.kR]:e.selected&&!e.hasFocus});return i.createElement(eL.Y9,{singletonRow:e.singletonRow,selected:e.selected,selectedSecondary:e.selected&&!e.hasFocus,dragging:e.isDragging,onFocus:a,recordingKey:e.recordingKey,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp,ref:r},null===l||null===c?i.createElement(eL.DE,{appendedClassName:n,input:p,icon:l||c,label:null}):i.createElement(eL.pG,{appendedClassName:n,input:p,leftIcon:l,rightIcon:c}))}return i.createElement(eb.e,{forwardedRef:r,className:e.isDragHover?`${eK.Tp} ${eK.p}`:eK.p,shiftGrabberOnInputFocus:!0,selected:e.selected,selectedSecondary:e.selected&&!e.hasFocus,singletonRow:e.singletonRow,dragging:e.isDragging,onFocus:a,recordingKey:e.recordingKey,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp},h)});function e7(e){let r=(0,eC.R)(),n=r=>{r.stopPropagation(),e.togglePicker()},a=(r,n=!0)=>{r.visible=!0,e.onChange(r),n&&e.clearPaintFromCache?.()},l=v()({[eK.EC]:!e.paint.visible||e.disableOpacity}),c=(0,o.wA)(),d=e.chitOverride?e.chitOverride:{paint:e.paint};return i.createElement(i.Fragment,null,i.createElement(e4,null,i.createElement(e_.J,{...d,onMouseDown:n,recordingKey:C.Pt(e,"chit"),className:eK.x7})),i.createElement(tt,{...e,isUI3:r,onFocus:e.onInputFocus,onBlur:e.onInputBlur,visible:e.paint.visible,onTypeMouseDown:n,onMouseDown:z.dG,onColorChange:r=>{let n={...e.paint,color:r};(0,s.xN)(r.a,e.paint.opacity??1)||(n.opacity=r.a,n.visible=!0),a(n)},recordingKey:C.Pt(e,"value"),noBorderOnFocus:!0}),(!e.allowAutoAndMixed||!(0,Z.SX)(e.paint.color)&&!(0,Z.gl)(e.paint.color))&&i.createElement(ed.Pd,{inputClassName:l,className:eK.n1,onFocus:e.onInputFocus,onBlur:e.onInputBlur,onScrubBegin:e.onScrubBegin,onScrubEnd:e.onScrubEnd,value:e.paint.opacity,onValueChange:(r,n)=>{e.onChange({...e.paint,opacity:r,visible:!0},n)},dispatch:c,noLeftBorder:!0,noBorderOnFocus:!0,onMouseDown:z.dG,recordingKey:C.Pt(e,"opacity")}))}function te(e){return e.opensPicker?i.createElement(e4,{key:e.componentKey},e.children):i.createElement(i.Fragment,{key:e.componentKey},e.children)}function tt(e){let r=(0,i.useMemo)(()=>e.allowAutoAndMixed?new $.C1({parseAlpha:!0}):new $.rC({parseAlpha:!0}),[e.allowAutoAndMixed]),n=(0,i.useMemo)(()=>new j.ZB(()=>e.paint),[e.paint]),a=(0,i.useMemo)(()=>e.allowAutoAndMixed&&((0,Z.SX)(e.paint.color)||(0,Z.gl)(e.paint.color))?e.paint.color:e.paint.color&&{...e.paint.color,a:e.paint.opacity??1},[e.allowAutoAndMixed,e.paint]),o=C.rf(e.recordingKey,"mousedown",r=>{e.onMouseDown?.(r),e.onTypeMouseDown?.(r)});return"SOLID"===e.paint.type?i.createElement(eT.AN,{forwardedRef:e.focusableRef,className:v()(e.visible?eK.EX:eK.wh,e.appendedColorInputClassname),onFocus:e.onFocus,onBlur:e.onBlur,noLeftBorder:!1,squareRightBorder:!1,formatter:r,property:a,onChange:e.onColorChange,onMouseDown:e.onMouseDown,recordingKey:C.Pt(e,"colorInput"),noBorderOnFocus:e.noBorderOnFocus}):i.createElement("div",{className:e.visible?eK.cD:eK.GI,onMouseDown:o},n.format(e.paint.type))}function tr({variableId:e,paint:r,onMouseDown:n,recordingKey:a,selected:o,hasFocus:s}){let l=(0,er.u)(e),c=l?.name??"",d=!!l&&(0,eD.eF)(l),{version:u}=(0,g.DP)(),m=d?null:i.createElement(e4,null,i.createElement(e_.J,{paint:r,onMouseDown:n,recordingKey:C.Pt(a,"chit"),className:"ui3"===u?void 0:eK.x7})),p=r.color&&r.opacity?`${(0,S.colorToHex)(r.color)}, ${(100*r.opacity).toLocaleString("en",{maximumFractionDigits:2})}%`:void 0;return"ui3"===u?i.createElement(tn,{selected:o,hasFocus:s,styleIcon:m||i.createElement("div",{"data-tooltip-type":el.Ib.TEXT,"data-tooltip":(0,x.t)("variables.variable_was_deleted")},i.createElement(D.B,{className:eK.Bx,svg:eJ.A})),styleName:c,styleDescription:l?.description,styleValue:p,recordingKey:C.Pt(a,"styleButton"),onMouseDown:n}):i.createElement(i.Fragment,null,m,i.createElement("div",{className:eK.eV},i.createElement(eM.wG,{isDeleted:d,text:c,variableDescription:l?.description,variableValue:p})))}function tn(e){let{styleIcon:r,styleName:n,styleDescription:a,styleValue:o,selected:s,hasFocus:l,...c}=e,d=(0,eP.Y)(n,a,o);return i.createElement(L.GG,{...c,className:v()(eH.W1,{[eH.C_]:s&&!l,[eH.wH]:s&&l})},i.createElement("div",{className:eH.hg},r),i.createElement("div",{className:eH.p3},i.createElement(M.G,{text:n,showTooltip:F.i.ALWAYS,getTooltipText:d})))}e9.displayName="Paint",(e=>{class r extends i.PureComponent{constructor(){super(...arguments),this.state={hasEverHovered:!1},this.row=i.createRef(),this.paintPickerInitialView=void 0,this.componentWillUnmount=()=>{this.props.dispatch(H.oI({paintId:void 0,originalPaint:void 0,updatedPaintFromDropper:void 0}))},this.pickerShownIsStylePicker=()=>this.props.stylePickerShown.isShown&&this.props.stylePickerShown.id===this.stylePickerID(),this.pickerShown=()=>this.props.pickerShown?.id===this.pickerID(),this.showPicker=()=>{if(!this.row.current)return;let e=(0,ec.cn)(this.row.current);this.props.dispatch(U.u1({id:this.pickerID(),initialX:e.x,initialY:e.y})),this.props.dispatch(W.sw()),this.props.dispatch(U.Uv()),this.props.dispatch(H.oI({paintId:this.props.id,originalPaint:this.props.paint,updatedPaintFromDropper:void 0}))},this.hidePicker=()=>{this.props.dispatch(U.XE()),J.Y5.deselectProperty()},this.togglePicker=()=>{this.pickerShown()?this.hidePicker():this.showPicker()},this.toggleStylePicker=()=>{this.pickerShownIsStylePicker()?this.hidePicker():this.row.current&&this.props.showPicker(this.stylePickerID(),this.row.current)},this.toggleListLayout=()=>{this.props.setPickerListLayout(!this.props.stylePickerListLayout)},this.onCreateStyle=()=>{let e=(0,y.GP)(this.props.paint),r=f.Osy.paintDataNodesInPaint(e);this.props.dispatch(V.to({type:eU.t,data:{originalPaint:this.props.paint,paintDataNodesInPaint:r,conflictNodesCount:this.props.conflictNodesCount,type:{kind:"create"}}})),this.hidePicker()},this.onApplyStyle=e=>{let r=f.Osy.paintDataNodesInPaint((0,y.GP)(this.props.paint));this.props.dispatch(B.nh({style:e,callback:e=>{if(r.length>1)this.props.dispatch(V.to({type:eU.t,data:{originalPaint:this.props.paint,paintDataNodesInPaint:r,conflictNodesCount:this.props.conflictNodesCount,type:{kind:"apply",styleGuid:e}}}));else{let r=(0,y.GP)(this.props.paint);E.l7.user("apply-style",()=>f.Osy.applyStyleToPaintDatas(r,e)),(0,w.sx)("Apply Style to Selection Paint ",{count:this.props.uniqueNodesCount})}}})),this.hidePicker()},this.debouncedTrackPaintChangeFromPicker=(0,A.s)(e=>{(0,w.sx)("Edit Selection Paint",{fileKey:this.props.openFile?.key||"",count:this.props.count})}),this.onChangeForPaint=(e,r)=>{let n=r==eo.zk.YES,a=(0,ey.U2)(e)||e.colorVar?f.Osy.resolvePaintWithVariable((0,y.GP)(this.props.paint),(0,y.GP)(e)):"",i=e;if(a){let r=(0,es.K)(a);i=r?.paint||e}E.l7.user("change-paint",()=>f.Osy.updatePaint((0,y.GP)(this.props.paint),(0,y.GP)(i),n,(0,y.GP)(this.currentPaintValue()))),this.setState({paintValueInPicker:i}),this.props.dispatch(H.oI({paintId:this.props.id,originalPaint:this.props.paint,updatedPaintFromDropper:void 0}))},this.onChangeForPaintPicker=(e,r)=>{this.onChangeForPaint(e,r),this.debouncedTrackPaintChangeFromPicker(e)},this.debouncedOnChangeForPaintPicker=(0,A.s)(this.onChangeForPaintPicker),this.onDetachVariableClick=()=>{(0,em.f)(f.VD3.VARIABLE_DETACH,f.e0R.DIRECT,()=>{let e=(0,eR.y)(this.props.paint);this.onChangeForPaint(e,eo.zk.YES)})},this.currentPaintValue=()=>this.props.paintValueFromEyeDropper?this.props.paintValueFromEyeDropper:this.state.paintValueInPicker?this.state.paintValueInPicker:this.props.paint,this.onMouseOver=()=>{this.setState({hasEverHovered:!0})},this.onPaintClick=()=>{this.paintPickerInitialView=void 0,this.togglePicker()},this.onStyleClick=e=>{e.stopPropagation(),this.paintPickerInitialView="library",this.togglePicker()},this.onSelectSamePaintMouseDown=()=>{let e=(0,y.GP)(this.props.paint);f.Osy.selectOnlySamePaint(e),(0,w.sx)("Select Selection Paint",{count:this.props.uniqueNodesCount})},this.onFocus=()=>{this.pickerShownIsStylePicker()&&this.toggleStylePicker()},this.boundColorVariableId=()=>{let e=this.props.paint.colorVar?.value?.alias;return e?I.dI(e):null}}pickerID(){return`${K.F7}-${this.props.id}`}stylePickerID(){return`${K.yJ}-${this.props.id}`}componentDidMount(){this.props.openPickerOnInitialRender&&this.showPicker()}componentDidUpdate(e){this.props.paintValueFromEyeDropper&&e.paintValueFromEyeDropper!==this.props.paintValueFromEyeDropper&&this.setState({paintValueInPicker:this.props.paintValueFromEyeDropper})}render(){let e=null;this.pickerShownIsStylePicker()&&this.props.stylePickerShown.isShown&&(e=this.props.stylePickerShown);let r=this.props.debounce?this.debouncedOnChangeForPaintPicker:this.onChangeForPaintPicker,n=this.renderButtons();return i.createElement("div",{onMouseOver:this.onMouseOver},i.createElement(e9,{ref:this.row,id:this.props.id,paint:this.currentPaintValue(),firstIconButton:n.length>0?n[0]:null,secondIconButton:n.length>1?n[1]:null,count:this.props.count,uniqueNodesCount:this.props.uniqueNodesCount,recordingKey:C.Pt(this.props,"paint"),onFocus:this.onFocus,onChange:this.onChangeForPaint,onInputFocus:this.props.onInputFocus,onInputBlur:this.props.onInputBlur,onScrubBegin:this.props.onScrubBegin,onScrubEnd:this.props.onScrubEnd,selected:this.pickerShown()||this.pickerShownIsStylePicker(),singletonRow:!1,isDragging:!1,hasFocus:!1,shownPickerMatchesThisPaint:this.pickerShown(),togglePicker:this.onPaintClick,isDragHover:!1,preventDragging:!0,isUI3:this.props.isUI3,focusableRef:this.props.focusableRef,...(0,eE.Rz)(this.props)}),this.pickerShown()&&this.props.pickerShown&&(this.props.customColorPicker?i.createElement(this.props.customColorPicker,{paint:this.currentPaintValue(),onChange:r,onClose:this.hidePicker,pickerShown:this.props.pickerShown,hideCustomColorPickerFillTypeToggle:this.props.hideCustomColorPickerFillTypeToggle??!1}):i.createElement(eE.ku,{paint:this.currentPaintValue(),paintId:this.props.id,selectedStyle:null,inheritStyleKeyField:"inheritFillStyleKey",onChange:r,onApplyStyle:this.onApplyStyle,keepOpenOnItemSelect:!0,disableImagePaints:!0,recordingKey:C.Pt(this.props,"paintPicker"),defaultColor:this.props.defaultColor,dropdownShown:this.props.dropdownShown,pickerShown:this.props.pickerShown,initialView:this.paintPickerInitialView,initialStyleCreationPaint:this.currentPaintValue(),variableScopes:this.props.variableScopes,hasVisiblePaintBelow:!1,isInStyleModal:!1})),this.state.hasEverHovered&&i.createElement(eS.M,{inheritStyleKey:null,inheritStyleID:null,styleType:"FILL"}),e&&i.createElement(eS.U,{picker:e,onCreateStyle:this.onCreateStyle,onApplyStyle:this.onApplyStyle,recordingKey:C.Pt(this.props,"stylePicker"),styleType:"FILL",onToggleListLayout:this.toggleListLayout,stylePickerListLayout:this.props.stylePickerListLayout,inheritStyleKey:null,inheritStyleID:null}))}renderButtons(){let e=[];if(this.boundColorVariableId())e.push({button:i.createElement("span",{className:eK.zm},i.createElement(u.K,{"aria-label":(0,x.t)("fullscreen.properties_panel.fill.detach_variable"),onClick:this.onDetachVariableClick,recordingKey:C.Pt(this.props,"paint","detachVariableButton"),htmlAttributes:{onMouseDown:z.dG,"data-tooltip":(0,x.t)("fullscreen.properties_panel.fill.detach_variable"),"data-tooltip-type":el.Ib.TEXT}},i.createElement(k.U,{svg:eY.A},i.createElement(m.U,null)))),opensPicker:!1,key:"detatchVariableButton"});else{let r=(0,eV.f)(this.props.openFile?.editorType??null);e.push({button:i.createElement("span",{className:eK.zm},i.createElement(u.K,{"aria-label":r?(0,x.t)("slides.properties_panel.color_picker.theme_colors"):(0,Y.A)("style"),onClick:this.onStyleClick,recordingKey:C.Pt(this.props,"paint","styleButton"),htmlAttributes:{"data-tooltip":r?(0,x.t)("slides.properties_panel.color_picker.theme_colors"):"style","data-tooltip-type":r?el.Ib.TEXT:el.Ib.LOOKUP}},i.createElement(k.U,{svg:ez.A,fallbackSvg:eq.A},i.createElement(h.y,null)))),opensPicker:!0,key:"styleButton"})}return null==this.props.uniqueNodesCount||this.props.hideSelectSamePaintButton||e.push({button:i.createElement("span",{className:eK.zm},i.createElement(u.K,{onClick:this.onSelectSamePaintMouseDown,"aria-label":(0,x.t)("fullscreen.properties_panel.select_item_using_this_color",{numItems:this.props.uniqueNodesCount}),recordingKey:C.Pt(this.props,"paint","selectSamePaintButton"),htmlAttributes:{"data-tooltip":(0,x.t)("fullscreen.properties_panel.select_item_using_this_color",{numItems:this.props.uniqueNodesCount}),"data-tooltip-type":el.Ib.TEXT}},i.createElement(k.U,{svg:eX.A},i.createElement(_.A,null)))),opensPicker:!0,key:"selectSamePaintButton"}),e}}r.displayName="SelectionPaintItem",e.SelectionPaintItem=r,e.ConnectedSelectionPaintItem=(0,o.Ng)((e,r)=>({pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,paintValueFromEyeDropper:e.currentSelectionPaintInPicker.paintId===r.id?e.currentSelectionPaintInPicker.updatedPaintFromDropper:void 0,stylePickerListLayout:e.stylePickerListLayout}),e=>({showPicker:(r,n)=>{let{top:a,left:i}=n.getBoundingClientRect(),[o,s]=[i-ew.N2,a];e(U.bS({id:r,initialX:o,initialY:s,modal:!0})),e(W.sw()),e(U.XE())},setPickerListLayout:r=>{e(U.Y({isListLayout:r}))}}))(r)})(a||(a={})),a.ConnectedSelectionPaintItem},759096:(e,r,n)=>{n.d(r,{w5:()=>el,B8:()=>es,tC:()=>ec,gc:()=>ed});var a,i,o,s,l=n(411855),c=n(188507),d=n(67151),u=n(243742),m=n(700021),p=n(299321),h=n(91408),_=n(794272);n(966712);var g=n(374626),f=n(886653),E=n(153234),y=n(617453),b=n(425805),I=n(848661),T=n(618056),v=n(869156),S=n(100197);n(316081),n(284321);var w=n(234945),A=n(224690),N=n(666258),C=n(168289),L=n(238093),O=n(609572),R=n(564092),P=n(184027),D=n(447591),k=n(733948),M=n(750693);n(109388);var F=n(275556),x=n(358145),U=n(46481),B=n(939863),V=n(226055),G=n(356390),H=n(146394);n(555074);var W=n(29680),K=n(7959),Y=n(343559),$=n(939791),j=n(822042);n(244614),n(776621);var z=n(149545);n(498606),n(218973),n(784940),n(252957),n(69912);let q={smallNudgeAmount:.01,bigNudgeAmount:.1,scrubMultiplier:1,wheelMultiplier:1,postScrubMultiplier:.01,postBigNudgeAmount:1,postWheelMultiplier:.1,resolution:.01};n(889012),n(939683);var X=n(55021),J=n(343887),Z=n(139689),Q=n(379119);let ee=n(630834);function et(){G.Y5.triggerAction("set-tool-default")}l.memo(function({recordingKey:e}){let r=(0,V.GS)(),n=(0,S.J2)(p.yFm.state().scale),a=(0,S.J2)(p.yFm.state().disabled),i=F.nc.user("change-scale",e=>{p.yFm.setScale(e)}),o=(0,S.J2)(p.yFm.state().width);o="number"==typeof o?o:I.oV;let s=F.nc.user("change-scale-width",e=>{p.yFm.setWidth(e)}),d=(0,S.J2)(p.yFm.state().height);d="number"==typeof d?d:I.oV;let u=F.nc.user("change-scale-height",e=>{p.yFm.setHeight(e)}),m=(0,S.J2)(p.yFm.state().anchorPoint),h=F.nc.user("change-anchor-point",e=>{p.yFm.setAnchorPoint(e)}),{handleKeyDown:_,heightInputRef:g,scaleInputRef:f,widthInputRef:E}=function(){let e=(0,c.d4)(e=>e.mirror.sceneGraphSelection),[r,n]=l.useState(!1),a=l.useRef(null),i=l.useRef(null),o=l.useRef(null),s=(0,W.p8)("currentTool"),d=(0,x.ZC)(s),u=(0,W.p8)("activeUserAction"),[m,h]=l.useState(!1);l.useEffect(()=>{let r=s===p.NLJ.SCALE&&d!==p.NLJ.SCALE;Object.keys(e).length>0&&r&&[p.QOV.DEFAULT,p.QOV.SELECTING_TEXT].includes(u)&&a.current&&(a.current.focus(),a.current.select())},[u,s,d,e]),l.useEffect(()=>{let e=()=>{a.current&&(n(!1),h(!1),a.current.focus(),a.current.select())};return H.h.subscribeScaleToolActivated(e),()=>{H.h.unsubscribeScaleToolActivated(e)}},[]),l.useEffect(()=>{let e=e=>{e.target!==a.current&&e.target!==i.current&&e.target!==o.current&&n(!0)};return document.addEventListener("focusin",e),()=>{document.removeEventListener("focusin",e)}},[]);let _=l.useCallback(e=>{let n="Escape"===e.key,a="Enter"===e.key;!r&&(a||n)&&h(!0)},[r]);return l.useEffect(()=>{m&&et()},[m]),{handleKeyDown:_,scaleInputRef:a,widthInputRef:i,heightInputRef:o}}(),y=l.createElement(K.$4,null,l.createElement(J.K,{onClick:()=>{et()},"aria-label":(0,B.t)("fullscreen.scale_panel.close")},l.createElement(U.U,{svg:ee,fallbackSvg:ee},l.createElement(Z.A,null)))),b=l.createElement(j.V,{restoreFocusElements:[f.current,E.current,g.current].filter(Boolean),anchorPoint:m,onAnchorPointChange:h,disabled:a}),T=r?Q.f4:Q.G4,v=l.createElement(T,{scale:n,width:o,height:d,onWidthChange:s,onHeightChange:u,onScaleChange:i,onKeyDown:_,widthInputRef:E,heightInputRef:g,disabled:a,recordingKey:e}),w=l.createElement(z.g,{scale:n,onScaleChange:i,disabled:a,onInputKeyDown:_,recordingKey:e,ref:f});return r?l.createElement(K.Zk,{"data-testid":`scale_panel.state.${a?"disabled":"enabled"}`,className:X.$1},l.createElement(Y.r,{titleTx:(0,B.tx)("fullscreen.scale_panel.scale"),icon:y}),v,l.createElement($.sY,{leftLabel:(0,B.t)("fullscreen.scale_panel.scale"),rightLabel:(0,B.t)("fullscreen.scale_panel.anchor_point"),topLeftInput:w,bottomLeftInput:null,rightInput:b,topIcon:null,bottomIcon:null})):l.createElement(K.Zk,{"data-testid":`scale_panel.state.${a?"disabled":"enabled"}`},l.createElement(K.fI,{className:X.ZF},l.createElement(K.xw,null,(0,B.tx)("fullscreen.scale_panel.scale")),y,b),l.createElement(K.fI,null,w),v)});var er=n(524204),en=n(176019),ea=n(837746);(0,h.hG)(ea.wQn);let ei=(e,r)=>e?E.Pt(e,r):r;var eo=(e=>(e[e.DEFAULT_EXPANDED=0]="DEFAULT_EXPANDED",e[e.DEFAULT_SIMPLIFIED=1]="DEFAULT_SIMPLIFIED",e[e.OVERRIDDEN_EXPANDED=2]="OVERRIDDEN_EXPANDED",e))(eo||{});(a||(a={})).ConnectedFillPanel=(0,c.Ng)(e=>({library:e.library,currentTool:e.mirror.appModel.currentTool,currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,activeCanvasEditModeType:e.mirror.appModel.activeCanvasEditModeType,currentSelectedGradientStop:e.mirror.appModel.currentSelectedGradientStop,sceneGraphSelection:e.mirror.sceneGraphSelection,selectedStyleProperties:e.mirror.selectedStyleProperties,mirrorSelectionProperties:e.mirror.selectionProperties,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,pickerInStyleCreationShown:e.pickerInStyleCreationShown,stylePickerShown:e.stylePickerShown,stylePickerListLayout:e.stylePickerListLayout,openFile:e.openFile}))(function(e){let r=(0,y.Ku)(),{version:n}=(0,u.DP)();return l.createElement(M.eT,{key:e.key,selectionProperties:e.selectionProperties,fillPaints:e.selectionProperties.fillPaints,dispatch:e.dispatch,dropdownShown:e.dropdownShown,modalShown:e.modalShown,currentSelectedProperty:e.currentSelectedProperty,currentSelectedGradientStop:e.currentSelectedGradientStop,pickerShown:e.pickerShown,pickerInStyleCreationShown:e.pickerInStyleCreationShown,stylePickerShown:e.stylePickerShown,stylePickerListLayout:e.stylePickerListLayout,currentTool:e.currentTool,colorFormat:r,editModeType:e.activeCanvasEditModeType,defaultColor:T.rC,inheritStyleKey:e.selectionProperties.inheritFillStyleKey||null,inheritStyleID:e.selectionProperties.styleIdForFill||null,library:e.library,sceneGraphSelection:e.sceneGraphSelection,selectedStyleProperties:e.selectedStyleProperties,openFile:e.openFile,recordingKey:ei(e.recordingKey,"fillPanel"),selectionContainsFrames:(0,b.Fx)(e.mirrorSelectionProperties),hasExports:!!e.selectionProperties.exportSettings&&(0,I._W)(e.selectionProperties.exportSettings,[]).length>0,exportBackgroundDisabled:e.selectionProperties.exportBackgroundDisabled,variableScopes:e.variableScopes,isPanelBodyCollapsedAtom:null,isUI3:"ui3"===n})});let es=a.ConnectedFillPanel;(i||(i={})).ConnectedEffectsPanel=(0,c.Ng)(e=>({library:e.library,selectedStyleProperties:e.mirror.selectedStyleProperties,currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,sceneGraphSelection:e.mirror.sceneGraphSelection,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,openFile:e.openFile}))(function(e){let r=e.selectedStyleProperties&&!!e.selectedStyleProperties.guid,{smallNudgeAmount:n,bigNudgeAmount:a}=(0,y.sT)(),{version:i}=(0,u.DP)();return l.createElement(D.F,{key:"effects",stylePickerShown:e.stylePickerShown,effects:e.selectionProperties.effects||[],inheritStyleKey:e.selectionProperties.inheritEffectStyleKey||null,inheritStyleID:e.selectionProperties.styleIdForEffect||null,dispatch:e.dispatch,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,currentSelectedProperty:e.currentSelectedProperty,smallNudgeAmount:n,bigNudgeAmount:a,library:e.library,sceneGraphSelection:e.sceneGraphSelection,selectedStyleProperties:e.selectedStyleProperties,openFile:e.openFile,recordingKey:ei(e.recordingKey,"effectsPanel"),selectionContainsOnlySpreadEligibleNodes:!!e.selectionProperties.containsOnlySpreadEligibleNodes||r,selectionContainsAnyKnockoutShadowEligibleNodes:!!e.selectionProperties.containsAnyKnockoutShadowEligibleNodes||r,framelikeWithoutFills:!!e.selectionProperties.framelikeWithoutFills,framelikeWithoutClipping:!!e.selectionProperties.framelikeWithoutClipping,isUI3:"ui3"===i})});let el=i.ConnectedEffectsPanel;(o||(o={})).ConnectedGridsPanel=(0,c.Ng)(e=>({library:e.library,currentTool:e.mirror.appModel.currentTool,currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,activeCanvasEditModeType:e.mirror.appModel.activeCanvasEditModeType,sceneGraphSelection:e.mirror.sceneGraphSelection,selectedStyleProperties:e.mirror.selectedStyleProperties,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,openFile:e.openFile}))(function(e){let r=(0,y.Ku)(),{smallNudgeAmount:n,bigNudgeAmount:a}=(0,y.sT)(),i=(0,S.J2)(p.Ez5.editorPreferences().showFrameGrids);return l.createElement(k.S,{key:"grids",stylePickerShown:e.stylePickerShown,layoutGrids:e.selectionProperties.layoutGrids,smallNudgeAmount:n,bigNudgeAmount:a,currentSelectedProperty:e.currentSelectedProperty,dispatch:e.dispatch,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,currentTool:e.currentTool,colorFormat:r,showFrameGrids:i,editModeType:e.activeCanvasEditModeType,inheritStyleKey:e.selectionProperties.inheritGridStyleKey||null,inheritStyleID:e.selectionProperties.styleIdForGrid||null,library:e.library,sceneGraphSelection:e.sceneGraphSelection,selectedStyleProperties:e.selectedStyleProperties,openFile:e.openFile,recordingKey:ei(e.recordingKey,"gridsPanel")})});let ec=o.ConnectedGridsPanel;(e=>{let r=(0,A.Tn)(),n=(0,f.xx)(en.N1);e.ConnectedTypePanel=(0,c.Ng)(e=>({library:e.library,activeCanvasEditModeType:e.mirror.appModel.activeCanvasEditModeType,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection,selectedStyleProperties:e.mirror.selectedStyleProperties,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,stylePreviewShown:e.stylePreviewShown,openFile:e.openFile,userFavoriteFonts:e.userFavoriteFonts,userFlags:e.userFlags,orgById:e.orgById,fonts:e.fonts,localFontAgentVersion:e.localFontAgentVersion}),null,(e,r,a)=>({...e,...a,...r,openTypeFeatures:n(a.selectionProperties.availableOTFeaturesForSelection,a.selectionProperties.availableOTFeaturesForFonts,a.selectionProperties.toggledOnOTFeaturesForSelection,a.selectionProperties.toggledOffOTFeaturesForSelection,a.selectionProperties.mixedStateOTFeaturesForSelection,e.selectedStyleProperties.guid)}))(function(e){let n=l.useContext(P.zK),a=(0,S.J2)(p.Ez5.propertiesPanelState().enabledTypePanelControls),i=null!=n;(0,d.KF)(null!=e.selectionProperties.fontFamily,"TypePanel missing fontFamily"),(0,d.KF)(null!=e.selectionProperties.fontStyle,"TypePanel missing fontStyle"),(0,d.KF)(null!=e.selectionProperties.fontSize,"TypePanel missing fontSize"),(0,d.KF)(i||null!=e.selectionProperties.textLineType,"TypePanel missing textLineType"),(0,d.KF)(i||null!=e.selectionProperties.wholeNodeTextLineType,"TypePanel missing wholeNodeTextLineType"),(0,d.KF)(null!=e.selectionProperties.lineHeight,"TypePanel missing lineHeight"),(0,d.KF)(null!=e.selectionProperties.letterSpacing,"TypePanel missing letterSpacing"),(0,d.KF)(null!=e.selectionProperties.paragraphSpacing,"TypePanel missing paragraphSpacing"),(0,d.KF)(null!=e.selectionProperties.paragraphIndent,"TypePanel missing paragraphIndent"),(0,d.KF)(null!=e.selectionProperties.listSpacing,"TypePanel missing listSpacing"),(0,d.KF)(null!=e.selectionProperties.textCase,"TypePanel missing textCase"),(0,d.KF)(null!=e.selectionProperties.textDecoration,"TypePanel missing textDecoration"),(0,d.KF)(null!=e.selectionProperties.maxLines,"TypePanel missing maxLines");let{smallNudgeAmount:o,bigNudgeAmount:s}=(0,y.sT)(),c=(0,L.WH)(e.selectionProperties.inheritTextStyleKey??null,e.selectionProperties.styleIdForText??null,"TEXT"),h=(0,O.L)(),f=(0,_.R)(e=>r(e,(0,w.qd)(e),m.R.TEXT)),E=(0,v.SG)(["TEXT_DATA"]).data??[],b=(0,R.R1)().variableConsumptionMap,I=(0,R.JG)(),{version:T}=(0,u.DP)(),A=(0,g.md)(N.$i)===C.JJ.TEXT_PANEL;return l.createElement(er.J,{key:"type",fonts:e.fonts,fontFamily:e.selectionProperties.fontFamily,fontStyle:e.selectionProperties.fontStyle,fontSize:e.selectionProperties.fontSize,areFontStylesUniformOrOnlyMixedDueToTextStyleOverrides:e.selectionProperties.areFontStylesUniformOrOnlyMixedDueToTextStyleOverrides,validMixedPropertiesForResponsiveTextStyle:e.selectionProperties.validMixedPropertiesForResponsiveTextStyle,lineHeight:e.selectionProperties.lineHeight,intrinsicLineHeight:e.selectionProperties.intrinsicLineHeight,letterSpacing:e.selectionProperties.letterSpacing,paragraphSpacing:e.selectionProperties.paragraphSpacing,paragraphIndent:e.selectionProperties.paragraphIndent,listSpacing:e.selectionProperties.listSpacing,textLineType:e.selectionProperties.textLineType,textDirectionality:e.selectionProperties.textDirectionality,hasHadRTLText:e.selectionProperties.hasHadRTLText,wholeNodeTextLineType:e.selectionProperties.wholeNodeTextLineType,isHangingPunctuationApplicableToSelection:e.selectionProperties.isHangingPunctuationApplicableToSelection,textCase:e.selectionProperties.textCase,fillPaints:e.selectionProperties.fillPaints,textDecorationFillPaints:e.selectionProperties.textDecorationFillPaints,textDecoration:e.selectionProperties.textDecoration,textDecorationSkipInk:e.selectionProperties.textDecorationSkipInk,textUnderlineOffset:e.selectionProperties.textUnderlineOffset,textDecorationThickness:e.selectionProperties.textDecorationThickness,textDecorationStyle:e.selectionProperties.textDecorationStyle,inheritStyleKey:e.selectionProperties.inheritTextStyleKey||null,inheritStyleID:e.selectionProperties.styleIdForText||null,mainStyle:c,textContentBoundAsset:h,isTextPropReferencedByAnyNodeInSelection:f,textAlignHorizontal:e.selectionProperties.textAlignHorizontal,textAlignVertical:e.selectionProperties.textAlignVertical,textAutoResize:e.selectionProperties.textAutoResize,missingFont:e.selectionProperties.missingFont,textUserLayoutVersion:e.selectionProperties.textUserLayoutVersion,textExplicitLayoutVersion:e.selectionProperties.textExplicitLayoutVersion,textBidiVersion:e.selectionProperties.textBidiVersion,textTruncation:e.selectionProperties.textTruncation,leadingTrim:e.selectionProperties.leadingTrim,leadingTrimEnabled:e.selectionProperties.leadingTrimEnabled,hangingPunctuation:e.selectionProperties.hangingPunctuation,hangingList:e.selectionProperties.hangingList,fontVariantDiscretionaryLigatures:e.selectionProperties.fontVariantDiscretionaryLigatures||!1,fontVariantHistoricalLigatures:e.selectionProperties.fontVariantHistoricalLigatures||!1,fontVariantNumericFigure:e.selectionProperties.fontVariantNumericFigure||"NORMAL",fontVariantNumericSpacing:e.selectionProperties.fontVariantNumericSpacing||"NORMAL",fontVariantNumericFraction:e.selectionProperties.fontVariantNumericFraction||"NORMAL",fontVariantCaps:e.selectionProperties.fontVariantCaps||"NORMAL",fontVariantPosition:e.selectionProperties.fontVariantPosition||"NORMAL",fontVariations:e.selectionProperties.fontVariations||[],detachOpticalSize:e.selectionProperties.detachOpticalSizeFromFontSize||!1,openTypeFeatures:e.openTypeFeatures,editModeType:e.activeCanvasEditModeType,enabledTypePanelControls:a,dispatch:e.dispatch,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,stylePreviewShown:e.stylePreviewShown,userFavoriteFonts:e.userFavoriteFonts,orgById:e.orgById,smallNudgeAmount:o,bigNudgeAmount:s,library:e.library,sceneGraph:e.sceneGraph,sceneGraphSelection:e.sceneGraphSelection,selectedStyleProperties:e.selectedStyleProperties,openFile:e.openFile,localFontAgentVersion:e.localFontAgentVersion,recordingKey:ei(e.recordingKey,"typePanel"),textVariablesExist:E.length>0,variableConsumptionMap:i?I:b,isSlides:e.isSlides,version:T,showBlueBorder:A})})})(s||(s={}));let ed=s.ConnectedTypePanel},270296:(e,r,n)=>{n(299321);var a=n(91408);n(966712),n(369870),n(848661),n(147206);var i=n(837746);(0,a.jz)(i.uj0)},742311:(e,r,n)=>{n.d(r,{LI:()=>R,Pe:()=>C,Yg:()=>function e(r){let n=0;for(let a of(r.prototypeInteractions.length>0&&(n+=1),r.childrenNodes))n+=e(a);return n},_U:()=>v,dT:()=>S,ft:()=>I,k9:()=>w,kC:()=>k,sT:()=>T});var a=n(726681),i=n(938835),o=n(611407),s=n(976273),l=n(164775),c=n(299321),d=n(275556),u=n(880934),m=n(496450),p=n(776250),h=n(529004),_=n(96328),g=n(239349),f=n(184601),E=n(284615),y=n(94500),b=n(516703);n(132572);class I extends Error{constructor(){super(),this.name="InvalidSelectionFromGenericLayers"}}class T extends Error{constructor(){super(),this.name="NoInteractionsGenerated"}}class v extends Error{constructor(){super(),this.name="NoInteractionsGeneratedExistingInteractions"}}function S(e,r,n,i){let s=function(e,r){let n={name:"Dummy Page just to satisfy typescript so they have a parent",id:"0:1",type:"CANVAS",children:[]};return n.children=A(e,r,n),n}(e,r).children,l=(0,a._q)(s);return(0,o.sS)(s,n,l,i)}function w(e,r){let n=r.get(e),a={name:n.name,id:n.guid,type:"CANVAS",children:[]};return a.children=A(n.childrenGuids,r,a),a}function A(e,r,n){let a=[];for(let i of e){let e=(0,g.Zl)(r,i);if(null!==e){let i={id:e.guid,name:e.name,type:e.type,visible:e.visible,x:e.absoluteBoundingBox.x,y:e.absoluteBoundingBox.y,w:e.absoluteBoundingBox.w,h:e.absoluteBoundingBox.h,parentNode:n,clipsContent:!e.frameMaskDisabled,fontSize:e.fontSize,textAlignHorizontal:e.textAlignHorizontal,layoutMode:e.stackMode,cornerRadius:e.cornerRadius};i.opacity=e.opacity,i.characters=e.characters,e.fills&&(i.fills=e.fills.map(N).filter(e=>!!e)),e.prototypeInteractions&&e.prototypeInteractions.length>0&&(i.interactions=e.prototypeInteractions);let o=A(e.childrenGuids,r,i);o.length>0&&(i.children=o),a.push(i)}}return a}function N(e){switch(e.type){case"GRADIENT_ANGULAR":case"GRADIENT_DIAMOND":case"GRADIENT_LINEAR":case"GRADIENT_RADIAL":return{type:"GRADIENT",visible:e.visible};case"IMAGE":let r=e.image?.hash,n=r?(0,_.Rw)(r):"",a=e.imageThumbnail?.hash;return{type:"IMAGE",hash:n,thumbnailHash:a?(0,_.Rw)(a):"",visible:e.visible};case"SOLID":return{type:"SOLID",color:e.color??{r:0,g:0,b:0},visible:e.visible}}}function C(e){return null!==e}let L=(e,r)=>"BACK"===r?"BACK":"CLOSE"===r?"CLOSE":"OPEN_POPUP"===e?"OVERLAY":e,O=d.nc.ai("link-new-interaction",e=>{let r=L(e.navigationType,""),n=e.buttonID,a=u.sH(n);if(null===a||a===u.Hr){(0,p.sx)("prototype_interaction_added",{magicLinkGenerated:!0,magicLinkInteractionRemoved:!0,magicLinkInvalidSourceNode:!0,action_type:r});return}let i=(0,m.NT)().get(n);if(null==i){(0,p.sx)("prototype_interaction_added",{magicLinkGenerated:!0,magicLinkInteractionRemoved:!0,magicLinkInvalidSourceNode:!0,action_type:r});return}let o=function(e){let r=e;for(;r.parentNode?.type!=="CANVAS"&&r.parentNode?.type!=="SECTION"&&null!==r.parentNode;)r=r.parentNode;return r}(i),s=e.destinationScreenID,l=i?.prototypeInteractions;if(l){for(let e of l)if(e.event?.interactionType==="ON_CLICK"&&e.actions&&e.actions.length>0&&!(1===e.actions.length&&"NONE"===e.actions[0].connectionType))return(0,p.sx)("prototype_interaction_added",{magicLinkGenerated:!0,sourceTlfIds:JSON.stringify([o.guid]),destinationTlfIds:JSON.stringify([s]),magicLinkInteractionRemoved:!0,magicLinkExistingInteractionOnSourceNode:!0,action_type:r}),{noInteractionGeneratedReason:"EXISTING_INTERACTION"}}let d=u.sH(s),_={},g=e.navigationType;if("BACK"===g)_.connectionType="BACK";else if("CLOSE"===g)_.connectionType="CLOSE";else{if(null===d||d===u.Hr||null===s){(0,p.sx)("prototype_interaction_added",{magicLinkGenerated:!0,sourceTlfIds:JSON.stringify([o.guid]),destinationTlfIds:JSON.stringify([s]),magicLinkInteractionRemoved:!0,magicLinkInvalidDestinationNode:!0,action_type:r});return}let e=(0,m.NT)().get(s);if(!e){(0,p.sx)("prototype_interaction_added",{magicLinkGenerated:!0,sourceTlfIds:JSON.stringify([o.guid]),destinationTlfIds:JSON.stringify([s]),magicLinkInteractionRemoved:!0,magicLinkInvalidDestinationNode:!0,action_type:r});return}_.transitionNodeID=d,_.transitionType="INSTANT_TRANSITION","NAVIGATE"===g?(_.connectionType="INTERNAL_NODE",(i?.type==="SYMBOL"||i?.type==="INSTANCE")&&(e?.type==="SYMBOL"||e?.type==="INSTANCE")?_.navigationType="SWAP_STATE":_.navigationType="NAVIGATE",o?.overlayBackground.type!=="NONE"&&(_.navigationType="SWAP")):"OPEN_POPUP"===g&&(_.connectionType="INTERNAL_NODE",_.navigationType="OVERLAY")}let f=c.glU.generateUniqueID();if(!f)return;let E=u.sH(f);if(!E)return;let y={id:E,stateManagementVersion:1};y.event={interactionType:"ON_CLICK"},y.actions=[_];try{i.prototypeInteractions=[y]}catch(e){return}let b=h.d({nodeID:a,interactionID:E});return(0,p.sx)("prototype_interaction_added",{interactionCount:i?.prototypeInteractions.length??0,magicLinkGenerated:!0,interactionID:b,sourceTlfIds:JSON.stringify([o.guid]),destinationTlfIds:JSON.stringify([s]),action_type:L(_.navigationType??"",_.connectionType??"")}),{noodleID:b}});async function R(e,r,n,a){let i,l;if("TOPLEVEL"===e.type&&function(e,r){let n=(0,o.i9)(e.unfilteredScene.children);r((0,y.Zh)({name:"prototype.ai_magic_link_input_existing_interactions",params:{existingInteractions:JSON.stringify(n.interactionIds)}}))}(e,a),"TOPLEVEL"===e.type&&0===e.topLevelFrames.length)throw new I;try{let n=await D(e,r);i=P(n)}catch(e){if(e instanceof s.gS){let r={generatedInteractions:[]};return r.errorMessage=e.message,r}throw e}let c=[],d=!1;try{for await(let e of i){if(n.signal.aborted)return{generatedInteractions:[],errorMessage:"aborted"};let r=O(e);r?.noodleID?(c.push({id:r.noodleID,mapping:e}),"BACK"===e.navigationType&&await new Promise(e=>setTimeout(e,200))):r?.noInteractionGeneratedReason==="EXISTING_INTERACTION"&&(d=!0)}}catch(e){l=e.message}if(!l&&0===c.length){if(d)throw new v;throw new T}return{generatedInteractions:c,errorMessage:l}}async function*P(e){for await(let r of e)yield(0,i.HP)(r)}async function D(e,r){let n=(0,l.w)(e),a=new Promise((e,r)=>{setTimeout(()=>{r(Error("Cortex timed out"))},6e4)});if("EMPTY"===n.type)throw new s.gS("Empty selection");let i=f.Ay.design.generateMagicLinkV2(n,{...(0,E.Ay)(),clientLifecycleId:r}),o=await Promise.race([i,a]);return new f.hI(o,6e4)}function k(e,r,n){let a=Object.fromEntries(n.map(e=>[e,[]]));return r.forEach(r=>{n.forEach(n=>{a[n]?.push(...function e(r,n,a){let i=r.get(n);return i?"ICON"===a&&i.isIconLike||i.type===a||"IMAGE"===a&&(0,b.A)(i)?[n]:i.childrenNodes.flatMap(n=>e(r,n.guid,a)):[]}(e,r,n))})}),a}},83695:(e,r,n)=>{n.d(r,{KN:()=>K,y3:()=>$});var a=n(411855),i=n(432258),o=n(299321),s=n(378195),l=n(629019),c=n.n(l),d=n(44070),u=n.n(d),m=n(966712),p=n(503457),h=n(153234),_=n(522739),g=n(572206),f=n(723325),E=n(154254),y=n(939863),b=n(226055),I=n(394339),T=n(178462),v=n(88339),S=n(469380),w=n(771941),A=n(848661),N=n(869156),C=n(741843),L=n(750029),O=n(736656),R=n(325682),P=n(533573),D=n(712685),k=n(15270),M=n(746806),F=n(761110),x=n(773833),U=n(375673),B=n(590685),V=n(527967),G=n(200817);let H=a.createContext({autoCloseOnScroll:!0}),W=(0,p.kf)("lazy_search_expression_builder",{isCodesplit:!0,ComponentFactory:async()=>({default:(await n.e(7006).then(n.bind(n,317006))).ExpressionBuilderSearch})});function K({resolvedType:e,targetVariableData:r,autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:s,updateSelectionProperties:l,recordingKey:c,updateConditionInConditionalAction:d,isNarrowPanel:u,showVariableThumbnails:m,setVariableValue:p,onClose:_,requestedTypes:f,initialPosition:E,variantProperty:y}){let b=!1;(0,A.gl)(r)&&(r=void 0,b=!0),r=(0,x.IQ)(r,y),r?.type===o.Z_n.EXPRESSION&&r?.value.expressionFunction===o.JTp.STRINGIFY&&(r=r.value.expressionArguments[0]);let[T,S]=a.useState(null),N=a.useCallback(e=>{null!==e&&S(e)},[]),[C,L]=a.useState(E??null),{shouldShowAdvancedPrototypingPaywall:O,showAdvancedPrototypingVariablesModal:P}=(0,R.zt)(),D=a.useCallback(()=>{if(O)P();else if(!C&&T){let e=T.getBoundingClientRect();L(new g.Mi(e.left-34,e.top-6))}},[T,C,O,P]);a.useEffect(()=>{!0===n&&s&&T&&(D(),s(!1))},[n,T,D,s]);let k=a.useCallback(()=>{C&&(L(null),_&&_())},[C,_]),M=a.useCallback(e=>{if(void 0!==d)d(e);else if((0,i.Vq)(p)){if(!p(e))return!1}else void 0!==l&&l({targetVariableData:e});return k(),!0},[k,d,l,p]),F=a.createElement(a.Fragment,null,C&&a.createElement(Y,{initialTokens:r?(0,I.q)((0,v.A)(r,new w.o(!0))):[],initialPosition:C,resolvedType:e,onCloseExpressionBuilder:k,onInputSubmitted:M,icon:d?V.A:G.A,isInConditional:void 0!==d,recordingKey:h.Pt(c,"expressionBuilder"),requestedTypes:f})),U=a.createElement($,{targetVariableData:r,forwardRef:N,onClick:D,recordingKey:c,isNarrowPanel:u,isInCell:!!p,showVariableThumbnails:m,isInConditional:void 0!==d,isMixed:b});return a.createElement(a.Fragment,null,F," ",U)}function Y({initialTokens:e,initialPosition:r,resolvedType:n,onCloseExpressionBuilder:i,onInputSubmitted:o,icon:s,isInConditional:l,recordingKey:c,requestedTypes:d}){let{autoCloseOnScroll:m}=a.useContext(H),p=a.useMemo(()=>e.reduce((e,r)=>e+=r.stringValue,""),[e]),g=a.useRef(p),E=a.useRef(!1),[b,I]=a.useState(0),v=a.useCallback((e,r)=>{I(e),e>0&&!E.current&&(E.current=!0),r&&(0,x.EQ)(g.current,r,n,l?"conditional":"set_variable")},[l,n]),[A,N]=a.useState((0,S.d)(g.current,n,d)),L=a.useCallback(()=>{if(g.current.trim().length>0){(0,x.EQ)(g.current,"success",n,l?"conditional":"set_variable");let e=o((0,T.q)(g.current,new w.o));if(!e)return N(!e),e}else(0,x.EQ)(g.current,"submit_empty",n,l?"conditional":"set_variable"),i();return!0},[l,i,o,n]),O=a.useMemo(()=>u()(e=>{(0,x.EQ)(g.current,e,n,l?"conditional":"set_variable"),i()}),[l,i,n]),R=a.useCallback(()=>l?(0,y.t)("proto.expression_builder_entry.placeholder"):(0,y.t)("proto.expression_builder.placeholder"),[l]);return a.createElement("div",{className:B.Zh},a.createElement(M.vx,{container:C.c,containerProps:{wiggleCount:b},title:"",headerSize:"hidden",initialPosition:r,onClose:i,dragHeaderOnly:!1,initialWidth:258,canRenderBelowViewport:!0},a.createElement(f.dP,{recordingKey:c},a.createElement("div",null,a.createElement(W,{fallback:a.createElement("div",{className:B.D9}," Loading... "),errorFallback:null,initialTokens:e,expressionText:g,resolvedType:n,error:A,setError:N,onSubmit:L,onClose:O,icon:s,wiggleCount:b,setWiggleCount:v,hasWiggled:E.current,placeholderText:R(),isInConditional:l,recordingKey:h.Pt(c,"search"),requestedTypes:d})))),a.createElement(_.D8,{className:U.ZA,onMouseDown:e=>{!A&&L()||(b>=1?O("click_out_cancel"):0===b&&v(1,"click_out_error")),e.stopPropagation()},onWheel:()=>{m&&g.current.trim()===p.trim()&&O("scroll_cancel")},recordingKey:h.Pt(c,"closeBuilder")}))}function $({targetVariableData:e,forwardRef:r,onClick:n,recordingKey:i,showVariableThumbnails:l,isNarrowPanel:d,isInCell:u,isInConditional:p,isMixed:g,variantProperty:f}){e=(0,x.IQ)(e,f);let I=(0,b.GS)(),T=(0,R.YT)(),S=a.useContext(O.c),N=T===R.Oz.TWO_COL,C=N&&S===O.P.LEFT,P=N&&S===O.P.RIGHT,D=a.useMemo(()=>e?(0,v.A)(e,new w.o(!0,!0)).replace(/\(/g," ( ").replace(/\)/g," ) ").split(/\s+(?=(?:(?:[^"]*"){2})*[^"]*$)(?![^{]*})(?![^[]*])/):[],[e]);if(e&&(0,A.hS)(e)&&e?.resolvedType===o.rXF.COLOR)return a.createElement(L.J,{color:e.value});let k=0===D.length,M=c()({[B.WR]:!u&&d,[B.NQ]:u,[B.D9]:!u&&!d,[B.pC]:N,[B.g6]:C,[B._i]:I}),U=C?(0,y.t)("proto.expression_builder_entry.placeholder_ui3_lhs"):P?(0,y.t)("proto.expression_builder_entry.placeholder_ui3_rhs"):(0,y.t)("proto.expression_builder_entry.placeholder");return a.createElement(_.D8,{onClick:n,recordingKey:h.Pt(i,"openExpressionBuilder"),className:I?B.tY:E.cx.minW0.$},a.createElement("div",{className:M,ref:r},D.filter(e=>e.length>0).map((e,r)=>{if(e.startsWith("{")&&e.endsWith("}")){let n=e.replace(/[{}]/g,""),{variableId:i,modeId:o}=(0,x.Y_)(n);return a.createElement(j,{variableId:i,modeId:o,showVariableThumbnails:l,key:r,disableHover:C})}if(s.sH(e))return a.createElement(j,{variableId:e,showVariableThumbnails:l,key:r,disableHover:C});if((0,m.kc)().ds_variable_props_proto&&e.startsWith("[")&&e.endsWith("]")){let n=e.replace(/[[]]/g,""),[i,o,s]=(0,x.Q6)(n);return a.createElement(z,{stablePathToNode:i,componentPropId:s,showVariableThumbnails:l,key:r})}if((0,m.kc)().ds_variable_props_proto&&(0,x.Q6)(e)[0].length&&""!==(0,x.Q6)(e)[1]&&""!==(0,x.Q6)(e)[2]){let[n,i,o]=(0,x.Q6)(e);return a.createElement(z,{stablePathToNode:n,componentPropId:o,showVariableThumbnails:l,key:r,disableHover:C})}return x.dX.test(e)?a.createElement("span",{key:r},e):x.yZ.test(e)||x.er.test(e)?a.createElement("span",{key:r},e):a.createElement(F.X,{isLeftColInteractionsPanel:C,text:e,key:r})}),k&&a.createElement("span",{className:B.a7},g?(0,y.t)("fullscreen.mixed"):p?U:(0,y.t)("proto.expression_builder.placeholder"))))}function j({variableId:e,modeId:r,showVariableThumbnails:n,disableHover:i}){let o=(0,N.u)(e),s=o?(0,k.B9)(o.name):(0,y.t)("proto.expression_builder_entry.missing"),l=(0,N.G6)(o?.variableSetId),c=l&&r?l.modes.find(e=>e.id===r):null,d=c?.name,u=o&&n?(0,x.Xx)(o.resolvedType):null,m=d?`${s}: ${d}`:`${s}`;return a.createElement(D.wG,{text:m,thumbnailValue:u,isDeleted:!!o&&(0,P.eF)(o),disableHover:i})}function z({stablePathToNode:e,componentPropId:r,showVariableThumbnails:n,disableHover:i}){let o=(0,x.aA)(e,r),s=o&&n?(0,x.Xx)(o.varValue.resolvedType):null;return a.createElement(D.wG,{text:o?o.name:(0,y.t)("proto.expression_builder_entry.missing"),colorTheme:D.J2.COMPONENT,thumbnailValue:s,isDeleted:!1,disableHover:i})}},773833:(e,r,n)=>{n.d(r,{Cq:()=>function e(r){if(r&&r.varValue.type===i.Z_n.ALIAS)return i.CWU.getVariableResolvedValue(r.varValue.value,new Map);if(r&&r.varValue.type===i.Z_n.NODE_FIELD_ALIAS){let{stablePathToNode:n,indexOrKey:a}=r.varValue.value,o=x(n,a);return o?e(o):function(e){switch(e.varValue.resolvedType){case i.rXF.STRING:case i.rXF.TEXT_DATA:return{type:i.Z_n.STRING,resolvedType:i.rXF.STRING,value:""};case i.rXF.BOOLEAN:return{type:i.Z_n.BOOLEAN,resolvedType:i.rXF.BOOLEAN,value:!1};case i.rXF.FLOAT:return{type:i.Z_n.FLOAT,resolvedType:i.rXF.FLOAT,value:0}}}(r)}let n=(0,_.sr)(r);switch(typeof n){case"string":return{type:i.Z_n.STRING,resolvedType:i.rXF.STRING,value:n};case"boolean":return{type:i.Z_n.BOOLEAN,resolvedType:i.rXF.BOOLEAN,value:n};case"number":return{type:i.Z_n.FLOAT,resolvedType:i.rXF.FLOAT,value:n}}},DE:()=>T,EQ:()=>q,HC:()=>G,Hq:()=>F,I0:()=>y,IQ:()=>$,J4:()=>V,N_:()=>K,Q6:()=>U,TL:()=>H,Ub:()=>k,Xx:()=>j,Y_:()=>Y,ZX:()=>E,_z:()=>M,a1:()=>I,aA:()=>x,bU:()=>B,d9:()=>P,dX:()=>C,er:()=>O,he:()=>D,if:()=>v,kl:()=>S,q2:()=>w,sO:()=>A,tJ:()=>R,tz:()=>z,uX:()=>L,wL:()=>W,yZ:()=>N,yy:()=>b});var a=n(411855),i=n(299321),o=n(880934),s=n(776250),l=n(776621),c=n(632430),d=n(394339),u=n(771941),m=n(869156),p=n(335682),h=n(512596),_=n(503795),g=n(90211),f=n(452883);function E({highlightedItemID:e,variables:r,expressionItems:n,componentPropItems:a}){return e?r.find(r=>r.node_id===e)??a.find(r=>(0,_.lC)(r)===e)??n.find(r=>r.name===e)??null:null}let y=new RegExp(/\+|-|\*|!|=|\/|&|\||>|<| /g),b=new RegExp(/\+|-|\*|!|=|\/|&&|\|\||>|</g),I=new RegExp(/\+|-|\*|\//g),T=new RegExp(/\+/g),v=new RegExp(/>|<|!/g),S=new RegExp(/>=|<=/g),w=new RegExp(/!=|==|(OR|or|Or)|>=|<=|&&|\|\|/g),A=new RegExp(/(AND|and|And)|(NOT|not|Not)/g),N=new RegExp(/"([^"]*)"/),C=new RegExp(/^[0-9.]*$/),L=new RegExp(/(AND|and|And)|(NOT|not|Not)|(OR|or|Or)|!=|==|&&|\|\|/),O=new RegExp(/\s*(true|false)\s*/i),R=new RegExp(/\(|\)/g);function P(e){return!!e&&(!C.test(e)||isNaN(Number(e)))}function D(e,r){return e?.modes.find(e=>e.id===r)?.name??""}function k(e){let[r,n]=e.split("$$$");return[r,n]}function M(e,r,n){if(n.keepAliasId)return`${e}$$$${r}`;let a=n.variableIdToVariable(e);if(!a)return"{}";let i=n.variableCollectionIdToVariableCollection(a.variableSetId);if(!i)return"{}";let o=D(i,r);return`{${a.name}$$$${o}}`}function F(e){let[r,n,a]=U(e);if(!r||!n||!a)return[];if("COMPONENT_PROP_ASSIGNMENTS"===n){let e=x(r,a);return e?[r,n,a,e.varValue.resolvedType]:[]}return(0,l.xi)("Invalid node field when parsing node field alias expression text",n),[]}function x(e,r){if(!e||0===e.length||!r)return;let n=i.CWU.getComponentPropForVariableAlias(e,r);if(0!==Object.keys(n).length)return n}function U(e){let[r,n,a]=e.split("$$$");if(!r||!n||!a)return[[],"",""];let[,i]=r.split("StablePathToNode:"),[,o]=n.split("NodeField:"),[,s]=a.split("IndexOrKey:");return i&&o&&s?[JSON.parse(i),o,s]:[[],"",""]}function B(e,r,n){return"COMPONENT_PROP_ASSIGNMENTS"===r?`StablePathToNode:${JSON.stringify(e)}$$$NodeField:${r}$$$IndexOrKey:${n}`:((0,l.xi)("Invalid node field when parsing for node field alias",r),"")}function V(e){for(let r of e){if(r.type===_.Yc.COMPONENT_PROPS)return(0,_.lC)(r.items[0]);if("items"in r)return r.items[0].node_id;if("expressionItem"in r)return r.expressionItem.name}return null}function G(e){for(let r of e)if(r.type===_.Yc.COMPONENT_PROPS)return(0,_.lC)(r.items[0]);for(let r of e)if(r.type===_.Yc.VARIABLES)return r.items[0].node_id;for(let r of e)if(r.type===_.Yc.EXPRESSION&&"LITERAL"===r.expressionItem.type)return r.expressionItem.name;return null}function H(e){return a.useMemo(()=>e===i.rXF.BOOLEAN?[i.rXF.BOOLEAN,i.rXF.STRING,i.rXF.FLOAT]:e===i.rXF.STRING?[i.rXF.STRING,i.rXF.FLOAT]:[e],[e])}function W(e,r,n,i){let o=(0,m.Rb)(),s=(0,m.yp)(),l=(0,m.pN)(),c=l.data?.libraryVariables,d=l.data?.libraryVariableSets,[u,E]=(0,a.useMemo)(()=>"ALL_LIBRARIES"===n.type?[[...o,...c??[]],[...s,...d??[]]]:"LOCAL_VARIABLES"===n.type?[o,s]:[c??[],d??[]],[n.type,o,c,s,d]),y=(0,f.$)(),b=(0,p.tS)(),I=(0,h.A)(null,null),T=a.useMemo(()=>{let e={};return I.forEach(r=>{e[r.fileKey]=r.fileName}),e},[I]),v=H(r),S=a.useMemo(()=>u.filter(e=>i?.includes(e.resolvedType)??v.includes(e.resolvedType)),[u,i,v]),w=(0,g.qF)(S,e??"");return a.useMemo(()=>null===e?[]:e.length>0?(0,_.dC)({variables:w,variableSets:E,styles:[],componentProps:[],layout:"list",fileNamesByKey:T,openFileKey:b,slideThemeId:y}):(0,_.HK)({variables:w,variableSets:E,layout:n.layout}),[e,w,E,T,b,n.layout,y])}async function K(e,r){let n=r.find(r=>r.node_id===e.node_id);n&&await (0,c.ff)(n)}function Y(e){let[r,n]=e.split(" %%% "),[a,i]=r.split("$$$");return{variableId:a,modeId:i,resolvedType:n?+n:null}}function $(e,r){return e?.type===i.Z_n.EXPRESSION&&e?.value.expressionFunction===i.JTp.IS_TRUTHY&&e.value.expressionArguments[0]&&(e=e.value.expressionArguments[0]),e?.type===i.Z_n.EXPRESSION&&e?.value.expressionFunction===i.JTp.RESOLVE_VARIANT&&e?.value.expressionArguments[0]?.type===i.Z_n.MAP&&r&&e.value.expressionArguments[0].value[r]&&(e=e.value.expressionArguments[0].value[r]),e?.type===i.Z_n.EXPRESSION&&e?.value.expressionFunction===i.JTp.STRINGIFY&&(e=e.value.expressionArguments[0]),e}function j(e){return z(e)?{type:i.Z_n.STRING,resolvedType:i.rXF.STRING,value:o.AD}:e===i.rXF.BOOLEAN?{type:i.Z_n.BOOLEAN,resolvedType:i.rXF.BOOLEAN,value:!0}:e===i.rXF.FLOAT?{type:i.Z_n.FLOAT,resolvedType:i.rXF.FLOAT,value:0}:null}function z(e){return e===i.rXF.STRING||e===i.rXF.TEXT_DATA}function q(e,r,n,a){let o=new u.o(!0),c=[];try{c=(0,d.q)(e)}catch{(0,l.xi)("could not tokenize expression for logging:",e)}let m=c.filter(e=>"TOKEN_VARIABLE"===e.type||"TOKEN_VARIABLE_WITH_MODE"===e.type).map(e=>{let[r,n]=k(e.stringValue),a=o.variableIdToVariable(r);return{collection_id:a?.variableSetId,variable_id:r,variable_type:a?.resolvedType,mode_id:n}}),p=Object.keys(i.rXF)[Object.values(i.rXF).indexOf(n)].toLowerCase();"float"!==p&&"string"!==p&&"boolean"!==p&&(p="invalid");let h={status:r,resolved_type:p,variable_data:JSON.stringify(m),entry:a};s.az.trackDefinedEvent("prototype.expression_submit",h)}},360803:(e,r,n)=>{n.d(r,{m:()=>function e(r){var n=[];for(var i of r){if("SET_VARIABLE"===i.connectionType){if(i.targetVariable&&"id"in i.targetVariable){let e=s.sH(i.targetVariable.id);i.targetVariable.id={guid:{sessionID:e?.guid?.sessionID,localID:e?.guid?.localID}}}i.targetVariableData&&(i.targetVariableData=c(i.targetVariableData.type,i.targetVariableData.resolvedType,i.targetVariableData.value))}else if("SET_VARIABLE_MODE"===i.connectionType)(0,a.B1)(i.targetVariableModeID,"targetVariableModeID"),i.targetVariableModeID=(0,o.sH)(i.targetVariableModeID)||void 0;else if("CONDITIONAL"===i.connectionType&&i.conditionalActions){var l=[];for(var d of i.conditionalActions){var u=[],m=null;d&&(d.condition&&(m=c(d.condition.type,d.condition.resolvedType,d.condition.value)),d.actions&&(u=e(d.actions))),l.push({condition:m,actions:u})}i.conditionalActions=l}n.push(i)}return n}});var a=n(67151),i=n(299321),o=n(880934),s=n(378195),l=n(15270);function c(e,r,n){let a=(0,l.WI)(r,n),d=function(e){switch(e){case i.rXF.BOOLEAN:return"BOOLEAN";case i.rXF.FLOAT:return"FLOAT";case i.rXF.STRING:return"STRING";case i.rXF.COLOR:return"COLOR";case i.rXF.MAP:return"MAP";case i.rXF.SYMBOL_ID:return"SYMBOL_ID";case i.rXF.TEXT_DATA:return"TEXT_DATA";default:throw Error(`Unexpected resolved type: ${e}`)}}(r);if(e===i.Z_n.BOOLEAN)return{dataType:"BOOLEAN",resolvedDataType:d,value:{boolValue:a.value}};if(e===i.Z_n.FLOAT)return{dataType:"FLOAT",resolvedDataType:d,value:{floatValue:a.value}};if(e===i.Z_n.STRING)return{dataType:"STRING",resolvedDataType:d,value:{textValue:a.value}};if(e===i.Z_n.ALIAS){var u,m=null;if("string"==typeof n){let e=s.sH(n);e&&(m={guid:{sessionID:e?.guid?.sessionID,localID:e?.guid?.localID}})}return{dataType:"ALIAS",resolvedDataType:d,value:{alias:m||a.value}}}if(e===i.Z_n.NODE_FIELD_ALIAS)return{dataType:"NODE_FIELD_ALIAS",resolvedDataType:d,value:{nodeFieldAliasValue:"stablePathToNode"in(u=a.value)&&"nodeField"in u&&"indexOrKey"in u?{stablePathToNode:{guids:u.stablePathToNode.map(e=>(0,o.sH)(e))},nodeField:u.nodeField,indexOrKey:u.indexOrKey}:{}}};if(e===i.Z_n.COLOR)return{dataType:"COLOR",resolvedDataType:d,value:{colorValue:a.value}};if(e===i.Z_n.EXPRESSION)return{dataType:"EXPRESSION",resolvedDataType:d,value:{expressionValue:function e(r){for(var n=r.expressionArguments,a=[],o=0;o<n.length;o++){var s=n[o],l=c(s.type,s.resolvedType,s.value);s.type===i.Z_n.EXPRESSION&&(l.value={expressionValue:e(s.value)}),a.push(l)}return{expressionArguments:a,expressionFunction:i.JTp[r.expressionFunction]}}(n)}};else if(e===i.Z_n.MAP)return{dataType:"MAP",resolvedDataType:d,value:{mapValue:a.value}};else if(e===i.Z_n.SYMBOL_ID)return{dataType:"SYMBOL_ID",resolvedDataType:d,value:{symbolIdValue:a.value}}}},301036:(e,r,n)=>{n(820286),n(848661)},325682:(e,r,n)=>{n.d(r,{Oz:()=>D,YT:()=>M,hU:()=>v,x6:()=>A,zt:()=>P});var a=n(411855),i=n(188507);n(299321),n(880934);var o=n(776250);n(794272);var s=n(966712),l=n(38580),c=n(374626),d=n(662275),u=n(809831),m=n(226055),p=n(396226),h=n(848661);n(46878);var _=n(335682),g=n(99506),f=n(206193),E=n(300874);n(32067),n(394781);var y=n(453261),b=n(449731),I=n(144119),T=n(38340);function v(e,r,n,a,i,o,s,l,c,d){return{behavior:function(e){if(e){if(!(0,h.hS)(e))return h.oV;if("INSTANT_TRANSITION"===e);else if("DISSOLVE"===e)return"DISSOLVE";else if("FADE"===e)return"FADE";else if(e.startsWith("SLIDE_OUT"))return"SLIDE_OUT";else if(e.startsWith("SLIDE"))return"SLIDE";else if(e.startsWith("PUSH"))return"PUSH";else if(e.startsWith("MOVE_OUT"))return"MOVE_OUT";else if(e.startsWith("MOVE"))return"MOVE";else if("SMART_ANIMATE"===e||"MAGIC_MOVE"===e)return"SMART_ANIMATE";else if("SCROLL_ANIMATE"===e)return"SCROLL_ANIMATE"}return"INSTANT"}(e),direction:function(e){if(e&&(0,h.hS)(e)){for(let r of w)if(e.indexOf(r)>=0)return r}return null}(e),easing:function(e){if(e){if(!(0,h.hS)(e))return h.oV;if("IN_CUBIC"===e)return"EASE_IN";if("OUT_CUBIC"===e);else if("INOUT_CUBIC"===e)return"EASE_IN_AND_OUT";else if("LINEAR"===e)return"LINEAR";else if("IN_BACK_CUBIC"===e)return"EASE_IN_BACK";else if("OUT_BACK_CUBIC"===e)return"EASE_OUT_BACK";else if("INOUT_BACK_CUBIC"===e)return"EASE_IN_AND_OUT_BACK";else if("CUSTOM_CUBIC"===e)return"CUSTOM_BEZIER";else if("GENTLE_SPRING"===e)return"GENTLE";else if("SPRING_PRESET_ONE"===e)return"QUICK";else if("SPRING_PRESET_TWO"===e)return"BOUNCY";else if("SPRING_PRESET_THREE"===e)return"SLOW";else if("CUSTOM_SPRING"===e)return"CUSTOM_SPRING"}return"EASE_OUT"}(r),isSpringTransition:A(r),easingFunction:n?(0,h.hS)(n)?n:h.oV:S,duration:a?(0,h.hS)(a)?a:h.oV:.3,shouldSmartAnimate:N(i,!1),preserveScroll:N(o,!1),resetVideoPosition:N(s,!1),openUrlInNewTab:N(l,!1),resetScrollPosition:N(c,!1),resetInteractiveComponents:N(d,!1)}}(0,l.eU)(!0);let S=[0,0,.58,1],w=["LEFT","RIGHT","TOP","BOTTOM"];function A(e){return!!e&&("GENTLE_SPRING"===e||"SPRING_PRESET_ONE"===e||"SPRING_PRESET_TWO"===e||"SPRING_PRESET_THREE"===e||"CUSTOM_SPRING"===e)}function N(e,r){return e?(0,h.hS)(e)?e:h.oV:r}let C=["OPEN_OVERLAY","SWAP_WITH","CLOSE_OVERLAY"],L=["SET_VARIABLE","SET_VARIABLE_MODE","CONDITIONAL"],O=["UPDATE_MEDIA_PLAY_PAUSE_OPTIONS","UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS","UPDATE_MEDIA_SKIP_TO","UPDATE_MEDIA_SKIP_BY_OPTIONS"];function R(e,r){let n;let s=(0,i.wA)();switch(e){case E.Bi.PROTOTYPING_MULTIPLE_ACTIONS:n=f.b.PROTOTYPING_MULTIPLE_ACTIONS;break;case E.Bi.PROTOTYPING_CONDITIONAL_ACTIONS:n=f.b.PROTOTYPING_CONDITIONAL_ACTIONS;break;case E.Bi.PROTOTYPING_VARIABLES:n=f.b.PROTOTYPING_VARIABLES;break;case E.Bi.VIDEOS_IN_PROTOTYPES:n=f.b.ADD_VIDEO;break;default:n=void 0}return(0,a.useCallback)(()=>{s(d.to({type:b.DV,data:{team:r,resource:e,editorType:g._Y.DESIGN,currentPlan:p.F.Plan.STARTER,upsellPlan:p.F.Plan.PRO,upsellSource:n}})),(0,o.sx)("prototype.payment_upsell_modal_shown",{paywallFeature:e})},[s,e,r,n])}function P(){let{canUseAdvancedPrototyping:e,canMoveFileToProPlus:r,showMoveToProTeam:n}=(0,y.R)(),a=(0,s.kc)().prototype_multi_path_paywall&&!e,o=(0,_.q5)(),l=(0,i.d4)(e=>o&&o.teamId?e.teams[o.teamId]:null),d=(0,c.md)(_.Hu),m=(0,I.sO)(),p=(0,u.ow)(),h=R(E.Bi.PROTOTYPING_MULTIPLE_ACTIONS,l),g=R(E.Bi.PROTOTYPING_CONDITIONAL_ACTIONS,l),f=R(E.Bi.PROTOTYPING_VARIABLES,l),b=R(m?E.Bi.VIDEOS_IN_SLIDES:p?E.Bi.VIDEOS_IN_WHITEBOARD:E.Bi.VIDEOS_IN_PROTOTYPES,l);return{shouldShowAdvancedPrototypingPaywall:a,showAdvancedPrototypinglMultipleActionsModal:r?n:h,showAdvancedPrototypingConditionalActionsModal:r?n:g,showAdvancedPrototypingVariablesModal:r?n:f,showVideosModal:r&&!d?n:b}}[...L,...C,...O],[...C,...L,...O];var D=(e=>(e[e.SINGLE_COL=0]="SINGLE_COL",e[e.TWO_COL=1]="TWO_COL",e[e.NONE=2]="NONE",e))(D||{});function k(e){return e.some(e=>e.actions?.some(e=>"CONDITIONAL"===e.connectionType))}function M(){let e=(0,T.HS)(),{selectedInteractions:r,differentLengthActions:n}=(0,T.Ay)(e);if(!(0,m.GS)())return 2;let a=k(r)||r.some(e=>void 0!==e.actions&&e.actions?.length>1),i=r.length>1&&!n&&r[0].actions?.length===1&&k(r)&&!r.every(e=>e.actions?.every(e=>"CONDITIONAL"===e.connectionType));return!a||n||i?0:1}},73349:(e,r,n)=>{n.d(r,{E8:()=>l,U8:()=>o,_i:()=>s});var a=n(682331),i=n(126911);function o(e){let r=[],n=i.y.isApple();return n&&e.metaKey&&r.push("\u2318"),!n&&e.metaKey&&r.push(e.ctrlKey?"\u2318":"Ctrl"),e.ctrlKey&&r.push(n?"\u2303":"Ctrl"),e.shiftKey&&r.push(n?"\u21E7":"Shift"),e.altKey&&r.push(n?"\u2325":"Alt"),r.push(c[e.keyCode]||String.fromCharCode(e.keyCode)),r.join(n?"":"+")}function s(e){if(!e)return null;let r={metaKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1,keyCode:0};for(let n of e)switch(n){case 16:r.shiftKey=!0;break;case 17:r.ctrlKey=!0;break;case 18:r.altKey=!0;break;case 91:case 92:case 93:case 224:r.metaKey=!0;break;default:r.keyCode=n}return r.keyCode?r:null}function l(e,r=!1){if(!e||e?.triggerDevice==="KEYBOARD")return null;let n=d.get(e?.triggerDevice),i=e?.keyCodes?.[0]??0,o=n?.get(i)??function(e){if(e>=a.c){let r=Math.floor((e-a.c)/2);return`Axis ${r} ${e%2==0?"-":"+"}`}return`Button ${e}`}(i);return o.length<=1&&!r&&(o+=" (Gamepad)"),o}let c={3:"Break",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"Caps Lock",27:"Esc",32:"Space",33:"Page Up",34:"Page Down",35:"End",36:"Home",37:"\u2190",38:"\u2191",39:"\u2192",40:"\u2193",41:"Select",42:"Print",43:"Execute",44:"Print Screen",45:"Ins",46:"Del",47:"Help",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",58:":",59:"=",60:"<",61:"=",63:"\xdf",64:"@",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",95:"Sleep",96:"Numpad 0",97:"Numpad 1",98:"Numpad 2",99:"Numpad 3",100:"Numpad 4",101:"Numpad 5",102:"Numpad 6",103:"Numpad 7",104:"Numpad 8",105:"Numpad 9",106:"*",107:"+",108:".",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",124:"F13",125:"F14",126:"F15",127:"F16",128:"F17",129:"F18",130:"F19",131:"F20",132:"F21",133:"F22",134:"F23",135:"F24",144:"Num Lock",145:"Scroll Lock",151:"Airplane Mode",160:"^",161:"!",163:"#",164:"$",166:"Page Backward",167:"Page Forward",168:"Refresh",170:"*",172:"Home",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",193:"?",194:".",219:"[",220:"\\",221:"]",222:"'",223:"`"},d=new Map([["SWITCH_PRO",new Map([[0,"B"],[1,"A"],[2,"Y"],[3,"X"],[4,"L"],[5,"R"],[6,"ZL"],[7,"ZR"],[8,"-"],[9,"+"],[10,"LStick Press"],[11,"RStick Press"],[12,"DPad Up"],[13,"DPad Down"],[14,"DPad Left"],[15,"DPad Right"],[16,"Home"],[17,"Capture"],[1e3,"LStick Left"],[1001,"LStick Right"],[1002,"LStick Up"],[1003,"LStick Down"],[1004,"RStick Left"],[1005,"RStick Right"],[1006,"RStick Up"],[1007,"RStick Down"]])],["PS4",new Map([[0,"X"],[1,"\u25CB"],[2,"\u25A1"],[3,"\u25B3"],[4,"L1"],[5,"R1"],[6,"L2"],[7,"R2"],[8,"Share"],[9,"Options"],[10,"LStick Press"],[11,"RStick Press"],[12,"DPad Up"],[13,"DPad Down"],[14,"DPad Left"],[15,"DPad Right"],[16,"Home"],[17,"Touch Pad"],[1e3,"LStick Left"],[1001,"LStick Right"],[1002,"LStick Up"],[1003,"LStick Down"],[1004,"RStick Left"],[1005,"RStick Right"],[1006,"RStick Up"],[1007,"RStick Down"]])],["XBOX_ONE",new Map([[0,"A"],[1,"B"],[2,"X"],[3,"Y"],[4,"LB"],[5,"RB"],[6,"LT"],[7,"RT"],[8,"View"],[9,"Menu"],[10,"LStick Press"],[11,"RStick Press"],[12,"DPad Up"],[13,"DPad Down"],[14,"DPad Left"],[15,"DPad Right"],[16,"Xbox Button"],[1e3,"LStick Left"],[1001,"LStick Right"],[1002,"LStick Up"],[1003,"LStick Down"],[1004,"RStick Left"],[1005,"RStick Right"],[1006,"RStick Up"],[1007,"RStick Down"]])]])},38340:(e,r,n)=>{n.d(r,{Ay:()=>y,HS:()=>E});var a=n(188507),i=n(943632),o=n(171812),s=n(299321),l=n(880934),c=n(776250),d=n(529004),u=n(356390),m=n(848661),p=n(29680),h=n(234945),_=n(279702),g=n(113468);function f(e){if(!e||!e.interactionType)return"NONE";switch(e.interactionType){case"MOUSE_IN":case"MOUSE_OUT":case"MOUSE_ENTER":case"MOUSE_LEAVE":case"MOUSE_DOWN":case"MOUSE_UP":return e.interactionType+(e.interactionMaintained?.toString()??"0");case"ON_KEY_DOWN":return e.interactionType+(e.keyTrigger?.triggerDevice??"")+(e.keyTrigger?.keyCodes?.sort().toString()??"");case"AFTER_TIMEOUT":return e.interactionType+(e.transitionTimeout?.toString()??"0");case"ON_MEDIA_HIT":return e.interactionType+(e.mediaHitTime?.toString()??"0");default:return e.interactionType}}function E(){let e=(0,a.d4)(A),r=new Set((0,a.d4)(C));return e.some(e=>{let n=e.id&&e.sourceNodeID?d.d({nodeID:e.sourceNodeID,interactionID:e.id}):void 0;return n&&r.has(n)})?g.J.NORMAL:g.J.INHERITED_INTERNAL}function y(e){let r=(0,a.d4)(A),n=(0,a.d4)(N),i=e===g.J.INHERITED_INTERNAL?n:r,o=(0,a.d4)(C),s=new Set(o),E=new Set,y=[];i.forEach((e,r)=>{let n=e.id&&e.sourceNodeID?d.d({nodeID:e.sourceNodeID,interactionID:e.id}):void 0;n&&s.has(n)&&(E.add(r),y.push(e))});let T=y.map(e=>e.actions?.length).some(e=>e!==y[0].actions?.length),L=(0===y.length?[]:y[0].actions||[]).map(e=>({...e})),O=(0,p.eY)();if(!T)for(var R=0;R<y.length;R++){let e=y[R].actions||[];for(var P=0;P<e.length;P++){let r=L[P],n=e[P];for(let e in n)r[e]?I(n,r,e,O)||(r[e]=m.oV):r[e]=n[e]}}let D=a=>(function o(s){let l=function(...o){let[l,d]=o,p=!1,h=[],f=[];for(let e in l)(0,m.gl)(U[e])?(p=!0,h.push(e)):f.push(e);let{changes:y,eventChanges:b,actionChanges:I,interactionChanges:T}=function(e){let r={},n={},a={},i={};for(let o in e)S.has(o)?a[o]=e[o]:v.has(o)?n[o]=e[o]:w.has(o)?i[o]=e[o]:r[o]=e[o];return{changes:r,eventChanges:n,actionChanges:a,interactionChanges:i}}(l),A=[];i.forEach((e,r)=>{if(E.has(r)){let r={...e.event,...b},n=[],i=e.actions||[];for(let e=0;e<i.length;e++)if(e===a){if(s.length>1){let{newPrototypeAction:r}=function(e,r,n){if(r.length>2&&e.conditionalActions){let o=e.conditionalActions,s=e.conditionalActions,l=r[1],c=s[l];var a={condition:c.condition,actions:[]},i=[];let d=c.actions?c.actions:[];for(let e=0;e<d.length;e++)e===r[2]?i.push({...d[e],...n}):i.push({...d[e]});a.actions=i,o[l]=a,e.conditionalActions=o}return{newPrototypeAction:e}}(i[e],s,I);n[e]=r}else n.push({...i[e],...I})}else n.push({...i[e]});a>=n.length&&n.push({...I}),A.push({...e,...T,event:r,actions:n})}else A.push(e)}),(0,c.sx)("prototype_update_selection_properties",{mixedUpdate:p,mixedUpdatedProperties:h,nonMixedUpdatedProperties:f,num_connector:E.size,category:e}),e===g.J.NORMAL?A=[...A,...n]:e===g.J.INHERITED_INTERNAL&&(A=[...r,...A]),y.prototypeInteractions=A,u.Y5.updateSelectionProperties(y,{shouldCommit:d?.shouldCommit||_.zk.YES,overwrite:d?.overwrite})};return l.appendActionIndex=function(e){return o([...s,e])},l})([a]),k=e=>e&&null!=e.actions?e.actions[0]:null,M=e=>{let r=k(e);if(null==r)return l.dI(e.sourceNodeID);let n=l.dI(r.transitionNodeID);return n===l.AD||null===n?l.dI(e.sourceNodeID):n},F=(e,r)=>{if(!e.actions||e.actions?.length===0||0===r.length)return null;if(!(r.length>2))return e.actions[r[0]];{let n=e.actions.length>r[0]?e.actions[r[0]]:null;if(n&&n.conditionalActions){let e=n.conditionalActions.length>r[1]?n.conditionalActions[r[1]]:null;if(e&&e.actions)return e.actions.length>r[2]?e.actions[r[2]]:null}}},x=(e,r)=>{if(null==r||void 0===r)return l.dI(e.sourceNodeID);let n=l.dI(r.transitionNodeID);return n===l.AD||null===n?l.dI(e.sourceNodeID):n},U=function(e,r){let n={},a={};for(let i of e){if(!i||!i.event)continue;for(let e in i.event)n[e]?b(i.event,n,e)||(n[e]=m.oV):n[e]=i.event[e];let e=i.actions&&{...i.actions[0]};if(e)for(let n in e)a[n]?I(e,a,n,r)||(a[n]=m.oV):a[n]=e[n]}return{...n,...a}}(y,O),B=function(e,r){let n={},a=[{}];for(let o of e){if(!o||!o.event)continue;for(let e in o.event)n[e]?b(o.event,n,e)||(n[e]=m.oV):n[e]=o.event[e];if(!o.actions)continue;let e=o.actions;var i=0;for(let n of e){for(let e in n){i>a.length-1&&a.push({});let o=a[i];o[e]?I(n,o,e,r)||(o[e]=m.oV):o[e]=n[e]}i++}}return{interactionEvent:n,interactionActions:a}}(y,O),V=new Set(o.map(e=>{let r=d.s(e);return r?l.dI(r.nodeID):""}).filter(e=>""!==e)),G=i.filter(e=>e.sourceNodeID&&V.has(l.dI(e.sourceNodeID)));var H=[...G];let W=function(){let e=(0,a.d4)(N);return Object.keys((0,a.d4)(h.Xt)).length>1?function(e){let r=[],n=new Map;for(let r of e){let e=f(r.event);n.has(e)||n.set(e,[]);let a=n.get(e);a&&a.push(r)}for(let[e,a]of n)a&&a.length>0&&a[0].event&&r.push({key:e,event:a[0].event,interactions:a});return r}(e):function(e){let r=[];if(e.length>0&&e[0].event)for(let n of e)n.event&&r.push({key:f(n.event),event:n.event,interactions:[n]});return r}(e)}();if(W.length>0)for(var R=0;R<W.length;R++){let e=W[R];for(var K=0;K<e.interactions.length;K++){let r=e.interactions[K];H.find(e=>e.id===r.id)||H.push(r)}}return{makeUpdateSelectionPropertiesForActionIndex:D,updateSelectionProperties:D(0),makeUpdateMultipleDestinationNodesForActionIndex:a=>(function a(o){let s=function(a,s,c){let d={},m=[];i.forEach(e=>{let r=F(e,o),n=x(e,r);if(r&&n&&-1!==Object.keys(a).indexOf(n)&&l.sH(a[n])){let d=l.sH(a[n]);if(d){if(!e.actions)return;var i=[];let n=o[0];if(r){if(o.length>2){let r=e.actions[n],a=o[1];if(r.conditionalActions){let n=r.conditionalActions[a],l=o[2],u=r.conditionalActions;var s={condition:r.conditionalActions[a].condition,actions:[]};if(n.actions){let m={...n.actions[l],transitionNodeID:d};var c=[...n.actions];c.splice(l,1,m),s.actions=c,u[a]=s,r.conditionalActions=u,(i=[...e.actions]).splice(o[0],1,r)}}}else{let r={...e.actions[o[0]],transitionNodeID:d};(i=[...e.actions]).splice(o[0],1,r)}m.push({...e,actions:i})}}}else m.push(e)}),e===g.J.NORMAL?m=[...m,...n]:e===g.J.INHERITED_INTERNAL&&(m=[...r,...m]),d.prototypeInteractions=m,u.Y5.updateSelectionProperties(d,{shouldCommit:s,overwrite:c})};return s.appendActionIndex=function(e){return a([...o,e])},s.updateMultipleDestinationNodes=function(e,r,n){return s},s})([a]),updateMultipleDestinationNodes:(a,o,s)=>{let c={},d=[];i.forEach(e=>{let r=M(e);if(r&&-1!==Object.keys(a).indexOf(r)&&l.sH(a[r])){let n=l.sH(a[r]);if(n){if(!e.actions)return;let r=e.actions.findIndex(e=>"INTERNAL_NODE"===e.connectionType&&"SWAP_STATE"===e.navigationType);if(-1!==r){let a={...e.actions[r],transitionNodeID:n},i=[...e.actions];i.splice(r,1,a),d.push({...e,actions:i})}}}else d.push(e)}),e===g.J.NORMAL?d=[...d,...n]:e===g.J.INHERITED_INTERNAL&&(d=[...r,...d]),c.prototypeInteractions=d,u.Y5.updateSelectionProperties(c,{shouldCommit:o,overwrite:s})},detailPropsMultipleActions:B,detailProps:U,interactionsOnSelectedNode:G,interactionsOnSelectedNodesAndComponents:H,selectedInteractions:y,mergedActions:L,differentLengthActions:T,selectedNoodleIds:o}}function b(e,r,n){if("keyTrigger"===n){let a=e[n],o=(0,m._W)(r[n],void 0);return(0,i.lu)(a?.keyCodes||[],o?.keyCodes||[])&&a?.triggerDevice===o?.triggerDevice}return e[n]===r[n]}function I(e,r,n,a){switch(n){case"transitionNodeID":let i=e[n],c=(0,m._W)(r[n],void 0);return l.aI(i,c);case"targetVariable":let d=e[n],u=r[n];if(!d&&!u)return!0;if(d&&u){if("id"in d&&"id"in u)return d.id===u.id;if("nodeFieldAlias"in d&&"nodeFieldAlias"in u){let e=d.nodeFieldAlias.stablePathToNode,r=u.nodeFieldAlias.stablePathToNode,n=e&&1===e.length?a.get(e[0]):null,i=r&&1===r.length?a.get(r[0]):null;if(n&&i&&n.isState&&i.isState&&n.containingStateGroupId===i.containingStateGroupId)return s.Egt.getExplicitPropDefIDBinding(n.guid,d.nodeFieldAlias.indexOrKey)===s.Egt.getExplicitPropDefIDBinding(i.guid,u.nodeFieldAlias.indexOrKey);return(0,o.c2)(d.nodeFieldAlias,u.nodeFieldAlias)}}return!1;case"overlayRelativePosition":let p=e[n],h=(0,m._W)(r[n],void 0);return p?.x===h?.x&&p?.y===h?.y;case"easingType":let _=e[n],f=(0,m._W)(r[n],void 0);if("CUSTOM_CUBIC"!==_||"CUSTOM_CUBIC"!==f)return _===f;return T((0,m._W)(e.easingFunction,void 0),(0,m._W)(r.easingFunction,void 0));case"easingFunction":return T(e[n],(0,m._W)(r[n],void 0));case"extraScrollOffset":let E=e[n],y=(0,m._W)(r[n],void 0);return E?.x===y?.x&&E?.y===y?.y;case"targetVariableData":return(0,g.j)(e[n],r[n],a);case"conditionalActions":let b=e[n],v=r[n];if(!(0,m.hS)(v))return!1;if(!(b&&v&&2===b.length&&2===v.length&&b[0]?.condition&&v[0]?.condition&&b[0]?.actions&&v[0]?.actions&&b[1]?.actions&&v[1]?.actions))return(0,o.c2)(e[n],r[n]);{let e=(0,g.j)(b[0].condition,v[0].condition,a),r=(e,r)=>{if(e.length!==r.length)return!1;for(let n=0;n<e.length;n++)for(let i in e[n])if(!I(e[n],r[n],i,a))return!1;return!0},n=b[0].actions,i=v[0].actions,o=n&&i&&r(n,i),s=b[1].actions,l=v[1].actions,c=s&&l&&r(s,l);return e&&o&&c}default:return e[n]===r[n]}}function T(e,r){if(e===r)return!0;if(void 0===e||void 0===r||e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==r[n])return!1;return!0}let v=new Set(["interactionType","interactionMaintained","interactionDuration","keyTrigger","transitionTimeout","mediaHitTime"]),S=new Set(["transitionNodeID","transitionType","transitionDuration","easingType","easingFunction","transitionShouldSmartAnimate","connectionType","connectionURL","targetVariable","targetVariableData","navigationType","transitionPreserveScroll","transitionResetVideoPosition","openUrlInNewTab","extraScrollOffset","mediaAction","mediaSkipToTime","mediaSkipByAmount","conditions","conditionalActions","transitionResetScrollPosition","transitionResetInteractiveComponents","targetVariableSetID","targetVariableModeID","targetVariableSetKey"]),w=new Set(["stateManagementVersion"]);function A(e){return e.mirror.selectionProperties.prototypeInteractions||[]}function N(e){return e.mirror.selectionProperties.prototypeInheritedInternalInteractions||[]}function C(e){return e.mirror.appModel.selectedInteractions}},394781:(e,r,n)=>{n.d(r,{PR:()=>s});var a=n(880934);let i=new class{constructor(){this.upgradedInteractions=new Set}getGUIDString(e){return a.dI(e)??a.dI(a.Hr)}recordInteractionUpgraded(e,r){return this.upgradedInteractions.add(`${this.getGUIDString(e)},${this.getGUIDString(r)}`)}hasInteractionBeenUpgraded(e,r){return this.upgradedInteractions.has(`${this.getGUIDString(e)},${this.getGUIDString(r)}`)}haveInteractionsBeenUpgraded(e){for(let r of e)if(!this.hasInteractionBeenUpgraded(r.id,r.sourceNodeID))return!1;return!0}haveAnyInteractionsBeenUpgraded(e){for(let r of e)if(1===r.stateManagementVersion&&this.hasInteractionBeenUpgraded(r.id,r.sourceNodeID))return!0;return!1}clearData(){this.upgradedInteractions=new Set}};class o{recordInteractionUpgraded(e,r){i.recordInteractionUpgraded(a.sH(e),a.sH(r))}}function s(){new o}},7959:(e,r,n)=>{n.d(r,{$4:()=>w,Id:()=>f,JU:()=>L,K0:()=>h.K0,Me:()=>h.Me,UZ:()=>O,YW:()=>h.YW,Zk:()=>E,fI:()=>b,hl:()=>I,jT:()=>N,ks:()=>C,xZ:()=>S,xw:()=>v,zi:()=>y});var a=n(411855),i=n(629019),o=n.n(i),s=n(153234),l=n(522739),c=n(452441);n(163023);var d=n(283942);n(498606);var u=n(925782),m=n(37173),p=n(447141),h=n(227795);let _=(e,r)=>({...e,className:`${r} ${e.className||""}`});function g(e){let r=a.useMemo(()=>(0,m.v)(e,"ModalPanel"),[e]);return a.createElement(l.D8,{..._(r,p.a2),"data-non-interactive":!0})}function f(e){return a.createElement(g,{...e})}class E extends s.o6{render(){return a.createElement(l.D8,{...(0,m.v)(_(this.props,"propertiesPanel"),"Panel"),"data-non-interactive":!0})}}E.displayName="Panel";class y extends s.o6{render(){return a.createElement(l.D8,{...(0,m.v)(_(this.props,"propertiesPanel"),"Panel"),"data-non-interactive":!0})}}y.displayName="Panel";class b extends s.o6{render(){let e;let{selected:r,selectedSecondary:n,heightMultiplier:i,...o}=this.props,s=n?p.kR:r?p.CZ:null;return e=2===i?p.X0:1.25===i?p.ht:1.5===i?p.LE:p.l$,s&&(e+=" "+s),a.createElement(l.D8,{..._(o,e),"data-non-interactive":!0})}}function I(e){return a.createElement(l.D8,{..._(e,p.Zz),"data-non-interactive":!0})}function T(e){let{doNotReserveSpaceForChevron:r,faded:n,extended:i,innerRef:o,isPanelBodyCollapsedAtom:s,forceNoChevron:c,...d}=e,m=p.Dn;e.faded&&(m=p.Tz),e.extended&&(m=p.iY),s&&(m=m+" "+p.bW),c&&(m+=` ${p.sI}`);let h=_(d,m);return a.createElement(l.D8,{...h,forwardedRef:o},!r&&a.createElement(u.r2,{isPanelBodyCollapsedAtom:s||null}),e.children)}function v(e){return a.createElement(T,{...e})}function S(e){return a.createElement(T,{...e})}function w({...e}){return a.createElement("div",{..._(e,p.DS),dir:"auto"})}function A({noLeftBorder:e,squareRightBorder:r,noBorderOnFocus:n,noPlaceholderLine:a,softDisabled:i,className:s,...l}){return e&&(s+=` ${p.Z4}`),r&&(s+=` ${p.O1}`),n||(s+=` ${p.PQ}`),a&&(s+=` ${p.LJ}`),i&&(s+=` ${p.EA}`),Object.assign(l,{className:o()(p._Z,s)})}b.displayName="Row";let N=a.forwardRef(function(e,r){let n=A(e);return a.createElement(l.u2,{autoComplete:"false",spellCheck:!1,forwardedRef:r,...n})});class C extends a.PureComponent{constructor(){super(...arguments),this.onKeyDown=e=>{!(0,d.jr)(e,d.W0.NO)&&this.props.onKeyDown&&this.props.onKeyDown(e)}}render(){let e=A(this.props);return a.createElement(c.L,{"data-testid":this.props.dataTestId,type:"text",spellCheck:!1,...e,onKeyDown:this.onKeyDown,ref:e.innerRef})}}function L({disabled:e,...r}){return a.createElement("label",{..._(r,e?p.wh:p.Pf),dir:"auto"})}function O(e){return a.createElement("label",{..._(e,p.wh)})}C.displayName="TextInput",a.forwardRef((e,r)=>{let{className:n,...i}=A(e);return a.createElement(l.D8,{...i,className:o()(n,p.PB),forwardedRef:r,tabIndex:0})})},544403:(e,r,n)=>{var a=n(411855),i=n(723215),o=n(243742),s=n(629019),l=n.n(s),c=n(134288),d=n(62935),u=n(461593);let m=(0,a.createContext)(()=>null),p=(0,a.forwardRef)(function({size:e,defaultSize:r,animation:n,disableResizing:i,unsetSizeWhenDisabled:o,onResize:s,side:l,children:u,style:p,..._},g){let f=(0,d.M)(g),E=(0,a.useCallback)(()=>f.current,[f]),y=(0,a.useRef)(0),b=(0,a.useRef)(0),I="left"===l?-1:1,T=a.createElement(m.Provider,{value:E},u,i?null:a.createElement(h,{side:l,onDragStart:()=>{b.current=e,y.current||(y.current=e)},onDrag:e=>{let r="bottom"===l?e.delta.y:e.delta.x;s(b.current+r*I)},onDoubleClick:()=>{s(r??y.current)}})),v=i&&o?void 0:e,S="left"===l||"right"===l?v:void 0,w="bottom"===l?v:void 0,A=p?{...p,width:S,height:w}:{width:S,height:w};return n?a.createElement(c.P.div,{style:A,..._,ref:f,...n},T):a.createElement("div",{style:A,..._,ref:f},T)});function h({side:e,onDoubleClick:r,onDragStart:n,onDrag:o}){let[,s]=(0,i.i)({onDragStart:n,onDrag:o});return a.createElement("div",{role:"separator","aria-hidden":!0,...s({className:l()({[u.horizontalHandle]:"left"===e||"right"===e,[u.verticalHandle]:"bottom"===e,[u[e]]:!0}),onDoubleClick:r})})}(0,a.forwardRef)(function(e,r){let{version:n}=(0,o.DP)(),{size:i,defaultSize:s,animation:l,disableResizing:c,onResize:d,side:u,children:m,...h}=e;return"ui2"===n?a.createElement("div",{...h,ref:r},m):a.createElement(p,{...e,ref:r})})},244614:(e,r,n)=>{n.d(r,{Yq:()=>s,sH:()=>i,sI:()=>a}),n(299321).eVK.MIDDLE_CENTER;let a=.01,i=100;var o=(e=>(e.TextInput="text-input",e.Selector="selector",e))(o||{}),s=(e=>(e.Select="select",e.Input="input",e.Scrub="scrub",e.Width="width",e.Height="height",e))(s||{})},692142:(e,r,n)=>{n(411855),n(188507),n(299321),n(629019),n(62935),n(153234),n(617453),n(555074),n(869156),n(318812),n(279702),n(498606),n(218973),n(282263),n(683859),n(564092),n(533573),n(163023),n(538697),n(221537),n(252957)},876618:(e,r,n)=>{n(411855),n(188507),n(939683),n(622422),n(966712),n(848661),n(555074),n(29680),n(601607),n(234945),n(279702),n(32067),n(221537)},221537:(e,r,n)=>{n.d(r,{rO:()=>M}),n(411855),n(188507),n(67151);var a=n(340970),i=n(876579),o=n(698558),s=n(174496),l=n(532123),c=n(447501),d=n(902470),u=(n(299321),n(275556));n(496450),n(939683),n(44948),n(794272),n(966712);var m=n(374626),p=n(38580),h=(n(939863),n(973149)),_=n(83909);n(356390),n(617453),n(848661);var g=n(113058);n(555074),n(301462),n(234945),n(279702);var f=n(649295),E=n(969756),y=n(528822),b=n(355593),I=n(312077),T=n(792594),v=n(804264),S=n(127027),w=n(904459),A=n(715682),N=n(904595),C=n(396347),L=n(182586),O=n(464397),R=n(317392),P=n(183919),D=n(255032),k=(e=>(e[e.TOP=0]="TOP",e[e.RIGHT=1]="RIGHT",e[e.BOTTOM=2]="BOTTOM",e[e.LEFT=3]="LEFT",e[e.HORIZONTAL=4]="HORIZONTAL",e[e.VERTICAL=5]="VERTICAL",e[e.ALL=6]="ALL",e))(k||{});function M(e){return"SPACE_EVENLY"===e||"SPACE_BETWEEN"===e}function F(e,r,n){return e!==r&&(_.wt.reportAnyPropertyChange([n]),!0)}P.A,R.A,C.A,O.A,D.A,L.A,N.A,a.z,i.M,o.v,s.R,l.K,c.y,d.z,v.A,S.A,y.A,b.A,I.A,T.A,f.A,E.A,A.A,A.A,w.A,w.A;class x extends g.M{getValueForNode(e){return M(e.stackPrimaryAlignItems)?null:e.stackSpacing}setValueForNode(e,r){!M(e.stackPrimaryAlignItems)&&F(e.stackSpacing,r,"stackSpacing")&&u.l7.user("set-stack-spacing",()=>{e.stackSpacing=r})}}new x;class U extends g.M{getValueForNode(e){return e.stackCounterSpacing}setValueForNode(e,r){F(e.stackCounterSpacing,r,"stackCounterSizing")&&u.l7.user("set-stack-counter-spacing",()=>{e.stackSpacing=r})}}new U,h.Lk,h.Lk,(0,m.M2)((0,p.eU)({width:{min:!1,max:!1},height:{min:!1,max:!1}})),(0,m.M2)((0,p.eU)(null)),(0,m.M2)((0,p.eU)(null));var B=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.YES_ONLY_MIN_MAX=2]="YES_ONLY_MIN_MAX",e))(B||{})},12519:(e,r,n)=>{n.d(r,{gm:()=>s,pW:()=>o});var a=n(411855);n(188507),n(299321),n(275556),n(629019),n(163023),n(46481),n(939863),n(356390),n(617453),n(848661),n(555074),n(301462),n(279702),n(498606),n(218973),n(760066),n(952675),n(538697),n(377835),n(893606),n(692142),n(876618),n(221537);var i=n(329652);function o({OriginalComponent:e,...r}){return a.createElement(e,{...r,inputClassName:i.be,iconClassName:i.Kk})}function s({OriginalComponent:e,...r}){return a.createElement(e,{...r,outerClassName:i.kk,pillsContainerClassName:i.j1})}},830002:(e,r,n)=>{n.d(r,{D5:()=>T,Tj:()=>I});var a=n(411855),i=n(188507),o=n(794272),s=n(153234),l=n(522739),c=n(236478),d=n(226055),u=n(848661),m=n(498606),p=n(538697),h=n(347495),_=n(994481),g=n(45148),f=n(731262),E=n(759209);let y={format:e=>e||f.xJ};function b(e){let{propertyValueEntries:r,selectedStatesPropertyValues:n,stateGroupPropertyValues:i,onSelectProperty:o,dropdownShown:f,hideErrorsPanel:b,dispatch:I,shouldIndent:T,extended:v}=e,S=(0,d.GS)(),w=a.useRef([]),A=a.useCallback(e=>{if(!w.current)return!1;let r=w.current[e];return!!r&&r.offsetWidth<r.scrollWidth},[]);return a.createElement(l.D8,{className:E.wG,"data-non-interactive":!0},r.length>0&&a.createElement("div",{className:S?void 0:E.em},r.map((r,l)=>{let{property:d,label:g}=r,b=n[d],N=i[d],C=E.Aq;T&&(C=v?E.aM:E.L8);let L=a.createElement("p",{ref:e=>w.current?.push(e),className:S?void 0:C,"data-tooltip-type":m.Ib.TEXT,"data-tooltip":A(l)?d:null},g),O="TOGGLE"===r.type?a.createElement(h.l,{toggleClassName:v?E.lV:E.E3,on:(0,u.hS)(b)?b===r.toggleTokenPair[0]:u.oV,onChange:e=>{o(d,r.toggleTokenPair[e?0:1])},recordingKey:s.Pt(e,`toggle-${d}`),forwardEventsToFullscreen:!0}):a.createElement(p.l6,{id:`states-property-select-${d}-${e.recordingKey}`,className:S?void 0:v?E.mi:E.ZE,property:b,formatter:y,onChange:e=>{o(d,e)},dispatch:I,dropdownShown:f,onMouseDown:()=>I(c.r),recordingKey:s.Pt(e,`select-${d}`)},[...N].map(r=>a.createElement(p.c$,{key:r,value:r,truncateInMiddle:!0,recordingKey:s.Pt(e,`select-${d}-option-${r}`)})));return S?a.createElement(_.cS,{key:d,label:L,input:O}):a.createElement(a.Fragment,{key:d},L,O)})),!b&&a.createElement(g.aq,null))}function I(e,r,n){let a=[{property:r,value:n}];for(let n of e)n.property!==r&&a.push({...n});return a}function T(e,r){let n=r.map(e=>e.toLowerCase()),a=null;if(2===r.length)for(let e of f.NE){let i=n.indexOf(e[0]),o=n.indexOf(e[1]);-1!==i&&-1!==o&&(a=[r[i],r[o]])}return a?{property:e,type:"TOGGLE",label:e,toggleTokenPair:a}:{property:e,type:"SELECT",label:e}}a.memo(function(e){let{sortedProperties:r,stateGroupPropertyValues:n,selectedStatesPropertyValues:s,selectedStates:l,allStates:c,onSelectProperty:d,recordingKey:u,hideErrorsPanel:m,shouldIndent:p,extended:h}=e,_=(0,i.wA)(),{dropdownShown:g,sceneGraphSelection:E}=(0,o.R)(e=>({dropdownShown:e.dropdownShown,sceneGraphSelection:e.mirror.sceneGraphSelection})),[y,v]=a.useState([]);a.useEffect(()=>{v([])},[E]);let S=n?r.map(e=>T(e,n[e])):[];return a.createElement(b,{propertyValueEntries:S,selectedStatesPropertyValues:s,stateGroupPropertyValues:n,onSelectProperty:function(e,r){let n=I(y,e,r),a={};for(let i of l){let{propertyValues:o}=i.stateInfo,s={...o,[e]:r},l=(0,f.kz)(s,n,c);null!==l&&(a[i.symbol.node_id]=l)}d(a),v(n)},dropdownShown:g,recordingKey:u,hideErrorsPanel:m,dispatch:_,shouldIndent:p,extended:h})})},690710:(e,r,n)=>{n.d(r,{D1:()=>g,Hf:()=>u,NA:()=>m,OC:()=>p,_f:()=>_,i$:()=>c,ow:()=>h});var a=n(299321),i=n(97395),o=n(335682),s=n(731262);function l(e){return e.mirror.selectionProperties.stateGroupSelectionInfo}function c(e){return l(e)?.mode}function d(e){let r=l(e);return r&&r.mode!==a.iCO.NONE&&r.mode!==a.iCO.NON_STATE_COMPONENTS?r.stateGroupModel:null}let u=(0,i.Zm)(function(e){return d(e)?.stateGroupError});function m(e){let r=l(e);return r&&r.mode!==a.iCO.NONE&&r.mode!==a.iCO.NON_STATE_COMPONENTS?r.stateGroup:null}let p=(0,i.Zm)(function(e){return d(e)?.propertySortOrder}),h=(0,i.P8)([l,o.sS,o.XJ],(e,r,n)=>e&&e.mode!==a.iCO.NONE&&e.mode!==a.iCO.NON_STATE_COMPONENTS?e.allStates.map(e=>(0,s.dq)(e,r,n)):null),_=(0,i.P8)([l,o.sS,o.XJ],(e,r,n)=>e&&(e.mode===a.iCO.STATE||e.mode===a.iCO.STATE_INSTANCE||e.mode===a.iCO.STATE_OR_STATE_INSTANCE_SUBLAYER)?e.selectedStates.map(e=>(0,s.dq)(e,r,n)):null),g=(0,i.P8)([_,c,d],(e,r,n)=>e&&n&&(r===a.iCO.STATE||r===a.iCO.STATE_INSTANCE||r===a.iCO.STATE_OR_STATE_INSTANCE_SUBLAYER)?(0,s.m4)(e,n.propertySortOrder||[]):null)},731262:(e,r,n)=>{n.d(r,{A:()=>E,Jj:()=>b,NE:()=>C,O4:()=>L,QV:()=>T,bk:()=>w,dq:()=>A,kz:()=>I,m4:()=>f,pg:()=>y,q1:()=>S,uL:()=>N,xJ:()=>_,zb:()=>v,zh:()=>g});var a=n(411855);n(188507);var i=n(299321),o=n(259120),s=n(302245),l=n(776250),c=n(83909),d=n(356390),u=n(843495),m=n(848661),p=n(335682),h=n(416095);let _="\u2014";function g(e,r){return Object.keys(e).sort((e,n)=>r.indexOf(e)-r.indexOf(n)).map(r=>`${r}=${e[r]}`).join(", ")}function f(e,r,n){let a={};for(let i of e){if(void 0!==i.actionIndexPath&&void 0!==n&&i.actionIndexPath.some((e,r)=>e!==n[r]))continue;let{propertyValues:e}=i.stateInfo;if(e)for(let n of r)n in a&&a[n]!==e[n]?a[n]=a[n]&&e[n]?m.oV:"":a[n]=e[n]||""}return a}function E(e){let r=i.bwI.NONE;for(let n of e)n.stateInfo.stateError&&n.stateInfo.stateError>r&&(r=n.stateInfo.stateError);return r}function y(e,r){return e.filter(e=>e.stateInfo.stateError===r)}function b(e,r,n){let a=[],i=0;for(let e of n){let n=e.propertyValues;if(!n)continue;let o=0;for(let e of r){if(e.value!==n[e.property])break;o++}o>i?(i=o,a=[e]):o===i&&a.push(e)}if(0===i)return null;let o=null,s=1/0;for(let r of a){let n=function(e,r){let n=0;for(let a in e)e[a]!==m.oV&&e[a]!==r[a]&&n++;return n}(e,r.propertyValues);n<s&&(s=n,o=r)}return o}function I(e,r,n){let a=[],i=0;for(let e of n){let n=e.stateInfo.propertyValues;if(!n)continue;let o=0;for(let e of r){if(e.value!==n[e.property])break;o++}o>i?(i=o,a=[e]):o===i&&a.push(e)}if(0===i)return null;let o=null,s=1/0;for(let r of a){let n=function(e,r){let n=0;for(let a in e)e[a]!==m.oV&&e[a]!==r[a]&&n++;return n}(e,r.stateInfo.propertyValues);n<s&&(s=n,o=r)}return o}function T(e){return e.replace(/[,=]/g,"").trim()}function v(e,r,n){let a=i.glU.getStateGroupAnalyticsInfo(r);(0,l.sx)(e,{...a,...n||{}})}function S(e,r,n,a){if(""===(r=T(r))||e===r||-1===a.indexOf(e))return;let i=[...a];i[i.indexOf(e)]=r,n.forEach(n=>{let a=n.stateInfo.propertyValues;a&&(a={...a})[e]&&(a[r]=a[e],delete a[e],e!==r&&c.wt.reportEditAction("rename-property"),u.i(n.symbol.node_id,g(a,i)))}),d.Y5.commit()}function w(e,r,n,a){v("Deleting Property from Variant Component",a),r.forEach(r=>{let a=r.stateInfo.propertyValues;if(!a)return;for(let r of(a={...a},e))a[r]&&delete a[r];let i=g(a,n);""===i&&(i="Property 1=Default"),c.wt.reportEditAction("delete-prop"),u.i(r.symbol.node_id,i)}),d.Y5.commit()}function A(e,r,n){return{stateInfo:e.stateInfo,symbol:(0,h.i_)(null,null,e.symbol,r||"",n||(0,o.l)("")),actionIndexPath:function(e){if(!e)return[];let r=e.match(/\{(.*?)\}/);return!r||r.length<2?[]:r[1].trim().split(",").map(e=>parseFloat(e.trim()))}(e.actionIndexPath)}}a.createContext(null);let N=(0,s.Mz)([e=>e.mirror.selectionProperties.stateGroupSelectionInfo,p.sS,p.XJ],function(e,r,n,a){if(!e)return null;let o=e.mode;if(o===i.iCO.NONE)return null;if(o===i.iCO.NON_STATE_COMPONENTS)return{mode:o,numSelectedNonStateComponents:e.numSelectedNonStateComponents};let s=e.stateGroup,l=e.stateGroupModel,c=l?.propertySortOrder?.length===1,d=e.allStates.map(e=>A(e,r,n));if(o===i.iCO.STATE_GROUP)return{mode:o,stateGroup:s,stateGroupModel:l,allStates:d,modelIsOneDimensional:c};let u=e.selectedStates.map(e=>A(e,r,n)),m=f(u,l.propertySortOrder||[],a);return i.iCO.STATE,{mode:o,stateGroup:s,stateGroupModel:l,allStates:d,modelIsOneDimensional:c,selectedStates:u,selectedStatesPropertyValues:m}}),C=[["yes","no"],["true","false"],["on","off"]],L=C.reduce((e,r)=>e.concat(r),[])},376503:(e,r,n)=>{n.d(r,{$6:()=>tp,EN:()=>td,NC:()=>tl,OH:()=>tc,SO:()=>ts,Th:()=>tm,_2:()=>ty,mP:()=>tu});var a=n(411855),i=n(188507),o=n(720245),s=n(902237),l=n(978783),c=n(921738),d=n(75819),u=n(319806),m=n(731369),p=n(900729),h=n(610155),_=n(245952),g=n(193753),f=n(706562),E=n(167),y=n(131449),b=n(586174),I=n(26172),T=n(339467),v=n(566506),S=n(871027),w=n(353344),A=n(885895),N=n(794105),C=n(443908),L=n(703828),O=n(459123),R=n(892535),P=n(299321),D=n(91408),k=n(966712),M=n(153234),F=n(572206),x=n(46481),U=n(348425),B=n(736242),V=n(939863),G=n(293017),H=n(31043),W=n(297336),K=n(226055),Y=n(356390),$=n(848661),j=n(29680),z=n(100197),q=n(279702),X=n(498606),J=n(218973),Z=n(205135),Q=n(7959),ee=n(276660),et=n(538697),er=n(746806),en=n(837746),ea=n(383173),ei=n(106524),eo=n(7479),es=n(313876),el=n(613887),ec=n(568154),ed=n(810381),eu=n(410671),em=n(796476),ep=n(625536),eh=n(761285),e_=n(430712),eg=n(920003),ef=n(110111),eE=n(134316),ey=n(800467),eb=n(234496),eI=n(222396),eT=n(144983),ev=n(237419),eS=n(824356),ew=n(316179),eA=n(900897),eN=n(260934),eC=n(729920),eL=n(161349),eO=n(748839),eR=n(467172),eP=n(155450),eD=n(706449),ek=n(204931),eM=n(328176),eF=n(340598),ex=n(625819),eU=n(660984),eB=n(641594),eV=n(773248),eG=n(710011),eH=n(98221),eW=n(15305),eK=n(822834),eY=n(494491),e$=n(554473),ej=n(866014),ez=n(448760),eq=n(256735),eX=n(595324),eJ=n(511219),eZ=n(123262),eQ=n(151809),e0=n(20918),e1=n(606409),e2=n(292030),e3=n(41025),e6=n(240078);let e5=(0,D.hG)(en.hhC);class e8 extends ee.I{}class e4 extends ee.Y{}class e9 extends et.l6{}class e7 extends et.c${}class te{constructor(){this.format=e=>{switch(e){case"LINE":return(0,V.t)("fullscreen.properties_panel.stroke_settings.solid");case"SIMPLE_DASH":return(0,V.t)("fullscreen.properties_panel.stroke_settings.simple_dash");case"CUSTOM_DASH":return(0,V.t)("fullscreen.properties_panel.stroke_settings.custom");default:return""}}}}class tt extends ee.I{}class tr extends ee.Y{}function tn(e){return e.dashCap?(0,k.kc)().ce_tv_fpl_segmented_control?a.createElement("span",{className:e.className},a.createElement(o.bL,{value:(0,$.hS)(e.dashCap)?e.dashCap:void 0,onChange:e.onChange,legend:a.createElement(s.q,null,(0,V.t)("fullscreen.properties_panel.stroke_settings.dash_cap")),recordingKey:e.recordingKey},a.createElement(o.c$,{icon:a.createElement(x.U,{svg:ef.A,fallbackSvg:eE.A},a.createElement(d.Q,null)),value:"NONE","aria-label":(0,V.t)("fullscreen.properties_panel.stroke_settings.none")}),a.createElement(o.c$,{icon:a.createElement(x.U,{svg:eI.A,fallbackSvg:eT.A},a.createElement(u.J,null)),value:"SQUARE","aria-label":(0,V.t)("fullscreen.properties_panel.stroke_settings.square")}),a.createElement(o.c$,{icon:a.createElement(x.U,{svg:ey.A,fallbackSvg:eb.A},a.createElement(m.E,null)),value:"ROUND","aria-label":(0,V.t)("fullscreen.properties_panel.stroke_settings.round")}))):a.createElement(tt,{className:e.className,property:e.dashCap,onChange:e.onChange,recordingKey:e.recordingKey},a.createElement(tr,{svg:ef.A,fallbackSvg:eE.A,value:"NONE",tooltip:(0,V.t)("fullscreen.properties_panel.stroke_settings.none"),recordingKey:M.Pt(e,"NONE")}),a.createElement(tr,{svg:eI.A,fallbackSvg:eT.A,value:"SQUARE",tooltip:(0,V.t)("fullscreen.properties_panel.stroke_settings.square"),recordingKey:M.Pt(e,"SQUARE")}),a.createElement(tr,{svg:ey.A,fallbackSvg:eb.A,value:"ROUND",tooltip:(0,V.t)("fullscreen.properties_panel.stroke_settings.round"),recordingKey:M.Pt(e,"ROUND")})):null}function ta(e){return e?(0,$.gl)(e)?$.oV:0===e.length?"LINE":2!==e.length?"CUSTOM_DASH":0===e[0]&&0===e[1]?"LINE":"SIMPLE_DASH":"LINE"}function ti(e){if(e){if((0,$.gl)(e))return $.oV;if(2===e.length)return e[0]}}function to(e){let r=(0,i.wA)(),n=(0,j.ax)(),d=new te,{strokePanelMode:u,maxStrokeWeight:m,dashPattern:_,connectorLineStyle:g}=e,f=r=>{e.onChange({connectorLineStyle:r})},[E,y]=a.useState(ta(_));a.useEffect(()=>{y(ta(_))},[_]);let[b,I]=a.useState(!0),[T,v]=a.useState(),S=ti(_),w=function(e){if(e){if((0,$.gl)(e))return $.oV;if(2===e.length)return e[1]}}(_),A=()=>{if(!_||(0,$.gl)(_)||2!==_.length)return;I(!0);let r=_[0];e.onChange({dashPattern:[r,r]})},N=a.useRef("NONE"),C=a.createRef(),L=a.createRef(),O=a.createRef();a.useEffect(()=>{if("NONE"!==N.current){if("FOCUS_CURRENT_EVENT"===N.current)switch(E){case"SIMPLE_DASH":L.current?.focus(),L.current?.select();break;case"CUSTOM_DASH":C.current?.focus(),C.current?.select()}"FOCUS_NEXT_EVENT"===N.current?N.current="FOCUS_CURRENT_EVENT":N.current="NONE"}},[_,E,L,C]);let R=function(e){if((0,$.gl)(e))return $.oV;switch(e){case"NONE":case"ROUND":case"SQUARE":return e;default:return}}(e.dashCap),D=u===P.yTM.VERTEX||u===P.yTM.ENDPOINT,F=(0,i.d4)(e=>e.mirror.selectionProperties.numSelectedByType),U=(0,W.vx)(F,"CONNECTOR"),G=T??E;return a.createElement("div",{className:ea.wO},U&&void 0!==g&&a.createElement(Q.fI,null,a.createElement(Q.JU,{className:U?ea.Tm:ea.Uk},(0,V.tx)("fullscreen.properties_panel.stroke_settings.path_style")),(0,k.kc)().ce_tv_fpl_segmented_control?a.createElement("span",{className:ea.rI},a.createElement(o.bL,{value:(0,$.hS)(g)?g:void 0,onChange:f,legend:a.createElement(s.q,null,(0,V.t)("fullscreen.properties_panel.stroke_settings.path_style")),recordingKey:M.Pt(e,"pathStyle")},a.createElement(o.c$,{icon:a.createElement(x.U,{svg:e6.A},a.createElement(p.h,null)),value:"STRAIGHT","aria-label":(0,V.t)("fullscreen.properties_panel.stroke_settings.straight")}),a.createElement(o.c$,{icon:a.createElement(x.U,{svg:e2.A,fallbackSvg:e3.A},a.createElement(h.S,null)),value:"ELBOWED","aria-label":(0,V.t)("fullscreen.properties_panel.stroke_settings.elbowed")}))):a.createElement(e8,{className:ea.rI,property:g,onChange:f,recordingKey:M.Pt(e,"pathStyle")},a.createElement(e4,{svg:e6.A,value:"STRAIGHT",tooltip:(0,V.t)("fullscreen.properties_panel.stroke_settings.straight"),recordingKey:M.Pt(e,"STRAIGHT")}),a.createElement(e4,{svg:e2.A,fallbackSvg:e3.A,value:"ELBOWED",tooltip:(0,V.t)("fullscreen.properties_panel.stroke_settings.elbowed"),recordingKey:M.Pt(e,"ELBOWED")}))),a.createElement(Q.fI,null,a.createElement(Q.JU,{className:D?ea.VB:ea._f},(0,V.tx)("fullscreen.properties_panel.stroke_settings.stroke_style")),a.createElement(e9,{id:"line-style-select",className:ea.au,property:E,formatter:d,onChange:(r,n=q.zk.YES)=>{N.current="FOCUS_NEXT_EVENT";let a=2*(m??1);switch(r){case"LINE":e.onChange({dashPattern:[]},n);break;case"SIMPLE_DASH":e.onChange({dashPattern:[a,a]},n);break;case"CUSTOM_DASH":e.onChange({dashPattern:[a,2*a,3*a,4*a]},n)}},dispatch:r,dropdownShown:e.dropdownShown,dropdownWidth:120,recordingKey:M.Pt(e,"strokeStyle"),icon:function(e){switch(e){case"LINE":return a.createElement(x.U,{svg:e0.A,fallbackSvg:e1.A},a.createElement(l.t,null));case"SIMPLE_DASH":return a.createElement(x.U,{svg:eZ.A,fallbackSvg:eQ.A},a.createElement(c.S,null));default:return}}(E),iconClassName:D?ea.uX:ea.eD,disabled:D,onPreview:e=>{v(e)},enablePreview:n},a.createElement(e7,{additionalStylesClassName:ea.Z,value:"LINE",recordingKey:M.Pt(e,"LINE")},a.createElement("span",{className:ea.Z},a.createElement(x.U,{className:ea.yW,svg:e0.A,fallbackSvg:e1.A},a.createElement(l.t,null)),a.createElement(B.o,{text:d.format("LINE")}))),a.createElement(e7,{value:"SIMPLE_DASH",recordingKey:M.Pt(e,"SIMPLE_DASH"),additionalStylesClassName:ea.Z},a.createElement("span",{className:ea.Z},a.createElement(x.U,{svg:eZ.A,fallbackSvg:eQ.A,className:ea.yW},a.createElement(c.S,null)),a.createElement(B.o,{text:d.format("SIMPLE_DASH")}))),a.createElement(et.sK,null),a.createElement(e7,{value:"CUSTOM_DASH",recordingKey:M.Pt(e,"CUSTOM_DASH")}))),("SIMPLE_DASH"===G||G===$.oV)&&a.createElement(a.Fragment,null,a.createElement(Q.fI,null,a.createElement(Q.JU,{className:D?ea.S_:ea.bP},(0,V.tx)("fullscreen.properties_panel.stroke_settings.dash")),a.createElement(J.$j,{className:ea.T7,min:0,value:ti(_),onValueChange:r=>{let n;if(N.current="NONE",!_||(0,$.gl)(_)||2!==_.length)n=[r,r];else{let e=_[0],a=_[1];n=b&&e===a?[r,r]:[r,a]}e.onChange({dashPattern:n})},dispatch:r,smallNudgeAmount:1,bigNudgeAmount:10,recordingKey:M.Pt(e,"dash"),"data-tooltip-type":X.Ib.TEXT,"data-tooltip":(0,V.t)("fullscreen.properties_panel.stroke_settings.dash"),tooltipForScreenReadersOnly:!0,forwardedRef:L,disabled:D})),a.createElement(Q.fI,null,a.createElement(Q.JU,{className:D?ea.qF:ea.Jd},(0,V.tx)("fullscreen.properties_panel.stroke_settings.gap")),a.createElement(J.$j,{className:ea.rQ,min:0,value:void 0!==w&&(0,$.hS)(w)&&b&&S===w?void 0:w,placeholder:void 0!==w&&(0,$.hS)(w)&&b&&S===w?String(parseFloat(w.toFixed(2))):void 0,onValueChange:r=>{let n;N.current="NONE",I(!1),n=!_||(0,$.gl)(_)||2!==_.length?[r,r]:[_[0],r],e.onChange({dashPattern:n})},onBlur:e=>{O.current?.value===""&&A()},dispatch:r,smallNudgeAmount:1,bigNudgeAmount:10,recordingKey:M.Pt(e,"gap"),"data-tooltip-type":X.Ib.TEXT,"data-tooltip":(0,V.t)("fullscreen.properties_panel.stroke_settings.gap"),tooltipForScreenReadersOnly:!0,forwardedRef:O,disabled:D}))),"CUSTOM_DASH"===G&&a.createElement(Q.fI,null,a.createElement(Q.JU,{className:D?ea.g5:ea.Rm},(0,V.tx)("fullscreen.properties_panel.stroke_settings.dashes")),a.createElement(Z.nA,{className:ea.Ng,forwardedRef:C,formatter:H.B,property:e.dashPattern,onChange:r=>{e.onChange({dashPattern:r})},placeholder:(0,V.t)("fullscreen.properties_panel.stroke_settings.dash_gap"),recordingKey:M.Pt(e,"dashes"),disabled:D})),(u===P.yTM.VECTOR||u===P.yTM.LINE)&&("SIMPLE_DASH"===G||"CUSTOM_DASH"===G)&&void 0!==R&&a.createElement(Q.fI,null,a.createElement(Q.JU,{className:ea.$E},(0,V.tx)("fullscreen.properties_panel.stroke_settings.dash_cap")),a.createElement(tn,{className:ea.pl,dashCap:R,onChange:r=>{e.onChange({dashCap:r})},recordingKey:M.Pt(e,"dashCap")})))}to.displayName="StrokeLineStyleSettings";class ts extends et.l6{}class tl extends et.c${}class tc{constructor(){this.format=e=>{switch(e){case"NONE":return(0,V.t)("fullscreen.properties_panel.stroke_settings.none");case"ARROW_LINES":return(0,V.t)("fullscreen.properties_panel.stroke_settings.line_arrow");case"ARROW_EQUILATERAL":return(0,V.t)("fullscreen.properties_panel.stroke_settings.triangle_arrow");case"TRIANGLE_FILLED":return(0,V.t)("fullscreen.properties_panel.stroke_settings.reversed_triangle");case"CIRCLE_FILLED":return(0,V.t)("fullscreen.properties_panel.stroke_settings.circle_arrow");case"DIAMOND_FILLED":return(0,V.t)("fullscreen.properties_panel.stroke_settings.diamond_arrow");case"ROUND":return(0,V.t)("fullscreen.properties_panel.stroke_settings.round");case"SQUARE":return(0,V.t)("fullscreen.properties_panel.stroke_settings.square");case"HIGHLIGHT":case"WASHI_TAPE_1":case"WASHI_TAPE_2":case"WASHI_TAPE_3":case"WASHI_TAPE_4":case"WASHI_TAPE_5":case"WASHI_TAPE_6":return""}}}}let td={format(e){switch(e){case"NONE":return(0,V.t)("fullscreen.properties_panel.stroke_settings.none");case"ARROW_LINES":return(0,V.t)("fullscreen.properties_panel.section_stroke.dropdown_startEndPoint.value_line");case"ARROW_EQUILATERAL":return(0,V.t)("fullscreen.properties_panel.section_stroke.dropdown_startEndPoint.value_triangle");case"TRIANGLE_FILLED":return(0,V.t)("fullscreen.properties_panel.section_stroke.dropdown_startEndPoint.value_reversed");case"CIRCLE_FILLED":return(0,V.t)("fullscreen.properties_panel.section_stroke.dropdown_startEndPoint.value_circle");case"DIAMOND_FILLED":return(0,V.t)("fullscreen.properties_panel.section_stroke.dropdown_startEndPoint.value_diamond");case"ROUND":return(0,V.t)("fullscreen.properties_panel.stroke_settings.round");case"SQUARE":return(0,V.t)("fullscreen.properties_panel.stroke_settings.square");case"HIGHLIGHT":case"WASHI_TAPE_1":case"WASHI_TAPE_2":case"WASHI_TAPE_3":case"WASHI_TAPE_4":case"WASHI_TAPE_5":case"WASHI_TAPE_6":return""}}},tu=["NONE","ARROW_LINES","ARROW_EQUILATERAL","TRIANGLE_FILLED","CIRCLE_FILLED","DIAMOND_FILLED"],tm=["ROUND","SQUARE"],tp=["NONE","ROUND","SQUARE"];function th(e,r){switch(e){case"NONE":return"default"===r?ex.A:eU.A;case"ARROW_LINES":return"default"===r?ek.A:eM.A;case"ARROW_EQUILATERAL":return"default"===r?e$.A:ej.A;case"TRIANGLE_FILLED":return"default"===r?eV.A:eG.A;case"DIAMOND_FILLED":return"default"===r?eO.A:eR.A;case"CIRCLE_FILLED":return"default"===r?eA.A:eN.A;case"ROUND":return ev.A;default:return eS.A}}function t_(e){let r=(0,i.wA)(),n=new tc,o=e.strokePanelMode===P.yTM.ENDPOINT,s=1===e.strokePanelTerminalPointCount||o;return a.createElement("div",{className:ea.wO},a.createElement(Q.fI,{"data-testid":"end-point-settings-row"},a.createElement(Q.JU,{disabled:e.disabled,className:e.disabled?ea.RR:ea.mZ},s?(0,V.t)("fullscreen.properties_panel.stroke_settings.end_point"):(0,V.t)("fullscreen.properties_panel.stroke_settings.end_points")),a.createElement(ts,{id:"end-point-select",className:ea.yc,property:e.endPoint,formatter:n,onChange:r=>{e.onChange({terminalCap:r}),e.onChange({strokeCap:r})},blurOnChange:!0,dispatch:r,dropdownShown:e.dropdownShown,dropdownWidth:200,recordingKey:e.recordingKey,icon:function(e,r){switch(e){case"NONE":default:return;case"ARROW_LINES":return r?a.createElement(x.U,{svg:eD.A,fallbackSvg:eF.A},a.createElement(_.N,null)):a.createElement(x.U,{svg:ec.A,fallbackSvg:ed.A},a.createElement(g.U,null));case"ARROW_EQUILATERAL":return r?a.createElement(x.U,{svg:eY.A,fallbackSvg:ez.A},a.createElement(f.P,null)):a.createElement(x.U,{svg:e_.A,fallbackSvg:eg.A},a.createElement(E.q,null));case"TRIANGLE_FILLED":return r?a.createElement(x.U,{svg:eB.A,fallbackSvg:eH.A},a.createElement(y.N,null)):a.createElement(x.U,{svg:eu.A,fallbackSvg:em.A},a.createElement(b.k,null));case"DIAMOND_FILLED":return r?a.createElement(x.U,{svg:eL.A,fallbackSvg:eP.A},a.createElement(I.g,null)):a.createElement(x.U,{svg:es.A,fallbackSvg:el.A},a.createElement(T.x,null));case"CIRCLE_FILLED":return r?a.createElement(x.U,{svg:ew.A,fallbackSvg:eC.A},a.createElement(v.c,null)):a.createElement(x.U,{svg:ei.A,fallbackSvg:eo.A},a.createElement(S.J,null));case"ROUND":return r?a.createElement(x.U,{svg:eW.A},a.createElement(w.M,null)):a.createElement(x.U,{svg:ep.A},a.createElement(A.B,null));case"SQUARE":return r?a.createElement(x.U,{svg:eK.A},a.createElement(N.Z,null)):a.createElement(x.U,{svg:eh.A},a.createElement(C.C,null))}}(e.endPoint,s),iconClassName:e.disabled?ea.qv:ea.O1,dropdownOverride:(0,$.gl)(e.endPoint)?void 0:"NONE"===e.endPoint?(0,V.t)("fullscreen.properties_panel.stroke_settings.none"):" ",disabled:e.disabled},tu.map(r=>a.createElement(tl,{key:r,value:r,recordingKey:M.Pt(e,r)},a.createElement("span",{className:ea.Z6},a.createElement(U.t,{className:ea.yW,svg:th(r,"default"),fallbackSvg:th(r,"fallback")}),a.createElement(B.o,{text:n.format(r)})))),a.createElement(et.sK,null),tm.map(r=>a.createElement(tl,{key:r,value:r,recordingKey:M.Pt(e,r)},a.createElement("span",{className:ea.Z6},a.createElement(U.t,{className:ea.yW,svg:th(r,"default"),fallbackSvg:th(r,"fallback")}),a.createElement(B.o,{text:n.format(r)})))))))}t_.displayName="EndPointSettings";class tg extends ee.I{}class tf extends ee.Y{}function tE(e){let r=(0,i.wA)(),n=r=>{e.onChange({strokeJoin:r})};return a.createElement("div",{className:ea.wO},a.createElement(Q.fI,null,a.createElement(Q.JU,{className:e.disabled?ea.u0:ea.PF},(0,V.tx)("fullscreen.properties_panel.stroke_settings.join"))," ",(0,k.kc)().ce_tv_fpl_segmented_control?a.createElement("span",{className:ea.fj},a.createElement(o.bL,{value:e.disabled||(0,$.gl)(e.strokeJoin)?void 0:e.strokeJoin,onChange:n,legend:a.createElement(s.q,null,(0,V.t)("fullscreen.properties_panel.stroke_settings.join")),readonly:e.disabled,recordingKey:e.recordingKey},a.createElement(o.c$,{icon:a.createElement(x.U,{svg:eX.A},a.createElement(L.H,null)),value:"MITER","aria-label":(0,V.t)("fullscreen.properties_panel.stroke_settings.miter")}),a.createElement(o.c$,{icon:a.createElement(x.U,{svg:eq.A},a.createElement(O.m,null)),value:"BEVEL","aria-label":(0,V.t)("fullscreen.properties_panel.stroke_settings.bevel")}),a.createElement(o.c$,{icon:a.createElement(x.U,{svg:eJ.A},a.createElement(R.m,null)),value:"ROUND","aria-label":(0,V.t)("fullscreen.properties_panel.stroke_settings.round_join")}))):a.createElement(tg,{className:ea.fj,property:e.disabled?void 0:e.strokeJoin,onChange:n,disabled:e.disabled,recordingKey:e.recordingKey},a.createElement(tf,{svg:eX.A,value:"MITER",tooltip:(0,V.t)("fullscreen.properties_panel.stroke_settings.miter"),recordingKey:M.Pt(e,"MITER")}),a.createElement(tf,{svg:eq.A,value:"BEVEL",tooltip:(0,V.t)("fullscreen.properties_panel.stroke_settings.bevel"),recordingKey:M.Pt(e,"BEVEL")}),a.createElement(tf,{svg:eJ.A,value:"ROUND",tooltip:(0,V.t)("fullscreen.properties_panel.stroke_settings.round_join"),recordingKey:M.Pt(e,"ROUND")}))),!e.disabled&&"MITER"===e.strokeJoin&&a.createElement(Q.fI,null,a.createElement(Q.JU,{className:e.disabled?ea.NW:ea.kF},(0,V.tx)("fullscreen.properties_panel.stroke_settings.miter_angle")),a.createElement(J.M4,{className:ea.Cj,disabled:e.disabled||"MITER"!==e.strokeJoin,value:e.miterLimitAngle,onValueChange:r=>{e.onChange({miterLimitAngle:r})},recordingKey:M.Pt(e,"miterAngle"),tooltipForScreenReadersOnly:!0,"data-tooltip-type":X.Ib.TEXT,"data-tooltip":(0,V.t)("fullscreen.properties_panel.stroke_settings.miter_angle"),dispatch:r})))}function ty(e){let r=(0,i.wA)(),n=(0,z.J2)(P.Ez5.propertiesPanelState().isVertexSelectionAndHasEndpoints),o=(0,K.GS)();if(!e.pickerShown)return null;let s=new F.Mi(e.pickerShown.initialX,e.pickerShown.initialY),{strokePanelMode:l,strokePanelTerminalPointCount:c,numSelectedByType:d,arcRadius:u,arcSweep:m}=e,p=l===P.yTM.ENDPOINT||l===P.yTM.VECTOR&&c>0||n,h=l!==P.yTM.PENCIL,_=l===P.yTM.VECTOR||l===P.yTM.VERTEX,g=l===P.yTM.VECTOR&&0===c,f=g&&d&&1===Object.keys(d).length&&d.ELLIPSE&&1===u&&0!==m,E=e.strokePanelMode===P.yTM.VECTOR&&"LINE"!==ta(e.dashPattern)&&e.terminalCap?e.terminalCap:e.strokeCap;return a.createElement(er.vx,{title:o?(0,V.t)("fullscreen.properties_panel.stroke_settings"):(0,V.t)("fullscreen.properties_panel.stroke_settings.advanced_stroke"),initialPosition:s,headerSize:"small",onClose:()=>{r(G.XE()),Y.Y5.deselectProperty()},recordingKey:M.Pt(e,"modal"),initialWidth:e5},a.createElement(to,{onChange:e.onChange,strokePanelMode:e.strokePanelMode,strokePanelTerminalPointCount:e.strokePanelTerminalPointCount,connectorLineStyle:e.connectorLineStyle,dashPattern:e.dashPattern,dashCap:e.dashCap,maxStrokeWeight:e.maxStrokeWeight,strokeCap:e.strokeCap,terminalCap:e.terminalCap,dropdownShown:e.dropdownShown,recordingKey:M.Pt(e.recordingKey,"lineStyle")}),p&&a.createElement(t_,{onChange:e.onChange,endPoint:E,dropdownShown:e.dropdownShown,strokePanelTerminalPointCount:e.strokePanelTerminalPointCount,disabled:g&&!f&&!n,recordingKey:M.Pt(e.recordingKey,"endPoint"),strokePanelMode:l}),h&&a.createElement(tE,{onChange:e.onChange,strokeJoin:e.strokeJoin,miterLimitAngle:e.miterLimitAngle,disabled:!_,recordingKey:M.Pt(e.recordingKey,"join")}))}tE.displayName="StrokeJoinAndMiterAngleSettings"},238093:(e,r,n)=>{n.d(r,{A8:()=>y,OS:()=>g,WH:()=>T,bi:()=>I,dd:()=>E,yT:()=>v,zb:()=>f});var a=n(411855),i=n(188507),o=n(388393);n(299321);var s=n(880934),l=n(966712),c=n(154483),d=n(848661),u=n(29680),m=n(335682),p=n(622896),h=n(241691),_=n(173454);function g(e){return`styles-picker-${e}`}function f(e){return e.stylePickerShown.isShown&&e.stylePickerShown.id===g(e.inheritStyleKeyField)?e.stylePickerShown:null}function E(e){return e&&(0,s.fn)(e.guid)}function y(e){let r=(0,d.E7)(e);return r&&r!==o.n3.INVALID}function b({library:e,sceneGraph:r,inheritStyleKey:n,inheritStyleID:a}){let i=(0,d.E7)(n);if(!i)return null;let l=(0,d.E7)(a);if(!l)return null;let u=(0,s.dI)(l.guid),m=Object.values(e.local.styles).find(e=>e.node_id===u);if(m)return m.is_soft_deleted?null:m;let p=r.get(u);return p?{key:i,style_type:p.styleType,type:_.PW.STYLE,node_id:u,name:p.name,isLocal:!1,content_hash:p.styleVersionHash??void 0,userFacingVersion:(0,o.IA)(p.userFacingVersion),file_key:"",file_key_source:c.Ps.LOCAL_FILE,library_key:p.sourceLibraryKey}:null}function I({library:e,sceneGraph:r,inheritStyleKey:n,inheritStyleID:a}){if((0,l.kc)().ds_zombie_styles_fixes)return b({library:e,sceneGraph:r,inheritStyleID:a,inheritStyleKey:n});if(!y(n))return null;let i=(0,d.E7)(n);if(!i)return null;let o=Object.values(e.local.styles).find(e=>e.key===i);if(o&&!o.is_soft_deleted)return o;let s=(0,h.b)({library:e},i,(0,d.E7)(a));return s?.status==="loaded"?s.data:null}function T(e,r,n){let o=(0,i.d4)(e=>e.library),s=(0,u.eY)(),c=(0,p.bO)(),d=(0,m.tS)(),h=b({library:o,sceneGraph:s,inheritStyleKey:e,inheritStyleID:r}),_=a.useMemo(()=>{if(!e)return null;let a=I({library:o,inheritStyleKey:e,inheritStyleID:r,sceneGraph:s});if(a)return a;for(let r of Object.values(c))if(r?.status==="loaded"&&r.data.fileKey!==d){for(let a of(0,p.z5)(r,n))if(a.key===e)return a}return null},[r,e,c,o,d,s,n]);return(0,l.kc)().ds_zombie_styles_fixes?h:_}function v(e){return{dropdownShown:e.dropdownShown,openFile:e.openFile,library:e.library,modalShown:e.modalShown,pickerShown:e.pickerShown,sceneGraphSelection:e.sceneGraphSelection,selectedStyleProperties:e.selectedStyleProperties,stylePickerShown:e.stylePickerShown,hasMissingFont:e.hasMissingFont,hasMixedProperties:e.hasMixedProperties||!1,inheritStyleKey:e.inheritStyleKey,inheritStyleKeyField:e.inheritStyleKeyField,inheritStyleID:e.inheritStyleID,stylePickerListLayout:e.stylePickerListLayout,styleType:e.styleType,onToggleListLayout:e.onToggleListLayout,dispatch:e.dispatch}}},783908:(e,r,n)=>{n.d(r,{GC:()=>m,bf:()=>p,hg:()=>u});var a=n(411855),i=n(188507),o=n(297666),s=n(452246),l=n(378905),c=n(318812),d=n(798103);function u(e,r){let n=(0,i.wA)(),l=a.useMemo(()=>(0,o.s)(n,200),[n]);a.useEffect(()=>{r?.skip||l(s.GT({styleType:e}))})}function m(e){let r=(0,c.Um)();return a.useMemo(()=>r&&r.type===d.vG&&r.data.style.style_type===e?r:null,[r,e])}function p(e){let r=(0,i.d4)(e=>e.stylePreviewShown);return a.useMemo(()=>r.isShown&&!r.isCreating&&r.style.node_id===e.node_id&&(0,l.EF)(r.style,e),[r,e])}},377835:(e,r,n)=>{n.d(r,{t:()=>o});var a=n(411855),i=n(433501);function o({providedClassName:e,OriginalComponent:r}){return a.createElement("div",{className:i.F},a.createElement(r,{providedClassName:e}))}},784940:(e,r,n)=>{n.d(r,{Xs:()=>i}),n(411855),n(188507),n(299321),n(275556),n(776250),n(966712),n(498750),n(801161),n(798099),n(297336);var a=n(617453);function i(){let{smallNudgeAmount:e,bigNudgeAmount:r}=(0,a.sT)();return{smallNudgeAmount:e,bigNudgeAmount:r,wheelMultiplier:e,scrubMultiplier:e}}n(848661),n(113058),n(555074),n(100197),n(498606),n(469572)},998905:(e,r,n)=>{n.d(r,{AF:()=>h}),n(411855);var a=n(106075),i=n(930946),o=n(681625),s=n(315936);n(794272);var l=n(939863);n(356390),n(848661),n(279702);var c=n(691039),d=n(728314),u=n(229351),m=n(736002),p=(e=>(e[e.TOP_LEFT=0]="TOP_LEFT",e[e.BOTTOM_LEFT=1]="BOTTOM_LEFT",e[e.TOP_RIGHT=2]="TOP_RIGHT",e[e.BOTTOM_RIGHT=3]="BOTTOM_RIGHT",e))(p||{});function h(e){return e.rectangleCornerRadiiIndependent?{topLeft:e.rectangleTopLeftCornerRadius,topRight:e.rectangleTopRightCornerRadius,bottomRight:e.rectangleBottomRightCornerRadius,bottomLeft:e.rectangleBottomLeftCornerRadius}:{topLeft:e.cornerRadius??e.rectangleTopLeftCornerRadius,topRight:e.cornerRadius??e.rectangleTopRightCornerRadius,bottomRight:e.cornerRadius??e.rectangleBottomRightCornerRadius,bottomLeft:e.cornerRadius??e.rectangleBottomLeftCornerRadius}}u.A,a.a,m.A,i.$,c.A,o.w,d.A,s.t},937348:(e,r,n)=>{n.d(r,{DJ:()=>P,Ul:()=>M,XL:()=>D,cf:()=>k});var a=n(411855),i=n(67151),o=n(720245),s=n(902237),l=n(149510),c=n(389054),d=n(738865),u=n(245116),m=n(815314),p=n(410276),h=n(299321),_=n(776250),g=n(966712),f=n(153234),E=n(520581),y=n(46481),b=n(939863),I=n(356390),T=n(848661),v=n(555074),S=n(100197),w=n(7959),A=n(276660),N=n(939791),C=n(602661),L=n(200482),O=n(720632),R=n(803612);function P(e){let r=a.createElement(E.E,{name:"text_align_horizontal"},a.createElement(F,{recordingKey:f.Pt(e.recordingKey,"textAlignHorizontal")})),n=a.createElement(E.E,{name:"text_align_vertical"},a.createElement(x,{textAlignVertical:e.textAlignVertical||T.oV,recordingKey:f.Pt(e.recordingKey,"textAlignVertical")}));return e.isUI3?a.createElement(N.fn,{ref:e.alignmentRowRef,leftLabel:(0,b.tx)("properties.label.alignment"),leftInput:r,rightLabel:null,rightInput:n,icon:e.iconButton}):a.createElement(w.fI,{className:C.lY,forwardedRef:e.alignmentRowRef,"data-onboarding-key":"type-panel-alignment-row"},a.createElement("div",{className:C.Xh},r),a.createElement("div",{className:C.qf},n),e.iconButton)}var D=(e=>(e.LEFT="text-align-left",e.CENTER="text-align-center",e.RIGHT="text-align-right",e.JUSTIFIED="text-align-justified",e))(D||{});class k extends A.I{}class M extends A.Y{}function F({recordingKey:e}){let r=(0,v.kl)("textAlignHorizontal")||T.oV,n=(0,T._W)((0,v.kl)("missingFont"),!1),u=!((0|(0,S.J2)(h.Ez5.propertiesPanelState().enabledTypePanelControls))&1<<h.mrc.TEXT_ALIGN_HORIZONTAL);return(0,i.KF)(!!(r||u),"TypePanel missing textAlignHorizontal"),a.createElement(o.bL,{legend:a.createElement(s.q,null,(0,b.t)("fullscreen.type_panel.align_horizontal")),value:r,onChange:e=>{I.Y5.updateSelectionProperties({textAlignHorizontal:e})},readonly:u||n,recordingKey:e},a.createElement(o.c$,{value:"LEFT","aria-label":(0,b.t)("fullscreen.type_panel.align_left"),icon:a.createElement(l.h,null)}),a.createElement(o.c$,{value:"CENTER","aria-label":(0,b.t)("fullscreen.type_panel.align_center"),icon:a.createElement(c.N,null)}),a.createElement(o.c$,{value:"RIGHT","aria-label":(0,b.t)("fullscreen.type_panel.align_right"),icon:a.createElement(d.K,null)}))}function x(e){let r=(0,T._W)((0,v.kl)("missingFont"),!1),n=!((0|(0,S.J2)(h.Ez5.propertiesPanelState().enabledTypePanelControls))&1<<h.mrc.TEXT_ALIGN_VERTICAL);return a.createElement(o.bL,{value:e.textAlignVertical,onChange:e=>((0,g.kc)().ce_properties_panel_tracking&&(0,_.sx)("editor_type_panel_change",{key:"textAlignVertical",value:e}),I.Y5.updateSelectionProperties({textAlignVertical:e})),readonly:r||n,recordingKey:e.recordingKey,legend:a.createElement(s.q,null,(0,b.t)("fullscreen.type_panel.align_vertical"))},a.createElement(o.c$,{value:"TOP","aria-label":(0,b.t)("fullscreen.type_panel.align_top"),icon:a.createElement(y.U,{svg:O.A},a.createElement(u.b,null))}),a.createElement(o.c$,{value:"CENTER","aria-label":(0,b.t)("fullscreen.type_panel.align_middle"),icon:a.createElement(y.U,{svg:R.A},a.createElement(m.X,null))}),a.createElement(o.c$,{value:"BOTTOM","aria-label":(0,b.t)("fullscreen.type_panel.align_bottom"),icon:a.createElement(y.U,{svg:L.A},a.createElement(p.z,null))}))}},708915:(e,r,n)=>{n.d(r,{FX:()=>a}),n(411855),n(320063),n(966712),n(939863),n(456104),n(582947),n(205548),n(397065),n(340514),n(893606),n(463546);let a="new_text_row_location_callout"},662945:(e,r,n)=>{n.d(r,{No:()=>l});var a=n(411855),i=n(629019),o=n.n(i),s=n(898967);let l=(0,a.forwardRef)(function({label:e,input:r,...n},i){return a.createElement(c,{label:e,input:r,inputSize:"normal",...n,ref:i})});(0,a.forwardRef)(function({label:e,input:r,...n},i){return a.createElement(c,{label:e,input:r,inputSize:"small",...n,ref:i})}),(0,a.forwardRef)(function({label:e,input:r,...n},i){return a.createElement(c,{label:e,input:r,inputSize:"large",...n,ref:i})});let c=(0,a.forwardRef)(function({label:e,input:r,inputSize:n,...i},l){let c=o()({[s.gA]:!0,[s.DD]:"small"===n,[s.dK]:"normal"===n,[s.TJ]:"large"===n});return a.createElement("div",{className:c,ref:l,...i,"data-non-interactive":!0},a.createElement("div",{className:s.b7,"data-non-interactive":!0},e),a.createElement("div",{className:s.Wy,"data-non-interactive":!0},r))})},994481:(e,r,n)=>{n.d(r,{Cm:()=>d,cS:()=>c,dx:()=>l});var a=n(411855),i=n(629019),o=n.n(i),s=n(834447);let l=(0,a.forwardRef)(function({left:e,right:r,appendedClassName:n},i){let l=o()(s.RF,n);return a.createElement("div",{className:l,ref:i},e?a.createElement("div",{className:s.kb},e):null,r?a.createElement("div",{className:s.pG},r):null)});(0,a.forwardRef)(function({children:e,appendedClassName:r},n){let i=o()(s.Pv,r);return a.createElement("div",{className:i,ref:n},e)});let c=(0,a.forwardRef)(function({label:e,input:r,appendedClassName:n},i){let l=o()(s.Od,n);return a.createElement("div",{className:l,ref:i},null!=e?a.createElement(u,null,e):null,a.createElement("div",{className:s.hF},r))}),d=(0,a.forwardRef)(function({label:e,leftInput:r,rightInput:n,appendedClassName:i},l){let c=o()(s.Y7,i);return a.createElement("div",{className:c,ref:l},a.createElement(u,null,e),a.createElement("div",{className:s.ig},r),a.createElement("div",{className:s.by},n))});function u(e){return a.createElement("span",{"aria-hidden":"true",className:s.Pf,"data-non-interactive":!0},e.children)}},343559:(e,r,n)=>{n.d(r,{r:()=>u});var a=n(411855),i=n(629019),o=n.n(i),s=n(522739),l=n(925782),c=n(939791),d=n(563769);let u=a.forwardRef(function({titleTx:e,icon:r,faded:n,isEmpty:i,...s},l){return a.createElement(c.DE,{...s,ref:l,appendedClassName:o()(d.En,d.VJ,{[d.yf]:n,[d.ry]:i},s.appendedClassName),input:a.createElement(c.Mw,null,e),label:null,icon:r})});a.forwardRef(function({titleTx:e,input:r,faded:n,isEmpty:i,isPanelBodyCollapsedAtom:u,appendedClassName:m,...p},h){let _=o()(d.e4,{[d.yf]:n,[d.ry]:i},m);return a.createElement(s.D8,{className:_,forwardedRef:h,...p,"data-non-interactive":!0},a.createElement("div",{className:d.Dn},a.createElement(l.r2,{isPanelBodyCollapsedAtom:u||null}),a.createElement(c.Mw,null,e)),a.createElement("div",{className:d.Ix,"data-non-interactive":!0},r))}),a.forwardRef(function({titleTx:e,faded:r,isEmpty:n,children:i,...s},l){return a.createElement(c.oO,{...s,ref:l,appendedClassName:o()(d.En,{[d.yf]:r,[d.ry]:n}),input:a.createElement(c.Mw,null,e)},i)}),a.forwardRef(function({titleTx:e,input:r,...n},i){return a.createElement(s.D8,{className:d.Ii,forwardedRef:i,...n,"data-non-interactive":!0},a.createElement("div",{className:d.DD},a.createElement(c.Mw,null,e)),a.createElement("div",{className:d.hF,"data-non-interactive":!0},r))})},939791:(e,r,n)=>{n.d(r,{Ad:()=>g,DE:()=>_,Kg:()=>S,Mw:()=>I,Oe:()=>h,Y9:()=>v,fn:()=>p,my:()=>b,oO:()=>E,pG:()=>f,sY:()=>y,u9:()=>w});var a=n(411855),i=n(629019),o=n.n(i),s=n(522739),l=n(163023),c=n(41747),d=n(691603),u=n(52413),m=n(323316);let p=(0,a.forwardRef)(function({leftLabel:e,leftInput:r,rightLabel:n,rightInput:i,appendedClassName:l,icon:c,...d},m){return a.createElement(s.D8,{className:o()(u.$f,l),forwardedRef:m,...d,"data-non-interactive":!0},null!=e?a.createElement(S,null,e):null,a.createElement("div",{className:u.Vp,"data-non-interactive":!0},r),null!=n?a.createElement(w,null,n):null,a.createElement("div",{className:u.ON,"data-non-interactive":!0},i),a.createElement(T,null,c))});(0,a.forwardRef)(function({label:e,leftIcon:r,input:n,rightIcon:i},o){return a.createElement("div",{className:u.iv,ref:o,"data-non-interactive":!0},null!=e?a.createElement(S,null,e):null,a.createElement("div",{className:u.dk,"data-non-interactive":!0},r),a.createElement("div",{className:u.Wy,"data-non-interactive":!0},n),a.createElement("div",{className:u.pK,"data-non-interactive":!0},i))});let h=(0,a.forwardRef)(function({label:e,leftIcon:r,input:n,firstRightIcon:i,secondRightIcon:o,...s},l){return a.createElement("div",{className:u.o7,ref:l,...s,"data-non-interactive":!0},null!=e?a.createElement(S,null,e):null,a.createElement("div",{className:u.dk,"data-non-interactive":!0},r),a.createElement("div",{className:u.Wy,"data-non-interactive":!0},n),a.createElement("div",{className:u.pK,"data-non-interactive":!0},i),a.createElement("div",{className:u.wm,"data-non-interactive":!0},o))}),_=(0,a.forwardRef)(function({label:e,input:r,icon:n,appendedClassName:i,...l},c){let d=o()(u.xx,i);return a.createElement(s.D8,{className:d,forwardedRef:c,...l,"data-non-interactive":!0},null!=e?a.createElement(S,null,e):null,a.createElement("div",{className:u.Vp,"data-non-interactive":!0},r),a.createElement(T,null,n))}),g=(0,a.forwardRef)(function({input:e,label:r,appendedClassName:n,alwaysShowLabel:i,...s},l){return a.createElement("div",{className:o()(u.cN,n),ref:l,...s,"data-non-interactive":!0},r?a.createElement(S,{alwaysShowLabel:i},r):null,a.createElement("div",{className:u.Vp,"data-non-interactive":!0},e))}),f=(0,a.forwardRef)(function({input:e,leftIcon:r,rightIcon:n,appendedClassName:i,...l},c){let d=o()(u.jz,i);return a.createElement(s.D8,{className:d,forwardedRef:c,...l,"data-non-interactive":!0},a.createElement("div",{className:u.q1,"data-non-interactive":!0}," ",e," "),a.createElement("div",{className:u.eK,"data-non-interactive":!0}," ",r," "),a.createElement("div",{className:u.H_,"data-non-interactive":!0}," ",n," "))}),E=(0,a.forwardRef)(function({input:e,children:r,appendedClassName:n,...i},l){let c=o()(u.qv,n);return a.createElement(s.D8,{className:c,forwardedRef:l,...i,"data-non-interactive":!0},a.createElement("div",{className:u.q1,"data-non-interactive":!0},e),a.createElement("div",{className:u.wH},r))}),y=(0,a.forwardRef)(function({leftLabel:e,rightLabel:r,topIcon:n,bottomIcon:i,appendedClassName:s,topLeftInput:l,bottomLeftInput:c,topRightInput:d,bottomRightInput:m,leftInput:p,rightInput:h},_){let g=o()(u.d1,s),f=null!=p?a.createElement("div",{className:u.kW},p):l,E=null!=h?a.createElement("div",{className:u.kW},h):d,y=null!=p?null:a.createElement("div",null,c),I=null!=h?null:a.createElement("div",null,m);return a.createElement("div",{className:g,ref:_,"data-non-interactive":!0},a.createElement(S,null,e),a.createElement(w,null,r),a.createElement(b,null),f,E,a.createElement("div",null,n),y,I,a.createElement("div",null,i))});function b({}){return a.createElement("div",{"data-non-interactive":!0})}function I({children:e}){return a.createElement("span",{"aria-hidden":"true"},e)}function T({children:e}){return e?a.createElement("div",{className:u.to,"data-non-interactive":!0},e):null}let v=(0,a.forwardRef)(function({selected:e,grabberClassName:r,hideGrabber:n,singletonRow:i,dragging:c,children:p,selectedSecondary:h,containerClassName:_,...g},f){let E=!n&&(!i||c),y=e&&c?d.Aw:u.gB,b=h?u.kR:e?u.CZ:"";return a.createElement(s.D8,{...g,forwardedRef:f,className:o()(u.P6,b,_)},E&&a.createElement("div",{className:o()(r,{[u.tp]:c,[u.kI]:!c})},(!c||e)&&a.createElement(l.B,{className:y,svg:m.A})),p)});function S({children:e,alwaysShowLabel:r}){return(0,c.V)()||r?a.createElement("span",{"aria-hidden":"true",className:u.Qb,"data-non-interactive":!0},e):a.createElement(b,null)}function w({children:e}){return(0,c.V)()?a.createElement("span",{"aria-hidden":"true",className:u.iV,"data-non-interactive":!0},e):a.createElement(b,null)}},423324:(e,r,n)=>{n.d(r,{d:()=>d});var a=n(411855),i=n(629019),o=n.n(i),s=n(522739),l=n(939791),c=n(52413);let d=(0,a.forwardRef)(function({leftInput:e,rightInput:r,leftLabel:n,rightLabel:i,leftIcon:d,rightIcon:u,appendedClassName:m,...p},h){let _=o()(c.ZD,m);return a.createElement(s.D8,{className:_,forwardedRef:h,...p,"data-non-interactive":!0},null!=n?a.createElement(l.Kg,null,n):null,a.createElement("div",{className:c.Vp,"data-non-interactive":!0},e),null!=i?a.createElement(l.u9,null,i):null,a.createElement("div",{className:c.ON,"data-non-interactive":!0},r),a.createElement("div",{className:c.dk,"data-non-interactive":!0},d),a.createElement("div",{className:c.pK,"data-non-interactive":!0},u))});(0,a.forwardRef)(function({leftLabel:e,rightLabel:r,topIcon:n,bottomIcon:i,appendedClassName:d,collapsedLeftInput:u,collapsedRightInput:m,expandedTopLeftInput:p,expandedTopRightInput:h,expandedBottomLeftInput:_,expandedBottomRightInput:g,singleInput:f,showAllPaddingControls:E,showSinglePaddingControl:y,...b},I){let T=o()(c.KP,d),v=a.createElement("div",{className:c.Xv},f),S=a.createElement(a.Fragment,null,a.createElement("div",{className:c.Vp},u),a.createElement("div",{className:c.H$},m)),w=a.createElement(a.Fragment,null,a.createElement("div",{className:c.Vp},p),a.createElement("div",{className:c.ON},_),a.createElement("div",{className:c.H$},h),a.createElement("div",{className:c.Os},g));return a.createElement(s.D8,{className:T,forwardedRef:I,...b,"data-non-interactive":!0},a.createElement(l.Kg,null,e),a.createElement(l.u9,null,r),a.createElement(l.my,null),y?v:E?w:S,a.createElement("div",{className:c.dk},n),E&&i&&a.createElement("div",{className:c.pK},i))})},90013:(e,r,n)=>{n.d(r,{yj:()=>k});var a=n(411855),i=n(188507),o=n(171812),s=n(343887),l=n(404095),c=n(636149),d=n.n(c),u=n(737947),m=n(966712),p=n(153234),h=n(776621),_=n(163023),g=n(939863);n(632430);var f=n(662275);n(617453),n(100197),n(234945);var E=n(173454),y=n(498606),b=n(715762),I=n(507662),T=n(7959),v=n(538697),S=n(893606),w=n(171297),A=n(662945),N=n(564092),C=n(918061),L=n(261579),O=n(132208);class R extends v.l6{}class P extends v.c${}function D({modeOptions:e,inheritedModeID:r,isShowingGuids:n}){return{format:a=>{if(a===N.iw.LEARN_MORE)return(0,g.t)("variables.modes.option.learn_more");if(a===N.iw.REVIEW_UPDATES)return(0,g.t)("variables.modes.option.review_updates");if(a===N.UE){if(r===N.Mo)return(0,g.t)("variables.mode_properties_panel.select.option.auto_with_name",{modeName:(0,g.t)("variables.mode_properties_panel.select.option.mixed")});let n=e.find(e=>o.c2(e.modeId,r))?.name;return n?(0,g.t)("variables.mode_properties_panel.select.option.auto_with_name",{modeName:n}):(0,g.t)("variables.mode_properties_panel.select.option.auto")}{if(a===N.Ws)return 0===e.length&&(0,h.x1)("variables","No mode options available"),(0,g.t)("variables.mode_properties_panel.select.option.default_with_name",{modeName:e[0].name??""});if(a===N.Mo)return(0,g.t)("variables.mode_properties_panel.select.option.mixed");if(a===N.Yn)return(0,g.t)("variables.mode_properties_panel.select.option.deleted");let r=e.find(e=>(0,o.c2)(e.modeId,a));return r?n?`${r.name} (${r.modeId.guid})`:r.name:((0,h.x1)("variables","Option does not exist in modeOptions"),(0,g.t)("variables.mode_properties_panel.select.option.deleted"))}},isEqual:(e,r)=>(0,o.c2)(e,r)}}function k(e){let{fill:r,showExplicitOnly:n,variableSetName:c,variableSetKey:h,modeOptions:k,explicitModeID:M,inheritedModeID:F,isShowingGuids:x,recordingKey:U,showInheritedModeOption:B,onChange:V}=e,G=(0,i.wA)(),H=(0,i.d4)(e=>e.dropdownShown),W=(0,N.ZP)(),K=(0,S.R)(),Y=M&&M!==N.Mo&&k.every(e=>!(0,o.c2)(e.modeId,M)),$=N.Ws;Y?$=N.Yn:M?$=M:F&&($=B?N.UE:F);let j=D({modeOptions:k,inheritedModeID:F,isShowingGuids:x}).format($),[z,q]=a.useState(n),X=a.useCallback((e,r,n)=>{V(e,n),void 0!==r&&q(r)},[V]),J=a.useMemo(()=>(function(e,r,n,i){let o=[];if(0===r.length)return o;let s=d()(r,e=>e.modeId.collectionKey),l=!!(0,m.kc)().ds_variables_relax_modes,c=a.createElement("div",{className:L.Z7},a.createElement(_.B,{className:L.G,svg:O.A}));return Object.entries(s).map(([r,i])=>{for(let s of(o.length>0&&i.length>0&&o.push(a.createElement(v.sK,null)),i))o.push(a.createElement(P,{key:`mode-option-${r}-${s.modeId.guid}-${n}`,value:s.modeId,recordingKey:p.Pt(e,`varSetSelect=${r}`,`value=${s.modeId.guid}`,`varSetKey=${r}`),disabled:!l&&!s.isCompatible,fullWidth:!0,rightSettingsIcon:l&&!s.isCompatible?c:void 0}))}),l&&r.some(e=>!e.isCompatible)&&(o.push(a.createElement(v.sK,null)),i===N.iw.REVIEW_UPDATES?o.push(a.createElement(P,{key:"incompatible-modes-updates",value:N.iw.REVIEW_UPDATES,iconToReplaceCheck:c,recordingKey:p.Pt(e,"incompatible-modes-review-updates"),additionalStylesClassName:L.cF})):i===N.iw.LEARN_MORE&&o.push(a.createElement(P,{key:"incompatible-modes-learn-more",value:N.iw.LEARN_MORE,iconToReplaceCheck:c,recordingKey:p.Pt(e,"incompatible-modes-learn-more"),additionalStylesClassName:L.cF}))),o})(U,k,n,W),[U,k,n,W]);if(k.length<2||z&&!M)return null;let Z=$===N.Mo,Q=function(e,r,n,i,o,s){let l=[];return n&&l.push(a.createElement(P,{key:N.Mo,value:N.Mo,recordingKey:p.Pt(e,"value:MIXED"),selected:!0}),a.createElement(v.sK,null)),i?o&&l.push(a.createElement(P,{key:N.UE,value:N.UE,recordingKey:p.Pt(e,"value:INHERIT")}),a.createElement(v.sK,null)):s.length>0&&l.push(a.createElement(P,{key:N.Ws,value:N.Ws,recordingKey:p.Pt(e,"value:DEFAULT"),disabled:!s[0].isCompatible,selected:r===N.Ws}),a.createElement(v.sK,null)),r===N.Yn&&l.push(a.createElement(P,{key:N.Yn,value:N.Yn,recordingKey:p.Pt(e,"value:DELETED"),disabled:!0,selected:!0})),l}(U,$,Z,!!F,B,k),ee=a.createElement(R,{fill:r,id:`var-set-mode-${h}-${n}`,dropdownWidth:200,dropdownAlignment:"right",dispatch:G,inputClassName:K?C.UZ:void 0,chevronClassName:K?C.ai:void 0,dropdownShown:H,formatter:D({modeOptions:k,inheritedModeID:F,isShowingGuids:x}),property:$,recordingKey:p.Pt(U,`varSetSelect=${h}`),onChange:e=>{e===N.iw.LEARN_MORE?u.Ay.unsafeRedirect(N.Yc,"_blank"):e===N.iw.REVIEW_UPDATES?G(f.to({type:I.T,data:{initialTab:E.Wv.UPDATES,entrypoint:b.r6.VARIABLE_MODE_INCOMPATIBLE_REVIEW_UPDATES_DROPDOWN_OPTION}})):X(e,!1,D({modeOptions:k,inheritedModeID:F,isShowingGuids:x}).format(e))},tooltip:j},...Q,...J);if(K){let e=a.createElement("span",{className:L.$6,"data-testid":"variableModeEntry"},c);return B?a.createElement(w.X,{labelTx:e,input:ee,icon:a.createElement(s.K,{"aria-label":(0,g.t)("general.remove"),onClick:()=>X("INHERIT",!0),actionOnPointerDown:!0,htmlAttributes:{"data-tooltip":(0,g.t)("general.remove"),"data-tooltip-type":y.Ib.TEXT}},a.createElement(l.f,null))}):a.createElement(A.No,{label:e,input:ee})}return a.createElement(T.fI,{className:L.nM,dataTestId:"variableModeEntry"},a.createElement("div",{className:L.o3},c),a.createElement("div",{className:L.mq},ee))}},169006:(e,r,n)=>{n.d(r,{EG:()=>o}),n(939863);var a=n(324597),i=n(483990);function o(e){if(e.extensionSearchString)return e.extensionSearchString;let r=e.displayForQuickCommand?e.displayForQuickCommand:(0,a.Dz)(e);return(0,i.A)(r,e.args)}n(222478)},901304:(e,r,n)=>{n.d(r,{XG:()=>f,wI:()=>g}),n(411855);var a=n(414507),i=n(38329),o=n(374626),s=n(776621);n(419527);var l=n(988022),c=n(516703),d=n(239737),u=n(99888),m=n(65633),p=n(999140),h=n(30075),_=n(719624);function g({searchQuery:e,extensionId:r,moduleFilters:n,searchPosition:a,numSearchResults:i}){E({action:r,searchQuery:e,numSearchResults:i,rankingAlgorithm:(0,p.eg)(h.Jc.EXTENSIONS),searchPosition:a,module:h.Jc.EXTENSIONS,qaVersion:u.$L,isAi:!1,isPlugin:!0,moduleFilters:n})}function f({action:e,numSearchResults:r,searchPosition:n,rankingAlgorithm:a,isSearchResult:i,moduleFilters:s}){E({action:e,searchQuery:o.zl.get(_.Q8),numSearchResults:r,rankingAlgorithm:a,searchPosition:n,qaVersion:u.$L,isAi:!0,isPlugin:!1,moduleFilters:s,isSearchResult:i,module:(0,m.x)()})}function E(e){let{quickActionsSessionId:r,quickActionsQueryId:n,currentSelection:m,fileKey:h,productType:g,source:f,role:E,hasAiFeatureAccess:y}=function(){let e=i.D.getState(),r=(0,c.l)(e),n=e.openFile?.key??"",m=(0,l.v5)(e.selectedView,null),h=o.zl.get(_.dd)??"";h||(0,s.$D)(a.FigmaTeam.EXTENSIBILITY,Error(`No quick actions session ID found when logging ${u.OW}`));let g=o.zl.get(_.Rt);return{currentSelection:r,fileKey:n,productType:m,source:o.zl.get(_.rE)?.source??"",quickActionsSessionId:h,quickActionsQueryId:g,role:(0,p.WZ)(),hasAiFeatureAccess:(0,d.W7)()}}(),b={...e,quickActionsSessionId:r,currentSelection:m,fileKey:h,productType:g,quickActionsQueryId:n,source:f,role:E,hasAiFeatureAccess:y};(0,p.mi)(b)}n(169006)},987850:(e,r,n)=>{n.d(r,{X:()=>m});var a=n(776250),i=n(38329),o=n(966712),s=n(38580),l=n(374626);n(915440),n(711525),n(279453),n(239737);var c=n(55447),d=n(222478);let u=(0,s.eU)(null);function m(e){let r=l.zl.get(u);if(!(0,o.kc)().qa_ai_metering||e===d.JT.ASSISTANT_CHAT||e===d.JT.FIND_INSPIRATION)return{withinMeter:!0};let n=l.zl.get(c.Ac),s=l.zl.get(c.ag),m=l.zl.get(c.u6),p=s||m;if("unchecked"===n||"null_grantlist"===n&&p){let r=i.D&&i.D.getState().selectedView,n=r?.view==="fullscreen"&&r.fileKey;a.az.trackDefinedEvent("search_experience.ai_eligibility.meter_checked",{newGrantlistPlanValue:null!==s?s.toString():"null",newGrantlistUserValue:null!==m?m.toString():"null",userId:o.Ay().user_data?.id,fileKey:n||"missing",action:e}),l.zl.set(c.Ac,p?"with_grantlist":"null_grantlist")}if(!r)return{withinMeter:!1};let h=r.find(r=>r.userActions.includes(e));if(!h)return{withinMeter:!1};let _=parseInt(h.remaining);return isNaN(_)?{withinMeter:!1}:{withinMeter:_>0,meterResetDate:h.resetsAt}}},239737:(e,r,n)=>{n.d(r,{Ci:()=>w,Ko:()=>S,LC:()=>N,Nv:()=>A,P5:()=>L,PE:()=>I,W7:()=>T,eH:()=>C}),n(411855);var a=n(38329),i=n(966712),o=n(38580),s=n(374626),l=n(915440);n(711525);var c=n(647899),d=n(782112);n(411045),n(809831);var u=n(960884),m=n(335682),p=n(69961);n(99506);var h=n(279453);n(243987),n(556261),n(56099);var _=n(984968);n(239671);var g=n(479296),f=n(55447);let E=(0,o.eU)(i.tl().editing_file?.can_use_jubilee??!1),y=(0,o.eU)(!1),b=(0,o.eU)(null),I=(0,g.n)(()=>{let e=(0,d.q8)(),r=(0,s.md)(E);return!!(0,f.$7)("useHasPermission")&&((0,i.kc)().qa_ai_metering?r:!e)});function T(){if(!(0,f.$7)("getHasPermission"))return!1;let e=s.zl.get(E);if((0,i.kc)().qa_ai_metering)return e;let r=s.zl.get(u.Z),n=s.zl.get(_.Me),o=a.D.getState().openFile,l=!o||!o.canEdit;return!(0,d.lt)({currentOrg:r,currentTeam:n,isViewer:l})}(0,g.n)(e=>void 0!==e&&"loaded"===function(e){return(0,l.Rs)(h.GIl,{key:e},{enabled:!!e&&(0,i.kc)().qa_ai_metering})}(e).status);let v=(0,g.n)(()=>{if((0,s.md)(f.p9))return!0;let e=(0,m.q5)(),r=(0,i.tl)().jubilee_b;return!!e&&!!r&&(e.parentOrgId?!!r.orgs[e.parentOrgId]:!!e.teamId&&!!r.teams[e.teamId])});function S(){if(!(0,f.$7)("getHasAssetVisualSearchPermission")||!(0,i.kc)().api_asset_search)return!1;let e=s.zl.get(y);if((0,i.kc)().qa_ai_metering)return e;let r=s.zl.get(u.Z),n=s.zl.get(_.Me),o=a.D.getState().openFile,l=!o||!o.canEdit;return!(0,d.lt)({currentOrg:r,currentTeam:n,isViewer:l})}function w(e){return(0,i.kc)().api_asset_search?(function(e){if(!e||!(0,i.kc)().asset_search_use_exp_perms||!p.nt.ui3.getValue())return Promise.resolve(!1);let r=s.zl.get(b);return null!==r?Promise.resolve(r):(0,c.vs)("exp_search_ai_assets").then(e=>{let r=e.getValue("allow_ai_results",null);return null!==r&&s.zl.set(b,!!r),!!r})})(e).then(e=>{if(!e&&!(0,f.$7)("getHasAssetSearchPermission"))return!1;let r=s.zl.get(y);if((0,i.kc)().qa_ai_metering)return r;let n=s.zl.get(u.Z),o=s.zl.get(_.Me),l=a.D.getState().openFile,c=!l||!l.canEdit;return!(0,d.lt)({currentOrg:n,currentTeam:o,isViewer:c})}):Promise.resolve(!1)}let A=(0,g.n)(e=>{let r=(0,d.q8)(),n=(0,s.md)(y);return!!((0,i.kc)().api_asset_search&&(function(e){let{getConfig:r}=(0,c.I7)("exp_search_ai_assets",void 0,!0);return!!r().getValue("allow_ai_results",!1)&&e&&p.nt.ui3.getValue()&&!!(0,i.kc)().asset_search_use_exp_perms}(e)||(0,f.$7)("useHasAssetSearchPermission")))&&((0,i.kc)().qa_ai_metering?n:!r)}),N=(0,g.n)(()=>{let e=(0,d.q8)(),r=(0,s.md)(y),n=v();return!!(0,f.$7)("useHasFragmentSearchPermission")&&(!(0,i.kc)().asset_suggestions_require_completed_backfill||!!n)&&((0,i.kc)().qa_ai_metering?r:!e)});function C(){let e=I();return!!(0,i.kc)().hub_file_fragments&&e}function L(){return!!(0,i.kc)().hub_file_fragments&&T()}var O=(e=>(e.PERSONAL_DRAFT="PERSONAL_DRAFT",e.TEAM_OR_ORG_DISABLED="TEAM_OR_ORG_DISABLED",e.ORG_GUEST="ORG_GUEST",e.NON_PAID_SEAT="NON_PAID_SEAT",e.NO_ORG_OR_TEAM_USER="NO_ORG_OR_TEAM_USER",e.ROLLING_OUT="ROLLING_OUT",e))(O||{})},132572:(e,r,n)=>{n.d(r,{C7:()=>l,Ll:()=>u,h8:()=>s,kK:()=>c,qF:()=>d});var a=n(38329),i=n(966712),o=n(55447);function s(){let e=a.D;return(e?.getState().user?.locale!=="ja"||!!(0,i.kc)().fuzzy_escape_regexp)&&!!(0,i.kc)().qa_search_frecency}function l(){return!!(0,i.kc)().asset_suggestions&&(0,o.$7)("isFragmentSearchEnabled")}function c(){return!!(0,i.kc)().actions_hide_recents&&(0,o.$7)("shouldHideRecents")}function d(){return!!(0,i.kc)().eai_image_tools&&(0,o.$7)("isImageToolsEnabled")}function u(){return!!(0,i.kc)().prototype_ai_magic_link&&(0,o.$7)("isMagicLinkEnabled")}},222478:(e,r,n)=>{n.d(r,{HW:()=>i,II:()=>l,JT:()=>o,KL:()=>m,LC:()=>s,Xi:()=>c,Xy:()=>u,gj:()=>d,wC:()=>a});let a=354,i=600;var o=(e=>(e.TRANSLATE_TEXT="translate-text",e.REWRITE_TEXT="rewrite-text",e.SHORTEN_TEXT="shorten-text",e.FIRST_DRAFT="first-draft",e.FIRST_DRAFT_MAKE_CHANGES="first-draft-make-changes",e.FIRST_DRAFT_MAKE_KIT="first-draft-make-kit",e.FIRST_DRAFT_COMPONENTIZE="first-draft-componentize",e.FIRST_DRAFT_SUGGEST_PROPS="first-draft-suggest-props",e.FIRST_DRAFT_LINTING="first-draft-linting",e.FIRST_DRAFT_DEBUG="first-draft-debug",e.FIND_INSPIRATION="find-inspiration",e.IMAGE_TO_DESIGN="image-to-design",e.REMOVE_BACKGROUND="remove-background",e.AUTO_RENAME_LAYERS="auto-rename-layers",e.GENERATE_IMAGE="generate-image",e.MAGIC_LINK="magic-link",e.MAKE_EDITS="make-edits",e.FIRST_DRAFT_FINE_TUNE="first-draft-fine-tune",e.CONTENT_FILL="content-fill",e.SLIDES_GENERATE_SPEAKER_NOTES="slides-generate-speaker-notes",e.SLIDES_REWRITE_TEXT="slides-rewrite-text",e.ASSISTANT_CHAT="assistant-chat",e.BOARD_TO_DECK="board-to-deck",e.DETECT_VIOLATIONS="detect-violations",e.FIRST_DRAFT_MAKE_KIT_DEBUG="first-draft-make-kit-debug",e.UPSCALE_IMAGE="upscale-image",e))(o||{});let s="https://help.figma.com/hc/en-us/articles/24004542669463",l="https://help.figma.com/hc/en-us/articles/23870272542231",c="https://help.figma.com/hc/en-us/articles/23796390206743",d="https://help.figma.com/hc/en-us/articles/24004711129879",u="https://help.figma.com/hc/en-us/articles/24004778051479",m="https://help.figma.com/hc/en-us/articles/23796390206743"},432704:(e,r,n)=>{n.d(r,{C:()=>s});var a=n(411855),i=n(320063);let o=(0,a.createContext)((0,a.createRef)());function s(e){let r=(0,a.useContext)(o);(0,i.h)(()=>{e.current&&""!==e.current.value&&!1===r.current&&e.current.select(),r.current=!0})}},54025:(e,r,n)=>{n.d(r,{ES:()=>F,TC:()=>M,WP:()=>k,kN:()=>V});var a=n(411855),i=n(67151),o=n(414507),s=n(126049),l=n(776250),c=n(38329),d=n(966712),u=n(38580),m=n(646240),p=n(374626),h=n(391388),_=n(776621),g=n(743282),f=n(572206),E=n(743905),y=n(809831),b=n(453681),I=n(335682),T=n(416095),v=n(933342),S=n(535257),w=n(435011),A=n(532888),N=n(239671),C=n(508567),L=n(48515),O=n(662163),R=n(239737),P=n(719624),D=n(124008);let k=(0,u.eU)({currentSearch:null});function M({debounceWait:e=300}){let r=(0,D.s)(),n=(0,m.Xr)(k),i=(0,s.A)(F,e),o=(0,a.useCallback)(()=>{i.cancel(),n(()=>({currentSearch:null}))},[i,n]);return{debouncedAssetSearch:(0,a.useCallback)((e,n)=>{e?i({type:"input-text",query:e,assetTypeOption:n,isKnownLibrary:r}):o()},[i,o,r]),clearAssetSearchAndCancelDebounce:o,cancelDebouncedAssetSearch:i.cancel,flushDebouncedAssetSearch:i.flush}}async function F(e){let r=c.D.getState(),n=(0,I.tB)(r),a=(0,A.vx)(r),s=Date.now(),u=await (0,R.Ci)("input-text"===e.type);if(!n||null==a)return;let m=(0,g.g)(),f=p.zl.get(P.dd);p.zl.set(k,()=>({currentSearch:{queryId:m,input:e,result:h.Qw.loading()}}));try{let o,_=1;for(;!(0,v.Wg)(c.D.getState())&&_<=50;)await new Promise(e=>setTimeout(e,200*_)),_++;if(!(0,v.Wg)(c.D.getState()))throw Error("Failed to initialize assets");r=c.D.getState();let g={...e,openFile:(0,I.tB)(r),selectedView:(0,w.hK)(r),inDesignEditor:(0,y.XE)((0,w.hK)(r))===N.nT.Design,fileVersion:a,currentOrgId:(0,T.eD)(r),fileByKey:(0,A.t_)(r),libraryByLibraryKey:p.zl.get(b.qp),includeVisualAssets:p.zl.get(O.xL).length>0,usedAssetKeys:(0,T.ET)(r,c.D.dispatch)};switch(g.type){case"input-text":{let e=(await function(e,r){let{query:n,assetTypeOption:a,openFile:o,selectedView:s,inDesignEditor:l,fileVersion:d,currentOrgId:u,fileByKey:m,libraryByLibraryKey:p,usedAssetKeys:h}=e;switch(v.YG.refreshSourcesIfNeeded(c.D),a.type){case L.I.LOCAL:return v.YG.computeLocalResultsPromise(n,o?.key);case L.I.FILE:return v.YG.computeFileResultsPromise(n,a.fileKey,s?.view==="fullscreen"&&s?.fileKey||o?.key,l,r);case L.I.RECENT:case L.I.ALL:return v.YG.computeAllResultsPromise(n,l,d,u,o,s,m,p,r,h);case L.I.SITE_KIT:return Promise.resolve({normalizedSearchResults:[],unsubscribedSearchResults:[]});default:return(0,i.xb)(a,"Unknown search type")}}(g,f)).normalizedSearchResults;e=(0,d.kc)().asset_search_return_file_name?e.filter(e=>void 0!==e.file_name||(g.isKnownLibrary(e)&&(0,l.sx)("asset_search.missing_file_name",{libraryKey:e.library_key,guid:e.node_id,openFileKey:g.openFile?.key,sourcePath:"fetchAsses"}),!1)):e.filter(e=>g.isKnownLibrary(e)),o=(0,v.Ow)(e);break}case"input-image":o=await U(g,f);break;case"input-selection":o=await B(g,f);break;default:(0,i.xb)(g)}if(p.zl.get(k).currentSearch?.queryId!==m)return;null===f&&(0,l.sx)("asset_search.missing_session_id",{previousSessionId:r.search.lastLoadedQuery.sessionId,entryPoint:r.library.assetsPanelSearch.entryPoint},{forwardToDatadog:!0});let E={aiResultsEnabled:u,elapsedTime:Date.now()-s,query:"input-text"===g.type?g.query:void 0,queryId:m,subscribedSearchResultCount:o.length,entryPoint:"input-text"===g.type?"actions_assets_tab":"actions_visual_search",fileKey:n?.key,numSubscribedLibraries:Array.from(v.YG.subscribedLibraryFileKeys).length,queryType:g.type.replace("input-",""),selectedViewFileKey:"fullscreen"===r.selectedView.view&&r.selectedView.fileKey?r.selectedView.fileKey:void 0};l.az.trackDefinedEvent("assets_panel.search_time",{...E,searchSessionId:f??""}),l.az.trackDefinedEvent("asset_search.query_result",{...E,sessionId:f??""}),o.slice(0,v.BJ).forEach((e,r)=>{(0,l.sx)("actions_assets_tab.top_k_results",{searchSessionId:f,queryId:m,query:"input-text"===g.type?g.query:void 0,queryType:g.type.replace("input-",""),fileKey:n?.key,position:r,scoreAi:e.ai_score,scoreLexical:e.lexical_score,aiResultEnabled:u,assetKey:(0,v.u2)(e),assetType:e.type})}),p.zl.set(k,()=>({currentSearch:{queryId:m,input:e,result:h.Qw.loaded(o)}}))}catch(r){if((0,_.$D)(o.FigmaTeam.SEARCH_AI,r),p.zl.get(k).currentSearch?.queryId!==m)return;p.zl.set(k,()=>({currentSearch:{queryId:m,input:e,result:h.Qw.error(r)}}))}}function x(e,r,n){let a;return e.assetTypeOption.type===L.I.FILE?a=JSON.stringify([e.assetTypeOption.fileKey]):n&&(v.YG.subscribedLibraryFileKeys.size<S.UR?a=JSON.stringify(Array.from(v.YG.subscribedLibraryFileKeys)):(0,l.sx)("actions_visual_search.maximum_subscribed_libraries_reached",{searchSessionId:r,fileKey:e.openFile?.key,fileVersion:e.fileVersion,currentOrgId:e.currentOrgId,numSubscribedLibraryFileKeys:Array.from(v.YG.subscribedLibraryFileKeys).length})),a}async function U(e,r){let n=await (0,E.yt)(e.imageFile),a=(0,E.m1)(new f.Mi(n.width,n.height)),i=await (0,E.SW)(n,a,e.imageFile);return(await C.$W.postComponentsFromImage(i,{openFileKey:e.openFile?.key||"",searchSessionId:r||"",subscribedLibraryFileKeys:x(e,r,await (0,R.Ci)(!1))})).data.meta}async function B(e,r){let n=(0,E.T1)(e.node);if(!n)throw Error("Failed to export thumbnail");return(await C.$W.postComponentsFromImage({type:"image",value:n},{openFileKey:e.openFile?.key||"",searchSessionId:r||"",subscribedLibraryFileKeys:x(e,r,await (0,R.Ci)(!1))})).data.meta}function V(e){let{currentSearch:r}=p.zl.get(k);return null===r||"input-text"!==r.input.type?e.length>0:r.input.query!==e}},693348:(e,r,n)=>{n.d(r,{N:()=>o});var a=n(374626),i=n(719624);function o(){let e=(0,a.md)(i.fq);return e>0?e+8:0}},16366:(e,r,n)=>{n.d(r,{t:()=>i});var a=n(411855);function i(e,r){return(0,a.useCallback)(()=>!(e.manifest.parameters&&!1!==e.manifest.parameterOnly)&&!r,[e.manifest.parameters,e.manifest.parameterOnly,r])}},709731:(e,r,n)=>{n.d(r,{Ag:()=>E,B3:()=>y,RL:()=>v,cT:()=>T,pP:()=>b,qy:()=>m,wj:()=>I,z8:()=>p});var a=n(414507),i=n(374626),o=n(38580),s=n(776621),l=n(222478),c=n(946465),d=n(232309),u=n(395966),m=(e=>(e.INITIAL="initial",e.RUNNING="running",e.CANCELLED="cancelled",e.ERROR="error",e.DONE="done",e))(m||{}),p=(e=>(e.INCOMPLETE="incomplete",e.SUCCEEDED="succeeded",e.FAILED="failed",e))(p||{});let h={action:"invalid",source:"invalid",clientLifecycleId:"invalid",quick_actions_session_id:"invalid",file_key:"invalid",product_type:"invalid"},_=(0,i.Iz)(()=>(0,o.eU)({state:"initial",aiTrackingContext:h,tasks:[]})),g={[l.JT.FIRST_DRAFT_MAKE_CHANGES]:a.FigmaTeam.AI_GENERATION,[l.JT.FIRST_DRAFT_MAKE_KIT]:a.FigmaTeam.AI_GENERATION,[l.JT.FIRST_DRAFT_COMPONENTIZE]:a.FigmaTeam.AI_GENERATION,[l.JT.FIRST_DRAFT_SUGGEST_PROPS]:a.FigmaTeam.AI_GENERATION,[l.JT.MAKE_EDITS]:a.FigmaTeam.AI_GENERATION,[l.JT.FIRST_DRAFT]:a.FigmaTeam.AI_GENERATION,[l.JT.IMAGE_TO_DESIGN]:a.FigmaTeam.AI_GENERATION},f="__ABORTED__";async function E(e,r,n,o){let l=_(e),{state:m,aiTrackingContext:p}=i.zl.get(l);if("running"===m){(0,s.xi)("quick-actions","Can't start action while another invocation of the same action is running");return}let h=new AbortController;i.zl.set(l,{state:"running",abortController:h,aiTrackingContext:p,tasks:[]}),(0,c.Dl)({...p,...o});try{let e=new Promise(e=>{h.signal.addEventListener("abort",()=>{e(f)})}),a=r({params:n,abortController:h,onTasksUpdate:e=>{i.zl.set(l,r=>({...r,tasks:e}))},clientLifecycleId:p.clientLifecycleId}),s=await Promise.race([a,e]);if(s!==f)return i.zl.set(l,e=>({state:"done",result:s,aiTrackingContext:p,tasks:e.tasks})),(0,u.k)(),(0,c.as)({...p,...o,status:d.dM.COMPLETED,reason:d.F9.SUCCESS}),s;i.zl.set(l,e=>({state:"cancelled",aiTrackingContext:p,tasks:e.tasks})),(0,c.as)({...p,...o,status:d.dM.FAILED,reason:d.F9.STOPPED});return}catch(r){h.abort(),(0,s.x1)("quick-actions","Error encountered running action",{error:r}),(0,s.$D)(g[e]??a.FigmaTeam.UNOWNED,r),i.zl.set(l,e=>({state:"error",error:r,originalParams:n,aiTrackingContext:p,tasks:e.tasks})),(0,c.as)({...p,...o,status:d.dM.FAILED,reason:d.F9.ERROR})}}function y(e){let r=_(e);if("running"===i.zl.get(r).state)return;let n=(0,c.Uu)(e);i.zl.set(r,{state:"initial",aiTrackingContext:n,tasks:[]})}function b(e){let r=_(e);return i.zl.get(r)}function I(e){let r=_(e);return(0,i.md)(r)}function T(e){let r=_(e),n=i.zl.get(r);"running"===n.state&&n.abortController.abort()}function v(e,r,n){let a=_(e),o=(0,i.md)(a),s=async a=>await E(e,r,a,n);return{...o,start:s,stop:()=>{T(e)}}}},341255:(e,r,n)=>{n.d(r,{m:()=>C});var a=n(411855),i=n(188507),o=n(275556),s=n(939863),l=n(472353),c=n(466636),d=n(376441),u=n(662275),m=n(964197),p=n(780700),h=n(269167),_=n(641638),g=n(170786),f=n(335682),E=n(694687),y=n(860178),b=n(555328),I=n(239671),T=n(376485),v=n(307292),S=n(436318),w=n(928754),A=n(16366),N=n(562432);function C({augmentedExtension:e,submenuRef:r,displayAboveTarget:n}){let{extension:g,publishedExtension:C,canRun:O,canRequest:R}=e,P=(0,i.wA)(),{close:D}=(0,N.cq)(),k=h.EO(C),M=h.OY(C),F=M&&h.gn(C),x=(0,v.Kp)(e),U=function(e){let r=(0,y.TA)(),n=(0,i.d4)(e=>e.authedActiveCommunityProfile),o=h.ej(e);return a.useCallback(()=>{if(!e)return;let a=b.aL.QUICK_ACTIONS;(0,l.mG)(e,a,r,n?.id),o()},[e,r,n,o])}(C),B=a.useCallback(()=>{P(d.v({}))},[P]),V=(0,p.Gt)(g.plugin_id,"quick-actions"),G=(0,S.q8)(g),H=(0,S.U4)(g),W=(0,S.S3)({submenuIsShown:H,extension:g,displayAboveTarget:n}),K=(0,A.t)(g,G),Y=a.useCallback(()=>{(0,T.k0)(g)?o.l7.user("insert-widget",()=>L(g)):G&&r?W(r.current):V(),G||x(),K()&&D()},[g,G,r,x,K,W,V,D]),$=(0,f.q5)(),j=(0,_.RW)(),z=a.useCallback(()=>{if(!$||!$.parentOrgId)return;let e={extension:{pluginId:g.plugin_id,iconUrl:g.redirect_icon_url,name:g.name},isWidget:(0,T.k0)(g),orgId:$.parentOrgId,workspaceDetails:j.loaded?j.data:void 0,openedFrom:"editor",fullscreenEditorType:(0,I.wN)($.editorType)};P((0,u.to)({type:w.S,data:e}))},[P,g,$,j]),q=(0,E.sZ)(),X=(0,m.a)(q?.id,g.plugin_id,j.loaded?j.data?.workspaceId:void 0);return a.useMemo(()=>{let e=C?.monetized_resource_metadata;return k&&!M&&e?{onAction:U,actionText:(0,c.XR)(e)}:k&&F?{onAction:B,actionText:(0,s.t)("qa.extensions.update_payment")}:O?{onAction:Y,actionText:(0,s.t)("qa.extensions.run")}:X?{onAction:()=>{},actionText:(0,s.t)("qa.extensions.approval_pending")}:R?{onAction:z,actionText:(0,s.t)("qa.extensions.request_approval")}:{onAction:()=>{},actionText:""}},[k,M,C,U,F,B,O,R,X,z,Y])}let L=e=>{(0,g.j)({pluginID:e.plugin_id,widgetName:e.name,pluginVersionID:e.id,triggeredFrom:"quick-actions"})}},706966:(e,r,n)=>{n(384775),n(719624)},99888:(e,r,n)=>{n.d(r,{$L:()=>p,Be:()=>u,NP:()=>_,Nv:()=>h,OW:()=>d,RA:()=>s,U3:()=>m,W3:()=>i,gc:()=>l,mP:()=>o,qE:()=>a,tq:()=>f,uP:()=>g});var a=(e=>(e.VIEWER="viewer",e.EDITOR="editor",e))(a||{});let i="Quick Actions Search",o="open-quick-actions",s="Quick Actions Search Query Result",l="search-quick-actions";var c=(e=>(e.EXTENSION="extension",e.ACTION="action",e))(c||{});let d="Quick Actions Action",u="Quick Actions Panel Button",m="quick_actions_v1",p="quick_actions_v2",h="frecency",_="string-match",g="extensions",f="assets"},999140:(e,r,n)=>{n.d(r,{Ev:()=>b,Fi:()=>v,M$:()=>A,Mq:()=>S,WZ:()=>N,eg:()=>I,mi:()=>w,zF:()=>C});var a=n(411855),i=n(188507),o=n(67151),s=n(776250),l=n(344780),c=n(374626),d=n(38580),u=n(988022),m=n(683694),p=n(335682),h=n(239737),_=n(132572),g=n(30075),f=n(719624),E=n(185997),y=n(99888);function b(){let e=(0,c.md)(p.ze)||"",r=(0,i.d4)(e=>e.selectedView),n=(0,c.md)(f.rE),o=n?.source||"",d=(0,c.md)(m.wg)?y.qE.EDITOR:y.qE.VIEWER,_=(0,h.PE)();return(0,a.useCallback)(({quickActionsSessionId:n,quickActionsQueryId:a,searchQuery:i,numSearchResults:c,currentSelection:m,module:p,moduleFilters:h,qaVersion:g,searchQueryResults:f})=>{var E;E={quickActionsSessionId:n,quickActionsQueryId:a,searchQuery:i,numSearchResults:c,currentSelection:m,module:p,moduleFilters:h,qaVersion:g,fileKey:e,searchLatencyMs:l.sn.tryStop(y.gc),searchQueryResults:f,source:o,rankingAlgorithm:I(p),productType:(0,u.v5)(r,null),role:d,hasAiFeatureAccess:_},(0,s.sx)(y.RA,E,{forwardToDatadog:!0})},[e,_,d,r,o])}function I(e){switch(e){case g.Jc.ALL:return(0,_.h8)()?y.Nv:y.NP;case g.Jc.EXTENSIONS:return y.uP;case g.Jc.ASSETS:case g.Sn.ASSETS_TAB_DETAIL_VIEW:return y.tq;default:(0,o.xb)(e)}}function T(e){if(!e)return!1;if(e===g.Jc.ALL||e===g.Jc.ASSETS||e===g.Jc.EXTENSIONS)return!0;switch(e){case g.Sn.ASSETS_TAB_DETAIL_VIEW:case g.Sn.VISUAL_SEARCH:return!0;case g.Sn.EXTENSION_DETAILS:case g.Sn.REGENERATE_TEXT_TOAST:case g.Sn.MAGIC_LINK_DONE_TOAST:case g.Sn.BACKGROUND_REMOVE_TOAST:case g.Sn.UPSCALE_IMAGE_TOAST:case g.Sn.RENAME_LAYERS_TOAST:case g.Sn.GENERATE_IMAGE:case g.Sn.IMAGE_TO_DESIGN:case g.Sn.MAGIC_LINK:case g.Sn.PLUGIN_PARAMETER_ENTRY:case g.Sn.PLUGIN_SUBMENU_ENTRY:case g.Sn.TRANSLATE:case g.Sn.REWRITE:case g.Sn.SHORTEN:case g.Sn.FIRST_DRAFT:case g.Sn.FIRST_DRAFT_KIT_PICKER:case g.Sn.FIRST_DRAFT_MAKE_CHANGES:case g.Sn.FIRST_DRAFT_LINT:case g.Sn.FIRST_DRAFT_DEBUG:case g.Sn.FIRST_DRAFT_MAKE_KIT_DEBUG:case g.Sn.FIRST_DRAFT_MAKE_KIT:case g.Sn.MAKE_EDITS:case g.Sn.FIRST_DRAFT_FINE_TUNE:case g.Sn.ASSISTANT_CHAT:case g.Sn.LINK_TO_COMPONENT:case g.Sn.DETECT_VIOLATIONS:case g.Sn.FOR_TESTING:return!1;default:(0,o.xb)(e)}}function v({isQAV2:e,moduleToOpen:r}){return!e||!r||("tab"===r.type?T(r.module):"custom"===r.type?T(r.name):void(0,o.xb)(r))}function S(e){(0,s.sx)(y.W3,e,{forwardToDatadog:!0})}function w(e){(0,s.sx)(y.OW,e,{forwardToDatadog:!0})}function A(e,r){return{...e,onAction:n=>{var a;let i=n.shortcut;a={source:r,shortcutText:i?(0,E.OZ)(i):"",actionText:e.text||""},(0,s.sx)(y.Be,a),e.onAction&&e.onAction(n)}}}function N(){return c.zl.get(m.wg)?y.qE.EDITOR:y.qE.VIEWER}let C=(0,d.eU)(null)},384775:(e,r,n)=>{n.d(r,{$I:()=>D,Jf:()=>M,KY:()=>U,RM:()=>V,gn:()=>B,h$:()=>H,iP:()=>x,jD:()=>k});var a=n(299321),i=n(904669),o=n(344780),s=n(38329),l=n(38580),c=n(374626),d=n(743282),u=n(392592),m=n(153887),p=n(738269),h=n(809831),_=n(988022),g=n(408405),f=n(516703),E=n(239671),y=n(279145);n(893606);var b=n(987850),I=n(239737),T=n(479296),v=n(222478),S=n(99888),w=n(999140),A=n(30075),N=n(719624),C=n(230642),L=n(28298),O=n(994172);let R=(0,l.eU)(null),P=(0,l.eU)(new Set);function D({trackingData:e,moduleToOpen:r}){let n=s.D.dispatch;if((0,g.T)(s.D.getState().progressBarState.mode)||"fullscreen"!==s.D.getState().selectedView.view)return;let l=B(r);(0,w.Fi)({isQAV2:l,moduleToOpen:r})&&o.sn.start(S.mP);let h=s.D.getState(),E={keyboardShortcut:"",currentSelection:(0,f.l)(h),fileKey:h.openFile?.key??"",productType:(0,_.v5)(h.selectedView,null),role:(0,w.WZ)(),hasAiFeatureAccess:(0,I.W7)(),...e};if(c.zl.set(w.zF,e.source),c.zl.set(N.rE,E),l){if(c.zl.set(N.Bu,!0),c.zl.get(N.dd)||(c.zl.set(N.dd,(0,d.g)()),c.zl.set(m.q4)),c.zl.set(R,null),r){if(r.beforeModuleOpen){let e=function(){let e=c.zl.get(N.dd);if(!e)throw Error("Session ID is missing when opening a module in Quick Actions V2.");return{sessionId:e,canvasSelection:i.UN().getCurrentPage()?.directlySelectedNodes,searchQuery:c.zl.get(N.Q8)}}();r.beforeModuleOpen(e)}"tab"===r.type?(c.zl.set(N.Lk,r.module),r.filter&&c.zl.set(L.t,r.filter)):c.zl.set(N.YH,e=>[{module:r.module,name:r.name},...e])}a.qmM.setDefaultTool(),n(u.F.dequeue({matchTimeout:"ephemeral"}))}else n(p.j7({type:y.jv,hasOwnEscKeyHandler:!0,data:{fireQuickActionsTrackingEvent:e=>{(0,w.Mq)({...E,qaVersion:S.U3,quickActionsSessionId:e,timeToShowModal:o.sn.tryStop(S.mP)||0,module:A.Jc.ALL})}}}))}function k(e,r,n){if(c.zl.get(N.Bu)){if(!n.forceClose&&c.zl.get(N.ZG))return!1;c.zl.set(N.Bu,!1),c.zl.set(N.dd,null),(0,O.R)(),(0,C.b)()}else r?.type===y.jv&&e(p.oB());return!0}function M(e){return c.zl.get(N.Bu)||e?.type===y.jv}function F(e){for(let r of Object.values(v.JT))if(e===r)return r;return null}function x(e,r={}){!c.zl.get(N.Bu)&&(!(!F(e)||(0,I.W7)())||!function(e){let r=F(e);if(!r)return!0;let{withinMeter:n}=(0,b.X)(r);return n}(e)||c.zl.get(P).has(e)||(c.zl.get(N.dd)||c.zl.set(N.dd,(0,d.g)()),c.zl.set(R,{action:e,payload:r})))}function U(e={}){let{dismissedAction:r,actionToClear:n}=e;if(c.zl.get(R)){if(n&&n!==c.zl.get(R)?.action)return;if(c.zl.set(R,null),r){let e=c.zl.get(P);c.zl.get(P).has(r)||c.zl.set(P,new Set([...e,r]))}}}function B(e){let r=a.Ez5.uiState().isUI3.getCopy(),n=s.D.getState().selectedView,i=(0,h.JV)(n);return!!(i&&i!==E.nT.Whiteboard&&(r||e))}let V=(0,T.n)((e,r)=>{let n=r?.isUI3??a.Ez5.uiState().isUI3.getCopy(),i=s.D.getState().selectedView,o=r?.editorType??(0,h.JV)(i);return!!(o&&(o===E.nT.Design||o===E.nT.Slides)&&(n||e))});class G{isQuickActionsShown(){return M(s.D.getState().dropdownShown)}}function H(){new G}},719624:(e,r,n)=>{n.d(r,{Bu:()=>y,Bw:()=>u,JB:()=>v,Lk:()=>_,Q8:()=>p,Rt:()=>h,Sf:()=>f,TT:()=>m,YH:()=>E,ZG:()=>T,dd:()=>g,fq:()=>I,hw:()=>w,jh:()=>S,rE:()=>b});var a=n(411855),i=n(288706),o=n(38580),s=n(374626),l=n(877822),c=n(743282),d=n(30075);let u=(0,i.tx)({}),m=(0,i.tx)(null),p=(0,i.tx)(""),h=(0,o.eU)((0,c.g)());(0,o.eU)({loaded:!1,extensions:[]});let _=(0,i.tx)(d.Jc.ALL),g=(0,i.tx)(null),f=(0,o.eU)(null);(0,o.eU)(null);let E=(0,i.tx)([]);(0,s.Iz)(e=>(0,o.eU)(r=>{let[n]=r(E);return n?.name===e}));let y=(0,o.eU)(!1),b=(0,o.eU)(null),I=((0,o.eU)({isShowing:!1,isFigjamDLTBanner:!1}),(0,o.eU)(0)),T=(0,o.eU)(!1);function v(){let e=(0,l.AY)(m);return(0,a.useCallback)(()=>{e()},[e])}function S(){let e=(0,l.AY)(m),r=(0,l.AY)(p),n=(0,l.AY)(E),i=(0,l.AY)(_);return(0,a.useCallback)(()=>{e(),r(),n(),i()},[n,r,e,i])}function w(){let e=(0,l.AY)(p);return(0,a.useCallback)(()=>{e()},[e])}(0,o.eU)(null),(0,o.eU)(null)},199819:(e,r,n)=>{n.d(r,{P:()=>l});var a=n(411855),i=n(256296),o=n(140686);n(163023);var s=n(371325);function l(e){let r=a.createElement(i.h,null,e.label);return a.createElement("div",{className:s.kv},a.createElement(o.S,{checked:e.checked,disabled:e.disabled,label:r}))}},891487:(e,r,n)=>{n.d(r,{F1:()=>w,TH:()=>T,kz:()=>I,qI:()=>h,s3:()=>f});var a=n(411855),i=n(67151),o=n(966712),s=n(498750),l=n(563706),c=n(153234),d=n(283942),u=n(922358),m=n(65633),p=n(30075);function h(){let[e,r]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=e=>{"Tab"===e.key&&g((0,m.x)())&&r(document.activeElement!==document.body)},n=()=>{r(!1)};return document.addEventListener("keydown",e,!0),document.addEventListener("mousedown",n,!0),()=>{document.removeEventListener("keydown",e,!0),document.removeEventListener("mousedown",n,!0)}},[]),e}let _=a.createContext({registerKeyDownHandler:(e,r,n,a)=>{},removeKeyDownHandler:(e,r,n)=>{},setAllowDefaultTabOverride:e=>{}}),g=(e,r)=>{if(!(0,o.kc)().qa_allow_default_tab||!e)return!1;if(void 0!==r)return r;switch(e){case p.Jc.ALL:case p.Jc.EXTENSIONS:case p.Sn.PLUGIN_PARAMETER_ENTRY:case p.Sn.PLUGIN_SUBMENU_ENTRY:case p.Jc.ASSETS:case p.Sn.ASSETS_TAB_DETAIL_VIEW:case p.Sn.ASSISTANT_CHAT:case p.Sn.FIRST_DRAFT_MAKE_KIT:case p.Sn.FIRST_DRAFT_LINT:case p.Sn.FIRST_DRAFT_DEBUG:case p.Sn.FIRST_DRAFT_MAKE_KIT_DEBUG:case p.Sn.LINK_TO_COMPONENT:case p.Sn.IMAGE_TO_DESIGN:case p.Sn.FIRST_DRAFT_KIT_PICKER:return!1;case p.Sn.BACKGROUND_REMOVE_TOAST:case p.Sn.UPSCALE_IMAGE_TOAST:case p.Sn.FIRST_DRAFT_MAKE_CHANGES:case p.Sn.MAKE_EDITS:case p.Sn.FIRST_DRAFT_FINE_TUNE:case p.Sn.MAGIC_LINK:case p.Sn.MAGIC_LINK_DONE_TOAST:case p.Sn.REGENERATE_TEXT_TOAST:case p.Sn.RENAME_LAYERS_TOAST:case p.Sn.SHORTEN:case p.Sn.EXTENSION_DETAILS:case p.Sn.TRANSLATE:case p.Sn.VISUAL_SEARCH:case p.Sn.DETECT_VIOLATIONS:case p.Sn.REWRITE:case p.Sn.FIRST_DRAFT:case p.Sn.GENERATE_IMAGE:case p.Sn.FOR_TESTING:return!0;default:(0,i.xb)(e)}};function f({name:e,recordingKey:r,children:n,forwardUnhandledEventsToFullscreen:i=!0}){let o=a.useRef(new Map),l=a.useRef(null),[p,h]=a.useState(void 0),f=(0,m.x)(),E=a.useCallback(e=>{"Tab"!==e.key||g(f,p)||e.preventDefault();let r=S({key:e.keyCode,modifier:[e.metaKey?s.xH.META:void 0,e.ctrlKey?s.xH.CONTROL:void 0,e.altKey?s.xH.ALT:void 0,e.shiftKey?s.xH.SHIFT:void 0].filter(e=>!!e)}),n=!1;for(let[a,i]of o.current)a.endsWith(r)&&(i(e),n=!0);return!n&&i&&(n=(0,d.jr)(e)),n},[f,p,i]),y=(0,c.v_)(r,"keydown",e=>{E(e)}),b=(0,c.fo)((0,c.Pt)(r,"fullscreen"),"keydown",e=>{E(e.event)&&e.accept()});return a.useEffect(()=>{let e=l.current;if(e)return e.addEventListener("keydown",y),()=>{e.removeEventListener("keydown",y)}},[y]),a.createElement(_.Provider,{value:{registerKeyDownHandler:(e,r,n,a)=>{let i=v({id:e,key:r,modifier:n});o.current.set(i,a)},removeKeyDownHandler:(e,r,n)=>{let a=v({id:e,key:r,modifier:n});o.current.delete(a)},setAllowDefaultTabOverride:h}},a.createElement(u.vL,{name:e,handleKeyDown:b,focusOnMount:!0},a.createElement("div",{ref:l},n)))}function E(e){return e!==s.xH.META||l.Ay.mac?e:s.xH.CONTROL}function y({key:e,modifier:r}){return r?{key:e,modifier:r.map(E)}:{key:e}}function b(e,r,n,o){let l=a.useMemo(()=>r.map(y),[r]),c=a.useId(),{registerKeyDownHandler:d,removeKeyDownHandler:u}=a.useContext(_),m=a.useCallback(e=>{for(let{key:r,modifier:a}of l)if(e.keyCode===r&&(!a||a.every(r=>(function(e,r){switch(e){case s.xH.META:return r.metaKey;case s.xH.CONTROL:return r.ctrlKey;case s.xH.ALT:return r.altKey;case s.xH.SHIFT:return r.shiftKey;default:(0,i.xb)(e)}})(r,e)))){n(e,{key:r,modifier:a});return}},[n,l]);a.useEffect(()=>(o?l.forEach(({key:e,modifier:r})=>{d(c,e,r??[],m)}):l.forEach(({key:e,modifier:r})=>{u(c,e,r??[])}),()=>{l.forEach(({key:e,modifier:r})=>{u(c,e,r??[])})}),[o,l,m,d,u,c])}function I(e,r,n=!0){b("keydown",[{key:e}],r,n)}function T(e,r,n=!0){b("keydown",e,r,n)}function v({id:e,key:r,modifier:n}){return`${e}-${S({key:r,modifier:n})}`}function S(e){return`${e.key}-${e.modifier?.join("-")??""}`}function w(e){return S(e)}},849232:(e,r,n)=>{n.d(r,{v:()=>C});var a=n(411855),i=n(343887),o=n(226814),s=n(629019),l=n.n(s),c=n(153234),d=n(163023),u=n(154254),m=n(939863),p=n(259927),h=n(483990),_=n(498606),g=n(432704),f=n(660510),E=n(72211),y=n(562432),b=n(362991),I=n(452362),T=n(695426),v=n(925330),S=n(377849);let w="search";function A({onClear:e,focus:r}){return a.createElement(i.K,{"aria-label":(0,m.t)("search.search_bar.clear"),onClick:n=>{n.stopPropagation(),e(),r()},htmlAttributes:{"data-tooltip":(0,m.t)("search.search_bar.clear"),"data-tooltip-type":_.Ib.TEXT}},a.createElement(o.C,{style:{"--color-icon":"var(--color-icon-secondary)"}}))}let N=(0,a.forwardRef)(({searchQuery:e,onSearchChange:r,placeholder:n},i)=>a.createElement("input",{ref:i,className:l()(v.Rt,p.Dm),placeholder:n??(0,h.A)("quick-actions-with-wand-modal-placeholder"),onChange:r,value:e,maxLength:150,spellCheck:!1,dir:"auto","aria-autocomplete":"list","data-component":"QuickActionsV2SearchInput"})),C=(0,a.forwardRef)(({searchQuery:e,onSearchChange:r,onClear:n,endEnhancer:i,placeholder:o,forceRoot:s,searchTag:m},p)=>{let h=a.useRef(null),{isRoot:_}=(0,y.cq)(),{focus:C}=(0,b.Y)(h);(0,a.useImperativeHandle)(p,()=>({focus:C}),[C]),(0,g.C)(h);let L=c.AF(w,"change",e=>{r(e.currentTarget.value)});return(0,f.z)(s),(0,E.y)(e,h),a.createElement("div",{className:l()(v.$P)},_||s?a.createElement(d.B,{svg:S.A,className:v.qc}):a.createElement("div",{className:u.cx.pl4.pr4.$},a.createElement(I.o,{recordingKey:(0,c.Pt)(w,"back-button")})),m,a.createElement(N,{onSearchChange:L,placeholder:o,searchQuery:e,ref:h}),n&&e?a.createElement("div",{className:u.cx.flex.mr6.$},a.createElement(A,{onClear:n,focus:C})):i?a.createElement("div",{className:u.cx.mr6.$},a.createElement(T.b,null,i)):null)})},307292:(e,r,n)=>{n.d(r,{Kp:()=>p,w0:()=>h});var a=n(411855),i=n(188507),o=n(966712),s=n(293017),l=n(124271),c=n(261607),d=n(29680),u=n(169006),m=n(236373);function p(e){let r=h();return(0,a.useCallback)(()=>{r((0,l.NG)(e))},[r,e])}function h(){let e=function(){let e=(0,i.d4)(e=>e.recentlyUsedQuickCommands),r=(0,i.wA)();return(0,a.useCallback)(n=>{let a=(0,u.EG)(n),i=n.runPluginArgs,l=e.filter(e=>e.displayName!==a);l.unshift({displayName:a,runPluginArgs:i}),r(s.PQ(l)),(0,o.kc)().qa_frecency_recents_sync&&(0,m.s)({displayText:a,runPluginArgs:i,localFileIdOrPluginId:n.pluginLocalFileId??n.pluginId})},[r,e])}(),r=(0,c.c)(),n=(0,d.p8)("isReadOnly");return(0,a.useCallback)((a,i)=>{let o=(0,l.UK)({item:a,isReadOnly:n,extensionMenuProps:r,includeDisabled:!0,isSubmenuChild:i});o.length>1||e(o[0])},[e,r,n])}},977491:(e,r,n)=>{n.d(r,{hc:()=>eC,wU:()=>ew,z6:()=>eA});var a=n(411855),i=n(67151),o=n(602354),s=n(75395),l=n(675507),c=n(935829),d=n(882316),u=n(38148),m=n(818150),p=n(904669),h=n(629019),_=n.n(h),g=n(776250),f=n(91408),E=n(320063),y=n(966712),b=n(374626),I=n(646240),T=n(860601),v=n(153234),S=n(96328),w=n(743282),A=n(154254),N=n(939863),C=n(501114),L=n(809840),O=n(743905),R=n(271245),P=n(226055),D=n(663767),k=n(669178),M=n(335682),F=n(336599),x=n(173454),U=n(809073),B=n(498606),V=n(48515),G=n(426046),H=n(56063),W=n(708873),K=n(287213),Y=n(901304),$=n(239737),j=n(132572),z=n(222478),q=n(54025),X=n(562432),J=n(24191),Z=n(946465),Q=n(30075),ee=n(384775),et=n(719624),er=n(452362),en=n(821597),ea=n(695426),ei=n(959686),eo=n(268645),es=n(849232),el=n(570428),ec=n(343090),ed=n(891682),eu=n(853284),em=n(994172),ep=n(311487),eh=n(395966),e_=n(614487),eg=n(652875),ef=n(276060),eE=n(699306),ey=n(173842),eb=n(572069),eI=n(663834),eT=n(374072),ev=n(125476),eS=n(243624);let ew=300;function eA({initAssetSearch:e=!1,isVisualSearch:r=!1,initialTab:n=eg.Qx.PLAN_FILE_ASSETS,initialSearchTagType:u,closeOnEscape:m=!1}){let{currentSearch:p}=(0,b.md)(q.WP),h=(0,b.md)(O.hO.currentSearchAtom),y=(0,b.md)(O.hO.currentCommunitySearchAtom),L=(0,eu.V)(),Y=(0,$.Ko)(),[J,Q]=(0,b.fp)(et.Q8),ee=(0,I.Xr)(et.Rt),{recentFragments:er}=(0,O.cN)(!L),ec=(0,ey.U)(!0);(0,H.b)({disabled:!e});let e_=a.useRef(null),eS=a.useRef(null),eA=a.useRef(null),eL=(0,ep.w5)(h),eO=(0,Z._M)({action:z.JT.FIND_INSPIRATION,clientLifecycleId:void 0});a.useEffect(()=>{if(r)return()=>{(0,em.R)(),b.zl.set(q.WP,{currentSearch:null})}},[r]);let eR=r?O.G4.ACTIONS_VISUAL_SEARCH_VIEW:O.G4.ACTIONS_ASSETS_TAB_DETAIL,{close:eP}=(0,X.cq)(),eD=(0,W.j)(),{libraries:ek,presets:eM}=(0,K.g)(),eF=eD.localAssets,ex=r?0===ek.length:0===eF.numComponents&&0===eF.numTemplates&&0===ek.length&&0===eM.length,eU=(0,P.GS)(),eB=a.useMemo(()=>(0,G.N2)(eU,!0),[eU]),{onToggleLibraryModal:eV}=(0,D.u)({entrypoint:eB,modalType:"editor",initialTab:x.Wv.TEAM_LIBRARIES}),eG=a.useCallback(()=>{eP(),eV()},[eP,eV]),eH={title:(0,N.t)("assets_in_actions.browse_libraries_button"),onAction:()=>{eG()},recordingKey:"assetsTab.assetsBrowseLibraries"},{debouncedAssetSearch:eW,clearAssetSearchAndCancelDebounce:eK,cancelDebouncedAssetSearch:eY,flushDebouncedAssetSearch:e$}=(0,q.TC)({debounceWait:ew}),{debouncedFragmentTextSearch:ej,clearFragmentSearchAndCancelDebounce:ez,cancelDebouncedFragmentTextSearch:eq,flushDebouncedFragmentTextSearch:eX}=(0,ed.S)({debounceWait:ew,entryPoint:eR}),{debouncedFragmentTextSearch:eJ,cancelDebouncedFragmentTextSearch:eZ,clearFragmentSearchAndCancelDebounce:eQ,flushDebouncedFragmentTextSearch:e0}=(0,ed.S)({debounceWait:ew,entryPoint:eR,isCommunity:!0}),e1=!r||Y,[e2,e3]=o.tU.useTabs({[eg.Qx.PLAN_FILE_ASSETS]:e1,[eg.Qx.COMMUNITY]:!0},{defaultActive:n}),[e6,e5]=(0,a.useState)(u),e8=e6&&e3.activeTab===eg.Qx.PLAN_FILE_ASSETS;function e4(e){let n,o,u;switch(e){case eg.qG.COMPONENTS:n=A.cx.flex.px4.itemsCenter.gap4.b1.radiusMedium.maxW150.colorBgComponentTertiary.colorTextComponent.colorBorderComponent.$,o={"--color-icon":"var(--color-icon-component)"},u=a.createElement(l.k,{style:o});break;case eg.qG.DESIGNS:n=A.cx.flex.px4.itemsCenter.gap4.b1.radiusMedium.maxW150.colorBgBrandTertiary.colorTextBrand.colorBorderBrand.$,o={"--color-icon":"var(--color-icon-brand)"},u=a.createElement(c.q,{style:o});break;default:(0,i.xb)(e)}return a.createElement("div",{className:n,style:C.sx.add({paddingTop:"3px",paddingBottom:"3px",marginRight:"8px"}).$},a.createElement("div",{className:A.cx.flex.itemsCenter.justifyCenter.w16.h16.flexShrink0.$},u),a.createElement("span",{className:A.cx.truncate.$},e),a.createElement(s.E,{recordingKey:(0,v.Pt)(tv,"dismiss"),onClick:()=>{if(!r)switch(e){case eg.qG.COMPONENTS:(0,O.G1)(J)&&ej(J);break;case eg.qG.DESIGNS:(0,q.kN)(J)&&eW(J,{type:V.I.ALL})}g.az.trackDefinedEvent("asset_search.actions_search_panel_open",{...te,assets_tab_type:(0,eT.D)(eg.Qx.PLAN_FILE_ASSETS,void 0)}),e5(void 0)},className:A.cx.bgTransparent.$},a.createElement(d.f,{style:o})))}let e9=b.zl.get(et.dd),e7=a.useMemo(()=>(0,eT.D)(e3.activeTab,e6),[e6,e3.activeTab]),te=a.useMemo(()=>{let e={entryPoint:eR,session_id:e9||"",assets_tab_type:e7};return e3.activeTab===eg.Qx.COMMUNITY?{search_id:y?.searchId||"",query_type:y?.input.type,query_text:y?.input.type==="input-text"?y?.input.value:void 0,query_node_id:y?.input.type==="input-selection"?y?.input.node.guid:void 0,...e}:e6===eg.qG.DESIGNS?{search_id:h?.searchId||"",query_type:h?.input.type,query_text:h?.input.type==="input-text"?h?.input.value:void 0,query_node_id:h?.input.type==="input-selection"?h?.input.node.guid:void 0,...e}:{search_id:p?.queryId||"",query_type:p?.input.type,query_text:p?.input.type==="input-text"?p.input.query:"",query_node_id:p?.input.type==="input-selection"?p.input.node.guid:"",...e}},[eR,e9,e7,e3.activeTab,e6,p,y,h]),tt=a.useRef(null),tr=a.useCallback(e=>{let[r]=e;r.isIntersecting&&g.az.trackDefinedEvent("fragment_search.assets_details_panel_reached_bottom_of_scroll",{...te,is_community_fragment_search:e3.activeTab===eg.Qx.COMMUNITY})},[te,e3.activeTab]);a.useEffect(()=>{let e=new IntersectionObserver(tr,{threshold:1}),r=tt.current;return r&&e.observe(r),()=>{r&&e.unobserve(r)}},[tr]);let tn=a.useCallback(e=>{if(!r)switch(e){case eg.Qx.PLAN_FILE_ASSETS:eZ(),(0,q.kN)(J)&&(eW(J,{type:V.I.ALL}),e$()),L&&(0,O.G1)(J)&&(ej(J),eX());break;case eg.Qx.COMMUNITY:L&&eq(),eY(),(0,O.G1)(J,!0)&&(eJ(J),e0());break;default:(0,i.xb)(e)}e3.setActiveTab(e2[e].id),g.az.trackDefinedEvent("asset_search.actions_search_panel_open",{...te,assets_tab_type:(0,eT.D)(e,e6)}),r&&(0,eh.k)()},[r,e3,e2,te,e6,eZ,J,L,eW,e$,ej,eX,eq,eY,eJ,e0]),ta=(0,eb.A)(),ti=(0,M.q5)(),to=ta||ti?.name,ts=to&&to.length>20,tl=a.createElement(el.fu,{value:e3.activeTab,onChange:T.lQ,numItems:e1?2:1},a.createElement(el.oz,{tabId:eg.Qx.PLAN_FILE_ASSETS,onAction:()=>tn(eg.Qx.PLAN_FILE_ASSETS),htmlAttributes:ts?{"data-tooltip":to,"data-tooltip-type":B.Ib.TEXT}:void 0},to&&(0,S.EJ)(to,20)),a.createElement(el.oz,{tabId:eg.Qx.COMMUNITY,onAction:()=>tn(eg.Qx.COMMUNITY)},(0,N.tx)("assets_in_actions.detail_view.community_tab.title"))),tc=(0,F.oh)(R.fi),td=(0,k.g5)(U.$A.Design).productComponents,tu=!p&&!tc&&(!td.length||(0,j.kK)()),tm=!L||tu,tp=p?.result.status==="loading"||!r&&tc,th=er?er.length:0,t_=!e6||e6===eg.qG.COMPONENTS,tg=!e6&&!tm&&(!!h||th>0)||e6===eg.qG.DESIGNS,tf=L&&(!e6||e6===eg.qG.DESIGNS),tE=tm||!!e6,ty=a.useCallback(e=>{Q(e),ee((0,w.g)());let r=e3.activeTab===eg.Qx.PLAN_FILE_ASSETS,n=e3.activeTab===eg.Qx.COMMUNITY;t_&&(r||0===e.length)&&eW(e,{type:V.I.ALL}),tf&&(r||0===e.length)&&ej(e),(n||0===e.length)&&eJ(e)},[Q,ee,e3.activeTab,eW,ej,eJ,t_,tf]);(0,E.h)(()=>{g.az.trackDefinedEvent("asset_search.actions_search_panel_open",{...te})});let tb=p?.queryId,tI=y?.searchId,tT=(()=>{switch(e3.activeTab){case eg.Qx.PLAN_FILE_ASSETS:return tb;case eg.Qx.COMMUNITY:return tI;default:(0,i.xb)(e3.activeTab)}})(),tv=r?"visualSearchView":"assetsDetailView",tS=!y||"disabled"===y.result.status;if(r&&tS)return a.createElement(ep.o1,{aiTrackingContext:eO});let tw=ex&&(J.length>0||r);return a.createElement(ei.n,{width:(0,f.jz)(ev.X),height:480,bodyFontMedium:!0,dataTestId:tv,recordingKey:tv},r&&a.createElement(en.t,{ref:e_,key:tT}),a.createElement(ei.n.Header,null,a.createElement("div",{className:A.cx.flex.flexColumn.$,ref:eA},r?a.createElement(eN,{searchTag:e8?e4(e6):void 0}):a.createElement(es.v,{ref:eS,searchQuery:J,onSearchChange:ty,forceRoot:m,onClear:()=>{e5(void 0),Q(""),eK(),L&&ez(),eQ()},endEnhancer:a.createElement(eC,{activeTab:e3.activeTab===eg.Qx.PLAN_FILE_ASSETS&&Y?eg.xA.COMPONENTS:eg.xA.COMMUNITY}),placeholder:ec,searchTag:e8?e4(e6):void 0}),e1&&a.createElement("div",{className:A.cx.if(r,A.cx.py4).px8.if(!r,A.cx.pb8).$},a.createElement(ea.b,{primary:!1,gap:8,align:"center",justify:"space-between"},tl,a.createElement(o.tU.TabPanel,{...e2[eg.Qx.PLAN_FILE_ASSETS]},a.createElement("div",{className:A.cx.if(!r,A.cx.h24).if(r,A.cx.h32).flex.itemsCenter.$})),a.createElement(o.tU.TabPanel,{...e2[eg.Qx.COMMUNITY]},a.createElement("div",{className:A.cx.if(!r,A.cx.h24).if(r,A.cx.h32).flex.itemsCenter.$})))))),a.createElement(ei.n.Body,{key:eL},a.createElement(eg.wg.Provider,{value:{activeTabId:e3.activeTab}},e1&&a.createElement(o.tU.TabPanel,{...e2[eg.Qx.PLAN_FILE_ASSETS]},a.createElement(eg.ZD.Provider,{value:{activeSearchTag:e6}},a.createElement(eo.q,{key:tb},ex&&!L?a.createElement(eI.S,{fillHeight:!0},a.createElement(G.Ee,{onClickExplore:eP,fromActionsModal:!0,width_ui3:264,bgTransparentUI3:!0})):a.createElement("div",{className:_()(A.cx.gap6.if(tE,A.cx.hFull).$)},t_&&a.createElement(ef.O,{header:!e6&&L?{title:(0,N.t)("assets_in_actions.assets_section.title"),icon:a.createElement(l.k,null),seeMore:tw?eH:{title:(0,N.t)("assets_in_actions.see_more_button"),onAction:()=>{g.az.trackDefinedEvent("asset_search.actions_search_panel_open",{...te,assets_tab_type:(0,eT.D)(eg.Qx.PLAN_FILE_ASSETS,eg.qG.COMPONENTS)}),g.az.trackDefinedEvent("asset_search.see_more",{...te}),e5(eg.qG.COMPONENTS)},recordingKey:tv+".assetsSeeMore"}}:void 0,numberOfGridColumns:5,maxResults:!e6&&L?5:void 0,stretchEmptyStates:tE,noLibraries:tw}),tg&&a.createElement(eE.M,{header:e6?void 0:{title:(0,N.t)("assets_in_actions.fragments_section.title"),icon:a.createElement(c.q,null),seeMore:{title:(0,N.t)("assets_in_actions.see_more_button"),onAction:()=>{g.az.trackDefinedEvent("asset_search.actions_search_panel_open",{...te,assets_tab_type:(0,eT.D)(eg.Qx.PLAN_FILE_ASSETS,eg.qG.DESIGNS)}),(0,g.sx)("Fragment search see more",{...(0,O.d3)(eR,e9,h?h.searchId:"",h?h.input:null,!1,void 0,!1)}),e5(eg.qG.DESIGNS)},recordingKey:tv+".fragmentsSeeMore"}},focusHandle:r?e_:eS,isCommunity:!1,numberOfGridColumns:3,stretchEmptyStates:tE,maxResults:e6?void 0:3,entryPoint:eR,forceLoadingState:tp,initialState:r?void 0:{type:"recents",recents:er},lastSearchResultRef:tt}))))),a.createElement(o.tU.TabPanel,{...e2[eg.Qx.COMMUNITY]},a.createElement(eo.q,{key:tI},a.createElement(eE.M,{focusHandle:e_,numberOfGridColumns:3,stretchEmptyStates:!0,isCommunity:!0,initialState:r?void 0:{type:"recents",recents:[]},entryPoint:eR,lastSearchResultRef:tt}))))))}function eN({searchTag:e}){let r;let n=(0,b.md)(O.hO.currentSearchAtom),i=(0,$.Ko)(),o=a.useRef(null),s=(0,ec.U)();switch(n?.input.type){case"input-image":r=n.input.imageFile.name;break;case"input-selection":r=n.input.name;break;default:r=void 0}return a.createElement("div",{className:A.cx.flex.itemsCenter.justifyBetween.px8.py12.if(i,A.cx.bSolid.bb1.colorBorder).$,ref:o},a.createElement("div",{className:A.cx.flex.gap8.itemsCenter.$},a.createElement(er.o,{recordingKey:(0,v.Pt)(s,"backButton")}),a.createElement(L.E,{fontSize:13},(0,N.tx)("asset_suggestions.visual_search_results_title")),a.createElement("span",{className:A.cx.ml2.$},a.createElement(L.E,{fontSize:13,color:"secondary"},r)),e))}function eC({activeTab:e,recordingKey:r}){let n=a.useRef(null),{active:i}=(0,J.H)({ref:n,focusOptions:{enableAutoFocus:!1}});return a.createElement(s.E,{ref:n,"aria-label":(0,N.t)("asset_suggestions.visual_search_icon_button_tooltip"),onClick:()=>(function(e){(0,g.sx)("Visual search in search bar clicked",{has_selection:p.UN().getCurrentPage()?.directlySelectedNodes?.length===1,session_id:b.zl.get(et.dd)}),(0,Y.XG)({action:"find-inspiration",isSearchResult:!1,searchPosition:null,numSearchResults:null,rankingAlgorithm:null,moduleFilters:null});let r=e===eg.xA.COMMUNITY?eg.Qx.COMMUNITY:eg.Qx.PLAN_FILE_ASSETS;(0,ee.$I)({moduleToOpen:{type:"custom",module:(0,y.kc)().community_fragment_search_new_ui?a.createElement(eA,{initialTab:r,isVisualSearch:!0}):a.createElement(ep.WS,{initialTab:e}),beforeModuleOpen:()=>(0,ep.jp)(O.G4.ACTIONS_SEARCH_BAR_ICON),name:Q.Sn.VISUAL_SEARCH},trackingData:{source:"search_bar_visual_search_button"}})})(e),htmlAttributes:(0,y.kc)().fragment_search_tweaks?{"data-tooltip-type":B.Ib.SPECIAL,"data-tooltip-show-above":!0,"data-tooltip":e_.S,"data-tooltip-ai-beta-text":(0,N.t)("asset_suggestions.visual_search_icon_button_tooltip_with_beta_tag")}:{"data-tooltip":(0,N.t)("asset_suggestions.visual_search_icon_button_tooltip"),"data-tooltip-type":B.Ib.TEXT,"data-tooltip-show-above":!0},recordingKey:r,className:_()(eS.g,{[eS.H]:i})},(0,y.kc)().fragment_search_tweaks?a.createElement(u.T,null):a.createElement(m.A,null))}},276060:(e,r,n)=>{n.d(r,{O:()=>q});var a=n(411855),i=n(188507),o=n(756437),s=n(498481),l=n(629019),c=n.n(l),d=n(913817),u=n.n(d),m=n(560945),p=n(966712),h=n(374626),_=n(498750),g=n(723325),f=n(154254),E=n(939863),y=n(154483),b=n(501114),I=n(271245),T=n(453681),v=n(669178),S=n(335682),w=n(237929),A=n(336599),N=n(809073),C=n(48515),L=n(969504),O=n(545816),R=n(986231),P=n(811559),D=n(734017),k=n(132572),M=n(54025),F=n(829639),x=n(719624),U=n(750600),B=n(80265),V=n(321281),G=n(27892),H=n(943341),W=n(905641),K=n(663834),Y=n(168519),$=n(393068),j=n(796616),z=n(573213);function q({numberOfGridColumns:e=4,maxResults:r,stretchEmptyStates:n=!1,header:l,suggestion:d,onClickSuggestion:m,largeSpacing:y,noLibraries:b}){let{currentSearch:w}=(0,h.md)(M.WP),L=(0,i.d4)(S.tB),R=(0,O.O)(),P=(0,h.md)(T.oE),D=(0,v.g5)(N.$A.Design).productComponents,Y=(0,A.oh)(I.fi),$=(0,g.z3)("faux"),j=(0,F.s)(w),z="";w&&"input-text"===w.input.type?z=w.input.query:j&&(z=j.name);let q=y?12:8,J=!Y&&l,Q=!J&&(0,p.kc)().qa_tab_border;if(!(0,k.kK)()&&Y||w?.result.status==="loading")return a.createElement("div",{className:c()({[f.cx.mt8.$]:Q})},J&&a.createElement(X,{title:l.title,icon:l.icon}),a.createElement(G.V,{columns:e,padding:q,gap:12},Array.from({length:r??3*e}).map((e,r)=>a.createElement(G.V.Item,{key:r},a.createElement("div",{className:f.cx.wFull.flex.itemsCenter.justifyCenter.radiusMedium.$},a.createElement(H.Y,{animationDelay:150*r})),a.createElement("div",{className:f.cx.wFull.pt8.$},a.createElement(V.O.Container,null,a.createElement(V.O.SkeletonLine,{index:r}),a.createElement(V.O.SkeletonLine,{index:r,bottom:!0})))))));if(!w||"disabled"===w.result.status){if(0===D.length||(0,k.kK)())return a.createElement("div",{className:f.cx.if(n,f.cx.hFull).$},a.createElement(K.S,{fillHeight:n},a.createElement(B.N,null,a.createElement(B.N.ArtworkIcon,null,a.createElement(o.W,null)),a.createElement(B.N.Text,{title:(0,E.t)("assets_in_actions.assets_section.initial_state.title"),dataTestId:"assets-grid-initial-state"}))));let i=D.slice(0,r??D.length).map((e,r)=>a.createElement(Z,{key:e.node_id,asset:e,libraryNameByResourceId:R,fileNameByLibraryKey:P,assetTypeDropdownSelection:C.I.ALL,searchQuery:z,queryId:w?w.queryId:"",searchSessionId:h.zl.get(x.dd)??"",openFileKey:L?.key??"",sectionPosition:r,onDragStart:$}));return a.createElement("div",{"data-testid":"recents-assets-grid"},l&&a.createElement(X,{title:l.title,icon:l.icon,seeMore:l.seeMore}),a.createElement(W.a,null),a.createElement(U.x,{primary:!0,columns:e,padding:q,gap:12},i))}if("errors"===w.result.status)return a.createElement("div",{className:f.cx.if(n,f.cx.hFull).$},l&&a.createElement(X,{title:l.title,icon:l.icon,seeMore:l.seeMore}),a.createElement(K.S,{fillHeight:n},a.createElement(B.N,null,a.createElement(B.N.ArtworkIcon,{variant:"danger"},a.createElement(s.r,null)),a.createElement(B.N.Text,{title:(0,E.t)("assets_in_actions.assets_section.error.title"),subtitle:(0,E.t)("assets_in_actions.assets_section.error.description")}))));if(b)return a.createElement("div",{className:f.cx.if(n,f.cx.hFull).$},l&&a.createElement(X,{title:l.title,icon:l.icon,seeMore:l.seeMore}),a.createElement(K.S,{fillHeight:n},a.createElement("span",{className:f.cx.textBodyMedium.colorTextSecondary.$,"data-testid":"assets-grid-no-results"},(0,E.tx)("assets_in_actions.no_results_no_libraries.title"))));if(0===w.result.data.length)return a.createElement("div",{className:f.cx.if(n,f.cx.hFull).$},l&&a.createElement(X,{title:l.title,icon:l.icon}),a.createElement(K.S,{fillHeight:n},a.createElement("span",{className:f.cx.textBodyMedium.colorTextSecondary.$,"data-testid":"assets-grid-no-results"},(0,E.tx)("assets_in_actions.assets_section.no_results.title",{query:u()(z,{length:24})}))));let ee=w.result.data.slice(0,r??w.result.data.length).map((e,r)=>a.createElement(Z,{key:e.node_id,asset:e,libraryNameByResourceId:R,fileNameByLibraryKey:P,assetTypeDropdownSelection:C.I.ALL,searchQuery:z,queryId:w?w.queryId:"",searchSessionId:h.zl.get(x.dd)??"",openFileKey:L?.key??"",sectionPosition:r,onDragStart:$}));return d&&ee.push(a.createElement(U.x.Item,{key:"suggestion",fullWidth:!0,primaryAction:{text:"Search designs",shortcuts:[{key:_.Uz.ENTER}],onAction:m},singleClick:!0},a.createElement(U.x.GridItemHighlight,null,d))),a.createElement("div",null,l&&a.createElement(X,{title:l.title,icon:l.icon,seeMore:l.seeMore}),a.createElement(W.a,null),a.createElement(U.x,{primary:!0,columns:e,padding:q,gap:12},ee))}function X({title:e,icon:r,seeMore:n}){let i=n?a.createElement(Y.p,{onAction:n.onAction,recordingKey:n.recordingKey},n.title):a.createElement("div",{className:f.cx.h24.$});return a.createElement($.X,{paddingHorizontal:16},r&&a.createElement($.X.Icon,null,r),a.createElement($.X.Title,{endEnhancer:i},e))}let J=(0,y.fv)();function Z({asset:e,libraryNameByResourceId:r,fileNameByLibraryKey:n,assetTypeDropdownSelection:i,searchQuery:o,openFileKey:s,sectionPosition:l,onDragStart:c,disableActionShortcuts:d}){let u;let m=J(e),h=m?r?.[m]:void 0,_=e.library_key?n?.[e.library_key]:void 0,g=(0,p.u4)("ds_use_lib_keys",_,h);(0,p.kc)().asset_search_return_file_name&&e.file_name&&(u=e.file_name),u||(u=g);let{afterSuccessfulInsert:E,componentInsertSwapCallback:y}=(0,j.H$)({asset:e,assetTypeDropdownSelection:i,sectionPosition:l,openFileKey:s}),{primaryAction:b,secondaryAction:I,tertiaryAction:T}=(0,z.b)({asset:e,afterSuccessfulInsert:E,componentInsertSwapCallback:y,source:"assets_grid",disableActionShortcuts:d});return a.createElement(U.x.Item,{primaryAction:b,secondaryAction:I,tertiaryAction:T},a.createElement(U.x.GridItemHighlight,null,a.createElement(Q,{asset:e,sectionPosition:l,fileName:u,isSearch:!!o,onDragStart:c,afterSuccessfulInsert:E})),a.createElement(U.x.ItemFooter,null,a.createElement("div",{className:f.cx.pt8.flex.flexColumn.gap2.alignLeft.$},a.createElement("span",{className:f.cx.textBodyMedium.colorText.truncate.$},(0,w.kH)(e.name)),a.createElement("span",{className:f.cx.textBodyMedium.colorTextSecondary.truncate.$},u))))}function Q({asset:e,sectionPosition:r,isSearch:n,afterSuccessfulInsert:i,fileName:o,onDragStart:s}){let l=(0,R.Y)(e),c=(0,a.useRef)(null),[d,u]=a.useState({width:0,height:0});(0,m.wY)(c,()=>{u({width:c.current?.clientWidth??0,height:c.current?.clientHeight??0})});let p=(0,L.F)(e,D.K.ACTIONS_ASSETS,r,"Actions Component Search");return a.createElement("div",{className:f.cx.wFull.$,style:b.sx.add({aspectRatio:"1/1"}).$},a.createElement("div",{ref:c,className:f.cx.wFull.hFull.$},a.createElement(P.lX,{item:e,showName:!1,height:d.height,width:d.width,draggable:{sourceForTracking:"actions_assets_tab",clickToInsert:!1,afterSuccessfulInsert:i,sectionNameForTracking:j.Bd,onDragStart:s},shouldHideTooltip:!0,isSearch:n,useBaseTile:!0,hideNameOverlay:!1,numVariants:l,displayType:"grid",sectionPosition:r,showTooltipImmediately:!1,fileName:o,alwaysShowBorder:!1,onContextMenu:p})))}},935871:(e,r,n)=>{n.d(r,{B$:()=>er});var a=n(411855),i=n(188507),o=n(67151),s=n(602354),l=n(189904);n(629019),n(913817),n(776250);var c=n(91408),d=n(320063);n(966712);var u=n(374626),m=n(646240),p=n(860601),h=n(96328),_=n(743282),g=n(154254),f=n(939863),E=n(153887),y=n(743905);n(271245),n(663767);var b=n(318812),I=n(669178),T=n(335682);n(336599);var v=n(516703);n(173454);var S=n(809073),w=n(48515),A=n(426046),N=n(56063),C=n(708873),L=n(287213),O=n(239737);n(132572);var R=n(54025),P=n(562432),D=n(99888),k=n(999140),M=n(30075),F=n(719624),x=n(695426),U=n(959686),B=n(268645),V=n(849232),G=n(570428),H=n(459179),W=n(891682),K=n(853284);n(80265);var Y=n(977491),$=n(652875),j=n(276060),z=n(699306),q=n(173842),X=n(572069),J=n(719256),Z=n(663834),Q=n(124008),ee=n(125476);let et="actions-asset-tab-library-filter";function er({initAssetSearch:e=!1,closeOnEscape:r=!1,initialTab:n=$.xA.COMPONENTS}){let er=(0,K.V)(),en=(0,O.eH)(),ea=(0,X.A)(),ei=a.useRef(null),{currentSearch:eo}=(0,u.md)(R.WP),es=(0,u.md)(y.hO.currentSearchAtom),el=(0,u.md)(y.hO.currentCommunitySearchAtom),[ec,ed]=(0,u.fp)(F.Q8),eu=(0,m.Xr)(F.Rt),{recentFragments:em}=(0,y.cN)(!er),ep=(0,q.U)(er);(0,N.b)({disabled:!e});let{close:eh}=(0,P.cq)(),e_=(0,C.j)(),{libraries:eg,presets:ef}=(0,L.g)(),eE=e_.localAssets,ey=0===eE.numComponents&&0===eE.numTemplates&&0===eg.length&&0===ef.length,{debouncedAssetSearch:eb,clearAssetSearchAndCancelDebounce:eI,cancelDebouncedAssetSearch:eT,flushDebouncedAssetSearch:ev}=(0,R.TC)({debounceWait:Y.wU}),{debouncedFragmentTextSearch:eS,clearFragmentSearchAndCancelDebounce:ew,cancelDebouncedFragmentTextSearch:eA,flushDebouncedFragmentTextSearch:eN}=(0,W.S)({debounceWait:Y.wU,entryPoint:y.G4.ACTIONS_ASSETS_TAB_DETAIL}),{debouncedFragmentTextSearch:eC,cancelDebouncedFragmentTextSearch:eL,clearFragmentSearchAndCancelDebounce:eO,flushDebouncedFragmentTextSearch:eR}=(0,W.S)({debounceWait:Y.wU,entryPoint:y.G4.ACTIONS_ASSETS_TAB_DETAIL,isCommunity:!0}),[eP,eD]=a.useState({type:w.I.ALL}),ek=a.useCallback(e=>{eD(e),eb(ec,e),ev()},[eb,ev,ec]),eM=(0,Q.s)(),eF=a.useRef(null),[ex,eU]=s.tU.useTabs({[$.xA.COMPONENTS]:!0,[$.xA.FRAGMENTS]:er,[$.xA.COMMUNITY]:en},{defaultActive:n});(0,d.h)(()=>()=>{u.zl.set(E.q4),function(e,r,n,a,i,o){let s=u.zl.get(F.dd),l=u.zl.get(T.ze);s&&l&&(e&&(n&&(0,y.G1)(e)&&(0,y.Hl)({type:"input-text",value:e,file_key:l},o,u.zl.get(E.CZ),u.zl.get(y.hO.sortByAtom)),(0,R.kN)(e)&&(0,R.ES)({type:"input-text",query:e,assetTypeOption:{type:w.I.ALL},isKnownLibrary:i}),a&&(0,y.G1)(e,!0)&&(0,y.Hl)({type:"input-text",value:e,file_key:l},o,u.zl.get(E.CZ),u.zl.get(y.hO.sortByAtom),void 0,!0)),r())}(u.zl.get(F.Q8),p.lQ,er,en,eM,y.G4.ACTIONS_ASSETS_TAB_DETAIL)});let eB=(0,I.g5)(S.$A.Design).productComponents.length,eV=em?em.length:0,eG=(0,a.useMemo)(()=>eU.activeTab===$.xA.COMPONENTS?eB:eU.activeTab===$.xA.FRAGMENTS?eV:(eU.activeTab,$.xA.COMMUNITY,0),[eB,eV,eU.activeTab]);!function({activeTab:e,numRecentItems:r,isEmptySearchQuery:n}){let o=(0,u.md)(F.dd),s=(0,u.md)(F.Rt),l=(0,i.d4)(v.l),{query:c,queryId:d,results:m,loaded:p}=function(e){let{currentSearch:r}=(0,u.md)(R.WP),n=(0,u.md)(y.hO.currentSearchAtom);return e===$.xA.COMPONENTS?{query:r?.input.type==="input-text"?r.input.query:"",queryId:r?.queryId,results:r?.result.data||[],loaded:r?.result.status==="loaded"}:e===$.xA.FRAGMENTS?{query:n?.input.type==="input-text"?n.input.value:"",queryId:n?.searchId,results:n?.result.data||[],loaded:n?.result.status==="loaded"}:{query:"",queryId:"",results:[],loaded:!1}}(e),h=(0,k.Ev)(),_=(0,a.useRef)(new Set),g=`${e}-${d}`;(0,a.useEffect)(()=>{(p||r>0&&n)&&!_.current.has(g)&&(h({quickActionsSessionId:o||"invalid-for-assets-tab",quickActionsQueryId:s,searchQuery:c,numSearchResults:p?m.length:r,currentSelection:l,module:M.Sn.ASSETS_TAB_DETAIL_VIEW,moduleFilters:e,qaVersion:D.$L,searchQueryResults:""}),_.current.add(g))},[h,o,s,l,g,e,c,m.length,p,r,n])}({activeTab:eU.activeTab,numRecentItems:eG,isEmptySearchQuery:0===ec.length});let eH=a.useCallback(e=>{switch(e){case $.xA.COMPONENTS:er&&eA(),en&&eL(),(0,R.kN)(ec)&&(eb(ec,eP),ev());break;case $.xA.FRAGMENTS:eT(),en&&eL(),(0,y.G1)(ec)&&(eS(ec),eN());break;case $.xA.COMMUNITY:er&&eA(),eT(),(0,y.G1)(ec,!0)&&(eC(ec),eR());break;default:(0,o.xb)(e)}eU.setActiveTab(ex[e].id),ei.current?.focus()},[eA,eb,eP,ev,eT,eS,eN,ec,eU,ex,er,en,eL,eC,eR]),eW=a.useCallback(e=>{ed(e),eu((0,_.g)()),(eU.activeTab===$.xA.COMPONENTS||0===e.length)&&eb(e,eP),er&&(eU.activeTab===$.xA.FRAGMENTS||0===e.length)&&eS(e),en&&(eU.activeTab===$.xA.COMMUNITY||0===e.length)&&eC(e)},[ed,eu,eU.activeTab,er,en,eb,eP,eS,eC]),eK=a.createElement(G.fu,{value:eU.activeTab,onChange:p.lQ,numItems:en?3:2},a.createElement(G.oz,{tabId:$.xA.COMPONENTS,onAction:()=>eH($.xA.COMPONENTS)},(0,f.tx)("assets_in_actions.detail_view.components_tab.title")),er&&a.createElement(G.oz,{tabId:$.xA.FRAGMENTS,onAction:()=>eH($.xA.FRAGMENTS)},(0,f.tx)("assets_in_actions.detail_view.fragments_tab.title")),en&&a.createElement(G.oz,{tabId:$.xA.COMMUNITY,onAction:()=>eH($.xA.COMMUNITY)},(0,f.tx)("assets_in_actions.detail_view.community_tab.title"))),eY=eo?.queryId,e$=es?.searchId,ej=el?.searchId,ez=er&&eo&&"loaded"===eo.result.status?a.createElement("div",{className:g.cx.flex.wFull.colorBgSecondary.itemsCenter.px8.py6.radiusMedium.$},a.createElement(l.N,{style:{"--color-icon":"var(--color-icon-brand)"}}),a.createElement("span",{className:g.cx.ml8.textBodyMedium.$},ea?(0,f.tx)("assets_in_actions.fragments.fragment_search_sugggestion",{boldText:a.createElement("span",{className:g.cx.textBodyMediumStrong.$},(0,f.tx)("assets_in_actions.fragments.fragment_search_sugggestion_bold_text")),orgText:(0,h.EJ)(ea,20)}):(0,f.tx)("assets_in_actions.fragments_section.empty_state.text")),a.createElement("span",{className:g.cx.mlAuto.textBodyMediumStrong.colorTextBrand.$},(0,f.tx)("assets_in_actions.fragments.fragment_search_sugggestion_hint"))):void 0,eq=eo&&!ey,eX=(0,b.Um)();return a.createElement(U.n,{width:(0,c.jz)(ee.X),height:480,bodyFontMedium:!0,dataTestId:"assetsDetailView"},a.createElement(U.n.Header,null,a.createElement("div",{ref:eF,className:g.cx.flex.flexColumn.$},a.createElement(V.v,{ref:ei,searchQuery:ec,onSearchChange:eW,forceRoot:r,onClear:()=>{ed(""),eI(),er&&ew(),en&&eO()},endEnhancer:er&&a.createElement(Y.hc,{activeTab:eU.activeTab}),placeholder:ep}),(er||en||eq)&&a.createElement("div",{className:g.cx.px8.pb8.$},a.createElement(x.b,{primary:!1,gap:8,align:"center",fullWidth:!0,justify:"space-between"},a.createElement("div",null,(er||en)&&eK),a.createElement("div",null,eq&&a.createElement(s.tU.TabPanel,{...ex[$.xA.COMPONENTS]},a.createElement("div",{className:g.cx.h24.flex.itemsCenter.$},a.createElement(J.i,{assetPanelItems:e_,onSetAssetType:ek,value:eP,id:et,dataTestId:et,recordingKey:et,role:"button",showTooltipOnEllipsis:!0,dropdownShown:eX}))),er&&a.createElement(s.tU.TabPanel,{...ex[$.xA.FRAGMENTS]},a.createElement("div",{className:g.cx.h24.flex.itemsCenter.$},es&&a.createElement(H.s,{containerRef:eF,entryPoint:y.G4.ACTIONS_ASSETS_TAB_DETAIL}))),en&&a.createElement(s.tU.TabPanel,{...ex[$.xA.COMMUNITY]},a.createElement("div",{className:g.cx.h24.$}))))))),a.createElement(U.n.Body,null,a.createElement($.fJ.Provider,{value:{activeTabId:eU.activeTab}},a.createElement(s.tU.TabPanel,{...ex[$.xA.COMPONENTS]},a.createElement(B.q,{key:eY},ey?a.createElement(Z.S,{fillHeight:!0},a.createElement(A.Ee,{onClickExplore:eh,fromActionsModal:!0,width_ui3:264,bgTransparentUI3:!0})):a.createElement(j.O,{numberOfGridColumns:6,stretchEmptyStates:!0,suggestion:er&&ez,onClickSuggestion:()=>{eH($.xA.FRAGMENTS)}}))),er&&a.createElement(s.tU.TabPanel,{...ex[$.xA.FRAGMENTS]},a.createElement(B.q,{key:e$},a.createElement(z.M,{focusHandle:ei,initialState:{type:"recents",recents:em},stretchEmptyStates:!0,entryPoint:y.G4.ACTIONS_ASSETS_TAB_DETAIL}))),en&&a.createElement(s.tU.TabPanel,{...ex[$.xA.COMMUNITY]},a.createElement(B.q,{key:ej},a.createElement(z.M,{focusHandle:ei,stretchEmptyStates:!0,isCommunity:!0,initialState:{type:"recents",recents:[]},entryPoint:y.G4.ACTIONS_ASSETS_TAB_DETAIL}))))))}},699306:(e,r,n)=>{n.d(r,{M:()=>O});var a=n(411855),i=n(67151),o=n(498481),s=n(913817),l=n.n(s),c=n(374626),d=n(723325),u=n(154254),m=n(939863),p=n(743905),h=n(132572),_=n(829639),g=n(750600),f=n(916131),E=n(80265),y=n(931261),b=n(565548),I=n(602138),T=n(321281),v=n(27892),S=n(943341),w=n(192916),A=n(572069),N=n(663834),C=n(168519),L=n(393068);function O({focusHandle:e,entryPoint:r,initialState:n,numberOfGridColumns:i=3,maxResults:s,stretchEmptyStates:d=!1,header:g,forceLoadingState:f,hideEditorNames:y,isCommunity:C,largeSpacing:L,searchResultRef:O,lastSearchResultRef:D}){let k=(0,c.md)(C?p.hO.currentCommunitySearchAtom:p.hO.currentSearchAtom),M=(0,c.md)(p.hO.sortByAtom),F=(0,_.s)(k),x=(0,A.A)(),U=L?12:8,B=(0,h.kK)()||!x;if(n?.type==="recents"&&null===n.recents||k?.result.status==="loading"||f)return a.createElement("div",null,g&&a.createElement(P,{title:g.title,icon:g.icon}),a.createElement(v.V,{columns:i,padding:U,gap:12},Array.from({length:s??3*i}).map((e,r)=>a.createElement(v.V.Item,{key:r},a.createElement("div",{className:u.cx.wFull.flex.itemsCenter.justifyCenter.radiusMedium.$},a.createElement(S.Y,{animationDelay:150*r})),a.createElement("div",{className:u.cx.wFull.pt8.$},a.createElement(T.O.Container,null,a.createElement(T.O.SkeletonLine,{index:r}),a.createElement(T.O.SkeletonLine,{index:r,bottom:!0})))))));if(!k||"disabled"===k.result.status){if(!n)return null;let o=C?(0,m.t)("assets_in_actions.fragments_section.empty_state.header_community"):B?(0,m.t)("assets_in_actions.fragments_section.empty_state.header_generic"):(0,m.t)("assets_in_actions.fragments_section.empty_state.header",{orgText:x}),l=C?(0,m.t)("assets_in_actions.fragments_section.empty_state.text_community"):(0,m.t)("assets_in_actions.fragments_section.empty_state.text");return n.recents?.length?a.createElement("div",null,g&&a.createElement(P,{title:g.title,icon:g.icon,seeMore:g.seeMore}),a.createElement(R,{fragments:n.recents,focusHandle:e,numberOfGridColumns:i,entryPoint:r,maxResults:s,hideEditorNames:y,isCommunity:C,largeSpacing:L})):a.createElement("div",{className:u.cx.if(d,u.cx.hFull).$},a.createElement(N.S,{fillHeight:d},a.createElement(E.N,null,a.createElement(E.N.ArtworkIllustration,{light:a.createElement(I.A,null),dark:a.createElement(b.A,null)}),a.createElement(E.N.Text,{title:o,subtitle:l}))))}if("errors"===k.result.status)return a.createElement("div",{className:u.cx.if(d,u.cx.hFull).$},g&&a.createElement(P,{title:g.title,icon:g.icon}),a.createElement(N.S,{fillHeight:d},a.createElement(E.N,null,a.createElement(E.N.ArtworkIcon,{variant:"danger"},a.createElement(o.r,null)),a.createElement(E.N.Text,{title:(0,m.t)("assets_in_actions.fragments_section.error.title"),subtitle:(0,m.t)("assets_in_actions.fragments_section.error.description")}))));if(0===k.result.data.length){let e="";return"input-text"===k.input.type?e=k.input.value:F&&(e=F.name),a.createElement("div",{className:u.cx.if(d,u.cx.hFull).$},g&&a.createElement(P,{title:g.title,icon:g.icon}),a.createElement(N.S,{fillHeight:d},a.createElement("span",{className:u.cx.textBodyMedium.colorTextSecondary.$},(0,m.tx)("assets_in_actions.fragments_section.no_results.title",{query:l()(e,{length:24})}))))}let V=(0,w.t)(k.result.data,M);return a.createElement("div",null,g&&a.createElement(P,{title:g.title,icon:g.icon,seeMore:g.seeMore}),a.createElement(R,{fragments:V,focusHandle:e,numberOfGridColumns:i,entryPoint:r,maxResults:s,hideEditorNames:y,isCommunity:C,largeSpacing:L,searchResultRef:O,lastSearchResultRef:D}))}function R({fragments:e,focusHandle:r,numberOfGridColumns:n,entryPoint:o,maxResults:s,hideEditorNames:l,isCommunity:c,largeSpacing:m,searchResultRef:p,lastSearchResultRef:h,disableActionShortcuts:_}){let E=(0,f.r)("fragments_grid",r,o,_),b=(0,d.z3)("faux");return a.createElement(g.x,{primary:!0,columns:n,padding:m?12:8,gap:12},e.slice(0,s??e.length).map((r,n)=>{let s=a.createElement(T.O.Container,null,a.createElement(T.O.Title,null,r.file_name),c?a.createElement(T.O.CommunityMetadata,{name:r.editor_name}):a.createElement(T.O.EditInfo,{editor:{name:r.editor_name,imageUrl:r.editor_img_url},lastEditedAt:r.last_edited_at,hideEditorName:l})),{primaryAction:d,secondaryAction:m,tertiaryAction:_}=E(r,n,null,e),f="";switch(r.type){case"fig-file-fragment":f=`${r.file_key}-${r.node_id}`;break;case"hub-file-fragment":f=`${r.hub_file_id}-${r.node_id}`;break;default:(0,i.xb)(r)}return a.createElement(g.x.Item,{key:f,primaryAction:d,secondaryAction:m,tertiaryAction:_},a.createElement(g.x.GridItemHighlight,null,a.createElement(y.a,{entryPoint:o,fragment:r,fragmentPosition:n,onDragStart:b,ref:0===n?p:n===e.length-1?h:null})),a.createElement(g.x.ItemFooter,null,a.createElement("div",{className:u.cx.pt8.$},s)))}))}function P({title:e,icon:r,seeMore:n}){let i=n?a.createElement(C.p,{onAction:n.onAction,recordingKey:n.recordingKey},n.title):a.createElement("div",{className:u.cx.h24.$});return a.createElement(L.X,{paddingHorizontal:16},a.createElement(L.X.Icon,null,r),a.createElement(L.X.Title,{endEnhancer:i},e))}},520103:(e,r,n)=>{n.d(r,{C:()=>er});var a=n(411855),i=n(188507);n(414507);var o=n(343887),s=n(755020),l=n(340860),c=n(297501),d=n(846627),u=n(374626),m=n(812115);n(776621);var p=n(96328),h=n(355819),_=n(163023),g=n(154254),f=n(939863),E=n(501114),y=n(67294),b=n(335666),I=n(970516),T=n(677664),v=n(756085),S=n(376485),w=n(498606),A=n(350913),N=n(222478),C=n(660510),L=n(562432),O=n(341255),R=n(724790),P=n(999140);n(30075);var D=n(821597),k=n(34762),M=n(959686),F=n(187703),x=n(28298),U=n(760445),B=n(315964),V=n(145755),G=n(60418),H=n(507847),W=n(436318),K=n(958473),Y=n(486788),$=n(401045),j=n(794412),z=n(110354);function q({augmentedExtension:e}){let{extension:r,publishedExtension:n}=e,{pop:i}=(0,L.cq)();(0,C.z)();let o=a.useRef(null),{onAction:s,actionText:l}=(0,O.m)({augmentedExtension:e,submenuRef:o,displayAboveTarget:!0}),c=B.H5.DETAILS,d=(0,V.D)({source:c,text:l,onAction:s,augmentedExtension:e,submenuRef:o,hideShortcutOnKeyboardFocus:!0}),u=(0,H.DS)(e);u&&(u=(0,P.M$)(u,c)),(0,F.k)({primaryAction:d,tertiaryAction:u,actionLabel:!0,active:!0,target:null});let m=(0,R.x)(),p=N.HW-48-41,_=n.unique_run_count,f=n.like_count;return a.createElement(M.n,{height:N.HW,width:m,dataTestId:"extension-details-view"},a.createElement(D.t,null),a.createElement(J,{extension:r,onGoBack:i}),a.createElement(h.P,{height:p,className:g.cx.px16.$},a.createElement(Z,{imgUrl:r.redirect_cover_image_url,extensionName:r.name}),a.createElement(Q,{name:r.name,numLikes:f,numRuns:_}),a.createElement(ee,{publishedExtension:n}),a.createElement(et,{description:r.description})),a.createElement(W.Xq,{augmentedExtension:e}))}function X({augmentedExtension:e}){let r=(0,u.md)(x.t);return a.createElement(G.M6,{numResults:1,moduleFilters:r},a.createElement(q,{augmentedExtension:e}))}function J({extension:e,onGoBack:r}){let n=(0,S.k0)(e),u=n?(0,f.t)("qa.extensions.widget"):(0,f.t)("qa.extensions.plugin"),m=e.plugin_id,p=function(e){let r=(0,i.wA)(),n=(0,S.k0)(e)?(0,A.ox)(e.plugin_id):(0,A.ab)(e.plugin_id);return(0,a.useCallback)(()=>{(0,d.e)(n)||r((0,T.RK)({rawInput:n}))},[r,n])}(e),h=(0,i.wA)(),_=a.useCallback(()=>{h(I.Pv({url:n?(0,A.ox)(m):(0,A.ab)(m),extensionType:n?"widget":"plugin"}))},[h,n,m]);return a.createElement("div",{className:g.cx.p8.$,style:E.sx.add({height:"48 px"}).$},a.createElement("div",{className:g.cx.flex.h32.px4.itemsCenter.justifyBetween.$},a.createElement("div",{className:g.cx.flex.flexRow.$},a.createElement(o.K,{onClick:r,"aria-label":(0,f.t)("qa.go_back")},a.createElement(s.C,null)),a.createElement("div",{className:g.cx.pl8.colorText.textBodyLarge.$},u)),a.createElement("div",{className:g.cx.flex.flexRow.itemsCenter.gap8.$},a.createElement(o.K,{onClick:p,"aria-label":(0,f.t)("qa.extensions.open_in_community"),htmlAttributes:{"data-tooltip":(0,f.t)("qa.extensions.open_in_community"),"data-tooltip-type":w.Ib.TEXT}},a.createElement(l.N,null)),a.createElement(o.K,{onClick:_,"aria-label":(0,f.t)("qa.copy_link"),htmlAttributes:{"data-tooltip":(0,f.t)("qa.copy_link"),"data-tooltip-type":w.Ib.TEXT}},a.createElement(c.W,null)))))}function Z({imgUrl:e,extensionName:r}){let n=(0,b.X)(e);return a.createElement("div",{className:g.cx.overflowHidden.bRadius5.mb12.$,style:E.sx.add({aspectRatio:n?"16/9":"2/1",background:"var(--color-loading)"}).$},a.createElement("img",{src:e,className:g.cx.hFull.wFull.eventsNone.$,style:E.sx.add({objectFit:"cover"}).$,alt:`Thumbnail for ${r}`}))}function Q({name:e,numLikes:r,numRuns:n}){return a.createElement("div",{className:g.cx.flex.flexRow.justifyBetween.$},a.createElement("div",{className:g.cx.colorText.textHeadingMedium.$},e),a.createElement("div",{className:g.cx.flex.flexRow.itemsCenter.gap8.colorTextSecondary.textBodyMedium.$},a.createElement("div",{className:g.cx.flex.flexRow.gap2.$},a.createElement(_.B,{svg:z.A,className:g.cx.colorIconSecondary.$,style:E.sx.add({margin:"3px"}).$}),a.createElement("div",null,(0,p.$M)(r))),a.createElement("div",{className:g.cx.flex.flexRow.gap2.$},a.createElement(_.B,{svg:j.A,className:g.cx.mx2.colorIconSecondary.$}),a.createElement("div",null,(0,p.$M)(n)))))}function ee({publishedExtension:e}){if(!e)return null;let r=e.community_publishers?.accepted[0];if(!r)return null;let{img_url:n,name:i}=r;return a.createElement("div",{className:g.cx.pt4.flex.flexRow.itemsCenter.justifyBetween.colorTextSecondary.textBodyMedium.$},a.createElement("div",{className:g.cx.flex.$},a.createElement(y.H8,{user:{img_url:n,name:i},size:y.Pf.SMALL16}),a.createElement("div",{className:g.cx.pl8.$},(0,U.kB)(e))),a.createElement("div",null,a.createElement(K.o,{publishedExtension:e,showTooltip:!0})))}function et({description:e}){return a.createElement("div",{className:g.cx.pt16.pb8.$},a.createElement(m.R,{value:e,quillClassName:$.C,fallback:null,errorFallback:null}))}function er({extensionId:e,extensionType:r}){let{pop:n}=(0,L.cq)(),i=(0,v._P)(e,!0),o=(0,Y.Oy)();if(!i.loaded)return a.createElement(k.R,null);let s=i.plugin;if(!s)return n(),null;let l=o(s,r);return(0,Y.JT)(l)?(n(),null):l.publishedExtension?a.createElement(X,{augmentedExtension:{...l,publishedExtension:l.publishedExtension}}):a.createElement(k.R,null)}},145755:(e,r,n)=>{n.d(r,{D:()=>d});var a=n(411855),i=n(901304),o=n(999140),s=n(891487);n(446888);var l=n(315964),c=n(60418);function d({source:e,text:r,onAction:n,augmentedExtension:d,submenuRef:u,hideShortcutOnKeyboardFocus:m=!1}){let p=(0,c.OX)(),h=(0,s.qI)();return a.useMemo(()=>{let a={text:r,shortcuts:m&&h?[]:[l.Hz],onAction:e=>{d&&(0,i.wI)({extensionId:d.extension.plugin_id,searchPosition:e.target?.index??0,numSearchResults:p.numResults,searchQuery:p.searchQuery,moduleFilters:p.moduleFilters}),n(e)},submenuRef:u};return(0,o.M$)(a,e)},[h,d,p.moduleFilters,p.numResults,p.searchQuery,m,n,e,u,r])}},60418:(e,r,n)=>{n.d(r,{M6:()=>l,OX:()=>c});var a=n(411855),i=n(374626),o=n(719624);let s=a.createContext(null);function l({numResults:e,moduleFilters:r,children:n}){return a.createElement(s.Provider,{value:{numResults:e,moduleFilters:r}},n)}function c(){let e=a.useContext(s),r=(0,i.md)(o.Q8);if(!e)throw Error("useExtensionMetrics must be used within a ExtensionMetricsProvider");return{...e,searchQuery:r}}},507847:(e,r,n)=>{n.d(r,{DS:()=>f});var a=n(188507),i=n(939863),o=n(71425),s=n(986270),l=n(813648),c=n(860178),d=n(331626),u=n(555328),m=n(376485),p=n(562432),h=n(583718),_=n(315964),g=n(486788);function f(e){let r=function(e){let r=(0,a.wA)(),n=(0,d.U_)(),{extension:l,types:c}=e,{unsave:u}=E(e);if(!(e.types.has(_.Ag.RECENT)||e.types.has(_.Ag.USER_SAVED)||e.types.has(_.Ag.LOCAL)))return;let p=!!((0,m.ZQ)(l)&&e.publishedExtension);return{displayText:p?(0,i.t)("universal_insert.remove_local_version"):(0,i.t)("universal_insert.remove"),callback:()=>{!(c.has(_.Ag.LOCAL)&&(0,m.ZQ)(l)&&(r(o.qR(l.localFileId)),p))&&(c.has(_.Ag.RECENT)&&n&&r(((0,m.k0)(l)?s.Kq:s.lD)({storeInRecentsKey:n,resourceId:l.plugin_id})),c.has(_.Ag.USER_SAVED)&&u())}}}(e),n=function(e){let{save:r}=E(e),n=(0,a.wA)(),o=(0,d.U_)(),l=(0,c.TA)();if(!e.types.has(_.Ag.USER_SAVED)&&!(0,g.JT)(e))return{displayText:(0,i.t)("community.saves.save"),callback:()=>{if(r(),o&&l){let{extension:r}=e;n(((0,m.k0)(r)?s.RH:s.gU)({storeInRecentsKey:o,id:r.plugin_id,version:e.extension.id,currentUserId:l,skipPluginRun:!0}))}}}}(e),l=r||n,{pop:u}=(0,p.cq)();if(l)return{shortcuts:[_.r7],onAction:()=>{l.callback(),u()},text:l.displayText}}function E(e){let{extension:r}=e,n=(0,h.zX)({extensionId:r.plugin_id});return(0,l._i)(r.plugin_id,(0,m.k0)(r)?u.vt.WIDGET:u.vt.PLUGIN,e.publishedExtension,n)}},436318:(e,r,n)=>{n.d(r,{S3:()=>I,U4:()=>b,Xq:()=>y,q8:()=>E});var a=n(411855),i=n(188507),o=n(414507),s=n(776621);n(154254),n(501114);var l=n(738269),c=n(620604),d=n(781267),u=n(261607),m=n(318812),p=n(376485),h=n(562432),_=n(307292),g=n(632788);let f="EXTENSION_SUBMENU_DROPDOWN";function E(e){return!!(e.manifest.menu&&e.manifest.menu.length>0)}function y({augmentedExtension:e}){let{extension:r}=e,n=(0,m.Um)(),i=b(r),l=(0,u.c)(),{close:p}=(0,h.cq)(),f=(0,_.w0)();if(!i||!r||!r.manifest||!r.manifest.menu)return null;let E=(0,c.z)(r.manifest.menu,r).map(e=>(0,d.aS)(e,e=>()=>{var r;(0,d.Im)(l,"quick-actions",e.menuAction),f(e,!0),("run-installed-plugin"!==(r=e.menuAction).type&&"run-local-plugin"!==r.type?((0,s.$D)(o.FigmaTeam.AI_FOR_PRODUCTION,Error("shouldSubmenuCloseQuickActions expected 'run-installed-plugin' or 'run-local-plugin'")),1):r.parameterOnly&&r.parameterEntry)||p()}));return a.createElement(g.ms,{parentRect:n?.data.targetRect,displayAboveTarget:n?.data.displayAboveTarget,lean:"left",minWidth:64,items:E})}function b(e){let r=(0,m.Um)();return(0,p.ZQ)(e)?r?.type===f&&r?.data.extensionId===e.plugin_id&&r?.data.localFileId===e.localFileId:r?.type===f&&r?.data.extensionId===e.plugin_id&&r?.data.localFileId===null}function I({submenuIsShown:e,extension:r,displayAboveTarget:n}){let o=(0,i.wA)();return a.useCallback(a=>{if(e)o(l.oB());else if(a){let e=a.getBoundingClientRect();o(l.j7({type:f,data:{extensionId:r.plugin_id,localFileId:(0,p.ZQ)(r)?r.localFileId:null,targetRect:e,displayAboveTarget:n}}))}},[o,e,r,n])}},958473:(e,r,n)=>{n.d(r,{o:()=>g});var a=n(411855),i=n(163023),o=n(154254),s=n(939863),l=n(809840),c=n(466636),d=n(555328),u=n(498606),m=n(112512);function p({publishedExtension:e,showTooltip:r}){if(!e.monetized_resource_metadata)return null;let n=(0,c.X2)(e.monetized_resource_metadata);return r?a.createElement("div",{"data-testid":"freemium-text",className:o.cx.flex.itemsCenter.gap4.$,"data-tooltip":n,"data-tooltip-type":u.Ib.TEXT,"data-tooltip-show-below":!0,"data-tooltip-show-immediately":!0},a.createElement(l.E,{fontSize:11},(0,s.tx)("community.buyer.in_app_purchases")),a.createElement(i.B,{svg:m.A,className:o.cx.colorIconSecondary.$})):a.createElement("div",{"data-testid":"freemium-text"},a.createElement(l.E,{fontSize:11},(0,s.tx)("community.buyer.in_app_purchases")))}function h({publishedExtension:e}){return e.monetized_resource_metadata?a.createElement("div",{"data-testid":"free-trial-text"},a.createElement(l.E,{fontSize:11},(0,s.tx)("community.resource.free_trial_days",{days:e.monetized_resource_metadata.trial_length_in_days}))):null}function _({showTooltip:e}){return e?a.createElement("div",{"data-testid":"off-platform-text",className:o.cx.flex.itemsCenter.gap4.$,"data-tooltip":(0,s.t)("community.detail_view.resource_outside_of_figma"),"data-tooltip-type":u.Ib.TEXT,"data-tooltip-show-below":!0,"data-tooltip-show-immediately":!0},a.createElement(l.E,{fontSize:11},(0,s.tx)("community.detail_view.third_party_badge.off_platform")),a.createElement(i.B,{svg:m.A,className:o.cx.colorIconSecondary.$})):a.createElement("div",{"data-testid":"off-platform-text"},a.createElement(l.E,{fontSize:11},(0,s.tx)("community.detail_view.third_party_badge.off_platform")))}function g({publishedExtension:e,showTooltip:r}){return(0,d.PM)(e)?a.createElement(p,{publishedExtension:e,showTooltip:r}):(0,c.Lt)({resource:e,payment:e.community_resource_payment})?a.createElement(h,{publishedExtension:e}):(0,d.zF)(e)?a.createElement(_,{showTooltip:r}):null}},486788:(e,r,n)=>{n.d(r,{JT:()=>u,Oy:()=>d});var a=n(411855),i=n(756085);n(258237),n(782501);var o=n(269167),s=n(694687);n(860178);var l=n(215822),c=n(376485);function d(){let e=(0,i.tB)(),r=(0,i.ll)(),n=(0,i.U6)(),d=(0,i.cW)(),u=(0,i.ZT)(),m=(0,o.FP)(),p=(0,i.$1)(),h=(0,s.sZ)();return a.useCallback((a,i)=>(function({extension:e,org:r,allowlistPlugins:n,allowlistWidgets:a,publishedPlugins:i,publishedWidgets:s,localExtensions:d,communityPaymentsState:u,lastUsedTimestampById:m,type:p}){let h;let _=(0,o.Y8)({extension:e,publishedPlugins:i,publishedWidgets:s,communityPaymentsState:u});_&&(h=Object.values(d).find(e=>e.plugin_id===_.id));let g={types:new Set([p]),publishedExtension:_,key:function(e){let r=e.plugin_id;return(0,c.ZQ)(e)?`${r}-${e.localFileId}`:r}(e),lastUsedTimestamp:m[(0,c.ZQ)(e)?e.localFileId:e.plugin_id],localPublishedExtension:h};if((0,c.ZQ)(e))return _&&!(0,l.nf)(_)&&(g.publishedExtension=void 0),{...g,extension:e,canRun:!0,canRequest:!1};if((0,c.bH)(e)||!r)return{...g,extension:e,canRun:!0,canRequest:!1};let f=r.public_plugins_allowed,E=r.plugins_whitelist_enforced,y=r.widgets_whitelist_enforced,b=r.plugin_requests_allowed,I=r.widget_requests_allowed,T=(0,c.k0)(e);if(!f)return{...g,extension:e,canRun:!1,canRequest:!1};if(!(T?y:E))return{...g,extension:e,canRun:!0,canRequest:!1};let v=!!(T?a:n)[e.plugin_id];return{...g,extension:e,canRun:v,canRequest:!v&&(T?I:b)}})({extension:a,org:h,allowlistPlugins:r,allowlistWidgets:n,publishedPlugins:d,publishedWidgets:u,localExtensions:p,communityPaymentsState:m,lastUsedTimestampById:e,type:i}),[h,r,n,d,u,p,m,e])}function u(e){let{extension:r}=e;return(0,c.ZQ)(r)}n(30075),n(315964)},128247:(e,r,n)=>{n.d(r,{d$:()=>y});var a=n(411855);n(414507);var i=n(463033),o=n(75395),s=n(96796),l=n(463420),c=n(299321),d=n(904669),u=n(983405),m=n(320063);n(498750),n(153234),n(192437);var p=n(154254);n(939863);var h=n(809840),_=n(535217);n(418943),n(25108);var g=n(356390);n(177505),n(335682),n(498606);var f=n(371591);n(562432),n(724790),n(289375),n(45141);var E=n(695426);function y({validationFailures:e,category:r,supportedKitType:n,selectedKit:i,shouldAutoFix:o}){return a.createElement(a.Fragment,null,[...e.system.filter(e=>e.rule.category===r).filter(e=>!n||e.rule.supportedKitTypes.includes(n)).map(e=>a.createElement(I,{key:e.rule.key,rule:e.rule,output:e.output,dsKitKey:i.dsKitKey,shouldAutoFix:o})),...e.component.filter(e=>e.rule.category===r).map(e=>a.createElement(b,{key:e.rule.key,rule:e.rule,output:e.output,shouldAutoFix:o}))])}function b({rule:e,output:r,shouldAutoFix:n}){let i=a.useCallback(n=>{if(n?.stopPropagation(),!e.fix)return!1;{let n=!0,a=(0,d.UN)();for(let i in r){let o=a.get(i);o&&!e.fix(o,r[o.guid]?.meta)&&(n=!1)}return g.Y5.triggerAction("commit"),n}},[e,r]),o=a.useMemo(()=>Object.values(r).flatMap(e=>e.guids),[r]);return 0===Object.keys(r).length?null:a.createElement(T,{rule:e,guids:o,meta:null,autofix:i,shouldAutoFix:n})}function I({dsKitKey:e,rule:r,output:n,shouldAutoFix:i}){let o=a.useCallback(a=>(a?.stopPropagation(),!!r.fix&&r.fix(e,n.meta)),[r,e,n]);return 0===n.guids.length?null:a.createElement(T,{rule:r,guids:n.guids,meta:n.meta,autofix:o,shouldAutoFix:i})}function T({rule:e,guids:r,meta:n,autofix:o,shouldAutoFix:_}){let[g,f]=a.useState(!1),[y,b]=a.useState(!1),[I,T]=a.useState(!1),w=e=>{T(o(e))},A=a.useCallback(e=>{c.Egt.clearSelection(),c.Egt.addToSelection(e)},[]),N=a.useMemo(()=>r.map(e=>(0,d.UN)().get(e)).filter(Boolean),[r]);return((0,m.h)(()=>{_&&w()}),0===r.length)?null:a.createElement(a.Fragment,null,a.createElement(E.B,{fullWidth:!0,justify:"space-between",align:"center"},a.createElement("button",{onClick:()=>b(!y),className:p.cx.cursorPointer.flex.itemsCenter.$},y?a.createElement(s.O,null):a.createElement(l.k,null),a.createElement(S,{severity:e.severity}),a.createElement(h.E,{fontSize:11,fontWeight:"medium"},e.name)),e.fix&&a.createElement(i.$n,{variant:"secondary",onClick:w},I?"Fixed":"Autofix")),y&&a.createElement(u.Y1,{padding:{horizontal:12},direction:"vertical"},a.createElement(h.E,{fontSize:11,fontWeight:"regular",color:"secondary"},e.warning),A&&a.createElement(i.$n,{variant:"link",onClick:()=>A(r)},"Select offending layers"),a.createElement("button",{onClick:()=>f(!g),className:p.cx.cursorPointer.flex.itemsCenter.$},g?a.createElement(s.O,null):a.createElement(l.k,null),a.createElement(h.E,{fontSize:11,fontWeight:"medium"},"Show metadata")),g&&a.createElement("div",{className:p.cx.flex.flexColumn.wFull.maxH100.px12.overflowYScroll.$},n?a.createElement(h.E,{fontSize:11,fontWeight:"regular",color:"secondary"},JSON.stringify(n)):a.createElement("div",{className:p.cx.wFull.flex.flexWrap.gap4.$},N.map(e=>a.createElement(v,{key:e.guid,node:e}))))))}function v({node:e}){let r=a.useMemo(()=>a.createElement(f.xH,{guid:e.guid,node:e,useUI3Icon:!0}),[e]);return a.createElement(o.E,{className:p.cx.borderBox.h24.flex.px8.gap4.itemsCenter.b1.radiusMedium.maxW150.font11.colorBorder.$,onClick:()=>{c.glU.panToNode(e.guid,!1);let r=(0,d.UN)().getCurrentPage();r&&(r.directlySelectedNodes=[e])},recordingKey:"nodeButton"},r,a.createElement("span",{className:p.cx.truncate.$},e.name))}function S({severity:e}){switch(e){case _.x$.ERROR:return a.createElement("div",{className:p.cx.p2.font11.colorTextDanger.justifyCenter.fontSemiBold.$},"[Error]");case _.x$.WARNING:return a.createElement("div",{className:p.cx.p2.font11.colorTextWarning.justifyCenter.fontSemiBold.$},"[Warning]");default:return null}}n(959686),n(663834)},809058:(e,r,n)=>{n.d(r,{Ne:()=>j,Xy:()=>$});var a=n(265171),i=n.n(a),o=n(248114),s=n(662322),l=n(713634),c=n(68596),d=n(186109),u=n(909351),m=n(647975),p=n(557901),h=n(553380),_=n(787848),g=n(515337),f=n(668015),E=n(3199),y=n(579371),b=n(589750),I=n(315706),T=n(433146),v=n(521422),S=n(108627),w=n(98743),A=n(422810),N=n(788522),C=n(982170),L=n(496188),O=n(692645),R=n(395999),P=n(474143),D=n(285509),k=n(479500),M=n(432384),F=n(231512),x=n(782251),U=n(767642),B=n(728741),V=n(477572),G=n(487781),H=n(988646),W=n(276183),K=n(956376),Y=n(591241);let $=0,j=2;new Map().set(0,F.A).set(i()(.25*j,2),x.A).set(i()(j/2,2),U.A).set(i()(.75*j,2),B.A).set(j,V.A),new Map().set(0,G.A).set(i()(.25*j,2),H.A).set(i()(j/2,2),W.A).set(i()(.75*j,2),K.A).set(j,Y.A),new Map().set("Plus Jakarta Sans",C.A).set("Outfit",O.A).set("Inter",N.A).set("Public Sans",R.A).set("Domine",A.A).set("Source Serif 4",k.A).set("Roboto Serif",D.A).set("Roboto Mono",P.A).set("JetBrains Mono",L.A).set("Space Mono",M.A),new Map().set("Plus Jakarta Sans",l.A).set("Outfit",d.A).set("Inter",s.A).set("Public Sans",u.A).set("Domine",o.A).set("Source Serif 4",h.A).set("Roboto Serif",p.A).set("Roboto Mono",m.A).set("Space Mono",_.A).set("JetBrains Mono",c.A),new Map().set("Plus Jakarta Sans",E.A).set("Outfit",b.A).set("Inter",f.A).set("Public Sans",I.A).set("Domine",g.A).set("Source Serif 4",S.A).set("Roboto Serif",v.A).set("Roboto Mono",T.A).set("Space Mono",w.A).set("JetBrains Mono",y.A)},156099:(e,r,n)=>{n.d(r,{qq:()=>c});var a=n(299321),i=n(275556),o=n(904669),s=n(356390);let l=e=>Uint8Array.from(e.match(/.{1,2}/g).map(e=>parseInt(e,16)));function c({create:e,slideGrid:r}){let n,c;let d=r&&r.length>0,u=(0,o.UN)(),m=u.getCurrentPage();if(!m)throw Error("Something went wrong");if(1===m.directlySelectedNodes.length){var p;if(!function(e){let r=s.Y5.getViewportInfo(),n=r.width/r.zoomScale,a=r.height/r.zoomScale,i=r.offsetX-n/2,o=r.offsetX+n/2,l=r.offsetY-a/2,c=r.offsetY+a/2,d=e.absoluteBoundingBox,u=d.x+d.w,m=d.y+d.h;return!(u>o)&&!(m>c)&&!(d.x<i)&&!(d.y<l)}(n=m.directlySelectedNodes[0])&&(n=void 0),d&&n?.isOrInSlide()){let e=n.findContainingSlideOrSelf();c=u.get(e)}(p=n)&&["FRAME","RECTANGLE","ROUNDED_RECTANGLE","ELLIPSE","STAR","INSTANCE","SYMBOL"].includes(p.type)||(n=void 0)}return i.l7.user("generate image",()=>{if(!n&&e){let e=s.Y5.getViewportInfo();if((n=u.createNode("RECTANGLE")).size={x:1024,y:1024},n.x=e.offsetX-n.size.x/2,n.y=e.offsetY-n.size.y/2,d){if(!c){let e=a.Ez5.slideDeck().getClosestGridCoord({x:n.x,y:n.y},null),i=e.row>=0?e.row:0,o=e.col>=0?e.col:0,s=r[i][o];c=u.get(s)}if(c){let e=function(e){let r=e.absoluteBoundingBox;return{x:r.x+r.w/2,y:r.y+r.h/2}}(c);n.x=e.x-n.size.x/2,n.y=e.y-n.size.y/2}}u.getCurrentPage()?.appendChild(n),n.fills=[{type:"IMAGE",image:{hash:l("7f12ea1300756f144a0fb5daaf68dbfc01103a46"),name:"Checker"},imageScaleMode:"FILL"}],m.setSelectionToSingleNode(n.guid),a.glU.showSelectionOverlayImmediately()}}),n??null}},406385:(e,r,n)=>{n.d(r,{g:()=>G});var a=n(411855),i=n(188507),o=n(67151),s=n(908946),l=n(667859),c=n(299321),d=n(38329),u=n(966712),m=n(646240),p=n(498750),h=n(939863),_=n(239349),g=n(356390),f=n(895083),E=n(843495),y=n(100197),b=n(94500),I=n(279145),T=n(354235),v=n(742311),S=n(775810),w=n(623590),A=n(222478),N=n(709731),C=n(562432),L=n(30075),O=n(384775),R=n(41398),P=n(686589),D=n(596378),k=n(883216),M=n(118567),F=n(928076);function x(){return a.createElement(T.d,null,a.createElement(B,null))}function U(e){return c.X3B.getMagicLinkSelectionInfo().selectedDisplayAmount}function B(){let e=(0,i.wA)(),r=(0,N.RL)(A.JT.MAGIC_LINK,w.e),{start:n,stop:l,state:d,aiTrackingContext:p}=r,{close:_}=(0,C.cq)(),f=(0,a.useRef)(null),I=(0,y.ut)((0,E.aY)(),c.FAf.DESIGN);(0,a.useEffect)(()=>{d===N.qy.INITIAL&&null===f.current&&(f.current=I,(0,E.NT)(c.FAf.PROTOTYPE))},[d,I]),(0,a.useEffect)(()=>()=>{d===N.qy.INITIAL&&null!==f.current&&(0,E.NT)(f.current)},[d]);let T=(0,m.Xr)(S.d_),{selectedDisplayAmount:L,tlfAmount:O,onlyTopLevelNodesSelected:R,topLevelFrameIds:x}=c.X3B.getMagicLinkSelectionInfo(),B=!R&&(0,u.kc)().prototype_ai_magic_link_auto_select_tlfs,[G,H]=(0,a.useState)(B);switch((0,a.useEffect)(()=>{if(d===N.qy.RUNNING&&B){E.tJ(x);let e=setTimeout(()=>H(!1),1e3);return()=>clearTimeout(e)}},[B,d,x]),d){case N.qy.INITIAL:return a.createElement(k.A,{action:A.JT.MAGIC_LINK,actionIcon:a.createElement(s.B,null),actionLabel:(0,h.tx)("fullscreen_actions.quick_actions.add-interactions"),onPerform:()=>{f.current=null,n({})},getCustomDisabledTextFromSelectedNodes:r=>{let n,a;return O>10&&(n=(0,h.tx)("magic_link.tlf_selection_too_large"),a="Select 10 or fewer frames"),a&&e((0,b.Zh)({name:"prototype.ai_magic_link_action_instruction",params:{instruction:a,numSelectedNodes:L,numSelectedTlfs:O}})),n},getCustomSelectedNodesAmount:U,aiTrackingContext:p,instructionAction:{type:"learn_more",url:A.Xy}},(0,h.tx)("magic_link.select_a_few_top_level_frames"));case N.qy.RUNNING:return T(!1),g.Y5.triggerAction("start-magic-link"),a.createElement(M.F,{onCancel:()=>{l(),_()},aiTrackingContext:p},G?(0,h.tx)("magic_link.running_and_selecting_top_level_frames"):(0,h.tx)("magic_link.running"));case N.qy.DONE:return a.createElement(F.h,{magicLinkOutput:r.result,aiTrackingContext:p});case N.qy.ERROR:if(g.Y5.triggerAction("end-magic-link"),r.error instanceof v.ft)return e((0,b.Zh)({name:"prototype.ai_magic_link_custom_error",params:{error:"invalid_selection_from_generic_layers"}})),a.createElement(V,null);if(r.error instanceof v.sT)return e((0,b.Zh)({name:"prototype.ai_magic_link_custom_error",params:{error:"no_interactions_generated"}})),a.createElement(D.u,null,(0,h.tx)("magic_link.no_interactions_generated_general"));if(r.error instanceof v._U)return e((0,b.Zh)({name:"prototype.ai_magic_link_custom_error",params:{error:"no_interactions_generated_existing_interactions"}})),a.createElement(D.u,null,(0,h.tx)("magic_link.no_interactions_generated_existing_interactions"));return a.createElement(P.E,{error:r.error,aiTrackingContext:p});case N.qy.CANCELLED:return g.Y5.triggerAction("end-magic-link"),null;default:(0,o.xb)(d)}}function V(){let e=(0,_.Tv)();return a.createElement(D.u,{buttons:[{label:(0,h.t)("fullscreen.context_menu.auto_rename_layers"),onClick:()=>{(0,O.$I)({moduleToOpen:{type:"custom",module:a.createElement(R.A,{source:c.uQ6.MAGIC_LINK}),name:L.Sn.RENAME_LAYERS_TOAST,beforeModuleOpen:()=>{(0,N.cT)(A.JT.MAGIC_LINK),(0,I.Yh)(d.D.getState().mirror.appModel,A.JT.AUTO_RENAME_LAYERS)&&(0,N.Ag)(A.JT.AUTO_RENAME_LAYERS,f.Ay,{source:c.uQ6.MAGIC_LINK,overwriteNames:!1})}},trackingData:{source:"magic_link_rename_layers_suggestion_toast"}})},variant:"secondary",iconPrefix:a.createElement(l._,null),shortcuts:[{key:p.Uz.ENTER,modifier:[p.xH.META]}]}]},(0,h.tx)(1===e.length?"magic_link.rename_layer_suggestion":"magic_link.rename_layers_suggestion"))}function G(e){let r=d.D.dispatch,n=(0,I.Yh)(d.D.getState().mirror.appModel,A.JT.MAGIC_LINK);(0,O.$I)({moduleToOpen:{type:"custom",module:a.createElement(x,null),name:L.Sn.MAGIC_LINK,beforeModuleOpen:()=>{r((0,b.Zh)({name:"prototype.ai_magic_link_entry_clicked",params:{source:"quick_actions_suggestion"}})),(0,N.B3)(A.JT.MAGIC_LINK),n&&(0,N.Ag)(A.JT.MAGIC_LINK,w.e,e)}},trackingData:{source:"prototype_magic_link_triggered"}})}},335650:(e,r,n)=>{n.d(r,{J1:()=>d,NA:()=>l,Q3:()=>c,ZP:()=>i});var a=n(776250),i=(e=>(e.RECORDINGS_WINDOW_OPENED="recordings_window_opened",e.NEW_RECORDING_BUTTON_CLICKED="new_recording_button_clicked",e.RECORDING_INITIALIZED="recording_initialized",e.RECORDING_DEVICE_UNAVAILABLE="recording_device_unavailable",e.RECORDING_START="recording_start",e.RECORDING_ABORT="recording_abort",e.RECORDING_FINISH="recording_finish",e.RECORDING_SAVED="recording_saved",e.RECORDING_RESTARTED="recording_restarted",e))(i||{}),o=(e=>(e.SIDEBAR="sidebar",e))(o||{}),s=(e=>(e.REPLAY_OPENED="replay_opened",e.LINK_COPIED="link_copied",e.DELETED="deleted",e))(s||{}),l=(e=>(e.SIDEBAR="sidebar",e.LINK="link",e.COMMENT="comment",e.NEW_RECORDING="new_recording",e))(l||{});function c(e,r,n){(0,a.sx)("recording_funnel_event",{fileKey:e?.key,editorType:e?.editorType,funnelEventName:r,entrypoint:n},{forwardToDatadog:!0})}function d(e,r,n,i){(0,a.sx)("recording_replay_event",{fileKey:e,editorType:r,replayEventName:"replay_opened",entrypoint:n,recordingId:i},{forwardToDatadog:!0})}},548091:(e,r,n)=>{n.d(r,{ZM:()=>i,bY:()=>o,r9:()=>s}),n(411855),n(188507),n(970516),n(335682),n(132135);let a="recording_";function i(e){return`${a}${e.replace(/-/g,"_")}`}function o(e){return e.startsWith(a)}function s(e){return o(e)?e.slice(a.length).replace(/_/g,"-"):null}},55069:(e,r,n)=>{n.d(r,{Vm:()=>u,ks:()=>m}),n(411855);var a=n(38580),i=n(374626),o=n(776621);n(457630),n(601607);let s=(0,a.eU)({}),l=(0,a.eU)(null,(e,r,n)=>{let a=e(s);if(n.parentNodeId&&!a[n.parentNodeId]){(0,o.xi)("scene node overlay",`trying to add child overlay to ${n.parentNodeId} but parent overlay does not exist`);return}r(s,e=>({...e,[n.nodeId]:n}))}),c=(0,a.eU)(null,(e,r,n)=>{let a=e(d(n)).map(e=>e.nodeId),i=new Set([n,...a]);r(s,e=>Object.fromEntries(Object.entries(e).filter(([e])=>!i.has(e))))}),d=((0,a.eU)(e=>Object.keys(e(s)).length>0),(0,i.Iz)(e=>(0,a.eU)(r=>Object.values(r(s)).filter(({parentNodeId:r})=>r===e))));function u(e,r,n){i.zl.set(l,{nodeId:e,component:r,...n})}function m(e){i.zl.set(c,e)}function p({viewportInfo:e,overlay:r,offset:n={x:0,y:0}}){let a=useSceneSelectorDangerouslyReturningNodeObjects((e,r)=>e.get(r),r.nodeId),i=useAtomValue(d(r.nodeId));if(!a)return null;let o=a.absoluteBoundingBox,s=canvasRectToViewport(e,{x:o.x,y:o.y,width:o.w,height:o.h}),l={x:s.x+e.x+n.x,y:s.y+e.y+n.y};return React.createElement("div",{style:{position:"fixed",width:s.width,height:s.height,top:0,left:0,transform:`translate(${l.x}px, ${l.y}px)`,pointerEvents:"none",...r.overflowHidden?{overflow:"hidden"}:{}}},r.component,i.map(r=>React.createElement(p,{key:r.nodeId,viewportInfo:e,overlay:r,offset:{x:-1*l.x,y:-1*l.y}})))}(0,a.eU)(e=>Object.values(e(s)).filter(({parentNodeId:e})=>!e))},952746:(e,r,n)=>{n.d(r,{Kf:()=>S,MX:()=>E});var a=n(411855),i=n(243742),o=n(299321),s=n(966712),l=n(153234),c=n(572206),d=n(428654),u=n(798099),m=n(601978),p=n(421123),h=n(460187),_=n(716968);function g(e){let{version:r}=(0,i.DP)();return a.createElement(f,{...e,uiVersion:r})}class f extends l.o6{constructor(){super(...arguments),this.dragging=!1,this.srgbCanvasElement=null,this.srgbCanvasRef=e=>{this.srgbCanvasElement=e,this.srgbCanvasElement&&((0,s.kc)().ee_color_management_force_canvas?(0,m.dM)({canvas:this.srgbCanvasElement,canvasWidth:this.canvasWidth(),canvasHeight:this.canvasHeight(),renderCanvas:this.props.renderCanvas,value:this.props.value,colorSpace:"srgb"}):this.props.renderCanvas(this.srgbCanvasElement,this.props.value))},this.displayP3CanvasElement=null,this.displayP3CanvasRef=e=>{let r=!!(null===this.displayP3CanvasElement&&e);this.displayP3CanvasElement=e,this.displayP3CanvasElement&&(0,m.dM)({canvas:this.displayP3CanvasElement,canvasWidth:this.canvasWidth(),canvasHeight:this.canvasHeight(),renderCanvas:this.props.renderCanvas,value:this.props.value,colorSpace:"display-p3",initializeCanvasColorSpace:r})},this.barElement=null,this.barRef=e=>{this.barElement=e,e&&this.disableWeirdHorizontalScrollingPageNavigation(e)},this.handleElement=null,this.handleRef=e=>{this.handleElement=e,this.handleElement&&(this.props.renderHandle(this.props.value,this.handleElement),this.disableWeirdHorizontalScrollingPageNavigation(this.handleElement))},this.offset=new c.Mi(0,0),this.setOffset=e=>{if(null!=e){let r=e.target.getBoundingClientRect(),n=new c.Mi(r.left+r.width/2,r.top+r.height/2);this.offset=n.subtract(new c.Mi(e.clientX,e.clientY))}else null!=this.props.offset?this.offset=this.props.offset:this.offset=new c.Mi(0,0)},this.ensureInitialized=()=>{if(!this.barElement)throw Error("callback called before rendering barElement")},this.mouseToValue=e=>{this.ensureInitialized();let r=this.barElement.getBoundingClientRect(),n=e.x+this.offset.x,a=e.y+this.offset.y;return n-=r.left+(this.props.handlePadding?this.props.handle/2:0),a-=r.top+(this.props.handlePadding?this.props.handle/2:0),n/=this.props.width,a/=this.props.height,n=Math.max(Math.min(n,1),0),a=Math.max(Math.min(a,1),0),new c.Mi(n,a)},this.valueToPosition=e=>{let r=e.x,n=e.y;return r*=this.props.width,n*=this.props.height,r-=this.props.handlePadding?0:this.props.handle/2,n-=this.props.handlePadding?0:this.props.handle/2,new c.Mi(r,n)},this.onPointerDown=l.Am(this,"pointerdown",e=>{e.stopPropagation(),this.dragging=!0,e.currentTarget.setPointerCapture(e.pointerId),e.currentTarget===this.handleElement?this.setOffset(e):(this.setOffset(),this.props.mouseCallback(this.mouseToValue(new c.Mi(e.clientX,e.clientY)),!1))},{recordMetadata:e=>{this.ensureInitialized();let r=this.barElement.getBoundingClientRect();return{left:(e.clientX-r.left)/r.width,top:(e.clientY-r.top)/r.height}},playbackMetadata:e=>{this.ensureInitialized();let r=this.barElement.getBoundingClientRect();return{clientX:e.left*r.width+r.left,clientY:e.top*r.height+r.top}}}),this.onPointerUp=l.Am(this,"pointerup",e=>{if(!this.dragging)return l.aH;this.dragging=!1,this.props.mouseCallback(this.mouseToValue(new c.Mi(e.clientX,e.clientY)),!0)},{recordMetadata:e=>{this.ensureInitialized();let r=this.barElement.getBoundingClientRect();return{left:(e.clientX-r.left)/r.width,top:(e.clientY-r.top)/r.height}},playbackMetadata:e=>{this.ensureInitialized();let r=this.barElement.getBoundingClientRect();return{clientX:e.left*r.width+r.left,clientY:e.top*r.height+r.top}}}),this.onPointerMove=e=>{this.dragging&&(e.stopPropagation(),this.props.mouseCallback(this.mouseToValue(new c.Mi(e.clientX,e.clientY)),!1))},this.onWheel=l.M5(this,"wheel",e=>{e.stopPropagation();let r=e.ctrlKey;this.props.wheelCallback?.(new c.Mi(e.deltaX,e.deltaY),e.altKey,r)},{recordMetadata:e=>({deltaX:e.deltaX,deltaY:e.deltaY,deltaMode:e.deltaMode,ctrlKey:e.ctrlKey}),playbackMetadata:e=>({deltaX:e.deltaX,deltaY:e.deltaY,deltaMode:e.deltaMode,ctrlKey:e.ctrlKey})}),this.onKeyDown=l.C0(this,"keydown",e=>{e.stopPropagation(),this.props.keyDownCallback(e)})}componentDidUpdate(e,r){super.componentDidUpdate(e,r),e.value!==this.props.value&&(this.srgbCanvasRef(this.srgbCanvasElement),this.displayP3CanvasRef(this.displayP3CanvasElement),this.handleRef(this.handleElement))}componentWillUnmount(){super.componentWillUnmount(),this.dragging=!1}disableWeirdHorizontalScrollingPageNavigation(e){e.addEventListener("wheel",e=>e.preventDefault(),{passive:!1})}canvasWidth(){return this.props.width+(this.props.handlePadding?this.props.handle:0)}canvasHeight(){return this.props.height+(this.props.handlePadding?this.props.handle:0)}render(){let e={position:"relative",boxSizing:"border-box",overflow:"hidden",width:this.props.width+(this.props.handlePadding?this.props.handle:0),height:this.props.height+(this.props.handlePadding?this.props.handle:0),borderRadius:this.props.handlePadding?.5*this.props.handle:0,...this.props.canvasWrapperStyles},r="ui3"===this.props.uiVersion?T:I,n={position:"absolute",boxShadow:`inset ${r}`,left:0,top:0,width:this.props.width+(this.props.handlePadding?this.props.handle:0),height:this.props.height?1:this.props.height+(this.props.handlePadding?this.props.handle:0),borderRadius:this.props.handlePadding?.5*this.props.handle:0,...this.props.ghostStyles},i=this.valueToPosition(this.props.value),s={position:"absolute",boxSizing:"border-box",boxShadow:r,left:i.x,top:i.y,width:this.props.handle,height:this.props.handle,borderRadius:.5*this.props.handle},l=this.props.hitBoxMargin;return a.createElement("div",{className:this.props.containerClass,style:{position:"relative"}},a.createElement("div",{ref:this.barRef,style:e},this.props.colorProfile===o.RYP.SRGB?a.createElement("canvas",{ref:this.srgbCanvasRef,width:`${this.canvasWidth()}px`,height:`${this.canvasHeight()}px`}):void 0,this.props.colorProfile===o.RYP.DISPLAY_P3?a.createElement("canvas",{ref:this.displayP3CanvasRef,width:`${this.canvasWidth()}px`,height:`${this.canvasHeight()}px`}):void 0,a.createElement("div",{style:n})),this.props.children,a.createElement("div",{ref:this.handleRef,onMouseDown:u.dG,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,onPointerMove:this.onPointerMove,onLostPointerCapture:this.onPointerUp,onWheel:this.onWheel,onKeyDown:this.onKeyDown,style:s,tabIndex:0,className:_.p}),a.createElement("div",{onMouseDown:u.dG,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,onLostPointerCapture:this.onPointerUp,onPointerMove:this.onPointerMove,onWheel:this.onWheel,style:{position:"absolute",left:-l,top:-l,right:-l,bottom:-l}}))}}function E(e){return"ui3"===e?b:y}f.displayName="SliderControlInner";let y=12,b=16,I="0 0 0 .6px rgba(0, 0, 0, 0.2)",T="var(--elevation-200-canvas)",v=d.F;function S({hitBoxMargin:e,width:r,height:n,handlePadding:s,value:l,offset:c,mouseCallback:d,wheelCallback:u,keyDownCallback:m,renderCanvas:_,containerClass:f,recordingKey:y,canvasWrapperStyles:b,ghostStyles:I,colorProfile:T,colorHandle:S,children:w}){let{version:A}=(0,i.DP)(),N=(0,a.useCallback)((e,r)=>{let n=E(A);if(r.style.borderRadius=`${n/2}px`,r.style.borderStyle="solid",r.style.borderWidth="0.5px",r.style.borderColor="var(--color-icon-tertiary, white)",r.style.background="var(--color-bg, white)",S){r.style.borderColor="white",r.style.borderWidth=`${"ui3"===A?4:2}px`;let n=S(e);T===o.RYP.DISPLAY_P3&&(0,h.p3)()?r.style.backgroundImage=`url(${(0,p.rl)(n,T||o.RYP.SRGB)})`:r.style.background=v.format(n,(0,h.VG)(T||o.RYP.SRGB))}},[S,T,A]),C=E(A),L="ui3"===A?{outlineWidth:"1px",outlineStyle:"solid",outlineColor:"var(--color-bordertranslucent)",outlineOffset:"-1px"}:{};return a.createElement(g,{hitBoxMargin:e,width:r,height:n,handle:C,handlePadding:s,value:l,offset:c,mouseCallback:d,wheelCallback:u,keyDownCallback:m,renderCanvas:_,renderHandle:N,containerClass:f,recordingKey:y,canvasWrapperStyles:{...L,...b},ghostStyles:I,colorProfile:T},w)}},178772:(e,r,n)=>{n.d(r,{T:()=>y});var a=n(411855),i=n(57860),o=n(915440),s=n(939863),l=n(175290),c=n(809840),d=n(21584),u=n(672517),m=n(226055),p=n(570809),h=n(335682),_=n(825531),g=n(279453),f=n(498606),E=n(676939);function y(){let e=(0,h.tS)()??"",r=function(e){let r=(0,o.Rs)(g.oBY,{key:e}),n=(0,d.J)();return r?.data?.file?.hasPermission&&n}(e),n=(0,p.M)(),{inExperiment:y,devModeGraceDays:b}=(0,_.X)(e),I=(0,m.GS)(),T=n?.remainingGraceDays??b,v=y?(0,s.t)("fullscreen.toolbar.request_sent.dev_mode_grace_period_tooltip",{numDays:T}):(0,s.t)("fullscreen.toolbar.approval_pending.dev_mode_grace_period_tooltip",{numDays:T}),S=(0,a.useMemo)(()=>void 0===y?a.createElement(i.k,null):y?(0,s.tx)("fullscreen.toolbar.request.request_sent"):(0,s.tx)("fullscreen.toolbar.approval_pending"),[y]);return r?a.createElement(u.fu,{name:"Dev Mode Request Badge"},a.createElement("div",{"data-tooltip":v,"data-tooltip-type":f.Ib.TEXT,"data-tooltip-show-immediately":!0,"data-tooltip-hide-immediately":!0,"data-tooltip-show-above":!!I||void 0,"data-tooltip-show-below":!I||void 0,"data-testid":"dev_mode_request_pending_tooltip"},a.createElement(l.Y,{width:y?100:120,padding:{vertical:I?4:8,horizontal:I?8:13},cornerRadius:6,backgroundColor:I?"secondary":"toolbar-secondary",horizontalAlignItems:"center"},a.createElement(c.E,{fontSize:11,fontWeight:"medium"},S)))):I?null:a.createElement(E.g,{variant:"toolbar-secondary",text:(0,s.t)("general.dev_mode")})}},377020:(e,r,n)=>{let a;var i=n(411855),o=n(188507),s=n(414507),l=n(629019),c=n.n(l),d=n(134288),u=n(388809),m=n(966712),p=n(374626),h=n(915440),_=n(752553),g=n(886653),f=n(153234),E=n(776621),y=n(281381),b=n(950431),I=n(163023),T=n(715981),v=n(154254),S=n(939863),w=n(256975);n(30686);var A=n(964881),N=n(944682),C=n(199590),L=n(293017),O=n(782656),R=n(103907),P=n(672517),D=n(226055),k=n(788811),M=n(420576),F=n(355513),x=n(411916),U=n(516398),B=n(408405),V=n(122983),G=n(369870);n(488983);var H=n(52570),W=n(335682);n(594901);var K=n(860178),Y=n(279453),$=n(147206),j=n(428467),z=n(239671),q=n(800876),X=n(498606),J=n(143678),Z=n(507956),Q=n(836927),ee=n(868861),et=n(467594),er=n(585645),en=n(476005),ea=n(676939),ei=n(860142),eo=n(601538),es=n(848761),el=n(267850),ec=n(733378),ed=n(362473),eu=n(882746),em=n(451396),ep=n(784578),eh=n(675694),e_=n(250116);let eg=(0,V.ck)(),ef="FULLSCREEN_FILENAME_CHEVRON",eE="FULLSCREEN_FILENAME_DROPDOWN";class ey extends f.o6{constructor(e){super(e),this.startRenaming=f.cZ(this,"click",()=>{this.props.canRename&&this.props.user&&this.props.dispatch(L.vg())}),this.submitFileName=e=>{this.props.dispatch(L.Wk()),this.props.onRename(e)},this.cancelFileName=()=>{this.props.dispatch(L.Wk())},this.nameRef=i.createRef()}render(){let e=(0,b._C)({textRef:this.nameRef,text:this.props.name});return this.props.isRenaming?i.createElement(er.A,{className:c()(eh.a6),placeholderValue:this.props.name,submit:this.submitFileName,cancel:this.cancelFileName,recordingKey:f.Pt(this.props,"input"),maxLength:this.props.maxLength}):i.createElement("span",{className:c()(eh.DD,{[eh.il]:!!this.props.user}),onClick:this.startRenaming,dir:"auto","data-testid":this.props.dataTestId||"filename",tabIndex:0,role:"textbox",ref:this.nameRef,onKeyDown:e=>(0,U.hx)({e,onClickHandler:this.startRenaming}),"aria-label":(0,S.t)("fullscreen.filename_view.file_input_title"),"data-tooltip-type":X.Ib.TEXT,"data-tooltip":e?this.props.name:void 0},this.props.name)}}function eb(e){let r=(0,D.GS)();return i.createElement(ey,{...e,name:(0,M.oj)(e.repo),onRename:r=>{e.dispatch(O.NN({repo:e.repo,name:r}))},isUI3:r})}function eI(e){let r=(0,o.wA)(),n=(0,K.iZ)(),a=(0,W.q5)(),s=(0,o.d4)(e=>e.isRenaming),l=(0,p.md)(k.lu),c=!!a&&(0,ec.DF)(a,n),d=null==a&&null!=l?{type:"new-autosave-file",newAutosaveFile:l}:{type:"open-file",openFile:a,canRename:c};return i.createElement(eT,{dispatch:r,user:n,renamableFile:d,isRenaming:s,recordingKey:e.recordingKey})}function eT(e){let r,n,a;let o=(0,_.n_)(k.b_),l=(0,D.GS)(),{renamableFile:c}=e;"open-file"===c.type?(r=c.canRename,n=c.openFile?.name):(r=!0,n=c.newAutosaveFile.name,a=c.newAutosaveFile.editorType);let d="new-autosave-file"===c.type;return i.useEffect(()=>{d&&n&&a&&(0,F.hL)(n,(0,z.wN)(a))},[d,n,a]),i.createElement(ey,{...e,name:n||(0,S.t)("fullscreen.filename_view.title_placeholder"),canRename:r,onRename:r=>{"new-autosave-file"===c.type?o({fileKey:c.newAutosaveFile.fileKey,name:r,source:k.oE.EDITOR}):c.openFile?e.dispatch(N.Nw({file:c.openFile,name:r})):(0,E.$D)(s.FigmaTeam.UNOWNED,Error("Tried renaming but file does not exist"))},isUI3:l,maxLength:100})}function ev({file:e}){let r=(0,o.wA)(),n=(0,R.n6)();if(!e||!(0,M.Kz)(e))return null;let a=J.e0.EDITOR_TOOLBAR_ACTION;return i.createElement("div",{className:eh._H},i.createElement(ee.a$,{branchFileKey:e.key,size:y.vj.LARGE,onClick:e=>{r(C.hx({direction:q.Kn.TO_SOURCE,trackingContextName:a,unreadCommentCount:n}))},convertsToDotWithSmallScreen:!0,isToolbar:!0}))}ey.displayName="EditableName";let eS=e=>{let r=(0,h.Rs)(Y.GgD,{repoId:e});if("loaded"!==r.status)return;let n=r.data.repo?.files;return!!n&&n.map(e=>(0,ee.AM)(e)).some(e=>e===ee.pT.IN_REVIEW||e===ee.pT.CHANGES_REQUESTED||e===ee.pT.APPROVED)};function ew({file:e,viewOnly:r}){let n=(0,h.Rs)(Y.Std,{orgId:e.parentOrgId}),a=(0,h.Rs)(Y.nn0,{fileKey:e.key}),s=(0,Z.ks)(),l=(0,w._I)(),c=(0,A.l7)(),u="loading"===n.status||e.parentOrgId&&!e.org,m=(0,Q.Yj)(e.fileRepoId),p=e.fileRepoId?m:null,_=(0,o.wA)(),g=(0,ep.kU)({file:e,viewOnly:r}),f=r&&!g;if(!e||p?.status==="loading"||u||"loading"===a.status||f)return null;let E=!!(e.repo&&(0,M.Ns)(e,e.repo)),y=!!(0,M.Kz)(e)&&!!e.trashedAt;return s&&!l?i.createElement("div",{className:v.cx.flex.itemsCenter.wFitContent.$},i.createElement(ea.g,{variant:"toolbar-secondary",text:(0,S.t)("general.dev_mode")})):i.createElement(d.P.div,{transition:{duration:.3,ease:"easeOut",delay:.2,opactity:{ease:"linear",delay:.2}},initial:{width:0,translateX:-100,opacity:0},animate:{width:"auto",translateX:0,opacity:1}},i.createElement("div",{className:v.cx.flex.itemsCenter.wFitContent.$},E&&e.fileRepoId&&i.createElement(eA,{repoId:e.fileRepoId,isEditor:e.canEdit,dispatch:_,branchInfo:p}),i.createElement(i.Fragment,null,i.createElement(ed.A,null),!y&&!c&&i.createElement(eu.a7,{file:e,viewPermission:g,recordingKey:"fileNamePermission"}))))}function eA(e){let r=eS(e.repoId),{branchInfo:n}=e;if(!n||"loaded"!==n.status)return null;let a=n.data.activeBranches.length;return a<1?null:i.createElement(T.L,{text:(0,S.t)("fullscreen.filename_view.branch-count",{BRANCHES:a}),onClick:()=>e.dispatch(C.o5({trackingContextName:J.e0.EDITOR_TOOLBAR_ACTION})),showIndicator:e.isEditor&&r,indicatorStyle:eh.q3})}function eN({openFile:e,user:r}){let n=(0,em._)(),a=function(e,r){if(!e?.project)return"";let n=e.project;return n.path?n.path:(0,m.kc)().ps_benchmark&&n.id===r?.personal_drafts_folder_id?(0,S.t)("fullscreen.filename_view.drafts_to_move"):(0,S.t)("fullscreen.filename_view.drafts")}(e,r),o=a.length>25?a:void 0,s=(0,D.GS)();return i.createElement("div",{className:a?eh.TV:eh.jw,title:o},i.createElement("div",{className:eh.ub,onClick:n,role:"link",tabIndex:0},a),!s&&i.createElement(I.B,{ariaHidden:!0,svg:e_.A,className:eh.xo}))}class eC extends f.o6{constructor(e){super(e),a=i.createRef()}renderDropdownMenu(){let{dropdownShown:e,recordingKey:r,dispatch:n}=this.props,a=!!e&&e.type===eE;return i.createElement(el.G,{trackEvent:(e,r)=>{this.context.trackEvent(e,r)},dropdownTargetRect:e?.data?.targetRect,recordingKey:r,dispatch:n,dropdownVisible:a,activatePathOnMount:e?.data?.activatePathOnMount})}renderChevronWithDropdown(e,r){let n=i.createElement(i.Fragment,null,i.createElement(et.c,{divRef:a,className:e?eh.ai:eh.fN,svgContainerClassName:eh.Gp,dispatch:this.props.dispatch,showingDropdown:!!r&&this.showingDropdown(),dropdownKey:eE,recordingKey:f.Pt(this.props,"chevron"),dataOnboardingKey:ef,rcsHandlerId:"Filename chevron clicked",tabIndex:0,ariaLabel:(0,S.t)("fullscreen.filename_view.edit_file_menu"),dataTestId:"filename-menu-chevron",isUI3:this.props.isUI3}),this.renderDropdownMenu());return i.createElement("div",{className:c()({[eh.Xz]:!e}),onMouseDown:e=>{let r=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0});a?.current?.dispatchEvent(r)},onClick:e=>{e.stopPropagation()}},n)}showingDropdown(){return this.props.dropdownShown?.type===eE}render(){let{user:e,openFile:r,isRenaming:n,isUI3:o}=this.props,s=r?.repo,l=!!(r&&(0,M.Kz)(r)),d=!!(r&&s&&(0,M.Ns)(r,s)),m=!!r&&(0,ec.DF)(r,e),p=!!this.props.user&&!!r&&!!this.props.editorIsReadOnly,h=!!r&&(0,$.Pe)(r),_=!n&&e&&r&&!h&&!this.props.isLimitedDevMode&&!this.props.hideChevron,g=!n&&e&&r&&this.props.isLimitedDevMode,E=_||g,y=!eg&&this.props.currentWorkspace&&this.props.hasMultipleWorkspaces;return i.createElement("div",{className:c()(eh.iW,{[eh.Ij]:!e}),id:"fullscreen-filename","data-onboarding-key":eo.G8,onContextMenu:e=>{if(a.current){let r=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0});a.current.dispatchEvent(r),e.preventDefault()}}},i.createElement("div",{className:n?eh.Tt:eh.W},r?.fileRepoId&&e?.id&&i.createElement(i.Fragment,null,i.createElement(u.aY,{openFile:r,modalShown:this.props.modalShown,topLevelMode:this.props.topLevelMode,dispatch:this.props.dispatch}),i.createElement(H.jQ,{repoId:r.fileRepoId,openFileKey:r.key,currentUserId:e.id,appMergingStatus:this.props.mergingStatus,openFileMerge:this.props.openFileMerge})),!1,y&&!o&&i.createElement("div",{className:eh.tL},i.createElement(em.H,{iconClassName:eh.ht})),i.createElement(eN,{user:e,openFile:r}),!n&&l&&s&&i.createElement(en.o,{repo:s,dispatch:this.props.dispatch,trackingContextName:J.e0.EDITOR_TOOLBAR_ACTION}),d&&s?i.createElement(eb,{dispatch:this.props.dispatch,user:e,repo:s,canRename:m,isRenaming:n}):i.createElement(eI,{recordingKey:f.Pt(this.props,"fileName")}),!n&&r&&e&&i.createElement("div",{className:eh.ld},i.createElement(ev,{file:r})),!n&&r&&i.createElement(es.s,{openFile:r}),i.createElement("div",{className:c()({[eh.Dg]:!E})},E&&this.renderChevronWithDropdown(d,r)),(0,G.MP)()&&i.createElement(ei.e,{isUI3:!1,targetKey:ef}),!n&&r&&i.createElement(ew,{file:r,viewOnly:p})))}}eC.displayName="FilenameView",eC.contextType=P.QE;let eL=(0,g.xx)(x.vp);(0,o.Ng)(function(e){let r;let n=(0,j.getPermissionsState)(e),a=(0,m.kc)().ps_benchmark;r=a?eL(n.user,n.currentUserOrgId,n.currentTeamId):eL(n.user,n.currentUserOrgId);let i=(0,B.T)(e.progressBarState.mode)?!e.openFile?.canEdit:e.mirror?.appModel?.isReadOnly,o=!1;return o=a?e.plans.length>1:(0,x.Tt)(e.authedUsers.orderedIds,n),{editorIsReadOnly:i,isLimitedDevMode:(0,Z.$A)(e.selectedView)&&!(0,w.tn)(e),openFile:e.openFile,loadingState:e.loadingState,userStateLoaded:e.userStateLoaded,dropdownShown:e.dropdownShown,isRenaming:e.isRenaming,userFlags:e.userFlags,currentWorkspace:r,hasMultipleWorkspaces:o,workspaceName:(0,x.HE)(e,r),selectedView:e.selectedView,topLevelMode:e.mirror.appModel.topLevelMode,modalShown:e.modalShown,mergingStatus:e.mergingStatus,openFileMerge:e.openFileMerge,...n}})(eC)},267850:(e,r,n)=>{n.d(r,{G:()=>eC});var a=n(411855),i=n(188507),o=n(299321),s=n(138020),l=n(966712),c=n(374626),d=n(915440),u=n(939863),m=n(411045),p=n(303345),h=n(616541),_=n(566590),g=n(119735),f=n(54552),E=n(944682),y=n(660656),b=n(738269),I=n(507877),T=n(889399),v=n(293017),S=n(662275),w=n(103907),A=n(672517),N=n(289104),C=n(385111),L=n(965480),O=n(226055),R=n(988022),P=n(720647),D=n(420576),k=n(888429),M=n(12493),F=n(906400),x=n(396226),U=n(711296),B=n(723245),V=n(875847),G=n(356390),H=n(285381),W=n(665723),K=n(122983),Y=n(869156),$=n(335682),j=n(99506),z=n(279453),q=n(147206),X=n(428467),J=n(284321),Z=n(206193),Q=n(694517),ee=n(300874),et=n(239671),er=n(451e3),en=n(813408),ea=n(851363),ei=n(279145),eo=n(143678),es=n(392340),el=n(858212),ec=n(671667),ed=n(868861),eu=n(828736),em=n(193948),ep=n(236192),eh=n(771970),e_=n(71676),eg=n(622073),ef=n(611964),eE=n(18339),ey=n(728587),eb=n(449731),eI=n(234587),eT=n(144119),ev=n(266294),eS=n(733378),ew=n(736524);let eA=(0,K.ck)();var eN=(e=>(e.DISABLED="disabled",e.PUBLISH="publish",e.SHOW_UPSELL_MODAL="show_upsell_modal",e))(eN||{});function eC({trackEvent:e,dropdownTargetRect:r,recordingKey:n,dispatch:eN,dropdownVisible:eC,activatePathOnMount:eL,leanPadding:eO}){let eR=(0,i.d4)(e=>e.mirror.appModel),eP=(0,i.d4)(e=>e.selectedView),eD=(0,i.d4)(e=>(0,X.getPermissionsStateMemoized)(e)),ek=(0,i.d4)(e=>e.userStateLoaded),eM=(0,$.q5)(),eF=(0,i.d4)(e=>e.fileVersion),ex=(0,$.Cq)({useSinatraType:!0}),eU=(0,i.d4)(e=>e.repos),eB=(0,i.d4)(e=>e.teams),eV=(0,i.d4)(e=>e.currentUserOrgId),eG=(0,i.d4)(e=>e.currentTeamId),eH=(0,es.Q)({currentOrgId:eV,currentTeamId:(0,l.kc)().ps_benchmark?eG:null}),eW=(0,O.GS)(),eK=(0,eT.sO)(),eY=(0,eI.cJ)(),e$=(0,ew.F)(),ej=(0,d.Rs)(z.dTR,{fileKey:eM?.key||""},{enabled:!!eM?.key}),ez=(0,i.d4)(J.fA),eq=(0,c.md)(J.p9);(0,Y.SR)();let eX=(0,d.Rs)(z.iY3,{branchFileKey:eM?.key||""},{enabled:!!eM}),eJ=(0,N.JT)(),eZ=a.useMemo(()=>{if(eM&&"loaded"===eH.status)return(0,B.T0)(eH.data,eM.key)},[eM,eH]),eQ=(0,i.d4)(J.F9),e0=(0,i.d4)(e=>e.mirror.appModel.topLevelMode),e1=(0,e_.jT)(eM,eQ),e2=(0,M.$n)(),e3=(0,w.n6)(),e6=(0,L.kD)(),e5=(0,L.J3)(),e8=(0,L.JU)(e5),e4=e5===L.kN.FILE_IN_DRAFTS,e9=(0,g.J_)(),e7=(0,g.pH)(eM?.key??null,{enabled:!!eM&&e9()}),te=(0,g.GI)("filename-context-menu"),tt=o.Ez5.uiState().isRecovery.getCopy(),tr=a.useMemo(()=>eq?ez?"publish":"show_upsell_modal":"disabled",[ez,eq]),tn=(0,H.R6)(),{colorProfilePreference:ta}=(0,W.jK)(),ti=(0,W.hP)(ta),to=(0,el.S)(),ts=C.h.useTrackingContext({trigger:Z.b.FILE_DUPLICATE}),tl=!1,tc=!1,td=!1;"loaded"===ej.status&&(tl=!!ej.data?.file?.canTrash&&!!(0,s.oA)(ej.data?.file?.canTrash),tc=!!(0,s.oA)(ej.data?.file?.canMove),td=!!(ej.data.file&&(0,P._R)(ej.data.file.editorType??j._Y.DESIGN,ej.data.file.currentPlanUser)));let tu=(0,m.cf)(),tm=(0,p.$w)(eM?.editorType?.toString(),eM?.project?.id??null,tc,!!ej.data?.file?.isDraftFile,ej.data?.file?.currentPlanUser?.key.type??null);if(!eM||!eC)return null;let tp=eP.editorType,th=tp!==et.nT.Whiteboard,t_=!!(th&&(0,D.Kz)(eM)),tg="loaded"===eH.status&&(0,B.gV)(eH.data,eV),tf=eD.user,tE="loaded"===eX.status&&(null===eX.data.file||eX.data.file&&(0,ed.AM)(eX.data.file)===ed.pT.MERGED),ty=t_&&("loaded"!==eX.status||tE),tb=eX.data?.file?.project,tI=tb&&eM.editorType&&(0,q.Jf)(tb,eM.editorType),tT=(0,X.isFileFigjamDisabled)(eM,eD)||tp===et.nT.Slides&&(0,s.oA)(eM.org?.isSlidesDisabled)||(0,X.isOrgUserExternallyRestrictedFromState)(eD),tv=tf&&eM.canManage,tS=tl,tw=!!(t_&&eM.trashedAt),tA=tw&&!ty,tN=eJ&&eJ.profile.entityType===en.o1.TEAM;tS=!!tf&&tS&&!tN;let tC=tc,tL=(0,eS.DF)(eM,tf),tO=!!eZ,tR=eM.project,tP=tR&&tI?t_?(0,u.t)("fullscreen.filename_view.duplicate-as-new"):(0,u.t)("fullscreen.filename_view.duplicate"):(0,u.t)("fullscreen.filename_view.duplicate-to-drafts"),tD=null,tk=(0,l.kc)().ps_benchmark;tk?tR&&""!==tR.path&&(tD=tR):tD=eM.teamId?tR:null;let tM=tk&&eM.folderId===tf?.personal_drafts_folder_id,tF=eM.canEdit&&!!eM.thumbnailGuid,tU=eH.data?.currentUser?.baseOrgUser?.fileBrowserPreferences?.orderedSidebarSections??[],tB=eH.data?.currentUser?.userSidebarSections!=null?(0,s.oA)(eH.data.currentUser.userSidebarSections):null,tV=(0,B.t$)(tB??[],tU),tG=tV.find(e=>e.id===eZ?.resource.sidebarSectionId),tH=()=>{let e=[];return 0===tV.length&&e.push({recordingKey:"favorite-custom",displayText:(0,u.t)("sidebar.starred"),isChecked:!1,callback:()=>t$(!1)}),tV.map(r=>{e.push({recordingKey:"favorite-custom",displayText:""===r.name?(0,u.t)("sidebar.starred"):r.name,isChecked:!!tG&&tG.id===r.id,callback:()=>t$(!!tG&&tG.id===r.id,r.id)})}),e},tW=()=>{if(!e9()||"loaded"!==e7.status||!e7.data)return[];let{canPinFileToWorkspace:e,canEditPin:r,existingFilePinId:n,workspaceHasMaxPins:a}=e7.data;return e?[{displayText:(0,u.t)("tile.dropdown.pin_to_workspace"),callback:()=>te(eM.key,a)}]:r?[{displayText:(0,u.t)("tile.dropdown.edit_workspace_pin"),callback:()=>tj(n)},{displayText:(0,u.t)("tile.dropdown.remove_workspace_pin"),callback:()=>tz(n)}]:[]},tK=()=>{eN(S.to({type:eg.dD,data:{entrypoint:ef.RR.FILENAME_VIEW_DROPDOWN}}))},tY=()=>{let e=eM.teamId&&eB[eM.teamId];eN(S.to({type:eE.$3,data:{afterFileMove:tK,team:e||null}}))},t$=(e,r)=>{if(!ex)return;let n={entrypoint:"editor",favoriteId:eZ?.resource.id,sectionId:r,file:ex,fileBrowserEntryPoint:!1};e?eN(f.qP(n)):eN(f.Fb(n))},tj=e=>{eN(S.to({type:(0,h.l)(),data:{pinnedFileId:e}}))},tz=e=>{eN(S.to({type:(0,_.I)(),data:{pinnedFileId:e}}))},tq=!eA&&eP.editorType===et.nT.Design&&eM.canEdit,tX=(0,em.jv)((0,k.t)(e2,eo.e0.EDITOR_TOOLBAR,e0),{appModel:eR,selectedView:eP}),tJ=(0,em.jv)((0,k.m)(e2,eo.e0.EDITOR_TOOLBAR,e0,e3),{appModel:eR,selectedView:eP}),tZ=(()=>{if(eA)return[];let e=[];return to&&!tM&&((!tg||tO)&&e.push({displayText:tO?(0,u.t)("favorited_resources.indicate_section_prefix")+": "+(tG&&""!==tG.name?tG.name:(0,u.t)("sidebar.starred")):(0,u.t)("favorited_resources.add_to_sidebar"),children:tH()}),tO&&e.push({recordingKey:"favorite-custom-remove",displayText:(0,u.t)("favorited_resources.remove_from_sidebar"),callback:()=>t$(!0,tG?.id)})),e.push(...tW()),e})(),tQ=(e,r)=>e?r:[],t0=[...tJ,...tQ(t_,tX),{separator:!0,displayText:""},...tQ(!eA&&!tt,[{disabled:!(0,ei.Yh)(eR,"enter-history-mode"),recordingKey:"toggleVersionHistory",displayText:(0,ep.Ah)(eR.activeCanvasEditModeType)?(0,u.t)("fullscreen.filename_view.version-history-hide"):(0,u.t)("fullscreen.filename_view.version-history-show"),callback:()=>{eN(b.oB()),(0,ep.Ah)(eR.activeCanvasEditModeType)?eN((0,Q.Eg)()):eN((0,Q._b)({source:eo.e0.EDITOR_TOOLBAR}))}}]),...tQ(!!e6,[(0,eu.rC)({dispatch:eN,fileKey:e6?.fileKey||"",templateName:e6?.name||""})]),...tQ(e8,[(0,eu.we)({dispatch:eN,file:{key:eM.key,name:eM.name,folder_id:eM.folderId,team_id:eM.teamId,editor_type:eM.editorType,parent_org_id:eM.parentOrgId},fileNeedsMovingBeforePublish:e4,isPublished:!!e6,source:"filename-context-menu"})]),...tQ(!eA&&!(th&&t_)&&tp!==et.nT.Whiteboard&&!eK,[{disabled:"disabled"===tr,recordingKey:"publishVersion",displayText:(0,u.t)("fullscreen.filename_view.publish-styles-and-components"),callback:()=>{"show_upsell_modal"===tr?tY():"publish"===tr&&tK()}}]),...tQ(e1,[{recordingKey:"viewFileAnalytics",displayText:(0,u.t)("fullscreen.filename_view.file_analytics"),callback:()=>{eN((0,S.to)({type:eh.e,data:{fileKey:eM.key,entrypoint:U.F.FileView}}))}}]),...tQ(th&&!eK&&!eY&&!tt,[{disabled:!tf,recordingKey:"exportSelectedExportables",displayText:(0,u.t)("fullscreen.filename_view.export"),shortcut:eR.keyboardShortcuts&&(0,ei.c1)(eR.keyboardShortcuts,"export-selected-exportables"),callback:()=>{G.Y5.triggerAction("export-selected-exportables",{source:"toolbar"})}}]),...tQ(e$&&eM.canEdit,[{disabled:!tf,recordingKey:"copyToFigmaSlides",displayText:(0,u.t)("slides.general.copy_current_page_to_figma_slides"),callback:()=>{(0,R.Cu)({name:"slides_file_dropdown_entrypoint"}),(0,ev.fx)(eM,eF).then(e=>{(0,ev.PF)(eN,e)})}}]),...tQ(tZ.length>0,[{separator:!0,displayText:""},...tZ]),{separator:!0,displayText:""},...tQ(!t_,tX),{separator:!0,displayText:""},...tQ(tq,[(0,F.o)(tn,ti)]),{separator:!0,displayText:""},...tQ(!eA&&!tM,[{disabled:!ek||tT,recordingKey:"duplicate",displayText:tP,callback:()=>{eN(b.oB());let e=(0,K.xp)(eM,eM.project,eD);if(e){eN(S.to({type:eb.DV,data:{team:e,resource:ee.vL.FILE,action:ea.ZN.DUPLICATE_FILES,editorType:eM.editorType||j._Y.DESIGN,currentPlan:x.F.Plan.STARTER,upsellPlan:x.F.Plan.PRO,upsellSource:Z.b.FILE_DUPLICATE}}));return}G.Y5.dispatchIfSaved(E.YW({file:eM,checkOssSalesExperiment:eQ}))}}]),...tQ(!tw,[{disabled:!tL,recordingKey:"rename",displayText:t_?(0,u.t)("fullscreen.filename_view.rename-branch"):(0,u.t)("fullscreen.filename_view.rename"),callback:()=>{eN(b.oB()),eN(v.vg())}}]),...tQ(!eA&&tA,[{disabled:!tv,displayText:"Restore",callback:()=>{eN(b.oB()),ex&&eN(y.R({fileKeys:{[eM.key]:ex},userInitiated:!0}))}}]),...tQ(!eA&&!!tD,[{disabled:!1,displayText:(0,u.t)("fullscreen.filename_view.go_to_project"),callback:()=>{if(tD){let e;e=(0,l.kc)().ps_benchmark?(0,V.cU)(tD.id,tD.orgId??null,tD.teamId,eD):(0,er.EE)(tD.id,tD.orgId??null),eN(I.V3({url:e}))}}}]),...tQ(!eA&&!t_,[{disabled:!!tu&&tm?.moveModalDisabled,sideText:tu?tm?.sideText??void 0:void 0,rightJustifySideText:!0,recordingKey:"moveToProject","data-onboarding-key":"FILENAME_VIEW_MOVE_TO_PROJECT",displayText:(0,u.t)("fullscreen.filename_view.move-to-project"),callback:(0,eS.RG)(eN,eM,eU,{canMove:!!tC,isUserViewerRestricted:!!td,planUser:ej.data?.file?.currentPlanUser??null,inDrafts:!!ej.data?.file?.isDraftFile})}]),...tQ(!to&&(tO||!tg)&&!tM,[{recordingKey:"favorite",displayText:tO?(0,u.t)("fullscreen.filename_view.unfavorite_label"):(0,u.t)("fullscreen.filename_view.favorite_label"),callback:()=>t$(!!tO)}]),...tQ(!eA&&!tw&&!tM&&tl,[{disabled:!tS,recordingKey:"delete",displayText:t_?(0,u.t)("fullscreen.filename_view.archive-branch"):(0,u.t)("fullscreen.filename_view.trash"),callback:t_?()=>{eN(b.oB()),ex&&(eN(E.VK({fileKeys:{[eM.key]:ex},userInitiated:!0})),e("Branch Archived",{fileKey:eM.key,fileRepoId:eM.fileRepoId}))}:()=>{if(eN(b.oB()),!eM||!ex)return;let e=(0,D.up)(eM,eU);e&&(0,D.SA)(eM,e)?eM.repo?.canEdit&&!e.trashed_at&&eN(T.U1({filesByKey:{},reposById:{[e.id]:{repo:e,main_file:ex}}})):tS&&eN(T.U1({filesByKey:{[eM.key]:ex}}))}}]),...tQ(!eA&&tw,[{disabled:!tv,displayText:(0,u.t)("fullscreen.filename_view.delete-branch"),callback:()=>{eN(b.oB()),eN(S.to({type:ec.e,data:{fileName:eM.name,onConfirm:()=>eN(T.kj({fileKeys:{[eM.key]:!0},userInitiated:!0}))}}))}}]),...tQ(!!tF,[{separator:!0,displayText:""},{recordingKey:"resetFileThumbnail",displayText:(0,u.t)("fullscreen.filename_view.restore_default_thumbnail"),callback:()=>{eN(E.$m({file_key:eM.key,thumbnail_guid:null}))}}])];return a.createElement(A.fu,{name:eo.e0.EDITOR_FILENAME_DROPDOWN,properties:{...ts,slideConversionDropdownEntrypoint:e$}},a.createElement(ey.j,{items:t0,parentRect:r,showPoint:!eW,recordingKey:n,dispatch:eN,allowCodegenOptions:eP.editorType===et.nT.Design,onSelectItem:e=>{e.callback&&e.callback("",{},eN)},activatePathOnMount:eL,lean:eW?"right":void 0,leanPadding:eO,shouldUsePortal:eW}))}},733378:(e,r,n)=>{n.d(r,{DF:()=>d,Qy:()=>m,RG:()=>u});var a=n(181912),i=n(342103),o=n(738269),s=n(420576),l=n(540019),c=n(520425);function d(e,r){return!!e&&!!r&&(e.creatorId===r.id&&(0,a.A)(e.createdAt).add(30,"s").isAfter((0,a.A)())||e.canEdit)}function u(e,r,n,a){return()=>{if(e(o.oB()),!r)return;let l=(0,s.up)(r,n);(0,i.hd)({key:r.key,name:r.name,folder_id:r.folderId,team_id:r.teamId,editor_type:r.editorType,is_team_template:!!r.template&&!r.template.unpublishedAt,parent_org_id:r.parentOrgId},l,e,void 0,{},void 0,!1,a)}}function m(e){return!e.parentOrgId&&!e.teamId}l.M4.Query({fetch:async e=>{if(!e)return null;let r=await c.L.getFileCanRequestEdit({fileKey:e});return!!r.data.meta?.can_request_edit},key:"fileCanRequestEdit"})},784578:(e,r,n)=>{n.d(r,{$5:()=>H,Kw:()=>W,Xo:()=>$,i1:()=>K,kU:()=>Y,oH:()=>j});var a=n(411855),i=n(188507),o=n(414507),s=n(299321),l=n(776250),c=n(915440),d=n(711525),u=n(776621),m=n(493323),p=n(939863),h=n(553015),_=n(411045),g=n(303345),f=n(750293),E=n(672517),y=n(226055),b=n(720647),I=n(737499);n(335682);var T=n(594901),v=n(317946),S=n(860178),w=n(99506),A=n(279453),N=n(623746),C=n(336599),L=n(147206),O=n(802026),R=n(498606),P=n(466816),D=n(143678),k=n(507956),M=n(979796),F=n(651994),x=n(249963),U=n(203302),B=n(327562),V=n(676939),G=n(477160);let H="edit_button_upgrading_to_edit";var W=(e=>(e.EDIT_BUTTON_LOADING="editButtonLoading",e.EDIT_BUTTON="editButton",e.PRO_REQUEST_UPGRADE="proRequestUpgrade",e.ORG_REQUEST_UPGRADE="orgRequestUpgrade",e.REQUEST_EDIT_VIEW="requestEditView",e.PENDING_UPGRADE_REQUEST="pendingUpgradeRequest",e.VIEW_ONLY="viewOnly",e.PLAN_REQUEST_UPGRADE="planRequestUpgrade",e.PENDING_EDIT_ROLE_REQUEST="pendingEditRoleRequest",e))(W||{});function K(e){return!!e&&["orgRequestUpgrade","proRequestUpgrade","requestEditView"].includes(e.type)}function Y(e){let r=e.file,n=(0,i.d4)(e=>e.loadingState),s=(0,i.d4)(e=>e.teams),m=(0,S.iZ)(),h=(0,a.useMemo)(()=>!!r&&(0,L.Pe)(r),[r]),E=(0,i.d4)(({openFile:e})=>e?.org?.name),y=(0,v.E)(),R=r.canEdit,D=(0,T.sj)(r),M=r.editorType===w._Y.SLIDES&&!!(0,d.oA)(r.org?.isSlidesDisabled),F=D||M,U=(0,k.ks)(),B=r.canAccessFullDevMode,V=(0,_.cf)(),{handleUpgrade:G,getUpgradeEligibility:W,getPendingRequest:K,getUpgradePathway:Y,getIsUpgradeHandlerLoading:$}=(0,g.wH)({fileKey:r.key,licenseType:(0,b.wR)(r.editorType)}),j=(0,c.Rs)(A.OiG,{fileKey:r.key,orgId:r.parentOrgId}),z=(0,a.useCallback)(()=>{let e={file_key:r.key,link_access:r.linkAccess};r.parentOrgId?(e.account_type=r.currentPartialOrgUser?.designPaidStatus,e.parent_org_id=r.parentOrgId):r.teamId&&(e.team_id=r.teamId),(0,l.sx)("Edit Button Events",{edit_button_event:"click",...e})},[r]),q=(0,I.BI)();if("loading"===j.status)return{type:"editButtonLoading"};if("loaded"===j.status){let a=r.org?.inviteWhitelist?.guestInviteSetting===O.Gv.REQUIRE_APPROVAL&&!!j.data.orgJoinRequest,i=j.data.file?.fileRoleRequests.find(e=>e.requesterUserId===m?.id);q?.updateHasPendingEditRequest&&q.updateHasPendingEditRequest(!!i);let l=a?(0,p.t)("fullscreen.toolbar.pending-org-join-request-tooltip",{orgName:E||""}):i?(0,p.t)("fullscreen.toolbar.pending-edit-request-tooltip"):void 0,c=r.editorType===w._Y.DESIGN?r.currentPartialOrgUser?.designAccountTypeRequest:r.currentPartialOrgUser?.whiteboardAccountTypeRequest,d=r.editorType===w._Y.DESIGN?r.currentTeamUser?.designAccountTypeRequest:r.currentTeamUser?.whiteboardAccountTypeRequest,_=c?.status==="pending",g=d?.status==="pending",b=_?c:g?d:null,I=(0,N.V1)(j.data.file?.currentPrivilegedOrgUser??null),T=I?{...I,license_group_member:I.license_group_member?{license_group_id:I.license_group_member.licenseGroupId}:void 0}:null;if(V){if(null===r.editorType)return null;if($())return{type:"editButtonLoading"};let e=r.editorType.toString();switch(W(e,R)){case P.q.CAN_UPGRADE:if(a)return{type:"viewOnly",isRestrictedView:h,isDisabledView:F,pendingToolTipMessage:(0,p.t)("fullscreen.toolbar.pending-org-join-request-tooltip",{orgName:E||""}),hasPendingRequest:a};let n=Y(e);return{type:"planRequestUpgrade",upgrade:G({afterUpgradeCallback:()=>{},licenseType:e,upgradeReason:x.X.EDIT_BUTTON,entryPoint:f.tc.EDIT_FILE}),upgradePathway:n};case P.q.CANNOT_UPGRADE:let s=K(e);if(s)return{type:"pendingUpgradeRequest",pendingUpgradeRequest:s,editorType:r.editorType,isRestrictedView:h,isDisabledView:D,pendingToolTipMessage:l,orgId:r.parentOrgId,hasPendingRequest:!0};if(i)return{type:"pendingEditRoleRequest"};return{type:"viewOnly",isRestrictedView:h,isDisabledView:F,pendingToolTipMessage:l,hasPendingRequest:!1};case P.q.UPGRADE_NOT_NEEDED:if(j.data.file?.mustRequestEditorRoleToEdit)return m||(0,u.$D)(o.FigmaTeam.MONETIZATION_EXPANSION,Error("[Monetization Expansion] User is not logged in when mustRequestEditorRoleToEdit is true")),{type:"requestEditView",fileKey:r.key,userId:m?.id??"",isDevMode:U};if(i)return{type:"pendingEditRoleRequest"};return{type:"viewOnly",isRestrictedView:h,isDisabledView:F,pendingToolTipMessage:l,hasPendingRequest:!1}}}else{if(!a&&(0,C.VP)(n,H))return{type:"editButtonLoading"};if(j.data.file?.canClickButtonToUpgradeAndEdit)return{type:"editButton",upgrade:async()=>{await y(r,H),z()}};if(j.data.file?.mustRequestAccountUpgradeToEdit){if(r.org)return null===r.editorType?null:U&&R&&!B?null:{type:"orgRequestUpgrade",editorType:r.editorType,fileKey:r.key,orgUser:T,orgId:r.parentOrgId,isDevMode:U};{let n=r.teamId&&s[r.teamId];if(n)return{type:"proRequestUpgrade",file:e.file,team:n,isDevMode:U}}}else if(j.data.file?.mustRequestEditorRoleToEdit)return m||(0,u.$D)(o.FigmaTeam.MONETIZATION_EXPANSION,Error("[Monetization Expansion] User is not logged in when mustRequestEditorRoleToEdit is true")),{type:"requestEditView",fileKey:r.key,userId:m?.id??"",isDevMode:U};else if(j.data.file?.canEditCanvas||j.data.file?.canEditToUpgrade)return null;else if(b&&!U)return null===r.editorType?null:{type:"pendingUpgradeRequest",pendingUpgradeRequest:b,editorType:r.editorType,isRestrictedView:h,isDisabledView:D,pendingToolTipMessage:l,orgId:r.parentOrgId,hasPendingRequest:!0};return{type:"viewOnly",isRestrictedView:h,isDisabledView:F,pendingToolTipMessage:l,hasPendingRequest:!!(_||g||i||a)}}}return null}function $({viewPermission:e,variant:r,recordingKey:n,hideViewOnlyText:i,disableAutoAppearingTooltips:o}){let s=(0,y.GS)();switch(e.type){case"editButtonLoading":return a.createElement("div",{className:G.Hg},a.createElement(h.$,{"aria-label":(0,p.t)("fullscreen.toolbar.edit-file-button-loading-aria-label"),disabled:!0,variant:r,recordingKey:n,width:s?"fill-parent":void 0},a.createElement("span",{className:G.yx},(0,p.t)("fullscreen.toolbar.edit-file-button")),a.createElement(m.kt,{className:G.yU})));case"editButton":{let i={"data-tooltip":(0,p.t)("fullscreen.toolbar.edit-file-button-hover-tooltip"),"data-tooltip-show-immediately":!0,"data-tooltip-type":R.Ib.TEXT,"data-tooltip-max-width":500,"data-tooltip-offset-y":5};return a.createElement(E.fu,{name:D.e0.FILE_EDIT_BUTTON},a.createElement("div",{"data-onboarding-key":"edit-button-onboarding"},a.createElement(h.$,{variant:r,onClick:e.upgrade,recordingKey:n,width:s?"fill-parent":void 0,...i},(0,p.t)("fullscreen.toolbar.edit-file-button"))))}case"requestEditView":return a.createElement(M.N,{fileKey:e.fileKey,userId:e.userId,isDevMode:e.isDevMode,buttonVariant:r,recordingKey:n});case"orgRequestUpgrade":return a.createElement(E.fu,{name:D.e0.FILE_ORG_REQUEST_UPGRADE_BUTTON,properties:{isDevMode:e.isDevMode,buttonVariant:r,orgId:e.orgId}},a.createElement(F.R7,{fig_file_key:e.fileKey,orgUser:e.orgUser,orgId:e.orgId,editorType:e.editorType,variant:r,recordingKey:n}));case"proRequestUpgrade":return a.createElement(E.fu,{name:D.e0.FILE_PRO_REQUEST_UPGRADE_BUTTON,properties:{isDevMode:e.isDevMode,buttonVariant:r,teamId:e.team.id}},a.createElement(F.sG,{file:e.file,team:e.team,entryPoint:f.tc.EDIT_FILE,variant:r,recordingKey:n}));case"pendingUpgradeRequest":{if("dltBannerViewPermission"===n&&!s)return a.createElement(V.h,{isRestrictedView:e.isRestrictedView,isDisabledView:e.isDisabledView,hasPendingRequest:e.hasPendingRequest,variant:r,hideViewOnlyText:i});let l={...e,variant:r,hideViewOnlyText:i,disableAutoAppearingTooltips:o};return a.createElement(B.Ki,{...l})}case"viewOnly":return a.createElement(V.h,{isRestrictedView:e.isRestrictedView,isDisabledView:e.isDisabledView,pendingToolTipMessage:e.pendingToolTipMessage,hasPendingRequest:e.hasPendingRequest,variant:r,hideViewOnlyText:i});case"planRequestUpgrade":return a.createElement(F.In,{onClick:e.upgrade,variant:r,upgradePathway:e.upgradePathway});case"pendingEditRoleRequest":return a.createElement(U.m,{variant:r})}}function j(){return(0,i.d4)(e=>"fullscreen"===e.selectedView.view&&e.selectedView.isRecoveryMode&&s.Ez5.uiState().isRecovery.getCopy())}},364871:(e,r,n)=>{n.d(r,{R:()=>a});let a=(0,n(38580).eU)(!1)},549166:(e,r,n)=>{n.d(r,{Cv:()=>ey});var a=n(411855),i=n(188507),o=n(782683),s=n(139689),l=n(299321),c=n(629019),d=n.n(c),u=n(126049),m=n(91408),p=n(517333),h=n(737947),_=n(939683),g=n(358145),f=n(966712),E=n(374626),y=n(498750),b=n(438741),I=n(489604),T=n(554322),v=n(768137),S=n(946689),w=n(452441),A=n(355819),N=n(46481),C=n(154254),L=n(939863),O=n(50663),R=n(30686),P=n(738269),D=n(507877),k=n(293017),M=n(931828),F=n(138369),x=n(617524),U=n(798099),B=n(809831),V=n(198371),G=n(226055),H=n(516398),W=n(369870),K=n(85098),Y=n(335682),$=n(754209),j=n(396462),z=n(860178),q=n(94500),X=n(416822),J=n(571232),Z=n(338400),Q=n(239671),ee=n(498606),et=n(70699),er=n(896528),en=n(467594),ea=n(298543),ei=n(371746),eo=n(662570),es=n(637820),el=n(104295),ec=n(766939),ed=n(648044),eu=n(27947),em=n(837746),ep=n(42296),eh=n(639685),e_=n(630834);let eg="multiplayer-nickname-dropdown",ef=(0,W.ck)(),eE=(0,m.jz)(em.rJv);function ey(e){let r=(0,Y.q5)(),{user:n,multiplayer:o,dropdownShown:s}=e,c=(0,i.wA)(),d=(0,i.d4)(e=>"prototype"===e.selectedView.view),u=(0,$.dR)(),m=(0,$.Ww)(),p=(0,b.B4)(),h=a.useCallback(e=>{!function(e,r,n,a,i,o,s){if(!i)return;let c=e.sessionID,d=c===r,u=o&&o.sessionID===r;if(d&&u)s();else if(a){let r=i.observingSessionID===c||i.sessionID===c?-1:e.sessionID,a=-1!==i.observingSessionID,o=i.observingSessionID!==c&&i.sessionID!==c;a&&n((0,q._P)({name:"Prototype Observation Ended",params:{multiplayerObservingSessionID:i.observingSessionID,multiplayerSessionID:i.sessionID}})),o&&(n((0,q._P)({name:"Prototype Observation Started",params:{multiplayerObservingSessionID:c,multiplayerSessionID:i.sessionID}})),n(M.b({aware_of_observation_mode:!0}))),n(k.J4({...i,observingSessionID:r}))}else l.h3O.observeUser(c),i.observingSessionID!==c&&i.sessionID!==c&&n(M.b({aware_of_observation_mode:!0}))}(e,m?.sessionID,c,d,o,u,p)},[m?.sessionID,c,d,o,u,p]),_=d?null:r;return n?a.createElement(a.Fragment,null,!ef&&_&&n&&a.createElement(es.k,{fileKey:_.key}),a.createElement(eb,{dropdownShown:s,multiplayer:o,user:n,editingFile:_,onUserClick:h})):a.createElement(a.Fragment,null,!ef&&_&&n&&a.createElement(es.k,{fileKey:_.key}),a.createElement(eA,{dropdownShown:s,multiplayer:o,user:n,editingFile:_,onUserClick:h}))}function eb(e){let{multiplayer:r,user:n,onUserClick:i,dropdownShown:o,editingFile:s}=e,l=(0,a.useMemo)(()=>r.allUsers.find(e=>e.sessionID===r.sessionID)||null,[r.allUsers,r.sessionID]);(0,a.useEffect)(()=>{},[r,n]);let c=(0,V.DG)(s?.key||"").enabled;return a.createElement("div",{className:ep.Wh},a.createElement(eu.sK,null),l&&a.createElement(ew,{dropdownShown:o,multiplayer:r,currentUser:l,onUserClick:i}),s&&a.createElement(ei.w,{user:n,editingFile:s,isFileInWorkshop:c}))}function eI(e){let{query:r,usersToSearch:n}=e,[i,o]=a.useState(n),s=a.useRef(!1),l=(0,_.am)(),c=a.useRef(!1),d=c.current,m=a.useCallback(async e=>{if(""===e)o(n);else{s.current=!1;let r=await (0,ed.n)(e,n);s.current||(o(r.map(e=>e.item)),d||(l("Multiplayer Tools User Search",{otherUserSessionsCount:n.length}),c.current=!0))}},[d,l,n]),p=(0,u.A)(m,200);return a.useEffect(()=>(p(r),()=>{p.cancel(),s.current=!0}),[p,r,n]),{searchResults:i}}let eT=(0,a.forwardRef)(function(e,r){let{query:n,setQuery:i}=e,l=(0,g.ZC)(n),c=a.useRef(null),[u,m]=a.useState(!1),p=(0,G.GS)();return(a.useEffect(()=>{c.current&&n!==l&&(c.current.scrollWidth>c.current.clientWidth?m(!0):m(!1))},[l,n]),p)?a.createElement("div",{ref:r,className:ep.MT},a.createElement("div",{className:ep.qc},a.createElement(N.U,{svg:eh.A,"aria-label":(0,L.t)("fullscreen.accessibility.search_icon")},a.createElement(o.h,null))),a.createElement(w.L,{ref:c,placeholder:(0,L.t)("collaboration.spotlight.menu.search.placeholder"),className:d()({[ep.Rt]:!0,[ep.ro]:u}),value:n,onClick:U.dG,onChange:e=>{i(e.target.value),(0,U.dG)(e)},onKeyDown:e=>{"Escape"===e.key&&i(""),(0,U.dG)(e)},spellCheck:!1,autoFocus:!0}),(0,f.kc)().file_view_history?a.createElement("div",{className:ep.WY},!!n&&a.createElement("button",{className:ep.Vw,onClick:e=>{e.stopPropagation(),i("")},"aria-label":(0,L.t)("search.sidebar_search_clear")},a.createElement("div",{className:ep.i3},a.createElement(N.U,{svg:e_.default},a.createElement(s.A,null))))):!!n&&a.createElement("button",{className:ep.hC,onClick:e=>{e.stopPropagation(),i("")},"aria-label":(0,L.t)("search.sidebar_search_clear")},a.createElement("div",{className:ep.i3},a.createElement(N.U,{svg:e_.default},a.createElement(s.A,null))))):null});function ev(e){let{targetRect:r,arrowOffsetFromRectLeft:n,currentUser:o,peopleList:s,previousViewerList:l,previousViewerListRenderer:c,userListRenderer:u,onUserClick:m,onKeyDown:p,shouldDisableSpotlight:h}=e,_=(0,G.GS)(),g=(0,a.useRef)(null),y=(0,a.useRef)(null),[w,N]=(0,E.fp)(I.ah),[R,D]=(0,E.fp)(I.Dv),[k,M]=a.useState(_?310:220),F=(0,a.useRef)(null),[x,U]=a.useState(0),B=(0,i.wA)(),V=(0,T.Av)(),H=Math.min(window.innerHeight-V-22,_?465:450);a.useLayoutEffect(()=>{g.current&&y.current&&M(H-g.current.offsetHeight-y.current.offsetHeight-16*x)},[_,H,x]);let W=(0,a.useCallback)(()=>{h||N(!0)},[N,h]),{start:K,cancel:Y}=(0,j.Z)(W),z=(0,a.useCallback)(()=>{Y(),N(!1)},[Y,N]),q=(0,b.Vi)(),X=(0,a.useCallback)(()=>{h||(q(),z(),D(!0),B(P.oB()))},[z,B,D,q,h]),J=(0,b.B4)(),Z=(0,a.useCallback)(()=>{J(),B(P.oB())},[B,J]),Q=(0,$.dR)(),ee=Q&&e.currentUser.sessionID===Q.sessionID?a.createElement(v.pz,{onClick:Z,className:ep.BK},(0,L.tx)("collaboration.spotlight.button.stop")):a.createElement(S.$$,{onClick:X,className:d()(ep.BK,h&&ep.r9),onMouseOver:()=>{K(300)},onMouseLeave:z,disabled:h},(0,L.tx)("collaboration.spotlight.tooltip.spotlight_me")),er=(0,f.kc)().file_view_history&&c&&l&&l.length>0,en=_&&s.length+(er?l.length:0)>8,[ei,eo]=a.useState(""),{searchResults:el}=eI({query:ei,usersToSearch:s}),{searchResults:ec}=eI({query:ei,usersToSearch:(0,a.useMemo)(()=>(0,f.kc)().file_view_history&&l?l:[],[l])}),ed=a.createElement(a.Fragment,null,a.createElement("div",{ref:g,className:ep.az},a.createElement(et.Q,{user:o,isOverflow:!0,isCurrentUserHeaderRow:_}),a.createElement("div",{className:ep.Vr},ee,a.createElement(es.L,null))),s.length>0&&a.createElement(a.Fragment,null,a.createElement("div",{className:ep.me}),a.createElement("div",{className:ep.dn,ref:_?y:void 0},a.createElement(eT,{ref:_?void 0:y,query:ei,setQuery:eo})),a.createElement(A.P,{width:eE-16,maxHeight:k,scrollBarAlways:!0,disableScrollbarBorder:!0},a.createElement(O.W,{autofocus:!0,label:(0,L.t)("fullscreen.toolbar.multiplayer.all_users"),renderer:u,onSelect:e=>{e.length&&(m(e[0]),B(P.oB()))},initiallyNotSelected:!0,customClassName:ep.cu},el)))),eu=el.length>0&&ec.length>0,em=el.length>0||ec.length>0,eh=0===el.length&&0===ec.length,e_=a.createElement("div",{className:ep.zW},a.createElement("div",{className:ep.me}));(0,a.useEffect)(()=>{(0,f.kc)().file_view_history&&U((en?1:0)+(""!==ei&&eh?1:0)+(em?1:0))},[en,ei,eh,em]);let eg=a.createElement(a.Fragment,null,a.createElement("div",{ref:g,className:ep.Km},a.createElement(et.Q,{user:o,isOverflow:!0,isCurrentUserHeaderRow:_}),a.createElement("div",{className:ep.Vr},ee,a.createElement(es.L,null))),en&&a.createElement(a.Fragment,null,e_,a.createElement("div",{className:ep.zK,ref:_?y:void 0},a.createElement(eT,{ref:_?void 0:y,query:ei,setQuery:eo}))),""!==ei&&eh&&a.createElement(a.Fragment,null,e_,a.createElement("div",{className:`${ep.hg} ${C.cx.mb8.$}`},(0,L.tx)("fullscreen.toolbar.multiplayer.no_user_found"))),em&&a.createElement(a.Fragment,null,e_,a.createElement(A.P,{width:eE-16,maxHeight:k,scrollBarAlways:!0,disableScrollbarBorder:!0,ref:F},eu&&a.createElement("div",{className:ep.hg},(0,L.tx)("fullscreen.toolbar.multiplayer.currently_viewing")),el.length>0&&a.createElement(a.Fragment,null,a.createElement(O.W,{label:(0,L.t)("fullscreen.toolbar.multiplayer.currently_viewing_users"),renderer:u,onSelect:e=>{e.length&&(m(e[0]),B(P.oB()))},initiallyNotSelected:!0,customClassName:ep.aK},el)),c&&ec.length>0&&a.createElement(a.Fragment,null,a.createElement("div",{className:ep.hg},(0,L.tx)("fullscreen.toolbar.multiplayer.previously_viewed")),a.createElement(O.W,{label:(0,L.t)("fullscreen.toolbar.multiplayer.previously_viewed_users"),renderer:c,initiallyNotSelected:!0,customClassName:ep.aK},ec)),_&&a.createElement("div",{className:C.cx.pt12.$}))));return a.createElement(ea.Cf,{className:d()(ep.qN,{[ep.QD]:(0,f.kc)().file_view_history}),removeUI3BorderPadding:_,targetRect:r,maxHeight:H,maxWidth:eE,lean:"center",arrowOffsetFromRectLeft:n,onKeyDown:p,showPoint:!_,disableDropdownScrollContainer:!0,propagateCloseClick:!0},(0,f.kc)().file_view_history?eg:ed)}let eS="multiplayer-tools-dropdown",ew=a.memo(function(e){let{multiplayer:r,dropdownShown:n,currentUser:o,onUserClick:s}=e,c=(0,a.useRef)(null),u=(0,a.useRef)(null),m=(0,a.useRef)(null),g=(0,a.useRef)(null),T=(0,a.useRef)(null),v=(0,G.GS)(),S=(0,K.wF)(),w=(0,z.iZ)(),A=(0,B.my)(),N=(0,Q.yY)(A),C=(0,F.Kf)({isDesign:N,isUnauth:!w}),O=(0,x.EO)(),k=(0,i.wA)(),[M,V]=a.useState(!1),W=n?.type===eS,Y=(0,a.useMemo)(()=>r.allUsers.filter(e=>e.sessionID!==o?.sessionID),[r.allUsers,o]),j=(0,R.e)(),[q,J]=(0,E.fp)(I.ah);q&&!W&&J(!1);let Z=c.current&&u.current?c.current.clientWidth-u.current.clientWidth:void 0,er=(0,K.Wq)(Z),{users:ea,overflowUsers:ei}=(0,K.uC)(Y,null,!1,er),eo=(0,a.useMemo)(()=>{let e=[...ea,...ei];return(0,f.kc)().file_view_history?Array.from(new Set(e.map(e=>e.userID))).map(r=>e.find(e=>e.userID===r)).filter(e=>e&&e.userID!==o.userID):e},[ei,ea,o]),es=(0,a.useMemo)(()=>S?.filter(e=>!eo.some(r=>e.userID===r.userID)&&e.userID!==o.userID),[eo,S,o]),ec=(0,_.am)(),ed=(0,a.useCallback)(e=>{if((0,U.dG)(e),!u.current)return;m.current=u.current.getBoundingClientRect();let r=n?.type===eS;k(D.gR({type:eS})),r||ec("Multiplayer Tools Opened",{currentUserSessionID:o.sessionID,otherUserSessionsCount:eo.length})},[o.sessionID,k,n?.type,eo.length,ec]),eu=(0,$.dR)(),em=eu&&eu.sessionID!==o.sessionID?eu:null,eh=(0,X.q)(),e_=(0,b.tu)(),eg=(0,b.oJ)(),ef=a.useMemo(()=>({label:e=>e.name,id:e=>String(e.sessionID),renderDisplay(e,{hasCursor:n}){let i=(0,y.Gc)(()=>{let r=`/files${eh}/user/${e.userID}`;h.Ay.redirect(r,p.eD?void 0:"_blank")}),o=[],s=r.sessionNominatedByCurrentUser===e.sessionID;return r.presenterSessionID===e.sessionID||j||(s?o.push({text:(0,L.tx)("collaboration.spotlight.tooltip.menu.cancel_ask_to_spotlight"),onClick:()=>{(0,K.AD)(e)&&eg(e.sessionID,r)},key:"cancel-ask-to-spotlight"}):o.push({text:(0,L.tx)("collaboration.spotlight.tooltip.ask_to_spotlight"),onClick:()=>{(0,K.AD)(e)&&e_(e.sessionID,r)},key:"ask-to-spotlight"})),o.push({text:(0,L.tx)("avatar.tooltip.view_profile"),onClick:e=>{i(e)},key:"view-profile"}),a.createElement(et.Q,{key:e.sessionID,user:e,isOverflow:!0,isInListbox:!0,containsCursor:n,secondaryActions:o})}}),[r,eh,e_,eg,j]),eE=(0,f.kc)().file_view_history?{label:e=>e.name,id:e=>String(e.userID),renderDisplay(e,{hasCursor:r}){let n=(0,y.Gc)(()=>{let r=`/files${eh}/user/${e.userID}`;h.Ay.redirect(r,p.eD?void 0:"_blank")}),i=[{text:(0,L.tx)("avatar.tooltip.view_profile"),onClick:e=>{n(e)},key:"view-profile"}];return a.createElement(et.Q,{key:e.userID,user:e,isOverflow:!0,isInListbox:!0,containsCursor:r,secondaryActions:i})}}:void 0,ey=W||M,eb=eo.length+1,eI=a.createElement(el.s,{featured:em,quickAccess:ea,maxVisibleUsers:(v?K.A8:K.Q2)-1,onUserClick:s,totalUserCount:eb}),eT=a.createElement("button",{id:"multiplayer-toolbar-container","aria-label":(0,L.t)("fullscreen.toolbar.multiplayer.multiplayer_tools"),"aria-expanded":null!=m.current&&n?.type===eS,"data-tooltip-type":ee.Ib.TEXT,"data-tooltip":(0,L.t)("fullscreen.toolbar.multiplayer.multiplayer_tools"),"data-tooltip-offset-x":u.current&&T.current?u.current.offsetWidth/2-T.current.offsetWidth/2-1.5:0,"data-tooltip-offset-y":u.current&&c.current?c.current.clientHeight/2-u.current.clientHeight/2:0,className:d()({[ep.XE]:!0,[ep.yx]:v&&ei.length>0,[ep.Ge]:v&&0===ei.length,[ep.wH]:W,[ep.yo]:!W&&M}),ref:u,onMouseOverCapture:e=>{V(!0),(0,U.dG)(e)},onMouseDownCapture:e=>{C()?O(l.rcl.FOLLOW_PRESENTER):ed(e)},onMouseLeave:()=>{V(!1)},onKeyDown:e=>{(0,H.hx)({e,onClickHandler:e=>{C()?O(l.rcl.FOLLOW_PRESENTER):ed(e)},onEscapeHandler:()=>{u?.current?.blur()}})},onClick:U.dG},a.createElement("span",{key:o.sessionID,ref:g,className:ep.r9},a.createElement(et.Q,{user:o,key:o.sessionID,isOverflow:!1})),a.createElement("span",{"data-onboarding-key":"multiplayer-spotlight-nux-key",className:ep.rR},ei.length>0&&a.createElement("span",{className:d()({[ep.zk]:!0,[ep.r9]:!0,[ep.wH]:W,[ep.yo]:!W&&M}),style:{minWidth:eb<10?8:eb<100?15:22}},`${eb}`),a.createElement(en.o,{divRef:T,disableHoverAnimation:v,className:d()({[ep.ai]:!0,[ep.r9]:!0,[ep.wH]:W,[ep.yo]:!W&&M}),showingDropdown:ey})));return a.createElement("span",{className:ep.EI,ref:c,"data-onboarding-key":"multiplayer-users-container"},v?a.createElement(a.Fragment,null,eT,eI):a.createElement(a.Fragment,null,eI,eT),n?.type===eS&&T.current&&a.createElement(ev,{targetRect:T.current.getBoundingClientRect(),arrowOffsetFromRectLeft:T.current?T.current.offsetWidth/2+1:0,currentUser:o,onUserClick:s,userListRenderer:ef,peopleList:eo,previousViewerList:es,previousViewerListRenderer:eE,onKeyDown:e=>{"Tab"===e.key&&k(P.oB())},shouldDisableSpotlight:j}))});function eA(e){let{multiplayer:r,user:n,onUserClick:i,dropdownShown:o,editingFile:s}=e,l=(0,a.useMemo)(()=>r.allUsers.find(e=>e.sessionID===r.sessionID)||null,[r.allUsers,r.sessionID]);(0,a.useEffect)(()=>{},[r,n]);let c=(0,V.DG)(s?.key||"").enabled;return a.createElement("div",{className:ep.Wh},a.createElement(eu.sK,null),a.createElement(eC,{dropdownShown:o,multiplayer:r,currentUser:l,onUserClick:i,editingFile:s}),s&&a.createElement(ei.w,{user:n,editingFile:s,isFileInWorkshop:c}))}let eN="multiplayer-users-dropdown";function eC(e){let{editingFile:r,multiplayer:n,dropdownShown:o,currentUser:s,onUserClick:l}=e,c=(0,a.useRef)(null),d=(0,a.useRef)(null),u=(0,a.useRef)(null),m=(0,i.wA)(),_=(0,a.useCallback)(e=>{(0,U.dG)(e),c.current&&(d.current=c.current.getBoundingClientRect(),m(D.gR({type:eN})))},[m]),g=o?.type,f=(0,a.useMemo)(()=>g===eg&&u.current?u.current.getBoundingClientRect():null,[g]),E=(0,eo.C$)(),I=(0,X.q)(),T=(0,Z.Lk)(),v=r?.key??null,{usersNotInCall:S}=(0,J.W5)(v,!0),w=n.allUsers,A=(0,K.D4)(),N=(0,i.d4)(e=>v&&e.voice.activeCall[v])||!1,{users:C,overflowUsers:R}=(0,K.uC)(T?S:w,s,N,A),k=a.useCallback(e=>0===e?"multiplayer-spotlight-nux-key":1===e?"multiplayer-observation-nux-key":"",[]),M=(0,b.tu)(),F=(0,b.oJ)(),x=a.useMemo(()=>({label:e=>e.name,id:e=>String(e.sessionID),renderDisplay(e,{hasCursor:r}){let i=(0,y.Gc)(()=>{let r=`/files${I}/user/${e.userID}`;h.Ay.redirect(r,p.eD?void 0:"_blank")}),o=[],s=n.sessionNominatedByCurrentUser===e.sessionID;return n.presenterSessionID!==e.sessionID&&(s?o.push({text:(0,L.tx)("collaboration.spotlight.tooltip.menu.cancel_ask_to_spotlight"),onClick:()=>{(0,K.AD)(e)&&F(e.sessionID,n)},key:"cancel-ask-to-spotlight"}):o.push({text:(0,L.tx)("collaboration.spotlight.tooltip.ask_to_spotlight"),onClick:()=>{(0,K.AD)(e)&&M(e.sessionID,n)},key:"ask-to-spotlight"})),o.push({text:(0,L.tx)("avatar.tooltip.view_profile"),onClick:e=>{i(e)},key:"view-profile"}),a.createElement(et.Q,{key:e.sessionID,user:e,isOverflow:!0,isInListbox:!0,containsCursor:r,secondaryActions:o})}}),[n,I,M,F]);return a.createElement("span",{className:ep.VV,"data-onboarding-key":"multiplayer-avatars"},C.map((e,r)=>{let n=a.createElement(et.Q,{user:e,onboardingKey:k(r),key:e.sessionID,isOverflow:!1,onUserClick:l});return e.sessionID===s?.sessionID?a.createElement("span",{key:e.sessionID,ref:u},n):n}),R.length>0&&a.createElement(a.Fragment,null,a.createElement("button",{id:"multiplayer-overflow-container","aria-label":(0,L.t)("fullscreen.toolbar.multiplayer.more_users"),"aria-expanded":null!=d.current&&o?.type===eN,className:ep.O5,ref:c,onMouseDown:_,onKeyDown:e=>{(0,H.hx)({e,onClickHandler:e=>{_(e)},onEscapeHandler:()=>{c?.current?.blur()}})},onClick:U.dG},a.createElement(er.f,{className:ep.zb,text:`${R.length}`})),o?.type===eN&&c.current&&a.createElement(eo.WM,{targetRect:c.current.getBoundingClientRect(),onKeyDown:e=>{"Tab"===e.key&&m(P.oB())}},a.createElement(O.W,{autofocus:!0,label:"More multiplayer users",renderer:x,onSelect:e=>{e.length&&(l(e[0]),m(P.oB()))},customClassName:ep.cu},R))),o?.type===eg&&f&&a.createElement(ea.Cf,{targetRect:f,maxHeight:E,className:ep.a1,propagateCloseClick:!0},a.createElement(ec.M,null)))}},157147:(e,r,n)=>{n.d(r,{ec:()=>S});var a=n(299321),i=(n(939863),n(256975)),o=n(989324),s=n(617453),l=n(813648),c=n(279145),d=n(259494),u=n(92073),m=n(605492),p=(e=>(e[e.TOOL=0]="TOOL",e[e.ACTION=1]="ACTION",e[e.CUSTOM_ACTION=2]="CUSTOM_ACTION",e[e.ACTION_SUBMENU=3]="ACTION_SUBMENU",e[e.FLYOUT=4]="FLYOUT",e[e.LABEL=5]="LABEL",e[e.TEXT_BUTTON=6]="TEXT_BUTTON",e))(p||{});let h=[a.m1T.DESIGN_LAYOUT,a.m1T.WHITEBOARD_LAYOUT,a.m1T.SLIDE_LAYOUT,a.m1T.COOPER_LAYOUT,a.m1T.COOPER_CONSTRAINED,a.m1T.RASTER,a.m1T.GRADIENT,a.m1T.TEXT,a.m1T.COMMENTS],_=h.concat([a.m1T.VECTOR]),g=h.concat([a.m1T.VECTOR,a.m1T.PLACE_IMAGE]),f=[a.m1T.VECTOR],E=[a.m1T.PLACE_IMAGE],y=[a.m1T.PREVIEW,a.m1T.BRANCHING,a.m1T.COMPARE_CHANGES,a.m1T.HISTORY],b=[a.m1T.DESIGN_LAYOUT,a.m1T.TEXT,a.m1T.RASTER,a.m1T.GRADIENT,a.m1T.PREVIEW,a.m1T.COMMENTS,a.m1T.BRANCHING,a.m1T.HISTORY,a.m1T.COMPARE_CHANGES],I={type:4,name:"move-flyout",children:[{action:"set-tool-default",property:"currentTool",propertyValue:a.NLJ.SELECT,recordingKey:"toolDefault"},{action:"set-tool-scale",property:"currentTool",propertyValue:a.NLJ.SCALE,recordingKey:"toolScale"}],editModes:g,recordingKey:"moveFlyout"},T={type:4,name:"shape-flyout",editModes:h,recordingKey:"shapeFlyout",children:[{action:"set-tool-rectangle",property:"currentTool",propertyValue:a.NLJ.SHAPE_RECTANGLE,recordingKey:"toolShapeRectangle"},{action:"set-tool-line",property:"currentTool",propertyValue:a.NLJ.SHAPE_LINE,recordingKey:"toolShapeLine"},{action:"set-tool-arrow",property:"currentTool",propertyValue:a.NLJ.SHAPE_ARROW,recordingKey:"toolShapeArrow"},{action:"set-tool-ellipse",property:"currentTool",propertyValue:a.NLJ.SHAPE_ELLIPSE,recordingKey:"toolShapeEllipse"},{action:"set-tool-regular-polygon",property:"currentTool",propertyValue:a.NLJ.SHAPE_REGULAR_POLYGON,recordingKey:"toolShapePolygon"},{action:"set-tool-star",property:"currentTool",propertyValue:a.NLJ.SHAPE_STAR,recordingKey:"toolShapeStar"},{action:"place",recordingKey:"toolPlaceImage",onboardingKey:"tool-place-image"}]},v={type:4,name:"comments-flyout",editModes:h,recordingKey:"commentsFlyout",children:[{action:"set-tool-comments",property:"currentTool",propertyValue:a.NLJ.COMMENTS,recordingKey:"toolComments"},{action:"set-tool-annotate",property:"currentTool",propertyValue:a.NLJ.ANNOTATE,recordingKey:"toolAnnotate"},{action:"set-tool-measure",property:"currentTool",propertyValue:a.NLJ.MEASURE,recordingKey:"toolMeasure"}]},S={type:0,tool:a.NLJ.COMMENTS,action:"set-tool-comments",editModes:h.concat([a.m1T.PREVIEW]),nonEditorsAllowed:!0,onboardingKey:"comment",recordingKey:"toolComment"},w={type:1,action:"component-insert",editModes:h,recordingKey:"toolResourceInsert",onboardingKey:"insert",isActive:l.kg};[{type:0,tool:a.NLJ.SELECT,action:"set-tool-default",nonEditorsAllowed:!0,editModes:y,recordingKey:"toolDefault"},I,{type:4,name:"region-flyout",editModes:h,onboardingKey:"frame",recordingKey:"regionFlyout",children:[{action:"set-tool-frame",property:"currentTool",propertyValue:a.NLJ.FRAME,recordingKey:"toolFrame"},{action:"set-tool-section",property:"currentTool",propertyValue:a.NLJ.SECTION,recordingKey:"toolSection"},{action:"set-tool-slice",property:"currentTool",propertyValue:a.NLJ.SLICE,recordingKey:"toolSlice"}]},T,{type:4,name:"pen-flyout",editModes:_,recordingKey:"penFlyout",onboardingKey:"pen",children:[{action:"set-tool-pen",property:"currentTool",propertyValue:a.NLJ.VECTOR_PEN,recordingKey:"toolPen"},{action:"set-tool-pencil",property:"currentTool",propertyValue:a.NLJ.VECTOR_PENCIL,recordingKey:"toolPencil"}]},{type:0,tool:a.NLJ.VECTOR_BEND,action:"set-tool-bend",editModes:f,recordingKey:"toolBend"},{type:0,tool:a.NLJ.VECTOR_PAINT_BUCKET,action:"set-tool-paint-bucket",editModes:f,recordingKey:"toolPaintBucket"},{type:0,tool:a.NLJ.TYPE,action:"set-tool-type",editModes:h,recordingKey:"toolType",onboardingKey:"tool-type-onboarding"},w,{type:0,tool:a.NLJ.HAND,action:"set-tool-hand",nonEditorsAllowed:!0,loggedOutAllowed:!0,editModes:b,recordingKey:"toolHand"},S,{type:5,label:"toolbar-place-image",editModes:E,recordingKey:"toolPlaceOneImage"},{type:6,action:"place-all-images",editModes:E,recordingKey:"toolPlaceAllImages"},{type:6,action:"discard-all-images",editModes:E,recordingKey:"toolDiscardAllImages"},{type:6,action:"leave-edit-mode",editModes:f,tooltip:"leave-vector-edit-mode",recordingKey:"toolLeaveVectorEditMode"}].map(e=>e===S?v:e);let A={type:1,action:"focus-mode-component-set-toggle",editModes:[a.m1T.DESIGN_LAYOUT],recordingKey:"focusModeComponentSetToggle",isActive:()=>a.Ez5.uiState().focusModeState.getCopy()===a.xc1.COMPONENT_SET,onboardingKey:"focus-mode-component-set-toggle"},N=[{type:1,action:"multi-edit-text",editModes:h,recordingKey:"multiEditText",onboardingKey:"multi-edit-text"},{type:1,action:"select-matching",editModes:[a.m1T.DESIGN_LAYOUT,a.m1T.SLIDE_LAYOUT],recordingKey:"selectMatching"},A],C=e=>r=>!!r.mirror.selectionProperties.resettableInstanceOverrides?.selectionOverrides[e];var L=(e=>(e.STANDARD_BUTTON="STANDARD_BUTTON",e.DIALOG_TRIGGER_BUTTON="DIALOG_TRIGGER_BUTTON",e.DROPDOWN_TRIGGER_BUTTON="DROPDOWN_TRIGGER_BUTTON",e))(L||{});a.m1T.DESIGN_LAYOUT,a.m1T.DESIGN_LAYOUT,a.m1T.DESIGN_LAYOUT,a.m1T.SLIDE_LAYOUT,a.m1T.COOPER_LAYOUT,a.m1T.DESIGN_LAYOUT,a.m1T.SLIDE_LAYOUT,a.m1T.DESIGN_LAYOUT,a.m1T.SLIDE_LAYOUT,[...h,a.m1T.DEV_HANDOFF],[...h,a.m1T.DEV_HANDOFF],a.m1T.DESIGN_LAYOUT,a.m1T.TEXT,a.m1T.SLIDE_LAYOUT,C(a.YnC.SIZE),C(a.YnC.EXPORTS),C(a.YnC.EFFECTS),C(a.YnC.LAYER),C(a.YnC.VISIBLE),C(a.YnC.NAME),C(a.YnC.FILL),C(a.YnC.STROKE),C(a.YnC.TEXT),C(a.YnC.TEXT_STYLE),C(a.YnC.PROTOTYPE_INTERACTIONS),C(a.YnC.OVERLAY),o.P,[...N,(o.P,()=>a.Ez5.editorState().selectionIsMask.getCopy()===a.F84.ON),(a.m1T.DESIGN_LAYOUT,a.m1T.TEXT,a.m1T.SLIDE_LAYOUT),([...h,a.m1T.DEV_HANDOFF,a.m1T.PREVIEW],e=>e.openFile?.canEdit||(0,i.tn)(e)),([...h,a.m1T.DEV_HANDOFF,a.m1T.PREVIEW],()=>!0)],a.NLJ.SELECT,[...h,a.m1T.PREVIEW,a.m1T.HISTORY],a.NLJ.HAND,[...h,a.m1T.PREVIEW,a.m1T.HISTORY],d.N,a.NLJ.SELECT,a.m1T.DEV_HANDOFF,a.m1T.DEV_HANDOFF_HISTORY,m.A,a.NLJ.MEASURE,a.m1T.DEV_HANDOFF,a.NLJ.ANNOTATE,a.m1T.DEV_HANDOFF,a.NLJ.COMMENTS,a.m1T.DEV_HANDOFF,h.concat([a.m1T.DEV_HANDOFF,a.m1T.PREVIEW,a.m1T.MAGIC_LINK]),u.Iv},252828:(e,r,n)=>{n.d(r,{p:()=>Y});var a=n(411855),i=n(188507),o=n(187134),s=n(243742),l=n(299321),c=n(629019),d=n.n(c),u=n(961747),m=n(939683),p=n(794272),h=n(966712),_=n(374626),g=n(498750),f=n(153234),E=n(559036),y=n(268537),b=n(715981),I=n(939863),T=n(181849),v=n(738269),S=n(809831),w=n(506599),A=n(226055),N=n(728325),C=n(356390),L=n(949632),O=n(617453),R=n(227944),P=n(318812),D=n(100197),k=n(239671),M=n(498606),F=n(279145),x=n(259494),U=n(507956),B=n(467594),V=n(585645),G=n(728587),H=n(289566);let W="zoom-input-dropdown";function K({targetRect:e,showingZoomDropdown:r,toggleZoomMenu:n,recordingKey:o}){let c=(0,m.am)();a.useEffect(()=>{c("View Menu Opened")},[c]);let d=(0,S.E3)(),u="ui3"===(0,s.DP)().version,g=(0,D.J2)((0,L.d)().activeCanvasCurrentZoom),f=(0,D.J2)((0,O.UK)().activeCanvasPixelPreview),y=(0,D.J2)((0,L.d)().activeCanvasRetinaMode),b=(0,p.R)(e=>e.mirror.appModel.keyboardShortcuts),I=(0,i.d4)(e=>!e.mirror.appModel.isReadOnly),v=(0,i.d4)(e=>!!e.user),w=(0,i.d4)(e=>(0,U.$A)(e.selectedView)),[A,P]=(0,_.fp)(T.U5),{Sprig:M}=(0,E.A)(),x=e=>(0,i.d4)(r=>!!r.mirror.appModel[e]),B=d===k.nT.Design,V=d===k.nT.Slides,G="design"===(0,k.oD)(d),H=(0,i.d4)(e=>e.mirror.appModel.prototypeCanvasUiVisible),W=(0,D.J2)(l.Ez5.editorPreferences().showPropertyLabels),K=(0,D.J2)(l.Ez5.editorPreferences().showFrameGrids),$=(0,D.J2)((0,L.d)().showFrameGridsViewOnly),j=I?"showFrameGrids":"showFrameGridsViewOnly",z=(0,D.J2)((0,h.kc)().figjam_snap_to_dot_grid_reset?(0,O.UK)().snapToDotGridStagingReset:(0,O.UK)().snapToDotGrid),q=(0,D.J2)((0,O.UK)().snapToPixelGrid),X=G?q:z,J=(0,D.J2)((0,O.UK)().showDotGrid),Z=(0,D.J2)((0,O.UK)().renderGrid),Q=G?Z:J,ee=G?"renderGrid":"showDotGrid",et=[{type:"ZOOM_IN",shortcut:(0,F.c1)(b,"zoom-in"),recordingKey:"zoomIn",disabled:!(0,R.Zr)("zoom-in")},{type:"ZOOM_OUT",shortcut:(0,F.c1)(b,"zoom-out"),recordingKey:"zoomOut",disabled:!(0,R.Zr)("zoom-out")},{type:"ZOOM_TO_FIT",shortcut:(0,F.c1)(b,"zoom-to-fit"),recordingKey:"zoomToFit"},{type:"ZOOM_TO_50",recordingKey:"zoomTo50"},{type:"ZOOM_TO_100",shortcut:(0,F.c1)(b,"zoom-reset"),recordingKey:"zoomTo100"},{type:"ZOOM_TO_200",recordingKey:"zoomTo200"},{type:"separator"},{type:"PIXEL_PREVIEW",isChildChecked:f,recordingKey:"activeCanvasPixelPreview",hidden:!B&&!w,disabled:(0,R.Zr)("activeCanvasPixelPreview"),children:[{type:"PIXEL_PREVIEW_DISABLED",shortcut:(0,F.c1)(b,"toggle-pixel-preview"),isChecked:!f,recordingKey:"disabled"},{type:"PIXEL_PREVIEW_1X",isChecked:f&&!y,shortcut:y?void 0:(0,F.c1)(b,"toggle-pixel-preview"),recordingKey:"1x"},{type:"PIXEL_PREVIEW_2X",isChecked:f&&y,shortcut:y?(0,F.c1)(b,"toggle-pixel-preview"):void 0,recordingKey:"2x"}]},{type:G?"PIXEL_GRID":"DOT_GRID",shortcut:(0,F.c1)(b,G?"toggle-grid":"toggle-show-dot-grid"),recordingKey:ee,isChecked:Q,disabled:!(0,R.Zr)("toggle-grid")},{type:G?"SNAP_TO_PIXEL_GRID":"SNAP_TO_DOT_GRID",shortcut:(0,F.c1)(b,G||V?"toggle-snapping-to-pixels":"toggle-snapping-to-dots"),recordingKey:B?"snapToPixelGrid":"snapToDotGrid",isChecked:X,disabled:!(0,R.Zr)(B||V?"toggle-snapping-to-pixels":"toggle-snapping-to-dots"),hidden:w},{type:"LAYOUT_GRIDS",shortcut:(0,F.c1)(b,"toggle-shown-layout-grids"),recordingKey:j,hidden:!G||!v,isChecked:I?K:$,disabled:(0,R.Zr)(j)},{type:"RULERS",shortcut:(0,F.c1)(b,"toggle-rulers"),recordingKey:"renderRulers",hidden:!G,isChecked:(0,D.J2)((0,O.UK)().renderRulers),disabled:(0,R.Zr)("renderRulers")},{type:"OUTLINES_MENU",recordingKey:"outlinesMenu",hidden:!G||!v,disabled:(0,R.Zr)("showOutlines"),children:[{type:"OUTLINES",shortcut:(0,F.c1)(b,"toggle-outlines"),isChecked:(0,D.J2)((0,L.d)().showOutlines),recordingKey:"showOutlines"},{type:"separator"},{type:"OUTLINES_HIDDEN_LAYERS",isChecked:(0,D.J2)((0,L.d)().showOutlineHiddenLayers),recordingKey:"hiddenLayers"},{type:"OUTLINES_OBJECT_BOUNDS",isChecked:(0,D.J2)((0,L.d)().showOutlineObjectBounds),recordingKey:"objectBounds"}]},{type:"MULTIPLAYER_CURSORS",shortcut:(0,F.c1)(b,"toggle-multiplayer-cursors"),recordingKey:"hideMultiplayerCursors",isChecked:!x("hideMultiplayerCursors"),disabled:(0,R.Zr)("hideMultiplayerCursors")},{type:"PROPERTY_LABELS",recordingKey:"toggleShowPropertyLabels",isChecked:W,hidden:!u},{type:"separator"},{type:"COMMENTS",shortcut:(0,F.c1)(b,"toggle-show-comments"),recordingKey:"showComments",isChecked:x("showComments"),disabled:(0,R.Zr)("showComments")},{type:"ANNOTATIONS",recordingKey:"showAnnotations",isChecked:(0,D.J2)(l.Ez5.uiState().showAnnotations),disabled:!(0,R.Zr)("toggle-show-annotations"),hidden:!w},{type:"CODE_CONNECT_ANNOTATIONS",isChecked:A,hidden:!w||!(0,h.kc)().dt_code_connect_overview_on_canvas},{type:"PROTOTYPING",shortcut:(0,F.c1)(b,"toggle-prototyping-info"),recordingKey:"prototypingMode",hidden:!B||I,isChecked:H}],er=a.useCallback(e=>{l.glU.setCanvasZoomScale(e/100)},[]);return a.createElement(Y,{targetRect:e,showingZoomDropdown:r,toggleZoomMenu:n,recordingKey:o,allowCodegenOptions:G,currentZoom:100*g,dropdownItems:et,onSelectDropdownItem:(e,r)=>{switch(e){case"ZOOM_IN":C.Y5.triggerAction("zoom-in",{source:"zoom-menu"});break;case"ZOOM_OUT":C.Y5.triggerAction("zoom-out",{source:"zoom-menu"});break;case"ZOOM_TO_FIT":C.Y5.triggerAction("zoom-to-fit",{source:"zoom-menu"});break;case"ZOOM_TO_50":l.glU.setCanvasZoomScale(.5);break;case"ZOOM_TO_100":l.glU.setCanvasZoomScale(1);break;case"ZOOM_TO_200":l.glU.setCanvasZoomScale(2);break;case"PIXEL_PREVIEW":N.VU.get("toggle-pixel-preview","toolbar")(r);break;case"PIXEL_GRID":N.VU.get("toggle-grid","toolbar")(r);break;case"SNAP_TO_PIXEL_GRID":N.VU.get("toggle-snapping-to-pixels","toolbar")(r);break;case"SNAP_TO_DOT_GRID":N.VU.get("toggle-snapping-to-dots","toolbar")(r);break;case"DOT_GRID":N.VU.get("toggle-show-dot-grid","toolbar")(r);break;case"LAYOUT_GRIDS":N.VU.get("toggle-shown-layout-grids","toolbar")(r);break;case"MULTIPLAYER_CURSORS":N.VU.get("toggle-multiplayer-cursors","toolbar")(r);break;case"PROPERTY_LABELS":C.Y5.triggerAction("toggle-show-property-labels",{source:"zoom-menu"});break;case"PROTOTYPING":N.VU.get("toggle-prototyping-info","toolbar")(r);break;case"RULERS":N.VU.get("toggle-rulers","toolbar")(r);break;case"SLICES":N.VU.get("toggle-show-slices","toolbar")(r);break;case"COMMENTS":N.VU.get("toggle-show-comments","toolbar")(r);break;case"ANNOTATIONS":N.VU.get("toggle-show-annotations","toolbar")(r);break;case"CODE_CONNECT_ANNOTATIONS":(0,h.kc)().dt_code_connect_overview_on_canvas_sprig&&A&&M("track","code_connect_on_canvas_hidden"),P(e=>!e);break;case"OUTLINES":C.Y5.triggerAction("toggle-outlines",{source:"zoom-menu"});break;case"OUTLINES_HIDDEN_LAYERS":C.Y5.triggerAction("toggle-outline-mode-hidden-layers",{source:"zoom-menu"});break;case"OUTLINES_OBJECT_BOUNDS":C.Y5.triggerAction("toggle-outline-mode-object-bounds",{source:"zoom-menu"});break;case"PIXEL_PREVIEW_DISABLED":f&&C.Y5.triggerAction("toggle-pixel-preview",{source:"zoom-menu"});break;case"PIXEL_PREVIEW_1X":f||C.Y5.triggerAction("toggle-pixel-preview",{source:"zoom-menu"}),y&&C.Y5.triggerAction("toggle-retina-mode",{source:"zoom-menu"});break;case"PIXEL_PREVIEW_2X":f||C.Y5.triggerAction("toggle-pixel-preview",{source:"zoom-menu"}),y||C.Y5.triggerAction("toggle-retina-mode",{source:"zoom-menu"})}n()},onSubmitCustomZoom:er})}function Y({targetRect:e,showingZoomDropdown:r,recordingKey:n,allowCodegenOptions:o,currentZoom:l,dropdownItems:c,displayAboveTarget:d,onSelectDropdownItem:u,onSubmitCustomZoom:m}){let p=(0,i.wA)(),h="ui3"===(0,s.DP)().version,_=a.useMemo(()=>({ZOOM_IN:(0,I.t)("fullscreen_actions.zoom-in"),ZOOM_OUT:(0,I.t)("fullscreen_actions.zoom-out"),ZOOM_TO_FIT:(0,I.t)("fullscreen_actions.zoom-to-fit"),ZOOM_TO_50:(0,I.t)("fullscreen.toolbar.zoom_menu.zoom_to_50"),ZOOM_TO_100:(0,I.t)("fullscreen_actions.zoom-reset"),ZOOM_TO_200:(0,I.t)("fullscreen.toolbar.zoom_menu.zoom_to_200"),PIXEL_PREVIEW:(0,I.t)("fullscreen.toolbar.zoom_menu.pixel_preview"),PIXEL_GRID:(0,I.t)("fullscreen_actions.toggle-grid"),SNAP_TO_PIXEL_GRID:(0,I.t)("fullscreen_actions.toggle-snapping-to-pixels"),PROTOTYPING:(0,I.t)("fullscreen_actions.toggle-prototyping-information"),SNAP_TO_DOT_GRID:(0,I.t)("fullscreen_actions.toggle-snapping-to-dots"),DOT_GRID:(0,I.t)("fullscreen_actions.toggle-show-dot-grid"),LAYOUT_GRIDS:(0,I.t)("fullscreen_actions.toggle-shown-layout-grids"),MULTIPLAYER_CURSORS:(0,I.t)("fullscreen_actions.toggle-multiplayer-cursors"),PROPERTY_LABELS:(0,I.t)("fullscreen_actions.toggle-show-property-labels"),CODE_CONNECT_ANNOTATIONS:(0,I.t)("fullscreen_actions.toggle-show-code-connect-annotations"),RULERS:(0,I.t)("fullscreen_actions.toggle-rulers"),SLICES:(0,I.t)("fullscreen_actions.toggle-show-slices"),COMMENTS:(0,I.t)("fullscreen_actions.toggle-show-comments"),ANNOTATIONS:(0,I.t)("fullscreen_actions.toggle-show-annotations"),OUTLINES:(0,I.t)("fullscreen_actions.toggle-outlines"),OUTLINES_MENU:(0,I.t)("fullscreen_actions.outlines-menu"),OUTLINES_HIDDEN_LAYERS:(0,I.t)("fullscreen_actions.outline-mode-hidden-layers"),OUTLINES_OBJECT_BOUNDS:(0,I.t)("fullscreen_actions.outline-mode-object-bounds"),PIXEL_PREVIEW_DISABLED:(0,I.t)("fullscreen.toolbar.zoom_menu.pixel_preview_disabled"),PIXEL_PREVIEW_1X:(0,I.t)("fullscreen.toolbar.zoom_menu.pixel_preview_1x"),PIXEL_PREVIEW_2X:(0,I.t)("fullscreen.toolbar.zoom_menu.pixel_preview_2x"),SINGLE_PROPERTIES_PANEL:(0,I.t)("fullscreen_actions.single-properties-panel")}),[]),E=a.useMemo(()=>{let e=r=>{if("separator"===r.type)return{displayText:"",disabled:!0,separator:!0};let{children:n,...a}=r,i={displayText:_[r.type]};switch(r.type){case"ZOOM_TO_50":i.isChecked=50===l;break;case"ZOOM_TO_100":i.isChecked=100===l;break;case"ZOOM_TO_200":i.isChecked=200===l}return n&&(i.children=n.map(e)),{...a,...i}};return c.map(e)},[l,c,_]),b=a.useCallback((e,r)=>{u(e.type,r)},[u]);return a.createElement(G.j,{items:E,onSelectItem:b,parentRect:e,showPoint:!h,dispatch:p,recordingKey:f.Pt(n,"dropdown"),alwaysShowCheckMarkOffset:!0,allowCodegenOptions:o,displayAboveTarget:d},a.createElement("div",{style:{height:2}}),a.createElement("div",{className:H.zj,onKeyDown:e=>{(e.keyCode===g.Uz.ENTER||e.keyCode===g.Uz.ESCAPE)&&r&&p(v.oB())}},a.createElement(V.A,{className:H.hF,placeholderValue:`${Math.round(l)}%`,cancel:e=>{e&&e.blur()},submit:e=>{e.endsWith("%")&&(e=e.substr(0,e.length-1));let r=-1;try{r=parseInt(e,10)}catch(e){}r>0&&m(r)},recordingKey:f.Pt(n,"dropdown","zoomInput")})),a.createElement(y.wv,null))}a.memo(function({recordingKey:e}){let r=(0,i.wA)(),n=a.useRef(null),s=100*(0,D.J2)((0,L.d)().activeCanvasCurrentZoom),l=(0,P.BK)(W),[c,m]=(0,a.useState)(null),p=(0,A.GS)(),{isPropertiesPanelCollapsed:h}=(0,w.iT)(),_=a.useCallback(()=>{m(n?.current?.getBoundingClientRect()||null)},[n]);a.useEffect(()=>(_(),u._.addListener(_),window.addEventListener("resize",_),()=>{u._.removeListener(_),window.removeEventListener("resize",_)}),[_]);let g=a.useCallback(e=>{e.stopPropagation(),e.preventDefault(),_(),l.toggle({hasOwnEscKeyHandler:!1})},[l,_]),E=l.showing&&c&&a.createElement(K,{targetRect:c,showingZoomDropdown:l.showing,toggleZoomMenu:l.toggle,recordingKey:e}),y=p?H.l4:H.Xf,T=p?l.showing?H.wg:h?H.Jk:H.Y7:l.showing?H.om:H.wR,v=p?l.showing?H.S0:H.i5:H.cm,S=a.createElement("div",{className:T,ref:p?n:void 0},a.createElement("div",{className:v,"data-testid":"zoom-amount"},function(){let e=Math.round(s);return p?e.toString().length<5?`${e}%`:`${e}`:`${e}%`}()),a.createElement("div",{className:d()(H.FH,{[H.WB]:p&&l.showing}),ref:n},a.createElement(B.c,{dispatch:r,dropdownKey:W,showingDropdown:l.showing,dataTestId:"zoom-menu-chevron",toggleOnClick:!0,isUI3:p})));return a.createElement("div",{className:H.sH},a.createElement(o.o,{eventListeners:["onClick"]},a.createElement(b.L,{selected:l.showing,className:y,onboardingKey:x.q,"data-tooltip-type":M.Ib.TEXT,"data-tooltip":(0,I.t)("fullscreen.zoom_menu.zoom_view_options"),onClick:g,recordingKey:f.Pt(e,"zoomButton"),enabled:!0,isUI3:p,"aria-controls":W,"aria-haspopup":"menu","aria-expanded":l.showing},S),E))})},460528:(e,r,n)=>{n(411855),n(320063),n(939863),n(862442),n(970332),n(788256),n(746806)},457261:(e,r,n)=>{n(411855),n(966712),n(939863),n(101505),n(226055),n(970332)},261503:(e,r,n)=>{n(411855),n(188507),n(299321),n(904669),n(320063),n(939863),n(970332),n(260833),n(788256)},493168:(e,r,n)=>{n(411855),n(188507),n(299321),n(904669),n(320063),n(939863),n(931828),n(862442),n(970332),n(260833),n(32067),n(788256),n(493364),n(460528)},222720:(e,r,n)=>{n(411855),n(188507),n(629019),n(966712),n(799569),n(946689),n(939863),n(931828),n(672517),n(226055),n(168039),n(617453),n(373119),n(126911),n(457630),n(309798),n(100197),n(173101),n(600907),n(788256),n(70964);var a=(e=>(e.MOUSE="mouse",e.TRACKPAD="trackpad",e))(a||{});let i=e=>"dark"===e?staticAssetWithUploadsPath("d2eefebde737b9d5fba2b35193dcd51e26ed0164"):staticAssetWithUploadsPath("99d648a7ac711ba9d19976515105d6395eeb2d4c"),o=e=>"dark"===e?staticAssetWithUploadsPath("e27a5d39945685c389cd50e9f08144678edefeab"):staticAssetWithUploadsPath("2357b697bfe85711b1de702dc63611ef8bb75859"),s=e=>"dark"===e?staticAssetWithUploadsPath("f49911183f0d3a2b6ee5044b42e0a14fe549999a"):staticAssetWithUploadsPath("2a0c8ae88f72d6155bd818a0c51c8ced71fcecfa"),l=e=>"dark"===e?staticAssetWithUploadsPath("045c7e1324e953b8ee9ec91ac4e944995662e11e"):staticAssetWithUploadsPath("c764bcd0a726bf2d31f70f16808785efeae4de56"),c=e=>"dark"===e?staticAssetWithUploadsPath("7a24deb2e05c4542dbd8b6bd1f009e26ba761b48"):staticAssetWithUploadsPath("32f4843d9b24a4b95129bacd47f6b81fe439228f")},258525:(e,r,n)=>{n.d(r,{B:()=>a}),n(411855),n(188507),n(320063),n(939863),n(931828),n(226055),n(862442),n(970332),n(260833),n(788256),n(746806);let a="text-panel-container"},889185:(e,r,n)=>{n(411855),n(188507),n(931828),n(251960),n(456104),n(335682),n(860178),n(309798),n(833629),n(397065),n(463546),n(939863),n(119198),n(349410),n(101505),n(226055),n(974105),n(696673),n(29680),n(99506),n(945020),n(970332),n(460528),n(457261),n(261503),n(258525),n(299321),n(293017),n(843495),n(998109),n(493364),n(788256),n(904669),n(32067),n(493168),n(222720),n(320063),n(862442),n(746806),n(147723)},788256:(e,r,n)=>{n.d(r,{Qf:()=>o}),n(304061),n(356390),n(843495);var a=n(508169);n(457630);var i=(e=>(e[e.FORWARD=0]="FORWARD",e[e.BACKWARD=1]="BACKWARD",e))(i||{});function o(e){let r=null;try{r=e.getCurrentPage()}catch(e){if(e.message!==a.e)throw e}return r}},282263:(e,r,n)=>{n.d(r,{Cr:()=>W,Gx:()=>B,JV:()=>U,Q8:()=>z,V5:()=>$,_X:()=>V,hu:()=>K,nE:()=>H,rf:()=>Y});var a=n(411855),i=n(188507),o=n(171812),s=n(343887),l=n(927457),c=n(299321),d=n(275556),u=n(794272),m=n(966712),p=n(153234),h=n(572206),_=n(46481),g=n(939863),f=n(896474),E=n(632430),y=n(169231),b=n(356390);n(848661);var I=n(869156),T=n(279702),v=n(498606),S=n(420186),w=n(273226),A=n(107244),N=n(72875);n(83695);var C=n(683859),L=n(29808),O=n(184837),R=n(533573),P=n(158406),D=n(830324),k=n(939143),M=n(746806),F=n(502601),x=n(564092);function U(e,r,n,s,l,c,d,u){let{mapVariableIdToTypedValue:p}=s??{},h=(0,i.wA)(),_=(0,i.d4)(e=>e.variablePickerShown),{updateVariableConsumption:g,clearVariableConsumption:f}=(0,x.u3)(e),b=(0,a.useCallback)(e=>{n?n(e):e?h((0,E.Yi)({item:e,callback:n=>{p?g(p({variable:e,variableId:n})):g((0,x.y$)(r,n))}})):f()},[n,h,g,r,f,p]),I=(0,a.useCallback)(e=>e?l?l(e):(g(p?p(e):e),!0):(f(),!0),[p,f,l,g]);return[_.isShown&&"variable-picker-fields"===_.type&&(0,o.c2)(_.fields,e)&&_.responsiveTextStyleVariantIndex===u&&s?.metadata===_.metadata,(0,a.useCallback)((n,a)=>{let i=a?.initialPosition??d?.()??(0,D.n)(n);h((0,y.C)({type:"variable-picker-fields",isShown:!0,initialPosition:i,fields:e,resolvedType:r,requestedTypes:s?.requestedTypes,currentFieldValue:a?.currentFieldValue,onVariableSelected:b,metadata:s?.metadata,variableFilters:s?.variableFilters,onExpressionSubmitted:(0,m.kc)().prototype_expressions_nodefields?I:void 0,onComponentPropSelected:(0,m.kc)().ds_variable_props_unified_ui?c:void 0,responsiveTextStyleVariantIndex:u}))},[d,h,e,r,s?.requestedTypes,s?.metadata,s?.variableFilters,b,I,c,u]),b,(0,m.kc)().prototype_expressions_nodefields?I:void 0,(0,m.kc)().ds_variable_props_unified_ui?c:void 0]}function B(e,r,n){let o=(0,i.wA)(),s=(0,i.d4)(e=>e.variablePickerShown),l=(0,a.useCallback)(a=>{a?o((0,E.Yi)({item:a,callback:a=>{let i=(0,x.y$)(n,a);d.l7.user("alias-variable",()=>c.CWU.setVariableValueForMode(e,r,i))&&b.Y5.triggerAction("commit")}})):d.l7.user("unalias-variable",()=>c.CWU.detachVariableValueForMode(e,r))&&b.Y5.triggerAction("commit")},[o,e,r,n]);return[s.isShown&&"variable-picker-alias"===s.type&&s.variableID===e&&s.modeID===r,(0,a.useCallback)((a,i)=>{let s=a.getBoundingClientRect();o((0,y.C)({type:"variable-picker-alias",isShown:!0,initialPosition:new h.Mi(s.left,s.bottom),initialView:i?.initialView,variableID:e,modeID:r,resolvedType:n,onVariableSelected:l}))},[e,r,n,o,l]),l]}function V({children:e,...r}){return a.createElement(G,{...r,children:e})}function G({fields:e,children:r,resolvedType:n,requestedTypes:i,editingStyleGuid:o,responsiveTextStyleVariantIndex:s,initialPickerPosition:l,onVariableSelected:c,onExpressionSubmitted:d,onComponentPropSelected:u}){let{consumedVariable:m}=(0,x.u3)(e,o,s),p=(0,R.MH)(m),h=(0,I.u)(p??void 0),_=!!h&&(0,R.eF)(h),g=(0,x.Ek)(e),[f,E,y,b,T]=U(e,n,c,{requestedTypes:i},d,u,l,s),v=(0,a.useMemo)(()=>({showBindingUI:E,isShowingBindingUI:f,onVariableSelected:y,boundVariableId:p,isBoundVariableDeleted:_,onExpressionSubmitted:b,onComponentPropSelected:T,mismatchedValue:g}),[E,f,y,p,_,b,g,T]);return a.createElement(C.p.Provider,{value:v},r)}function H({variableID:e,modeID:r,children:n,resolvedType:i}){let[o,s,l]=B(e,r,i),c=(0,I.bL)(e,r),d=(0,R.MH)(c??null),u=(0,I.u)(d??void 0),m=!!u&&(0,R.eF)(u),p=(0,a.useMemo)(()=>({showBindingUI:s,isShowingBindingUI:o,onVariableSelected:l,boundVariableId:d,isBoundVariableDeleted:m}),[s,o,l,d,m]);return a.createElement(C.p.Provider,{value:p},n)}function W({children:e,pickerType:r="create-modal",resolvedType:n,variableValue:i,onVariableValueChange:o,onVariableSelected:s}){let l=a.useRef(),[d,u]=a.useState(!1),m=(0,a.useCallback)(()=>{u(!1)},[]),p=(0,a.useCallback)(e=>{let r=e.getBoundingClientRect();l.current=new h.Mi(r.left,r.bottom),u(!0)},[]),_=i.type===c.Z_n.ALIAS?i.value:void 0,g=(0,I.u)(_),f=!!g&&(0,R.eF)(g),E=(0,a.useMemo)(()=>({showBindingUI:p,isShowingBindingUI:d,boundVariableId:_??null,isBoundVariableDeleted:f}),[p,d,_,f]),y=(0,I.BQ)(_);return a.createElement(C.p.Provider,{value:E},e,d?i.resolvedType!==c.rXF.COLOR?a.createElement(F.Q,null,a.createElement(X,{disabledVariableIds:new Set,boundVariable:null,initialPosition:l.current,resolvedType:n,onVariableSelected:s,onClose:m,pickerType:r,recordingKey:"variableBindingsDropdown"})):i.type===c.Z_n.COLOR?a.createElement(N.h3,{disabledVariableIds:new Set,color:i.value,boundVariable:null,initialPosition:l.current,recordingKey:"variableBindingsDropdown",onChange:e=>o({type:c.Z_n.COLOR,resolvedType:c.rXF.COLOR,value:{...e,a:1}}),onVariableChange:s,onClose:m}):i.type===c.Z_n.ALIAS?a.createElement(N.h3,{disabledVariableIds:new Set,color:y.value,boundVariable:g,initialPosition:l.current,recordingKey:"variableBindingsDropdown",onChange:e=>o({type:c.Z_n.COLOR,resolvedType:c.rXF.COLOR,value:{...e,a:1}}),onVariableChange:s,onClose:m}):void 0:null)}function K({boundVariableId:e,resolvedType:r,requestedTypes:n,initialPickerPosition:o,onVariableSelected:s,onComponentPropSelected:l,children:c}){let d=(0,I.u)(e??void 0),u=!!d&&(0,R.eF)(d),[m,p,_]=function({resolvedType:e,requestedTypes:r,boundVariableId:n,initialPickerPosition:o,onVariableSelected:s,onComponentPropSelected:l}){let c=(0,a.useId)(),d=(0,i.wA)(),u=(0,i.d4)(e=>e.variablePickerShown);return[u.isShown&&"variable-picker-controlled"===u.type&&u.key===c,(0,a.useCallback)((a,i)=>{let u=a.getBoundingClientRect();d((0,y.C)({type:"variable-picker-controlled",isShown:!0,initialPosition:i?.initialPosition??o?.()??new h.Mi(u.left,u.bottom),initialView:i?.initialView,variableID:n,key:c,resolvedType:e,requestedTypes:r,onVariableSelected:s,onComponentPropSelected:l}))},[d,n,c,e,r,o,s,l]),c]}({resolvedType:r,requestedTypes:n,boundVariableId:e,initialPickerPosition:o,onVariableSelected:s,onComponentPropSelected:l});return a.createElement(C.p.Provider,{value:{boundVariableId:e??null,isBoundVariableDeleted:u,isShowingBindingUI:m,showBindingUI:p,onVariableSelected:s,onComponentPropSelected:l,variableBindingContextKey:_}},c)}function Y({variableScope:e}){let r=(0,i.wA)(),n=(0,a.useCallback)(()=>{r((0,y.B)())},[r]),o=(0,i.d4)(e=>e.variablePickerShown);if(!o.isShown||"variable-picker-controlled"!==o.type)return null;let{resolvedType:s,initialPosition:l,requestedTypes:c,variableID:d,onVariableSelected:u,variableFilters:m}=o;return a.createElement(j,{variableID:d,resolvedType:s,requestedTypes:c,initialPosition:l,onVariableSelected:u,onClose:n,variableScopes:e?new Set([e]):void 0,variableFilters:m})}function $({variableScope:e,onPickerClose:r}){let n=(0,i.wA)(),o=(0,a.useCallback)(()=>{r?.(),n((0,y.B)())},[n,r]),s=a.useContext(C.p)?.isShowingBindingUI,l=a.useContext(C.p)?.variableBindingContextKey,c=(0,i.d4)(e=>e.variablePickerShown);if(!s||!c.isShown||"variable-picker-controlled"!==c.type||c.key!==l)return null;let{resolvedType:d,initialPosition:u,requestedTypes:m,variableID:p,onVariableSelected:h,onComponentPropSelected:_,variableFilters:g}=c;return a.createElement(j,{variableID:p,resolvedType:d,requestedTypes:m,initialPosition:u,onVariableSelected:h,onComponentPropSelected:_,onClose:o,variableScopes:e?new Set([e]):void 0,variableFilters:g})}function j({resolvedType:e,requestedTypes:r,initialPosition:n,variableID:i,onVariableSelected:o,onComponentPropSelected:s,onClose:l,variableScopes:d,variableFilters:u}){let m=(0,I.u)(i),p=(0,a.useMemo)(()=>{if(i&&m)return{type:c.Z_n.ALIAS,resolvedType:e,value:i}},[e,i,m]);return a.createElement(X,{disabledVariableIds:new Set,initialPosition:n,resolvedType:e,requestedTypes:r,boundVariable:m,newVariableInitialValue:p,onVariableSelected:o,onComponentPropSelected:s,onClose:l,variableScopes:d,variableFilters:u,pickerType:s?"prop-assignment":"fields",recordingKey:"variableBindingsDropdown"})}function z(){let e=(0,i.d4)(e=>e.variablePickerShown);return e.isShown&&"variable-picker-alias"===e.type?a.createElement(q,{pickerShownState:e}):null}function q({pickerShownState:e}){let r=(0,i.wA)(),{variableID:n,modeID:o,resolvedType:s,initialPosition:l,initialView:u,onVariableSelected:m,variableFilters:h}=e,_=(0,I.bL)(n,o),g=(0,I.u)(_?.type===c.Z_n.ALIAS?_?.value:void 0),f=(0,a.useCallback)(()=>{r((0,y.B)())},[r]),E=(0,a.useCallback)((e,r)=>{let a={type:c.Z_n.COLOR,resolvedType:c.rXF.COLOR,value:e};d.l7.user("set-color-variable-value",()=>c.CWU.setVariableValueForMode(n,o,a))&&r===T.zk.YES&&b.Y5.triggerAction("commit")},[n,o]);return _?.resolvedType===c.rXF.COLOR&&_?.type!==c.Z_n.NODE_FIELD_ALIAS?a.createElement(F.Q,null,a.createElement(J,{disabledVariableIds:new Set([n]),boundVariable:g,variableValue:_,initialPosition:l,initialView:u,onColorChange:E,onVariableSelected:m,onClose:f,recordingKey:"variableBindingsDropdown"}),a.createElement(k.$3,{recordingKey:p.Pt("variableBindingsDropdown","closer"),onClose:f})):a.createElement(a.Fragment,null,a.createElement(F.Q,null,a.createElement(X,{disabledVariableIds:new Set([n]),initialPosition:l,resolvedType:s,variableFilters:h,boundVariable:g,onVariableSelected:m,onClose:f,pickerType:"alias",recordingKey:"variableBindingsDropdown"})),a.createElement(k.$3,{recordingKey:p.Pt("variableBindingsDropdown","closer"),onClose:f}))}function X({disabledVariableIds:e,initialPosition:r,boundVariable:n,newVariableInitialValue:i,resolvedType:o,requestedTypes:c,variableFilters:d,fields:h,pickerType:E,variableScopes:y,recordingKey:b,onVariableSelected:I,onComponentPropSelected:T,onClose:N}){let C=a.useRef(null),{VariableAndComponentPropCreateModalRoot:R}=(0,a.useContext)(L.l)??{},[D,F]=(0,a.useState)(!1),x=a.useRef(),U=(0,u.R)(e=>(0,A.Nw)(e)??(0,A.y7)(e)),B=!!(0,u.R)(e=>(0,A.UR)(e)),V=a.useMemo(()=>!!(0,m.kc)().ds_variable_props_unified_ui&&!!R&&!!U&&!!(0,w.fx)(h),[R,U,h]);function G(){let e=C.current?.getEl();if(!e)return;let r=(0,S.cn)(e,O.i);x.current=r,F(!0)}function H(){F(!1)}return a.createElement(a.Fragment,null,a.createElement(M.vx,{ref:C,title:"",headerSize:"hidden",initialPosition:r,onClose:N,dragHeaderOnly:!1,initialWidth:P.d9,autoflowHeight:!0},a.createElement(k.Rp,{selectedItem:n,disabledVariableIds:e,resolvedType:o,pickerType:E,recordingKey:b,setControlRightButtons:function(){if(void 0===o||"fields"!==E&&"prop-assignment"!==E)return;let e=V?(0,g.t)("variables.binding_ui.create_variable_property_button_tooltip"):(0,g.t)("variables.binding_ui.create_variable_button_tooltip");return a.createElement(s.K,{"aria-label":e,recordingKey:p.Pt(b,"createVariable"),onClick:G,htmlAttributes:{"data-tooltip":e,"data-tooltip-type":v.Ib.TEXT}},a.createElement(_.U,{svg:f.KC["plus-32"]},a.createElement(l.e,null)))}(),onVariableSelected:I,onComponentPropSelected:T,onClose:N,requestedTypes:c,variableScopes:y,variableFilters:d})),a.createElement(k.$3,{recordingKey:p.Pt(b,"closer"),onClose:N}),D&&function(){if(void 0===o||!x.current)return null;if(!V||!R||B)return a.createElement(O.U,{initialPosition:x.current,initialValue:i,initialWidth:O.i,resolvedType:o,onCreateVariable:I,onClose:H});{let e=(0,w.fx)(h);return a.createElement(R,{initialPosition:x.current,initialVariableValue:i,resolvedType:o,onCreateVariable:I,onClose:H,refField:e})}}())}function J({disabledVariableIds:e,boundVariable:r,variableValue:n,initialPosition:i,initialView:o,recordingKey:s,onColorChange:l,onVariableSelected:d,onClose:u}){let m=n.type===c.Z_n.COLOR?n.value:{r:1,g:1,b:1,a:1};return a.createElement(N.h3,{color:m,disabledVariableIds:e,initialPosition:i,initialView:o,boundVariable:r,recordingKey:s,onChange:l,onVariableChange:d,onClose:u})}n(875157)},564092:(e,r,n)=>{n.d(r,{AA:()=>Z,Ek:()=>er,JG:()=>W,Mo:()=>F,Px:()=>j,QT:()=>et,R1:()=>H,UE:()=>k,Ws:()=>M,Yc:()=>U,Yn:()=>x,ZP:()=>q,iw:()=>B,kN:()=>Y,oU:()=>Q,u3:()=>X,uA:()=>ee,xp:()=>J,y$:()=>V,yK:()=>z});var a=n(411855),i=n(188507),o=n(171812),s=n(319130),l=n(299321);n(275556);var c=n(880934),d=n(378195),u=n(89865),m=n.n(u);n(900956),n(776250);var p=n(44948),h=n(966712),_=n(374626);n(939863);var g=n(154483);n(392592);var f=n(308977),E=n(239349),y=n(581250);n(662275);var b=n(848661),I=n(814431),T=n(555074),v=n(869156),S=n(57392),w=n(234945),A=n(173454),N=n(279702),C=n(507956),L=n(909279);n(715762),n(507662);var O=n(836283),R=n(875157),P=n(859703),D=n(761334);let k="INHERIT",M="DEFAULT",F="MIXED",x="DELETED",U="https://help.figma.com/hc/articles/15343816063383#conflicts";var B=(e=>(e[e.LEARN_MORE=0]="LEARN_MORE",e[e.REVIEW_UPDATES=1]="REVIEW_UPDATES",e))(B||{});function V(e,r){return{type:l.Z_n.ALIAS,resolvedType:e,value:r}}function G(e){if(0===e.length)return null;if(e.length>=2){for(let r=1;r<e.length;r++)if(!(0,o.c2)(e[r],e[0]))return b.oV}let r=e[0];return r?.isMixed?b.oV:r}function H(){let[e,r]=(0,T.lJ)("variableConsumptionInfo");return{variableConsumptionMap:b.E7(e)?.variableConsumptionMap||{},setVariableConsumptionMap:(0,a.useCallback)((e,n=N.zk.YES)=>{r({variableConsumptionMap:e},n)},[r])}}function W(){return(0,b.E7)((0,I.b)("variableConsumptionMap"))||{}}let K=(0,g.fv)();function Y(){let e=(0,T.kl)("variableConsumptionInfo"),r=(0,p.k9)(()=>b.E7(e)?.variableSetKeyToModeData||{},[e]),n=function(){let e=(0,T.kl)("variableConsumptionInfo");return(0,p.k9)(()=>b.E7(e)?.variableSetKeyToPageLevelPresetMode||{},[e])}(),a=function(){let e=(0,v.jI)();return(0,p.wm)(()=>{if("loaded"===e.status){let r=e.data?.items.filter(e=>e.modes&&e.modes.length>1);return m()(r,e=>e.key)}return{}},[e])}();return(0,p.wm)(()=>{for(let[e,i]of Object.entries(n))if(!r[e]&&a[e]){let n=a[e];if(!n.modes?.find(e=>e.id===i))continue;r[e]={collectionID:n.node_id,collectionName:n.name,modeOptions:n.modes?.map(e=>({modeId:{guid:e.id,collectionKey:n.key},name:e.name,isCompatible:!0}))||[],explicitMode:{guid:i,collectionKey:n.key},inheritMode:null,fileKey:K(n),libraryKey:n.library_key}}return r},[a,n,r])}let $=(0,h.kc)().ds_modes_util_include_subtree_by_default;function j({includeSubtree:e=$}={}){let r=(0,T.kl)("variableConsumptionInfo");return(0,p.k9)(()=>(e?b.E7(r)?.variableSetKeyToModeIncludingSubtree:b.E7(r)?.variableSetKeyToMode)??{},[r,e])}function z(e){let r=function(e){let r=(0,v.u)(e),n=Y(),a=(0,v.G6)(r?.variableSetId);if(!r||!a)return null;let i="LOCAL"===a.subscriptionStatus?a.keyForPublish:a.key;return n?.[i]??null}(e),n=(0,v.G6)(r?.collectionID);if(!r||!n)return null;let a=r.modeOptions,i=r.explicitMode,o=r.inheritMode,s=i??o;return"MIXED"===s?null:a.find(e=>s?e.modeId.guid===s.guid:e.modeId.guid===n.defaultModeID)??null}function q(){let e=function(){let{componentUpdatesForSelection:e,stateGroupUpdatesForSelection:r,styleUpdatesForSelection:n,variableSetUpdatesForSelection:a}=function(){let{componentUpdatesForCurrentPage:e,stateGroupUpdatesForCurrentPage:r,styleUpdatesForCurrentPage:n,variableSetUpdatesForCurrentPage:a}=(0,_.md)(S.P1),i=(0,T.kl)("directlySubscribedAssetKeys"),o=[],s=[],l=[],c=[];if(i&&!(0,b.gl)(i)){let d=new Set(i);o=e.filter(e=>d.has(e.component_key??"")),s=r.filter(e=>d.has(e.key)),l=n.filter(e=>d.has(e.key)),c=a.filter(e=>d.has(e.key))}return{componentUpdatesForSelection:o,stateGroupUpdatesForSelection:s,styleUpdatesForSelection:l,variableSetUpdatesForSelection:c}}();return e.length>0||r.length>0||n.length>0||a.length>0}(),r=(0,_.md)(S.I7),n=(0,i.d4)(e=>(0,w.$u)(e));return n&&e?1:!n&&r?1:0}function X(e,r,n){let i;let{variableConsumptionMap:o,setVariableConsumptionMap:s}=H(),d=(0,I.b)("guid"),u=W(),m=(0,I.b)("responsiveTextStyleVariants"),p=m&&!(0,b.gl)(m)&&void 0!==n?m[n]:void 0,h=r&&(0,b.hS)(d)&&c.aI(r,d);return{consumedVariable:(i=h&&p?(0,b.E7)(p.variableConsumptionMap)||{}:h?u:o)&&G(e.map(e=>i[e])),updateVariableConsumption:(0,a.useCallback)(r=>{let n={};e.forEach(e=>{n[e]=r,(0,D.oz)(e,r)}),(0,L.f)(l.VD3.VARIABLE_ATTACH,l.e0R.DIRECT,()=>{s(n)})},[s,e]),clearVariableConsumption:(0,a.useCallback)((r=N.zk.YES)=>{let n={};e.forEach(e=>{n[e]=null}),(0,L.f)(l.VD3.VARIABLE_DETACH,l.e0R.DIRECT,()=>{s(n,r)})},[s,e])}}function J(e,r,n,a){return Q(e,function(e,r){if(!(void 0===e||0===e&&!r||(0,b.gl)(e)))return{type:l.Z_n.FLOAT,resolvedType:l.rXF.FLOAT,value:e}}(r,a),n)}function Z(e,r,n){return Q(e,function(e){if(e)return{type:l.Z_n.STRING,resolvedType:l.rXF.STRING,value:e}}(r),n)}function Q(e,r,n){let a=(0,E.uQ)(),i=(0,y.Q)(),o=(0,C.ks)(),s=(0,f.v4)(),{variableConsumptionMap:c}=H(),d=n||c,u=function(e){if(e&&(0,b.hS)(e)){if(e.type===l.Z_n.EXPRESSION&&1===e.value.expressionArguments.length){let r=e.value.expressionArguments[0];if(r.type===l.Z_n.ALIAS)return r.value}if(e.type===l.Z_n.FONT_STYLE){let r=e.value.asString??e.value.asFloat;if(r?.type===l.Z_n.ALIAS)return r.value}if(e.type===l.Z_n.ALIAS)return e.value}}(d&&G([e].map(e=>d[e]))||null),m=R.ZM[e]??l.j0r.ALL_SCOPES,p=!u&&o&&a&&r,_=!!(0,h.kc)().dt_suggested_variables_validation&&!!(0,h.kc)().dt_inferred_vars_modal,g=p?l.w3z.getIdsOfVariablesWithValue(a,[m],{type:r.type,value:r.value},_):[],I=!p||1!==g.length||(0,h.kc)().dt_inferred_vars_modal?void 0:g[0],T=(0,v.u)(u??I);if(!T)return g.length>0&&r?{matchingVars:{ids:g,rawValue:r}}:{};let S=(0,f.xv)(T,s.id),w=o&&"code"===i.inspectionMode&&S?S:T?.name;return{variable:T,variableDisplayName:w,isSuggested:!u}}function ee(e,r,n,a,i){let o=function(e,r){let n=function(e,r){let n=e.variableScope?new Set([e.variableScope]):void 0,{boundVar:a,matchingVars:i}=function(e,r,n){if(!e)return{};let{colorVar:a,color:i,opacity:o}=r;if(a?.value?.alias)return{boundVar:d.dI(a.value.alias)};if(!i||!n)return{};let s=!!(0,h.kc)().dt_suggested_variables_validation&&!!(0,h.kc)().dt_inferred_vars_modal,c=(0,v.iC)(e,Array.from(n),{type:l.Z_n.COLOR,resolvedType:l.rXF.COLOR,value:{...i,a:i.a*(o??1)}},s);return c?{matchingVars:{ids:c,rawValue:{type:l.Z_n.COLOR,value:{...i,a:i.a*(o??1)}}}}:{}}(r,e.paint,n),o=a??(i?.ids.length===1?i.ids[0]:void 0);return{variableId:o,isSuggested:!a&&!!o,matchingVars:i}}(e,r);if(!n.variableId)return{variable:null,variableData:n};let a=_.zl.get((0,P.Ev)(n.variableId));if(a)return{variable:a,variableData:n};let i=l.CWU.getSubscribedVariableInfo(n.variableId);return i?{variable:(0,A.ZI)(i),variableData:n}:{variable:null,variableData:n}}(e,r),s=function(e,r,n,a,i){if(r.isSuggested&&!a)return{variable:null};let o=(0,f.xv)(e,n),s=a&&"code"===i&&o?o:e?.name;return{variable:e,variableDisplayName:s,isSuggested:r.isSuggested,matchingVars:a?r.matchingVars:void 0}}(o.variable,o.variableData,n,a,i);return{...e,variable:s}}function et(e,r,n,a,i){return e.map(e=>e.type===O.q.STYLE?function(e,r,n,a,i){let o=e.paints.map(e=>ee(e,r,n,a,i));return{...e,paints:o}}(e,r,a.id,i,n):ee(e,r,a.id,i,n))}function er(e){return(0,i.d4)(r=>{let n=b.E7(r.mirror.selectionProperties.variableConsumptionInfo)?.variableNotMatchingSetValue||{},a=e.map(e=>{let r=n[e]??void 0;return(0,s.UU)(r)&&"isMixed"in r?b.oV:r});return 0===a.length?void 0:1===a.length?a[0]:a.every(e=>(0,o.c2)(e,a[0]))?a[0]:b.oV})}},983092:(e,r,n)=>{n.r(r),n.d(r,{CreateVariableForm:()=>$,CreateVariableFormInput:()=>j,VariableCreateModalRoot_UNSAFE:()=>B,VariableFormRow:()=>W,useDetachedVariableValue:()=>H,useHandleVariableSelected:()=>Y,useHideContextMenu:()=>K,useVariableCreateModalActions:()=>V});var a=n(411855),i=n(188507),o=n(67151),s=n(432258),l=n(463033),c=n(299321),d=n(275556),u=n(89865),m=n.n(u),p=n(91408),h=n(320063),_=n(153234),g=n(776621),f=n(286640),E=n(452441),y=n(939863),b=n(175290),I=n(632430),T=n(869156),v=n(318812),S=n(173454),w=n(498606),A=n(7959),N=n(538697),C=n(761334),L=n(746806),O=n(243008),R=n(282263),P=n(564092),D=n(15270),k=n(720531),M=n(837746),F=n(476066),x=n(424148);let U=2*(0,p.jz)(M.dGl);function B({initialPosition:e,initialValue:r,initialWidth:n,resolvedType:i,onCreateVariable:o,onClose:s}){(0,C.NF)({resolvedType:i});let{onCreateVariableSubmit:l}=V({onCreateVariable:o,onClose:s});return a.createElement(G,{initialPosition:e,initialValue:r,initialWidth:n,resolvedType:i,onCreateVariableSubmit:l,onClose:s,recordingKey:"createVariableModal"})}function V({onCreateVariable:e,onClose:r}){return{onCreateVariableSubmit:function({varSetID:n,varName:a,varValue:i}){if(!c.CWU.isValidVariableName(a,n)){(0,g.x1)("variables","Attempted to submit variable name that is invalid",{varName:a,_varSetID:n});return}d.l7.user("create-variable",()=>{let r=n??c.CWU.createVariableSet((0,y.t)("variables.variable_collection"),c.G6k.AUTOMATIC_FIRST_COLLECTION),s=c.CWU.createVariable(a,r,i,c.HS4.VARIABLE_PICKER),l=c.CWU.getLocalVariableInfo(s);(0,o.B1)(l,`variable with id ${s} not found`),e((0,S.kz)(l))}),r()}}}function G({initialPosition:e,initialValue:r,initialWidth:n,resolvedType:i,recordingKey:o,onCreateVariableSubmit:s,onClose:l}){return a.createElement(L.vx,{title:a.createElement("div",{className:F.h$},(0,y.tx)("variables.create_modal.title")),initialPosition:e,initialWidth:n,onClose:l},a.createElement($,{resolvedType:i,initialValue:r,recordingKey:_.Pt(o,"createVariableForm"),onSubmit:s}))}function H(e){let r=(0,T.BQ)(e.type===c.Z_n.ALIAS?e.value:void 0);return(0,s.Vq)(r)&&"MIXED"!==r?r:null}function W({label:e,input:r}){return a.createElement(b.Y,{spacing:0,horizontalAlignItems:"space-between",height:"hug-contents",padding:{horizontal:U}},a.createElement(A.JU,null,e),r)}function K(e){(0,a.useEffect)(()=>{let r=e.current;if(!r)return;let n=e=>e.preventDefault();return r.addEventListener("contextmenu",n),()=>{r.removeEventListener("contextmenu",n)}},[e])}function Y(e,r,n){let o=(0,i.wA)();return(0,a.useCallback)(async a=>{if(a){let e=await o((0,I.Oe)(a));n((0,P.y$)(r,e))}else e.type===c.Z_n.ALIAS&&n((0,D.WI)(r))},[o,e,r,n])}function $({resolvedType:e,initialValue:r,recordingKey:n,onSubmit:i}){let o=(0,a.useRef)(null);K(o);let[s,d]=(0,a.useState)({varName:"",varValue:r??(0,D.WI)(e),varSetID:null}),u=a.useMemo(()=>c.CWU.isValidVariableName(s.varName??"",s.varSetID??null),[s]),m=_.of(n,"submit",()=>{u&&i({varName:s.varName,varValue:s.varValue,varSetID:s.varSetID??null})});return a.createElement("form",{onSubmit:m,autoComplete:"no"},a.createElement(b.Y,{direction:"vertical",spacing:0,height:"hug-contents",ref:o},a.createElement(b.Y,{direction:"vertical",spacing:`${(0,p.jz)(M.dGl)}px`,padding:{top:U},height:"hug-contents"},a.createElement(j,{recordingKey:n??"",initialVarValue:r,resolvedType:e,setVariableFormSubmitData:d,variableFormSubmitData:s}))),a.createElement(b.Y,{horizontalAlignItems:"end",verticalAlignItems:"center",padding:16},a.createElement(l.$n,{type:"submit",disabled:!u,recordingKey:_.Pt(n,"createButton"),htmlAttributes:{"data-tooltip":(0,y.t)("variables.create_modal.invalid_variable_name"),"data-tooltip-type":u?void 0:w.Ib.TEXT}},(0,y.tx)("variables.create_modal.create_button"))))}function j({recordingKey:e,initialVarValue:r,resolvedType:n,setVariableFormSubmitData:i,variableFormSubmitData:o}){let s=(0,T.yp)();n===c.rXF.TEXT_DATA&&(n=c.rXF.STRING);let[l,d]=(0,f.Vc)("last-used-variable-set-bottoms-up",s.length>0?s[0].node_id:null),u=(0,a.useMemo)(()=>{let e=s.find(e=>e.node_id===l);return!e&&s.length>0?s[0]:e},[s,l]),m=(0,T.rW)(u?.node_id??null),p=(0,a.useRef)(null);function g(e,r,n){i({varName:e,varValue:r,varSetID:n})}function b(e){g(o.varName,e,o.varSetID)}(0,h.h)(()=>{p.current?.select(),g((0,D.Wc)(m,n),r??(0,D.WI)(n),u?.node_id??null)});let I=H(o.varValue),v=Y(o.varValue,n,b);return a.createElement(a.Fragment,null,s.length>0&&!!u&&a.createElement(W,{label:(0,y.tx)("variables.create_modal.collection_label"),input:a.createElement("div",{className:F.hF},a.createElement(z,{selectedVariableSetID:u.node_id,variableSets:s,onChange:e=>{d(e),g(o.varName,o.varValue,e)}}))}),a.createElement(W,{label:(0,y.tx)("variables.create_modal.name_label"),input:a.createElement(E.L,{className:F._Z,name:"variableName",value:o.varName,onChange:e=>{g(e.target.value,o.varValue,o.varSetID)},ref:p,recordingKey:_.Pt(e,"variableNameInput"),delay:50,"data-1p-ignore":!0,autoFocus:!0})}),a.createElement(W,{label:(0,y.tx)("variables.create_modal.value_label"),input:a.createElement("div",{className:F.hF},a.createElement(R.Cr,{resolvedType:n,variableValue:o.varValue,onVariableValueChange:e=>b(e),onVariableSelected:v},a.createElement(k.gJ,{variableValue:o.varValue,contextType:O.$.FORM,onChange:e=>b(e),recordingKey:_.Pt(e,"variableValueInput")}),I&&a.createElement(A.K0,{svg:x.A,type:"button","data-tooltip-type":w.Ib.TEXT,"data-tooltip":(0,y.t)("variables.authoring_modal.table.detach_alias"),onClick:()=>b(I),recordingKey:_.Pt(e,"detachVariableButton")})))}))}function z({selectedVariableSetID:e,variableSets:r,onChange:n}){let o=(0,i.wA)(),s=(0,v.Um)(),l=(0,a.useMemo)(()=>m()(r,e=>e.node_id),[r]);return a.createElement(N.l6,{id:"variable-create-modal-variable-set-select",property:l[e],formatter:{format:e=>e?.name??""},dispatch:o,chevronClassName:F.mL,inputClassName:F.NI,dropdownShown:s,onChange:e=>n(e.node_id)},r.map(function(e){return a.createElement(N.c$,{key:e.node_id,value:e})}))}},533573:(e,r,n)=>{n.d(r,{Hr:()=>b,Io:()=>_,MH:()=>function e(r){let n=(0,u.E7)(r);if(n){if("dataType"in n&&"ALIAS"===n.dataType&&n.value?.alias)return s.dI(n.value?.alias);if("type"in n){if(n.type===o.Z_n.ALIAS)return n.value;if(n.type===o.Z_n.FONT_STYLE)return e(n.value.asFloat??n.value.asString??null);if(n?.type===o.Z_n.EXPRESSION&&n.value.expressionFunction===o.JTp.STRINGIFY&&1===n.value.expressionArguments.length)return e(n.value.expressionArguments[0])}}return null},NX:()=>f,Oi:()=>m,WB:()=>E,eF:()=>h,gQ:()=>g,iw:()=>y,rY:()=>p});var a=n(67151),i=n(171812),o=n(299321),s=n(378195),l=n(568214),c=n(939863),d=n(775664),u=n(848661);function m(e){if("MIXED"===e)return(0,c.t)("fullscreen.mixed");if(!e)return null;switch(e.resolvedType){case o.rXF.FLOAT:return String(parseFloat(e.value.toFixed(2)));case o.rXF.BOOLEAN:return e.value?(0,c.t)("variables.values.boolean.true"):(0,c.t)("variables.values.boolean.false");case o.rXF.COLOR:return d.TI.format(e.value);case o.rXF.STRING:return e.value;default:return JSON.stringify(e.value)}}function p(e,r){if(e===r)return!0;if(!e||!e.dataType||!e.resolvedDataType||!e.value||!r||!r.dataType||!r.resolvedDataType||!r.value||e.dataType!==r.dataType||e.resolvedDataType!==r.resolvedDataType)return!1;switch(e.dataType){case"BOOLEAN":return e.value.boolValue===r.value.boolValue;case"FLOAT":return e.value.floatValue===r.value.floatValue;case"STRING":return e.value.textValue===r.value.textValue;case"COLOR":return(0,a.B1)(e.value.colorValue),(0,a.B1)(r.value.colorValue),(0,l.YU)(e.value.colorValue)===(0,l.YU)(r.value.colorValue);default:return(0,i.c2)(e,r)}}function h(e){return"LOCAL"===e.subscriptionStatus&&e.isSoftDeleted}let _={CORNER_RADIUS:[o.rXF.FLOAT],STACK_SPACING:[o.rXF.FLOAT],STACK_PADDING_LEFT:[o.rXF.FLOAT],STACK_PADDING_TOP:[o.rXF.FLOAT],STACK_PADDING_RIGHT:[o.rXF.FLOAT],STACK_PADDING_BOTTOM:[o.rXF.FLOAT],TEXT_DATA:[o.rXF.STRING,o.rXF.FLOAT],WIDTH:[o.rXF.FLOAT],HEIGHT:[o.rXF.FLOAT],RECTANGLE_TOP_LEFT_CORNER_RADIUS:[o.rXF.FLOAT],RECTANGLE_TOP_RIGHT_CORNER_RADIUS:[o.rXF.FLOAT],RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS:[o.rXF.FLOAT],RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS:[o.rXF.FLOAT],STACK_COUNTER_SPACING:[o.rXF.FLOAT],MIN_WIDTH:[o.rXF.FLOAT],MAX_WIDTH:[o.rXF.FLOAT],MIN_HEIGHT:[o.rXF.FLOAT],MAX_HEIGHT:[o.rXF.FLOAT],STROKE_WEIGHT:[o.rXF.FLOAT],OPACITY:[o.rXF.FLOAT],BORDER_TOP_WEIGHT:[o.rXF.FLOAT],BORDER_BOTTOM_WEIGHT:[o.rXF.FLOAT],BORDER_LEFT_WEIGHT:[o.rXF.FLOAT],BORDER_RIGHT_WEIGHT:[o.rXF.FLOAT],MISSING:[],PARAGRAPH_SPACING:[o.rXF.FLOAT],PARAGRAPH_INDENT:[o.rXF.FLOAT],VISIBLE:[o.rXF.BOOLEAN],VARIANT_PROPERTIES:[o.rXF.SYMBOL_ID],FONT_FAMILY:[o.rXF.STRING],FONT_STYLE:[o.rXF.STRING,o.rXF.FLOAT],FONT_VARIATIONS:[o.rXF.FLOAT],FONT_SIZE:[o.rXF.FLOAT],LETTER_SPACING:[o.rXF.FLOAT],LINE_HEIGHT:[o.rXF.FLOAT]};function g(e){return!!e.variable}function f({variable:e,variableDisplayName:r}){return e?e.codeSyntax?.[o.y0x.WEB]?e.codeSyntax[o.y0x.WEB]:`var(--${(r??e.name).replace(/[^a-zA-Z0-9-]/g,"")})`:""}function E(e){switch(e){case o.rXF.BOOLEAN:return o.J0O.BOOL;case o.rXF.FLOAT:return o.J0O.NUMBER;case o.rXF.STRING:case o.rXF.TEXT_DATA:return o.J0O.TEXT;default:throw Error(`Unknown resolved type: ${e}`)}}function y(e){return[...e].sort((e,r)=>e.name!==r.name?e.name.localeCompare(r.name):e.node_id<r.node_id?-1:1)}function b(e){switch(e){case o.rXF.BOOLEAN:return"boolean";case o.rXF.FLOAT:return"number";case o.rXF.STRING:return"string";case o.rXF.COLOR:return"color";case o.rXF.MAP:return"map";case o.rXF.SYMBOL_ID:return"symbol_id";case o.rXF.FONT_STYLE:return"font_style";case o.rXF.TEXT_DATA:return"text_data"}}},682789:(e,r,n)=>{n.d(r,{Y:()=>i});var a=n(38580);let i=(0,a.eU)({type:"ALL_LIBRARIES"});(0,a.eU)({type:"LOCAL_VARIABLES"})},939143:(e,r,n)=>{n.d(r,{$3:()=>ef,Rp:()=>el,Zd:()=>eS});var a=n(411855),i=n(188507),o=n(67151),s=n(432258),l=n(299321),c=n(932345),d=n(629019),u=n.n(d),m=n(939683),p=n(320063),h=n(358145),_=n(966712),g=n(498750),f=n(255942),E=n(527735),y=n(153234),b=n(173748),I=n(192437),T=n(723325),v=n(493323),S=n(163023),w=n(939863),A=n(378905),N=n(696673),C=n(788744),L=n(756317),O=n(680681),R=n(221173),P=n(957987),D=n(869156),k=n(318812),M=n(29680),F=n(335682),x=n(694687),U=n(643067),B=n(173454),V=n(878319),G=n(498606),H=n(7959),W=n(538697),K=n(110382),Y=n(181075),$=n(512596),j=n(104950),z=n(52512),q=n(503795),X=n(90211),J=n(726188),Z=n(761334),Q=n(452883),ee=n(564092),et=n(875157),er=n(375673),en=n(280999),ea=n(731719),ei=n(703475);function eo({resolvedType:e,requestedTypes:r}){return r||(e?[e]:null)}function es(e,r,n,i){return a.createElement("div",{className:er.p$,style:{height:(0,q.Ih)({layout:r})}},e.length>0?(0,w.t)("variables.binding_ui.no_search_results"):i===l.rXF.COLOR?(0,w.t)("variables.binding_ui.no_colors_empty_state"):(0,_.kc)().ds_variable_props_unified_ui&&n?(0,w.t)("variables.binding_ui.no_variables_props_empty_state"):(0,w.t)("variables.binding_ui.no_variables_empty_state"))}function el({selectedItem:e,resolvedType:r,requestedTypes:n,variableFilters:i,pickerType:s,disabledVariableIds:l,setControlRightButtons:c,variableScopes:d,recordingKey:u,onVariableSelected:m,onStyleSelected:p,onComponentPropSelected:h,onClose:_,keepOpenOnItemSelect:g}){let{currentView:f,setCurrentView:E,toggleLayout:y}=(0,j.R)({selectedItem:e,resolvedType:r}),b=function(e){switch(e.type){case"ALL_LIBRARIES":return em;case"LOCAL_VARIABLES":return eu;case"SUBSCRIBED_VARIABLES":return ec;default:(0,o.xb)(e,"Unhandled view for picker body")}}(f),T=(0,a.useMemo)(()=>eo({requestedTypes:n,resolvedType:r??null}),[n,r]),[v,S]=(0,a.useState)("");return a.createElement(I.tH,{boundaryKey:"VariablePicker",fallback:es(v,f.layout,!!h,r)},a.createElement(b,{selectedItem:e,currentView:f,setCurrentView:E,toggleLayout:y,resolvedType:r,disabledVariableIds:l,pickerType:s,setControlRightButtons:c,recordingKey:u,onVariableSelected:m,onStyleSelected:p,onComponentPropSelected:h,onClose:_,keepOpenOnItemSelect:g,requestedTypes:n,searchQuery:v,onSearchInputChange:S,variableScopes:d,variableFilters:i}),a.createElement($.M,{resolvedTypes:T,selectedItem:e}))}function ec({selectedItem:e,currentView:r,setCurrentView:n,toggleLayout:i,resolvedType:o,pickerType:s,setControlRightButtons:c,recordingKey:d,onVariableSelected:u,onStyleSelected:m,onClose:p,requestedTypes:h,searchQuery:_,onSearchInputChange:g,variableScopes:f,variableFilters:E}){let y=r.fileKey,b=(0,D.kf)(y),I=(0,D.u5)(y),T=e?.type===B.PW.VARIABLE?e:null,v=(0,D.G6)(T?.variableSetId||""),S="loading"===I.status||"loading"===b.status,[w,N]=(0,a.useMemo)(()=>{let e=b.data??[],r=I.data??[];return T?.subscriptionStatus==="SUBSCRIBED"&&(0,A.TK)(T,y)&&!e.find(e=>e.key===T?.key)&&v?[[...e,T],[...r,v]]:[e,r]},[y,b,I,T,v]);return o===l.rXF.COLOR&&"color-picker"===s&&m?a.createElement(ed,{fileKey:y,selectedStyle:e?.type===B.PW.STYLE?e:null,render:({isLoading:l,dsStyles:y})=>a.createElement(eg,{variables:w,variableSets:N,dsStyles:y,currentView:r,setCurrentView:n,toggleLayout:i,selectedItem:e,disabledVariableIds:new Set,resolvedType:o,pickerType:s,setControlRightButtons:c,recordingKey:d,isLoading:l||S,onVariableSelected:u,onStyleSelected:m,onClose:p,requestedTypes:h,searchQuery:_,onSearchInputChange:g,variableScopes:f,variableFilters:E})}):a.createElement(eg,{variables:w,variableSets:N,dsStyles:[],currentView:r,setCurrentView:n,toggleLayout:i,selectedItem:e,disabledVariableIds:new Set,resolvedType:o,pickerType:s,setControlRightButtons:c,recordingKey:d,onVariableSelected:u,onClose:p,requestedTypes:h,searchQuery:_,onSearchInputChange:g,variableScopes:f})}function ed({fileKey:e,selectedStyle:r,render:n}){let i=(0,K.AH)(r?.key||null,r),{status:o,stylesByFileKey:s}=(0,K.Zk)({styleType:c.s4.FILL,initialSelectedSubscribedStyle:i}),l=s[e]?.styles??[];return a.createElement(Y.m,null,n({isLoading:"loaded"!==o,dsStyles:l}))}function eu({selectedItem:e,disabledVariableIds:r,currentView:n,setCurrentView:i,toggleLayout:o,resolvedType:s,pickerType:d,setControlRightButtons:u,recordingKey:m,onVariableSelected:p,onStyleSelected:h,onClose:_,requestedTypes:g,searchQuery:f,onSearchInputChange:E,variableScopes:y,variableFilters:b,onComponentPropSelected:I}){let T=(0,D.Rb)(),v=(0,D.yp)();return s===l.rXF.COLOR&&"color-picker"===d&&h?a.createElement(ep,{styleType:c.s4.FILL,render:l=>a.createElement(eg,{variables:T,variableSets:v,dsStyles:l,currentView:n,setCurrentView:i,toggleLayout:o,selectedItem:e,disabledVariableIds:r,resolvedType:s,pickerType:d,setControlRightButtons:u,recordingKey:m,onVariableSelected:p,onStyleSelected:h,onClose:_,requestedTypes:g,searchQuery:f,onSearchInputChange:E,variableScopes:y,variableFilters:b})}):I?a.createElement(eh,{render:l=>a.createElement(eg,{variables:T,variableSets:v,dsStyles:[],currentView:n,setCurrentView:i,toggleLayout:o,selectedItem:e,disabledVariableIds:r,resolvedType:s,pickerType:d,setControlRightButtons:u,recordingKey:m,onVariableSelected:p,onClose:_,requestedTypes:g,searchQuery:f,onSearchInputChange:E,variableScopes:y,variableFilters:b,onComponentPropSelected:I,componentProps:l}),pickerType:d,requestedTypes:g,resolvedType:s}):a.createElement(eg,{variables:T,variableSets:v,dsStyles:[],currentView:n,setCurrentView:i,toggleLayout:o,selectedItem:e,disabledVariableIds:r,resolvedType:s,pickerType:d,setControlRightButtons:u,recordingKey:m,onVariableSelected:p,onClose:_,requestedTypes:g,searchQuery:f,onSearchInputChange:E,variableScopes:y,variableFilters:b})}function em({selectedItem:e,disabledVariableIds:r,currentView:n,setCurrentView:i,toggleLayout:o,resolvedType:s,pickerType:d,setControlRightButtons:u,recordingKey:m,onVariableSelected:p,onStyleSelected:h,onComponentPropSelected:_,onClose:g,keepOpenOnItemSelect:f,requestedTypes:E,searchQuery:y,onSearchInputChange:b,variableScopes:I,variableFilters:T}){let v=(0,D.Rb)(),S=(0,D.yp)(),w=(0,D.pN)(),A="loaded"!==w.status,N=w.data?.libraryVariables,C=w.data?.libraryVariableSets,L=(0,a.useMemo)(()=>[...v,...N??[]],[v,N]),O=(0,a.useMemo)(()=>[...S,...C??[]],[S,C]);return s===l.rXF.COLOR&&"color-picker"===d&&h?a.createElement(e_,{styleType:c.s4.FILL,selectedStyle:e?.type===B.PW.STYLE?e:null,render:({dsStyles:l,isLoading:c})=>a.createElement(eg,{variables:L,variableSets:O,dsStyles:l,isLoading:c||A,currentView:n,setCurrentView:i,toggleLayout:o,selectedItem:e,disabledVariableIds:r,resolvedType:s,pickerType:d,setControlRightButtons:u,recordingKey:m,onVariableSelected:p,onStyleSelected:h,onClose:g,keepOpenOnItemSelect:f,requestedTypes:E,searchQuery:y,onSearchInputChange:b,variableScopes:I,variableFilters:T})}):_?a.createElement(eh,{render:l=>a.createElement(eg,{variables:L,variableSets:O,dsStyles:[],isLoading:A,currentView:n,setCurrentView:i,toggleLayout:o,selectedItem:e,disabledVariableIds:r,resolvedType:s,pickerType:d,setControlRightButtons:u,recordingKey:m,onVariableSelected:p,onClose:g,requestedTypes:E,searchQuery:y,onSearchInputChange:b,variableScopes:I,variableFilters:T,onComponentPropSelected:_,componentProps:l}),pickerType:d,requestedTypes:E,resolvedType:s}):a.createElement(eg,{variables:L,variableSets:O,dsStyles:[],isLoading:A,currentView:n,setCurrentView:i,toggleLayout:o,selectedItem:e,disabledVariableIds:r,resolvedType:s,pickerType:d,setControlRightButtons:u,recordingKey:m,onVariableSelected:p,onClose:g,requestedTypes:E,searchQuery:y,onSearchInputChange:b,variableScopes:I,variableFilters:T})}function ep({styleType:e,render:r}){return r((0,K.Je)(e))}function eh({render:e,pickerType:r,requestedTypes:n,resolvedType:i}){return e(a.useCallback(()=>{let e=(()=>{switch(r){case"set-variable":return(0,_.kc)().ds_variable_props_proto?l.CWU.getComponentPropsForSetVariableList():[];case"prop-assignment":return(0,_.kc)().ds_variable_props_binding_props?l.CWU.getComponentPropsForPropAssignmentList():[];default:return(0,_.kc)().ds_variable_props_unified_ui?l.CWU.getComponentPropsForFieldsList():[]}})(),a=[];return e&&Object.keys(e).length>0&&e.forEach(e=>{a.push(...(0,q.LV)(e.values,n,i))}),a},[r,n,i])())}function e_({styleType:e,selectedStyle:r,render:n}){let i=(0,K.Je)(e),o=(0,K.AH)(r?.key||null,r),{status:s,stylesByFileKey:l}=(0,K.Zk)({styleType:c.s4.FILL,initialSelectedSubscribedStyle:o}),d=(0,a.useMemo)(()=>Object.values(l).reduce((e,{styles:r})=>(e.push(...r),e),[]),[l]),u=(0,a.useMemo)(()=>i.concat(d),[i,d]);return a.createElement(Y.m,null,n({isLoading:"loaded"!==s,dsStyles:u}))}function eg({variables:e,variableSets:r,dsStyles:n,currentView:i,setCurrentView:o,toggleLayout:s,selectedItem:c,disabledVariableIds:d,resolvedType:m,pickerType:p,setControlRightButtons:_,recordingKey:f,isLoading:E,onVariableSelected:b,onStyleSelected:I,onClose:S,keepOpenOnItemSelect:A,requestedTypes:N,searchQuery:L,onSearchInputChange:R,variableScopes:P,variableFilters:M,onComponentPropSelected:G,componentProps:W}){(0,Z.D)({isLoading:E??!1,eventName:"variables.variable_picker_load_time"});let K=(0,F.tS)(),Y=(0,k.Um)(),j=c?(0,q.UT)(c):null,en=(0,D.u)(c&&c.type===B.PW.VARIABLE?c.node_id:void 0),ea=(0,D.G6)(en?.variableSetId),[ei,el]=a.useState(null);a.useRef(null).current=ei;let ec=a.useRef(null),ed=function(e){let r=(0,ee.Px)({includeSubtree:!0});return a.useMemo(()=>e.some(e=>"MIXED"===("LOCAL"===e.subscriptionStatus?r[e.keyForPublish]:r[e.key])),[e,r])}(r),eu=0===L.length,em=L.length>0||ed?"list":i.layout,ep=(0,Q.$)(),eh=(0,a.useCallback)(()=>{ec.current&&ec.current.focus(),s()},[s]),e_=(0,a.useMemo)(()=>eo({requestedTypes:N,resolvedType:m??null}),[N,m]),eg=I?[B.ub.VARIABLE,B.ub.STYLE]:[B.ub.VARIABLE],ef=(0,$.A)(e_,c,eg),ey=(0,x.sZ)(),eb=(0,C.Sd)(),eI=(0,C.Fl)(),eT=(0,U.Oe)(ey)&&(0,O.NX)(eb),ev=(0,a.useMemo)(()=>{if(eT){let e=ef.map(({fileKey:e,fileName:r})=>({key:e,name:r}));return(0,O.k9)({libraries:e,approvedLibraryFileKeysByResourceType:eb,approvedLibraryKeysByResourceType:eI}),e.map(({key:e,name:r})=>({fileKey:e,fileName:r}))}return ef.sort((e,r)=>e.fileName.localeCompare(r.fileName))},[ef,eT,eb,eI]),ew=(0,a.useMemo)(()=>{let e={};return(eT?ev:ef).forEach(r=>{e[r.fileKey]=r.fileName}),e},[ef,ev,eT]),eA=(0,a.useMemo)(()=>N?e.filter(e=>N.includes(e.resolvedType)):e.filter(e=>void 0===m||e.resolvedType===m),[e,m,N]);var eN=en&&!eA.find(e=>(0,q.UT)(e)===j);let eC=(0,a.useMemo)(()=>P?eA.filter(e=>(0,q.UT)(e)===j||(0,et.AQ)(e,P)):eA,[eA,P,j]),eL=(0,X.qF)(eC,L),eO=(0,a.useMemo)(()=>L.length>0?eL:eL.filter(e=>{let r=e.resolvedType,n=M?.[V.t.HIDE_IN_DEFAULT_VIEW];if(n&&n[r])return!1;let a=M?.[V.t.MUST_INCLUDE_ONE_OF];if(a&&a[r]?.length){let n=a[r];if("LIBRARY"===e.subscriptionStatus||n&&!Object.values(e.modeValues).some(e=>{if(e.type===l.Z_n.STRING){let r=e.value.trim().toLocaleLowerCase();return n?.some(e=>e===r)}return!1}))return!1}return!0}),[eL,L,M]),eR=(0,X.bT)(n,L),eP=(0,X.tZ)(W??[],L),eD=(0,a.useMemo)(()=>{if("ALL_LIBRARIES"===i.type)return(0,q.dC)({variables:eO,variableSets:r,styles:eR,componentProps:eP,layout:em,fileNamesByKey:ew,openFileKey:K,slideThemeId:ep});if(m===l.rXF.COLOR)return(0,q.w$)({variables:eO,variableSets:r,styles:eR,layout:em,isLocal:"LOCAL_VARIABLES"===i.type,slideThemeId:ep});{let e=(0,q.HK)({variables:eO,variableSets:r,layout:em});if(!G)return e;let n=(0,q.dh)({componentProps:eP});return n.length>0&&e.length>0&&n.push({type:q.Yc.SECTION_HEADER,name:(0,w.t)("variables.binding_ui.set_labels.variables_created_in_file")}),n.concat(e)}},[i.type,m,eO,r,eR,eP,em,ew,K,G,ep]);var ek=!1;eN&&ea&&(eD.unshift({type:q.Yc.VARIABLES,items:[en],variableSet:ea}),ek=!0);let eM=a.useRef([]);eM.current=eD;let eF=a.useRef(null),ex=(0,a.useCallback)(()=>{eF.current?.scrollToTop();let e=function(e){let r=null;for(let n of e)if("items"in n){r=n.items[0];break}return r}(eM.current);el(e?(0,q.UT)(e):null)},[]),eU=(0,a.useCallback)((e,r)=>{let n=(0,q.oM)(eM.current,e);n>=0&&eF.current?.scrollToIndex(n,r),el(e)},[]),eB=(0,h.ZC)(L);(0,a.useLayoutEffect)(()=>{!E&&eB!==L&&(L.length>0||!j?ex():L||eU(j,{align:"center"}))},[L,E,ex,eU,j,eB]);let{showStyleContextMenu:eV,hideStyleContextMenu:eG}=(0,J.XM)(),eH=(0,a.useCallback)((e,r)=>{e.type===B.PW.STYLE&&eV({dsStyle:e,position:r})},[eV]),eW=(0,a.useCallback)(e=>{el((0,q.UT)(e))},[el]),eK=(0,a.useCallback)(e=>{ei===(0,q.UT)(e)&&el(null)},[ei,el]),eY=(0,a.useCallback)(e=>{e.type===B.PW.VARIABLE?b(e):e.type===B.PW.STYLE?I?.(e,{fromSearch:L.length>0}):"COMPONENT_PROP"===e.type&&G?.(e),A||S()},[A,b,I,L.length,G,S]),e$=(0,a.useCallback)(e=>{R(e.currentTarget.value)},[R]),ej=(0,a.useCallback)(r=>{if(r.keyCode===g.Uz.ENTER){let r=function({highlightedItemID:e,variables:r,dsStyles:n,componentProps:a}){return e?[...r,...n,...a].find(r=>(0,q.UT)(r)===e)??null:null}({variables:e,dsStyles:n,componentProps:eP,highlightedItemID:ei});r?eY(r):c&&b(),S()}else r.keyCode===g.Uz.ESCAPE?S():((0,T.Nt)(r,!1)||(0,T.c2)(r,!1)||(0,T.yn)(r.code,!1)||(0,T.lv)(r.code,!1))&&(ei?(eF.current?.getVirtualItems()??[]).some(e=>{let r=eM.current[e.index];return"items"in r&&r.items.some(e=>(0,q.UT)(e)===ei)})||eU(ei,{align:"center"}):j?eU(j,{align:"center"}):ex())},[e,n,eP,ei,S,eY,c,b,j,eU,ex]),ez=(0,a.useMemo)(()=>({...i,layout:em}),[i,em]);return a.createElement(T.dP,{recordingKey:f,onClick:eG},a.createElement("div",{className:er.PP},a.createElement(eE,{inputRef:ec,value:L,onChange:e$,onKeyDown:ej,recordingKey:y.Pt(f,"input")})),a.createElement(eS,{recordingKey:f,currentView:ez,resolvedType:m,subscribedLibraries:ev,setControlRightButtons:_,onSetSelect:o,onToggleLayoutIconClick:eu?eh:void 0,disableGridLayout:ed?0:void 0}),a.createElement(H.Id,{className:u()({[er.eB]:m!==l.rXF.COLOR,[er.a2]:!0})},E?a.createElement("div",{className:er.S,style:{height:(0,q.Ih)({layout:em})}},a.createElement(v.kt,null)):0!==eR.length||0!==eO.length||0!==eP.length||ek?"list"===em?a.createElement(z.HZ,{ref:eF,className:er.jG,listItems:eD,selectedItemID:j,disabledVariableIds:d,highlightedItemID:ei,pickerType:p,recordingKey:f,onItemHighlight:eW,onItemSelect:eY,onItemContextMenu:eH,onItemMouseLeave:eK}):a.createElement(z.Rm,{ref:eF,className:er.jG,listItems:eD,selectedItemID:j,highlightedItemID:ei,recordingKey:f,onItemHighlight:eW,onItemSelect:eY,onItemContextMenu:eH,onItemMouseLeave:eK}):es(L,em,!!G,m)),Y?.type===J.A7&&a.createElement(J.ip,{dsStyle:Y.data.dsStyle,position:Y.data.position,recordingKey:y.Pt(f,"contextMenu")}))}function ef({recordingKey:e,onClose:r}){let n=y.rf(e,"mousedown",a.useCallback(e=>{r(),e.stopPropagation()},[r]));return(0,M.dH)()===l.NLJ.DROPPER_COLOR?null:a.createElement("div",{tabIndex:0,role:"button",className:er.ZA,onMouseDown:n})}function eE({inputRef:e,value:r,onChange:n,onKeyDown:i,recordingKey:o}){let s=a.useRef(null);return(0,p.h)(()=>{s.current&&s.current.focus()}),a.createElement("div",{className:er.ON},a.createElement(S.B,{className:er.qc,svg:ei.A}),a.createElement(H.jT,{ref:(0,f.A)(e,s),className:er.Rt,value:r,onChange:n,noBorderOnFocus:!0,placeholder:(0,w.t)("variables.binding_ui.search_placeholder"),onKeyDown:i,recordingKey:o}))}class ey extends W.l6{}class eb extends W.c${}function eI({recordingKey:e,currentView:r,subscribedLibraries:n,onSetSelect:o,resolvedType:s}){let c=(0,i.wA)(),d=(0,k.Um)(),u=(0,a.useRef)(`variable-binding-set-select-${(0,b.N)()}`),p=(0,m.U)(),h=(0,a.useMemo)(()=>({format(e){switch(e.type){case"LOCAL_VARIABLES":return(0,_.kc)().ds_variable_props_unified_ui?(0,w.t)("variables.binding_ui.set_labels.assets_created_in_file"):s===l.rXF.COLOR?(0,w.t)("variables.binding_ui.set_labels.local_colors"):(0,w.t)("variables.binding_ui.set_labels.local_variables");case"SUBSCRIBED_VARIABLES":return e.fileName;case"ALL_LIBRARIES":return(0,w.t)("variables.binding_ui.set_labels.all_libraries")}},isEqual:(e,r)=>e.type===r.type&&("SUBSCRIBED_VARIABLES"!==e.type||e.fileKey===r.fileKey)}),[s]),g=n.length>0?a.createElement(eb,{value:{type:"LOCAL_VARIABLES",layout:r.layout},formattedValue:(0,_.kc)().ds_variable_props_unified_ui?(0,w.t)("variables.binding_ui.set_labels.assets_created_in_file"):s===l.rXF.COLOR?(0,w.t)("variables.binding_ui.set_labels.local_colors"):(0,w.t)("variables.binding_ui.set_labels.local_variables"),recordingKey:y.Pt(e,"localVariables")}):null,{pass:f,fail:I}=(0,E.j)(n,e=>(0,N.wJ)(e.fileKey)),T=(0,x.sZ)(),v=(0,U.Oe)(T),S="SUBSCRIBED_VARIABLES"===r.type?r.fileKey:void 0;return a.createElement(ey,{id:u.current,dispatch:c,dropdownShown:d,dropdownWidth:200,className:er.DQ,chevronClassName:er.mL,inputClassName:er.NI,property:r,formatter:h,rightIcon:a.createElement(P.P,{resourceId:S}),onChange:function(e){o(e),(r.type!==e.type||"SUBSCRIBED_VARIABLES"===e.type&&e.fileKey!==S)&&p("variable_picker_library_changed",{pickerViewType:e.type,libraryFilterKey:"SUBSCRIBED_VARIABLES"===e.type?e.fileKey:void 0})},recordingKey:e,targetDomNode:(0,_.kc)().fpl_window?document.body:void 0},a.createElement(eb,{value:{type:"ALL_LIBRARIES",layout:r.layout},formattedValue:(0,w.t)("variables.binding_ui.set_labels.all_libraries"),recordingKey:y.Pt(e,"allLibraries")}),g&&a.createElement(W.sK,null),g,g&&a.createElement(W.sK,null),I.map((n,i)=>{let o=v&&(0,O.HZ)(n.fileKey);return a.createElement(eb,{key:n.fileKey,value:{type:"SUBSCRIBED_VARIABLES",layout:r.layout,fileKey:n.fileKey,fileName:n.fileName},formattedValue:n.fileName,recordingKey:y.Pt(e,"subscribedLibrary",i),removeTextRightPadding:o,rightSettingsIcon:o&&a.createElement(L.FX,null)})}),f.map((n,i)=>a.createElement(eb,{key:n.fileKey,value:{type:"SUBSCRIBED_VARIABLES",layout:r.layout,fileKey:n.fileKey,fileName:n.fileName},formattedValue:n.fileName,recordingKey:y.Pt(e,"subscribedLibrary",i),removeTextRightPadding:!0,rightSettingsIcon:a.createElement(R.t,null)})))}function eT({recordingKey:e,currentView:r,resolvedType:n,onToggleLayoutIconClick:i,disabledReason:o}){if(n!==l.rXF.COLOR)return null;{let{tooltip:n,layoutSvg:l}=function(e){switch(e){case"list":return{tooltip:0===o?(0,w.t)("variables.binding_ui.grid_view_unavailable_multiple_modes"):(0,w.t)("variables.binding_ui.show_as_grid_tooltip"),layoutSvg:en.A};case"grid":return{tooltip:(0,w.t)("variables.binding_ui.show_as_list_tooltip"),layoutSvg:ea.A}}}(r.layout);return a.createElement(H.K0,{"data-tooltip-type":G.Ib.TEXT,"data-tooltip":n,recordingKey:e,svg:l,onClick:i,disabled:(0,s.Vq)(o)})}}var ev=(e=>(e[e.MIXED_MODES=0]="MIXED_MODES",e))(ev||{});function eS({recordingKey:e,currentView:r,subscribedLibraries:n,setControlRightButtons:i,resolvedType:o,onSetSelect:s,onToggleLayoutIconClick:l,disableGridLayout:c}){return a.createElement(H.fI,{className:er.zz},s?a.createElement(eI,{currentView:r,subscribedLibraries:n,recordingKey:y.Pt(e,"setSelector"),onSetSelect:s,resolvedType:o}):a.createElement("div",{className:er.b8},(0,_.kc)().ds_variable_props_unified_ui?(0,w.t)("proto.action_set_variable_dropdown_option"):(0,w.t)("variables.binding_ui.set_labels.local_variables")),(l||i)&&a.createElement("div",{className:er.aX},l&&a.createElement(eT,{currentView:r,resolvedType:o,onToggleLayoutIconClick:l,recordingKey:y.Pt(e,"toggleLayout"),disabledReason:c}),i))}},875157:(e,r,n)=>{n.d(r,{$8:()=>B,AQ:()=>U,B3:()=>P,Ku:()=>M,Mm:()=>F,Us:()=>R,ZM:()=>D,aZ:()=>V,iG:()=>x,my:()=>T});var a=n(411855),i=n(943632),o=n(668e3),s=n(993086),l=n(291254),c=n(598977),d=n(692775),u=n(193161),m=n(299321),p=n(163023),h=n(939863),_=n(595869),g=n(666139),f=n(560185),E=n(668524),y=n(180377),b=n(58502),I=n(402997),T=(e=>(e.SCOPE="scope",e.LABEL="label",e))(T||{});let v=new Set([m.rXF.FLOAT,m.rXF.COLOR,m.rXF.STRING]),S=new Set([m.rrT.FILL,m.rrT.STROKE,m.rrT.EFFECT]),w=new Set([m.j0r.FRAME_FILL,m.j0r.SHAPE_FILL,m.j0r.TEXT_FILL]),A=[{type:"scope",scope:m.j0r.ALL_SCOPES,name:(0,h.tx)("variables.scopes.all_properties")},{type:"scope",scope:m.j0r.CORNER_RADIUS,name:(0,h.tx)("variables.scopes.corner_radius"),iconElement:a.createElement(p.B,{svg:_.A})},{type:"scope",scope:m.j0r.WIDTH_HEIGHT,name:(0,h.tx)("variables.scopes.width_height"),iconElement:a.createElement(p.B,{svg:y.A})},{type:"scope",scope:m.j0r.GAP,name:(0,h.tx)("variables.scopes.gap"),iconElement:a.createElement(p.B,{svg:f.A}),subLabel:(0,h.tx)("variables.scopes.auto_layout")},{type:"scope",scope:m.j0r.TEXT_CONTENT,name:(0,h.tx)("variables.scopes.text_content"),iconElement:a.createElement(p.B,{svg:I.A})},{type:"scope",scope:m.j0r.STROKE_FLOAT,name:(0,h.tx)("variables.scopes.stroke"),iconElement:a.createElement(p.B,{svg:b.A})},{type:"scope",scope:m.j0r.OPACITY,name:(0,h.tx)("variables.scopes.layer_opacity"),iconElement:a.createElement(o.N,null)},{type:"scope",scope:m.j0r.EFFECT_FLOAT,name:(0,h.tx)("variables.scopes.effects"),iconElement:a.createElement(p.B,{svg:g.A})},{type:"label",key:"typography",label:(0,h.tx)("fullscreen.type_panel.typography")},{type:"scope",scope:m.j0r.FONT_STYLE,name:(0,h.tx)("variables.scopes.font_weight"),iconElement:a.createElement(s.j,null)},{type:"scope",scope:m.j0r.FONT_SIZE,name:(0,h.tx)("variables.scopes.font_size"),iconElement:a.createElement(l.Z,null)},{type:"scope",scope:m.j0r.LINE_HEIGHT,name:(0,h.tx)("variables.scopes.line_height"),iconElement:a.createElement(c.e,null)},{type:"scope",scope:m.j0r.LETTER_SPACING,name:(0,h.tx)("variables.scopes.letter_spacing"),iconElement:a.createElement(d.y,null)},{type:"scope",scope:m.j0r.PARAGRAPH_SPACING,name:(0,h.tx)("variables.scopes.paragraph_spacing"),iconElement:a.createElement(u.o,null)},{type:"scope",scope:m.j0r.PARAGRAPH_INDENT,name:(0,h.tx)("variables.scopes.paragraph_indent"),iconElement:a.createElement(p.B,{svg:E.A})}],N=[{type:"scope",scope:m.j0r.ALL_SCOPES,name:(0,h.tx)("variables.scopes.all_properties")},{type:"scope",scope:m.j0r.ALL_FILLS,name:(0,h.tx)("variables.scopes.all_fills")},{type:"scope",scope:m.j0r.FRAME_FILL,name:(0,h.tx)("variables.scopes.frame_fill"),devModeName:(0,h.tx)("variables.scopes.frame_fill_dev_mode"),indented:!0},{type:"scope",scope:m.j0r.SHAPE_FILL,name:(0,h.tx)("variables.scopes.shape_fill"),devModeName:(0,h.tx)("variables.scopes.shape_fill_dev_mode"),indented:!0},{type:"scope",scope:m.j0r.TEXT_FILL,name:(0,h.tx)("variables.scopes.text_fill"),devModeName:(0,h.tx)("variables.scopes.text_fill_dev_mode"),indented:!0},{type:"scope",scope:m.j0r.STROKE,name:(0,h.tx)("variables.scopes.stroke")},{type:"scope",scope:m.j0r.EFFECT_COLOR,name:(0,h.tx)("variables.scopes.effects")}],C=[{type:"scope",scope:m.j0r.ALL_SCOPES,name:(0,h.tx)("variables.scopes.all_properties")},{type:"scope",scope:m.j0r.TEXT_CONTENT,name:(0,h.tx)("variables.scopes.text_content"),iconElement:a.createElement(p.B,{svg:I.A})},{type:"scope",scope:m.j0r.FONT_FAMILY,name:(0,h.tx)("variables.scopes.font_family"),iconElement:a.createElement(l.Z,null)},{type:"scope",scope:m.j0r.FONT_STYLE,name:(0,h.tx)("variables.scopes.font_weight_or_style"),iconElement:a.createElement(s.j,null)}],L=[...A,...N,...C].reduce((e,r,n,a)=>("scope"in r&&(e[r.scope]=r.name),e),{}),O=[...A,...N,...C].reduce((e,r,n,a)=>("scope"in r&&(e[r.scope]=r.devModeName??r.name),e),{});function R(e,{devMode:r=!1}={}){return r?O[e]:L[e]}function P(e){let r;if(e?.length===0)return(0,h.tx)("variables.scopes.no_supported_properties");if(e.includes(m.j0r.ALL_SCOPES))return(0,h.tx)("variables.scopes.all_properties_label");for(let n of(0,i.RP)(e,e=>R(e)))r=r?a.createElement(a.Fragment,null,(0,h.tx)("variables.scopes.scope_list",{scope1:r,scope2:n})):n;return r??(0,h.tx)("variables.scopes.no_supported_properties")}let D={CORNER_RADIUS:m.j0r.CORNER_RADIUS,STACK_SPACING:m.j0r.GAP,STACK_PADDING_LEFT:m.j0r.GAP,STACK_PADDING_TOP:m.j0r.GAP,STACK_PADDING_RIGHT:m.j0r.GAP,STACK_PADDING_BOTTOM:m.j0r.GAP,TEXT_DATA:m.j0r.TEXT_CONTENT,WIDTH:m.j0r.WIDTH_HEIGHT,HEIGHT:m.j0r.WIDTH_HEIGHT,RECTANGLE_TOP_LEFT_CORNER_RADIUS:m.j0r.CORNER_RADIUS,RECTANGLE_TOP_RIGHT_CORNER_RADIUS:m.j0r.CORNER_RADIUS,RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS:m.j0r.CORNER_RADIUS,RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS:m.j0r.CORNER_RADIUS,STACK_COUNTER_SPACING:m.j0r.GAP,MIN_WIDTH:m.j0r.WIDTH_HEIGHT,MAX_WIDTH:m.j0r.WIDTH_HEIGHT,MIN_HEIGHT:m.j0r.WIDTH_HEIGHT,MAX_HEIGHT:m.j0r.WIDTH_HEIGHT,STROKE_WEIGHT:m.j0r.STROKE_FLOAT,BORDER_TOP_WEIGHT:m.j0r.STROKE_FLOAT,BORDER_BOTTOM_WEIGHT:m.j0r.STROKE_FLOAT,BORDER_LEFT_WEIGHT:m.j0r.STROKE_FLOAT,BORDER_RIGHT_WEIGHT:m.j0r.STROKE_FLOAT,OPACITY:m.j0r.OPACITY,PARAGRAPH_SPACING:m.j0r.PARAGRAPH_SPACING,PARAGRAPH_INDENT:m.j0r.PARAGRAPH_INDENT,FONT_FAMILY:m.j0r.FONT_FAMILY,FONT_STYLE:m.j0r.FONT_STYLE,FONT_VARIATIONS:m.j0r.PARAGRAPH_SPACING,FONT_SIZE:m.j0r.PARAGRAPH_SPACING,LETTER_SPACING:m.j0r.LETTER_SPACING,LINE_HEIGHT:m.j0r.LINE_HEIGHT,MISSING:null,VISIBLE:null,VARIANT_PROPERTIES:null};Object.keys(m.Z6A).filter(e=>isNaN(Number(e)));let k={FRAME:m.j0r.FRAME_FILL,SYMBOL:m.j0r.FRAME_FILL,INSTANCE:m.j0r.FRAME_FILL,VECTOR:m.j0r.SHAPE_FILL,STAR:m.j0r.SHAPE_FILL,LINE:m.j0r.SHAPE_FILL,ELLIPSE:m.j0r.SHAPE_FILL,RECTANGLE:m.j0r.SHAPE_FILL,REGULAR_POLYGON:m.j0r.SHAPE_FILL,ROUNDED_RECTANGLE:m.j0r.SHAPE_FILL,TEXT:m.j0r.TEXT_FILL,TEXT_PATH:m.j0r.TEXT_FILL,VECTOR_OPERATION:m.j0r.SHAPE_FILL,NONE:null,DOCUMENT:null,CANVAS:null,GROUP_DEPRECATED:null,SLICE:null,STICKY:null,SHAPE_WITH_TEXT:null,CONNECTOR:null,CODE_BLOCK:null,WIDGET:null,STAMP:null,MEDIA:null,HIGHLIGHT:null,SECTION:null,SECTION_OVERLAY:null,WASHI_TAPE:null,VARIABLE:null,TABLE:null,TABLE_CELL:null,VARIABLE_SET:null,VARIABLE_OVERRIDE:null,SLIDE:null,SLIDE_ROW:null,SLIDE_GRID:null,ASSISTED_LAYOUT_DEPRECATED:null,INTERACTIVE_SLIDE_ELEMENT:null,MODULE:null,RESPONSIVE_SET:null,CODE_COMPONENT:null,CODE_LIBRARY:null,CODE_FILE:null,CODE_INSTANCE:null,CODE_LAYER:null};function M(e){return k[e]}function F(e){return e===m.rXF.FLOAT?A:e===m.rXF.COLOR?N:e===m.rXF.STRING?C:[]}function x(e){let r=new Set;for(let n of e)D[n]&&r.add(D[n]);return r}function U(e,r){if(!v.has(e.resolvedType))return!0;let n=!1;for(let e of r)if(w.has(e)){n=!0;break}for(let a of e.scopes)if(r.has(a)||a===m.j0r.ALL_SCOPES||a===m.j0r.ALL_FILLS&&n)return!0;return!1}function B(){return[m.rXF.FLOAT,m.rXF.COLOR,m.rXF.STRING]}function V(e,r){if(!e||!r||!S.has(e))return;let n=new Set;switch(e){case m.rrT.STROKE:case m.rrT.STROKE_PRESET:n.add(m.j0r.STROKE);break;case m.rrT.FILL:for(let e in r){let r=k[e];r&&n.add(r)}break;case m.rrT.EFFECT:n.add(m.j0r.EFFECT_COLOR)}return n.size?n:void 0}},859703:(e,r,n)=>{n.d(r,{A6:()=>eb,BJ:()=>eE,Cg:()=>em,Eo:()=>$,Ev:()=>ef,Gc:()=>e_,H2:()=>j,Ho:()=>Z,Jo:()=>et,LC:()=>ei,Oj:()=>J,Ri:()=>X,TD:()=>ed,Yt:()=>Q,ZG:()=>Y,bO:()=>eg,cp:()=>q,hy:()=>ep,hz:()=>ee,jt:()=>ec,q9:()=>eI,qy:()=>W,uk:()=>eh,wh:()=>z,xA:()=>eu});var a=n(943632),i=n(432258),o=n(388393),s=n(299321),l=n(880934),c=n(636149),d=n.n(c),u=n(89865),m=n.n(u),p=n(675551),h=n.n(p),_=n(802691),g=n.n(_),f=n(966712),E=n(38580),y=n(374626),b=n(684107),I=n(394255),T=n(391388),v=n(860601),S=n(364898),w=n(696673),A=n(830445),N=n(356390),C=n(281889),L=n(674011),O=n(529928),R=n(279453),P=n(173454),D=n(875387);let k=(0,L.SG)(()=>s.Ez5.libraryAssets().fileLevelVariableSetsSubscribed),M=(0,E.eU)(e=>e(k).map(P.Rn)),F=(0,L.SG)(()=>s.Ez5.libraryAssets().fileLevelVariableSetsLocal),x=(0,E.eU)(e=>e(F).map(P.Dt)),U=(0,L.SG)(()=>s.Ez5.libraryAssets().fileLevelVariablesSubscribed),B=(0,L.SG)(()=>s.Ez5.libraryAssets().fileLevelVariablesLocal),V=(0,E.eU)(e=>e(B).map(P.kz)),G=(0,E.eU)(e=>e(U).map(P.ZI)),H=(0,E.eU)(e=>({...m()(e(x),e=>e.keyForPublish),...m()(e(M),e=>e.key)}));(0,E.eU)(e=>({...m()(e(V),e=>e.keyForPublish),...m()(e(G),e=>e.key)}));let W=(()=>{let e=(0,O.OX)({},"SYNC_ATOM_VARIABLE_SETS_BY_ID"),r=(0,y.FZ)(e,(e,r)=>{if(r){if("added"in r){let n=m()(r.added.map(P.Dt),e=>e.node_id);return{...e,...n}}if("deleted"in r){let n={...e};return delete n[r.deleted],n}}return{}});return r.onMount=e=>{N.Y5.onReady().then(()=>{e({added:s.CWU.getLocalVariableSetsInfo()})});let r=(0,C.Vr)(r=>{e(r)});return()=>{r(),e(null)}},(0,O.S9)(r,e.reducer)})(),K=(0,E.eU)(e=>({...e(W),...e(eu)})),Y=(0,y.Iz)(e=>(0,E.eU)(r=>r(W)[e]));(0,y.Iz)(e=>(0,E.eU)(r=>r(eu)[e]));let $=(0,y.Iz)(e=>(0,E.eU)(r=>r(K)[e]));(0,y.Iz)(e=>(0,b.BV)(r=>n=>n(r({fileKey:e}))));let j=(0,y.Iz)(e=>(0,E.eU)(r=>{let n={};for(let a of e)n[a]=r(R.o9k.Query({fileKey:a}));return n}),a.lu),z=(0,y.Iz)(e=>(0,E.eU)(r=>h()(m()(e),e=>r(R.BbB.Query({libraryKey:e})))),a.lu),q=(0,y.Iz)(e=>(0,b.eS)(r=>n=>n(r({fileKey:e}))));function X(e){return R.eHy.Query(e?{hubFileId:e}:null)}let J=(0,y.Iz)(e=>(0,E.eU)(r=>{let n={};for(let a of e)n[a]=r((0,I.he)(R.cmY)({variableCollectionKey:a}));return n}),a.lu),Z=(0,y.Iz)(e=>(0,E.eU)(r=>h()(m()(e),e=>r(R.Ipg.Query({libraryKey:e})))),a.lu),Q=(0,y.Iz)(e=>(0,E.eU)(r=>{let n={};for(let a of e)n[a]=r(R.jXq.Query({fileKey:a}));return n}),a.lu),ee=(0,y.Iz)(e=>(0,E.eU)(r=>{let n={};for(let a of e)n[a]=r(R.eHy.Query({hubFileId:a}));return n}),a.lu);function et(e){let r=h()(m()(e),()=>T.Qw.disabled());return(0,E.eU)(r)}let er=(0,E.eU)(e=>{let r=e(eg),n=e(D.TG),a=Object.values(r).filter(e=>!(0,A.lR)(e,n)).map(e=>e.key).sort();return e((0,b.a5)(a.map(e=>({key:e})))).reduce((e,r)=>(e[(0,o.ey)(r.args.key)]=r.result,e),{})}),en=(0,E.eU)(e=>{let r=e(eg),n=e(D.TG),a=(e(w.JB)?Object.values(r).filter(e=>(0,A.lR)(e,n)):[]).map(e=>e.key).sort().map(e=>({key:e})),i=(0,A.ku)(A.p9,a,e);return"loaded"!==i.status?{}:i.data.reduce((e,r)=>{if("loaded"!==r.result.status)return e;let n=r.result.data.variable;if(!n)return e;let a=(0,o.ey)(n.key);return{...e,[a]:r.result}},{})}),ea=(0,E.eU)(e=>({...e(er),...e(en)}),v.lQ),ei=(0,O.Pj)(ea,"SYNC_ATOM_USED_LIBRARY_VARIABLES_BY_KEY",{}),eo=(0,E.eU)(e=>{let r=[...new Set(Object.values(e(er)).map(e=>e.data?.variable?.variableCollection.key).filter(i.Vq))].sort();return e((0,b.Ew)(r.map(e=>({key:e})))).reduce((e,r)=>(e[(0,o.yG)(r.args.key)]=r.result,e),{})},v.lQ),es=(0,E.eU)(e=>{let r=[...new Set(Object.values(e(en)).map(e=>e.data?.variable?.variableCollection.key).filter(i.Vq))].sort().map(e=>({key:e})),n=(0,A.ku)(A.nT,r,e);return"loaded"!==n.status?{}:n.data.reduce((e,r)=>{if("loaded"!==r.result.status)return e;let n=r.result.data.variableCollection;if(!n)return e;let a=(0,o.ey)(n.key);return{...e,[a]:r.result}},{})}),el=(0,E.eU)(e=>({...e(eo),...e(es)}),v.lQ),ec=(0,O.Pj)(el,"SYNC_ATOM_USED_LIBRARY_VARIABLE_SETS_BY_KEY",{});(0,E.eU)(e=>{let r=Object.keys(e(W));if(0!==r.length)return r[0]});let ed=(0,E.eU)(e=>Object.values(e(W))),eu=(()=>{let e=(0,O.OX)({},"SYNC_ATOM_SUBSCRIBED_VARIABLE_SETS_BY_ID"),r=(0,y.FZ)(e,(e,r)=>{if(r){if("added"in r){let n=m()(r.added.map(P.Rn),e=>e.node_id);return{...e,...n}}{let n={...e};return delete n[r.deleted],n}}return{}});return r.onMount=e=>{N.Y5.onReady().then(()=>{e({added:s.CWU.getSubscribedVariableSetsInfo()})});let r=(0,C._n)(r=>{e(r)});return()=>{r(),e(null)}},(0,O.S9)(r,e.reducer)})(),em=(()=>{let e=(0,O.OX)({},"SYNC_ATOM_LOCAL_VARIABLES_BY_ID"),r=(0,y.FZ)(e,(e,r)=>{if(r){if("added"in r)return{...e,...m()(r.added.map(P.kz),e=>e.node_id)};if("deleted"in r){let n=new Set(r.deleted);return g()(e,e=>e.node_id&&!n.has(e.node_id))}if("setDeleted"in r)return g()(e,e=>e.variableSetId!==r.setDeleted)}return{}});return r.onMount=e=>{N.Y5.onReady().then(()=>{e({added:s.CWU.getLocalVariablesInfo()})});let r=(0,C.j2)(r=>{e(r)});return()=>{r(),e(null)}},(0,O.S9)(r,e.reducer)})(),ep=(0,y.Iz)(e=>(0,E.eU)(r=>r(em)[e]??null)),eh=(0,E.eU)(e=>Object.keys(e(em)).map(r=>e(ep(r))).sort((e,r)=>-(0,S.Ez)(e.sortPosition,r?.sortPosition))),e_=(0,E.eU)(e=>d()(e(eh),e=>e.variableSetId)),eg=(()=>{let e=(0,O.OX)({},"SYNC_ATOM_SUBSCRIBED_VARIABLES_BY_ID"),r=(0,y.FZ)(e,(e,r)=>{if(r){if("added"in r)return{...e,...m()(r.added.map(P.ZI),e=>e.node_id)};if("deleted"in r)return g()(e,e=>e.id!==r.deleted);if("setDeleted"in r)return g()(e,e=>e.variableSetId!==r.setDeleted)}return{}});return r.onMount=e=>{N.Y5.onReady().then(()=>{e({added:s.CWU.getSubscribedVariablesInfo()})});let r=(0,C.uE)(r=>{e(r)});return()=>{r(),e(null)}},(0,O.S9)(r,e.reducer)})();(0,y.Iz)(e=>(0,E.eU)(r=>r(eg)[e]??null));let ef=(0,y.Iz)(e=>(0,E.eU)(r=>r(em)[e]??r(eg)[e]??null));function eE(e,r){let n=N.Y5.isReady(),a=new Map(Object.entries(r)),i=n&&e?s.CWU.getVariableResolvedValue(e,a):null,o=(0,E.eU)(i);return e&&(o.onMount=i=>{n||N.Y5.onReady().then(()=>{i(s.CWU.getVariableResolvedValue(e,a))});let o=Object.entries(r),c=o.length>0?o.map((e,r)=>`${e}${r}`).join(","):l.AD,d=(0,C.RW)(e,c,e=>{i(e[c]??null)});return()=>{d(),i(null)}}),o}let ey=(()=>{let e=(0,E.eU)({}),r=(0,y.FZ)(e,(e,r)=>{if(r){if("added"in r)return{...e,...m()(r.added.map(P.Vk),e=>e.node_id)};if("deleted"in r){let n=new Set(r.deleted);return g()(e,e=>e.node_id&&!n.has(e.node_id))}return{}}return e});return r.onMount=e=>{N.Y5.onReady().then(()=>{e({added:s.CWU.getLocalVariableOverridesInfo()})});let r=(0,C.xb)(r=>{e(r)});return()=>{r(),e(null)}},r})(),eb=(0,y.Iz)(e=>(0,E.eU)(r=>{let n=Object.values(r(ey)).filter(r=>r.variableSetId===e);return m()(n,e=>e.rootVariableKey)})),eI=(0,E.eU)(e=>{if(!(0,f.kc)().ds_variables_resolution_v2||!(0,f.kc)().ds_variables_bump_set_versions)return!1;let r=e(ed),n=e(H);return!!r.some(e=>(0,i.uy)(n[e.keyForPublish]))})},635736:(e,r,n)=>{n.d(r,{ye:()=>eb});var a=n(411855),i=n(188507),o=n(943632),s=n(171812),l=n(432258),c=n(602628),d=n(797613),u=n(269568),m=n(288006),p=n(140838),h=n(260906);n(299321),n(275556);var _=n(629019),g=n.n(_),f=n(126049),E=n(395096),y=n(776250),b=n(91408),I=n(939683),T=n(820286),v=n(358145),S=n(189430),w=n(966712),A=n(374626),N=n(860601),C=n(523398),L=n(153234),O=n(286640),R=n(763658),P=n(572206),D=n(32863),k=n(46481),M=n(154254),F=n(939863),x=n(169231),U=n(617453);n(869156);var B=n(844053),V=n(318812),G=n(6024),H=n(335682),W=n(860178),K=n(100197),Y=n(945020),$=n(173454),j=n(237870),z=n(922358),q=n(545317),X=n(101177),J=n(282263),Z=n(939384),Q=n(859703),ee=n(50847),et=n(746806),er=n(337676),en=n(273289),ea=n(228445),ei=n(980984),eo=n(641647),es=n(184605),el=n(963133),ec=n(866215),ed=n(266306),eu=n(999748),em=n(84013);let ep="variables-modal-width",eh="variables-modal-height",e_="variables-modal-position",eg=(0,b.jz)(eu.gZ),ef=(0,b.jz)(eu.Ld),eE=(0,b.jz)(eu.Cg),ey=(0,b.jz)(eu.NE),eb=(0,j.Ju)(function(){var e,r,n;let _=(0,G.n)({type:eb}),j=(0,i.wA)(),eI=(0,K.J2)((0,U.UK)().showGuids),eT=(0,i.d4)(e=>e.variablePickerShown),ev=(0,i.d4)(e=>e.modalShown?.type===X.eK.type),eS=(0,A.md)(Q.q9),{state:{currentVariableSet:ew,renamingModeGUID:eA,renamingVariableID:eN,selectedGroupNames:eC,selectedVariableIDs:eL,variableGroupList:eO,variableList:eR,variableOverrides:eP,isSidebarOpen:eD},actions:ek}=(0,en.D)(en.u.WRITEABLE),eM=(0,i.d4)(B.c),eF=function(){let e=(0,W.iZ)(),r=(0,H.q5)();return{org_id:r?.parentOrgId??void 0,user_id:e?.id}}(),{showing:ex,show:eU,hide:eB,data:eV}=(0,V.BK)("variables-modal-context-menu"),eG=(0,I.U)(),eH=(0,a.useCallback)((e,r,n,a)=>{ev&&ek.toggleEditVariableModal(null);let i=eL;eL.includes(e)||(ek.setSelectedVariableIDs([e]),i=[e]),eU({data:{position:{left:n.clientX,top:n.clientY},modeID:r,variables:(0,o.RP)(i,e=>eR.find(r=>r.node_id===e)),cellElement:n.currentTarget,groupNames:[],onCreateExpression:a}}),eG("variable_action_menu_opened",{variable_id:e,field:r?"value":"name",collection_id:ew?.node_id,...eF}),n.preventDefault()},[ev,eL,eU,eG,ew?.node_id,eF,ek,eR]),eW=(0,a.useCallback)((e,r)=>{eU({data:{position:{left:r.clientX,top:r.clientY},groupNames:eC,variables:[],cellElement:r.currentTarget}}),r.preventDefault()},[eC,eU]);(0,a.useEffect)(()=>(0,y.sx)("ds_variables_modal_opened",eM),[eM]);let eK=e=>eL.length>0&&e?.key==="Enter"&&!!e.shiftKey&&(ek.duplicateVariables?.(),!0),eY=(0,w.kc)().ds_lbu_variable_modal_copy_paste??!1,e$=(0,w.kc)().ds_variables_modal_fpl_migration,ej=function(e,r,n){let[i,o]=(0,a.useState)(null),s=(0,v.ZC)(e);return(0,a.useEffect)(()=>{let n=null!==i&&Date.now()-i<250;e.length>(s?.length??0)&&n&&(r(e.filter(e=>!s?.includes(e)).map(e=>e.node_id)),o(null))},[e,s,i,r]),(0,a.useCallback)(e=>{o(Date.now()),n?.(e)},[n,o])}(eR,ek.setSelectedVariableIDs,ek.pasteClipboardVariables),ez=(0,a.useCallback)((e,r)=>{if(!eY){e.shouldPropagate=!0;return}r===Y.zy.COPY&&(ek.copySelectedVariables?.({action:"keyboard_shortcut",...eF}),e.accept(),e.shouldPropagate=!1),r===Y.zy.PASTE&&(ej({action:"keyboard_shortcut",...eF}),e.accept(),e.shouldPropagate=!1)},[ek,eY,ej,eF]),eq=L.fo("variablesModal","keydown",e=>{eK(e.event)&&(e.accept(),eK(e))}),eX=a.useRef(null),eJ=(0,a.useRef)(null),eZ=(0,a.useRef)(null),eQ=function({hasVariables:e=!0,isSidebarOpen:r=!1}={}){let n=(0,O.Q_)(),i=(0,q.P)(),o=(0,a.useMemo)(()=>new P.Mi(i+(0,b.jz)(eu.gZ),(0,b.jz)(eu.Ld)+(0,b.jz)(eu.gZ)),[i]),[{windowInnerHeight:l,windowInnerWidth:c}]=(0,E.A)((0,S.l)(),300,{equalityFn:s.c2}),[d]=(0,a.useState)(()=>{let e=n?.getItem(e_);if(!e)return null;let a=JSON.parse(e);return a.x+(r?ey:0)>c||a.y>l?(n?.removeItem(e_),n?.removeItem(ep),n?.removeItem(eh),null):new P.Mi(a.x,a.y)}),[u]=(0,a.useState)(()=>{let e=Number(n?.getItem(ep));return e&&Number.isFinite(e)?e:642}),[m]=(0,a.useState)(()=>{let e=Number(n?.getItem(eh));return e&&Number.isFinite(e)?e:380});return{initialConstraints:d?{x:"left",y:"top"}:{x:"right",y:"top"},initialPosition:d??o,maxWidth:c-2*eg,maxHeight:l-ef-2*eg,minWidth:400,minHeight:e?180:300,initialWidth:u,initialHeight:m}}({hasVariables:eR.length>0,isSidebarOpen:eD}),e0=(0,q.P)(),e1=(0,O.Q_)(),e2=c.ox(),e3=(0,a.useCallback)(({width:e,height:r})=>{e1?.setItem(ep,String(e)),e1?.setItem(eh,String(r-eE))},[e1]),e6=(0,a.useCallback)(e=>{e1?.setItem(e_,JSON.stringify(e))},[e1]),[e5,e8]=(0,a.useState)(null),e4=(0,a.useCallback)(()=>{let e={position:new P.Mi(eg,eg+ef),width:window.innerWidth-2*eg,height:window.innerHeight-2*eg-ef};function r(r){let n={...r,...e};return(0,s.c2)(n,r)?(e8(null),e5):(e8(r),n)}if(e$){let e=r({constraints:{x:"left",y:"top"},height:e2.size.y,position:new P.Mi(e2.position.x,e2.position.y),width:e2.size.x});e&&(e2.setSize(new P.Mi(e.width,e.height)),e2.setPosition(e.position))}else{let e=eJ.current;e&&e.setTransform(r)}},[e$,e5,e2]),e9=(0,a.useCallback)(e=>{e.target===e.currentTarget&&e4()},[e4]);(0,a.useEffect)(()=>{let e=e=>{let{target:r}=e,n=e$?eZ.current:eJ.current?.getEl();r&&n?.contains(r)?eX.current?.focus():eX.current?.blur()};return document.body.addEventListener("mouseup",e),()=>document.body.removeEventListener("mouseup",e)},[e$]);let e7=(0,l.Vq)(ew),te=(0,Z.al)(),tt=!(0,w.kc)().ds_gradient_variables,[tr,tn]=a.useState(""),ta=(0,a.useCallback)(e=>{tn((e??"").trim())},[]),ti=(0,f.A)(ta,200),to=(0,a.useCallback)(()=>ta(""),[ta]),ts=(0,a.useCallback)(e=>""===e?to():ti(e),[to,ti]),tl=(0,a.useCallback)(()=>{eT.isShown&&j((0,x.B)()),ev&&ek.toggleEditVariableModal(null)},[ek,j,ev,eT]),tc=(0,a.useCallback)(()=>{ek.copySelectedVariables?.({action:"action_menu",...eF})},[ek,eF]),td=(0,a.useCallback)(()=>{ej({action:"action_menu",...eF})},[ej,eF]),tu=a.createElement("div",{className:ed.DD,onDoubleClick:e9},!e7&&a.createElement("div",{className:M.cx.ml8.fontSemiBold.font11.fontUi.$},(0,F.tx)("variables.authoring_modal.title")),e7&&a.createElement("div",{className:g()({[ed.Cz]:!0,[ed.ho]:eD})},a.createElement(d.f,{recordingKey:L.Pt("variablesModal","toggleSidebar"),"aria-label":(0,F.t)("variables.authoring_modal.toggle_sidebar"),onIcon:a.createElement(k.U,{svg:em.A},a.createElement(p.C,null)),offIcon:a.createElement(k.U,{svg:em.A},a.createElement(h.O,null)),checked:eD,onChange:e=>ek.setIsSidebarOpen(e)})),(0,w.kc)().ds_variables_modal_filter&&a.createElement(D.IW,{focusOnMount:!1,query:tr,className:ed.ON,placeholder:(0,F.t)("variables.authoring_modal.filter"),clearSearch:to,onChange:ts}),te&&a.createElement("div",{className:ed.ED},a.createElement(ea.G,null)),tt&&a.createElement("div",{className:ed.aZ},a.createElement(ee.T,null))),tm=a.createElement(a.Fragment,null,a.createElement(T.hh,null,a.createElement("div",{className:ed.kL,style:{"--propertiesPanelWidth":`${e0}px`},"data-testid":"variables-modal-container"},eD&&ew&&a.createElement(es.z,{groups:eO,onChangeVariableSet:ek.setCurrentVariableSetID,onContextMenu:eW,onCreateVariableSet:ek.createVariableSet,onCreateVariableSetExtension:ek.createVariableSetExtension,onDeleteVariableSet:ek.deleteVariableSet,onMoveSelectedGroupsToGroup:ek.moveSelectedGroupsToGroup,onMoveVariableToGroup:ek.moveVariableToGroup,onRenameGroup:ek.renameGroup,onRenameVariableSet:ek.renameVariableSet,onMoveGroups:ek.moveGroups,recordingKey:"variablesModal",selectedGroupNames:eC,selectedVariableIDs:eL,setSelectedGroupNames:ek.setSelectedGroupNames,variableSet:ew,isShowingGuids:eI}),a.createElement("div",{className:ed.ok},eS&&a.createElement(er.P,null),0!==eR.length&&ew?a.createElement(R.k,{name:"variables_modal_table"},a.createElement(el.f,{groups:eO,key:eC.join("-"),onCreateMode:ek.createMode,onDeleteMode:ek.deleteMode,onDuplicateMode:ek.duplicateMode,onMoveVariableToGroup:ek.moveVariableToGroup,onRenameGroup:ek.renameGroup,onRenameMode:ek.renameMode,onRenameVariable:ek.renameVariable,onReorderVariables:ek.reorderVariables,onSetModeAsDefault:ek.setModeAsDefault,onVariableContextMenu:eH,recordingKey:"variablesModal",renamingModeGUID:eA,renamingVariableID:eN,selectedGroupNames:eC,selectedVariableIDs:eL,setRenamingModeGUID:ek.setRenamingModeGUID,setRenamingVariableID:ek.setRenamingVariableID,setSelectedVariableIDs:ek.setSelectedVariableIDs,variableSet:ew,isShowingGuids:eI,toggleEditVariableModal:ek.toggleEditVariableModal,setVariableValueForMode:ek.setVariableValueForMode,filterString:(0,w.kc)().ds_variables_modal_filter?tr:""}),ek.setRenamingVariableID&&a.createElement("div",{className:ed.qr},a.createElement(eo.fr,{recordingKey:"variablesModal",groups:eO,selectedGroup:eC[0],setRenamingVariableID:ek.setRenamingVariableID,variableSetID:ew.node_id,selectedVariableIDs:eL,setSelectedVariableID:ek.setSelectedVariableIDs}))):a.createElement(ec.C,{recordingKey:"variablesModal",groups:eO,selectedGroup:eC[0],setRenamingVariableID:ek.setRenamingVariableID,setSelectedVariableID:ek.setSelectedVariableIDs,variableSetID:ew?.node_id}),(0,w.kc)().ds_variables_extended_sets&&ew&&(0,$.GI)(ew)?a.createElement("pre",{className:M.cx.maxH200.overflowAuto.$},JSON.stringify(eP,void 0,2)):null))),ex&&eV&&a.createElement(ei.Q,{allVariables:eR,contextMenuData:eV,hasGroups:eO.length>1,hideContextMenu:eB,onCreateGroup:ek.createGroup,onUngroup:ek.ungroup,onDuplicateVariables:ek.duplicateVariables,onCopyVariables:eY?tc:null,onPasteVariables:eY?td:null,onDeleteEmptyGroup:N.lQ,onDeleteVariables:ek.deleteVariables,onSetAllVariablesSelected:N.lQ,toggleEditVariableModal:ek.toggleEditVariableModal,recordingKey:L.Pt("variablesModal","contextMenuDropdown")}),a.createElement(J.Q8,null));return a.createElement(R.k,{name:"variables_modal"},a.createElement(z.vL,{handleKeyDown:eq,handleClipboard:ez,ref:eX,name:"variables-authoring-modal",focusOnMount:!0},e$?a.createElement(u._L,{defaultWidth:eQ.initialWidth,defaultHeight:eQ.initialHeight,defaultPosition:(e=eQ.initialConstraints,r=eQ.initialPosition,n=eQ.initialWidth,"right"===e.x&&"top"===e.y?{right:r.x+n,top:r.y}:{left:r.x,top:r.y}),htmlAttributes:{onClick:tl,onCopy:e=>{eY&&eZ.current===document.activeElement&&(ek.copySelectedVariables?.({action:"keyboard_shortcut",...eF}),e.stopPropagation())},onPaste:e=>{eY&&(ej({action:"keyboard_shortcut",...eF}),e.stopPropagation())},onKeyDown:e=>eq(new C.p(e.nativeEvent))},maxHeight:eQ.maxHeight,ref:eZ,manager:e2,onClose:_,onTransform:({size:e,position:r})=>{e6(new P.Mi(r.x,r.y)),e&&e3({width:e.x,height:e.y})},recordingKey:"variablesModal"},a.createElement(m.vo,null,a.createElement(m.Y9,null,tu),a.createElement(m.nB,{noPadding:!0,noScroll:!0},a.createElement("div",{style:{height:"100%"}},tm)))):a.createElement(et.vx,{allowAutoExpanding:!1,allowResizeHeight:!0,allowResizeWidth:!0,fullFrame:!0,initialConstraints:eQ.initialConstraints,initialHeight:eQ.initialHeight,initialPosition:eQ.initialPosition,initialWidth:eQ.initialWidth,maxHeight:eQ.maxHeight,maxWidth:eQ.maxWidth,minHeight:eQ.minHeight,minWidth:eQ.minWidth,onDragEnd:e6,onEdgeDoubleClick:e4,onResize:e3,ref:eJ,contentContainerClassName:ed.yl,onClick:tl,onKeyDown:eq,onClose:_,recordingKey:"variablesModal",title:tu},tm)))},"VariablesModal",j.ZU.YES)},866215:(e,r,n)=>{n.d(r,{C:()=>g});var a=n(411855),i=n(463033),o=n(397863),s=n(153234),l=n(163023),c=n(46481),d=n(939863),u=n(318812),m=n(641647),p=n(460765),h=n(501191),_=n(177646);function g({groups:e,recordingKey:r,selectedGroup:n,setRenamingVariableID:g,variableSetID:f,setSelectedVariableID:E}){let y=a.useRef(null),{showing:b,toggle:I,hide:T}=(0,u.BK)(m.oU);return a.createElement("div",{className:p.zr},a.createElement(l.B,{className:p.Kk,svg:_.A}),a.createElement("div",{className:p.Qq},(0,d.t)("variables.authoring_modal.null_state_text")),g&&a.createElement(i.$n,{iconPrefix:a.createElement(c.U,{svg:h.A},a.createElement(o.x,null)),"aria-label":(0,d.t)("variables.authoring_modal.create_variable_button_label"),ref:y,variant:"secondary",onClick:()=>I(),recordingKey:s.Pt(r,"createVariableButton")},(0,d.t)("variables.authoring_modal.table.create_variable")),g&&b&&y.current&&a.createElement(m.mw,{targetRect:y.current.getBoundingClientRect(),variableSetID:f??null,selectedGroup:n,groups:e,recordingKey:r,setRenamingVariableID:g,onClose:T,setSelectedVariableID:E,insertVariableBetweenIDs:null}))}},832568:(e,r,n)=>{n.d(r,{iG:()=>c,vt:()=>l});var a=n(188507),i=n(243987),o=n(984968),s=n(851363);function l(e){let r=(0,o.ol)(),n=(0,a.d4)(e=>!!r&&(0,i.oc)(r.id,e));return!(!r||e&&r.id!==e||!n||(0,i.w5)(r))&&r.student_team_state!==s.kU.STUDENT_TEAM_CURRENT&&r.student_team_state!==s.kU.STUDENT_TEAM_EXPIRED}function c(e){if(!e)return!1;let r=!!(0,i.XX)(e),n=e.studentTeamState===s.kU.STUDENT_TEAM_CURRENT||e.studentTeamState===s.kU.STUDENT_TEAM_EXPIRED;return r||n}},828702:(e,r,n)=>{n.d(r,{t:()=>N});var a=n(411855),i=n(188507),o=n(201140),s=n(902634),l=n(915440),c=n(711525),d=n(768137),u=n(799569),m=n(154254),p=n(939863),h=n(501114),_=n(175290),g=n(662275),f=n(995852),E=n(349410),y=n(101505),b=n(672517),I=n(279453),T=n(243987),v=n(237870),S=n(488578),w=n(777484);function A(e){let r=(0,i.wA)(),n=(0,l.Rs)(I.Aqu,{teamId:e.teamId}),g=(0,E.Gm)();if("loaded"!==n.status||n.data.team?.stripeCustomerId.status!=="loaded")return null;let b=!!(0,c.oA)(n.data.team?.stripeCustomerId),v=[],S=(0,c.oA)(n.data.team?.allProjects),A=S?.length??0,N=S?.filter(e=>e.isViewOnly).length??0,C=S?.filter(e=>e.isInviteOnly).length??0,L=n.data.team?.teamFileCounts?.designFileCount??0,O=n.data.team?.teamFileCounts?.whiteboardFileCount??0,R=parseInt(n.data.team?.teamFileCounts?.slideFileCount??"0",10),P=(e,r,n)=>{e>r&&v.push({limitExceededType:n,limitExceededCount:e-r})};if(P(L,T.WW,"design_file_count"),P(O,T.WW,"whiteboard_file_count"),g&&P(R,T.WW,"slides_file_count"),P(A,T.Wf,"total_project_count"),A<=T.Wf&&(P(N,T.h,"view_only_project_count"),P(C,T.PX,"invite_only_project_count")),0===v.length)return null;let D=e.canEditTeam?(0,p.tx)("locked_team.card.title"):(0,p.tx)("locked_team.card.title_viewer"),k=e.canEditTeam?b?(0,p.tx)("locked_team.card.editor_previously_paid_description"):(0,p.tx)("locked_team.card.editor_previously_on_trial_description"):(0,p.tx)("locked_team.card.view_only_description"),M=e.canEditTeam?b?(0,p.tx)("locked_team.card.editor_previously_paid_cta"):(0,p.tx)("locked_team.card.editor_previously_on_trial_cta"):null,F=e=>{switch(e.limitExceededType){case"design_file_count":return(0,p.tx)("locked_team.card.move_figma_design_files",{numDesignFiles:e.limitExceededCount});case"whiteboard_file_count":return(0,p.tx)("locked_team.card.move_figjam_boards",{numFigjamFiles:e.limitExceededCount});case"slides_file_count":return(0,p.tx)("locked_team.card.move_figma_slides_files",{numSlidesFiles:e.limitExceededCount});case"total_project_count":return(0,p.tx)("locked_team.card.move_projects",{numProjects:e.limitExceededCount});case"view_only_project_count":return(0,p.tx)("locked_team.card.change_permissions_from_view_only",{numViewOnlyProjects:e.limitExceededCount});case"invite_only_project_count":return(0,p.tx)("locked_team.card.change_permissions_from_invite_only",{numInviteOnlyProjects:e.limitExceededCount});default:throw Error("Not a valid starter plan limit")}};return a.createElement(_.Y,{direction:"vertical",padding:e.noPaddingOrBorder?0:20,spacing:24,width:e.width,cornerRadius:e.noPaddingOrBorder?void 0:8,strokeWidth:e.noPaddingOrBorder?void 0:1,strokeColor:"default",height:"hug-contents"},a.createElement("div",{className:m.cx.flex.justifyBetween.wFull.$},a.createElement("div",{className:m.cx.flex.itemsCenter.justifyCenter.w32.h32.bRadius5.colorBgWarning.$},a.createElement(o.s,{className:w.K})),!!e.onClose&&a.createElement(u.Jn,{onClick:e.onClose})),a.createElement("div",{className:m.cx.font14.fontSemiBold.lh24.$},D),a.createElement("div",{className:m.cx.font13.lh24.$},k),e.canEditTeam&&a.createElement("div",{className:m.cx.wFull.bb1.bSolid.$,style:h.sx.add({borderColor:"var(--color-bg-secondary)"}).$,role:"list"},v.map(e=>a.createElement("div",{key:e.limitExceededType,className:m.cx.flex.itemsCenter.gap10.wFull.bt1.bSolid.pb12.pt12.fontMedium.$,style:h.sx.add({borderColor:"var(--color-bg-secondary)"}).$,role:"listitem"},a.createElement(s.U,{className:m.cx.minW24.$}),a.createElement("div",{className:m.cx.font11.lh16.$},F(e))))),!!M&&a.createElement("div",{className:m.cx.flex.justifyEnd.wFull.$},a.createElement(d.vd,{onClick:()=>r(f.WX({teamId:e.teamId})),className:m.cx.if(e.fullWidthButton,m.cx.maxWFull.wFull).hAuto.lh16.preWrap.pt8.pb8.$,trackingProperties:{teamId:e.teamId,trackingDescriptor:b?y.c.UPGRADE_TO_PROFESSIONAL:y.c.REACTIVATE_YOUR_PROFESSIONAL_PLAN}},M)))}let N=(0,v.Ju)(function(e){let r=(0,i.wA)();return a.createElement(S.aF,{size:500},a.createElement(b.fu,{name:"Locked State Team Overview Modal",properties:{teamId:e.teamId}},a.createElement(A,{...e,width:452,onClose:()=>r(g.Lo()),noPaddingOrBorder:!0})))},"LockedStateOverviewModal")},201188:(e,r,n)=>{n.d(r,{c:()=>R,s:()=>M});var a=n(411855),i=n(188507),o=n(320063),s=n(966712),l=n(563706),c=n(799569),d=n(163023),u=n(939863),m=n(662275),p=n(860178),h=n(555328),_=n(237870),g=n(488578),f=n(849867),E=n(996773),y=n(548593),b=n(657050),I=n(852512),T=n(894444),v=n(498139),S=n(123569),w=n(450068),A=n(950702),N=n(626208),C=n(372464),L=n(647173);let O=(0,y.rw)();var R=(e=>(e.ACCOUNT="ACCOUNT",e.COMMUNITY="COMMUNITY",e.NOTIFICATIONS="NOTIFICATIONS",e.SESSIONS="SESSIONS",e.SECURITY="SECURITY",e))(R||{});function P(e){let r=(0,s.kc)().user_settings_tab,n=new Map([["ACCOUNT",(0,u.t)("settings.account_setting.account")],["COMMUNITY",(0,u.t)("settings.account_setting.community")],["NOTIFICATIONS",(0,u.t)("settings.account_setting.notifications")]]);r?n.set("SECURITY",(0,u.t)("settings.account_setting.security")):n.set("SESSIONS",(0,u.t)("settings.account_setting.sessions"));let i=a.useRef(null),{setToolbarWidth:o}=e;a.useEffect(()=>{if(i){let e=i.current?.offsetWidth;e&&o(e)}},[o]);let{accountModalSubViewData:l,setAccountModalSubViewData:m}=(0,b.AK)(),p=[];return(l.properties.purchasePageType?p.push(a.createElement(O,{tab:b.U7.PURCHASES,mobileNavTabTitle:(0,u.t)("settings.account_setting.purchases"),selectedTab:e.selectedTab,key:b.U7.PURCHASES,onClick:()=>m({...l,properties:{purchasePageType:null}})},a.createElement("div",{className:A.Gv},a.createElement("span",{className:A.j2},a.createElement(d.B,{svg:L.A})),function(e){if(e.activeSubView===b.U7.PURCHASES)return e.properties.purchasePageType===h.po.ACTIVE?(0,u.t)("settings.account_setting.purchases"):(0,u.t)("settings.account_setting.inactive")}(l)))):n.forEach((r,n)=>{p.push(a.createElement(O,{tab:n,mobileNavTabTitle:r,selectedTab:e.selectedTab,key:n,onClick:()=>e.setTab(n)},r))}),e.isMobile)?a.createElement(f.F,{tabs:p,dispatch:e.dispatch,width:"100vw"}):a.createElement("div",{className:C.k_,style:{minWidth:e.contentWidth},ref:i},a.createElement(E.i,{containerClassName:`${C.ef} ${A.Vq}`,tabs:p}),a.createElement(c.s_,{dispatch:e.dispatch,className:A.b}))}P.displayName="AccountToolBar";let D={ACCOUNT:function(){return a.createElement(w.g,null)},COMMUNITY:I.C,NOTIFICATIONS:function(){return(0,p.iZ)()?a.createElement(T.v,null):null},SESSIONS:S.p,SECURITY:v.m},k="ACCOUNT_SETTINGS_MODAL",M=(0,_.Ju)(function(e){let r=(0,i.wA)(),n=(0,p.iZ)(),s=a.useRef(null),[c,d]=a.useState(-1),[u,h]=a.useState({activeSubView:null,properties:{}}),_=a.useMemo(()=>({accountModalSubViewData:u,setAccountModalSubViewData:h}),[u,h]),f=(0,i.d4)(e=>"recentsAndSharing"===e.selectedView.view?e.selectedView.accountModalTabSection:"");if((0,o.h)(()=>{if(!f)return;let e=document.getElementById(f);e?.scrollIntoView({behavior:"smooth",block:"start"})}),!n)return null;let E=D[e.tab],y=l.rr,I=y?window.innerWidth:Math.min(.7*window.innerWidth,650),T=y?window.innerWidth:Math.max(I,c);return a.createElement(g.aF,{popStack:!0,size:T,height:y?window.innerHeight:.8*window.innerHeight,className:y?N.pW:N.Se,modalRef:s},a.createElement(b.Tk.Provider,{value:_},a.createElement(P,{selectedTab:e.tab,setTab:e=>{r(m.hm({type:k,data:{tab:e}}));let n=s.current;n&&(n.scrollTop=0)},dispatch:r,isMobile:y,contentWidth:I,setToolbarWidth:d}),a.createElement(E,null)))},k,_.ZU.YES)},319285:(e,r,n)=>{n(411855),n(96328),n(163023),n(939863),n(869963),n(466636),n(555328),n(498606)},774620:(e,r,n)=>{n.d(r,{K:()=>b});var a=n(411855),i=n(188507),o=n(563706),s=n(768137),l=n(799569),c=n(939863),d=n(175290),u=n(809840),m=n(970516),p=n(662275),h=n(4564),_=n(498606),g=n(237870),f=n(227795),E=n(488578),y=n(552899);let b=(0,g.Ju)(function(e){let{localPlugin:r}=e,n=(0,i.wA)(),{error:g}=r;if(!g)return null;let b=(0,h.M)(),I=!!b?.isCompatibleWith({desktopVersion:80}),T=o.Ay.mac?(0,c.tx)("universal_insert.show_in_finder"):(0,c.tx)("universal_insert.show_in_explorer");return a.createElement(E.aF,{size:"small",title:(0,c.t)("universal_insert.manifest_error_title")},a.createElement(l.s_,{dispatch:n}),a.createElement(d.Y,{direction:"vertical",spacing:16},a.createElement(d.Y,{direction:"horizontal",horizontalAlignItems:"space-between",width:"fill-parent",verticalAlignItems:"start",spacing:8},a.createElement(d.Y,{backgroundColor:"secondary",padding:4,width:"fill-parent",cornerRadius:3},a.createElement(u.E,{color:"secondary",fontSize:13,fontFamily:"monospace"},g.text)),a.createElement(f.K0,{svg:y.A,onClick:()=>{n(m.lW({stringToCopy:g.text}))},"data-tooltip-type":_.Ib.TEXT,"data-tooltip":(0,c.t)("inspect_panel.copy")})),a.createElement(d.Y,{width:"fill-parent",horizontalAlignItems:"end"},a.createElement(s.nR,{onClick:()=>n(p.Lo())},(0,c.tx)("universal_insert.cancel")),a.createElement(s.$$,{onClick:()=>{I?b.openExtensionManifest(r.localFileId):b.openExtensionDirectory(r.localFileId)}},I?(0,c.tx)("universal_insert.edit_manifest"):T))))},"DevelopmentResourceErrorModal")},33876:(e,r,n)=>{n.d(r,{A:()=>p});var a=n(411855),i=n(188507),o=n(395771),s=n(154254),l=n(939863),c=n(809840),d=n(71425),u=n(884484),m=n(162506);function p({localResource:e,publishedResource:r}){let{error:n,localFilePath:i}=e||{},s=(0,u.Pt)(n?.type,e);if(!e&&r)return a.createElement(_,{resource:r});if(!e||null==i)return null;if(!n)return a.createElement(o.R,{className:m.cV,text:i.replace("/manifest.json","")});if(!s)return null;let{action:l,msg:d,buttonText:p}=s;return a.createElement(a.Fragment,null,a.createElement(c.E,{color:"danger"},d),a.createElement(h,{onClick:l,isError:!0},p))}function h({children:e,onClick:r,isError:n}){return a.createElement("button",{onClick:e=>{e.stopPropagation(),r()},className:s.cx.underline.bgTransparent.with({colorTextDanger:n,colorTextSecondary:!n}).$},e)}function _({resource:e}){let r=(0,i.wA)();return a.createElement("div",{className:m.cV},a.createElement(h,{onClick:()=>{r((0,d.JZ)({resourceType:e.is_widget?"widget":"plugin"}))}},a.createElement(c.E,null,(0,l.tx)("universal_insert.locate_local_version_text"))))}},927206:(e,r,n)=>{n.d(r,{ur:()=>p,xY:()=>h});var a=n(411855),i=n(188507);n(629019),n(946689);var o=n(163023),s=n(939863),l=n(376441),c=n(498606),d=n(376272),u=n(471174),m=(e=>(e.AUTO="auto",e.CONSTRAINED="constrained",e))(m||{});function p(){let e=(0,i.wA)(),r=a.useCallback(r=>{r.stopPropagation(),e(l.v({}))},[e]);return a.createElement("button",{className:d.qS,onClick:r},(0,s.tx)("community.buyer.update_payment"))}function h(){return a.createElement("div",{className:d.QW,"data-tooltip-type":c.Ib.TEXT,"data-tooltip":(0,s.t)("community.buyer.update_payment_info_to_retain_access")},a.createElement(o.B,{svg:u.A}))}},816460:(e,r,n)=>{n.d(r,{E0:()=>o,wR:()=>s});var a=n(91408);n(939863),n(231472);var i=n(837746);(0,a.hG)(i.BuT),(0,a.hG)(i.yUQ),(0,a.hG)(i.XaD),(0,a.hG)(i.fWT),(0,a.hG)(i.nnJ);let o=(0,a.hG)(i.tui),s=(0,a.hG)(i.i_6)},978447:(e,r,n)=>{n(411855),n(563706),n(153234),n(522739),n(163023),n(939863),n(498606)},103567:(e,r,n)=>{n.d(r,{PE:()=>g});var a=n(411855),i=n(188507),o=n(768137),s=n(946689),l=n(939863),c=n(175290),d=n(809840),u=n(225266),m=n(215822);function p(e){return{...e.is_widget?{widget_id:e.id}:{plugin_id:e.id},src:u.Nn.INVITE_TILE}}function h({resource:e}){let r=function(e){let r=(0,i.wA)(),n=p(e);return()=>r((0,u.dx)(n))}(e),n=function(e){let r=(0,i.wA)(),n=p(e);return()=>r((0,u.MZ)(n))}(e);return a.createElement(c.Y,null,a.createElement(o.nR,{onClick:e=>{e.stopPropagation(),n()}},(0,l.tx)("community.detail_view.decline")),a.createElement(s.$$,{onClick:e=>{e.stopPropagation(),r()}},(0,l.tx)("community.detail_view.accept")))}function _({resource:e}){let r=(0,m.uF)(e),n=e.creator,i=e.is_widget?"widget":"plugin",o=`/community/${i}/${e.id}`;return a.createElement(d.E,null,(0,l.tx)("universal_insert.invited_you_to_publish",{ownerName:a.createElement(d.E,{fontWeight:"medium"},n.handle),resourceName:a.createElement(s.CY,{href:o,onClick:e=>{e.stopPropagation()},target:"_blank",trusted:!0},a.createElement(d.E,{fontWeight:"medium"},r.name))}))}function g({resource:e}){return a.createElement(c.Y,{direction:"vertical"},a.createElement(_,{resource:e}),a.createElement(h,{resource:e}))}},389211:(e,r,n)=>{n(411855)},914149:(e,r,n)=>{n(411855),n(154254)},491815:(e,r,n)=>{n.d(r,{mk:()=>c});var a=n(411855);n(188507);var i=n(91408);n(794272);var o=n(572206);n(466636),n(271245),n(395281),n(178323),n(756085),n(875847),n(335682),n(694687),n(860178),n(820642),n(336599),n(106112),n(288300),n(401730),n(376485),n(811529),n(705129);var s=n(816460),l=n(837746);function c(e,r){let n=(0,a.useRef)(null),i=(0,a.useRef)(!1);return r.every(e=>!!e)&&!i.current&&(n.current=e,i.current=!0),null!==n.current?n.current:e}(0,i.hG)(l.Yr1),(0,i.hG)(l.Eg1),new o.Mi(s.wR,s.wR+s.E0),a.createContext(null)},379928:(e,r,n)=>{n.d(r,{I:()=>S});var a=n(411855),i=n(109388),o=n(188507),s=n(299321),l=n(629019),c=n.n(l),d=n(522739),u=n(572206),m=n(986270),p=n(356390),h=n(312167),_=n(860178),g=n(809073),f=n(498606),E=n(80332),y=n(634951),b=n(16774),I=n(28752),T=n(763933);function v({children:e,mini:r,user:n}){return r?a.createElement("div",{className:c()(T.HG,T.ET)},e):a.createElement("div",{"data-tooltip-type":f.Ib.TEXT,"data-tooltip":n.name||n.handle||"","data-tooltip-timeout-delay":"500","data-tooltip-show-below":!0,"data-tooltip-offset-y":"-20",className:c()(T.HG)},e)}function S({user:e,hideName:r,mini:n,searchQuery:i,triggeredFrom:l}){let c=e.hi_res_img_url||e.img_url,d=`${c}?c=1`,f=(0,E.$L)(e.id,E.us),I=(0,y.LL)(d,e.name||e.handle||"",f),S=(0,_.TA)(),L=(0,b.b)(),O=(0,o.wA)(),R=a.useCallback(()=>{O(m.F9({currentUserId:S??void 0,storeInRecentsKey:g.$A.FigJam,item:{id:e.id,user:e,type:g.vt.FaceStamp}}))},[S,O,e]),{dragState:P,onInsertableResourcePointerDown:D}=(0,h.Z)({icon:a.createElement("img",{src:I,className:T.iE,alt:`profile stamp for ${e.name}`}),insertAction:r=>{let{dropPosition:n,isClick:a,type:i}=r;if(a||"click"===i){let r=p.Y5.getViewportInfo();(0,y.xG)(I,r.offsetX,r.offsetY,e.id,"click",s.zkO.USER),R()}else{let a=r.pointerPercentageOffset?r.pointerPercentageOffset.x:0,i=r.pointerPercentageOffset?r.pointerPercentageOffset.y:0,o=new u.Mi(50,50),l=n.subtract(new u.Mi(a*o.x,i*o.y)).subtract(new u.Mi(5,5));(0,y.xG)(I,l.x,l.y,e.id,"drag",s.zkO.USER),R()}},clickToInsert:!n,afterSuccessfulInsert:L,resource:{id:e.id,name:e.name||"",img:I},triggeredFrom:l,searchQuery:i,mini:n});return n&&!I?null:a.createElement(v,{mini:n,user:e},I?a.createElement(a.Fragment,null,a.createElement(N,{stampImageUrl:I,username:e.name||"",onPointerDown:D,dragging:null!==P,mini:n}),a.createElement(C,{dragState:P,imageUrl:I}),!r&&a.createElement(A,{username:e.name||e.handle||""})):a.createElement(a.Fragment,null,a.createElement(w,{mini:n}),!r&&a.createElement(A,{username:""})))}function w({mini:e}={}){return a.createElement("div",{className:c()(T.HG,{[T.ET]:e,[T.M4]:!e})},a.createElement("div",{className:c()(T.eP,T.iE)}),!e&&a.createElement("div",{className:c()(T.t$,T.OP)}))}function A({username:e}){return a.createElement("div",{title:e,className:T.OP},e)}function N(e){return a.createElement(d.GG,{recordingKey:"facestamp",dataTestId:`facestamp-${e.username}${e.mini?"-mini":""}`,onPointerDown:e.onPointerDown},a.createElement("img",{draggable:!1,src:e.stampImageUrl,className:c()(T.iE,{[T.Jy]:e.dragging,[T.dG]:e.mini}),alt:`profile stamp for ${e.username}`}))}function C(e){if(!e.dragState?.dragPosition||!e.dragState.grabbedPointerPercentageOffset)return null;let r=function(){let{zoomScale:e}=p.Y5.getViewportInfo();return new u.Mi(50,50).scale(e)}(),n=e.dragState.dragPosition.subtract(new u.Mi(e.dragState.grabbedPointerPercentageOffset.x*r.x,e.dragState.grabbedPointerPercentageOffset.y*r.y));return(0,i.createPortal)(a.createElement("img",{alt:"",className:c()(I.$J,{[I.Yg]:e.dragState.isDraggingOverCanvas}),style:{left:n.x,top:n.y,width:r.x,height:r.y},src:e.imageUrl}),document.getElementById("fullscreen-root"))}},465448:(e,r,n)=>{n.d(r,{qK:()=>c});var a=n(411855),i=n(188507),o=n(720289),s=n(335682),l=n(707465);function c(){let e=(0,i.d4)(e=>e.recentlyUsed.faceStamps),r=function(){let e=!!s.q5()?.org,r=(0,i.d4)(e=>(0,l.zg)(e.selectedView)&&!e.user);return!!(e&&!r)}(),n=(0,o.o)();return a.useMemo(()=>n&&r?e.figjam.map(e=>e.user):[],[n,e,r])}n(809073)},313148:(e,r,n)=>{n(411855)},144374:(e,r,n)=>{n.d(r,{Yx:()=>y});var a=n(411855),i=n(188507),o=n(299321),s=n(275556);n(153234),n(999237);var l=n(939863);n(738274);var c=n(662275);n(986270),n(737499),n(263908),n(99944),n(288300),n(809073),n(389211),n(491815),n(313148),n(16774);var d=n(109388),u=n(501972),m=n(813648),p=n(237870),h=n(746806),_=n(620597),g=n(746958);let f="delightful-toolbar-media-button",E="InsertMediaModal";function y(e){let r=function(e){switch(e){case"Table":return o.NLJ.TABLE;case"CodeBlock":return o.NLJ.CODE_BLOCK;case"MindMap":return o.NLJ.SHAPE_WHITEBOARD_MINDMAP_TREE_NUCLEUS;case"Text":return o.NLJ.TYPE;case"Section":return o.NLJ.SECTION;default:throw Error(`Unknown tool: ${e}`)}}(e),n=()=>{s.l7.user("click-insert-tool",()=>o.glU.createNodeAtViewportCenterFromTool(r))};return{insertToolWithDragAction:e=>{let{dropPosition:a,isClick:i}=e;i?n():s.l7.user("drag-insert-tool",()=>o.glU.createNodeFromTool(r,a.x,a.y))},insertToolOnClickAction:n}}(0,p.Ju)(function(){let e=(0,i.wA)(),r=(0,i.d4)(e=>!!e.modalShown?.data?.shouldMountCenter),n=a.useRef(null),s=r?{kind:"mountCenter"}:{kind:"buttonTarget",buttonTarget:f},{initialModalPosition:p,modalPosition:y,setModalPosition:b}=(0,m.ts)(s,157,320),I=a.useCallback(()=>{o.glU.triggerAction("set-tool-default",null),e(c.ES({type:E}))},[e]),T=a.useCallback(e=>{b(e)},[b]),v=!y||!!p?.equals(y);return(a.useEffect(()=>{let e=e=>{let r=d.findDOMNode(n.current?.getEl()),a=(0,u.Tc)(f);if(!r||!a)return;let i=r.contains(e.target),o=a.contains(e.target);!v||i||o||I()};return document.addEventListener("pointerdown",e),()=>{document.removeEventListener("pointerdown",e)}},[I,v]),p)?a.createElement(h.vx,{ref:n,initialPosition:p,initialWidth:320,title:(0,l.t)("whiteboard.embeds.insert_embed_modal.title"),onClose:I,onDragStart:()=>o.glU.triggerActionInUserEditScope("set-tool-default",null),onDragEnd:T,dragHeaderOnly:!0,arrowRelativeX:r?void 0:160,arrowPosition:h.F_.BOTTOM,smallArrow:!0,containerClassName:g.jT,headerClassName:g.N1,isFigJam:!0},a.createElement("div",{className:g.hQ,"data-testid":"insert-media-modal"},a.createElement(_.q,{onSuccess:I}))):null},E),n(972283),n(487392)},583718:(e,r,n)=>{n.d(r,{QK:()=>p,zX:()=>m});var a=n(411855),i=n(188507),o=n(915440),s=n(756085),l=n(269167),c=n(813648),d=n(279453),u=n(555328);function m({extensionId:e}){let r=(0,i.d4)(e=>e.currentUserOrgId),n=(0,o.Rs)(d.BB3,{orgId:r});return a.useMemo(()=>n.data?.currentUser?.installedPlugins.find(r=>r.pluginId===e)?.id,[n.data?.currentUser?.installedPlugins,e])}function p(e,r){let n=(0,s.Be)(),a=r===u.vt.PLUGIN?n.plugins[e]:n.widgets[e],o=(0,l.xp)(e),d=(0,l.aQ)(e),p=(0,i.d4)(r=>r.publishedPlugins[e]?o:d),h=m({extensionId:e}),{unsave:_,save:g}=(0,c._i)(e,r,p,h);return{unsave:_,save:g,isSavedForUser:!!(a&&"user"===a.installed_by),isSavedForOrg:!!(a&&"org"===a.installed_by),version:a}}},172226:(e,r,n)=>{var a=n(411855);n(188507),n(629019),n(966712),n(812115),n(268537),n(210954),n(355819),n(163023);var i=n(939863),o=n(71425);n(941381);var s=n(662275);n(672517),n(756085),n(269167),n(170786),n(813648),n(318812),n(737499),n(336599),n(215822),n(288300),n(555328);var l=n(237870);n(96557),n(298543),n(319285),n(927206),n(816460),n(914149),n(491815),n(16774);var c=n(488578);n(553574),(0,l.Ju)(function({dispatch:e}){return a.createElement(c.Rw,{confirmationTitle:(0,i.t)("whiteboard.inserts.widget_development_error_modal_title"),content:(0,i.t)("whiteboard.inserts.widget_development_error_modal_description"),onConfirm:()=>{e((0,o.JZ)({resourceType:"widget"})),e(s.Lo())},confirmText:(0,i.t)("whiteboard.inserts.widget_development_import_manifest"),size:"small",disableClickOutsideToHide:!0,hideOnConfirm:!1,cancelText:(0,i.t)("whiteboard.inserts.widget_development_error_modal_close"),hideCancel:!1,popStack:!0})},"FigjamPublishedDevelopmentWidgetErrorModal",l.ZU.YES)},632788:(e,r,n)=>{n.d(r,{EJ:()=>v,T9:()=>S,_n:()=>T,lD:()=>w,ms:()=>A});var a=n(411855),i=n(188507);n(517333),n(268537);var o=n(939863),s=n(71425);n(970516),n(662275);var l=n(884484),c=n(756085);n(170786);var d=n(813648),u=n(318812),m=n(694687),p=n(215822);n(555328);var h=n(376485),_=n(18993),g=n(756689);n(96557),n(350913);var f=n(507956),E=n(728587),y=n(298543);function b({pluginId:e,preferences:r}){let{pinnedPlugins:n,pinPlugin:a,unpinPlugin:i}=r;return n.find(r=>r.plugin_id===e)?{displayText:(0,o.t)("dev_handoff.inspect_panel.unpin"),callback:()=>{i(e)}}:{displayText:(0,o.t)("dev_handoff.inspect_panel.pin"),callback:()=>{a(e)}}}function I({plugin:e}){let{callback:r,isPluginSetToAutoRun:n}=(0,_.bE)(e??null);return(0,_.aY)(e)?{displayText:(0,o.t)("dev_handoff.inspect_panel.auto_run"),callback:r,isChecked:n}:null}n(172226);let T="DROPDOWN_TYPE_SAVED_AND_RECENT_ACTIONS_DROPDOWN";function v(e){let r=(0,u.Um)(),n=(0,g.VR)(),i=(0,f.ks)(),s=(0,m.sZ)(),l=(0,c.ll)(),d=I({plugin:e.plugin}),h=[];return(h.push({displayText:(0,o.t)("universal_insert.view_details"),callback:e.viewResource}),i&&((0,p.Th)(e.plugin,s,l)&&n.loaded&&h.push(b({pluginId:e.plugin.plugin_id,preferences:n})),d&&h.push(d)),r)?i?a.createElement(A,{parentRect:r?.data.targetRect,lean:"left",minWidth:64,items:h,autoHeight:!0}):a.createElement(A,{parentRect:r?.data.targetRect,lean:"left",minWidth:64,items:h}):null}function S(e){if(!e.localResource&&!e.publishedResource)throw Error("Either localResource or publishedResource is required");let r=(0,f.ks)(),n=(0,i.wA)(),m=(0,u.Um)(),_=Object.values((0,c.$1)()).find(r=>r.plugin_id===e.publishedResource?.id),E=(0,g.VR)(),y=I({plugin:e.publishedResource?(0,p.uF)(e.publishedResource):null}),T=e.localResource||_,v=(0,c.B7)(T?T.plugin_id:e.publishedResource.id),S=(0,c.Ud)(T?T.plugin_id:e.publishedResource.id),w=e.publishedResource||v||S,N=!!w?.versions[w.current_plugin_version_id],C=w?w.is_widget:T?.manifest.containsWidget,L=(0,d.LR)(),O=(0,l.NV)(T,w),R=(0,l.OX)(w),P=(0,l.x2)(T,w,L),D=(0,l.qu)(T),k=(0,l.qi)(N,()=>{T&&n(s.qR(T?.localFileId))});if(!m||!m.data.targetRect)return null;let M=[];(T&&!T.error||w)&&M.push(O),N&&e.viewResource&&M.push({displayText:(0,o.t)("universal_insert.view_details"),callback:e.viewResource}),N&&M.push(P),T&&T.error?.type!==h.ho.LOAD&&M.push(D),T||M.push({displayText:(0,o.t)("universal_insert.locate_local_version"),callback:()=>{(0,s.JZ)({resourceType:C?"widget":"plugin"})}});let F=[];w&&N&&E.loaded&&r&&F.push(b({pluginId:w.id,preferences:E})),N&&y&&F.push(y);let x=[];T&&x.push(k),R&&x.push(R);let U=M.some(Boolean)&&(x.some(Boolean)||F.some(Boolean))&&{displayText:"",separator:!0},B=x.some(Boolean)&&F.some(Boolean)&&{displayText:"",separator:!0};return a.createElement(A,{parentRect:m.data.targetRect,lean:"left",minWidth:y?220:120,rootAndSubmenuMaxWidth:y?void 0:190,disableDropdownScrollContainer:!0,hidePointWhenContentOffScreen:!0,dataTestId:"developmentResourceOptionDropdown",items:[...M,U,...F,B,...x].filter(e=>!!e)})}let w="DROPDOWN_TYPE_DEVELOPMENT_RESOURCE_OPTIONS_DROPDOWN";function A(e){let r=(0,i.wA)();return a.createElement(E.j,{...e,dispatch:r,showPoint:!0,type:y.it.DEFAULT,onSelectItem:e=>{e.callback&&e.callback("",null,r)}})}},760445:(e,r,n)=>{n.d(r,{B6:()=>p,Kr:()=>c,Nh:()=>h,Zm:()=>m,kB:()=>_});var a=n(411855);n(188507);var i=n(91408);n(96328),n(799569),n(154254);var o=n(939863);n(870505),n(779709),n(457630),n(231472),n(457689),n(507956),n(978447),n(824049),n(56714);var s=n(837746);n(132752),(0,i.hG)(s.rDe);let l=(0,i.hG)(s.SKA);(0,i.hG)(s.rZj);let c=44;(0,i.hG)(s.wgS);let d=(0,i.hG)(s.iah),u=(0,i.hG)(s.LdP);(0,i.hG)(s.paq);let m=6,p=2;function h(e){if(!e)return{x:d,y:d};let r=document.querySelector("#toolbelt-action-component-insert");if(r){let e=r.getBoundingClientRect(),n=e?e?.top-l-6:u;return{x:e?.x||284,y:n}}{let e=document.querySelector("#toolbar-action-component-insert")?.getBoundingClientRect();return{x:e?.x||284,y:e?.bottom||u}}}function _(e){if(!e.community_publishers?.accepted||0===e.community_publishers.accepted.length)return"";let r=e.community_publishers.accepted[0].name;return 1===e.community_publishers.accepted.length?(0,o.t)("community.resource.by_creator",{spaceChar:" ",creator:r}):(0,o.t)("community.resource.by_more_than_2_creators",{spaceChar:" ",creator1:r,others:(0,o.t)("community.resource.by_x_others",{numPublishers:e.community_publishers.accepted.length-1})})}a.createContext(null)},76158:(e,r,n)=>{n.d(r,{s:()=>a});var a=(e=>(e.COMPONENT="component",e.PLUGIN="plugin",e.WIDGET="widget",e))(a||{}),i=(e=>(e[e.MAIN=0]="MAIN",e[e.ORG_PRIVATE_EXPANDED_LIST=1]="ORG_PRIVATE_EXPANDED_LIST",e[e.ORG_ALLOWLIST_EXPANDED_LIST=2]="ORG_ALLOWLIST_EXPANDED_LIST",e))(i||{})},76154:(e,r,n)=>{n.d(r,{dr:()=>e_,yG:()=>eg});var a=n(411855),i=n(188507),o=n(432258);n(275556);var s=n(629019),l=n.n(s);n(517333),n(563042);var c=n(946689),d=n(723325),u=n(163023),m=n(348425),p=n(154254),h=n(939863),_=n(501114),g=n(175290),f=n(365292),E=n(408552),y=n(872860),b=n(472353),I=n(466636);n(545941);var T=n(738269),v=n(931828),S=n(672517),w=n(802915),A=n(780700),N=n(756085),C=n(988022),L=n(269167),O=n(641638);n(170786);var R=n(318812),P=n(694687),D=n(99506),k=n(215822),M=n(555328);n(376485);var F=n(498606),x=n(18993),U=n(978527),B=n(464628),V=n(399932);n(933464);var G=n(37637),H=n(507956),W=n(728587),K=n(227795);n(33876);var Y=n(927206);n(103567);var $=n(552993);n(172226);var j=n(632788),z=n(760445);n(76158);var q=n(132752),X=n(292164),J=n(362679),Z=n(13556),Q=n(237494),ee=(e=>(e.COMMUNITY="community",e.RECENT="recent",e.DEVELOPMENT="development",e.DEVELOPMENT_MISSING_LOCAL="development_missing_local",e.ORG_PRIVATE="org_private",e.SAVED="saved",e.INVITED="invited",e))(ee||{});function et(e){let r=(0,i.d4)(e=>e.orgById);if(e.resource.is_private){let n=e.resource?.org_id&&r[e.resource.org_id]?.name;return a.createElement(u.B,{svg:Q.A,className:q.kQ,"data-tooltip-type":F.Ib.TEXT,"data-tooltip":n?(0,h.t)("community.plugins.private_for_plugin_org_name",{orgName:n}):(0,h.t)("community.plugins.private_for_plugin_org")})}return a.createElement(a.Fragment,null)}let er=a.createContext(null);function en(){return(0,o.sR)(a.useContext(er),"Must be wrapped within <FdBrowseWidgetTileContext.Provider>")}let ea=a.createContext(null);function ei(){return(0,o.sR)(a.useContext(ea),"Must be wrapped within <FdBrowsePluginTileContext.Provider>")}function eo(e,r,n){let i=a.useRef(null),o=a.useCallback(()=>{i.current&&i.current.click()},[i]),{setKeyboardNavigationElement:s,isFauxFocused:l,keyboardNavigationItem:c}=(0,d.M3)({path:r||[0],fauxClick:o,id:e}),u=n&&r&&r.length>=2&&r[0]===z.B6&&0===r[1];return a.useEffect(()=>{u&&c?.fauxFocus()},[u,c]),{setKeyboardNavigationElement:s,isFauxFocused:l,keyboardNavigationButtonRef:i}}a.memo(function(e){let r=(0,N.Be)(),n=r.plugins[e.pluginId]||r.orgPlugins[e.pluginId],i=(0,N.b4)()[e.pluginId],o=(0,N.cW)()[e.pluginId],s=a.useMemo(()=>"recent"===e.type?i:"org_private"===e.type?(0,k.uF)(o):n,[n,e.type,o,i]),l=(0,R.Um)(),c=l?.type===j._n&&l.data.pluginId===e.pluginId&&l.data.targetRect&&l.data.viewType===e.type,d=eg(e.pluginId,e.type);return a.createElement(es,{pluginId:e.pluginId,type:e.type,dropdownIsShown:c,runOptionsDropdownIsShown:d,version:s})});let es=a.memo(function(e){let{dropdownIsShown:r,version:n}=e,o=(0,i.wA)(),{viewPluginDetails:s}=ei(),l=a.useCallback(n=>{n.stopPropagation(),r?o(T.oB()):o(T.j7({type:j._n,data:{pluginId:e.pluginId,targetRect:n.currentTarget.getBoundingClientRect(),viewType:e.type}}))},[r,o,e.pluginId,e.type]),c=(0,A.dR)(e.pluginId,"universal-insert"),d=(0,A.Gt)(e.pluginId,"universal-insert"),u=(0,w.t)(e.pluginId,d,c),m=u.length>0,p=e.runOptionsDropdownIsShown&&m,h=a.useRef(null),{validatePublishedPluginInOrgAllowlist:_,isPluginBlockedByAllowlist:g}=(0,N.j1)(e.pluginId),f=(0,A.RK)(e.pluginId),E=a.useCallback(r=>{if(r?.stopPropagation(),_()){if(m){p?o(T.oB()):o(e_({pluginId:e.pluginId,tileType:e.type}));return}f?d():c(),o(v.b({seen_published_plugin_onboarding_modal:!0})),o(v.b({seen_development_plugin_onboarding_modal:!0}))}},[_,m,f,o,p,e.pluginId,e.type,d,c]),y=h.current?.getBoundingClientRect();if(!n)return null;let b=!!(p&&y)||r,I=a.createElement($._W,{resourceId:e.pluginId,resourceType:M.vt.PLUGIN,parentView:$.nN.TILE,isFauxFocused:b});return a.createElement("div",null,a.createElement(ec,{pluginVersion:n,pluginId:e.pluginId,onOptionsClick:l,optionsButtonIsActive:r,onClick:E,showOnClickDropdownChevron:m,secondaryIcon:a.createElement(et,{resource:n}),primaryCTAButton:I,isFauxFocused:b,visuallyDisabled:g}),a.createElement("div",{ref:h}),p&&y&&a.createElement(W.j,{showPoint:!1,lean:"center",items:u,onSelectItem:e=>{e.callback&&e.callback("",null,o)},parentRect:y,dispatch:o}),r&&a.createElement(j.EJ,{viewResource:s,plugin:n}))});function el({pluginId:e,name:r,icon:n,iconUrl:i}){let[o,s]=a.useState(!!n);return a.createElement("div",{className:l()(o?q.lP:q.vt)},n||a.createElement(U.V,{plugin:{name:r,plugin_id:e,redirect_icon_url:i??""},loading:"lazy",alt:`${r} icon`,onLoad:()=>s(!0)}))}function ec(e){let r;let n=e.pluginVersion?.name??e.localPlugin?.name??"",i=e.pluginVersion?.redirect_icon_url,{isPluginSetToAutoRun:o}=(0,x.bE)(e.pluginVersion??null),s=e.localPlugin?e.localPlugin.manifest.editorType:e.pluginVersion?.manifest.editorType,c=!e.subheader,{viewPluginDetails:d,keyboardNavigationPath:b,shouldFocusFirstItem:I}=ei(),{setKeyboardNavigationElement:T,isFauxFocused:v,keyboardNavigationButtonRef:w}=eo(`plugin_${n}`,b,!!I),A=(0,S.j6)(),R=(0,L.ul)(e.pluginId),D=Object.values((0,N.$1)()).find(r=>String(r.plugin_id)===e.pluginId),M=(0,k.uF)(R),U=(0,k.pk)(M),B=(0,L.EO)(R)&&!D,V=(0,L.OY)(R),W=(0,L.gn)(R)&&!D,$=(0,P.sZ)(),j=(0,N.ll)(),z=!D&&(0,O.BF)({org:$,extensionVersion:M??e.pluginVersion,isWidget:!1,allowlistedExtensions:j}),Q=e.isCommunityPreview&&!z&&!e.isDevModeWizard,ee=B&&!V?a.createElement(ef,{plugin:R,hideFreeTrialBadge:!0}):W?a.createElement(Y.ur,null):Q?a.createElement(ep,{pluginId:e.pluginId,buttonRef:w}):void 0,et=(0,E.QP)({resource:R,height:"16",validBadges:[E.op.FREEMUM,E.op.OFF_PLATFORM,E.op.PURCHASED]}),er=e.metadataOverrideNode??a.createElement(a.Fragment,null,a.createElement("div",{className:q.FV},a.createElement(g.Y,{spacing:4},a.createElement("div",{className:l()(q.B6,{[p.cx.colorTextDisabled.$]:e.visuallyDisabled})},n),o&&a.createElement(f.Ex,{height:"16"},(0,h.t)("universal_insert.auto_run")),e.inReview&&a.createElement(y.L,{height:"16"}),!!e.secondaryIcon&&e.secondaryIcon,et&&!W&&a.createElement("div",{className:q.UK},et),e.publishingStatusIcon&&a.createElement("div",{className:p.cx.colorIcon.$},a.createElement(m.t,{svg:e.publishingStatusIcon})),e.showOnClickDropdownChevron&&a.createElement(u.B,{svg:X.A,className:q.o2})),e.subheader&&a.createElement("div",{className:q.ZK},e.subheader)),ee&&a.createElement("div",{className:q.D1},ee),e.onOptionsClick&&a.createElement(K.K0,{svg:J.A,fallbackSvg:Z.A,className:e.optionsButtonIsActive?q.F$:q.D1,onClick:e.onOptionsClick,"data-tooltip-type":F.Ib.TEXT,"data-tooltip":(0,h.t)("universal_insert.more_options")}),e.primaryCTAButton&&a.createElement("div",{style:_.sx.add({alignSelf:"center"}).$},e.primaryCTAButton)),en=function(e,r){if((0,H.ks)());else if(e&&r)return!0;return!1}(e.showEditorTypeIcon,s),ea=(0,H.ks)();r=en?a.createElement(G.li.IconAndBadgeContainer,null,a.createElement(el,{pluginId:e.pluginId,name:n,iconUrl:i,icon:e.icon}),a.createElement(G.li.BadgeContainer,{fromBrowseResourceModal:!0,resourceType:"plugin"},a.createElement(G.dn,{editorType:s,is16x16:!0}))):ea&&U?a.createElement(G.li.IconAndBadgeContainer,null,a.createElement(el,{pluginId:e.pluginId,name:n,icon:e.icon,iconUrl:i}),a.createElement(G.li.BadgeContainer,{fromBrowseResourceModal:!0,resourceType:"plugin"},a.createElement(G.ZA,null))):a.createElement(el,{pluginId:e.pluginId,name:n,icon:e.icon,iconUrl:i});let es=()=>{if((0,C.Cu)({trackingContext:A.name,pluginId:e.pluginId}),B&&!V||z){d();return}if(e.onClick){e.onClick();return}d()};return a.createElement("div",{className:l()(c?q.$C:q.MJ,v||e.isFauxFocused?q.c6:void 0,e.isDevModeWizard?q.NH:void 0),onClick:es,role:"button",tabIndex:0,ref:b?T:void 0},a.createElement("button",{onClick:e=>{e.stopPropagation(),es()},ref:Q?void 0:w,"data-testid":"plugin-tile-button"}),a.createElement("div",{className:q.ot},e.isNotification&&a.createElement("div",{className:q.Vx}),r),er)}function ed(e){let r=useDispatch(),n=useLocalWidgets(),a=React.useMemo(()=>e.localFileId?n[e.localFileId]:void 0,[n,e.localFileId]),i=usePublishingPlugins(),o=a?a.plugin_id:e.widgetId,s=useMyPublishedWidgets({includePendingPublishers:!1}),l=React.useMemo(()=>Object.values(s).find(e=>e.id===o),[s,o]),c=React.useMemo(()=>l&&l.current_plugin_version_id?l.versions[l.current_plugin_version_id]:void 0,[l]),d=useDropdownShown(),{viewWidgetDetails:u}=en(),m=d?.type===DevelopmentPluginTile.DEVELOPMENT_WIDGET_DROPDOWN&&d?.data.isRecentTile===e.isRecentTile&&d?.data.localFileId===e.localFileId&&d?.data.pluginId===o&&d?.data.targetRect,p=React.useCallback(n=>{if(n.stopPropagation(),m)r(fileBrowserActions.hideDropdown());else{let a=n.currentTarget.getBoundingClientRect();r(fileBrowserActions.showDropdown({type:DevelopmentPluginTile.DEVELOPMENT_WIDGET_DROPDOWN,data:{localFileId:e.localFileId,pluginId:o,isRecentTile:e.isRecentTile,targetRect:a}}))}},[r,e.localFileId,o,e.isRecentTile,m]),h=React.useCallback(()=>{a&&createWidget({pluginID:a.plugin_id,widgetName:a.name,pluginVersionID:"",triggeredFrom:"universal-insert"})},[a]);if(!a&&!l)return null;let _=React.createElement(DevelopmentResourceStatus,{localResource:a,publishedResource:l}),g=l&&isInReview(l),f=l&&getPluginVersionOrEmptyVersion(l).redirect_snapshot_url||e.localFileId&&i[e.localFileId]&&i[e.localFileId].metadata.widgetSnapshotImageSrc||widgetDevelopmentSnapshotSvgIcon,E=l&&!g?l.roles.is_public?globeIcon:lock:void 0;return React.createElement(React.Fragment,null,React.createElement(em,{widget:c,localWidget:a,subheader:_,iconUrl:f,widgetId:o,onClick:()=>h(),onOptionsClick:p,optionsButtonIsActive:m,useHorizontalLayout:!0,showEditorTypeIcon:!1,publishingStatusIcon:E,inReview:g}),m&&(a?React.createElement(DevelopmentResourceOptionsDropdown,{localResource:a,viewResource:u}):React.createElement(DevelopmentResourceOptionsDropdown,{publishedResource:l,viewResource:u})))}function eu({useHorizontalLayout:e=!1,onIconClick:r,disabled:n,iconUrl:o="",widget:s,publishedWidget:l,keyboardNavigationButtonRef:c}){let d=a.useMemo(()=>e?[E.op.PRICE]:[E.op.PURCHASED,E.op.OFF_PLATFORM,E.op.FREEMUM,E.op.PRICE],[e]),u=(0,i.d4)(e=>e.authedActiveCommunityProfile);return a.createElement("div",{className:e?q.Zv:q.Cq,onClick:r,role:"button",tabIndex:0},n?a.createElement(B.z,{src:o,context:D._Y.DESIGN}):a.createElement(V._,{widget:s,src:o,analytics:{triggeredFrom:"universal-insert"},keyboardNavigationButtonRef:c,context:D._Y.DESIGN}),a.createElement("div",{className:q.VJ},(0,E.$3)({resource:l,authedActiveCommunityProfile:u,validBadges:d,height:e?"16":"24"})))}let em=a.memo(function(e){let r=e.localWidget??e.widget??k.lT,{viewWidgetDetails:n,keyboardNavigationPath:i,shouldFocusFirstItem:o}=en(),{setKeyboardNavigationElement:s,isFauxFocused:c,keyboardNavigationButtonRef:d}=eo(`widget_${r.name}`,i,!!o),u=(0,N.ZT)()[e.widgetId],f=(0,L.EO)(u),E=(0,L.gn)(u),b=u?(0,k.uF)(u):null,I=r.name;b?.name&&b?.name!==""&&(I=b?.name);let T=(0,P.sZ)(),v=(0,N.U6)(),w=!e.localWidget&&(0,O.BF)({org:T,extensionVersion:b??e.widget,isWidget:!0,allowlistedExtensions:v}),A=!!(f||w),R=(0,S.j6)(),D=A?void 0:e=>e.stopPropagation(),M=e.metadataOverrideNode??a.createElement(a.Fragment,null,a.createElement("div",{className:q.QF},a.createElement("div",{className:q.JW},a.createElement(g.Y,{spacing:4,verticalAlignItems:"center"},a.createElement("div",{className:l()(q.Y2,{[p.cx.colorTextDisabled.$]:e.visuallyDisabled})},I),e.inReview&&a.createElement(y.L,{height:"16"}),!!e.secondaryIcon&&e.secondaryIcon,e.publishingStatusIcon&&a.createElement("div",{className:p.cx.colorIcon.$},a.createElement(m.t,{svg:e.publishingStatusIcon})),E&&a.createElement("div",{className:q.Y9},a.createElement(Y.xY,null)))),a.createElement("div",{className:q.ML},e.subheader)),e.onOptionsClick&&a.createElement(K.K0,{svg:J.A,fallbackSvg:Z.A,className:e.optionsButtonIsActive?q.F$:q.D1,onClick:e.onOptionsClick,"data-tooltip-type":F.Ib.TEXT,"data-tooltip":(0,h.t)("universal_insert.more_options")}),e.primaryCTAButton&&a.createElement("div",{style:_.sx.add({alignSelf:"center"}).$},e.primaryCTAButton));return a.createElement("div",{className:l()(e.useHorizontalLayout?q.Gy:q.BG,c?q.c6:void 0),onClick:r=>{(0,C.Cu)({trackingContext:R.name,widgetId:e.widgetId}),A?n():e.onClick?e.onClick(r):n()},role:"button",tabIndex:0,ref:i?s:void 0,"data-testid":"widget-tile"},a.createElement("div",{className:q.ot},e.isNotification&&a.createElement("div",{className:q.Vx}),e.showEditorTypeIcon?a.createElement(G.li.IconAndBadgeContainer,null,a.createElement(eu,{useHorizontalLayout:e.useHorizontalLayout,onIconClick:D,disabled:A,iconUrl:e.iconUrl,widget:r,publishedWidget:u,keyboardNavigationButtonRef:d}),a.createElement(G.li.BadgeContainer,{fromBrowseResourceModal:!0,resourceType:"widget"},a.createElement(G.dn,{editorType:e.editorType,is16x16:!0}))):a.createElement(eu,{useHorizontalLayout:e.useHorizontalLayout,onIconClick:D,disabled:A,iconUrl:e.iconUrl,widget:r,publishedWidget:u,keyboardNavigationButtonRef:d})),M)});function ep(e){let r=(0,i.wA)(),n=a.useRef(null),o=(0,R.Um)(),s=(0,N.JI)(),l=(0,H.ks)(),d=(0,A.dR)(e.pluginId,"universal-insert"),m=(0,A.Gt)(e.pluginId,"universal-insert"),p=(0,w.t)(e.pluginId,m,d),_=p.length>0,g=eg(e.pluginId,"community"),f=_&&o?.type===e.dropdownShownType&&o?.data.pluginId===e.pluginId,E=g||f,{validatePublishedPluginInOrgAllowlist:y}=(0,N.j1)(e.pluginId),b=(0,A.RK)(e.pluginId),I=a.useCallback(n=>{if(n.stopPropagation(),y()){if(_){E?r(T.oB()):(e.dropdownShownType&&r(T.j7({type:e.dropdownShownType,data:{pluginId:e.pluginId}})),r(e_({pluginId:e.pluginId,tileType:"community"})));return}b?m():d(),r(v.b({seen_published_plugin_onboarding_modal:!0})),r(v.b({seen_development_plugin_onboarding_modal:!0}))}},[y,_,b,r,E,e.dropdownShownType,e.pluginId,m,d]);if(l&&!s)return null;let S=n.current?.getBoundingClientRect(),C=e.usePrimaryButtonStyles?a.createElement(c.$$,{onClick:I,className:q.lI},(0,h.tx)("universal_insert.run"),_&&a.createElement(u.B,{svg:X.A,className:q.sI})):a.createElement("button",{className:q.lO,onClick:I,ref:e.buttonRef},(0,h.tx)("universal_insert.run"),_&&a.createElement(u.B,{svg:X.A,className:q.zZ}));return a.createElement("div",{className:e.usePrimaryButtonStyles?q.od:void 0,"data-testid":"run-plugin-button"},a.createElement("div",{ref:n},C),E&&S&&a.createElement(W.j,{showPoint:!1,items:p,onSelectItem:e=>{e.callback&&e.callback("",null,r)},parentRect:S,dispatch:r,lean:"left"}))}let eh="DROPDOWN_TYPE_RUN_PLUGIN_SUBMENU";function e_(e){return T.j7({type:eh,data:e})}function eg(e,r){let n=(0,R.Um)();return n?.type===eh&&n.data.pluginId===e&&r===n.data.tileType}function ef(e){let r=(0,L.lt)(e.plugin);return e.plugin.monetized_resource_metadata?a.createElement("div",{className:q.y2},a.createElement("div",{className:q.lO},(0,I.bV)(e.plugin.monetized_resource_metadata)),!e.hideFreeTrialBadge&&(0,I.Lt)({resource:e.plugin,payment:r})&&a.createElement(b.w5,{metadata:e.plugin.monetized_resource_metadata,condensed:!0})):null}},824049:(e,r,n)=>{n(188507),n(226055),n(231472)},794321:(e,r,n)=>{n.d(r,{fD:()=>i});var a=(e=>(e.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 brainstorm template interacted",e.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 team updates template interacted",e.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 team chart template interacted",e.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 planning ahead template interacted",e))(a||{}),i=(e=>(e.BRAINSTORM="BRAINSTORM",e.UPDATES="TEAM UPDATES",e.PLAN="PLANNING AHEAD",e.TEAM="TEAM CHART",e.NONE="NONE",e))(i||{})},27928:(e,r,n)=>{n.d(r,{KF:()=>x});var a=n(411855),i=n(188507),o=n(67151),s=n(7674),l=n(91408),c=n(939863),d=n(662275),u=n(931828),m=n(672517),p=n(178323),h=n(965480),_=n(777078),g=n(988022),f=n(335682),E=n(820642),y=n(99506),b=n(106112),I=n(555328),T=n(809073),v=n(237870),S=n(488578),w=n(15839),A=n(342056),N=n(406094),C=n(307954),L=n(458602),O=n(938573),R=n(623009),P=n(305694),D=n(119101),k=n(79132),M=n(837746),F=n(292954);function x(e,r){r.editorType=r.editorType||y._Y.WHITEBOARD,e(d.$O({type:G.type,data:r}))}function U(e){let r;let{onTemplateInsertedCurrentFile:n,onTemplateInsertedNewFile:l,hideModal:m}=e,g=(0,i.wA)(),f=a.useRef(null),{templates:y,categoryTitles:v,duplicateFile:S,fileKey:w,searchQuery:A,searchTemplatesResult:M,setSearchQuery:x,categoryIds:U,subcategories:B}=(0,k.bg)({source:"browse-templates-modal"}),{templates:V,categoryIds:H}=(0,k.bg)({templatesShelfType:I.cS.FIGJAM_SIMPLE_TEMPLATES_PICKER}),W={...V,...y},K=(0,h.Gi)(),Y={};H.reduce((e,r)=>(e[r]=(0,c.t)("browse_templates_modal_sidebar.get_started"),e),Y);let $={...v,...Y},[j,z]=a.useState(),[q,X]=a.useState(),J=(0,s.Im)(W),Z=j&&Object.values(W).find(e=>e.includes(j))||[],{insertTemplate:Q,isInsertingTemplate:ee}=(0,_.Fz)(),et=(0,i.d4)(e=>j?e.hubFiles[j]:null),er=a.useCallback(()=>{"newFile"===e.triggeredFrom&&g(u.b({figjam_templates_picker_new_file_closed:!0})),m?m():g(d.ES(G))},[e.triggeredFrom,g,m]),en=a.useCallback(()=>{n?n():er()},[n,er]);a.useEffect(()=>{let r=U.filter(r=>v[r]===e.initiallySelectedCategoryTitle);1===r.length&&X(r[0])},[U,v,e.initiallySelectedCategoryTitle]),a.useEffect(()=>{f.current?.scrollTo(0,0),j&&et&&(0,p._)("resource_previewed",{fileKey:w,resourceType:"template",resourceName:(0,E.a6)(et).name,resourceId:j,triggeredFrom:"browse-templates-modal",templateType:b.n.HubFile})},[j,w,et]);let ea=!A,ei=(0,_.b4)(),eo=(0,_.WS)(),es=e=>ee(e)||eo(e),el=r=>{if(e.templateInsertionLocation===E.RD.CURRENT_FILE)Q({template:r,onSuccess:en,triggeredFrom:"browse-templates-modal"});else{switch(r.type){case b.n.HubFile:S(r.template.id);break;case b.n.TeamTemplate:ei({templateIdentifier:{type:T.vt.TeamTemplate,file_key:r.template.file_key},templateName:r.template.name,openInNewTab:!0});break;case b.n.TeamTemplateLg:ei({templateIdentifier:{type:T.vt.TeamTemplate,file_key:r.template.fileKey},templateName:r.template.name,openInNewTab:!0});break;default:(0,o.xb)(r)}l?.()}};if(j)r=a.createElement(C.h,{templateId:j,templateInsertionLocation:e.templateInsertionLocation,insertTemplate:el,isInsertingTemplate:es(j),moreTemplateIds:Z,selectTemplate:z}),ea=!1;else if(A)r=a.createElement(L.D,{searchQuery:A,hubFileResultIds:M,isInsertingTemplate:es,onInsertTemplate:el,onPreviewHubFileTemplate:z});else if(q===O.u)switch(K?.type){case"org":r=a.createElement(P.yB,{insertTemplate:el,isInsertingTemplate:es,templateInsertionLocation:e.templateInsertionLocation});break;case"team":r=a.createElement(D.z,{teamId:K.entity.id,teamName:K.name,onInsert:el,isInsertingTemplate:es,templateInsertionLocation:e.templateInsertionLocation});break;default:r=a.createElement(a.Fragment,null)}else r=J?a.createElement(a.Fragment,null):a.createElement(N.s,{templates:W,categoryIds:U,categoryTitles:$,selectedCategory:q,selectCategory:X,enterCommunityUrl:"/community/figjam",templateInsertionLocation:e.templateInsertionLocation,previewHubFile:z,onInsertTemplate:el,isInsertingTemplate:es});return a.createElement(a.Fragment,null,a.createElement(R.F,{editorType:e.editorType,triggeredFrom:e.triggeredFrom,searchQuery:A,setSearchQuery:x,previewTemplateId:j,goBack:()=>z(void 0),hideModal:er}),a.createElement("div",{className:F.jE,ref:f},ea&&a.createElement(O.J,{categoryIds:U,categoryTitles:$,selectedCategory:q,selectCategory:X,makeSomethingCategoryId:H?.length?H[0]:"",triggeredFrom:e.triggeredFrom,subcategories:B}),r))}function B(e){let r=(0,i.wA)(),{hideModal:n,hideTintedModalBackground:o}=e,s=a.useCallback(()=>{n?n():r(d.ES(G))},[r,n]),c="newFile"===e.triggeredFrom,u="whiteboard"===e.editorType?c?F.hW:F.sd:c?F.b8:F.yl,{properties:p,name:h}=(0,m.j6)();return a.createElement(S.aF,{className:u,backgroundClassName:c?F.XO:void 0,size:(0,l.hG)(M.jmC),onHide:()=>{(0,g.Cu)({...p,trackingContext:h,text:A.T}),s()},tintedModalBackground:!o},a.createElement(U,{...e}))}function V(e){let r=(0,f.tS)();return a.createElement(m.fu,{name:"template_modal_shown",properties:{fileKey:r,source:e.triggeredFrom}},a.createElement(B,{...e}))}let G=(0,v.Ju)(V,"BrowseTemplatesModal"),H=(e=!0,r)=>({modalType:w.q3.WELCOME,trackingContextName:"Browse Templates Modal",element:n=>a.createElement(V,{editorType:y._Y.WHITEBOARD,templateInsertionLocation:E.RD.CURRENT_FILE,triggeredFrom:"newFile",hideModal:r?n.onClickPrimaryCta:n.dismissModal,hideTintedModalBackground:e})});H(),H(!0,!0),H(!1)},540292:(e,r,n)=>{n.d(r,{AF:()=>x,Cm:()=>$,G3:()=>Y,Kt:()=>K,Pr:()=>U,iq:()=>k,tJ:()=>B});var a=n(411855),i=n(188507),o=n(67151),s=n(424587),l=n(686046),c=n(629019),d=n.n(c),u=n(983405),m=n(737947),p=n(915440),h=n(860601),_=n(268537),g=n(493323),f=n(154254),E=n(939863),y=n(970516),b=n(738269),I=n(988022),T=n(128765),v=n(27703),S=n(318812),w=n(820642),A=n(279453),N=n(106112),C=n(882945),L=n(554905),O=n(573666),R=n(927625),P=n(79132),D=n(292954);function k(e){return a.createElement("div",{className:D.sk},e.children)}function M({template:e}){let r=(0,S.Um)(),{primaryKey:n}=(0,T.fG)()(e);return r?.type===P.hx&&r?.data?.templatePrimaryKey===n&&r.data?.position?a.createElement(F,{template:e,position:r.data.position}):null}function F({template:e,position:r}){let n=(0,i.wA)(),{viewSourceFileUrl:o,duplicateLink:s,primaryKey:l}=(0,T.fG)()(e),c=e.type===N.n.TeamTemplate,d=(0,p.Rs)(A.sMs,{key:l},{enabled:c});return a.createElement(_.ms,{style:{...r,position:"fixed"}},a.createElement(_.c$,{onClick:()=>{n(b.oB()),n(y.S({url:s}))}},(0,E.tx)("browse_templates_modal.context_menu.copy_link")),o&&c&&a.createElement(_.c$,{onClick:()=>{n(b.oB()),m.Ay.redirect(o,"_blank")},disabled:"loading"===d.status||"disabled"===d.status||!d.data?.file?.hasPermission},a.createElement(u.Y1,{width:"fill-parent",horizontalAlignItems:"space-between",verticalAlignItems:"center",spacing:8},a.createElement("span",null,(0,E.tx)("browse_templates_modal.context_menu.view_original_file")),a.createElement(g.kt,{className:f.cx.if("loading"!==d.status,f.cx.invisible).$}))))}function x(e){let{clientMeta:r,imageUrl:n,thumbnailIsSet:i,isWhiteboard:o,name:s,publishers:l,hubFileId:c,resizedThumbnailUrls:d}=(0,T.fG)()(e.template),u=(0,P.jq)(e.template),m=(0,L.Td)();return a.createElement(a.Fragment,null,a.createElement(C.zq,{onContextMenu:u,image:a.createElement(C.FK,{backgroundColor:(0,v.Cn)(r)},a.createElement(C.zx.Cover,null,a.createElement("button",{className:D.n_,onClick:e.onInsert,disabled:e.isInsertingTemplate||m})),a.createElement(C.zx.Center,null,a.createElement(O.i,{insertTemplate:e.onInsert,isInsertingTemplate:e.isInsertingTemplate,shouldUseOpaqueBackground:!0},(0,w.Ve)(e.templateInsertionLocation))),a.createElement(R.Ho,{image:n,isSet:i,isWhiteboard:o,hubFileId:c,alt:s,resizedThumbnailUrls:d})),bottomRow:a.createElement(C.Wf.FullMetadata,{name:s,publishers:l,hoverText:e.onPreview?(0,E.t)("browse_templates_modal.view_details"):void 0,onClick:e.onPreview||h.lQ})}),a.createElement(M,{template:e.template}))}function U(e){let r=(0,i.d4)(r=>r.hubFiles[e.hubFileId]);return a.createElement(x,{template:{template:r,type:N.n.HubFile},onInsert:()=>e.onInsert({template:r,type:N.n.HubFile}),isInsertingTemplate:e.isInsertingTemplate,onPreview:e.previewHubFile,templateInsertionLocation:e.templateInsertionLocation})}function B({url:e,fileKey:r}){return a.createElement(l.N.Button,{href:e,newTab:!0,onClick:()=>{(0,I.Cu)({fileKey:r,uiSelectedView:"see_more_button",name:"Templates Modal Browse More"},"cta_clicked")},variant:"secondary"},(0,E.tx)("browse_templates_modal_content.see_more_in_community"))}function V(){return a.createElement("div",{className:f.cx.flex.itemsCenter.h40.my8.wFull.$},a.createElement(G,null))}function G(){return a.createElement("div",{className:d()(f.cx.w100.h16.bRadius3.$,D.Mm)})}function H({lightness:e="normal"}){let r=function(e){switch(e){case"normal":return D.Mm;case"light":return D.EQ;case"lightest":return D.Y;default:(0,o.xb)(e)}}(e);return a.createElement(C.zq,{image:a.createElement(C.FK,{removeBorder:!0},a.createElement("div",{className:d()(r,f.cx.wFull.hFull.$)})),bottomRow:a.createElement("div",{className:d()(r,f.cx.h16.w100.bRadius3.$)})})}function W({shouldFade:e}){return a.createElement(a.Fragment,null,(0,s.y1)(3).map(r=>{let n="normal";return e&&(n=2===r?"lightest":1===r?"light":"normal"),a.createElement(H,{key:r,lightness:n})}))}function K(){return a.createElement("div",{className:f.cx.px24.$},a.createElement(V,null),a.createElement(k,null,a.createElement(W,null),a.createElement(W,null),a.createElement(W,{shouldFade:!0})))}function Y({shouldFade:e}){return a.createElement("div",{className:f.cx.pb20.$},a.createElement("div",{className:f.cx.h24.mb16.$},a.createElement(G,null)),a.createElement(k,null,a.createElement(W,{shouldFade:e})))}function $(){return a.createElement(u.Y1,{width:"fill-parent",height:"fill-parent",verticalAlignItems:"center",horizontalAlignItems:"center"},a.createElement(g.kt,{size:"large"}))}},305694:(e,r,n)=>{n.d(r,{yB:()=>D});var a=n(411855),i=n(943632),o=n(629019),s=n.n(o),l=n(966712),c=n(268537),d=n(428322),u=n(163023),m=n(154254),p=n(939863),h=n(175290),_=n(965480),g=n(694687),f=n(99506),E=n(643067),y=n(106112),b=n(383986),I=n(143678),T=n(630028),v=n(540292),S=n(119101),w=n(348787),A=n(235027),N=n(292954),C=n(949207),L=n(432023);function O({filterOptions:e,selectedIds:r,isMyTeamsOnly:n,onFilterChange:o,userTeamOrWorkspaceIds:s,showWorkspaces:l,rightAlignOptions:d=!0}){let u=new Set(r||e.map(e=>e.id)),g=[],f=[],E=[],y=!1;for(let r of e)u.has(r.id)&&E.push(r),(0,_.qI)(r)?y=!0:s.has(r.id)?g.push(r):f.push(r);(0,i.KQ)(g,"name"),(0,i.KQ)(f,"name");let T=g.filter(e=>u.has(e.id)),v=f.filter(e=>u.has(e.id)),S=function({filterOptionsCount:e,userMemberFilterOptionsSelected:r,userNonMemberFilterOptionsSelected:n,isMyTeamsOnly:a,showWorkspaces:i,unassignedTeamsSelected:o}){let s=[...r,...n],l=s.length+(o?1:0);return 0===l?(0,p.t)("browse_templates_modal.none_selected"):l===e?i?a?(0,p.t)("browse_templates_modal.my_teams_only"):(0,p.t)("browse_templates_modal.all_workspaces"):(0,p.t)("browse_templates_modal.all_teams"):1===l?o?(0,p.t)("browse_templates_modal.other_teams"):s[0].name:(0,p.t)("browse_templates_modal.first_name_count_more",{count:l-1,firstName:s[0].name})}({filterOptionsCount:e.length,userMemberFilterOptionsSelected:T,userNonMemberFilterOptionsSelected:v,showWorkspaces:l,isMyTeamsOnly:n,unassignedTeamsSelected:u.has(b.s)}),w=(e,r)=>{o({ids:e?E.reduce((e,n)=>n.id===r.id?e:[...e,n.id],[]):[...E.map(e=>e.id),r.id],myTeamsOnly:n})},A=(e,r)=>{let a=new Set(u);e.forEach(e=>{r?a.add(e.id):a.delete(e.id)}),o({ids:Array.from(a),myTeamsOnly:n})},N=[];if(l){if(N.push(...[...g,...f].filter(e=>!!e.id).map(e=>{let r=u.has(e.id);return a.createElement(c.rr,{key:e.id||e.name,checked:r,onClick:()=>{w(r,e)},displayType:c.Jn.Checkbox},e.name)})),N.length&&N.unshift(a.createElement(c.wv,{key:"my-teams-only-separator"})),N.unshift(a.createElement(c.rr,{key:"my-teams-only",checked:n,onClick:()=>o({ids:r,myTeamsOnly:!n}),displayType:c.Jn.Checkmark},(0,p.tx)("browse_templates_modal.my_teams_only"))),y){let e=u.has(b.s);N.push(a.createElement(c.wv,{key:"unassigned-teams-separator"}),a.createElement(c.rr,{key:"unassigned-teams",checked:e,onClick:()=>{w(e,{id:b.s})},displayType:c.Jn.Checkbox},(0,p.tx)("browse_templates_modal.other_teams")))}}else g.length>0&&N.push(a.createElement(c.rr,{displayType:c.Jn.Checkbox,key:"my-teams",checked:g.length===T.length,mixed:g.length>T.length&&T.length>0,onClick:()=>{A(g,T.length<g.length)}},(0,p.tx)("browse_templates_modal.my_teams"))),N.push(...g.map(e=>{let r=u.has(e.id);return a.createElement(c.rr,{key:e.id||e.name,checked:r,onClick:()=>{w(r,e)},displayType:c.Jn.Checkbox,nested:!0},e.name)})),g.length>0&&f.length>0&&N.push(a.createElement(c.wv,{key:"other-teams-separator"})),f.length>0&&N.push(a.createElement(c.rr,{key:"other-teams",displayType:c.Jn.Checkbox,checked:f.length===v.length,mixed:f.length>v.length&&v.length>0,onClick:()=>{A(f,v.length<f.length)}},(0,p.tx)("browse_templates_modal.all_others"))),N.push(...f.map(e=>{let r=u.has(e.id);return a.createElement(c.rr,{key:e.id||e.name,checked:r,onClick:()=>{w(r,e)},displayType:c.Jn.Checkbox,nested:!0},e.name)}));return N.length?a.createElement(h.Y,{spacing:0,width:"hug-contents"},a.createElement("span",{className:m.cx.colorTextSecondary.$},(0,p.tx)("browse_templates_modal.published_from")),a.createElement(c.Ve,{label:S,noBorder:!0,rightAlignOptions:d,stayOpenOnSelect:!0,optionsBelowSelector:!0,options:N,notDraggable:!0,noRightPadding:!0,menuTrackingContextName:I.e0.TEMPLATES_BROWSE_FILTERS,menuTrackingProperties:{isEnterpriseOrg:l}})):null}function R(e){let[r,n]=(0,a.useState)(!0),i=(0,a.useRef)(null),o=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{!0!==o.current||r||i.current?.scrollIntoView()},[r]),a.createElement("section",null,a.createElement("button",{className:s()(m.cx.wFull.alignLeft.sticky.top0.zIndexTemplateModalTeamName.font13.my8.h40.fontMedium.colorBg.$,N.MY),onClick:()=>n(!r),ref:i},a.createElement("h2",null,a.createElement(u.B,{className:m.cx.relative.inlineFlex.justifyCenter.colorIconTertiary.mx2.w16.$,style:{top:"-2px"},svg:r?C.A:L.A}),e.workspaceName&&a.createElement("span",{className:m.cx.colorTextSecondary.fontNormal.$},e.workspaceName," / "),e.teamName)),r&&a.createElement(a.Fragment,null,a.createElement("div",{className:m.cx.if(e.minimalSpacing,m.cx.px0.mb0,m.cx.px24.mb20).$},e.children),a.createElement(d.a,{"data-testid":`load-more-team-${e.teamId}`,onIntersectionChange:({isIntersecting:r})=>{r&&e.onRequestLoadMoreForTeam(e.teamId)}})),a.createElement(d.a,{onIntersectionChange:({isIntersecting:e})=>{o.current=e}}))}function P(e){return a.createElement("section",null,a.createElement("div",{className:s()(m.cx.borderBox.$,A.a0)},a.createElement("div",{className:A.bV},e.workspaceName&&a.createElement("span",{className:m.cx.colorTextSecondary.fontNormal.$},e.workspaceName," / "),e.teamName),e.onSeeAllClick&&a.createElement("button",{className:A.jy,onClick:e.onSeeAllClick},(0,p.tx)("whiteboard.inserts.see_all"))),a.createElement("div",{className:m.cx.if(e.minimalSpacing,m.cx.px0.mb0,m.cx.px24.mb20).$},e.children))}function D(e){let r=(0,a.useRef)(null),n=(0,g.sZ)(),i=(0,E.G7)(n),{filterOptions:o,selectedTeamOrWorkspaceOrLicenseGroupIds:s,isMyTeamsOnly:c,onFilterChange:u,requestLoadMore:b,requestLoadMoreForTeam:I,templatesByTeam:A,userTeamOrWorkspaceIds:N,isLoadingTeamTemplates:C}=(0,_.GR)(n,f._Y.WHITEBOARD),L=(0,l.kc)().pro_templates_lg;L&&A.forEach(e=>{e.templates.length>6&&(e.templates=e.templates.slice(0,6))});let[D,k]=(0,a.useState)(null);return D?a.createElement(S.z,{teamId:D.teamId,teamName:D.name,templateInsertionLocation:e.templateInsertionLocation,isInsertingTemplate:e.isInsertingTemplate,onInsert:e.insertTemplate,onBackClick:()=>k(null)}):a.createElement("div",{className:m.cx.wFull.$},a.createElement(h.Y,{horizontalAlignItems:"space-between",height:w.k,padding:{left:24,right:24},strokeWidth:{bottom:1},strokeColor:"default"},a.createElement("div",{className:m.cx.font13.fontMedium.$},(0,p.tx)("browse_templates_modal.published_by_current_org_name",{orgName:n.name})),a.createElement(O,{filterOptions:o,selectedIds:s,isMyTeamsOnly:c,onFilterChange:e=>{"function"==typeof r.current?.scroll&&r.current.scroll({top:0,behavior:"smooth"}),u(e)},userTeamOrWorkspaceIds:new Set(N),showWorkspaces:i})),0===A.length?C?a.createElement(v.Kt,null):a.createElement(T.Ht,null):a.createElement("section",{className:m.cx.overflowYScroll.$,ref:r,style:{height:`calc(100% - ${w.k}px)`}},A.map(({team_id:r,team_name:n,workspace_name:o,templates:s,total:l})=>{let c=a.createElement(v.iq,null,s.map(r=>a.createElement(v.AF,{templateInsertionLocation:e.templateInsertionLocation,key:r.file_key,template:{template:r,type:y.n.TeamTemplate},onInsert:()=>e.insertTemplate({template:r,type:y.n.TeamTemplate}),isInsertingTemplate:e.isInsertingTemplate(r.file_key)})));return L?a.createElement(P,{key:r,teamName:n,workspaceName:i?o:null,teamId:r,onSeeAllClick:l>6?()=>{k({teamId:r,name:n??""})}:void 0},c):a.createElement(R,{key:r,teamName:n,workspaceName:i?o:null,teamId:r,onRequestLoadMoreForTeam:I},c)}),a.createElement(d.a,{"data-testid":"load-more-teams",className:m.cx.relative.$,style:{bottom:"250px"},onIntersectionChange:({isIntersecting:e})=>{e&&b()}})))}},302608:(e,r,n)=>{n.d(r,{bb:()=>eh});var a=n(411855),i=n(188507),o=n(256296),s=n(140686),l=n(463033),c=n(629019),d=n.n(c),u=n(320063),m=n(189430),p=n(966712),h=n(38580),_=n(374626),g=n(646240),f=n(574705),E=n(153234),y=n(554322),b=n(572206),I=n(27087),T=n(448169),v=n(946689),S=n(511443),w=n(355819),A=n(163023),N=n(939863),C=n(392592),L=n(934533),O=n(970516),R=n(662275),P=n(931828),D=n(318812),k=n(611978),M=n(309798),F=n(239671),x=n(103101),U=n(237870),B=n(538697),V=n(746806),G=n(162057),H=n(390980),W=n(251890),K=n(33798),Y=n(681109),$=n(589084),j=n(132208),z=n(175479),q=n(785496);let X=(0,h.eU)(!1),J=e=>e.map(e=>{let r=e.name.match(/((.*)\s+-\s+)?(.*)/);return{optionCategoryName:r&&r[2]||"Other",optionSubareaName:r&&r[3]||e.name,gid:e.gid}}).reduce((e,r)=>{let n=e.get(r.optionCategoryName);return n||(n=[],e.set(r.optionCategoryName,n)),n.push({name:r.optionSubareaName,gid:r.gid}),e},new Map),Z=e=>{let r=e.match(/app\.asana\.com\/\d\/\d+\/(\d+)/);if(!r||r.length<2)throw Error((0,N.t)("bug_reporter.error_invalid_asana_url"));return r[1]};function Q(e){return!ee(e)}function ee(e){return"error"in e}let et={gid:"",name:"Pick an option"},er="bugReporter",en=(0,h.eU)(!0),ea=(0,h.eU)(""),ei=(0,h.eU)(""),eo=(0,h.eU)(""),es=(0,h.eU)(et),el=(0,h.eU)(et),ec=(0,h.eU)(!1),ed=a.createElement("div",{className:W.jM},"WARNING: because the title begins with TEST: your bug will be routed to the ",a.createElement("a",{className:W.Hm,href:"https://app.asana.com/0/1203643376438098/list",target:"_blank"},(0,N.tx)("bug_reporter.warning_asana_board")));function eu(e){let r=(0,D.Um)(),n=(0,i.wA)(),c=(0,y.Av)(),{windowInnerHeight:h}=(0,m.l)(),[g,f]=(0,_.fp)(ea),[b,I]=(0,_.fp)(ei),[L,O]=(0,_.fp)(eo),[R,P]=(0,_.fp)(es),[k,M]=(0,_.fp)(el),[F,x]=(0,_.fp)(ec),[U,G]=a.useState(!0),[Y,$]=a.useState(!1),[z,q]=a.useState(!1),[X,J]=a.useState([]),[Q,ee]=a.useState(void 0),en=h-(c+V.uF+S.Ug)-S.lc;(0,u.h)(()=>{!0===F&&(eu(),x(!1))});let eu=()=>{G(!0),J([]),e.clearForm()},ep=a.useCallback(()=>!!(!e.isSubmitting&&b.trim()&&L.trim())&&(!e.isNewReport||!!R.gid&&!!k.gid),[L,e.isNewReport,e.isSubmitting,k.gid,R.gid,b]),eh=r=>{if(r)try{let n=Z(r);e.attachFromTask(n)}catch(e){n(C.F.enqueue({message:`${e}`,error:!0}))}},e_=E.AF(E.Pt(er,"link-input"),"change",e=>{let r=e.target.value;f(r),""===r&&eu()}),eg=E.AF(E.Pt(er,"title-input"),"change",e=>{I(e.target.value)}),ef=E.AF(E.Pt(er,"productAreaSearch"),"change",e=>{eL(e.target.value),""===e.target.value&&M(et)}),eE=E.AF(E.Pt(er,"description-input"),"change",e=>{O(e.target.value)}),ey=E.qP(E.Pt(er,"severity-input")??"","change",e=>{P(e)}),eb=E.qP(E.Pt(er,"product-area-input")??"","change",e=>{M(e),eL("")}),eI=a.useCallback(e=>{let r=[],a=[];for(let n of e)if(n.size>52428800)a.push(n.name);else{let e=URL.createObjectURL(n);r.push({fileContent:n,url:e,name:n.name,type:n.type})}if(a.length>0){let e=`Error: files could not be attached (over 50MB limit): [${a.join(", ")}].`;console.error(e),n(C.F.enqueue({error:!0,message:e}))}return r},[n]),eT=e=>{if(e.files.length>0){let r=eI([...e.files]);J(e=>[...e,...r])}$(!1)},ev=E.AF(E.Pt(er,"include-filekey-input"),"change",e=>{G(e.currentTarget.checked)}),eS=a.useCallback(()=>{ep()&&e.submitBugReport(b,L,R,k,U,X,Q)},[X,ep,L,U,Q,e,k,R,b]),ew=E.of(er,"submit",e=>{e.preventDefault(),eS()}),eA=(e,r)=>{let n=e.target;"Enter"===e.key&&(e.metaKey||e.ctrlKey?eS():("description"!==r&&e.preventDefault(),"asanaInput"===r&&eh(g),"productAreaSearch"===r&&q(!0))),"Escape"===e.key&&n&&n.blur()},eN=E.v_(E.Pt(er,"asanaInput"),"keydown",e=>{eA(e,"asanaInput")}),[eC,eL]=a.useState("");return a.createElement(T.Y,{className:d()(Y&&W.oE),isDragTarget:()=>!0,onTargetDragEnter:()=>{$(!0)},onTargetDragLeave:()=>{$(!1)},onTargetDrop:e=>eT(e)},Y&&a.createElement("div",{className:W.$1},a.createElement(A.B,{svg:K.A}),(0,N.tx)("bug_reporter.drop_attachments")),a.createElement(w.P,{maxHeight:en,hideScrollbar:Y},a.createElement("form",{onSubmit:ew,onPaste:e=>{if(e.clipboardData.files.length>0){let r=eI([...e.clipboardData.files]);J(e=>[...e,...r])}},className:d()(W.yl,Y&&W.vw)},a.createElement("div",{className:W.uu},a.createElement(o.J,{className:W.y8},(0,N.tx)("bug_reporter.asana_hint")),a.createElement(v.ks,{className:W._Z,placeholder:(0,N.t)("bug_reporter.modal.asana_link_placeholder"),value:g,onChange:e_,onPaste:e=>{let r=e.clipboardData.getData("text");try{Z(r),eh(r)}catch{}},onKeyDown:eN,maxLength:150})),a.createElement("div",null,a.createElement(o.J,{className:W.Pf},(0,N.tx)("bug_reporter.modal.title")),a.createElement(v.ks,{className:W._Z,placeholder:(0,N.t)("bug_reporter.modal.title_placeholder"),autoFocus:!0,onKeyDown:e=>eA(e,"title"),value:b,onChange:eg,maxLength:150})),a.createElement("div",null,a.createElement(o.J,{className:W.Pf},(0,N.tx)("bug_reporter.modal.severity")),a.createElement(B.l6,{id:"bug_reporter_select_severity",dispatch:n,property:R,onChange:ey,dropdownShown:r,formatter:{format:e=>e.name,isEqual:(e,r)=>e.gid===r.gid}},0===e.severityOptions.length&&a.createElement(B.c$,{key:"loading",disabled:!0},(0,N.tx)("bug_reporter.modal.loading")),e.severityOptions.map(e=>a.createElement(B.c$,{value:e,key:e.gid},e.name)))),a.createElement("div",null,a.createElement(o.J,{className:W.Pf},(0,N.tx)("bug_reporter.modal.product_area")),a.createElement(v.ks,{className:W._Z,placeholder:(0,N.t)("bug_reporter.modal.search_filter_placeholder"),autoFocus:!0,onKeyDown:e=>eA(e,"productAreaSearch"),value:eC,onChange:ef,maxLength:150}),a.createElement(B.l6,{dispatch:n,dropdownShown:r,id:"bug_reporter_select_product_area",dataTestId:"bug_reporter_select_product_area",formatter:{format:e=>e.name,isEqual:(e,r)=>e.gid===r.gid},property:k,onChange:e=>{eb(e)},triggerDropdown:z,setTriggerDropdown:q},(r=>{if(0===e.productAreaGroups.size)return a.createElement(B.c$,{value:null,key:"loading",disabled:!0},(0,N.tx)("bug_reporter.modal.loading"));let n=[];return e.productAreaGroups.forEach((e,i)=>{(r?e.filter(({name:e})=>e.toLowerCase().includes(r.toLowerCase())):e).length>0&&(n.push(a.createElement(B.c$,{value:null,key:i,isHeader:!0,disabled:!0},i)),e.forEach(e=>{(!r||e.name.toLowerCase().includes(r.toLowerCase()))&&n.push(a.createElement(B.c$,{value:e,key:e.gid,dataTestId:e.gid},e.name))}),n.push(a.createElement(B.sK,{key:`${i}.divider`})))}),n.pop(),n})(eC))),a.createElement("div",null,a.createElement(o.J,{className:W.Pf},(0,N.tx)("bug_reporter.modal.description")),a.createElement(v.ks,{className:[W._Z,W.Tg].join(" "),placeholder:(0,N.t)("bug_reporter.modal.description_placeholder"),type:"textarea",value:L,onChange:eE,onKeyDown:e=>eA(e,"description"),maxLength:1e3})),a.createElement("div",null,a.createElement(o.J,{className:W.Pf},(0,N.tx)("bug_reporter.modal.images_and_videos")),a.createElement(em,{attachmentFiles:X,setAttachmentFiles:J,validateInputFiles:eI})),(0,p.kc)().in_app_performance_profiling&&a.createElement("div",null,a.createElement(a.Fragment,null,a.createElement(o.J,{className:W.Pf},(0,N.tx)("bug_reporter.profiler.title")),a.createElement(H.J,{onProfilingFinish:e=>{ee(e)}}),Q&&(0,N.tx)("bug_reporter.profiler.profile_attached"))),"fullscreen"===e.selectedView.view&&a.createElement(s.S,{checked:U,onChange:(e,{event:r})=>ev(r),label:a.createElement(o.J,null,a.createElement("div",{className:W.HI},(0,N.t)("bug_reporter.modal.include_filekey"),a.createElement("div",{className:W.kB},a.createElement(A.B,{svg:j.A}),a.createElement("div",{className:W.dX},(0,N.tx)("bug_reporter.modal.include_filekey_info")))))}),b.startsWith("TEST:")&&ed,a.createElement(v.e2,{className:W.GC},a.createElement(l.$n,{variant:"secondary",onClick:e.onClose},(0,N.tx)("bug_reporter.modal.cancel")),a.createElement(l.$n,{variant:"primary",type:"submit",disabled:!ep()},(0,N.t)("bug_reporter.modal.submit"))))))}function em(e){let{attachmentFiles:r,setAttachmentFiles:n,validateInputFiles:i}=e,o=a.useRef(null),s=a.useCallback(()=>{o.current&&(o.current.value="")},[]),l=a.useCallback(()=>{let e=o.current?.files||null;if(null===e||0===e.length)return;let r=i([...e]);n(e=>[...e,...r]),s()},[s,i,n]),c=(e,r,a)=>{e.preventDefault(),n(e=>(e.splice(r,1),[...e])),URL.revokeObjectURL(a)};return a.createElement("div",{className:W.VL},r.length>0&&r.map((e,r)=>a.createElement("div",{className:W.Dq,key:r},a.createElement("div",null,e.type.startsWith("image")?a.createElement("img",{className:W.cR,alt:e.name,key:r,src:e.url}):a.createElement("video",{className:W.cR,key:r,src:e.url}),a.createElement("div",{className:W.Lw})),a.createElement("button",{onClick:n=>c(n,r,e.url)},a.createElement(A.B,{className:W.Yz,svg:q.A})))),a.createElement("label",{className:W.UM,htmlFor:"file-upload"},a.createElement(A.B,{svg:$.A})),a.createElement("input",{id:"file-upload",type:"file",accept:"image/png, image/jpeg, image/gif, video/mp4, video/quicktime",ref:o,onChange:l,multiple:!0,hidden:!0}))}function ep(e){let r=(0,i.wA)(),n=E.rf(E.Pt(er,"asana-link"),"click",()=>{});return a.createElement("div",{className:W.yl},a.createElement("div",{className:W.lM},(0,N.tx)("bug_reporter.success_message")),a.createElement("div",{className:W.U3},a.createElement("div",{className:W.AX},a.createElement(A.B,{svg:z.A}),a.createElement(v.CY,{onClick:n,href:e.taskUrl,target:"_blank",trusted:!0},(0,N.tx)("bug_reporter.asana_link"))),a.createElement("div",{className:W.AX},a.createElement(A.B,{svg:Y.A}),a.createElement(v.CY,{onClick:()=>{r(O.lW({stringToCopy:e.taskUrl}))},trusted:!0},(0,N.tx)("bug_reporter.copy_link")))),e.isNewReport&&a.createElement("div",null,(0,N.tx)("bug_reporter.urgent_bug_info",{notifyTheRelevantOncall:a.createElement(v.CY,{href:"https://go/find-oncall",target:"_blank",trusted:!0},(0,N.tx)("bug_reporter.notify_oncall"))})),e.slackUrl&&a.createElement("div",null,a.createElement(v.vx,{className:W.$U,href:e.slackUrl,target:"blank",type:"button"},(0,N.tx)("bug_reporter.open_slack_discussion"))),e.submissionErrorMessages.length>0&&e.submissionErrorMessages.map(e=>a.createElement("p",{key:e},e.toString())))}let eh=(0,U.Ju)(function(){let e=(0,i.d4)(e=>e.multiplayer.allUsers.length),r=(0,i.d4)(e=>e.user?.id),n=(0,k._6)(),o=(0,i.wA)(),{windowInnerHeight:s}=(0,m.l)(),l=(0,G.O)(),[c,d]=a.useState([]),[h,E]=(0,_.fp)(ea),y=(0,g.Xr)(ei),T=(0,g.Xr)(eo),v=(0,g.Xr)(es),w=(0,g.Xr)(el),[A,O]=a.useState(new Map),D=(0,g.Xr)(ec),[U,B]=(0,_.fp)(en),[H,K]=a.useState(!1),[Y,$]=a.useState(!1),j=a.useRef(""),z=a.useRef(""),q=a.useRef(""),ed=a.useRef(""),em=a.useRef(""),eh=a.useRef([]),e_=a.useRef(null),eg=a.useRef(0),ef=(0,g.Xr)(X),eE=()=>{o(R.Ce())},ey=(0,M.f)("seen_bug_reporter_modal");(0,u.h)(()=>{ey||o(P.b({seen_bug_reporter_modal:!0})),ef(!0)}),a.useEffect(()=>{(async()=>{try{let{data:e}=await x.o.getMeta();d(e.meta.severity),O(J(e.meta.product_area))}catch(e){o(C.F.enqueue({message:`Could not fetch field metadata: ${e}`,error:!0}))}})()},[o]);let eb=()=>x.o.getGetTask({taskGid:j.current}).then(({data:e})=>e).catch(e=>{let r=`Couldn't fetch task details from Asana. ${e.data.message}`;e instanceof I.Dr&&e.data?.message&&(r=e.data.message),o(C.F.enqueue({message:r,error:!0}))}),eI=async e=>{if(0===e.length)return{attachments:[],errorMessages:[]};let r=e.map(async e=>{try{return{uuid:await ev(e.fileContent,e.type),name:e.name}}catch(r){return{error:`Please add attachment ${e.name} directly in Asana instead. ${r}`}}}),n=await Promise.all(r);return eh.current=n.filter(ee).map(({error:e})=>e),{attachments:n.filter(Q),errorMessages:n.filter(ee).map(({error:e})=>e)}},eT=async e=>{if(!e)return{attachments:[],errorMessages:[]};try{return{attachments:[{uuid:await ev(JSON.stringify(e),"application/json"),name:"profile.json"}],errorMessages:[]}}catch(e){return{attachments:[],errorMessages:[`Please record a profile directly in dev tools instead. ${e}`]}}},ev=async(e,r)=>{let n=await x.o.getAttachmentUploadUrl({fileType:r});if(200!==n.status)throw Error("Failed to get presigned upload URL from S3");let{upload_url:a,fields:i,uuid:o}=n.data.meta,s=new FormData;for(let e in i)s.append(e,i[e]);if(s.append("content-type",r),s.append("file",e),204!==(await fetch(a,{method:"post",body:s})).status)throw Error("Failed to upload attachment to S3");return o},eS=async(a,i,s,l,c,d,u)=>{$(!0),ed.current=a,em.current=i,o(C.F.enqueue({type:"bug-reporter-submitting",message:(0,N.t)("bug_reporter.submitting_visual_bell"),timeoutType:"exact",timeoutOverride:4e3,icon:L.zX.SPINNER})),o(C.F.enqueue({type:"bug-reporter-submitting-long",message:(0,N.t)("bug_reporter.long_submitting_visual_bell"),delay:4e3,icon:L.zX.SPINNER}));let m={env:(0,p.tl)().cluster_name,user_agent:navigator.userAgent,view:n.view,user_id:r,org_id:(0,p.tl)().org_id,tracking_session_id:(0,p.tl)().tracking_session_id,release_commit:(0,p.tl)().release_manifest_git_commit,device_info:(0,f.N)(),num_people_in_file:e};"fullscreen"===n.view?(m.editor_type=(0,F.Bu)(n.editorType),c&&(m.file_key=n.fileKey,m.url=window.location.href)):m.url=window.location.href;let _={title:a,severity:s.gid,product_area:l.gid,description:i,metadata:m},g=[eI(d),eT(u)],[E,y]=await Promise.all(g);E.attachments.length>0&&(_.attachments=E.attachments),y.attachments.length>0&&(_.profileUuid=y.attachments[0].uuid),(E.errorMessages.length||y.errorMessages.length)&&(eh.current=[...E.errorMessages,...y.errorMessages]);try{let e=U?await I.Ay.post("/api/bug_reports",_):await I.Ay.put("/api/bug_reports/update_task",{..._,task_gid:j.current=Z(h)});if(e.status>=200&&e.status<300)o(C.F.dequeue({matchType:"bug-reporter-submitting"})),o(C.F.dequeue({matchType:"bug-reporter-submitting-long"})),z.current=e.data.meta.task_url,j.current=e.data.meta.task_gid,U||(q.current=e.data.meta.slack_url),eg.current=e_.current?.getCurrentContentSize()?.y||0,K(!0),D(!0),$(!1);else throw Error(`Request failed with code ${e.status}.`)}catch(r){o(C.F.dequeue({matchType:"bug-reporter-submitting"})),o(C.F.dequeue({matchType:"bug-reporter-submitting-long"}));let e=r.message;r instanceof I.Dr&&r.data?.message&&"string"==typeof r.data.message&&(e=r.data.message),o(C.F.enqueue({message:`${e}. Couldn't submit report. Try again or use /bug in Slack.`,error:!0})),$(!1)}},ew=async e=>{j.current=e,B(!1);let r=await eb();r&&(y(r.meta.title),T(r.meta.description),v(r.meta.severity??et),w(r.meta.product_area??et))};return a.createElement(V.vx,{ref:e_,title:(0,N.t)("help_widget.menu.report_issue"),initialPosition:(()=>{let e=l?S.lc:S.Ug,r=S.lc;return H&&(r=s-(eg.current+V.uF)-S.lc),new b.Mi(e,r)})(),initialConstraints:{x:"right",y:H?"top":"bottom"},onClose:eE,recordingKey:er,headerClassName:W.yK,dragHeaderOnly:!0},H?a.createElement(ep,{isNewReport:U,taskUrl:z.current,taskGid:j.current,slackUrl:q.current,title:ed.current,description:em.current,submissionErrorMessages:eh.current}):a.createElement(eu,{isNewReport:U,selectedView:n,severityOptions:c,productAreaGroups:A,attachFromTask:ew,submitBugReport:eS,onClose:eE,clearForm:()=>{B(!0),y(""),T(""),w(et),v(et),j.current="",E("")},isSubmitting:Y}))},"BugReporterModal")},884812:(e,r,n)=>{n.d(r,{l:()=>u});var a=n(411855),i=n(946689),o=n(939863),s=n(662275),l=n(585878),c=n(415494);function d(e){return a.createElement("div",{style:{height:e.height}})}function u(e){let r=e.onHide||(()=>{e.dispatch(s.Lo())});return a.createElement(l.XV,{...e,isCloseHidden:!0},a.createElement(d,{height:18}),e.children&&a.createElement("div",{className:c.Vw},e.children,a.createElement(d,{height:18})),a.createElement(m,{onConfirm:e.onConfirm,onCancel:r,confirmButtonText:e.buttonText,hideCancelButton:e.hideCancelButton,makeButtonAppearNegative:e.makeButtonAppearNegative},e.checkboxText))}class m extends a.PureComponent{constructor(e){super(e),this.onCheck=()=>{this.setState({checked:!this.state.checked})},this.state={checked:!1}}render(){return a.createElement("div",{className:this.props.className},a.createElement(i.JU,{className:c.Pf},a.createElement(i.tB,{checked:this.state.checked,onChange:this.onCheck,className:c.kv}),this.props.children),a.createElement("div",{className:c.aV},!this.props.hideCancelButton&&a.createElement(i.tM,{onClick:this.props.onCancel},this.props.cancelButtonText||(0,o.t)("modal.cancel")),this.props.makeButtonAppearNegative?a.createElement(i.qM,{disabled:!this.state.checked,onClick:this.props.onConfirm},this.props.confirmButtonText||(0,o.t)("modal.confirm")):a.createElement(i.vd,{disabled:!this.state.checked,onClick:this.props.onConfirm},this.props.confirmButtonText||(0,o.t)("modal.confirm"))))}}m.displayName="CheckboxConfirmButtons"},443958:(e,r,n)=>{n.d(r,{WB:()=>C});var a=n(411855),i=n(188507),o=n(38580),s=n(374626),l=n(946689),c=n(893281),d=n(47506),u=n(939863),m=n(896474),p=n(809840),h=n(662275),_=n(672517),g=n(460187),f=n(665723),E=n(585575),y=n(237870),b=n(526360),I=n(585878),T=n(454372);let v=(e,r)=>{switch(e){case E.M.SRGB:return{text:(0,u.t)("fullscreen.color_management.user_color_profile_modal.info.srgb_supported"),type:"info"};case E.M.DISPLAY_P3:switch(r.status){case"SupportedNatively":case"SupportedWithPolyfill":return{text:(0,u.t)("fullscreen.color_management.user_color_profile_modal.info.display_p3_supported"),type:"info"};case"ClientNotSupported":let n=r.diagnostics&&"client"in r.diagnostics&&"desktop-app"===r.diagnostics.client?(0,u.t)("fullscreen.color_management.user_color_profile_modal.client_type.desktop_app"):(0,u.t)("fullscreen.color_management.user_color_profile_modal.client_type.browser");if(r.diagnostics&&"shouldRestartDesktopAppInManagedColorSpace"in r.diagnostics&&r.diagnostics.shouldRestartDesktopAppInManagedColorSpace)return{text:(0,u.t)("fullscreen.color_management.beta.warning.desktop_unmanaged"),type:"warning"};return{text:(0,u.t)("fullscreen.color_management.user_color_profile_modal.warning.display_p3_not_supported.client",{client:n}),type:"warning"};case"MonitorNotSupported":if(r.diagnostics&&"alternativeMonitorName"in r.diagnostics&&r.diagnostics.alternativeMonitorName)return{text:(0,u.t)("fullscreen.color_management.user_color_profile_modal.warning.display_p3_not_supported.alternative_display",{displayName:r.diagnostics.alternativeMonitorName}),type:"warning"};return{text:(0,u.t)("fullscreen.color_management.user_color_profile_modal.warning.display_p3_not_supported.display"),type:"warning"}}}},S="user-color-profile",w={srgbOption:`${S}-srgb-option`,p3Option:`${S}-p3-option`,supportDetailsWarningIcon:`${S}-warning-icon`,supportDetailsInfoIcon:`${S}-info-icon`},A=(0,o.eU)(!1),N=(0,y.Ju)(function(){let e=(0,i.wA)(),r=(0,f.jK)(),n=function(e){switch(e){case E.M.DEFAULT:case E.M.SRGB:return E.M.SRGB;case E.M.DISPLAY_P3:return E.M.DISPLAY_P3}}(r.colorProfilePreference),o=v(n,(0,g.Av)()),y=function(e){switch(e){case E.M.SRGB:return(0,u.t)("fullscreen.color_management.user_color_profile_modal.options.srgb.description");case E.M.DISPLAY_P3:return(0,u.t)("fullscreen.color_management.user_color_profile_modal.options.display_p3.description")}}(n),[S,N]=(0,s.fp)(A);return a.useEffect(()=>(S||N(!0),()=>{S&&((0,d.YQ)({id:"user_color_profile_modal_closed"}),N(!1))}),[N,S]),a.createElement(_.fu,{name:"color_management_user_color_profile_modal"},a.createElement(I.XV,{title:(0,u.t)("fullscreen.color_management.user_color_profile_modal.title"),minWidth:320,maxWidth:320,onClose:()=>{e((0,h.AS)())}},a.createElement("div",{className:T.yl},a.createElement("label",{className:T.fK},a.createElement(p.E,null,(0,u.tx)("fullscreen.color_management.user_color_profile_modal.options.label"))),a.createElement(c.z,{isHorizontal:!0,className:T.R$,value:n,onChange:e=>{(0,f.it)({colorProfilePreference:e,id:r.id})}},a.createElement(c.Z,{className:T.hO,value:E.M.SRGB,dataTestId:w.srgbOption},(0,u.t)("fullscreen.color_management.user_color_profile_modal.options.srgb.value")),a.createElement(c.Z,{className:T.hO,value:E.M.DISPLAY_P3,dataTestId:w.p3Option},(0,u.t)("fullscreen.color_management.user_color_profile_modal.options.display_p3.value"))),a.createElement(p.E,{color:"secondary"},y),a.createElement("div",{className:T.jH}),a.createElement(p.E,{color:"secondary"},(0,u.tx)("fullscreen.color_management.user_color_profile_modal.descriptions.affected_files")),a.createElement("span",{style:{whiteSpace:"pre"}}," "),a.createElement(l.Ph,{trusted:!0,href:b.s,target:"_blank",className:T.nf},(0,u.tx)("rcs.rcs_shared.learn_more")),a.createElement("div",{className:T.jH}),a.createElement("div",{className:T.yF}),a.createElement("div",{className:T.cd},a.createElement(m.In,{icon:"warning"===o.type?"warning-32":"info-32",dataTestId:"warning"===o.type?w.supportDetailsWarningIcon:w.supportDetailsInfoIcon}),a.createElement("span",null,o.text,"warning"===o.type&&a.createElement(a.Fragment,null,a.createElement("span",{style:{whiteSpace:"pre"}}," "),a.createElement(l.Ph,{trusted:!0,href:b.s,target:"_blank",className:T.nf},(0,u.tx)("rcs.rcs_shared.learn_more"))))))))},"user_color_profile_modal");function C(){return{name:"user-color-profile-menu-option",displayForQuickCommand:"user-color-profile-quick-action",callback:(e,r,n)=>{n((0,h.to)({type:N}))}}}},332086:(e,r,n)=>{n.d(r,{FF:()=>v,G$:()=>C});var a=n(411855),i=n(188507),o=n(946689),s=n(632923),l=n(939863),c=n(63397),d=n(662275),u=n(931828),m=n(107877),p=n(672517),h=n(143678),_=n(237870),g=n(928491),f=n(195907),E=n(488578),y=n(46526),b=n(406363),I=n(884992);let T={INDIGO:b.S0,VIOLET:b.xl,RED:b.qE,GREEN:b.Ts,GOLD:b.fr};var v=(e=>(e[e.COMMENTS=0]="COMMENTS",e[e.OPT_IN=1]="OPT_IN",e))(v||{});let S=(e,r)=>e.indexOf(r)>-1;function w({user:e,variations:r}){return a.createElement(a.Fragment,null,a.createElement(g.Ro,{className:I.my,entity:e,size:100}),S(r,0)&&a.createElement("div",null,a.createElement(y.eR,{backgroundColor:T.RED,position:{top:"12px",left:"12%",transform:"rotate(-12deg)"}}),a.createElement(y.eR,{backgroundColor:T.INDIGO,position:{top:"-40px",left:"9%",transform:"rotate(60deg)"}}),a.createElement(y.eR,{backgroundColor:T.VIOLET,position:{top:"-10px",left:"27%",transform:"rotate(20deg)"}}),a.createElement(y.eR,{backgroundColor:T.GREEN,position:{top:"-30px",left:"70%",transform:"rotate(30deg)"}}),a.createElement(y.eR,{backgroundColor:T.GOLD,position:{top:"8px",left:"88%",transform:"rotate(-20deg)"}})),a.createElement("h1",{className:I.wx},e?.handle),a.createElement("h2",{className:I.m_},(0,l.tx)("community.onboarding.here_s_how_you_ll_look_when_using_the_figma_community")),a.createElement("h3",{className:I.N4},(0,l.tx)("community.onboarding.change_your_photo_or_name_in_your_settings"),S(r,0)&&a.createElement(a.Fragment,null,a.createElement("br",null),(0,l.tx)("community.onboarding.when_leaving_comments_we_ask_that_you"))))}function A(){return a.createElement(a.Fragment,null,a.createElement("h1",{className:I.wx},(0,l.tx)("community.onboarding.follow_our_guidelines")),a.createElement("h2",{className:I.m_},(0,l.tx)("community.onboarding.when_leaving_comments_we_ask_that_you")))}function N(){return a.createElement("div",{className:I.Il},a.createElement("li",null,a.createElement("div",{className:I.Qk},(0,l.tx)("community.onboarding.stay_on_topic")),a.createElement(y.iF,null)),a.createElement("li",null,a.createElement("div",{className:I.Qk},(0,l.tx)("community.onboarding.be_respectful")),a.createElement(y.B1,null)),a.createElement("li",null,a.createElement("div",{className:I.Qk},(0,l.tx)("community.onboarding.read_our_guidelines",{guidelinesLink:a.createElement("a",{href:"https://help.figma.com/hc/articles/360038510573-Figma-Community-Guidelines",target:"_blank"},(0,l.tx)("community.onboarding.guidelines"))})),a.createElement(y.$E,null)))}let C="COMMUNITY_OPT_IN";(0,_.Ju)(function({userId:e,onFinish:r,variations:n}){let _=(0,i.d4)(e=>e.user);e=e||_?.id;let g=(0,i.wA)(),y=()=>{g(d.Ce())},b=()=>{g(u.b({[f.Pn]:!0}))},T=S(n,0)&&1===n.length,v=S(n,0)?1===n.length?I.aq:I.Qc:I.FT;return a.createElement(E.aF,{className:v},a.createElement(p.fu,{name:h.e0.PROFILE_CREATE_MODAL,properties:{action:m.s0.COMMUNITY_OPT_IN,communityHubEntity:m.ZO.USERS,communityHubEntityId:e}},S(n,1)&&_?a.createElement(w,{user:_,variations:n}):a.createElement(A,null),S(n,0)&&a.createElement(N,null),a.createElement(s.Go,{type:"submit",className:I.C5,onClick:()=>{y();let a=S(n,1);a&&(g((0,c.h1)({onSuccess:r})),b()),S(n,0)&&e&&(b(),a||r?.())}},S(n,0)?(0,l.tx)("community.onboarding.got_it"):(0,l.tx)("community.onboarding.looks_good")),!T&&a.createElement(o.tM,{className:I.IK,onClick:y},(0,l.tx)("general.cancel"))))},C)},79190:(e,r,n)=>{n.d(r,{OZ:()=>V}),n(379683);var a=n(411855),i=n(188507),o=n(629019),s=n.n(o),l=n(126049),c=n(207286),d=n(752553),u=n(768137),m=n(799569),p=n(976999),h=n(493323),_=n(154254),g=n(47506),f=n(939863),E=n(392592),y=n(175290),b=n(896474),I=n(396147),T=n(662275),v=n(672517),S=n(756442),w=n(304769),A=n(545697),N=n(447526),C=n(694687),L=n(99506),O=n(820113),R=n(135163),P=n(756704),D=n(679892),k=n(237870),M=n(807577),F=n(488578),x=n(603568);function U(e,r){return r(T.Lo()),D.Eh.postDevModeOptInTermsAccepted({orgId:e}).catch(e=>(r(E.F.enqueue({message:(0,f.t)("dev_mode_opt_in.modal.failed_to_agree_to_opt_in"),error:!0})),Promise.reject(e))).then(()=>(0,g.YQ)({id:"dev_mode_opt_in_success_event"}))}function B(){let e=(0,i.wA)();return a.createElement(m.Jn,{onClick:()=>e(T.Lo()),innerText:"Close"})}(0,k.Ju)(function(e){let r=(0,i.wA)(),n=(0,C.sZ)(),o=parseInt(e.emailRequestId??""),s=!Number.isNaN(o);return a.createElement(a.Suspense,{fallback:a.createElement("div",{className:x.$1},a.createElement(h.Z_,null))},a.createElement(v.fu,{name:"DevMode Opt-in Page",properties:{org_id:n.id,source:s?"email":"notif"}},a.createElement("div",{className:x.$1},a.createElement(G,{org:n,onAccept:()=>{let e=U(n.id,r);return s&&e.then(()=>{P.w.approveRequests({plan_id:n.id,plan_type:I.ps.ORG,included_request_ids:[o.toString()],selection_method:I.Xv.EMAIL}).catch(e=>(r(E.F.enqueue({message:(0,f.t)("dev_mode_opt_in.modal.upgrade_seats_error",{seatCount:1}),error:!0})),Promise.reject(e))).then(()=>r(E.F.enqueue({message:(0,f.t)("dev_mode_opt_in.modal.upgraded_seats",{seatCount:1}),type:"requests-approved"})))}),e},showNotNow:!1,hasAssociatedSeats:s})),a.createElement("div",{className:x.NX,style:{position:"absolute",top:24,right:24}},a.createElement(B,null))))},"DEV_MODE_OPT_IN_FULL_SCREEN_MODAL");let V=(0,k.Ju)(function(e){let r=(0,i.wA)(),n=(0,C.sZ)();return a.createElement(a.Suspense,{fallback:a.createElement(M.N,{hiddenTitle:(0,f.tx)("dev_mode_opt_in.modal.header"),estimatedWidth:520,estimatedHeight:520})},a.createElement(v.fu,{name:"DevMode Opt-in Modal",properties:{org_id:n.id,source:e.source?e.source:"dashboard"}},a.createElement(F.aF,{className:_.cx.overflowHidden.$,padding:40,size:520},a.createElement(G,{org:n,onAccept:()=>{let a=U(n.id,r);e.onOptInUpgrade&&a.then(()=>e.onOptInUpgrade()),e.onOptInShowModal&&a.then(()=>e.onOptInShowModal())},showNotNow:!0,hasAssociatedSeats:!!e.onOptInUpgrade}),a.createElement("div",{style:{position:"absolute",top:4,right:4}},a.createElement(B,null)))))},"DEV_MODE_OPT_IN_PARTIAL_MODAL");function G(e){let r=(0,i.wA)(),n=(0,c.Xf)(e.org.id),o=(0,l.A)(e.onAccept,750,{leading:!0,trailing:!1}),m=a.createElement("a",{className:_.cx.cursorPointer.fontMedium.$,href:"https://help.figma.com/hc/articles/19813618057623",target:"_blank",rel:"noopener noreferrer"},(0,f.t)("dev_mode_opt_in.modal.guide_to_dev_mode_billing")),h=a.createElement("a",{className:_.cx.cursorPointer.fontMedium.$,href:"https://www.figma.com/pricing",target:"_blank",rel:"noopener noreferrer"},"figma.com/pricing"),g=n.data?.currency??"usd",E=new O.vr(g),I=e.org.billing_tier??L.Ag.ORG,C=new A.X([w.ud.DEV_MODE]).dict(e=>({currency:g,billableProductKey:e,tier:(0,N.h)(I),renewalTerm:R.IX.YEAR,unit:R.IX.MONTH})),P=(0,S.ic)(C,{planParentId:e.org.id,planType:L.OL.ORG},S.Fq.ADMIN_SETTINGS),[D]=(0,d.mI)(P),k="loaded"===n.status&&"loaded"===D.status?a.createElement(a.Fragment,null,E.formatMoney(D.data[w.ud.DEV_MODE].amount)):a.createElement(p.Wi,{className:_.cx.h8.w20.inlineBlock.$});return a.createElement("div",{className:x.hQ},a.createElement("div",{className:x.rf},a.createElement("div",{className:x.wx},(0,f.tx)("dev_mode_opt_in.modal.header")),a.createElement("div",{className:s()(x.uI,_.cx.mb24.$)},e.hasAssociatedSeats?(0,f.tx)("dev_mode_opt_in.modal.subheader_with_seats"):(0,f.tx)("dev_mode_opt_in.modal.subheader")),a.createElement("div",{className:x.fZ},a.createElement("div",{className:_.cx.mt16.ml16.mr16.$},a.createElement(y.Y,{width:"fill-parent",spacing:8},a.createElement(b.In,{icon:"file-design-with-devmode-32-file-type"}),a.createElement("span",null,a.createElement("div",{className:x.uI},(0,f.tx)("dev_mode_opt_in.modal.pricing.with_design.main_text")),a.createElement("div",{className:x.Yg},(0,f.tx)("dev_mode_opt_in.modal.pricing.with_design.sub_text"))))),a.createElement("div",{className:x.Ot}),a.createElement("div",{className:_.cx.ml16.mr16.mb16.$},a.createElement(y.Y,{width:"fill-parent",spacing:8},a.createElement(b.In,{icon:"file-devmode-32-file-type"}),a.createElement("span",null,a.createElement("div",{className:x.uI},(0,f.tx)("dev_mode_opt_in.modal.pricing.dev_mode_only.main_text")),a.createElement("div",{className:x.Yg},(0,f.tx)("dev_mode_opt_in.modal.pricing.dev_mode_only.sub_text")))))),a.createElement("div",{className:x.Yg},a.createElement("div",{className:_.cx.mt24.fontMedium.$},(0,f.tx)("dev_mode_opt_in.modal.description_question")),a.createElement("div",{className:_.cx.mt8.$},(0,f.tx)("dev_mode_opt_in.modal.description_provision",{pricingLink:h,plan:I===L.Ag.ORG?(0,f.t)("dev_mode_opt_in.modal.org"):(0,f.t)("dev_mode_opt_in.modal.ent"),price:k,billingLink:m}))),a.createElement(u.vd,{className:s()(x.x6,_.cx.mt24.$),type:"button",onClick:o},e.hasAssociatedSeats?(0,f.tx)("dev_mode_opt_in.modal.agree_with_seats"):(0,f.tx)("dev_mode_opt_in.modal.agree")),e.showNotNow&&a.createElement(v.jm,{role:"button",className:s()(_.cx.mt8.flex.justifyCenter.$,x.qD),onClick:()=>r(T.Lo())},(0,f.tx)("dev_mode_opt_in.modal.not_now"))))}},765165:(e,r,n)=>{n.d(r,{K:()=>u});var a=n(411855),i=n(91408),o=n(153234),s=n(816660),l=n(837746),c=n(710877);let d=(0,i.jz)(l.LdP);function u({allowedResizeDirections:e,onEdgeDoubleClick:r,resizeTo:n,onResizeEnd:i,getCurrentContainerBounds:l,lockAspectRatio:c,isResizing:u,setIsResizing:h,setResizeDirections:_,hidden:g,recordingKey:f,mirrorResizeHorizontally:E=!1}){let{startResizing:y}=function({resizeTo:e,getCurrentContainerBounds:r,isResizing:n,setIsResizing:i,setResizeDirections:l,onResizeEnd:c,lockAspectRatio:u,recordingKey:m,hidden:h,mirrorResizeHorizontally:_=!1}){let g=a.useRef(),f=a.useRef(),E=a.useRef([]),y=a.useRef({x:0,y:0}),[b,I]=a.useState(!1),T=a.useCallback(()=>{I(!1),i(void 0),l([]),E.current=[],c?.()},[I,i,c,l]),v=a.useCallback(({x:r,y:a},i,o)=>{if(!n||!f.current||!e){I(!1);return}if(n&&0===o){T();return}let l=u||i,c={x:r-y.current.x,y:a-y.current.y};c.y=Math.max(c.y,d);let{left:m,top:h,right:g,bottom:E}=p(c,f.current,n,l,_);e({[s.OP.TOP]:h!==f.current.top,[s.OP.BOTTOM]:E!==f.current.bottom,[s.OP.LEFT]:m!==f.current.left,[s.OP.RIGHT]:g!==f.current.right},{left:m,top:h,right:g,bottom:E,lockAspectRatio:l})},[n,u,_,e,T]),S=a.useRef(T);S.current=T,(0,a.useEffect)(()=>()=>{n&&S.current()},[n]);let w=o.rf(m,"mouseup",T),A=o.rf(m,"mousemove",a.useCallback(e=>{if(h)return o.aH;e.stopPropagation(),e.preventDefault();let r={x:e.clientX,y:e.clientY};if(g.current=r,n)v(r,e.shiftKey,e.buttons);else{let e=Object.create(null);E.current.forEach(r=>{e[r]=!0}),l(E.current),i(e)}},[h,n,v,i,l]),{recordMetadata:e=>({clientX:e.clientX,clientY:e.clientY}),playbackMetadata:e=>({clientX:e.clientX,clientY:e.clientY})}),N=o.v_(m,"keydown",a.useCallback(e=>{e.shiftKey&&g.current&&v(g.current,!0)},[v])),C=o.v_(m,"keyup",a.useCallback(e=>{g.current&&v(g.current,e.shiftKey)},[v]));return(0,a.useEffect)(()=>{if(b)return document.addEventListener("mousemove",A),document.addEventListener("mouseup",w),document.addEventListener("keydown",N),document.addEventListener("keyup",C),()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",w),document.removeEventListener("keydown",N),document.removeEventListener("keyup",C)}},[b,A,w,N,C]),{startResizing:a.useCallback((e,n)=>{E.current=e;let a=r();f.current=a;let i={x:e.includes(s.OP.LEFT)?a.left:e.includes(s.OP.RIGHT)?a.right:n.x,y:e.includes(s.OP.TOP)?a.top:e.includes(s.OP.BOTTOM)?a.bottom:n.y};y.current={x:n.x-i.x,y:n.y-i.y},I(!0)},[r,I]),stopResizing:T}}({resizeTo:n,getCurrentContainerBounds:l,onResizeEnd:i,isResizing:u,setIsResizing:h,setResizeDirections:_,lockAspectRatio:c,hidden:g,recordingKey:f,mirrorResizeHorizontally:E});return g?null:a.createElement("div",null,Object.values(s.OP).map((n,i)=>e.includes(n)?a.createElement(m,{key:i,directions:[n],startResizing:y,onDoubleClick:r,recordingKey:o.Pt(f,n)}):null),[s.OP.TOP,s.OP.BOTTOM].map(n=>[s.OP.LEFT,s.OP.RIGHT].map((i,s)=>e.includes(n)&&e.includes(i)?a.createElement(m,{key:s,directions:[n,i],startResizing:y,onDoubleClick:r,recordingKey:o.Pt(f,n,i)}):null)))}class m extends o.o6{constructor(){super(...arguments),this.onMouseDown=e=>o.cZ(this,"mousedown",r=>{r.stopPropagation(),r.preventDefault(),this.props.startResizing(e,{x:r.clientX,y:r.clientY})}),this.onDoubleClick=o.cZ(this,"dblclick",()=>{if(!this.props.onDoubleClick)return o.aH;this.props.onDoubleClick?.()}),this.directionsToStyle=e=>{if(1===e.length)switch(e[0]){case s.OP.TOP:return c.In;case s.OP.BOTTOM:return c.Mo;case s.OP.LEFT:return c.Wg;case s.OP.RIGHT:return c.N2}else if(2===e.length){if(e[0]===s.OP.TOP&&e[1]===s.OP.RIGHT)return c.Mq;if(e[0]===s.OP.TOP&&e[1]===s.OP.LEFT)return c.pg;if(e[0]===s.OP.BOTTOM&&e[1]===s.OP.RIGHT)return c.my;if(e[0]===s.OP.BOTTOM&&e[1]===s.OP.LEFT)return c.Do}}}render(){return a.createElement("div",{role:"presentation",className:this.directionsToStyle(this.props.directions),onMouseDown:this.onMouseDown(this.props.directions),onDoubleClick:this.onDoubleClick})}}let p=(e,r,n,a,i)=>{let{x:o,y:l}=e,c=n[s.OP.LEFT]?o:r.left,d=n[s.OP.RIGHT]?o:r.right,u=n[s.OP.TOP]?l:r.top,m=n[s.OP.BOTTOM]?l:r.bottom;if(i){let e=(r.left+r.right)/2;n[s.OP.LEFT]?d=e+(e-o):n[s.OP.RIGHT]&&(c=e-(o-e))}if(a){let e=(r.right-r.left)/(r.bottom-r.top-s.uF),a=n[s.OP.LEFT]?r.left-o:o-r.right,i=n[s.OP.TOP]?r.top-l:l-r.bottom,p=n[s.OP.LEFT]||n[s.OP.RIGHT],h=n[s.OP.TOP]||n[s.OP.BOTTOM];if(p&&h){let o,l;let p=a/e;p<i?(o=a,l=p,n[s.OP.TOP]?u=r.top-l:m=r.bottom+l):(o=i*e,l=i,n[s.OP.LEFT]?c=r.left-o:d=r.right+o)}else if(p){let a=n[s.OP.LEFT]?r.left-o:o-r.right;m=r.bottom+a/e}else if(h){let a=n[s.OP.TOP]?r.top-l:l-r.bottom;d=r.right+a*e}}return{left:c,top:u,right:d,bottom:m}}},425569:(e,r,n)=>{n.d(r,{Qn:()=>y});var a=n(411855),i=n(188507),o=n(517333),s=n(737947),l=n(966712),c=n(799569),d=n(946689),u=n(154254),m=n(939863),p=n(662275),h=n(672517),_=n(237870),g=n(488578),f=n(261323);let E=(0,l.ck)("bbeffb0922b3841d79ccfa204400c7dc2c399628"),y=(0,_.Ju)(function(){let e=(0,i.d4)(e=>e.modalShown?.data?.onImportCompleted),r=(0,i.d4)(e=>e.modalShown?.data?.onConnectClick),n=(0,i.wA)(),l=()=>{n(p.AS()),e?.()};return a.createElement(h.fu,{name:"google_connect_disclaimer_modal"},a.createElement(g.aF,{size:360,className:f.k,onHide:()=>e?.()},a.createElement(c.s_,{dispatch:n,trackingProperties:{text:"dismiss"},onClose:l}),a.createElement("img",{src:E,width:30,height:26,className:u.cx.mb8.$,alt:(0,m.t)("rcs.jamboard.google_drive_icon.alt")}),o.eD?a.createElement(a.Fragment,null,a.createElement("h2",{className:u.cx.mb8.font18.fontSemiBold.lh24.$},(0,m.tx)("rcs.jamboard.open_in_browser_disclaimer.title")),a.createElement("p",{className:u.cx.mb24.font11.lh16.$},(0,m.tx)("rcs.jamboard.open_in_browser_disclaimer.desc1")),a.createElement("div",{className:u.cx.flex.justifyEnd.gap8.$},a.createElement(d.tM,{onClick:l},(0,m.tx)("rcs.jamboard.connect_to_google_drive_disclaimer.cancel")),a.createElement(d.vd,{onClick:()=>{l(),s.Ay.redirect(window.location.href,"_blank")},className:f.F},(0,m.tx)("rcs.jamboard.open_in_browser_disclaimer.button")))):a.createElement(a.Fragment,null,a.createElement("h2",{className:u.cx.mb8.font18.fontSemiBold.lh24.$},(0,m.tx)("rcs.jamboard.connect_to_google_drive_disclaimer.title")),a.createElement("p",{className:u.cx.mb8.font11.lh16.$},(0,m.tx)("rcs.jamboard.connect_to_google_drive_disclaimer.desc1")),a.createElement("div",{className:u.cx.flex.justifyEnd.gap8.$},a.createElement(d.tM,{onClick:l},(0,m.tx)("rcs.jamboard.connect_to_google_drive_disclaimer.cancel")),a.createElement(d.vd,{onClick:r,className:f.F},(0,m.tx)("rcs.jamboard.connect_to_google_drive_disclaimer.button"))))))},"ConnectToGoogleDriveDisclaimerModal")},826695:(e,r,n)=>{var a=n(411855),i=n(188507),o=n(629019),s=n.n(o),l=n(776250),c=n(133537),d=n(586459),u=n(563706),m=n(946689),p=n(632923),h=n(135876),_=n(154254),g=n(881388),f=n(939863),E=n(950949),y=n(672517),b=n(335682),I=n(237870),T=n(488578),v=n(160018),S=n(309325),w=n(411144);(0,I.Ju)(function(e){let r=(0,i.wA)(),[n,o]=a.useState(""),[I,A]=a.useState(!1),N=(0,b.tS)(),C=(0,i.d4)(e=>N?e.loadingState[E.f.loadingKeyForPayload({fileKey:N,emailAddress:n})]===d.r.LOADING:null);return a.createElement(y.fu,{name:"google_device_try_file_claim_modal"},a.createElement(T.aF,{disableKeyboardEventPropagation:!0,className:w.tQ,onHide:()=>(0,l.sx)("google_meet_claim_email_modal_closed",{fileKey:N})},a.createElement("div",{className:w.FS},a.createElement("h1",{className:w.DX},(0,f.tx)("google_device_try_file_modal.enter_email"))),a.createElement(p.k0,{multiple:1}),a.createElement("div",{className:w.FS},a.createElement("div",{className:w.Kc},(0,f.tx)("google_device_try_file_modal.enter_email.description"))),a.createElement(p.k0,{multiple:3}),a.createElement(m.il,{autoFocus:!0,type:"email",className:s()(w._2,I&&w.cC),placeholder:(0,f.t)("google_device_try_file_modal.enter_email.placeholder_email"),onChange:e=>{o(e.target.value)},value:n}),I&&a.createElement("div",{className:w.mV},(0,f.tx)("google_device_try_file_modal.enter_email.error_message")),a.createElement(p.k0,{multiple:2}),a.createElement(m.nD,{type:"submit",fullWidth:!0,onClick:a=>{if(a.preventDefault(),a.stopPropagation(),null==n||!1===(0,c.xf)(n)||!N){A(!0);return}if(!N){r(g.s.error((0,f.t)("google_device_try_file_modal.error_saving_board")));return}e.onSubmitEmail({fileKey:N,emailAddress:n})}},a.createElement(h.x,{isLoading:!!C,className:_.cx.flex.justifyCenter.$},()=>(0,f.tx)("google_device_try_file_modal.enter_email.button"))),a.createElement(p.k0,{multiple:3}),a.createElement("div",{className:w.NJ},(0,f.tx)("google_device_try_file_modal.disclaimer",{tos:a.createElement(S.V,{url:u.Ay.isMeetDevice?v.A:v.Uw,title:(0,f.t)("google_device_try_file_modal.onboarding_disclaimer_tos")}),privacy_policy:a.createElement(S.V,{url:u.Ay.isMeetDevice?v.bO:v.JD,title:(0,f.t)("google_device_try_file_modal.onboarding_disclaimer_privacy_policy")})})),a.createElement(p.k0,{multiple:1})))},"GOOGLE_DEVICE_TRY_FILE_CLAIM_MODAL")},492167:(e,r,n)=>{var a=n(411855),i=n(188507),o=n(966712),s=n(946689),l=n(632923),c=n(881388),d=n(939863),u=n(662275),m=n(672517),p=n(335682),h=n(237870),_=n(488578),g=n(411144);(0,h.Ju)(function(e){let{email:r,onChangeEmail:n}=e,h=(0,i.wA)(),f=(0,p.tS)();return a.createElement(m.fu,{name:"google_device_try_file_received_email_modal"},a.createElement(_.aF,{disableClickOutsideToHide:!0,disableKeyboardEventPropagation:!0,className:g.Kd},a.createElement("img",{src:(0,o.ck)("b0feff5e4abc5e66f99064463f2ad5d0a7f6c072.png"),alt:"",className:g.ZQ}),a.createElement(l.k0,{multiple:2}),a.createElement("div",{className:g.FS},a.createElement("h1",{className:g.DX},(0,d.tx)("google_device_try_file_modal.got_mail"))),a.createElement(l.k0,{multiple:1}),a.createElement("div",{className:g.FS},a.createElement("div",{className:g.Kc},(0,d.tx)("google_device_try_file_modal.got_mail.description",{email:a.createElement("p",{className:g.Fx},r)}))),a.createElement(l.k0,{multiple:3}),a.createElement(s.nD,{type:"close",fullWidth:!0,onClick:e=>{e.preventDefault(),e.stopPropagation(),h(u.Ce())}},(0,d.tx)("google_device_try_file_modal.got_mail.close")),a.createElement(l.k0,{multiple:3}),a.createElement("div",{className:g.NJ},(0,d.tx)("google_device_try_file_modal.got_mail.email_not_received",{send_again_link:a.createElement(s.Us,{className:g.jH,onClick:n=>{if(n.preventDefault(),n.stopPropagation(),!f){h(c.s.error((0,d.t)("google_device_try_file_modal.error_saving_board")));return}e.onResendEmail({fileKey:f,emailAddress:r,isResentEmail:!0})},target:"_blank",trusted:!0},(0,d.tx)("google_device_try_file_modal.got_mail.email_not_received.send_again"))})),a.createElement(l.k0,{multiple:2}),a.createElement("div",{className:g.NJ},(0,d.tx)("google_device_try_file_modal.got_mail.wrong_address",{use_different_email_link:a.createElement(s.Us,{className:g.jH,onClick:e=>{e.preventDefault(),e.stopPropagation(),n()},target:"_blank",trusted:!0},(0,d.tx)("google_device_try_file_modal.got_mail.wrong_address.use_different_email"))}))))},"GOOGLE_DEVICE_TRY_FILE_RECEIVED_EMAIL_MODAL")},488578:(e,r,n)=>{n.d(r,{Nb:()=>v,Rw:()=>A,aF:()=>S});var a=n(411855),i=n(188507),o=n(629019),s=n.n(o),l=n(776250),c=n(498750),d=n(730782),u=n(153234),m=n(799569),p=n(946689),h=n(493323),_=n(271779),g=n(939863),f=n(896474),E=n(662275),y=n(259927),b=n(672517),I=n(626208),T=(e=>(e.CLICK_OUTSIDE="click_outside",e.PRESS_ESCAPE="press_escape",e))(T||{});function v(e){let r,n;let{useModalViewScroll:i=!0,tintedModalBackground:o=!0,hide:l,disableClickOutsideToHide:u,size:m,alignment:p,absolutePosition:h,padding:_,height:g,maxHeight:f,width:E,title:b,titleClassName:T,className:v,fixedTop:S,backgroundClassName:w,onKeyDown:A,disableKeyboardEventPropagation:N,modalRef:C,onModalClick:L,enableEscapeToClose:O,children:R,animateIn:P,disableFocusTrap:D,noPadding:k,disableFocusOnMount:M}=e;(0,d.h)();let F=a.useCallback(()=>{u||l("click_outside")},[u,l]),x=a.useCallback(e=>{e.stopPropagation()},[]),U=a.useCallback(e=>{L&&L(e)},[L]),B=a.useCallback(e=>{if(e.keyCode===c.Uz.ESCAPE&&(!u||O)){l("press_escape"),e.preventDefault(),e.stopPropagation();return}A&&A(e),N&&(e.nativeEvent.stopImmediatePropagation(),e.stopPropagation())},[u,l,A,N,O]),V=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(M||V.current.matches(":focus-within")||V.current.focus(),D)return;let e=e=>{e.target.closest('[aria-modal="true"]')||V.current?.focus()};return document.body.addEventListener("focus",e,!0),()=>document.body.removeEventListener("focus",e,!0)},[M,D]),"number"==typeof m&&(r=m,n=m);let G=s()({[I.JY]:"small"===m,[I.ew]:"fitContent"===m,[I.Gx]:"mobile"===m,[I.R7]:!m||"medium"===m||"number"==typeof m}),H=s()(I.K1,w,y.Dm,{[I.Y0]:o,[I.CY]:S,[I.Xt]:"left"===p,[I.Ir]:"right"===p,[I.L4]:"leftNoPadding"===p}),W=s()(G,v,{[I.yl]:i,[I.Er]:!i,[I.KJ]:!!h,[I.HY]:P,[I.pN]:k}),K={minWidth:r,maxWidth:n,height:g,maxHeight:f,width:E,padding:_,...h?{top:h.top,left:h.left}:{}};return a.createElement("div",{tabIndex:0,className:H,onMouseDown:F,onKeyDown:B,ref:V,"data-testid":"modal-background","aria-modal":"true"},a.createElement("div",{className:W,style:K,onMouseDown:x,onClick:U,ref:C,role:"dialog","data-testid":e["data-testid"]},b&&a.createElement("div",{className:`${I.DD} ${T||""}`},b),R))}function S(e){let r=(0,i.wA)(),{onHide:n,popStack:o}=e,{name:s,properties:c}=(0,b.j6)(),d=c?.fileKey,u=c?.productType,m=a.useCallback(e=>{o?r(E.Lo()):r(E.Ce()),n&&n(),(0,l.sx)("Modal Close",{source:e,trackingContext:s,fileKey:d,productType:u})},[r,d,s,n,o,u]);return a.createElement(v,{...e,hide:m})}let w={playback:()=>({preventDefault:()=>{}})};function A(e){let r=e.recordingKey??"",n=e.destructive??!1,o=e.autoFocusCta??!0,s=(0,i.wA)(),{dontClose:l,popStack:c}=e,d=a.useCallback(()=>{l||(c?s(E.Lo()):s(E.Ce()))},[s,l,c]),{onCloseButtonClick:y}=e,b=a.useCallback(()=>{d(),y?.()},[d,y]),T=(0,u.rf)(r,"click",b),{hideOnConfirm:v,onConfirm:A}=e,N=a.useCallback(e=>{e.preventDefault(),(v??!0)&&d(),A()},[d,v,A]),C=(0,u.qP)(r,"confirm",N,w),{hideOnCancel:L,onCancel:O}=e,R=a.useCallback(e=>{e.preventDefault(),(L??!0)&&d(),O?.()},[d,L,O]),P=(0,u.qP)(r??"","cancel",R,w),D=n?p.qM:p.vd,k=!(e.dontClose||e.hideClose);return a.createElement(S,{size:e.size||"small",...e,className:e.className||I.yl,onHide:e.overrideOnHide??e.onCancel},k&&a.createElement(m.i0,{...e,className:e.closeClass,onClick:T}),a.createElement(_.i,{displayAs:_.C.Block},!e.hideConfirmationTitle&&a.createElement("div",{className:e.titleClass??I.DD},e.confirmationTitle??(0,g.tx)("modal.are_you_sure")),e.children?e.children:a.createElement("div",{className:I.jE},e.content),a.createElement("div",{className:I.v0},a.createElement("div",{className:e.helperTextClass??I._f},e.helperText),!e.hideCancel&&a.createElement(p.tM,{onClick:P,autoFocus:!!o&&n},e.cancelText??(0,g.tx)("modal.cancel")),e.isLoading?a.createElement(D,{dataTestId:"confirmation-modal-confirm-action-button",tabIndex:0,type:"submit",className:I.LO,disabled:!0,trackingProperties:e.trackedConfirmationProperties||{}},a.createElement(h.kt,{className:e.loadingText?I.FQ:I.u1}),e.loadingText):a.createElement("form",{onSubmit:C},a.createElement(D,{dataTestId:"confirmation-modal-confirm-action-button",tabIndex:0,type:"submit",className:I.pL,disabled:e.disableConfirm,autoFocus:!!o&&!n,trackingProperties:e.trackedConfirmationProperties||{}},e.confirmText))),e.bottomWarningText&&a.createElement("div",{className:I.$$},a.createElement(f.In,{icon:"warning-32"}),e.bottomWarningText)))}},963719:(e,r,n)=>{n.d(r,{J:()=>b,M:()=>y});var a=n(411855),i=n(511617),o=n(737947),s=n(966712),l=n(946689),c=n(322611),d=n(154254),u=n(939863),m=n(694687),p=n(237870),h=n(355025),_=n(929018),g=n(967063);let f=d.cx.colorIcon.h32.w28.pb32.$,E=d.cx.w300.maxWFull.font13.h40.cursorPointer.$,y="LINK_EXPIRED_MODAL",b=(0,p.Ju)(function(){let{frame_context:e}=(0,s.Ay)(),r=(0,i.GZ)()&&e?.type==="embed",n=(0,m.sZ)();return(0,h.K)()&&n?a.createElement(_.H,{org:n}):a.createElement(c.u,{imageSrc:g.A,imageClassName:f,headerText:(0,u.t)("link_expired.header"),secondaryText:(0,u.t)("link_expired.description")},!r&&a.createElement(l.vd,{className:E,type:"submit",onClick:()=>{o.Ay.redirect("/")}},(0,u.tx)("link_expired.go_back_to_figma")))},y)},447402:(e,r,n)=>{n.d(r,{Lu:()=>N});var a=n(411855),i=n(188507),o=n(299321),s=n(776250),l=n(201888),c=n(737947),d=n(966712),u=n(563706),m=n(153234),p=n(946689),h=n(939863),_=n(738269),g=n(809831),f=n(356390),E=n(335682),y=n(239671),b=n(237870),I=n(351596),T=n(488578),v=n(651104),S=n(373494);function w(e,r={}){(0,s.sx)("memory_warning_event",{currentAllocatedBytes:o.hMR?.getTotalUsedHeapMemory(),maxAllocatedBytes:o.hMR?.getMaxUsedHeapMemory(),...e,...r})}var A=(e=>(e.SHOW_RELOAD="showReload",e.SHOW_RECOVERY_MODE="showRecoveryMode",e.SHOW_BROWSER_UPGRADE="showBrowserUpgrade",e.SHOW_BROWSER_UPGRADE_AND_DESKTOP_DOWNLOAD="showBrowserUpgradeAndDesktop",e))(A||{});let N="memory-warning-modal";function C(e){let r=f.Y5.hasDesktopApp(),n=(0,i.d4)(e=>e.mirror.appModel.isReadOnly),s=(0,i.d4)(e=>e.selectedView),b=(0,g.XE)(s)===y.nT.Design,A=(0,E.tS)()||d.Ay().editing_file?.source_file?.key||"",N=(0,i.wA)(),C={view:"fullscreen",editorType:b?y.nT.Design:y.nT.Whiteboard,fileKey:A,isRecoveryMode:!0},L=o.hMR.getHeapMemoryMode()===o.rCR.RECOVERY,O=n||L?"showReload":u.Ay.isWasm4gbSupported?"showRecoveryMode":r?"showBrowserUpgrade":"showBrowserUpgradeAndDesktop",R={chrome:"https://support.google.com/chrome/answer/95414",safari:"https://support.apple.com/en-us/HT204416",firefox:"https://support.mozilla.org/en-US/kb/update-firefox-latest-release",msedge:"https://support.microsoft.com/en-us/topic/update-to-the-new-microsoft-edge-182d0668-e3f0-49da-b8bb-db5675245dc2"},P=a.createElement(p.CY,{onClick:()=>f.Y5.navigateToURL(u.Ay.mac?"/download/desktop/mac":"/download/desktop/win",o.jkn.NEW_TAB),trusted:!0},(0,h.tx)("memory_warning_modal.desktop_app_download_link")),D="showReload"===O?{title:(0,h.t)("memory_warning_modal.reload_modal_title"),content:(0,h.t)("memory_warning_modal.reload_modal_content"),contentCTA:(0,h.t)("memory_warning_modal.reload_modal_content_cta"),buttonCTA:(0,h.t)("memory_warning_modal.reload_page_button"),secondaryButtonCTA:(0,h.t)("memory_warning_modal.learn_more"),buttonExternalLink:null,secondaryButtonExternalLink:"https://help.figma.com/hc/articles/360040528173-Reduce-memory-usage-in-files/"}:"showRecoveryMode"===O?{title:(0,h.t)("memory_warning_modal.recovery_mode_modal_title"),content:(0,h.t)("memory_warning_modal.recovery_mode_modal_out_of_memory"),contentCTA:(0,h.t)("memory_warning_modal.recovery_mode_modal_content"),buttonCTA:(0,h.t)("memory_warning_modal.recovery_mode_button"),secondaryButtonCTA:(0,h.t)("memory_warning_modal.learn_more"),buttonExternalLink:null,secondaryButtonExternalLink:"https://help.figma.com/hc/articles/360040528173-Reduce-memory-usage-in-files/"}:"showBrowserUpgrade"===O?{title:(0,h.t)("memory_warning_modal.old_browser_out_of_memory_modal_title"),content:(0,h.t)("memory_warning_modal.old_browser_out_of_memory_modal_content"),contentCTA:(0,h.t)("memory_warning_modal.old_browser_out_of_memory_modal_content_cta_and_open_in_desktop"),buttonCTA:(0,h.t)("memory_warning_modal.old_browser_primary_button_cta"),secondaryButtonCTA:(0,h.t)("memory_warning_modal.open_in_desktop"),buttonExternalLink:u.Ay.browserType&&R[u.Ay.browserType]||null,secondaryButtonExternalLink:null}:{title:(0,h.t)("memory_warning_modal.old_browser_out_of_memory_modal_title"),content:(0,h.t)("memory_warning_modal.old_browser_out_of_memory_modal_content"),contentCTA:null,buttonCTA:(0,h.t)("memory_warning_modal.old_browser_primary_button_cta"),secondaryButtonCTA:null,buttonExternalLink:u.Ay.browserType&&R[u.Ay.browserType]||null,secondaryButtonExternalLink:null};return e.isBranching?a.createElement(I.E,null):a.createElement(T.aF,{size:"small",className:S.yl,disableClickOutsideToHide:!0},a.createElement("div",{className:v.GK},D.title),a.createElement("div",{className:v.jE},a.createElement("div",null,D.content,a.createElement("br",null),"\xa0",a.createElement("br",null)),"showBrowserUpgradeAndDesktop"===O?(0,h.tx)("memory_warning_modal.old_browser_out_of_memory_modal_content_cta_and_download_desktop",{desktopAppLink:P}):D.contentCTA,a.createElement("br",null)),a.createElement("div",{className:S.v0},D.secondaryButtonCTA&&a.createElement(p.nR,{recordingKey:m.Pt(e,"crash"),onClick:()=>{D.secondaryButtonCTA===(0,h.t)("memory_warning_modal.learn_more")&&w({warningEvent:"LEARN_MORE",fileKey:A},{isReadOnly:n}),"showBrowserUpgrade"===O&&(0,l.Sr)(location.href,l.B3.OOM_MODAL)}},a.createElement("a",{className:v.Xi,href:D.secondaryButtonExternalLink||void 0,target:"_blank"},D.secondaryButtonCTA)),a.createElement(p.$$,{recordingKey:m.Pt(e,"crash"),className:S.pL,onClick:()=>{D.buttonCTA===(0,h.t)("memory_warning_modal.recovery_mode_button")&&w({warningEvent:"OPEN_RECOVERY_MODE",fileKey:A},{isReadOnly:n}),("showRecoveryMode"===O||n)&&N(_.$T(C)),("showReload"===O||"showRecoveryMode"===O)&&c.Ay.reload("Memory warning panel")}},a.createElement("a",{className:v.Zb,href:D.buttonExternalLink||void 0,target:"_blank"},D.buttonCTA))))}(0,b.qK)(N,e=>{let{isBranching:r}=e.modalShown.data;return a.createElement(C,{isBranching:r})})},63666:(e,r,n)=>{n.d(r,{Ay:()=>w,CR:()=>R,NJ:()=>L,OA:()=>O,gm:()=>C,uv:()=>S});var a=n(411855),i=n(880934);n(629019);var o=n(91408),s=n(602126),l=n(860601),c=n(799569),d=n(946689),u=n(101505),m=n(672517),p=n(726864),h=n(168039),_=n(74505),g=n(457630),f=n(746806),E=n(884342),y=n(485861),b=n(837746),I=n(275596),T=n(630834),v=n(304516);let S=(0,o.hG)(b.W8e);function w(e){let r=(0,p.Yk)(),n=(0,g._X)({subscribeToUpdates_expensive:!0}),o=a.useRef({x:0,y:0,width:0,height:0,angle:0,absoluteBounds:{x:0,y:0,width:0,height:0},page:i.AD}),[s,l]=a.useState({left:0,top:0,pointerOffset:0,pointerPosition:0}),c=a.useMemo(()=>(0,E.P7)(e.pointerType||E.gm.arrow),[e.pointerType]),d=e.topPadding||-c.pointerTargetOverlap,u=a.useCallback(()=>{if(!o.current){l(null);return}let a=(0,g.Yb)(n,o.current.absoluteBounds),i={x:a.x+n.x,y:a.y+n.y,height:a.height,width:a.width};l((0,E.my)({width:e.width,height:e.height,targetRect:i,positioningConstants:c,alignPointerToLeft:e.alignPointerToLeft,shouldCenterArrow:e.shouldCenterArrow,topPadding:d,arrowPosition:e.arrowPosition,targetType:"canvas",viewportTopOffset:n.y,viewportBottomOffset:r}))},[e.height,e.width,c,e.alignPointerToLeft,e.shouldCenterArrow,d,r,e.arrowPosition,n]);return a.useEffect(()=>{let r=(0,_.EE)(`useCanvasNodeRepositioning-${e.targetKey}`,[e.targetKey],e=>{o.current=e.position,u()});return o.current=r.currentNodePosition[e.targetKey]?.position||null,u(),()=>{(0,_.lB)(`useCanvasNodeRepositioning-${e.targetKey}`)}},[e.targetKey,u]),(0,y.pc)({location:s,onTargetLost:e.onTargetLost,targetKey:e.targetKey,targetType:"canvas"}),s}function A(e,r){switch(e){case f.F_.TOP:case f.F_.BOTTOM:return{left:r};case f.F_.LEFT_TITLE:case f.F_.RIGHT_BODY:return{top:r};case f.F_.RIGHT_TITLE:return{}}}let N={[f.F_.TOP]:{foregroundStyle:I.FQ,backgroundStyle:I.oX},[f.F_.BOTTOM]:{foregroundStyle:I.nW,backgroundStyle:I.a5},[f.F_.LEFT_TITLE]:{foregroundStyle:I.Hn,backgroundStyle:I.gF},[f.F_.RIGHT_TITLE]:{foregroundStyle:I.Ar,backgroundStyle:I.Ny},[f.F_.RIGHT_BODY]:{foregroundStyle:I.Ar,backgroundStyle:I.Ny}};function C(e){let{foregroundStyle:r,backgroundStyle:n}=N[e.arrowPosition],i={...e.modalColor?{backgroundColor:e.modalColor}:{},...e.arrowOffset?A(e.arrowPosition,e.arrowOffset):{}},o={...e.modalColor?{backgroundColor:e.modalColor}:{},...e.pointerBorder?{backgroundColor:e.pointerBorderColor||"#444444"}:{},...e.arrowOffset?A(e.arrowPosition,e.arrowOffset):{}};return a.createElement(a.Fragment,null,a.createElement("div",{"aria-hidden":!0,className:n,style:o}),a.createElement("div",{"aria-hidden":!0,className:r,style:i}))}function L(e){let r=(0,E.P7)(E.gm.arrow),n=e.width||r.defaultModalWidth,i=e.backgroundColor,o=e.onVisibilityChange,[s,l]=a.useState(0),d=a.useCallback(e=>{null!==e&&l(e.getBoundingClientRect().height)},[]),u=(e.isCanvasNode?w:y.eP)({targetKey:e.targetKey,height:s,width:n+2*S,topPadding:e.topPadding,alignPointerToLeft:e.alignPointerToLeft,shouldScrollTargetIntoView:e.shouldScrollTargetIntoView,shouldCenterArrow:e.shouldCenterArrow,arrowPosition:e.arrowPosition,onTargetLost:e.onTargetLost}),m=!!u;if(a.useEffect(()=>{o&&o(m)},[m,o]),!u)return null;let p={left:u.left,top:u.top,width:n};e.topOffset&&(p.marginTop=e.topOffset),e.leftOffset&&(p.marginLeft=e.leftOffset);let h=e.backgroundColor?{backgroundColor:e.backgroundColor}:{};return a.createElement("div",{className:`${e.className||I.Lq} ${e.noAnimation?I.gh:""}`,style:{...p,...h},ref:d,role:"none"},a.createElement("div",{ref:e.containerRef,role:"tooltip"},!e.shouldHideArrow&&a.createElement(C,{arrowPosition:u.pointerPosition,arrowOffset:u.pointerOffset,modalColor:i}),e.shouldNotWrapInParagraphTag?e.children:a.createElement("p",null,e.children),e.dismissModal&&!e.hideCloseButton&&a.createElement(c.Jn,{useOriginalSrcFills_DEPRECATED:!0,className:I.b,onClick:e.dismissModal,innerText:"close",svg:v.A})))}function O(e){let{arrowPosition:r}=e,n=(0,E.P7)(E.gm.arrow),i=e.width||n.defaultModalWidth,o=e.backgroundColor,s="dark"===(0,h.DP)(),l="light"===e.background,[u,p]=a.useState(0),_=a.useCallback(e=>{null!==e&&p(e.getBoundingClientRect().height)},[]),g=(0,y.eP)({targetKey:e.targetKey,height:u,width:i+2*S,topPadding:e.topPadding,shouldCenterArrow:e.shouldCenterArrow,alignPointerToLeft:e.alignPointerToLeft,...r&&{arrowPosition:r}});if(!g&&!e.shouldCenterModal)return null;let f=l&&!s,b=a.createElement(c.Jn,{useOriginalSrcFills_DEPRECATED:!0,className:`${I._S} ${!f&&e.isUI3?I.uS:""}`,onClick:e.dismissModal,innerText:"close",svg:f?T.default:v.A}),w=a.createElement("div",null,e.ctaText&&e.onClickPrimaryCta&&a.createElement("div",{className:I.ZA},e.bottomLeftText&&a.createElement("b",null,e.bottomLeftText),a.createElement("div",{className:I.OQ},e.secondaryCtaText&&e.onClickSecondaryCta&&a.createElement(m.$z,{className:l?I.jS:I.dC,onClick:e.onClickSecondaryCta,"aria-hidden":!0},e.secondaryCtaText),e.ctaText&&e.onClickPrimaryCta&&a.createElement(d.vd,{className:l?I.TI:I.ZO,onClick:e.onClickPrimaryCta,trackingProperties:e.buttonContext?{buttonContext:e.buttonContext}:void 0},e.ctaText)))),A={backgroundColor:o,width:i,margin:e.topOffset?`${e.topOffset}px auto`:"auto"},N=g?{left:g.left,top:g.top}:{left:0,right:0,top:0,bottom:0};return a.createElement("div",{className:l?I.IL:I.wV,ref:_,style:{...A,...N}},a.createElement("div",null,g&&a.createElement(C,{arrowPosition:g.pointerPosition,arrowOffset:g.pointerOffset,modalColor:l?"var(--color-bg)":void 0}),a.createElement("h1",null,e.title),e.children,b),w)}let R=a.forwardRef(function(e,r){let[n,i]=a.useState(0),o=a.useCallback(e=>{null!==e&&i(e.getBoundingClientRect().height),null!=r&&(r.current=e)},[r]),d=a.useRef(null),m=e.disableClickOutsideToHide?l.lQ:e.dismissModal;(0,s.ww)(d,m);let p=a.useRef(null),h=(0,y.eP)({targetKey:e.targetKey,height:e.passHeightForLocation?e.height?e.height:0:n,width:e.width+2*S,topPadding:e.topPadding,shouldCenterArrow:e.shouldCenterArrow,arrowPosition:e.arrowPosition,onTargetLost:e.onTargetLost});a.useEffect(()=>{h&&(p.current=h)},[h]);let _=h||p.current,g=e.hideIfTargetLost&&null==h;if(!_||g||e.hideModal||e.shouldDismissWhenLostDOMTarget&&!h)return null;let f=e.pointerBackgroundColor||"var(--color-border, rgba(0, 0, 0, 0.2))",E=e.pointerForegroundColor||"var(--color-bg, white)",b={left:_.left,top:_.top,width:e.width};e.height&&(b.height=e.height);let w=e.animateQuickly?I.B9:I.w0,A=e.pointerPaddingOffset??0;return a.createElement("div",{ref:d},a.createElement("div",{className:e.className?`${e.className}`:w,style:b,ref:o,"data-testid":"walkThroughModal"},!e.hidePointer&&a.createElement(C,{arrowPosition:_.pointerPosition,arrowOffset:_.pointerOffset+A,modalColor:E,pointerBorderColor:f,pointerBorder:!0}),e.children,!e.hideCloseButton&&a.createElement(c.Jn,{className:`${I.b} ${e.closeButtonClassName||""} ${e.useWhiteCloseButton?I.uS:""} `,onClick:()=>{e.additionalOnExplicitDismiss&&e.additionalOnExplicitDismiss(),e.dismissModal()},innerText:"close",svg:e.useWhiteCloseButton?v.A:T.default,trackingProperties:{trackingDescriptor:u.c.CLOSE_BUTTON}})))})},66154:(e,r,n)=>{n.d(r,{$v:()=>u});var a=n(411855);n(188507),n(299321);var i=n(281381);n(163023);var o=n(154254),s=n(939863);n(293017),n(99506),n(243987),n(397065),n(279145);var l=n(746806),c=n(697338);function d(){return a.createElement(i.Ex,{color:i.zE.DEFAULT,text:(0,s.t)("pro_onboarding.professional"),className:o.cx.colorTextBrand.colorBgSelectedSecondary.font11.$})}function u({dismissModal:e}){let r="share-prototype";return a.createElement(c.Pp,{dismissModal:e,pointerTargetKey:r,calloutTargetKey:r,arrowPosition:l.F_.TOP,title:(0,s.t)("pro_onboarding.prototpye_only_links"),subtitle:(0,s.t)("pro_onboarding.on_your_professional_plan_you_can_share_prototypes"),width:300,badge:a.createElement(d,null)})}n(601538)},524513:(e,r,n)=>{n.d(r,{yU:()=>N});var a=n(411855),i=n(109388),o=n(188507),s=n(299321),l=n(629019),c=n.n(l),d=n(776250),u=n(498750),m=n(153234),p=n(799569),h=n(946689),_=n(271779),g=n(939863),f=n(662275),E=n(188276),y=n(761771),b=n(226055),I=n(335682),T=n(694517),v=n(237870),S=n(585878),w=n(488578),A=n(678019);let N="savepoint-modal";(0,v.qK)(N,e=>{let r=e.modalShown,n=r.data&&r.data.description||"",i=r.data&&r.data.label||"",o=r.data&&r.data.savepointID,l=r.data&&r.data.isEditingMergeSavepoint||!1,c=(0,b.GS)(),d=!e.openFile.canEdit;return a.createElement(L,{recordingKey:"savepointModal",fileKey:e.openFile.key,isHistoryMode:e.mirror.appModel.topLevelMode===s.lyf.HISTORY,editorType:e.openFile.editorType,editingSavepointID:o,label:i,dispatch:e.dispatch,description:n,isViewOnly:d,isEditingMergeSavepoint:l,isUI3:c})});let C=class e extends m.uA{constructor(r){super(r),this.onConfirmSavepointModal=(e,r)=>{let n=e||"",a=r||"";this.props.editingSavepointID&&this.props.fileKey?(this.props.dispatch(E.D({fileKey:this.props.fileKey,savepointID:this.props.editingSavepointID,label:n,description:a})),this.hideModal(),(0,d.sx)("History Version Edited Information",{savepointId:this.props.editingSavepointID,labelLength:n.length,descriptionLength:a.length})):n.length>0&&this.props.fileKey&&(this.props.dispatch(y.m({fileKey:this.props.fileKey,label:n,description:a})),this.hideModal(),(0,d.sx)(`History Version Created from ${this.props.isHistoryMode?"History Mode":"Keyboard Shortcut"}`,{savepointId:this.props.editingSavepointID,labelLength:n.length,descriptionLength:a.length})),this.clearSavedInputs()},this.onKeyDownMulti=e=>{e.keyCode===u.Uz.ENTER&&(e.ctrlKey||e.metaKey||e.altKey)&&(e.preventDefault(),this.hideModal(),this.onConfirmSavepointModal(this.state.label,this.state.description))},this.hideModal=()=>{this.props.dispatch(f.Ce())},this.onSubmit=m.P_(this,"submit",e=>{e.preventDefault(),this.onConfirmSavepointModal(this.state.label,this.state.description)}),this.onCancel=()=>{this.clearSavedInputs(),this.hideModal()},this.saveHistoryInputs=()=>{e.keepSavepointModalInput=!0,e.savedLabelInput=this.state.label,e.savedDescriptionInput=this.state.description},this.clearSavedInputs=()=>{e.keepSavepointModalInput=!1,e.savedLabelInput="",e.savedDescriptionInput=""},this.focusRef=e=>{e&&i.findDOMNode(e).focus()},this.onLabelChange=e=>{let r=e.target.value;this.setState({label:r})},this.onLabelBlur=e=>{this.onLabelChange(e)},this.onDescriptionChange=e=>{let r=e.target.value;this.setState({description:r})},this.onDescriptionBlur=e=>{this.onDescriptionChange(e)},this.goHistoryMode=()=>{this.props.isHistoryMode||(this.props.dispatch((0,T._b)()),this.saveHistoryInputs(),this.hideModal())},this.state={label:"",description:"",disableConfirm:!this.props.isLabelReadOnly}}setLabelAndDescriptionFromProps(r){this.state.label.length<1&&this.state.description.length<1&&(e.keepSavepointModalInput?this.setState({label:e.savedLabelInput,description:e.savedDescriptionInput}):this.setState({label:this.props.label,description:this.props.description}))}componentDidMount(){this.setLabelAndDescriptionFromProps(this.props),super.componentDidMount()}UNSAFE_componentWillReceiveProps(e){this.setLabelAndDescriptionFromProps(e)}render(){if(this.props.isViewOnly)return null;let e=this.state.disableConfirm;this.state.label&&this.state.label.length>0&&(e=!1);let r=(0,g.tx)("collaboration.feedback.save_modal.save"),n=(0,g.tx)("collaboration.feedback.save_modal.cancel"),i=this.props.editingSavepointID?this.props.isEditingMergeSavepoint?(0,g.tx)("collaboration.feedback.save_modal.edit_merge_details"):(0,g.tx)("collaboration.feedback.save_modal.edit_version_information"):(0,g.tx)("collaboration.feedback.save_modal.add_to_version_history"),o=a.createElement(_.i,{displayAs:_.C.Block},a.createElement("form",{onSubmit:this.onSubmit},a.createElement("div",{className:this.props.isUI3?A.nr:void 0},a.createElement("div",{className:A.uW},this.props.isEditingMergeSavepoint&&a.createElement("div",{className:A.VA},(0,g.tx)("collaboration.feedback.save_modal.merge_name_placeholder")),a.createElement(h.ks,{className:c()([A.NB,{[A.pR]:this.props.isLabelReadOnly}]),type:"input",name:"label",value:this.state.label,placeholder:(0,g.t)("fullscreen.savepoint_modal.title"),onChange:this.onLabelChange,onBlur:this.onLabelBlur,onKeyDown:this.onKeyDownMulti,autoFocus:!0,recordingKey:m.Pt(this.props,"title"),disabled:this.props.isLabelReadOnly})),a.createElement("div",{className:this.props.isUI3?void 0:A.uW},this.props.isEditingMergeSavepoint&&a.createElement("div",{className:A.VA},(0,g.tx)("fullscreen.savepoint_modal.give_this_merge_a_description")),a.createElement(h.ks,{className:A.tV,type:"textarea",name:"description",value:this.state.description,placeholder:(0,g.t)("collaboration.feedback.save_modal.description_placeholder"),onChange:this.onDescriptionChange,onBlur:this.onDescriptionBlur,onKeyDown:this.onKeyDownMulti,recordingKey:m.Pt(this.props,"description")}))),a.createElement("div",{className:this.props.isHistoryMode?A.$8:A.v0},!this.props.isHistoryMode&&a.createElement("div",{className:A.RW,onClick:this.goHistoryMode},(0,g.tx)("fullscreen.savepoint_modal.show_full_version_history")),a.createElement(h.e2,{reversed:!0},a.createElement(h.$$,{type:"submit",className:A.pL,disabled:e},r),a.createElement(h.nR,{type:"button",className:A.Lu,onClick:this.onCancel},n)))));return this.props.isUI3?a.createElement(S.XV,{title:i,onClose:this.hideModal},a.createElement("div",{className:A.yl},o)):a.createElement(w.aF,{size:"small",...this.props,className:A.yl},a.createElement(p.s_,{...this.props}),a.createElement("div",{className:A.DD},i),o)}};C.displayName="SavepointModal",C.keepSavepointModalInput=!1,C.savedLabelInput="",C.savedDescriptionInput="";let L=C;(0,v.Ju)(function({savepointID:e,label:r,description:n}){let i=(0,I.q5)(),s=(0,o.wA)(),l=(0,b.GS)();return i?a.createElement(L,{recordingKey:"savepointModal",fileKey:i.key,isHistoryMode:!0,editorType:i.editorType,editingSavepointID:e,label:r??"",dispatch:s,description:n??"",isViewOnly:!i.canEdit,isUI3:l,isLabelReadOnly:!0}):null},"DevModeSavepointModal")},161394:(e,r,n)=>{n.d(r,{MC:()=>y,QK:()=>I});var a=n(411855),i=n(57860),o=n(862350),s=n(951792),l=n(288006),c=n(463033),d=n(299321),u=n(776250);n(794272);var m=n(966712),p=n(493323),h=n(939863);n(100197);var _=n(237870),g=n(488578),f=n(456893),E=n(373494);let y="upgrading-modal";(0,_.qK)(y,e=>a.createElement(b,{upgradingState:e.modalShown.data.upgradingState,dispatch:e.dispatch}));class b extends a.Component{render(){let e=this.props.upgradingState===d.kul.UPGRADING?(0,h.t)("multiplayer_upgrade_modal.content_saving"):(0,h.t)("multiplayer_upgrade_modal.content_reloading");return a.createElement(g.aF,{size:"small",className:E.yl,disableClickOutsideToHide:!0},a.createElement("div",{className:E.DD},(0,h.tx)("multiplayer_upgrade_modal.title")),a.createElement(f.B,null),a.createElement("div",{className:E.jE},e),a.createElement("div",{className:E.v0},(0,m.kc)().ss_fpl_upgrade?a.createElement(i.k,{size:"md"}):a.createElement(p.kt,null)))}}b.displayName="UpgradingModal";let I=(0,_.Ju)(function(e){let r=o.hS({preventUserClose:!0,...e}),n=e.upgradingState===d.kul.UPGRADING?(0,h.t)("multiplayer_upgrade_modal.content_saving"):(0,h.t)("multiplayer_upgrade_modal.content_reloading");return a.createElement(s.bL,{width:400,manager:r},a.createElement(l.vo,null,a.createElement(l.Y9,null,a.createElement(l.hE,null,(0,h.tx)("multiplayer_upgrade_modal.title"))),a.createElement(l.nB,null,a.createElement(f.B,null),a.createElement("div",{className:E.jE},n),a.createElement("div",{className:E.v0},a.createElement(i.k,{size:"md"})))))},"UpgradingModal");class T extends a.Component{constructor(){super(...arguments),this.noOp=e=>e,this.onUpdateClicked=()=>{(0,u.sx)("Upgrade Modal Clicked"),d.h3O.startUpgrade()}}render(){let{multiplayerSessionState:e,isReadOnly:r}=this.props,n=e!==d.kul.UNJOINED;return e===d.kul.UPGRADING||e===d.kul.WAITING_FOR_RELOAD?null:a.createElement(g.aF,{size:"small",className:E.yl,disableClickOutsideToHide:!0},a.createElement("div",{className:E.DD},(0,h.tx)("multiplayer_upgrade_modal.title")),a.createElement("div",{className:E.jE},(0,h.tx)("multiplayer_upgrade_modal.content"),!n&&a.createElement("span",null,a.createElement("br",null),"\xa0",a.createElement("br",null),(0,h.tx)("multiplayer_upgrade_modal.content_offline"))),n&&a.createElement("div",{className:E.v0},a.createElement(c.$n,{onClick:this.onUpdateClicked},r?(0,h.tx)("multiplayer_upgrade_modal.reload_button"):(0,h.tx)("multiplayer_upgrade_modal.save_and_reload_button"))))}}T.displayName="OutOfDateWall"},485861:(e,r,n)=>{n.d(r,{eP:()=>d,pc:()=>l,xT:()=>c});var a=n(411855),i=n(47506),o=n(479296),s=n(884342);function l({location:e,onTargetLost:r,targetKey:n,targetType:o}){let s=a.useRef(null),l=a.useRef(null),c=a.useRef(!1);a.useEffect(()=>{!c.current&&e&&(c.current=!0)},[c,e]),a.useEffect(()=>{e?(s.current=e,l.current=n):l.current===n&&((0,i.YQ)({id:"Lost DOM Target"}),r?.(c.current,o))},[e,r,n,o])}function c(e){let r=document.querySelectorAll(`[data-onboarding-key=${e}]`);if(0===r.length)return null;for(let e=0;e<r.length;e++){let n=r[e].getBoundingClientRect();if(!(0===n.left&&0===n.right&&0===n.height&&0===n.width))return r[e]}return null}let d=(0,o.D)(e=>{let r=(0,s.P7)(e.pointerType||s.gm.arrow);e.pointerOffsetOverride&&(r.standardPointerOffset=e.pointerOffsetOverride);let n=e.topPadding||-r.pointerTargetOverlap,i=a=>{let i=c(e.targetKey);if(null!=i){let o=(0,s.my)({width:e.width,height:e.height,targetRect:i.getBoundingClientRect(),positioningConstants:r,alignPointerToLeft:e.alignPointerToLeft,shouldCenterArrow:e.shouldCenterArrow,topPadding:n,targetType:"dom",arrowPosition:e.arrowPosition});return null==a||o.top!==a.top||o.left!==a.left?{type:"CHANGED",location:o}:{type:"UNCHANGED"}}return{type:"NOT_FOUND"}},o=null,[d,u]=a.useState(()=>{let e=i(null);return"CHANGED"===e.type&&(o=e.location),o}),[m,p]=a.useState(null);a.useEffect(()=>{let r=i(d);if("CHANGED"===r.type?o=r.location:"UNCHANGED"===r.type&&(o=d),void 0!==r&&u(o),p(e.targetKey),e.shouldScrollTargetIntoView){let r=c(e.targetKey);r?.scrollIntoView()}},[e.targetKey]);let h=a.useRef();function _(){let e=i(d);"CHANGED"===e.type?u(e.location):"NOT_FOUND"===e.type&&u(null)}return(a.useEffect(()=>{h.current=_}),a.useEffect(()=>{let e=setInterval(function(){h.current()},50);return()=>clearInterval(e)},[]),l({location:d,onTargetLost:e.onTargetLost,targetKey:e.targetKey,targetType:"dom"}),m!==e.targetKey)?o:d})},561916:(e,r,n)=>{n.d(r,{J4:()=>D,YU:()=>B,Kd:()=>G,Iz:()=>V,_9:()=>k,lG:()=>x,fb:()=>M,p8:()=>F,mi:()=>W,ET:()=>H});var a=n(411855),i=n(188507),o=n(302586),s=n(240624),l=n(918152),c=n(790484),d=n(137035),u=n(966712),m=n(893281),p=n(46481),h=n(939863),_=n(226055),g=n(318812),f=n(694687),E=n(99506),y=n(239671),b=n(851363),I=n(498606),T=n(231959),v=n(928491),S=n(538697);let w="audience_selector--iconContainer--W80mw",A="audience_selector--radioText--OD-3K",N="audience_selector--radioOption--4NDFa",C="audience_selector--radioSubtitle--g3Mry",L="audience_selector--blackIcon--PM3f-";var O=n(585101),R=n(535011),P=n(204702),D=(e=>(e.VIEW="view",e.EDIT="edit",e))(D||{}),k=(e=>(e.ANYONE="anyone",e.ORG="org",e.WORKSPACE="workspace",e.TEAM="team",e.FOLDER="folder",e.INVITE_ONLY="invite_only",e))(k||{});let M={[E.PQ.EDIT]:{shareAudience:"anyone",audienceAccessLevel:"edit"},[E.PQ.VIEW]:{shareAudience:"anyone",audienceAccessLevel:"view"},[E.PQ.ORG_EDIT]:{shareAudience:"org",audienceAccessLevel:"edit"},[E.PQ.ORG_VIEW]:{shareAudience:"org",audienceAccessLevel:"view"},[E.PQ.WORKSPACE_VIEW]:{shareAudience:"workspace",audienceAccessLevel:"view"},[E.PQ.WORKSPACE_EDIT]:{shareAudience:"workspace",audienceAccessLevel:"edit"},[E.PQ.INHERIT]:{shareAudience:"invite_only",audienceAccessLevel:null},[E.PQ.INVITE_ONLY]:{shareAudience:"invite_only",audienceAccessLevel:null}},F={[E.Pu.VIEW]:{shareAudience:"anyone",audienceAccessLevel:"view"},[E.Pu.ORG_VIEW]:{shareAudience:"org",audienceAccessLevel:"view"},[E.Pu.INHERIT]:{shareAudience:"invite_only",audienceAccessLevel:null}};function x(e,r){return"anyone"===e?"edit"===r?E.PQ.EDIT:E.PQ.VIEW:"org"===e?"edit"===r?E.PQ.ORG_EDIT:E.PQ.ORG_VIEW:E.PQ.INVITE_ONLY}let U=(e,r)=>{if("anyone"===e){if("anyone"!==r)return!1}else if("org"===e&&"invite_only"===r)return!1;return!0};function B(e){let r=(0,i.wA)(),n={[E.vt.TEAM]:["invite_only"],[E.vt.FOLDER]:["invite_only"],[E.vt.FILE]:["anyone","invite_only"],[E.vt.FILE_REPO]:["anyone","invite_only"]}[e.resourceType],m=null;e.org&&(e.workspace&&e.workspace.id!==T.O&&n.splice(1,0,"workspace"),n.splice(1,0,"org")),e.isPrototype&&(n=n.filter(r=>U(e.fileShareAudience,r)),"anyone"===e.fileShareAudience&&1===n.length&&"anyone"===n[0]&&(m=(0,h.t)("permissions.audience_selector.can_only_be_adjusted_in_the_main_file")));let f=(0,g.Um)(),b={anyone:(0,h.t)("permissions.audience_selector.anyone"),workspace:e.workspace?.name||"",org:e.org?.name||"",team:e.team?.name||"",folder:"",invite_only:(0,h.t)("permissions.audience_selector.only_invited_people")},A=(0,_.GS)(),N={anyone:a.createElement("div",{className:w},a.createElement(p.U,{svg:R.A,className:L},a.createElement(o.Y,null))),workspace:e.workspace&&a.createElement("div",{className:w},A?a.createElement(s.w,null):a.createElement(v.z6,{entity:e.workspace,size:16})),org:e.org&&a.createElement("div",{className:w},A?a.createElement(l.Y,null):a.createElement(p.U,{svg:P.A,className:L},a.createElement(l.Y,null))),team:e.team&&a.createElement("div",{className:w},a.createElement(v.Ro,{entity:{id:e.team.id,imgUrl:e.team.img_url,name:e.team.name},hideFallbackInitial:!1,size:16})),folder:a.createElement(a.Fragment,null),invite_only:a.createElement("div",{className:w},a.createElement(p.U,{svg:O.A,className:L},a.createElement(c.c,null)))},C=a.useCallback(()=>{let r={[E.vt.TEAM]:(0,h.t)("permissions.audience_selector.team_resource_name"),[E.vt.FOLDER]:(0,h.t)("permissions.audience_selector.project_resource_name"),[E.vt.FILE]:(0,h.t)("permissions.audience_selector.file_resource_name"),[E.vt.FILE_REPO]:(0,h.t)("permissions.audience_selector.file_resource_name")};return e.isPrototype?e.editorType===y.nT.Slides&&(0,u.kc)().slides_paywall_string?(0,h.t)("permissions.audience_selector.presentation_resource_name"):(0,h.t)("permissions.audience_selector.prototype_resource_name"):r[e.resourceType]},[e.isPrototype,e.resourceType,e.editorType]),D=a.useMemo(()=>{let r=C();switch(e.value){case"anyone":return e.editorType===y.nT.Slides?(0,h.t)("permissions.audience_selector.anyone_even_outside_your_org_can_access_this_resource",{resourceName:r}):(0,h.t)("permissions.audience_selector.anyone_even_those_outside_your_org_can_access_this_resource",{resourceName:r});case"org":if(e.searchable)return(0,h.t)("permissions.audience_selector.audience_can_access_through_search_link_or_file_browser",{resourceName:r,audience:(0,h.t)("permissions.audience_selector.org_members")});return(0,h.t)("permissions.audience_selector.audience_can_access_through_link_or_file_browser",{resourceName:r,audience:(0,h.t)("permissions.audience_selector.org_members")});case"workspace":return(0,h.t)("permissions.audience_selector.audience_can_access_through_search_link_or_file_browser",{resourceName:r,audience:(0,h.t)("permissions.audience_selector.workspace_members")});case"team":case"folder":return(0,h.t)("permissions.audience_selector.can_access_through_search_file_browser_link");case"invite_only":return(0,h.t)("permissions.audience_selector.only_people_you_directly_invited_can_access",{resourceName:r})}},[e.value,e.searchable,e.editorType,C]);return a.createElement("div",{"data-testid":"create-team-modal-audience-selector"},a.createElement(S.l6,{id:"create-team-modal-audience-selector",property:e.value,formatter:{format:e=>b[e]},onChange:e.onChange,dispatch:r,dropdownShown:f,className:"audience_selector--dropdownSelector--eEAHQ select--selectInputExpanded--Lz6m4",inputClassName:"audience_selector--dropdownSelectorTitle---y7CH",icon:N[e.value],dropdownClassName:"audience_selector--dropdownContainer--Xyoak",openBelowTarget:!A,focusedOption:n[0],disabled:!!m||e.disabled,rightIcon:m?a.createElement(d.b,{"data-tooltip-type":I.Ib.TEXT,"data-tooltip":m}):void 0,iconClassName:"audience_selector--dropdownSvg--VPhRA"},n.map(r=>a.createElement(S.c$,{value:r,key:r,height:28,icon:N[r],dataTestId:`audience-option-${r}`,rightCheck:!0,disabled:"anyone"===r&&e.publicLinksBanned},b[r]))),a.createElement("div",{className:"audience_selector--subtitle--MIXKn text--fontPos11--2LvXf text--_fontBase--QdLsd"},D))}function V(e){return a.createElement(a.Fragment,null,a.createElement(m.z,{value:e.selectedPermissionsLevel,onChange:e.setSelectedPermissionsLevel,isHorizontal:!0,dataTestId:"permissions-level-radio-group"},a.createElement(m.Z,{key:"view-only",value:"view",className:N,disabled:e.disabled},a.createElement("p",{className:A},(0,h.tx)("team_creation.view"))),a.createElement(m.Z,{key:"edit",value:"edit",className:N,disabled:e.disabled||e.disableEdit},a.createElement("p",{className:A},e.teamCanAccess?(0,h.tx)("permissions.level_name_capitalized.can_access"):(0,h.tx)("team_creation.edit")))))}function G(e){return f.sZ()?.k12_google_org&&(0,u.kc)().student_plan_no_hidden_teams?a.createElement(m.z,{dataTestId:"org-browsable-team-radio-options",value:e.selectedDiscoverability,onChange:e.setSelectedDiscoverability},a.createElement(m.Z,{key:"org_browsable",value:b.Fb.ORG_BROWSABLE,className:N},a.createElement("p",{className:A},(0,h.tx)("team_creation.visible"))),a.createElement("p",{className:C},(0,h.tx)("team_creation.anyone_can_find_this_team"))):a.createElement(a.Fragment,null,a.createElement(m.z,{dataTestId:"org-browsable-team-radio-options",value:e.selectedDiscoverability,onChange:e.setSelectedDiscoverability},a.createElement(m.Z,{key:"org_browsable",value:b.Fb.ORG_BROWSABLE,className:N},a.createElement("p",{className:A},(0,h.tx)("team_creation.visible"))),a.createElement("p",{className:C},(0,h.tx)("team_creation.anyone_can_find_this_team")),a.createElement(m.Z,{key:"hidden",value:b.Fb.HIDDEN,className:N},a.createElement("p",{className:A},(0,h.tx)("team_creation.hidden"))),a.createElement("p",{className:C},(0,h.tx)("team_creation.only_team_members_can_find_and_access"))))}function H(e,r,n,i){return e===E.PQ.EDIT||e===E.PQ.VIEW?i?(0,h.tx)("file_audience_row.anyone_with_password"):(0,h.tx)("permissions.anyone"):e===E.PQ.ORG_EDIT||e===E.PQ.ORG_VIEW?r&&(0,h.tx)("permissions.anyone_in_container_name",{containerName:r.name}):e===E.PQ.WORKSPACE_EDIT||e===E.PQ.WORKSPACE_VIEW?n&&(0,h.tx)("permissions.anyone_in_container_name",{containerName:n.name}):e===E.PQ.INVITE_ONLY||e===E.PQ.INHERIT?(0,h.tx)("permissions.only_those_invited"):a.createElement(a.Fragment,null)}function W(e){return e===E.PQ.EDIT||e===E.PQ.ORG_EDIT||e===E.PQ.WORKSPACE_EDIT?(0,h.tx)("file_access_row.can_edit"):e===E.PQ.VIEW||e===E.PQ.ORG_VIEW||e===E.PQ.WORKSPACE_VIEW?(0,h.tx)("file_access_row.can_view"):void 0}},717156:(e,r,n)=>{n.d(r,{mK:()=>f,ox:()=>g});var a=n(411855),i=n(188507),o=n(181912),s=n(27087),l=n(47506),c=n(662275),d=n(877645),u=n(860178),m=n(963719),p=n(971646);function h(e){s.Ay.put(`/api/files/${e}/expire_public_link`)}let _=(e,r)=>{let n=a.useRef(null);a.useEffect(()=>{let a=e?(0,o.A)(e).diff((0,o.A)()):void 0;return void 0!==a&&a<2147483647?(n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{n.current=null,r()},a)):n.current&&(clearTimeout(n.current),n.current=null),()=>{n.current&&clearTimeout(n.current)}},[e,r])};function g(e){let r=(0,u.iZ)(),n=(0,i.wA)(),{file:o,onCanvasExpired:s}=e,p=o?.key,g=(0,d.v)(e.file),f=a.useRef(void 0),E=g?.activeExpiration,y=g?.file,b=y?.hasViewPrototypeRole,I=g?.accessReverted;a.useEffect(()=>{b&&I&&!f.current?.accessReverted&&g.expiresAt&&g.expiresAt===f.current?.expiresAt&&(0,l.YQ)({id:"link_expired_event"}),f.current=g},[g,I,b]),_(E,a.useCallback(()=>{p&&(b&&r||(n(c.to({type:m.J})),s?.()),h(p))},[n,s,p,r,b]))}function f(e,r){_(p.d4(r)?.toISOString(),a.useCallback(()=>{h(e)},[e]))}},723856:(e,r,n)=>{n.d(r,{$:()=>u});var a=n(414507),i=n(776621),o=n(662275),s=n(396226);n(99506);var l=n(300874),c=n(239671),d=n(449731);function u(e,r,n){if(!(0,c.Nw)(r)){(0,i.$D)(a.FigmaTeam.MONETIZATION_UPGRADES,Error("Paywall: Wrong editor type for pro feature"),{extra:{editorType:r,teamId:n.id}});return}e((0,o.to)({type:d.DV,data:{team:n,editorType:(0,c.oD)(r),resource:l.Bi.PASSWORD_PROTECTION,currentPlan:s.F.Plan.STARTER,upsellPlan:s.F.Plan.PRO}}))}},578427:(e,r,n)=>{n.d(r,{KM:()=>P,Ku:()=>F});var a=n(411855),i=n(188507),o=n(463033),s=n(887681),l=n(902237),c=n(256296),d=n(511617),u=n(966712),m=n(38580),p=n(646240),h=n(154254),_=n(939863),g=n(501114),f=n(931828),E=n(672517),y=n(335682),b=n(132135),I=n(637590),T=n(561916),v=n(329099),S=n(335775),w=n(882613),A=(e=>(e.EDIT="edit",e.DUPLICATE="duplicate",e))(A||{});let N=(0,u.ck)("cee072aec57608cbb49c64eb6cb3765896cea921"),C="share-to-google-classroom-row",L=(0,m.eU)(null),O=(0,E.tf)(S.sR);function R(e){let r=(0,i.wA)(),n=(0,p.Xr)(L),o=a.useRef(null);a.useEffect(()=>(n(o),()=>{n(null)}),[o,n]);let s=a.createElement("div",{ref:o,className:w.S},a.createElement("img",{src:N,alt:"share to google classroom",className:w.S}));return a.createElement(E.fu,{name:"share_to_google_classroom_row"},a.createElement(O,{icon:s,text:(0,_.t)("file_permissions_modal.share_as.google_classroom"),onClick:()=>{r(f.b({has_shared_to_google_classroom:!0})),e.onClick()},testId:C,dataOnboardingKey:C,expandCaret:!0,trackingProperties:{text:"Share to Google Classroom"}}))}function P({org:e,currentUser:r}){let n=(0,v.o)(),i=e?.k12_google_org,o=["student_or_educator","student","educator","education"].includes(r?.profile?.jobTitle||"");return i||o?a.createElement(R,{onClick:()=>n(I.A5.SHARE_TO_GOOGLE_CLASSROOM)}):null}let D=(0,E.tf)(o.$n),k=g.sx.add({color:"var(--color-text-figjam)",cursor:"pointer",userSelect:"auto"}).$,M=g.sx.add({transform:"translateY(-4px)"}).$;function F(e){let r=T.fb[e.linkAccess].audienceAccessLevel!==T.J4.EDIT,n=(0,y.q5)(),[i,o]=(0,a.useState)("edit"),u=(0,v.o)();return a.createElement(E.fu,{name:"google_classroom_share_modal"},a.createElement("div",{className:h.cx.flex.flexColumn.p16.$},a.createElement("form",null,a.createElement(s.b,{legend:a.createElement(l.s,null,r?a.createElement("div",{className:h.cx.textBodyMedium.pb8.$,"data-testid":"share-to-google-classroom-disclaimer"},(0,_.tx)("file_permissions_modal.google_classroom_modal.disclaimer",{link:a.createElement(E.Co,{onClick:()=>u(I.A5.SHARE_SETTINGS),type:"button",style:k},(0,_.tx)("file_permissions_modal.google_classroom_modal.disclaimer_link"))})):a.createElement(a.Fragment,null)),value:i,onChange:o},a.createElement("div",{className:h.cx.mt8.$},a.createElement(s.c,{value:"edit",label:a.createElement(c.J,{htmlAttributes:{"data-testid":"share-to-google-classroom-edit-option"}},(0,_.tx)("file_permissions_modal.google_classroom_modal.editable_option"))},r?a.createElement("div",{style:M},(0,_.tx)("file_permissions_modal.google_classroom_modal.editable_option_description")):null),a.createElement(s.c,{value:"duplicate",label:a.createElement(c.J,{htmlAttributes:{"data-testid":"share-to-google-classroom-duplicate-option"}},(0,_.tx)("file_permissions_modal.google_classroom_modal.duplicate_option"))},r?a.createElement("div",{style:M},(0,_.tx)("file_permissions_modal.google_classroom_modal.duplicate_option_description")):null)))),a.createElement("div",{className:h.cx.flex.flexRow.justifyEnd.$},a.createElement(D,{variant:"primary",onClick:()=>{let r=n?(0,b.jN)({file:n}):"",a="duplicate"===i?"/duplicate":"",o=r?`?url=${r}${a}`:"";(0,d.FJ)(`https://classroom.google.com/share${o}`,"_blank","popup,width=650,height=505"),e.closeModal()},trackingProperties:{googleClassroomShareOption:i},htmlAttributes:{"data-testid":"share-to-google-classroom-share-button"}},(0,_.tx)("general.next")))))}},971646:(e,r,n)=>{n.d(r,{$j:()=>s,Dp:()=>l,Fn:()=>c,M3:()=>E,U:()=>f,W7:()=>_,cH:()=>m,d4:()=>y,hP:()=>g,lX:()=>d,ml:()=>h,nM:()=>b,yJ:()=>u});var a=n(67151),i=n(181912),o=n(939863),s=(e=>(e.DAY="24_hours",e.WEEK="7_days",e.CUSTOM="custom",e))(s||{}),l=(e=>(e.TWENTY_SEC="20_seconds",e.CURRENT="current",e.DAY="24_hours",e.WEEK="7_days",e.CUSTOM="custom",e))(l||{});function c(e,r){switch(r){case"24_hours":case"24_hours":return p(e.clone().add(24,"h"));case"7_days":case"7_days":return p(e.clone().add(7,"d"));default:return(0,i.A)()}}function d(e,r){let n=r.diff(e,"hours");if(n<1){let n=r.diff(e,"minutes");return{num:n<1?1:n,unit:"minute"}}if(n<24)return{num:n,unit:"hour"};let a=Math.ceil(n/24);return a%30==0?{num:Math.floor(a/30),unit:"month"}:a%7==0?{num:Math.floor(a/7),unit:"week"}:{num:a,unit:"day"}}function u(e,r){let{num:n,unit:i}=d(e,r);switch(i){case"minute":return(0,o.t)("permissions_modal.file_share_settings.minute_text",{num:n});case"hour":return(0,o.t)("permissions_modal.file_share_settings.hour_text",{num:n});case"day":return(0,o.t)("permissions_modal.file_share_settings.day_text",{num:n});case"week":return(0,o.t)("permissions_modal.file_share_settings.week_text",{num:n});case"month":return(0,o.t)("permissions_modal.file_share_settings.month_text",{num:n});default:(0,a.xb)(i)}}function m(e,r=!1){return r?e.startOf("hour"):e.clone().add(30,"minutes").startOf("hour")}function p(e,r=!1){return e.clone().add(30,"seconds").startOf("minute")}function h(e){return e.format("LT")}function _(e){return e.format("YYYY-MM-DD")}function g(e){return e.format("HH:mm")}function f(e,r){return(0,i.A)(e+" "+r,"YYYY-MM-DD HH:mm")}function E(e,r){let n=e.isSame((0,i.A)().add(1,"day"),"day"),a=h(e);if(n&&!r)return(0,o.t)("file_access_row.expiration.24_hours.timestamp",{time:a});let s=e.toDate().toLocaleDateString(e.locale(),{weekday:r?"long":"short",month:"short",day:"numeric"});return(0,i.A)().isSame(e,"year")?(0,o.t)("file_access_row.expiration.date.timestamp",{date:s,time:a}):e.format("L LT")}function y(e){return e&&!e.accessReverted&&e.expiresAt?e.expiresAt:null}function b(e){return e<24||e%24!=0?(0,o.t)("file_access_row.expiration.past_org_limit_hours",{count:e}):(0,o.t)("file_access_row.expiration.past_org_limit_days",{count:e/24})}},303159:(e,r,n)=>{n.d(r,{H:()=>N});var a=n(411855),i=n(326331),o=n(629019),s=n.n(o),l=n(91408),c=n(268537),d=n(46481),u=n(47506),m=n(175290),p=n(809840),h=n(738269),_=n(672517),g=n(298543),f=n(465983),E=n(221785),y=n(816985),b=n(289298);let I=(0,l.hG)(E.p3),T=(0,l.hG)(f.km),v=(0,l.hG)(f.LF),S=(0,l.hG)(f.hX),w=I-T/2;function A({dispatch:e,dropdownClassName:r,dropdownShown:n,options:i,value:o,onChange:l,trackingProperties:d={}}){let[u,_]=(0,a.useState)(0),[f,E]=(0,a.useState)(window.innerWidth),b=()=>{E(window.innerWidth)};(0,a.useEffect)(()=>(window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)),[]);let A=a.useRef(null),N=a.useRef(null);(0,a.useEffect)(()=>{if(A.current&&N.current){let e=A.current.getBoundingClientRect(),r=A.current.offsetParent?.getBoundingClientRect();!e||!r||e.top>=r.top&&e.bottom<=r.bottom||(A.current.scrollIntoView(!1),N.current.scrollBy(8)),_(e.width)}},[]);let C={...n?.data?.position||{top:0,left:0}},L=0,O=0,R=!1,P=-1,D=i.map((r,n)=>{if("separator"===r.type)return R||(L+=S),O+=S,a.createElement(c.wv,{key:r.key?String(r.key):n,dataTestId:`dropdown-separator-${n}`});let s=r.key===o;s&&(P=n),R=R||s;let u=r.subtext?v:T;R||(L+=u),O+=u;let _={};return r.subtext&&i[n+1]?.type!=="separator"&&(_.paddingBottom=8,O+=8),a.createElement("div",{key:String(r.key),ref:s?A:null,style:_,"data-testid":`dropdown-option-${n}`,"data-onboarding-key":`dropdown-option-${String(r.key)}`},a.createElement(c.rr,{checked:s,onClick:n=>{n.stopPropagation(),s||l(r.key),e(h.oB())},trackingProperties:{...d,key:String(r.key)},disabled:r.disabled,"data-testid":`dropdown-option-checkable-${n}`},a.createElement("div",{style:{display:"flex",alignItems:"center"}},!!r.icon&&a.createElement(a.Fragment,null,r.icon),a.createElement(m.Y,{direction:"vertical",spacing:4,height:u,verticalAlignItems:"center"},a.createElement(p.E,{fontSize:12},r.text),r.subtext&&a.createElement(p.E,{fontSize:11,color:"menu-disabled"},r.subtext)))))});u+C.left+4>f&&(C.left="auto",C.right=4);let k=16;P===i.length-1&&(k=8),"auto"!==C.top&&void 0!==C.top&&(C.top-=Math.min(L,w-k),C.top=Math.max(16,C.top));let M=a.createElement(g.g1,{maxDropdownHeight:e=>"auto"===C.top||void 0===C.top?I:Math.min(I,Math.round(e-C.top-8-16)),dropdownChildrenHeight:O,ref:N},D);return a.createElement(c.gw,{stopScrollPropagation:!0,dispatch:e,className:s()(y.N1,r),style:C},M)}function N({dispatch:e,dropdownShown:r,value:n,options:o,onChange:l,id:c,placeholder:m,disabled:p=!1,dropdownData:g={},isOpen:f,trackingProperties:E={},dataOnboardingKey:I,onOpenRcsEvent:T,ui3Icon:v}){let S=(0,a.useRef)(null),w=o.findIndex(e=>"option"===e.type&&e.key===n),N=o[w],C=N?.type==="option"?N.selectedLabel||N.text:m,L=N?.type==="option"&&N.selectedLabelClass||"";return f=f??r?.type===c,a.createElement("div",{ref:S},a.createElement(_.jm,{trackingProperties:E,className:s()({[y.Lt]:!p,[y.rp]:v}),onClick:p?void 0:n=>{n.stopPropagation(),n.preventDefault(),r&&r.type===c?e(h.oB()):o.length&&!p&&(e(h.j7({type:c,data:{...g,...function(e){let r=e.current?.getBoundingClientRect();return r?{position:{top:r.top,bottom:"auto",left:r.left,right:"auto"}}:{}}(S)}})),T&&(0,u.YQ)({id:T}))}},v,a.createElement("div",{className:`${y.Ck} ${L}`,"data-testid":"dropdown-label"},C),!p&&a.createElement("div",{className:y.Lo},a.createElement(d.U,{"data-onboarding-key":!p&&I?I:"",svg:b.A},a.createElement(i.r,null)))),f&&a.createElement(A,{dispatch:e,dropdownShown:r,dropdownClassName:y.W8,value:n,options:o,onChange:l,trackingProperties:E}))}},1700:(e,r,n)=>{n.d(r,{E4:()=>I,R9:()=>y,hP:()=>b,nu:()=>T});var a=n(411855),i=n(188507),o=n(74522),s=n(629019),l=n.n(s),c=n(163023),d=n(46481),u=n(939863);n(720647);var m=n(147206);n(265361);var p=n(668860),h=n(498606),_=n(303159),g=n(816985),f=n(860574),E=n(957412);function y(e){let r="level-change-dropdown",n=(0,i.wA)(),o=()=>e.dropdownShown&&e.dropdownShown.type===r&&e.dropdownShown.data.dropdownId===e.id,s=e.virtualRowItem?{position:"absolute",top:e.virtualRowItem.start,left:0,right:0}:void 0;return a.createElement("div",{className:g.zn,style:s},a.createElement("div",{className:g.H},a.createElement(b,{user:e.user,id:e.id,pending:e.pending})),a.createElement("div",{className:g.$S},a.createElement("div",{key:`name-${e.id}`,className:e.pending?g.NE:g.UU},e.userName),e.warningMessage&&a.createElement(c.B,{className:g.QW,svg:E.A,"data-tooltip-timeout-delay":50,"data-tooltip-type":h.Ib.TEXT,"data-tooltip":e.warningMessage}),e.warningTooltipId&&a.createElement(c.B,{className:g.QW,svg:E.A,"data-tooltip-type":h.Ib.SPECIAL,"data-tooltip":e.warningTooltipId,"data-tooltip-timeout-delay":50,"data-tooltip-interactive":!0}),(()=>{let i=e.getRoleOptions();return i?a.createElement(_.H,{dispatch:n,onChange:e.onChangeLevel,options:i,id:r,value:e.level,dropdownShown:e.dropdownShown,dropdownData:{dropdownId:e.id},isOpen:!!o()}):a.createElement("span",{className:g.C1},(0,m.C1)(e.level,e.isBranchFile))})()))}function b(e){let{user:r,pending:n}=e,i=!1===n&&r.img_url;return i&&!n?a.createElement("img",{"data-tooltip-type":h.Ib.TEXT,"data-tooltip":e.user.email,key:`avatar-${e.id}`,src:i,className:l()(g.my,e.small&&g.dT),alt:""}):a.createElement("div",{className:l()(g.f1,e.small&&g.dT),"data-tooltip-type":h.Ib.TEXT,"data-tooltip":e.user.email},a.createElement(d.U,{key:`avatar-${e.id}`,svg:f.A,className:l()(g.Zk,e.small&&g.dT)},a.createElement(o.A,{className:l()(g.Zk,e.small&&g.dT)})))}function I(e,r){return!1===e.pending?e.user.handle:e.user.email in r?r.usersByEmail[e.user.email].handle:e.user.email}function T(e,r,n,a,i,o,s){let l=[],c=!1;if(!n)return null;s&&o===p.e6.VIEW_PROTOTYPES?l.push({type:"option",key:p.e6.VIEW_PROTOTYPES,text:(0,m.C1)(p.e6.VIEWER)}):r?l.push(v(o)):(e&&!i&&l.push(v(p.e6.OWNER)),a&&l.push(v(p.e6.ADMIN)),l.push(v(p.e6.EDITOR)),l.push(v(p.e6.VIEWER)),c=i);let d=r&&!e?(0,u.t)("confirm_remove_role.leave"):(0,u.t)("confirm_remove_role.remove");return l.push({type:"separator"}),c&&l.push({type:"option",key:"resend",text:(0,u.t)("role_row.resend_invite")}),l.push({type:"option",key:p.e6.NONE,text:d}),l}function v(e){return{type:"option",key:e,text:(0,m.C1)(e)}}},56714:(e,r,n)=>{n.d(r,{I$:()=>v,Jr:()=>S,UM:()=>w});var a=n(966712),i=n(882225),o=n(813408),s=n(93623),l=n(492330);let c={id:"4317920",team_id:null,org_id:"675025436003846244",location:"San Francisco, CA",profile_handle:"asana",public_at:"2020-05-06T20:49:58.442Z",follower_count:341,following_count:0,primary_user_id:null,name:"Asana",img_url:"https://s3-alpha.figma.com/profile/d8034acd-76dd-4b36-98da-58fdf79529f2",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/d8034acd-76dd-4b36-98da-58fdf79529f2","500_500":"https://s3-alpha.figma.com/profile/5c98d80b-d276-446c-8080-7e586b085612"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:o.o1.ORG,website:"asana.design",twitter:"twitter.com/asanadesignteam",instagram:"instagram.com/asanadesignteam",description:"We\u2019re the Design team behind Asana.\nWe design the future of teamwork. \u2728\n\nJoin us: asana.com/jobs/product",pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"/profile/4317920/cover_image",is_community_beta:!0,badges:[i.s.FIGMA_PARTNER]},d={id:"1521",team_id:null,org_id:"703355754804194517",location:"Sydney, Australia",profile_handle:"atlassian",public_at:"2020-06-22T18:25:34.800Z",follower_count:4297,following_count:0,primary_user_id:null,name:"Atlassian",img_url:"https://s3-alpha.figma.com/profile/c1b2cbe9-346d-4ba4-9af0-aca1bc444657",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/c1b2cbe9-346d-4ba4-9af0-aca1bc444657","500_500":"https://s3-alpha.figma.com/profile/26a88a1d-27d7-460c-9301-dd0910d39614"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:o.o1.ORG,website:"https://atlassian.com",twitter:null,instagram:null,description:"The official home of Atlassian's design resources in Figma.",pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"/profile/1521/cover_image",is_community_beta:!0,badges:[i.s.FIGMA_PARTNER]},u={id:"1608",team_id:null,org_id:"797266083973274396",location:null,profile_handle:"github",public_at:"2020-02-12T18:27:36.218Z",follower_count:126,following_count:0,primary_user_id:null,name:"GitHub",img_url:"https://s3-alpha.figma.com/profile/2789d808-2da3-4e73-a540-a7333e924556",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/2789d808-2da3-4e73-a540-a7333e924556","500_500":"https://s3-alpha.figma.com/profile/84ae1734-e47e-4945-884c-f536e5d3f427"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:o.o1.ORG,website:"https://www.github.com",twitter:null,instagram:null,description:null,pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"",is_community_beta:!1,badges:[i.s.FIGMA_PARTNER]},m={id:"1731",team_id:null,org_id:null,location:"Los Angeles, CA",profile_handle:"snap",public_at:"2020-03-02T14:56:23.081Z",follower_count:17,following_count:0,primary_user_id:null,name:"Snapchat",img_url:"https://s3-alpha.figma.com/profile/7a97c4dc-8a42-4273-bcdd-d97bcabcd0b2",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/7a97c4dc-8a42-4273-bcdd-d97bcabcd0b2","500_500":"https://s3-alpha.figma.com/profile/7bbd1ecd-0481-4423-9092-58ec01c00d68"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:o.o1.ORG,website:"https://www.snapchat.com/l/en-gb/",twitter:null,instagram:null,description:null,pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"/profile/1731/cover_image",is_community_beta:!1,badges:[]},p={id:"2480257",team_id:null,org_id:null,location:"San Francisco, CA",profile_handle:"figma",public_at:"2019-10-21T22:53:16.561Z",follower_count:16253,following_count:53,primary_user_id:"768244674400796816",name:"Figma",img_url:"https://s3-alpha.figma.com/profile/c82ecc52-1c47-405d-980b-904ff54c6577",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/c82ecc52-1c47-405d-980b-904ff54c6577","500_500":"https://s3-alpha.figma.com/profile/c4bc0357-6f54-412a-ac89-f311905bbec5"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:o.o1.USER,website:"www.figma.com",twitter:"twitter.com/figma",instagram:"instagram.com/figma",description:"Figma is the design tool for teams who build products together. Claim your community profile here: https://bit.ly/3euhKR9",pronouns:null,has_shared_teams:!1,has_shared_orgs:null,redirect_cover_image_url:"/profile/2480257/cover_image",is_community_beta:!0,badges:[]},h="1098405969270214551",_="1094001923188252679",g="1101944648482192724",f="1151936790942917527",E={[c.id]:h,[u.id]:g,[d.id]:_,[m.id]:f},y="1220512233196109878",b="1220802563996996107",I={[u.id]:y,[d.id]:b};function T(){return(!!(0,a.kc)().widgets_hardcode_cocreators||!!(0,a.kc)().cmty_hardcode_cocreators)&&"prod"===(0,a.tl)().cluster_name}function v(e){if(!T())return e;let r=function(e){if(!T())return[];switch(e){case h:return[p,c];case b:case _:return[p,d];case y:case g:return[p,u];case f:return[p,m];default:return[]}}(e.id);if(0===r.length)return e;let n=(e.community_publishers?.accepted??[]).filter(e=>!r.find(r=>r.id===e.id)),a=r.concat(n);return{...e,community_publishers:{...e.community_publishers,accepted:a}}}async function S(e){if(!T())return[];try{let r=E[e];if(r){let e=(await l.U.getVersions({widgetId:r})).data.meta.plugin;return[v(e)]}}catch(e){console.error(e)}return[]}async function w(e){if(!T())return[];try{let r=I[e];if(r){let e=(await s.V.getVersions({pluginId:r})).data.meta.plugin;return[v(e)]}}catch(e){console.error(e)}return[]}},927625:(e,r,n)=>{n.d(r,{AB:()=>eb,Ho:()=>eu,Q7:()=>eg,TL:()=>eT,hT:()=>eI,v_:()=>ev});var a,i,o,s,l,c=n(411855),d=n(188507),u=n(67151),m=n(629019),p=n.n(m),h=n(737947),_=n(498750),g=n(563706),f=n(563042),E=n(761870),y=n(281381),b=n(125080),I=n(708258),T=n(163023),v=n(348425),S=n(939863),w=n(392592),A=n(674694),N=n(546856),C=n(108636),L=n(466636),O=n(545941),R=n(158996),P=n(417659),D=n(853799),k=n(727749),M=n(738269),F=n(662275),x=n(672517),U=n(697551),B=n(27703),V=n(560718),G=n(820642),H=n(215822),W=n(555328),K=n(376485),Y=n(498606),$=n(978527),j=n(928491),z=n(896528),q=n(432035),X=n(580999),J=n(821134),Z=n(350913),Q=n(526235),ee=n(457689),et=n(298543),er=n(740164),en=n(332086),ea=n(127391),ei=n(189095),eo=n(885700),es=n(109226),el=n(758064),ec=n(237494),ed=n(851750);function eu(e){let r;let[n,a]=c.useState(!1),i=!n&&e.isSet?ei.Bz:e.isWhiteboard?ei.kj:ei.h1,o=e.showNewBadge?c.createElement(eg,null):e.showFigPickBadge?c.createElement(e_,null):c.createElement(c.Fragment,null),s=p()(e.isSet?ei.mH:ei.ZX,{[ei.eB]:e.includeChromiumDownscalingFix&&g.Ay.chrome},e.imageClassName);return r=e.image?e.showOriginalThumbnail?c.createElement("img",{className:s,src:e.image,loading:"lazy",onLoad:()=>a(!0),alt:e.alt,draggable:!1}):c.createElement(A.Xy,{className:s,image:e.image,onLoad:()=>a(!0),hubFileId:e.hubFileId,alt:e.alt,thumbnailContext:e.thumbnailContext,resizedThumbnailUrls:e.resizedThumbnailUrls,draggable:e.draggable}):c.createElement(Q.Ek,null),c.createElement("div",{className:i,style:{backgroundColor:e.backgroundColor}},r,o,e.showPrototypeIcon&&c.createElement("div",{className:ei.cT},c.createElement(v.t,{svg:ed.A,className:ei.wr,useOriginalSrcFills_DEPRECATED:!0,fallbackSvg:ed.A})),e.showWhiteboardIcon&&c.createElement(ef,null))}function em(e){let r=(0,d.d4)(e=>e.orgById),n="search"===(0,d.d4)(({selectedView:e})=>e).view,a=e.plugin.org_id&&r?.[e.plugin.org_id],i=(0,H.uF)(e.plugin),{tagline:o,description:s,name:l}=i,u=(0,O.G8)({description:e.isPublishing?"":s??"",tagline:o??""},f.$J);return c.createElement("div",{className:ei.Ak},c.createElement("div",{className:ei.vG},c.createElement("img",{src:i.redirect_icon_url,loading:"lazy",alt:""})),c.createElement("div",{className:ei.wA},c.createElement($.V,{plugin:i,className:ei.Az,loading:"lazy",alt:""})),l&&c.createElement("div",{className:ei.K9},l),u&&c.createElement("div",{className:l?ei.Ry:ei.Tk},u),n&&a&&c.createElement("div",{className:ei.jG},c.createElement(ea.H,{entityId:a.id,entityName:a.name,imgUrl:a.img_url,hideTooltip:!0}),a.name),e.showNewBadge?c.createElement(eg,null):e.showInstalledIcon&&c.createElement("span",{className:ei.qP},(0,S.tx)("community.plugins.saved")),e.children)}c.memo(function(e){function r(){return e.name?c.createElement("div",{className:ei.ZR},e.name):c.createElement("div",{className:ei._},e.placeholderName)}function n(){return c.createElement("div",null,e.author?e.author:c.createElement("div",{className:ei.JM}))}return c.createElement(c.Fragment,null,c.createElement("div",{className:e.showFileNameAsPrimary?ei.cR:ei.i1,onClick:e.onClick},c.createElement("div",{className:ei.__},c.createElement("a",{className:ei.t5,href:e.href,onClick:e=>e.preventDefault(),style:{backgroundColor:e.backgroundColor,backgroundClip:g.Ay.safari?"padding-box":""}},c.createElement(eu,{image:e.backgroundImage,isWhiteboard:e.isWhiteboard,isSet:!!e.thumbnailIsSet,showFigPickBadge:e.showFigPickBadge,showNewBadge:e.showNewBadge,showPrototypeIcon:e.isPrototype,showWhiteboardIcon:e.isWhiteboard,showOriginalThumbnail:e.showOriginalThumbnail,hubFileId:e.hubFileId,alt:e.name}))),c.createElement("div",{className:ei.HC},c.createElement("div",{className:ei.dB},e.showFileNameAsPrimary?c.createElement(n,null):c.createElement(r,null)),c.createElement("div",{className:ei.bI},c.createElement("div",{className:ei.vz},ep(e.commentsSetting)&&c.createElement(eh,{count:e.commentCount}),e.duplicateButton),e.showFileNameAsPrimary?c.createElement(r,null):c.createElement(n,null)))))});let ep=e=>e!==V.Ni.ALL_DISABLED;function eh(e){return c.createElement("div",{className:ei.Z2},c.createElement(T.B,{className:ei.Ls,svg:el.A})," ",e.count)}function e_(){return c.createElement("div",{className:ei.jq,"data-tooltip-type":Y.Ib.TEXT,"data-tooltip":(0,S.t)("community.profiles.boosted_by_the_figma_team"),"data-tooltip-show-immediately":!0},c.createElement(y.Ex,{text:(0,S.t)("community.profiles.fig_pick"),color:y.zE.BRAND,className:ei.q2}))}function eg(){return c.createElement("div",{className:ei.jq},c.createElement(y.Ex,{text:(0,S.t)("community.profiles.new"),color:y.zE.SUCCESS,className:ei.q2}))}function ef(){return c.createElement("div",{className:ei.o_,"data-tooltip-type":Y.Ib.TEXT,"data-tooltip":(0,S.t)("community.profiles.made_in_fig_jam"),"data-tooltip-show-immediately":!0},c.createElement(v.t,{svg:eo.A,useOriginalSrcFills_DEPRECATED:!0,fallbackSvg:eo.A}))}function eE(e){let{AuthorsJSX:r,CreatorsOverlay:n,creatorsOverlayProps:i}=a.useCreatorsHoverOverlay({resource:e.plugin}),o=c.createElement("div",{className:ei.gx},c.createElement("div",{className:ei.MN},r)),s=e.isPaid?{id:"0",badges:[],monetized_resource_metadata:{id:"0",price:(0,L.ae)(e.price),is_subscription:!1}}:null;return c.createElement("div",{className:g.Ay.mobile?ei.IM:e.showAuthorByDefault?ei.Gf:ei.U$,onClick:e.onClick},s&&c.createElement(N.Mr,{resource:s||e.plugin}),c.createElement(n,{...i},c.createElement("div",{className:ei.w},c.createElement("div",{className:ei._F},c.createElement(em,{showInstalledIcon:e.isSaved,showNewBadge:e.showNewBadge,isPublishing:e.isPublishing,plugin:e.plugin},c.createElement("div",{className:ei.bs},c.createElement(I.C,{...e})))),c.createElement("div",{className:ei.uB},e.showInstallCount&&c.createElement("div",{className:ei.Rw},e.isPublic&&(e.author||o),!e.isPublic&&c.createElement("div",{className:ei.Wf},c.createElement(T.B,{className:ei.hz,svg:ec.A}),(0,S.tx)("community.cards.private")),c.createElement("div",{className:ei.y},e.isPublic&&ep(e.commentsSetting)&&c.createElement(eh,{count:e.commentCount}),e.isPaid?c.createElement(ee.Ij,{metric:e.uniqueRunCount||0}):c.createElement("div",{className:g.Ay.mobile?ei.hA:ei.Pw},c.createElement(b.f,{className:g.Ay.mobile||e.isBrowsingAsTeamOrOrgProfile?ei.Ys:e.isSaved?ei.XC:ei.sn,count:e.installCount,prefix:c.createElement("div",{className:ei.uu},e.isSaved?"\u2713 ":"\u2193 "),onClick:g.Ay.mobile||e.isBrowsingAsTeamOrOrgProfile?void 0:e.onSaveClick}),e.isSaved&&c.createElement("div",{className:ei.a_,onClick:g.Ay.mobile||e.isBrowsingAsTeamOrOrgProfile?void 0:e.onSaveClick},(0,S.tx)("community.profiles.remove_from_saved_plugins"))),e.dropdown)),!e.showInstallCount&&c.createElement(j.Ro,{entity:e.entity,size:24})))))}(e=>{function r(e){return c.createElement("div",{onMouseLeave:()=>{e.setDropdownRef(null),e.setDropdownContent(null)}},e.dropdownContent&&e.dropdownRef?.current&&c.createElement(et.Cf,{targetRect:e.dropdownRef.current.getBoundingClientRect(),maxWidth:150,minWidth:1,type:et.it.LIGHT,className:ei.s3,disableDropdownScrollContainer:!0,propagateCloseClick:!0},c.createElement("div",{className:ei.kP},e.dropdownContent)),e.children)}function n(e){let{setDropdownContent:r,setDropdownRef:n}=e,a=[c.useRef(null),c.useRef(null),c.useRef(null),c.useRef(null),c.useRef(null)],i=c.useRef(null),o=({profile:a,ref:i})=>c.createElement("span",{onMouseEnter:()=>{n(i),r(c.createElement(X.Qi,{publisher:a,className:ei.Ah}))},ref:i,className:e.avatarContainerClassName,key:`author-link-${a.id}`},c.createElement(X.Qi,{publisher:a,className:ei.CD,avatarClassName:ei.Vz,avatarSize:e.avatarSize,showAvatar:!0,hideName:!0})),s=({profile:r,stylesOverride:n})=>c.createElement(X.Qi,{key:`author-link-${r.id}`,publisher:r,className:n||ei.CD,avatarClassName:ei.my,avatarSize:e.avatarSize,showAvatar:!0}),l=({profiles:e,ref:a})=>{let i=c.createElement(X.Qi,{publisher:e[0],className:ei.CD});return c.createElement("div",{className:ei.NB},1===e.length&&(0,S.tx)("community.by_publisher",{publisher:i}),e.length>1&&(0,S.tx)("community.by_publisher_with_suffix",{publisherName:i,publishersSuffix:c.createElement(c.Fragment,null,c.createElement("span",{ref:a,className:ei.Jt,onMouseLeave:()=>{n(null)},onMouseEnter:()=>{n(a),r(c.createElement(c.Fragment,null,e.slice(1).map(e=>s({profile:e,stylesOverride:ei.Ah}))))}},(0,S.tx)("community.cards.pluralize_num_other_publishers",{numOtherPublishers:e.length-1})))}))},{resource:d}=e;if(!d)return null;let u=d.community_publishers.accepted;return 1===u.length?e.showAuthorAndOthersTextLabel?c.createElement(c.Fragment,null,o({profile:u[0],ref:a[0]}),l({profiles:u,ref:i})):c.createElement(c.Fragment,null,s({profile:u[0]})):u.length<=4?c.createElement(c.Fragment,null,u.map((e,r)=>o({profile:e,ref:a[r]})),e.showAuthorAndOthersTextLabel&&l({profiles:u,ref:i})):c.createElement(c.Fragment,null,...u.slice(0,4).map((e,r)=>o({profile:e,ref:a[r]})),(({profiles:a,ref:i})=>c.createElement("span",{ref:i,onMouseEnter:()=>{n(i),r(c.createElement(c.Fragment,null,a.map(e=>s({profile:e,stylesOverride:ei.Ah}))))},onMouseLeave:()=>{n(null)}},c.createElement(z.f,{size:e.avatarSize,className:ei.zb,text:`${a.length}`})))({profiles:u.slice(4),ref:a[4]}),e.showAuthorAndOthersTextLabel&&l({profiles:u,ref:i}))}e.useCreatorsHoverOverlay=function({resource:e,avatarStyleOverrides:a={size:24,containerClassName:ei.H,showAuthorAndOthersTextLabel:!1}}){let[i,o]=c.useState(null),[s,l]=c.useState(null),d=c.useMemo(()=>({setDropdownRef:l,setDropdownContent:o,dropdownRef:s,dropdownContent:i,avatarStyleOverrides:a}),[l,o,s,i,a]);return{AuthorsJSX:c.useMemo(()=>c.createElement(n,{resource:e,showAuthorAndOthersTextLabel:a.showAuthorAndOthersTextLabel,avatarSize:a.size,avatarContainerClassName:a.containerClassName,setDropdownContent:o,setDropdownRef:l}),[e,o,l,a]),CreatorsOverlay:r,creatorsOverlayProps:d}},e.Authors=n})(a||(a={})),(e=>{class r extends c.PureComponent{constructor(){super(...arguments),this.onClick=e=>{if((0,_.oJ)(e)){h.Ay.redirect((0,Z.ho)(this.props.plugin?.id),"_blank");return}this.props.onClick()},this.loggedOutAction=(e,r,n)=>{if(g.rr){window.location.href="/login";return}this.props.onLoggedOutAction(e,r,n)},this.onUnsave=e=>{e?.stopPropagation(),e?.preventDefault(),this.props.currentUser&&this.props.onUnsave()},this.onSave=e=>{if(e?.stopPropagation(),e?.preventDefault(),!this.props.currentUser){let e=(0,S.t)("community.profiles.save_this_plugin_to_give_you_and_figma_a_boost");this.loggedOutAction(e,"plugin_install_signed_out",es.A);return}this.props.onSave()}}isSaved(){if(this.props.isPublic)return this.props.authedActiveCommunityProfile?(0,J.a)(this.props.authedActiveCommunityProfile,this.props.plugin):this.props.plugin.profile_install_status===K.u8.PLUGIN_INSTALLED_FOR_USER;{let e=[K.u8.PLUGIN_INSTALLED_FOR_USER];return this.props.orgEntity&&e.push(K.u8.PLUGIN_INSTALLED_FOR_ORG),!!this.props.plugin.install_status&&e.includes(this.props.plugin.install_status)}}render(){let e=(0,H.uF)(this.props.plugin),r=e.description;return c.createElement(eE,{...this.props,onClick:this.onClick,href:(0,Z.ho)(this.props.plugin.id),isPublic:this.props.isPublic,onSaveClick:this.isSaved()?this.onUnsave:this.onSave,description:r,tagline:e.tagline||"",name:e.name,showInstallCount:!0,isSaved:this.isSaved(),isLiked:this.props.currentUserLiked,installCount:this.props.plugin.install_count,likeCount:this.props.plugin.like_count,commentCount:this.props.plugin.comment_count,entity:this.props.plugin.publisher||this.props.plugin.creator,commentsSetting:this.props.plugin.comments_setting,showAuthorByDefault:this.props.showAuthorByDefault,showNewBadge:!!(this.props.lastViewedAtForNewBadge&&Date.parse(this.props.plugin.created_at)>Date.parse(this.props.lastViewedAtForNewBadge)),isBrowsingAsTeamOrOrgProfile:this.props.isBrowsingAsTeamOrOrgProfile,dropdown:this.props.dropdown,plugin:this.props.plugin})}}e.ConnectedPluginTile=(0,d.Ng)(e=>({currentUser:e.user||null,orgEntity:(0,U.Jl)(e),isBrowsingAsTeamOrOrgProfile:(0,U.cs)(e.authedActiveCommunityProfile),authedActiveCommunityProfile:e.authedActiveCommunityProfile}),(e,r)=>({onClick:()=>{r.onClick?.(),e(M.$T({view:"communityHub",subView:"plugin",publishedPluginId:r.pluginId}))},onProfileCreate:n=>{e(F.to({type:en.G$,data:{variations:[en.FF.OPT_IN],userId:n.id,onFinish:()=>e(D.C({id:r.pluginId,resourceType:W.vt.PLUGIN}))}}))},onSave:()=>{e(k.oj({id:r.pluginId,resourceType:W.vt.PLUGIN,orgId:void 0}))},onUnsave:()=>{e(k.s1({id:r.pluginId,resourceType:W.vt.PLUGIN,source:k.uR.COMMUNITY_HUB})),e(w.F.enqueue({message:(0,S.t)("community.profiles.removed_from_saved_plugins"),type:"plugin-installed",button:{text:(0,S.t)("community.comments.undo"),action:()=>{e(k.oj({id:r.pluginId,resourceType:W.vt.PLUGIN,orgId:void 0}))}}}))},onLoggedOutAction:(r,n,a)=>{e(E.Ts({origin:n})),e((0,F.to)({type:er.l,data:{headerText:r,icon:a,dispatch:e}}))}}))(r),e.PluginTile=function(r){let n=(0,d.d4)(e=>e.publishedPlugins),a=r.plugin||(0,H.my)(r.pluginId,n),i=!!C.W(a.id,W.vt.PLUGIN).data?.[0];return c.createElement(e.ConnectedPluginTile,{...r,plugin:a,currentUserLiked:i})}})(i||(i={}));let ey=i.PluginTile,eb=(0,x.tf)(ey);class eI extends c.Component{render(){let{numResources:e,maxResources:r,className:n}=this.props;return c.createElement(c.Fragment,null,e<r?Array(r-e).fill(null).map((e,r)=>c.createElement("div",{key:r,className:n})):null)}}eI.defaultProps={maxResources:4},(e=>{class r extends c.Component{constructor(){super(...arguments),this.onHubFileClick=(0,_.Gc)(e=>{e.preventDefault(),e.stopPropagation(),this.props.onHubFileClick()})}render(){let e=(0,G.a6)(this.props.hubFile);return c.createElement("div",{className:ei.Yt},c.createElement("div",{className:ei.sj},c.createElement("a",{className:ei.Ai,style:{backgroundColor:(0,B.Cn)(this.props.hubFile.client_meta),backgroundImage:`url(${this.props.hubFile.thumbnail_url})`},onClick:this.onHubFileClick,href:(0,Z.X$)(this.props.hubFile.id)},c.createElement("div",{className:ei.tr},c.createElement("div",{className:ei.Ll},e.name)))))}}r.displayName="PublicProfileHubFileTile",e.PublicProfileHubFileTile=(0,d.Ng)(null,(e,r)=>({onHubFileClick:()=>{e(M.$T({view:"communityHub",subView:"hubFile",hubFileId:r.hubFile.id}))}}))(r)})(o||(o={})),(e=>{class r extends c.Component{constructor(){super(...arguments),this.onPluginClick=(0,_.Gc)(e=>{e.preventDefault(),e.stopPropagation(),this.props.onResourceClick()})}render(){let e=(0,H.uF)(this.props.resource),r=(0,W.xQ)(this.props.resource);return c.createElement("div",{className:ei.Yt},c.createElement("div",{className:ei.sj},c.createElement("a",{className:ei.IC,onClick:this.onPluginClick,href:r?(0,Z.YW)(this.props.resource.id):(0,Z.ho)(this.props.resource.id)},c.createElement($.V,{className:ei.pt,plugin:e,loading:"lazy",alt:""}),c.createElement("div",{className:ei.FK},e.name))))}}r.displayName="PublicProfilePluginTile",e.PublicProfileBasePluginTile=(0,d.Ng)(null,(e,r)=>({onResourceClick:()=>{(0,W.xQ)(r.resource)?e(M.$T({view:"communityHub",subView:"widget",widgetId:r.resource.id})):e(M.$T({view:"communityHub",subView:"plugin",publishedPluginId:r.resource.id}))}}))(r)})(s||(s={})),(e=>{class r extends c.Component{constructor(e){super(e),this.onPublicProfileClick=e=>{if((0,_.oJ)(e)){let e=this.props.publicProfile;if(!e)return;h.Ay.redirect((0,P.bL)(e.profile_handle)||"","_blank");return}this.props.onPublicProfileClick()},this.updateFollowInfoOnFollowClick=()=>{let e=this.state.currentUserIsFollowing?{currentUserFollowActionCountDiff:this.state.currentUserFollowActionCountDiff-1,currentUserIsFollowing:!1}:{currentUserFollowActionCountDiff:this.state.currentUserFollowActionCountDiff+1,currentUserIsFollowing:!0};this.setState(e)},this.state={currentUserFollowActionCountDiff:0,currentUserIsFollowing:e.publicProfile.current_user_is_following}}render(){let e=this.props.publicProfile;if(!e)return null;let r={id:e.id,name:e.name,img_url:e.img_url};return c.createElement("div",{className:`${ei.uy} ${this.props.notTabletSidebarOptimized?ei.HG:""}`},c.createElement("div",{className:ei.DU},c.createElement("div",{onClick:this.onPublicProfileClick},c.createElement(j.Ro,{entity:r,size:96,className:ei.W8})),c.createElement("div",{className:ei.kl},c.createElement("div",{className:ei.r9,onClick:this.onPublicProfileClick},e.name),e.profile_handle&&c.createElement("div",{className:ei.TD},c.createElement("div",{className:ei.O3,onClick:this.onPublicProfileClick},"@",e.profile_handle),e.current_user_is_followed&&c.createElement(ev,null)),e.location&&c.createElement("div",{className:ei._7},e.location),c.createElement("div",{className:ei.k1},!this.props.isOwnProfile&&c.createElement(q.W,{profile:e,followClassName:ei.u8,followingClassName:ei.u8,unfollowClassName:ei.u8,onClick:this.updateFollowInfoOnFollowClick,onError:this.updateFollowInfoOnFollowClick}),c.createElement("div",null,c.createElement("div",{className:ei.u0},(0,S.tx)("community.follow.followers")),c.createElement("div",{className:ei.oQ},e.follower_count+this.state.currentUserFollowActionCountDiff))))),this.props.resources.length>0&&c.createElement("div",{className:ei.iR},this.props.resources.map(e=>{let r=(0,R.Vm)(e);switch(r){case W.vt.HUB_FILE:return c.createElement(o.PublicProfileHubFileTile,{hubFile:e,key:e.id});case W.vt.PLUGIN:case W.vt.WIDGET:return c.createElement(s.PublicProfileBasePluginTile,{resource:e,key:e.id});default:(0,u.xb)(r)}}),c.createElement(eI,{numResources:this.props.resources.length,maxResources:6,className:ei.Yt})),0===this.props.resources.length&&c.createElement("div",{className:ei.t9},(0,S.tx)("community.profiles.no_resources_published_yet")))}}r.displayName="PublicProfileTile";let n=(e,r)=>({isOwnProfile:e.authedActiveCommunityProfile?.id===r.publicProfile.id}),a=(e,r)=>({onPublicProfileClick:()=>{r.onClick&&r.onClick(),e(M.$T({view:"communityHub",subView:"handle",handle:r.publicProfile.profile_handle}))}});e.ConnectedPublicProfileTile=(0,d.Ng)(n,a)(r),e.ConnectedPublicProfileTileTracked=(0,d.Ng)(n,a)((0,x.tf)(r))})(l||(l={}));let eT=l.ConnectedPublicProfileTile;function ev({color:e=y.zE.DEFAULT}){return c.createElement(y.Ex,{text:(0,S.t)("community.profiles.follows_you"),color:e,className:ei.x7})}l.ConnectedPublicProfileTileTracked},894728:(e,r,n)=>{n.d(r,{Dy:()=>B,xZ:()=>L,z2:()=>O});var a=n(411855),i=n(188507),o=n(299321),s=n(629019),l=n.n(s),c=n(91408),d=n(517333),u=n(966712),m=n(563706),p=n(493323),h=n(163023),_=n(779709),g=n(611978),f=n(193212),E=n(99506),y=n(776615),b=n(239671),I=n(945020),T=n(507956),v=n(837746),S=n(890642),w=n(251473);let A=!1,N=()=>{if(A)return;A=!0;let e="",r=e=>Math.atan(e);for(let n=0;n<200;n++){let a=n/200,i=r(50*a)/r(50);e+=(100*a).toFixed(3)+"%{transform:scaleX("+i.toFixed(3)+");}"}let n="@-moz-keyframes progress-bar-animation {"+e+"}@-webkit-keyframes progress-bar-animation {"+e+"}",a=document.createElement("style");a.nonce=(0,u.Ay)().csp_nonce,a.textContent=n,document.head.appendChild(a)};function C(){return(0,u.kc)().pride_inclusive_loading_bar?S.DT:""}function L(){let e=(0,g._6)();if("fullscreen"!==e.view)return null;let r=(0,y.ju)(e);return a.createElement(D,{editorType:(0,b.oD)(e.editorType),cover:!0,progressPaused:!0,editorTheme:r})}function O(e){switch(e.progressBarMode){case o.Oin.KEEP_UI:return a.createElement(R,{progressBarType:e.progressBarType,left:e.left});case o.Oin.HIDE_UI:case o.Oin.ON_AND_LOCKED:return a.createElement(D,{editorType:e.editorType,isViewer:e.isViewer,shouldNotOverflow:e.shouldNotOverflow});case o.Oin.OFF:return a.createElement(a.Fragment,null)}}function R(e){let r=(0,i.d4)(e=>(0,T.$A)(e.selectedView)?0:(0,c.jz)(v.uj0));return a.createElement("div",{className:S.A7},a.createElement("div",{className:S.BT}),a.createElement("div",{className:S.cE,style:{right:r}}),a.createElement(P,{progressBarType:e.progressBarType,left:e.left}))}function P(e){switch(e.progressBarType){case I.lF.SPINNER:return a.createElement("div",{className:S.AV},a.createElement(p.nt,null));case I.lF.BAR:default:return a.createElement(B,{className:S.Wn,style:{left:`${e.left||0}`}})}}function D(e){let r="whiteboard"===e.editorType?E._Y.WHITEBOARD:e.isViewer?"viewer":E._Y.DESIGN;return a.createElement("div",{"data-editor-theme":e.editorTheme,className:l()(S.A7,e.shouldNotOverflow?S.ZT:null)},a.createElement("div",{className:l()({[S.Kb]:e.cover,[S.dV]:"whiteboard"===r,[S.Dn]:"design"===r&&!m.rr,[S.k1]:"design"===r&&m.rr,[S.Mf]:"viewer"===r&&!m.rr,[S.mb]:"viewer"===r&&m.rr})}),"whiteboard"!==r&&a.createElement(M,{type:r,progressPaused:e.progressPaused}),"whiteboard"===r&&a.createElement(k,{progressPaused:e.progressPaused}))}function k(e){return a.createElement("div",{className:l()(S.Dg,{[S.cu]:e.progressPaused})},a.createElement("div",{className:S.oQ},a.createElement("div",{className:S.pm},a.createElement("div",{className:S.BL})),a.createElement("div",{className:S.pn},a.createElement("div",{className:S.Ts}),a.createElement("div",{className:S.n1})),a.createElement("div",{className:S.xo},a.createElement("div",{className:S.Ag}),a.createElement("div",null))),a.createElement(U,{type:"whiteboard",progressPaused:e.progressPaused}))}function M(e){let[r,n]=a.useState(!1),i=(0,f.aq)();return((d.eD?d.eD.getZoomFactor():m.Ay.chrome||m.Ay.safari?Promise.resolve(window.outerWidth/window.innerWidth):Promise.resolve(void 0)).then(e=>{e&&(e<.95||e>1.05)&&i()&&!r&&n(!0)}),r||(0,m.KR)()||_.z4.getIsExtension())?a.createElement(F,{type:e.type,progressPaused:e.progressPaused}):a.createElement(x,{type:e.type,progressPaused:e.progressPaused})}function F(e){let r="design"===e.type,n="viewer"===e.type&&m.rr,i="viewer"===e.type&&!m.rr;return a.createElement("div",{className:l()(S.Dg,{[S.iI]:e.progressPaused})},a.createElement("div",{className:l()({[S.OU]:!0,[S.Uo]:n,[S.v0]:i,[S.uq]:r})},a.createElement(h.B,{className:S.wn,svg:w.A})),a.createElement(U,{type:r?"design":n?"mobile_viewer":"desktop_viewer",progressPaused:e.progressPaused}))}function x(e){let r="design"===e.type,n="viewer"===e.type&&m.rr,i="viewer"===e.type&&!m.rr;return a.createElement("div",{className:l()(S.Dg,{[S.cu]:e.progressPaused})},a.createElement("div",{className:l()({[S.OU]:!0,[S.Uo]:n,[S.v0]:i})},a.createElement("div",{className:S.pm},a.createElement("div",{className:`${S.hj} ${S.nR}`}),a.createElement("div",{className:`${S.Rp} ${S.nR}`}),a.createElement("div",{className:`${S.CU} ${S.nR}`}),a.createElement("div",{className:S.U0},a.createElement("div",{className:`${S.A6} ${S.nR}`}))),a.createElement("div",{className:S.pn},a.createElement("div",{className:`${S.Ts} ${S.nR}`}),a.createElement("div",{className:`${S.n1} ${S.nR}`})),a.createElement("div",{className:S.xo},a.createElement("div",{className:`${S.Ag} ${S.nR}`}),a.createElement("div",null))),a.createElement(U,{type:r?"design":n?"mobile_viewer":"desktop_viewer",progressPaused:e.progressPaused}))}function U(e){let{type:r,progressPaused:n}=e,i=C();return a.createElement("div",{className:l()({[S.QT]:"design"===r,[S.WH]:"mobile_viewer"===r,[S.y6]:"desktop_viewer"===r,[S.Pd]:"whiteboard"===r})},a.createElement("div",{className:l()({[S.fb]:"design"===r,[S.$8]:"mobile_viewer"===r,[S.Zu]:"desktop_viewer"===r,[S._M]:"whiteboard"===r,[S.BM]:!0!==n,[i]:!0})},a.createElement("div",{className:S.On})))}function B({className:e,style:r,seconds:n=120}){let i=C();return N(),a.createElement("div",{className:`${S.pT} ${e||""} ${i}`,style:{MozAnimation:`progress-bar-animation ${n}s linear`,WebkitAnimation:`progress-bar-animation ${n}s linear`,...r}})}B.displayName="ProgressBarRelative"},345679:(e,r,n)=>{n.d(r,{HC:()=>b,dU:()=>D});var a=n(411855),i=n(188507),o=n(432258),s=n(299321),l=n(629019),c=n.n(l),d=n(121913),u=n(966712),m=n(939863),p=n(529906),h=n(237395),_=n(842164),g=n(663237);let f="accessibilitytree--node--xYG8O",E="accessibilitytree--disabled--m1ByR accessibilitytree--node--xYG8O",y="accessibilitytree--scrollContainer--TNuEw accessibilitytree--node--xYG8O";function b({viewer:e,autofocus:r,setAutofocus:n}){let o;let s=(0,p.e)(),l=(0,i.d4)(e=>!!e.modalShown),d=a.useRef(s);if(l||(d.current=s),d.current&&e?.hasActiveScene()){let i=(0,u.u4)("ee_accessibility_inc_prototype",I,T);o=a.createElement(i,{viewer:e,autofocus:r,setAutofocus:n})}else o=a.createElement("p",{className:g.Q},(0,m.t)("viewer.accessibilitytree.disabled_placeholder"));return a.createElement("main",{className:c()("accessibilitytree--container--CjsLk","viewer-forward-keyevents")},o)}function I({autofocus:e,setAutofocus:r,viewer:n}){let i=function(e){let r=s.bpS.getActiveScene(),n=a.useMemo(()=>new O(e,r),[e,r]),i=(0,h._)(n);return a.useEffect(()=>(s.yGz.setMapping(r,s.Zbk.VIEWER),()=>s.yGz.setMapping(r,s.Zbk.NONE)),[r]),a.useEffect(()=>{let r=()=>{let r=e.getTopmostFrameNode();r&&i.updateDirtyNodes([r])};return r(),e.on("viewportChanged",r),e.on("canvasResize",r),e.on("topLevelFrameChange",r),()=>{e.off("topLevelFrameChange",r),e.off("canvasResize",r),e.off("viewportChanged",r)}},[n,i,e]),a.useEffect(()=>{let n=setInterval(()=>{let n=s.yGz.flushChangedNodes(r).map(r=>e.getPrototypeNode(r)).filter(o.Vq);i.updateDirtyNodes(n)},100);return()=>void clearInterval(n)}),i}(n);return a.createElement(v,{autofocus:e,setAutofocus:r,viewer:n,accessibilityScope:i})}function T({autofocus:e,setAutofocus:r,viewer:n}){let i=function(e){let r=a.useMemo(()=>new R(e),[e]),n=(0,h._)(r);return a.useEffect(()=>{let r=()=>{let r=e.getTopmostFrameNode();r&&n.updateSubtree(r)},a=r=>{let a=e.getPrototypeNode(r);a&&n.updateSubtree(a)};return r(),e.on("viewportChanged",r),e.on("canvasResize",r),e.on("topLevelFrameChange",r),e.on("accessibilityNodeInvalidated",a),()=>{e.off("accessibilityNodeInvalidated",a),e.off("topLevelFrameChange",r),e.off("canvasResize",r),e.off("viewportChanged",r)}},[r,n,e]),n}(n);return a.createElement(v,{autofocus:e,setAutofocus:r,viewer:n,accessibilityScope:i})}let v=a.memo(function({accessibilityScope:e,autofocus:r,setAutofocus:n,viewer:i}){let[o,s]=a.useState(void 0),l=function(e,r){let n=a.useRef(null),i=n.current,o=i?.contains(i?.ownerDocument?.activeElement);return a.useLayoutEffect(()=>{if(!e&&!o)return;let a=n.current;a&&(e||!a.contains(a.ownerDocument.activeElement))&&(a.focus(),e&&r?.(!1))}),n}(r,n);return(a.useEffect(()=>{let e=()=>{let e=i.getTopmostFrameNode();e&&s(i.nodeId(e))};return i.on("topLevelFrameChange",e),()=>{i.off("topLevelFrameChange",e)}},[i]),a.useEffect(()=>{let e=i.getTopmostFrameNode();s(e?i.nodeId(e):void 0)},[i]),o)?a.createElement(S,{key:o,nodeId:o,parentId:void 0,enabled:!0,focusRef:l,accessibilityScope:e,viewer:i}):null});function S({parentId:e,nodeId:r,enabled:n=!0,focusRef:i,accessibilityScope:o,viewer:s}){let l;let c=(0,h.W)(r,o),u=s.getPrototypeNode(r);if(!c||!u)return null;let{isClickable:m,tag:p="div",role:_,label:g}=c,b=L.get(p)||{};switch(s.nodeType(u)){case"TABLE":l=function(e,r){let n=e.nodeTableCells(r).map(r=>({text:e.nodeTableCellContent(r),pos:e.nodeDisplayBounds(r)})).sort((e,r)=>e.pos.x<r.pos.x?-1:1),i={};for(let e of n)i[e.pos.y]?i[e.pos.y].push(e):i[e.pos.y]=[e];let o=Object.keys(i).sort();return[a.createElement("div",{role:"rowgroup",key:"table-header"},i[o[0]].map((e,r)=>a.createElement("span",{key:`header-${r}`,role:"columnheader",style:{left:e.pos.x,top:e.pos.y,width:e.pos.width,height:e.pos.height}}))),a.createElement("div",{role:"rowgroup",key:"table-body"},o.map((e,r)=>a.createElement("div",{key:e,role:"row","aria-rowindex":r},i[e].map((r,n)=>a.createElement("span",{key:`${e}-${n}`,role:"cell",className:f,style:{display:"inline-block",left:r.pos.x,top:r.pos.y,width:r.pos.width,height:r.pos.height}},r.text)))))]}(s,u);break;case"TEXT":l=D(s.nodeText(u)||"",s.nodeLineData(u)||[],s.nodeCharacterStyles(u),s.navigateToFrameAndCloseOverlays);break;default:l=c.childIds.map(e=>a.createElement(S,{key:e,nodeId:e,accessibilityScope:o,focusRef:void 0,viewer:s,parentId:r}))}let I=s.nodeScrollBounds(u),T=e&&s.getPrototypeNode(e),v=!n&&"none"||T||"canvas",N=A(s,u,I?"scrollContainer":v),C=m?{onClick:e=>{(0,d.f)(d.h.PROTOTYPE_BUTTON_CLICKED,{isMouseEvent:e?.screenX!==0&&e?.screenY!==0}),s.nodeTriggerInteraction(u,"ON_CLICK")},onFocus:()=>void s.nodeHover(u),onBlur:()=>void s.nodeReverseHover(u)}:{},O=a.createElement(p,{className:!n&&E||!!I&&y||f,style:N,tabIndex:i?0:void 0,ref:i,role:_,key:r,"aria-label":g,...b,...C},l);return I&&(O=a.createElement(w,{displayRect:A(s,u,v),enabled:n,scrollRect:I,onScrolled:(e,r)=>s.nodeScrollTo(u,e,r),scrollAreaContent:O})),O}function w({displayRect:e,enabled:r,onScrolled:n,scrollRect:i,scrollAreaContent:o}){let s=a.useRef(null),l=a.useRef(!1),c=a.useCallback(e=>{let r=e.target;("number"==typeof r?.scrollLeft||"number"==typeof r?.scrollTop)&&(l.current?l.current=!1:n?.(r.scrollLeft*i.width/r.scrollWidth,r.scrollTop*i.height/r.scrollHeight))},[n,i.height,i.width]);return a.useEffect(()=>{let e=s.current;if(e)return e.addEventListener("scrollend",c),()=>e.removeEventListener("scrollend",c)},[c]),a.useEffect(()=>{let e=s.current;e&&(l.current=!0,i.width&&(e.scrollLeft=i.x*e.scrollWidth/i.width),i.height&&(e.scrollTop=i.y*e.scrollHeight/i.height))},[i.x,i.y,i.width,i.height]),a.createElement("div",{className:r?y:E,style:e,ref:s},o)}function A(e,r,n){switch(n){case"none":return{};case"canvas":{let{x:n,y:a,width:i,height:o}=e.nodeDisplayBounds(r);return{left:n,top:a,width:i,height:o}}case"scrollContainer":{let n=e.nodeCanvasSpaceBounds(r),a=e.nodeScrollBounds(r);if(!a)return{};{let e="100%",r="100%";return 0!==a.height&&(e=`${100*a.height/n.height}%`),0!==a.width&&(r=`${100*a.width/n.width}%`),{height:e,width:r}}}default:{let a=e.nodeCanvasSpaceBounds(n),i=e.nodeScrollBounds(n),o=e.nodeCanvasSpaceBounds(r),s=i?i.width:a.width,l=i?i.height:a.height,c=a.x,d=a.y,u=(o.x-c)/s,m=(o.y-d)/l,p=o.width/s,h=o.height/l;return{top:`${100*m}%`,left:`${100*u}%`,height:`${100*h}%`,width:`${100*p}%`}}}}let N=new Set(["article","aside","button","div","footer","form","header","h1","h2","h3","h4","h5","h6","input","nav","p","section","span"]),C=new Map([["img","div"],["a","button"]]),L=new Map([["form",{onSubmit:e=>e.preventDefault()}],["button",{type:"button"}],["input",{readonly:"readonly"}]]);class O{constructor(e,r){this.viewer=e,this.sceneHandle=r}id(e){return this.viewer.nodeId(e)}isRoot(e){let r=this.viewer.nodeParent(e);return!r||"CANVAS"===this.viewer.nodeType(r)}parent(e){let r=this.viewer.nodeParent(e),n=r&&this.viewer.nodeType(r);if("CANVAS"!==n&&"SECTION"!==n&&r)return r}interpret(e){let r=s.yGz.getNodeInfo(this.sceneHandle,this.viewer.nodeId(e)),n=r.tag.toLowerCase();return C.has(n)?n=C.get(n):N.has(n)||(n="div"),{tag:n,role:r.role.toLowerCase(),inclusion:_.vF.INCLUDE,label:r.label||void 0,isClickable:"BUTTON"===r.role||"LINK"===r.role}}children(e){return s.yGz.getNodeInfo(this.sceneHandle,this.viewer.nodeId(e)).readableChildren.map(e=>this.viewer.getPrototypeNode(e)).filter(o.Vq)}}class R{constructor(e){this.viewer=e,this.comparePayloads=void 0}id(e){return this.viewer.nodeId(e)}isRoot(e){let r=this.viewer.nodeParent(e);return!r||"CANVAS"===this.viewer.nodeType(r)}parent(e){let r=this.viewer.nodeParent(e),n=r&&this.viewer.nodeType(r);if("CANVAS"!==n&&"SECTION"!==n&&r)return r}interpret(e){return function(e,r){let n;let a=e.nodeInteractions(r),i=!!a.find(e=>"ON_CLICK"===e.trigger),o=!!a.find(e=>("URL"===e.to||"INTERNAL_NODE"===e.to)&&"NAVIGATE"===e.type&&"ON_CLICK"===e.trigger),s=!!e.nodeScrollBounds(r),l=e.getTopmostFrameNode()===r,c=!e.nodeVisible(r),{tag:d,role:u,label:m}=function({tag:e,role:r,label:n}){let a,i,o;return e&&"AUTO"!==e&&(a=e.toLowerCase()),r&&"AUTO"!==r&&(i=r.toLowerCase()),n&&""!==n&&(o=n),{tag:a,role:i,label:o}}(e.nodeAccessibilityProperties(r)),p=d||u||m?_.vF.INCLUDE:void 0;if(c)void 0===p&&(p=_.vF.OMIT),p=void 0===p?_.vF.OMIT:p,d="div";else if(i){if(void 0===p&&(p=_.vF.INCLUDE),d||="button",o&&(u||="link"),!e.nodeText(r)){let a=e.nodeName(r);n=(e,r)=>r.length?{...e,childIds:r}:{...e,label:a,childIds:r}}}else{let a=e.nodeType(r);switch((l||i||s)&&void 0===p&&(p=_.vF.INCLUDE),a){case"FRAME":if(l)d||="article",m||=e.nodeName(r),void 0===p&&(p=_.vF.INCLUDE);else{if(d||="div",!u&&P(e,r)){let a=e.nodeName(r);n=(e,r)=>r.length?{...e,childIds:r}:{...e,inclusion:_.vF.INCLUDE,role:"img",label:e.label||a,childIds:r}}void 0===p&&(p=_.vF.CHILDREN)}break;case"BOOLEAN_OPERATION":case"STAR":case"LINE":case"ELLIPSE":case"RECTANGLE":case"REGULAR_POLYGON":case"ROUNDED_RECTANGLE":case"VECTOR":P(e,r)?(d||="div",u||="img",m||=e.nodeName(r),void 0===p&&(p=_.vF.INCLUDE)):(d||="div",void 0===p&&(p=_.vF.OMIT));break;case"SYMBOL":case"INSTANCE":d||="article",void 0===p&&(p=_.vF.INCLUDE),m||=e.nodeName(r);break;case"TEXT":d||="p",void 0===p&&(p=_.vF.INCLUDE);break;case"TABLE":d||="div",u||="table",void 0===p&&(p=_.vF.INCLUDE);break;case"TABLE_CELL":d||="td",void 0===p&&(p=_.vF.OMIT);break;default:d||="div",void 0===p&&(p=_.vF.INCLUDE),n=(e,r)=>(p=r.length?_.vF.INCLUDE:_.vF.OMIT,{...e,inclusion:p,childIds:r})}}let h={inclusion:p,tag:d,role:u,label:m,isClickable:i};return n?.bind(null,h)??h}(this.viewer,e)}children(e){return this.viewer.mapChildren(e,e=>e)}}function P(e,r){let n=e.nodeFillTypes(r);return 1===n.length&&"IMAGE"===n[0]}function D(e,r,n,i){let o=e.split(/\n/mu),s=[];function l(e){for(;s.length>e+1;){let e,r;let[n,i]=s.pop();switch(n){case"UNORDERED_LIST":e="ul",r="li";break;case"ORDERED_LIST":e="ol",r="li";break;default:e="p",r="span"}s[s.length-1][1].push(a.createElement(e,{key:s[s.length-1][1].length},i.map((e,n)=>a.createElement(r,{key:n},e))))}}let c=0;for(let e=0;e<o.length;e++){let d=o[e],u=r[e]||{type:"PLAIN",indentLevel:0};for("PLAIN"===u.lineType&&(u.indentLevel=0),l(u.indentLevel),s.length>1&&s[s.length-1][0]!==u.lineType&&l(u.indentLevel-1);s.length<u.indentLevel+1;)s.push([u.lineType,[]]);s[s.length-1][1].push(function(e,r){let o=[];for(let s of n){let{start:n,end:l,props:c}=s,d=[...r].length;if(n>e+d)break;if(l<=e)continue;n=Math.max(0,n-e),l=Math.min(d,l-e);let u=RegExp(`(?:[^]{${n}})([^]{${l-n}})`,"u"),m=r.match(u)?.[1],p=c?.get?.("HYPERLINK"),h=c?.get?.("FONT_STYLE"),_=h?.toLowerCase()?.includes("italic"),g=h?.toLowerCase()?.includes("bold"),f=c?.get?.("FONT_SIZE"),E=c?.get?.("TEXT_DECORATION"),y={fontWeight:g?"bold":void 0,fontStyle:_?"italic":void 0,fontSize:f?`${f}px`:void 0,textDecoration:new Map([["UNDERLINE","underline"],["STRIKETHROUGH","line-through"]]).get(E)};if("string"==typeof p?.url)o.push(a.createElement("a",{key:n+e,target:"_blank",rel:"noopener",href:p.url,style:y},m));else if(i&&"object"==typeof p?.guid){let r=p.guid;o.push(a.createElement("button",{key:n+e,type:"button",role:"link",onClick:()=>i(`${r.sessionID}:${r.localID}`)},m))}else g||_||f||E?o.push(a.createElement("span",{key:n+e,style:y},m)):o.push(m)}return o}(c,d)),c+=d.length+1}return l(0),s[0][1].map((e,r)=>"string"!=typeof e?e:a.createElement("p",{key:r},e))}},215688:(e,r,n)=>{n.d(r,{Bt:()=>i,IO:()=>o,nO:()=>a});let a="prototyping-auth-comments-modal",i="prototype-comments-view",o="prototype-sidebar-panel"},137874:(e,r,n)=>{n.d(r,{F:()=>f});var a=n(411855),i=n(188507),o=n(939863),s=n(944682),l=n(662275),c=n(259927),d=n(67085),u=n(499743),m=n(611978),p=n(892542),h=n(549774),_=n(728587),g=n(165843);function f(e){let{nodeId:r,clientX:n,clientY:f,prototypeUrl:E,fileKey:y,startingPointsData:b}=e,I=(0,m._6)();if("prototype"!==I.view)throw Error(`Unexpected non-prototype view: ${I.view}`);let{showHotspots:T,showProtoSidebar:v,scalingInfo:S}=I,w=(0,i.wA)(),A=(0,u.p)(),N=(0,p.b)(A,p.d.PROTOTYPE_FLOW_CONTEXT_MENU),C=(e,r)=>{let n=(0,h.vp)({scalingInfo:S,nodeId:e,startingPointNodeId:e,showHotspots:T,showProtoSidebar:v},null,null,N);w(s.S({fileKey:y,source:p.d.PROTOTYPE_FLOW_CONTEXT_MENU,url:`${r}${n}`,visualBellMessageOverride:(0,d.dE)({startingPointNodeId:e,startingPointsData:b}),visualBellButton:{text:(0,o.t)("permissions.copy_link_button.visual_bell.see_link_settings"),action:()=>{w((0,l.to)({type:g.g_,data:{fileKey:y,source:d.nk.prototypeCopyLinkButtonVisualBell}}))}}}))},L=[{displayText:(0,o.t)("viewer.flows_sidebar.copy_link_to_flow"),callback:()=>C(r,E)}];return a.createElement("div",{className:`${c.Dm}`},a.createElement(_.j,{dispatch:w,items:L,parentRect:{width:10,height:10,left:n+100,top:f,right:n+110,bottom:f-10},onSelectItem:e=>{e.callback&&e.callback("",null,w)},showPoint:!1}))}},337414:(e,r,n)=>{n.d(r,{e:()=>d});var a=n(433011),i=n(498750),o=n(563706),s=n(554322),l=n(563835);let c=class e{constructor(r,n){this._isUIShown=r,this._inCommentsMode=!1,this._rcsUserFlags=[],this._hideUITask=new a.W,this.handleProgressBarStoppedShowing=()=>{this.showUiAndScheduleFade()},this.onWindowFocus=()=>{this.showUiAndScheduleFade()},this.didEnterCommentsMode=()=>{this._hideUITask.reset(),this._setUIShown(!0),this._inCommentsMode=!0},this.didLeaveCommentsMode=()=>{this._inCommentsMode&&(this._inCommentsMode=!1,this.showUiAndScheduleFade())},this.didRscUserFlagsUpdate=e=>{this._rcsUserFlags=e},this.handleUnhideUI=()=>{this.showUiAndScheduleFade()},this.handlePageMouseDownOrTouchStart=e=>{"CURRENT_TLF"===e.type||"DEVICE_FRAME"===e.type?this._setUIShown(!1):"PROTOTYPE_BACKGROUND"===e.type&&(this._hideUITask.reset(),this._isUIShown()?this._setUIShown(!1):this.showUiAndScheduleFade())},this.handleHotspotClicked=()=>{this._setUIShown(!1)},this.handlePageMouseMove=(e,r)=>{let n=e.clientY,a=window.innerHeight-e.clientY,i=85>Math.abs(window.innerWidth/2+r/2-e.clientX)&&a<60;n<(0,s.bG)()?this.showUiAndScheduleFade():i?this.showUiAndScheduleFade():this.scheduleFadeIfNecessary()},this.handleHeaderOrFooterMove=e=>{this._hideUITask.reset(),this._isUIShown()||this._setUIShown(!0),e.stopPropagation()},this.handleHeaderOrFooterBlur=e=>{this.scheduleFadeIfNecessary()},this.handleHeaderOrFooterFocus=e=>{this._hideUITask.reset(),this._setUIShown(!0)},this.handleKeyDown=(e,r)=>{(r&&this._isUIShown()||e.keyCode===i.Uz.ESCAPE)&&this.showUiAndScheduleFade()},this.teardown=()=>{this._hideUITask.reset()},this.showUiAndScheduleFade=()=>{this._isUIShown()||this._setUIShown(!0),this._hideUITask.reset(),this.scheduleFadeIfNecessary()},this.scheduleFadeIfNecessary=()=>{this._hideUITask.isScheduled()||this._hideUITask.scheduleOnce(()=>{this._setUIShown(!1)},e.FADE_DELAY_MS)},this._setUIShown=r=>{let a=!r&&this._inCommentsMode,i=!r&&this._rcsUserFlags.reduce((r,n)=>r||e.RCS_SHOWN_ON_UI.has(n),!1);a||i||n(r)}}};c.FADE_DELAY_MS=o.rr?1e3:2e3,c.RCS_SHOWN_ON_UI=new Set([l.e]);let d=c},833131:(e,r,n)=>{n.d(r,{Y9:()=>ei});var a=n(411855),i=n(188507),o=n(686754),s=n(686046),l=n(629019),c=n.n(l),d=n(121913),u=n(511617),m=n(568214),p=n(697170),h=n(737947),_=n(560945),g=n(966712),f=n(374626),E=n(860601),y=n(179940),b=n(153234),I=n(30637),T=n(268537),v=n(201242),S=n(163023);n(715981);var w=n(939863),A=n(392592),N=n(362252),C=n(738269),L=n(293017),O=n(938908),R=n(37943),P=n(138369),D=n(529906),k=n(369870);n(488983);var M=n(318812),F=n(611978),x=n(860178),U=n(94500),B=n(498606),V=n(679282),G=n(549166),H=n(347127),W=n(215688),K=n(624158),Y=n(957369),$=n(560002),j=n(759457),z=n(112512),q=n(720248),X=n(671250),J=n(960340),Z=n(623467),Q=n(673520),ee=n(798387),et=n(748292);let er="PROTOTYPE_SETTINGS_DROPDOWN",en="proto_header_options_dropdown",ea=(0,k.ck)();function ei(e){let{prototype:r,file:n,shouldShowUI:s,recordingKey:l,optionsMenu:d}=e,_=(0,i.wA)(),E=(0,x.iZ)(),T=(0,M.Um)(),A=(0,F._6)(),N=(0,P.Fy)(),R=a.useRef(null),D=a.useRef(null),k=e=>{e.preventDefault(),_((0,U._P)({name:"Prototype Logo Clicked"})),_((0,L.eH)())},B=(e,r)=>R.current&&R.current.getBoundingClientRect().width<970?e:r,Y=!!E&&n.canView,q=u.GZ()&&!(0,I.nl)(),X=q&&null==(0,y.qg)(h.Ay.location.search).fullscreen,J=window.matchMedia("(max-width:830px)").matches&&!(0,I.PN)(),Z=j.wx;if(X&&!ea){let r=(0,m.sN)(m.Uv,(0,m.HL)(e.prototypeBGColor));Z=(0,m.HD)(r)?j.RA:j.cZ}let Q=!!T&&T.type===er,ee=(0,f.md)(K.jH),et=(0,f.md)(K.M);return s&&r.showProgressBar?a.createElement(es,{onClickLogo:k}):a.createElement(a.Fragment,null,a.createElement("div",{className:c()(Z,{[j.Wc]:e.shouldHideHeader&&"loading"!==et&&!ee,[j.G2]:e.sidebarData.isSidebarOpen||e.isCommentsSidebarOpen}),ref:R,role:"region","aria-label":(0,w.t)("viewer.menu_bar.accessible_label"),onBlurCapture:e.onBlurCapture,onFocusCapture:e.onFocusCapture,onMouseMove:e.onMouseMove,onMouseDown:e=>{e.stopPropagation()}},a.createElement("div",{className:j.Cd},!q&&a.createElement(ec,{recordingKey:b.Pt(l,"accessibility-button"),setAccessibilityTreeFocus:e.setAccessibilityTreeFocus}),a.createElement(eo,{onClickLogo:k}),!q&&e.startingPointsData&&e.startingPointsData?.length>0&&a.createElement("div",{ref:D},a.createElement(eu,{setShowSidebar:e.sidebarData.setShowSidebar,isSidebarOpen:!!A.showProtoSidebar,sidebarId:e.sidebarData.sidebarId})),(!q||ea)&&a.createElement(ed,{recordingKey:b.Pt(l,"comments-button"),selected:e.prototype.showComments,onClick:E?()=>{r.showComments?_(O.BZ()):_(O._b())}:e.showAuthCommentsModal,targetId:E?W.Bt:W.nO})),a.createElement("div",{className:j.SP},!q&&!1,!q&&a.createElement("h1",{className:Y?j.Ou:j.DD,dir:"auto"},n.name),q&&a.createElement("h1",null,a.createElement(o._,{newTab:!0,trusted:!0,className:j.DD,href:`/proto/${n.key}`},n.name)),!q&&Y&&a.createElement("div",{className:j.hg},a.createElement("div",{className:j.Ln},a.createElement(v.PX,{label:(0,w.t)("proto.options_dropdown"),"aria-expanded":Q,"aria-haspopup":"menu","aria-controls":Q?en:void 0,onClick:e=>{e.stopPropagation(),Q?_(C.oB()):_(C.j7({type:er}))},svg:a.createElement(S.B,{svg:z.A,className:j.zl})})),Q&&a.createElement(el,{viewer:e.viewer||null,file:n}))),a.createElement("div",{className:j.DK},(0,g.kc)().prototype_preload_offline&&a.createElement(K.ez,null),(!q||ea)&&e.multiplayer&&a.createElement(G.Cv,{dropdownShown:T,multiplayer:e.multiplayer,user:E}),(!q||ea)&&a.createElement($.Ay,{user:E,shareText:B((0,w.t)("viewer.menu_bar.share"),(0,H.f)(e.file.editorType)?(0,w.t)("viewer.menu_bar.share_presentation"):(0,w.t)("viewer.menu_bar.share_prototype")),loginText:B((0,w.t)("viewer.menu_bar.log_in"),(0,w.t)("viewer.menu_bar.log_in_or_create_account")),file:n}),!J&&d,!ea&&a.createElement(em,{inFullScreenMode:e.inFullScreenMode,dispatch:_}))),!q&&!ea&&!E&&!A.hideUI&&N()&&a.createElement(V.PQ,{origin:p.DT.PROTOTYPE,hideOnMobile:!0,overrideUseFedCMPrompt:!1}))}function eo(e){let r=u.GZ()&&!ea&&null==(0,y.qg)(h.Ay.location.search).fullscreen,n=j.UF;return r&&(n=j.m_),a.createElement("div",{className:n},a.createElement(s.N,{href:"/",onClick:e.onClickLogo,htmlAttributes:{"aria-label":(0,w.t)("proto.file_browser")}},r&&a.createElement(S.B,{svg:et.A}),!r&&a.createElement(S.B,{svg:Z.A,useOriginalSrcFills_DEPRECATED:!0})))}function es(e){return a.createElement("div",{className:j.uH},a.createElement(eo,{onClickLogo:e.onClickLogo}))}function el(e){let{viewer:r,file:n}=e,o=(0,i.wA)(),[s,l]=(0,Y.nN)(),c=r?.getBaseScreenId(),d=`/file/${n.key}/${encodeURIComponent(n.name)}?node-id=${c}`;return(0,g.kc)().ps_benchmark?s&&l&&(d+=`&prev-plan-id=${s}&prev-plan-type=${l}`):s&&(d+=`&prev-org-id=${s}`),a.createElement("div",{className:j.fh},a.createElement(T.X3,{id:en,hideDropdown:()=>o(C.oB()),options:[a.createElement(T.c$,{key:"open-in-editor",href:d,onMouseDown:()=>{o((0,U._P)({name:"Prototype Original Source Clicked"}))}},(0,w.tx)("viewer.menu_bar.open_in_editor"))]}))}function ec({setAccessibilityTreeFocus:e,recordingKey:r}){let n=a.useRef(null),[o,s]=a.useState(!1),{width:l}=(0,_.wY)(n)??_.cU,c=a.useCallback(()=>s(!0),[]),u=a.useCallback(()=>s(!1),[]),m=(0,i.wA)(),p=(0,D.e)(),h=e=>{m(A.F.enqueue({type:"accessibility-dom-enabled",role:"status",get message(){return e?(0,w.t)("viewer.options.accessible_dom_enabled"):(0,w.t)("viewer.options.accessible_dom_disabled")}})),m((0,R.X7)({enabled:e,scope:"SESSION"}))},g=b.rf(r,"click",r=>{(0,d.f)(p?d.h.SKIP_TO_CONTENT:d.h.ENABLE_AND_SKIP_TO_CONTENT,{isMouseEvent:r?.screenX!==0&&r?.screenY!==0}),h(!0),e(!0)});return a.createElement("div",{ref:n,className:j.ts,style:o?void 0:{marginLeft:-l}},a.createElement("button",{className:j.O6,onClick:g,onFocus:c,onBlur:u},(0,w.tx)("proto.header.skip_to_content")))}class ed extends b.o6{constructor(){super(...arguments),this.onClick=b.cZ(this,"click",()=>{this.props.onClick()})}render(){return a.createElement("div",{className:this.props.selected?j.WB:j.zQ,"data-onboarding-key":"prototype-comment"},a.createElement(v.PX,{onClick:this.onClick,"data-tooltip-type":B.Ib.TEXT,"data-tooltip":(0,w.t)("viewer.menu_bar.add_comment",{padding:"    ",shortcut:"C"}),"data-testid":"prototype-header-comments-button",label:(0,w.t)("proto.comment"),"aria-controls":this.props.targetId,svg:a.createElement(S.B,{svg:J.A})}))}}function eu(e){let r=b.rf(e.recordingKey,"click",r=>{e.setShowSidebar(!e.isSidebarOpen)});return a.createElement("div",{className:j.e3},a.createElement(v.PX,{"data-tooltip-type":B.Ib.TEXT,"data-tooltip":`${e.isSidebarOpen?(0,w.t)("viewer.flows_sidebar.close_sidebar"):(0,w.t)("viewer.flows_sidebar.open_sidebar")}`,onClick:r,label:(0,w.t)("proto.flows"),"aria-controls":e.sidebarId,svg:a.createElement(S.B,{svg:e.isSidebarOpen?ee.A:Q.A})}))}ed.displayName="ToggleCommentsButton";class em extends a.PureComponent{constructor(){super(...arguments),this.onClick=u.R7.fullscreen?()=>{this.props.dispatch((0,N._M)())}:E.lQ}render(){let e;let r=u.R7.fullscreen;return e=r?this.props.inFullScreenMode?(0,w.t)("viewer.menu_bar.exit_full_screen",{shortcut:"F"}):(0,w.t)("viewer.menu_bar.enter_full_screen",{shortcut:"F"}):(0,w.t)("viewer.menu_bar.full_screen_is_not_supported_by_this_browser"),a.createElement("div",{className:this.props.classNameOverride||(u.R7.fullscreen?j.Yd:j.E1)},a.createElement(v.PX,{label:e,disabled:!r,onClick:this.onClick,"data-tooltip-type":B.Ib.TEXT,"data-tooltip":e,svg:a.createElement(S.B,{svg:this.props.inFullScreenMode?X.A:q.A})}))}}em.displayName="ToggleFullScreenButton"},716253:(e,r,n)=>{n.d(r,{HS:()=>g,hF:()=>b,l5:()=>m,xY:()=>p});var a=n(188507),i=n(67151),o=n(299321);n(939863),n(392592);var s=n(992271),l=n(356390),c=n(239671),d=n(746806),u=n(223556),m=(e=>(e[e.DEVICE=0]="DEVICE",e[e.WEBSITE=1]="WEBSITE",e[e.SMALL=2]="SMALL",e))(m||{});function p(e){return"fullscreen"===e.selectedView.view&&(e.selectedView.editorType===c.nT.Design||e.selectedView.editorType===c.nT.DevHandoff||e.selectedView.editorType===c.nT.Slides)}let h=16/9,_=(e,r)=>{let n=r.getCurrentPage();if(!n)throw Error("Expected currentPage to exist");let{prototypeDevice:a}=n;return a?a.type===o.XQq.PRESENTATION?{x:e.absoluteBoundingBox.w,y:e.absoluteBoundingBox.h}:a.type===o.XQq.NONE?null:a.rotation===o.xOL.NONE?a.size:{x:a.size.y,y:a.size.x}:null};function g(e,r){let n=_(r,e);return n?{type:0,...n}:r.absoluteBoundingBox.w>=1280?{type:1}:{type:2}}function f(e,r){return(e.getCurrentPage()?.prototypeDevice?.rotation??o.xOL.NONE)===o.xOL.NONE?{x:104,y:20+(r?d.uF:0)}:{x:104,y:104}}let E=(e,{x:r,y:n},a)=>{let i=n/e.y,o=Math.min(i,r/e.x),{x:s,y:l}=f(a);if(o<1){if(o===i){if(Math.max(e.x*o,s)!==s)return{x:e.x*o,y:e.y*o};{let r=s/e.x;return{x:s,y:e.y*r}}}if(Math.max(e.y*o,l)!==l)return{x:e.x*o,y:e.y*o};{let r=l/e.y;return{x:e.x*r,y:l}}}return e},y=(e,{x:r,y:n},a)=>{let{x:i,y:o}=f(a),s=o/e.y,l=Math.max(s,i/e.x);if(l>1){if(l===s){if(Math.min(e.x*l,r)!==r)return{x:e.x*l,y:e.y*l};{let n=r/e.x;return{x:r,y:e.y*n}}}if(Math.min(e.y*l,n)!==n)return{x:e.x*l,y:e.y*l};{let r=n/e.y;return{x:e.x*r,y:n}}}return e};function b(e,r,n,o,c){let m=c.get(o);(0,i.vA)(!!m,"expected node to exist");let p=g(c,m);if(e&&(0,a.bN)(e.breakpoint,p)&&!r)return e;let _=l.Y5.getViewportInfo(),f=_.height-d.uF-32,b=Math.max(.5*_.width,104),I=(0,u.$W)(c),T=!!I&&(0,s.L_)(I);if(!(0===p.type&&n&&T)){let e=E(function(e,r){switch(e.type){case 0:return{x:e.x,y:e.y};case 1:return{x:r.absoluteBoundingBox.w,y:r.absoluteBoundingBox.w/h};case 2:return{x:r.absoluteBoundingBox.w,y:r.absoluteBoundingBox.h};default:(0,i.xb)(e)}}(p,m),{x:b,y:f},c);return{initialViewerSize:e=y(e,{x:b,y:f},c),breakpoint:p}}let v=c.getCurrentPage()?.prototypeDevice?.rotation;(0,i.B1)(v,"expected device rotation to exist");let{idealDeviceSize:S,framePresetSize:w}=(0,u.is)(I,v),A=E(S,{x:b,y:f},c);return A=y(A,{x:b,y:f},c),{initialViewerSize:(0,u.BX)(A,w,S),breakpoint:p}}},430817:(e,r,n)=>{n.d(r,{y:()=>S});var a=n(411855),i=n(188507),o=n(966712),s=n(522739),l=n(153808),c=n(268537),d=n(163023),u=n(939863),m=n(738269),p=n(109058);let h="internal_debug_tools--button--3-eAq";var _=n(18301),g=n(911339),f=n(289298),E=n(942723),y=n(236446),b=n(501191),I=n(743338),T=n(403921);let v="PROTOTYPE_DEBUG_TOOLS_MENU";function S(e){let r=(0,i.d4)(e=>e.dropdownShown),n=(0,i.wA)(),S=r?.type===v,[,w]=a.useState({}),A=a.useCallback(()=>w({}),[]),{viewer:N}=e,[C,L]=a.useState(!1),[O,R]=a.useState(!1);return(0,o.kc)().internal_prototyping_debug_tool?a.createElement("div",{className:"internal_debug_tools--debugContainer--CtxqL"},a.createElement(s.D8,{className:"internal_debug_tools--dropdownMenu--D-LuC",onClick:function(e){e.stopPropagation(),S?n(m.oB()):n(m.j7({type:v}))}},a.createElement("div",{className:"internal_debug_tools--dropdownMenuButton--5NXqo"},a.createElement("span",null,(0,u.tx)("viewer.debug_tools.debug_tools")),a.createElement("div",{className:"internal_debug_tools--buttonChevron--l5X4a"},a.createElement(d.B,{svg:f.A}))),S&&a.createElement(c.ms,{className:"internal_debug_tools--dropdown--5KC-1"},a.createElement(c.c$,{onClick:()=>{N?.isConnected()?N?.disconnectForTesting():N?.reconnectForTesting(),A()}},N?.isConnected()?(0,u.t)("viewer.debug_tools.disconnect_from_multiplayer"):(0,u.t)("viewer.debug_tools.reconnect_to_multiplayer")),a.createElement(c.c$,{onClick:()=>{(0,p.v)(!1);let e=document.getElementById("viewer_debug_stats");e?e.remove():N?(0,l.FL)(N):console.error("Viewer object doesn't exist")}},(0,u.tx)("viewer.debug_tools.toggle_debug_stats")),a.createElement(c.c$,{onClick:()=>window.testFakeLostContext?.()},(0,u.tx)("viewer.debug_tools.test_fake_web_gl_context_loss")),a.createElement(c.c$,{onClick:()=>window.testRealLostContext?.()},(0,u.tx)("viewer.debug_tools.test_real_web_gl_context_loss")),a.createElement(c.c$,{onClick:()=>{N?.takeSpectorSnapshot()}},(0,u.tx)("viewer.debug_tools.take_spector_snapshot")),a.createElement(c.c$,{onClick:()=>{N?.clearTileCachesAndTakeSpectorSnapshot()}},(0,u.tx)("viewer.debug_tools.clear_tile_caches_and_take_spector_snapshot")),a.createElement(c.c$,{onClick:()=>{N&&(C?(N.renderLayerByLayerDeactivate(),L(!1),R(!1)):(N.renderLayerByLayerActivate(),L(!0)))}},(0,u.tx)("viewer.debug_tools.render_layer_by_layer")),a.createElement(c.c$,{onClick:()=>{N?.toggleRenderTreePrinting()}},(0,u.tx)("viewer.debug_tools.toggle_render_tree_printing")))),C?a.createElement("div",{className:"internal_debug_tools--layerByLayerRenderingControls--Oj1Jd"},a.createElement("button",{className:h,onClick:()=>{N?.renderLayerByLayerRewind()}},a.createElement(d.B,{svg:I.A})),a.createElement("button",{className:h,onClick:()=>{N?.renderLayerByLayerBackward()}},a.createElement(d.B,{svg:_.A})),O?a.createElement("button",{className:h,onClick:()=>{N&&O&&(N.renderLayerByLayerPause(),R(!1))}},a.createElement(d.B,{svg:T.A})):a.createElement("button",{className:h,onClick:()=>{N&&!O&&(N.renderLayerByLayerPlay(),R(!0))}},a.createElement(d.B,{svg:y.A})),a.createElement("button",{className:h,onClick:()=>{N?.renderLayerByLayerForward()}},a.createElement(d.B,{svg:E.A})),a.createElement("button",{className:h,onClick:()=>{N?.renderLayerByLayerDecreaseSpeed()}},a.createElement(d.B,{svg:g.A})),a.createElement("button",{className:h,onClick:()=>{N?.renderLayerByLayerIncreaseSpeed()}},a.createElement(d.B,{svg:b.A}))):null):null}},526391:(e,r,n)=>{n.d(r,{i:()=>g});var a=n(411855),i=n(57860),o=n(463033),s=n(776250),l=n(737947),c=n(563706),d=n(153808),u=n(163023),m=n(939863),p=n(250118),h=n(42638);function _(){let e=(0,p.b0)();return a.createElement("button",{type:"button",className:"loading_state_overlay--offlineSecondaryAction--tZCt4",onClick:()=>{e?location.reload():l.Ay.reload("The viewer is taking a long time to load.")}},(0,m.tx)("viewer.loading_overlay.reload"))}function g(e){let r=(()=>{let r=e.viewerEl?.getBoundingClientRect();return{top:r?.top||0,left:r?.left||0,width:r?.width||0,height:r?.height||0}})(),[n,l]=a.useState("LOADED"),[g,f]=a.useState(null),[E,y]=a.useState(null),[b,I]=a.useState(null),T=(0,p.b0)(),v=a.useCallback(e=>{"LOADED"!==e&&"SHORT_LOADING"!==e&&s.az.trackDefinedEvent("prototype.viewer_overlay_state",{overlayState:e,isInEmbed:(0,p.dH)(),isMirror:(0,c.Ji)(),isInlinePreview:T,interactionId:g||"",interactionCause:E||"",destinationId:b||""}),l(e)},[T,g,E,b]),S=a.useRef(null);return(a.useEffect(()=>{S.current&&clearTimeout(S.current),"SHORT_LOADING"===n?S.current=setTimeout(()=>{v("LONG_LOADING")},700):"LONG_LOADING"===n&&(S.current=setTimeout(()=>{navigator.onLine?v("LOADING_ERROR"):v("CONNECTION_ERROR")},1e4))},[n,v]),d.O5(e.viewer,"requestedStateChange",e=>{S.current&&clearTimeout(S.current),v("SHORT_LOADING"),e&&(y(e.cause),I(e.destinationId),f(e.interactionId))}),d.O5(e.viewer,"requestedStateChangeInitiated",()=>{S.current&&clearTimeout(S.current),v("LOADED")}),"LOADED"===n||"SHORT_LOADING"===n)?null:a.createElement("div",{className:"loading_state_overlay--overlayContainer--egThs"},r&&a.createElement("div",{className:"loading_state_overlay--contentContainer--20M6N",style:{...r}},"LONG_LOADING"===n?a.createElement(i.k,null):"LOADING_ERROR"===n?a.createElement("div",{className:"loading_state_overlay--longLoadingContainer--FQgxf"},a.createElement(i.k,null),a.createElement("div",{className:"loading_state_overlay--longLoadingHelperText--Vp9LZ text--fontPos12--YsUAh text--_fontBase--QdLsd"},(0,m.tx)("viewer.loading_overlay.this_is_taking_some_time_hang_on_while_this_finishes_loading")),a.createElement(_,null)):"CONNECTION_ERROR"===n?a.createElement("div",{className:"loading_state_overlay--offlineContainer--TMfk0"},a.createElement(u.B,{className:"loading_state_overlay--offlineSvg--GHCgu",svg:h.A}),a.createElement("div",{className:"loading_state_overlay--offlineTextContainer--kn7QV"},a.createElement("div",{className:"loading_state_overlay--offlineTitle--6hlCW text--fontPos14--OL9Hp text--_fontBase--QdLsd"},(0,m.tx)("viewer.loading_overlay.can_t_connect_to_the_internet")),a.createElement("div",{className:"loading_state_overlay--offlineHelperText--qBa0p text--fontPos12--YsUAh text--_fontBase--QdLsd"},(0,m.tx)("viewer.loading_overlay.check_your_connection_to_continue_with_the_prototype"))),a.createElement("div",{className:"loading_state_overlay--offlineButtonContainer--MyWop"},a.createElement(o.$n,{variant:"primary",onClick:()=>v("LONG_LOADING")},(0,m.tx)("viewer.loading_overlay.try_again")),a.createElement(_,null))):void 0))}},624158:(e,r,n)=>{n.d(r,{ez:()=>B,M:()=>D,jH:()=>P,Dp:()=>U,lF:()=>V});var a=n(411855),i=n(188507),o=n(686754),s=n(773024),l=n(498481),c=n(776250),d=n(794272),u=n(38580),m=n(374626),p=n(646240),h=n(776621),_=n(743282),g=n(153808),f=n(857980),E=n(715981),y=n(939863),b=n(892629),I=n(549067),T=n(456104),v=n(397065),S=n(498606),w=n(340514),A=n(493364),N=n(154254),C=n(422237);let L=(0,C.ex)("preload_success",function(){return a.createElement("div",{className:N.cx.pr8.$},a.createElement("div",{className:N.cx.colorTextTooltip.textBodyMediumStrong.$},(0,y.t)("proto.preload.loaded.tooltip.header")),a.createElement("div",{className:N.cx.colorTextTooltipSecondary.$},(0,y.t)("proto.preload.loaded.tooltip.body")))}),O=(0,C.ex)("preload_error",function({isSlides:e}){return a.createElement("div",{className:N.cx.pr8.$},a.createElement("div",{className:N.cx.colorTextTooltip.textBodyMediumStrong.$},e?(0,y.t)("proto.preload.error.tooltip.header.slides"):(0,y.t)("proto.preload.error.tooltip.header")),a.createElement("div",{className:N.cx.colorTextTooltipSecondary.$},(0,y.t)("proto.preload.error.tooltip.body")))},e=>({isSlides:"true"===e.getAttribute("data-tooltip-slides")}));var R=n(463546);let P=(0,u.eU)(!1),D=(0,u.eU)("none"),k=(0,u.eU)(null),M=Math.floor(10),F=Math.floor(150),x={forwardToDatadog:!0};function U(){let e=(0,i.wA)(),[r,n]=(0,m.fp)(k),o=(0,p.Xr)(P),s=(0,p.Xr)(D),l=a.useCallback((a,i)=>{let l=i??r??null;null!==l&&(clearInterval(l),n(null)),o("error"===a),s(a),e(I.h({key:"offline-prototype",progress:0,total:0}))},[r,e,n,s,o]);return{startDownload:a.useCallback(()=>{s("loading"),o(!0);let r=(0,_.g)();(0,c.sx)("preload_prototype_started",{load_id:r},x);let a=g.hk(),i=a.getPrototypeStateCurrentIndex();a.restartPrototype(),a.navigateToFrameAtIndex(i),a.setLoadFullDocument(!0),a.setPreloaded(!0),a.preloadAllImages();let d=a.preloadAllVideos(),u=a.initialLoadFrames();e(I.h({key:"offline-prototype",progress:1,total:4}));let m=0,p=0,h=0,f=u,E=0,y=!1,b=setInterval(()=>{let i=a.loadFrames(f,E);f=i.nodesToVisit,E=i.numLoaded;let u=f.length+E,{loaded:_,total:g}=a.areAllImagesLoaded(),{loaded:T,total:v}=a.areAllVideosLoaded(d),S=E+_+T,w=u+g+v;if(window.navigator.onLine?(h!==S?m=0:m+=1,p=0):p+=1,h=S,p>=M||m>=F||S>w){(0,c.sx)("preload_prototype_finished",{load_id:r,num_loaded_frames:E,num_loaded_videos:T,num_loaded_images:_,num_total_frames:u,num_total_videos:v,num_total_images:g},x),l("error",b);return}if(e(I.h({key:"offline-prototype",progress:Math.max(Math.floor(S/w*4),1),total:4})),u===E&&0===f.length&&!y){y=!0,a.preloadAllImages(),d=[...d,...a.preloadAllVideos()];return}u===E&&0===f.length&&_===g&&T===v&&((0,c.sx)("preload_prototype_finished",{load_id:r,num_loaded_frames:E,num_loaded_videos:T,num_loaded_images:_,num_total_frames:u,num_total_videos:v,num_total_images:g},x),clearInterval(b),n(null),s("loaded"),o(!0))},300);n(b)},[e,l,n,s,o]),cancelDownload:l}}function B({isSlides:e=!1}){let[r,n]=(0,m.fp)(P),i=(0,m.md)(D),{isShowing:c,show:u,complete:p}=(0,T.e)({overlay:R.tyv,priority:v.N.SECONDARY_MODAL}),h=a.useCallback(()=>{n(!1),p()},[p,n]);a.useEffect(()=>{r?u():p()},[r,u,p]);let{progress:_}=(0,d.R)(e=>({progress:e.progress})),g=a.createElement(f.k,{className:"offline_prototype--progressIcon--Ye9zS",fraction:(0,b.OT)(_["offline-prototype"]),pathFill:"#FFFFFF"}),I=e?{errorTooltipHeader:(0,y.t)("proto.preload.error.tooltip.header.slides"),loadingTooltipHeader:(0,y.t)("proto.preload.loading.tooltip.header.slides")}:{errorTooltipHeader:(0,y.t)("proto.preload.error.tooltip.header"),loadingTooltipHeader:(0,y.t)("proto.preload.loading.tooltip.header")},N=function(e){let r=(0,m.md)(D),{errorTooltipHeader:n,loadingTooltipHeader:a}=e;return"error"===r?n:"loading"===r?a:(0,y.t)("proto.preload.loaded.tooltip.header")}(I),C=function(){let e=(0,m.md)(D);return"error"===e?(0,y.t)("proto.preload.error.tooltip.body"):"loading"===e?(0,y.t)("proto.preload.loading.tooltip.body"):(0,y.t)("proto.preload.loaded.tooltip.body")}();return a.createElement("div",null,a.createElement("div",{"data-onboarding-key":"preload-prototype-state-icon"},"loading"===i&&a.createElement(E.L,{isUI3:e,svgNode:g,useSvgNode:!0,"data-tooltip-submenu-open":r,"data-tooltip-type":S.Ib.TEXT,"data-tooltip":I.loadingTooltipHeader}),"loaded"===i&&a.createElement(E.L,{isUI3:e,svgNode:a.createElement(s.B,null),useSvgNode:!0,"data-tooltip-type":S.Ib.SPECIAL,"data-tooltip":r?void 0:L}),"error"===i&&a.createElement(E.L,{isUI3:e,svgNode:a.createElement(l.r,null),useSvgNode:!0,"data-tooltip-type":S.Ib.SPECIAL,"data-tooltip-slides":e,"data-tooltip":O})),a.createElement(w.rq,{"data-fpl-version":"ui3",isShowing:c,trackingContextName:"preload-prototype-state-icon",targetKey:"preload-prototype-state-icon",onTargetLost:h,onClose:h,isTooltip:!0,shouldCenterArrow:A.EL.BEST_EFFORT,title:a.createElement("span",null,N),description:a.createElement("span",null,C,"loaded"===i&&a.createElement(a.Fragment,null," ",a.createElement(o._,{className:"offline_prototype--learnMoreLink--SXs6g",href:e?"https://help.figma.com/hc/en-us/articles/24338209202327-Present-a-slide-deck#h_01J0XNV75FB33SMFRG32EMVQJ9":"https://help.figma.com/hc/en-us/articles/26463081577367-Present-prototypes-offline",newTab:!0,trusted:!0},(0,y.t)("proto.state_management.info_tooltip_learn_more")))),disableHighlight:!0}))}function V(){let e=(0,m.md)(D);a.useEffect(()=>{(0,h.kF)("viewer_preloaded_state",e)},[e])}},405328:(e,r,n)=>{n.d(r,{A9:()=>j,Ag:()=>z,NC:()=>X,s7:()=>q});var a=n(411855),i=n(188507),o=n(67151),s=n(75395),l=n(228739),c=n(621945),d=n(785933),u=n(302717),m=n(473107),p=n(629019),h=n.n(p),_=n(511617),g=n(737947),f=n(966712),E=n(374626),y=n(563706),b=n(179940),I=n(153234),T=n(30637),v=n(201242),S=n(163023),w=n(46481),A=n(939863),N=n(738269),C=n(662275),L=n(992271),O=n(611978),R=n(94500),P=n(112976),D=n(423163),k=n(728587),M=n(250118),F=n(624158),x=n(957369),U=n(759457),B=n(743586),V=n(999918),G=n(289298),H=n(479991),W=n(978019),K=n(534160),Y=n(503618),$=n(844076);let j="PROTOTYPE_OPTIONS_MENU";function z({device:e,showHotspots:r,showPrototypeOptions:n,showDeviceFrame:d,setHideUI:u,recordingKey:m,dropdownShown:p,isFooter:F}){let W=_.GZ()&&!(0,T.nl)()&&null==(0,b.qg)(g.Ay.location.search).fullscreen,K=(0,i.d4)(e=>e.selectedView),Y=(0,i.wA)(),z=a.useRef(null),J=(0,E.md)(M.Bf),Z=q(),Q=(0,y.o4)(),ee=null!=e&&"PRESET"===e.type;(0,o.vA)(!F||ee);let et=!F&&ee,er=F&&ee,en=n&&!et,ea=ee&&!er,ei=!er,eo=!er&&!Q,es=er?"PROTOTYPE_OPTIONS_MENU_FOOTER":j,el=p&&p.type===es;function ec(e){e.stopPropagation(),el?Y(N.oB()):Y(N.j7({type:es,data:{position:z.current?.getBoundingClientRect()}}))}let ed=(0,R.M9)(K),eu=en?X(Y,ed,J,m,e?.type,void 0,F).concat(P.w):[],em=function(){let e=!!(0,O._6)().disableDefaultKeyboardNav,r=M.pw();return{displayText:(0,A.t)("viewer.options_menu.disable_default_keyboard_navigation_v1"),isChecked:!e,callback:function(){r(!e)}}}(),ep=e=>{e!==ed.contentScalingMode&&Y((0,R.Jr)({contentScalingMode:e,userInitiated:!0,source:"presentation"}))},eh=[{displayText:(0,A.t)("viewer.options_menu.fixed_size"),icon:a.createElement(w.U,{svg:H.A,className:B.Fp},a.createElement(l.O,null)),isChecked:"responsive"!==ed.contentScalingMode,callback:()=>ep("fixed"),recordingKey:"fixed",unsetStrokeOnActiveOption:!0},{displayText:(0,A.t)("viewer.options_menu.responsive"),icon:a.createElement(w.U,{svg:$.A,className:B.Fp},a.createElement(c.V,null)),isChecked:"responsive"===ed.contentScalingMode,callback:()=>ep("responsive"),recordingKey:"responsive",unsetStrokeOnActiveOption:!0},P.w],e_=function(e,r,n,a,i,{hideHotspots:o,hideDeviceFrame:s}={}){let l=[];return o||l.push({displayText:(0,A.t)("viewer.options_menu.show_hints_on_click"),isChecked:e,callback:function(){i((0,R.KJ)({showHotspots:!e}))},"data-onboarding-key":"toggleHotspots"}),s||l.push({displayText:(0,A.t)("viewer.options_menu.show_device_frame"),isChecked:n,callback:function(){i((0,R.t0)({showDeviceFrame:!n}))},recordingKey:"option-toggle-device-frame",hidden:!a,"data-onboarding-key":"toggleDeviceFrame"}),r?l:[]}(r,n,d,ee,Y,{hideHotspots:er,hideDeviceFrame:et}),eg=function(){let e=(0,O._6)(),r=(0,i.wA)(),n=(0,x.gV)(e),o=a.useCallback(e=>({recordingKey:I.Pt("device-option",e.presetIdentifier),isChecked:n?.presetIdentifier===e.presetIdentifier,callback:()=>{r((0,R.Zh)({name:"prototype.viewer_device_picker_changed",params:{presetIdentifier:e.presetIdentifier,framePresetWidth:e.framePresetSize.x,framePresetHeight:e.framePresetSize.y}})),r((0,R.mf)({newDevice:{type:"PRESET",presetIdentifier:e.presetIdentifier,size:e.framePresetSize,rotation:n?.rotation||"NONE"}}))},displayText:e.getI18nDeviceName(),sideText:`${e.framePresetSize.x}\u200A\xd7\u200A${e.framePresetSize.y}`,rightJustifySideText:!0}),[r,n]),s=e.initialDevice;return a.useMemo(()=>{let e=s?.presetIdentifier?(0,L.Fh)(L.hY[s.presetIdentifier].deviceName,s):null;if(!s||!e)return[];let r=[];r.push({disabled:!0,displayText:(0,A.t)("viewer.options_menu.device_dropdown.default")}),r.push(o(e)),r.push(P.w);let n=(0,L.qt)(s.presetIdentifier),a=(0,L.WT)(L.LM[n],s);r.push(...a.map(o));let i=(0,L.WT)(L.UV[n],s).filter(e=>!a.find(r=>r.presetIdentifier===e.presetIdentifier));return i.length>0&&r.push({displayText:(0,A.t)("viewer.options_menu.device_dropdown.other"),recordingKey:I.Pt({recordingKey:"device-option"},"other-options"),children:i.map(o)}),r.push(P.w),r},[s,o])}(),ef=function(e,r,{hideUIToggle:n}={}){return n?[]:[{displayText:(0,A.t)("viewer.options_menu.hide_ui"),isChecked:!1,callback:function(){e(!0),r((0,R._P)({name:"Prototype Hide UI",params:{hide:!0}}))},recordingKey:"hide-ui",shortcut:(0,M.Fg)()}]}(u,Y,{hideUIToggle:er}),eE=function(e,r=!1){return r?[]:[{displayText:"Accessibility settings...",callback:()=>{e((0,C.to)({type:D.L}))},isChecked:!1}]}(Y,er),ey=(0,f.kc)().prototype_preload_offline?[{children:[...ei?[em]:[],...e_,...eo?[Z]:[],...eE],displayText:(0,A.t)("proto.option_menu.advanced_settings"),recordingKey:"advanced-settings"}]:[...ei?[em]:[],...e_,...eE],eb=W?eu:[...er?eg:[],...eu,...ea?eh:[],...ey,...ef],eI=a.createElement(v.PX,{onClick:ec,recordingKey:I.Pt({recordingKey:m},"toggle"),label:(0,A.t)("viewer.options_menu.options"),svg:a.createElement("div",{className:U.My,role:"button","aria-label":(0,A.t)("viewer.options_menu.options")},a.createElement(S.B,{svg:V.A}))}),eT=F?e?.presetIdentifier&&L.hY[e?.presetIdentifier].getI18nDeviceName()||"UNKNOWN DEVICE":void 0,ev=a.createElement(s.E,{onClick:ec,recordingKey:I.Pt({recordingKey:m},"toggle"),htmlAttributes:{"data-fullscreen-intercept":!0,tabIndex:0},className:h()([B.kv,B.zG])},a.createElement("div",{className:B.g7},eT),a.createElement("div",{className:B.UT},a.createElement(S.B,{svg:G.A}))),eS=p?.data?.position??void 0,ew=h()({[B.HF]:F,[B.v6]:!F});return a.createElement("div",{className:ew,ref:z},!F&&eI,F&&ev,el&&!!eS&&a.createElement(k.j,{showPoint:!0,onSelectItem:e=>e.callback?.(),parentRect:eS,dispatch:Y,items:eb,recordingKey:"options-menu-dropdown",displayAboveTarget:F,alwaysShowCheckMarkOffset:!0}))}function q(e){let r=(0,E.md)(F.M),n="loaded"===r,{startDownload:i}=(0,F.Dp)();return a.useEffect(()=>{if(!n)return;let e=e=>{e.preventDefault();let r="Closing this tab will lose your unsaved local changes";return e.returnValue=r,r};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[n]),{isChecked:n,displayText:(0,A.t)("viewer.options_menu.make_available_offline"),callback:()=>{n||"loading"===r||(e?.(),i())},hidden:!(0,f.kc)().prototype_preload_offline}}function X(e,r,n,i,o,s,p){let h=(0,M.Pz)(o,n),_=(0,M.Ac)(r,h),g=(h.findIndex(e=>e.scalingOptionId===_)+1)%h.length,f=h[g],E=n=>(function({option:e,currentScalingInfo:r,scalingHandlerOverride:n,recordingKey:i,showShortcut:o,dispatch:s,isFooter:p}){let h=(0,M.Ac)(r,[e]);return{displayText:(0,M.GP)(e.scalingOptionId,p),isChecked:h===e.scalingOptionId,callback:()=>n?n(e):void s((0,R.Jr)({...e.scalingInfo,userInitiated:!0,source:"presentation"})),recordingKey:i,shortcut:o?"Z":void 0,icon:p?void 0:function(e){switch(e){case M.IK.FIT_TO_SCREEN:return a.createElement(w.U,{svg:K.A,className:B.Fp},a.createElement(d.H,null));case M.IK.FIT_WIDTH:return a.createElement(w.U,{svg:Y.A,className:B.Fp},a.createElement(u.v,null));case M.IK.FILL_SCREEN:return a.createElement(w.U,{svg:W.A,className:B.Fp},a.createElement(m.m,null));case M.IK.ACTUAL_SIZE:return a.createElement(w.U,{svg:H.A,className:B.Fp},a.createElement(l.O,null));case M.IK.RESPONSIVE:return a.createElement(w.U,{svg:$.A,className:B.Fp},a.createElement(c.V,null));default:return}}(e.scalingOptionId),unsetStrokeOnActiveOption:!0,name:e.scalingOptionId}})({dispatch:e,option:n,showShortcut:n.scalingOptionId===f.scalingOptionId,currentScalingInfo:r,scalingHandlerOverride:s,recordingKey:I.Pt({recordingKey:i},`option-${(0,M.Ti)(n.scalingOptionId)}`),isFooter:p});if(!(n!==M.Yu.DEFAULT&&!p&&h.length>=4))return h.map(e=>E(e));{let e=h.slice(0,2).map(e=>E(e)),r=h.slice(2).map(e=>E(e));return[{disabled:!0,displayText:(0,A.t)("viewer.options_menu.recommended_scaling_options")},...e,{disabled:!0,displayText:(0,A.t)("viewer.options_menu.other_scaling_options")},...r]}}},624187:(e,r,n)=>{n.d(r,{AH:()=>u,Md:()=>c,pb:()=>l,z2:()=>s,zM:()=>d});var a=n(288706),i=n(374626),o=n(56029),s=(e=>(e[e.NOT_LOADED=0]="NOT_LOADED",e[e.LOADED=1]="LOADED",e))(s||{}),l=(e=>(e[e.LOAD_LIVEGRAPH=0]="LOAD_LIVEGRAPH",e[e.LOAD_VIEWER_INSTANCE=1]="LOAD_VIEWER_INSTANCE",e))(l||{});let c=(0,a.um)({status:0,livegraphLoaded:!1,viewerInstanceLoaded:!1},(e,r)=>{if(1===e.status)return e;switch(r.type){case 0:if(e.viewerInstanceLoaded)return o.Su.handleViewerLoaded("livegraph"),{status:1,lastLoaded:"livegraph"};if(e.livegraphLoaded)return e;return{...e,livegraphLoaded:!0};case 1:if(e.livegraphLoaded)return o.Su.handleViewerLoaded("multiplayer"),{status:1,lastLoaded:"multiplayer"};if(e.viewerInstanceLoaded)return e;return{...e,viewerInstanceLoaded:!0}}});function d(e){return i.zl.sub(c,()=>{u()&&e()})}function u(){return 1===i.zl.get(c).status}},957369:(e,r,n)=>{n.d(r,{gV:()=>d,nN:()=>c,tK:()=>u});var a=n(411855),i=n(188507),o=n(966712),s=n(776621),l=n(611978);function c(){let e=(0,i.d4)(e=>e.lastVisitedPlan),r=(0,i.d4)(e=>e.lastVisitedPlanId),n=null;return(0,o.kc)().ps_benchmark&&e&&(r=e.planId,n=e.planType),[r,n]}function d(e){return e.initialDevice?.presetIdentifier===e.overrideDevice?.presetIdentifier?e.initialDevice||null:e.overrideDevice||e.initialDevice||null}function u(){let e=(0,l._6)();return(0,a.useMemo)(()=>"prototype"!==e.view?((0,s.xi)("prototype-header","useCurrentlySelectedDevice called with non-prototype view"),null):d(e),[e])}},284995:(e,r,n)=>{n.d(r,{z:()=>v});var a=n(411855),i=n(188507),o=n(776250),s=n(737947),l=n(966712),c=n(179940),d=n(881388),u=n(56029),m=n(379202),p=n(745540),h=n(611978),_=n(710654),g=n(239671),f=n(547807);let E=new class{constructor(){this.CanvasSchemaValidator=(0,f.vh)()}getCanvas(e){return this.CanvasSchemaValidator.validate(async({xr:r})=>await r.get(`/file/${e.fileKey}/canvas`,null,{responseType:"arraybuffer"}))}},y=new class{constructor(){this.CanvasFkSchemaValidator=(0,f.vh)()}getCanvasFk(e){return this.CanvasFkSchemaValidator.validate(async({xr:r})=>await r.get(`/version/${e.versionId}/canvas?fk=${e.fileKey}`,null,{responseType:"arraybuffer"}))}};var b=n(250118);async function I(e,r){try{return await y.getCanvasFk({versionId:e,fileKey:r})}catch{return(0,o.sx)("Prototype Version Load Failed",{file_key:r,version_id:e}),null}}async function T(e){try{return await E.getCanvas({fileKey:e})}catch{return null}}function v(e){let{viewer:r,entry:n}=e,o=(0,i.wA)(),{file:f,versionId:E,nodeId:y,startingPointNodeId:v}=(0,h._6)(),S=a.useRef(!1);return a.useEffect(()=>{(async()=>{if(!f.key||S.current)return;let e=(0,c.qg)(s.Ay.location.search),a="1"===e["disable-mp"]&&(0,l.kc)().internal_only_debug_tools;_.T(),m.Q.setLoadTimeTracker(u.Su);let i=(b.dH()||"feed"===e["redirect-src"])&&E,h=i||a;if(h){let e=null;(e=i?await I(E,f.key):await T(f.key))?(r.loadFile({bytes:e.data,nodeId:y||"",startingPointNodeId:v||"",imagePrefixURL:`/file/${f.key}/image`,videoPrefixURL:`/api/files/${f.key}/videos`,editorType:(0,g.y9)(f.editor_type)},p.M),S.current=!0):o(d.s.flash("This prototype isn't available."))}else r.connectTo({fileKey:f.key,nodeId:y||"",startingPointNodeId:v||"",editorType:(0,g.y9)(f.editor_type)},p.M),S.current=!0;u.Su.handleAfterConnectTo({entry:n,connectionType:h?"file":"multiplayer",fullscreen:"Fullview-IC",logViewerWaiting:!1})})()},[o,f,E,y,v,r,n]),null}},349754:(e,r,n)=>{n.d(r,{L:()=>u});var a=n(411855),i=n(629019),o=n.n(i),s=n(448169),l=n(355819),c=n(154254),d=n(138504);function u(e){let r=e.showSidebar;return a.createElement("div",{className:o()({[d.so]:r,[d.c6]:!r,[d.UL]:e.withoutHeaderMargin})},a.createElement(s.V,{className:c.cx.flex.flex1.flexColumn.$},!1===e.scrollable?e.children:a.createElement(l.P,{className:d.jG,hideScrollbar:!0},e.children)))}},560002:(e,r,n)=>{n.d(r,{wh:()=>W,Ay:()=>H});var a=n(411855),i=n(188507),o=n(463033),s=n(511617),l=n(697170),c=n(737947),d=n(563706),u=n(761870),m=n(21452),p=n(154254),h=n(939863),_=n(662275),g=n(349410),f=n(67085),E=n(297174),y=n(498606),b=n(793670),I=n(320063),T=n(374626),v=n(646240),S=n(672517),w=n(456104),A=n(543312),N=n(582947),C=n(212957),L=n(397065),O=n(147829),R=n(66154),P=n(463546),D=n(421407);let k="seen_pro_onboarding_prototype_only_links_overlay",M=(0,N.r1)(k);function F({teamId:e}){let r=(0,T.md)(M),n=(0,T.md)(A.e),i=(0,v.Xr)(D.n),o=(0,g.kO)(),{show:s,isShowing:l,complete:c}=(0,w.e)({overlay:P.MxF,priority:L.N.DEFAULT_MODAL,experiment:{check:o,predicate:e=>e,postCheck:e=>!e}},[r,n]);return((0,I.h)(()=>{s({canShow:(r,n)=>n.some(r=>r.id===e),onShow:()=>i(!0)})}),l)?a.createElement(O.M,{isShowing:l,userFlagOnShow:k},a.createElement(S.fu,{name:C.S.getTooltipTrackingContext("Prototype Only Links"),properties:C.S.getTrackingProperties()},a.createElement(R.$v,{dismissModal:()=>{i(!1),c()}}))):null}var x=n(165843),U=n(759457);let B="node-id",V="prototype_header_nav_google_sso",G="slides_presentation_header_nav_google_sso";function H(e){let{user:r,file:n,shareText:p,loginText:g}=e,y=(0,i.wA)(),I=!(0,d.C8)();return r?a.createElement(a.Fragment,null,a.createElement("div",{className:U.TC},a.createElement(o.$n,{onClick:()=>{y(_.to({type:x.g_,data:{fileKey:n.key,source:f.nk.prototypeHeader}}))},htmlAttributes:{"data-onboarding-key":"share-prototype"}},p)),n.teamId&&a.createElement(F,{teamId:n.teamId})):a.createElement("div",{className:U.TC},a.createElement(o.$n,{variant:I?"secondary":"primary",onClick:()=>{let e=c.Ay.location.pathname,r=new URLSearchParams(c.Ay.location.search).get(B);r&&(e=s.dR(e,{[B]:r})),y(u.Ts({origin:"prototype_header_nav",redirectUrl:e})),y(_.to({type:b.x,data:{}}))}},g),I&&a.createElement(E.H,{onClick:()=>{l.Rm({dispatch:y,origin:V,redirectUrl:c.Ay.location.pathname}).then(e=>{y(u.My({userId:e.id}))},e=>{(0,m.g)("google_signup_error",V,{error:e.message})})}},(0,h.tx)("footer_banner.continue_with_google")))}function W(e){let{user:r,file:n,shareText:s,loginText:d,sharingDisabled:b,showDefaultAuthModal:I}=e,T=(0,i.wA)(),v=(0,g.Ns)(r);if(r)return a.createElement(a.Fragment,null,a.createElement(o.WW,{onClick:()=>{T(_.to({type:x.g_,data:{fileKey:n.key,source:f.nk.prototypeHeader}}))},disabled:b,htmlAttributes:{"data-tooltip":b?(0,h.t)("fullscreen.toolbar.multiplayer.sharing_slides_files_disabled_by_your_organization"):void 0,"data-tooltip-type":y.Ib.TEXT,"data-onboarding-key":"share-prototype"}},s),n.teamId&&a.createElement(F,{teamId:n.teamId}));let S=v();return a.createElement("div",{className:p.cx.flex.gap8.$},a.createElement(o.WW,{variant:S?"secondary":"primary",onClick:I},d),S&&a.createElement(E.H,{onClick:()=>{l.Rm({dispatch:T,origin:G,redirectUrl:c.Ay.location.pathname}).then(e=>{T(u.My({userId:e.id}))},e=>{(0,m.g)("google_signup_error",G,{error:e.message})})},large:!0},(0,h.tx)("footer_banner.continue_with_google")))}},280690:(e,r,n)=>{n.d(r,{iO:()=>I,xt:()=>b,rI:()=>N});var a=n(411855),i=n(188507),o=n(297666),s=n(812115),l=n(153234),c=n(286640),d=n(799569),u=n(448169),m=n(355819),p=n(163023),h=n(939863),_=n(738269),g=n(7959);let f="sidebar_panel--scrollContainer--Gng-6 pages_panel--scrollContainer--aXdXr";var E=n(450147),y=n(304516);let b=240,I="PROTOTYPE_FLOW_CONTEXT_MENU_DROPDOWN";function T(e){return Math.max(b,Math.min(500,e||0))}var v=(e=>(e[e.HEIGHT=0]="HEIGHT",e[e.WIDTH=1]="WIDTH",e))(v||{});let S=(e,r,n)=>{if(c.x4){let a=JSON.parse(c.x4.getItem("viewer-sidebar-panel")||"{}");a[e]={...a[e],...0===r&&{height:n},...1===r&&{width:n}},c.x4.setItem("viewer-sidebar-panel",JSON.stringify(a))}},w=(e,r)=>{if(c.x4){let n=JSON.parse(c.x4.getItem("viewer-sidebar-panel")||"{}");0===r?delete n[e].height:1===r&&delete n[e].width,c.x4.setItem("viewer-sidebar-panel",JSON.stringify(n))}},A=e=>{if(c.x4)return JSON.parse(c.x4.getItem("viewer-sidebar-panel")||"{}")[e]};function N(e){let[r,n]=(0,a.useState)(!1),[i,o]=(0,a.useState)(null),s="SidebarPanel",c=(0,a.useRef)(!1),d=a.useMemo(()=>i?T(i):b,[i]),u=l.rf(s,"mousedown",()=>{n(!0)}),m=l.rf(s,"mousemove",e=>{if(!r)return l.aH;{let r=T(e.clientX);r!==d&&o(r)}}),p=l.rf(s,"mouseup",a=>{if(!r)return l.aH;a.stopPropagation(),e.setSidebarWidthInParent(d),n(!1)});(0,a.useEffect)(()=>(document.addEventListener("mousemove",m),document.addEventListener("mouseup",p,!0),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",p,!0)}),[m,p]);let{openFileKey:h,startingPointsData:_,activePrototypeStartingPointNodeId:g,onSelectFlow:f,setShowSidebar:E,showSidebar:y,setSidebarWidthInParent:I}=e;(0,a.useEffect)(()=>{h&&i&&S(h,1,i)},[i,h]),(0,a.useEffect)(()=>{h&&(e=>{let r=A(e);r&&r.width&&(o(r.width),I(r.width))})(h)},[h,I]),(0,a.useEffect)(()=>{!c.current&&_.length>0?c.current=!0:c.current&&0===_.length&&y&&E(!1)},[_,y,E]);let v=a.createElement(a.Fragment,null,a.createElement("nav",{className:"sidebar_panel--content--Ebl5L","aria-labelledby":L,"aria-hidden":!e.showSidebar},a.createElement(R,{recordingKey:"sidebarViewerPanel",width:d,openFileKey:h,startingPointsData:_,activePrototypeStartingPointNodeId:g,onSelectFlow:f,setShowSidebar:E})),a.createElement("div",{className:"sidebar_panel--edge--Rc8Ap",style:{left:d},onMouseDown:u,onDoubleClick:()=>{o(null),e.setSidebarWidthInParent(null),e.openFileKey&&w(e.openFileKey,1)}}));return a.createElement(C,{id:e.id,showSidebar:e.showSidebar,width:d},v)}function C({id:e,children:r,showSidebar:n,width:i}){let o=n?"shown":"hidden",[s,l]=a.useState(o),c=s!==o?"transition":s,d=(0,a.useCallback)(()=>{l(o)},[o]);return(0,a.useEffect)(()=>{if("hidden"===s&&"shown"===o){let e=requestAnimationFrame(()=>void l(o));return()=>void cancelAnimationFrame(e)}},[s,o]),a.createElement("div",{id:e,className:"hidden"===c?"sidebar_panel--panelContainerDisplayNone--e6-Gw sidebar_panel--container--nl8-a":"sidebar_panel--panelContainer--0R0Wb sidebar_panel--container--nl8-a",style:{width:i,marginLeft:"shown"===c?0:-i},onTransitionEnd:d},r)}let L="sidebar-panel-heading-title";function O(){return a.createElement("div",{id:L,className:"sidebar_panel--flowsHeaderText--vATd7 text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L pages_panel--pagesHeaderText--4UIwl",onContextMenu:e=>{e.preventDefault(),e.stopPropagation()}},(0,h.tx)("viewer.flows_sidebar.flows"))}function R(e){let r=(0,a.useMemo)(()=>{let r={};for(let n=0;n<e.startingPointsData.length;n++)r[e.startingPointsData[n].id]=e.startingPointsData[n].description;return r},[e.startingPointsData]),[n,c]=(0,a.useState)(e.activePrototypeStartingPointNodeId),[b,T]=(0,a.useState)(r[e.activePrototypeStartingPointNodeId]),[v,N]=(0,a.useState)(!1),[C,L]=(0,a.useState)(null),[R,P]=(0,a.useState)(window.innerHeight),D=(0,a.useRef)(0),k=(0,a.useRef)(0),M=(0,a.useRef)(0),{openFileKey:F,activePrototypeStartingPointNodeId:x}=e,U=(0,i.wA)();(0,a.useEffect)(()=>{F&&C&&S(F,0,C)},[C,F]),(0,a.useEffect)(()=>{F&&(e=>{let r=A(e);r&&r.height&&L(V(r.height))})(F)},[F]);let B=e=>{k.current=D.current=e.clientY,M.current=e.clientY-86,L(M.current)},V=e=>{let r=16-(e-7)%32;return r<0&&(r+=32),e+r},G=(0,a.useCallback)(e=>Math.max(55,Math.min(e,Math.round(R-64-96))),[R]),H=(0,a.useMemo)(()=>(0,o.s)(()=>{P(window.innerHeight)},45),[]);function W(r){e.onSelectFlow(r)}(0,a.useEffect)(()=>{let e=()=>{H()};return window.addEventListener("resize",e),()=>{H.cancel(),window.removeEventListener("resize",e)}},[H]),(0,a.useEffect)(()=>{let e=e=>{e.clientY!==D.current&&(L(G(M.current+e.clientY-k.current)),D.current=e.clientY)},r=r=>{v&&(r.preventDefault(),r.stopPropagation(),e(r))},n=e=>{e.stopPropagation(),e.preventDefault(),N(!1)},a=r=>{v&&(r.preventDefault(),r.stopPropagation(),e(r.touches[0]))},i=e=>{N(!1)};return document.addEventListener("mousemove",r),document.addEventListener("mouseup",n),document.addEventListener("touchend",i),document.addEventListener("touchmove",a),()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",n),document.removeEventListener("touchend",i),document.removeEventListener("touchmove",a)}},[G,v]),(0,a.useEffect)(()=>{c(x),T(r[x])},[x,r]);let K=b&&"<p><br></p>"!==b;return a.createElement("div",{className:"sidebar_panel--verticalFlexContainer--HTP2n",style:{width:e.width}},a.createElement("div",{className:"sidebar_panel--flowsListPanelContent--vU15E pages_panel--pagesPanelContent--ZGkcM pages_panel--pagesPanelContentWhiteboard--gUJEi"},a.createElement("div",{className:"sidebar_panel--flowsHeaderContainerWithShadow--ku5dU pages_panel--pagesHeaderContainerWithShadow--sVSKu pages_panel--pagesHeaderContainer--i92Ni"},a.createElement(O,null),a.createElement(d.Jn,{useOriginalSrcFills_DEPRECATED:!0,recordingKey:l.Pt(e,"closeSidebar"),className:"sidebar_panel--closeButton--XWnCD",onClick:()=>e.setShowSidebar(!1),innerText:"close",svg:y.A})),e.startingPointsData?a.createElement(u.V,null,a.createElement("div",{style:{height:C?G(C):(()=>{let r=32*e.startingPointsData.length,n=Math.round(.25*(R-64));return V(Math.min(r=32*Math.ceil(r/32)+16,n))})()},className:"sidebar_panel--flowsList--lbQgB pages_panel--pagesList--GVSQw"},a.createElement(m.P,{className:f,width:e.width,hideScrollbar:!0},e.startingPointsData.map((e,r)=>{let i="sidebar_panel--flowsRowSpacer--fu7iG";return 0===r&&(i="sidebar_panel--flowsRowSpacerInsertBeforeTop--j7UnJ sidebar_panel--flowsRowSpacer--fu7iG"),a.createElement("div",{className:i,key:e.id},a.createElement("button",{role:"link",className:"sidebar_panel--flowRow--1yyNX pages_panel--pageRow--7h-Lv pages_panel--pageRowBase--d4OsN","aria-current":n===e.id,key:e.id,onClick:()=>W(e.id),onTouchStart:()=>W(e.id),onContextMenu:r=>(function(e,r){e.preventDefault();let{clientX:n,clientY:a}=e;U(_.j7({type:I,data:{clientX:n,clientY:a,nodeId:r}}))})(r,e.id)},a.createElement(p.B,{svg:E.A,className:`sidebar_panel--flowRowSvg--GhKTM
                        ${n===e.id?"sidebar_panel--visibleCheckmark--0Ts8X":"sidebar_panel--hiddenCheckmark--O-kpW"}`}),a.createElement(g.JU,{className:n===e.id?"sidebar_panel--flowNameSelected--T5iAg text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L":"sidebar_panel--flowNameUnselected--DUjvf text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L"},e.name)))})))):null),a.createElement("div",{className:"sidebar_panel--resizeLineContainer--tIXt8"},a.createElement("div",{className:"sidebar_panel--resizeLine--u3PU-",onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),B(e),N(!0)},onTouchStart:e=>{e.preventDefault(),e.stopPropagation(),B(e.touches[0]),N(!0)},onDoubleClick:()=>{L(null),e.openFileKey&&w(e.openFileKey,0)}})),a.createElement("section",{"aria-label":(0,h.t)("proto.flow_description"),className:`sidebar_panel--flowDescriptionPanelContent--ogSmt ${K?"sidebar_panel--flowDescriptionText--pCFYA":""}`},a.createElement(m.P,{className:f,hideScrollbar:!0},a.createElement("div",{className:"sidebar_panel--flowDescriptionInnerPanelContent--H7-qc text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",dir:"auto"},a.createElement(s.R,{fallback:null,errorFallback:null,value:K?b:(0,h.t)("viewer.flows_sidebar.no_description")})))))}},964050:(e,r,n)=>{n.d(r,{V:()=>z});var a=n(411855),i=n(188507),o=n(299321),s=n(511617),l=n(835650),c=n(966712),d=n(374626),u=n(563706),m=n(69267),p=n(760224),h=n(845840),_=n(662275),g=n(672517),f=n(693707),E=n(988022),y=n(67085),b=n(596),I=n(737499),T=n(99506),v=n(94500),S=n(776615),w=n(447532),A=n(143678),N=n(402766),C=n(180252),L=n(909604),O=n(894728),R=n(255416),P=n(984375),D=n(489921),k=n(165843),M=n(624158),F=n(624187),x=n(250118),U=n(284995),B=n(629019),V=n.n(B),G=n(91408),H=n(837746),W=n(663237),K=n(317258);function Y(e){let r;let n=(0,i.d4)(e=>!!e.modalShown),o=(0,G.jz)(H.P4e);return r=e.offscreen?"translateY(100vh)":`translateY(-${o}px)`,a.createElement("div",{"aria-hidden":n,className:V()({[K.E3]:!0,[K.Oy]:!0,[W.Q]:e.srOnly}),style:{transform:r}},e.children)}var $=n(260522);function j(e){let{livegraphData:r}=e,n=(0,i.d4)(e=>e.selectedView),o=(0,i.d4)(e=>e.prototype),s=(0,i.d4)(e=>e.multiplayer),u=(0,i.d4)(e=>e.user),m=(0,i.wA)();if("prototype"!==n.view)throw Error(`Unexpected non-prototype view: ${n.view}`);a.useEffect(()=>(document.body.classList.add($.$7),()=>{document.body.classList.remove($.$7)}),[]);let p=(0,I.Yi)(n),h=(0,l.l7)()&&!(0,l.br)(),f=o.showComments&&!p&&!h,[b,T]=a.useState(null);(0,x.kZ)();let v=(0,x.l1)(b,n,e.scalingInfo,s,e.showHotspots,e.showDeviceFrame,f,o,u,"design"),[S,w]=a.useState(!1);a.useEffect(()=>{"prototype"===n.view&&v&&w(!0)},[v,n.view]);let N=(0,d.md)(F.Md),C=r?r.file.key:"",L=a.useRef(!1);return a.useEffect(()=>{!L.current&&(0,c.kc)().sc_files_prototype_share_as&&N.status===F.z2.LOADED&&n.share&&""!==C&&u&&(m((0,_.to)({type:k.g_,data:{fileKey:C,source:y.nk.fullscreenToolbar}})),L.current=!0)},[N.status,n.share,m,C,u]),(0,M.lF)(),a.createElement(a.Fragment,null,r&&(0,g.T8)(a.createElement(a.Fragment,null,a.createElement(D.A,null),a.createElement(R.Yp,{file:r.file,isCommentsMode:f,scalingInfo:e.scalingInfo,showHotspots:e.showHotspots,showPrototypeOptions:!0,showDeviceFrame:e.showDeviceFrame,org:e.org,recordingKey:"prototypeView",viewer:v,viewerElement:b,setViewerElement:T})),A.e0.PROTOTYPE,(0,E.oP)(r.file)),S&&!!v&&a.createElement(U.z,{viewer:v,entry:n.inlinePreview?"Preview":"Prototype"}))}function z(){let e=(0,i.d4)(e=>e.selectedView),r=(0,i.d4)(e=>e.prototype),n=(0,i.d4)(e=>e.flashes),c=(0,i.d4)(e=>e.user),d=(0,i.d4)(e=>e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null),_=(0,i.d4)(e=>e.interactionTestDialogShown);if("prototype"!==e.view)throw Error(`Unexpected non-prototype view: ${e.view}`);let g=a.useRef(null),E=(0,l.f3)(),y=(0,f.Z)(E||"dark",g,e,!0),I=(0,x.PG)(e);if((0,L.d)())return a.createElement(L.O,null);let A=null==e.showHotspots||e.showHotspots,R=null==e.showDeviceFrame||e.showDeviceFrame;return a.createElement(S.uW.Provider,{value:y},a.createElement(C.K,{recordingKey:"inAppPage",containerRef:g},u.nW&&c&&!(0,s.GZ)()&&a.createElement(m.R,{userIdForTracking:c?.id,isCompact:!0}),a.createElement(j,{scalingInfo:(0,v.M9)(e),showHotspots:A,showDeviceFrame:R,org:d,livegraphData:I}),!(0,l.jc)()&&(!I||r.showProgressBar)&&a.createElement(O.z2,{editorType:T._Y.DESIGN,isViewer:!0,progressBarMode:o.Oin.HIDE_UI}),a.createElement(p.a,{flashes:n}),a.createElement(N.V,null),a.createElement(h.Z,{positioner:Y}),a.createElement(P.hG,null),_&&null,a.createElement(w.d,null,a.createElement(b.Ji,null))))}},70964:(e,r,n)=>{n.d(r,{Gv:()=>p,Uj:()=>u,ak:()=>m,iy:()=>h});var a,i=n(411855),o=n(629019),s=n.n(o),l=n(672517),c=n(414598),d=n(463206);let u=i.createContext(void 0);function m(e){return i.createElement("div",{className:s()(c.Qs,e.className)},e.children)}function p(e){let r={width:"300px"};return e.width&&("number"==typeof e.width?r.width=`${e.width}px`:r.width=e.width),e.height&&(r.height=e.height),e.margin&&(r.margin=e.margin),i.createElement(u.Consumer,null,n=>i.createElement("div",{className:s()(c.Dg,e.containerClassName)},i.createElement("img",{src:e.src,style:r,onLoad:n,alt:e.alt})))}function h(e){return i.createElement("div",{className:e.className?e.className:c.qr},e.children)}(a||(a={})).Content=function(e){return i.createElement("div",{className:e.className||c.xC,style:e.style},e.children)},(0,l.tf)(e=>i.createElement("a",{className:d.Be,href:e.href,target:"_blank",rel:"noopener",onClick:e.onClick},e.children))},121230:(e,r,n)=>{n.d(r,{j:()=>c});var a=n(411855),i=n(629019),o=n.n(i);n(946689);var s=n(259927),l=n(414598);function c(e){return a.createElement("div",{tabIndex:0,className:o()("mobile_shelf--background--Msmrp modal--modalBackground--PCmzN",s.Dm)},a.createElement("div",{className:o()("mobile_shelf--shelf--XNQ2O",l.Kb)},e.children))}},242872:(e,r,n)=>{var a=n(411855),i=n(188507);n(414507),n(629019),n(540193),n(358145),n(915440),n(776621),n(268537),n(946689),n(449124),n(163023),n(154254);var o=n(939863);n(392592),n(934533),n(67294),n(134279),n(738269),n(198123);var s=n(662275);n(931828),n(809831),n(226055),n(774442),n(396226),n(318812),n(335682),n(99506),n(279453),n(300874),n(851363),n(498606);var l=n(237870);n(377020),n(267850),n(733378),n(746806),n(449731);var c=n(63666),d=n(601538);(0,l.Ju)(function(){let e=(0,i.wA)();return a.createElement(c.OA,{targetKey:d.v4,title:"",dismissModal:()=>{e(s.AS())},ctaText:(0,o.t)("rcs.move_drafts_nudge.got_it"),onClickPrimaryCta:()=>{e(s.AS())},width:268},a.createElement("p",{className:"move_drafts_nudge_rcs_steps--bodyWithoutTitle--H7oik"},(0,o.tx)("rcs.move_drafts_nudge.now_that_you_ve_moved_this_file_to_projects_your_teammates_can_edit_and_collaborate_with_you")))},"MoveDraftsFeedbackModal")},936181:(e,r,n)=>{n.d(r,{x:()=>l});var a=n(411855),i=n(629019),o=n.n(i),s=n(775111);class l extends a.Component{componentDidMount(){this.interval=setInterval(()=>{this.forceUpdate()},1e3)}componentWillUnmount(){clearInterval(this.interval)}render(){let e=document.querySelector(`[data-onboarding-key=${this.props.target}]`);if(!e)return a.createElement("div",null);{let r=e.getBoundingClientRect();if(!e.offsetParent)return a.createElement("div",null);let n=r.left+r.width/2,i=r.top+r.height/2,l=o()(s.xl,{[s.Df]:this.props.isBrandColor});return a.createElement("div",{className:l,style:{top:i,left:n}})}}}l.displayName="RcsCallout"},601538:(e,r,n)=>{n.d(r,{G8:()=>o,ao:()=>i,oi:()=>s,v4:()=>a});let a="share",i={key:"figjamTrySave",value:"1"},o="FULLSCREEN_FILENAME_CONTAINER";var s=(e=>(e.PAN="PAN_PREFERENCE_ONBOARDING_KEY",e.ZOOM="ZOOM_PREFERENCE_ONBOARDING_KEY",e))(s||{})},15839:(e,r,n)=>{n.d(r,{LN:()=>a,M_:()=>u,No:()=>d,_L:()=>i,dZ:()=>c,q3:()=>l});var a=(e=>(e.TOP_RIGHT="top-right",e.CENTER="center",e.BOTTOM_LEFT="bottom-left",e.BOTTOM_RIGHT="bottom-right",e))(a||{}),i=(e=>(e.LEFT_TITLE="left_title",e.RIGHT_TITLE="right_title",e))(i||{}),o=(e=>(e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.RIGHT_TITLE=2]="RIGHT_TITLE",e[e.RIGHT_BODY=3]="RIGHT_BODY",e[e.LEFT_TITLE=4]="LEFT_TITLE",e))(o||{}),s=(e=>(e.FALLBACK="fallback",e.BEST_EFFORT="best_effort",e))(s||{}),l=(e=>(e.DRAGGABLE="draggable",e.FEATURE_UPDATE="feature_update",e.WELCOME="welcome",e.SELF_CONTAINED="self_contained",e.WALK_THROUGH="walk_through",e.ANNOUNCEMENT_POINTER="announcement_pointer",e.POINTER="pointer",e.MOBILE="mobile",e))(l||{}),c=(e=>(e.MODAL="modal",e.SHELF="shelf",e))(c||{});let d=740;var u=(e=>(e.ON_DARK="on_dark",e.ON_LIGHT="on_light",e.HIGH_CONTRAST="high_contrast",e.HIDDEN="hidden",e))(u||{})},653734:(e,r,n)=>{n.d(r,{i:()=>L});var a=n(411855),i=n(109388),o=n(629019),s=n.n(o),l=n(91408),c=n(860601),d=n(572206),u=n(799569),m=n(946689),p=n(511443),h=n(135876),_=n(271779),g=n(672517),f=n(746806),E=n(488578),y=n(63666),b=n(70964),I=n(936181),T=n(15839),v=n(121230),S=n(414598),w=n(837746);let A=(0,l.hG)(w.tui),N=(0,l.hG)(w.IKB),C=e=>null!==e?e:void 0;class L extends a.Component{constructor(e){super(e),this.renderIfDocumentComplete=()=>{"complete"===document.readyState&&this.forceRender()},this.getRcsKeyElementInterval=null,this.startScanningForRcsKeyElement=()=>{this.cleanUpRcsKeyElementScanner();let e=this.props.step;if(e.modalType===T.q3.DRAGGABLE){if(!e.onboardingKey){this.setState({rcsKeyLocation:null});return}this.getRcsKeyElementInterval=setInterval(()=>{let e=this.getRcsKeyElement();if(null!=e){let r=this.computeLocation(e.getBoundingClientRect());(null==this.state.rcsKeyLocation||this.state.rcsKeyLocation.top!==r.top||this.state.rcsKeyLocation.left!==r.left)&&this.setState({rcsKeyLocation:r})}else this.setState({rcsKeyLocation:null})},50)}},this.cleanUpRcsKeyElementScanner=()=>{null!=this.getRcsKeyElementInterval&&(clearInterval(this.getRcsKeyElementInterval),this.getRcsKeyElementInterval=null)},this.acceptHeight=e=>this.setState({modalHeight:e}),this.nextButtonRef=e=>{e&&(this.button=i.findDOMNode(e),this.focusButton())},this.focusButton=()=>{this.button&&!this.props.step.UNSAFE_disableFocus&&this.button.focus()},this.computeLocation=e=>{let r=this.props.step;if(r.modalType!==T.q3.DRAGGABLE)return{top:null,left:null,arrowRelativeX:null,arrowRelativeY:null,arrowPosition:null};if(r.pointDirection===T._L.LEFT_TITLE){let r=e.top+e.height/2;return{left:e.left+e.width+16,top:r-20,arrowRelativeX:-18,arrowRelativeY:f.uF/2-9,arrowPosition:f.F_.LEFT_TITLE}}if(r.pointDirection===T._L.RIGHT_TITLE){let r=e.top+e.height/2,n=e.left-this.width-16,a=f.uF/2-9;return{left:n,top:r-20,arrowRelativeX:this.width,arrowRelativeY:a,arrowPosition:f.F_.RIGHT_TITLE}}let n=e.left+e.width/2,a=e.bottom+18,i=n-this.width/2,o=n-(i=Math.min(i=Math.max(i,10),window.innerWidth-10-this.width)),s=f.F_.TOP;return null!=this.state.modalHeight&&window.innerHeight-a<this.state.modalHeight+12&&(a=e.top-this.state.modalHeight-12,s=f.F_.BOTTOM),{left:i,top:a,arrowRelativeX:o,arrowRelativeY:null,arrowPosition:s}},this.getFramePosition=()=>this.state.rcsKeyLocation?this.state.rcsKeyLocation:{top:null,left:null,arrowPosition:null,arrowRelativeX:null,arrowRelativeY:null},this.getRcsKeyElement=()=>{let e=this.props.step;if(e.modalType!==T.q3.DRAGGABLE)return null;let r=document.querySelector(`[data-onboarding-key=${e.onboardingKey}]`);if(!r)return null;let n=r.getBoundingClientRect();return 0===n.left&&0===n.right&&0===n.height&&0===n.width?null:r},this.acceptTitle=e=>{this.setState({title:e,titleSetByStep:this.props.step})},this.forceRender=()=>this.setState({renderCount:this.state.renderCount+1}),this.getPositionAndConstraints=(e,r)=>{let n=this.getFramePosition();if(n.top&&n.left)return{initialPosition:new d.Mi(n.left,n.top)};switch(e){case T.LN.BOTTOM_LEFT:return{initialPosition:r||new d.Mi(N,N),initialConstraints:{x:"left",y:"bottom"}};case T.LN.BOTTOM_RIGHT:return{initialPosition:r||new d.Mi(p.lc,16),initialConstraints:{x:"right",y:"bottom"}};case T.LN.TOP_RIGHT:return{initialPosition:r||new d.Mi(N,A+N),initialConstraints:{x:"right",y:"top"}};case T.LN.CENTER:default:return{initialPosition:r||new d.Mi(window.innerWidth/2-this.width/2,window.innerHeight/2-this.height/2)}}},this.state={modalHeight:328,rcsKeyLocation:null,renderCount:0}}componentDidMount(){window.addEventListener("beforeunload",this.props.onClose),this.startScanningForRcsKeyElement(),document.addEventListener("readystatechange",this.renderIfDocumentComplete)}componentWillUnmount(){this.props.onClose(),window.removeEventListener("beforeunload",this.props.onClose),document.removeEventListener("readystatechange",this.renderIfDocumentComplete),this.cleanUpRcsKeyElementScanner()}componentDidUpdate(e,r){this.focusButton();let n=this.props.step;if(n.modalType!==T.q3.DRAGGABLE)return;let a=e.step;(a.modalType!==T.q3.DRAGGABLE||n.onboardingKey&&n.onboardingKey!==a.onboardingKey)&&this.startScanningForRcsKeyElement()}get width(){let e=this.props.step;switch(e.modalType){case T.q3.FEATURE_UPDATE:return e.width||T.No;case T.q3.DRAGGABLE:return e.width||350;default:return 350}}get height(){return this.state.modalHeight||328}static getDerivedStateFromProps(e,r){return e.step!==r.titleSetByStep?{title:void 0,titleSetByStep:void 0}:{}}render(){let e=this.props.step,r=this.getFramePosition(),n={acceptTitle:this.acceptTitle,dismissModal:this.props.dismissModal,onClickPrimaryCta:this.props.onClickPrimaryCta,forceRender:this.forceRender},i=a.createElement(b.Uj.Provider,{value:this.forceRender},a.createElement(e.element,{...n}));return(0,g.T8)((()=>{switch(e.modalType){case T.q3.DRAGGABLE:let{initialPosition:n,initialConstraints:o}=this.getPositionAndConstraints(e.defaultLocation,e.initialPosition),l=e.title instanceof Function?e.title():e.title,d=this.state.title||l,p=e.onboardingKey||e.highlightOnlyKey;return a.createElement(a.Fragment,null,p&&!e.disableHighlight&&a.createElement(I.x,{target:p}),a.createElement(f.vx,{initialWidth:this.width,acceptHeight:this.acceptHeight,title:d,initialPosition:n,initialConstraints:o,arrowRelativeX:e.hideArrow?void 0:C(r.arrowRelativeX),arrowRelativeY:e.hideArrow?void 0:C(r.arrowRelativeY),arrowPosition:e.hideArrow?void 0:C(r.arrowPosition),animatedIn:!0,dragHeaderOnly:!!d,onClose:this.props.dismissModal,headerClassName:e.headerClassName,zIndex:e.zIndex,disableDragging:e.disableDragging},i,e.disableFooter?null:a.createElement(b.iy,{className:e.footerClassName},!e.hideStepCounter&&e.stepCounter&&a.createElement("div",{className:S.S},e.stepCounter),a.createElement("div",{className:S.v0},e.additionalButton&&a.createElement(m.NY,{className:S.lI,href:"link"===e.additionalButton.onClickBehavior?e.additionalButton.href:void 0,target:"link"===e.additionalButton.onClickBehavior?"_blank":void 0,onClick:"function"===e.additionalButton.onClickBehavior?()=>{e.additionalButton.onClick(this.props.dispatch),this.props.dismissModal()}:void 0,trackingProperties:e.additionalButton.textForTracking?{text:e.additionalButton.textForTracking()}:{}},e.additionalButton.label),a.createElement(m.vd,{ref:this.nextButtonRef,onClick:this.props.onClickPrimaryCta,className:S.lI,trackingProperties:{trackingDescriptor:e.ctaTrackingDescriptor},disabled:!!e.ctaIsLoading},a.createElement(h.x,{isLoading:!!e.ctaIsLoading,className:S.zP},()=>a.createElement("div",null,e.ctaText)))))));case T.q3.FEATURE_UPDATE:{let r=e.closeButtonStyle===T.M_.ON_DARK?S.oO:e.closeButtonStyle===T.M_.HIGH_CONTRAST?S.Db:e.closeButtonStyle===T.M_.ON_LIGHT?S.o:S.MD;return a.createElement(E.Nb,{className:`${S.yl} ${S.Kb}`,size:this.width,height:e.height,hide:this.props.dismissModal,disableClickOutsideToHide:e.disableClickOutsideToHide},i,e.closeButtonStyle!==T.M_.HIDDEN&&a.createElement(u.Jn,{innerText:"Close",className:r,onClick:()=>{this.props.additionalOnExplicitDismiss&&this.props.additionalOnExplicitDismiss(),this.props.dismissModal()}}))}case T.q3.MOBILE:if(e.type===T.dZ.SHELF)return a.createElement(v.j,null,i);return a.createElement(E.Nb,{className:`${S.yl} ${S.Kb} ${S.Yf}`,hide:this.props.dismissModal,disableClickOutsideToHide:!0,size:"mobile"},i,a.createElement(u.Jn,{innerText:"Close",className:S.iQ,onClick:()=>{this.props.additionalOnExplicitDismiss&&this.props.additionalOnExplicitDismiss(),this.props.dismissModal()}}));case T.q3.WALK_THROUGH:return a.createElement(a.Fragment,null,!e.disableHighlight&&a.createElement(I.x,{target:e.onboardingKey}),a.createElement(y.CR,{targetKey:e.onboardingKey,dismissModal:this.props.dismissModal,height:e.height,width:e.width,pointerForegroundColor:e.pointerForegroundColor,shouldCenterArrow:e.shouldCenterArrow,topPadding:e.topPadding,className:e.className,shouldDismissWhenLostDOMTarget:e.shouldDismissWhenLostDOMTarget,additionalOnExplicitDismiss:this.props.additionalOnExplicitDismiss,hideCloseButton:e.hideCloseButton,disableClickOutsideToHide:e.disableClickOutsideToHide},i));case T.q3.WELCOME:return a.createElement(a.Fragment,null,e.fullscreen&&a.createElement("div",{className:S.qg}),a.createElement(E.Nb,{className:s()(void 0!==e.fullscreen&&e.fullscreen?S.SV:S.Tw,e.className),size:"fitContent",hide:this.props.dismissModal,disableClickOutsideToHide:!0,disableKeyboardEventPropagation:!0,tintedModalBackground:void 0===e.tintedModalBackground||e.tintedModalBackground},a.createElement(_.i,{displayAs:_.C.Block},i)));case T.q3.SELF_CONTAINED:return i;case T.q3.POINTER:return a.createElement(a.Fragment,null,e.showHighlight&&a.createElement(I.x,{target:e.onboardingKey}),a.createElement(y.NJ,{dismissModal:this.props.dismissModal,targetKey:e.onboardingKey,width:e.width,topPadding:e.topPadding,shouldCenterArrow:e.shouldCenterArrow,shouldNotWrapInParagraphTag:e.shouldNotWrapInParagraphTag,arrowPosition:e.arrowPosition,onTargetLost:e.onTargetLost},i));case T.q3.ANNOUNCEMENT_POINTER:let g=e.title instanceof Function?e.title():e.title;return a.createElement(y.OA,{targetKey:e.onboardingKey,dismissModal:this.props.dismissModal,title:g,bottomLeftText:e.stepCounter,ctaText:e.ctaText,onClickPrimaryCta:this.props.onClickPrimaryCta,secondaryCtaText:e.secondaryCtaText,onClickSecondaryCta:e.preventDismissOnClickSecondaryCta?c.lQ:this.props.dismissModal,width:e.width,topPadding:e.topPadding,shouldCenterModal:e.shouldCenterModal,shouldCenterArrow:e.shouldCenterArrow,arrowPosition:e.arrowPosition},i)}})(),e.trackingContextName,e.trackingProperties,e.trackingEnabled)}}L.displayName="RcsFrame"},502242:(e,r,n)=>{n.d(r,{Qv:()=>y,RO:()=>E,we:()=>f});var a=n(411855);n(109388),n(188507),n(299321),n(275556),n(880934),n(904669);var i=n(629019),o=n.n(i);n(776250);var s=n(91408);n(966712),n(498750),n(153234),n(355819);var l=n(939863),c=n(175290);n(395281);var d=n(168039),u=n(959232);n(83909),n(44892),n(356390),n(848661),n(318812),n(144119),n(179243),n(158950),n(889449),n(184027);var m=n(759096);n(7959),n(538697);var p=n(137906),h=n(837746),_=n(71048);let g=2*(0,s.hG)(h.dGl);function f({selectedStyleProperties:e,snug:r}){let[n,i]=a.useState(!1),s=e.styleType,l="TEXT"===s,m="FILL"===s,h="dark"===(0,d.DP)(),{containerClassName:f,previewClassName:E}=a.useMemo(()=>({containerClassName:o()({[_.$9]:l,[_.vL]:!n&&m,[_.mj]:n&&m,[_.ig]:!l&&!m}),previewClassName:o()({[_.Lq]:!n,[_.s1]:n,[_.Gv]:!0,[_.Pj]:l,[_.SI]:l&&h,[_.hj]:m})}),[n,l,m,h]),y=a.useMemo(()=>{let e={};if(e.backgroundImage=`url('${(0,u.A)()}')`,!l)return m?n?e:void 0:e},[n,l,m]);return a.createElement(c.Y,{spacing:0,height:"hug-contents",padding:{left:m&&!r?g:0,right:m&&!r?g:0,top:m&&!r?g:0,bottom:r?0:g},verticalAlignItems:"start"},a.createElement("div",{style:y,className:f},e.url?a.createElement("img",{src:e.url,className:E,alt:"",onLoad:()=>{i(!0)}}):a.createElement(p.zi,{dsStyle:{style_type:e.styleType}})))}function E({selectedStyleProperties:e,recordingKey:r}){return a.createElement("div",null,"FILL"===e.styleType&&a.createElement(m.B8,{key:"fill",selectionProperties:e,recordingKey:r}),"GRID"===e.styleType&&a.createElement(m.tC,{key:"grids",selectionProperties:e,recordingKey:r}),"TEXT"===e.styleType&&a.createElement(m.gc,{key:"type",selectionProperties:e,recordingKey:r}),"EFFECT"===e.styleType&&a.createElement(m.w5,{key:"effects",selectionProperties:e,recordingKey:r}))}function y(e){switch(e){case"FILL":return(0,l.t)("design_systems.create_style.placeholder_name_color");case"TEXT":return(0,l.t)("design_systems.create_style.placeholder_name_text");case"EFFECT":return(0,l.t)("design_systems.create_style.placeholder_name_effect");case"GRID":return(0,l.t)("design_systems.create_style.placeholder_name_grid");default:return(0,l.t)("design_systems.create_style.placeholder_name_create_new_style_generic")}}(0,s.hG)(h.wQn)},255533:(e,r,n)=>{n.d(r,{Cj:()=>A});var a=n(411855),i=n(729064),o=n(629019),s=n.n(o),l=n(91408),c=n(886653),d=n(860601),u=n(946689),m=n(42962),p=n(976999),h=n(355819),_=n(154254),g=n(501114),f=n(672517),E=n(10648),y=n(269135),b=n(835981),I=n(467703),T=n(837746),v=n(950142);class S extends a.PureComponent{render(){let e=this.props.isReversed?"\u2191":"\u2193";return a.createElement("div",{className:`${b.LI} ${this.props.className||""}`,onClick:this.props.onClick,"data-onboarding-key":this.props.onboardingKey},this.props.nameElement?this.props.nameElement:this.props.name,this.props.isSelected&&a.createElement("div",{className:I.UE},e),this.props.extraContent)}}S.displayName="MultiSelectHeader";let w=(0,l.hG)(T.B6G);class A extends a.Component{constructor(e){super(e),this.rangeSelectAnchorRowKey=null,this.setScrollTopState=()=>{this.setState({scrollTop:this.nextScrollTop}),this.frameRequest=null},this.onScroll=e=>{this.nextScrollTop=e,null==this.frameRequest&&(this.frameRequest=requestAnimationFrame(this.setScrollTopState)),this.props.onScroll&&this.props.onScroll()},this.itemKeys=(0,c.xx)((e,r)=>e.map(e=>r(e))),this.selectableItemKeys=()=>{let e=this.itemKeys(this.props.items,this.props.getItemKey);return this.props.unselectableItemKeys?e.filter(e=>!this.props.unselectableItemKeys?.has(e)):e},this.toggleSelectMultiple=(e,r,n=!1)=>{this.rangeSelectAnchorRowKey=null;let a=this.props.onSelectedItemsChange??d.lQ;if(r){if(n)this.setState({selectedItemKeys:new Set,selectedAll:!1}),a([]);else{let r=new Set(this.state.selectedItemKeys);e.forEach(e=>r.delete(e)),this.setState(e=>({selectedItemKeys:r,selectedAll:e.selectedAll})),a(this.filterToSelected(this.props.items,r,this.props.unselectableItemKeys,this.props.getItemKey))}}else{let r=new Set([...e,...this.state.selectedItemKeys]);this.setState(e=>({selectedItemKeys:r,selectedAll:e.selectedAll||n})),a(this.filterToSelected(this.props.items,r,this.props.unselectableItemKeys,this.props.getItemKey))}},this.isItemSelected=e=>{let r=this.props.getItemKey(e);return this.state.selectedItemKeys.has(r)&&!this.props.unselectableItemKeys?.has(r)},this.toggleSelect=e=>{let r=this.props.getItemKey(e);if(this.props.unselectableItemKeys?.has(r))return;let n=new Set(this.state.selectedItemKeys);this.rangeSelectAnchorRowKey=r,this.isItemSelected(e)?n.delete(r):n.add(r),this.setState({selectedItemKeys:n}),this.props.onSelectedItemsChange&&this.props.onSelectedItemsChange(this.filterToSelected(this.props.items,n,this.props.unselectableItemKeys,this.props.getItemKey))},this.selectRowsInRange=(e,r,n)=>{if(e===r)return;let a=this.props.items.map(e=>this.props.getItemKey(e)).filter(e=>!this.props.unselectableItemKeys?.has(e)),i=a.indexOf(e),o=a.indexOf(r);if(-1===i||-1===o)return;let s=Math.min(i,o),l=Math.max(i,o),c=a.slice(s,l+1);n?this.toggleSelectMultiple(c,!0):this.toggleSelectMultiple(c,!1)},this.onRowClick=(e,r)=>{let n=this.props.getItemKey(r);if(!this.props.unselectableItemKeys?.has(n)){if(e.shiftKey){let e;if(1===this.state.selectedItemKeys.size?e=[...this.state.selectedItemKeys][0]:this.rangeSelectAnchorRowKey&&(e=this.rangeSelectAnchorRowKey),e&&e!==n){let r=this.state.selectedItemKeys.has(n);this.selectRowsInRange(e,n,r),this.rangeSelectAnchorRowKey=n;return}}this.toggleSelect(r)}},this.isFirstInSelectedGroup=e=>{let r=this.props.items[e],n=this.props.getItemKey(r);if(!this.state.selectedItemKeys.has(n))return!1;let a=this.props.items[e-1];if(!a)return!0;let i=this.props.getItemKey(a);return!this.state.selectedItemKeys.has(i)},this.isLastInSelectedGroup=e=>{let r=this.props.items[e],n=this.props.getItemKey(r);if(!this.state.selectedItemKeys.has(n))return!1;let a=this.props.items[e+1];if(!a)return!0;let i=this.props.getItemKey(a);return!this.state.selectedItemKeys.has(i)},this.rowWithCheckbox=(e,r,n)=>{let i=this.isItemSelected(e),o=this.props.getItemKey(e),l=s()(I.sM,this.props.styleOverrideClassNames?.unselectedCheckbox),c=this.props.itemBasedStyleOverride?this.props.itemBasedStyleOverride(e):void 0,u=s()(I.nM,this.props.styleOverrideClassNames?.row,c?.row),p=s()(this.props.styleOverrideClassNames?.selectedRow,c?.selectedRow),h=this.props.unselectableItemKeys?.has(o)?null:a.createElement(m.y,{className:i?void 0:l,allChecked:i,someChecked:!1,"data-onboarding-key":i?"msl_selected_row_onboarding_key":void 0,"data-testid":"multi-select-list-select-item-checkbox",onChange:e=>{}}),_=e.tooltipText,g=[];return this.props.shouldRoundBordersForSelectedRows&&(g.push(I.uH),i&&!this.isFirstInSelectedGroup(n)&&g.push(I.BA),i&&!this.isLastInSelectedGroup(n)&&g.push(I.D)),a.createElement(y.iA,{className:s()(I.nM,u,i?p:void 0,...g,{[I.I6]:o===this.props.highlightState?.itemKey}),selected:i,key:o,onClick:r=>this.onRowClick(r,e),tooltipText:_,useAdminTableStyles:!0,useUpdatedTableStyles:this.props.useUpdatedTableStyling,dataTestId:"multi-select-list-table-trackable-row"},a.createElement("div",{className:s()(I.E0,this.props.styleOverrideClassNames?.checkboxColumn)},h),this.props.columns.map(i=>a.createElement("div",{className:i.className,key:i.name},i.cellComponent(e,r,this.props.highlightState??{itemKey:null,setItemKey:d.lQ},n))))},this.renderLoadingRow=e=>{let r=0;return e<2?r=1:e<10&&(r=1-(e-2+1)/9),a.createElement("div",{key:e,style:{opacity:r},"data-testid":"multi-select-list-loading-row"},a.createElement(y.iA,{className:s()(I.nM,this.props.styleOverrideClassNames?.row),useAdminTableStyles:!0,useUpdatedTableStyles:this.props.useUpdatedTableStyling,dataTestId:"multi-select-list-table-loading-row"},a.createElement("div",{className:s()(I.E0,this.props.styleOverrideClassNames?.checkboxColumn)}),this.props.columns.map((r,n)=>r.name?a.createElement("div",{className:r.className,key:r.name},r.loadingComponent?r.loadingComponent:a.createElement("div",{style:g.sx.add({width:`${50*Math.abs(Math.sin(e+n+1))+30}%`}).$},a.createElement(p.Wi,{className:_.cx.h12.$,animationType:p.JR.SHIMMER}))):a.createElement("div",{key:r.name,className:s()(_.cx.wFull.$,r.className)}))))},this.filterToSelected=(0,c.xx)((e,r,n,a)=>e.filter(e=>r.has(a(e))&&!n?.has(a(e)))),this.state={scrollTop:0,selectedItemKeys:new Set,selectedAll:!1},this.stickBannerRef=a.createRef(),this.scrollContainerRef=a.createRef()}componentDidUpdate(e,r){if(e.sortState.columnName!==this.props.sortState.columnName||e.sortState.isReversed!==this.props.sortState.isReversed||e.items.length!==this.props.items.length){if(this.rangeSelectAnchorRowKey=null,(e.isLoading||this.props.isLoading)&&e.items.length<this.props.items.length&&this.state.selectedAll){let r=this.props.items.slice(e.items.length).map(e=>this.props.getItemKey(e));this.setState(e=>({selectedItemKeys:new Set([...e.selectedItemKeys,...r])}))}this.props.isLoading&&0===this.props.items.length&&this.state.selectedAll&&(this.setState({selectedItemKeys:new Set,selectedAll:!1}),this.props.onToggleSelectAll?.(!0))}}onHeaderClick(e){this.props.onSetSortState(e)}renderColumnHeaders(e){let r=e.length===this.selectableItemKeys().length,n=e.length>0,i=0===e.length;return a.createElement(y.Hj,{header:!0,useAdminTableStyles:!0,useUpdatedTableStyles:this.props.useUpdatedTableStyling,className:s()(this.props.disabled?I.eO:I.U1,this.props.styleOverrideClassNames?.header),dataTestId:"multi-select-list-table-header-row"},a.createElement("div",{className:s()(I.E0,this.props.styleOverrideClassNames?.checkboxColumn)},this.selectableItemKeys().length>0&&!this.props.selectAllDisabled&&a.createElement(m.y,{allChecked:r,"data-onboarding-key":"msl_header_toggle_select_all_onboarding_key",someChecked:n,onChange:()=>{i?(this.toggleSelectMultiple(this.selectableItemKeys(),!1,!0),this.props.onToggleSelectAll&&this.props.onToggleSelectAll(!1)):(this.toggleSelectMultiple(this.selectableItemKeys(),!0,!0),this.props.onToggleSelectAll&&this.props.onToggleSelectAll(!0))},"data-testid":"multi-select-list-select-all-checkbox"})),this.props.columns.map(e=>a.createElement("div",{className:e.className,key:e.name},a.createElement(S,{className:e.headerClassName,extraContent:e.headerExtraContent,name:e.name,nameElement:e.nameElement,isReversed:this.props.sortState.isReversed,isSelected:e.sorting_key?e.sorting_key===this.props.sortState.columnName:e.name===this.props.sortState.columnName,onClick:e.getSortValue?()=>this.onHeaderClick(e.sorting_key??e.name):void 0,onboardingKey:e.onboardingKey}))))}render(){let e=this.filterToSelected(this.props.items,this.state.selectedItemKeys,this.props.unselectableItemKeys,this.props.getItemKey),r=this.props.isBannerHeightDynamic?{top:this.stickBannerRef?.current?.getBoundingClientRect()?.height||0}:void 0,n=this.props.isLoading&&0===this.props.items.length,i=this.props.trackingProperties?this.props.trackingProperties.batchAction:{};return a.createElement(a.Fragment,null,a.createElement(C,{anyVisibleAndSelectedItems:e.length>0,highlightState:this.props.highlightState}),a.createElement("div",{className:s()(I.wY,{[I.TH]:this.props.hasNewScrollContext},this.props.styleOverrideClassNames?.tableWrapper)},a.createElement(h.P,{className:I.jG,innerClassName:s()(I.NM,this.props.scrollContainerInnerClassName),onScroll:this.onScroll,minContentWidth:this.props.minContentWidth||(0,l.hG)(T.fAD),scrollContainerRef:this.scrollContainerRef,scrollContentRef:this.props.scrollContentRef,scrollingDisabled:n,horizontalScrollingDisabled:this.props.hasNewScrollContext,scrollBarAlways:this.props.scrollBarAlwaysVisible},a.createElement(a.Fragment,null,a.createElement("div",{ref:this.stickBannerRef,className:I.ln},this.props.stickyBanner),a.createElement("div",null,this.props.scrollAwayContent),a.createElement("div",{className:void 0!==this.props.stickyBanner?I.T3:I.ln,style:r},a.createElement(f.fu,{name:"MultiSelectList Header",trackingTargets:E.K.NONE,properties:{tableType:this.props.itemTypeContext.itemType}},this.props.stickyContent),!this.props.hideHeader&&this.renderColumnHeaders(e)),0===this.props.items.length&&!this.props.isLoading&&a.createElement("div",{className:I.p$},this.props.emptyContent),a.createElement(f.fu,{name:"MultiSelectList - Row",trackingTargets:E.K.RCS,properties:{tableType:this.props.itemTypeContext.itemType}},a.createElement(N,{totalLoaded:this.props.items.length,isLoading:!!this.props.isLoading,disabled:!!this.props.disabled,renderLoadingRow:e=>this.renderLoadingRow(e),renderItem:r=>this.rowWithCheckbox(this.props.items[r],e.length>0,r),scrollContainerRef:this.scrollContainerRef,onFetchMore:this.props.onFetchMore,rowHeight:this.props.rowHeightOverride??w,paddingEnd:this.props.paddingEnd||32})))),this.props.actionBar&&a.createElement(f.fu,{name:"MultiSelectList BatchAction",trackingTargets:E.K.RCS,properties:{selectedAll:this.state.selectedAll,selectedCount:e.length,...i}},a.createElement("div",{className:e.length>0?I._Z:I.KY,"data-testid":"multi-select-list-action-bar"},a.createElement("div",{className:s()(e.length>0?I.SB:I.cr,this.props.actionBarClassName)},a.createElement("div",{className:I.SM},this.props.itemTypeContext.getSelectedCountString(this.props.getTotalSelected?this.props.getTotalSelected(e,this.selectableItemKeys()):e.length)),this.props.actionBar(e),a.createElement(u.RW,{className:s()(I.Ym,this.props.styleOverrideClassNames?.batchActionClearButton),svg:v.A,onClick:()=>{this.toggleSelectMultiple(this.selectableItemKeys(),!0,!0),this.props.onToggleSelectAll&&this.props.onToggleSelectAll(!0)},trackingProperties:{action:"Clear Selection"}}))))),this.props.footer&&this.props.footer(e))}}function N({totalLoaded:e,isLoading:r,disabled:n,renderItem:o,renderLoadingRow:s,scrollContainerRef:l,onFetchMore:c,rowHeight:d,paddingEnd:u}){let m=a.useCallback(()=>d,[d]),{virtualItems:p,totalSize:h}=(0,i.z)({size:r||c?e+10:e,parentRef:l,overscan:15,estimateSize:m,paddingEnd:u||32});return a.useEffect(()=>{let r=p[p.length-1];e&&c&&r?.index>=e-1&&c()},[c,e,p]),a.createElement("div",{className:`${n?I.ry:I.jm}`,style:{height:h}},p.map(r=>a.createElement("div",{key:r.index,style:{position:"absolute",top:r.start,left:0,width:"100%",height:r.size}},r.index>=e?s(r.index-e):o(r.index))))}function C(e){let{anyVisibleAndSelectedItems:r,highlightState:n}=e;return a.useLayoutEffect(()=>{r&&n?.itemKey&&(0,n.setItemKey)(null)},[r,n?.itemKey,n?.setItemKey]),null}A.displayName="MultiSelectList"},548593:(e,r,n)=>{n.d(r,{pG:()=>f,rw:()=>y});var a=n(411855),i=n(188507),o=n(629019),s=n.n(o),l=n(738269),c=n(467594),d=n(298543),u=n(914557),m=n(372464),p=(e=>(e.DEFAULT="default",e.ADMIN_SETTINGS="adminSettings",e))(p||{});class h extends u.o{constructor(){super(...arguments),this.styleOverrides=()=>({base:m.zP})}}class _ extends u.o{constructor(){super(...arguments),this.styleOverrides=()=>({base:m.NQ,selected:m.xW})}}class g extends a.PureComponent{constructor(e){super(e),this.shouldShowDropdown=()=>!!(this.props.dropdownKey&&this.props.dropdownShown&&this.props.dropdownShown.type===this.props.dropdownKey&&this.props.dropdownShown.data&&this.props.dropdownShown.data.targetRect),this.toggleDropdown=()=>{let e=this.dropdownRef.current;this.props.dropdownKey&&e&&(this.props.dropdownShown?this.props.dispatch(l.oB()):this.props.dispatch(l.j7({type:this.props.dropdownKey,data:{targetRect:e.getBoundingClientRect()}})))},this.getTabClassWithStyling=()=>"adminSettings"===this.props.variant?_:h,this.dropdownRef=a.createRef()}render(){let e=this.getTabClassWithStyling();return a.createElement(e,{tab:this.props.tab,selectedTab:this.props.selectedTab,onClick:this.props.onClick??this.toggleDropdown,disabled:this.props.disabled,tooltipText:this.props.tooltipText,showTooltipWhenDisabled:this.props.showTooltipWhenDisabled,dataText:this.props.dataText},a.createElement("span",{ref:this.dropdownRef,className:m.Y1,"data-onboarding-key":this.props["data-onboarding-key"]},this.props.children),this.props.dropdownKey&&a.createElement(a.Fragment,null,a.createElement(c.c,{showingDropdown:this.shouldShowDropdown(),dropdownKey:this.props.dropdownKey,dispatch:this.props.dispatch,className:s()(m.ai,this.props.chevronClassName),svgContainerClassName:m.hq}),this.shouldShowDropdown()&&a.createElement(d.Cf,{targetRect:this.props.dropdownShown.data.targetRect,lean:"right",minWidth:120,propagateCloseClick:!0},this.props.dropdownOptions)))}}let f=g.name,E=e=>({dropdownShown:e.dropdownShown});function y(){return(0,i.Ng)(E)(g)}},436128:(e,r,n)=>{n.d(r,{W:()=>f});var a=n(411855),i=n(188507),o=n(96328),s=n(939863),l=n(198371),c=n(611978),d=n(860178),u=n(416822),m=n(668860),p=n(637590),h=n(498606),_=n(222928);function g(e,r,n){let a=(0,o.EJ)(e,25),i=n?function(e){switch(e){case m.e6.OWNER:return" (owner)";case m.e6.ADMIN:return" (admin)";default:return""}}(n):"";return r?(0,s.t)("avatar.tooltip.current_user_handle",{handle:a,roleName:i}):(0,s.t)("avatar.tooltip.other_user_handle",{handle:a,roleName:i})}function f(e){let r=(0,d.iZ)(),n=(0,i.d4)(e=>e.multiplayer),o=(0,u.q)(),s="user"in e?`user-${e.user.id}`:`role-${e.role.id}`,m="user"in e?e.user:e.role.user,f=!1,E="sessionId"in m&&m.sessionId===n.sessionID;r?f=m.id===r.id:"sessionId"in m&&(f=E);let y="role"in e?g(m.handle,f,e.role.level):g(m.handle,f),b=function(e){let r=(0,d.iZ)();return function(e){let{localUser:r,tooltipUser:n,multiplayer:a,isInWorkshop:i,selectedView:o}=e,s=n.id?.includes("VISITOR-")||!n.id,l=-1!==a.sessionID,c="sessionId"in n&&n.sessionId===a.sessionID,d="sessionId"in n&&n.sessionId===a.presenterSessionID,u="sessionId"in n&&a.observingSessionID===n.sessionId;return!l||(0,p.QB)(o)?s?"none":"view-profile":c?s||!r?i?"edit-name":"none":d?"stop-presenting":"none":d&&!u?"follow-presenter":u?"stop-observe":"start-observe"}({localUser:r,tooltipUser:e,multiplayer:(0,i.d4)(e=>e.multiplayer),isInWorkshop:(0,l.$D)(),selectedView:(0,c._6)()})}(m),I=`/files${o}/user/${m.id}`;return a.createElement("div",{id:e.id,key:`avatar-${s}`,"data-tooltip-type":h.Ib.SPECIAL,"data-tooltip":_.M,"data-tooltip-user-handle":y,"data-tooltip-user-session-id":"sessionId"in m?m.sessionId:void 0,"data-tooltip-timeout-delay":150,"data-tooltip-user-profile-url":I,"data-tooltip-click-action":b,"data-tooltip-max-width":300,"data-tooltip-offset-y":e.tooltipOffsetY??8,"data-tooltip-interactive":!0,style:{display:"inherit"}},e.children)}},527429:(e,r,n)=>{n.d(r,{$:()=>o,V:()=>s});var a=n(542367);let i=/https?:\/\/(?![\w.-]+\.(?:auto|map|center)[^\w.-]?)\S*/i;function o(e){try{return new URL(e),!0}catch(e){return!1}}function s(e){return a.I6(e,"url").concat(a.I6(e,"email")).filter(e=>!!o(e.href)&&i.test(e.href))}},607e3:(e,r,n)=>{n.d(r,{bx:()=>V,xi:()=>D});var a=n(411855),i=n(188507),o=n(45623),s=n(91408),l=n(966712),c=n(281381),d=n(163023),u=n(46481),m=n(348425),p=n(758297),h=n(154254),_=n(939863),g=n(392592),f=n(507877),E=n(697551),y=n(935308),b=n(411916),I=n(594901),T=n(860178),v=n(99506),S=n(728587),w=n(299211),A=n(457152),N=n(242983),C=n(838706),L=n(471174),O=n(819692),R=n(646351),P=n(247866);let D="FILE_BROWSER_WORKSPACE_SWITCHER",k="ACCOUNT_SWITCHING_COMMUNITY_ONBOARDING_KEY",M=(0,s.hG)(N.nZ),F=(0,s.hG)(N.Qr),x=(0,s.hG)(N.sw),U=(0,s.hG)(N.vj)+2*(0,s.hG)(N.xX),B=U+1;function V(){let e=(0,i.wA)(),r=(0,i.d4)(e=>e.dropdownShown?.type===D),n=(0,i.d4)(e=>e.selectedView),s=(0,i.d4)(e=>e.dropdownShown?.data?.targetRect),N=(0,i.d4)(e=>e.authedUsers),V=(0,i.d4)(e=>e.authedProfilesById),G=(0,I.FC)(),H=(0,T.Pc)(),W=(0,b.U8)(G,N.orderedIds),K=(0,i.d4)(e=>e.orgUsersByOrgId),Y=(0,i.d4)(e=>e.orgById),$=(0,i.d4)(e=>e.authedTeamsById),j=(0,i.d4)(e=>e.authedActiveCommunityProfile),z=(0,E.UP)(),q=(0,i.d4)(e=>Object.keys(e.authedProfilesById).some(r=>!!e.authedProfilesById[r].org_id||!!e.authedProfilesById[r].team_id)),X=(0,i.d4)(e=>e.userNotifications.communityProfileBellStates),J=(0,w.m)(),Z=(0,i.d4)(e=>e.teamFeedBellStates),Q=(0,l.kc)().ps_benchmark;a.useEffect(()=>{Q&&(0,y.nm)()(e).catch(r=>{let n=r?.data?.message||(0,_.t)("file_browser.error_try_again");e(g.F.enqueue({message:n,type:"error"}))})},[e,Q]);let ee=()=>{let r=[];return N.orderedIds.forEach(n=>{let i=N.byId[n];if(!i)return;r=r.concat([{displayText:i.email,optionHeight:U,icon:a.createElement("span",{className:C.PN}),disabled:!0}]);let o=i.plans?.map(r=>{let n={userId:i.id,orgId:r.is_org?r.plan_id:null,teamId:r.is_org?null:r.plan_id},o=b.O_(G,n),s=!!r.is_guest,d=n.orgId&&!s&&l.kc().xr_debounce_threshold?{view:"teamFeed"}:{view:"recentsAndSharing"};return{displayText:r.name,optionHeight:B,itemBadge:s?a.createElement(c.Ex,{className:C.qS,text:_.t("navbar.navbar.guest"),color:c.zE.INVERT,subtle:!0}):void 0,icon:a.createElement(p.n,{className:h.cx.mr8.$,userId:n.userId,orgId:n.orgId,teamId:n.teamId}),isActive:o,isChecked:o,className:C.jx,callback:()=>e(f._l({workspace:n,view:d})),activeClassName:C.sI}})||[];r=(r=r.concat(o)).concat([{displayText:"",disabled:!0,separator:!0}])}),r};return a.createElement(a.Fragment,null,r&&a.createElement(S.j,{showPoint:!0,showCheckmarkOnRight:!0,lean:"left",leanPadding:M,items:(()=>{if(Q)return ee();let r=[];return N.orderedIds.forEach(n=>{let i=N.byId[n];r=(r=(r=r.concat([{displayText:i.email,optionHeight:U,icon:a.createElement("span",{className:C.PN}),disabled:!0}])).concat(W[n].map(r=>{let n=(0,b.HE)(G,r),s=!z&&(0,b.O_)(G,r),l=!r.orgId,d=!1;r.orgId&&K[r.orgId]&&(d=K[r.orgId][r.userId]?.permission===v._D.GUEST);let m=J?.[r.userId]?.[r.orgId||"0"],h=Z[r.orgId||"0"],g=a.createElement(u.U,{svg:P.A},a.createElement(o.Z,null));return{displayText:n,optionHeight:B,badge:d?a.createElement(c.Ex,{className:C.qS,text:(0,_.t)("navbar.navbar.guest"),color:c.zE.INVERT,subtle:!0}):void 0,icon:a.createElement("div",{className:C.aS},(m||h)&&a.createElement("div",{className:C.e3}),a.createElement(p.n,{userId:r.userId,orgId:r.orgId})),subText:l&&i.external_restricted_org_id?(0,_.t)("navbar.workspaces.disabled_by_your_admins"):void 0,alternativeRightIconIfNotChecked:l&&i.external_restricted_org_id?g:void 0,isActive:s,isChecked:s,className:C.jx,activeClassName:C.sI,callback:()=>e(f._l({workspace:r})),"data-onboarding-key":l?"ACCOUNT_SWITCHING_PERSONAL_ONBOARDING_KEY":void 0}}))).concat([{displayText:"",disabled:!0,separator:!0}])}),r})().concat((()=>{let r=!!X&&Object.values(X).some(e=>e),i=(0,A.s)(N.byId,z,H,Y,$,V,X,j,n,e);if(i.length>1){let e=[{displayText:q?"":(0,_.t)("navbar.community.browse_community_workspace_switcher_label"),optionHeight:U,itemBadge:q?a.createElement("div",{className:C.zS},(0,_.tx)("navbar.community.browse_community_workspace_switcher_label"),a.createElement("a",{href:"https://help.figma.com/hc/articles/4404108672663",target:"_blank",className:C.P2},a.createElement(d.B,{svg:L.A,className:C.E3}))):void 0,icon:a.createElement("span",{className:C.s9}),disabled:!0}];return[{displayText:(0,_.t)("navbar.community.community_label"),optionHeight:U,icon:a.createElement("div",{className:C.aS},r&&a.createElement("div",{className:C.e3}),a.createElement(m.t,{svg:O.A,fallbackSvg:R.A})),onMouseEnter:()=>(0,E.nR)("submenu",n.view),className:C.uK,children:e.concat(i),activeClassName:C.sI,"data-onboarding-key":k}]}if(1!==i.length)return[];{let e=i[0];return[{displayText:(0,_.t)("navbar.community.community_label"),sideText:e.sideText,rightJustifySideText:!0,optionHeight:U,icon:a.createElement("div",{className:C.aS},r&&a.createElement("div",{className:C.e3}),a.createElement(m.t,{svg:O.A,fallbackSvg:R.A})),activeClassName:C.sI,isActive:e.isActive,isChecked:e.isChecked,className:C.uK,callback:e.callback,"data-onboarding-key":k}]}})()),onSelectItem:(r,n)=>{r.callback&&r.callback("",null,e)},parentRect:s,dispatch:e,minWidth:F,rootAndSubmenuMaxWidth:x}))}},656839:(e,r,n)=>{(0,n(38580).eU)(null)},37112:(e,r,n)=>{n(414507),n(880934),n(966712),n(752553),n(776621),n(696673),n(848661),n(335682),n(416095),n(279453),n(921199),n(875387),n(705129),n(656839);var a=(e=>(e[e.Continue=0]="Continue",e[e.SkipChildren=1]="SkipChildren",e[e.Stop=2]="Stop",e))(a||{})},593400:(e,r,n)=>{n(411855),n(188507),n(966712),n(915440),n(29680),n(335682),n(279453),n(284321),n(234945),n(388094),n(656839),n(37112)},608145:(e,r,n)=>{n.d(r,{dJ:()=>p});var a=n(414507),i=n(925998),o=n(467212),s=n(776250),l=n(517333),c=n(966712),d=n(776621),u=n(369351);let m="granted";class p{constructor(){this.permissionRequestMade=!1;let e=(0,c.Ay)().firebase_cloud_messaging_browser_notifications;this.config={apiKey:e?.api_key,authDomain:e?.auth_domain,projectId:e?.project_id,storageBucket:e?.storage_bucket,messagingSenderId:e?.messaging_sender_id,appId:e?.app_id},this.vapidKey=e?.vapid_id;let r=(0,i.Wp)(this.config);this.messaging=(0,o.dG)(r);try{this.registerOnMessageListener(),this.updateServiceWorkerOnPermissionChange()}catch(e){(0,d.$D)(a.FigmaTeam.WAYFINDING,Error("An issue was encountered while instantiating Firebase Messaging Service"))}}static getInstance(){return p.instance??=new p,p.instance}registerServiceWorker(){return navigator.serviceWorker.register(Fig.firebaseMessagingServiceWorkerURL,{type:"module"})}getServiceWorkerRegistration(){return navigator.serviceWorker.getRegistration(Fig.firebaseMessagingServiceWorkerURL)}registerOnMessageListener(){(0,o.xD)(this.messaging,async e=>{if(!e.data||!e.data.title||!e.data.body)return;let r=await this.getServiceWorkerRegistration(),n=e.data,a=n.title,i={body:n.body,data:{url:n.open_url}};r?.showNotification(a,i)})}async updateServiceWorkerOnPermissionChange(){if("granted"!==(await navigator.permissions.query({name:"notifications"})).state)this.unregisterServiceWorkerWhenPermissionDenied();else{let e=await this.getServiceWorkerRegistration();e?(this.sendConfigToServiceWorker(e),this.retrieveAndSendToken(e)):this.registerServiceWorkerWhenPermissionGranted()}}async unregisterServiceWorkerWhenPermissionDenied(){let e=await this.getServiceWorkerRegistration();e?.unregister()}sendConfigToServiceWorker(e){e.active?.postMessage({type:"FIREBASE_CONFIG",config:this.config})}async retrieveAndSendToken(e){let r=e??await this.getServiceWorkerRegistration(),n=await (0,o.gf)(this.messaging,{vapidKey:this.vapidKey,serviceWorkerRegistration:r});u.sr.sendFirebaseToken({firebaseToken:n}),s.az.trackDefinedEvent("notification.firebase_token_registered",{})}async registerServiceWorkerWhenPermissionGranted(){let e=await this.registerServiceWorker();this.retrieveAndSendToken(e)}async shouldRequestPermission(){try{if(!("Notification"in window)||!("serviceWorker"in navigator)||!("PushManager"in window))return!1;let[e,r]=await Promise.all([navigator.permissions.query({name:"notifications"}),this.getServiceWorkerRegistration()]);if("granted"===e.state){r?.update();let e=!!r;return e&&this.retrieveAndSendToken(r),!e}if("denied"===e.state)return!1;return!0}catch(e){return!1}}async requestPermission(){let e=await Notification.requestPermission();if("granted"===e){let e=await this.registerServiceWorker();return{status:m,token:await (0,o.gf)(this.messaging,{vapidKey:this.vapidKey,serviceWorkerRegistration:e})}}return"denied"===e?{status:"denied"}:{status:"unknown"}}static createInstance(){return this.getInstance()}static async requestPushNotifications(){if(!(0,c.kc)().browser_notifications||l.eD)return;let e=p.getInstance();if(await e.shouldRequestPermission()&&!e.permissionRequestMade){e.permissionRequestMade=!0;try{let r=await e.requestPermission();r.status===m?(u.sr.sendFirebaseToken({firebaseToken:r.token}),s.az.trackDefinedEvent("notification.firebase_token_registered",{})):s.az.trackDefinedEvent("notification.firebase_token_registration_blocked",{status:r.status})}catch(e){(0,d.$D)(a.FigmaTeam.WAYFINDING,Error("Could not request permission for firebase token")),s.az.trackDefinedEvent("notification.firebase_token_registration_failed",{})}}}}},878227:(e,r,n)=>{n.d(r,{X:()=>u,v:()=>m});var a=n(966712),i=n(259829),o=n(563706);let s=o.XN?"iPadOS":o.Ay.osname,l=o.XN?0:+o.Ay.osversion;function c(e){let r=window.navigator.languages||[];return e<r.length?r[e]:void 0}let d={browser_name:o.Ay.name,browser_version:+o.Ay.version,os_name:s,os_version:l,release:a.tl().release_manifest_git_commit,release_tag:a.tl().release_git_tag,page_locale:a.mm()[0],navigatorLanguage1:c(0),navigatorLanguage2:c(1),navigatorLanguage3:c(2),navigatorLanguages:(window.navigator.languages||[]).join(","),uiVersion:(0,i.fF)()};function u(){return d}function m(e){d={...d,...e}}},966159:(e,r,n)=>{n.d(r,{Mx:()=>m,NY:()=>c,Ok:()=>s,uW:()=>d,ux:()=>l,xj:()=>p,yx:()=>u});var a=n(586459);let i={status:a.r.INIT},o={status:a.r.LOADING};function s(){return i}function l(){return o}function c(e){return{status:a.r.SUCCESS,value:e}}function d(e){return{status:a.r.FAILURE,error:e}}function u(e){return e.status===a.r.INIT}function m(e){return e.status===a.r.LOADING}function p(e){return e.status===a.r.SUCCESS}},627776:(e,r,n)=>{n.d(r,{Fe:()=>p,GH:()=>_,ce:()=>d,cm:()=>m}),n(411855);var a=n(776250),i=n(878227),o=n(38580),s=n(374626),l=n(563706),c=n(776621);function d(){return!!(l.Ay.chromeos&&window.matchMedia("(display-mode: tabbed)").matches)}let u=/^\/(files|idle_timeout|ip_account_restriction|my_plugins|user|org|team)(\/.*)?$/;function m(e){return u.test(e)||"/"===e||""===e}function p(e){document.body.style.backgroundColor="#2c2c2c"}let h=(0,o.eU)(null);function _(){g(),l.Ay.chromeos&&l.Ay.chrome&&(window.matchMedia("(display-mode: tabbed)").addEventListener("change",()=>{d()&&(p("dark"),g())}),window.addEventListener("appinstalled",()=>{(0,a.sx)("chrome_os_app_installed")}),window.addEventListener("beforeinstallprompt",e=>{s.zl.set(h,e)}))}function g(){let e=d();(0,c.kF)("chrome_os_app",e),e&&(0,i.v)({browser_name:"Figma ChromeOS App"})}},568214:(e,r,n)=>{n.d(r,{$q:()=>g,AW:()=>P,Bx:()=>U,DA:()=>J,FN:()=>c,FO:()=>h,F_:()=>x,G$:()=>O,GL:()=>L,H0:()=>E,HD:()=>N,HL:()=>A,J1:()=>V,UE:()=>l,Uv:()=>s,X9:()=>f,YN:()=>m,YR:()=>X,YU:()=>F,_W:()=>T,di:()=>w,e3:()=>u,kx:()=>Z,mx:()=>b,ol:()=>d,ql:()=>R,sN:()=>D,tK:()=>y,tM:()=>p,ty:()=>C,x1:()=>_,yi:()=>B});var a=n(424587),i=n(23334),o=n(719720);let s={r:0,g:0,b:0,a:1},l={r:1,g:1,b:1,a:1},c=l;var d=(e=>(e.MULTIPLAYER_GRAY="#667799",e.MULTIPLAYER_BLUE="#007BE5",e.MULTIPLAYER_PURPLE="#9747FF",e.MULTIPLAYER_PINK="#FF24BD",e.MULTIPLAYER_RED="#F24822",e.MULTIPLAYER_YELLOW="#FFCD29",e.MULTIPLAYER_GREEN="#14AE5C",e))(d||{});let u="var(--color-textondarkcanvas, #ffffff)",m="var(--color-textonlightcanvas, #000000)",p="inset 0px 0px 0px 1px rgba(255, 255, 255, 0.15)",h="inset 0px 0px 0px 1px rgba(0, 0, 0, 0.1)",_="inset 0px 0px 0px 2px var(--color-bordertranslucent)",g={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function f(e,r){return{...e,a:r}}function E(e,r){if(!e)return null;if("string"!=typeof e)return e;let n=null!=r,a=r??1;return function(e,r=1){let n=e.match(/color\(\s*display-p3\s*(?<red>[-+]?[0-9]*\.?[0-9]+)\s+(?<green>[-+]?[0-9]*\.?[0-9]+)\s+(?<blue>[-+]?[0-9]*\.?[0-9]+)\s*(?:\/\s*(?<alpha>[-+]?[0-9]*\.?[0-9]+%?))?\s*\)/);if(n&&n.groups&&"red"in n.groups&&"green"in n.groups&&"blue"in n.groups){let{red:e,green:a,blue:i,alpha:o}=n.groups;return{r:parseFloat(e),g:parseFloat(a),b:parseFloat(i),a:o?parseFloat(o):r}}return null}(e,a)??w(e,a)??b(e,a)??y(e,n,a)??null}function y(e,r=!1,n=1){let a=/[^0-9a-f]*([0-9a-f]*)/i.exec(e.trim());if(!a)return null;let i=a[1];if(i.length>=8&&r)return k(H(i.substring(0,2)),H(i.substring(2,4)),H(i.substring(4,6)),H(i.substring(6,8)));if(7===i.length&&r)return k(H(i.substring(0,2)),H(i.substring(2,4)),H(i.substring(4,6)),G(i[6]));if(i.length>=6)return k(H(i.substring(0,2)),H(i.substring(2,4)),H(i.substring(4,6)),n);if(5===i.length&&r)return k(G(i[0]),G(i[1]),G(i[2]),H(i.substring(3,5)));if(4===i.length&&r)return k(G(i[0]),G(i[1]),G(i[2]),G(i[3]));if(i.length>=3)return k(G(i[0]),G(i[1]),G(i[2]),n);if(2===i.length){let e=H(i);return k(e,e,e,n)}else if(1===i.length){let e=G(i);return k(e,e,e,n)}return null}function b(e,r=1){let n;return(n=Q.exec(e=e.trim()))?k(K(n[1]),K(n[2]),K(n[3]),null==n[4]?r:$(n[4])):(n=ee.exec(e))?k(W(n[1]),W(n[2]),W(n[3]),null==n[4]?r:$(n[4])):(n=et.exec(e))?function(e,r,n,a){if(0===r)return k(n,n,n,a);let i=n<.5?n*(1+r):n+r-n*r,o=2*n-i,s=[0,0,0];for(let r=0;r<3;++r){let n=e+-(1/3*(r-1));n<0&&++n,n>1&&--n,6*n<1?s[r]=o+(i-o)*6*n:2*n<1?s[r]=i:3*n<2?s[r]=o+(i-o)*(2/3-n)*6:s[r]=o}return k(s[0],s[1],s[2],a)}(j(n[1]),K(n[2]),K(n[3]),null==n[4]?r:$(n[4])):(n=er.exec(e))?function(e,r,n,a){let i=(100*e+16)/116,o=r/500+i,s=i-n/200,l=e=>{let r=e**3;return r>I?r:(e-16/116)/7.787};i=l(i);let c=e=>e>.0031308?1.055*e**(1/2.4)-.055:12.92*e,d=c(3.2404542*(o=95.047*l(o)/100)+-1.5371385*i+-.4985314*(s=108.883*l(s)/100)),u=c(-.969266*o+1.8760108*i+.041556*s),m=c(.0556434*o+-.2040259*i+1.0572252*s);return k(q(d),q(u),q(m),a)}(K(n[1]),parseFloat(n[2]),parseFloat(n[3]),null==n[4]?r:$(n[4])):(n=en.exec(e))?(0,i.I0)({l:Y(n[1],.01),c:Y(n[2],.004),h:j(n[3]),a:null==n[4]?r:$(n[4])}):(n=ea.exec(e))?(0,i.oq)({l:Y(n[1],.01),ax:Y(n[2],.01),bx:parseFloat(n[3]),a:null==n[4]?r:$(n[4])}):null}let I=(6/29)**3;function T(e,r){return S(v(e),v(r))/.002741735}let v=e=>{let r,n,a,i=1-(1-e.r/255)*e.a,o=1-(1-e.g/255)*e.a,s=1-(1-e.b/255)*e.a;return r=(.4124*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.3576*(o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92)+.1805*(s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92))/.95047,n=(.2126*i+.7152*o+.0722*s)/1,a=(.0193*i+.1192*o+.9505*s)/1.08883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,{l:116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,a:500*(r-n),b:200*(n-(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116))}},S=(e,r)=>{let n=e.l-r.l,a=e.a-r.a,i=e.b-r.b,o=Math.sqrt(e.a*e.a+e.b*e.b),s=o-Math.sqrt(r.a*r.a+r.b*r.b),l=a*a+i*i-s*s,c=n/1,d=s/(1+.045*o),u=(l=l<0?0:Math.sqrt(l))/(1+.015*o),m=c*c+d*d+u*u;return m<0?0:Math.sqrt(m)};function w(e,r=1){let n=g[e.toLowerCase()];return n?y(n,!1,r):null}function A(e){return{r:z(e.r),g:z(e.g),b:z(e.b),a:z(e.a)}}function N(e,r=.627){let n=E(e);return!!n&&V(n)<r}function C(e){if(!e)return!0;let r=E(e);return!r||r?.a===0}function L(e){return N(e)?u:m}function O(e){return N(e)?"var(--color-textondarkcanvassecondary, rgba(255,255,255,0.6))":"var(--color-textonlightcanvassecondary, rgba(0,0,0,0.6))"}function R(e,r,n){let a=E(e),i=E(r);if(!a||!i)return;let o=D(a,i),s=V(a),l=V(o);if(n){let e=V(i);return"light"===n&&e>.9||"dark"===n&&e<.25?_:void 0}return s<.2&&l<s+.1?p:s>.8&&.1>Math.abs(l-s)?h:void 0}function P(e=[]){function r(e){return null!=e}let n=e.map(e=>{if("SOLID"===e.type)return e.color;let n=(e.stops??[]).map(e=>e.color).filter(r);if(n.length)return D(...n)}).filter(r);return n.length?D(...n):void 0}function D(...e){return e.reduceRight((e,r)=>{let n=r.a,a=e.a,i=n*(1-a),o=i+a,s=i/o,l=a/o;return{r:r.r*s+e.r*l,g:r.g*s+e.g*l,b:r.b*s+e.b*l,a:o}})}function k(e,r,n,a=1){return isNaN(e)||isNaN(r)||isNaN(n)||isNaN(a)?null:{r:e,g:r,b:n,a}}function M({r:e,g:r,b:n,a}){return{r:Math.round(255*e),g:Math.round(255*r),b:Math.round(255*n),a:Math.round(255*a)}}function F(e){let{r,g:n,b:a}=M(e);return`rgba(${r}, ${n}, ${a}, ${e.a})`}function x(e){let{r,g:n,b:a,a:i}=M(e),o=Math.min(Math.max(0,n),255),s=Math.min(Math.max(0,a),255),l=Math.min(Math.max(0,i),255),c=Math.min(Math.max(0,r),255).toString(16).padStart(2,"0"),d=o.toString(16).padStart(2,"0"),u=s.toString(16).padStart(2,"0"),m=l.toString(16).padStart(2,"0");return 255===l?`#${c}${d}${u}`:`#${c}${d}${u}${m}`}function U(e){switch(e){case"legacy":return"#e5e5e5";case"light":default:return"#f5f5f5";case"dark":return"#1e1e1e"}}function B(e,r){let n=[255*e.r,255*e.g,255*e.b],a=[255*r.r,255*r.g,255*r.b],i=(0,o.ej)((0,o.h9)(n),(0,o.h9)(a));if("number"!=typeof i||isNaN(i))throw Error(`APCAcontrast returned an invalid value: ${i}`);return i}function V(e){return .299*e.r+.587*e.g+.114*e.b}function G(e){return H(`${e}${e}`)}function H(e){return z(parseInt(e,16))}function W(e){return z(parseFloat(e))}function K(e){return q(.01*parseFloat(e))}function Y(e,r){return e.endsWith("%")?q(parseFloat(e)*r):parseFloat(e)}function $(e){return e?e.includes("%")?K(e):q(parseFloat(e)):1}function j(e){let r=parseFloat(e),n=0;return n=e.includes("grad")?.9*r:e.includes("rad")?180*r/Math.PI:e.includes("turn")?360*r:r,(n=(0,a._g)(n,360))/360}function z(e){return q(e/255)}function q(e){return(0,a.qE)(e,0,1)}function X(e){return e&&!isNaN(e.r)&&!isNaN(e.g)&&!isNaN(e.b)&&e.r>=0&&e.r<=1&&e.g>=0&&e.g<=1&&e.b>=0&&e.b<=1}function J(e,r){let{r:n,g:i,b:o,a:s}=e,{r:l,g:c,b:d,a:u}=r;return(0,a.xN)(n,l)&&(0,a.xN)(i,c)&&(0,a.xN)(o,d)&&(0,a.xN)(s,u)}function Z(e){let r=E(e);return!!r&&.2126*r.r+.7152*r.g+.0722*r.b<.6}let Q=/^(?:rgba?\()?\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,ee=/^(?:rgba?\()?\s*([0-9]*\.?[0-9]+)\s*?[, ]\s*([0-9]*\.?[0-9]+)\s*?[, ]\s*([0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,et=/^(?:hsla?\()?\s*([-+]?[0-9]*\.?[0-9]+(?:deg|rad|grad|turn)?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,er=/^(?:lab?\()?\s*([0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,en=/^(?:oklch?\()\s*([0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+(?:deg|rad|grad|turn)?))?\s*\)?\s*;?$/,ea=/^(?:oklab?\()\s*([0-9]*\.?[0-9]+%?)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/},138392:(e,r,n)=>{n.d(r,{Eg:()=>R,Hd:()=>u,Wn:()=>d,jA:()=>c});var a=n(424587);n(539321);var i=n(404199),o=n(775664),s=n(534367),l=n(568214);function c(e,r,n="IGNORE",a){if(!e||!(0,l.YR)(e))return console.warn("Invalid color passed to calculateColorWithRampValue. Ensure r, g, b, and a are between 0 and 1",e),null;if(r<0||r>1e3)return console.warn("Invalid value passed into calculateColorWithRampValue. Ensure value is between 0 and 1000",r),null;let i=f(e),o=I(i),s=T(i.hsluv_l,o);if(a){let{LESS_THAN:r,GREATER_THAN:n}=a;if(r&&100*s<r||n&&100*s>n)return e}return b(i,r/1e3,o,s),"IGNORE"!==n&&A(i,"BLACK"===n||"BLACK_AND_WHITE"===n,"WHITE"===n||"BLACK_AND_WHITE"===n),g(i)}function d(e){if(!e||!(0,l.YR)(e))return console.warn("Invalid color passed to calculateColorWithRampValue. Ensure r, g, b, and a are between 0 and 1",e),null;let r=f(e),n=I(r);return Math.floor(100*T(r.hsluv_l,n))}function u(e,r,n="IGNORE"){if(!e||!(0,l.YR)(e))return console.warn("Invalid color passed to calculateColorWithRelativeAdjustment. Ensure r, g, b, and a are between 0 and 1",e),null;if(r<-1||r>1)return console.warn("Invalid percentage passed into calculateColorWithRelativeAdjustment. Ensure percentage is between -1 and 1",r),null;let a=f(e),i=I(a),o=a.hsluv_l,s=o;s=r>0?o+(100-o)*r:o*(1- -1*r);let c=T(o,i);return b(a,T(s,i)/10,i,c),"IGNORE"!==n&&A(a,"BLACK"===n||"BLACK_AND_WHITE"===n,"WHITE"===n||"BLACK_AND_WHITE"===n),g(a)}let m=["red","orange","yellow","green","blue","purple"],p={red:{a:-.079,b:16.1},orange:{a:-2.55,b:56.4},yellow:{a:-4.26,b:81.7},green:{a:1.67,b:131},blue:{a:3.4,b:227},purple:{a:.0136,b:282}},h={red:{d:95.2,c:-3.15,b:1.3,a:-.159},orange:{d:108,c:-11.7,b:2.8,a:-.183},yellow:{d:76.3,c:-3.03,b:1.96,a:-.151},green:{d:102,c:-44.8,b:11.8,a:-.776},blue:{d:95.5,c:-10.7,b:3.71,a:-.306},purple:{d:95.6,c:-2.82,b:1.43,a:-.189}},_={red:{d:96.4,c:-.7,b:-2.01,a:.125},orange:{d:103,c:-6.98,b:.0827,a:-.0256},yellow:{d:102,c:-5.84,b:.849,a:-.0972},green:{d:96.5,c:2.77,b:-2.86,a:.171},blue:{d:97.5,c:.173,b:-2.12,a:.127},purple:{d:98.1,c:-2.29,b:-1.94,a:.132}},g=e=>(e.hsluvToRgb(),{r:(0,a.qE)(e.rgb_r,0,1),g:(0,a.qE)(e.rgb_g,0,1),b:(0,a.qE)(e.rgb_b,0,1),a:1}),f=e=>{let r=new i.h;return r.rgb_r=e.r,r.rgb_g=e.g,r.rgb_b=e.b,r.rgbToHsluv(),r},E={red:1,orange:.75,yellow:.6,green:1,blue:1.1,purple:1};function y(e){if((0,l.yi)(e,l.UE)<=v)return N(e);let r=f(e),n=new i.h;if(n.hsluv_h=r.hsluv_h,r.hsluv_l<=10)return n.hsluv_s=0,n.hsluv_l=60,g(n);if(r.hsluv_l<=30){let e=.03*r.hsluv_l;n.hsluv_s=r.hsluv_s*e}else n.hsluv_s=Math.min(100,1.5*r.hsluv_s);return n.hsluv_l=Math.min(100,.444*r.hsluv_l+55.555),L(n)}function b(e,r,n,a=5){r*=10;let i=p[n].a*a+p[n].b-e.hsluv_h;e.hsluv_h=p[n].a*r+p[n].b-i;let o=e.hsluv_s,s=h[n].a*a*a*a+h[n].b*a*a+h[n].c*a+h[n].d;e.hsluv_s=h[n].a*r*r*r+h[n].b*r*r+h[n].c*r+h[n].d,e.hsluv_s*=o/s,e.hsluv_l=_[n].a*r*r*r+_[n].b*r*r+_[n].c*r+_[n].d,e.hsluv_s>100&&(e.hsluv_s=100),e.hsluv_l>100&&(e.hsluv_l=100),e.hsluv_h>360&&(e.hsluv_h=360),e.hsluv_h<0&&(e.hsluv_h=0)}function I(e){let r={blue:0,yellow:0,green:0,purple:0,red:0,orange:0},n=e.hsluv_l/100;e.hsluvToRgb(),m.forEach(a=>{let o=new i.h;o.rgb_r=s.r[a].r,o.rgb_g=s.r[a].g,o.rgb_b=s.r[a].b,o.rgbToHsluv(),b(o,n,a,5),o.hsluvToRgb();let c=(0,l._W)(g(e),g(o));r[a]=c/E[a]});let a="yellow",o=r[a];for(let e in r)r[e]<o&&(o=r[e],a=e);return e.rgbToHsluv(),a}function T(e,r){let n=(0,a.Ae)(_[r].a,_[r].b,_[r].c,_[r].d-e),i=n.filter(e=>0<e&&e<10);return 1===i.length?i[0]:n.length>1?(n.sort(),n[Math.floor(n.length/2)]):e<50?11:-1}let v=15,S={BLACK:l.Uv,WHITE:l.UE},w=(e,r)=>{let{colorForContrastCheck:n,isCustomColorForeground:a,contrastMinimum:i}=r,o=()=>a?Math.abs((0,l.yi)(c,n)):Math.abs((0,l.yi)(n,c)),s=(0,l.HD)(n)?.1:-.1,c=g(e);for(;o()<i+.2&&(e.hsluv_l+=s,!(e.hsluv_l>100)&&!(e.hsluv_l<0));)c=g(e);return e.rgbToHsluv(),o()>=i+.2},A=(e,r,n)=>{let a;let i=g(e),o=Math.abs((0,l.yi)(l.UE,i)),s=Math.abs((0,l.yi)(l.Uv,i));if(r&&n)a=s>=o?"BLACK":"WHITE";else{if(!r&&!n)return;a=r?"BLACK":"WHITE"}("BLACK"!==a||!(s>=60))&&("WHITE"===a&&o>=60||w(e,{contrastMinimum:60,colorForContrastCheck:S[a],isCustomColorForeground:!1}))},N=e=>({r:(0,a.qE)((e.r-1)/.55+1,0,1),g:(0,a.qE)((e.g-1)/.55+1,0,1),b:(0,a.qE)((e.b-1)/.55+1,0,1),a:1}),C=e=>{e.hsluvToRgb();let r=new i.h;return r.rgb_r=1-.55*(1-e.rgb_r),r.rgb_g=1-.55*(1-e.rgb_g),r.rgb_b=1-.55*(1-e.rgb_b),r.rgbToHsluv(),r},L=e=>{let r=C(e);return w(r,{contrastMinimum:v,colorForContrastCheck:S.WHITE,isCustomColorForeground:!1}),N(g(r))};function O(e){let r=[],n=new Set;return e.forEach(e=>{let a=o.z5.format(e);n.has(a)||(n.add(a),r.push(e))}),r}function R(e){if(e)return{base:e,widget:e,baseLight:O(e.map(e=>u(e,.6,"BLACK_AND_WHITE")||l.Uv)),sticky:O(e.map(e=>c(e,400,"BLACK",{LESS_THAN:400})||l.Uv)),highlight:O(e.map(y)),pencilUI3:e}}},609494:(e,r,n)=>{n.d(r,{B2:()=>h,H3:()=>v,I:()=>I,Kq:()=>b,Kx:()=>T,L4:()=>C,Pq:()=>A,Rc:()=>function e(r=[],n=!0){let a=(Array.isArray(r)?r:[{t:r}]).map(r=>{let n={t:null,styles:null,children:null,user:null,userId:null,link:null,isHashtag:null};if(r.user_annotated&&r.user_id)return{...n,userId:r.user_id,user:{...r.user_annotated,name:r.user_annotated.name??null,imgUrl:r.user_annotated.img_url}};if(r.profile_id||null===r.profile_id)return{...n,t:"@"+r.t,styles:["lightbold"]};let a={...n,t:r.t||n.t,styles:r.styles||n.styles,link:r.link||n.link};return r.children?.length&&(a.children=r.children.map(r=>({...n,children:e(r.children,!1)}))),a});if(n&&a.length){let e=a[a.length-1];e.t=e.t?.replace(/\s+$/g,"")??null}return a},Wf:()=>function e(r,n){if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++){let i=r[a],o=n[a];if(i.t!==o.t||i.user_id!==o.user_id)return!1;if(!g(i,o))return!1;if(i.profile_id!==o.profile_id)return!1;else if(i.link!==o.link)return!1;else if(!_(i,o))return!1;else if(!e(i.children??[],o.children??[]))return!1}return!0},_Z:()=>y,cs:()=>w,l5:()=>E,pV:()=>N,q:()=>S,sP:()=>function e(r=[]){if(!r)return"";let n=r.reduce((r,n)=>{let a=n.t||"",i=n.styles||[];n.user_annotated?(a=n.user_annotated.handle,i=["lightbold"]):n.profile_id||null===n.profile_id?(a="@"+n.t,i=["lightbold"]):n.children?.length?n.children.forEach((n,o)=>{(r||a)&&(a+="\n"),a+=(i.includes("ol")?`${o+1}. `:"* ")+e(n.children)}):(a=(0,l.x6)(a).map(e=>"string"==typeof e?(0,u.hX)(e):`<span class="${p.mh}">${e.props["data-text"]}</span>`).join("\n"),n.link&&(i=["lightbold"]));let o=[];return i.forEach(e=>{"b"===e?o.push(p.hp):"lightbold"===e?o.push(p.XH):"i"===e?o.push(p.u5):"s"===e&&o.push(p.Vc)}),o.length&&(a=`<span class='${s()(...o)}'>`+a+"</span>"),r+a},"");return(0,d.F)(n)||""},vj:()=>f});var a=n(171812),i=n(432258),o=n(629019),s=n.n(o),l=n(934480),c=n(440535),d=n(733334),u=n(96328),m=n(572206),p=n(934545);let h=5,_=(e,r)=>{if((0,i.uy)(e.styles)&&(0,i.uy)(r.styles))return!0;if((0,i.uy)(e.styles)!==(0,i.uy)(e.styles))return!1;let n=e.styles?.filter(e=>!r.styles?.includes(e));return n?.length===0},g=(e,r)=>!!((0,i.uy)(e.user_annotated)&&(0,i.uy)(r.user_annotated))||(0,i.uy)(e.user_annotated)===(0,i.uy)(e.user_annotated)&&(0,a.c2)(e.user_annotated,r.user_annotated);var f=(e=>(e.EDITOR_MENTION="editor_mention",e.COMMUNITY_MENTION="community_mention",e.PLAIN_TEXT="plain_text",e.EMOJI="emoji",e.NONE="none",e))(f||{});function E(e){return 2===Object.keys(e).length&&Object.keys(e).includes("user_id")&&Object.keys(e).includes("user_annotated")?"editor_mention":2===Object.keys(e).length&&Object.keys(e).includes("profile_id")&&Object.keys(e).includes("t")?"community_mention":Object.keys(e).includes("t")&&!Object.keys(e).includes("link")&&e.t&&(0,l.xM)(e.t)?"emoji":Object.keys(e).includes("t")&&!Object.keys(e).includes("link")?"plain_text":"none"}function y(e=[],r){if(!e)return"";let n=e.reduce((e,r)=>{let n=r.t||"";return r.user_annotated?n=r.user_annotated.handle:r.profile_id||null===r.profile_id?n="@"+r.t:r.children?.length&&r.styles?.length?r.children.forEach((a,i)=>{(e||n)&&(n+="\n"),n+=(r.styles.includes("ol")?`${i+1}. `:"* ")+y(a.children)}):r.styles?.length&&r.styles.includes("s")&&(n=""),e+n},"");return r?.includeTrailingWhitespace||(n=n.replace(/\s+$/g,"")),(0,d.F)(n)||""}function b(e,r){let n=y(e,r),a=(0,l.Bx)(n);return(globalThis.Intl?.Segmenter?Array.from(new Intl.Segmenter().segment(a)):Array.from(a)).length}function I(e){return 0===e.length||/^\s*$/.test(y(e))}function T(e){return I(e)||y(e).length<=5}function v(e){return!(e.activeThread?.id===c.hm&&e.newComment.discardAttempt<c.IT)}function S(e){return y(e).length>=17500}function w(e){if(!Array.isArray(e))return[];let r=function e(r){let n=[];return r.forEach(r=>{r.user_id?.includes("invite-")?r.t&&n.push(r.t):r.children&&n.push(...e(r.children))}),n}(e);return!function e(r){return r.forEach(r=>{r.user_id?.includes("invite-")?delete r.user_id:r.children&&e(r.children)}),r}(e),r}function A(e){return e.length>0&&(e[e.length-1].t=e[e.length-1].t?.trimEnd()),e}function N(e,r){let n=Math.min(Math.max(e.x,r.x),r.x+r.width),a=Math.min(Math.max(e.y,r.y),r.y+r.height);return new m.Mi(n,a)}function C(e){return e.includes("-")}},91408:(e,r,n)=>{function a(e){return parseInt(e.split("px")[0])}function i(e){return Number(e.split("px")[0])}n.d(r,{hG:()=>a,jz:()=>i})},93484:(e,r,n)=>{n.d(r,{y:()=>a});let a=n(411855).createContext(null)},623738:(e,r,n)=>{n.d(r,{Uc:()=>c,iZ:()=>l});var a=n(299321),i=n(126911);n(966712);var o=n(588169),s=n(286640);let l=new Map(Object.entries(a.XpX).map(([e,r])=>[e,r]));function c(){let e=o.dZ.get((0,o.v7)())||"UNKNOWN",r=i.y.isApple()?"mac":"!mac",n=function(){let e;if(!s.x4)return{};let r=s.x4.getItem("customKeyboardShortcuts");if(!r)return{};try{e=JSON.parse(r)}catch(e){console.error("[Custom Keyboard Shortcuts] Failed to parse from local storage",e)}return e}()??{};return n[e]?.[r]??{}}Object.entries(a.XpX).map(([e,r])=>[r,e])},540193:(e,r,n)=>{n.d(r,{yN:()=>b,ql:()=>I});var a=n(411855);n(188507);var i=n(38329),o=n(966712),s=n(827697),l=n(915440),c=n(391388),d=n(944682),u=n(270056);n(938908);var m=n(782656),p=n(988022),h=n(279453),_=n(623746),g=n(569512),f=n(547807),E=n(66037);new class{constructor(){this.RecentPrototypesSchemaValidator=(0,f.YV)("RecentPrototypesSchemaValidator",e=>e.object({recent_prototypes:e.ignore(),recent_prototype_repos:e.ignore(),org_drafts_owners:e.array(E.WU)}),null,!1)}getRecentPrototypes(e){return this.RecentPrototypesSchemaValidator.validate(async({xr:r})=>await r.get("/api/recent_prototypes",f.td.toAPIParameters({...e,fuid:o.Ay().user_data?.id})))}};let y=null;async function b(e){if(!y)return;let r=[],n={},a=[];for(let i of y?.currentUser?.recentFiles2??[])i?.file?.key&&e.includes(i.file.key)&&(r.push({key:i.file.key,parent_org_id:i.file.parentOrgId,team_id:i.file.teamId,folder_id:i.file.folderId}),n[i.id]=null,a.push(i.file.key));let i=g.f.removeRecentFiles({fileKeys:a}),o=(0,s.WB)().optimisticallyDelete({RecentFile2:n},i);(0,p.OH)("File RecentFiles Removed",r),await o}function I(e){return function(e,r){var n;let s=r?h.KN$:(0,o.kc)().livegraph_recent_files_sev_swap?h.LD2:h.wZi,p=(0,l.Rs)(s,{});return"loaded"===p.status&&(n=p.data,n?.currentUser&&"recentFiles2"in n.currentUser)&&(y=p.data),(0,a.useEffect)(()=>{p.status===c.H.LOADED&&function(e,r,n){let a=e.recent_repos.map(e=>e.files).reduce((e,r)=>e.concat(r),[]);i.D.dispatch(d.uo({files:e.recent_files.concat(a),subscribeToRealtime:!1})),i.D.dispatch(m.nF({recent_repos:e.recent_repos,subscribeToRealtime:n})),i.D.dispatch(u.Kc({folderId:`recents-${r||"no-org"}`,state:"loaded"}))}((0,_.YN)(p.data),e,!1)},[p,e]),a.useMemo(()=>p.transform(e=>(0,_.YN)(e).recent_files),[p])}(e,!1)}},207286:(e,r,n)=>{n.d(r,{Xf:()=>_});var a,i=n(411855),o=n(358145),s=n(752553),l=n(27087),c=n(939863),d=n(540019),u=n(556261),m=n(56099),p=n(356931),h=n(679892);function _(e,r=!0){let n=(0,u.gI)({migrationGroup:m.L.GROUP_7,component:"useOrgBillingData"}),[l,d]=(0,s.IT)(a.orgBillingDataQuery(e),{enabled:r});(0,p.i)(l,(0,c.t)("org_billing_error_default"));let h=(0,o.ZC)(e),g=i.useMemo(()=>h!==e&&!!h,[e,h]),f=(0,o.ZC)(n),E=i.useMemo(()=>!1===f&&n&&l.data&&0===Object.keys(l.data).length,[n,l.data,f]),y=i.useMemo(()=>E||g,[E,g]);return(0,i.useEffect)(()=>{"loading"!==l.status&&y&&d.refetch()},[d,y,l.status]),l}(a||(a={})).orgBillingDataQuery=d.M4.Query({fetch:async e=>(await h.Eh.getBillingData({orgId:e})).data.meta,enabled:e=>!!e}),d.M4.Mutation(async(e,{query:r})=>{let{orgId:n,billingContacts:i,onRejected:o}=e,s=await l.Ay.put(`/api/orgs/${n}/billing_data`,{admin_email:i}).catch(e=>{throw o(e),e});r.mutate(a.orgBillingDataQuery(n),e=>{e&&(e.admin_email=s.data.meta.admin_email)})}),d.M4.Mutation(async(e,{query:r})=>{let n=await l.Ay.put(`/api/orgs/${e.orgId}/lock_invoice`,{license_quantities:e.licenseQuantities}).catch(r=>{throw e.onRejected(r),r}),i=a.orgBillingDataQuery(e.orgId);return r.mutate(i,e=>{e&&(e.invoices=n.data.meta.invoices)}),await r.refetch(i),n.data.meta}),d.M4.Mutation((e,{query:r})=>{r.refetch(a.orgBillingDataQuery(e))})},823810:(e,r,n)=>{n.d(r,{G4:()=>b,IT:()=>I,SW:()=>f,Ul:()=>y,g4:()=>g,m8:()=>E,n:()=>h,v_:()=>_});var a=n(411855),i=n(138020),o=n(966712),s=n(915440),l=n(391388),c=n(720647),d=n(334381),u=n(99506),m=n(279453);let p=e=>(r,n)=>n?r.filter(r=>{let a=n[r];return!!a?.[e]}):[],h=p("canTrash"),_=p("canDuplicate"),g=p("canRestore"),f=p("canRestoreToOtherFolders"),E=p("canDeleteForever"),y=p("canMove"),b=p("isDraftFile");function I(e,r=!0){let n=(0,a.useMemo)(()=>e.map(e=>({fileKey:e})),[e]),p=(0,d.y)(),h=(0,s.p)(m.XRI,n,{enabled:r});return(0,a.useMemo)(()=>l.Qw.all(h.map(e=>e.result)).transform(e=>{let r={};for(let n of e){let e=n.file;e&&(r[e.id]=function(e,r){let n=e.editorType===u._Y.WHITEBOARD&&e.org?.isFigJamDisabled||e.editorType===u._Y.SLIDES&&e.org?.isSlidesDisabled||!1,a=e.canEdit,s=e.canEdit,l=e.canRename,d=!!e.project?.canView,m=!!e.project?.canEdit,p=!!(0,i.oA)(e.canTrash),h=!!(0,i.oA)(e.canMove),_=!!(0,o.kc)().file_move_modal_v2_precheck||h,g=(e.canEdit||!e.viewerExportRestricted)&&!n,f=!!(0,i.oA)(e.canRestore),E=!!r&&!!(0,o.kc)().pdr_manage_folderless_files&&!!(0,i.oA)(e.canRestoreToOtherFolders),y=e.canFavorite,b=e.isFavorited,I=e.isTeamTemplate,T=(0,c._R)(e.editorType??u._Y.DESIGN,e.currentPlanUser),v=e.isDraftFile,S=!!(0,i.oA)(e.canPermanentlyDelete),w=e.parentOrgId?"org":e.teamId?"team":null,A=e.parentOrgId||e.teamId||null;return{canEdit:a,canRename:l,canMove:h,canShowInProject:d,canPin:m,canTrash:p,canDuplicate:g,canRestore:f,canRestoreToOtherFolders:E,canFavorite:y,isFavorited:b,canDeleteForever:S,canUseInNewFile:I,canRestoreFromVersion:s,isFileTypeDisabled:n,canOpenMoveModal:_,isUserRestrictedForSeat:T,planUser:e.currentPlanUser,planType:w,planId:A,isDraftFile:v}}(e,p))}return r}),[h,p])}},307524:(e,r,n)=>{n.d(r,{Q:()=>l});var a=n(411855),i=n(915440),o=n(391388),s=n(279453);function l(e,r=!0){let n=(0,a.useMemo)(()=>e.map(e=>({prototypeId:e})),[e]),c=(0,i.p)(s.vE,n,{enabled:r});return(0,a.useMemo)(()=>o.Qw.all(c.map(e=>e.result)).transform(e=>{let r={};for(let a of e){var n;let e=a.prototype;e&&(r[e.id]={canRead:(n=e).canRead,canFavorite:n.canRead&&!n.isFavorited,canUnfavorite:n.canRead&&n.isFavorited})}return r}),[c])}},388120:(e,r,n)=>{n.d(r,{CS:()=>f,Sk:()=>b,_H:()=>g,ae:()=>y,gX:()=>E,k8:()=>T,nL:()=>I,zj:()=>_});var a=n(411855),i=n(138020),o=n(966712),s=n(915440),l=n(391388),c=n(720647),d=n(875847),u=n(334381),m=n(99506),p=n(279453);let h=e=>(r,n)=>n?r.filter(r=>{let a=n[r];return!!a?.[e]}):[],_=h("canDelete"),g=h("canRestore"),f=h("canRestoreToOtherFolders"),E=h("canForeverDelete"),y=h("canMove"),b=h("isDraftRepo");function I(e,r,n){return n?e.filter(e=>{let a=r[e],i=n[e];return i?.isMainBranch(a)}):[]}function T(e,r=!0){let n=(0,a.useMemo)(()=>e.map(e=>({repoId:e})),[e]),h=(0,s.p)(p.rwE,n,{enabled:r}),_=(0,u.y)();return(0,a.useMemo)(()=>l.Qw.all(h.map(e=>e.result)).transform(e=>{let r={};for(let n of e){let e=n.repo;e&&(r[e.id]=function(e,r){let n=e.canEdit,a=e.canMove,s=!!(0,o.kc)().file_move_modal_v2_precheck||a,l=!!e.project?.canView,u=e.canEdit&&!e.isTrashed,p=e.canEdit&&e.isTrashed,h=r&&(0,o.kc)().pdr_manage_folderless_files?e.isTrashed&&!!(0,i.oA)(e.sourceFile?.canRestore):e.canEdit&&e.isTrashed,_=!!(r&&(0,o.kc)().pdr_manage_folderless_files&&e.isTrashed&&(0,i.oA)(e.sourceFile?.canRestoreToOtherFolders)),g=!!e.sourceFile?.isFavorited,f=e.canRead&&!!e.sourceFile&&!e.sourceFile.isFavorited,E=e.canRead&&!!e.sourceFile&&e.sourceFile.isFavorited,y=!!e.project&&e.canEdit,b=e.parentOrgId?"org":e.teamId?"team":null,I=e.parentOrgId||e.teamId||null,T=(0,c._R)(m._Y.DESIGN,e.currentPlanUser),v=(0,d.T9)(e?.project);return{canDelete:u,canRename:n,canShowInProject:l,isFavorited:g,canRestore:h,canRestoreToOtherFolders:_,canForeverDelete:p,canFavorite:f,canUnfavorite:E,isMainBranch:r=>r===e.sourceFile?.key,canMove:a,canEditBranch:r=>!!e.branches?.find(e=>e.key===r)?.canEdit,canPin:y,planId:I,planType:b,canOpenMoveModal:s,isUserRestrictedForSeat:T,planUser:e.currentPlanUser,isDraftRepo:v}}(e,_))}return r}),[h,_])}},517333:(e,r,n)=>{n.d(r,{O_:()=>h,S8:()=>p,aw:()=>a.a,eD:()=>u,fU:()=>f,hX:()=>m,hl:()=>g,y3:()=>E});var a=n(723069),i=n(878227),o=n(563706),s=n(776621),l=n(820260),c=n(748553),d=n(323653);let u=function(){let e=window.__figmaDesktop;return delete window.__figmaDesktop,e?new c.d(e):null}(),m=function(){let e=window.__figmaDesktopGetPopoutAPI?.();return e?.lockAPI(),e?new l.E(e):null}(),p=window.bellFeedAPI?window.bellFeedAPI:null;function h(e){return window.bellFeedAPI&&null!=window.bellFeedAPI.version&&window.bellFeedAPI.version>=e?window.bellFeedAPI:null}let _=u||m;function g(){return(0,d.x5)(u?.getInformationalVersion()).status===d.JN.DISABLED}function f(){if(u&&o.Ay.mac){let[e,r]=`${o.Ay.osversion}`.split(".");return 10>+e||10==+e&&12>+r}return!1}function E(){return!!u}_&&!navigator.userAgent.match(/figma-linux/)&&((0,i.v)({browser_name:"Figma Desktop",desktop_channel:_.beta?"beta":"stable",desktop_version:_.getInformationalVersion(),desktop_client_id:_.getClientID()}),(0,s.XM)("browser",{name:"Desktop",version:_.getInformationalVersion()}))},323653:(e,r,n)=>{n.d(r,{JN:()=>c,x5:()=>d});var a=n(367035),i=n(181912),o=n(374626),s=n(38580);let l=[{minVersion:"116.10.0",date:"2024-01-01"},{minVersion:"116.16.0",date:"2024-09-01"},{minVersion:"116.17.0",date:"2024-09-01"},{minVersion:"116.18.0",date:"2024-09-18"},{minVersion:"124.0.0",date:"2024-10-25"},{minVersion:"124.1.0",date:"2024-11-20"},{minVersion:"124.2.0",date:"2024-12-18"},{minVersion:"124.3.0",date:"2025-01-25"},{minVersion:"124.4.0",date:"2025-02-21"},{minVersion:"124.5.0",date:"2025-04-03"},{minVersion:"124.6.0",date:"2025-04-22"}];var c=(e=>(e.SUPPORTED="SUPPORTED",e.DEPRECATED="DEPRECATED",e.DISABLED="DISABLED",e))(c||{});function d(e,r=(0,i.A)(),n=l){if(window.__figmaContent)return{status:"DISABLED"};if(null==e)return{status:"SUPPORTED"};if(!window.trustedTypes)return{status:"DISABLED"};if(1!==(0,a.Z)(e,"10.100.0")&&1===(0,a.Z)(e,"10.101.0"))return{status:"SUPPORTED"};for(let{minVersion:o,date:s}of n){if(1!==(0,a.Z)(e,o))continue;let n=(0,i.A)(s);if(n.isBefore(r))return{status:"DISABLED"};if(n.subtract(2,"month").isBefore(r))return{status:"DEPRECATED",date:n}}return{status:"SUPPORTED"}}let u=(0,o.E3)("last_dismissed_desktop_deprecation_banner","",{subscribeToChanges:!0});(0,s.eU)(e=>{let r=e(u);if(r){let e=(0,i.A)(r),n=(0,i.A)().subtract(1,"week");if(e.isAfter(n))return!0}return!1},(e,r,n)=>{r(u,n?(0,i.A)().toISOString():"")})},961747:(e,r,n)=>{n.d(r,{_:()=>a});let a=new class{constructor(){this.callbacks=[],this.matchMediaCallback=()=>{for(let e of this.callbacks)e(window.devicePixelRatio);this.updateMediaListener()},this.updateMediaListener()}updateMediaListener(){this.matchMedia&&this.matchMedia.removeListener(this.matchMediaCallback),this.matchMedia=window.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this.matchMedia.addListener(this.matchMediaCallback)}addListener(e){this.callbacks.push(e)}removeListener(e){for(let r=0;r<this.callbacks.length;r++)this.callbacks[r]===e&&(this.callbacks=this.callbacks.splice(r,1))}}},133537:(e,r,n)=>{n.d(r,{N0:()=>l,Ng:()=>E,bs:()=>m,fT:()=>y,iE:()=>g,jm:()=>f,nD:()=>h,qe:()=>_,xf:()=>s,zN:()=>p});var a=n(782118),i=n(966712),o=n(571854);function s(e){return/^[^<>\/\\:?*"|]*$/.test(e)&&/^[\u0000-\u007F]+$/.test(e)&&/^[^@\s]+@[^@\s]+\.[^@\s]+$/i.test(e)}function l(e){let r=[];for(let n of e.split(/[;,\n]/g)){let e=n.match(/^.*<(.*)>$/);e&&(n=e[1]),(n=n.trim())&&r.push(n)}return r}let c=a.C,d={};c.forEach(e=>d[e]=!0);let u=["ge.com"];function m(e){if(e in d||u.includes(e))return null;for(let r of c)if(1===(0,o.f)(e,r))return r;return null}function p(e){return e.toLowerCase().split("@")[1]||null}function h(e){return!!e&&e.endsWith((0,i.tl)().figma_email_suffix)}function _(e){let r=p(e);return!!r&&r in d}function g(e){return"work"===(e.meta?e.meta.email_domain_type:void 0)}function f(e){return!!e&&s(e)&&(e.endsWith("@figma.com")||e.endsWith("@test.figma.com"))}function E(e){return!!e&&e.startsWith("synthetic-tester")&&e.endsWith("@test.figma.com")}function y(e){return"support-share@figma.com"===e}},835650:(e,r,n)=>{n.d(r,{Yw:()=>h,br:()=>u,f3:()=>g,ih:()=>d,jc:()=>m,l7:()=>c,qd:()=>_});var a=n(511617),i=n(737947),o=n(966712),s=n(179940),l=n(974986);function c(){return(0,a.GZ)()&&o.Ay().frame_context?.type==="embed"}function d(){return(0,a.GZ)()&&o.Ay().frame_context?.type==="integration"}function u(){try{return window.self.origin===window.parent.origin}catch(e){return!1}}function m(){return c()&&!!(0,o.kc)().embedkit_v2}function p(){return(0,s.v6)(i.Ay.location.search)}function h(){let e=p();return e.embed_host||e["embed-host"]}function _(){let e=p(),r=e.embed_host||e["embed-host"],n=e["node-id"],a="0"!==e["viewport-controls"];return{embedHost:r,hideUi:e.hide_ui,isCommunityViewer:!!e.community_viewer,isViewportControlsEnabled:a,nodeId:n,showFooter:"0"!==e.footer,showPageSelector:"0"!==e["page-selector"]&&!(n&&!a),theme:g(),isDevMode:"dev"===e.m||"dev"===e.mode}}function g(){if(m()){var e;return"system"===(e=(0,o.Ay)().embed_theme)?l.n.matches?"dark":"light":e}}},691273:(e,r,n)=>{n.d(r,{n:()=>i});var a=n(776621);function i(){(0,a.ED)("[hideEmbedViewerLoader]","Hiding embed viewer loader");try{let e=document.getElementById("embed-viewer-loading-page");e&&(e.classList.add("fadeOut"),setTimeout(()=>{e.classList.add("hidden")},250))}catch(e){(0,a.ED)("[hideEmbedViewerLoader]","Failed to hide embed viewer loader",e)}}},323762:(e,r,n)=>{n.d(r,{CV:()=>d,Js:()=>l,KJ:()=>c,LU:()=>u});var a=n(891721);n(966712);var i=n(302067);let o=RegExp("^<iframe[^>]+src\\s*=\\s*(?:(?:\"([^\">]+)\")|(?:'([^'>]+)')).*><\\/iframe>$"),s=RegExp("^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u00a1-\\uffff][a-z0-9\\u00a1-\\uffff_-]{0,62})?[a-z0-9\\u00a1-\\uffff]\\.)+(?:[a-z\\u00a1-\\uffff]{2,}\\.?))(?::\\d{2,5})?(?:[/?#]\\S*)?$","i");function l(e){let r=new URL(e).hostname;return 0===r.indexOf("www.")&&(r=r.slice(4)),r}function c(e){let r=function(e){if(!e.startsWith("<iframe"))return"";let r=a.sanitize(e,{ALLOWED_TAGS:["iframe"],ALLOWED_ATTR:["src"]}),n=o.exec(r);return n&&n.length>1?n[1]:""}(e),n=r||e,i=n.startsWith("http://")||n.startsWith("https://")?n:`https://${n}`;return s.test(i)?{isFromIFrame:!!r,url:i}:null}function d(e,r,n){let a=c(r.trim());return a?(e(i.MY({clipboardText:r,url:a.url,isTextIframe:a.isFromIFrame,entrypoint:n})),{valid:!0}):{valid:!1,reason:"Text was not a valid URL or IFrame"}}function u(e="",r){if(!e.startsWith("<meta charset='utf-8'><div><a href='https://app.asana.com"))return null;let n=a.sanitize(e,{ALLOWED_TAGS:["a"],ALLOWED_ATTR:["href"]}).split("<a"),i=/href="(https:\/\/app\.asana\.com[^"]*)"/,o=[];for(let e of n){let r=e.match(i);r&&r[1]&&o.push({url:r[1],isFromIFrame:!1})}return o.length!==r.split("\n").length?null:o}},722138:(e,r,n)=>{n.d(r,{Dr:()=>s,K2:()=>u,Pe:()=>d,SX:()=>c,gB:()=>o,j4:()=>l,to:()=>i});var a=n(776250);function i(e,r,n,i,o,s){(0,a.sx)("resource_removed_from_favorites",{resource_id:e,selectedView:r,entrypoint:n,resource_type:i,editor_type:o,fileBrowserUnfavorite:s})}function o(e,r,n,i,o,s){(0,a.sx)("resource_added_to_favorites",{resourceId:e,editor_type:o,selectedView:r,resource_type:i,entrypoint:n,fileBrowserFavorite:s})}function s(e,r){(0,a.sx)("favorites_to_move_add_to_sidebar_click",{favorited_resource_id:e,dest_team_id:r})}function l(e){(0,a.sx)("favorites_to_move_unstar_all_click",{favorited_resource_id:e})}function c(e,r){(0,a.sx)("File Browser Sidebar Custom Section Created",{new_custom_section_name:r,new_custom_section_id:e})}function d(e){(0,a.sx)("File Browser Sidebar Custom Section Deleted",{new_custom_section_id:e})}function u(e,r){(0,a.sx)("File Browser Sidebar Custom Section Renamed",{new_custom_section_new_name:r,new_custom_section_id:e})}},693601:(e,r,n)=>{async function a(){return await Promise.all([n.e(3555),n.e(2066),n.e(4544)]).then(n.bind(n,902066))}async function i(e,r={includeIDs:!1}){return(await a()).serializeJSX(e,r)}async function o(e,r={includeIDs:!1}){let n=await a();return await n.deserializeJSX(e,r)}n.d(r,{LZ:()=>o,oy:()=>i})},992405:(e,r,n)=>{n.d(r,{jW:()=>a});let a=/^\/(?:file|design|board|slides)\/([0-9a-zA-Z]{22,128})(?:\/|$)/},513654:(e,r,n)=>{n.d(r,{AH:()=>g,_f:()=>f,jY:()=>_});var a=n(414507),i=n(299321),o=n(776250),s=n(344780),l=n(395900),c=n(367094),d=n(805286),u=n(624187),m=n(574705),p=n(776621),h=n(84917);function _(e){switch(e){case i.IPZ.SWT_CREATED:return"shapeWithTextCreated";case i.IPZ.SWT_EDITED:return"shapeWithTextEdited";case i.IPZ.SWT_DELETED:return"shapeWithTextDeleted";case i.IPZ.SWT_RESIZED:return"shapeWithTextResized";case i.IPZ.STICKY_EDITED:return"stickyEdited";case i.IPZ.STICKY_DELETED:return"stickyDeleted";case i.IPZ.STICKY_RESIZED:return"stickyResized"}}class g{constructor(e,r,n=1,a=!1,i=null,d=()=>{},u=!1,p=()=>{},_=()=>{}){this._analyticsEventName=e,this._processTimersForLogging=r,this._timerDepth=n,this._forwardToDatadog=a,this._tsmerMetrics=i,this._customLogMetricsCallbackHistogram=d,this._isRecording=!1,this._isCanceled=!1,this._onFrameStartCallback=()=>{},this._isFirstLogForTab=!0,this._imagesLoadingState=null,this._ongoingSpotlight=!1,this._multiplayerUserCount=1,this._numberOfRenderedCommentsWatermark=0,this._lastRecordedNumberOfRenderedComments=0,this._distributionByWorkName=new Map,this._lastKnownFrameMs=null,this._lastKnownFrameIndex=null,this._scheduledLogAtMs=null,this._lastRecordedHitCountByName={},this._lastRecordedDurationSinceLastFrame={},this._fileKey=null,this._productType="unknown",this._deviceInfo=(0,m.N)(),this._activeNamedEvents=new Set,this._singleFrameNamedEvents=new Set,this._eventTrackers=new Map,this._contextRestoredCount=0,this._maxRenderLayerCount=0,this._maxRenderedTileBytesUsed=0,this._numAnimationsFromCpp=0,this._numAnimationsFromTs=0,this._tileRenderersUsed=new Set,this._currentTileRenderer="",this.scheduleLogTwoMinutesFromNow=()=>{null===this._scheduledLogAtMs&&(this._scheduledLogAtMs=performance.now()+12e4)},this._onDocumentVisibilityChange=()=>{this.handleDocumentVisibilityChange(document.visibilityState)},this.updateLastKnownFrameMs=e=>{this._lastKnownFrameMs=e},this.startRecording=e=>{this._isRecording=!0,this._resetLogState(),this._lastKnownFrameMs=performance.now(),e&&this.scheduleLogTwoMinutesFromNow()},this.stopRecordingAndLog=e=>{let r={};return this._distributionByWorkName.forEach((e,n)=>{r[n]=e.toPOJO()}),this._shouldLogToAnalytics()&&(this._logToAnalytics(e),this._resetLogState()),this._isRecording=!1,r},this.setFileInfo=(e,r)=>{(e!==this._fileKey||r!==this._productType)&&(this._fileKey=e,this._productType=r,this._resetLogState())},this._startRecordingNamedEvent=e=>{this._activeNamedEvents.add(e)},this.recordSingleFrameNamedEvent=e=>{this._singleFrameNamedEvents.add(e)},this._stopRecordingNamedEvent=e=>{this._activeNamedEvents.delete(e)},this.handleZoomStart=()=>{this._startRecordingNamedEvent("zoomActive")},this.handleZoomStop=()=>{this._stopRecordingNamedEvent("zoomActive")},this.handleScrollEvent=()=>{this.recordSingleFrameNamedEvent("scrollActive")},this.onNodeDragStart=()=>{this._startRecordingNamedEvent("nodeDragActive")},this.onNodeDragEnd=()=>{this._stopRecordingNamedEvent("nodeDragActive")},this.onTileRendererChanged=e=>{this._tileRenderersUsed.add(e),this._currentTileRenderer=e},this.onContextRestored=()=>{this._contextRestoredCount++},this.updateMaxRenderLayerCount=e=>{this._maxRenderLayerCount=Math.max(this._maxRenderLayerCount,e)},this.updateMaxRenderedTileBytesUsed=e=>{this._maxRenderedTileBytesUsed=Math.max(this._maxRenderedTileBytesUsed,e)},this.incrementNumAnimationsFromCpp=()=>{this._numAnimationsFromCpp++},this.incrementNumAnimationsFromTs=()=>{this._numAnimationsFromTs++},this.handleDocumentVisibilityChange=e=>{"hidden"===e&&this._shouldLogToAnalytics()&&(this._logToAnalytics("tab-hidden"),this._resetLogState()),"hidden"!==e&&this._resetLogState()},this._logToAnalytics=(e,r=!1)=>{let n={};n.schema=new l.UP().schema(),n.reason=e,n.isFirstLogAfterLoad=this._isFirstLogForTab,n.imagesLoading="loading"===this._imagesLoadingState,n.multiplayerUserCount=this._multiplayerUserCount,n.ongoingSpotlight=this._ongoingSpotlight,n.fileKey=this._fileKey,n.productType=this._productType,n.refreshRate=this.refreshRate(),n.commentsRenderCount=this._numberOfRenderedCommentsWatermark,n.contextRestoredCount=this._contextRestoredCount,n.maxRenderLayerCount=this._maxRenderLayerCount,n.maxRenderedTileBytesUsed=this._maxRenderedTileBytesUsed,(0,m.U)(this._deviceInfo,n),n.numAnimationsFromCpp=this._numAnimationsFromCpp,n.numAnimationsFromTs=this._numAnimationsFromTs,this._isFirstLogForTab=!1,null!==this._tsmerMetrics&&(n.editFrames=this._tsmerMetrics.editFrameDistribution().toLogParams(),n.editFramesWhileNotPanningOrZooming=this._tsmerMetrics.editFrameDistributionWhileNotPanningOrZooming().toLogParams(),n.remoteFrames=this._tsmerMetrics.remoteFrameDistribution().toLogParams(),n.remoteFramesWhileNotPanningOrZooming=this._tsmerMetrics.remoteFrameDistributionWhileNotPanningOrZooming().toLogParams()),this._customLogMetricsCallbackHistogram(n),n.tileRenderersUsed=JSON.stringify(Array.from(this._tileRenderersUsed)),this._tileRenderersUsed.clear(),this._tileRenderersUsed.add(this._currentTileRenderer),this._distributionByWorkName.forEach((e,r)=>{if(r in n)throw Error(`attempt to track performance for a work item with a reserved name: ${r}`);n[r]=e.toLogParams()}),r?setTimeout(()=>{this._sendLogRequest(n)},0):this._sendLogRequest(n)},this._sendLogRequest=e=>{let r={forwardToDatadog:this._forwardToDatadog,batchRequest:!0};(0,o.sx)(this._analyticsEventName,e,r)},this._processTimerTree=(e,r,n)=>{if(r>=this._timerDepth)return[];let a=[];for(let i of e){let e=[...n,i.name],o=e.join(".");if(!(o in this._lastRecordedHitCountByName)||!(o in this._lastRecordedDurationSinceLastFrame)){this._lastRecordedHitCountByName[o]=i.hitCount,this._lastRecordedDurationSinceLastFrame[o]=i.totalElapsedTime;continue}let s=i.hitCount-this._lastRecordedHitCountByName[o];if(0===s)continue;s>i.elapsedTimes.length&&console.warn(`Logged performance for ${o} too many times in one animation frame`);let l=i.totalElapsedTime-this._lastRecordedDurationSinceLastFrame[o];this._lastRecordedHitCountByName[o]=i.hitCount,this._lastRecordedDurationSinceLastFrame[o]=i.totalElapsedTime,a.push({path:e,elapsedTime:l});let c=r+1;c<this._timerDepth&&i.children.length>0&&(a=a.concat(this._processTimerTree(i.children,c,e)))}return a},this.onFrameStart=()=>{this._isRecording&&!this._isCanceled&&"ok"===c.y.getFullscreenCrashState()&&this._onFrameStartCallback()},this.setOnFrameStartCallback=e=>{this._onFrameStartCallback=e},this.onFrame=()=>{if("ok"!==c.y.getFullscreenCrashState())return"canceled";try{if(this._isCanceled)return"canceled";if("visible"!==document.visibilityState||!this._isRecording)return this._resetLogState(),"not-recording";let e=performance.now();if(null!=this._lastKnownFrameMs){let r=e-this._lastKnownFrameMs;if(r<6e4){for(let e of(this._getOrCreateDistribution("all").add(r),this._activeNamedEvents))this._getOrCreateDistribution(e).add(r);let e=performance.now(),n=[];for(let[e,a]of this._eventTrackers)a.didEventOccur()&&(n.push(e),this._getOrCreateDistribution(e).add(r));let a=performance.now()-e;for(let e of this._singleFrameNamedEvents)this._getOrCreateDistribution(e).add(r);null!==this._scheduledLogAtMs&&this._slowFrameTracker?.checkSlowFrameAndSample(r,n,a,this._fileKey,this._productType),this._singleFrameNamedEvents.clear()}}if(this._lastKnownFrameMs=e,s.rH.areTimersOpen())return this._isCanceled=!0,"canceled";let r=this._processTimerTree(s.rH.report(),0,[]);for(let e of this._processTimersForLogging(r))this._getOrCreateDistribution(e.path.join(".")).add(e.elapsedTime);return this._tsmerMetrics?.onFrame(),null!==this._scheduledLogAtMs&&performance.now()>this._scheduledLogAtMs&&(this._logToAnalytics("two-minutes-elapsed",!0),this._resetLogState()),"success"}finally{this._slowFrameTracker?.clearPerFrameMetricsAndIncrementFrameCounter()}},this.testOnlyGetAllDistribution=()=>this._getOrCreateDistribution("all"),this.pendingImagesChanged=e=>{if("loaded"===this._imagesLoadingState)return;let r=e>0?"loading":"loaded";r!==this._imagesLoadingState&&("loading"===this._imagesLoadingState&&(this._logToAnalytics("images-loaded"),this._resetLogState()),this._imagesLoadingState=r)},this._slowFrameTracker=new h.N(u,p,_),document.addEventListener("mousemove",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("keydown",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("touchdown",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("touchstart",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("touchmove",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("visibilitychange",this._onDocumentVisibilityChange)}uninstall(){document.removeEventListener("mousemove",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("keydown",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("touchdown",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("touchstart",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("touchmove",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("visibilitychange",this._onDocumentVisibilityChange)}hasScheduledLog(){return null!=this._scheduledLogAtMs}_shouldLogToAnalytics(){return this._isRecording&&null!=this._scheduledLogAtMs}productTypeForTests(){return this._productType}_resetLogState(){this._lastKnownFrameMs=null,this._imagesLoadingState=null,this._ongoingSpotlight=!1,this._multiplayerUserCount=1,this._distributionByWorkName=new Map,this._scheduledLogAtMs=null,this._lastRecordedHitCountByName={},this._lastRecordedDurationSinceLastFrame={},this._activeNamedEvents.clear(),this._singleFrameNamedEvents.clear(),this._numberOfRenderedCommentsWatermark=this._lastRecordedNumberOfRenderedComments,this._contextRestoredCount=0,this._maxRenderLayerCount=0,this._maxRenderedTileBytesUsed=0,this._numAnimationsFromCpp=0,this._numAnimationsFromTs=0,this._tsmerMetrics?.resetLogState()}getSlowFrameTracker(){return this._slowFrameTracker}refreshRate(){let e=this._distributionByWorkName.get("all");if(e){let r=e.getMode();if(r){if(r.min<9)return"120FPS";if(r.min<32)return"60FPS";if(r.min<48)return"30FPS"}}return"UNKNOWN"}estimatedRefreshRate(){let e=this._distributionByWorkName.get("all");if(e){let r=e.getMode();if(r){if(r.min<9)return{frameLength:1e3/120,fps:120};if(r.min<32)return{frameLength:1e3/60,fps:60};r.min}}return{frameLength:1e3/30,fps:30}}tsmerMetrics(){return this._tsmerMetrics}_getOrCreateDistribution(e){let r=this._distributionByWorkName.get(e);return r||(r=new l.UP,this._distributionByWorkName.set(e,r)),r}addEventTracker(e,r){this._eventTrackers.set(e,r)}addTimeEvent(e,r){this._getOrCreateDistribution(e).add(r)}setNumberOfRenderedComments(e){this._lastRecordedNumberOfRenderedComments=e,this._numberOfRenderedCommentsWatermark=Math.max(e,this._numberOfRenderedCommentsWatermark)}setMultiplayerPerfInfo(e){let{multiplayerUserCount:r,ongoingSpotlight:n}=e;this._ongoingSpotlight=n,this._multiplayerUserCount=r}trackOtherUserCursorMoved(){d.R9?.setOtherUserMouseMovedCallback(()=>{this.recordSingleFrameNamedEvent("otherUserCursorMoved")})}}class f{constructor(e,r){this._viewerMaxTimerDepth=5,this._viewer=null,this._rafHandle=-1,this._addCustomViewerLogMetrics=e=>{!function(e,r){e&&(r.optimizationExposures=JSON.stringify(Object.fromEntries(e.getAndClearHistogramBatchFields())))}(this._viewer,e)},this._addCustomSlowFrameTrackerLogMetrics=(e,r)=>{!function(e,r,n){if(e){let a=i.AiE.getAndClearHistogramBatchFields(),o=new Map;a.forEach((e,r)=>{o.set(r,e>0)}),r[h.N.optimizationExposuresKey]=JSON.stringify(Object.fromEntries(new Map([...o,...e.getAndClearSlowFrameTrackerFields()]))),r[h.N.gpuMetricsCurrentFrameKey]=e.getViewerGpuMetricsCurrentFrameJSON().toString(),r[h.N.cpuTimerTreeCurrentFrameKey]=i.fZb.getCurrentFrameCpuTimerTreeJSON().toString(),n&&(r[h.N.gpuMetricsPreviousFrameKey]=e.getViewerGpuMetricsPreviousFrameJSON().toString(),r[h.N.cpuTimerTreePreviousFrameKey]=i.fZb.getPreviousFrameCpuTimerTreeJSON().toString())}}(this._viewer,e,r)},this._clearCustomSlowFrameTrackerLogMetrics=e=>{!function(e,r){e&&(i.AiE?.clearSlowFrameTrackerFields(),e.clearAllSlowFrameTrackerFields(),e.gpuMetricsNextFrame(r),i.fZb?.nextFrame(r))}(this._viewer,e)},this._frameDistributionTracker=new g("frame_distributions",function(e){return r=>{let n=[];for(let i of r){if(i.path.length>e||i.path.length<1){(0,p.$D)(a.FigmaTeam.CLIENT_PLATFORM,Error(`We should not go deeper than ${e} levels into the timer tree`));continue}let r=i.path[0];if("react-render"===r||r.startsWith("viewer:")){let e=i.path.map(e=>e.startsWith("viewer:")?e.substr(7):e).join(".");n.push({...i,path:[e]})}}return n}}(this._viewerMaxTimerDepth),this._viewerMaxTimerDepth,!0,null,this._addCustomViewerLogMetrics,!0,this._addCustomSlowFrameTrackerLogMetrics,this._clearCustomSlowFrameTrackerLogMetrics),this._renderingStateTimer=null,this._renderingActive=!1,this._viewerLoadSubscription=null,this._handleRenderingStart=()=>{this._renderingActive=!0,this._renderingStateTimer=new l.M4,this._renderingStateTimer.start()},this._handleRenderingStop=()=>{this._renderingStateTimer=null,this._renderingActive=!1},this._handleInitialDocumentLoad=()=>{this._frameDistributionTracker.startRecording(!0)},this._handleDidRebuildAfterReconnect=()=>{this._frameDistributionTracker.startRecording(!1)},this._handleWillRebuildAfterReconnect=()=>{this._frameDistributionTracker.stopRecordingAndLog("about-to-rebuild-scene")},this.onFrame=()=>{"ok"===c.y.getFullscreenCrashState()&&(this._frameDistributionTracker.onFrameStart(),this._recordRenderingTimeEvent(),this._rafHandle=requestAnimationFrame(this.onFrame),"canceled"===this._frameDistributionTracker.onFrame()&&cancelAnimationFrame(this._rafHandle))},this._rafHandle=requestAnimationFrame(this.onFrame),this._frameDistributionTracker.setFileInfo(e,r)}uninstall(){this._frameDistributionTracker.uninstall(),cancelAnimationFrame(this._rafHandle),this.setViewer(null)}getFrameDistributionTrackerForTest(){return this._frameDistributionTracker}setViewer(e){null!=this._viewer&&(this._viewerLoadSubscription&&(this._viewerLoadSubscription(),this._viewerLoadSubscription=null),this._viewer.off("sceneWillRebuildAfterReconnecting",this._handleWillRebuildAfterReconnect),this._viewer.off("sceneDidRebuildAfterReconnecting",this._handleDidRebuildAfterReconnect),this._viewer.off("renderingStart",this._handleRenderingStart),this._viewer.off("renderingStop",this._handleRenderingStop),this._viewer.off("zoomStart",this._frameDistributionTracker.handleZoomStart),this._viewer.off("zoomStop",this._frameDistributionTracker.handleZoomStop),this._viewer.off("scrollEvent",this._frameDistributionTracker.handleScrollEvent)),this._frameDistributionTracker.stopRecordingAndLog("changing-viewer"),this._viewer=e,null!=this._viewer&&(this._viewerLoadSubscription=(0,u.zM)(this._handleInitialDocumentLoad),this._viewer.on("sceneWillRebuildAfterReconnecting",this._handleWillRebuildAfterReconnect),this._viewer.on("sceneDidRebuildAfterReconnecting",this._handleDidRebuildAfterReconnect),this._viewer.on("renderingStart",this._handleRenderingStart),this._viewer.on("renderingStop",this._handleRenderingStop),this._viewer.on("zoomStart",this._frameDistributionTracker.handleZoomStart),this._viewer.on("zoomStop",this._frameDistributionTracker.handleZoomStop),this._viewer.on("scrollEvent",this._frameDistributionTracker.handleScrollEvent))}_recordRenderingTimeEvent(){this._renderingActive&&(this._renderingStateTimer&&6e4>this._renderingStateTimer.getElapsedTime()&&this._frameDistributionTracker.addTimeEvent("rendererActive",this._renderingStateTimer.getElapsedTime()),this._renderingStateTimer=new l.M4,this._renderingStateTimer.start())}setInternalFrameDistributionTrackerForTest(e){this._frameDistributionTracker=e}}},697170:(e,r,n)=>{n.d(r,{Bs:()=>R,DT:()=>w,Rm:()=>O,W8:()=>P,_B:()=>N,xI:()=>L});var a=n(776250),i=n(511617),o=n(38329),s=n(737947),l=n(286640),c=n(27087),d=n(761870),u=n(145356),m=n(195847),p=n(21452),h=n(777385),_=n(6108),g=n(855829),f=n(881388),E=n(939863),y=n(662275),b=n(479296),I=n(133537),T=n(966712),v=n(776621);let S="google_sso_temp";var w=(e=>(e.COMMUNITY="google_one_tap_logged_out_community",e.LOGGED_OUT_FILE="google_one_tap_logged_out_file",e.PROTOTYPE="google_one_tap_prototype",e))(w||{}),A=(e=>(e.LOGGED_OUT_FOOTER="logged_out_footer",e.LOGGED_OUT_FOOTER_CONTINUE_WITH_GOOGLE="logged_out_footer_continue_with_google",e.FIGJAM_TRY_FOOTER_BANNER="figjam_try_footer_banner",e.FIGJAM_TRY_FOOTER_BANNER_CONTINUE_WITH_GOOGLE="figjam_try_footer_banner_continue_with_google",e))(A||{});let N="/api/session/google_auth/signin",C=(0,b.D)(()=>new Promise((e,r)=>{document.cookie=S+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";let n=(0,i.FJ)("/start_google_sso","","width=600,height=600");if(null===n){(0,a.sx)("GoogleSSOError",{step:"window-not-found"}),r(Error((0,E.t)("auth.google-sso.unable-to-get-info")));return}window.setTimeout(function i(){let o=(0,l.OS)(document.cookie,S);if(null!==o){let n=JSON.parse(o);document.cookie=S+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",n.token?e(n):((0,a.sx)("GoogleSSOError",{step:"token-not-found"}),r(Error((0,E.t)("auth.google-sso.unable-to-get-info"))))}else n.closed?((0,a.sx)("GoogleSSOError",{step:"cookie-not-found"}),r(Error((0,E.t)("auth.google-sso.unable-to-get-info")))):window.setTimeout(i,250)},250)}));async function L(e,r){let n=await C();return await P(n,{dispatch:e,apiUrl:"/api/session/google_auth/signin_or_signup",origin:r})}async function O({dispatch:e,origin:r,redirectUrl:n}){let a=await C();return n&&e(d.WY({redirectUrl:n})),await P(a,{dispatch:e,apiUrl:N,origin:r})}function R(e,r,n){(0,p.g)("google_sso_login_redirect_attempt",n,{fromMsTeams:r}),document.cookie=S+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";let a=JSON.stringify({apiUrl:N,redirectPath:e});document.cookie=`${S}=${encodeURIComponent(a)}; path=/`;let i=r?s.Ay.unsafeRedirectMsTeams:s.Ay.redirect,o="/start_google_sso?should_use_redirect_instead=1";r&&(o+="&from_ms_teams=1"),i(o)}function P(e,{dispatch:r,apiUrl:n,origin:i,__TEST_ONLY_markDone:s}){let l=!!i&&Object.values(w).includes(i);return new Promise(async(b,S)=>{await (0,h.sT)({googleUserInfo:e},`google-${l?"one-tap":"sso"}`);try{let{data:o}=await function(e,r){let n={name:r.name,token:r.token,token_type:r.tokenType,google_fed_cm_enabled:(0,T.kc)().google_federated_cm??!1};return c.Ay.post(e,n)}(n,e);r(f.s.flash((0,E.t)("auth.sign-in-success",{email:o.meta.email}))),o.meta&&o.meta.email_domain_type?((0,a.sx)("Sign Up (GTM)",{isWorkEmail:(0,I.iE)(o)}),await (0,g.p)("sign_up_google_sso")):((0,a.sx)("google_sso",{eventSubtype:"google_sso_success_signin",user_id:o?.meta?.id,origin:i}),await (0,g.p)("sign_in_google_sso")),b(o.meta)}catch({data:g}){let n=(0,E.Jv)({data:g},g?.message),a=(0,E.t)("auth.google-sso.unable-to-auth"),c=o.D?.getState().auth.redirectUrl||"",h=(0,u.wd)(c);l&&(0,p.g)("google_one_tap_login_error",i,{error:n}),n===(0,E.t)("auth.error.account-not-found")?(function({userInfo:e,origin:r,dispatch:n,redirectUrl:a,requiresExtraInfoStep:i}){var s;null!=r&&(0,u.MZ)()?(n(d.Ts({origin:r,formState:m.qB.SIGN_UP,redirectUrl:a})),n(y.to({type:_.a,data:{}}))):o.D?.getState()?.modalShown?.type!==_.a&&(0,u.MZ)()&&(0,v.xi)("authenticate_google_user","Skipped launching auth modal before arkose verification",{auth_origin:r},{reportAsSentryError:!0,modeEventName:"google_sso_skipped_launching_auth_modal"}),s={...e,origin:r},n(d.OZ({googleIdToken:s.token})),n(d.fX({googleTokenType:s.tokenType})),n(d.m9({value:s.name})),s.origin&&n(d.dl({authOrigin:s.origin})),n(d.E({formState:m.qB.VERIFY_HUMAN,prevState:m.qB.SIGN_UP,postVerificationAction:i?d.hu():d.PJ()}))}({userInfo:e,origin:i,dispatch:r,redirectUrl:c,requiresExtraInfoStep:h}),s?.()):(r(f.s.error(n||a,15e3)),S(Error(n||(0,E.t)("auth.google-sso.unable-to-auth"))))}})}},737433:(e,r,n)=>{n.d(r,{H:()=>s});var a=n(723069),i=n(299321),o=n(517333);let s={trigger(e){if(o.eD)switch(e){case i.JA.GENERIC:o.eD.triggerHaptic(a.i.GENERIC,1,0);break;case i.JA.LEVEL:o.eD.triggerHaptic(a.i.LEVEL,1,0);break;case i.JA.SNAP:o.eD.triggerHaptic(a.i.SNAP,1,0);break;default:throw Error(e)}}}},173292:(e,r,n)=>{n.d(r,{o:()=>i,p:()=>o});var a=n(411855);function i(){let e=new Set;return{subscribe:r=>(e.add(r),()=>{e.delete(r)}),emit(r){for(let n of e)n(r)}}}function o(e,r){(0,a.useEffect)(()=>e.subscribe(r),[r,e])}},939683:(e,r,n)=>{n.d(r,{NV:()=>u,U:()=>l,am:()=>d,hC:()=>c});var a=n(411855),i=n(188507),o=n(126049),s=n(988022);function l(){let e=(0,i.Pj)();return a.useCallback((r,n,a)=>{let i=e.getState();(0,s.ds)(r,i.openFile?.key,i,n,a)},[e])}function c(){let e=(0,i.Pj)();return a.useCallback((r,n)=>{let a=e.getState();(0,s.GS)(r,a.openFile?.key??"",a,n??{})},[e])}function d(){let e=(0,i.Pj)();return a.useCallback((r,n,a)=>{let i=e.getState(),o=i.openFile?.key,l=i.user&&i.user.id;(0,s.ds)(r,o,i,{userId:l,...n},a)},[e])}function u(e){let r=function(){let e=(0,i.Pj)();return a.useCallback((r,n,a)=>{let i=e.getState(),o=i.currentUserOrgId??"";(0,s.Fr)(r,o,i,{...n},a)},[e])}();return(0,o.A)(r,e,{leading:!0,trailing:!1})}},560945:(e,r,n)=>{n.d(r,{cU:()=>i,wY:()=>o});var a=n(411855);let i={width:0,height:0};function o(e,r){let[n,i]=(0,a.useState)(null);return(0,a.useLayoutEffect)(()=>{if(!e||!e.current)return;let a=new ResizeObserver(a=>{for(let o of a)if(e.current===o.target){let e=o.contentRect.width,a=o.contentRect.height;if(n&&n.width===e&&n.height===a)continue;let s={width:o.contentRect.width,height:o.contentRect.height};i(s),r&&r(s)}});return a.observe(e.current),()=>a.disconnect()},[e,r,n]),n}},963490:(e,r,n)=>{n(411855),n(358145)},910522:(e,r,n)=>{n.d(r,{R:()=>i});var a=n(411855);function i(e="minute"){let[r,n]=(0,a.useState)(new Date);return(0,a.useEffect)(()=>{let r=setInterval(()=>{n(new Date)},function(e){if("number"==typeof e)return e;switch(e){case"second":return 1e3;case"minute":return 6e4;case"hour":return 36e5;case"day":return 864e5}}(e));return()=>clearInterval(r)},[e]),r}},602126:(e,r,n)=>{n.d(r,{ww:()=>i});var a=n(411855);function i(e,r){var n,i;return n="mousedown",i=[e.current],a.useEffect(()=>{function e(e){i.some(r=>r&&r.contains(e.target))||r(e)}return document.addEventListener(n,e),()=>{document.removeEventListener(n,e)}},[n,r,i]),e}},988652:(e,r,n)=>{n.d(r,{M:()=>i});var a=n(411855);function i(){let e=a.useRef(null),r=function(e){let[r,n]=a.useState(!1);return a.useEffect(()=>{let r=()=>n(!0),a=()=>n(!1),i=e.current;if(i)return i.addEventListener("mouseover",r),i.addEventListener("mouseleave",a),()=>{i.removeEventListener("mouseover",r),i.removeEventListener("mouseleave",a)}},[e.current,n]),r}(e);return[a.useCallback(r=>{e.current=r},[]),r,e]}},22332:(e,r,n)=>{n(411855)},358145:(e,r,n)=>{n.d(r,{$J:()=>s,ZC:()=>i,qd:()=>o});var a=n(411855);function i(e){let r=(0,a.useRef)();return(0,a.useEffect)(()=>{r.current=e},[e]),r.current}function o(e){let r=(0,a.useRef)({value:e,prev:void 0}),n=r.current.value;return e!==n&&(r.current={value:e,prev:n}),r.current.prev}function s(e){let[r,n]=(0,a.useState)(void 0);return(0,a.useEffect)(()=>{n(e)},[e]),r}},62935:(e,r,n)=>{n.d(r,{M:()=>i});var a=n(411855);function i(e){let r=(0,a.useRef)(null);return(0,a.useImperativeHandle)(e,()=>r.current),r}},404843:(e,r,n)=>{n.d(r,{x:()=>a});let a=(0,n(38580).eU)(!1)},220331:(e,r,n)=>{n.d(r,{R_:()=>A,w5:()=>w});var a=n(88823),i=n.n(a),o=n(511617),s=n(737947),l=n(966712),c=n(187623),d=n(27087),u=n(743905),m=n(662275),p=n(988022),h=n(779709),_=n(349719),g=n(347935),f=n(929594),E=n(517333),y=n(563706),b=!1;let I=null,T=null,v=null,S=["mousemove","mousedown","keydown","touchstart","touchmove","wheel"];function w(){return b}function A(e){let{user_data:r,idle_timeout_duration_in_secs:n,idle_timeout_last_active_at:a,idle_timeout_org_name:w,frame_context:A}=(0,l.Ay)();r&&n&&a&&w&&!b&&function(e,r,n,a,w,A){if((0,y.Q1)()||(0,y.Ji)()||y.Ay.isIpadNative)return;let N=`last-active-at-${e.email}`,C="idle_timeout_last_active_at_change",L=(0,o.GZ)(),O=L&&"embed"===w,R=L&&"integration"===w,P=.05*r,D=Math.min(60,r/2),k=new c.P,M=e=>{localStorage.setItem(N,e.toString()),k.sendToAllTabs(C)};M(n);let F=()=>{document.hasFocus()&&d.Ay.post(`/api/user/${e.id}/idle_timeout_last_active_at`,{is_embed:L.toString()&&!h.z4.getIsExtension()}).then(e=>{let r=e.data.meta.idle_timeout_last_active_at;r&&M(r)}).catch(e=>{401===e.status&&U()})},x=()=>!!A&&A.getState().modalShown?.type===f.xn,U=()=>{if(A&&A?.getState().authedUsers.orderedIds.length===1&&((0,p.Pg)(),u.U2.clear()),O)s.Ay.reload("idleSessionTimeout-embed");else if(R){let{pathname:e,search:r}=s.Ay.location,n=`${e}${r}&integration_host=msft`;window.location.replace(n)}else h.z4.getIsExtension()&&(0,l.kc)().dt_dev_mode_vscode_idle_timeout?(0,_.$g)():s.Ay.redirect(`/idle_timeout?fuid=${e.id}&redirect_uri=${encodeURIComponent(window.location.href)}`)},B=()=>Math.floor(Date.now()/1e3);v&&S.forEach(e=>{document.removeEventListener(e,v)}),v=i()(F,1e3*P,{trailing:!1,leading:!0}),S.forEach(e=>{document.addEventListener(e,v)});let V=()=>{T&&clearTimeout(T),I&&clearTimeout(I),!x()||document.hasFocus()||E.eD||A?.dispatch(m.ES(f.eN));let n=parseInt(localStorage.getItem(N))+r-B();I=setTimeout(()=>{g.N.getIdleTimeoutPrecheck({fuid:e.id}).then(e=>{let n=e.data.meta.idle_timeout_last_active_at;n&&n+r>=B()?M(n):U()}).catch(e=>{U()})},1e3*n),O||(T=setTimeout(()=>{x()||A?.dispatch(m.to({type:f.eN,data:{orgName:a,duration:r,onHide:()=>{F()}}}))},1e3*(n-D)))};k.register(C,()=>{V()}),V(),b=!0}(r,n,a,w,A?.type,e)}},300785:(e,r,n)=>{n.d(r,{Rg:()=>s,YA:()=>c,hM:()=>d,qr:()=>l});var a=n(319130),i=n(939863),o=(e=>(e.MINUTES="minutes",e.HOURS="hours",e.DAYS="days",e))(o||{});let s="on-idle-timeout-logged-in-ipc-key";function l(e){return e<3600?[e/60,"minutes"]:e<86400?[e/3600,"hours"]:e%86400==0?[e/86400,"days"]:[e/3600,"hours"]}function c(e,r){let n={duration:r};switch(e){case"minutes":return(0,i.tx)("settings_tab.idle_session_timeout.time.minutes",n);case"hours":return(0,i.tx)("settings_tab.idle_session_timeout.time.hours",n);case"days":return(0,i.tx)("settings_tab.idle_session_timeout.time.days",n)}}function d(e){return!!(0,a.Et)(e)&&e<43200}},966712:(e,r,n)=>{n.d(r,{AU:()=>k,Ay:()=>M,CZ:()=>O,DC:()=>I,Hk:()=>b,IX:()=>S,KI:()=>g,Lz:()=>F,O_:()=>A,Uv:()=>D,W4:()=>L,YG:()=>w,b5:()=>N,bg:()=>P,ck:()=>R,gq:()=>d,kc:()=>_,mm:()=>U,sL:()=>C,tl:()=>T,u3:()=>f,u4:()=>y,w0:()=>E});var a,i=n(773595),o=n(443259),s=n(479296),l=n(402958),c=n(179940);let d={disable_personal:!0,teams:[],team_users:[],roles:[],orgs:[],org_drafts_owners:[],user_favorite_fonts:[],is_free_user:!0,is_starter_user:!0},u=(()=>{let e=JSON.parse(JSON.stringify(T().feature_flags||{})),r={...e};if(r.sites=r.sites&&!1,r.dakota=r.dakota&&!1,r.cooper=r.cooper&&!1,r.campfire=r.campfire&&!1,Object.freeze(r),l.L&&e.feature_flag_proxy){let e=new Set;return new Proxy(r,{get(r,n){let a=r[n];return void 0===a||e.has(n)||(l.L.addFeatureFlagEvaluation(n,a),e.add(n)),a}})}return r})(),m=(()=>{let e=JSON.parse(JSON.stringify(T().feature_flag_rules||{}));return e.hash_function=T().feature_flags_hash_function||"md5",e})(),p=(()=>{let e=JSON.parse(JSON.stringify(T().launchdarkly_client_flags||{}));return Object.freeze(e),e})(),{zoom_client_user_agent:h}=T();h&&function(e,r){if(e.navigator.userAgent!==r){let n={get:function(){return r}};try{Object.defineProperty(e.navigator,"userAgent",n)}catch(r){e.navigator=Object.create(navigator,{userAgent:n})}}}(window,h);let _=(0,s.D)(()=>u),g=(0,s.D)(()=>m),f={};function E(){return p}function y(e,r,n){return _()[e]?r:n}(a||(a={})).withFeatureFlag=function(e,r){if(_()[e])return r;let n=e=>null;return n.displayName="",n};let b=e=>{self.INITIAL_OPTIONS={...self.INITIAL_OPTIONS,editing_file:e}};function I(){return T().payment_flow_data}function T(){return window.INITIAL_OPTIONS||{}}function v(e){Object.defineProperty(T(),e,{writable:!1,configurable:!1})}function S(){return"local"===T().cluster_name}function w(){return"staging"===T().cluster_name}function A(){return"prod"===T().cluster_name}function N(){return S()||w()||T().cluster_name?.startsWith("devenv")||"gov-staging"===T().cluster_name}function C(){let e=T().cluster_name;return e?"gov"===e:"figma-gov.com"===window.location.hostname}function L(){return C()?"support-figgov@figma.com":"support@figma.com"}function O(e){return e||(e=""),e.startsWith("/")&&(e=e.slice(1)),`https://${C()?"static.figma-gov.com":"static.figma.com"}/${e}`}function R(e){return e||(e=""),e.startsWith("/")&&(e=e.slice(1)),O(`uploads/${e}`)}function P(){return T().consent_region}function D(){return function(e){switch(e){case"staging":return e;case"prod":return"production";case"gov":return"gov-prod";case"gov-staging":return"gov-staging";default:return"development"}}(T().cluster_name||"")}function k(){return T().editing_file?.editor_type??void 0}v("jubilee"),v("campfire_model_enabled");let M=T,F="https://fakepath.figma.com",x=!1;function U(){let e=[(0,o.$e)(),(0,o.bQ)()];for(let r=0;r<e.length;r++){let n=e[r];if(n){let e=(0,c.xL)(n);if(e.locale)return!function(e){let r=e.locale,n=!!e.persistLocale;if(!r||!n)return;let a=T().user_data;if(!a)return;let{id:o,locale:s}=a;i.Yv.includes(r)&&s!==r&&(x||(x=!0,fetch("/api/user",{method:"PUT",body:JSON.stringify({id:o,locale:r}),headers:{"Content-Type":"application/json"}})))}(e),(0,o.$W)(e.locale)}}let r=(0,o.Np)();if(r){let e=r.split("/")[1];if(e&&i.Yv.includes(e))return(0,o.$W)(e)}let{user_data:n}=T();return n?.locale&&n?.locale!==i.MY?[n?.locale,i.MY]:[i.MY]}},259829:(e,r,n)=>{n.d(r,{SI:()=>m,fF:()=>u});var a=n(966712),i=n(563706),o=n(198181),s=n(270499),l=n(898148);let c=window.location.pathname;function d(e){return!function({isDesign:e,isDesignPrototypeViewer:r,isDevMode:n,isEmbed:i,isEmbedKitV2Enabled:s,isFigjam:l,isFigjamUi3LabEnabled:c,isFigjamMobileDevicesEnabled:d,isMobileDevice:u,isSites:m,isSlides:p,isCooper:h,isLitmus:_,isIllustration:g,isUI3ForceDevOnly:f,isUi3LabEnabled:E,isVSCodeExtension:y,isLoggedOutDesignExp:b}){return!!f||!!b||!!p||!!m||!!h||!!_||!!g||(y?!!(0,a.kc)().dt_vscode_ready_for_dev:!!i&&!!s||(l?!!c&&(!u||d):(!!e||!!n)&&!r&&!i&&!!(0,o.M)()&&E))}(e)?"ui2":"ui3"}function u(){let e=(0,a.AU)();return d({isDesign:"design"===e,isDesignPrototypeViewer:c.startsWith("/proto/"),isDevMode:"design"===e,isEmbed:a.Ay().frame_context?.type==="embed",isEmbedKitV2Enabled:_("embedkit_v2"),isFigjam:"whiteboard"===e,isFigjamUi3LabEnabled:(0,s.Y)({trueOverrideUserFlag:h("unified_index_v3_figjam_toggle_override_true"),falseOverrideUserFlag:h("unified_index_v3_figjam_toggle_override_false"),canOverride:(0,l.Q4)(),defaultValue:(0,l.KL)()}),isFigjamMobileDevicesEnabled:_("unified_index_v3_figjam_mobile_device"),isMobileDevice:i.Xb,isSites:"sites"===e,isSlides:"slides"===e,isCooper:!1,isLitmus:!1,isIllustration:!1,isUI3ForceDevOnly:(0,s.Y)({trueOverrideUserFlag:h("force_ui3_dev_only_override_true"),falseOverrideUserFlag:h("force_ui3_dev_only_override_false"),canOverride:"prod"!==(0,a.Ay)().cluster_name,defaultValue:!1}),isUi3LabEnabled:p(),isVSCodeExtension:!1,isLoggedOutDesignExp:!1})}function m(){return d({isDesign:!0,isUi3LabEnabled:p(),isDesignPrototypeViewer:!1,isDevMode:!1,isEmbed:!1,isEmbedKitV2Enabled:_("embedkit_v2"),isFigjam:!1,isFigjamUi3LabEnabled:!1,isFigjamMobileDevicesEnabled:!1,isMobileDevice:!1,isSites:!1,isSlides:!1,isCooper:!1,isLitmus:!1,isIllustration:!1,isUI3ForceDevOnly:!1,isVSCodeExtension:!1,isLoggedOutDesignExp:!1})}function p(){return(0,s.Y)({trueOverrideUserFlag:h(l.pU),falseOverrideUserFlag:h(l.EM),canOverride:!0,defaultValue:(0,l.Mx)()})}function h(e){for(let r of a.Ay()?.user_flags||[])if(r.name===e)return!0;return!1}function _(e){return!0===(0,a.kc)()[e]}},599445:(e,r,n)=>{function a(){return!1}n.d(r,{Is:()=>function e(r){let n=r.recordingKey();if(n){if(r.__registeredRecordingKey)n!==r.__registeredRecordingKey&&(c(r),e(r));else for(let e in r.__registeredRecordingKey=n,r.__playbackHandlers)o(l(n,e),r.__playbackHandlers[e])}},YJ:()=>u,aH:()=>d,k3:()=>a,nL:()=>c});let i=Object.create(null);function o(e,r){if(-1!==(e in i?i[e].indexOf(r):-1))throw Error(`Tried to register already registered playback handler for ${e}`);i[e]||(i[e]=[]),i[e].push(r)}function s(e,r){let n=e in i?i[e].indexOf(r):-1;if(-1===n)throw Error(`Tried to unregister unknown playback handler for ${e}`);i[e].splice(n,1),0===i[e].length&&delete i[e]}function l(e,r){return`${e}.${r}`}function c(e){if(e.__registeredRecordingKey){for(let r in e.__playbackHandlers)s(l(e.__registeredRecordingKey,r),e.__playbackHandlers[r]);e.__registeredRecordingKey=null}}let d="SKIP_RECORDING";function u(e,r,n,a={}){a.record||(e=>e);let i=a.playback||(e=>e),c=e.__playbackHandlers||(e.__playbackHandlers=Object.create(null)),d=c[r];if(c[r]=e=>n(i(e)),d&&e.__registeredRecordingKey){let n=l(e.__registeredRecordingKey,r);s(n,d),o(n,c[r])}return function(e){0===n.length&&(e=void 0),n(e)}}},314866:(e,r,n)=>{n.d(r,{Kd:()=>o,TH:()=>l,ZS:()=>m,lb:()=>u,s_:()=>i});var a=n(939863);n(96328);let i=["education","software-development","user-research","design","marketing","product-management","other"],o=["student","educator","software-development","user-research","design","marketing","product-management","ux-writing","data-analytics","other"],s={student_or_educator:"education","student-or-educator":"education",developer:"software-development","full-stack-developer":"software-development","front-end-developer":"software-development",user_researcher:"user-research","user-researcher":"user-research","ux-researcher":"user-research",designer:"design",marketer:"marketing",product_manager:"product-management","product-manager":"product-management",something_else:"other"};function l(e){return i.includes(e)||o.includes(e)?e:s[e]??"other"}function c(){return(0,a.t)("job-title.other")}function d(e){if(!e)return null;switch(s[e]??e){case"education":return(0,a.t)("job-title.education");case"student":return(0,a.t)("job-title.student");case"educator":return(0,a.t)("job-title.educator");case"software-development":return(0,a.t)("job-title.software-development");case"user-research":return(0,a.t)("job-title.research");case"design":return(0,a.t)("job-title.design");case"marketing":return(0,a.t)("job-title.marketing");case"product-management":return(0,a.t)("job-title.product-management");case"ux-writing":return(0,a.t)("job-title.ux-writing");case"data-analytics":return(0,a.t)("job-title.data-analytics");case"other":return c();default:return null}}function u(e){return d(e)??c()}function m(e){return d(e)??(0,a.t)("job-title.other")}},374626:(e,r,n)=>{n.d(r,{An:()=>A,E3:()=>T,FZ:()=>E,Hj:()=>b,Iz:()=>w,LJ:()=>g,M2:()=>f,S_:()=>v,fp:()=>_,md:()=>h,p6:()=>S,xP:()=>I,yu:()=>y,zl:()=>p});var a=n(411855),i=n(38580),o=n(646240),s=n(288706),l=n(841563),c=n.n(l),d=n(297666),u=n(614255),m=n(286640);let p=new class{constructor(){this.jotaiAtomStore=(0,i.y$)(),this.unsubscribeCallbacks=new Set,this.rerenderAtomsProviders=new Set}get(e){return this.jotaiAtomStore.get(e)}set(e,...r){return this.jotaiAtomStore.set(e,...r)}sub(e,r,n={}){let a=!1,i=()=>{a||(a=!0,Promise.resolve().then(()=>{a=!1,r()}))},o=this.jotaiAtomStore.sub(e,()=>{try{n.batchMicrotask?i():r()}catch(e){throw console.error(e),e}});return this.unsubscribeCallbacks.add(o),()=>{o(),this.unsubscribeCallbacks.delete(o)}}resetForTests(){for(let e of this.unsubscribeCallbacks)e();for(let e of(this.jotaiAtomStore=(0,i.y$)(),this.unsubscribeCallbacks=new Set,this.rerenderAtomsProviders))e();this.rerenderAtomsProviders=new Set}};function h(e,r){let n=(0,o.Pj)(),[[i,s,l],c]=a.useReducer(r=>{let a=n.get(e);return Object.is(r[0],a)&&r[1]===n&&r[2]===e?r:[a,n,e]},void 0,()=>[n.get(e),n,e]),d=n.get(e);(s!==n||l!==e)&&(c(),d=n.get(e));let m=r?.deferToFrame??!1;return a.useEffect(()=>{let r;let a=n.sub(e,()=>{m?(void 0!==r&&cancelAnimationFrame(r),r=requestAnimationFrame(c)):c()});return c(),()=>{void 0!==r&&cancelAnimationFrame(r),a()}},[n,e,m]),a.useDebugValue(d),d instanceof Promise?(0,u.Y)(d):d}function _(e,r){return[h(e,r),(0,o.Xr)(e)]}function g(e,r){return(0,i.eU)(e=>r(e),(r,n,...a)=>n(e,...a))}function f(e,r=c()){return(0,i.eU)(r=>r(e),(n,a,i)=>{let o=n(e),s="function"==typeof i?i(o):i;r(o,s)||a(e,s)})}function E(e,r){return(0,i.eU)(r=>r(e),(n,a,i)=>{let o=r(n(e),i,n);a(e,o)})}function y(e,r){let n=null,a="write"in e?(0,i.eU)(r=>r(e),(r,n,...a)=>n(e,...a)):(0,i.eU)(r=>r(e));return a.onMount=a=>{let i;try{i=r({target:e,setSelf:a,onSet:e=>{n=e}})}catch(e){throw console.error(e),e}n?.(p.get(e));let o=p.sub(e,()=>{n?.(p.get(e))});return()=>{i?.(),o()}},a}function b(e,r){return y(e,({onSet:e})=>{e(r)})}function I(e){let r={past:[],present:e,future:[]},n=(0,i.eU)(r),a=(0,i.eU)(e=>e(n).present,(e,r,a)=>{let{past:i,present:o}=e(n);a!==o&&r(n,{past:i.concat(o),present:a,future:[]})});return{valueAtom:a,undoAtom:(0,i.eU)(e=>e(n).past.length>0,(e,r)=>{let{past:a,present:i,future:o}=e(n);a.length>0&&r(n,{past:a.slice(0,a.length-1),present:a[a.length-1],future:[i].concat(o)})}),redoAtom:(0,i.eU)(e=>e(n).future.length>0,(e,r)=>{let{past:a,present:i,future:o}=e(n);o.length>0&&r(n,{past:a.concat(i),present:o[0],future:o.slice(1)})}),historyAtom:(0,i.eU)(e=>{let{past:r,present:a,future:i}=e(n);return r.concat(a).concat(i)},(e,a)=>a(n,r))}}function T(e,r,{subscribeToChanges:n}={subscribeToChanges:!1},{debounceTime:a,stringify:o=JSON.stringify,parse:l=JSON.parse}={}){function c(){let n=(0,m.TQ)();if(n){let r=n.getItem(e);if(null!=r)try{let e=l(r);if(void 0!==e)return e}catch(e){}}return r}let u=(0,s.t_)(()=>c()),p=(()=>{let r=r=>{let n=(0,m.TQ)();n&&n.setItem(e,o(r))};return null==a?r:(0,d.s)(r,a)})(),h=(0,i.eU)(e=>e(u),(e,r,n)=>{r(u,n),p(e(u))});return n?y(h,({setSelf:r})=>{let n=n=>{n.key===e&&r(()=>c())};return window.addEventListener("storage",n),()=>window.removeEventListener("storage",n)}):h}function v({get:e,subscribe:r}){let n=!1,a=(0,i.eU)(0),o=()=>p.set(a,e=>e+1);return a.onMount=()=>{n=!0;let e=r(o);return()=>{n=!1,e(),Promise.resolve().then(o)}},(0,i.eU)(r=>(r(a),Promise.resolve().then(()=>{n||o()}),e()))}function S(e,r){var n;return n=(0,i.eU)(n=>{let a=[];for(let r=0;r<e.length;r++)a[r]=n(e[r]);return r(...a)}),(0,s.mg)(n,e=>e,c())}function w(e,r){let n=(0,s.Iz)(e,r);return n.removeAll=()=>{n.setShouldRemove(()=>!0),n.setShouldRemove(null)},n}function A(e){let[r,n]=a.useState(0);return a.useEffect(()=>{let e=()=>n(r+1);return p.rerenderAtomsProviders.add(e),()=>{p.rerenderAtomsProviders.delete(e)}}),a.createElement(o.Kq,{store:p.jotaiAtomStore},e.children)}},588169:(e,r,n)=>{n.d(r,{Cg:()=>E,Ug:()=>p,dZ:()=>_,rd:()=>f,v7:()=>y,xt:()=>b});var a=n(299321),i=n(286640);n(939863);var o=n(22774),s=n(988022),l=n(356390),c=n(38329),d=n(187623),u=n(27087);let m="keyboardLayoutPreference",p="keyboardLayoutPreference",h=new Map(Object.entries(a.aTn).map(([e,r])=>[e,r])),_=new Map(Object.entries(a.aTn).map(([e,r])=>[r,e]));function g(e){let[r]=e.split(":"),n=h.get(r);return r&&n?{layout:n}:{layout:a.aTn.UNKNOWN}}function f({layout:e}){if(!i.x4)return;let r=a.aTn[e];i.x4.setItem(m,r),new d.P().sendToOtherTabs(p,r),function(e){try{let r=c.D.getState();(0,s.uE)("keyboard_layout_preference",r,{layout:a.aTn[e.layout],eventName:e.eventName,detectedLayout:e.detectedLayout,detectedLayoutStr:e.detectedLayoutStr})}catch(e){}}({layout:e,eventName:"user_manual_change"}),a.glU.reloadShortcuts(e),u.Ay.put("/api/user",{keyboard_preference:a.aTn[e],keyboard_preference_method:"manual"})}function E(e){if(!i.x4)return;i.x4.setItem(m,e);let{layout:r}=g(e);l.Y5&&l.Y5.isReady()&&a.glU.reloadShortcuts(r)}function y(){return function(){if(i.x4){let e=i.x4.getItem(m);if(null!=e)return g(e)}if(!c.D)return{layout:a.aTn.UNKNOWN};let e=c.D.getState().user?.keyboard_layout,r=h.get(e);if(!e||!r)return{layout:a.aTn.UNKNOWN};let n=e?r:a.aTn.UNKNOWN;return E(a.aTn[n]),{layout:n}}().layout}function b(){return 0===Object.keys(a.aTn).length?[]:[{name:"keyboard-layout-menu-option",callback:(e,r,n)=>{n(o.FU({tab:"layout"})),l.Y5.triggerAction("toggle-keyboard-shortcuts")}}]}},285468:(e,r,n)=>{n.d(r,{C:()=>k});var a=n(411855),i=n(414507),o=n(444751),s=n(118653),l=n(813746),c=n(320174),d=n(919911),u=n(399260),m=n(300638),p=n(171931),h=n(822094),_=n(541535),g=n(849271),f=n(239251),E=n(376962),y=n(908838),b=n(226661),I=n(736923),T=n(922070),v=n(776621),S=n(638933),w=n(496734),A=n(405196),N=n(453301),C=n(184276),L=n(650625),O=n(88537),R=n(690864);let P=[T.Ey,c.v5,c.YW,l.Db,o.iK,I.jL];function D({value:e,valueFormat:r,onSave:n,themeOverride:D,lexicalContentClassName:k,namespace:M,placeholder:F,innerRef:x,plugins:U=[],hasToolbar:B=!1,isEditable:V=!0}){let G={link:V?R.nf:R.Jj,list:{listitem:R.Aw,ol:R.cg,ul:R.e6},text:{bold:R.ZS,italic:R.kQ,strikethrough:R.Hn,code:R.ti},paragraph:R.FY,heading:{h1:R.R_,h2:R.R_},code:R.DV,...D},H=(0,a.useMemo)(()=>{if("lexical"===r||!e)return'{"root":{"children":[{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1}],"direction":null,"format":"","indent":0,"type":"root","version":1}}';let n=(0,s.D)({nodes:[T.Ey,c.v5,c.YW,l.Db,o.iK,I.jL],onError:r=>{console.error(r),(0,v.$D)(i.FigmaTeam.EXTENSIBILITY,r,{extra:{htmlString:e}})}});return(0,w.D)(e,n,"json")},[r,e]),[W,K]=(0,a.useState)(!1),[Y,$]=(0,a.useState)(null);return a.createElement(m.n,{initialConfig:{namespace:M,onError(n){console.error(n),(0,v.$D)(i.FigmaTeam.EXTENSIBILITY,n,{extra:{namespace:M,editorInput:"lexical"===r?e:H,valueFormat:r}})},theme:G,nodes:P,editorState:"lexical"===r?e:H,editable:V}},a.createElement("div",{ref:e=>{null!==e&&$(e)}},a.createElement(b.$,{contentEditable:a.createElement(p.a,{className:k,ref:x}),placeholder:F,ErrorBoundary:h.A}),B&&a.createElement(O.A,{setIsLinkEditMode:K}),V&&Y&&a.createElement(C.A,{anchorElem:Y,isLinkEditMode:W,setIsLinkEditMode:K})),a.createElement(_.G,null),a.createElement(f.Q,null),a.createElement(E.E,{transformers:[d.mK,d.NB,d.eA,d.gb,d.d7,d.Pi,d.WY,d.Eg,d.gW,d.Sq,d.TB,d.Up]}),"lexical"===r&&a.createElement(A.D,{value:e}),!V&&"html"===r&&a.createElement(w._,{htmlString:e}),n&&a.createElement(y.D,{onChange:(e,r,a)=>{a.has("focus")||e.read(()=>{n({html:(0,S.T)(r),lexical:JSON.stringify(e.toJSON())})})},ignoreSelectionChange:!0}),a.createElement(N.A,null),a.createElement(u.x,null),a.createElement(g.W,null),a.createElement(L.A,null),...U)}function k({value:e,valueFormat:r,themeOverride:n,lexicalContentClassName:i,namespace:o,innerRef:s}){return a.createElement(D,{value:e,valueFormat:r,isEditable:!1,lexicalContentClassName:i,themeOverride:n,namespace:o,innerRef:s})}},915440:(e,r,n)=>{n.d(r,{Rs:()=>b,ZA:()=>f,oS:()=>v,p:()=>I});var a=n(411855),i=n(138020),o=n(772824);n(525763);var s=n(560512),l=n(718983),c=n(772841);n(776250);var d=n(44948),u=n(358145),m=n(966712),p=n(391388),h=n(743282),_=n(869661);function g(){let e=a.useContext(_.ob);if(!e)throw Error("Tried to use useSubscription outside a LiveGraph context provider");return e}function f(){return g().client}function E(e){return!e.hasOwnProperty("enabled")||!!e.enabled}function y(e){return Array.isArray(e)&&2===e.length&&(0,i.bu)(e[0])}let b=(0,m.kc)().use_subscription_v2?function(...e){let r=y(e)?e[0].view:e[0],n=y(e)?e[0].args:e[1],o=(y(e)?e[1]:e[2])??{},l=(0,d.zN)(n,i.lw),m=E(o),_=function(){let[e,r]=a.useState(0);return a.useCallback(()=>r(e=>e+1),[])}(),f=g(),b=o.traceId,I=function(e,r){let n=a.useRef((0,h.g)()),o=(0,u.ZC)(e),s=(0,u.ZC)(r);return void 0===o||void 0===s||o===e&&(0,i.lw)(r,s)||(n.current=(0,h.g)()),n.current}(r,l),T=a.useMemo(()=>f.client?.viewHasStaticQueries(r)?{...l,__requestId:I}:l,[l,I,r,f.client]),v=m&&T?f.mock?f.mock.useSubscription(r,T):f.client?.getViewResult(r,T)??c.F5:s.F4;return a.useEffect(()=>{if(!f.mock&&!1!==m&&T)return f.client?.subscribe(r,T,_,b)},[m,f.client,f.mock,r,b,T,_]),a.useMemo(()=>p.Qw.from(v),[v])}:function(...e){let r=y(e)?e[0].view:e[0],n=y(e)?e[0].args:e[1],o=(y(e)?e[1]:e[2])??{},l=E(o),[d,u]=a.useState(l&&n?c.F5:s.F4),m=g(),[h,_]=a.useState(n),f=o.traceId,b=d;return m.mock&&n&&(b=m.mock.useSubscription(r,n)),n&&!(0,i.lw)(n,h)&&(_(n),u(b=l?c.F5:s.F4)),a.useEffect(()=>{if(m.mock)return;if(!1===l){u(s.F4);return}if(!h)return;let e=m.client?.subscribe(r,h,e=>{u(e)},f);return()=>{e?.()}},[l,h,m.client,m.mock,r,f]),a.useMemo(()=>p.Qw.from(b),[b])};function I(e,r,n={}){let i=g(),s=E(n),[l,c]=a.useState({}),[d]=a.useState(()=>new o.A(i.client,()=>c({})));return a.useLayoutEffect(()=>{d.update(e,s?r:[])},[d,e,r,s]),a.useLayoutEffect(()=>()=>d.clear(),[d]),a.useMemo(()=>r.map(e=>({args:e,result:s?p.Qw.from(d.currentResult(e)):p.Qw.disabled()})),[d,r,s,l])}class T{constructor(e,r,n){this.viewArgs=e,this.traceId=(0,h.g)(),this.errors=null,this._isLoading=!0,this.timer=new l.M({onTimeout:()=>r(this),timeoutMs:n})}finish(){this._isLoading=!1,this.timer.finish()}get timeElapsedMs(){return this.timer.getTime()}get wasBackgrounded(){return this.timer.backgrounded}get wasOffline(){return this.timer.wasOffline}get isLoading(){return this._isLoading}}function v(e,r,n){let o=a.useRef(null),s=!1!==n.enabled,l=n.subscriptionLogger,c=a.useRef(r),d=o.current;!o.current&&s&&(o.current=new T(r,e=>l.onEvent("stuck",m,e),l.stuckMs));let u=s?o.current.traceId:void 0,m=b(e,r,{enabled:s,traceId:u});if(null===d&&s&&l.onEvent("initiated",m,o.current),!(0,i.lw)(r,c.current)){let e=new T(r,e=>l.onEvent("stuck",m,e),l.stuckMs);o.current?.isLoading&&(o.current.finish(),l.onEvent("canceled",m,o.current,{nextTraceId:e.traceId})),o.current=e,l.onEvent("initiated",m,o.current),c.current=r}return a.useEffect(()=>{"loaded"===m.status?o.current?.isLoading&&(o.current.finish(),l.onEvent("loaded",m,o.current)):"errors"===m.status&&o.current?.isLoading&&(o.current.finish(),o.current.errors=m.errors,l.onEvent("error",m,o.current))},[m,m.errors,m.status,l]),a.useEffect(()=>()=>{o.current?.isLoading&&(o.current.finish(),l.onEvent("canceled",m,o.current))},[]),m}},286098:(e,r,n)=>{n.d(r,{Nc:()=>u,XJ:()=>l,ad:()=>s,f2:()=>d,h7:()=>o,zb:()=>c});var a=n(99506),i=n(711525);function o(e){return{id:e.key,key:e.key,name:e.name,fileRepoId:e.file_repo_id,editorType:e.editor_type,folderId:e.folder_id,teamId:e.team_id,hasFileLinkPassword:!1,thumbnailUrl:e.thumbnail_url||"",thumbnailUrlOverride:e.thumbnail_url_override||"",thumbnailGuid:e.thumbnail_guid||null,clientMeta:e.client_meta,touchedAt:e.touched_at,lastPublishedAt:e.last_published_at??"",canView:!0,linkAccess:e.link_access,repo:{id:e.file_repo_id||"",name:"",createdAt:new Date,deletedAt:new Date,trashedAt:null,updatedAt:new Date,linkAccess:e.link_access,protoLinkAccess:e.proto_link_access,hasFileLinkPassword:!1,hasProtoLinkPassword:!1,orgAudience:null,orgBrowsable:!0,hasActiveBranches:!1},project:null,isTeamTemplate:e.is_team_template||!1}}function s(e,r,n,i){return{userId:r,resourceType:a.bk.FOLDER,orgId:n??null,teamId:e.team_id??null,sidebarSectionId:i??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id,project:{id:e.id,path:e.path,orgId:n,teamId:e.team_id,updatedAt:new Date(e.updated_at),createdAt:new Date(e.created_at),deletedAt:null!=e.deleted_at?new Date(e.deleted_at):null,trashedAt:null!=e.trashed_at?new Date(e.trashed_at):null,viewOnlyAt:e.is_view_only?new Date:null,inviteOnlyAt:e.is_invite_only?new Date:null,canEdit:!1,description:e.description,team:{id:e.team_id??"",orgId:n,name:"",licenseGroup:{name:""},studentTeamAt:null,eduGracePeriod:{id:"",isValid:!1},restrictionsList:[],subscription:a.Qh.OK,gracePeriodEnd:null,canEdit:!1,canAdmin:!1}}}}function l(e,r,n,o){return{userId:r,orgId:n??null,teamId:e.fig_file?.team_id??null,sidebarSectionId:o??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id??"",resourceType:a.bk.PROTOTYPE,prototype:{id:e.id||"unknown",name:e.name,fileKey:e.fig_file.key,pageId:e.page_id,thumbnailUrl:e.thumbnail_url,file:{parentOrgId:e.fig_file.parent_org_id||null,key:e.fig_file.key,folderId:e.fig_file.folder_id,teamId:e.fig_file.team_id,fileRepoId:e.fig_file.file_repo_id,hasProtoLinkPassword:e.fig_file.has_proto_link_password,name:e.fig_file.name,editorType:e.fig_file.editor_type,protoLinkAccess:e.fig_file.proto_link_access,createdAt:new Date(e.fig_file.created_at),trashedAt:e.fig_file.trashed_at?new Date(e.fig_file.trashed_at):null,prototypeUrl:{status:i.tT.Loaded,data:e.fig_file.prototype_url}}}}}function c(e,r,n,i){return{userId:r,orgId:n??null,sidebarSectionId:i??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id,resourceType:a.bk.TEAM,teamId:null,team:{id:e.id,orgId:e.org_id,name:e.name,deletedAt:null,imgUrl:null,licenseGroup:null}}}function d(e,r,n,i){return{userId:r,orgId:n??null,teamId:e.team_id??null,sidebarSectionId:i??null,createdAt:new Date,updatedAt:new Date,resourceId:e.key,resourceType:a.bk.FILE,file:o(e)}}function u(e,r,n,i){return{userId:r,orgId:n??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id,sidebarSectionId:i??null,resourceType:a.bk.WORKSPACE,teamId:null,workspace:{...e,orgId:n,colorConfig:null,description:null,orgAccess:"",createdAt:new Date,canAdmin:!1,canView:!1,canCreateTeam:!1,publicLinkControlsSetting:"",publicLinkControlsMaxExpiration:"",hasCustomPublicLinkControlsSetting:!1,isPluginAllowlisted:!1,canRead:!1,imgUrlTransformed:e.imgUrl}}}},995672:(e,r,n)=>{n.d(r,{r:()=>i});var a=n(411855);function i({setMaxWidth:e,render:r}){let[n,i]=a.useState(new Map),o=a.useMemo(()=>n.size?Math.max(...n.values()):void 0,[n]);a.useLayoutEffect(()=>e(o),[o,e]);let s=a.useCallback((e,r)=>i(n=>{if(n.get(e)===r)return n;let a=new Map(n);return"number"==typeof r?a.set(e,r):a.delete(e),a}),[]);return a.createElement(a.Fragment,null,r({reportWidthOfValue:s}))}n(629019),n(538697)},886653:(e,r,n)=>{function a(e){let r=null;return function(...n){if(null!=r&&r.args.length===n.length){let e=!0;for(let a=0,i=n.length;a<i;a++)if(n[a]!=r.args[a]){e=!1;break}if(e)return r.result}return(r={args:n,result:e(...n)}).result}}function i(e){let r=new WeakMap;return n=>{let a=r.get(n);if(a)return a;let i=e(n);return r.set(n,i),i}}n.d(r,{cm:()=>i,xx:()=>a})},994190:(e,r,n)=>{n.d(r,{$G:()=>p,Ad:()=>o,B3:()=>f,Hh:()=>g,Jj:()=>_,S:()=>h,Y7:()=>E,ai:()=>c,f1:()=>m,kJ:()=>d,s$:()=>u});var a=n(742808),i=n(692106);let o=["memory.fullscreen.","performance.fullscreen."],s=!0;function l(e,r){let n=-1/0;return()=>{let a=Date.now()/1e3;a-n>e&&(n=a,r())}}window.addEventListener("error",e=>{if(!s)return;s=!1;let{message:r,filename:n}=e,i=/abort/i.test(r),o=/\/compiled_/.test(n);(0,a.Rh)("unhandled_error",{abort:i,fullscreen:o})});let c=l(30,()=>{(0,a.Rh)("context_lost")}),d=l(30,()=>{(0,a.Rh)("context_restored")});function u(e){window.figmaPerfTesting&&window.postMessage({name:e,value:performance.now()/1e3},"*")}function m(){(0,a.Rh)("dirty_after_load")}function p(){(0,a.Rh)("consecutive_flushes")}function h(){(0,a.Rh)("consecutive_image_change_skips")}function _(){(0,a.Rh)("image_paste_error")}function g(){(0,a.Rh)("unsaved_changes_bell")}function f(e){(0,a.Rh)("reconnecting_banner",{client:e})}function E(e){return(0,i.x)(e,!0,e.productType)}},453418:(e,r,n)=>{n.d(r,{Sd:()=>y,Zp:()=>f,tB:()=>E,wc:()=>m}),n(966712);var a=n(563706);n(286640);var i=n(988022),o=n(356390),s=n(617453),l=n(601538),c=n(38329),d=n(187623),u=n(27087),m=(e=>(e.MouseScrollToZoom="mouse-scroll-wheel-zoom",e.RightClickDragToPan="right-click-drag-to-pan",e))(m||{}),p=(e=>(e.UserManualChange="user_manual_change",e.Onboarding="onboarding",e))(p||{});function h({navigationPreference:e,enabled:r,eventOrigin:n}){var a,o;new d.P().sendToOtherTabs(e,JSON.stringify(r)),function(e){try{let r=c.D.getState();(0,i.uE)("navigation_preferences",r,{navigationPreference:e.navigationPreference,enabled:e.enabled,eventOrigin:e.eventOrigin})}catch(e){}}({navigationPreference:e,enabled:r,eventOrigin:n}),a=e,o=r,c.D.getState().user?.id&&u.Ay.put("/api/user","mouse-scroll-wheel-zoom"===a?{mouse_scroll_to_zoom:o}:{right_click_drag_to_pan:o})}let _=[!0,1,"1","true"];function g(e){return _.includes(e)}function f(e){c.D.getState().isFullscreenDocumentLoaded&&function(e){o.Y5.triggerAction(e?"set-scroll-wheel-zoom-enabled":"set-scroll-wheel-zoom-disabled")}(g(e))}function E(e){c.D.getState().isFullscreenDocumentLoaded&&function(e){o.Y5.triggerAction(e?"set-right-click-pan-enabled":"set-right-click-pan-disabled")}(g(e))}function y(){return[{separator:!0,platforms:["!ipad"]},{action:"toggle-scroll-wheel-zoom",platforms:["!ipad"],hideForQuickCommand:a.Ay.isIpad,"data-onboarding-key":l.oi.ZOOM,callback:()=>{h({navigationPreference:"mouse-scroll-wheel-zoom",enabled:!(0,s.UK)().scrollWheelZoom.getCopy(),eventOrigin:"user_manual_change"})},property:(0,s.UK)().scrollWheelZoom,propertyValue:!0},{action:"toggle-right-click-pan",platforms:["!ipad"],hideForQuickCommand:a.Ay.isIpad,"data-onboarding-key":l.oi.PAN,callback:()=>{h({navigationPreference:"right-click-drag-to-pan",enabled:!(0,s.UK)().rightClickPan.getCopy(),eventOrigin:"user_manual_change"})},property:(0,s.UK)().rightClickPan,propertyValue:!0},{separator:!0,platforms:["!ipad"],flags:["!edit"]}]}},316082:(e,r,n)=>{n.d(r,{y:()=>s});var a=n(411855),i=n(299321),o=n(939683);function s(){let e=(0,o.U)(),r=i.h3O?.getSessionState(),n=function(){let[e,r]=a.useState(navigator.onLine);return a.useEffect(()=>{let e=()=>r(navigator.onLine);return window.addEventListener("online",e),window.addEventListener("offline",e),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",e)}},[]),e}();return a.useEffect(()=>{!n&&r&&r!==i.kul.DETACHED&&e("offline_multiplayer_discrepancy",{isNavigatorOnline:navigator.onLine,isJoined:r===i.kul.JOINED,multiplayerSessionState:r.toString()})},[n,r,e]),n||r===i.kul.JOINED}},183297:(e,r,n)=>{n.d(r,{AS:()=>o,En:()=>l,mL:()=>s,u9:()=>c,vs:()=>i}),n(411855);var a=n(27087);let i=25,o="next",s="prev";function l(e,r,n,i=o){return new Promise((o,l)=>{let c=n&&n.pagination,d=c&&(i===s?c.prev_page:c.next_page);(null==c||d)&&(d=d||`${e}${-1===e.indexOf("?")?"?":"&"}page_size=${r}`,(0,a.k9)(d).then(({data:e})=>{let r=e.pagination;null==c?c=r:i===s?r.prev_page&&(c.prev_page=r.prev_page):c.next_page=r.next_page,e.meta.pagination=c,o(e.meta)},l))})}function c(e){return!!(!e?.pagination||e.pagination.next_page)}},988261:(e,r,n)=>{n.d(r,{_H:()=>a});function a(){let e=`figma.pc=; domain=${window.location.hostname}; path=/; max-age=0; expires=Thu, 01 Jan 1970 00:00:00 UTC;`;document.cookie=e}},812115:(e,r,n)=>{n.d(r,{R:()=>o,X:()=>i});var a=n(503457);let i=(0,a.kf)("lazy_quill_editor",{isCodesplit:!0,ComponentFactory:async()=>({default:(await Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(741),n.e(5215)]).then(n.bind(n,367780))).QuillEditor})}),o=(0,a.kf)("lazy_readonly_quill_editor",{isCodesplit:!0,ComponentFactory:async()=>({default:(await Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(741),n.e(5215)]).then(n.bind(n,367780))).ReadOnlyQuillEditor})})},1372:(e,r,n)=>{n.d(r,{$9:()=>u,EM:()=>s,J1:()=>c,V$:()=>d,oI:()=>m});var a=n(517655);let i=[],o=0;function s(e){let r=e.split(":");return{channel:r[0],timestamp:parseInt(r[1]),generation:parseInt(r[2]),signature:r[3]}}let l=(0,a.Xs)(),c=l,d=l.v2;function u(){c.disconnect();let e=(0,a.Xs)();c=e,d=e.v2,c.connect()}function m(){(0,a.oI)()}window.realtimeClient=l,[].push(function(){o>0||i.forEach(e=>{o+=1,setTimeout(()=>{try{e()}finally{o-=1}},6e4+24e4*Math.random())})})},517655:(e,r,n)=>{n.d(r,{EM:()=>h,Xs:()=>f,oI:()=>_});var a,i=n(776250),o=n(966712),s=n(845755),l=n(30637);let c=!1,d=!1,u=[],m=[],p=0;function h(e){let r=e.split(":");return{channel:r[0],timestamp:parseInt(r[1]),generation:parseInt(r[2]),signature:r[3]}}function _(){d=!0}let g=-1;function f(){let e=null,r=null,n=null,a=null,u=null,p={},_=!0,f=Date.now(),E=0,y=null,b=!0,I=null,T=()=>{null!=u&&clearInterval(u),null!=a&&a.close(),u=null,a=null,_=!0},v=()=>{y&&(clearTimeout(y),y=null),I&&(window.removeEventListener("online",I),I=null),C()},S=()=>{if(T(),!b||null!=y)return;let e=4+(Math.min(128,4*Math.pow(2,E))-4)*Math.random();console.log(`[Realtime] Disconnected. Will attempt reconnect in ${e.toFixed(0)} seconds.`),y=setTimeout(()=>{console.log(`[Realtime] Attempting reconnect now after waiting ${e.toFixed(0)} seconds.`),v()},1e3*e),E++,I=()=>{console.log("[Realtime] Attempting reconnect due to connectivity change."),navigator.onLine&&v()},window.addEventListener("online",I)},w=e=>{a&&a.readyState===a.OPEN&&a.send(`tok:${e.channel}:${e.timestamp}:${e.generation}:${e.signature}`)},A=e=>{let r=(0,o.tl)().user_data;if(!r?.id){console.warn("Can't post to me channel without user id available"),(0,i.sx)("Me Channel UserId Missing");return}let n=`/me-${r?.id}`;if(!(n in p)){if(console.warn("We're not subscribed to the me channel"),(0,i.sx)("Me Channel Subscription Missing"),r?.realtime_token){(0,i.sx)("Me Channel Resubscribe");let e=h(r.realtime_token);p[n]=e,w(e)}else{console.warn("We're unable to subscribe to the me channel; server will reject this message"),(0,i.sx)("Me Channel No Token");return}}if(!a||a.readyState!==a.OPEN){(0,l.nl)()||console.warn("Sending to me without open websocket"),(0,i.sx)("Me Channel Websocket Missing");return}let s=JSON.stringify([{channel:n,data:e}]);a.send(`pme:${s}`)},N=e=>{delete p[e],a&&a.readyState===a.OPEN&&a.send(`uns:${e}`)},C=()=>{if(d)return;T();let r="";r=("https:"===window.location.protocol?`wss://${window.location.host}`:`ws://${window.location.host}`)+"/api/realtime_v2";let n=window.INITIAL_OPTIONS&&window.INITIAL_OPTIONS.release_git_tag||"";r+=`?release_git_tag=${n}&user_id=${window.INITIAL_OPTIONS?.user_data?.id||""}`,(a=new WebSocket(r)).onopen=e=>{for(let e in E=0,console.log(`[Realtime] Connected to ${r}.`),u=setInterval(()=>{a.send("ping")},3e4+5e3*Math.random()-2500),c&&Date.now()-f>6e4&&m.forEach(e=>{setTimeout(e,0)}),c=!0,p)w(p[e])},a.onmessage=r=>{if("pong"===r.data){f=Date.now();return}let n=r.data.substr(0,4);if("tok:"===n){let e=h(r.data.substr(4));p[e.channel]=e;return}let a={};if("ouc:"===n){let e=r.data.substr(4).split(":");3!==e.length&&console.warn("Got ouc: command with wrong number of params");for(let r=0;r<e.length;r++)"null"===e[r]&&(e[r]=null);a={type:"verify_user_state",org_user_count:e[0]&&parseInt(e[0]),org_user_updated:e[1]&&new Date(parseInt(e[1])).toISOString(),target_user_id:e[2]}}else if("sub:"===n||"uns:"===n){let e=r.data.split(":"),n=e[e.length-1];if("ok"===n)return;if(delete p[e[1]],"expired"===n){if(!_)return;_=!1,a={type:"token_expired"}}else{console.warn(r.data);return}}else{try{a=JSON.parse(r.data)}catch(e){console.warn(`unexpected non-JSON realtime message: ${r.data}`);return}null!=a.err&&(console.warn("encountered error message from realtime",a.err),S())}e&&e(a)},a.onclose=e=>{a=null,S()}},L={},O=new Set,R=new Map,P={connect:C,disconnect:()=>{b=!1,T(),p={}},setCallback:r=>{e=e=>{let n=e.method,a=Object.keys(e).filter(e=>s.C.has(e)).map(r=>({type:r,value:e[r]})),i=!1;r(e),a.forEach(r=>{let a=L[r.type];a&&Object.keys(a).map(e=>a[e]).filter(e=>e.methods[n]).forEach(n=>{n.callback(r.value,e.method)})})}},setOnSubscribeCallback:e=>{r=e},setOnUnsubscribeCallback:e=>{n=e},subscribe:(e,n)=>{let a=p[e.channel];p[e.channel]=e,a||w(e),!1!==n&&O.add(e.channel),r&&r(e.channel)},unsubscribe:(e,r)=>{if(!1!==r&&O.delete(e),!1===r&&O.has(e))return;let a=R.get(e);a&&a.size>0||(delete p[e],N(e),n&&n(e))},postToMeChannel:e=>{A(e)}},D=()=>{let e=(0,o.tl)().user_data;return e?.realtime_token?h(e.realtime_token):null},k=["post","put","delete"],M=e=>"string"==typeof e?{type:e,token:D(),methods:k}:e,F={subscriptions:p,subscribe:function(e,r){let n=M(e),a=n.token||D();if(!a)return()=>{};let i=(g+=1,`${g}:${performance.now()}`),o=L[n.type]||{},s=n.methods||k,l={};return s.forEach(e=>{l[e]=!0}),o[i]={methods:l,callback:r},L[n.type]=o,(R.get(a.channel)||new Set).add(i),P.subscribe(a,!1),()=>{let{channel:e}=a,r=R.get(e);r?.delete(i);let o=L[n.type];if(o&&(delete o[i],0===Object.keys(o).length)){let e=n.type;delete L[e]}P.unsubscribe(e,!1)}}};return{...P,v2:F}}a=function(){p>0||u.forEach(e=>{p+=1,setTimeout(()=>{try{e()}finally{p-=1}},6e4+24e4*Math.random())})},m.push(a)},99380:(e,r,n)=>{n.d(r,{kS:()=>l,q5:()=>d});var a=n(411855);n(188507),n(407436),n(881388);var i=n(939863);n(738269),n(662275),n(356390),n(457630),n(335682),n(611978),n(973131),n(694517),n(493536),n(335650);var o=n(36657);(0,n(237870).Ju)(function(e){return a.createElement(o.R,{title:(0,i.tx)("recordings.restart_modal_title"),confirmText:(0,i.tx)("general.restart"),onConfirm:e.onConfirm,open:e.open,onClose:e.onClose},(0,i.tx)("recordings.restart_modal_confirmation"))},"RECORDING_CONFIRM_RESTART_MODAL"),n(38329),n(966712);var s=n(860601);let l="none-device",c={initializeRecordingMedia:s.Xv,abortRecording:s.lQ,startWalkthroughRecording:s.lQ,stopWalkthroughRecording:s.Xv,restartWalkthroughRecording:s.lQ,togglePauseRecording:s.lQ,isRecording:!1,isPaused:!1,mediaStream:void 0,getRecordingDataForSinatraCreate:s.pp,getRecordingLengthMs:s.dD},d=a.createContext(c)},964937:(e,r,n)=>{n.d(r,{F:()=>o});var a=n(109388),i=n(775541);function o(e,r=document.createElement("div")){let n=(0,i.H)(r);return(0,a.flushSync)(()=>{n.render(e)}),r.innerHTML}},289329:(e,r,n)=>{n.d(r,{iw:()=>l,ld:()=>s});var a=n(737947),i=n(966712);let o=class e{static initialize(){let r=i.Ay().user_data?.email;if(r&&(-1!==r.indexOf("@figma)")||-1!==r.indexOf("@test.figma"))){let r=new URLSearchParams(a.Ay.location.search).get("safeModeRenderLimitMs");r&&(e.getForcedRenderTimeMsValue=parseInt(r))}}getForcedRenderTimeMs(){return e.getForcedRenderTimeMsValue}};o.getForcedRenderTimeMsValue=null,o.initialize();let s=new o,l=new class{constructor(e){this.safeModeOptions=e}getForcedRenderTimeMs(){let e=this.safeModeOptions.getForcedRenderTimeMs();return null!=e?e:-1}}(s)},522739:(e,r,n)=>{n.d(r,{D8:()=>c,GG:()=>u,T9:()=>_,lt:()=>m,mv:()=>h,oj:()=>d,u2:()=>p});var a=n(411855),i=n(564974),o=n(672517),s=n(153234);class l extends s.o6{constructor(){super(...arguments),this.onClick=s.cZ(this,"click",e=>this.props.onClick?this.props.onClick(e):s.aH),this.onContextClick=s.cZ(this,"contextmenu",e=>this.props.onContextMenu?this.props.onContextMenu(e):s.aH),this.onDoubleClick=s.cZ(this,"dblclick",e=>this.props.onDoubleClick?this.props.onDoubleClick(e):s.aH),this.onMouseDown=s.cZ(this,"mousedown",e=>this.props.onMouseDown?this.props.onMouseDown(e):s.aH),this.onMouseUp=s.cZ(this,"mouseup",e=>this.props.onMouseUp?this.props.onMouseUp(e):s.aH),this.onMouseMove=s.cZ(this,"mousemove",e=>this.props.onMouseMove?this.props.onMouseMove(e):s.aH),this.onMouseEnter=s.cZ(this,"mouseenter",e=>this.props.onMouseEnter?this.props.onMouseEnter(e):s.aH),this.onMouseLeave=s.cZ(this,"mouseleave",e=>this.props.onMouseLeave?this.props.onMouseLeave(e):s.aH),this.onPointerDown=s.Am(this,"pointerdown",e=>this.props.onPointerDown?this.props.onPointerDown(e):s.aH),this.onPointerUp=s.Am(this,"pointerup",e=>this.props.onPointerUp?this.props.onPointerUp(e):s.aH),this.onPointerMove=s.Am(this,"pointermove",e=>this.props.onPointerMove?this.props.onPointerMove(e):s.aH),this.onKeyUp=s.C0(this,"keyup",e=>this.props.onKeyUp?this.props.onKeyUp(e):s.aH),this.onKeyDown=s.C0(this,"keydown",e=>this.props.onKeyDown?this.props.onKeyDown(e):s.aH),this.onFocus=s.Ht(this,"focus",e=>this.props.onFocus?this.props.onFocus(e):s.aH),this.onBlur=s.Ht(this,"blur",e=>this.props.onBlur?this.props.onBlur(e):s.aH)}render(){let{recordingKey:e,forwardedRef:r,dataTestId:n,...a}=this.props;return this.recordingKey()&&(this.props.onClick&&(a.onClick=this.onClick),this.props.onDoubleClick&&(a.onDoubleClick=this.onDoubleClick),this.props.onMouseDown&&(a.onMouseDown=this.onMouseDown),this.props.onMouseMove&&(a.onMouseMove=this.onMouseMove),this.props.onMouseEnter&&(a.onMouseEnter=this.onMouseEnter),this.props.onMouseLeave&&(a.onMouseLeave=this.onMouseLeave),this.props.onMouseUp&&(a.onMouseUp=this.onMouseUp),this.props.onContextMenu&&(a.onContextMenu=this.onContextClick),this.props.onKeyUp&&(a.onKeyUp=this.onKeyUp),this.props.onKeyDown&&(a.onKeyDown=this.onKeyDown),this.props.onFocus&&(a.onFocus=this.onFocus),this.props.onBlur&&(a.onBlur=this.onBlur),this.props.onPointerDown&&(a.onPointerDown=this.onPointerDown),this.props.onPointerUp&&(a.onPointerUp=this.onPointerUp),this.props.onPointerMove&&(a.onPointerMove=this.onPointerMove)),n&&(a["data-testid"]=n),this.node(a,r)}}class c extends l{node(e,r){return a.createElement("div",{...e,ref:r})}}c.displayName="RecordableDiv",(0,o.tf)(c);class d extends l{node(e,r){return a.createElement("span",{...e,ref:r})}}d.displayName="RecordableSpan";class u extends l{node(e,r){return a.createElement("button",{...e,ref:r})}}u.displayName="RecordableButton";class m extends l{node(e,r){return a.createElement("a",{...e,ref:r})}}m.displayName="RecordableA";class p extends l{constructor(){super(...arguments),this.onChange=s.Z7(this,"change",e=>this.props.onChange?this.props.onChange(e):s.aH)}node(e,r){return a.createElement("input",{...e,onChange:this.onChange,ref:r,dir:"auto"})}}p.displayName="RecordableInput";class h extends l{constructor(){super(...arguments),this.onChange=s.Z7(this,"change",e=>this.props.onChange?this.props.onChange(e):s.aH)}node(e,r){return a.createElement("textarea",{...e,onChange:this.onChange,ref:r,dir:"auto"})}}function _({children:e}){let r=(0,a.useMemo)(()=>s.Fk()?(e,r)=>{let n=s.cC(r.recordingKey);return(0,a.useMemo)(()=>{if(!e||!r.recordingKey)return e;let a=s.fA(n,r.eventName,r=>Array.isArray(r)?e(...r):e(r));return(...e)=>a(e)},[n,r.eventName,e,r.recordingKey])}:g,[]);return a.createElement(i.g.Provider,{value:{useInteraction:r}},e)}function g(e){return e}h.displayName="RecordableTextarea"},733334:(e,r,n)=>{n.d(r,{F:()=>s,p:()=>l});var a=n(891721),i=n.n(a);let o=/[\u202A-\u202E\u2060-\u206F]/g;function s(e){return e?e.replace(o,"").normalize():e}function l(e){return i().sanitize(e)}},36381:(e,r,n)=>{n.d(r,{We:()=>o,qV:()=>i});var a=n(563850);async function i(e){let r=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",r))).map(e=>e.toString(16).padStart(2,"0")).join("")}function o(e,r){return s(e,r)}async function s(e,r){let n=r.split(".");if(2!==n.length)throw Error("Could not parse message and nonce.");let i=n[0],o=n[1],s=(0,a.D4)(i),l=(0,a.D4)(o),c=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:s},e,l);return new TextDecoder().decode(c)}},776621:(e,r,n)=>{n.d(r,{$D:()=>G,Bc:()=>L,Cp:()=>I,DZ:()=>N,ED:()=>X,Lo:()=>J,NU:()=>s.NUh,TX:()=>U,Tm:()=>k,XM:()=>O,Z8:()=>$,Zx:()=>b,fj:()=>q,h$:()=>z,hi:()=>P,it:()=>v,kF:()=>C,mR:()=>M,sC:()=>R,us:()=>H,uy:()=>V,wp:()=>K,x1:()=>Q,xO:()=>W,xZ:()=>D,xg:()=>y,xi:()=>Z,xn:()=>T,yO:()=>E,yR:()=>B,zV:()=>w});var a=n(960200),i=n(559114),o=n(414507),s=n(299321),l=n(623977),c=n(128797),d=n(966712),u=n(693160),m=n(408686),p=n(479296),h=n(878227),_=n(402958),g=n(286640);let f=(0,d.kc)().datadog_rum_report_sentry_errors?n(402958).L:void 0,E=[/a\[b\]\.target\.className\.indexOf is not a function/,/\(event\.target\.className \|\| ""\)\.indexOf is not a function/,/XHR for ".*" failed with status/,/Endpoint requires authenticated user/],y=[/\bintercomcdn\.com\b/,/\bkaspersky-labs\.com\b/,/\bchrome-extension:\/\//,/\bmoz-extension:\/\//,/\bsafari-extension:\/\//],b=new a.b("sentry");function I(e){l.Cp(e)}function T(e){for(let r of e.exception?.values||[])for(let e of r.stacktrace?.frames||[])e.filename&&(e.filename=(0,u.Br)(e.filename));e.request?.url&&(e.request.url=(0,u.Br)(e.request.url)),"string"==typeof e.tags?.url&&(e.tags.url=(0,u.Br)(e.tags.url))}function v(e){let{category:r,data:n}=e;if("xhr"===r||"fetch"===r){let e=n?.url;if(e&&(e.match(/segment.io/)||e.startsWith("/api/figment-proxy")||e.startsWith(`${location.origin}/api/figment-proxy`)))return null;n&&e&&e.startsWith("data:")&&(n.url=`${e.substring(0,36)}... (truncated from ${e.length} characters)`)}return b.trigger("breadcrumb",e),e}let S=!!(0,d.tl)().frontend_sentry_dsn&&!(0,d.tl)().local_dev_on_cluster,w=S,A=(0,d.kc)().slog_to_console||!1;var N=(e=>(e.Critical="critical",e.Major="major",e.Minor="minor",e.Trivial="trivial",e))(N||{});function C(e,r){S&&(l.NA(e,r),f?.setGlobalContextProperty(e,r))}function L(e){S&&(l.Wt(e),f&&f.setGlobalContext({...e,...f.getGlobalContext()}))}function O(e,r){S&&l.o(e,r)}function R(e){C("file.key",e.key),null===e.file_repo_id?C("branching","not enabled"):(C("branching_repo",e.file_repo_id),null===e.source_file_key?C("branching","main branch"):C("branching","user branch"))}function P(e){return e&&"filePath"in e}function D(e){C("file.key",e.key),null===e.fileRepoId?C("branching","not enabled"):(C("branching_repo",e.fileRepoId),null===e.sourceFileKey?C("branching","main branch"):C("branching","user branch"))}function k(e){e&&l.gV({id:e})}function M(e){e&&l.NA("org.id",e)}let F="figma.reporting",x="user.plan.max";function U(){return function(){let e;let r=(0,g.OZ)();if(!r)return;let n=r.get(F);if(n){try{e=JSON.parse(atob(n))}catch(e){r.delete(F);return}e?.uhp&&(0,g.DN)().set("user.plan.max",e.uhp),r.delete(F),r.set(F,btoa(JSON.stringify(e)),{path:"/api/figment-proxy/monitor"})}}(),(0,g.DN)().get(x)}function B(){let e=U();e&&(e&&l.NA(x,e),(0,h.v)({user_plan_max:e})),(0,h.v)({webpack:"true"})}function V(e){e&&l.NA("server_release",e)}let G=(0,p.n)((e,r,n)=>{let a;if(!(r.reportedToSentry||r.cause?.reportedToSentry))return r.reportedToSentry=!0,A&&console.error(r,n),S&&(l.v4(function(i){e!==o.FigmaTeam.UNOWNED&&i.setTag("area",e);let s=f?.getInternalContext()?.session_id;if(s){i.setTag("rum_session_id",s);let e="gov"!==(0,d.tl)().cluster_name?"dd":"dd-gov";i.setContext("rum",{session_link:`https://go/${e}/rum/sid/${s}`})}if(r.sentryTags)for(let e in r.sentryTags)i.setTag(e,r.sentryTags[e]);a=l.Cp(r,n)}),f&&f.addError(r,{captureContext:n,...e!==o.FigmaTeam.UNOWNED&&{area:e},...r.sentryTags})),a},"reportErrorToSentry");function H(e){A&&console.error(e),S&&l.wd(e)}function W(e,r){null==r&&G(e,Error(`value is ${void 0===r?"undefined":"null"}`))}function K(){let e=(0,d.tl)().release_manifest_git_commit;if(w&&e){let e=c.BF();e.startSession(),e.captureSession()}}let Y=null;function $(e){Y=e}function j(e,r,n,a,i){if((i={...i||{}}).logToConsole=i.logToConsole??s.NUh.DEFAULT,i.createSentryBreadcrumb=i.createSentryBreadcrumb??!0,i.modeEventName=i.modeEventName??"",i.forwardToDatadog=i.forwardToDatadog??!1,i.figmentOnly=i.figmentOnly??!1,i.reportAsSentryError=i.reportAsSentryError??!1,i.includePayloadAsTags=i.includePayloadAsTags??!1,i.logToConsole===s.NUh.ALWAYS||i.logToConsole===s.NUh.DEFAULT&&A)({debug:console.debug,info:console.info,warning:console.warn,error:console.error})[e].call(console,r,n,a);else{let o=window.FigmaMobile;o?.logMessageToNative&&o.logMessageToNative({severity:e,category:r,message:n,filePath:i.filePath,lineNumber:i.lineNumber,data:a})}if(i.createSentryBreadcrumb&&w&&null!=e){let i={level:e};n&&(i.message=n),a&&(i.data=a),r&&(i.category=r),l.ZQ(i)}if(i.reportAsSentryError){let e=Error(r?`[${r}] ${n}`:n);i.filePath&&(e.filePath=i.filePath,e.lineNumber=i.lineNumber),i.includePayloadAsTags?l.v4(r=>{if(a)for(let[e,n]of Object.entries(a))r.setTag(e,n);l.Cp(e)}):l.Cp(e)}if(i.reportOnFigmaScopeGuid&&(0,m.l)(i.reportOnFigmaScopeGuid,{severity:e,message:n,data:a,filePath:i.filePath,lineNumber:i.lineNumber,timestamp:Date.now()}),i.modeEventName){let e="";for(let r of i.modeEventName)"A"<=r&&r<="Z"?e+=r.toLowerCase():"-"===r?e+="_":e+=r;Y?.(e,a,i.forwardToDatadog)}_.y&&_.y.logger.log(n,a,function(e){switch(e){case"fatal":case"error":return"error";case"warning":return"warn";default:return"info"}}(e))}function z(e,r){!(0,d.kc)().numeric_id_sentry_monitoring||!e||!window.scheduler||(0,d.kc)().numeric_id_sentry_sample&&Math.random()>.05||scheduler.postTask(()=>{let n=(0,u.vn)(r.pathname),a=`${r.verb} ${n}`,i=[];JSON.parse(JSON.stringify(e),(e,r)=>(("id"===e||e.endsWith("_id")||e.endsWith("_id_or_key"))&&"number"==typeof r?i.push([e,r]):"_ids"===e.slice(-4)&&Array.isArray(r)&&r.some(e=>"number"==typeof e)&&i.push([e,r]),r)),i.length&&Q("alertOnNumericIds","numeric ids found in payload",{context:a,obj:e,foundPairs:i},{logToConsole:s.NUh.ALWAYS,reportAsSentryError:!0})},{priority:"background"})}function q(e,r,n,a,o,s,l){let c=(0,i.getSentrySeverityForFullscreenLevel)(e);if(!c)throw Error("unknown severity");l.filePath=n,l.lineNumber=a,j(c,r,o,s,l)}function X(e,r,n,a){j("debug",e,r,n,a)}let J=(0,p.D)((e,r,n,a)=>{j("info",e,r,n,a)});function Z(e,r,n,a){j("warning",e,r,n,a)}let Q=(0,p.D)((e,r,n,a)=>{j("error",e,r,n,a)})},852438:(e,r,n)=>{function a(e,r){let n=new Set,[a,i]=e.size<r.size?[e,r]:[r,e];for(let e of a)i.has(e)&&n.add(e);return n}function i(e,r){if(e.size!==r.size)return!1;for(let n of e)if(!r.has(n))return!1;return!0}function o(e,r,n){let a=new Map,[i,o]=e.size<r.size?[e,r]:[r,e];for(let[e,r]of i.entries()){let i=o.get(e);null!=i&&a.set(e,n(e,r,i))}return a}n.d(r,{iR:()=>a,wD:()=>o,yZ:()=>i})},708389:(e,r,n)=>{var a;n.d(r,{f:()=>a}),(e=>{let r=(e,r)=>e<r?-1:1,n=Intl.Collator().resolvedOptions().locale+"-u-co-emoji";e.LEXICOGRAPHICALLY=(e,a)=>"string"!=typeof e?r(e,a):RegExp("\\p{Extended_Pictographic}|\\p{Regional_Indicator}","u").test(e)&&RegExp("\\p{Extended_Pictographic}|\\p{Regional_Indicator}","u").test(a)?e.localeCompare(a,n):e.localeCompare(a),e.BY_DATETIME=(e,n)=>{if("string"!=typeof e)return r(e,n);let a=Date.parse(e),i=Date.parse(n);return a&&i?i-a:r(e,n)},e.byProperty=function(e,n=r){return(r,a)=>r[e]===a[e]?0:n(r[e],a[e])},e.byComparators=function(...e){return(r,n)=>{for(let a=0;a<e.length;a++){let i=(0,e[a])(r,n);if(0!==i)return i}return 0}},e.reverse=function(e){return(r,n)=>-1*e(r,n)}})(a||(a={}))},742668:(e,r,n)=>{n.d(r,{G:()=>a});var a=(e=>(e.SDKReady="sdkReady",e.Call="call",e.SetProperty="setProperty",e.GetProperty="getProperty",e.SetContainerDimensions="setContainerDimensions",e.Error="error",e.GetPermissionToShowSurvey="getPermissionToShowSurvey",e.SurveyClosed="surveyClosed",e))(a||{})},88570:(e,r,n)=>{n.d(r,{A:()=>g});var a=n(411855),i=n(511617),o=n(517333),s=n(966712),l=n(38580),c=n(374626),d=n(30637),u=n(111538),m=n(559036),p=n(19266);n(742668);let h=(0,l.eU)([]);function _(e,r){let{country:n,region:a}=e;return r.some(({country:e,region:r})=>(!e||n===e)&&(!r||a===r))}function g({children:e,onAttemptToShowSurvey:r,onSurveyClose:n,geofence:l={}}){var g;let f=(0,c.md)(u.EA),E=(g=function(){let e=(0,s.tl)();return{country:e.iso_code,region:e.viewer_region}}(),!(void 0!==l.exclude&&_(g,l.exclude))&&(void 0===l.include||_(g,l.include))),y=!(0,i.GZ)()&&!(0,d.lZ)()&&!(0,s.tl)().e2e_traffic&&f&&E&&(0,s.kc)().sprig_enabled&&!o.S8,[b,I]=(0,a.useState)(p.An),T=(0,c.md)(h);return(0,a.useEffect)(()=>{I(e=>(e.tearDown(),y?new p.Ay:p.An))},[y]),(0,a.useEffect)(()=>{b.setCallbacks({onAttemptToShowSurvey:r,onSurveyClose:n})},[r,n,b]),(0,a.useLayoutEffect)(()=>{p.Ay.setScreenAreasToAvoid(T)},[T]),a.createElement(m.M.Provider,{value:b},e)}(0,l.eU)(null,(e,r,n)=>{let a=e(h);r(h,[...a,n])}),(0,l.eU)(null,(e,r,n)=>{let a=e(h),i=a.indexOf(n);-1!==i&&r(h,a.slice(0,i).concat(a.slice(i+1)))})},647899:(e,r,n)=>{n.d(r,{iO:()=>p.DynamicConfig,f6:()=>p.EvaluationReason,w$:()=>T,aH:()=>m.aH,sq:()=>m.sq,w0:()=>h.w0,gP:()=>h.gP,hW:()=>v,vs:()=>S,Fj:()=>h.Fj,I7:()=>A});var a=n(411855);n(188507);var i=n(358145),o=n(966712),s=n(374626),l=n(38580);n(931828),n(582947);var c=n(697165),d=n(127351),u=n(624601),m=n(977373),p=n(581749),h=n(422705),_=n(67151),g=n(776250),f=n(567837),E=n(854282),y=n(675367),b=n(30637);let I=class e{static notInTestingEnvForLogging(){return("undefined"==typeof process||void 0===process?.env?.JEST_WORKER_ID)&&!(0,b.PN)()}static populateDynamicConfig(e,r){if(!this.FrozenDyanmicConfigs.get(e)){let n=(0,E.tc)(e,!0);if(null!==n&&n.getEvaluationDetails().reason!==p.EvaluationReason.Unrecognized)this.ToBeExposedDynamicConfigSet.add(e),null==this.LogExposureTimeoutHandle&&(this.LogExposureTimeoutHandle=window.setTimeout(this.LogExposureCallback,this.LogExposureDelayMs));else{if(this.notInTestingEnvForLogging()){let n={resource_type:"config",source:r,resource_name:e,statsig_ready:(0,y.r)()};(0,g.sx)(this.DataDogInvalidStatsigFetchKey,n,{forwardToDatadog:!0})}this.AlreadyExposedDynamicConfigSet.add(e)}this.FrozenDyanmicConfigs.set(e,n)}}static populateExperimentConfig(e,r){if(!this.FrozenDyanmicConfigs.get(e)){let n=(0,E.V1)(e,!0);if(null!=n)this.ToBeExposedExperimentConfigSet.add(e),null==this.LogExposureTimeoutHandle&&(this.LogExposureTimeoutHandle=window.setTimeout(this.LogExposureCallback,this.LogExposureDelayMs));else{if(this.notInTestingEnvForLogging()){let n={resource_type:"experiment",source:r,resource_name:e,statsig_ready:(0,y.r)()};(0,g.sx)(this.DataDogInvalidStatsigFetchKey,n,{forwardToDatadog:!0})}this.AlreadyExposedExperimentConfigSet.add(e)}this.FrozenDyanmicConfigs.set(e,n)}}static typeGuardBoolean(e){let r="boolean"==typeof e;return r||(0,_.KF)(!1,"Expected boolean, got "+typeof e),r}static getDynamicConfigBoolean(e,r,n,a=this.DefaultSourceLoggingString){this.populateDynamicConfig(e,a);let i=this.FrozenDyanmicConfigs.get(e);return null!=i?i.get(r,n,void 0):n}static getExperimentBoolean(e,r,n,a=this.DefaultSourceLoggingString){this.populateExperimentConfig(e,a);let i=this.FrozenDyanmicConfigs.get(e);return null!=i?i.get(r,n,void 0):n}static typeGuardNumber(e){let r="number"==typeof e;return r||(0,_.KF)(!1,"Expected number, got "+typeof e),r}static getDynamicConfigNumber(e,r,n,a=this.DefaultSourceLoggingString){this.populateDynamicConfig(e,a);let i=this.FrozenDyanmicConfigs.get(e);return null!=i?i.get(r,n,void 0):n}static getExperimentNumber(e,r,n,a=this.DefaultSourceLoggingString){this.populateExperimentConfig(e,a);let i=this.FrozenDyanmicConfigs.get(e);return null!=i?i.get(r,n,void 0):n}static typeGuardString(e){let r="string"==typeof e;return r||(0,_.KF)(!1,"Expected string, got "+typeof e),r}static getDynamicConfigString(e,r,n,a=this.DefaultSourceLoggingString){this.populateDynamicConfig(e,a);let i=this.FrozenDyanmicConfigs.get(e);return null!=i?i.get(r,n,void 0):n}static getExperimentString(e,r,n,a=this.DefaultSourceLoggingString){this.populateExperimentConfig(e,a);let i=this.FrozenDyanmicConfigs.get(e);return null!=i?i.get(r,n,void 0):n}static getFeatureGateFromInitialOptionsInternal(e){return{value:(0,o.kc)()[e]??!1,rule_id:(0,o.KI)()[(0,f.F)(e)]??null}}static getFeatureGateFromInitialOptions(r){if(!this.FrozenFeatureGates.has(r)){let n=e.getFeatureGateFromInitialOptionsInternal(r);this.FrozenFeatureGates.set(r,n)}let n=this.FrozenFeatureGates.get(r)?.value??!1;return this.logExposureForFeatureGate(r,n),n}static logExposureForFeatureGate(r,n){let a=e.getFeatureGateFromInitialOptionsInternal(r);this.AlreadyExposedFeatureGateSet.has(r)||(this.ToBeExposedFeatureGateExposureMap.set(r,a),null==this.LogExposureTimeoutHandle&&(this.LogExposureTimeoutHandle=window.setTimeout(this.LogExposureCallback,this.LogExposureDelayMs)))}static updateFeatureGateForTesting(e,r,n=null){this.FrozenFeatureGates.set(e,{value:r,rule_id:n})}static setInRenderServerForViewerTests(){this.InRenderServerForViewerTests=!0}static clear(){this.FrozenFeatureGates.clear(),this.FrozenDyanmicConfigs.clear(),this.AlreadyExposedFeatureGateSet.clear(),this.ToBeExposedFeatureGateExposureMap.clear(),this.AlreadyExposedDynamicConfigSet.clear(),this.ToBeExposedDynamicConfigSet.clear(),this.AlreadyExposedExperimentConfigSet.clear(),this.ToBeExposedExperimentConfigSet.clear(),null!=this.LogExposureTimeoutHandle&&(clearTimeout(this.LogExposureTimeoutHandle),this.LogExposureTimeoutHandle=null),this.InRenderServerForViewerTests=!1}};I.DataDogInvalidStatsigFetchKey="statsig.frozen_config_invalid_fetch",I.DefaultSourceLoggingString="web",I.AlreadyExposedExperimentConfigSet=new Set,I.ToBeExposedExperimentConfigSet=new Set,I.AlreadyExposedDynamicConfigSet=new Set,I.ToBeExposedDynamicConfigSet=new Set,I.FrozenDyanmicConfigs=new Map,I.FrozenFeatureGates=new Map,I.AlreadyExposedFeatureGateSet=new Set,I.ToBeExposedFeatureGateExposureMap=new Map,I.InRenderServerForViewerTests=!1,I.LogExposureCallback=()=>{if(!I.InRenderServerForViewerTests){if(!(0,y.r)()){if(console.error("Statsig is not ready to log exposures"),I.notInTestingEnvForLogging()){let e={resource_type:"exposure_log",source:"web",statsig_ready:(0,y.r)()};(0,g.sx)(I.DataDogInvalidStatsigFetchKey,e,{forwardToDatadog:!0})}I.LogExposureTimeoutHandle=window.setTimeout(I.LogExposureCallback,I.LogExposureDelayMs);return}for(let[e,r]of I.ToBeExposedFeatureGateExposureMap)(0,E.s1)(e,r)&&(I.ToBeExposedFeatureGateExposureMap.delete(e),I.AlreadyExposedFeatureGateSet.add(e));for(let e of I.ToBeExposedDynamicConfigSet)(0,E.xA)(e)&&(I.AlreadyExposedDynamicConfigSet.add(e),I.ToBeExposedDynamicConfigSet.delete(e));for(let e of I.ToBeExposedExperimentConfigSet)(0,E.XY)(e)&&(I.AlreadyExposedExperimentConfigSet.add(e),I.ToBeExposedExperimentConfigSet.delete(e));I.LogExposureTimeoutHandle=null}},I.LogExposureDelayMs=3e4,I.LogExposureTimeoutHandle=null;let T=I;async function v(e,r,n,a=!1){let i=s.zl.get(u.ZJ);return(n||(0,o.kc)().statsig_suspend)&&await i.initCompletedPromise,(0,c.Tq)(s.zl.get(u.ZJ),e,"getExperiment",r,a)}function S(e,r,n){return v(e,r,n,!0)}function w(e,r,n){let{userVersion:o}=(0,a.useContext)(d.B),l=(0,i.ZC)(o),m=(0,s.md)(u.ZJ),p=(0,a.useRef)(null);return{getConfig:(0,a.useCallback)(()=>((l!==o||null==p.current)&&(p.current=(0,c.Tq)(m,e,"useExperiment",r,n)),p.current),[e,r,l,m,o,n])}}n(959641);let A=(0,o.kc)().statsig_suspend?function(e,r,n){return(0,s.md)(u.u_),w(e,r,n)}:w;(0,o.kc)().statsig_suspend,(0,s.Iz)(({experimentName:e,keepDeviceValue:r,disableExposureLogging:n})=>(0,l.eU)(async a=>{await a(u.u_),a(u.gR);let i=a(u.ZJ),o=null;return()=>(null==o&&(o=(0,c.Tq)(i,e,"getExperiment",r,n)),o)}),(e,r)=>e.experimentName===r.experimentName&&e.disableExposureLogging===r.disableExposureLogging&&e.keepDeviceValue===r.keepDeviceValue)},96328:(e,r,n)=>{n.d(r,{$M:()=>I,DV:()=>g,EJ:()=>p,FS:()=>C,H9:()=>A,LD:()=>y,Qp:()=>L,Qt:()=>h,Rw:()=>N,VZ:()=>s,Vs:()=>w,YH:()=>u,Yx:()=>E,Zr:()=>i,_5:()=>l,fs:()=>v,gU:()=>S,hX:()=>d,lH:()=>m,sy:()=>T,td:()=>b,vE:()=>c,zS:()=>o});var a=n(178466);function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}function o(e){return e.toLowerCase().replace(/-(.)/g,function(e,r){return r.toUpperCase()})}function s(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function l(e){return e.replace(/([A-Z])/g,"_$1").toLowerCase()}function c(e){return i(e.split("_").join(" ").toLocaleLowerCase())}function d(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(e){let r=unescape(encodeURIComponent(e)),n=new Uint8Array(r.length);for(var a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}function m(e){return String.prototype.toWellFormed?e.toWellFormed():function(e){function r(e){return(63488&e)==55296}let n="";for(let a=0;a<e.length;++a){let i=e.charCodeAt(a);if(!r(i)){n+=e.charAt(a);continue}if(!((1024&i)!=0)&&a+1<e.length){let i=e.charCodeAt(a+1);if(r(i)&&(1024&i)!=0){n+=e.charAt(a)+e.charAt(a+1),++a;continue}}n+="\uFFFD"}return n}(e)}function p(e,r){return e.length>r?e.slice(0,r-1).trimEnd()+"\u2026":e}function h(e){let r=[];for(let n=0;n<e.length;n++){let a=function(e,r){let n=e.charCodeAt(r);if(Number.isNaN(n))return"";if(n<55296||n>57343)return e.charAt(r);if(55296<=n&&n<=56319){if(e.length<=r+1)throw Error("High surrogate without following low surrogate");let n=e.charCodeAt(r+1);if(56320>n||n>57343)throw Error("High surrogate without following low surrogate");return e.charAt(r)+e.charAt(r+1)}throw Error("Not the start of a single- or multibyte-character")}(e,n);n+=a.length-1,r.push(a)}return r}let _={numeric:!0,sensitivity:"base"};function g(e,r,n=_){let i=(0,a.Gq)().getPrimaryLocale(!1),o=new Intl.Collator(i,n);return e.sort((e,n)=>o.compare(r(e),r(n)))}let f={};function E(e,r="conjunction"){let n=(0,a.Gq)().getPrimaryLocale(!1);return f[r]||(f[r]=new Intl.ListFormat(n,{type:r})),f[r].format(e)}function y(e,r,n){return n=n||`${r}s`,1===e?r:n}function b(e,r,n){return null==e&&(e=0),`${e} ${y(e,r,n)}`}function I(e){return e<1e3?e.toString():e<1e5?`${Math.floor(e/100)/10}k`:e<1e6?`${Math.floor(e/1e3)}k`:e<1e8?`${Math.floor(e/1e5)/10}m`:e<1e9?`${Math.floor(e/1e6)}m`:e<1e11?`${Math.floor(e/1e8)/10}b`:`${Math.floor(e/1e9)}b`}function T(e){return encodeURIComponent(e.replace(/ /g,"-"))}function v(e){var r=e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[ .\-_\/\\:;|,&+=*]/g,"-").replace(/[^a-z0-9\-]/g,"").replace(/\-+/g,"-").replace(/^\-+/,"").substring(0,100).replace(/\-+$/,"");return T(r=["thumbnail","icon","code","snapshot","duplicate","embed","canvas","remixes"].includes(r)?"":r)}let S=e=>/[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,18}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/.test(e);function w(e){for(var r=0,n=e.length>>>2,a=new Uint8Array(3*n),i=0,o=[],s=0;s<127;s++)o[s]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(String.fromCharCode(s));for(;r<n<<2;){var l=o[e.charCodeAt(r++)],c=o[e.charCodeAt(r++)],d=o[e.charCodeAt(r++)],u=o[e.charCodeAt(r++)];a[i++]=l<<2|c>>>4,d>=0&&(a[i++]=c<<4|d>>>2),u>=0&&(a[i++]=d<<6|u)}return i===a.length?a:a.subarray(0,i)}function A(e){for(var r="",n=e.length,a=0;a<n;a+=1024)r+=String.fromCharCode.apply(String,e.subarray(a,a+1024));return btoa(r)}function N(e){for(var r="",n=0;n<e.length;n++)r+=("00"+e[n].toString(16)).slice(-2);return r}function C(e){return e.replace(/\s+/g,"")}function L(e,r){return C(e)===C(r)}},650322:(e,r,n)=>{n.d(r,{GU:()=>c,SH:()=>s,cn:()=>o});var a=n(181912);n(668860);var i=n(966712);function o(e){return!!e.student_validated_at}function s(e,r){return{hasGracePeriod:!!(e&&r in e),isInValidGracePeriod:(e&&e[r]?l(e,r):0)>0}}let l=(e,r)=>Math.ceil((0,a.A)(e[r].createdAt).add(7,"days").diff((0,a.A)(),"days",!0));function c(e,r,n,a){let o=s(e,n);if(!(0,i.kc)().edu_onboarding_grace_period||r||!a||!o.hasGracePeriod)return{showReminder:!1,showAccessRestricted:!1};let l=o.isInValidGracePeriod;return{showReminder:l,showAccessRestricted:!l}}},30637:(e,r,n)=>{n.d(r,{Lg:()=>d,Ns:()=>a.k3,PN:()=>c,b_:()=>i,lZ:()=>l,nl:()=>s});var a=n(599445);let i=!1,o="/test/interactions"===window.location.pathname||"/test/interactions/proto"===window.location.pathname||"/test/interactions/deck"===window.location.pathname||"/test/interactions/presenter"===window.location.pathname;function s(){return o}function l(){return o}function c(){return o||(0,a.k3)()}function d(){try{return!1}catch{return!1}}o&&new URLSearchParams(window.location.search).get("mode")},913016:(e,r,n)=>{function a(e){return i(24*e)}function i(e){return 300*Math.round(Date.now()/3e5)-3600*e}function o(){return new Date("2024-10-10T15:00:00Z")}n.d(r,{G5:()=>a,S6:()=>i,n:()=>o})},520581:(e,r,n)=>{n.d(r,{E:()=>m});var a=n(411855),i=n(179479),o=n(69961),s=n(148011),l=n(985740),c=n(863359),d=n(201547),u=n(951783);function m(e){return(0,s.TR)()?a.createElement(p,{...e}):a.createElement(a.Fragment,null,e.children)}function p({name:e,children:r,alsoTrack:n}){let m=(0,i.F)(n),p=(0,s.MF)({name:e,alsoTrackRef:m}),h=(0,s.ps)(p),{error:_,trackablePath:g}=h,f=(0,s.MF)(()=>(0,s.ET)(g,p)),E=(0,a.useCallback)(e=>{!_&&(0,s.VC)(g)&&(0,l.S)({trackablePath:g.map(e=>e.name),interactableId:p.name,trackingMethod:"automatic",...e},f())},[g,p,f,_]),y=(0,u.s)(E),b=(0,o.o3)(o.nt.trackableDebug),I=(0,s.MF)(()=>(0,s.R8)({componentName:"AutoInteractable",name:e,error:_,alsoTrackedProperties:f()}));return r=(0,d.C)({children:r,isDebugMode:b,name:e,color:_?"red":"blue",depth:g.length+1,getTooltipText:I}),a.createElement(c.f.Provider,{value:h},a.createElement("div",{className:"displayContents",...y},r))}},763658:(e,r,n)=>{n.d(r,{k:()=>d});var a=n(411855),i=n(179479),o=n(69961),s=n(148011),l=n(863359),c=n(201547);function d(e){return(0,s.TR)()?a.createElement(u,{...e}):a.createElement(a.Fragment,null,e.children)}function u({name:e,trackingEnabled:r,trackImpressions:n=!0,alsoTrack:d,children:u}){let m=(0,i.F)(d),p=(0,s.U2)({name:e,trackingEnabled:r,alsoTrackRef:m}),{trackablePath:h,error:_}=p,g=(0,s.MF)(()=>(0,s.ET)(h));(0,s.fK)(h,g,n);let f=(0,o.o3)(o.nt.trackableDebug),E=(0,s.MF)(()=>(0,s.R8)({componentName:"Trackable",name:e,error:_,alsoTrackedProperties:g()}));return u=(0,c.C)({children:u,isDebugMode:f,name:e,color:_?"red":"green",depth:h.length,getTooltipText:E}),a.createElement(l.f.Provider,{value:p},u)}},800576:(e,r,n)=>{function a(e){return null==e?"":new URL(e).origin}function i(e){if(0!==e.indexOf("data:"))throw Error("Invalid data URL: `data:` prefix missing");let[r,n]=e.slice(5).split(",");if(!n)throw Error("Invalid data URL: data part missing");let a=!!r&&r.length>0,i=a&&r.endsWith(";base64"),o=i?r.slice(0,-7):a?r:void 0;return new Blob([i?function(e){let r=atob(e),n=r.length,a=new Uint8Array(n);for(let e=0;e<n;e++)a[e]=r.charCodeAt(e);return a}(n):decodeURIComponent(n)],{type:o})}n.d(r,{G_:()=>i,Jk:()=>a})},547807:(e,r,n)=>{n.d(r,{Rq:()=>E,YV:()=>f,_5:()=>T,q$:()=>y,td:()=>a,vh:()=>I});var a,i=n(953657),o=n.n(i),s=n(595977),l=n.n(s),c=n(612543),d=n.n(c),u=n(27087),m=n(330654),p=n(776250),h=n(966712),_=n(776621);class g{constructor(e,r,n,a=!1){this.featureFlagKey=n,this.enforce=a,this._input=null,this._output=null;let i="function"==typeof r?r(m):r;this.validator=new b(e,i,this.enforce?"error":"warn")}async validate(e){let r=await e({xr:u.IF});if("string"==typeof this.featureFlagKey&&!(0,h.kc)()[this.featureFlagKey]||200!==r.status)return r;try{let e=await this.validator.validate(()=>Promise.resolve(r));if(this.enforce)return e;return{...e,data:{...r.data,...e.data}}}catch(e){if(this.enforce)throw e;return r}}}function f(e,r,n,a=!1){let i="function"==typeof r?r(m):r;return new g(e,m.object({meta:i}),n,a)}function E(e,r,n,a=!1){let i="function"==typeof r?r(m):r;return new g(e,m.object({meta:i,pagination:m.object({nextPage:m.string().nullable(),prevPage:m.string().nullable()})}),n,a)}function y(e,r){return new b(e,m.object({meta:r}),"error")}class b{constructor(e,r,n){this.debugKey=e,this.schema=r,this.logLevel=n,this._input=null,this._output=null}async validate(e){let r=await e({xr:u.IF}),n=this.schema.safeParse(r.data);if(n.success){let e=n.data,{data:a,...i}=r;return{...i,data:{...e}}}throw(0,p.sx)("Validator Failure",{name:this.debugKey,level:this.logLevel,error:JSON.stringify(n.error.flatten())},{forwardToDatadog:!0,batchRequest:!0}),"error"===this.logLevel&&(0,_.x1)("APIGetValidationFailure",`Validation failed for api response for ${this.debugKey}`,function(e){let r={};return e.issues.forEach(e=>{let n=e.path.map(e=>"number"==typeof e?"[#]":e).join(".");r[n]||=new Set,r[n].add(e.message)}),Object.keys(r).reduce((e,n)=>(e[n]=[...r[n]],e),{})}(n.error),{reportAsSentryError:!0}),n.error}}function I(){return{_input:null,_output:null,validate:e=>e({xr:u.IF})}}(e=>{e.toAPIParameters=function(e,r=[]){if(void 0===e)return e;let n=new Set(r);return Object.keys(e).reduce((r,a)=>{let i=n.has(a)?a:d()(a),o=e[a];switch(void 0!==o&&(r[i]=o),typeof o){case"undefined":break;case"number":case"boolean":r[i]=o.toString();break;default:r[i]=o}return r},{})},e.toCamelCase=function(e){return e.transform(e=>l()(e,(e,r)=>o()(r)))}})(a||(a={}));let T=I()},153808:(e,r,n)=>{n.d(r,{l9:()=>E,hk:()=>y,R4:()=>b,FL:()=>A,ur:()=>S,O5:()=>w});var a=n(411855),i=n(232297),o=n(686759),s=n(776250);class l{constructor(e,r){this._timeOfLastDisconnectMs=null,this._timeOfLastConnectionMs=null,this._timeOfFirstConnectionMs=null,this._definedConnectionAttemptEventName=e,this._definedDisconnectEventName=r}handleSocketDisconnect(e){if(null==this._timeOfLastConnectionMs)return;this._timeOfLastDisconnectMs=this.nowMs();let r=(this._timeOfLastDisconnectMs-this._timeOfLastConnectionMs)/1e3,n=this.nowMs()/1e3;s.az.trackDefinedEvent(this._definedDisconnectEventName,{connectionDurationSeconds:r,windowIsActive:e,sessionLengthSeconds:n})}handleSocketConnectionAttempt(e,r,n,a){if(!e&&r<3)return;let i=null==this._timeOfLastDisconnectMs?0:this._timeOfLastDisconnectMs,o=(this.nowMs()-i)/1e3;e&&(this._timeOfLastConnectionMs=this.nowMs(),null==this._timeOfFirstConnectionMs&&(this._timeOfFirstConnectionMs=this._timeOfLastConnectionMs));let l=this.nowMs()/1e3;s.az.trackDefinedEvent(this._definedConnectionAttemptEventName,{success:e,timeSinceDisconnectSeconds:o,numberOfConnectionAttempts:r,firstTimeConnecting:n,windowIsActive:a,sessionLengthSeconds:l})}nowMs(){return Math.round(performance.now())}}var c=n(647899),d=n(221825),u=n(56029),m=n(682331),p=n(289329),h=n(776621),_=n(30637),g=null,f=null;let E=new m.L;function y(){return g}function b(){return null}class I{bindContext(e,r){(0,d.R)(e,r,(0,i.iL)().GL)}getNewProgramId(){let e=(0,i.iL)().GL;return e.getNewId(e.programs)}}let T=class e{getDynamicConfigBoolean(r,n,a){return c.w$.getDynamicConfigBoolean(r,n,a,e.SourceLoggingString)}getDynamicConfigNumber(r,n,a){return c.w$.getDynamicConfigNumber(r,n,a,e.SourceLoggingString)}getDynamicConfigString(r,n,a){return c.w$.getDynamicConfigString(r,n,a,e.SourceLoggingString)}getExperimentBoolean(r,n,a){return c.w$.getExperimentBoolean(r,n,a,e.SourceLoggingString)}getExperimentNumber(r,n,a){return c.w$.getExperimentNumber(r,n,a,e.SourceLoggingString)}getExperimentString(r,n,a){return c.w$.getExperimentString(r,n,a,e.SourceLoggingString)}clearFeatureGatesForTesting(){c.w$.clear()}updateFeatureGateForTesting(e,r){c.w$.updateFeatureGateForTesting(e,r)}getFeatureGateFromInitialOptions(e){return c.w$.getFeatureGateFromInitialOptions(e)}setInRenderServerForViewerTests(){c.w$.setInRenderServerForViewerTests()}};async function v(){if(!Fig.createViewer)try{let e=Fig.tsViewerScriptURL;await (0,o.k0)(e)}catch(e){throw e}}function S(e,r,n,i){let[o,s]=a.useState(null),c=a.useRef({viewerMode:e,containerElement:r,loadTimeTracker:u.Su,statsigViewerWebConfig:new T,socketConnectionTracker:new l("prototype.multiplayer_socket_connection_attempt","prototype.multiplayer_socket_disconnect"),safeModeOptions:p.ld,emscriptenGL:new I,logError:(e,r,n,a,i)=>{switch(e){case"DEBUG":(0,h.ED)(r,n,a,i);break;case"INFO":(0,h.Lo)(r,n,a,i);break;case"WARN":(0,h.xi)(r,n,a,i);break;case"ERROR":(0,h.x1)(r,n,a,i)}},...n});a.useEffect(()=>{let e=c.current;(async function(){let{containerElement:r}=c.current;g&&!i?(JSON.stringify({...e,containerElement:null})===JSON.stringify(f)||(0,_.nl)()||console.warn("useViewer called with different options than the first call!"),r&&g.setNewContainerElement(r)):(f={...e,containerElement:null},await v(),g=await Fig.createViewer(e)),s(g)})()},[i]),a.useEffect(()=>{o&&r&&o.setNewContainerElement(r)},[o,r]);let d=r?.getBoundingClientRect();return a.useLayoutEffect(()=>{o?.forceFrame()},[o,d?.x,d?.y,d?.height,d?.width]),o}function w(e,r,n){a.useEffect(()=>(e?.on(r,n),()=>{e?.off(r,n)}),[e,r,n])}function A(e){let r=document.createElement("div");r.setAttribute("id","viewer_debug_stats"),document.body.appendChild(r),r.style.cssText=`
  font-size: 18px;
  position: fixed;
  left: 6px;
  top: 48px;
  background-color: black;
  color: white;
  border-radius: 3px;
  display: flex;
  flex-direction: column;
  padding: 6px;
  `,setInterval(()=>{for(;r.firstChild;)r.removeChild(r.firstChild);let n=e.getStatsForDebugging();for(let e in n){let a=document.createElement("div");a.innerHTML=`
      <div>
        <span>
          ${e}: &nbsp;
        </span>
        <span>
          ${n[e]}
        </span>
      </div>
      `,r.appendChild(a)}},1e3/30)}T.SourceLoggingString="viewer"},218736:(e,r,n)=>{n.d(r,{H:()=>d});var a=n(469222),i=n(776250),o=n(737947),s=n(966712),l=n(693160),c=n(743282);function d(e){if(!(0,s.kc)().web_vitals_report)return;let r=o.Ay.location.pathname+o.Ay.location.search,n=!!document.querySelector('meta[name="is_preload_streaming"]'),d=!!document.querySelector('meta[name="is_serving_resized_image"]');function u(a){let c={name:a.name,google_rating:a.rating,navigation:a.navigationType,id:a.id,value:a.value,initialPath:r,normalized_current_path:(0,l.qR)(o.Ay.location.pathname),bundle:e,used_codesplitting:!0,bundle_streaming:n,resized_images:d,statsig_client_bootstrap:(0,s.w0)().statsig_client_bootstrap??!0,statsig_has_bootstrap_values:!!(0,s.tl)().statsig_bootstrap_values};(0,i.sx)("Web Vital Metrics",c,{forwardToDatadog:!0,sendAsBeacon:!0})}function m(a,s){let u={name:s,google_rating:"not-applicable",navigation:function(){let e=window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];return e?document.prerendering||(e.activationStart||0)>0?"prerender":document.wasDiscarded?"restore":e.type.replace(/_/g,"-"):"navigate"}(),value:a.timeStamp,initialPath:r,normalized_current_path:(0,l.qR)(o.Ay.location.pathname),id:(0,c.g)(),bundle:e,used_codesplitting:!0,bundle_streaming:n,resized_images:d};(0,i.sx)("Web Vital Metrics",u,{forwardToDatadog:!0,sendAsBeacon:!0})}(0,a.lt)(u),(0,a.fK)(u),(0,a.zB)(u),(0,a.IN)(u),(0,a.Ck)(u),(0,a.rH)(u),document.addEventListener("DOMContentLoaded",e=>m(e,"DCL")),window.addEventListener("load",e=>m(e,"LOAD"))}},15220:(e,r,n)=>{n.d(r,{IJ:()=>g,Vu:()=>m,WQ:()=>h,ap:()=>p,dK:()=>_,vU:()=>u,xt:()=>d});var a=n(232297),i=n(776250),o=n(966712),s=n(742808),l=n(18978),c=n(574705),d=(e=>(e[e.SUCCESS=0]="SUCCESS",e[e.NO_WEBGL=1]="NO_WEBGL",e[e.STENCIL_TEST_FAILURE=2]="STENCIL_TEST_FAILURE",e))(d||{});async function u(){if(!m())return;let e=await navigator.gpu.requestAdapter();if(!e){console.error("No WebGPU adapters found.");return}let r=await e.requestDevice();r.lost.then(e=>{console.error("WebGPU device was lost:",e.message),"destroyed"!==e.reason&&u()}),(0,a.iL)().preinitializedWebGPUDevice=r}function m(){return!!(0,o.kc)().use_webgpu&&void 0!==navigator.gpu&&null!=(0,a.iL)().WebGPUEmscriptenObj}function p(){return!!(0,o.kc)().webgl2_override||l.X.isWebGL2Supported()}function h(){return l.X.isWebGL2Supported()}function _(){return null==window.webGLTestResult&&(window.webGLTestResult=function(){var e=0;try{let r=function(){let e=document.createElement("canvas");try{return e.getContext("webgl")}catch(e){}return null}();r||(e=1),0!==e||r?.isContextLost()||function(e){let r=e.getExtension("WEBGL_debug_renderer_info"),n=r&&(e.getParameter(r.UNMASKED_RENDERER_WEBGL)+"").toLowerCase(),a={gpu_vendor:n?/\bamd\b|\bati\b/.test(n)?"amd":/\bnvidia\b/.test(n)?"nvidia":/\bintel\b/.test(n)?"intel":"unknown":"unknown",gpu_api:n?/direct3d9/.test(n)?"d3d9":/direct3d11/.test(n)?"d3d11":/opengl/.test(n)?"opengl":"unknown":"unknown"};(0,s.Rh)("page_load",a).catch(e=>console.error("Error trying to send tags",a,e))}(r)}catch(e){}return e}()),window.webGLTestResult}function g(){let e="webgl_not_supported",r="unknown",n="unknown",a="unknown";if(0===window.webGLTestResult){e=l.X.initializationStatus();let i=(0,c.N)();i&&(r=i.renderer,n=i.vendor,a=i.version)}i.az.trackDefinedEvent("rendering_and_animation.webgl_initialization",{status:e,renderer:r,vendor:n,version:a})}},747396:(e,r,n)=>{n.d(r,{jm:()=>a}),n(411855),n(939863);let a={showNotificationSettings:!1,disableCommentsWhenHandToolEnabled:!1,repositionViewportOnCommentSelection:!1,clusterBy:"page",orphanedBy:"deleted_pages"}},750252:(e,r,n)=>{function a(e){let r=document.visibilityState;e?(delete document.visibilityState,delete document.hidden):Object.defineProperties(document,{visibilityState:{value:"hidden",configurable:!0},hidden:{value:!0,configurable:!0}}),r!==document.visibilityState&&(i=!1,document.dispatchEvent(new Event("visibilitychange",{bubbles:!0}))),i=!e}n.d(r,{R:()=>a});let i=!1;window.addEventListener("visibilitychange",function(e){i&&(e.stopPropagation(),e.stopImmediatePropagation())},{capture:!0,passive:!0})},214673:(e,r,n)=>{n.d(r,{g:()=>a});var a=(e=>(e[e.PNG=0]="PNG",e[e.JPEG=1]="JPEG",e[e.PDF=2]="PDF",e))(a||{}),i=(e=>(e[e.SAVED=0]="SAVED",e[e.SAVING=1]="SAVING",e[e.PAUSED=2]="PAUSED",e))(i||{})},503316:(e,r,n)=>{var a=(e=>(e[e.FEATURE_DISABLED=0]="FEATURE_DISABLED",e[e.READ_ONLY_FILE=1]="READ_ONLY_FILE",e))(a||{}),i=(e=>(e[e.MOBILE_NATIVE_NAVBAR=0]="MOBILE_NATIVE_NAVBAR",e))(i||{}),o=(e=>(e[e.BEGAN=0]="BEGAN",e[e.MOVED=1]="MOVED",e[e.ENDED=2]="ENDED",e[e.CANCELLED=3]="CANCELLED",e[e.MOVED_COALESCED=4]="MOVED_COALESCED",e))(o||{})},347240:(e,r,n)=>{n.d(r,{H:()=>i}),n(411855),n(188507);var a=n(299321);n(38329),n(798099),n(356390),n(737499),n(503316);let i=[a.NLJ.VECTOR_PENCIL,a.NLJ.HIGHLIGHTER,a.NLJ.WASHI_TAPE,a.NLJ.ERASER,a.NLJ.LASSO];a.NLJ.VECTOR_PENCIL,a.NLJ.HIGHLIGHTER,a.NLJ.WASHI_TAPE},555024:(e,r,n)=>{n.d(r,{t:()=>a});function a(){let e=window.FigmaMobile;return e?.shouldAllowSimulatedRightClick??!0}},182827:(e,r,n)=>{n.d(r,{y:()=>h}),n(429075);var a=n(411855),i=n(776250),o=n(564577),s=n(163023),l=n(939863),c=n(585091),d=n(787337),u=n(424755),m=(e=>(e.FILE="file",e.PROTOTYPE="prototype",e))(m||{});function p(e){let{access_type:r,accessed_via:n}=e,i=a.useMemo(()=>{let r={icon:d.A,message:function(e){switch(e){case"file":return(0,l.t)("proto.embeds.visible_to_people_invited_to_this_file");case"prototype":return(0,l.t)("proto.embeds.visible_to_people_invited_to_this_prototype")}}(e.type)},a={icon:d.A,message:n?(0,l.t)("proto.embeds.visible_to_org_name",{orgName:n.name}):(0,l.t)("proto.embeds.visible_to_everyone_in_your_org")};return{edit:null,view:null,org_edit:a,org_view:a,inherit:r,invite_only:r,workspace_edit:null,workspace_view:null}},[n,e.type]);if(!r)return null;let o=i[r];if(!o)return null;let{icon:c,message:u}=o;return a.createElement("div",{className:"embed_documentation_footer--documentationAccessLevel--a1Kwf"},a.createElement(s.B,{className:"embed_documentation_footer--documentationAccessLevelIcon--G-bLc",svg:c}),a.createElement("span",{className:"embed_documentation_footer--documentationAccessLevelReason--H-eVa ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"},u))}function h(e){let r=`/${e.isPrototype?"proto":"file"}/${e.fileKey}${e.params.startsWith("?")?e.params:`?${e.params}`}`;return a.createElement("a",{className:"embed_documentation_footer--documentationFooter--cRlI0",target:"_blank",rel:"noopener",href:r,onClick:()=>{(0,i.sx)("IFrame Mobile Viewer Document Footer Clicked",{fileKey:e.fileKey,kind:e.isPrototype?"proto":"file",embed_host:(0,c.jr)().embed_host})}},a.createElement("div",{className:"embed_documentation_footer--documentationFooterRight--llo4e"},a.createElement(p,{...e,type:e.isPrototype?"prototype":"file"})),a.createElement("div",{className:"embed_documentation_footer--documentationFooterLeft--LSi6J"},a.createElement(s.B,{className:"embed_documentation_footer--documentationFooterIcon--KNE1D",svg:u.A}),a.createElement("span",{className:"embed_documentation_footer--documentationFooterTitle--cJTEV ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"},e.fileName),e.touchedAt&&a.createElement("span",{className:"embed_documentation_footer--documentationFooterUpdatedAt--AroJM text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,l.tx)("proto.embeds.last_edited",{relativeTime:a.createElement(o.h1,{date:e.touchedAt})}))))}},585091:(e,r,n)=>{n.d(r,{cu:()=>s,jr:()=>o}),n(511617);var a=n(737947),i=n(179940);function o(){return(0,i.v6)(a.Ay.location.search)}var s=(e=>(e.SET_CANVAS_SPACE_CENTER="SET_CANVAS_SPACE_CENTER",e.SET_CURRENT_PAGE_ID="SET_CURRENT_PAGE_ID",e.ADJUST_ZOOM="ADJUST_ZOOM",e.SET_ZOOM="SET_ZOOM",e.RESET_ZOOM_TO_FIT_CANVAS_CONTENT="RESET_ZOOM_TO_FIT_CANVAS_CONTENT",e.SET_COMMENT_MODE="SET_COMMENT_MODE",e.SET_CURSOR_STYLE="SET_CURSOR_STYLE",e.SET_SCROLL_TO_PAN="SET_SCROLL_TO_PAN",e))(s||{})},463546:(e,r,n)=>{function a(e,r){return{id:e,...r}}n.d(r,{$T1:()=>v,BWk:()=>P,DFF:()=>I,GCV:()=>C,KdZ:()=>A,Kze:()=>f,MJs:()=>h,MxF:()=>y,Njd:()=>p,QpH:()=>O,S$7:()=>i,SqV:()=>R,UDe:()=>o,aI5:()=>d,ar0:()=>l,b0J:()=>k,bIZ:()=>w,dvJ:()=>M,ePo:()=>L,hPP:()=>c,iuG:()=>S,jkr:()=>D,kp0:()=>m,lLk:()=>u,t0T:()=>T,tBR:()=>b,tyv:()=>E,tzJ:()=>N,wRI:()=>g,y3_:()=>s,zoI:()=>_});let i=a("UI3AndAIOnboarding",{team:"editor_usability",queueOnBlock:!0,allowShowingIfModalPresent:!0}),o=a("LibrariesWorkspaceOnboarding",{team:"scale",allowShowingIfModalPresent:!0}),s=a("MobileProtoDownloadModalPrompt",{team:"desktop"}),l=a("MultiplayerObservationNux",{team:"feedback",queueOnBlock:!0}),c=a("MultiplayerSpotlightNudgeNux",{team:"feedback"}),d=a("MultiplayerSpotlightNux",{team:"feedback",queueOnBlock:!0}),u=a("OnboardFigJamEditor",{team:"figjam",queueOnBlock:!0}),m=a("OnboardFigJamEditorBrowseTemplates",{team:"figjam",queueOnBlock:!0}),p=a("OnboardFigJamEditorMakeSomething",{team:"figjam",queueOnBlock:!0}),h=a("OnboardFigJamViewer",{team:"figjam",queueOnBlock:!0}),_=a("OnboardFigJamEditorUnified",{team:"figjam",queueOnBlock:!0}),g=a("OnboardFigJamEditorUnifiedPanAndZoom",{team:"figjam",queueOnBlock:!0}),f=a("OnboardFigJamEditorUnifiedProduct",{team:"figjam",queueOnBlock:!0}),E=a("PrototypePreloadedOverlay",{team:"scenegraph_and_sync"}),y=a("ProOnboardingPrototypeOnlyLinksOverlay",{team:"monetization_upgrades"}),b=a("SearchWorkspaceOnboarding",{team:"scale"}),I=a("SprigSurveysOverlay",{team:"community",queueOnBlock:!1,allowShowingIfModalPresent:!0}),T=a("ViewerToEditorOverlay",{team:"monetization_upgrades"}),v=a("MobileReplyUpsellHint",{team:"desktop"}),S=a("FontIndexUpdateSummer2024Overlay",{team:"text_and_vector",lifecycle:{userFlagName:"seen_font_index_update_summer2024_overlay",maxTimes:1}}),w=a("FeedPostDetailZoomPanNudge",{team:"explore",allowShowingIfModalPresent:!0}),A=a("SharingClarityBranchModalOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),N=a("SharingClarityFileAudienceOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),C=a("SharingClarityFileModalOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),L=a("SharingClarityPrototypeModalOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),O=a("SharingClarityProjectCreationPermissionOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),R=a("SharingClarityProjectCreationTeamAccessOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),P=a("SharingClarityProjectModalOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),D=a("SharingClarityTeamCreationOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),k=a("FilePreviewOverlay",{team:"search",lifecycle:{userFlagName:"seen_file_preview_overlay",maxTimes:1}}),M=a("DevModeOnboardingTooltipOverlay",{team:"activation",queueOnBlock:!0,lifecycle:{userFlagName:"dev_mode_has_seen_onboarding_tooltip",maxTimes:1}})},877723:(e,r,n)=>{n.d(r,{u4:()=>u}),n(411855),n(138020);var a=n(966712),i=n(374626),o=n(38580);n(915440),n(809831);var s=n(694687);n(99506),n(279453);var l=n(984968);n(239737);var c=n(554905),d=n(782112);function u(){let e=(0,i.md)(p),r=(0,s.sZ)()||null,n=(0,l.ol)()||null,o=(0,c.Td)(),u=!(0,d.lt)({currentOrg:r,currentTeam:n,isViewer:o});return(0,a.kc)().qa_ai_metering?{loading:"loading"===e,isSlidesAiEnabled:"has_permission"===e}:{loading:!1,isSlidesAiEnabled:u}}var m=(e=>(e.LOADING="loading",e.HAS_PERMISSION="has_permission",e.NO_PERMISSION="no_permission",e))(m||{});let p=(0,o.eU)("loading")},145356:(e,r,n)=>{n.d(r,{Iu:()=>R,MZ:()=>E,Ng:()=>T,P8:()=>y,PG:()=>I,f1:()=>v,mI:()=>A,q_:()=>L,vr:()=>C,wd:()=>O});var a=n(133537),i=n(322509),o=n(737947),s=n(966712),l=n(563706),c=n(179940),d=n(96328),u=n(27087),m=n(195847),p=n(939863),h=n(980820),_=n(495491),g=n(761870),f=n(21452);function E(){return null===document.querySelector('[data-component-name="auth-view"]')}let y=(0,h.nF)((e,{resp:r})=>{let n,a;let i=e.getState();console.error(r);let o=r.data;if(o&&o.reason&&"object"==typeof o.reason&&"two_factor"===o.reason.missing){let r;e.dispatch(g.IY(o.reason.sms)),o.reason.phone_number&&(r=(0,p.t)("auth.two-factor.sms-hint",{phoneNumber:o.reason.phone_number})),e.dispatch(g.LP({required:!0,hint:r}));return}let s=(0,p.Jv)(r,o?.message||(0,p.t)("auth.default-error"));if(o?.reason==="account_unverified"){e.dispatch(g.E({formState:m.qB.VALIDATE_EMAIL}));return}if(o?.reason==="account_suspended"){window.location.href="/blocked.html";return}r&&401===r.status?n=m.By.UNAUTHORIZED:r&&400===r.status?n=m.By.BAD_REQUEST:r&&404===r.status&&"no_saml"===o.reason?n=m.By.NO_SAML:r&&404===r.status&&"magic_link_login_no_account"===o.reason?n=m.By.MAGIC_LINK_LOGIN_NO_ACCOUNT:r&&403===r.status&&"saml_required"===o.reason&&(n=m.By.SAML_REQUIRED),i.auth.formState===m.qB.SIGN_IN&&i.auth.twoFactorRequired?a=m.RE.TOTP_KEY:i.auth.formState===m.qB.RESET_PASSWORD?a=m.RE.PASSWORD:o&&o.reason&&"object"==typeof o.reason&&("password"===o.reason.missing||"password"===o.reason.invalid)?a=m.RE.PASSWORD:i.auth.formState===m.qB.SAML_START&&(a=m.RE.EMAIL),i.auth.formState===m.qB.SIGN_UP_EXTRA_INFO&&(o.reason&&"object"==typeof o.reason&&"uniqueness"===o.reason.invalid?e.dispatch(g.E({formState:m.qB.SIGN_IN})):e.dispatch(g.E({formState:m.qB.SIGN_UP}))),i.auth.formState===m.qB.VERIFY_HUMAN&&i.auth.prevForm!==m.qB.VERIFY_HUMAN&&e.dispatch(g.E({formState:i.auth.prevForm})),e.dispatch(g.Qg({message:s,errorType:n,invalidInput:a}))}),b=["logged_out_footer_continue_with_google","logged_out_footer","request_permissions_entry","google_one_tap_logged_out_file","logged_out_main_menu_toolbar","prototype_header_nav","prototype_comment_signed_out","team_invite_link","claim_invite","account_picker"];function I(e){let r=e.email&&e.email.trim();return w(e.password&&e.password.trim(),r)}function T(e){let r=e.email&&e.email.trim(),n=e.password&&e.password.trim(),a=e.name&&e.name.trim(),i=w(n,r);return i.message||(i=N(n,r,a)),i}function v(e){return S(e.email&&e.email.trim())}let S=e=>e?(0,a.xf)(e)?{message:"",invalidInput:null}:{message:(0,p.t)("auth.input-validation.invalid-email"),invalidInput:m.RE.EMAIL}:{message:(0,p.t)("auth.input-validation.no-email"),invalidInput:m.RE.EMAIL},w=(e,r)=>{let n=S(r);return n.message?n:e?{message:"",invalidInput:null}:{message:(0,p.t)("auth.input-validation.no-password"),invalidInput:m.RE.PASSWORD}},A=(e="")=>!!(0,c.qg)(o.Ay.location.search).is_not_gen_0||e&&b.includes(e),N=(e,r,n)=>{let a="";return(0,d.YH)(e).length>500&&(a=(0,p.t)("auth.input-validation.long-password")),Array.from(e).length<8&&(a=(0,p.t)("auth.input-validation.short-password")),e===r&&(a=(0,p.t)("auth.input-validation.email-is-password")),n&&e===n&&(a=(0,p.t)("auth.input-validation.name-is-password")),a?{message:a,invalidInput:m.RE.PASSWORD}:{message:"",invalidInput:null}};function C({url:e,cont:r}){let n=new URL(e);n.searchParams.set("cont",r),o.Ay.redirect(n.toString())}let L=(0,h.nF)((e,{formId:r})=>{(0,f.g)("sms_recover_attempt",e.getState().auth.origin);let n=document.getElementById(r),a=(0,i.t)(n);u.Ay.post("/api/session/sms_recover",a).then(({data:r})=>{(0,f.g)("sms_recover_success",e.getState().auth.origin),r&&r.meta&&e.dispatch(g.LP({required:!0,hint:(0,p.t)("auth.two-factor.code-hint-confirmation",{phoneNumber:r.meta.phone_number})}))}).catch(r=>e.dispatch(y({resp:r})))});function O(e){if((0,s.kc)().remove_extra_info_step||e.startsWith("/api/integrations/google-classroom"))return!1;if(e.startsWith("/integrations")||e.startsWith("/oauth"))return!0;if(!(0,l.C8)())return!1;let r=new URLSearchParams(o.Ay.location.search),n=e.startsWith("/education/apply");return[n,e.startsWith("/proto")||o.Ay.location.href.includes("/proto/"),!!r.get("with_community_header"),!!r.get("app_auth_id")||e.startsWith("/app_auth")].some(e=>e)}async function R(e,r){let{data:{meta:{available_methods:n}}}=await (0,_.L)().getAuthMethods(e,r);if(1===n.length&&"google"===n[0])return"google";if(1===n.length&&"saml"===n[0])return"saml";if(n.includes("sign_in"))return"sign_in";if(n.includes("sign_up"))return"sign_up";throw Error("Unknown authentication action")}},21452:(e,r,n)=>{n.d(r,{g:()=>o});var a=n(776250),i=n(966712);function o(e,r,n={},s={}){(0,a.sx)("Auth Actions",{eventSubtype:e,origin:r,googleFedCmEnabled:(0,i.kc)().google_federated_cm??!1,cookiesAllowed:!!navigator.cookieEnabled,...n},{batchRequest:!1,...s})}},777385:(e,r,n)=>{n.d(r,{Fb:()=>K,Hc:()=>V,p8:()=>M,sT:()=>W});var a=n(411855),i=n(464205),o=n(776250),s=n(320063),l=n(966712),c=n(30637),d=n(547807),u=n(178466),m=n(479296),p=n(140711),h=(e=>(e.FRAME_MOUNTED="frame-mounted",e.JS_LOADED="js-loaded",e.CHALLENGE_LOADED="loaded",e.CHALLENGE_SUPPRESSED="suppressed",e.CHALLENGE_SHOWN="challenged",e.IFRAMESIZE="iframesize",e.COMPLETED="completed",e.ERRORED="errored",e.LOAD_TIMED_OUT="timed-out",e.ARKOSE_IS_OFF_FOR_USER="arkose-is-off-for-user",e))(h||{}),_=(e=>(e.FRAME_FAILED_TO_LOAD_IN_TIME="frame failed to load in time",e.GETTING_ARKOSE_TOKEN_FAILED_BECAUSE_ARKOSE_FRAME_NOT_MOUNTED="getArkoseToken failed because Arkose frame was never mounted",e.GETTING_ARKOSE_TOKEN_FAILED_BECAUSE_ARKOSE_FAILED="getArkoseToken failed because Arkose failed",e.GETTING_ARKOSE_TOKEN_FAILED_BECAUSE_ARKOSE_IS_OFF_FOR_USER="getArkoseToken failed because Arkose is off for user",e.MISSING_ARKOSE_TOKEN_WHEN_GETTING_ARKOSE_TOKEN="getArkoseToken missing token despite frame being ready",e.GETTING_ARKOSE_TOKEN_SUCCEEDED="success",e))(_||{}),g=(e=>(e.ERROR_HANDLING_MESSAGE="error handling message",e))(g||{}),f=(e=>(e.REACHABILITY="reachability",e))(f||{}),E=(e=>(e.IS_ARKOSE_ON_API_CALL_FAILED="Is Arkose On API call failed",e.IS_ARKOSE_ON="Is Arkose On",e))(E||{});let y={...h,..._,...g,...f,...E};var b=(e=>(e.CHALLENGE_JS_LOADED="challenge-js-loaded",e.CHALLENGE_LOADED="challenge-loaded",e.CHALLENGE_SUPPRESSED="challenge-suppressed",e.CHALLENGE_SHOWN="challenge-shown",e.CHALLENGE_IFRAMESIZE="challenge-iframesize",e.CHALLENGE_COMPLETE="challenge-complete",e.CHALLENGE_ERROR="challenge-error",e))(b||{});let I={"challenge-js-loaded":"js-loaded","challenge-loaded":"loaded","challenge-suppressed":"suppressed","challenge-shown":"challenged","challenge-iframesize":"iframesize","challenge-complete":"completed","challenge-error":"errored"},T=()=>!v()&&!S()&&!A(),v=()=>"undefined"==typeof window||void 0===window.arkose,S=()=>"frame-mounted"===window.arkose,w=()=>"arkose-is-off-for-user"===window.arkose,A=()=>N()||C(),N=()=>"errored"===window.arkose,C=()=>"timed-out"===window.arkose,L=()=>"completed"===window.arkose,O=new i.eu,R=(0,m.D)(()=>1e4),P=(0,m.D)(()=>new Date().getTime()),D=(0,m.D)(()=>!(0,c.Lg)()),k=({event:e,prevFormState:r,getArkoseTokenAction:n,error:a,reachability:i,isArkoseOnAPICheckErrorStatus:s,arkoseIsOnForUserProperties:l})=>{if("iframesize"===e)return;let c=e.toString();(e===y.ERRORED||e===y.ERROR_HANDLING_MESSAGE)&&a&&(c=`${e}: ${a}`);let d={arkose_event:c};void 0!==window.mountTime&&(d.elapsed_time_since_mount_in_ms=P()-window.mountTime),r&&(d.prev_form_state=r.toString()),n&&(d.get_arkose_token_action=n),e===y.IS_ARKOSE_ON_API_CALL_FAILED&&(a&&(d.is_arkose_on_api_check_error=a.message),d.is_arkose_on_api_check_error_status=s),l&&(d.arkose_is_on_for_user_action=l.action,d.arkose_is_on_for_user_result_from_initial_options=l.resultFromInitialOptions,d.arkose_is_on_for_user_result_from_api=l.resultFromAPI,d.arkose_is_on_for_user_used_api_result_for_decision=l.usedAPIResultForDecision),e===y.REACHABILITY&&i&&(d.reachability=Object.entries(i).map(e=>`${e[0]}|${e[1]}`).join(",")),D()&&(0,o.sx)("Arkose",d,{forwardToDatadog:!0,batchRequest:!1})};function M(e){let r=a.useRef(null),n=r=>{r.origin===(0,l.tl)().arkose_origin&&O.runExclusive(()=>{i(r)}).catch(r=>{k({event:y.ERROR_HANDLING_MESSAGE,prevFormState:e.prevFormState,error:r})})},i=r=>{let n;if(A())return;let a=JSON.parse(r.data);if(!Object.values(b).includes(a.eventId))return;let i=I[n=a.eventId];switch(window.arkose=i.toString(),k({event:i,prevFormState:e.prevFormState,error:a.payload.error?.error}),n){case"challenge-loaded":e.onLoaded&&e.onLoaded();break;case"challenge-shown":e.onChallenge();break;case"challenge-iframesize":let o=document.getElementById("arkoseFrame");o&&(o.width=a.payload.frameWidth,o.height=a.payload.frameHeight);break;case"challenge-complete":window.arkoseResult=a.payload.sessionToken,e.onCompleted();break;case"challenge-error":window.arkoseResult=i.toString(),e.onCompleted()}};(0,s.h)(()=>{K(e.prevFormState).then(r=>{r&&F(e.prevFormState)})}),(0,s.h)(()=>(K(e.prevFormState).then(a=>{a?U(e,r,n):(window.arkose="arkose-is-off-for-user",e.onCompleted())}),()=>{window.removeEventListener("message",n)}));let o=(0,u.Gq)().getPrimaryLocale(!1),c=(0,l.tl)().arkose_challenge_public_key,d=(0,l.tl)().arkose_frame_url+"?publicKey="+c+"&locale="+o;return a.createElement("div",{className:p.i},a.createElement("iframe",{id:"arkoseFrame",height:0,width:0,src:d,title:"Arkose Frame",className:p.$}))}let F=(0,m.D)(e=>{let r=(0,l.tl)().arkose_challenge_public_key,n=["https://www.arkoselabs.com","https://status.arkoselabs.com","https://status.arkoselabs.com/api/v2/status.json",`https://figma-api.arkoselabs.com/v2/${r}/api.js`,(0,l.tl)().arkose_frame_url,"https://cdn.funcaptcha.com","https://verify.figma.com"];Promise.allSettled(n.map(e=>x(e))).then(r=>{let a={};r.forEach((e,r)=>{a[n[r]]="fulfilled"===e.status}),k({event:y.REACHABILITY,prevFormState:e,reachability:a})})}),x=(0,m.D)(async e=>{try{return await fetch(e,{method:"HEAD",mode:"no-cors"}),Promise.resolve()}catch(e){return Promise.reject()}}),U=(0,m.D)((e,r,n)=>{Object.defineProperty(window,"mountTime",{value:P(),configurable:!0,enumerable:!0}),window.addEventListener("message",n),Promise.race([new Promise((n,a)=>{r.current=setTimeout(()=>{O.runExclusive(()=>{T()?n(window.arkose):(delete window.arkose,window.arkose="timed-out",k({event:y.FRAME_FAILED_TO_LOAD_IN_TIME,prevFormState:e.prevFormState}),a(Error("Arkose script failed to load.")))}).then(null)},R())}),new Promise((e,r)=>{Object.defineProperty(window,"arkose",{get:()=>"frame-mounted",set:n=>{O.runExclusive(()=>{A()?r(Error("Arkose script failed to load.")):(delete window.arkose,window.arkose=n,e(n))}).then(null)},configurable:!0,enumerable:!0})})]).then(null,r=>{window.arkoseResult="timed-out",e.onCompleted()}).finally(()=>{B(r)})}),B=(0,m.D)(e=>{null!==e.current&&(clearTimeout(e.current),e.current=null)});async function V(e,r){let n;return await O.runExclusive(()=>{n=w()?(k({event:y.GETTING_ARKOSE_TOKEN_FAILED_BECAUSE_ARKOSE_IS_OFF_FOR_USER,prevFormState:r,getArkoseTokenAction:e}),Promise.reject(Error("Can't get token because Arkose is off for the user"))):v()?(k({event:y.GETTING_ARKOSE_TOKEN_FAILED_BECAUSE_ARKOSE_FRAME_NOT_MOUNTED,prevFormState:r,getArkoseTokenAction:e}),Promise.reject(Error("Can't get token because Arkose frame was never mounted"))):A()?(k({event:y.GETTING_ARKOSE_TOKEN_FAILED_BECAUSE_ARKOSE_FAILED,prevFormState:r,getArkoseTokenAction:e}),Promise.reject(Error("Can't get token because Arkose challenge failed"))):L()?void 0===window.arkoseResult||null===window.arkoseResult?(k({event:y.MISSING_ARKOSE_TOKEN_WHEN_GETTING_ARKOSE_TOKEN,prevFormState:r,getArkoseTokenAction:e}),Promise.reject(Error("Arkose token missing despite challenge being completed!"))):(k({event:y.GETTING_ARKOSE_TOKEN_SUCCEEDED,prevFormState:r,getArkoseTokenAction:e}),Promise.resolve(window.arkoseResult)):new Promise((n,a)=>{Object.defineProperty(window,"arkoseResult",{set:i=>{O.runExclusive(()=>{null!=i&&(A()?(k({event:y.GETTING_ARKOSE_TOKEN_FAILED_BECAUSE_ARKOSE_FAILED,prevFormState:r,getArkoseTokenAction:e}),a(Error("Can't get token because Arkose challenge failed"))):(delete window.arkoseResult,window.arkoseResult=i,k({event:y.GETTING_ARKOSE_TOKEN_SUCCEEDED,prevFormState:r,getArkoseTokenAction:e}),n(i)))}).then(null)},configurable:!0,enumerable:!0})})}),n}let G=Promise.resolve(!!(0,l.tl)().do_arkose),H=(0,d.vh)();async function W(e,r){await O.runExclusive(()=>{!function(e,r){let n;if(!(0,l.kc)().arkose_check_is_on_from_api){G=new Promise(e=>{e(!!(0,l.tl)().do_arkose)});return}n="email"in e?{email:e.email}:{token:e.googleUserInfo.token,token_type:e.googleUserInfo.tokenType},G=new Promise(e=>{H.validate(async({xr:e})=>await e.post("/api/arkose/on_for_user",d.td.toAPIParameters({...n,captcha_action:r}),{retryCount:10})).then(r=>{e(r.data.meta.arkose_on_for_user)}).catch(r=>{k({event:y.IS_ARKOSE_ON_API_CALL_FAILED,error:r.cause||(r.data?Error(r.data.message):null),isArkoseOnAPICheckErrorStatus:r.status}),e(!!(0,l.tl)().do_arkose)})})}(e,r)})}async function K(e){let r=!!(0,l.tl)().do_arkose,n=await G,a=!!(0,l.kc)().arkose_check_is_on_from_api,i=a?n:r;return k({event:y.IS_ARKOSE_ON,arkoseIsOnForUserProperties:{action:e,resultFromInitialOptions:r,resultFromAPI:n,usedAPIResultForDecision:a}}),i}},855829:(e,r,n)=>{n.d(r,{p:()=>s});var a=n(776250),i=n(129212),o=n(966712);async function s(e){(0,o.kc)().passkey_enable_metrics&&(0,a.sx)("passkey_support",{flow:e,supports_webauthn:(0,i.D)(),supports_mediation:await (0,i.r)()},{batchRequest:!1})}},295698:(e,r,n)=>{n.d(r,{IU:()=>c});var a=n(411855);n(188507);var i=n(91408);n(268537),n(874991),n(154254),n(939863),n(896474);var o=n(672517);n(10648),n(318812),n(698812),n(99506);var s=n(498606);n(298543),n(303159),n(467703);var l=n(465983);function c(e){return a.createElement(o.jm,{className:e.disabled?"shared_table--optionDisabled--OhX66 shared_table--_optionBase--z8wdT shared_table--_disabled--EkV7j":"shared_table--option--hw4Sr shared_table--_optionBase--z8wdT",onClick:e.onClick,trackingProperties:e.trackingProperties,disabled:e.disabled,...e.tooltip?{"data-tooltip-type":s.Ib.TEXT,"data-tooltip":e.tooltip,"data-tooltip-show-above":!0}:{}},e.label)}(0,i.hG)(l.km),(0,i.hG)(l.hX);var d=(e=>(e.NONE="NONE",e.UNASSIGNED="UNASSIGNED",e.WORKSPACE="WORKSPACE",e))(d||{})},858977:(e,r,n)=>{n(411855),n(154254),n(629019),n(568214),n(809840)},768137:(e,r,n)=>{n.d(r,{$$:()=>s,nR:()=>c,pz:()=>u,tM:()=>d,vd:()=>l});var a=n(411855),i=n(672517),o=n(150823);function s(e){let{className:r,...n}=e;return a.createElement("button",{className:`${o.xZ} ${r}`,type:"button",...n},e.children)}let l=(0,i.tf)(s);function c(e){let{className:r,...n}=e;return a.createElement("button",{className:`${o.HM} ${r}`,type:"button",...n},e.children)}let d=(0,i.tf)(c);function u(e){let{className:r,...n}=e;return a.createElement("button",{className:`${o.AJ} ${r}`,type:"button",...n},e.children)}},457921:(e,r,n)=>{n.d(r,{S:()=>m});var a=n(411855),i=n(629019),o=n.n(i),s=n(163023),l=n(516398),c=n(16435),d=n(949207),u=n(432023);function m({children:e,isInitiallyOpen:r,title:n,titleClassName:i}){let[m,p]=a.useState(r),h=()=>p(e=>!e);return a.createElement("div",null,a.createElement("div",{className:o()(c.S,i),onClick:h,onKeyDown:e=>(0,l.hx)({e,onClickHandler:h}),role:"button",tabIndex:0},a.createElement(s.B,{className:c.G,svg:m?d.A:u.A}),n),m&&e)}},736174:(e,r,n)=>{n.d(r,{Q:()=>R});var a=n(411855),i=n(188507),o=n(629019),s=n.n(o),l=n(374626),c=n(498750),d=n(153234),u=n(723325),m=n(662275),p=n(146817),h=n(473744),_=n(151283),g=n(534804),f=n(543817),E=n(335682),y=n(416095),b=n(933342),I=n(135076),T=n(180715),v=n(776018),S=n(790429),w=n(811529),A=n(603396),N=n(718242),C=n(875387),L=n(486107),O=n(382232);function R({enableKeyboardNavigation:e,colIndex:r,rowIndex:n,isList:i,isTileSelected:o,renderedElement:s,shouldRefocusAfterKeyboardInsert:l}){return e?a.createElement(P,{colIndex:r,rowIndex:n,isList:i,isTileSelected:o,renderedElement:s,shouldRefocusAfterKeyboardInsert:l}):a.createElement(D,{enableKeyboardNavigation:e,isList:i,isTileSelected:o,renderedElement:s})}function P({colIndex:e,rowIndex:r,isList:n,isTileSelected:o,renderedElement:s,shouldRefocusAfterKeyboardInsert:T}){let L=a.useContext(I.U),O=(0,i.d4)(e=>e.modalShown),R=(0,i.d4)(E.sS),P=(0,S.J)(s.item,s.sectionPosition,s.sectionNameForTracking),k=(0,A.n)(s.item),M=(0,f.u)({canSwap:!0,openFileKey:R??"",sourceForTracking:"Asset Panel",insertAsChildOfCanvas:!0}),F=a.useCallback(()=>{O?.type!==v.V||k||P()},[k,O?.type,P]),x=a.useCallback(()=>{O?.type!==v.V&&L?.onOpenFlyout(s.item,s.sectionPosition,s.sectionNameForTracking)},[L,O?.type,s.item,s.sectionPosition,s.sectionNameForTracking]),{keyboardNavigationItem:U,setKeyboardNavigationElement:B}=(0,u.M3)({path:[1,r],column:n?null:e,id:(0,p.V)(s.item),onFocus:F}),V=function({onComponentInsertSwap:e,onOpenFlyout:r,keyboardNavigationItem:n,item:o,sectionNameForTracking:s,sectionPosition:d,shouldRefocusAfterKeyboardInsert:u,rowIndex:p,colIndex:f,isList:E,sourceForTracking:I}){let T=(0,i.wA)(),S=(0,i.d4)(e=>e.modalShown),A=(0,l.md)(C.TG),L=(0,g.Ew)({assetKey:(0,b.u2)(o),assetLibraryKey:o.library_key,assetType:o.type,isList:E,sectionNameforTracking:s,sectionPosition:d,sourceForTracking:I??w.mZ,aiScore:o.ai_score??void 0,lexicalScore:o.lexical_score??void 0,isExample:(0,h.o)(o,A),partnerType:(0,_.X)(o.library_key)}),O=(0,N.ZV)(L);return a.useCallback(a=>{if((a.keyCode===c.Uz.ENTER||a.keyCode===c.Uz.SPACE)&&(0,y.dx)(o)){if(a.metaKey){r();return}if(e(a,o),O(a),u&&!(0===p&&0===f)){let e=E?n?.getItemAbove():n?.getItemToTheLeft();e?.focus()}else n?.blur();S?.type===v.V&&T(m.AS())}},[f,T,O,E,o,n,S?.type,e,r,p,u])}({colIndex:e,rowIndex:r,isList:n,keyboardNavigationItem:U,onComponentInsertSwap:M,onOpenFlyout:x,...s,shouldRefocusAfterKeyboardInsert:T}),G=a.useCallback(e=>{(0!==e.detail||e.nativeEvent.pointerType)&&x()},[x]),H=`componentScrollContainerTile.${e}.${r}`,W=d.rf(H,"click",G);return a.createElement(D,{enableKeyboardNavigation:!0,isList:n,isShownInFlyout:k,isTileSelected:o,onKeyDown:V,onClick:W,onSetKeyboardNavigationElement:B,renderedElement:s})}function D({enableKeyboardNavigation:e,isList:r,isShownInFlyout:n,isTileSelected:i,onKeyDown:o,onClick:c,onSetKeyboardNavigationElement:d,renderedElement:u}){let m=(0,l.md)(T.T),p=i?.(u)??!1;a.useEffect(()=>{r?u.element=a.cloneElement(u.element,{}):u.element=a.cloneElement(u.element,{selected:p})},[r,p,u]);let h={top:u.top,left:u.left,height:r?u.height:void 0},_=s()(r?O.fJ:O.ND,{[L.QT]:!r,[O.r6]:r&&n,[O.HR]:r&&n&&m});return e||o||c?a.createElement("button",{key:u.key,style:h,className:_,onKeyDown:o,onClick:c,ref:d},u.element):a.createElement("div",{key:u.key,style:h,className:_},u.element)}},164377:(e,r,n)=>{var a=n(411855);n(563706);var i=n(629019),o=n.n(i),s=n(568214),l=n(498750),c=n(860601),d=n(153234),u=n(551608),m=n(896474),p=n(809840),h=n(751859);a.forwardRef(function(e,r){let{disabled:n,onClick:i,onMouseDown:_,onKeyDown:g,icon:f,recordingKey:E,children:y,onFocus:b,onBlur:I,width:T="hug-contents","data-tooltip":v,"data-tooltip-type":S,"data-onboarding-key":w,dataTestId:A}=e,N=d.rf(E,"click",i||c.lQ),C=E?N:i,L=d.rf(E,"mousedown",_||c.lQ),O=E?L:_,R=a.useCallback(e=>{u.j?.(e)||(g?.(e),e.keyCode===l.Uz.ESCAPE&&e.currentTarget.blur())},[g]);return a.createElement("button",{disabled:n,onClick:C,onMouseDown:O,onKeyDown:R,className:function({width:r,children:n}){let a=[h.e,(0,s.kx)(e.parentBackgroundColor)?h.tS:h.zA];switch(n||a.push(h.J0),r){case"hug-contents":a.push(h.PB);break;case"fill-parent":a.push(h.uC)}return o()(a)}({width:T,children:y}),onFocus:b,onBlur:I,ref:r,"data-tooltip":v,"data-tooltip-type":S,"data-onboarding-key":w,"data-testid":A},f&&a.createElement("div",{className:h.zc},a.createElement(m.In,{icon:f})),y&&a.createElement(p.E,{fontSize:11,fontWeight:"regular",truncate:!0},y))}),n(154254),n(553015)},268537:(e,r,n)=>{n.d(r,{Jn:()=>R,MM:()=>P,OR:()=>v,Ve:()=>T,Vq:()=>A,X3:()=>S,c$:()=>C,gS:()=>L,gw:()=>M,l4:()=>w,ms:()=>N,rr:()=>k,wv:()=>O});var a=n(411855),i=n(629019),o=n.n(i),s=n(846627),l=n(498750),c=n(255942),d=n(860601),u=n(153234),m=n(30637),p=n(163023),h=n(865618),_=n(738269),g=n(259927),f=n(672517),E=n(798099),y=n(977955),b=n(247245),I=n(783423);function T(e){let[r,n]=a.useState(!1),i="label"in e,s="dropdownButton"in e;return a.createElement("div",{className:o()(y.gD,e.className,r&&y.FR,e.shouldRenderAutocompleteStyles&&y.Rp),...e.notDraggable?{"data-not-draggable":!0}:{}},i&&a.createElement("div",{className:o()(y.Ts,e.noBorder&&y.E7,e.noRightPadding&&y.zT),onClick:()=>n(!r),role:"menu",tabIndex:0},a.createElement("div",{className:y.ep},!!e.iconLabel&&a.createElement("div",{className:y.Vi},e.iconLabel),a.createElement("p",null,e.label)),a.createElement(p.B,{className:y.tZ,svg:I.A})),s&&a.createElement(e.dropdownButton,{onClick:()=>n(!r)}),r&&a.createElement(a.Fragment,null,a.createElement("div",{className:o()(y.DE,e.dropdownOptionsClassName,e.rightAlignOptions&&y.Wh,e.optionsBelowSelector&&y.fG),onClick:e.stayOpenOnSelect?void 0:()=>n(!r),role:"menu",tabIndex:0},a.createElement(f.fu,{name:e.menuTrackingContextName||"",enabled:!!e.menuTrackingContextName,properties:e.menuTrackingProperties},a.createElement(S,{options:e.options,hideDropdown:()=>n(!1),shouldRenderAutocompleteStyles:e.shouldRenderAutocompleteStyles}))),a.createElement(U,{closeDropdown:()=>n(!1)})))}function v(e){let[r,n]=a.useState(e.focusContainerOnMount?-1:0),i=a.useMemo(()=>a.Children.toArray(e.children||e.options).filter(e=>"boolean"!=typeof e),[e.children,e.options]),o=(0,a.useRef)(Array(i.length)),s=a.useRef(document.activeElement);(0,a.useEffect)(()=>{let e=o.current[r];e&&(e.tabIndex=0,e.focus())},[r,o]);let l=a.useCallback((e,r)=>{let a=o.current[e];a&&(a.tabIndex=-1,a.focus()),n(r)},[]),c=a.useCallback(()=>{let e=r-1;for(let r of o.current)if(null==o.current[e])e=e-1<0?o.current.length-1:e-1;else break;l(r,e)},[r,l]),u=a.useCallback(()=>{let e=r+1;for(let r of o.current)if(null==o.current[e])e=e+1>=o.current.length?0:e+1;else break;l(r,e)},[r,l]);return{childrenComponents:i,getSetChildRef:e=>(e=>{if("boolean"!=typeof e&&(e.type===C||e.type===P)){let r=e.props;return!!(r.disabled||r.header)}return!1})(i[e])?d.lQ:r=>o.current[e]=r,onKeyDown:n=>{switch(n.stopPropagation(),n.nativeEvent&&n.nativeEvent.stopImmediatePropagation(),n.key){case"Escape":e.autofocusPrevElementOnEsc&&s.current?.focus(),e.hideDropdown();break;case"Tab":e.autofocusPrevElementOnTab&&s.current?.focus(),e.hideDropdown();break;case" ":case"Enter":{let n=o.current[r];n&&n.click(),e.autofocusPrevElementOnSelect&&s.current?.focus();break}case"Left":case"ArrowLeft":"horizontal"===e.orientation&&c();break;case"Up":case"ArrowUp":"horizontal"!==e.orientation&&c();break;case"Right":case"ArrowRight":"horizontal"===e.orientation&&u();break;case"ArrowDown":case"Down":"horizontal"!==e.orientation&&u();break;case"Home":case"PageUp":l(r,0);break;case"End":case"PageDown":l(r,o.current.length-1)}},onFocus:e=>{if(e&&e.target){let n=o.current.indexOf(e.target);n>=0&&l(r,n)}}}}function S(e){let{childrenComponents:r,getSetChildRef:n,onKeyDown:i,onFocus:o}=v(e),{children:s,options:l,...c}=e;return a.createElement(N,{...c,onKeyDown:i,tabIndex:-1},a.Children.map(r,(e,r)=>a.cloneElement(e,{buttonRef:n(r),onFocus:o})))}function w(e,r){let[n,i]=a.useState(null);return a.useEffect(()=>{let n=e.current;if(n){let e=n.getBoundingClientRect(),a=r.left,o=r.top;a<8?a=8:a+e.width>window.innerWidth-8&&(a=window.innerWidth-8-e.width),o<8?o=8:o+e.height>window.innerHeight-8&&(o=window.innerHeight-8-e.height),i([a,o])}},[e,r.left,r.top]),a.useMemo(()=>n?{...r,left:n[0],top:n[1]}:{...r,visibility:"hidden"},[n,r])}let A=a.forwardRef(function({style:e,...r},n){let i=a.useRef(null),o=w(i,e);return a.createElement(M,{dropdownRef:(0,c.A)(i,n),style:o,...r})});class N extends u.o6{constructor(){super(...arguments),this.preventDefault=e=>{e.preventDefault()},this.stopPropagation=e=>{e.stopPropagation()},this.stopPropagationForPointerDown=e=>{(0,E.ft)()&&this.stopPropagation(e)},this.onClick=u.cZ(this,"click",e=>{if(!this.props.onClick)return u.aH;this.props.onClick(e)})}render(){return a.createElement("div",{tabIndex:this.props.tabIndex??0,role:"menu",id:this.props.id,className:o()(y.Wm,this.props.className,{[y.DY]:this.props.positionAbsolute,[y._S]:this.props.positionFixed,[y.rU]:this.props.shouldRenderAutocompleteStyles,[g.s4]:this.props.preventZoom}),onClick:this.onClick,onMouseDown:this.stopPropagation,onScroll:this.props.stopScrollPropagation?this.stopPropagation:this.props.onScroll,onWheel:this.props.preventZoom?void 0:this.stopPropagation,onTouchStart:this.stopPropagation,onPointerDown:this.stopPropagationForPointerDown,onContextMenu:this.preventDefault,onKeyDown:this.props.onKeyDown,style:this.props.style,"data-cancel-insertable-resource-drag-and-drop":!0,ref:this.props.dropdownRef,"aria-labelledby":this.props["aria-labelledby"],"data-onboarding-key":this.props.dataOnboardingKey,"data-testid":this.props["data-testid"],onFocus:this.props.onFocus},this.props.children)}}N.displayName="Dropdown";class C extends u.o6{constructor(){super(...arguments),this.mouseOverTimestamp=0,this.state={hover:!1},this.onDragStart=e=>{e.preventDefault()},this.onPointerOver=e=>{this.props.onPointerOver&&this.props.onPointerOver(),this.setState({hover:!0}),this.props.onHover&&this.props.onHover(!0),this.props.href||(this.mouseOverTimestamp=Number(e.timeStamp))},this.onPointerOut=e=>{this.props.onPointerOut&&this.props.onPointerOut(),this.setState({hover:!1}),this.props.onHover&&this.props.onHover(!1)},this.onPointerUp=u.cZ(this,"mouseup",e=>{if(!this.props.href){if(this.props.onPointerUp){this.props.onPointerUp(e);return}if(Number(e.timeStamp)-this.mouseOverTimestamp>20){let r=e.target;null!=r.click&&(this.mouseUpTimer=setTimeout(r.click.bind(r),1))}}}),this.onTouchEnd=e=>{let r=e.target;if(r.click&&(e.preventDefault(),r&&e.changedTouches)){let n=e.changedTouches[0];document.elementFromPoint(n.clientX,n.clientY)===r&&r.click()}},this.onClick=u.cZ(this,"click",e=>{this.props.href&&(0,l.oJ)(e)||(this.props.href?(0,s.e)(this.props.href,e):clearTimeout(this.mouseUpTimer),this.props.onClick?.(e))}),this.ariaRole=()=>this.props.header?"presentation":"role"in this.props?this.props.role??"menuitem":"menuitem"}render(){let e=this.props.disabled||this.props.header,r=o()(e?y.IZ:{[y.wY]:this.state.hover||this.props.simulateHover,[y.uK]:!0},this.props.className);return a.createElement("a",{tabIndex:-1,role:this.ariaRole(),id:this.props.id,ref:this.props.buttonRef,onFocus:this.props.onFocus,"data-search-click-action":this.props["data-search-click-action"],className:r,href:this.props.href,target:this.props.target,rel:"noopener",onClick:e?void 0:this.onClick,onPointerUp:e?void 0:this.onPointerUp,onPointerOver:e?void 0:this.onPointerOver,onPointerOut:e?void 0:this.onPointerOut,onMouseDown:this.props.onMouseDown,onDragStart:this.onDragStart,onTouchEnd:this.onTouchEnd,"data-dropdown-tooltip":this.props.tooltip,"data-onboarding-key":this.props.onboardingKey,"data-testid":this.props.recordingKey,"data-fullscreen-intercept":this.props["data-fullscreen-intercept"],"aria-disabled":this.props.disabled,"aria-checked":"aria-checked"in this.props?this.props["aria-checked"]:void 0},this.props.children)}}C.displayName="Option";let L=(0,f.tf)(C);class O extends a.PureComponent{constructor(){super(...arguments),this.onClick=e=>{e.stopPropagation()}}render(){let e=y.me;return this.props.className&&(e+=` ${this.props.className}`),a.createElement("div",{className:e,onClick:this.onClick,style:this.props.style,role:"presentation","data-testid":this.props.dataTestId??"dropdown-separator"},a.createElement("div",{className:y.se}))}}O.displayName="Separator";var R=(e=>(e.Checkmark="Checkmark",e.Checkbox="Checkbox",e))(R||{});class P extends u.o6{render(){return a.createElement(C,{...this.props,className:o()(y.o6,"Checkbox"===this.props.displayType&&this.props.nested&&y.cY,this.props.className),"aria-checked":this.props.checked,role:"role"in this.props?this.props.role:void 0},"Checkbox"===this.props.displayType?a.createElement("span",{className:y.z6,"data-preferred-theme":"dark"},a.createElement(h.S,{disabled:this.props.disabled,checked:this.props.checked,mixed:this.props.mixed})):this.props.checked?a.createElement(p.B,{className:y.z6,svg:b.A,dataTestId:"dropdown-check-icon"}):a.createElement("span",{className:y.z6}),this.props.children)}}P.displayName="CheckableOption",P.defaultProps={displayType:"Checkmark"};class D extends u.o6{render(){return a.createElement(P,{...this.props},a.createElement("div",null,this.props.primaryText),!!this.props.secondaryText&&a.createElement("div",{className:y.pH},this.props.secondaryText))}}let k=(0,f.tf)(P);(0,f.tf)(D);class M extends u.o6{render(){return a.createElement(a.Fragment,null,a.createElement(N,{...this.props}),x(this.props)?a.createElement(U,{closeDropdown:this.props.closeDropdown,recordingKey:"dropdownModalScrim"}):a.createElement(U,{dispatch:this.props.dispatch,recordingKey:"dropdownModalScrim"}))}}M.displayName="DropdownWithScrim";let F=e=>{e.preventDefault()},x=e=>!!e.closeDropdown;class U extends u.o6{constructor(){super(...arguments),this.mouseMotionSinceMouseDown=0,this.MENU_CLOSE_MOUSE_MOVE_SENSITIVITY=5,this.closeDropdown=()=>{x(this.props)?this.props.closeDropdown():this.props.dispatch(_.oB())},this.onMouseDown=u.cZ(this,"mousedown",e=>{this.mouseMotionSinceMouseDown=0,this.closeDropdown(),e.stopPropagation()}),this.onMouseMove=u.cZ(this,"mousemove",e=>{if((0,m.PN)()){if(!(this.mouseMotionSinceMouseDown<this.MENU_CLOSE_MOUSE_MOVE_SENSITIVITY))return u.aH;this.mouseMotionSinceMouseDown+=this.MENU_CLOSE_MOUSE_MOVE_SENSITIVITY}else this.mouseMotionSinceMouseDown+=Math.abs(e.nativeEvent.movementX),this.mouseMotionSinceMouseDown+=Math.abs(e.nativeEvent.movementY)}),this.onMouseUp=u.cZ(this,"mouseup",e=>{this.mouseMotionSinceMouseDown>=this.MENU_CLOSE_MOUSE_MOVE_SENSITIVITY&&(this.closeDropdown(),e.stopPropagation())})}render(){return a.createElement("div",{className:y.bv,onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp,onContextMenu:F,"data-does-not-dismiss-modal":!0})}}},926051:(e,r,n)=>{n.d(r,{y:()=>y}),n(429075);var a=n(411855),i=n(918152),o=n(680433),s=n(697322),l=n(963757),c=n(776250),d=n(511617),u=n(835650),m=n(564577),p=n(154254),h=n(939863),_=n(809840);let g=["org_edit","org_view","inherit","invite_only"],f={org_edit:i.Y,org_view:i.Y,inherit:o.$,invite_only:o.$};function E({accessData:e,isPrototype:r}){let{access_type:n}=e;if(!g.includes(n))return null;let i="";if("org_edit"===n||"org_view"===n){let r=e.accessed_via;i=r?(0,h.t)("proto.embeds.visible_to_org_name",{orgName:r.name}):(0,h.t)("proto.embeds.visible_to_everyone_in_your_org")}else("inherit"===n||"invite_only"===n)&&(i=r?(0,h.t)("proto.embeds.visible_to_people_invited_to_this_prototype"):(0,h.t)("proto.embeds.visible_to_people_invited_to_this_file"));let o=f[n];return a.createElement(o,{className:"embed_documentation_footer--accessTypeIcon--215DQ","data-tooltip":i,"data-tooltip-type":"text","data-tooltip-show-above":!0,"data-tooltip-show-immediately":!0,"data-tooltip-max-width":250})}function y({accessData:e,fileKey:r,fileName:n,isPrototype:i,nodeName:o,repoName:l,params:d,touchedAt:g}){let f=a.useMemo(()=>{let e=new URL(`${window.location.origin}/${i?"proto":"file"}/${r}`);return e.search=d.startsWith("?")?d:`?${d}`,e.toString()},[r,i,d]),y=a.useRef(null);return a.createElement("div",{ref:y,className:p.cx.colorBg.h24.px16.py12.flex.gap8.itemsCenter.justifyBetween.bt1.bSolid.colorBorder.zIndex1.$},a.createElement("div",{className:p.cx.flex.gap8.itemsCenter.h24.wFull.overflowHidden.$},a.createElement(b,{fileKey:r,params:d,isPrototype:i}),a.createElement("div",{className:"embed_documentation_footer--footerLink--fS-Mp"},l&&a.createElement(s.L,null),a.createElement("a",{className:p.cx.cursorPointer.font11.lh16.fontInter.fontMedium.colorText.flex.itemsCenter.gap4.overflowHidden.$,target:"_blank",rel:"noopener",href:f,onClick:()=>{(0,c.sx)("IFrame Mobile Viewer Document Footer Clicked",{fileKey:r,kind:i?"proto":"file",embed_host:(0,u.Yw)()})}},a.createElement("span",{className:p.cx.truncate.$},n),o&&a.createElement(a.Fragment,null,a.createElement("span",null,"\xb7"),a.createElement("span",{className:p.cx.truncate.$},o))))),a.createElement("div",{className:p.cx.flex.gap4.alignCenter.itemsCenter.cursorDefault.$},e&&a.createElement(E,{accessData:e,isPrototype:i}),null!=g&&a.createElement(_.E,{truncate:!0,fontSize:9,color:"secondary"},(0,h.tx)("proto.embeds.last_edited",{relativeTime:a.createElement(m.h1,{date:g})}))))}function b({params:e,fileKey:r,isPrototype:n,showTooltip:i}){let o=`${window.location.origin}/${n?"proto":"file"}/${r}${e.startsWith("?")?e:`?${e}`}`,s=i?{"data-tooltip":(0,h.t)("embed.footer.figma_logo_aria_label"),"data-tooltip-type":"text","data-tooltip-show-above":!0,"data-tooltip-show-immediately":!0,"data-tooltip-max-width":250}:{};return a.createElement("div",{...s,role:"button",tabIndex:0,"aria-label":(0,h.t)("embed.footer.figma_logo_aria_label"),onClick:()=>{(0,d.FJ)(o,"_blank"),(0,c.sx)("IFrame Mobile Viewer Document Footer Clicked",{fileKey:r,kind:n?"proto":"file",embed_host:(0,u.Yw)()})}},a.createElement(l.m,{className:p.cx.flexShrink0.$}))}},861506:(e,r,n)=>{n.d(r,{l:()=>p});var a=n(411855),i=n(188507),o=n(941670),s=n(538649),l=n(776250),c=n(511617),d=n(835650),u=n(154254),m=n(362252);function p({fileKey:e}){let r=(0,i.wA)(),n=a.useRef(null),p=c.R7.fullscreen,h=(0,i.d4)(e=>e.appWindow.inFullScreenMode);return p?a.createElement("div",{ref:n,role:"button",tabIndex:0,onClick:()=>{(0,l.sx)("IFrame Mobile Viewer Toggle Fullscreen",{fileKey:e,source:"click",embed_host:(0,d.Yw)()}),r((0,m._M)())},className:u.cx.absolute.bRadius5.colorBg.w24.h24.cursorDefault.flex.itemsCenter.justifyCenter.elevation100.$,style:{top:16,right:16}},h?a.createElement(o.p,null):a.createElement(s.O,null)):null}},950431:(e,r,n)=>{n.d(r,{NG:()=>s,_C:()=>l,ph:()=>o});var a=n(411855),i=n(8681);let o=a.memo(function({text:e,className:r,tooltipPropsWhenTruncated:n,onTruncationChange:o,multiline:s}){let l=a.useRef(null),c=function({multiline:e,text:r,textRef:n,disabled:i}){let[o,s]=a.useState(!1);return a.useLayoutEffect(()=>{!i&&n.current&&(e?s(n.current.offsetHeight<n.current.scrollHeight):s(n.current.offsetWidth<n.current.scrollWidth))},[i,r,e,n]),o}({multiline:s,text:e,textRef:l});return a.useEffect(()=>{o?.(c)},[o,c]),a.createElement("span",{className:`${i.I} ${r??""} ${s?i.c:""}`,ref:l,...c?n:{}},e)});function s({multiline:e,text:r,textRef:n,disabled:i}){let[o,s]=a.useState(!1);return a.useEffect(()=>{let a=l({multiline:e,text:r,textRef:n,disabled:i});void 0!==a&&s(a)},[i,r,e,n]),o}function l({multiline:e,textRef:r,disabled:n}){if(!n&&r.current)return e?r.current.offsetHeight<r.current.scrollHeight:r.current.offsetWidth<r.current.scrollWidth}},192437:(e,r,n)=>{let a;n.d(r,{As:()=>f,H4:()=>g,S1:()=>T,tH:()=>b});var i=n(411855),o=n(414507),s=n(463033),l=n(776250),c=n(966712),d=n(776621),u=n(939863),m=n(178466),p=n(210954),h=n(933771);let _=Symbol("Default"),g={DEFAULT_FULL_PAGE:_,NONE_I_KNOW_WHAT_IM_DOING:Symbol("None")};function f(e,r){if(r){e.stack+="\n\nReact stack:"+r.componentStack;let n=Error("React component stack where the error occurred");n.stack=r.componentStack,e.cause=n}}function E(e){return e?.message?.includes("The node to be removed is not a child of this node")}let y=class e extends i.Component{constructor(e){super(e),this.state={hasError:!1,isGoogleTranslateError:!1}}static getDerivedStateFromError(e){return{hasError:!0,isGoogleTranslateError:E(e),error:e}}componentDidCatch(r,n){f(r,n);try{this.props.onError?.()}catch(e){}let a=this.props.fallback===g.DEFAULT_FULL_PAGE,i=E(r),s=(0,d.$D)(this.props.team||o.FigmaTeam.FRONTEND_PLATFORM,r,{tags:{react:!0,errorBoundary:this.props.boundaryKey,...this.props.sentryTags,...a?{severity:d.DZ.Critical}:{}}});a&&!e.reportedHardCrash&&(e.reportedHardCrash=!0,i?(0,l.sx)("js_extension_dom_crash",{errorBoundary:this.props.boundaryKey},{forwardToDatadog:!0}):(0,l.sx)("js_hard_crash",{errorBoundary:this.props.boundaryKey},{forwardToDatadog:!0})),this.sentryID=s}render(){if(this.state.hasError){console.log("Rendering error: "+this.state.error),console.log("Boundary key: "+this.props.boundaryKey);let e=null;return e=this.props.fallback===_?i.createElement(T,{sentryId:this.sentryID,isGoogleTranslateError:this.state.isGoogleTranslateError}):this.props.fallback===g.NONE_I_KNOW_WHAT_IM_DOING?null:this.props.fallback,i.createElement(v,{error:this.state.error},e)}return this.props.children}};y.reportedHardCrash=!1;let b=y,I={title:"Something went wrong",descriptionP1:"Our team is looking into it now. If reloading the page doesn't work, check our ",statusPage:"status page",descriptionP2:" for updates",googleTranslateDescription:"This is likely due to a Chrome Extension, such as Google Translate. Try disabling Chrome Extensions and refresh the page",reload:"Reload"};function T(e){let r=i.useMemo(()=>{let e=document.body.style.colorScheme;return e&&"dark"===e?"dark":"light"},[]),n=i.useMemo(()=>{try{let e=(0,m.Gq)(!1);return e?.initialized&&!!(0,u.t)("general.root_error_boundary_title")}catch(e){return!1}},[]),a=e.isGoogleTranslateError&&(0,c.kc)().error_boundary_google_translate;return i.createElement("div",{className:h.ZX,"data-preferred-theme":r},i.createElement("div",{className:h.fi},i.createElement("div",{className:h.v2},n?(0,u.tx)("general.root_error_boundary_title"):I.title),i.createElement("div",{className:h.rU},a?n?(0,u.tx)("general.root_error_boundary_google_translate_description"):I.googleTranslateDescription:n?(0,u.tx)("general.root_error_boundary_description",{status_page:i.createElement(p.N,{trusted:!0,href:"https://status.figma.com",style:{display:"inline"}},(0,u.tx)("general.root_error_boundary_status_page"))}):i.createElement(i.Fragment,null,i.createElement("span",null,I.descriptionP1),i.createElement(p.N,{trusted:!0,href:"https://status.figma.com",style:{display:"inline"}},I.statusPage),i.createElement("span",null,I.descriptionP2))),i.createElement("div",{className:h.yV},i.createElement(s.$n,{variant:"primary",onClick:()=>location.reload()},n?(0,u.tx)("general.root_error_boundary_refresh"):I.reload)),e.sentryId&&i.createElement("div",{className:h.g6},"Error ID: ",e.sentryId)))}function v(e){let r=a??=i.createContext({}),{error:n,children:o}=e,s=i.useMemo(()=>({error:n}),[n]);return i.createElement(r.Provider,{value:s},o)}},946689:(e,r,n)=>{n.d(r,{$$:()=>N,C3:()=>W,CY:()=>el,HE:()=>V,JU:()=>ei,Kz:()=>eu,Lf:()=>en,M7:()=>B,NY:()=>J,N_:()=>eo,O0:()=>H,Ph:()=>es,RW:()=>em,Us:()=>ec,VA:()=>X,VE:()=>ed,Yo:()=>ep,cw:()=>U,e2:()=>w,il:()=>et,ks:()=>ee,nD:()=>O,nR:()=>R,ny:()=>S,p6:()=>D,pY:()=>q,qM:()=>F,qZ:()=>M,rb:()=>j,s6:()=>k,tB:()=>ea,tM:()=>P,u4:()=>A,vd:()=>C,vv:()=>L,vx:()=>$,wG:()=>Q});var a=n(411855),i=n(902008),o=n(629019),s=n.n(o),l=n(846627),c=n(498750),d=n(62557),u=n(153234),m=n(452441),p=n(163023),h=n(46481),_=n(154254),g=n(672517),f=n(988022),E=n(498606),y=n(210954),b=n(150823),I=n(247245),T=n(126815);let v=null;function S(e){v=e}function w(e){return a.createElement("div",{className:s()(b.GC,e.reversed&&b.zi,e.className)},e.children)}class A extends u.uA{constructor(){super(...arguments),this.onKeyDown=e=>{v&&v(e)||(this.props.onKeyDown&&this.props.onKeyDown(e),e.keyCode===c.Uz.ESCAPE&&e.target.blur())},this.onClick=u.cZ(this,"click",e=>{this.props.onClick&&this.props.onClick(e)}),this.onPointerDown=u.Am(this,"pointerdown",e=>{this.props.onPointerDown&&this.props.onPointerDown(e)})}render(){let e={...this.props};e.className=`${this.props.defaultClass} ${this.props.className||""}`;let r=this.props.dataTestId;return delete e.defaultClass,delete e.recordingKey,delete e.dataTestId,this.props.onClick&&this.props.recordingKey&&(e.onClick=this.onClick),this.props.onPointerDown&&this.props.recordingKey&&(e.onPointerDown=this.onPointerDown),a.createElement("button",{onKeyDown:this.onKeyDown,...e,"data-testid":r},this.props.children)}}A.displayName="ButtonBase";class N extends a.Component{render(){let{fullWidth:e,...r}=this.props;return a.createElement(A,{defaultClass:s()(b.xZ,e&&b.Ij),...r})}}N.displayName="ButtonPrimary";let C=(0,g.tf)(N);class L extends a.Component{render(){let{fullWidth:e,...r}=this.props;return a.createElement(A,{defaultClass:s()(b.fY,e&&b.Ij),...r})}}L.displayName="BigButtonPrimary";let O=(0,g.tf)(L);class R extends a.Component{render(){return a.createElement(A,{defaultClass:b.HM,type:"button",...this.props})}}R.displayName="ButtonSecondary";let P=(0,g.tf)(R);class D extends a.Component{render(){let{fullWidth:e,...r}=this.props;return a.createElement(A,{defaultClass:s()(b.xJ,e&&b.Ij),type:"button",...r})}}D.displayName="BigButtonSecondary",(0,g.tf)(D);class k extends a.Component{render(){return a.createElement(A,{defaultClass:b.oC,type:"button",...this.props})}}k.displayName="ButtonSecondaryNegative";class M extends a.Component{render(){return a.createElement(A,{defaultClass:b.ky,type:"button",...this.props})}}M.displayName="ButtonNegative";let F=(0,g.tf)(M);class x extends a.Component{render(){return a.createElement(A,{defaultClass:b.OK,type:"button",...this.props})}}x.displayName="BigButtonNegative";class U extends a.Component{render(){return a.createElement(A,{defaultClass:b.I2,...this.props})}}U.displayName="ButtonWhite";let B=(0,g.tf)(U);class V extends a.Component{render(){return a.createElement(A,{defaultClass:b.rd,...this.props})}}V.displayName="ButtonInverse";class G extends a.Component{render(){let{fullWidth:e,...r}=this.props;return a.createElement(A,{defaultClass:s()(b.FO,e&&b.Ij),...r})}}G.displayName="BigButtonInverse",(0,g.tf)(G);class H extends a.Component{render(){return a.createElement(A,{defaultClass:b.OY,...this.props})}}H.displayName="ButtonGreen";class W extends a.Component{render(){let{customClassName:e,...r}=this.props;return a.createElement(A,{defaultClass:b.Iw,className:e,...r})}}W.displayName="ButtonGrey",(0,g.tf)(H);class K extends a.Component{render(){return a.createElement(A,{defaultClass:this.props.solidWhenDisabled?b.dy:b.sY,...this.props})}}K.displayName="BigButtonGreen";class Y extends a.Component{render(){return a.createElement(A,{defaultClass:b.yT,...this.props})}}Y.displayName="BigButtonBlack",(0,g.tf)(Y);class $ extends a.Component{render(){let e=`${b.xZ} ${this.props.className||""}`,r={...this.props,className:e,rel:"noopener"};return a.createElement("a",{...r},this.props.children)}}$.displayName="ButtonLink";let j=(0,g.tf)($);class z extends a.Component{render(){let{fullWidth:e,...r}=this.props,n=s()(b.fY,this.props.fullWidth&&b.Ij),i=`${n} ${this.props.className||""}`;return r={...r,className:i,rel:"noopener"},a.createElement("a",{...r},this.props.children)}}z.displayName="ButtonLink";let q=(0,g.tf)(z);class X extends a.Component{render(){let e=`${b.HM} ${this.props.className||""}`,r={...this.props,className:e,rel:"noopener"};return a.createElement("a",{...r},this.props.children)}}X.displayName="ButtonSecondaryLink";let J=(0,g.tf)(X);class Z extends a.Component{render(){let e=`${b.hz} ${this.props.className||""}`,r={...this.props,className:e,rel:"noopener"};return a.createElement("a",{...r},this.props.children)}}Z.displayName="BigButtonSecondaryLink";let Q=118,ee=a.forwardRef(function({className:e,...r},n){return a.createElement(m.L,{className:s()(b._Z,e),...(0,d.d)(r),ref:n})});class et extends a.Component{render(){let e=`${b.ki} ${this.props.className||""}`,r={...this.props,className:e};return a.createElement(m.L,{...r})}}et.displayName="BigTextInput";let er=(0,g.h3)(m.L);class en extends a.Component{render(){return a.createElement("div",{className:this.props.className||(this.props.disabled?b.d1:b.ri)},a.createElement("label",{htmlFor:this.props.htmlName,className:s()(b.dQ,{[b.QC]:this.props.value,[b.z3]:this.props.hasError})},this.props.label),this.props.trackingFieldName&&a.createElement(er,{id:this.props.htmlName,name:this.props.htmlName,value:this.props.value,disabled:this.props.disabled,placeholder:this.props.placeholder||this.props.label,autoComplete:this.props.autoCompleteName,type:this.props.type||"text",maxLength:this.props.maxLength||50,onKeyPress:this.props.onKeyPress,onChange:this.props.onChange,onBlur:this.props.onBlur,onFocus:this.props.onFocus,trackingFieldName:this.props.trackingFieldName,trackingPopulationLevel:this.props.value?f._R.POPULATED_COMPLETE:f._R.NOT_POPULATED,dataTestId:this.props.dataTestId,required:this.props.required}),!this.props.trackingFieldName&&a.createElement(m.L,{id:this.props.htmlName,name:this.props.htmlName,value:this.props.value,disabled:this.props.disabled,placeholder:this.props.placeholder||this.props.label,autoComplete:this.props.autoCompleteName,type:this.props.type||"text",maxLength:this.props.maxLength||50,onKeyPress:this.props.onKeyPress,onChange:this.props.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,dataTestId:this.props.dataTestId,required:this.props.required}),this.props.tooltip&&a.createElement(p.B,{className:b.G,svg:T.A,"data-tooltip-type":E.Ib.TEXT,"data-tooltip":this.props.tooltip,"data-tooltip-timeout-delay":300}))}}class ea extends a.PureComponent{constructor(e){super(e),this.documentKeyDown=e=>{e.keyCode===c.Uz.TAB&&this.setState({showFocus:!0})},this.documentMouseDown=e=>{this.setState({showFocus:!1})},this.onFocus=e=>{this.state.showFocus||e.target.blur()},this.classNameForInput=()=>{let e=`${b.kv} ${this.props.className||""}`;return this.state.showFocus&&(e+=` ${b.hP}`),e},this.state={showFocus:!1}}componentDidMount(){document.addEventListener("keydown",this.documentKeyDown),document.addEventListener("mousedown",this.documentMouseDown)}componentWillUnmount(){document.removeEventListener("keydown",this.documentKeyDown),document.removeEventListener("mousedown",this.documentMouseDown)}render(){let{svgOverride:e,classOverride:r,checked:n,...o}=this.props;return a.createElement("div",{className:b.HI},a.createElement("input",{...o,type:"checkbox",onFocus:this.onFocus,className:r||this.classNameForInput(),checked:n}),n?a.createElement("div",{className:b.Eg},a.createElement(h.U,{svg:e??I.A},a.createElement(i.l,null))):null)}}function ei(e){let r=`${b.Pf} ${e.className||""}`;return a.createElement("label",{...e,className:r})}ea.displayName="Checkbox";let eo=y.N,es=(0,g.tf)(eo);class el extends a.Component{render(){let{canFocus:e,trusted:r,className:n,...i}=this.props,o=`${b.MH} ${n||""}`,s={...i,className:o,rel:r?"noopener":"noopener nofollow noreferrer ugc",onClick:e=>{this.props.onClick&&this.props.onClick(e),this.props.href&&(0,l.e)(this.props.href,e)}};return e&&(s={href:"#",tabIndex:0,...s}),a.createElement("a",{...s},this.props.children)}}el.displayName="Link";let ec=(0,g.tf)(el);class ed extends a.Component{render(){let e=`${b.X7} ${this.props.className||""}`,r={...this.props,className:e};return a.createElement("select",{...r})}}function eu(e){let r=e.multiple?8*e.multiple:e.value?e.value:0;return"x"===e.direction?a.createElement("div",{style:{width:r},className:_.cx.flexShrink0.$,"aria-hidden":"true"}):a.createElement("div",{style:{height:r},className:_.cx.flexShrink0.$,"aria-hidden":"true"})}ed.displayName="BigSelect",eu.displayName="Spacing";let em=(0,g.tf)(p.B),ep=(0,g.tf)(e=>a.createElement("a",{...e},e.children));(0,g.tf)(function(e){return a.createElement(A,{defaultClass:s()(b._d,e.className),...e})})},210954:(e,r,n)=>{n.d(r,{N:()=>s});var a=n(411855),i=n(846627),o=n(150823);class s extends a.Component{render(){let e=`${o.nf} ${this.props.className||""}`,{canFocus:r,trusted:n,...s}=this.props,l={...s,className:e,rel:n?"noopener":"noopener nofollow noreferrer ugc",onClick:e=>{this.props.onClick&&this.props.onClick(e),this.props.href&&(0,i.e)(this.props.href,e)}};return r&&(l={href:"#",tabIndex:0,...l}),a.createElement("a",{...l},this.props.children)}}s.displayName="Link"},641170:(e,r,n)=>{n.d(r,{D5:()=>N,Kw:()=>v,LN:()=>C,t1:()=>A});var a=n(411855),i=n(552793),o=n(135317),s=n(629019),l=n.n(s),c=n(959407),d=n(521725),u=n.n(d),m=n(563706),p=n(62557),h=n(452441),_=n(163023),g=n(822916),f=n(64592),E=n(804891),y=n(901924),b=n(383955),I=n(37060),T=n(444776);function v(e){return a.createElement(a.Fragment,null,e.hasError&&a.createElement("div",{className:f.$8},e.errorMessage))}a.forwardRef(function(e,r){let n=`__${e.name}`;return a.createElement("fieldset",{ref:r,className:f.lI},a.createElement("label",{className:l()(f.Pf,e.inlineLabel&&f.Qg),htmlFor:n},e.label),a.createElement("select",{className:l()(f.Wm,e.responseHasError&&f.U3),id:n,name:e.name,onChange:e.onChange,onFocus:e.onFocus,onBlur:e.onBlur,value:e.value||""},a.createElement("option",{disabled:!!e.value},e.inlineLabel?e.label:""),Object.keys(e.options).map(r=>a.createElement("option",{value:r,key:r},e.options[r]))),e.error)}),a.forwardRef(function(e,r){let n=`__${e.name}`;return a.createElement("fieldset",{ref:r,className:f.lI},a.createElement("label",{className:f.Pf,htmlFor:n},e.label),a.createElement("textarea",{className:l()(f.PC,e.responseHasError&&f.U3),onChange:e.onChange,onBlur:e.onBlur,id:n,name:e.name,value:e.value}),e.error)}),a.forwardRef(function(e,r){let n=`__${e.name}`;return a.createElement("fieldset",{ref:r,className:f.lI},a.createElement("label",{className:f.Pf,htmlFor:n},e.label),a.createElement("input",{className:l()(f.En,e.className,e.responseHasError&&f.U3),disabled:e.disabled,onChange:e.onChange,onBlur:e.onBlur,onFocus:e.onFocus,onKeyDown:e.onKeyDown,onKeyDownCapture:e.onKeyDownCapture,id:n,type:"text",name:e.name,value:e.value}),e.children,e.error)});let S=e=>e?"string"==typeof e?e:e.displayName:"",w=e=>e?"string"==typeof e?e:e.value:"";function A(e){let[r,n]=a.useState(!1),{isOpen:i,selectedItem:o,getToggleButtonProps:s,getMenuProps:d,highlightedIndex:u,getItemProps:p}=(0,c.WM)({items:e.options,itemToString:S,onSelectedItemChange({selectedItem:r}){let a=w(r);e.onChange(a),n(!0)}}),h=m.nW;return a.createElement("div",{className:l()(E.Y3,i&&E.lC,!i&&e.responseHasError&&!r&&E.v8,e.className)},a.createElement("button",{type:"button","aria-haspopup":"listbox",...s({className:l()(E.YF,i&&E.zZ)})},a.createElement("div",{className:E.ax},a.createElement("label",{className:E.KJ,"aria-label":e.ariaLabel},h?e.mobileLabel:e.label),a.createElement("span",{className:r?E.Nd:E.sU},S(o)||e.label)),a.createElement(_.B,{svg:i?b.A:y.A,className:E.vP})),a.createElement("div",{className:l()(E.P2,!i&&E.Qg)},a.createElement("ul",{...d()},i&&e.options.map((e,r)=>a.createElement("li",{key:w(e),...p({item:e,index:r,className:l()(u===r&&E.$p,E.J7)})},w(e)===w(o)&&a.createElement(_.B,{svg:I.A,className:E.eD}),S(e))))))}function N(e){let[r,n]=a.useState(!1),{isOpen:i,selectedItem:o,getToggleButtonProps:s,getMenuProps:d,highlightedIndex:u,getItemProps:m}=(0,c.WM)({items:e.options,itemToString:S,onSelectedItemChange({selectedItem:r}){let a=w(r);e.onChange(a),n(!0)}});return a.createElement("div",{className:l()(f.be,i&&f.qT,!i&&e.responseHasError&&f.U3,e.className)},a.createElement("button",{type:"button","aria-haspopup":"listbox",...s({className:f.YF})},a.createElement("div",{className:r?f.A0:f.zz,"aria-label":e.ariaLabel},S(o)||e.label),a.createElement(_.B,{svg:T.A,className:f.vP})),a.createElement("div",{className:l()(f.P2,!i&&f.Qg)},a.createElement("ul",{className:f.Ec,...d()},i&&e.options.map((e,r)=>a.createElement("li",{key:w(e),...m({item:e,index:r,className:l()(u===r&&f.$p,f.J7)})},S(e))))))}a.forwardRef(function(e,r){let[n,i]=a.useState([]),o=a.useRef(null),s=r=>!!e.defaultOption&&(!e.maxListSizeToRevealDefaultOption||r.length<=e.maxListSizeToRevealDefaultOption),d=()=>{let r=e.options.sort().slice(0,100);s(r)&&r.unshift(e.defaultOption),i(r)},{isOpen:m,getToggleButtonProps:p,getLabelProps:h,getMenuProps:_,getInputProps:g,getItemProps:E,getComboboxProps:y,openMenu:b,highlightedIndex:I}=(0,c.Bp)({selectedItem:e.value,items:n,onSelectedItemChange({selectedItem:r}){e.onChange(r||"")},onIsOpenChange:({isOpen:e,selectedItem:r})=>{e&&!r&&d()},onInputValueChange:r=>{if(r.inputValue.trim().length>0){let n=RegExp(u()(r.inputValue),"i"),a=e.options.filter(e=>n.test(e)).sort().slice(0,100);s(a)&&a.unshift(e.defaultOption),i(a)}else d()}}),T=()=>{(!e.value||e.defaultOption&&e.defaultOption===e.value)&&d()};return a.createElement("fieldset",{ref:r,className:f.lI},a.createElement("label",{...h({className:f.Pf})},e.label),a.createElement("div",{...y({className:f.Tw})},a.createElement("input",{...g({className:l()(f.En,m&&f.qT,!m&&e.responseHasError&&f.U3,e.className),ref:o,disabled:e.disabled,onBlur:e.onBlur,onClick:()=>{T(),b()}})}),a.createElement("button",{...p({onClick:()=>{T(),o.current.select()},disabled:e.disabled,className:f.pZ,type:"button"})})),a.createElement("div",{className:l()(f.Em,!m&&f.Qg)},a.createElement("ul",{..._({className:f.es})},n.map((e,r)=>a.createElement("li",{className:l()(I===r&&f.$p,0===r&&n.length>1&&s(n)?f.KG:f.J7),key:e,...E({item:e,index:r})},e)))),e.children,!m&&e.error)}),a.forwardRef(function(e,r){let n=`__${e.name}`;return a.createElement("fieldset",{ref:r,className:f.lI},a.createElement("label",{className:f.Pf,htmlFor:n},e.label),a.createElement("input",{type:"file",id:n,name:e.name,onChange:e.onChange}),e.error)});let C=a.forwardRef(function({className:e,...r},n){return a.createElement("div",{className:E.Kf},a.createElement("label",{className:E.qf,htmlFor:r.id},r.placeholder),a.createElement(h.L,{className:l()(E.hF,e),...(0,p.d)(r),ref:n}))});a.forwardRef(function(e,r){return a.createElement("div",{className:g.kL},a.createElement("span",{className:g.zr,"data-disabled":!!e.disabled||void 0},a.createElement(i.F,{ref:r,...e,className:g.kv}),a.createElement("span",{className:g.Cv},a.createElement(o.g,{className:g.uU}))),a.createElement("label",{htmlFor:e.id},e.label))})},632923:(e,r,n)=>{n.d(r,{DH:()=>S,Go:()=>w,Wd:()=>T,dH:()=>v,k0:()=>N,ks:()=>C,mQ:()=>I,yJ:()=>b});var a=n(411855),i=n(629019),o=n.n(i),s=n(966712),l=n(452441),c=n(493323),d=n(163023),u=n(101505),m=n(672517),p=n(33406),h=n(807481),_=n(304467),g=n(377182),f=n(262254),E=n(160870);class y extends a.Component{render(){let e=`${h.x6} ${this.props.className||""}`,r={...this.props,className:e};return a.createElement("button",{...r},this.props.children)}}y.displayName="Button";let b=(0,m.tf)(function({svg:e,onClick:r,text:n}){return a.createElement(v,{type:"button",use:"hollow",onClick:r,"data-no-auto-focus":!0},a.createElement("div",{className:h.og},a.createElement(d.B,{className:h.lL,autosize:!0,width:"18px",height:"18px",svg:e,useOriginalSrcFills_DEPRECATED:!0}),a.createElement("span",{className:_.Nu},n)))});(0,m.tf)(function({svg:e,onClick:r,text:n}){return a.createElement(T,{type:"button",use:"hollow",onClick:r,"data-no-auto-focus":!0},a.createElement("div",{className:h.og},a.createElement(d.B,{className:h.lL,autosize:!0,width:"18px",height:"18px",svg:e,useOriginalSrcFills_DEPRECATED:!0}),a.createElement("div",{className:_.Nu},n)))});class I extends a.Component{render(){return a.createElement(b,{onClick:this.props.onClick,text:this.props.text,svg:f.A,trackingProperties:{trackingDescriptor:u.c.CONTINUE_WITH_GOOGLE}})}}I.displayName="GoogleAuthButton";class T extends a.Component{render(){let e=o()(p.yx,{[p.Ij]:this.props.fullWidth},{[h.Wx]:"hollow"===this.props.use},{[h.bX]:this.props.autoHeight},this.props.className),r={...this.props,className:e};return delete r.loading,delete r.fullWidth,delete r.autoHeight,a.createElement("button",{...r,disabled:this.props.disabled||this.props.loading},this.props.loading?a.createElement(c.kt,null):this.props.children)}}function v(e){let{loading:r,fullWidth:n=!0,autoHeight:i,...s}=e,l=o()(_.yx,{[p.Ij]:n},{[h.bX]:i},{[_.bN]:"hollow"!==e.use&&!r&&!e.disabled,[_.Bn]:"hollow"!==e.use&&r},{[_.Wx]:"hollow"===e.use},_.En,e.className),c={...s,className:l};return a.createElement("button",{...c,disabled:e.disabled||r},a.createElement("span",{className:o()(_.PA,"hollow"!==e.use&&_.bh)},"hollow"===e.use||!r&&e.disabled?null:r?a.createElement(d.B,{svg:E.A,width:"24px",height:"24px",className:_.zc}):a.createElement(d.B,{svg:g.A,width:"24px",height:"24px",className:_.zc}),e.children))}T.displayName="Button",T.defaultProps={fullWidth:!0};let S=(0,m.tf)(v,!!(0,s.kc)().enable_cookies_screen_rollout),w=(0,m.tf)(T);class A extends a.Component{render(){return a.createElement(y,{type:"button",className:h.l_,onClick:this.props.onClick,"data-no-auto-focus":!0},this.props.children)}}function N(e){return a.createElement("div",{style:{height:8*(e.multiple||1)}},e.children)}A.displayName="BrandInfoCaptureButton";class C extends a.Component{render(){let e=`${h._Z} ${this.props.className||""}`,r={...this.props,className:e};return a.createElement(l.L,{...r})}}C.displayName="TextInput"},395771:(e,r,n)=>{n.d(r,{R:()=>o});var a=n(411855),i=n(498606);class o extends a.PureComponent{constructor(){super(...arguments),this.textContainerRef=a.createRef(),this.getFittingText=()=>{if(!this.textContainerRef.current)return null;let e=this.textContainerRef.current,r=e.getBoundingClientRect().width,{text:n}=this.props,a=document.createElement("p");if(a.className=this.props.className||"",a.style.cssText="display: inline; white-space: nowrap;",e.appendChild(a),a.innerText=n,a.getBoundingClientRect().width<=r)return e.removeChild(a),n;let i="";for(let e=0;e<n.length;e+=1){let o=`...${n.slice(n.length-e)}`;a.innerText=o;let{width:s}=a.getBoundingClientRect();if(s>r)break;i=o}return e.removeChild(a),i}}componentDidMount(){this.forceUpdate()}render(){let e=this.getFittingText();return a.createElement("div",{ref:this.textContainerRef,style:{width:this.props.maxWidth?`${this.props.maxWidth}px`:"100%"},"data-tooltip-type":this.props.text!==e?i.Ib.TEXT:void 0,"data-tooltip":this.props.text!==e?this.props.text:void 0,"aria-label":this.props.text},a.createElement("p",{className:this.props.className},e))}}o.displayName="FrontTruncatedText"},262896:(e,r,n)=>{n.d(r,{ny:()=>m});var a=n(776250),i=n(686759),o=n(966712);let s=(0,o.tl)().zendesk_web_key_public,l={productQuestion:{id:360001731233},bugReport:{id:360001744374},featureRequest:{id:360001746113},account:{id:360005944714},dataPrivacy:{id:24342800450071},community:{id:7767730653079},billing:{id:9707134248215},events:{id:19669189307671},other:{id:360001758534}},c=function(){return{webWidget:{position:{horizontal:"right",vertical:"bottom"},offset:{horizontal:"0px",vertical:"40px"},contactForm:{selectTicketForm:{"*":"Please choose:"},ticketForms:Object.keys(l).map(e=>l[e])},helpCenter:{searchPlaceholder:{"*":"How can we help?"},messageButton:{"*":"Contact us"}}}}},d=null;function u(){window.zE&&(window.zE("webWidget","show"),window.zE("webWidget","open"),window.zE("webWidget:on","close",()=>{window.zE("webWidget","hide")}),window.zE("webWidget:on","userEvent",e=>{let r={action:e.action,relatedZendeskId:e.properties?.id,relatedZendeskName:e.properties?.name,searchTerm:e.properties?.term};(0,a.sx)("zendesk_help_widget",r)}))}function m(e,r,n){(d||(d=(async()=>{if(window.figmaPerfTesting)throw Error("testing");if(window.zE)return window.zE;if(!s)throw Error("No zendesk_web_key_public api key");window.zESettings=c();try{return await (0,i.k0)("https://static.zdassets.com/ekr/snippet.js?key="+s,{id:"ze-snippet",cors:!1}),window.zE}catch(e){throw d=null,e}})())).then(()=>{d&&window.zE&&(window.zESettings=c(),r?.ticketForms&&(window.zESettings.webWidget.contactForm={ticketForms:r.ticketForms.map(e=>l[e]),fields:(r.fields||[]).map(e=>({id:e.id,prefill:{"*":e.value}}))}),r?.suppressAnswerBot&&(window.zESettings.webWidget.helpCenter={suppress:!0},window.zESettings.webWidget.answerBot={suppress:!0}),r?.locale&&window.zE("webWidget","setLocale",r.locale),window.zE("webWidget","updateSettings",window.zESettings),window.zE("webWidget","prefill",{name:{value:e.name,readOnly:!0},email:{value:e.email,readOnly:!0}}))}).then(u).catch(()=>console.error(`Our support center is not currently available. You can email us at ${(0,o.W4)()}.`))}},455057:(e,r,n)=>{n.d(r,{S:()=>u,_:()=>m});var a=n(411855),i=n(629019),o=n.n(i),s=n(163023),l=n(501114),c=n(794587),d=n(54375),u=(e=>(e[e.INFORMATION=0]="INFORMATION",e[e.ERROR=1]="ERROR",e[e.WARNING=2]="WARNING",e[e.FIGJAM=3]="FIGJAM",e[e.PLAIN=4]="PLAIN",e))(u||{});function m({color:e,icon:r,fullWidth:n,rounded:i=!0,text:u,dataTestId:m}){return a.createElement("div",{"data-testid":m,style:l.sx.if(!i,{borderRadius:"0px"}).$,className:o()({[c.ZI]:0===e,[c.z3]:1===e,[c.$e]:2===e,[c.hh]:3===e,[c.pj]:4===e,[c.Ij]:n})},a.createElement(s.B,{autosize:!0,className:c.G,width:"16px",height:"12px",svg:r??d.A}),a.createElement("p",null,u))}},439729:(e,r,n)=>{n.d(r,{T:()=>o});var a=n(411855),i=n(178466);let o=a.memo(function(e){let r=e.locale||(0,i.Gq)().getPrimaryLocale(!1),n=a.useMemo(()=>new Intl.ListFormat(r,{style:e.formatStyle||"long",type:e.formatType||"conjunction"}),[r,e.formatStyle,e.formatType]),o=a.Children.toArray(e.children),s=n.formatToParts(o.map((e,r)=>`${r}`)).map((e,r)=>"element"===e.type?o[Number(e.value)]:"literal"===e.type?a.createElement("span",{key:`${r}_literal`},e.value):null);return a.createElement("span",{className:e.className||""},s)})},723325:(e,r,n)=>{n.d(r,{M3:()=>y,Nt:()=>v,bh:()=>I,c2:()=>T,dP:()=>E,lv:()=>w,yn:()=>S,z3:()=>b});var a=n(411855),i=n(943632),o=n(67151),s=n(432258),l=n(157663),c=n(44948),d=n(498750),u=n(860601),m=n(563706),p=n(522739);let h={preventScroll:!1,block:"nearest"},_={supportHorizontalNavigation:!0,simulateClickOnEnter:!0};class g{constructor({id:e,path:r,column:n,element:a,defaultFocusOptions:i=h,setIsFauxFocused:o,fauxClick:s,keyboardItemNavigationOptions:l=_}){this.id=e,this.path=r,this.column=n,this.element=a,this.defaultFocusOptions=i,this.setIsFauxFocused=o,this.fauxClick=s,this.navigationOptions=l}addToTree(e,r){this.tree=e,function(e,r){let n;let{path:a,column:i}=r;try{n=P(e,a,!0)}catch(e){l.k.warn("Failed to add item to KeyboardNavigationProvider tree: ",r);return}let o=i??0,s=n.items[o]?.element;s&&s!==r.element&&l.k.warn("Overwriting item in KeyboardNavigationProvider tree. Existing item: ",n.items[o]," New item: ",r),n.items[o]=r}(e,this),r&&this.id&&r.set(this.id,this)}removeFromTree(e){this.tree&&(function(e,r){let n,a;let{path:o,column:c}=r;try{n=(a=P(e,o)).items[c||0]??null}catch(e){l.k.warn("Item not found in KeyboardNavigationProvider tree: ",r);return}if(!n){l.k.warn("Item not found in KeyboardNavigationProvider tree: ",r);return}if(n.element!==r.element){l.k.warn("Item found in KeyboardNavigationProvider tree, but it does not match the expected item: ",n,r);return}if(a.items[c||0]=void 0,a.items.every(s.uy)){R(e,o.slice(0,-1)).children[o[o.length-1]]=void 0;for(let r=o.length-1;r>=1;r--){let n=o.slice(0,r),[a,l]=(0,i.Vs)(n),c=R(e,a);if(R(e,n).children.every(s.uy))c.children[l]=void 0;else break}e.children.every(s.uy)&&(e.children=[])}}(this.tree,this),this.tree=void 0),e&&this.id&&e.delete(this.id)}focus(e=this.defaultFocusOptions){this.element.focus({preventScroll:!0}),e.preventScroll||this.element.scrollIntoView(e)}blur(){this.element.blur()}fauxFocus(e=this.defaultFocusOptions){this.setIsFauxFocused(!0,this),e.preventScroll||this.element.scrollIntoView(e)}fauxBlur(){this.setIsFauxFocused(!1,this)}simulateClick(){this.fauxClick?this.fauxClick():this.element.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))}getItemAbove(){return this.tree&&O(this.tree,this,"up")}getItemBelow(){if(!this.tree)return null;let e=O(this.tree,this,"down")||null;for(;e&&e.navigationOptions.skipOnDownNavigation;)e=e.getItemBelow();return e}getItemToTheLeft(){return this.tree&&L(this.tree,this,"left")}getItemToTheRight(){if(!this.tree)return null;let e=L(this.tree,this,"right")||null;for(;e&&e.navigationOptions.skipOnRightNavigation;)e=e.getItemToTheRight();return e}}let f=a.createContext(null),E=a.forwardRef(function({onKeyDown:e,allowVim:r=!1,disabled:n,overrideDown:i,overrideUp:o,overrideLeft:s,overrideRight:l,allowHorizontalNavigationWhileInputFocused:c=!1,useKeyNavFauxFocusSync:d,useFocusOnly:m,...h},_){let g=a.useRef({type:"parent",children:[]}),E=a.useRef(new Map),y=a.useRef(null),b=a.useCallback(e=>{y.current===e&&(y.current=null)},[]),I=a.useCallback(e=>{y.current=e},[]),A=a.useRef(null),N=a.useRef(null),C=a.useRef(u.lQ),L=a.useCallback(e=>{e===A.current&&(A.current=null,C.current(),C.current=u.lQ)},[]),O=a.useCallback((e,r)=>{A.current&&L(A.current),A.current=e,C.current=r},[L]),R=a.useCallback(n=>{let a=y.current,d=A.current,u=k(n),p=!(n.metaKey||n.ctrlKey||n.altKey||n.shiftKey)&&c;if(T(n,r)){if(d&&!m){n.preventDefault();let e=D(g.current,d,o);e?e?.fauxFocus():d.getItemAbove()?.fauxFocus()}else if(a){n.preventDefault();let e=D(g.current,a,o);e?e?.focus():a.getItemAbove()?.focus()}}else if(v(n,r)){if(d&&!m){n.preventDefault();let e=D(g.current,d,i);e?e?.fauxFocus():d.getItemBelow()?.fauxFocus()}else if(a){n.preventDefault();let e=D(g.current,a,i);e?e?.focus():a.getItemBelow()?.focus()}else N.current&&N.current.fauxFocus()}else if(S(u,r,p)){if(d&&d.navigationOptions.supportHorizontalNavigation&&!m){n.preventDefault();let e=D(g.current,d,s);e?e?.fauxFocus():d.getItemToTheLeft()?.fauxFocus()}else if(a){n.preventDefault();let e=D(g.current,a,s);e?e?.focus():a.getItemToTheLeft()?.focus()}}else if(w(u,r,p)){if(d&&d.navigationOptions.supportHorizontalNavigation&&!m){n.preventDefault();let e=D(g.current,d,l);e?e?.fauxFocus():d.getItemToTheRight()?.fauxFocus()}else if(a){n.preventDefault();let e=D(g.current,a,l);e?e?.focus():a.getItemToTheRight()?.focus()}}else"Enter"===u?d&&!m&&(n.preventDefault(),d.navigationOptions.simulateClickOnEnter&&d.simulateClick()):"Escape"===u&&(a||d)&&(n.preventDefault(),a&&a.blur(),d&&d.fauxBlur());e?.(n)},[c,r,e,m,o,i,s,l]),P=a.useMemo(()=>({tree:g.current,lookupMap:E.current,onFocusItem:I,onBlurItem:b,onFauxFocusItem:O,onFauxBlurItem:L,fauxBlurItem:()=>A.current?.fauxBlur(),blurItem:()=>y.current?.blur(),setDefaultFauxFocusedItem:e=>{N.current||(N.current=e)},fauxFocusDefaultItem:()=>{N.current?.fauxFocus()},useKeyNavFauxFocusSync:d}),[I,b,O,L,d]);return a.createElement(f.Provider,{value:P},a.createElement(p.D8,{onKeyDown:n?e:R,forwardedRef:_,...h}))});function y({path:e,column:r=null,id:n,defaultFocusOptions:i,onFocus:o,onBlur:l,onFauxFocus:d,onFauxBlur:u,fauxClick:m,disabled:p,navigationOptions:h}){let _=(0,c.zN)(e),E=(0,c.zN)(i),y=(0,c.zN)(h);if(0===_.length)throw Error("Path must be non-empty");if(_.some(e=>e<0))throw Error("All path indices must be non-negative");if(null!=r&&r<0)throw Error("Column must be non-negative");let[b,I]=a.useState(void 0),[T,v]=a.useState(!1),[S,w]=a.useState(!1),A=a.useRef(null),{tree:N,lookupMap:C,onFocusItem:L,onBlurItem:O,onFauxFocusItem:R,onFauxBlurItem:P,setDefaultFauxFocusedItem:D,useKeyNavFauxFocusSync:k}=(0,s.sR)(a.useContext(f),"Must use `useKeyboardNavigationItem` inside `<KeyboardNavigationProvider>");a.useEffect(()=>{if(b&&!p){let e=()=>v(!0),r=()=>v(!1);return b.addEventListener("focus",e),b.addEventListener("blur",r),b===document.activeElement&&e(),()=>{b.removeEventListener("focus",e),b.removeEventListener("blur",r),b===document.activeElement&&r()}}},[p,b]);let M=a.useCallback(e=>{w(r=>(r&&(u?.(),P(e)),!1))},[u,P]),F=a.useCallback(e=>{w(r=>(r||(d?.(),R(e,()=>{null!==A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{M(e)},0)})),!0))},[M,d,R]),x=a.useCallback((e,r)=>{e?F(r):M(r)},[F,M]);a.useEffect(()=>()=>{null!==A.current&&clearTimeout(A.current)},[]);let U=a.useMemo(()=>null==b||p?null:new g({id:n,path:_,column:r,element:b,defaultFocusOptions:E,setIsFauxFocused:k?x:w,fauxClick:m,keyboardItemNavigationOptions:y}),[b,p,n,_,r,E,k,x,m,y]);return a.useEffect(()=>{if(U)return U.addToTree(N,C),U.navigationOptions.fauxFocusByDefault&&D(U),()=>{U.removeFromTree(C),U.navigationOptions.fauxFocusByDefault&&D(null)}},[U,C,D,N]),a.useEffect(()=>{if(U&&T)return o?.(),L(U),()=>{l?.(),O(U)}},[U,T,o,l,L,O]),a.useEffect(()=>{if(!k&&U&&S)return d?.(),R(U,()=>{w(!1)}),()=>{u?.(),P(U)}},[U,S,d,u,R,P,k]),{setKeyboardNavigationElement:I,keyboardNavigationItem:U,isFocused:T,isFauxFocused:S}}function b(e="real"){let{blurItem:r,fauxBlurItem:n}=(0,s.sR)(a.useContext(f),"Must use `useBlurFocusedItem` inside `<KeyboardNavigationProvider>");return a.useCallback(()=>{switch(e){case"real":r();break;case"faux":n();break;default:(0,o.xb)(e)}},[r,n,e])}function I({preventScroll:e}={}){let{tree:r}=(0,s.sR)(a.useContext(f),"Must use `useFocusFirstItem` inside `<KeyboardNavigationProvider>");return a.useCallback(()=>{let n=function e(r){if("leaf"===r.type)return r.items.find(e=>null!=e)??null;for(let n of r.children)if(n){let r=e(n);if(r)return r}return null}(r);n?.focus({preventScroll:e})},[e,r])}function T(e,r){let n=k(e),a=(0,d.vN)(e,d.xH.CONTROL),i=m.Ay.mac&&a;return"ArrowUp"===n||"KeyK"===n&&r&&A()||i&&"KeyP"===n}function v(e,r){let n=k(e),a=(0,d.vN)(e,d.xH.CONTROL),i=m.Ay.mac&&a;return"ArrowDown"===n||"KeyJ"===n&&r&&A()||i&&"KeyN"===n}function S(e,r,n=!1){return"ArrowLeft"===e&&N(n)||"KeyH"===e&&r&&A()}function w(e,r,n=!1){return"ArrowRight"===e&&N(n)||"KeyL"===e&&r&&A()}function A(){return!C(document.activeElement)}function N(e){let r=document.activeElement;return!C(r)||!!e||(r instanceof HTMLDivElement?""===r.textContent:""===r.value)}function C(e){return!!e&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)||e instanceof HTMLDivElement&&"true"===e.contentEditable}function L(e,{path:r,column:n},a){if(null==n)return;let o=P(e,r);return("left"===a?i.lq:i.M0)(o.items,n)||O(e,{path:r,column:"left"===a?1/0:-1},"left"===a?"up":"down")}function O(e,{path:r,column:n},a){for(let o=r.length-1;o>=0;o--){let s=r.slice(0,o),l=r[o],c=R(e,s),d=("up"===a?i.lq:i.M0)(c.children,l);if(d){let e=("up"===a?function e(r){if("leaf"===r.type)return r;let n=(0,i.lq)(r.children,r.children.length);if(n)return e(n);throw Error("Expected a node but got nothing")}:function e(r){if("leaf"===r.type)return r;let n=(0,i.M0)(r.children,-1);if(n)return e(n);throw Error("Expected a node but got nothing")})(d);return(0,i.qg)(e.items,n||0)}}}function R(e,r,n=!1){for(let a of r){let r=e.children[a];if(r){if("leaf"===r.type)throw Error("Expected a parent but got a leaf");e=r}else if(n){let r={type:"parent",children:[]};e.children[a]=r,e=r}else throw Error("Expected a parent but got nothing")}return e}function P(e,r,n=!1){let[a,o]=(0,i.Vs)(r),s=R(e,a,n),l=s.children[o];if(l){if("parent"!==l.type)return l;throw Error("Expected a parent but got a leaf")}if(n){let e={type:"leaf",items:[]};return s.children[o]=e,e}throw Error("Expected a leaf but got nothing")}function D(e,r,n){try{var a,i;let o=n?.(r);return o&&(a=o.path,i=o.column,P(e,a).items[i??0])}catch(e){}}function k(e){return e.code??e.key}},638889:(e,r,n)=>{n.d(r,{S:()=>o});var a=n(411855),i=n(939931);class o extends a.PureComponent{render(){let e=["\u2318","\u2325","\u21E7","\u2303"];return a.createElement("span",{className:this.props.className},this.props.shortcut.split("").map((r,n)=>{let o=-1!==e.indexOf(r)?i.C:i.G;return a.createElement("span",{key:n,className:o},r)}))}}o.displayName="KeyboardShortcut"},607899:(e,r,n)=>{n.d(r,{n:()=>a.o});var a=n(194422);n(411855),n(629019),n(493323),n(281249),n(354235)},194422:(e,r,n)=>{n.d(r,{o:()=>a});var a,i=n(167249);(e=>{e.set=(0,i.N)("BLOCKED_UI_LOADING_INDICATOR_SET"),e.remove=(0,i.N)("BLOCKED_UI_LOADING_INDICATOR_REMOVE")})(a||(a={}))},976999:(e,r,n)=>{n.d(r,{JR:()=>o,Qp:()=>c,Wi:()=>l});var a=n(411855),i=n(194021),o=(e=>(e.SHIMMER="shimmer",e.SHIMMER_ON_MENU="shimmer_on_menu",e.LIGHT_SHIMMER="light_shimmer",e.NO_SHIMMER="no_shimmer",e))(o||{});let s=e=>{switch(e){case"shimmer":default:return i._J;case"light_shimmer":return i.QH;case"shimmer_on_menu":return i.Sw;case"no_shimmer":return}};function l(e){return a.createElement("div",{style:{...e.style??{},opacity:e.opacity?`${e.opacity}%`:"100%"},className:`${"shimmer_on_menu"===e.animationType?i.ky:i.KQ} ${e.primary?i.lx:""} ${e.className||""}`,"data-testid":e.dataTestId},a.createElement("div",{className:s(e.animationType)}))}function c(e){return a.createElement("div",{style:{...e.style??{},opacity:e.opacity?`${e.opacity}%`:"100%"},className:`${i.GE} ${e.primary?i.lx:""} ${e.className||""}`,"data-testid":e.dataTestId},a.createElement("div",{className:s(e.animationType)}))}},69267:(e,r,n)=>{n.d(r,{R:()=>I});var a=n(411855),i=n(629019),o=n.n(i),s=n(776250),l=n(966712),c=n(563706),d=n(286640),u=n(946689),m=n(939863),p=n(657544),h=n(101505),_=n(672517);let g="mobile_download_prompt--mobilePromptTitle--7Tgsn text--fontPos13--xW8hS text--_fontBase--QdLsd",f="mobile_download_prompt--mobilePromptOption--TbF2D",E="mobile_download_prompt--mobilePromptOptionTitle--mMUYW text--fontPos13--xW8hS text--_fontBase--QdLsd",y="mobile_download_prompt--mobilePromptOptionImage--Cp9zK",b="mobile_download_prompt_dismissed";function I(e){let{isCompact:r}=e,n=c.aR?p.o:p.J,i=(0,d.UG)(),g=!r&&!!e.renderBlockingPrompt,[I,S]=a.useState(!g),[w,A]=a.useState(!g);a.useEffect(()=>{null===i.get(b)&&(S(!1),A(!1))},[i,g]);let N=()=>{g||(S(!0),(0,s.sx)("mobile_web_mobile_app_download_prompt_dismissed",{userId:e.userIdForTracking}),setTimeout(()=>{A(!0)},300),i.set(b,!0))};return null!==i.get(b)?null:a.createElement(_.fu,{name:"Mobile Download Prompt"},a.createElement("div",{className:o()({"mobile_download_prompt--overlay--OzW6J":!0,"mobile_download_prompt--overlayClosed--2FWpY":I,"mobile_download_prompt--overlayAnimateEnd--dBvI0":w}),style:{transitionDuration:"300ms"},onClick:N},a.createElement("div",{className:o()("mobile_download_prompt--mobilePromptContainer--FKz5e","mobile_download_prompt--mobileDownloadPromptContainer--FaI33",{"mobile_download_prompt--mobileDownloadPromptContainerClosed--DHusv":I,"mobile_download_prompt--mobileDownloadPromptContainerFullHeightBlocking--B100f":g}),onClick:e=>{e.stopPropagation()}},a.createElement("div",{className:o()("mobile_download_prompt--mobilePromptDescriptionContainer--1PhoH",{"mobile_download_prompt--fullHeightPrompt--U6KWw":g})},r?a.createElement(v,null):a.createElement(T,{renderBlockingPrompt:g??!1})),a.createElement("hr",{className:o()({"mobile_download_prompt--mobilePromptHR--UpOqS":!0,"mobile_download_prompt--fullWidthHR--B-2i1":g})}),a.createElement("div",{className:f},a.createElement("img",{className:y,src:(0,l.ck)("249f0f055b922ecef6bffc592a8420e7e6eddcea"),alt:(0,m.t)("file_browser.mobile_prompt.app_image_alt")}),a.createElement("div",null,a.createElement("h3",{className:E},(0,m.tx)("file_browser.mobile_prompt.app_title")),a.createElement("p",{className:"mobile_download_prompt--mobilePromptOptionDescription--APlZp text--fontPos11--2LvXf text--_fontBase--QdLsd"},g?(0,m.tx)("file_browser.mobile_prompt.app_description_new"):(0,m.tx)("file_browser.mobile_prompt.app_description"))),a.createElement(u.pY,{trackingProperties:{userId:e.userIdForTracking,appLink:n,trackingDescriptor:h.c.MOBILE_WEB_MOBILE_APP_DOWNLOAD_PROMPT_CLICKED},href:n,className:"mobile_download_prompt--downloadActionButton--lOsEh"},(0,m.tx)("file_browser.mobile_prompt.app_action"))),!g&&a.createElement("div",{className:f},a.createElement("img",{className:y,src:(0,l.ck)("741698fed49afa5e8f3becdd906e66d32c8e7fae"),alt:(0,m.t)("file_browser.mobile_prompt.browser_image_alt")}),a.createElement("div",null,a.createElement("h3",{className:E},(0,m.tx)("file_browser.mobile_prompt.browser_title"))),a.createElement(u.p6,{onClick:()=>N(),className:"mobile_download_prompt--continueActionButton--7yKGD"},(0,m.tx)("file_browser.mobile_prompt.browser_action"))))))}function T(e){return a.createElement(a.Fragment,null,a.createElement("img",{className:"mobile_download_prompt--mobilePromptImage--U2Yqj",src:(0,l.ck)("5f1dc37f397dbddf711d3d950bee5dd46c07fc72"),alt:(0,m.t)("file_browser.mobile_prompt.image_alt")}),a.createElement("div",{className:"mobile_download_prompt--mobilePromptTitleContainer--o8VIK"},a.createElement("h2",{className:g},e.renderBlockingPrompt?(0,m.tx)("file_browser.mobile_prompt.modal_title_blocking"):(0,m.tx)("file_browser.mobile_prompt.modal_title")),a.createElement("p",{className:"mobile_download_prompt--mobilePromptSubTitle--GFR67 text--fontPos13--xW8hS text--_fontBase--QdLsd"},e.renderBlockingPrompt?(0,m.tx)("file_browser.mobile_prompt.modal_body_blocking"):(0,m.tx)("file_browser.mobile_prompt.modal_body"))))}function v(){return a.createElement(a.Fragment,null,a.createElement("h2",{className:g},(0,m.tx)("file_browser.mobile_prompt.modal_title_compact")))}},32863:(e,r,n)=>{n.d(r,{Cp:()=>x,IW:()=>F,Lp:()=>V,Qv:()=>U,jq:()=>G,ne:()=>M,o_:()=>H,xD:()=>B,y2:()=>W});var a=n(411855),i=n(782683),o=n(882316),s=n(629019),l=n.n(s),c=n(91408),d=n(320063),u=n(358145),m=n(498750),p=n(153234),h=n(522739),_=n(452441),g=n(163023),f=n(154254),E=n(939863),y=n(501114),b=n(896474),I=n(226055),T=n(283942),v=n(498606),S=n(507956),w=n(227795),A=n(170588),N=n(837746),C=n(404921),L=n(399403),O=n(700977),R=n(703475),P=n(630834),D=n(361807),k=n(372240);function M(e,r){let n=a.useCallback(e=>{setTimeout(()=>{I.current&&(I.current.focus(),e&&I.current.select())},0)},[]),i=a.useCallback(()=>{I.current&&I.current.blur()},[]),o=a.useCallback(()=>{I.current&&I.current.select()},[]);a.useImperativeHandle(r,()=>({focus:n,blur:i,select:o,searchInput:I.current}));let[s,l]=a.useState(!1),[c,h]=a.useState(!1),[_,g]=a.useState(void 0),{onFocus:f,onClick:E}=e,y=a.useCallback(()=>{f&&f(),h(!0)},[f]),b=a.useRef(!1),I=a.useRef(null),v=a.useCallback(e=>{b.current=document.activeElement!==e.target},[]),S=a.useCallback(()=>{b.current&&(I.current?.select(),y())},[y]),w=a.useCallback(()=>{e.onBlur&&e.onBlur(),h(!1)},[e]),A=p.AF(e.recordingKey,"change",r=>{let n=r.target;e.onChange(n.value)}),N=p.v_(e.recordingKey,"keydown",r=>{if(!(e.isKeyDownHandled&&e.isKeyDownHandled(r))){if(" "===r.key&&r.stopPropagation(),r.keyCode===m.Uz.ESCAPE){I.current?.blur();return}(0,T.jr)(r,T.W0.NO)}}),C=a.useCallback((e=!1)=>{e&&l(!0),n(),E&&E()},[n,E]),L=p.rf(e.recordingKey,"click",r=>{r.stopPropagation(),e.clearSearch(),l(!1),n()}),O=p.v_(e.recordingKey+".clear","keydown",r=>{r.stopPropagation(),e.clearSearch(),l(!1),n()}),R=(0,u.ZC)(e.isFocused);return a.useEffect(()=>{R||!0!==e.isFocused?!0===R&&!1===e.isFocused&&i():n()},[i,n,R,e.isFocused]),(0,d.h)(()=>{e.focusOnMount&&I.current&&(I.current.focus(),y()),e.selectTextOnMount&&I.current&&I.current.select()}),{loggedOutSearchBarActivated:s,inputFocused:c,placeholderWidth:_,setPlaceholderWidth:g,searchInputRef:I,onMouseDown:v,onMouseUp:S,onSearchClick:C,onClearSearchClick:L,onClearSearchKeyDown:O,onFocus:f,onBlur:w,onClick:E,onSearchKeyDown:N,onSearchChange:A}}let F=a.forwardRef((e,r)=>{let n=(0,I.GS)(),{searchInputRef:o,onMouseDown:s,onMouseUp:l,onClearSearchClick:c,onFocus:d,onBlur:u,onClick:m,onSearchKeyDown:p,onSearchChange:h}=M(e,r),f=(0,S.ks)(),b=f?C.vq:C.rk;return a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${b} ${e.className||""}`},e.withUI3Icon?a.createElement(i.h,{className:e.iconClassName}):a.createElement(g.B,{className:e.iconClassName??C.qc,svg:L.A}),a.createElement(_.L,{ref:o,placeholder:e.placeholder||(0,E.t)("general.search"),className:C.mn,value:e.query,onMouseDown:s,onMouseUp:l,onFocus:d,onBlur:u,onClick:m,onChange:h,onKeyDown:p,spellCheck:!1,style:y.sx.if(e.hasTransparentBackground,y.sx.add({background:"transparent"})).if(f||e.smallFont,y.sx.if(n,y.sx.textBodyMedium,y.sx.font11.$)).$,disabled:e.disabled,dataTestId:"search-bar-input",maxInputLength:e.maxInputLength}),a.createElement(K,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:c}))});a.forwardRef((e,r)=>{let n=(0,I.GS)(),{searchInputRef:i,onMouseDown:o,onMouseUp:s,onClearSearchClick:l,onFocus:c,onBlur:d,onClick:u,onSearchKeyDown:m,onSearchChange:p}=M(e,r),h=(0,S.ks)(),g=h?C.vq:C.rk;return a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${g} ${e.className||""}`},a.createElement("button",{onClick:e.onBack,className:f.cx.colorBgSecondary.$},a.createElement(b.In,{icon:"chevron-left-32"})),a.createElement(_.L,{ref:i,placeholder:e.placeholder||(0,E.t)("general.search"),className:C.mn,value:e.query,onMouseDown:o,onMouseUp:s,onFocus:c,onBlur:d,onClick:u,onChange:p,onKeyDown:m,spellCheck:!1,style:y.sx.if(e.hasTransparentBackground,y.sx.add({background:"transparent"})).if(h||e.smallFont,y.sx.if(n,y.sx.textBodyMedium,y.sx.font11.$)).$,disabled:e.disabled,dataTestId:"search-bar-input",maxInputLength:e.maxInputLength}),a.createElement(K,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:l}))}),a.forwardRef((e,r)=>{let{inputFocused:n,placeholderWidth:i,setPlaceholderWidth:o,searchInputRef:s,onMouseDown:l,onMouseUp:c,onSearchClick:d,onClearSearchClick:u,onFocus:m,onBlur:p,onClick:h,onSearchKeyDown:f,onSearchChange:y}=M(e,r),b=e.placeholder||(0,E.t)("general.search"),I=`${e.className||""} ${n?C.pp:C.MI}`;return a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:I},a.createElement(g.B,{className:C.MU,svg:L.A,onClick:()=>d()}),a.createElement(_.L,{ref:s,placeholder:b,className:C.mn,value:e.query,onMouseDown:l,onMouseUp:c,onFocus:m,onBlur:p,onClick:h,onChange:y,onKeyDown:f,style:{width:n?void 0:i},spellCheck:!1}),a.createElement("div",{className:C.ds,ref:e=>o(e?.getBoundingClientRect().width)},b),a.createElement(K,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:u}))}),a.forwardRef((e,r)=>{let n=a.createRef();return a.useImperativeHandle(r,()=>n.current),a.createElement("div",{className:C.$7,onMouseDown:()=>n.current?.focus(),role:"presentation"},a.createElement(F,{...e,smallFont:!0,hasTransparentBackground:!0,className:l()(f.cx.wFull.$,e.className),ref:n}))});let x=a.forwardRef((e,r)=>{let{inputFocused:n,placeholderWidth:i,searchInputRef:o,onMouseDown:s,onMouseUp:l,onClearSearchClick:c,onFocus:d,onBlur:u,onClick:m,onSearchKeyDown:p,onSearchChange:h}=M(e,r),f=e.placeholder||(0,E.t)("general.search"),y=`${e.className||""} ${C.W1}`,b=e.query.length>0?C.p3:C.Rt;return a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:y,onMouseDown:e=>{s(e),e.target.matches("input")||e.preventDefault()},onMouseUp:l,role:"presentation"},a.createElement(g.B,{className:C.mh,svg:L.A}),a.createElement(_.L,{ref:o,placeholder:f,className:b,value:e.query,onFocus:d,onBlur:u,onClick:m,onChange:h,onKeyDown:p,style:{width:n?void 0:i},spellCheck:!1}),a.createElement(K,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:c}))}),U=a.forwardRef((e,r)=>{let{inputFocused:n,placeholderWidth:i,setPlaceholderWidth:o,searchInputRef:s,onMouseDown:l,onMouseUp:c,onClearSearchClick:d,onFocus:u,onBlur:m,onClick:p,onSearchKeyDown:h,onSearchChange:g}=M(e,r),f=e.placeholder||(0,E.t)("general.search"),y=`${e.className||""} ${C.Gh}`,I=e.query.length>0?C.r3:C.nP;return a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:y,onMouseDown:e=>{l(e),e.target.matches("input")||e.preventDefault()},onMouseUp:c,role:"presentation"},a.createElement(b.In,{icon:"search-32"}),a.createElement(_.L,{ref:s,placeholder:f,className:I,value:e.query,onFocus:u,onBlur:m,onClick:p,onChange:g,onKeyDown:h,style:{width:n?void 0:i},spellCheck:!1}),a.createElement("div",{className:C.lm,ref:e=>o(Math.max(50,e?.getBoundingClientRect().width))},f),a.createElement(K,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:d}))}),B=a.forwardRef((e,r)=>{let{searchInputRef:n,onMouseDown:i,onMouseUp:o,onFocus:s,onBlur:l,onClick:c,onSearchKeyDown:d,onSearchChange:u}=M(e,r);return a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:C.sb},a.createElement(_.L,{ref:n,placeholder:e.placeholder||(0,E.t)("general.search"),className:C.vs,value:e.query,onMouseDown:i,onMouseUp:o,onFocus:s,onBlur:l,onChange:u,onClick:c,onKeyDown:d,spellCheck:!1}),a.createElement(g.B,{className:C.Ck,svg:O.A,onClick:e.onSubmit}))}),V=a.forwardRef((e,r)=>{let{searchInputRef:n,onMouseDown:i,onMouseUp:o,onClearSearchClick:s,onFocus:c,onBlur:d,onClick:u,onSearchKeyDown:m,onSearchChange:h}=M(e,r);return a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:l()(e.className||C.HD,{[C.RT]:!e.extraSpacing,[C.qX]:e.extraSpacing,[C.Cs]:e.hideSearchIcon})},!e.hideSearchIcon&&a.createElement(g.B,{svg:R.A,className:C.nk}),a.createElement(_.L,{ref:n,placeholder:e.placeholder||(0,E.t)("design_systems.publishing_modal.search_placeholder"),className:e.query?C.CC:C.Vl,value:e.query,onMouseDown:i,onMouseUp:o,onFocus:c,onBlur:d,onClick:u,onChange:h,onKeyDown:m,spellCheck:!1,dataTestId:e.dataTestId}),!!e.query&&!e.hideXIcon&&a.createElement(w.Me,{recordingKey:p.Pt(e,"closeX"),svg:P.default,onClick:s,"data-tooltip-type":v.Ib.TEXT,"data-tooltip":(0,E.t)("search.search_bar.clear")}))}),G=a.forwardRef((e,r)=>{let{searchInputRef:n,onMouseDown:i,onMouseUp:o,onClearSearchClick:s,onFocus:l,onBlur:c,onClick:d,onSearchKeyDown:u,onSearchChange:m}=M(e,r);return a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${C.ZG} ${e.className||""}`},a.createElement(g.B,{svg:R.A,className:C.MU}),a.createElement(_.L,{ref:n,placeholder:e.placeholder||(0,E.t)("general.search"),className:C.uD,value:e.query,onMouseDown:i,onMouseUp:o,onFocus:l,onBlur:c,onClick:d,onChange:m,onKeyDown:u,spellCheck:!1,style:e.hasTransparentBackground?{background:"transparent"}:void 0}),a.createElement(h.D8,{className:C.m9,onClick:s,recordingKey:p.Pt(e,"clearSearch")},!!e.query&&(0,E.tx)("collaboration.branching_to_source.clear")),!e.hideXIcon&&a.createElement("div",{className:C.NC},a.createElement(g.B,{className:C.i3,svg:P.default,onClick:e.onClose})))}),H=a.forwardRef((e,r)=>{let{loggedOutSearchBarActivated:n,searchInputRef:i,onMouseDown:o,onMouseUp:s,onSearchClick:l,onClearSearchClick:d,onFocus:u,onBlur:m,onClick:p,onSearchKeyDown:h,onSearchChange:f}=M(e,r);return a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${C.ax} ${e.className||""}`},!n&&!e.query&&a.createElement("div",{className:C.JU,onClick:()=>l(!0)},a.createElement(g.B,{className:C.Qm,svg:O.A})),(n||!!e.query)&&a.createElement("div",{className:C.S_},a.createElement(_.L,{ref:i,placeholder:e.placeholder||(0,E.t)("general.search"),className:C.nA,value:e.query,onMouseDown:o,onMouseUp:s,onFocus:u,onBlur:m,onClick:p,onChange:f,onKeyDown:h,autoFocus:!0,spellCheck:!1}),a.createElement(A.z,{query:`(min-width: ${(0,c.hG)(N.tgj)}px)`},a.createElement(g.B,{className:C.i3,svg:D.A,onClick:d})),a.createElement(A.z,{query:`(max-width: ${(0,c.hG)(N.tgj)-1}px)`},a.createElement(g.B,{className:C.i3,svg:k.A,onClick:d}))))}),W=a.forwardRef((e,r)=>{let n=a.createRef();return a.useImperativeHandle(r,()=>n.current),a.createElement("div",{className:C.tL,style:e.styleOverrides,onMouseDown:()=>n.current?.focus(),role:"presentation"},a.createElement(F,{...e,smallFont:!0,className:l()(f.cx.wFull.$,e.className),ref:n}))});function K({query:e,hideXIcon:r,withSmallXIcon:n,onClearSearchClick:i}){return!e||r?null:a.createElement(a.Fragment,null,n?a.createElement(h.D8,{className:C.i3,onClick:i},a.createElement(o.f,null)):a.createElement(g.B,{dataTestId:"search-x-icon",className:C.i3,svg:P.default,onClick:i}))}},910769:(e,r,n)=>{n(411855),n(188507);var a=n(672517),i=n(206316);(0,a.tf)(i.d)},271779:(e,r,n)=>{n.d(r,{C:()=>c,i:()=>d});var a=n(411855),i=n(629019),o=n.n(i),s=n(503537),l=n(154254),c=(e=>(e.Block="block",e.DeprecatedFullHeightBlock="fullHeightBlock",e.Contents="contents",e))(c||{});class d extends a.Component{constructor(){super(...arguments),this.containerRef=a.createRef(),this.traverseChildren=()=>{this.firstTabbableEl=void 0,this.lastTabbableEl=void 0;let e=r=>{for(let n of((0,s.B)(r)&&((!this.firstTabbableEl||r.tabIndex<this.firstTabbableEl.tabIndex)&&(this.firstTabbableEl=r),(!this.lastTabbableEl||r.tabIndex>=this.lastTabbableEl.tabIndex)&&(this.lastTabbableEl=r)),Array.from(r.children)))e(n);for(let n of Array.from(r.shadowRoot?.children||[]))e(n)};e(this.containerRef.current)},this.onFrontGuardFocus=e=>{this.traverseChildren();let r=this.containerRef.current.contains(e.relatedTarget)?this.lastTabbableEl:this.firstTabbableEl;this.focusElement(r)},this.onBackGuardFocus=()=>{this.traverseChildren(),this.focusElement(this.firstTabbableEl)}}focusElement(e){e&&setTimeout(()=>{e.focus(),e.select?.()},0)}render(){let e=o()(this.props.className,{[l.cx.hFull.$]:"fullHeightBlock"===this.props.displayAs,displayContents:"contents"===this.props.displayAs});return a.createElement("div",{className:e,style:this.props.style},a.createElement("div",{"aria-hidden":"true",tabIndex:0,onFocus:this.onFrontGuardFocus}),a.createElement("div",{className:e,ref:this.containerRef},this.props.children),a.createElement("div",{"aria-hidden":"true",tabIndex:0,onFocus:this.onBackGuardFocus}))}}d.defaultProps={displayAs:"contents"},d.displayName="TabLoop"},331737:(e,r,n)=>{n.d(r,{NU:()=>p});var a=n(411855),i=n(915440),o=n(261902),s=n(71656),l=n(554460),c=n(869381),d=n(27703),u=n(99506),m=n(279453);function p({file:e,...r}){var n,p;let h=(0,i.Rs)(m.sMs,{key:e.key}),_=(n=e.editor_type,p=!!e.thumbnail_guid,n===u._Y.SLIDES?c.F.SLIDES:n===u._Y.WHITEBOARD?p?c.F.WHITEBOARD:c.F.DEFAULT_WHITEBOARD:p?c.F.DESIGN:c.F.DEFAULT_DESIGN);if((0,d.i4)(e)){if("loading"===h.status)return a.createElement(l.q,{...r});if(!h.transform(e=>!!e.file?.hasPermission).unwrapOr(!1))return a.createElement(o.N,{thumbnailType:_,...r})}return a.createElement(s.V,{key:e.key,thumbnailUrl:e.thumbnail_url_override??e.thumbnail_url,thumbnailType:_,clientMeta:e.client_meta,lastTouchedAt:e.touched_at??e.updated_at,...r})}},842262:(e,r,n)=>{n.d(r,{A:()=>p});var a=n(411855),i=n(629019),o=n.n(i),s=n(163023),l=n(154254),c=n(939863),d=n(305928),u=n(761070),m=n(639425);function p(e){return e.listView?a.createElement("div",{className:"slightly-larger"===e.listView?d.h5:d._O},a.createElement("div",{className:o()("offline_file_thumbnail--listImage--RsZ9C","slightly-larger"===e.listView?d.Sl:l.cx.hFull.wFull.$)},a.createElement(s.B,{className:"offline_file_thumbnail--listThumbnail--6B-IU",svg:u.A}))):a.createElement("div",{className:"offline_file_thumbnail--thumbnail--mAtos"},a.createElement(s.B,{className:"offline_file_thumbnail--thumbnailIcon--UHGgb",svg:m.A}),a.createElement("div",{className:"offline_file_thumbnail--thumbnailLabel--04hA-"},(0,c.tx)("tile.offline_file_tile.offline_created_file")))}},71656:(e,r,n)=>{n.d(r,{V:()=>T});var a=n(411855),i=n(629019),o=n.n(i),s=n(181912),l=n(966712),c=n(38580),d=n(374626),u=n(864089),m=n(842262),p=n(554460),h=n(869381),_=n(154254),g=n(920037),f=n(414507),E=n(776621);let y=16/9;function b(e){return"#"+(16777216+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1)}let I=(0,c.eU)({});function T({thumbnailUrl:e,thumbnailType:r,lastTouchedAt:n,clientMeta:i,size:c,borderRadius:T,noBorder:v,addtlStyles:S,draggable:w}){let A=!!(0,l.kc)().file_browser_thumbnails_16_by_9&&r!==h.F.DEFAULT_DESIGN&&r!==h.F.DEFAULT_WHITEBOARD&&r!==h.F.SLIDES,{latestThumbnailUrl:N,smartBackgroundColor:C}=function({touchedAt:e,thumbnailUrl:r,needsSmartBackground:n}){let[i,o]=(0,d.fp)(I),l=!e||(0,s.A)(e).isBefore((0,s.A)().subtract(4,"seconds")),c=!n||r&&!!i[r],[u,m]=a.useState(l&&r&&c?r:null),p=a.useCallback(e=>{if(!n||i[e])m(e);else{let r=new Image;r.crossOrigin="anonymous",r.className=_.cx.fixed.hidden.$,r.onload=()=>{let n=function(e){try{if(!e)return null;if((e.naturalWidth/e.naturalHeight).toFixed(3)===y.toFixed(3))return"transparent";let r=document.createElement("canvas"),n=r.getContext("2d");if(!n)return r.remove(),null;let{width:a,height:i}=e;r.width=a,r.height=i,n.drawImage(e,0,0,a,i);let o=n.getImageData(0,i/2,1,1).data,s=n.getImageData(a/2,0,1,1).data,l=n.getImageData(a,i/2,-1,1).data,c=n.getImageData(a/2,i,1,-1).data,d=b(o),u=b(s),m=b(l),p=b(c);return r.remove(),function(e){let r=new Map,n=null,a=0;for(let i of e){let e=(r.get(i)??0)+1;r.set(i,e),e>a&&(a=e,n=i)}return n}([d,u,m,p])}catch(r){return(0,E.$D)(f.FigmaTeam.WAYFINDING,r,{extra:{imageObject:e,"imageObject instanceof HTMLElement":e instanceof HTMLElement,"imageObject instanceof HTMLImageElement":e instanceof HTMLImageElement}}),null}}(r);n&&o(r=>({...r,[e]:n})),m(e),r.remove()},r.src=e,document.body.appendChild(r)}},[m,n,i,o]);a.useLayoutEffect(()=>{if(r){if(e){let n=(0,s.A)(e).diff((0,s.A)().subtract(4,"seconds"));if(n<=0){p(r);return}{let e=setTimeout(()=>{p(r)},n);return()=>clearTimeout(e)}}p(r)}else m(null)},[e,r,p]);let h=n&&u?i[u]:void 0;return{latestThumbnailUrl:u,smartBackgroundColor:h}}({thumbnailUrl:e,touchedAt:n,needsSmartBackground:A}),{thumbnailLoadError:L,onError:O}=function(e){let[{url:r,hasError:n},i]=a.useState({url:e,hasError:!1}),o=a.useCallback(()=>{i(({url:e})=>({url:e,hasError:!0}))},[]);return e!==r?(i({url:e,hasError:!1}),{thumbnailLoadError:!1,onError:o}):{thumbnailLoadError:n,onError:o}}(N),R=r!==h.F.SLIDES?(0,g.C)(i):void 0,P=r===h.F.DEFAULT_DESIGN||r===h.F.DEFAULT_WHITEBOARD;return a.createElement(p.q,{borderRadius:T,backgroundClassName:o()({"thumbnail--whiteboardBackground--NqVbL":r===h.F.WHITEBOARD||r===h.F.DEFAULT_WHITEBOARD,"thumbnail--checkerboardBackground--Q3H9I":r===h.F.DEFAULT_DESIGN&&(!R||"transparent"===R),"thumbnail--backgroundDefault--018Ph":r===h.F.PROTOTYPE||r===h.F.SLIDES||r===h.F.SITES&&!(A&&C)&&(!R||"transparent"===R)}),noBorder:v,backgroundColor:A?C:R},r===h.F.OFFLINE?a.createElement(m.A,{listView:c===h.y.SMALL}):null!==N&&!L&&a.createElement(u.oW,{src:N,alt:"",loading:"lazy",onError:O,draggable:!!w,className:o()(_.cx.hFull.wFull.$,{"thumbnail--thumbnailCover--IK4Yi":!P&&!(0,l.kc)().file_browser_thumbnails_16_by_9,"thumbnail--thumbnailContain---m6Py":P||(0,l.kc)().file_browser_thumbnails_16_by_9,[_.cx.p10.$]:P&&c!==h.y.SMALL,[_.cx.p4.$]:P&&c===h.y.SMALL}),crossOrigin:"anonymous",style:S}))}},554460:(e,r,n)=>{n.d(r,{q:()=>l});var a=n(411855),i=n(629019),o=n.n(i),s=n(154254);function l({backgroundColor:e,backgroundClassName:r,borderRadius:n,noBorder:i,children:l}){return a.createElement("div",{"data-testid":"thumbnail-container",className:o()(s.cx.hFull.wFull.borderBox.if(!i,s.cx.b1.bSolid.colorBorder).$,{[s.cx.bRadius2.$]:2===n,[s.cx.bRadius4.$]:4===n,[s.cx.bRadius6.$]:6===n,[s.cx.bRadius8.$]:8===n},r),style:e?{backgroundColor:e}:void 0},a.createElement("div",{className:"thumbnail_container--aspectRatio--Q7gu8"},l))}},869381:(e,r,n)=>{n.d(r,{F:()=>i,y:()=>a});var a=(e=>(e.SMALL="small",e.DEFAULT="default",e))(a||{}),i=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.DEFAULT_DESIGN="default_design",e.DEFAULT_WHITEBOARD="default_whiteboard",e.OFFLINE="offline",e.SLIDES="slides",e.PROTOTYPE="prototype",e.SITES="sites",e))(i||{})},715981:(e,r,n)=>{n.d(r,{L:()=>_});var a=n(411855),i=n(187134),o=n(96796),s=n(629019),l=n.n(s),c=n(153234),d=n(163023),u=n(348425),m=n(712155),p=n(289298);let h=e=>e.stopPropagation();a.forwardRef((e,r)=>a.createElement(i.o,{eventListeners:["onClick"]},a.createElement(_,{...e,children:void 0,recordingKey:e.recordingKey,ref:r}),e.children));class _ extends c.uA{constructor(e){super(e),this.onClick=c.cZ(this,"click",e=>{this.props.onClick&&this.props.onClick(e)}),this.onKeyDown=e=>{"Escape"===e.key&&(e.preventDefault(),this.wrapperRef.current?.blur(),this.buttonRef.current?.blur()),this.props.enabled&&!this.props.hidden&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),this.props.onClick(e))},this.wrapperRef=a.createRef(),this.buttonRef=a.createRef()}render(){let e,r="";r=this.props.selected?m.wH:this.props.enabled?m.Sn:m.r9,this.props.isUI3&&this.props.ui3Icon?e=this.props.ui3Icon:this.props.useSvgNode?e=this.props.svgNode?a.createElement("span",null,this.props.svgNode):null:this.props.svg&&(e=a.createElement(u.t,{svg:this.props.svg,fallbackSvg:this.props.fallbackSvg,useOriginalSrcFills_DEPRECATED:this.props.useOriginalSrcFills_DEPRECATED,className:this.props.svgStyle}));let n=a.createElement(a.Fragment,null,!this.props.hidden&&e,this.props.text&&a.createElement("span",{className:this.props.textStyle||(this.props.svg?m.Pf:m.Qq)},this.props.text),this.props.showIndicator&&a.createElement("span",{className:this.props.indicatorStyle?this.props.indicatorStyle:m.q3}),this.props.showChevron&&(this.props.isUI3?a.createElement("div",{className:m.VI},a.createElement(o.O,null)):this.props.positionOnChevron?a.createElement("div",{className:m.FH,ref:this.props.chevronRef},a.createElement(d.B,{svg:p.A,className:l()(m.cN,m.Ot)})):a.createElement(d.B,{svg:p.A,className:m.cN})),this.props.children);return a.createElement("button",{id:this.props.id,ref:this.buttonRef,className:l()(r,this.props.narrow?m.sc:null,this.props.className),onMouseDown:this.props.enabled&&!this.props.hidden?this.onClick:void 0,onClick:h,"data-tooltip-type":this.props["data-tooltip-type"],"data-tooltip-slides":this.props["data-tooltip-slides"],"data-tooltip-submenu-open":this.props["data-tooltip-submenu-open"],"data-tooltip":this.props["data-tooltip"],"data-tooltip-shortcut-key":this.props["data-tooltip-shortcut-key"],"data-tooltip-offset-x":this.props.showChevron&&!this.props.isUI3&&this.props.positionOnChevron?8:0,"data-onboarding-key":this.props.onboardingKey,"data-testid":this.props.dataTestId,onKeyDown:this.onKeyDown,"aria-label":this.props.ariaLabel,"aria-expanded":this.props["aria-expanded"],"aria-controls":this.props["aria-controls"],"aria-haspopup":this.props["aria-haspopup"],"data-fullscreen-intercept":!0},n)}}_.displayName="TopBarAction",_.defaultProps={enabled:!0,hidden:!1}},139588:(e,r,n)=>{n(411855),n(629019),n(256975),n(964881),n(617453),n(100197)},299986:(e,r,n)=>{n.d(r,{f:()=>c});var a=n(411855);n(640783);var i=n(966712),o=n(800576);n(163023),n(939863);var s=n(540019),l=n(781294);function c(){return a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.97616 0.163086C3.56555 0.163086 0 3.75492 0 8.19851C0 11.7505 2.28457 14.7572 5.45388 15.8214C5.85012 15.9014 5.99527 15.6485 5.99527 15.4357C5.99527 15.2495 5.9822 14.6109 5.9822 13.9456C3.76343 14.4246 3.30139 12.9877 3.30139 12.9877C2.94482 12.0565 2.41649 11.8171 2.41649 11.8171C1.69029 11.3249 2.46939 11.3249 2.46939 11.3249C3.27494 11.3781 3.69763 12.1497 3.69763 12.1497C4.41061 13.3735 5.55951 13.0277 6.02171 12.8148C6.08767 12.296 6.2991 11.9368 6.52359 11.7373C4.75396 11.551 2.89208 10.8592 2.89208 7.77272C2.89208 6.89468 3.20882 6.17631 3.71069 5.61762C3.63151 5.41811 3.35412 4.59313 3.79004 3.48896C3.79004 3.48896 4.46351 3.27607 5.98204 4.31378C6.63218 4.13789 7.30265 4.04841 7.97616 4.04766C8.64963 4.04766 9.33616 4.14088 9.97012 4.31378C11.4888 3.27607 12.1623 3.48896 12.1623 3.48896C12.5982 4.59313 12.3207 5.41811 12.2415 5.61762C12.7566 6.17631 13.0602 6.89468 13.0602 7.77272C13.0602 10.8592 11.1984 11.5376 9.41551 11.7373C9.70612 11.99 9.9569 12.4689 9.9569 13.2272C9.9569 14.3048 9.94384 15.1696 9.94384 15.4356C9.94384 15.6485 10.0891 15.9014 10.4852 15.8215C13.6545 14.757 15.9391 11.7505 15.9391 8.19851C15.9522 3.75492 12.3736 0.163086 7.97616 0.163086Z",fill:"#24292f",style:{fill:"var(--color-icon)"}}))}(0,i.ck)("aae0db2814117595e45cc509d52e79e7cc31333c"),(0,i.ck)("ae3807b6d650b52da20879078b85a0df23ee056a"),s.M4.Query({fetch:async e=>e?(await l.$.getFaviconForUrlProxy({url:(0,o.Jk)(e)})).data.meta??null:null})},298365:(e,r,n)=>{n.d(r,{n:()=>l});var a=n(411855),i=n(181912),o=n(178466),s=n(498606);function l(e){let r=function(e,r=(0,o.Gq)().getPrimaryLocale(!1)){return new Intl.DateTimeFormat(r,{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}).format(i.A.utc(e).toDate())}(e.date,e.locale);return a.createElement("span",{"data-tooltip-type":s.Ib.TEXT,"data-tooltip":r},e.children)}},427472:(e,r,n)=>{n.d(r,{ZQ:()=>S});var a=n(411855),i=n(629019),o=n.n(i),s=n(511617),l=n(560945),c=n(966712),d=n(646240),u=n(374626),m=n(563706),p=n(946689),h=n(163023),_=n(939863),g=n(101505),f=n(672517),E=n(988022),y=n(111538),b=n(916058),I=n(909595),T=n(491087);function v(e){let[r,n]=a.useState(e.showBanner),{trackEvent:i}=(0,f.j6)(),s=a.useRef(null),c=(0,d.Xr)(y.P4),u=(0,l.wY)(s)??l.cU,m=r?u.height+(e.verticalPadding||0):0;a.useEffect(()=>{c(m)},[m,c]);let b=async()=>{n(!1),await (0,y.L3)({consentRegion:"explicit",cookiesEnabled:!1}),i(E.Ws,{trackingDescriptor:g.c.COOKIE_BANNER_EXPLICIT_CONSENT_OPT_OUT})},v=async()=>{n(!1),await (0,y.L3)({consentRegion:"explicit",cookiesEnabled:!0}),i(E.Ws,{trackingDescriptor:g.c.COOKIE_BANNER_EXPLICIT_CONSENT_OPT_IN})},S=async()=>{n(!1),await (0,y.L3)({consentRegion:"explicit",cookiesEnabled:!1}),i(E.Ws,{trackingDescriptor:g.c.COOKIE_BANNER_EXPLICIT_CONSENT_DISMISS})};return r?a.createElement("div",{className:o()(T.kL,e.variant===I.a.COMMUNITY&&[T.gC,T.Vt],e.variant===I.a.FILE_VIEWER&&T.ut,e.variant===I.a.PROTOTYPE&&T.Id,e.variant===I.a.AUTH&&[T.gC,T.Yp]),role:"region",ref:s,"aria-label":(0,_.t)("cookies.consent_manager"),"data-testid":"cookie-banner"},a.createElement("div",{className:T.rf},(0,_.tx)("cookies.explicit_consent_body")," ",a.createElement(p.Yo,{href:(0,_.dS)("/consent-preferences/"),target:"_blank",rel:"noreferrer"},(0,_.tx)("cookies.cookies_settings"))),a.createElement("div",{className:T.o1},a.createElement(e.SecondaryButton,{onClick:b,"data-testid":"cookie-opt-out-button"},(0,_.tx)("cookies.do_not_allow_cookies")),a.createElement(e.PrimaryButton,{onClick:v,"data-testid":"cookie-opt-in-button"},(0,_.tx)("cookies.allow_all_cookies"))),a.createElement("div",{className:T.X8},a.createElement("button",{onClick:S,type:"button","data-testid":"cookie-dismiss-button"},a.createElement(h.B,{className:T.MW,svg:e.dismissIcon})))):e.persistentMessage&&a.createElement(f.fu,{name:"Cookie Banner Persistent Message"},e.persistentMessage)||null}function S(e){let r=(0,u.md)(y.Dr),n=!1;return(r===y.S6.UNLOADED&&(n=!0),r!==y.S6.YES||e.persistentMessage||(n=!0),(0,b.V)()&&(n=!0),c.Ay().user_data?.id&&(n=!0),((0,c.Ay)().is_embed||(0,s.GZ)())&&(n=!0),m.Ay.isMeetDevice&&(n=!0),a.useEffect(()=>{!n&&m.Ay.isIpadNative&&(0,y.L3)({consentRegion:"explicit",cookiesEnabled:!1})},[n]),n||m.Ay.isIpadNative)?null:a.createElement(f.fu,{name:"Cookie Banner",properties:{consentRegion:"explicit"}},a.createElement(v,{...e,showBanner:r===y.S6.NO}))}},802755:(e,r,n)=>{n.d(r,{C$:()=>v});var a=n(411855),i=n(629019),o=n.n(i),s=n(511617),l=n(560945),c=n(966712),d=n(646240),u=n(374626),m=n(563706),p=n(946689),h=n(163023),_=n(101505),g=n(672517),f=n(988022),E=n(111538),y=n(916058),b=n(909595),I=n(491087);function T(e){let[r,n]=a.useState(e.showBanner),[i,s]=a.useState(!1),c=a.useRef(null),u=a.useRef(),m=(0,d.Xr)(E.P4),y=(0,l.wY)(c)??l.cU,T=r?y.height+(e.verticalPadding||0):0;a.useEffect(()=>{m(T)},[T,m]);let{trackEvent:v}=(0,g.j6)(),S=a.useRef(v);S.current=v,a.useEffect(()=>()=>{clearTimeout(u.current)},[]);let w=a.useCallback(e=>{c.current?.contains(e.target)||(s(!0),window.removeEventListener("click",w),u.current=setTimeout(async()=>{if(!r)return null;n(!1),await (0,E.L3)({consentRegion:"implicit",cookiesEnabled:!0}),S.current(f.Ws,{trackingDescriptor:_.c.COOKIE_BANNER_IMPLICIT_CONSENT_DISMISS})},1e4))},[r]),A=a.useCallback(async()=>{clearTimeout(u.current),i&&(await (0,E.L3)({consentRegion:"implicit",cookiesEnabled:!0}),S.current(f.Ws,{trackingDescriptor:_.c.COOKIE_BANNER_IMPLICIT_CONSENT_DISMISS}))},[i]);a.useEffect(()=>{if(r)return window.addEventListener("click",w),window.addEventListener("beforeunload",A),()=>{window.removeEventListener("beforeunload",A),window.removeEventListener("click",w)}},[r,w,A]);let N=async()=>{n(!1),window.removeEventListener("click",w),await (0,E.L3)({consentRegion:"implicit",cookiesEnabled:!1}),S.current(f.Ws,{trackingDescriptor:_.c.COOKIE_BANNER_IMPLICIT_CONSENT_OPT_OUT})},C=async()=>{n(!1),window.removeEventListener("click",w),await (0,E.L3)({consentRegion:"implicit",cookiesEnabled:!0}),S.current(f.Ws,{trackingDescriptor:_.c.COOKIE_BANNER_IMPLICIT_CONSENT_DISMISS})};return r?a.createElement("div",{className:o()(I.kL,e.variant===b.a.COMMUNITY&&[I.gC,I.Vt],e.variant===b.a.FILE_VIEWER&&I.ut,e.variant===b.a.PROTOTYPE&&I.Id,e.variant===b.a.AUTH&&[I.gC,I.Yp]),role:"region","aria-label":"Consent Manager",ref:c,"data-testid":"cookie-banner"},a.createElement("div",{className:I.rf},"This website uses cookies, pixel tags, and local storage for performance, personalization, and marketing purposes. Our use of some cookies may be considered a sale, sharing for behavioral advertising, or targeted advertising. For more, see our"," ",a.createElement(p.Yo,{rel:"noopener",target:"_blank",href:"/privacy/"},"privacy policy"),". ",a.createElement("b",null,"California Residents")," can learn how personal information is"," ",a.createElement(p.Yo,{href:"/privacy/#ca-notice",rel:"noopener",target:"_blank"},"collected"),", including how it is"," ",a.createElement(p.Yo,{href:"/privacy/#purpose",rel:"noopener",target:"_blank"},"used"),", whether it is"," ",a.createElement(p.Yo,{href:"/privacy/#ca-notice",rel:"noopener",target:"_blank"},"\u201Csold\u201D or \u201Cshared\u201D"),", and how long it is"," ",a.createElement(p.Yo,{href:"/privacy/#retention",rel:"noopener",target:"_blank"},"retained"),"."),a.createElement("div",{className:I.o1},a.createElement(e.SecondaryButton,{onClick:N,"data-testid":"cookie-opt-out-button"},"Opt out")),a.createElement("div",{className:I.X8},a.createElement("button",{onClick:C,type:"button","data-testid":"cookie-dismiss-button"},a.createElement(h.B,{className:I.MW,svg:e.dismissIcon})))):e.persistentMessage&&a.createElement(g.fu,{name:"Cookie Banner Persistent Message"},e.persistentMessage)||null}function v(e){let r=(0,u.md)(E.Dr),n=!1;return(r===E.S6.UNLOADED&&(n=!0),r!==E.S6.YES||e.persistentMessage||(n=!0),(0,y.V)()&&(n=!0),c.Ay().user_data?.id&&(n=!0),((0,c.Ay)().is_embed||(0,s.GZ)())&&(n=!0),m.Ay.isMeetDevice&&(n=!0),a.useEffect(()=>{!n&&m.Ay.isIpadNative&&(0,E.L3)({consentRegion:"explicit",cookiesEnabled:!1})},[n]),n||m.Ay.isIpadNative)?null:a.createElement(g.fu,{name:"Cookie Banner",properties:{consentRegion:"implicit"}},a.createElement(T,{...e,showBanner:r===E.S6.NO}))}},373466:(e,r,n)=>{n.d(r,{j:()=>u});var a=n(411855),i=n(966712),o=n(553015),s=n(427472),l=n(802755),c=n(909595),d=n(444077);let u=a.memo(function(){return"implicit"===(0,i.Ay)().consent_region?a.createElement(l.C$,{variant:c.a.PROTOTYPE,dismissIcon:d.A,SecondaryButton:e=>a.createElement(o.$,{variant:"toolbar-secondary",...e})}):"explicit"===(0,i.Ay)().consent_region?a.createElement(s.ZQ,{variant:c.a.PROTOTYPE,dismissIcon:d.A,SecondaryButton:e=>a.createElement(o.$,{variant:"toolbar-secondary",...e}),PrimaryButton:e=>a.createElement(o.$,{variant:"primary",...e})}):null})},240604:(e,r,n)=>{n.d(r,{S:()=>o});var a=n(522739),i=n(724040);let o={div:(0,i.G)("Inaccessible","div",{"data-fpl-audit":!0}),button:(0,i.G)("Inaccessible","button",{"data-fpl-audit":!0,type:"button"}),span:(0,i.G)("Inaccessible","span",{"data-fpl-audit":!0}),recordableDiv:(0,i.G)("Inaccessible",a.D8,{"data-fpl-audit":!0}),recordableButton:(0,i.G)("Inaccessible",a.GG,{"data-fpl-audit":!0,type:"button"}),recordableSpan:(0,i.G)("Inaccessible",a.oj,{"data-fpl-audit":!0})}},999237:(e,r,n)=>{n.d(r,{n:()=>o});var a=n(522739),i=n(724040);let o={div:(0,i.G)("SecondaryActionTrigger","div",{"data-fpl-audit":!0}),span:(0,i.G)("SecondaryActionTrigger","span",{"data-fpl-audit":!0}),recordableDiv:(0,i.G)("SecondaryActionTrigger",a.D8,{"data-fpl-audit":!0}),recordableSpan:(0,i.G)("SecondaryActionTrigger",a.oj,{"data-fpl-audit":!0})}},56029:(e,r,n)=>{n.d(r,{Se:()=>u,Su:()=>m});var a=n(299321),i=n(776250),o=n(966712),s=n(776621),l=n(760640);function c(){return window.performance?window.performance.now():Date.now()}let d=(0,n(479296).D)(()=>(""+Math.random()).substr(2));class u{constructor(){this._lastConnectToMs=-1,this._scheduledTimeouts=[],this._domContentLoaded=-1,this._livegraphStartTime=-1,this._multiplayerStartTime=-1,this._multiplayerSatisfiedTime=-1,this._liveGraphSubscriptionLoaded=-1,this._multiplayerFirstResponse=-1,this._multiplayerFirstFinish=-1,this._iflCompleted=-1,this._sentViewerConnectToMetric=!1,this._connectArgs=null,this._isInEmbed=self!==top,this.reportedAbandon=!1,this.enableProfiling=!1,this.fullscreenEvents={loadAndStartFullscreenIfNecessary:-1,fullscreenIsReady:-1},this.reportViewerAbandon=()=>{let e=this._connectArgs;if(this.reportedAbandon||this.renderingEventsReported||"Preview"===e.entry&&!this.wasInlinePreviewModalOpenedSinceViewerLoaded)return;let r=Math.round(performance.now())-e.afterConnectTo;(0,i.sx)("Viewer Abandon",{entry:e.entry,connectionType:e.connectionType,abandonTime:r},{forwardToDatadog:!0,sendAsBeacon:!0}),this.reportedAbandon=!0},this.renderingEventsMaxSize=10,this.renderingEvents=[],this.renderingEventsReported=!1,this.handleDOMContentLoaded=()=>{this._domContentLoaded=this.now(),this.mark("dom_content_loaded"),i.az.trackDefinedEvent("prototype.dom_content_loaded",{time:this._domContentLoaded})},this.handleDocumentIsLoaded=()=>{let e={};this._connectArgs?.fullscreen!=="None"&&(e={...this.fullscreenEvents,...l.xK.getEventsToReport(!1)});let r={domContentLoaded:this._domContentLoaded,preloadedTabStart:window.preloadedTabStart,androidProtoPreloadedTabStart:window.androidProtoPreloadedTabStart,androidProtoFsPreloaded:window.androidProtoFsPreloaded,documentIsLoaded:this.now(),connectAttemptID:this._lastConnectToID,...this._connectArgs,...e};(0,i.sx)("Viewer Document Is Loaded",r)},this.wasViewerLoadReported=!1,this.handleViewerLoaded=e=>{if(this.clearScheduledTimeouts(),(0,s.ED)("Load Time Tracker","handleViewerLoaded",{lastConnectToMs:this._lastConnectToMs,lastConnectToID:this._lastConnectToID}),this._lastConnectToMs>=0&&null!=this._lastConnectToID){this.handleTabSwitchOrLoadChange("visible"===document.visibilityState,!1);let r={delaySecondsSinceConnect:(c()-this._lastConnectToMs)/1e3,domContentLoaded:this._domContentLoaded,preloadedTabStart:window.preloadedTabStart,androidProtoFsPreloaded:window.androidProtoFsPreloaded,androidProtoPreloadedTabStart:window.androidProtoPreloadedTabStart,connectAttemptID:this._lastConnectToID,timeNow:this.now(),visibleLoadTime:this._totalVisibleLoadTime,wasBackgroundedOnceWhileLoading:this._wasBackgroundedOnceWhileLoading,isStatsigBootstrapFlagOn:(0,o.w0)().statsig_client_bootstrap??!0,hasStatsigBootstrapValues:!!(0,o.Ay)().statsig_bootstrap_values,isUsingStatsigClientSDK:(0,o.w0)().statsig_client_sdk_enabled??!0,isUsingStatsigPrefetch:(0,o.w0)().statsig_client_enable_prefetch??!0};if(this._connectArgs){let n=r.timeNow-r.domContentLoaded,a={...r,entry:this._connectArgs.entry,connectionType:this._connectArgs.connectionType,isInEmbed:this._isInEmbed,loadTimeMs:n,lastLoaded:e};this.mark("viewer_loaded"),this.measure("viewer_loaded_measure","dom_content_loaded","viewer_loaded"),i.az.trackDefinedEvent("prototype.viewer_loaded",a)}this._lastConnectToMs=-1,this.wasViewerLoadReported=!0}else(0,s.x1)("load","Unexpected Viewer Loaded event without Viewer Connect To report")},this.handleFontListLoaded=e=>{let r={...this._connectArgs,domContentLoaded:this._domContentLoaded,connectAttemptID:this._lastConnectToID,timeNow:this.now()};(0,i.sx)("Viewer Font List Loaded",r)},this.computeLoadTimeSinceDomContentLoaded=(e=this.now())=>window.androidProtoFsPreloaded&&window.androidProtoPreloadedTabStart&&e>=window.androidProtoPreloadedTabStart?e-window.androidProtoPreloadedTabStart+window.androidProtoFsPreloaded-this._domContentLoaded:e-this._domContentLoaded,this.handleAfterConnectTo=e=>{this._lastConnectToMs=c(),this._lastConnectToID=d(),(0,s.ED)("Load Time Tracker","handleAfterConnectTo",{lastConnectToMs:this._lastConnectToMs,lastConnectToID:this._lastConnectToID}),this._connectArgs={...e,afterConnectTo:this.now()};let r={domContentLoaded:this._domContentLoaded,preloadedTabStart:window.preloadedTabStart,androidProtoFsPreloaded:window.androidProtoFsPreloaded,androidProtoPreloadedTabStart:window.androidProtoPreloadedTabStart,connectAttemptID:this._lastConnectToID,...this._connectArgs};if((!this._sentViewerConnectToMetric||(0,o.kc)().prototype_connectto_debug)&&(i.az.trackDefinedEvent("prototype.viewer_connect_to",{...r,isInEmbed:this._isInEmbed}),this._sentViewerConnectToMetric=!0),this.renderingEventsReported=!1,this.renderingEvents=[],this.clearScheduledTimeouts(),e.logViewerWaiting)for(let e of[0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90]){let r=setTimeout(()=>{let r=(c()-this._lastConnectToMs)/1e3;(0,i.sx)("Viewer Waiting",{waitedAtLeastSeconds:e,delaySecondsSinceConnect:r,connectAttemptID:this._lastConnectToID})},1e3*e);this._scheduledTimeouts.push(r)}let n=setTimeout(()=>{let e=(c()-this._lastConnectToMs)/1e3;(0,i.sx)("Viewer Waiting",{waitedAtLeastSeconds:60,delaySecondsSinceConnect:e,connectAttemptID:this._lastConnectToID,entry:this._connectArgs?.entry,connectionType:this._connectArgs?.connectionType,isInEmbed:this._isInEmbed},{forwardToDatadog:!0})},6e4);this._scheduledTimeouts.push(n),window.addEventListener("pagehide",this.reportViewerAbandon),this.reportedAbandon=!1,document.addEventListener("visibilitychange",()=>{let e="visible"===document.visibilityState,r=!1;this._lastConnectToMs>=0&&null!=this._lastConnectToID&&(r=!this.wasViewerLoadReported),this.handleTabSwitchOrLoadChange(e,r)}),this.handleTabSwitchOrLoadChange("visible"===document.visibilityState,!0)},this.wasInlinePreviewModalOpenedSinceViewerLoaded=!1,this._wasBackgroundedOnceWhileLoading=!1,this._totalVisibleLoadTime=0,this._wasVisiblyLoading=!1,this._lastTabSwitchOrLoadChange=-1,this.handleTabSwitchOrLoadChange=(e,r)=>{r&&(this._wasBackgroundedOnceWhileLoading=this._wasBackgroundedOnceWhileLoading||!e);let n=e&&r;if(!this._wasVisiblyLoading&&n)this._lastTabSwitchOrLoadChange=this.now();else{if(!this._wasVisiblyLoading||n)return;this._totalVisibleLoadTime+=this.now()-this._lastTabSwitchOrLoadChange}this._lastTabSwitchOrLoadChange=this.now(),this._wasVisiblyLoading=n},this.clearScheduledTimeouts=()=>{for(let e of this._scheduledTimeouts)clearTimeout(e);this._scheduledTimeouts=[]}}now(){return Math.round(performance.now())}mark(e){this.enableProfiling&&performance.mark(e)}measure(e,r,n){this.enableProfiling&&performance.measure(e,r,n)}handleDocumentRenderStart(){!this.renderingEventsReported&&this.renderingEvents.length<this.renderingEventsMaxSize&&this.renderingEvents.push([this.now(),-1])}handleDocumentRenderStop(){if(this.renderingEventsReported)return;let e=this.renderingEvents.length-1;if(e>=0&&-1===this.renderingEvents[e][1]&&(this.renderingEvents[e][1]=this.now()),(0,s.ED)("Load Time Tracker","handleDocumentRenderStop",{lastIndex:e}),window.removeEventListener("pagehide",this.reportViewerAbandon),this.renderingEvents.length>=this.renderingEventsMaxSize){let e={},r=!0,n=0,o=0;this.renderingEvents.forEach((a,i)=>{r=r&&a[0]>=n&&a[1]>=a[0];let s=`frame.${i}.start`,l=`frame.${i}.stop`;e[s]=a[0],e[l]=a[1],o+=a[1]-a[0],n=a[1]}),e.total=r?o:-1,e.connectAttemptID=this._lastConnectToID,e.totalUsedHeapMemory=a.hMR?.getTotalUsedHeapMemory()??0,e.maxUsedHeapMemory=a.hMR?.getMaxUsedHeapMemory()??0,this.wasViewerLoadReported||this._connectArgs?.entry!=="Prototype"||(0,s.x1)("load","Unexpected Viewer Rendering First Frames event without Viewer Loaded report");let l=this.computeLoadTimeSinceDomContentLoaded(),c={...e,timeToFirstFrame:l,avgFirstTenFramesRenderingTimeMs:o/this.renderingEvents.length,entry:this._connectArgs?.entry,connectionType:this._connectArgs?.connectionType,isInEmbed:this._isInEmbed};(0,i.sx)("Viewer Rendering First Frames",c,{forwardToDatadog:!0}),this.renderingEventsReported=!0,this.renderingEvents=[]}}handleLivegraphConnectionOpened(){-1===this._livegraphStartTime&&(this._livegraphStartTime=this.now(),this.mark("livegraph_subscription_started"),this.measure("livegraph_subscription_started_measure","dom_content_loaded","livegraph_subscription_started")),i.az.trackDefinedEvent("prototype.livegraph_subscription_started",{timeSinceDomContentLoaded:this.computeLoadTimeSinceDomContentLoaded(this._livegraphStartTime)})}handleLivegraphConnectionResponded(){let e=this.now();-1===this._liveGraphSubscriptionLoaded&&(this._liveGraphSubscriptionLoaded=e,this.mark("livegraph_subscription_loaded"),this.measure("livegraph_subscription_loaded_measure","dom_content_loaded","livegraph_subscription_loaded")),i.az.trackDefinedMetric("prototype.livegraph_subscription_loaded",{timeSinceDomContentLoaded:this.computeLoadTimeSinceDomContentLoaded(e),responseTime:e-this._livegraphStartTime})}handleMultiplayerOpenConnection(){-1===this._multiplayerStartTime&&(this._multiplayerStartTime=this.now(),this.mark("multiplayer_connection_start"),this.measure("multiplayer_connection_start_measure","dom_content_loaded","multiplayer_connection_start")),i.az.trackDefinedEvent("prototype.multiplayer_connection_start",{timeSinceDomContentLoaded:this.computeLoadTimeSinceDomContentLoaded(this._multiplayerStartTime)})}handleMultiplayerFirstResponse(){-1===this._multiplayerFirstResponse&&(this._multiplayerFirstResponse=this.now(),this.mark("multiplayer_first_response"),this.measure("multiplayer_first_response_measure","dom_content_loaded","multiplayer_first_response")),i.az.trackDefinedMetric("prototype.multiplayer_first_response",{timeSinceDomContentLoaded:this.computeLoadTimeSinceDomContentLoaded(),responseTime:this.now()-this._multiplayerStartTime})}handleMultiplayerIFLSatisfied(){-1===this._multiplayerFirstFinish&&(this._multiplayerFirstFinish=this.now(),this.mark("multiplayer_first_finish"),this.measure("multiplayer_first_finish_measure","dom_content_loaded","multiplayer_first_finish")),-1===this._multiplayerSatisfiedTime&&(this._multiplayerSatisfiedTime=this.now()),i.az.trackDefinedMetric("prototype.multiplayer_first_finish",{timeSinceDomContentLoaded:this.computeLoadTimeSinceDomContentLoaded(),responseTime:this.now()-this._multiplayerStartTime})}handleIFLCompleted(){-1===this._iflCompleted&&(this._iflCompleted=this.now(),this.mark("ifl_completed"),this.measure("ifl_completed_measure","dom_content_loaded","ifl_completed")),i.az.trackDefinedMetric("prototype.ifl_completed",{timeSinceDomContentLoaded:this.computeLoadTimeSinceDomContentLoaded(),responseTime:this.now()-this._multiplayerSatisfiedTime})}setWasInlinePreviewModalOpenedSinceViewerLoaded(e){this.wasInlinePreviewModalOpenedSinceViewerLoaded=e}}let m=new u},258786:(e,r,n)=>{n.d(r,{$:()=>o,W:()=>s});var a=n(411855),i=n(356390);class o{constructor(){this.singleTapTouchStartListeners={},this.singleTapTouchMoveListeners={},this.singleTapTouchEndListeners={},this.singleTapMouseDownListeners={},this.singleTapMouseUpListeners={},this.tapCallback=null,this.multiTapTouchStartListeners={},this.multiTapTouchEndListeners={},this.multiTapMouseDownListeners={},this.multiTapMouseUpListeners={},this.multiTapCallbacks={},this.multiTouchLongPressTouchStartListeners={},this.multiTouchLongPressTouchMoveListeners={},this.multiTouchLongPressTouchEndListeners={},this.multiTouchLongPressTouchCancelListeners={},this.multiTouchLongPressPointerDownListeners={},this.multiTouchLongPressPointerMoveListeners={},this.multiTouchLongPressPointerUpListeners={},this.multiTouchLongPressPointerCancelListeners={},this.multiTouchLongPressCallbacks=new Map}installTapGestureRecognizer(e,r){let n,a;this.tapCallback=r;let i=e=>{a=Date.now(),n=e},o=()=>{a=void 0,n=void 0},s=()=>{n&&a&&Date.now()-a<500&&(this.tapCallback?.(n),o())};this.replaceEventListener(e,"touchstart",e=>{1===e.touches.length&&i({x:e.touches[0].screenX,y:e.touches[0].screenY})},this.singleTapTouchStartListeners,1),this.replaceEventListener(e,"touchmove",e=>{if(1===e.touches.length&&n){let r=e.touches[0];this.didMoveTooMuch([{identifier:0,screenX:r.screenX,screenY:r.screenY}],{0:{screenX:n.x,screenY:n.y}},10)&&o()}else o()},this.singleTapTouchMoveListeners,1),this.replaceEventListener(e,"touchend",s,this.singleTapTouchEndListeners,1),this.replaceEventListener(e,"mousedown",e=>{i({x:e.screenX,y:e.screenY})},this.singleTapMouseDownListeners,1),this.replaceEventListener(e,"mouseup",s,this.singleTapMouseUpListeners,1)}updateTapGestureRecognizer(e,r){this.tapCallback?this.tapCallback=r:this.installTapGestureRecognizer(e,r)}uninstallTapGestureRecognizer(e){this.tapCallback&&(this.tapCallback=null,e.removeEventListener("touchstart",this.singleTapTouchStartListeners[1],!0),e.removeEventListener("touchmove",this.singleTapTouchMoveListeners[1],!0),e.removeEventListener("touchend",this.singleTapTouchEndListeners[1],!0),e.removeEventListener("mousedown",this.singleTapMouseDownListeners[1],!0),e.removeEventListener("mouseup",this.singleTapMouseUpListeners[1],!0))}numTapsInRecencyThreshold(e,r){let n=Date.now(),a=0;for(let i=e.length-1;i>=0;i--)if(Math.abs(e[i]-n)<r)a++;else break;return a}installMultiTapGestureRecognizer(e,r,n){this.multiTapCallbacks[r.numTaps]=n;let a=[],i=!1,o=()=>{let e=Date.now();if(a.push(e),i=this.numTapsInRecencyThreshold(a,500)===r.numTaps)a=[];else for(;a.length>r.numTaps;)a.shift()},s=()=>{i&&(this.multiTapCallbacks[r.numTaps]?.(),i=!1)};this.replaceEventListener(e,"touchstart",e=>{1===e.touches.length&&o()},this.multiTapTouchStartListeners,r.numTaps),this.replaceEventListener(e,"touchend",s,this.multiTapTouchEndListeners,r.numTaps),this.replaceEventListener(e,"mousedown",o,this.multiTapMouseDownListeners,r.numTaps),this.replaceEventListener(e,"mouseup",s,this.multiTapMouseUpListeners,r.numTaps)}updateMultiTapGestureRecognizer(e,r,n){this.multiTapCallbacks[r.numTaps]?this.multiTapCallbacks[r.numTaps]=n:this.installMultiTapGestureRecognizer(e,r,n)}installMultiTouchLongPressGestureRecognizer(e,r,n){this.multiTouchLongPressCallbacks.set(n,r);let a=null,o=null,s=e=>{if(null==o){for(let r of(o={},e))o[r.identifier]={screenX:r.screenX,screenY:r.screenY};a=setTimeout(()=>{let r;1===e.length&&(r={x:e[0].screenX,y:e[0].screenY}),this.multiTouchLongPressCallbacks.get(n)?.(r),i.Y5&&i.Y5.cancelPendingGestures&&i.Y5.cancelPendingGestures()},500)}},l=()=>{null!=a&&(clearTimeout(a),a=null,o=null)},c=e=>{e.length===n&&o?this.didMoveTooMuch(e,o,10)&&l():l()};this.replaceEventListener(e,"touchstart",e=>{e.touches.length===n?s(e.touches):l()},this.multiTouchLongPressTouchStartListeners,n),this.replaceEventListener(e,"touchmove",e=>c(e.touches),this.multiTouchLongPressTouchMoveListeners,n),this.replaceEventListener(e,"touchend",l,this.multiTouchLongPressTouchEndListeners,n),this.replaceEventListener(e,"touchcancel",l,this.multiTouchLongPressTouchCancelListeners,n),this.replaceEventListener(e,"pointerdown",e=>{1===n&&"touch"!==e.pointerType?s([{identifier:e.pointerId,screenX:e.screenX,screenY:e.screenY}]):l()},this.multiTouchLongPressPointerDownListeners,n),this.replaceEventListener(e,"pointermove",e=>{"touch"!==e.pointerType&&c([{identifier:e.pointerId,screenX:e.screenX,screenY:e.screenY}])},this.multiTouchLongPressPointerMoveListeners,n),this.replaceEventListener(e,"pointerup",l,this.multiTouchLongPressPointerUpListeners,n),this.replaceEventListener(e,"pointercancel",l,this.multiTouchLongPressPointerCancelListeners,n)}updateMultiTouchLongPressGestureRecognizer(e,r,n){this.multiTouchLongPressCallbacks.has(n)?this.multiTouchLongPressCallbacks.set(n,r):this.installMultiTouchLongPressGestureRecognizer(e,r,n)}uninstallMultiTouchLongPressGestureRecognizer(e,r){this.multiTouchLongPressCallbacks.has(r)&&(this.multiTouchLongPressCallbacks.delete(r),e.removeEventListener("touchstart",this.multiTouchLongPressTouchStartListeners[r],!0),e.removeEventListener("touchmove",this.multiTouchLongPressTouchMoveListeners[r],!0),e.removeEventListener("touchend",this.multiTouchLongPressTouchEndListeners[r],!0),e.removeEventListener("touchcancel",this.multiTouchLongPressTouchCancelListeners[r],!0),e.removeEventListener("pointerdown",this.multiTouchLongPressPointerDownListeners[r],!0),e.removeEventListener("pointermove",this.multiTouchLongPressPointerMoveListeners[r],!0),e.removeEventListener("pointerup",this.multiTouchLongPressPointerUpListeners[r],!0),e.removeEventListener("pointercancel",this.multiTouchLongPressPointerCancelListeners[r],!0))}replaceEventListener(e,r,n,a,i){a[i]&&e.removeEventListener(r,a[i],!0),a[i]=n,e.addEventListener(r,a[i],!0)}didMoveTooMuch(e,r,n){for(let a of e){let e=r[a.identifier];if(void 0===e||Math.hypot(e.screenX-a.screenX,e.screenY-a.screenY)>n)return!0}return!1}}let s=a.createContext(new o)},299211:(e,r,n)=>{n.d(r,{m:()=>s});var a=n(915440),i=n(711525),o=n(279453);function s(){let e=(0,a.Rs)(o.JgS,{});if("loaded"!==e.status||e.data.persistentUserNotificationBells.status!==i.tT.Loaded)return{};let r=(0,i.oA)(e.data.persistentUserNotificationBells),n={};return Object.values(r||[]).forEach(e=>{let{userId:r,notificationSpaceId:a}=e;if(r&&a){n[r]??={};let i=n[r];i&&(i[a]=!!e.bell)}}),n}n(395116)},273709:(e,r,n)=>{n(966712)},234587:(e,r,n)=>{n.d(r,{Vj:()=>i,cJ:()=>o,oz:()=>a});let a=function(){return!1},i=function(){return!1},o=function(){return!1}},139055:(e,r,n)=>{n.d(r,{IU:()=>i,Kk:()=>l,bC:()=>o,jT:()=>s});var a=n(411855);let i=function(){return""},o=function(){return!1},s=function(){return{}},l=function(){return!1};a.createContext(void 0)},362369:(e,r,n)=>{n.d(r,{E:()=>a});var a=(e=>(e.FJ_SELECTION="figjam-selection-inline-menu",e.FJ_SHARE_MODAL="figjam-share-modal",e.FJ_PAGE_MENU="figjam-page-context-menu",e.FJ_FILE_MENU="figjam-file-editor-menu",e.SLIDES_TEMPLATE="slides-template",e))(a||{})},983499:(e,r,n)=>{var a=n(27087);(0,n(479296).n)(async({fileKey:e,fileVersion:r,selectedGuids:n})=>{if(!r)throw Error("Missing file version");let i=function({fileKey:e,fileVersion:r,selectedGuids:n}){return`/api/file_proxy/file/${e}/canvas?fv=${r}${n?.length?`&nodes_to_extract=${n.join(",")}`:""}`}({fileKey:e,fileVersion:r,selectedGuids:n});return(await a.Ay.post(i,{fv:`${r}`},{responseType:"arraybuffer"})).data})},636227:(e,r,n)=>{n.d(r,{Yc:()=>_,d_:()=>g});var a=n(411855),i=n(647899),o=n(239349),s=n(809831),l=n(335682),c=n(694687),d=n(860178),u=n(893606),m=n(479296),p=n(72754),h=n(430196);function _(){let{getConfig:e}=(0,i.I7)("fd_to_slides_entrypoints");return e}function g(){let e=(0,l.q5)(),r=(0,s.Em)(),n=(0,d.Pc)(),a=(0,u.R)(),i=(0,c.sZ)();if(!n||!r||!a||i?.id&&i.is_slides_disabled)return!1;let o=e?.creatorId===n.id;return!!e&&!!o}(0,m.n)(()=>{let e=g(),r=_(),n=(0,h.N)(),i=(0,o.Tv)(),s=(0,p.A)();return(0,a.useMemo)(()=>{if(!e)return!1;let a=r().get("enabled",!1);return i.length?!!s.length&&a:n.size>0&&a},[r,e,i.length,n.size,s.length])})},144119:(e,r,n)=>{n.d(r,{sO:()=>o});var a=n(188507);n(299321),n(30637),n(373119),n(100197),n(601607),n(452883);var i=n(656147);function o(){return(0,a.d4)(e=>(0,i.P)(e.selectedView))}},983724:(e,r,n)=>{n.d(r,{Jb:()=>h,Xe:()=>_,_Q:()=>g});var a=n(411855),i=n(188507),o=n(299321),s=n(880934),l=n(904669),c=n(44948),d=n(966712),u=n(29680),m=n(100197),p=n(601607);function h(){let e=(0,i.d4)(e=>e.mirror.sceneGraphSelection);return(0,a.useMemo)(()=>{if((0,d.kc)().piper_components&&o.Ez5.singleSlideView().isComponentSectionFocused())return o.Ez5.slideDeck().componentSectionId();let r=new Set;Object.keys(e).forEach(e=>{let n=(0,l.UN)().get(e),a=n?.findContainingSlideOrSelf();a&&(0,s.fn)((0,s.sH)(a))&&r.add(a)});let n=Array.from(r);return 1===n.length?n[0]:null},[e])}function _(){let e=(0,m.J2)(o.Ez5.slideDeck().slideGrid).flat();return(0,p.Fk)((e,r)=>{for(let n of r){let r=e.get(n);if(!r?.isSkippedSlide)return n}return null},e)}function g(){let e=function(){let e=(0,m.J2)(o.Ez5.slideDeck().slideGrid).flat(),r=new Set(function(){let e=(0,u.KH)();return(0,c.k9)(()=>{let r=(0,l.UN)(),n=new Set;return Object.keys(e).forEach(e=>{let a=r.get(e)?.findContainingSlideOrSelf();a&&n.add(a)}),Array.from(n.values())},[e])}());if(!e.length||!r.size)return[];let n=[];for(let a of e)if(r.has(a)&&(n.push(a),r.delete(a)),0===r.size)break;return n}();return(0,p.Fk)((e,r)=>{for(let n of r){let r=e.get(n);if(!r?.isSkippedSlide)return n}return null},e)}},430196:(e,r,n)=>{n.d(r,{N:()=>o});var a=n(299321),i=n(100197);function o(){let e=a.Ez5.slideLikeNodeObserverState();return(0,i.ut)(e?.slideLikeNodeIdsOnCanvas,new Set([]))}},195601:(e,r,n)=>{n.d(r,{p:()=>l}),n(299321),n(776250);var a=n(38580),i=n(374626);n(96328),n(356390),n(15859),n(737499);let o=(0,a.eU)({}),s=(0,i.Iz)(e=>(0,a.eU)(r=>r(o)[e]??"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALUAAABmCAYAAACN+dAoAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABeSURBVHgB7cAxAQAAAMKg9U9tDQ8oAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB4NyDtAAG2m4HvAAAAAElFTkSuQmCC",(r,n,a)=>{let i=r(o);n(o,{...i,[e]:a})}));function l(e){let r=s(e);return(0,i.md)(r)}},366501:(e,r,n)=>{n.d(r,{$u:()=>g,oY:()=>_,rY:()=>h});var a=n(411855),i=n(188507),o=n(299321);n(275556),n(880934),n(904669),n(841563),n(939683);var s=n(966712),l=n(38580);n(30637);var c=n(939863),d=n(392592);n(550273),n(29680),n(575288),n(193212);var u=n(100197),m=n(601607);n(706966),n(92566),n(983724);var p=n(108239);function h(e){return e.reduce((e,r)=>e.concat(r),[])}function _(e,r){let n=o.Ez5.singleSlideView().focusedSlideId.getCopy(),{row:a,col:i}=o.Ez5.getInsertGridCoord({x:-1/0,y:-1/0}),s=(0,p.f4)(a,i,r,!1);o.Ez5?.singleSlideView()?.isSingleSlideViewEnabled()&&o.Ez5.singleSlideView().focusSlideInSingleSlideView(s,!0);let l=e.get(s),c=e.get(n);return l&&c?.sourceLibraryKey&&(l.sourceLibraryKey=c.sourceLibraryKey),o.Egt.replaceSelection([s],!0),s}function g(){let e=(0,i.wA)(),{numSkippedSlides:r,numTotalSlides:n}=function(){let e=(0,u.ut)(o.Ez5?.slideDeck().slideGrid,[]);return(0,m.wA)((e,r)=>r.flat().reduce(({numSkippedSlides:r,numTotalSlides:n},a)=>{let i=e.get(a);return i&&(n+=1,i.isSkippedSlide&&(r+=1)),{numSkippedSlides:r,numTotalSlides:n}},{numSkippedSlides:0,numTotalSlides:0}),e)}();return(0,a.useCallback)(a=>{let i=o.Ez5?.slideDeck().anySymbolsInSlides();0===n?e(d.F.enqueue({message:(0,c.t)("file_permissions_modal.share_as.publish_template_slides_error_no_slides"),onDismiss:()=>{}})):r>0?e(d.F.enqueue({message:(0,c.t)("file_permissions_modal.share_as.publish_template_slides_error_skipped_slides"),onDismiss:()=>{}})):!(0,s.kc)().piper_components&&i?e(d.F.enqueue({message:(0,c.t)("file_permissions_modal.share_as.publish_template_slides_error_symbol_in_slide"),onDismiss:()=>{}})):a()},[e,r,n])}(0,l.eU)("")},924430:(e,r,n)=>{n.d(r,{R4:()=>a,w1:()=>i,wl:()=>o});let a="slides-template-preview",i="slides-template-publish-item",o="agreed_to_slides_ai_terms"},372669:(e,r,n)=>{n.d(r,{j:()=>F});var a=n(411855),i=n(966712),o=n(374626),s=n(563706),l=n(153234),c=n(103907),d=n(369870),u=n(318812),m=n(860178),p=n(549166),h=n(624158),_=n(250118),g=n(462521),f=n(556465),E=n(518803),y=n(756762),b=n(188507),I=n(343887),T=n(523099),v=n(939863),S=n(507877),w=n(335682),A=n(707465),N=n(239671),C=n(498606);function L(){let e=(0,w.tS)(),r=(0,b.Pj)(),n=(0,b.wA)();return a.createElement(I.K,{"aria-label":(0,v.t)("viewer.menu_bar.open_in_figma_slides"),onClick:()=>{if(!e)return;let a=(0,A.xS)(r.getState(),{view:"fullscreen",fileKey:e,editorType:N.nT.Slides});n(S.V3({url:a}))},htmlAttributes:{"data-tooltip":(0,v.t)("viewer.menu_bar.open_in_figma_slides"),"data-tooltip-type":C.Ib.TEXT}},a.createElement(T.E,null))}var O=n(797613),R=n(39108),P=n(938908);function D({showComments:e,recordingKey:r}){let n=(0,b.wA)(),i=(0,v.t)("viewer.menu_bar.add_comment",{padding:"    ",shortcut:"C"});return a.createElement(O.f,{onChange:()=>{e?n(P.BZ()):n(P._b())},"aria-label":i,recordingKey:r,onIcon:a.createElement(R.f,null),offIcon:a.createElement(R.f,null),variant:"highlighted",checked:e,htmlAttributes:{"data-tooltip":i,"data-tooltip-type":C.Ib.TEXT,"data-testid":"prototype-header-comments-button"}})}var k=n(759457),M=n(606789);function F({file:e,fadeBehavior:r,showProgressBar:n,showComments:b,multiplayer:I,recordingKey:T,shouldShowUI:v}){let S=(0,m.iZ)(),w=(0,u.Um)(),A=a.useRef(null),N=(0,d.ck)(),C=(0,_.dH)(),O=(0,s.o4)(),R=(0,o.md)(h.jH),P=(0,o.md)(h.M);return a.createElement(c.j9.Consumer,null,()=>a.createElement(E.D,{fileName:e.name,headerRef:A,fadeBehavior:r,showProgressBar:n,shouldShowUI:v||"loading"===P||R,rightColumn:a.createElement(a.Fragment,null,(0,i.kc)().prototype_preload_offline&&a.createElement(h.ez,{isSlides:!0}),I&&a.createElement(p.Cv,{dropdownShown:w,multiplayer:I,user:S}),a.createElement("div",{className:k.fi},(!C||N)&&a.createElement(a.Fragment,null,a.createElement("div",{className:M.LY},a.createElement(D,{showComments:b,recordingKey:l.Pt(T,"comments-button")})),a.createElement("div",{className:M.LY},a.createElement(L,null))),(0,i.kc)().prototype_preload_offline&&!O&&a.createElement("div",{className:M.LY},a.createElement(g.A,null)),a.createElement("div",{className:M.LY},a.createElement(y.A,null))),a.createElement(f.o,{headerRef:A,file:e}))}))}},462521:(e,r,n)=>{n.d(r,{A:()=>h});var a=n(411855),i=n(188507),o=n(343887),s=n(538082),l=n(153234),c=n(939863),d=n(738269),u=n(318812),m=n(728587),p=n(405328);function h({recordingKey:e,onPreloadStart:r}){let n=(0,i.wA)(),h=(0,u.Um)(),_=h&&h.type===p.A9,g=a.useRef(null),f=a.createElement(o.K,{onClick:function(e){e.stopPropagation(),_?n(d.oB()):n(d.j7({type:p.A9,data:{position:g.current?.getBoundingClientRect()}}))},recordingKey:l.Pt({recordingKey:e},"toggle"),"aria-label":(0,c.t)("viewer.options_menu.options")},a.createElement(s.P,null)),E=h?.data?.position??void 0,y=(0,p.s7)(r);return a.createElement("div",{ref:g},f,_&&!!E&&a.createElement(m.j,{showPoint:!0,onSelectItem:e=>e.callback?.(),parentRect:E,dispatch:n,items:[y],recordingKey:"options-menu-dropdown",displayAboveTarget:!1,alwaysShowCheckMarkOffset:!0}))}},556465:(e,r,n)=>{n.d(r,{o:()=>_});var a=n(411855),i=n(188507),o=n(737947),s=n(560945),l=n(761870),c=n(939863),d=n(662275),u=n(694687),m=n(860178),p=n(793670),h=n(560002);function _({headerRef:e,file:r}){let n=(0,m.iZ)(),_=(0,u.sZ)(),g=(0,i.wA)(),[f,E]=a.useState((0,c.t)("viewer.menu_bar.share")),[y,b]=a.useState((0,c.t)("viewer.menu_bar.log_in"));return(0,s.wY)(e,({width:e})=>{e>970?(E((0,c.t)("viewer.menu_bar.share_presentation")),b((0,c.t)("viewer.menu_bar.log_in_or_create_account"))):(E((0,c.t)("viewer.menu_bar.share")),b((0,c.t)("viewer.menu_bar.log_in")))}),a.createElement(h.wh,{user:n,shareText:f,loginText:y,file:r,showDefaultAuthModal:()=>{g(l.Ts({origin:"prototype_header_nav",redirectUrl:o.Ay.location.pathname})),g(d.to({type:p.x,data:{}}))},sharingDisabled:_?.is_slides_disabled})}},518803:(e,r,n)=>{n.d(r,{D:()=>w});var a=n(411855),i=n(188507),o=n(343887),s=n(963757),l=n(629019),c=n.n(l),d=n(511617),u=n(737947),m=n(179940),p=n(163023),h=n(240604),_=n(939863),g=n(293017),f=n(122983),E=n(94500),y=n(498606),b=n(250118),I=n(759457),T=n(606789),v=n(748292);let S=(0,f.ck)();function w({fileName:e,headerRef:r,showProgressBar:n,fadeBehavior:o,disableHeaderFade:s,shouldShowUI:l,hideTopLeftIcon:d,headerClassName:u,leftColumn:m,rightColumn:p}){let f=(0,i.wA)(),y=(0,b.dH)(),v=e=>{e.preventDefault(),f((0,E._P)({name:"Prototype Logo Clicked"})),f((0,g.eH)())};return n?a.createElement("div",{className:I.uH},!d&&a.createElement(A,{onClick:v})):a.createElement(h.S.div,{className:c()(I.wx,u,{[I.Wc]:!l&&!s}),ref:r,role:"region","aria-label":(0,_.t)("viewer.menu_bar.accessible_label"),onBlurCapture:o?.handleHeaderOrFooterBlur,onFocusCapture:o?.handleHeaderOrFooterFocus,onMouseMove:o?.handleHeaderOrFooterMove,onMouseDown:e=>{e.stopPropagation()}},a.createElement("div",{className:I.Cd},!d&&a.createElement(A,{onClick:v}),(!y||S)&&a.createElement("h1",{className:c()(d?T.Y_:T.DD),dir:"auto"},e),m),a.createElement("div",{className:I.SP}),a.createElement("div",{className:c()(I.DK,T.DK)},p))}function A({onClick:e}){return d.GZ()&&!S&&null==(0,m.qg)(u.Ay.location.search).fullscreen?a.createElement("a",{"aria-label":(0,_.t)("proto.file_browser"),href:"/",onClick:e,className:I.m_},a.createElement(p.B,{svg:v.A})):a.createElement("div",{className:c()(T.LY,I.kT)},a.createElement(o.K,{onClick:e,"aria-label":(0,_.t)("proto.file_browser"),htmlAttributes:{"data-tooltip":(0,_.t)("proto.file_browser"),"data-tooltip-type":y.Ib.TEXT}},a.createElement(s.m,null)))}},756762:(e,r,n)=>{n.d(r,{A:()=>h});var a=n(411855),i=n(188507),o=n(343887),s=n(941670),l=n(538649),c=n(511617),d=n(860601),u=n(939863),m=n(362252),p=n(498606);function h(){let e;let r=(0,i.wA)(),n=(0,i.d4)(e=>e.appWindow.inFullScreenMode),h=c.R7.fullscreen?()=>{r((0,m._M)())}:d.lQ,_=c.R7.fullscreen;return e=_?n?(0,u.t)("viewer.menu_bar.exit_full_screen",{shortcut:"F"}):(0,u.t)("viewer.menu_bar.enter_full_screen",{shortcut:"F"}):(0,u.t)("viewer.menu_bar.full_screen_is_not_supported_by_this_browser"),a.createElement(o.K,{"aria-label":e,onClick:h,disabled:!_,htmlAttributes:{"data-tooltip":e,"data-tooltip-type":p.Ib.TEXT}},n?a.createElement(s.p,null):a.createElement(l.O,null))}},742934:(e,r,n)=>{n.d(r,{CK:()=>T,NQ:()=>I,PG:()=>w,Vz:()=>S,o9:()=>A,rR:()=>v});var a=n(411855),i=n(188507),o=n(494387),s=n(299321),l=n(275556),c=n(568214),d=n(966712),u=n(374626),m=n(632430),p=n(356390),h=n(848661),_=n(618056),g=n(555074);n(869156);var f=n(29680),E=n(279702);n(110382),n(238093);var y=n(564092),b=n(179243);function I(e){return{type:"SOLID",color:{...e,a:1},opacity:e.a,blendMode:"NORMAL"}}function T(){let[e]=(0,g.lJ)("imageOverlayPaint");return a.useCallback((r,n)=>{_.Tm.clearCache();let a=[r];e&&(0,h.hS)(e)&&a.push(e),p.Y5.updateSelectionProperties({fillPaints:a},{shouldCommit:n})},[e])}function v(e){let r=(0,u.md)(b.E_);return a.useCallback((n,a)=>{r&&n.color?l.l7.user("slides-edit-theme-color",()=>S(r.varId,r.modeId,n)):e(n,a)},[r,e])}function S(e,r,n){s.CWU.setVariableValueForMode(e,r,{type:s.Z_n.COLOR,resolvedType:s.rXF.COLOR,value:{...n.color,a:n.opacity??1}})}function w(e){let r=(0,i.wA)(),n=(0,u.md)(b.E_);return a.useCallback(async a=>{let i=await r((0,m.Oe)(a)),c=o.sD.fromString(i);c&&(n?l.l7.user("slides-edit-theme-color",()=>{(0,d.kc)().piper_theme_variable_alias?s.CWU.setVariableValueForMode(n.varId,n.modeId,(0,y.y$)(s.rXF.COLOR,i)):s.Ez5.slideThemeLibBindings().setThemeColorVariableFromSubscribedVariableColorValue(n?.varId||"",n?.modeId||"",i)}):e({type:"SOLID",opacity:1,visible:!0,blendMode:"NORMAL",colorVar:{value:{alias:o.sD.toKiwi(c)},dataType:"ALIAS",resolvedDataType:"COLOR"}},E.zk.YES))},[r,n,e])}function A(e,r){let n=(0,i.wA)(),o=(0,u.md)(b.E_),s=(0,f.eY)();return a.useCallback((a,i)=>{o?n((0,m.nh)({style:a,callback:e=>{let n=s.get(e),a=(0,c.AW)(n?.fills);a&&r&&l.l7.user("slides-edit-theme-color",()=>r(o.varId||"",o.modeId||"",I(a)))}})):n(m.AV({style:a,inheritStyleKeyField:e,fromSearch:i?.fromSearch}))},[n,o,e,s,r])}n(559681),n(452883)},753243:(e,r,n)=>{n.d(r,{qm:()=>h});var a=n(411855);n(188507);var i=n(75395);n(299321),n(275556),n(880934);var o=n(629019),s=n.n(o);n(568214);var l=n(966712),c=n(153234),d=n(30637);n(520581),n(763658),n(46481);var u=n(154254);n(939863),n(293017),n(428654),n(775664),n(848661),n(318812);var m=n(498606);n(420186),n(746806),n(179243),n(559681),n(452883),n(742934),n(173915);var p=n(222849);(0,l.ck)("bdf32fe13fe9a9be5b40c3de4a18572f14c9a1eb");function h({backgroundString:e,opacity:r,tooltipText:n,tooltipSubtext:o,onClick:l,onContextMenu:h,isSelected:_,editIcon:g,showEditIcon:f,isEditing:E,onClickEdit:y,recordingKey:b}){let I=(0,c.rf)(b,"contextmenu",e=>{h&&h(e)});return a.createElement("div",{className:s()(p.k8,{[p.wH]:_}),"data-tooltip-type":m.Ib.TEXT,"data-tooltip-show-above":!0,"data-tooltip":n,"data-tooltip-subtext":o,"data-tooltip-text-inline":!0,"data-testid":b},g&&f&&y&&a.createElement(i.E,{className:s()(p.Lq,{[p.Sn]:E,[p.Qo]:(0,d.nl)()}),onClick:e=>{if((0,d.nl)())y();else{let r=e.currentTarget.getBoundingClientRect(),n=r.width/2,a=r.left+n,i=r.top+n;Math.pow(e.clientX-a,2)+Math.pow(e.clientY-i,2)<=n*n&&y()}},recordingKey:c.Pt(b,"edit")},g),a.createElement(i.E,{htmlAttributes:{onContextMenu:I},onClick:l,className:u.cx.w24.h24.relative.$,recordingKey:b},a.createElement("div",{className:p.Le,style:{background:e}}),a.createElement("div",{className:p.f$,style:{opacity:void 0!==r?1-r:0}})))}},173915:(e,r,n)=>{n.d(r,{Ph:()=>q,jP:()=>$});var a=n(411855),i=n(188507),o=n(602354),s=n(343887),l=n(75395),c=n(139689),d=n(844519),u=n(299321),m=n(275556),p=n(864361),h=n(966712),_=n(374626),g=n(860601),f=n(153234),E=n(763658),y=n(452441),b=n(154254),I=n(939863),T=n(356390),v=n(285381),S=n(617453),w=n(618056),A=n(555074),N=n(869156),C=n(318812),L=n(29680),O=n(237929),R=n(173454),P=n(279702),D=n(922358),k=n(846848),M=n(12669),F=n(285897),x=n(807676),U=n(939143),B=n(875157),V=n(746806),G=n(742934),H=n(179243),W=n(559681),K=n(452883),Y=n(222849);let $=k.qo,j={type:"SOLID",color:{r:0,g:0,b:0,a:1},opacity:1,blendMode:"NORMAL"};var z=(e=>(e[e.COLOR=0]="COLOR",e[e.GRADIENT=1]="GRADIENT",e))(z||{});function q({paint:e,onChange:r,onClose:n,initialPosition:s,enableGradients:l,hideCustomColorPickerFillTypeToggle:c,inheritStyleKeyField:d}){let m=(0,G.PG)(r),p=(0,G.o9)(d,G.Vz),y=["custom_color","library"],[b,I]=o.tU.useTabs({custom_color:y.includes("custom_color"),library:y.includes("library")},{defaultActive:()=>(0,h.kc)().piper_theme_variable_alias&&e.colorVar?.dataType==="ALIAS"?"library":"custom_color"}),v=(0,i.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),S=(0,A.kl)("numSelectedByType"),w=a.useMemo(()=>{if(S)return(0,B.aZ)(u.rrT.FILL,S)},[S]),N=(0,K.$)(),C=(0,W.UZ)(N),L=(0,_.md)(H.E_),O=a.useMemo(()=>{if((0,h.kc)().piper_theme_variable_alias){if(!L)return(0,x.L)(e);{let e=ee(L.varId)?.modeValues[C];if(e&&e.type===u.Z_n.ALIAS)return ee(e.value)}}return null},[L,e,C]),R=a.useMemo(()=>new Set,[]),P=a.useCallback(()=>{v===u.m1T.GRADIENT&&T.Y5.triggerAction("leave-edit-mode"),n()},[v,n]),D="slidesCustomColorPicker";return a.createElement(E.k,{name:"slides_custom_color_picker"},a.createElement(V.vx,{initialPosition:s,onClose:P,initialWidth:$,recordingKey:D},a.createElement(X,{editVar:L,tabManager:I,tabProps:b,onClose:P,recordingKey:D}),a.createElement(o.tU.TabPanel,{...b.custom_color},a.createElement(J,{paint:e,onPaintChange:r,enableGradients:l,recordingKey:"slidesCustomColorPicker",hideCustomColorPickerFillTypeToggle:c})),a.createElement(o.tU.TabPanel,{...b.library},a.createElement(U.Rp,{selectedItem:O,resolvedType:u.rXF.COLOR,disabledVariableIds:R,pickerType:"color-picker",recordingKey:f.Pt("slidesCustomColorPicker","libraryColors"),onVariableSelected:m,onStyleSelected:p,onClose:g.lQ,variableScopes:w})),(0,h.kc)().piper_rename_theme_colors&&a.createElement(Q,{recordingKey:f.Pt(D,"rename")})))}function X({editVar:e,tabManager:r,tabProps:n,onClose:i,recordingKey:l}){let p=a.createElement(s.K,{onClick:i,recordingKey:f.Pt(l,"colorPickerModalHeader","closeButton"),"aria-label":(0,I.t)("common.close")},a.createElement(c.A,null)),h=a.useCallback(()=>m.l7.user("slides-delete-theme-color",()=>{e&&u.CWU?.deleteVariable(e.varId)}),[e]);return a.createElement("div",null,e?a.createElement("div",{className:b.cx.flex.justifyBetween.itemsCenter.pl16.pr8.pb8.pt8.$},a.createElement("p",{className:b.cx.textBodyMediumStrong.$},(0,I.t)("slides.properties_panel.text_style.edit_template_color")),a.createElement("div",{className:b.cx.flex.gap8.$},a.createElement(s.K,{onClick:h,"aria-label":(0,I.t)("slides.properties_panel.color_picker.delete_template_color")},a.createElement(d.i,null)),p)):null,e?a.createElement("div",{className:b.cx.h1.wFull.colorBgTertiary.$}):null,a.createElement("div",{className:b.cx.flex.justifyBetween.p8.$},a.createElement(o.tU.TabStrip,{manager:r},a.createElement(o.tU.Tab,{...n.custom_color},(0,I.tx)("fullscreen.properties_panel.color_picker.custom")),a.createElement(o.tU.Tab,{...n.library},(0,I.tx)("fullscreen.properties_panel.color_picker.libraries"))),null===e?p:null))}function J({paint:e,onPaintChange:r,enableGradients:n,recordingKey:o,hideCustomColorPickerFillTypeToggle:s}){let l=(0,i.wA)(),c=(0,C.Um)(),d=(0,L.dH)(),m=(0,v.Ep)(),h=(0,p.C)(),_=(0,S.Ku)(),g=(0,i.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),f=a.useRef(null),[E,y]=a.useState((0,w.bn)(e.type)?1:0),b=(0,w.Ou)(e),I=(0,w.x$)(e),A=(0,L.p8)("currentSelectedGradientStop"),N=(0,w.iC)(b||I||j,A),O=n=>{e.type!==n&&r(w.Tm.initPaint(n,j.color,e,"slides-custom-color-picker"),!(0,w.bn)(e.type)&&(0,w.bn)(n)?P.zk.NO:P.zk.YES)};return a.createElement(a.Fragment,null,!s&&n&&a.createElement(Z,{panelType:E,onPanelTypeChange:e=>{E!==e&&(O(0===e?"SOLID":"GRADIENT_LINEAR"),y(e),1===e?T.Y5.triggerAction("toggle-gradient-edit-mode"):g===u.m1T.GRADIENT&&T.Y5.triggerAction("leave-edit-mode"))},recordingKey:o}),n&&1===E&&I&&a.createElement(D.vL,{name:"Slides color picker",ref:f,handleKeyDown:e=>{I&&(0,M.T)(e,I,g,A,r)},focusOnMount:!0,forceUpdate:h},a.createElement(F.i,{paint:I,onChange:r,currentSelectedGradientStop:A,colorProfile:m,hasFocus:!!f.current&&f.current.hasFocus(),dispatch:l,recordingKey:o})),a.createElement(k.S7,{color:N,colorFormat:_,onColorChange:(n,a)=>{(0,M.n)(n,e,A,r,a)},dropperDisabled:!1,displayType:k.sX.FULL,currentTool:d,dispatch:l,dropdownShown:c,recordingKey:o,canAcceptStyles:!1,canAcceptVariables:!1}))}function Z({panelType:e,onPanelTypeChange:r,recordingKey:n}){let i=[{type:0,label:(0,I.t)("slides.properties_panel.color_picker.color_toggle"),optionRecordingKey:"color"},{type:1,label:(0,I.t)("slides.properties_panel.color_picker.gradient_toggle"),optionRecordingKey:"gradient"}];return a.createElement("div",{className:b.cx.wFull.py8.bb1.bSolid.colorBorder.$},a.createElement("div",{className:Y.X9},i.map(({type:i,label:o,optionRecordingKey:s})=>a.createElement(l.E,{key:i,className:e===i?Y.wH:void 0,onClick:()=>r(i),recordingKey:f.Pt(n,s)},o))))}function Q({recordingKey:e}){let r=(0,_.md)(H.E_),n=(0,N.tZ)(r?.varId),[i,o]=a.useState(n??"");a.useEffect(()=>{o(n??"")},[n]);let s=a.useRef(null),l=a.useCallback(()=>{u.CWU.renameVariable(r?.varId??"",(0,O.rh)(i))},[r,i]);return r?a.createElement("div",{className:b.cx.px16.py12.flex.itemsCenter.bt1.bSolid.colorBorder.$},a.createElement("span",{className:b.cx.colorTextSecondary.textBodyMedium.w64.$},(0,I.tx)("slides.properties_panel.color_picker.rename_color_label")),a.createElement(y.L,{className:Y.Kv,name:"variableName",ref:s,value:i,onChange:e=>{o(e.target.value)},onBlur:m.nc.user("slides-rename-theme-color",l),onKeyDown:e=>{("Enter"===e.key||"Escape"===e.key)&&s.current?.blur()},placeholder:(0,I.t)("slides.properties_panel.color_picker.rename_color_placeholder"),delay:50,"data-1p-ignore":!0,recordingKey:e})):null}function ee(e){let r=u.CWU.getLocalVariableInfo(e);if(r)return(0,R.kz)(r);let n=u.CWU.getSubscribedVariableInfo(e);return n?(0,R.ZI)(n):null}},352046:(e,r,n)=>{n.d(r,{i:()=>c});var a=n(411855);n(388393);var i=n(23334);n(299321),n(275556),n(880934);var o=n(568214),s=n(428654),l=n(168039);function c(){let e=(0,l.yM)().colorText;return a.useMemo(()=>{if(e){let r=s.F.parse(e);if(r.a>0)return(0,i.oU)(r)}return(0,i.oU)(o.Uv)},[e])}n(184027)},108239:(e,r,n)=>{n.d(r,{$j:()=>c,f4:()=>l});var a=n(299321),i=n(880934);n(904669);var o=n(374626),s=n(92566);function l(e,r,n,c=!0){let d=o.zl.get(s.xB),u=d[e]?.[r-1]||d[e-1]?.[(d[e-1]?.length||0)-1]||d[e+1]?.[0]||d[e]?.[0]||d[0]?.[0],m=(0,i.fn)((0,i.sH)(u))?a.Ez5.slideDeck().duplicateAsBlankSlide(u,e,r,n):a.Ez5.slideDeck().addBlankSlideAtCoord(e,r,n);return c&&a.Ez5.commit(),setTimeout(()=>{a.Ez5.singleSlideView().isSingleSlideViewEnabled()||a.Ez5.singleSlideView().panToSlideIfOutsideViewport(m,.6)},0),m}function c({row:e,x:r=0,y:n=0}){let a=o.zl.get(s.fc)[e];a&&a.forEach(e=>{var a;(a=e.node?.parentNode?.type==="MODULE"?e.node.parentNode:e.node)&&(a.overlayTransform.m02!==r||a.overlayTransform.m12!==n)&&(a.overlayTransform={...a.overlayTransform,m02:r,m12:n})})}},953289:(e,r,n)=>{n.d(r,{Ei:()=>s,F4:()=>d,Jw:()=>y,Md:()=>p,UM:()=>E,Vf:()=>o,_g:()=>g,bY:()=>l,cZ:()=>f,q7:()=>I});var a=n(38580),i=n(940596),o=(e=>(e.ALL="ALL",e.ORG="ORG",e.TEMPLATE="TEMPLATE",e.HUB_FILE="HUB_FILE",e.FILE_PICKER="FILE_PICKER",e.TEMPLATE_PICKER="TEMPLATE_PICKER",e.TEAM="TEAM",e))(o||{});let s=(0,i.Wh)(()=>(0,a.eU)(!1));(0,i.Wh)(()=>(0,a.eU)(!1));let l=(0,a.eU)({type:"ALL"});(0,a.eU)("");let c=(0,a.eU)({});(0,a.eU)(e=>e(c),(e,r,n,a)=>{r(c,e=>({...e,[n]:a}))}),(0,a.eU)(null,(e,r)=>{r(c,{})}),(0,a.eU)(0);var d=(e=>(e.PUBLISH_HUB_FILE_INITIATED="PUBLISH_HUB_FILE_INITIATED",e.PUBLISH_HUB_FILE_COMPLETED="PUBLISH_HUB_FILE_COMPLETED",e.PUBLISH_HUB_FILE_ERRORED="PUBLISH_HUB_FILE_ERRORED",e.PUBLISH_TEMPLATE_INITIATED="PUBLISH_TEMPLATE_INITIATED",e.PUBLISH_TEMPLATE_COMPLETED="PUBLISH_TEMPLATE_COMPLETED",e.PUBLISH_TEMPLATE_ERRORED="PUBLISH_TEMPLATE_ERRORED",e.UNPUBLISH_TEMPLATE_INITIATED="UNPUBLISH_TEMPLATE_INITIATED",e.UNPUBLISH_HUB_FILE_INITIATED="UNPUBLISH_HUB_FILE_INITIATED",e.UNPUBLISH_COMPLETED="UNPUBLISH_COMPLETED",e.UNPUBLISH_TEMPLATE_ERRORED="UNPUBLISH_ERRORED",e.CLEARED="CLEARED",e))(d||{});let u=["PUBLISH_HUB_FILE_INITIATED","PUBLISH_TEMPLATE_INITIATED","UNPUBLISH_TEMPLATE_INITIATED","UNPUBLISH_HUB_FILE_INITIATED"],m=[...u,"CLEARED"];function p(e){return u.includes(e)}let h={CLEARED:u,PUBLISH_TEMPLATE_INITIATED:["PUBLISH_TEMPLATE_COMPLETED","PUBLISH_TEMPLATE_ERRORED"],PUBLISH_TEMPLATE_COMPLETED:m,PUBLISH_TEMPLATE_ERRORED:m,UNPUBLISH_TEMPLATE_INITIATED:["UNPUBLISH_COMPLETED","UNPUBLISH_ERRORED"],UNPUBLISH_HUB_FILE_INITIATED:["UNPUBLISH_COMPLETED","UNPUBLISH_ERRORED"],UNPUBLISH_COMPLETED:m,UNPUBLISH_ERRORED:m,PUBLISH_HUB_FILE_INITIATED:["PUBLISH_HUB_FILE_COMPLETED","PUBLISH_HUB_FILE_ERRORED"],PUBLISH_HUB_FILE_COMPLETED:m,PUBLISH_HUB_FILE_ERRORED:m},_=(0,a.eU)({state:"CLEARED"}),g=(0,a.eU)(e=>e(_).state),f=(0,a.eU)(e=>{let r=e(_);return"PUBLISH_TEMPLATE_INITIATED"===r.state?r.request:null}),E=(0,a.eU)(null,(e,r,n)=>{let a=e(g),{state:i}=n;if(h[a].includes(i))r(_,n);else throw Error(`Invalid state transition from ${a} to ${i}. Please check the state transition logic.`)});function y(e){switch(e){case"PUBLISH_TEMPLATE_ERRORED":case"PUBLISH_TEMPLATE_INITIATED":return"Slides Team Template Publish";case"UNPUBLISH_TEMPLATE_INITIATED":case"UNPUBLISH_ERRORED":return"Slides Team Template Unpublish";case"PUBLISH_HUB_FILE_ERRORED":case"PUBLISH_HUB_FILE_INITIATED":return"Slides Hub File Publish";case"UNPUBLISH_HUB_FILE_INITIATED":return"Slides Hub File Unpublish";default:return e}}(0,a.eU)(null,(e,r)=>r(_,{state:"CLEARED"}));var b=(e=>(e.ALL="ALL",e.SINGLE="SINGLE",e.NONE="NONE",e))(b||{});(0,i.Wh)(()=>(0,a.eU)(null)),(0,i.Wh)(()=>(0,a.eU)(null)),(0,i.Wh)(()=>(0,a.eU)({type:"NONE"})),(0,i.Wh)(()=>(0,a.eU)(""));let I=(0,i.Wh)(()=>(0,a.eU)(!1))},950814:(e,r,n)=>{n.d(r,{l:()=>a});let a=8},677967:(e,r,n)=>{var a=n(99506),i=n(540019),o=n(555328),s=n(222085),l=n(576144),c=n(950814);i.M4.Query({fetch:async e=>await s.A.getCommunityShelves({shelfType:o.cS.PIPER_TEMPLATE_MODAL}).then(e=>e.data.meta)}),i.M4.Query({fetch:async e=>await s.A.getCommunityShelfById({categoryId:e}).then(e=>{if(e.data.meta.length>0)return e.data.meta[0]})}),i.M4.Query({fetch:async e=>e?await l.q.getSearchPaginated({orgId:e,size:c.l,from:0,templateType:a._Y.SLIDES}).then(e=>e.data.meta.templates):[]})},491679:(e,r,n)=>{n.d(r,{Jv:()=>u,YW:()=>d});var a=n(411855);n(188507),n(414507),n(299321),n(275556),n(904669),n(3794),n(540193),n(966712),n(391388),n(776621),n(30637);var i=n(154483);n(384162),n(410424),n(632430),n(986270),n(965480),n(988022),n(356390),n(335682),n(694687),n(820642),n(99506),n(540019),n(336599),n(601607);var o=n(463592);n(106112),n(555328),n(809073),n(967409),n(272917),n(369394),n(508567);var s=n(576144);n(372291),n(144119),n(953289),n(677967);(0,i.fv)(),new o.CN({keys:["name"],ignoreLocation:!0});var l=(e=>(e[e.LOADING=0]="LOADING",e[e.NO_RECENT_FILES=1]="NO_RECENT_FILES",e[e.NO_QUERY_RESULTS=2]="NO_QUERY_RESULTS",e[e.SUCCESS=3]="SUCCESS",e))(l||{}),c=(e=>(e.OVERLAY_MODAL="OVERLAY_MODAL",e.PICKER="PICKER",e.BOARD_TO_DECK="BOARD_TO_DECK",e))(c||{});async function d(e){return!!e&&!e.parentOrgId&&!!e.teamId&&!!e.editorType&&(await s.q.getTeamTemplateLimitReached({teamId:e.teamId,editorType:e.editorType})).data.meta.template_limit_reached}async function u(e){return!!e&&!e.parent_org_id&&!!e.team_id&&!!e.editor_type&&(await s.q.getTeamTemplateLimitReached({teamId:e.team_id,editorType:e.editor_type})).data.meta.template_limit_reached}a.createContext(null)},179243:(e,r,n)=>{n.d(r,{Dh:()=>u,Dq:()=>c,E_:()=>m,TN:()=>l,i1:()=>d});var a=n(374626),i=n(38580),o=n(940596),s=n(674011);let l=(0,s.hR)([],{changeFileBehavior:s.hW.RESET_VALUE_ON_FILE_CHANGE}),c=(0,s.hR)({},{changeFileBehavior:s.hW.RESET_VALUE_ON_FILE_CHANGE}),d=(0,a.Iz)(e=>(0,s.hR)({id:e,data:null},{changeFileBehavior:s.hW.RESET_VALUE_ON_FILE_CHANGE}));function u(e){let r=d(e);return a.zl.get(r).data}(0,o.Wh)(()=>(0,a.M2)((0,i.eU)({})));let m=(0,o.Wh)(()=>(0,i.eU)(null))},559681:(e,r,n)=>{n.d(r,{UZ:()=>T,Xo:()=>b,k1:()=>S,kO:()=>E,lK:()=>v});var a=n(411855),i=n(432258),o=n(494387),s=n(299321),l=n(880934);n(568214);var c=n(966712),d=n(374626),u=n(364898),m=n(529928),p=n(416095);n(726284);var h=n(859703),_=n(933123),g=n(125944),f=n(179243);function E(e){let r=(0,f.i1)(e),{data:n}=(0,d.md)(r);return!n}let y=(0,m.bt)(e=>e.library.local.styles);function b(e){let r=(0,d.md)(y),n=(0,f.i1)(e),{data:i}=(0,d.md)(n);return a.useMemo(()=>{if(!e)return[];if(!(0,g.X_)(e))return console.warn("Expected local theme",e),[];if(!i)return console.warn("Theme no longer exists in the theme map",e),[];let n=new Set(i?.styleGUIDs||[]);return n.size>0?(0,p.ti)(r,"TEXT").filter(e=>n.has(e.node_id)).sort((e,r)=>(0,u.Ez)(r.sort_position||"",e.sort_position||"")):[]},[e,i,r])}function I(e){let r=(0,d.md)(h.Cg),n=(0,f.i1)(e),{data:a}=(0,d.md)(n);return e?(0,g.X_)(e)?a?(a.variableIDs||[]).map(e=>r[e])||[]:(console.warn("Theme no longer exists in the theme map",e),[]):(console.warn("Expected local theme",e),[]):[]}function T(e){let r=(0,f.i1)(e),{data:n}=(0,d.md)(r),i=n?.variableSetID||"";return a.useMemo(()=>o.gr.isValid(i)?s.CWU.getVariableSetDefaultMode(i):"",[i])}function v(e){let r=function(e){let r=I(e);return(0,a.useMemo)(()=>{let n=s.Ez5.slideThemeLibBindings().getBlackColorVariableId(e),a=s.Ez5.slideThemeLibBindings().getWhiteColorVariableId(e);return r.filter(e=>e&&e.resolvedType===s.rXF.COLOR).sort((e,r)=>{for(let i of[n,a]){if(e.node_id===i)return -1;if(r.node_id===i)return 1}return e.sortPosition<r.sortPosition?-1:1}).map(e=>e.node_id)},[e,r])}(e),n=T(e),o=(0,g.X_)(e);return r.map(e=>{if(!e||0===e.length)return;let r=o?s.CWU.getLocalVariableInfo(e):s.CWU.getSubscribedVariableInfo(e);if(r&&r.modeValues){let a=function(e,r){let n=e.modeValues[r];if(!n||n.resolvedType!==s.rXF.COLOR)return null;if(n.type===s.Z_n.COLOR)return n.value;if(n.type===s.Z_n.ALIAS&&(0,c.kc)().piper_theme_variable_alias){let r=s.CWU.getVariableResolvedValue(e.id,new Map);if(r)return r.value}return null}(r,n);if(a){let i={color:a,colorVar:{dataType:"ALIAS",resolvedDataType:"COLOR",value:{alias:{guid:(0,l.sH)(e.replace("VariableID:",""))||void 0}}}};return{variableId:e,variableName:r.name,variableType:r.modeValues[n].type,paint:i}}}}).filter(i.Vq)}function S(e){let r=(0,f.i1)(e),{data:n}=(0,d.md)(r),i=n?.variableSetID||"",o=T(e),l=I(e),c=(0,_.ay)();return(0,a.useCallback)(e=>{if(i){let r=c(i,l,s.rXF.COLOR,"",s.HS4.SLIDES_THEME);return r&&s.CWU.setVariableValueForMode(r,o,{type:s.Z_n.COLOR,resolvedType:s.rXF.COLOR,value:e}),r}return null},[c,i,o,l])}},452883:(e,r,n)=>{n.d(r,{$:()=>s});var a=n(848661),i=n(555074),o=n(601607);function s(){let[e]=(0,i.lJ)("themeId"),r=(0,o.Fk)(e=>e.getRoot().slideThemeId);return e&&(0,a.hS)(e)?e:r}},125944:(e,r,n)=>{function a(e){return e.length>0&&!e.includes("/")}function i(e){return"TEXT"===e||"GRID"===e}n.d(r,{Rc:()=>i,X_:()=>a})},266294:(e,r,n)=>{n.d(r,{PF:()=>f,fx:()=>E}),n(411855);var a=n(299321),i=n(904669),o=n(38329);n(966712);var s=n(374626),l=n(776621);n(47506),n(939863);var c=n(582064);n(392592),n(934533);var d=n(119198),u=n(974105);n(335682);var m=n(99506),p=n(984968),h=n(945020);n(983499),n(92566),n(144119);var _=n(72754),g=n(463660);function f(e,r){!function(e,r){let n=s.zl.get(p.Me),a=o.D.getState(),i=(0,u.Kl)(a);e(d.zE({state:i,from:h.f6.DESIGN_TO_SLIDES_ENTRYPOINT,editorType:m._Y.SLIDES,team:n,openNewFileIn:h.ai.NEW_TAB,slidesNewFileData:r}))}(e,{localStorageKey:r})}function E(e,r,n=!1){return new Promise((o,s)=>{let d;if(null===r||null===e){(0,l.x1)("storeFigmaContentForSlidesCreation","No openFile or file version",{fileKey:e?.key,fileVersion:r},{reportAsSentryError:!0}),s();return}let u=(0,c.MZ)(),m=(0,i.UN)(),p=m.getDirectlySelectedNodes();d=n&&p.length?m.getDirectlySelectedNodes().filter(e=>(0,_.o)(e)).map(e=>e.guid):[...a.Ez5.slideLikeNodeObserverState().slideLikeNodeIdsOnCanvas.getCopy()];try{(0,g.JR)(u,{fileKey:e.key,fileVersion:r,pageGuid:m.getCurrentPage()?.guid,selectedNodeIds:d}),o(u)}catch(n){(0,l.x1)("storeFigmaContentForSlidesCreation","Failed to serialize and store sceneGraph data into local storage",{fileKey:e.key,fileVersion:r},{reportAsSentryError:!0}),s()}})}},155565:(e,r,n)=>{n.d(r,{Z:()=>s});var a=n(91408);n(818),n(617453),n(187882);var i=n(125944),o=n(837746);function s(e){return"FILL"===e||"STROKE"===e||(0,i.Rc)(e)}(0,a.jz)(o.M$q)},985481:(e,r,n)=>{n.d(r,{KL:()=>a,Z3:()=>p});var a,i=n(411855),o=n(432258),s=n(299321),l=n(44948),c=n(29680),d=n(601607),u=n(559681),m=n(669186);function p({themeId:e,styleId:r,options:n,onPreviewGenerated:a}){let p=function(e){let r=(0,d.Fk)((e,r)=>{let n;let a=e.get(r);if(!a)return;let i=a.fontSize,o=a.lineHeightOrMixed;if("mixed"===o)n=i;else switch(o.units){case"RAW":n=i*o.value;break;case"PIXELS":n=o.value;break;case"PERCENT":n=i*o.value/100}return{name:a.name,fontFamily:a.fontName.family,fontStyle:a.fontName.style,fontSize:i,lineHeight:n}},e);return(0,l.k9)(()=>r,[r])}(r);!function({themeId:e,styleId:r,styleMetadata:n,options:a,onPreviewGenerated:l}){let d=function({themeId:e,minPreviewHeight:r,maxPreviewHeight:n,defaultPreviewHeight:a}){let s=function(e){let r=(0,u.Xo)(e),n=(0,c.eY)();return i.useMemo(()=>{let e=r.map(e=>n.get(e.node_id)?.fontSize).filter(o.Vq);if(e.length)return{min:Math.min(...e),max:Math.max(...e)}},[r,n])}(e);return i.useMemo(()=>{if(!s)return new class{getPreviewHeight(e){return a}};let{min:e,max:i}=s;return new class{getPreviewHeight(o){let s=function(e,r,n,a,i){if(!(e<r)&&!(e>n)&&!(a>=i)&&!(r>=n))return(e-r)/(n-r)*(i-a)+a}(o,e,i,r,n);return s?Math.round(s):a}}},[s,r,n,a])}({themeId:e,minPreviewHeight:a.minHeight,maxPreviewHeight:a.maxHeight,defaultPreviewHeight:Math.round((a.minHeight+a.maxHeight)/2)}),{fontsAreLoading:p,checkFontsAreLoading:h}=(0,m.B)();i.useEffect(()=>{h()},[n,h]),i.useEffect(()=>{if(p)return;if(!n||!s.vXe.fontIsLoaded(n.fontFamily,n.fontStyle)){l(null);return}let e=d.getPreviewHeight(n.fontSize),i=n.name;a.maxWidth&&(i=s.glU.truncateText(n.fontFamily,e,n.lineHeight*(e/n.fontSize),a.maxWidth,1,i));let o=s.Ez5.slideThemeStylePreview().generateTextPreview(r,i,a.color,n.fontFamily,n.fontStyle);if(!o){l(null);return}l({preview:o,previewHeight:e})},[p,r,n,a,d,l])}({themeId:e,styleId:r,styleMetadata:p,options:n,onPreviewGenerated:a})}(e=>{e.MIN_THEME_TEXT_STYLE_PREVIEW_HEIGHT=12,e.MAX_THEME_TEXT_STYLE_PREVIEW_HEIGHT=22})(a||(a={}))},126674:(e,r,n)=>{n.d(r,{DG:()=>M,Kc:()=>R,OQ:()=>P,Zp:()=>L,dy:()=>k,in:()=>x,rS:()=>D});var a=n(411855),i=n(188507),o=n(841563),s=n.n(o),l=n(776250),c=n(711525),d=n(62342),u=n(970516),m=n(944682),p=n(507877),h=n(763223),_=n(654034),g=n(912924),f=n(112235),E=n(29680),y=n(132135),b=n(99506),I=n(540019),T=n(556261),v=n(56099),S=n(549774),w=n(440535),A=n(103271),N=n(588282),C=n(406158),L=(e=>(e.TILE="tile",e.DETAIL_MODAL="detail",e))(L||{});function O(e,r,n){return e===n&&r!==b.Xn.GUEST}function R(e,r){let n=`${location.origin}/files/${e}/feed-posts`;return r?.uuid&&(n+=`/${r.uuid}`),n}function P({fileVersionId:e,fileKey:r,startingNodeId:n},a){let i=(0,S.lD)({startingPointNodeId:n,versionId:e});i["redirect-src"]="feed",Object.assign(i,a);let o=Object.entries(i).map(([e,r])=>`${e}=${r}`).join("&");return`${location.origin}/proto/${r}?${o}`}function D(e,r,n){let o=(0,i.wA)(),s=r.find(e=>e.type===A.cM.NODE||e.type===A.cM.PROTOTYPE),c=(s?s.fileKey:void 0)||n;a.useEffect(()=>{o(m.ZN({file_key:c??void 0}))},[o,c]);let u=I.M4.useFile(c).data,h=(0,f.$)(),_=a.useMemo(()=>u&&s&&s.type===A.cM.PROTOTYPE?d.y1.PROTOTYPE:u?h(u):void 0,[u,s,h]),g=u&&void 0!==_;return{fileData:u,fileIcon:_,fileLoaded:g,openFile:a.useCallback(()=>{if((0,l.sx)("Team Feed File Clicked",{postUuid:e}),s){if(s.type===A.cM.NODE){let r=(0,y.jN)({file:{key:s.fileKey},commentId:(0,N.iw)(e)});o(p.V3({url:r}))}else s.type===A.cM.PROTOTYPE&&o(p.V3({url:P(s)}))}if(c){let e=(0,y.jN)({file:{key:c}});o(p.V3({url:e}))}},[o,s,e,c])}}var k=(e=>(e.TILE="tile",e.DETAIL="detail",e))(k||{});function M(e,r){let n=(0,i.wA)();return a.useCallback(()=>{(0,l.sx)("Team Feed Copy Link Clicked",{postUuid:e,source:r}),n(u.le({view:"teamFeed",postUuid:e}))},[n,e,r])}let F={component:"useFeedPostInfo",migrationGroup:v.L.GROUP_7};function x(e,r,n,i){let[o,d]=a.useState({}),[u,m]=a.useState({}),p=(0,E.eY)(),f=(0,T.wy)({...F,attribute:"planUserParentOrgId",legacy:(e,r)=>r?.org_id,migrated:e=>{if(e?.key.type===b.h4.ORG_USER)return e.key.parentId??void 0}}),y=(0,T.wy)({...F,attribute:"planUserPermission",legacy:(e,r)=>r?.permission,migrated:e=>{if(e?.key.type===b.h4.ORG_USER)return e?.permission}});return a.useEffect(()=>{if(e.errors&&e.errors.length){let r=JSON.stringify(e.errors.map(e=>({code:e.code,path:e.path,message:e.error?.message||""})));console.error(`Failed to load feed posts: ${r}`),(0,l.sx)("Livegraph Feed Post Comments Errors",{errors:r})}},[e.errors]),a.useMemo(()=>{if((0,h.y)()&&"loaded"===e.status&&e.data.file&&p?.get){let r=e.data.file.feedPosts,a=r.filter(e=>!!e.org&&!!y&&O(f,y,e.org.id)),l=(0,g.N)(a),c=n(l);Object.entries(c).every(([e,r])=>null===o[e]&&null===r||!!o[e]&&!!r&&o[e]===r)||d(c);let h=i(l,p?.get.bind(p),r);Object.entries(h).every(([e,r])=>{let n=u[e];return!!n&&s()(n,r)})||m(h)}},[e,p,n,i,y,f,o,u]),a.useMemo(()=>f?function(e,r,n,a,i,o){if("loaded"!==e.status)return e;if(!e.data.file)return(0,c.gB)([]);let s={},l=(e.data.file?.feedPosts||[]).sort((e,r)=>r.createdAt.getTime()-e.createdAt.getTime()).filter(e=>!!e.org&&O(i,o,e.org.id)).map(e=>{let i=e.comments.map(e=>({id:`feed_comment_${e.id}`,uuid:e.uuid,key:"",parent_id:null,user_id:e.user.id,created_at:e.createdAt.toISOString(),resolved_at:null,deleted_at:null,message_meta:(0,_.o8)(e.messageMeta),client_meta:null,order_id:null,isUnread:!1,isPendingFromSinatra:!1,user:(0,_.CR)(e.user),feed_id:e.id,attachments:e.attachments})),[o,...l]=(0,g.N)([e]);s[o]=s[o]+1||0;let c=n[o]??null,d=a[e.publicUuid]?.[o],u={};for(let r of l)n[r]===c&&(u[r]=a[e.publicUuid]?.[r]);let m=null,p=null;d&&(p={x:d.x+d.width,y:d.y},m={x:d.x,y:d.y+d.height});let h=(0,_.CR)(e.creator),f=(0,N.iw)(e.publicUuid),E=e.content.map(e=>JSON.parse(e)),{thumbnail:y,padImage:b,thumbnailBackground:I}=(0,C.i0)(E,e.backgroundColor??void 0);return{id:f,uuid:"",key:e.fileKey||"",anchored:!1,selectionAnchorCanvasPosition:null,page:c,pageName:null,isActive:r===f,isPendingFromSinatra:!1,canvasPosition:p,boundingBoxAnchorCanvasPosition:m,comments:[{id:f,uuid:"",key:e.fileKey||"",parent_id:null,user_id:h.id,created_at:e.createdAt.toISOString(),resolved_at:null,deleted_at:null,message_meta:(0,_.o8)(e.descriptionMeta),client_meta:null,order_id:null,isUnread:!1,isPendingFromSinatra:!1,user:h,feed_id:e.id},...i],messageMeta:[],attachments:[],isCanvasMention:!1,sidebarItemType:w.kT.FEED_POST,feedPostPublicUuid:e.publicUuid,feedPostTitle:e.title,feedPostThumbnail:y,feedPostThumbnailBackground:I,feedPostNumContent:e.content.length,padFeedPostThumbnail:b,otherBoundingBoxes:u,pinVerticalStagger:s[o]}});return(0,c.gB)(l)}(e,r,o,u,f,y):(0,c.gB)([]),[e,r,o,u,f,y])}},679736:(e,r,n)=>{n.d(r,{M2:()=>i.M,My:()=>a.My,lt:()=>a.lt,t1:()=>i.t});var a=n(701372),i=n(498792)},406158:(e,r,n)=>{n.d(r,{AK:()=>A,EU:()=>C,Px:()=>b,Rl:()=>T,WI:()=>w,X2:()=>S,i0:()=>N,mz:()=>L,pj:()=>y,zr:()=>v});var a=n(67151),i=n(299321),o=n(539321),s=n(776250),l=n(966712),c=n(395900),d=n(1844),u=n(27087),m=n(204279),p=n(973131),h=n(103271),_=n(988771),g=n(421689);let f="team_feed",E=(e,r,n)=>{let a;let i=new Image;if(i.crossOrigin="anonymous",e.type===h.cM.NODE?a=(0,g.yt)(e.image_url,i).then(async e=>{let a=new Image;if(a.crossOrigin="anonymous",!n)throw Error("Expected a oldNodeImageUrl value");let i=await (0,g.yt)(n,a).then(e=>e.naturalWidth),o=e.naturalWidth/i;return r.state.zoom/=o,(0,g.Bt)(e,r.state)}):e.type===h.cM.IMAGE&&r.url&&(a=Promise.resolve(r.url)),!a)throw Error("Expected a previewImagePromise");return a.then(e=>fetch(e)).then(e=>e.arrayBuffer()).then(e=>{let r=new Uint8Array(e),n=URL.createObjectURL(new Blob([r]));return(0,d.Q)(f,r,"image/jpeg").then(({data:e})=>({data:e,localUrl:n}))}).then(({data:e,localUrl:n})=>({previewImageUrl:e.meta.url,localUrl:n,previewState:r.state}))};async function y(e,r,n,i){let l;if(r.find(e=>e.displayContentItem.type===h.cM.NODE||e.displayContentItem.type===h.cM.PROTOTYPE)){let r=new c.M4;r.start();let a=await (0,p.J)(n,i,"",e);r.stop(),(0,s.sx)("Team Feed New Savepoint Created",{elapsedTimeMs:r.getElapsedTime()}),l=a.id}let d=r.map(e=>{switch(e.displayContentItem.type){case h.cM.NODE:return e.processedContentItem.then(r=>{let n;let a={...r,fileVersionId:l};return e.preview&&(n=new c.M4).start(),(e.preview?E(a,e.preview,e.displayContentItem.image_url):Promise.resolve(void 0)).then(e=>{n&&(n.stop(),(0,s.sx)("Team Feed Preview Uploaded",{elapsedTimeMs:n.getElapsedTime()}));let r=void 0!==e?{...a,preview_image_url:e.previewImageUrl,backgroundColor:(0,o.colorToHex)(e.previewState.backgroundColor),initialX:e.previewState.x,initialY:e.previewState.y,initialZoom:e.previewState.zoom}:a;return(0,h.hM)(r)})});case h.cM.IMAGE:return e.processedContentItem.then(r=>{let n;return e.preview&&(n=new c.M4).start(),(e.preview?E(r,e.preview):Promise.resolve(void 0)).then(e=>{n&&(n.stop(),(0,s.sx)("Team Feed Preview Uploaded",{elapsedTimeMs:n.getElapsedTime()}));let a=void 0!==e?{...r,preview_image_url:e.previewImageUrl,backgroundColor:(0,o.colorToHex)(e.previewState.backgroundColor),initialX:e.previewState.x,initialY:e.previewState.y,initialZoom:e.previewState.zoom}:r;return(0,h.hM)(a)})});case h.cM.VIDEO:return e.processedContentItem.then(e=>(0,h.hM)(e));case h.cM.PROTOTYPE:return e.processedContentItem.then(e=>(0,h.hM)({...e,fileVersionId:l}));default:(0,a.xb)(e.displayContentItem)}});return await Promise.all(d)}function b(e,r,n){return r.map(r=>{let n={type:h.cM.NODE,fileKey:e,fileVersionId:"",nodeId:r,image_url:"",isLoading:!0};return{displayContentItem:n,processedContentItem:Promise.resolve(n)}})}let I=(e,r,n)=>_.Y.getGenerateImageToken({orgId:n,tokenVersion:"2",fileKey:e}).then(n=>{let a=n.data.meta,i=(0,l.Ay)().api_cdn_url||(0,l.Ay)().api_url;return u.Ay.crossOriginGet(`${i}/v1/images/${e}`,{token:a,scale:g.qc.toString(),ids:r.join(",")})});async function T(e,r,n,a,o,l){let d;let u=I(e,r,n);if(o)d=r.map(r=>({type:h.cM.NODE,fileKey:e,fileVersionId:"",nodeId:r,image_url:o[r],backgroundColor:l&&l[r]}));else{let n=new c.M4;n.start();let a=r.map(r=>new Promise((n,a)=>{setTimeout(()=>{let a=new Blob([function(e){let[r,n]=i.Vzr.generateThumbnailForNode(e,g.Ty.width,g.Ty.height,1,{});return n}(r)]),o=URL.createObjectURL(a);n({type:h.cM.NODE,fileKey:e,fileVersionId:"",nodeId:r,image_url:o})},0)}));d=await Promise.all(a),n.stop(),(0,s.sx)("Team Feed Client Node Image Generation",{fileKey:e,nodeIds:r,elapsedTimeMs:n.getElapsedTime()})}return r.map((r,n)=>{let i=u.then(i=>{let o=i.data.images;return{type:h.cM.NODE,fileKey:e,fileVersionId:"",nodeId:r,image_url:o[r],backgroundColor:d[n]?.backgroundColor??a}});return{nodeId:r,displayContentItem:d[n],processedContentItem:i}}).reduce((e,r)=>({...e,[r.nodeId]:r}),{})}function v(e,r){return{displayContentItem:{type:h.cM.IMAGE,...e},processedContentItem:(0,m.rH)(e,f).then(e=>({type:h.cM.IMAGE,...e})),fileIdentifier:r}}function S(e,r,n,a){return{displayContentItem:{type:h.cM.VIDEO,mediaType:e.mediaType,path:e.url,sha:"",videoFileUuid:"",coverImage:""},processedContentItem:(0,m.bu)(e,r,n,f).then(e=>({type:h.cM.VIDEO,...e})),fileIdentifier:a}}function w(e,r){let n={...e,type:h.cM.PROTOTYPE,imageUrl:"",prototypeId:0,fileVersionId:""},a=I(e.fileKey,[e.startingNodeId],r).then(r=>(n.imageUrl=r.data.images[e.startingNodeId],n));return{displayContentItem:n,processedContentItem:a}}function A(e){switch(e.displayContentItem.type){case h.cM.NODE:return;case h.cM.IMAGE:URL.revokeObjectURL(e.displayContentItem.url),e.displayContentItem.preview_image_url&&URL.revokeObjectURL(e.displayContentItem.preview_image_url);return;case h.cM.VIDEO:URL.revokeObjectURL(e.displayContentItem.path);return;case h.cM.PROTOTYPE:return;default:(0,a.xb)(e.displayContentItem)}}function N(e,r){let n=e.find(e=>e.type===h.cM.NODE),a=n?.mediumImageUrl||n?.preview_image_url||n?.image_url;if(a)return{thumbnail:a,padImage:!n.preview_image_url,thumbnailBackground:L(n,r)};let i=e.find(e=>e.type===h.cM.PROTOTYPE),o=i?.imageUrl;if(o)return{thumbnail:o,padImage:!1,thumbnailBackground:L(i,r)};let s=e.find(e=>e.type===h.cM.IMAGE),l=s?.mediumImageUrl||s?.preview_image_url||s?.url;if(l)return{thumbnail:l,padImage:!s?.preview_image_url,thumbnailBackground:L(s,r)};let c=e.find(e=>e.type===h.cM.VIDEO),d=c?.coverImage;return d?{thumbnail:d,padImage:!1,thumbnailBackground:L(c,r)}:{thumbnail:"",padImage:!1,thumbnailBackground:L(null,r)}}function C(e){return!!((0,h.aT)(e)&&void 0!==e.initialX&&void 0!==e.initialY&&void 0!==e.initialZoom&&e.backgroundColor)}function L(e,r){return e?(0,h.aT)(e)?"backgroundColor"in e&&e.backgroundColor||r:"black":"var(--color-bg-secondary)"}},916616:(e,r,n)=>{n.d(r,{a9:()=>C,$K:()=>I,aH:()=>b,Q6:()=>E});var a=n(411855),i=n(188507),o=n(629019),s=n.n(o),l=n(995672),c=n(939863),d=n(259927),u=n(318812),m=n(498606),p=n(538697),h=n(300587),_=n(677859),g=n(662599),f=n(935084),E=(e=>(e.ActualSize="Actual Size",e.Default="Default",e.Fit="Fit to Screen",e.FitWidth="Fit Width",e.FillScreen="Fill Screen",e))(E||{});let y={"Actual Size":()=>(0,c.t)("fig_feed.zoom_pan_preset.actual_size"),Default:()=>(0,c.t)("fig_feed.zoom_pan_preset.default"),"Fit to Screen":()=>(0,c.t)("viewer.options_menu.fit_to_screen"),"Fill Screen":()=>(0,c.t)("viewer.options_menu.fill_screen"),"Fit Width":()=>(0,c.t)("viewer.options_menu.fit_width")},b=Object.keys(E),I="Default";class T extends p.l6{}class v extends p.c${}let S={format:e=>e in E?y[E[e]]():(0,c.t)("fig_feed.zoom_pan_preset.custom")};function w({reportWidth:e,inputProps:r}){let n=a.useRef(null),i=r.property;return a.useLayoutEffect(()=>{let r=n.current;return r&&e(i,r.getBoundingClientRect().width),()=>e(i,void 0)},[n,i,e]),a.createElement("div",{className:f.D9,"aria-hidden":!0},a.createElement(p.uQ,{...r,containerClassName:s()(r.containerClassName,f.oO),ref:n}))}function A({reportWidth:e,value:r,optionProps:n}){let i=a.useRef(null);return a.useLayoutEffect(()=>{let n=i.current?.getElement();return n&&e(r,n.getBoundingClientRect().width),()=>e(r,void 0)},[i,r,e]),a.createElement("div",{className:f.D9,"aria-hidden":!0},a.createElement(v,{...n,additionalStylesClassName:s()(n.additionalStylesClassName,f.ZS),ref:i}))}function N(e){let[r,n]=a.useState(void 0),[o,s]=a.useState(void 0),p=(0,i.wA)(),h=(0,u.Um)(),_=a.useMemo(()=>({inputClassName:"edit_preview_toolbar--input--FPZy0 text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",formatter:S}),[]),g=a.useMemo(()=>a.createElement(l.r,{setMaxWidth:n,render:({reportWidthOfValue:e})=>a.createElement(a.Fragment,null,b.map(r=>a.createElement(w,{key:r,reportWidth:e,inputProps:{..._,property:r}})))}),[_]),f=a.useMemo(()=>a.createElement(l.r,{setMaxWidth:s,render:({reportWidthOfValue:e})=>a.createElement(a.Fragment,null,b.map(r=>a.createElement(A,{key:r,value:r,reportWidth:e,optionProps:{height:32,value:r,formattedValue:S.format(r)}})))}),[]);return a.createElement("div",{className:"edit_preview_toolbar--zoomPanPresetSelectorContainer--45Nn2","data-tooltip-show-above":!0,"data-tooltip-type":m.Ib.TEXT,"data-tooltip":(0,c.t)("fig_feed.zoom_pan_preset.tooltip")},f,g,a.createElement(T,{..._,inputWidth:r,property:e.value,onChange:r=>{e.setZoomPanPreset(r)},chevronClassName:"edit_preview_toolbar--chevron--zjsKc",dropdownClassName:d.Dm,id:`feedZoomPanPresetControl:${e.id}`,blurOnChange:!0,dropdownAlignment:"right",recordingKey:"feedZoomPanPreset",dispatch:p,dropdownShown:h,targetDomNode:document.body,dropdownWidth:o,preventHiddenInput:"always",ariaLabel:(0,c.t)("fig_feed.zoom_pan_preset.tooltip"),role:"combobox"},b.map(e=>a.createElement(v,{key:e,value:e,fullWidth:!0}))))}function C({id:e,backgroundColor:r,setBackgroundColor:n,zoomPanPreset:i,setZoomPanPreset:o,onResetCallback:l,applyToAllCallback:d}){let u=!(i in E);return a.createElement("div",{className:"edit_preview_toolbar--editPreviewToolbar--Gvlyc"},a.createElement(h.ZE,{value:r,onColorChange:n,recordingKey:"teamFeedEditablePreviewBackgroundColorControl",paletteType:"base",buttonCaretType:"down",buttonSize:"small",optionSize:"medium",positionX:()=>0,positionY:(e,r)=>(0,g.T1)(e,r,4),dropperDisabled:!0,inlineButtonTooltip:(0,c.t)("fig_feed.background_color.tooltip"),onlyShowCustomColorPopover:!0}),a.createElement(_.wv,null),a.createElement(N,{id:e,value:i,setZoomPanPreset:o}),!!d&&a.createElement(a.Fragment,null,a.createElement(_.wv,null),a.createElement(_.$n,{tooltip:(0,c.t)("fig_feed.apply_to_all.tooltip"),tooltipMaxWidth:200,caret:"none",onClick:async()=>{await d()},disabled:u,recordingKey:"teamFeedResetPreview"},a.createElement("span",{className:s()({"edit_preview_toolbar--buttonDisabled--hE0Am":u})},(0,c.t)("fig_feed.apply_to_all")))),l&&a.createElement(a.Fragment,null,a.createElement(_.wv,null),a.createElement(_.$n,{tooltip:(0,c.t)("fig_feed.reset.tooltip"),tooltipMaxWidth:200,caret:"none",onClick:l,recordingKey:"teamFeedResetPreview"},a.createElement("span",null,(0,c.t)("fig_feed.reset")))))}},160156:(e,r,n)=>{n.d(r,{K1:()=>O,Zo:()=>W,xT:()=>G});var a=n(411855),i=n(67151),o=n(629019),s=n.n(o),l=n(729074),c=n(568214),d=n(988652),u=n(768137),m=n(135876),p=n(163023),h=n(939863),_=n(553015),g=n(28588),f=n(103271),E=n(498606),y=n(126674),b=n(406158),I=n(987669),T=n(421689),v=n(441883),S=n(36019),w=n(151146),A=n(501191),N=n(169852),C=n(95917),L=n(36129);function O(e){let r;switch(e.type){case f.cM.NODE:r=e.nodeId;break;case f.cM.IMAGE:r=e.url;break;case f.cM.VIDEO:r=e.path;break;case f.cM.PROTOTYPE:r=e.startingNodeId;break;default:throw Error("unexpected content item type")}return`${e.type}:${r}`}function R(e){let[r,n]=a.useState(!e.isThumbnail&&!e.usesPreviewImage);if(a.useEffect(()=>{if(!e.imgUrl)return;let r=new Image;r.src=e.imgUrl,r.onload=()=>{let e=r.width/r.height;n(r=>r&&Math.abs(e-T.dp)>.01)}},[e.imgUrl]),null===e.imgUrl)return a.createElement("div",null,(0,h.t)("fig_feed.could_not_load_preview_image"));let i=e.isThumbnail&&e.thumbnailUrl?e.thumbnailUrl:e.imgUrl;return a.createElement(a.Fragment,null,e.showPreviewFacade&&a.createElement("div",{className:w.Hq},a.createElement(u.pz,{onClick:e.onUpdatePreviewImage},(0,h.t)("fig_feed.update_preview_image"))),a.createElement("img",{src:i,alt:(0,h.t)("fig_feed.thumbnail_alt_text"),draggable:!1,className:s()(w.tv,e.isThumbnail&&w.Jq,r&&w.Pd)}),e.isThumbnail?null:"image/gif"===e.mediaType?a.createElement("div",{className:w.mB},(0,h.t)("fig_feed.gif")):null)}function P(e){let r=!!e.editPreviewOptions;return a.createElement("div",{className:w.yE},e.contentItems.map((n,i)=>{let o;return e.editPreviewOptions?.applyToAllCallback&&(o=r=>e.editPreviewOptions.applyToAllCallback(r,O(n))),a.createElement("div",{key:i,className:s()({[w.Xt]:!0,[w.sD]:i===e.selectedIdx})},a.createElement(T.DH,{key:`details::${n.image_url}`,imageSrc:n.image_url,shouldZoomToStart:!1,shouldWheelPan:!0,showEditPreviewControls:r,setContentPreview:i===e.selectedIdx?e.editPreviewOptions?.setContentPreview:void 0,initialSnapshotState:e.editPreviewOptions?.initialSnapshotStates?.[O(n)],disableReset:!!e.editPreviewOptions?.disableReset,resetSnapshotState:e.editPreviewOptions?.selectedContentResetSnapshotState,pageBackgroundColor:e.editPreviewOptions?.pageBackgroundColor||n.backgroundColor&&(0,c.H0)(n.backgroundColor)||e.pageBackgroundColor&&(0,c.H0)(e.pageBackgroundColor)||void 0,applyToAllCallback:o,imageScale:r?1:void 0,enableZoomKeyControls:i===e.selectedIdx&&(e.source===y.Zp.DETAIL_MODAL||r),enableSnapToGuidelines:r,enableZoomControls:e.source===y.Zp.DETAIL_MODAL}))}))}function D(e){return a.createElement(v.D,{item:e.prototypeContent})}function k(e){let r=!!e.editPreviewOptions;return a.createElement(T.DH,{key:`details::${e.imageContent.url}`,imageSrc:e.imageContent.url,shouldZoomToStart:!1,shouldWheelPan:!0,showEditPreviewControls:r,setContentPreview:e.editPreviewOptions?.setContentPreview,initialSnapshotState:e.editPreviewOptions?.initialSnapshotStates?.[O(e.imageContent)],disableReset:!!e.editPreviewOptions?.disableReset,resetSnapshotState:e.editPreviewOptions?.selectedContentResetSnapshotState,applyToAllCallback:e.editPreviewOptions?.applyToAllCallback?r=>e.editPreviewOptions.applyToAllCallback(r,O(e.imageContent)):void 0,pageBackgroundColor:e.editPreviewOptions?.pageBackgroundColor||e.imageContent.backgroundColor&&(0,c.H0)(e.imageContent.backgroundColor)||e.pageBackgroundColor&&(0,c.H0)(e.pageBackgroundColor)||void 0,imageScale:1,enableZoomKeyControls:e.source===y.Zp.DETAIL_MODAL||r,enableSnapToGuidelines:r,enableZoomControls:e.source===y.Zp.DETAIL_MODAL})}function M(e){let r=(0,S.jI)(e.feedPostUuid,e.videoContent.path,e.source);return a.createElement(S.l0,{id:r,videoContent:e.videoContent,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,source:e.source})}function F(e){return e.isThumbnail?a.createElement("div",null,(0,h.tx)("fig_feed.video")):a.createElement("div",null,(0,h.tx)("fig_feed.transcode_after_submit"))}function x(e){if(g.cU.includes(e.videoContent.mediaType)&&""===e.videoContent.videoFileUuid)return a.createElement(F,{isThumbnail:e.isThumbnail});if(e.isThumbnail&&e.videoContent.coverImage)return a.createElement(R,{imgUrl:e.videoContent.coverImage,isThumbnail:!0});let r=(0,S.jI)(e.feedPostUuid,e.videoContent.path,e.source);return a.createElement(S.l0,{id:r,videoContent:e.videoContent,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source})}function U(e){return a.createElement(a.Fragment,null,a.createElement(m.x,{isLoading:!e.content.imageUrl},()=>a.createElement(R,{imgUrl:e.content.imageUrl,isThumbnail:e.isThumbnail})),!e.isThumbnail&&a.createElement("div",{className:w.mB},(0,h.tx)("fig_feed.prototype_badge")))}function B(e){let r=e.contentItems[e.selectedIdx];switch(r.type){case f.cM.NODE:return a.createElement(P,{selectedIdx:e.selectedIdx,contentItems:e.contentItems,editPreviewOptions:e.editPreviewOptions,pageBackgroundColor:e.pageBackgroundColor,source:e.source});case f.cM.IMAGE:return a.createElement(k,{imageContent:r,source:e.source,editPreviewOptions:e.editPreviewOptions,pageBackgroundColor:e.pageBackgroundColor});case f.cM.VIDEO:return a.createElement(M,{videoContent:r,isThumbnail:!1,feedPostUuid:e.feedPostUuid,source:e.source});case f.cM.PROTOTYPE:return a.createElement(D,{prototypeContent:r});default:(0,i.xb)(r)}}function V(e){switch(e.content.type){case f.cM.NODE:let r=e.content,n=r.mediumImageUrl??r.preview_image_url??r.image_url,o=r.preview_image_url??r.image_url;return a.createElement(m.x,{isLoading:!!r.isLoading},()=>a.createElement(R,{imgUrl:e.isEditing?o:n,usesPreviewImage:!!r.preview_image_url,isThumbnail:e.isThumbnail,thumbnailUrl:e.isEditing?o:r.thumbnailUrl,showPreviewFacade:e.showPreviewFacade,onUpdatePreviewImage:e.onUpdatePreviewImage}));case f.cM.IMAGE:let s=e.content.mediumImageUrl??e.content.preview_image_url??e.content.url,l=e.content.preview_image_url??e.content.url;return a.createElement(R,{imgUrl:e.isEditing?l:s,isThumbnail:e.isThumbnail,usesPreviewImage:!!e.content.preview_image_url,mediaType:e.content.mediaType,thumbnailUrl:e.isEditing?l:e.content.thumbnailUrl,showPreviewFacade:e.showPreviewFacade,onUpdatePreviewImage:e.onUpdatePreviewImage});case f.cM.VIDEO:return a.createElement(x,{videoContent:e.content,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source});case f.cM.PROTOTYPE:return a.createElement(U,{content:e.content,isThumbnail:e.isThumbnail});default:(0,i.xb)(e.content)}}function G(e){let r=!!e.editPreviewOptions,n=e.contentItems.length>1||r,{selectedContentIdx:i,pageBackgroundColor:o,setSelectedContentIdx:l,contentItems:u,onContentHover:_}=e,[g,y]=(0,d.M)();a.useEffect(()=>{_?.(y)},[y,_]);let I=a.useMemo(()=>u[i],[u,i]),T=a.useMemo(()=>n?a.createElement(H,{direction:"horizontal",contentItems:u,selectedIdx:i,setSelectedIdx:l,pageBackgroundColor:e.pageBackgroundColor,feedPostUuid:e.feedPostUuid,canAddContent:!1}):null,[n,u,i,l,e.pageBackgroundColor,e.feedPostUuid]);e.editPreviewOptions&&I&&"node"===I.type&&I.backgroundColor&&(e.editPreviewOptions.pageBackgroundColor=(0,c.H0)(I.backgroundColor)??void 0);let{openEditPreviewModalCallback:v,deleteSelectedItemCallback:S}=e,[A,C]=a.useState(!1),L=a.useMemo(()=>{if(!v&&!S||!A||!I)return null;let e=n?w.IN:w.r$;return a.createElement("div",{className:e},I&&(0,f.aT)(I)&&v&&a.createElement("div",null,a.createElement("button",{onClick:v,className:w.nY},(0,h.tx)("fig_feed.edit_preview"))),S&&a.createElement(p.B,{svg:N.A,className:w.j5,onClick:S,autosize:!0,"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,h.t)("fig_feed.delete"),dataTestId:"delete-content-item"}))},[A,I,n,v,S]);return a.createElement("div",{className:s()(w.qG,r&&w.Mm)},a.createElement("div",{ref:g,className:n&&!r?w.Uz:w.xs,style:{backgroundColor:(0,b.mz)(I,e.pageBackgroundColor)},onMouseDown:e.onSelectedTileMouseDown,role:"button",tabIndex:0,onPointerEnter:()=>C(!0),onPointerLeave:()=>C(!1),"data-testid":"feed-post-content-section"},L,a.createElement(m.x,{isLoading:!I},()=>e.staticContent?a.createElement(V,{content:I,isThumbnail:!1,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source}):a.createElement(B,{contentItems:u.filter(e=>null!==e),selectedIdx:i,editPreviewOptions:e.editPreviewOptions,feedPostUuid:e.feedPostUuid,pageBackgroundColor:o,source:e.source}))),T)}function H(e){let r=a.useRef(null);a.useEffect(()=>{let n=r.current,a=r.current?.children[e.selectedIdx];if(!n||!a)return;let i=n?.getBoundingClientRect();i?.top>=0&&i?.left>=0&&i?.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i?.right<=(window.innerWidth||document.documentElement.clientWidth)&&a.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},[e.direction,e.selectedIdx]);let n=(0,S.pN)(),{scrollToItem:i,onReorderCallback:o,setSelectedIdx:c,deleteItem:d}=e,[u,m]=a.useState(null),h=e.thumbnailType||"wide",g=a.useCallback((r,o,l)=>{let p=s()(w.iD,l&&w.Ut,"small"===h&&w.kL,"wide"===h&&w.Wr);return a.createElement("div",{className:p,onMouseDown:()=>{n(e.feedPostUuid),i?.(o),c?.(o)},onPointerEnter:()=>m(o),onPointerLeave:()=>m(null),role:"button",tabIndex:0,style:{backgroundColor:(0,b.mz)(r,e.pageBackgroundColor)},"data-testid":`content-item-${o}`},a.createElement(V,{content:r,isThumbnail:!0,isEditing:e.isEditing}),d&&o===u&&a.createElement("div",{className:w.nx},a.createElement("div",{className:w.fy,onClick:e=>{e.stopPropagation(),d(o)},role:"button",tabIndex:0},a.createElement(I.X,null))))},[e.pageBackgroundColor,e.feedPostUuid,h,e.isEditing,u,n,i,c,d]),f=r=>{if("horizontal"!==e.direction)return null;let n=e.selectedIdx===("left"===r?0:e.contentItems.length-1);return a.createElement(_.$,{onMouseDown:()=>{let n=(e.selectedIdx+("left"===r?-1:1)+e.contentItems.length)%e.contentItems.length;c?.(n)},icon:"left"===r?"chevron-left-32":"chevron-right-32",variant:"text",disabled:n})},E=s()(w.sm,"horizontal"===e.direction?w.d9:w.b1);if(o)return a.createElement("div",{className:E},a.createElement(l._.Group,{axis:"vertical"===e.direction?"y":"x",onReorder:o,values:e.contentItems,className:s()(w.M2,"horizontal"===e.direction?w.AA:w.h0),role:"button",tabIndex:0,ref:r},e.contentItems.map((r,n)=>a.createElement(l._.Item,{value:r,id:O(r),key:O(r),translate:"no"},g(r,n,!(e.canAddContent&&e.isAddingContent)&&n===e.selectedIdx))),e.canAddContent&&a.createElement("div",{className:s()(w.iD,"small"===e.thumbnailType&&w.kL,"wide"===e.thumbnailType&&w.Wr,e.isAddingContent?w.ad:w.WW),onMouseDown:e.setAddingActive,role:"button",tabIndex:0},a.createElement(p.B,{svg:A.A}))));{let n=s()(w.M2,"horizontal"===e.direction?w.n2:w.h0);return a.createElement("div",{className:E},f("left"),a.createElement("div",{className:n,ref:r},e.contentItems.map((r,n)=>a.createElement(a.Fragment,{key:n},g(r,n,n===e.selectedIdx)))),f("right"))}}function W(e){let r=e.contentItems[e.selectedIdx],n=r&&(0,f.aT)(r),{onReorderCallback:i,deleteItemAtIdx:o,setSelectedIdx:l,onFileInputChange:c,setContentPreview:d,openPostFromFileModal:u}=e,[_,g]=a.useState(0===e.contentItems.length);a.useEffect(()=>{0===e.contentItems.length?g(!0):g(!1)},[e.contentItems.length]);let y=e.contentItems.length>=1||n,I=a.useCallback(()=>{g(!0)},[]),v=a.useCallback(e=>{l(e),g(!1)},[l]),[S,A]=a.useState(!1),R=a.useMemo(()=>S&&r?a.createElement("div",{className:w.r$},o&&a.createElement(p.B,{svg:N.A,className:w.j5,onClick:()=>o(e.selectedIdx),autosize:!0,"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,h.t)("fig_feed.delete"),dataTestId:"delete-content-item"})):null,[r,S,e.selectedIdx,o]),P=a.useRef(null),D=(e,r,n,i)=>a.createElement("div",{className:w.c9,onClick:i,role:"button",tabIndex:0},a.createElement(p.B,{svg:n}),a.createElement("div",{className:w.LO},a.createElement("div",{className:w.Gq},e),r)),k=a.useCallback((n,a,i)=>{let o=O(r);r&&o&&!(0,T.L$)(a,e.snapshotStates[o])&&d(o,n,a)},[r,e.snapshotStates,d]),M=(r,n)=>{k(r,n,e.selectedIdx)},[F,x]=a.useState({}),U=a.useCallback(()=>{x(e=>({...e,[O(r)]:!0}))},[r]);return a.createElement("div",null,(()=>{if(_){let r=null===e.attachedFile?(0,h.t)("fig_feed.add_frames"):"whiteboard"===e.attachedFile.editor_type?(0,h.t)("fig_feed.share_something_from_figjam"):(0,h.t)("fig_feed.add_frames_from_this_figma_file");return a.createElement("div",{className:s()(w.Er,y&&w.QX)},a.createElement("div",{className:s()(w.hM,e.dragging&&w.cB)},D((0,h.t)("fig_feed.choose_frames"),r,C.A,u),a.createElement("form",null,a.createElement("input",{type:"file",name:"fileInput",id:"fileInput",accept:f.bB.join(","),ref:P,onChange:c(P),multiple:!0,className:w.Fg}),a.createElement("label",{htmlFor:"fileInput"},D((0,h.t)("fig_feed.upload_files"),(0,h.t)("fig_feed.add_images_or_videos"),L.A)))))}return a.createElement("div",{className:s()(w.Er,y&&w.QX),style:{backgroundColor:(0,b.mz)(r,e.pageBackgroundColor)},role:"button",tabIndex:0,onPointerEnter:()=>A(!0),onPointerLeave:()=>A(!1)},R,a.createElement(m.x,{isLoading:!r},()=>(0,f.aT)(r)&&("edit"===e.mode&&(F[O(r)]||!r.shouldBlockEditPreview)||"create"===e.mode)?a.createElement(B,{contentItems:e.contentItems,selectedIdx:e.selectedIdx,editPreviewOptions:{setContentPreview:M,initialSnapshotStates:e.snapshotStates,disableReset:!0},feedPostUuid:e.feedPostUuid,pageBackgroundColor:e.pageBackgroundColor,source:e.source}):a.createElement(V,{content:r,isThumbnail:!1,feedPostUuid:e.feedPostUuid,source:e.source,showPreviewFacade:"edit"===e.mode&&(0,f.aT)(r)&&r.shouldBlockEditPreview,onUpdatePreviewImage:"edit"===e.mode?U:void 0})),e.dragging&&a.createElement("div",{className:w.c$},a.createElement("div",{className:w.W9})))})(),y?a.createElement(H,{direction:"horizontal",thumbnailType:"wide",contentItems:e.contentItems,onReorderCallback:i,deleteItem:o,selectedIdx:e.selectedIdx,setSelectedIdx:v,pageBackgroundColor:e.pageBackgroundColor,feedPostUuid:e.feedPostUuid,canAddContent:e.contentItems.length<f.e3,isAddingContent:_,setAddingActive:I,isEditing:!0}):null)}},52678:(e,r,n)=>{n.d(r,{K:()=>ei});var a=n(411855),i=n(188507),o=n(67151),s=n(629019),l=n.n(s),c=n(776250),d=n(737947),u=n(358145),m=n(498750),p=n(503457),h=n(915440),_=n(27087),g=n(62342),f=n(355819),E=n(163023),y=n(47506),b=n(881388),I=n(939863),T=n(67294),v=n(975350),S=n(738269),w=n(662275),A=n(569172),N=n(654034),C=n(692630),L=n(355513),O=n(694687),R=n(611978),P=n(860178),D=n(279453),k=n(531827),M=n(103271),F=n(498606),x=n(819117),U=n(237870),B=n(402609),V=n(421422),G=n(727236),H=n(182876),W=n(400333),K=n(488578),Y=n(126674),$=n(679736),j=n(160156),z=n(47026),q=n(339617),X=n(531398),J=n(385121),Z=n(430811),Q=n(70080),ee=n(412141),et=n(40674),er=n(893984),en=n(630834);function ea(){return a.createElement("div",null,(0,I.t)("fig_feed.post_dne"))}let ei=(0,U.Ju)(function(e){let r=(0,i.wA)(),n=(0,O.dq)(),s=(0,R._6)();a.useEffect(()=>{"teamFeed"!==s.view&&"user"!==s.view&&("fullscreen"===s.view&&e.inFileView||r(w.Ce()))},[r,s,e.inFileView]);let l=a.useRef({selectedView:s,inFileView:e.inFileView});a.useEffect(()=>{l.current={selectedView:s,inFileView:e.inFileView}},[e.inFileView,s]),a.useEffect(()=>()=>{l.current.inFileView||"teamFeed"!==l.current.selectedView.view||r(S.$T({...l.current.selectedView,postUuid:void 0}))},[r]);let p=a.useRef(!1),g=a.useCallback(r=>{p.current||!r||e.autofocusCommentInput||(r.focus(),p.current=!0)},[e.autofocusCommentInput]),f=(0,u.ZC)(e.postUuid);a.useEffect(()=>{n&&(e.inFileView||f===e.postUuid||"teamFeed"!==s.view||(p.current=!1,d.Ay.replace((0,Y.Kc)(n,{uuid:e.postUuid}))))},[f,e.postUuid,n,e.inFileView,s]);let E=(0,h.Rs)(D.FHz,{publicUuid:e.postUuid});a.useEffect(()=>{!e.inFileView&&E.data?.feedPost?.title&&(0,L.hL)(E.data.feedPost.title)},[e.inFileView,E.data]),a.useEffect(()=>((0,c.sx)("Team Feed Post Details View Visited",{postUuid:e.postUuid}),()=>{(0,c.sx)("Team Feed Post Closed",{postUuid:e.postUuid})}),[e.postUuid]),a.useEffect(()=>{_.Ay.post(`/api/feed_posts/${e.postUuid}/mark_viewed`)},[e.postUuid]);let[T,v]=a.useState(0);a.useEffect(()=>{v(e.selectedContentIdx||0)},[e.postUuid,e.selectedContentIdx]);let A=a.useMemo(()=>E.data?.feedPost?E.data.feedPost.content.map(e=>JSON.parse(e)):[],[E.data]),N=A.length,{requestToOpenPostByFeedIdx:C}=e,P=a.useCallback(r=>{r.keyCode===m.Uz.LEFT_ARROW?0===T?C&&void 0!==e.feedIdx&&C(e.feedIdx-1):v(T-1):r.keyCode===m.Uz.RIGHT_ARROW&&(T===N-1?C&&void 0!==e.feedIdx&&C(e.feedIdx+1):v(T+1))},[T,N,C,e.feedIdx]),[k,F]=a.useState(!0),x=a.useCallback(()=>F(e=>!e),[]),[U,H]=a.useState(!1);a.useEffect(()=>{!U&&"loaded"===E.status&&A[T]&&(0,M.Dr)(A[T])&&((0,y.YQ)({id:V.X}),H(!0))},[E.status,U,A,T]);let W=E.data?.feedPost||e.initialPreloadedPost;if(!W)switch(E.status){case"errors":return a.createElement(ea,null);case"loading":case"disabled":return a.createElement(K.aF,{className:Q.ZA,size:"any"});case"loaded":return r(b.s.error((0,I.t)("fig_feed.post_dne"))),r(w.Ce()),null;default:(0,o.xb)(E)}return a.createElement(a.Fragment,null,a.createElement(K.aF,{className:Q.ZA,size:"any"},a.createElement("div",{className:Q.Zp,role:"listbox",tabIndex:0,onKeyDown:P,ref:g},a.createElement("div",{className:Q.kL,"data-onboarding-key":G.O},a.createElement("div",{className:k?Q.hQ:Q.MZ},a.createElement(j.xT,{contentItems:A,staticContent:!1,selectedContentIdx:T,setSelectedContentIdx:r=>{v(r),e.onSetSelectedContentIdx?.(r)},pageBackgroundColor:W.backgroundColor??void 0,feedPostUuid:e.postUuid,source:Y.Zp.DETAIL_MODAL})),a.createElement(eo,{feedPost:W,contentItems:A,autofocusCommentInput:!!e.autofocusCommentInput,inFileView:e.inFileView,onSidebarToggle:x,show:k})))),a.createElement(B.p,null,a.createElement(G.b,null)))},C.E,U.ZU.YES);function eo(e){let r=(0,i.wA)(),n=(0,P.iZ)(),o=(0,O.dq)(),s=a.useCallback(()=>{r(w.Ce())},[r]),{fileData:l,fileIcon:c,fileLoaded:d,openFile:u}=(0,Y.rS)(e.feedPost.publicUuid,e.contentItems,e.feedPost.fileKey),m=a.useCallback(()=>{let n=e.inFileView&&e.feedPost.fileKey||void 0;r((0,w.to)({type:(0,$.t1)(),data:{preloadedFeedPost:e.feedPost,entryPoint:e.inFileView?$.M2.FILE:$.M2.FEED,lockedFileKey:n}}))},[r,e.feedPost,e.inFileView]),p=(0,Y.DG)(e.feedPost.publicUuid,Y.dy.DETAIL);if(!o||!n)return null;let h=a.createElement(a.Fragment,null,a.createElement("div",{className:Q.Si},a.createElement(Z.Wu,{feedPost:e.feedPost,source:Y.Zp.DETAIL_MODAL,onEditClick:m})),a.createElement("button",{onClick:p,"data-tooltip-type":F.Ib.TEXT,"data-tooltip":(0,I.t)("fig_feed.copy_link_to_post")},a.createElement(E.B,{svg:er.A,className:Q.Gp})),a.createElement("button",{onClick:e.onSidebarToggle},a.createElement(E.B,{svg:et.A,className:Q.Gp})),a.createElement("button",{onClick:s},a.createElement(E.B,{svg:en.default,className:Q.Nk})));if(!e.show)return a.createElement("div",{className:Q.SY},h);let _=a.createElement("div",{className:Q.N1},a.createElement("div",{className:Q.qd},(0,I.tx)("fig_feed.details")),a.createElement("div",{className:Q.IE,"data-testid":"feed-modal-open-file"},h)),f=a.createElement("div",{className:Q.op},a.createElement("div",{className:Q.mY},a.createElement(q.B,{user:e.feedPost.creator,date:e.feedPost.createdAt,size:T.Pf.MEDIUM,shortDate:!1})),a.createElement(el,{feedPost:e.feedPost,currentOrgId:o,currentUser:n}),d&&!e.inFileView&&a.createElement("button",{className:Q.XE,onClick:e.inFileView?void 0:u},(0,I.tx)("fig_feed.from_file",{fileComponent:a.createElement(a.Fragment,null,a.createElement(g.oS,{className:Q.Wv,type:c,size:g.LE.SMALL}),a.createElement("span",{className:Q.q4},l.name))})),a.createElement("div",{className:Q.E_},a.createElement(X.Q$,{type:X.Us.FULL,source:X.zY.DETAIL_POST,postUuid:e.feedPost.publicUuid,postId:e.feedPost.id,feedReactions:e.feedPost.reactions})));return a.createElement("div",{className:Q.HP},_,a.createElement(es,{postInfo:f,comments:e.feedPost.comments,postUuid:e.feedPost.publicUuid,currentUser:n,currentOrgId:o,autofocusCommentInput:e.autofocusCommentInput}))}function es(e){let r=(0,i.wA)(),n=a.useRef(null),o=a.useRef(null),[s,l]=a.useState(!1),c=a.useCallback(r=>{0===r.intersectionRatio&&e.comments.length>0?l(!0):l(!1)},[e.comments.length]);(0,H.g)(o,c,{threshold:[0,1]});let d=a.useCallback(()=>{n.current&&n.current.scrollToBottom()},[]),u=e.comments.sort((e,r)=>e.createdAt.getTime()-r.createdAt.getTime()),[m,h]=a.useState(e.comments.length);a.useEffect(()=>{let r=m<e.comments.length;r&&h(e.comments.length);let n=e.comments[e.comments.length-1];r&&n.user.id===e.currentUser.id&&d()},[m,e.comments,e.currentUser,d]);let[_,g]=a.useState([]),y=(0,i.d4)(e=>e.comments.newComment),b=a.useCallback(()=>{r(A.gX({postUuid:e.postUuid,messageMeta:_,attachmentIds:Object.keys(y.attachments)})),g([]),r(v.$M({resetStatusOnly:!1}))},[r,e.postUuid,_,y]),S=a.useMemo(()=>({library:new k.M8(e.currentOrgId,e.postUuid)}),[e.currentOrgId,e.postUuid]),w=a.useCallback(e=>{r(v.nb({attachmentId:e.id,attachment:e}))},[r]),C=a.useCallback((e,n)=>{r(v.nb({attachmentId:e,attachment:null})),n?n.then(()=>x.J.delete(e)):x.J.delete(e)},[r]);return a.createElement("div",{className:Q.ty},a.createElement(f.P,{innerClassName:Q.qy,useBottomPinning:!0,ref:n},e.postInfo,a.createElement("div",{ref:o,className:Q.Ai},u.map(r=>a.createElement(z.i,{key:r.id,commentId:r.id,commentUuid:r.uuid||"",createdAt:r.createdAt,commentUser:r.user,reactions:r.reactions,messageMeta:(0,N.o8)(r.messageMeta),user:e.currentUser,currentOrgId:e.currentOrgId,mentionables:S,attachments:r.attachments}))),s&&a.createElement("div",{className:Q.cm,onClick:d,role:"button",tabIndex:0},a.createElement(E.B,{svg:ee.A,className:Q.mL}),(0,I.tx)("fig_feed.num_comments",{numComments:u.length}))),a.createElement("div",{className:Q.kG},a.createElement("div",{className:Q.gK},a.createElement(T.H8,{user:e.currentUser,size:T.Pf.MEDIUM})),a.createElement(J.o,{fallback:null,errorFallback:p.H4.NONE,user:e.currentUser,currentOrgId:e.currentOrgId,autofocus:e.autofocusCommentInput,onSubmit:b,hideSubmitButton:!1,mentionables:S,composerContainerClass:Q.DA,editableTypeaheadClass:Q.OX,messageContent:_,updateMessage:g,editingExistingComment:!1,updateAttachment:w,deleteAttachment:C,attachments:Object.values(y.attachments)})))}function el(e){let r=a.useMemo(()=>(0,N.o8)(e.feedPost.descriptionMeta),[e.feedPost.descriptionMeta]);return a.createElement("div",{role:"textbox",tabIndex:0,className:Q.tL},a.createElement("div",{className:Q.pT},e.feedPost.title),a.createElement(W.HH,{messageMeta:r,commentId:e.feedPost.id,className:l()(Q.gG)}))}},339617:(e,r,n)=>{n.d(r,{A:()=>g,B:()=>_});var a=n(411855),i=n(188507),o=n(629019),s=n.n(o),l=n(210954),c=n(564577),d=n(67294),u=n(738269),m=n(798099),p=n(589640),h=n(681807);function _(e){let r=e.date&&a.createElement(c.h1,{date:e.date,style:e.shortDate?"short":void 0,capitalize:!0,key:"from-now"}),n=[a.createElement("div",{key:"from-now",onMouseDown:e.onTileMouseDown,role:"button",tabIndex:0,className:s()(e.onTileMouseDown&&h.WJ,h.PI)},r)];return a.createElement("div",{className:h.ME},a.createElement(g,{user:e.user,size:e.size,noAvatar:e.noAvatar,noHandle:e.noHandle,appendToHandle:n}))}function g(e){let r=(0,i.wA)(),n=a.useCallback(n=>{n.stopPropagation(),e.user.id&&r(u.$T({view:"user",userId:e.user.id,userViewTab:p.o.INTERNAL_PROFILE_POSTS}))},[r,e.user.id]),o=e.appendToHandle||!1===e.noHandle;return a.createElement("div",{className:h.ME},!e.noAvatar&&a.createElement(l.N,{onClick:n,trusted:!0,onMouseDown:m.dG},a.createElement(d.H8,{user:e.user,size:e.size??d.Pf.LARGE})),o&&a.createElement("div",{className:h.Qs},!e.noHandle&&a.createElement(l.N,{className:h.TK,onClick:n,trusted:!0},a.createElement("div",{className:h.p$},e.user.handle)),e.appendToHandle))}},531398:(e,r,n)=>{n.d(r,{Q$:()=>g,Us:()=>h,nn:()=>f,zY:()=>_});var a=n(411855),i=n(188507),o=n(629019),s=n.n(o),l=n(569172),c=n(318812),d=n(860178),u=n(336174),m=n(884101),p=n(114292),h=(e=>(e[e.FULL=0]="FULL",e[e.ADD_ONLY=1]="ADD_ONLY",e))(h||{}),_=(e=>(e[e.TILE_CONTENT=0]="TILE_CONTENT",e[e.TILE_POST=1]="TILE_POST",e[e.DETAIL_POST=2]="DETAIL_POST",e[e.DETAIL_COMMENT_NO_REACTION=3]="DETAIL_COMMENT_NO_REACTION",e[e.DETAIL_COMMENT_WITH_REACTION=4]="DETAIL_COMMENT_WITH_REACTION",e[e.FILE_POPOVER=5]="FILE_POPOVER",e))(_||{});function g(e){let r=(0,i.wA)(),n=(0,d.iZ)(),{existingReactionIdForCurrentUser:o}=b(e.feedReactions,n),s=a.useCallback(({emoji:n,addOnly:a})=>{let i=o(n);i?a||r(l.Oy({feedPostUuid:e.postUuid,emoji:n,reactionId:i})):r(l.EF({feedPostUuid:e.postUuid,feedPostId:e.postId,emoji:n}))},[r,o,e.postUuid,e.postId]);return a.createElement(E,{type:e.type,source:e.source,hideAddReactionButton:e.hideAddReactionButton,prependToList:e.prependToList,toggleReaction:s,feedResource:{type:"post",id:e.postUuid},feedReactions:e.feedReactions})}function f(e){let r=(0,i.wA)(),n=(0,d.iZ)(),{existingReactionIdForCurrentUser:o}=b(e.feedReactions,n),s=a.useCallback(({emoji:n,addOnly:a})=>{let i=o(n);i?a||r(l.t9({commentUuid:e.commentUuid,emoji:n,reactionId:i})):r(l.FJ({commentUuid:e.commentUuid,commentId:e.commentId,emoji:n}))},[r,o,e.commentUuid,e.commentId]);return a.createElement(E,{type:e.type,source:e.source,hideAddReactionButton:e.hideAddReactionButton,prependToList:e.prependToList,toggleReaction:s,feedResource:{type:"comment",id:e.commentUuid},feedReactions:e.feedReactions})}function E(e){let r=(0,d.iZ)(),{toggleReaction:n}=e,{reactionsWithSelected:i}=b(e.feedReactions,r),o=a.useCallback((e,r)=>{r.stopPropagation(),n({emoji:e.emoji,addOnly:!1})},[n]),s=a.useCallback(e=>{n({emoji:e,addOnly:!0})},[n]),l=a.createElement(y,{type:e.type,feedResource:e.feedResource,source:e.source,onAddReaction:s,hideAddReactionButton:e.hideAddReactionButton});return 1===e.type?l:a.createElement("div",{className:p.KD},a.createElement(m.Kb,{reactions:i,collapseOverflow:!1,onClickExisting:o,prependToList:e.prependToList},l))}function y(e){let r=a.useRef(null),{isReactionPickerVisible:n,toggleReactionPicker:i,emojiPicker:o}=T(e.feedResource,e.source,r,e.onAddReaction);return e.hideAddReactionButton&&!n?a.createElement("div",{className:p.$S}):a.createElement(a.Fragment,null,a.createElement("div",{ref:r,className:s()(1===e.type?p.D5:p.HL)},a.createElement(m.ny,{onClick:i,selected:n,styleClassName:p.$S,selectedStyleClassName:p.Qi})),n&&o)}let b=(e,r)=>{let n=a.useMemo(()=>{let n={};if(!r)return n;for(let a of e)a.user.id===r.id&&(n[a.emoji]=a.id);return n},[e,r]),i=a.useCallback(e=>n[e],[n]);return{reactionsWithSelected:a.useMemo(()=>{let r={};for(let n of e){let{emoji:e,user:a,createdAt:o}=n;r[e]||(r[e]={emoji:e,users:[],selected:!!i(e),createdAt:o.getTime(),skinTonesToUsers:{}}),r[e].createdAt=Math.min(r[e].createdAt,o.getTime()),r[e].users.push({handle:a.handle,id:a.id,img_url:a.imgUrl})}return Object.values(r).sort((e,r)=>e.createdAt-r.createdAt||e.emoji.localeCompare(r.emoji))},[e,i]),existingReactionIdForCurrentUser:i}},I=(e,r)=>`FEED_TILE_EMOJI_PICKER-${e}${r?`-${r}`:null}`,T=(e,r,n,i)=>{let o=(0,c.BK)(I(r,e?.id)),s=a.useCallback(e=>{i(e.shortcodes),o.hide()},[o,i]),l=n.current&&a.createElement(u._,{onInsert:s,onCancel:o.hide,targetRect:n.current.getBoundingClientRect()});return{isReactionPickerVisible:o.showing,toggleReactionPicker:o.toggle,emojiPicker:l}}},322615:(e,r,n)=>{n.d(r,{e:()=>w});var a=n(411855),i=n(188507),o=n(187134),s=n(629019),l=n.n(s),c=n(961747),d=n(860601),u=n(153234),m=n(715981),p=n(939863),h=n(226055),_=n(318812),g=n(498606),f=n(259494),E=n(467594),y=n(227795),b=n(289566),I=n(349307),T=n(179544),v=n(98285),S=n(539954);function w({recordingKey:e,currentZoom:r,Dropdown:n,...s}){let w=(0,i.wA)(),A=a.useRef(null),N=(0,_.BK)(s.dropdownId),[C,L]=a.useState(null),O=(0,h.GS)(),R=a.useCallback(()=>{L(A?.current?.getBoundingClientRect()||null)},[A]);a.useEffect(()=>(R(),c._.addListener(R),window.addEventListener("resize",R),()=>{c._.removeListener(R),window.removeEventListener("resize",R)}),[R]);let P=a.useCallback(()=>{R(),N.toggle({hasOwnEscKeyHandler:!1})},[N,R]),D=u.rf(u.Pt(e,"zoomButton"),"click",P),k=N.showing&&C&&a.createElement(n,{targetRect:C,showingZoomDropdown:N.showing,toggleZoomMenu:N.toggle,recordingKey:e}),M=!("canZoomIn"in s)||s.canZoomIn,F=!("canZoomOut"in s)||s.canZoomOut,x="onZoomIn"in s?s.onZoomIn:d.lQ,U="onZoomOut"in s?s.onZoomOut:d.lQ;return a.createElement("div",{className:b.sH},a.createElement(o.o,{eventListeners:["onClick"]},a.createElement(y.K0,{recordingKey:u.Pt(e,"zoomOutButton"),className:l()({[b.QO]:!0,[b.Sn]:F}),svg:I.A,fallbackSvg:T.A,disabled:!F,onClick:U,"data-tooltip-type":g.Ib.LOOKUP,"data-tooltip":"zoom-out"}),a.createElement(m.L,{ariaLabel:(0,p.t)("fullscreen.zoom_menu.zoom_view_options"),onClick:D,selected:N.showing,className:l()(b.LY,N.showing&&b.vu),onboardingKey:f.q,"data-tooltip-type":g.Ib.TEXT,"data-tooltip":(0,p.t)("fullscreen.zoom_menu.zoom_view_options")},a.createElement("div",{className:b.cm,"data-testid":"zoom-amount",ref:A},function(){let e=Math.round(r);return O?e.toString().length<5?`${e}%`:`${e}`:`${e}%`}()),a.createElement("div",{className:b.FH,ref:A},a.createElement(E.c,{dispatch:w,dropdownKey:"zoom-input-dropdown",showingDropdown:N.showing,dataTestId:"zoom-menu-chevron",className:N.showing?b.r4:b.Dn,svgContainerClassName:b.r2,toggleOnClick:!0}))),k,a.createElement(y.K0,{recordingKey:u.Pt(e,"zoomInButton"),className:l()({[b.sy]:!0,[b.Sn]:M}),svg:v.A,fallbackSvg:S.A,disabled:!M,onClick:x,"data-tooltip-type":g.Ib.LOOKUP,"data-tooltip":"zoom-in"})))}},430811:(e,r,n)=>{n.d(r,{Wu:()=>b});var a=n(411855),i=n(188507),o=n(776250),s=n(27087),l=n(268537),c=n(939863),d=n(662275),u=n(569172),m=n(963067),p=n(860178),h=n(237870),_=n(488578),g=n(665061);let f=(0,h.Ju)(function(e){let r=(0,c.tx)("fig_feed.delete_confirmation");return e.numComments&&e.numReactions?r=(0,c.tx)("fig_feed.delete_confirmation_with_comments_and_reactions",{numCommentsAndReactions:e.numComments+e.numReactions}):e.numComments?r=(0,c.tx)("fig_feed.delete_confirmation_with_comments",{numComments:e.numComments}):e.numReactions&&(r=(0,c.tx)("fig_feed.delete_confirmation_with_reactions",{numReactions:e.numReactions})),a.createElement(_.Rw,{destructive:!0,confirmationTitle:(0,c.tx)("fig_feed.delete_post"),confirmText:(0,c.tx)("fig_feed.delete"),onConfirm:e.onConfirm,popStack:!0},a.createElement("p",null,r))},"PostConfirmDeleteModal");var E=(e=>(e.USER="user_post_context_menu",e.SYSTEM="system_post_context_menu",e))(E||{});let y=e=>{let r=(0,p.iZ)(),n=(0,m.Yo)(),a=(r&&r.id===e.creator.id)??!1;return{canDelete:a,canAdminDelete:n?.isAdmin??!1,canEdit:a}};function b(e){let r=(0,i.wA)(),n=a.useCallback(()=>r(u.Y9()),[r]),{onEditClick:m,feedPost:p}=e,{canDelete:h,canAdminDelete:_,canEdit:E}=y(p),b=p.comments.length,T=p.reactions.length,v=a.useCallback(()=>{r((0,d.AS)()),s.Ay.del(`/api/feed_posts/post_uuid/${p.publicUuid}`).then(()=>{(0,o.sx)("Team Feed Post Deleted",{postUuid:p.publicUuid}),n()})},[r,p.publicUuid,n]),S=a.useCallback(()=>{r((0,d.to)({type:f,data:{onConfirm:v,numComments:b,numReactions:T},showModalsBeneath:!0}))},[r,v,b,T]);if(!h&&!_)return null;let w=h?(0,c.tx)("fig_feed.delete_ellipsis"):(0,c.tx)("fig_feed.delete_admin_ellipsis"),A=[!!E&&!!m&&a.createElement(l.c$,{key:"edit",onClick:m},(0,c.tx)("fig_feed.edit")),(!!h||!!_)&&a.createElement(l.c$,{key:"delete",onClick:S},w)];return a.createElement(g.V,{dropdownId:I("user_post_context_menu",e.feedPost.publicUuid,e.source),options:A,hideTarget:e.hideTarget,lean:"left",maxWidth:120})}let I=(e,r,n)=>e+r+n},694443:(e,r,n)=>{n.d(r,{n:()=>s});var a=n(411855),i=n(928491),o=n(134279);function s({team:e,size:r=o.P.MEDIUM,shape:n="SQUARE",fallbackDisplay:s=o.U.FIRST_CHARACTER,avatarSvg:l,fallbackSvg:c,svgSizeRatio:d,opacity:u}){return a.createElement(i.w7,{entity:e,size:r,hideFallbackInitial:s===o.U.HIDDEN,shape:n,avatarSvg:l,fallbackSvg:c,svgSizeRatio:d,opacity:u})}},971097:(e,r,n)=>{n.d(r,{$n:()=>g,$z:()=>f});var a=n(411855),i=n(629019),o=n.n(i),s=n(498750),l=n(860601),c=n(153234),d=n(551608),u=n(896474),m=n(809840),p=n(672517),h=n(226055),_=n(799227);let g=a.forwardRef(function({variant:e="secondary",disabled:r,onClick:n,onMouseDown:i,onKeyDown:p,icon:g,recordingKey:f,children:E,onFocus:y,onBlur:b,width:I="hug-contents","data-tooltip":T,"data-tooltip-type":v,"data-onboarding-key":S,"data-tooltip-show-above":w,"data-tooltip-max-width":A,dataTestId:N,ariaLabel:C},L){let O=(0,h.GS)(),R=c.rf(f,"click",n||l.lQ),P=f?R:n,D=c.rf(f,"mousedown",i||l.lQ),k=f?D:i,M=a.useCallback(e=>{d.j?.(e)||(p?.(e),e.keyCode===s.Uz.ESCAPE&&e.currentTarget.blur())},[p]);return a.createElement("button",{disabled:r,onClick:P,onMouseDown:k,onKeyDown:M,className:function({variant:e,width:r,children:n}){let a=[_.e];switch(e){case"primary":a.push(_.jr);break;case"destructive":a.push(_.xb);break;case"destructive-secondary":a.push(_.fQ);break;case"success":a.push(_.Ef);break;case"inverse":a.push(_.tt);break;case"text":a.push(_._d);break;case"toolbar-secondary":a.push(_.uv);break;case"brand-secondary":a.push(_.Ci);break;case"link-onbrand":a.push(_.RQ);break;default:a.push(_.vp)}switch(n||a.push(_.J0),r){case"hug-contents":a.push(_.PB);break;case"fill-parent":a.push(_.uC)}return o()(a)}({variant:e,width:I,children:E}),onFocus:y,onBlur:b,ref:L,"data-tooltip":T,"data-tooltip-type":v,"data-tooltip-show-above":w,"data-tooltip-max-width":A,"data-onboarding-key":S,"data-testid":N,"aria-label":C},g&&a.createElement("div",{className:_.zc},a.createElement(u.In,{icon:g})),E&&a.createElement(m.E,{fontSize:11,fontWeight:function(e,r){switch(e){case"primary":case"destructive":case"inverse":case"success":case"link-onbrand":return r?void 0:"medium";default:return"regular"}}(e,O),truncate:!0},E))});g.displayName="Button";let f=(0,p.tf)(e=>a.createElement(g,{...e}))},583765:(e,r,n)=>{n.d(r,{Ac:()=>Y,D2:()=>er,bJ:()=>k,dO:()=>J});var a=n(414507),i=n(299321),o=n(38329),s=n(966712),l=n(38580),c=n(776621),d=n(825871),u=n(931828),m=n(74930),p=n(178323),h=n(378260),_=n(582947),g=n(106757),f=n(335682),E=n(940596),y=n(888699),b=n(794321),I=n(258751),T=n(9904),v=n(912152),S=n(435898),w=n(350042),A=n(315944),N=n(430933),C=n(211519),L=n(342824),O=(e=>(e.NONE="none",e.TOP_BAR="top-bar",e.NEW_FILE="new-file",e))(O||{});let R="used_figjam_ai_generate",P="used_figjam_ai_generate_modal_v2",D=(0,l.eU)(!1),k=(0,l.eU)(null,(e,r)=>{r(D,!0),r($,void 0)}),M=(0,l.eU)(null,(e,r)=>{r(B),r(D,!1)}),F=(0,l.eU)(!1),x=(0,l.eU)(null,(e,r)=>{r(B),r(F,!0)}),U=(0,l.eU)(e=>e(D)?"top-bar":(e(I.P)===T.iH.TRUE||e(W))&&!e(F)&&e(y.l5)===b.fD.NONE?"new-file":"none"),B=(0,l.eU)(null,(e,r)=>{r(G),r(W,!1),r($,void 0)});(0,l.eU)(null,(e,r)=>{let n=e(U);"top-bar"===n?r(M):"new-file"===n&&r(x)});let V=(0,l.eU)(null,(e,r)=>{e(ee).abort(),r(ee,new AbortController),r(J,{status:A.c.NONE})});(0,l.eU)(null,(e,r)=>{r(B),r(F,!1),r(D,!1)});let G=(0,l.eU)(null,(e,r)=>{r(V),r(K,S.Nb.ENTRY),r(z,void 0),r(q,(0,C.Xi)()),r(X,i.VIy.BASIC)});(0,l.eU)(null,(e,r)=>{r(K,S.Nb.PROMPT_BUILDER)}),(0,E.Wh)(()=>(0,l.eU)(!1));let H=(0,l.eU)(S.Nb.ENTRY),W=(0,l.eU)(!1),K=(0,l.eU)(null,(e,r,n)=>{n===S.Nb.PROMPT_BUILDER&&r(W,!0),r(H,n)});(0,l.eU)(e=>e(H));let Y=(0,l.eU)(""),$=(0,l.eU)(void 0),j=(0,l.eU)(""),z=(0,l.eU)(void 0),q=(0,l.eU)((0,C.Xi)()),X=(0,l.eU)(i.VIy.BASIC),J=(0,l.eU)({status:A.c.NONE}),Z=(0,l.eU)(null),Q=(0,E.Wh)(()=>(0,l.eU)(!1));(0,l.eU)(null,(e,r,n)=>{r(Q,n)});let ee=(0,l.eU)(new AbortController),et=(0,l.eU)(null,async(e,r,{fileKey:n,prompt:i,stage:l,useCaseCategory:E,useCase:y,subtitle:b,entrypoint:I,jumpToNewLine:T,fromGenerateModalV2:O,pageNodeId:D})=>{let k;if(null===n&&(0,c.$D)(a.FigmaTeam.AI_PRODUCTIVITY,Error("No file key provided for FigJam AI Generate request")),!i)return{status:A.c.NONE};r(w.Mg,e=>e+1),e((0,_.r1)(R)).data||o.D.dispatch(u.b({[R]:!0}));let M=e((0,_.r1)(P)).data;O&&!M&&o.D.dispatch(u.b({[P]:!0})),r(V);let F=e(ee).signal,x={orgId:e(h._s),teamId:e(f.As)||null,fileKey:n,userId:e(g.kS)||null,trackingSessionId:(0,d.f)()};r(J,{status:A.c.LOADING}),r(z,E),r(K,S.Nb.PROMPT_BUILDER),r(Z,D);let U="board";try{globalThis.AI_DEBUG_XML&&(0,s.kc)().figjam_text_to_template_debug?U="board":(U=await (0,v.P)({prompt:i,signal:F,authInfo:x})||"board",(0,s.kc)().figjam_text_to_visual_timeline||"timeline"!==U||(U="gantt"),(0,S.$B)()||"mindmap"!==U||(U="board"))}catch(o){let e=(0,L.E$)(o,L.ez.GENERATE);return k={status:A.c.ERROR,type:U,errorMessage:e.message,trace:o.trace},(0,w.h5)(n,0,1,i,"inappropriate",l,I,E,y,b),(0,w.fK)(n,e.message),e.reportToSentry&&(0,c.$D)(a.FigmaTeam.AI_PRODUCTIVITY,o),r(J,k),k}E&&(E===S.es.FLOW_CHART?U="diagram":E===S.es.GANTT_CHART?U="gantt":E===S.es.ORG_CHART&&(U="orgchart"));let B=e(j),G=B&&i.includes(B)?B:void 0;r(j,""),(0,w.h5)(n,0,1,i,U,l,I,E,y,b,G);try{k=await (0,m.B)(()=>e(w.LX)||"null",n,p.T.AI,async()=>{let r;if("board"===U){let a=T||null,o=e(h._s);r=await (0,N.L)({prompt:i,signal:F,fileKey:n,authInfo:x,shouldJumpToNewLine:a,orgId:o})}else{let r=e(X),n=e(q),a=U;await (0,C.$D)({prompt:i,signal:F,visualType:a,authInfo:x,ganttColor:n,ganttType:r})}let a=e(w.LX);return(0,w.lx)(n,0,i,U,a),{status:A.c.SUCCESS,type:U,trace:r}})}catch(e){if(e?.name==="AbortError")k={status:A.c.NONE};else{let r=(0,L.E$)(e,L.ez.GENERATE);k={status:A.c.ERROR,type:U,errorMessage:r.message,trace:e.trace},r.reportToSentry&&(0,c.$D)(a.FigmaTeam.AI_PRODUCTIVITY,e),(0,w.fK)(n,r.message)}}return r(J,k),k});(0,l.eU)(null,(e,r,{prompt:n,stage:i,useCaseCategory:o,useCase:s,subtitle:l,entrypoint:d,jumpToNewLine:u,fromGenerateModalV2:m,pageNodeId:p})=>{let h=e(f.ze);if(null===h||0===h.length){(0,c.$D)(a.FigmaTeam.AI_PRODUCTIVITY,Error("No file key found for loaded file to use for FigJam AI Generate request"));return}r(et,{fileKey:h,prompt:n,stage:i,useCaseCategory:o,useCase:s,subtitle:l,entrypoint:d,jumpToNewLine:u,fromGenerateModalV2:m,pageNodeId:p})});let er=(0,l.eU)(null,(e,r,{fileKey:n,prompt:a,stage:i,useCaseCategory:o,useCase:s,subtitle:l,entrypoint:c,jumpToNewLine:d,fromGenerateModalV2:u,pageNodeId:m})=>{r(et,{fileKey:n,prompt:a,stage:i,useCaseCategory:o,useCase:s,subtitle:l,entrypoint:c,jumpToNewLine:d,fromGenerateModalV2:u,pageNodeId:m})})},391993:(e,r,n)=>{n.d(r,{$t:()=>_,HZ:()=>g}),n(411855),n(188507),n(496450);var a=n(38329),i=n(966712),o=n(374626);n(877723);var s=n(782112),l=n(119198),c=n(974105);n(177505);var d=n(335682),u=n(99506),m=n(984968),p=n(945020);n(362369);var h=n(463660);function _({dispatch:e,pageGuids:r,fileKey:n,source:i}){let s=o.zl.get(d.ze),_=o.zl.get(m.Me),g=a.D.getState();!function({figjamData:e,newFileState:r,dispatch:n,currentTeam:a,source:i,checkIsViewer:o}){f({checkIsViewer:o})&&(localStorage.setItem(h.Mu,JSON.stringify(e)),n(l.zE({state:r,from:i,editorType:u._Y.SLIDES,team:a,openNewFileIn:p.ai.NEW_TAB,slidesAiNewFileData:{source:i}})))}({figjamData:{figjamFileKey:n||s,pageGuids:r},newFileState:(0,c.Kl)(g),dispatch:e,currentTeam:_,source:i,checkIsViewer:!1})}function g(){return f({checkIsViewer:!1})}function f({checkIsViewer:e}){if(!(0,i.kc)().piper_present_summary||(0,s.y8)(e))return!1;if(!e){let e=o.zl.get(d.yV),r=!o.zl.get(m.Me)?.starter_team&&e?.viewerExportRestricted;if(e&&!e.canEditCanvas&&r)return!1}return!0}n(230646)},435898:(e,r,n)=>{n.d(r,{Zj:()=>d,Nb:()=>o,i_:()=>u,Dl:()=>m,es:()=>l,$B:()=>h}),n(411855),n(943632);var a=n(966712);n(939863);var i=(e=>(e.NEVER="never",e.ONCE="once",e.MORETHANEONCE="morethanonce",e))(i||{}),o=(e=>(e[e.ENTRY=0]="ENTRY",e[e.PROMPT_BUILDER=1]="PROMPT_BUILDER",e))(o||{}),s=(e=>(e.MEETING="meeting",e.GANTT_CHART="gantt_chart",e.BRAINSTORM="brainstorm",e.FLOW_CHART="flow_chart",e.ORG_CHART="org_chart",e.PLAN="plan",e.MIND_MAP="mind_map",e.TIMELINE="timeline",e))(s||{}),l=(e=>(e.WEEKLY_SYNC="weekly_sync",e.PLAN="plan",e.BRAINSTORM="brainstorm",e.TEAM_RETRO="team_retro",e.ONEONONE="1:1",e.GANTT_CHART="gantt_chart",e.FLOW_CHART="flow_chart",e.ORG_CHART="org_chart",e.MIND_MAP="mind_map",e.TIMELINE="timeline",e))(l||{}),c=(e=>(e.IN_EDITOR="in_editor",e.TEMPLATE_SHELF="template_shelf",e.COMMUNITY="community",e.ONBOARDING_MODAL="onboarding_modal",e))(c||{}),d=(e=>(e.GENERATE_MODE="generate_stage",e.REFINEMENT_MODE="refinement_stage",e))(d||{});let u="figjam_ai_diagram",m="figjam_ai_template";var p=(e=>(e.TEMPLATE="template",e.VISUAL="visual",e))(p||{});function h(){return!!(0,a.kc)().figjam_text_to_visual_mindmap}},211041:(e,r,n)=>{n.d(r,{OU:()=>s,RA:()=>o}),n(966712),n(563706);var a=n(825871);n(782112),n(694687);var i=n(285334);let o=new Set([i.Ph,i.T0]);function s(e){let r=e.openFile,n=r?r.teamId:null;return{teamId:n,orgId:e.currentUserOrgId,fileKey:r?r.key:null,userId:e.user?.id||null,trackingSessionId:(0,a.f)()}}},350042:(e,r,n)=>{n.d(r,{F9:()=>m,LX:()=>_,Mg:()=>g,fK:()=>h,h5:()=>u,lx:()=>p});var a=n(776250),i=n(374626),o=n(38580),s=n(36381),l=(e=>(e.FREEFORM="freeform",e.SUGGESTION="suggestion",e.AUTOCOMPLETE="autocomplete",e))(l||{}),c=(e=>(e.AI_PROMPT_EDITED="ai_prompt_edited",e.AI_PROMPT_BUILDER_OUTPUT_REQUESTED="ai_prompt_builder_output_requested",e.AI_PROMPT_BUILDER_OUTPUT_STREAMING="ai_prompt_builder_output_streaming",e.AI_PROMPT_BUILDER_OUTPUT_CREATED="ai_prompt_builder_output_created",e.AI_PROMPT_REQUEST_ERROR="ai_prompt_request_error",e.AI_PROMPT_SUGGESTIONS_VIEWED="ai_prompt_suggestions_viewed",e))(c||{});let d=e=>"board"===e?"template":"visual";function u(e,r,n,o,l,c,u,m,p,h,_){let f="inappropriate"===l?l:d(l);(0,s.qV)(o).then(s=>{(0,a.sx)("ai_prompt_builder_output_requested",{fileKey:e,variantIndex:r,numVariants:n,promptId:s,outputType:f,oneClickPromptUseCase:p,oneClickPromptUseCaseCategory:m,oneClickPromptUseCaseSubCategory:h,numCharactersInput:o.length,localOutputId:i.zl.get(g),stage:c,uiTriggeredFrom:u,autocompletePromptAddition:_},{forwardToDatadog:!0})})}function m(e,r,n,o,l){(0,s.qV)(n).then(n=>{(0,a.sx)("ai_prompt_builder_output_streaming",{fileKey:e,variantIndex:r,promptId:n,outputType:d(o),cortexRequestId:l,localOutputId:i.zl.get(g)},{forwardToDatadog:!0})})}function p(e,r,n,o,l){(0,s.qV)(n).then(n=>{(0,a.sx)("ai_prompt_builder_output_created",{fileKey:e,variantIndex:r,promptId:n,outputType:d(o),cortexRequestId:l,localOutputId:i.zl.get(g)},{forwardToDatadog:!0})})}function h(e,r){(0,a.sx)("ai_prompt_request_error",{fileKey:e,errorMessage:r},{forwardToDatadog:!0})}let _=(0,o.eU)(null),g=(0,o.eU)(0)},88596:(e,r,n)=>{n.d(r,{Vn:()=>c,mr:()=>s});var a=n(38329),i=n(988022),o=n(974105),s=(e=>(e.REQUEST="ai_summary_requested",e.CREATE="ai_summary_created",e.DELETE="ai_summary_deleted",e.LINK_COPED="ai_summary_link_copied",e.TEXT_COPIED="ai_summary_text_copied",e.TIME_TAKEN_TO_COMPLETE="figjam.summarize.time_taken_to_complete",e))(s||{}),l=(e=>(e.TIME_TAKEN_TO_COMPLETE="figjam.cluster.time_taken_to_complete",e))(l||{});function c(e,r){let n=a.D.getState(),s=o.d1(n)?.key??"";(0,i.ds)(e,s,n,{...r})}},230646:(e,r,n)=>{n(188507),n(211041)},342824:(e,r,n)=>{n.d(r,{E$:()=>d,ez:()=>l}),n(411855),n(188507);var a=n(719779),i=n(465824);n(737947),n(966712);var o=n(939863);n(392592);var s=n(479296),l=(e=>(e.SUMMARIZE="sticky-summarization-error",e.CLUSTER="sticky-cluster-error",e.GENERATE="generate-error",e))(l||{}),c=(e=>(e.Reload="reload",e.Trace="trace",e))(c||{});let d=(0,s.D)((e,r)=>{let n={"sticky-summarization-error":{content_length_limit_exceeded:(0,o.t)("whiteboard.ai_summary.content_length_limit_exceeded_error"),figjam_summarize_out_of_date:(0,o.t)("whiteboard.ai_summary.out_of_date_error"),rate_limit_exceeded:(0,o.t)("whiteboard.ai_summary.rate_limit_exceeded_error"),ai_opt_out_error:(0,o.t)("whiteboard.ai.ai_opt_out_error"),generic:(0,o.t)("whiteboard.ai_summary.generic_error"),service_issue:(0,o.t)("whiteboard.ai.service_issue_error"),unsafe_or_harmful_content:(0,o.t)("whiteboard.ai.inappropriate_input_error"),offline:(0,o.t)("whiteboard.ai.offline_error"),unauthorized:(0,o.t)("whiteboard.ai_summary.generic_error"),not_implemented:(0,o.t)("ai.error.not_implemented")},"sticky-cluster-error":{content_length_limit_exceeded:(0,o.t)("whiteboard.ai_cluster.content_length_limit_exceeded_error"),rate_limit_exceeded:(0,o.t)("whiteboard.ai_cluster.rate_limit_exceeded_error"),ai_opt_out_error:(0,o.t)("whiteboard.ai.ai_opt_out_error"),generic:(0,o.t)("whiteboard.ai_cluster.generic_error"),service_issue:(0,o.t)("whiteboard.ai.service_issue_error"),unsafe_or_harmful_content:(0,o.t)("whiteboard.ai.inappropriate_input_error"),offline:(0,o.t)("whiteboard.ai.offline_error"),unauthorized:(0,o.t)("whiteboard.ai_cluster.generic_error"),not_implemented:(0,o.t)("ai.error.not_implemented")},"generate-error":{content_length_limit_exceeded:(0,o.t)("whiteboard.ai_generate.content_length_limit_exceeded_error"),rate_limit_exceeded:(0,o.t)("whiteboard.ai_generate.rate_limit_error"),ai_opt_out_error:(0,o.t)("whiteboard.ai.ai_opt_out_error"),generic:(0,o.t)("whiteboard.ai_generate.unknown_error"),service_issue:(0,o.t)("whiteboard.ai.service_issue_error"),unsafe_or_harmful_content:(0,o.t)("whiteboard.ai.inappropriate_input_error"),offline:(0,o.t)("whiteboard.ai.offline_error"),unauthorized:(0,o.t)("whiteboard.ai_generate.unknown_error"),not_implemented:(0,o.t)("ai.error.not_implemented")}},s="generic",l=!0;if(e instanceof a.CortexErrorV2)a.ClientContentLengthLimitExceededError.isInstance(e)||a.ProviderContentLengthLimitExceededError.isInstance(e)?s="content_length_limit_exceeded":a.OutOfDateFeatureVersionError.isInstance(e)?"figjam_summarize"===e.featureName&&(s="figjam_summarize_out_of_date"):a.ProviderRateLimitExceededError.isInstance(e)||a.CortexRateLimitExceededError.isInstance(e)?s="rate_limit_exceeded":a.ProviderServiceIssueError.isInstance(e)||a.ProviderServiceBusyError.isInstance(e)?s="service_issue":a.OfflineError.isInstance(e)?(s="offline",l=!1):a.UnsafeOrHarmfulPromptError.isInstance(e)||a.ProviderUnsafeOrHarmfulContentError.isInstance(e)?(s="unsafe_or_harmful_content",l=!1):a.UnauthorizedError.isInstance(e)?(s="unauthorized",l=!1):a.NotImplementedError.isInstance(e)?(s="not_implemented",l=!1):a.FigjamVisualParsingError.isInstance(e)?(s="generic",l=!1):e?.statusCode===429?s="rate_limit_exceeded":e?.statusCode===403&&(s="ai_opt_out_error");else if(e instanceof i.CortexError)switch(e.type){case"content_length_limit_exceeded":s="content_length_limit_exceeded";break;case"figjam_summarize_out_of_date":s="figjam_summarize_out_of_date";break;case"rate_limit_exceeded":s="rate_limit_exceeded";break;case"service_issue":s="service_issue";break;case"offline":s="offline",l=!1;break;case"unsafe_or_harmful_content":case"figjam_generate_moderation_api_unsafe_or_harmful_content":s="unsafe_or_harmful_content",l=!1;break;case"unauthorized":s="unauthorized",l=!1;break;case"figjam_visual_parsing_error":s="generic",l=!1;break;case"generic":if(429===e.data.status){s="rate_limit_exceeded";break}403===e.data.status&&(s="ai_opt_out_error")}let c=n[r],d=c[s]??c.generic;return{type:s,message:d,reportToSentry:l}})},684690:(e,r,n)=>{n.d(r,{Z9:()=>g,iN:()=>E});var a=n(411855);n(188507);var i=n(299321),o=n(568214),s=n(138392);n(358145);var l=n(646240);n(827697);var c=n(752553);n(456363),n(939863),n(392592);var d=n(335682),u=n(279453);n(428467),n(984968);var m=n(694241);n(166748);var p=n(479296);n(161459);var h=n(42173),_=n(225719);let g=(0,p.D)(()=>{let e=(0,d.tS)(),[r]=(0,c.IT)((0,u.nD6)({fileKey:e||""}),{enabled:!!e}),{loadedPaletteVariations:n,loadedColorPalette:i}=function(e){let r=(0,a.useRef)(),{uuid:n,palette:i}=function(e){let r={uuid:m.fJ,palette:void 0},n=e.data?.file;if("loaded"!==e.status||!n)return r;if(n.userColorPaletteOverrideData){let e=n.userColorPaletteOverrideData.colorPaletteUuid;if(e===m.fJ)return r;if(n.userColorPaletteOverrideData.colorPalette)return{uuid:e,palette:n.userColorPaletteOverrideData.colorPalette}}return n.defaultColorPaletteData?.colorPalette?{uuid:n.defaultColorPaletteData.colorPaletteUuid,palette:n.defaultColorPaletteData.colorPalette}:r}(e);r.current=i;let l=i?.baseColors.join(":")||"";return(0,a.useMemo)(()=>{let a,i;let c=r.current;return"loaded"===e.status&&c&&n!==m.fJ&&(a=l.split(":").map(e=>(0,o.tK)(e)).filter(f),i=(0,s.Eg)(a)),{loadedPaletteVariations:i,loadedColorPalette:c}},[n,l,e.status])}(r),p=(0,l.Xr)(_.$R);return((0,a.useEffect)(()=>{p(n)},[n,p]),i&&n)?{type:m.Yv.CUSTOM,variations:n,uuid:i.uuid,name:i.name,isTeamDefault:i.isTeamDefault}:{type:m.Yv.DEFAULT,uuid:m.fJ}});function f(e){return null!==e}function E(e,r){let n=g();return!!e&&(n.type===m.Yv.CUSTOM?0>n.variations[r].findIndex(r=>(0,o.DA)(e,r)):(0,h.zS)(e,r)===i.daH.CUSTOM)}},225719:(e,r,n)=>{n.d(r,{$R:()=>d,Jq:()=>l,Uh:()=>u,db:()=>m,rN:()=>c});var a=n(299321),i=n(496450),o=n(38580),s=n(374626);n(827697),n(939863),n(392592),n(166748);let l=(0,o.eU)(-1),c=(0,o.eU)([]);(0,o.eU)(!1);let d=(0,o.eU)(void 0);function u(e){switch(e){case a.Z6A.STICKY:return["sticky"];case a.Z6A.HIGHLIGHT:return["highlight"];default:return["base","baseLight"]}}function m(){let e=s.zl.get(d);if(!e)return;let r=e.base;if(!r)return;let n=(0,i.NT)().getDirectlySelectedNodes().filter(e=>"STICKY"===e.type||"SHAPE_WITH_TEXT"===e.type||"SECTION"===e.type||"CONNECTOR"===e.type||"VECTOR"===e.type||"HIGHLIGHT"===e.type),a=new Map;n.forEach(e=>{let r=e.fills.length>0?e.fills[0].color:void 0,n=e.strokePaints.data.length>0?e.strokePaints.data[0].color:void 0,i=r||n;i&&(a.has(i)?a.set(i,a.get(i)+1):a.set(i,1))});let o=Array.from(a.entries()).sort((e,r)=>r[1]-e[1]),l=new Map,c=r.sort(()=>Math.random()-.5);o.forEach((e,r)=>{l.set(e[0],c[r%c.length])}),n.forEach(e=>{if(e.fills.length>0){let r=e.fills[0].color,n=r?l.get(r):void 0;n&&(e.fills=[{type:"SOLID",color:n}])}else if(e.strokePaints.data.length>0){let r=e.strokePaints.data[0].color,n=r?l.get(r):void 0;n&&(e.strokePaints={data:[{type:"SOLID",color:n}],blobs:[]})}})}(0,o.eU)(0)},425187:(e,r,n)=>{n.d(r,{f:()=>l});var a=n(299321),i=n(880934),o=n(288706);let s={positionRelativeToSelection:a.cfv.ABOVE,currentlySelectedNode:{nodeId:i.AD,ariaLabel:null}},l=(0,o.um)(s,(e,r)=>{switch(r.type){case"SET_POS_RELATIVE_TO_SELECTION":return{...e,positionRelativeToSelection:r.payload};case"SET_CURRENTLY_SELECTED_NODE":return{...e,currentlySelectedNode:r.payload};default:return e}})},511080:(e,r,n)=>{n.d(r,{AZ:()=>C,ZH:()=>R,cN:()=>L,cs:()=>P,dF:()=>A,lV:()=>N,mS:()=>w,nX:()=>O,oV:()=>S});var a=n(411855),i=n(23334),o=n(299321),s=n(629019),l=n.n(s),c=n(154254),d=n(428654),u=n(509742),m=(e=>(e[e.DEFAULT=1]="DEFAULT",e[e.INITIAL_DRAG_ON_DLT=2]="INITIAL_DRAG_ON_DLT",e[e.DRAG_ON_CANVAS=3]="DRAG_ON_CANVAS",e[e.DRAG_RETURN_TO_DLT=4]="DRAG_RETURN_TO_DLT",e))(m||{});a.forwardRef(({color:e,toolbarIconScale:r=1,toolOrder:n=1,shouldAnimate:i=!0,stickyAnimationState:o=1},s)=>{let c=4===n,d=4===o,m=16,p=25;r<1&&(c?(m=24,p=32):m=19);let h={[u.Sk]:1===n,[u.gz]:2===n,[u.eB]:3===n,[u.ID]:c};return a.createElement("div",{className:l()({[u.xI]:2===n,[u.t3]:3===n,[u.iD]:c}),style:{width:116*r,height:116*r}},a.createElement("div",{className:l()({...h,[u.ZJ]:!0,[u.B4]:(!i||4===o)&&1===n||3===o&&2===n,[u.i0]:3===o,[u.BE]:d,[u.rh]:!d&&!i&&2===n}),style:{top:m*r,left:p*r,width:104*r,height:104*r},ref:s},a.createElement("div",{className:l()({[u.uh]:!0,[u.WX]:!0})},a.createElement("svg",{className:u.SN,width:104*r,height:104*r,viewBox:"-20 -20 104 104",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",null,a.createElement("path",{className:l()(u.Wq,{[u.cq]:!0}),style:{clipPath:`url(#stickyMaskV3-${n})`},d:"M0.459717 0.680176L104.46 0.680243V104.68H0.459717V2.09514V0.680176Z",fill:e}),a.createElement("g",{className:u.BN},a.createElement("mask",{id:`stickyCurlMaskV3-${n}`,style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:84,height:84},a.createElement("path",{d:"M31.9819 3.8766C34.7398 1.38156 38.3262 7.51147e-07 42.0452 2.10768e-06L104 2.47061e-05V104H3.61353e-05L3.37915e-06 39.4677C1.22757e-06 35.2289 1.7934 31.188 4.9367 28.3443L31.9819 3.8766Z",fill:"white"})),a.createElement("g",{mask:`url(#stickyCurlMaskV3-${n})`},a.createElement("path",{d:"M104 6.74129e-05L54.8928 48.5492L0 104V0L104 6.74129e-05Z",fill:e,className:u.cq}),a.createElement("g",{filter:"url(#stickyCurlBlurFilter)"},a.createElement("rect",{x:"-26",y:"50.6831",width:"96.831",height:"16.7797",transform:"rotate(-41.9127 -26 50.6831)",fill:"black",fillOpacity:"0.3"})),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.526 4.26953L3.2583 29.8513C10.3683 23.4168 26.3782 24.6229 26.3782 24.6229C26.3782 24.6229 25.0586 10.1224 31.526 4.26953Z",fill:e,className:u.cq}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.5262 4.26953L3.25854 29.8513C10.3686 23.4168 26.3784 24.6229 26.3784 24.6229C26.3784 24.6229 25.0588 10.1224 31.5262 4.26953Z",fill:"url(#paint0_linear_221_5067)"})))),a.createElement("defs",null,a.createElement("clipPath",{id:`stickyMaskV3-${n}`},a.createElement("path",{className:u.cP,d:"M50.9701 6.74129e-05L104.97 0V104H0.970459V46.9909L50.9701 6.74129e-05Z",fill:"#C20000"}),a.createElement("path",{className:u.dP,d:"M32.2236 3.8766C34.9815 1.38156 38.5679 7.51147e-07 42.2869 2.10768e-06L104.242 2.47061e-05V104H0.241735L0.241703 39.4677C0.2417 35.2289 2.0351 31.188 5.1784 28.3443L32.2236 3.8766Z",fill:"#2400FF"}),a.createElement("rect",{x:"250",y:"520",width:"1",height:"1"})),a.createElement("filter",{xmlns:"http://www.w3.org/2000/svg",id:`sticky_shadow-${n}`,x:"0",y:"0",width:"200%",height:"200%",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",null),a.createElement("feGaussianBlur",{stdDeviation:"1.5"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_276_2240"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",null),a.createElement("feGaussianBlur",{stdDeviation:"4"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.17 0"}),a.createElement("feBlend",{mode:"normal",in2:"effect1_dropShadow_276_2240",result:"effect2_dropShadow_276_2240"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect2_dropShadow_276_2240",result:"shape"})),a.createElement("filter",{id:"stickyCurlBlurFilter",x:"-58",y:"-45.9995",width:"147.267",height:"141.169",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),a.createElement("feGaussianBlur",{stdDeviation:"16",result:"effect1_foregroundBlur_221_5067"})),a.createElement("linearGradient",{id:"paint0_linear_221_5067",x1:"18.1477",y1:"15.5989",x2:"25.7005",y2:"25.3824",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"white",stopOpacity:"0.5"}),a.createElement("stop",{offset:"0.319642",stopColor:"white",stopOpacity:"0.2"}),a.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.2"})))))))});let p="#699BF7",h="#B3B3B3";function _({toolbarIconScale:e,children:r}){return a.createElement("svg",{fill:"none",height:144*e,width:144*e,viewBox:"0 0 144 144",xmlns:"http://www.w3.org/2000/svg",className:l()(u.WX,{[u.$d]:!0})},r)}let g=new Map([[o.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP,104],[o.NLJ.SHAPE_WHITEBOARD_ELLIPSE,128],[o.NLJ.SHAPE_WHITEBOARD_SQUARE,112]]),f=2/38,E=.5/38,y=8/38;function b(e,r){if(r===o.xbm.NONE)return"#000000";let n=d.F.parse(e),a=o.DV9.getShapeWithTextStrokeColor((0,i.oU)(n));return a?d.F.format((0,i.aH)(a)):"#757575"}function I(e,r,n){if(!n)return{};let{styleType:a,isDragging:i}=n,s=function(e){let r=g.get(e);return void 0===r?112:r}(r);return{stroke:b(e,a),strokeWidth:a===o.xbm.NONE?s*E:s*f,strokeOpacity:a===o.xbm.NONE?.2:1,strokeDasharray:a===o.xbm.DASHED?`${s*y} ${s*y}`:"",strokeLinecap:"round",className:c.cx.if(i,c.cx.hidden).$}}function T(e,r){if(!r)return{};let{styleType:n,svgToCanvasScale:a,isDragging:i}=r;return r?{stroke:b(e,n),strokeWidth:function(e,r,n=!1){return n&&(e===o.xbm.SOLID||e===o.xbm.DASHED)?4*r:0}(n,a,i),strokeDasharray:function(e,r,n=!1){return n&&e===o.xbm.DASHED?`${16*r} ${10*r}`:""}(n,a,i),strokeLinecap:"round"}:{}}function v(e){return!!e&&e.styleType===o.xbm.NONE}function S(){return a.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{width:"40",height:"40",rx:"8",fill:"white"}),a.createElement("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 12C24 13.8382 22.7125 15.3937 21.0234 15.862L21.0844 16.1232L22.2429 21.1436H17.7571L18.5638 17.6477L18.9817 15.862C17.2926 15.3937 16 13.8382 16 12C16 9.79086 17.7909 8 20 8C22.2091 8 24 9.79086 24 12ZM16.6622 16.9936C15.0544 15.9178 14 14.0828 14 12C14 8.68629 16.6863 6 20 6C23.3137 6 26 8.68629 26 12C26 14.0841 24.9465 15.92 23.3383 16.9955L24.3326 21.3042L28.2169 22.1674L29 22.3414V23.1436V28.1436V29.1436H28H12H11V28.1436V23.1436V22.3414L11.7831 22.1674L15.6674 21.3042L16.6622 16.9936ZM27 23.9457L23.3902 23.1436H16.6098L13 23.9457V27.1436H27V23.9457ZM12 34.1436V32.1436H28V34.1436H12Z",fill:"black",fillOpacity:"0.9"}))}function w(){return a.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{width:"40",height:"40",rx:"8",fill:"#F5F5F5"}),a.createElement("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 12C24 13.8382 22.7125 15.3937 21.0234 15.862L21.0844 16.1232L22.2429 21.1436H17.7571L18.5638 17.6477L18.9817 15.862C17.2926 15.3937 16 13.8382 16 12C16 9.79086 17.7909 8 20 8C22.2091 8 24 9.79086 24 12ZM16.6622 16.9936C15.0544 15.9178 14 14.0828 14 12C14 8.68629 16.6863 6 20 6C23.3137 6 26 8.68629 26 12C26 14.0841 24.9465 15.92 23.3383 16.9955L24.3326 21.3042L28.2169 22.1674L29 22.3414V23.1436V28.1436V29.1436H28H12H11V28.1436V23.1436V22.3414L11.7831 22.1674L15.6674 21.3042L16.6622 16.9936ZM27 23.9457L23.3902 23.1436H16.6098L13 23.9457V27.1436H27V23.9457ZM12 34.1436V32.1436H28V34.1436H12Z",fill:"black",fillOpacity:"0.9"}))}function A(){return a.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{width:"40",height:"40",rx:"8",fill:"#9747FF"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 12C24 13.8382 22.7125 15.3937 21.0234 15.862L21.0844 16.1232L22.2429 21.1436H17.7571L18.5638 17.6477L18.9817 15.862C17.2926 15.3937 16 13.8382 16 12C16 9.79086 17.7909 8 20 8C22.2091 8 24 9.79086 24 12ZM16.6622 16.9936C15.0544 15.9178 14 14.0828 14 12C14 8.68629 16.6863 6 20 6C23.3137 6 26 8.68629 26 12C26 14.0841 24.9465 15.92 23.3383 16.9955L24.3326 21.3042L28.2169 22.1674L29 22.3414V23.1436V28.1436V29.1436H28H12H11V28.1436V23.1436V22.3414L11.7831 22.1674L15.6674 21.3042L16.6622 16.9936ZM27 23.9457L23.3902 23.1436H16.6098L13 23.9457V27.1436H27V23.9457ZM12 34.1436V32.1436H28V34.1436H12Z",fill:"white"}))}function N(){return a.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),a.createElement("mask",{id:"path-3-inside-1_1019679_55716",fill:"white"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33.3576 13.6424L32 11L30.6424 13.6424L28 15L30.6424 16.3576L32 19L33.3576 16.3576L36 15L33.3576 13.6424ZM39.1682 26H41H42V27V38C42 40.2091 40.2091 42 38 42H18C15.7909 42 14 40.2091 14 38V27V26H15H28.1837C28.2225 25.3193 28.3893 24.6345 28.6965 23.9794C29.9863 21.2293 33.2613 20.0454 36.0114 21.3352C37.9039 22.2227 39.0547 24.0503 39.1682 26ZM37.1625 26C37.0532 24.8026 36.3294 23.6933 35.1622 23.146C33.4121 22.3252 31.3281 23.0786 30.5073 24.8287C30.329 25.2088 30.225 25.6047 30.1893 26H37.1625ZM25.8981 19.4218L22.4218 15.828L18.828 19.3044L22.3044 22.8981L25.8981 19.4218ZM23.8593 14.4375L22.4688 13L21.0312 14.3905L17.4375 17.8669L16 19.2574L17.3905 20.6949L20.8669 24.2887L22.2574 25.7262L23.6949 24.3356L27.2887 20.8593L28.7262 19.4688L27.3356 18.0313L23.8593 14.4375ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z"})),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33.3576 13.6424L32 11L30.6424 13.6424L28 15L30.6424 16.3576L32 19L33.3576 16.3576L36 15L33.3576 13.6424ZM39.1682 26H41H42V27V38C42 40.2091 40.2091 42 38 42H18C15.7909 42 14 40.2091 14 38V27V26H15H28.1837C28.2225 25.3193 28.3893 24.6345 28.6965 23.9794C29.9863 21.2293 33.2613 20.0454 36.0114 21.3352C37.9039 22.2227 39.0547 24.0503 39.1682 26ZM37.1625 26C37.0532 24.8026 36.3294 23.6933 35.1622 23.146C33.4121 22.3252 31.3281 23.0786 30.5073 24.8287C30.329 25.2088 30.225 25.6047 30.1893 26H37.1625ZM25.8981 19.4218L22.4218 15.828L18.828 19.3044L22.3044 22.8981L25.8981 19.4218ZM23.8593 14.4375L22.4688 13L21.0312 14.3905L17.4375 17.8669L16 19.2574L17.3905 20.6949L20.8669 24.2887L22.2574 25.7262L23.6949 24.3356L27.2887 20.8593L28.7262 19.4688L27.3356 18.0313L23.8593 14.4375ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z",fill:"black",fillOpacity:"0.9"}),a.createElement("path",{d:"M32 11L33.7789 10.086L32 6.6237L30.2211 10.086L32 11ZM33.3576 13.6424L31.5787 14.5564L31.8723 15.1277L32.4436 15.4213L33.3576 13.6424ZM30.6424 13.6424L31.5564 15.4213L32.1277 15.1277L32.4213 14.5564L30.6424 13.6424ZM28 15L27.086 13.2211L23.6237 15L27.086 16.7789L28 15ZM30.6424 16.3576L32.4213 15.4436L32.1277 14.8723L31.5564 14.5787L30.6424 16.3576ZM32 19L30.2211 19.914L32 23.3763L33.7789 19.914L32 19ZM33.3576 16.3576L32.4436 14.5787L31.8723 14.8723L31.5787 15.4436L33.3576 16.3576ZM36 15L36.914 16.7789L40.3763 15L36.914 13.2211L36 15ZM39.1682 26L37.1715 26.1162L37.2812 28H39.1682V26ZM42 26H44V24H42V26ZM14 26V24H12V26H14ZM28.1837 26V28H30.0729L30.1804 26.1138L28.1837 26ZM28.6965 23.9794L26.8858 23.1302V23.1302L28.6965 23.9794ZM36.0114 21.3352L35.1622 23.146V23.146L36.0114 21.3352ZM37.1625 26V28H39.3533L39.1542 25.8183L37.1625 26ZM35.1622 23.146L34.313 24.9567V24.9567L35.1622 23.146ZM30.5073 24.8287L28.6965 23.9794L28.6965 23.9794L30.5073 24.8287ZM30.1893 26L28.1974 25.8203L28.0008 28H30.1893V26ZM22.4218 15.828L23.8593 14.4375L22.4688 13L21.0312 14.3905L22.4218 15.828ZM25.8981 19.4218L27.2887 20.8593L28.7262 19.4688L27.3356 18.0313L25.8981 19.4218ZM18.828 19.3044L17.4375 17.8669L16 19.2574L17.3905 20.6949L18.828 19.3044ZM22.3044 22.8981L20.8669 24.2887L22.2574 25.7262L23.6949 24.3356L22.3044 22.8981ZM22.4688 13L23.9063 11.6095L22.5157 10.172L21.0782 11.5625L22.4688 13ZM23.8593 14.4375L22.4218 15.828L22.4218 15.828L23.8593 14.4375ZM21.0312 14.3905L22.4218 15.828L22.4218 15.828L21.0312 14.3905ZM17.4375 17.8669L16.047 16.4294H16.047L17.4375 17.8669ZM16 19.2574L14.6095 17.8199L13.172 19.2104L14.5625 20.6479L16 19.2574ZM17.3905 20.6949L18.828 19.3044L18.828 19.3044L17.3905 20.6949ZM20.8669 24.2887L22.3044 22.8981H22.3044L20.8669 24.2887ZM22.2574 25.7262L20.8199 27.1167L22.2104 28.5542L23.6479 27.1637L22.2574 25.7262ZM23.6949 24.3356L22.3044 22.8981V22.8981L23.6949 24.3356ZM27.2887 20.8593L28.6792 22.2968V22.2968L27.2887 20.8593ZM28.7262 19.4688L30.1167 20.9063L31.5542 19.5157L30.1637 18.0782L28.7262 19.4688ZM27.3356 18.0313L28.7731 16.6407L28.7731 16.6407L27.3356 18.0313ZM16 28V26H14V28H16ZM40 28H42V26H40V28ZM30.2211 11.914L31.5787 14.5564L35.1366 12.7283L33.7789 10.086L30.2211 11.914ZM32.4213 14.5564L33.7789 11.914L30.2211 10.086L28.8634 12.7283L32.4213 14.5564ZM28.914 16.7789L31.5564 15.4213L29.7283 11.8634L27.086 13.2211L28.914 16.7789ZM31.5564 14.5787L28.914 13.2211L27.086 16.7789L29.7283 18.1366L31.5564 14.5787ZM33.7789 18.086L32.4213 15.4436L28.8634 17.2717L30.2211 19.914L33.7789 18.086ZM31.5787 15.4436L30.2211 18.086L33.7789 19.914L35.1366 17.2717L31.5787 15.4436ZM35.086 13.2211L32.4436 14.5787L34.2717 18.1366L36.914 16.7789L35.086 13.2211ZM32.4436 15.4213L35.086 16.7789L36.914 13.2211L34.2717 11.8634L32.4436 15.4213ZM39.1682 28H41V24H39.1682V28ZM41 28H42V24H41V28ZM40 26V27H44V26H40ZM40 27V38H44V27H40ZM40 38C40 39.1046 39.1046 40 38 40V44C41.3137 44 44 41.3137 44 38H40ZM38 40H18V44H38V40ZM18 40C16.8954 40 16 39.1046 16 38H12C12 41.3137 14.6863 44 18 44V40ZM16 38V27H12V38H16ZM16 27V26H12V27H16ZM14 28H15V24H14V28ZM15 28H28.1837V24H15V28ZM30.1804 26.1138C30.2049 25.6836 30.3102 25.2488 30.5073 24.8287L26.8858 23.1302C26.4684 24.0201 26.24 24.955 26.1869 25.8862L30.1804 26.1138ZM30.5073 24.8287C31.3281 23.0786 33.4121 22.3252 35.1622 23.146L36.8607 19.5244C33.1105 17.7657 28.6446 19.38 26.8858 23.1302L30.5073 24.8287ZM35.1622 23.146C36.3641 23.7096 37.099 24.8697 37.1715 26.1162L41.1648 25.8838C41.0104 23.2309 39.4437 20.7359 36.8607 19.5244L35.1622 23.146ZM39.1542 25.8183C38.9831 23.9427 37.8478 22.1964 36.0114 21.3352L34.313 24.9567C34.811 25.1903 35.1234 25.6625 35.1708 26.1817L39.1542 25.8183ZM36.0114 21.3352C33.2613 20.0454 29.9863 21.2293 28.6965 23.9794L32.318 25.6779C32.6698 24.9278 33.563 24.605 34.313 24.9567L36.0114 21.3352ZM28.6965 23.9794C28.4179 24.5735 28.2537 25.1964 28.1974 25.8203L32.1812 26.1797C32.1963 26.013 32.2401 25.8441 32.318 25.6779L28.6965 23.9794ZM30.1893 28H37.1625V24H30.1893V28ZM20.9843 17.2186L24.4606 20.8123L27.3356 18.0313L23.8593 14.4375L20.9843 17.2186ZM20.2186 20.7419L23.8123 17.2655L21.0312 14.3905L17.4375 17.8669L20.2186 20.7419ZM23.7419 21.5076L20.2655 17.9138L17.3905 20.6949L20.8669 24.2887L23.7419 21.5076ZM24.5076 17.9843L20.9138 21.4606L23.6949 24.3356L27.2887 20.8593L24.5076 17.9843ZM21.0312 14.3905L22.4218 15.828L25.2968 13.047L23.9063 11.6095L21.0312 14.3905ZM22.4218 15.828L23.8593 14.4375L21.0782 11.5625L19.6407 12.953L22.4218 15.828ZM18.828 19.3044L22.4218 15.828L19.6407 12.953L16.047 16.4294L18.828 19.3044ZM17.3905 20.6949L18.828 19.3044L16.047 16.4294L14.6095 17.8199L17.3905 20.6949ZM18.828 19.3044L17.4375 17.8669L14.5625 20.6479L15.953 22.0854L18.828 19.3044ZM22.3044 22.8981L18.828 19.3044L15.953 22.0854L19.4294 25.6792L22.3044 22.8981ZM23.6949 24.3356L22.3044 22.8981L19.4294 25.6792L20.8199 27.1167L23.6949 24.3356ZM22.3044 22.8981L20.8669 24.2887L23.6479 27.1637L25.0854 25.7731L22.3044 22.8981ZM25.8981 19.4218L22.3044 22.8981L25.0854 25.7731L28.6792 22.2968L25.8981 19.4218ZM27.3356 18.0313L25.8981 19.4218L28.6792 22.2968L30.1167 20.9063L27.3356 18.0313ZM25.8981 19.4218L27.2887 20.8593L30.1637 18.0782L28.7731 16.6407L25.8981 19.4218ZM22.4218 15.828L25.8981 19.4218L28.7731 16.6407L25.2968 13.047L22.4218 15.828ZM14 28V38H18V28H14ZM40 26H16V30H40V26ZM42 38V28H38V38H42ZM38 42C40.2091 42 42 40.2091 42 38H38V42ZM18 42H38V38H18V42ZM14 38C14 40.2091 15.7909 42 18 42V38H18H14Z",fill:"black",fillOpacity:"0.9",mask:"url(#path-3-inside-1_1019679_55716)"}),a.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}))}function C(){return a.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),a.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),a.createElement("path",{d:"M11.5269 4L22.3945 9.08856L17.306 19.9562L6.4383 14.8677L11.5269 4Z",fill:"#FF8577"}),a.createElement("path",{d:"M51.3739 20.2821C49.7324 23.7823 45.5642 25.2891 42.064 23.6475C38.5639 22.006 37.0571 17.8378 38.6986 14.3376C40.3402 10.8375 44.5084 9.33072 48.0085 10.9723C51.5087 12.6138 53.0155 16.782 51.3739 20.2821Z",fill:"#C7B9FF"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.377 23.8507L25.8165 22.6624L27.3151 27.0003H28.4367L30.6793 20.0203L27.2397 21.2085L25.16 15.1885L22.377 23.8507Z",fill:"#FFC700"}),a.createElement("mask",{id:"path-6-inside-1_1019679_55739",fill:"white"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38.0275 4.97265L36.5002 2L34.9728 4.97265L32.0002 6.5L34.9728 8.02735L36.5002 11L38.0275 8.02735L41.0002 6.5L38.0275 4.97265ZM33.3487 11.6515L32.5002 10L31.6517 11.6515L30.0002 12.5L31.6517 13.3485L32.5002 15L33.3487 13.3485L35.0002 12.5L33.3487 11.6515ZM19.7353 10.0517L12.4902 6.65937L9.09785 13.9045L16.343 17.2969L19.7353 10.0517ZM11.527 4L6.43848 14.8677L17.3062 19.9562L22.3947 9.08856L11.527 4ZM49.5634 19.4329C48.3908 21.9331 45.4136 23.0093 42.9134 21.8368C40.4133 20.6643 39.3371 17.687 40.5096 15.1869C41.6821 12.6867 44.6594 11.6105 47.1595 12.783C49.6596 13.9555 50.7359 16.9328 49.5634 19.4329ZM51.3741 20.2821C49.7326 23.7823 45.5644 25.2891 42.0642 23.6475C38.564 22.006 37.0573 17.8378 38.6988 14.3376C40.3404 10.8375 44.5085 9.33072 48.0087 10.9723C51.5089 12.6138 53.0156 16.782 51.3741 20.2821ZM25.1601 15.1882L22.377 23.8504L25.8166 22.6621L26.9697 26H28.758L30.6794 20.02L27.2398 21.2082L25.1601 15.1882ZM30.8587 26L32.5835 20.6318C32.8152 19.9105 32.6196 19.1203 32.0781 18.5905C31.5367 18.0607 30.7423 17.8823 30.0263 18.1296L28.4771 18.6648L27.0505 14.5352C26.7694 13.7215 25.9992 13.179 25.1384 13.1883C24.2776 13.1977 23.5193 13.7568 23.256 14.5764L20.4729 23.2386C20.2412 23.9598 20.4368 24.7501 20.9783 25.2799C21.5197 25.8097 22.3141 25.9881 23.0301 25.7408L24.5793 25.2056L24.8537 26H15H14V27V38C14 40.2091 15.7909 42 18 42H38C40.2091 42 42 40.2091 42 38V27V26H41H30.8587ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z"})),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38.0275 4.97265L36.5002 2L34.9728 4.97265L32.0002 6.5L34.9728 8.02735L36.5002 11L38.0275 8.02735L41.0002 6.5L38.0275 4.97265ZM33.3487 11.6515L32.5002 10L31.6517 11.6515L30.0002 12.5L31.6517 13.3485L32.5002 15L33.3487 13.3485L35.0002 12.5L33.3487 11.6515ZM19.7353 10.0517L12.4902 6.65937L9.09785 13.9045L16.343 17.2969L19.7353 10.0517ZM11.527 4L6.43848 14.8677L17.3062 19.9562L22.3947 9.08856L11.527 4ZM49.5634 19.4329C48.3908 21.9331 45.4136 23.0093 42.9134 21.8368C40.4133 20.6643 39.3371 17.687 40.5096 15.1869C41.6821 12.6867 44.6594 11.6105 47.1595 12.783C49.6596 13.9555 50.7359 16.9328 49.5634 19.4329ZM51.3741 20.2821C49.7326 23.7823 45.5644 25.2891 42.0642 23.6475C38.564 22.006 37.0573 17.8378 38.6988 14.3376C40.3404 10.8375 44.5085 9.33072 48.0087 10.9723C51.5089 12.6138 53.0156 16.782 51.3741 20.2821ZM25.1601 15.1882L22.377 23.8504L25.8166 22.6621L26.9697 26H28.758L30.6794 20.02L27.2398 21.2082L25.1601 15.1882ZM30.8587 26L32.5835 20.6318C32.8152 19.9105 32.6196 19.1203 32.0781 18.5905C31.5367 18.0607 30.7423 17.8823 30.0263 18.1296L28.4771 18.6648L27.0505 14.5352C26.7694 13.7215 25.9992 13.179 25.1384 13.1883C24.2776 13.1977 23.5193 13.7568 23.256 14.5764L20.4729 23.2386C20.2412 23.9598 20.4368 24.7501 20.9783 25.2799C21.5197 25.8097 22.3141 25.9881 23.0301 25.7408L24.5793 25.2056L24.8537 26H15H14V27V38C14 40.2091 15.7909 42 18 42H38C40.2091 42 42 40.2091 42 38V27V26H41H30.8587ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z",fill:"white"}),a.createElement("path",{d:"M36.5002 2L38.2791 1.08599L36.5002 -2.3763L34.7213 1.08599L36.5002 2ZM38.0275 4.97265L36.2486 5.88666L36.5422 6.45801L37.1135 6.75158L38.0275 4.97265ZM34.9728 4.97265L35.8868 6.75158L36.4582 6.45801L36.7518 5.88666L34.9728 4.97265ZM32.0002 6.5L31.0862 4.72107L27.6239 6.5L31.0862 8.27893L32.0002 6.5ZM34.9728 8.02735L36.7518 7.11334L36.4582 6.54199L35.8868 6.24842L34.9728 8.02735ZM36.5002 11L34.7213 11.914L36.5002 15.3763L38.2791 11.914L36.5002 11ZM38.0275 8.02735L37.1135 6.24842L36.5422 6.54199L36.2486 7.11334L38.0275 8.02735ZM41.0002 6.5L41.9142 8.27893L45.3765 6.5L41.9142 4.72107L41.0002 6.5ZM32.5002 10L34.2791 9.08599L32.5002 5.6237L30.7213 9.08599L32.5002 10ZM33.3487 11.6515L31.5698 12.5655L31.8633 13.1368L32.4347 13.4304L33.3487 11.6515ZM31.6517 11.6515L32.5657 13.4304L33.137 13.1368L33.4306 12.5655L31.6517 11.6515ZM30.0002 12.5L29.0862 10.7211L25.6239 12.5L29.0862 14.2789L30.0002 12.5ZM31.6517 13.3485L33.4306 12.4345L33.137 11.8632L32.5657 11.5696L31.6517 13.3485ZM32.5002 15L30.7213 15.914L32.5002 19.3763L34.2791 15.914L32.5002 15ZM33.3487 13.3485L32.4347 11.5696L31.8633 11.8632L31.5698 12.4345L33.3487 13.3485ZM35.0002 12.5L35.9142 14.2789L39.3765 12.5L35.9142 10.7211L35.0002 12.5ZM12.4902 6.65937L13.3383 4.84809L11.527 4L10.6789 5.81128L12.4902 6.65937ZM19.7353 10.0517L21.5466 10.8998L22.3947 9.08856L20.5834 8.24047L19.7353 10.0517ZM9.09785 13.9045L7.28657 13.0564L6.43848 14.8677L8.24976 15.7158L9.09785 13.9045ZM16.343 17.2969L15.4949 19.1082L17.3062 19.9562L18.1543 18.145L16.343 17.2969ZM6.43848 14.8677L4.6272 14.0196L3.7791 15.8309L5.59038 16.679L6.43848 14.8677ZM11.527 4L12.3751 2.18872L10.5638 1.34063L9.71575 3.15191L11.527 4ZM17.3062 19.9562L16.4581 21.7675L18.2693 22.6156L19.1174 20.8043L17.3062 19.9562ZM22.3947 9.08856L24.206 9.93665L25.0541 8.12537L23.2428 7.27728L22.3947 9.08856ZM42.9134 21.8368L43.7626 20.026L42.9134 21.8368ZM49.5634 19.4329L47.7526 18.5837L49.5634 19.4329ZM40.5096 15.1869L38.6988 14.3376V14.3376L40.5096 15.1869ZM47.1595 12.783L48.0087 10.9723L47.1595 12.783ZM42.0642 23.6475L41.215 25.4583H41.215L42.0642 23.6475ZM51.3741 20.2821L49.5634 19.4329L51.3741 20.2821ZM38.6988 14.3376L36.8881 13.4884V13.4884L38.6988 14.3376ZM48.0087 10.9723L47.1595 12.783L47.1595 12.783L48.0087 10.9723ZM22.377 23.8504L20.4729 23.2386L19.2493 27.0469L23.0301 25.7408L22.377 23.8504ZM25.1601 15.1882L27.0505 14.5352L25.0913 8.86403L23.256 14.5764L25.1601 15.1882ZM25.8166 22.6621L27.707 22.0091L27.0539 20.1187L25.1635 20.7718L25.8166 22.6621ZM26.9697 26L25.0793 26.6531L25.5446 28H26.9697V26ZM28.758 26V28H30.2161L30.6622 26.6118L28.758 26ZM30.6794 20.02L32.5835 20.6318L33.8071 16.8235L30.0263 18.1296L30.6794 20.02ZM27.2398 21.2082L25.3494 21.8613L26.0025 23.7517L27.8929 23.0986L27.2398 21.2082ZM30.8587 26L28.9546 25.3882L28.1155 28H30.8587V26ZM32.5835 20.6318L34.4876 21.2436V21.2436L32.5835 20.6318ZM30.0263 18.1296L30.6794 20.02H30.6794L30.0263 18.1296ZM28.4771 18.6648L26.5868 19.3179L27.2398 21.2082L29.1302 20.5552L28.4771 18.6648ZM27.0505 14.5352L28.9409 13.8821L27.0505 14.5352ZM25.1384 13.1883L25.1601 15.1882L25.1384 13.1883ZM23.256 14.5764L21.3519 13.9646L23.256 14.5764ZM20.4729 23.2386L22.377 23.8504H22.377L20.4729 23.2386ZM23.0301 25.7408L23.6831 27.6311L23.6831 27.6311L23.0301 25.7408ZM24.5793 25.2056L26.4696 24.5525L25.8166 22.6621L23.9262 23.3152L24.5793 25.2056ZM24.8537 26V28H27.6606L26.7441 25.3469L24.8537 26ZM14 26V24H12V26H14ZM42 26H44V24H42V26ZM16 28V26H14V28H16ZM40 28H42V26H40V28ZM34.7213 2.91401L36.2486 5.88666L39.8065 4.05864L38.2791 1.08599L34.7213 2.91401ZM36.7518 5.88666L38.2791 2.91401L34.7213 1.08599L33.1939 4.05863L36.7518 5.88666ZM32.9142 8.27893L35.8868 6.75158L34.0588 3.19372L31.0862 4.72107L32.9142 8.27893ZM35.8868 6.24842L32.9142 4.72107L31.0862 8.27893L34.0588 9.80628L35.8868 6.24842ZM38.2791 10.086L36.7518 7.11334L33.1939 8.94136L34.7213 11.914L38.2791 10.086ZM36.2486 7.11334L34.7213 10.086L38.2791 11.914L39.8065 8.94136L36.2486 7.11334ZM40.0862 4.72107L37.1135 6.24842L38.9415 9.80628L41.9142 8.27893L40.0862 4.72107ZM37.1135 6.75158L40.0862 8.27893L41.9142 4.72107L38.9415 3.19372L37.1135 6.75158ZM30.7213 10.914L31.5698 12.5655L35.1276 10.7375L34.2791 9.08599L30.7213 10.914ZM33.4306 12.5655L34.2791 10.914L30.7213 9.08599L29.8727 10.7375L33.4306 12.5655ZM30.9142 14.2789L32.5657 13.4304L30.7376 9.87255L29.0862 10.7211L30.9142 14.2789ZM32.5657 11.5696L30.9142 10.7211L29.0862 14.2789L30.7376 15.1275L32.5657 11.5696ZM34.2791 14.086L33.4306 12.4345L29.8727 14.2625L30.7213 15.914L34.2791 14.086ZM31.5698 12.4345L30.7213 14.086L34.2791 15.914L35.1276 14.2625L31.5698 12.4345ZM34.0862 10.7211L32.4347 11.5696L34.2627 15.1275L35.9142 14.2789L34.0862 10.7211ZM32.4347 13.4304L34.0862 14.2789L35.9142 10.7211L34.2627 9.87255L32.4347 13.4304ZM11.6421 8.47065L18.8873 11.863L20.5834 8.24047L13.3383 4.84809L11.6421 8.47065ZM10.9091 14.7526L14.3015 7.50747L10.6789 5.81128L7.28657 13.0564L10.9091 14.7526ZM17.1911 15.4856L9.94594 12.0932L8.24976 15.7158L15.4949 19.1082L17.1911 15.4856ZM17.9241 9.20365L14.5317 16.4488L18.1543 18.145L21.5466 10.8998L17.9241 9.20365ZM8.24976 15.7158L13.3383 4.84809L9.71575 3.15191L4.6272 14.0196L8.24976 15.7158ZM18.1543 18.145L7.28657 13.0564L5.59038 16.679L16.4581 21.7675L18.1543 18.145ZM20.5834 8.24047L15.4949 19.1081L19.1174 20.8043L24.206 9.93665L20.5834 8.24047ZM10.6789 5.81128L21.5466 10.8998L23.2428 7.27728L12.3751 2.18872L10.6789 5.81128ZM42.0642 23.6475C45.5644 25.2891 49.7326 23.7823 51.3741 20.2821L47.7526 18.5837C47.0491 20.0838 45.2627 20.7295 43.7626 20.026L42.0642 23.6475ZM38.6988 14.3376C37.0573 17.8378 38.564 22.006 42.0642 23.6475L43.7626 20.026C42.2626 19.3225 41.6168 17.5362 42.3203 16.0361L38.6988 14.3376ZM48.0087 10.9723C44.5085 9.33072 40.3404 10.8375 38.6988 14.3376L42.3203 16.0361C43.0238 14.536 44.8102 13.8902 46.3103 14.5938L48.0087 10.9723ZM51.3741 20.2821C53.0156 16.782 51.5089 12.6138 48.0087 10.9723L46.3103 14.5938C47.8104 15.2973 48.4561 17.0836 47.7526 18.5837L51.3741 20.2821ZM41.215 25.4583C45.7152 27.5688 51.0743 25.6316 53.1849 21.1314L49.5634 19.4329C48.3908 21.9331 45.4136 23.0093 42.9134 21.8368L41.215 25.4583ZM36.8881 13.4884C34.7775 17.9887 36.7148 23.3478 41.215 25.4583L42.9134 21.8368C40.4133 20.6643 39.3371 17.687 40.5096 15.1869L36.8881 13.4884ZM48.8579 9.1615C44.3577 7.05096 38.9986 8.98819 36.8881 13.4884L40.5096 15.1869C41.6821 12.6867 44.6594 11.6105 47.1595 12.783L48.8579 9.1615ZM53.1849 21.1314C55.2954 16.6311 53.3582 11.272 48.8579 9.1615L47.1595 12.783C49.6596 13.9555 50.7359 16.9328 49.5634 19.4329L53.1849 21.1314ZM24.2812 24.4622L27.0643 15.8L23.256 14.5764L20.4729 23.2386L24.2812 24.4622ZM25.1635 20.7718L21.724 21.96L23.0301 25.7408L26.4696 24.5525L25.1635 20.7718ZM28.8601 25.3469L27.707 22.0091L23.9262 23.3152L25.0793 26.6531L28.8601 25.3469ZM26.9697 28H28.758V24H26.9697V28ZM28.7752 19.4082L26.8539 25.3882L30.6622 26.6118L32.5835 20.6318L28.7752 19.4082ZM27.8929 23.0986L31.3324 21.9104L30.0263 18.1296L26.5868 19.3179L27.8929 23.0986ZM23.2698 15.8413L25.3494 21.8613L29.1302 20.5552L27.0505 14.5352L23.2698 15.8413ZM32.7629 26.6118L34.4876 21.2436L30.6794 20.02L28.9546 25.3882L32.7629 26.6118ZM34.4876 21.2436C34.9511 19.8011 34.5598 18.2206 33.4769 17.161L30.6794 20.02V20.02L34.4876 21.2436ZM33.4769 17.161C32.394 16.1014 30.8053 15.7445 29.3733 16.2392L30.6794 20.02L30.6794 20.02L33.4769 17.161ZM29.3733 16.2392L27.8241 16.7744L29.1302 20.5552L30.6794 20.02L29.3733 16.2392ZM30.3675 18.0117L28.9409 13.8821L25.1601 15.1882L26.5868 19.3179L30.3675 18.0117ZM28.9409 13.8821C28.3787 12.2548 26.8382 11.1697 25.1166 11.1884L25.1601 15.1882H25.1601L28.9409 13.8821ZM25.1166 11.1884C23.395 11.2072 21.8785 12.3254 21.3519 13.9646L25.1601 15.1882H25.1601L25.1166 11.1884ZM21.3519 13.9646L18.5688 22.6268L22.377 23.8504L25.1601 15.1882L21.3519 13.9646ZM18.5688 22.6268C18.1053 24.0693 18.4966 25.6498 19.5795 26.7094L22.377 23.8504L22.377 23.8504L18.5688 22.6268ZM19.5795 26.7094C20.6625 27.769 22.2511 28.1258 23.6831 27.6311L22.377 23.8504L22.377 23.8504L19.5795 26.7094ZM23.6831 27.6311L25.2323 27.096L23.9262 23.3152L22.377 23.8504L23.6831 27.6311ZM22.6889 25.8586L22.9633 26.6531L26.7441 25.3469L26.4696 24.5525L22.6889 25.8586ZM15 28H24.8537V24H15V28ZM14 28H15V24H14V28ZM16 27V26H12V27H16ZM16 38V27H12V38H16ZM18 40C16.8954 40 16 39.1046 16 38H12C12 41.3137 14.6863 44 18 44V40ZM38 40H18V44H38V40ZM40 38C40 39.1046 39.1046 40 38 40V44C41.3137 44 44 41.3137 44 38H40ZM40 27V38H44V27H40ZM40 26V27H44V26H40ZM41 28H42V24H41V28ZM30.8587 28H41V24H30.8587V28ZM14 28V38H18V28H14ZM40 26H16V30H40V26ZM42 38V28H38V38H42ZM38 42C40.2091 42 42 40.2091 42 38H38V42ZM18 42H38V38H18V42ZM14 38C14 40.2091 15.7909 42 18 42V38H18H14Z",fill:"black",fillOpacity:"0.9",mask:"url(#path-6-inside-1_1019679_55739)"}))}function L(){return a.createElement("svg",{width:"56",height:"62",viewBox:"0 0 56 62",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{x:"8",y:"11",width:"40",height:"40",rx:"8",fill:"#9747FF"}),a.createElement("path",{d:"M11.9511 6.09433L11.0454 5.67028L10.6214 6.57592L5.53284 17.4436L5.10879 18.3492L6.01443 18.7733L16.8821 23.8619L17.7878 24.2859L18.2118 23.3803L23.3004 12.5126L23.7244 11.6069L22.8188 11.1829L11.9511 6.09433Z",fill:"#9747FF",stroke:"#9747FF",strokeWidth:"2"}),a.createElement("path",{d:"M41.6394 27.5529C45.6396 29.4289 50.4033 27.7069 52.2793 23.7067C54.1553 19.7065 52.4334 14.9429 48.4331 13.0668C44.4329 11.1908 39.6693 12.9128 37.7933 16.913C35.9172 20.9132 37.6392 25.6769 41.6394 27.5529Z",fill:"#9747FF",stroke:"#9747FF",strokeWidth:"2"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.3772 26.8504L25.8167 25.6621L27.3153 30H28.4369L30.6795 23.02L27.2399 24.2082L25.1602 18.1882L22.3772 26.8504Z",fill:"#9747FF"}),a.createElement("path",{d:"M15 30H41V41C41 42.6569 39.6569 44 38 44H18C16.3431 44 15 42.6569 15 41V30Z",stroke:"white",strokeWidth:"2"}),a.createElement("path",{d:"M37.3897 4.54299L36.5002 2.81185L35.6108 4.54299L34.2302 7.22997L31.5432 8.61054L29.8121 9.5L31.5432 10.3895L34.2302 11.77L35.6108 14.457L36.5002 16.1881L37.3897 14.457L38.7703 11.77L41.4573 10.3895L43.1884 9.5L41.4573 8.61054L38.7703 7.22997L37.3897 4.54299Z",fill:"white",stroke:"#9747FF",strokeWidth:"2"}),a.createElement("path",{d:"M32.5002 13L33.3488 14.6515L35.0002 15.5L33.3488 16.3485L32.5002 18L31.6517 16.3485L30.0002 15.5L31.6517 14.6515L32.5002 13Z",fill:"white"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.7354 13.0517L12.4903 9.65937L9.09791 16.9045L16.343 20.2969L19.7354 13.0517ZM11.5271 7L6.43854 17.8677L17.3062 22.9562L22.3948 12.0886L11.5271 7Z",fill:"white"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M42.9135 24.8368C45.4136 26.0093 48.3909 24.9331 49.5634 22.4329C50.7359 19.9328 49.6597 16.9555 47.1596 15.783C44.6594 14.6105 41.6822 15.6867 40.5096 18.1869C39.3371 20.687 40.4134 23.6643 42.9135 24.8368ZM42.0643 26.6475C45.5645 28.2891 49.7327 26.7823 51.3742 23.2821C53.0157 19.782 51.509 15.6138 48.0088 13.9723C44.5086 12.3307 40.3404 13.8375 38.6989 17.3376C37.0574 20.8378 38.5641 25.006 42.0643 26.6475Z",fill:"white"}),a.createElement("mask",{id:"path-10-inside-1_1_174",fill:"white"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.1598 18.1883L22.3767 26.8505L25.8163 25.6623L26.9693 29.0001H24.8534L24.5789 28.2057L23.0297 28.7409C22.3137 28.9883 21.5194 28.8098 20.9779 28.28C20.4365 27.7502 20.2408 26.96 20.4726 26.2387L23.2557 17.5766C23.519 16.757 24.2772 16.1978 25.138 16.1885C25.9988 16.1791 26.7691 16.7216 27.0502 17.5353L28.4768 21.6649L30.026 21.1297C30.742 20.8824 31.5363 21.0608 32.0778 21.5906C32.6192 22.1204 32.8149 22.9107 32.5832 23.6319L30.8584 29.0001H28.7577L30.679 23.0201L27.2395 24.2084L25.1598 18.1883Z"})),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.1598 18.1883L22.3767 26.8505L25.8163 25.6623L26.9693 29.0001H24.8534L24.5789 28.2057L23.0297 28.7409C22.3137 28.9883 21.5194 28.8098 20.9779 28.28C20.4365 27.7502 20.2408 26.96 20.4726 26.2387L23.2557 17.5766C23.519 16.757 24.2772 16.1978 25.138 16.1885C25.9988 16.1791 26.7691 16.7216 27.0502 17.5353L28.4768 21.6649L30.026 21.1297C30.742 20.8824 31.5363 21.0608 32.0778 21.5906C32.6192 22.1204 32.8149 22.9107 32.5832 23.6319L30.8584 29.0001H28.7577L30.679 23.0201L27.2395 24.2084L25.1598 18.1883Z",fill:"white"}),a.createElement("path",{d:"M22.3767 26.8505L20.4726 26.2387L19.249 30.047L23.0297 28.7409L22.3767 26.8505ZM25.1598 18.1883L27.0502 17.5353L25.091 11.8642L23.2557 17.5766L25.1598 18.1883ZM25.8163 25.6623L27.7066 25.0092L27.0536 23.1189L25.1632 23.7719L25.8163 25.6623ZM26.9693 29.0001V31.0001H29.7763L28.8597 28.3471L26.9693 29.0001ZM24.8534 29.0001L22.963 29.6532L23.4283 31.0001H24.8534V29.0001ZM24.5789 28.2057L26.4693 27.5527L25.8163 25.6623L23.9259 26.3153L24.5789 28.2057ZM23.0297 28.7409L22.3767 26.8505L22.3767 26.8505L23.0297 28.7409ZM20.9779 28.28L22.3767 26.8505L22.3767 26.8505L20.9779 28.28ZM20.4726 26.2387L22.3767 26.8505L22.3767 26.8505L20.4726 26.2387ZM23.2557 17.5766L21.3515 16.9648L21.3515 16.9648L23.2557 17.5766ZM25.138 16.1885L25.1598 18.1883L25.138 16.1885ZM27.0502 17.5353L28.9405 16.8822L28.9405 16.8822L27.0502 17.5353ZM28.4768 21.6649L26.5864 22.318L27.2395 24.2084L29.1298 23.5553L28.4768 21.6649ZM30.026 21.1297L30.679 23.0201L30.679 23.0201L30.026 21.1297ZM32.0778 21.5906L30.679 23.0201L30.679 23.0201L32.0778 21.5906ZM32.5832 23.6319L34.4873 24.2437L34.4873 24.2437L32.5832 23.6319ZM30.8584 29.0001V31.0001H32.3165L32.7625 29.6119L30.8584 29.0001ZM28.7577 29.0001L26.8536 28.3883L26.0144 31.0001H28.7577V29.0001ZM30.679 23.0201L32.5832 23.6319L33.8067 19.8236L30.026 21.1297L30.679 23.0201ZM27.2395 24.2084L25.3491 24.8614L26.0021 26.7518L27.8925 26.0987L27.2395 24.2084ZM24.2808 27.4623L27.0639 18.8001L23.2557 17.5766L20.4726 26.2387L24.2808 27.4623ZM25.1632 23.7719L21.7236 24.9601L23.0297 28.7409L26.4693 27.5527L25.1632 23.7719ZM28.8597 28.3471L27.7066 25.0092L23.9259 26.3153L25.079 29.6532L28.8597 28.3471ZM24.8534 31.0001H26.9693V27.0001H24.8534V31.0001ZM26.7437 28.3471L26.4693 27.5527L22.6885 28.8588L22.963 29.6532L26.7437 28.3471ZM23.9259 26.3153L22.3767 26.8505L23.6828 30.6313L25.232 30.0961L23.9259 26.3153ZM22.3767 26.8505L22.3767 26.8505L19.5792 29.7095C20.6621 30.7692 22.2508 31.126 23.6828 30.6313L22.3767 26.8505ZM22.3767 26.8505L22.3767 26.8505L18.5684 25.6269C18.105 27.0694 18.4963 28.6499 19.5792 29.7095L22.3767 26.8505ZM22.3767 26.8505L25.1598 18.1883L21.3515 16.9648L18.5684 25.6269L22.3767 26.8505ZM25.1598 18.1883L25.1598 18.1883L25.1163 14.1886C23.3947 14.2073 21.8782 15.3256 21.3515 16.9648L25.1598 18.1883ZM25.1598 18.1883L25.1598 18.1883L28.9405 16.8822C28.3783 15.2549 26.8379 14.1699 25.1163 14.1886L25.1598 18.1883ZM25.1598 18.1883L26.5864 22.318L30.3672 21.0119L28.9405 16.8822L25.1598 18.1883ZM29.1298 23.5553L30.679 23.0201L29.3729 19.2394L27.8237 19.7746L29.1298 23.5553ZM30.679 23.0201L30.679 23.0201L33.4765 20.1611C32.3936 19.1015 30.805 18.7447 29.3729 19.2394L30.679 23.0201ZM30.679 23.0201L30.679 23.0201L34.4873 24.2437C34.9507 22.8012 34.5594 21.2207 33.4765 20.1611L30.679 23.0201ZM30.679 23.0201L28.9543 28.3883L32.7625 29.6119L34.4873 24.2437L30.679 23.0201ZM28.7577 31.0001H30.8584V27.0001H28.7577V31.0001ZM28.7749 22.4083L26.8536 28.3883L30.6618 29.6119L32.5832 23.6319L28.7749 22.4083ZM27.8925 26.0987L31.3321 24.9105L30.026 21.1297L26.5864 22.318L27.8925 26.0987ZM23.2694 18.8414L25.3491 24.8614L29.1298 23.5553L27.0502 17.5353L23.2694 18.8414Z",fill:"white",mask:"url(#path-10-inside-1_1_174)"}))}function O(){return a.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),a.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27 27V19H29V27H37V29H29V37H27V29H19V27H27Z",fill:"black",fillOpacity:"0.9"}))}function R(){return a.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"#F5F5F5"}),a.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27 27V19H29V27H37V29H29V37H27V29H19V27H27Z",fill:"black",fillOpacity:"0.9"}))}function P(){return a.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"#9747FF"}),a.createElement("rect",{width:"32",height:"32",transform:"translate(12 12)",fill:"#9747FF"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27 27V19H29V27H37V29H29V37H27V29H19V27H27Z",fill:"white"}))}a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:"M109.821 18.253A3 3 0 00106.916 16H11.87a3 3 0 00-2.906 3.747l25.215 98.001A3 3 0 0037.084 120h95.046a3 3 0 002.906-3.748l-25.215-98z",fill:e,className:u.cq,ref:i,...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:"M34.179 18.253A3 3 0 0137.084 16h95.046a3 3 0 012.906 3.747l-25.215 98.001a3 3 0 01-2.905 2.252H11.87a3 3 0 01-2.906-3.748l25.215-98z",fill:e,className:u.cq,ref:i,...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:"M68.787 118.279c1.324 2.295 5.102 2.295 6.426 0l56.403-97.77c1.195-2.072-.542-4.509-3.213-4.509H15.597c-2.67 0-4.408 2.437-3.213 4.508l56.403 97.771z",fill:e,className:u.cq,ref:i,...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:"M68.787 17.721c1.324-2.295 5.102-2.295 6.426 0l56.403 97.771c1.195 2.071-.542 4.508-3.213 4.508H15.597c-2.67 0-4.408-2.437-3.213-4.508l56.403-97.77z",fill:e,className:u.cq,ref:i,...T(e,n)}),a.createElement("path",{d:"M130.75 115.992L130.75 115.992C131.134 116.658 131.057 117.364 130.645 117.942C130.223 118.534 129.432 119 128.403 119H15.5971C14.5693 119 13.7776 118.534 13.3555 117.942C12.9431 117.364 12.8659 116.658 13.2503 115.992L13.2503 115.992L69.6533 18.221C70.0992 17.4482 70.9999 17 72.0001 17C73.0004 17 73.9011 17.4482 74.347 18.221L130.75 115.992Z",...I(e,o.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("circle",{cx:"72",cy:"72",r:"64",fill:e,className:u.cq,ref:i,...T(e,n)}),a.createElement("circle",{cx:"72",cy:"72",r:"62",fill:"none",...I(e,o.NLJ.SHAPE_WHITEBOARD_ELLIPSE,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("rect",{x:"8",y:"20",width:"128",height:"104",rx:"40",fill:e,className:u.cq,ref:i,...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("rect",{x:"16",y:"32",width:"112",height:"80",rx:"40",fill:e,className:u.cq,ref:i,...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("rect",{width:"79.374",height:"79.374",x:"15.874",y:"71.874",rx:"3.175",transform:"rotate(-45 15.874 71.874)",fill:e,className:u.cq,ref:i,...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("rect",{x:"16",y:"16",width:"112",height:"112",rx:"3.23077",fill:e,className:u.cq,ref:i,...T(e,n)}),a.createElement("rect",{x:"16",y:"16",width:"110",height:"110",fill:"none",rx:"3.23077",...I(e,o.NLJ.SHAPE_WHITEBOARD_SQUARE,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:v(n)?"M16.1763 30.5665C16.1763 28.9381 17.4061 27.1478 20.2318 25.336C23.0129 23.5529 27.1015 21.9106 32.2405 20.517C42.5046 17.7335 56.7388 16 72.5 16C88.2612 16 102.495 17.7335 112.759 20.517C117.898 21.9106 121.987 23.5529 124.768 25.336C127.594 27.1478 128.824 28.9381 128.824 30.5665C128.824 32.1949 127.594 33.9852 124.768 35.7969C121.987 37.5801 117.898 39.2224 112.759 40.616C102.495 43.3995 88.2612 45.1329 72.5 45.1329C56.7388 45.1329 42.5046 43.3995 32.2405 40.616C27.1015 39.2224 23.0129 37.5801 20.2318 35.7969C17.4061 33.9852 16.1763 32.1949 16.1763 30.5665Z M125.816 37.4319C126.996 36.6756 128.019 35.8576 128.824 34.9796V113.434C128.824 115.062 127.594 116.852 124.768 118.664C121.987 120.447 117.898 122.089 112.759 123.483C102.495 126.267 88.2612 128 72.5 128C56.7388 128 42.5046 126.267 32.2405 123.483C27.1015 122.089 23.0129 120.447 20.2318 118.664C17.4061 116.852 16.1763 115.062 16.1763 113.434V34.9796C16.981 35.8576 18.0038 36.6756 19.1835 37.4319C22.201 39.3666 26.5029 41.0724 31.7322 42.4905C42.2047 45.3305 56.6179 47.0751 72.5 47.0751C88.3821 47.0751 102.795 45.3305 113.268 42.4905C118.497 41.0724 122.799 39.3666 125.816 37.4319Z":"M15.5289 30.5664C15.5289 21.9851 41.0355 15.0288 72.5 15.0288C103.964 15.0288 129.471 21.9851 129.471 30.5664V113.433C129.471 122.015 103.964 128.971 72.5 128.971C41.0355 128.971 15.5289 122.015 15.5289 113.433V30.5664Z",fill:e,className:u.cq,ref:i}),a.createElement("path",{d:"M129.471 30.5664C129.471 39.1477 103.964 46.104 72.5 46.104C41.0355 46.104 15.5289 39.1477 15.5289 30.5664M129.471 30.5664C129.471 21.9851 103.964 15.0288 72.5 15.0288C41.0355 15.0288 15.5289 21.9851 15.5289 30.5664M129.471 30.5664V113.433C129.471 122.015 103.964 128.971 72.5 128.971C41.0355 128.971 15.5289 122.015 15.5289 113.433V30.5664",...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:v(n)?"M22.1503 121H117.979C117.215 120.301 116.503 119.415 115.844 118.393C114.15 115.767 112.657 112.023 111.417 107.473C108.931 98.3601 107.405 85.8189 107.405 72C107.405 58.1811 108.931 45.6399 111.417 36.5273C112.657 31.9771 114.15 28.2333 115.844 25.6072C116.503 24.5851 117.215 23.6986 117.979 23H22.1503C20.7231 23 19.1567 24.0712 17.5724 26.5282C16.0127 28.9471 14.5759 32.5037 13.3566 36.9744C10.9214 45.9038 9.40463 58.2875 9.40463 72C9.40463 85.7125 10.9214 98.0962 13.3566 107.026C14.5759 111.496 16.0127 115.053 17.5724 117.472C19.1567 119.929 20.7231 121 22.1503 121Z M117.272 26.5282C118.856 24.0712 120.423 23 121.85 23C123.277 23 124.843 24.0712 126.428 26.5282C127.987 28.9471 129.424 32.5037 130.643 36.9744C133.079 45.9038 134.595 58.2875 134.595 72C134.595 85.7125 133.079 98.0962 130.643 107.026C129.424 111.496 127.987 115.053 126.428 117.472C124.843 119.929 123.277 121 121.85 121C120.423 121 118.856 119.929 117.272 117.472C115.712 115.053 114.275 111.496 113.056 107.026C110.621 98.0962 109.104 85.7125 109.104 72C109.104 58.2875 110.621 45.9038 113.056 36.9744C114.275 32.5037 115.712 28.9471 117.272 26.5282Z":"M122.229 22.1504C129.738 22.1504 135.824 44.4687 135.824 72.0001C135.824 99.5315 129.738 121.85 122.229 121.85H22.5295C15.0209 121.85 8.93413 99.5315 8.93413 72.0001C8.93413 44.4687 15.0209 22.1504 22.5295 22.1504H122.229Z",fill:e,className:u.cq,ref:i}),a.createElement("path",{d:"M121.85 121.85C114.341 121.85 108.254 99.5315 108.254 72.0001C108.254 44.4687 114.341 22.1504 121.85 22.1504M121.85 121.85C129.358 121.85 135.445 99.5315 135.445 72.0001C135.445 44.4687 129.358 22.1504 121.85 22.1504M121.85 121.85H22.1503C14.6417 121.85 8.55492 99.5315 8.55492 72.0001C8.55492 44.4687 14.6417 22.1504 22.1503 22.1504H121.85",...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:v(n)?"M10.3815 22.7052C10.3815 21.211 11.5925 20 13.0867 20H103.561V46.1503C103.561 48.3081 105.31 50.0578 107.468 50.0578H133.618V121.295C133.618 122.789 132.407 124 130.913 124H13.0867C11.5925 124 10.3815 122.789 10.3815 121.295V22.7052Z M132.343 48.2543L105.364 21.2752V46.1503C105.364 47.3121 106.306 48.2543 107.468 48.2543H132.343Z":"M9.47974 121.295V22.7051C9.47974 20.7128 11.0944 19.0981 13.0867 19.0981H104.462L134.52 49.1559V121.295C134.52 123.287 132.905 124.902 130.913 124.902H13.0867C11.0944 124.902 9.47974 123.287 9.47974 121.295Z",fill:e,className:u.cq,ref:i}),a.createElement("path",{d:"M104.462 19.0981H13.0867C11.0944 19.0981 9.47974 20.7128 9.47974 22.7051V121.295C9.47974 123.287 11.0944 124.902 13.0867 124.902H130.913C132.905 124.902 134.52 123.287 134.52 121.295V49.1559M104.462 19.0981L134.52 49.1559M104.462 19.0981V46.1502C104.462 47.81 105.808 49.1559 107.468 49.1559H134.52",...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:v(n)?"M20.2185 21.6806C20.6341 20.6642 21.6236 20 22.7221 20H66.5728C67.6712 20 68.6608 20.6642 69.0763 21.6806L78.4719 44.6474H10.823L20.2185 21.6806Z M10.3815 46.4509H130.913C132.408 46.4509 133.619 47.6618 133.619 49.1561V121.295C133.619 122.789 132.408 124 130.913 124H13.0867C11.5925 124 10.3815 122.789 10.3815 121.295V46.4509Z":"M9.4798 121.295V45.549L19.3838 21.3393C19.9381 19.9836 21.2576 19.0981 22.7221 19.0981H66.5728C68.0372 19.0981 69.3567 19.9836 69.911 21.3393L79.815 45.549H130.913C132.906 45.549 134.52 47.1637 134.52 49.1559V121.295C134.52 123.287 132.906 124.902 130.913 124.902H13.0867C11.0945 124.902 9.4798 123.287 9.4798 121.295Z",fill:e,className:u.cq,ref:i}),a.createElement("path",{d:"M9.4798 45.549V121.295C9.4798 123.287 11.0945 124.902 13.0867 124.902H130.913C132.906 124.902 134.52 123.287 134.52 121.295V49.1559C134.52 47.1637 132.906 45.549 130.913 45.549H79.815M9.4798 45.549L19.3838 21.3393C19.9381 19.9836 21.2576 19.0981 22.7221 19.0981H66.5728C68.0372 19.0981 69.3567 19.9836 69.911 21.3393L79.815 45.549M9.4798 45.549H79.815",...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:"M132.825 31H11.1751C9.11354 31 7.59918 32.9715 8.0945 35.0106L27.3025 110.463C27.653 111.906 28.924 112.92 30.3831 112.92H113.617C115.076 112.92 116.347 111.906 116.698 110.463L135.906 35.0106C136.401 32.9715 134.886 31 132.825 31Z",fill:e,className:u.cq,ref:i,...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:"M93.2603 48.8289L74.8382 18.1385C73.7284 16.4493 71.2511 16.4493 70.1413 18.1385L51.7195 48.8289C51.3354 49.4134 50.7472 49.8337 50.0698 50.0076L14.5248 57.5829C12.5231 58.0968 11.7423 60.523 13.0688 62.1078L37.2107 88.5999C37.6704 89.1492 37.903 89.8531 37.8609 90.5682L34.3002 125.894C34.1806 127.929 36.2 129.41 38.1052 128.685L71.4895 114.399C72.1339 114.154 72.8457 114.154 73.49 114.399L106.874 128.685C108.779 129.41 110.799 127.929 110.679 125.894L107.118 90.5682C107.077 89.8531 107.309 89.1492 107.769 88.5999L131.911 62.1078C133.237 60.523 132.457 58.0968 130.455 57.5829L94.9096 50.0076C94.2325 49.8337 93.6443 49.4134 93.2603 48.8289Z",fill:e,className:u.cq,ref:i,...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:"M120.45 27H23.55C22.1417 27 21 28.1454 21 29.5583V86.4924C21 87.408 21.4877 88.2538 22.2789 88.7102L70.7289 116.66C71.5159 117.113 72.4841 117.114 73.2711 116.66L121.721 88.7102C122.512 88.2538 123 87.408 123 86.4924V29.5583C123 28.1454 121.858 27 120.45 27Z",fill:e,className:u.cq,ref:i,...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:"M8.24869 71.3645L24.1079 34.3397C24.6034 33.1629 25.7559 32.3976 27.0328 32.3976H116.967C118.244 32.3976 119.397 33.1629 119.892 34.3397L135.751 71.3645C136.083 72.152 136.083 73.04 135.751 73.8275L119.892 110.852C119.397 112.029 118.244 112.794 116.967 112.794H27.0328C25.7559 112.794 24.6034 112.029 24.1079 110.852L8.24869 73.8275C7.9171 73.04 7.9171 72.152 8.24869 71.3645Z",fill:e,className:u.cq,ref:i,...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:"M129.24 59.4647L74.475 16.7477C73.1969 15.7508 71.4046 15.7508 70.1265 16.7477L15.3612 59.4647C14.1752 60.3897 13.7044 61.9638 14.1876 63.388L34.9562 124.601C35.4429 126.035 36.7893 127 38.304 127H106.298C107.812 127 109.159 126.035 109.645 124.601L130.414 63.388C130.897 61.9638 130.426 60.3897 129.24 59.4647Z",fill:e,className:u.cq,ref:i,...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:"M94.8699 16H49.1301C48.3125 16 47.5284 16.3248 46.9503 16.9029L16.9029 46.9503C16.3248 47.5284 16 48.3125 16 49.1301V94.8699C16 95.6875 16.3248 96.4716 16.9029 97.0497L46.9503 127.097C47.5284 127.675 48.3125 128 49.1301 128H94.8699C95.6875 128 96.4716 127.675 97.0497 127.097L127.097 97.0497C127.675 96.4716 128 95.6875 128 94.8699V49.1301C128 48.3125 127.675 47.5284 127.097 46.9503L97.0497 16.9029C96.4716 16.3248 95.6875 16 94.8699 16Z",fill:e,className:u.cq,ref:i,...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:"M47.1111 47.1099V18.8718C47.1111 17.2857 48.3969 16 49.9829 16H94.0171C95.6031 16 96.8889 17.2857 96.8889 18.8718V46.632C96.8889 46.6325 96.8896 46.6325 96.8901 46.6325H125.128C126.714 46.6325 128 47.9182 128 49.5043V94.0171C128 95.6031 126.714 96.8889 125.128 96.8889H96.8894C96.8889 96.8889 96.8889 96.8896 96.8889 96.8901V125.128C96.8889 126.714 95.6031 128 94.0171 128H49.9829C48.3969 128 47.1111 126.714 47.1111 125.128V96.8894C47.1111 96.8889 47.1104 96.8889 47.1099 96.8889H18.8718C17.2857 96.8889 16 95.6031 16 94.0171V49.9829C16 48.3969 17.2857 47.1111 18.8718 47.1111H47.1106C47.1111 47.1111 47.1111 47.1104 47.1111 47.1099Z",fill:e,className:u.cq,ref:i,...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:v(n)?"M8.28613 31.5551C8.28613 30.119 9.45004 28.9551 10.8862 28.9551H16.664V115.045H10.8862C9.45004 115.045 8.28613 113.881 8.28613 112.445V31.5551Z M18.3974 115.045V28.9551H127.021V115.045H18.3974Z M128.754 115.045V28.9551H134.532C135.968 28.9551 137.132 30.119 137.132 31.5551V112.445C137.132 113.881 135.968 115.045 134.532 115.045H128.754Z":"M7.68134 31.5551C7.68134 29.6403 9.23327 28.0884 11.148 28.0884H17.7926H128.15H134.794C136.709 28.0884 138.261 29.6403 138.261 31.5551V112.445C138.261 114.36 136.709 115.912 134.794 115.912H128.15H17.7926H11.148C9.23327 115.912 7.68134 114.36 7.68134 112.445V31.5551Z",fill:e,className:u.cq,ref:i}),a.createElement("path",{d:"M17.7926 28.0884H11.148C9.23327 28.0884 7.68134 29.6403 7.68134 31.5551V112.445C7.68134 114.36 9.23327 115.912 11.148 115.912H17.7926M17.7926 28.0884V115.912M17.7926 28.0884H128.15M17.7926 115.912H128.15M128.15 28.0884V115.912M128.15 28.0884H134.794C136.709 28.0884 138.261 29.6403 138.261 31.5551V112.445C138.261 114.36 136.709 115.912 134.794 115.912H128.15",...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:"M3 31.9044C3 28.2578 6.22596 25.4544 9.83687 25.963L136.837 43.8517C139.798 44.2688 142 46.8027 142 49.793V112C142 115.314 139.314 118 136 118H9C5.68629 118 3 115.314 3 112V31.9044Z",fill:e,className:u.cq,ref:i,...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:"M27.8014 70.724L8.31687 37.526C7.36024 35.695 8.68491 33.5 10.7466 33.5H112.245C113.225 33.5 114.13 34.0241 114.62 34.8749L135.632 70.6249C136.122 71.4758 136.122 72.5242 135.632 73.3751L114.62 109.125C114.13 109.976 113.225 110.5 112.245 110.5H10.7466C8.68491 110.5 7.36024 108.305 8.31687 106.474L27.8014 73.276C28.219 72.4768 28.219 71.5232 27.8014 70.724Z",fill:e,className:u.cq,ref:i,...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:"M33.129 70.5542L11.8756 36.4458C10.776 34.4464 12.2225 32 14.5043 32H106.561C107.609 32 108.582 32.5478 109.126 33.4447L132.065 70.4447C132.645 71.4006 132.645 72.5994 132.065 73.5553L109.126 110.555C108.582 111.452 107.609 112 106.561 112H14.5043C12.2225 112 10.776 109.554 11.8756 107.554L33.129 73.4458C33.6241 72.5455 33.6241 71.4545 33.129 70.5542Z",fill:e,className:u.cq,ref:i,...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:"M8 24.41C8 23.0789 9.07886 22 10.41 22H133.59C134.921 22 136 23.0789 136 24.4095V109.272C136 110.813 134.515 111.919 133.037 111.477L117.877 106.938C101.942 102.167 84.7341 104.324 70.4706 112.88C55.667 121.76 37.6577 123.527 21.4094 117.693L9.33252 113.356C8.53306 113.069 8 112.312 8 111.462V24.41Z",fill:e,className:u.cq,ref:i,...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:v(n)?"M8.00262 23.8137C8.00262 22.5661 9.01375 21.5549 10.2614 21.5549H124.704C125.951 21.5549 126.962 22.5661 126.962 23.8137V28.0802H18.2924C16.2163 28.0802 14.5278 29.7638 14.5278 31.8442V105.774L9.51934 104.138L9.49978 104.132C8.61172 103.869 8.00262 103.052 8.00262 102.126V23.8137Z M18.2924 29.586H133.739C134.986 29.586 135.997 30.5972 135.997 31.8442V111.379C135.997 112.823 134.605 113.86 133.221 113.445L119.012 109.191C104.078 104.72 87.9501 106.742 74.5822 114.761C60.7079 123.083 43.8294 124.739 28.6012 119.271L17.2825 115.207C16.5333 114.937 16.0337 114.227 16.0337 113.432V31.8442C16.0337 30.5967 17.0466 29.586 18.2924 29.586Z":"M7.24973 23.8136C7.24973 22.1502 8.59794 20.802 10.2614 20.802H124.704C126.367 20.802 127.715 22.1502 127.715 23.8136V28.833H133.739C135.402 28.833 136.75 30.1813 136.75 31.8442V111.379C136.75 113.328 134.872 114.726 133.005 114.166L118.796 109.912C104.064 105.502 88.1559 107.496 74.9695 115.406C60.9016 123.845 43.7874 125.524 28.3468 119.979L17.028 115.915C15.98 115.539 15.2808 114.545 15.2808 113.432V106.812L9.28559 104.854C8.07793 104.495 7.24973 103.386 7.24973 102.126V23.8136Z",fill:e,className:u.cq,ref:i}),a.createElement("path",{d:"M127.715 28.833V23.8136C127.715 22.1502 126.367 20.802 124.704 20.802H10.2614C8.59794 20.802 7.24973 22.1502 7.24973 23.8136V102.126C7.24973 103.386 8.07793 104.495 9.28559 104.854L15.2808 106.812M127.715 28.833H18.2924C16.6315 28.833 15.2808 30.1803 15.2808 31.8442V106.812M127.715 28.833H133.739C135.402 28.833 136.75 30.1813 136.75 31.8442V111.379C136.75 113.328 134.872 114.726 133.005 114.166L118.796 109.912C104.064 105.502 88.1559 107.496 74.9695 115.406C60.9016 123.845 43.7874 125.524 28.3468 119.979L17.028 115.915C15.98 115.539 15.2808 114.545 15.2808 113.432V106.812",...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:"M8.94141 70.0367L59.3021 28.0736C60.95 26.7503 63.3967 27.9234 63.3967 30.037V50.1764C63.3967 50.1765 63.3968 50.1767 63.3969 50.1769V50.1769C63.3971 50.177 63.3973 50.1771 63.3974 50.1771H133.482C134.873 50.1771 136 51.3044 136 52.6951V91.3049C136 92.6956 134.873 93.823 133.482 93.823H63.3974C63.3973 93.823 63.3971 93.8231 63.3969 93.8232V93.8232C63.3968 93.8233 63.3967 93.8235 63.3967 93.8237V113.963C63.3967 116.077 60.95 117.25 59.3021 115.926L8.9414 73.9634C7.6862 72.9554 7.6862 71.0446 8.94141 70.0367Z",fill:e,className:u.cq,ref:i,...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:"M12.5068 70.5597C11.8311 71.4272 11.8311 72.5728 12.5068 73.4403L47.1369 117.894C48.7381 119.95 52.3844 118.949 52.3844 116.454V99.4781H129C130.657 99.4781 132 98.135 132 96.4781V48.7638C132 47.107 130.657 45.7638 129 45.7638H52.3844V27.5458C52.3844 25.0508 48.7381 24.05 47.1369 26.1055L12.5068 70.5597Z",fill:e,className:u.cq,ref:i,...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:"M135.059 73.9634L84.6979 115.926C83.05 117.25 80.6033 116.077 80.6033 113.963V93.8237C80.6033 93.8235 80.6032 93.8233 80.6031 93.8232V93.8232C80.6029 93.8231 80.6028 93.823 80.6026 93.823H10.518C9.12736 93.823 8 92.6956 8 91.3049V52.6951C8 51.3044 9.12736 50.1771 10.518 50.1771H80.6026C80.6027 50.1771 80.6029 50.177 80.6031 50.1769V50.1769C80.6032 50.1767 80.6033 50.1765 80.6033 50.1764V30.037C80.6033 27.9234 83.05 26.7503 84.6979 28.0736L135.059 70.0367C136.314 71.0446 136.314 72.9554 135.059 73.9634Z",fill:e,className:u.cq,ref:i,...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:"M131.493 70.5597C132.169 71.4272 132.169 72.5728 131.493 73.4403L96.8631 117.894C95.2619 119.95 91.6156 118.949 91.6156 116.454V99.4781H15C13.3432 99.4781 12 98.135 12 96.4781V48.7638C12 47.107 13.3432 45.7638 15 45.7638H91.6156V27.5458C91.6156 25.0508 95.2619 24.05 96.8631 26.1055L131.493 70.5597Z",fill:e,className:u.cq,ref:i,...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:v(n)?"M24.029 72C24.029 59.2726 28.9314 47.6903 36.951 39.0383L70.4029 72.4902L37.4306 105.472C29.1273 96.7676 24.029 84.9792 24.029 72Z M72.5239 70.3686L39.0571 36.9017C47.7613 28.5984 59.5497 23.5 72.529 23.5C85.5032 23.5 97.2876 28.5945 105.991 36.8921L72.5239 70.3686Z M74.6452 72.4899L108.098 39.0281C116.123 47.6811 121.029 59.2676 121.029 72C121.029 84.9793 115.931 96.7677 107.627 105.472L74.6452 72.4899Z M72.5242 74.6115L105.491 107.578C96.8387 115.598 85.2564 120.5 72.529 120.5C59.8015 120.5 48.2191 115.598 39.5671 107.578L72.5242 74.6115Z":"M72.529 122C100.143 122 122.529 99.6142 122.529 72C122.529 58.3137 117.03 45.9117 108.121 36.883C99.0547 27.6948 86.4569 22 72.529 22C44.9148 22 22.529 44.3858 22.529 72C22.529 99.6142 44.9148 122 72.529 122Z",fill:e,className:u.cq,ref:i}),a.createElement("path",{d:"M108.121 36.883C99.0547 27.6948 86.4569 22 72.529 22C44.9148 22 22.529 44.3858 22.529 72C22.529 99.6142 44.9148 122 72.529 122C100.143 122 122.529 99.6142 122.529 72C122.529 58.3137 117.03 45.9117 108.121 36.883ZM108.121 36.883L72.524 72.49M108.121 36.883L108.129 36.875M36.929 36.895L72.524 72.49M72.524 72.49L107.634 107.6M72.524 72.49L37.424 107.6",...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:v(n)?"M71.058 70.5H24.0807C24.8582 44.9063 45.4643 24.3002 71.058 23.5227V70.5Z M74.058 70.5V23.5227C99.6516 24.3002 120.258 44.9063 121.035 70.5H74.058Z M74.058 73.5H121.035C120.258 99.0936 99.6516 119.7 74.058 120.477V73.5Z M71.058 73.5V120.477C45.4643 119.7 24.8582 99.0936 24.0807 73.5H71.058Z":"M122.558 72C122.558 99.6142 100.172 122 72.558 122C44.9437 122 22.558 99.6142 22.558 72C22.558 44.3858 44.9437 22 72.558 22C100.172 22 122.558 44.3858 122.558 72Z",fill:e,className:u.cq,ref:i}),a.createElement("path",{d:"M122.558 72C122.558 99.6142 100.172 122 72.558 122M122.558 72C122.558 44.3858 100.172 22 72.558 22M122.558 72H72.558M72.558 122C44.9437 122 22.558 99.6142 22.558 72M72.558 122V72M22.558 72C22.558 44.3858 44.9437 22 72.558 22M22.558 72H72.558M72.558 22V72",...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:"M8 43.5V84.2344C8 98.0415 19.1929 109.234 33 109.234H33.4992C33.4994 109.234 33.4996 109.235 33.4997 109.235V109.235C33.4999 109.235 33.5 109.235 33.5 109.235V121.505C33.5 124.734 37.147 126.624 39.7975 124.769L61.9993 109.235V109.235C62.0001 109.235 62.001 109.234 62.002 109.234H111C124.807 109.234 136 98.0415 136 84.2344V43.5C136 29.6929 124.807 18.5 111 18.5H33C19.1929 18.5 8 29.6929 8 43.5Z",fill:e,className:u.cq,ref:i,...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:"M128 50V80.5754C128 92.7257 118.15 102.575 106 102.575H60.4126V102.575C60.4117 102.575 60.411 102.576 60.4103 102.577L42.151 115.27C39.9715 117.123 36.972 115.234 36.972 112.007L36.9715 102.576C36.9715 102.576 36.9717 102.576 36.9718 102.575C36.9718 102.575 36.9719 102.575 36.9718 102.575H26.486C20.6947 102.575 16 97.8807 16 92.0894V50C16 37.8497 25.8497 28 38 28H106C118.15 28 128 37.8497 128 50Z",fill:e,className:u.cq,ref:i,...T(e,n)}))),a.forwardRef(({color:e=p,toolbarIconScale:r=1,shapeStrokeProps:n},i)=>a.createElement(_,{toolbarIconScale:r},a.createElement("path",{d:v(n)?"M8.00348 31.8228C8.00348 30.3962 9.15968 29.24 10.5863 29.24H15.465V36.7015H8.00348V31.8228Z M17.1868 36.7015V29.24H133.414C134.84 29.24 135.997 30.3962 135.997 31.8228V36.7015H17.1868Z M17.1868 38.4233H135.997V112.177C135.997 113.604 134.84 114.76 133.414 114.76H17.1868V38.4233Z M15.465 38.4233V114.76H10.5863C9.15968 114.76 8.00348 113.604 8.00348 112.177V38.4233H15.465Z":"M7.64255 31.8229C7.64255 29.9208 9.1842 28.3792 11.0863 28.3792H16.8259H133.914C135.816 28.3792 137.357 29.9208 137.357 31.8229V37.5625V112.177C137.357 114.079 135.816 115.621 133.914 115.621H16.8259H11.0863C9.1842 115.621 7.64255 114.079 7.64255 112.177V37.5625V31.8229Z",fill:e,className:u.cq,ref:i}),a.createElement("path",{d:"M7.64255 37.5625V31.8229C7.64255 29.9208 9.1842 28.3792 11.0863 28.3792H16.8259M7.64255 37.5625V112.177C7.64255 114.079 9.1842 115.621 11.0863 115.621H16.8259M7.64255 37.5625H16.8259M16.8259 115.621H133.914C135.816 115.621 137.357 114.079 137.357 112.177V37.5625M16.8259 115.621V37.5625M137.357 37.5625V31.8229C137.357 29.9208 135.816 28.3792 133.914 28.3792H16.8259M137.357 37.5625H16.8259M16.8259 28.3792V37.5625",...T(e,n)}))),a.forwardRef(({color:e=h,toolbarIconScale:r=1},n)=>a.createElement("svg",{width:31*r,height:34*r,viewBox:"0 0 32 34",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.7929 1.70711C22.4024 1.31658 22.4024 0.683417 22.7929 0.292893C23.1834 -0.0976311 23.8166 -0.0976311 24.2071 0.292893L30.2071 6.29289C30.5976 6.68342 30.5976 7.31658 30.2071 7.70711L24.2071 13.7071C23.8166 14.0976 23.1834 14.0976 22.7929 13.7071C22.4024 13.3166 22.4024 12.6834 22.7929 12.2929L27.0858 8H20.6834C17.922 8 15.6834 10.2386 15.6834 13V27C15.6834 30.866 12.5494 34 8.68341 34H1.5C0.947715 34 0.5 33.5523 0.5 33C0.5 32.4477 0.947715 32 1.5 32H8.68341C11.4448 32 13.6834 29.7614 13.6834 27V13C13.6834 9.13401 16.8174 6 20.6834 6H27.0858L22.7929 1.70711Z",fill:e,ref:n}))),a.forwardRef(({color:e=h,toolbarIconScale:r=1},n)=>a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:28*r,height:30*r,viewBox:"0 0 28 30",fill:"none"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.8987 2.17466C17.3465 2.18604 16.8897 1.74765 16.8783 1.19548C16.8669 0.643314 17.3053 0.186467 17.8575 0.175085L26.341 0.000216699C26.8931 -0.011165 27.35 0.427228 27.3614 0.979396L27.5362 9.46288C27.5476 10.015 27.1092 10.4719 26.5571 10.4833C26.0049 10.4947 25.548 10.0563 25.5367 9.50409L25.4197 3.82765L1.73377 29.4084C1.35854 29.8137 0.725841 29.838 0.320597 29.4628C-0.0846483 29.0875 -0.108983 28.4548 0.266244 28.0496L24.3476 2.04173L17.8987 2.17466Z",fill:e,ref:n})))},499109:(e,r,n)=>{n.d(r,{UM:()=>l,zW:()=>c});var a=n(411855),i=n(629019),o=n.n(i),s=n(153234);n(163023);let l="dlt_banner_shortcut_button",c=(0,a.memo)((0,a.forwardRef)(function(e,r){let{shortcut:n,onClick:i,isActive:l,recordingKey:c,dataElementTarget:d,isPressed:u}=e,m=(0,s.rf)((0,s.Pt)("dltBannerShortcutButton",c),"click",i),p=o()("dlt_banner_inline_elements--shortcutButton--LOMMi",{"dlt_banner_inline_elements--active--zWunk":l,"dlt_banner_inline_elements--pressed--36odr":u});return a.createElement("button",{ref:r,className:p,onClick:m,"data-element-target":d},n)}))},330505:(e,r,n)=>{var a=n(411855),i=n(188507),o=n(299321),s=n(812821),l=n(499109);(0,a.memo)(function(e){let r=(0,i.d4)(e=>e.mirror.appModel.currentTool===o.NLJ.COMMENTS),n=(0,a.useCallback)(()=>{r?o.glU.triggerActionInUserEditScope("set-tool-default",{source:l.UM}):o.glU.triggerActionInUserEditScope("set-tool-comments",{source:l.UM})},[r]);return a.createElement(l.zW,{shortcut:"C",onClick:n,isActive:r,recordingKey:"comment",isPressed:e.isPressed})}),(0,a.memo)(function(e){let r=(0,i.d4)(e=>"REACTING_OR_CHATTING"===e.multiplayerEmoji.type&&e.multiplayerEmoji.isChatting),n=(0,a.useCallback)(e=>{if(r){s.CB.closeWheel();return}s.CB.startChat(e.clientX,e.clientY,l.UM)},[r]);return a.createElement(l.zW,{shortcut:"/",onClick:n,isActive:r,recordingKey:"cursorChat",dataElementTarget:"dlt-banner-chat-shortcut",isPressed:e.isPressed})}),(0,a.memo)(function(e){let r=(0,a.useRef)(null),n=(0,i.d4)(e=>{let r="WHEEL"===e.multiplayerEmoji.type,n="REACTING_OR_CHATTING"===e.multiplayerEmoji.type&&!!e.multiplayerEmoji.imageUrl;return r||n}),o=(0,a.useCallback)(()=>{if(n){s.CB.closeWheel();return}let e=r.current?.getBoundingClientRect()??{x:0,y:0},a=e.x+100,i=e.y-200;s.CB.handleShortcutPressWithType({viewportX:a,viewportY:i,source:l.UM,wheelType:"REACTION"}),s.CB.handleShortcutRelease(a,i)},[n]);return a.createElement(l.zW,{ref:r,shortcut:"E",onClick:o,isActive:n,recordingKey:"emote",dataElementTarget:"dlt-banner-emote-shortcut",isPressed:e.isPressed})})},202232:(e,r,n)=>{n.d(r,{HY:()=>o,YB:()=>i,fK:()=>s,hx:()=>l}),n(411855),n(188507),n(299321),n(629019);var a=n(153234);n(140908),n(356390),n(848661),n(457630),n(161459),n(509742);let i=1500,o="delightful-toolbar",s="delightful_toolbar";function l(e){return a.Pt("delightfulToolbar",e)}},161459:(e,r,n)=>{n.d(r,{BD:()=>g,Dq:()=>_,Iz:()=>u,LX:()=>y,T7:()=>E,XQ:()=>m,g5:()=>d,n6:()=>f,qB:()=>p,uM:()=>c,wv:()=>l,zQ:()=>h});var a=n(299321),i=n(966712),o=n(428654),s=n(42173);let l=4,c=8,d=24,u=40,m=[{type:"SOLID",color:(0,s.BV)(a.daH.BLACK,"base")}],p=l,h=1,_=[{type:"SOLID",color:(0,s.BV)(a.daH.HIGHLIGHT_YELLOW,"highlight")}],g=(0,s.BV)(a.Ez5?.uiState().showUI3Colors.getCopy()?a.daH.STICKY_GRAY_UI3:a.daH.STICKY_GRAY_LIGHT,"sticky"),f=o.F.parse((0,s.Mr)((0,i.kc)().figjam_ui3_color_palette?a.daH.WHITE:a.daH.VIOLET_LIGHT)),E=(0,i.kc)().figjam_ui3_color_palette?a.xbm.SOLID:a.xbm.NONE,y=(0,s.BV)(a.daH.GRAY,"baseLight")},219001:(e,r,n)=>{n.d(r,{nS:()=>o});var a=n(411855),i=(e=>(e.ClickOut="clickOut",e.KeyboardEsc="keyboardEsc",e.ToolSelected="toolSelected",e.ChevronClicked="chevronClicked",e.PropertyChanged="propertyChanged",e.CloseButton="closeButton",e.ClickDemotedDlt="clickDemotedDlt",e.OpenedShapesSidebar="openedShapesSidebar",e))(i||{});let o=a.createContext({state:{draggedTool:void 0,submenu:{tool:void 0,shouldCloseOnClickOut:!0},draggedToolCanCancel:!0,shouldFinishClick:!0,shouldDemoteDlt:!1},dispatch:()=>null})},712546:(e,r,n)=>{n.d(r,{FF:()=>h,hv:()=>_,rD:()=>p,oV:()=>m,bz:()=>g}),n(411855);var a=n(188507),i=n(563706);n(411045),n(303345);var o=n(809831),s=n(965480),l=n(299321);function c(){return!!(0,a.d4)(e=>e.mirror.appModel.activeCanvasEditModeType===l.m1T.HISTORY&&e.versionHistory.activeId&&"current_version"!==e.versionHistory.activeId)}var d=n(29680);n(860178),n(99506),n(819338);var u=n(554905);function m(){let e=(0,d.aV)(),r=(0,o.ow)(),n=(0,u.Td)(),s=(0,a.d4)(e=>!!e.user);return!e&&r&&n&&!i.Ay.isIpadNative&&s}function p(){let e=(0,d.aV)(),r=(0,o.ow)(),n=c(),s=(0,a.d4)(e=>!!e.user);return!e&&r&&n&&!i.Ay.isIpadNative&&s}function h(){let e=(0,a.d4)(e=>e.mirror?.appModel.showUi),r=(0,o.ow)(),n=(0,a.d4)(e=>e.mirror?.appModel.isReadOnly),i=m(),s=p();return r&&e&&(!n||i||s)}function _(e={}){let{isEnabledForViewers:r}=e,n=(0,d.aV)(),a=(0,u.Td)(),i=c();return n||a&&!r||i&&!r}function g(){let e=(0,s.kD)(),r=(0,s.tS)(),n=(0,u.Td)();return!!e&&r&&n}n(219001),n(525040)},178911:(e,r,n)=>{n.d(r,{Hm:()=>f,yl:()=>g});var a=n(411855),i=n(188507),o=n(299321),s=n(902139),l=n(988022),c=n(369870),d=n(498606),u=n(511080),m=n(202232),p=n(212981),h=n(383847),_=n(509742);let g="delightful-toolbar-universal-insert";function f(){let e=(0,i.d4)(e=>e.universalInsertModal.showing),r=(0,i.d4)(e=>e?.mirror?.appModel?.currentTool===o.NLJ.NONE),n=e&&r,f=(0,i.wA)(),E=(0,a.useCallback)(()=>{n?(f(s.KE()),o.glU.triggerActionInUserEditScope("set-tool-default",{source:m.fK})):(o.glU.triggerActionInUserEditScope("clear-tool",{source:m.fK}),f(s.En({initialX:0,initialY:0})),(0,l.Cu)({source:m.fK},"action_open_universal_insert_modal"))},[f,n]);return a.createElement("div",{"data-element-target":"delightful-toolbar-universal-insert-button",className:_.Zh},a.createElement(h.IB,{toolType:"universal-insert",recordingKey:(0,m.hx)("universal-insert"),isSelected:n,className:c.pb.isGoogleClassroomIntegration()?_.vy:_.pN,onClick:E,"data-tooltip-type":d.Ib.LOOKUP,"data-tooltip":"browse-all-resources-dlt",hasOpenSubmenu:n,onboardingKey:g},e=>a.createElement(p.gd,{toolType:"universal-insert",inactiveIcon:a.createElement(u.lV,null),hoveredIcon:a.createElement(u.AZ,null),activeIcon:a.createElement(u.cN,null),isSelected:n,isHovered:e})))}},48009:(e,r,n)=>{n.d(r,{xX:()=>K});var a=n(411855),i=n(188507),o=n(299321),s=n(629019),l=n.n(s),c=n(966712),d=n(374626),u=n(192437),m=n(154254),p=n(47506),h=n(753643),_=n(801161),g=n(902139),f=n(988022),E=n(128765),y=n(369870),b=n(460289),I=n(694687),T=n(860178),v=n(336599),S=n(809073),w=n(498606),A=n(369394),N=n(867795),C=n(511080),L=n(123975),O=n(202232),R=n(297483),P=n(178911),D=n(931397),k=n(212981),M=n(333343),F=n(383847),x=n(509742),U=n(524639);let B="delightful-toolbar-universal-insert-button-icon",V=[{src:(0,c.ck)("9cd2eb2ff31cb221dce81ca1e67aa51e12b24166"),zIndex:0,width:50,height:50,translateStart:{x:42,y:36},rotateStart:-15,translateEnd:{x:42,y:36},rotateEnd:-15},{src:(0,c.ck)("276fdbb8f6edbcb958f84235ebfc58b63eab0fc2"),zIndex:1,width:50,height:50,translateStart:{x:95,y:36},rotateStart:15,translateEnd:{x:95,y:36},rotateEnd:15},{src:(0,c.ck)("94db9cf93e2a26f927d5f1a7f066f8b045985011"),zIndex:2,width:50,height:50,translateStart:{x:42,y:66},rotateStart:-10,translateEnd:{x:42,y:66},rotateEnd:-10},{src:(0,c.ck)("004b50b1460d47029608e9aaa66c09c1c94c6741"),zIndex:3,width:50,height:50,translateStart:{x:95,y:66},rotateStart:10,translateEnd:{x:95,y:66},rotateEnd:10}];function G({recentItems:e,toolbarIconScale:r,isModalOpen:n}){let i=(0,R.ws)(e);return a.createElement("div",{className:l()(x.z6,x.ac,U.JY),style:{width:112*r}},V.map((e,o)=>{var s,l;let c=i[o];return a.createElement(W,{key:c?.id||e.src,zIndex:5+e.zIndex,width:e.width*r,height:e.height*r,isModalOpen:n,transform:(s={x:e.translateStart.x*r,y:e.translateStart.y*r},l=e.rotateStart,`translate(calc(-50% + ${s.x}px), calc(-50% + ${s.y}px)) rotate(${l}deg)`)},c?a.createElement(D.E,{item:c,width:e.width*r,height:e.height*r,disableTooltips:!0}):a.createElement("img",{src:e.src,alt:"",className:U.VF}))}))}function H({onClick:e,isSelected:r,isHovered:n}){return a.createElement("div",{className:m.cx.flex.itemsCenter.justifyCenter.mx20.h40.w40.$},a.createElement(F.IB,{toolType:"universal-insert-collage",recordingKey:(0,O.hx)("universal-insert-plus"),isSelected:r,hasOpenSubmenu:!1,onClick:e,"data-tooltip-type":w.Ib.LOOKUP,"data-tooltip":"browse-all-resources-dlt","data-tooltip-offset-y":-2},a.createElement(k.gd,{toolType:"universal-insert-collage",inactiveIcon:a.createElement(C.nX,null),hoveredIcon:a.createElement(C.ZH,null),activeIcon:a.createElement(C.cs,null),isSelected:r,isHovered:n})))}function W({zIndex:e,width:r,height:n,transform:i,isModalOpen:o,children:s}){return a.createElement("div",{className:l()(U.s,{[U.r3]:o}),style:{zIndex:e,width:r,height:n,transform:i}},a.createElement("div",{className:U.f_},s))}function K(e,r){let[n,i]=(0,a.useState)(!1),o=(0,a.useRef)(!1),s=(0,a.useRef)([]);return s.current=r,(0,a.useEffect)(()=>{e||o.current||(o.current=!0,async function(){let e=[];for(let r of s.current)r&&e.push(new Promise(e=>{let n=new Image;n.src=r,n.addEventListener("load",()=>e()),n.addEventListener("error",()=>e())}));await Promise.all(e),i(!0)}())},[e]),n}function Y({toolbarIconScale:e}){let r=(0,T.TA)(),[n,s]=(0,a.useState)(!1),l=(0,i.wA)(),c=(0,R.NT)(),u=(0,d.md)(L.c),m=(0,b.XM)(),w=(0,I.sZ)(),C=(0,i.d4)(e=>e.universalInsertModal.showing),k=(0,E.fG)(),V=function(e,r){let n=(0,i.wA)();return(0,a.useCallback)(()=>{(0,p.YQ)({id:"figjam-saves"}),e?(n(g.KE()),o.glU.triggerActionInUserEditScope("set-tool-default",{source:O.fK})):(o.glU.triggerActionInUserEditScope("clear-tool",{source:O.fK}),n(_.jD()),n(g.En({initialX:0,initialY:0,initialTab:r?.stage!=="FULL"?N.p.MORE:void 0})),(0,f.Cu)({source:O.fK},"action_open_universal_insert_collage_modal"))},[e,r,n])}(C,u);(0,a.useEffect)(()=>{l(A.cd.fetchTemplatesMetadata({key:S.$A.FigJam,orgId:w?.id})),l(A.cd.fetchWidgetsMetadata({key:S.$A.FigJam})),s(!0)},[l,w?.id]);let W=(0,v.oh)(h.fC),Y=(0,v.oh)(A.cd.fetchTemplatesMetadata.loadingKeyForPayload({key:S.$A.FigJam})),$=(0,v.oh)(A.cd.fetchWidgetsMetadata.loadingKeyForPayload({key:S.$A.FigJam})),j=K(!n||W||Y||$,c.map(e=>(0,D.h)(e,k,r??void 0)))?c.map(e=>e.id||"").sort((e,r)=>e.localeCompare(r)).join(""):"loading",z=m&&u?.stage==="MINIMIZED_ZERO"||u?.stage==="MINIMIZED"||u?.stage==="CUT_OFF";return a.createElement(M.XN,{alignment:"CENTER"},a.createElement(F.IB,{toolType:"universal-insert-collage",recordingKey:(0,O.hx)("universal-insert-collage"),isSelected:C,className:y.pb.isGoogleClassroomIntegration()?x.vy:x.qs,onClick:V,ariaLabel:"browse-all-resources-dlt",onboardingKey:P.yl,"data-does-not-dismiss-modal":!0,hasOpenSubmenu:C},r=>a.createElement(M.ti,{isSelected:r,noScaleAnimation:!0,isRightEdge:!0},a.createElement("div",{className:U.Ge,"data-onboarding-key":"figjam-saves","data-element-target":B,"data-cancel-insertable-resource-drag-and-drop":!0},!z&&a.createElement(G,{key:j,recentItems:c,toolbarIconScale:e,isModalOpen:C}),a.createElement(H,{onClick:V,isSelected:C,isHovered:r})))))}function $(){return a.createElement(M.XN,{alignment:"CENTER"},a.createElement("div",{"data-element-target":B,className:U.V6},a.createElement(P.Hm,null)))}(0,a.memo)(function({toolbarIconScale:e}){return a.createElement(u.tH,{fallback:a.createElement($,null),boundaryKey:"UniversalInsertCollage"},a.createElement(Y,{toolbarIconScale:e}))})},548785:(e,r,n)=>{var a=n(299321),i=n(966712);n(511080),(0,i.ck)("207bc31b9911b06b2b85797781d0a68486b15dc6"),(0,i.ck)("476a2d6160ae8dc502e8458d538777675394443b"),(0,i.ck)("06cceafc7034bc35db5fb309ab70717615526a5c"),(0,i.ck)("5ab93eef0010c3b6af23e4c8fd15e3f427a8799a"),(0,i.ck)("98d711f562ff8f5c043c5c622ef61f3654da25cb"),(0,i.ck)("45389442e64125e09f25fc9a0eaf4bc27e4da760"),(0,i.ck)("ac68553557253b75a1bfc3ad0996bcbacefa8650"),a.daH.BLACK,a.daH.GRAY_DARK,a.daH.GRAY_LIGHT,a.daH.RED,a.daH.ORANGE,a.daH.YELLOW,a.daH.GREEN,a.daH.BLUE,a.daH.VIOLET,a.daH.WHITE,Array.from(new Map([["SQUARE",a.NLJ.SHAPE_WHITEBOARD_SQUARE],["ELLIPSE",a.NLJ.SHAPE_WHITEBOARD_ELLIPSE],["ROUNDED_RECTANGLE",a.NLJ.SHAPE_WHITEBOARD_ROUNDED_RECTANGLE],["DIAMOND",a.NLJ.SHAPE_WHITEBOARD_DIAMOND],["TRIANGLE_UP",a.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP],["TRIANGLE_DOWN",a.NLJ.SHAPE_WHITEBOARD_TRIANGLE_DOWN],["PARALLELOGRAM_RIGHT",a.NLJ.SHAPE_WHITEBOARD_PARALLELOGRAM_RIGHT],["PARALLELOGRAM_LEFT",a.NLJ.SHAPE_WHITEBOARD_PARALLELOGRAM_LEFT],["ENG_DATABASE",a.NLJ.SHAPE_WHITEBOARD_ENG_DATABASE],["ENG_QUEUE",a.NLJ.SHAPE_WHITEBOARD_ENG_QUEUE],["ENG_FILE",a.NLJ.SHAPE_WHITEBOARD_ENG_FILE],["ENG_FOLDER",a.NLJ.SHAPE_WHITEBOARD_ENG_FOLDER],["TRAPEZOID",a.NLJ.SHAPE_WHITEBOARD_TRAPEZOID],["STAR",a.NLJ.SHAPE_WHITEBOARD_STAR],["SHIELD",a.NLJ.SHAPE_WHITEBOARD_SHIELD],["HEXAGON",a.NLJ.SHAPE_WHITEBOARD_HEXAGON],["PENTAGON",a.NLJ.SHAPE_WHITEBOARD_PENTAGON],["OCTAGON",a.NLJ.SHAPE_WHITEBOARD_OCTAGON],["PLUS",a.NLJ.SHAPE_WHITEBOARD_PLUS],["PREDEFINED_PROCESS",a.NLJ.SHAPE_WHITEBOARD_PREDEFINED_PROCESS],["MANUAL_INPUT",a.NLJ.SHAPE_WHITEBOARD_MANUAL_INPUT],["CHEVRON",a.NLJ.SHAPE_WHITEBOARD_CHEVRON],["DOCUMENT_SINGLE",a.NLJ.SHAPE_WHITEBOARD_DOCUMENT_SINGLE],["DOCUMENT_MULTIPLE",a.NLJ.SHAPE_WHITEBOARD_DOCUMENT_MULTIPLE],["ARROW_LEFT",a.NLJ.SHAPE_WHITEBOARD_ARROW_LEFT],["ARROW_RIGHT",a.NLJ.SHAPE_WHITEBOARD_ARROW_RIGHT],["SUMMING_JUNCTION",a.NLJ.SHAPE_WHITEBOARD_SUMMING_JUNCTION],["OR",a.NLJ.SHAPE_WHITEBOARD_OR],["SPEECH_BUBBLE",a.NLJ.SHAPE_WHITEBOARD_SPEECH_BUBBLE],["INTERNAL_STORAGE",a.NLJ.SHAPE_WHITEBOARD_INTERNAL_STORAGE],["MINDMAP_TREE_NUCLEUS",a.NLJ.SHAPE_WHITEBOARD_MINDMAP_TREE_NUCLEUS]]),([e,r])=>[r,e])},972283:(e,r,n)=>{n.d(r,{AH:()=>F});var a=n(411855),i=n(188507),o=n(299321),s=n(629019),l=n.n(s),c=n(563706),d=n(163023),u=n(939863),m=n(145519),p=n(625651),h=n(501972),_=n(812821),g=n(701882),f=n(460289),E=n(498606),y=n(511080),b=n(202232),I=n(212981),T=n(383847),v=n(525040),S=n(522322),w=n(509742),A=n(533600);let N="delightful-toolbar-stamp-button",C={padBottom:30,height:512},L=100*C.padBottom/C.height,O=`calc(${L}% + -14px)`,R=`translateY(${O})`;function P({onClickToOpenWheel:e,leaveVotingSessionAndCloseWheel:r,numVotesRemaining:n,hasRemainingVotes:i}){let[o,s]=(0,a.useState)(!1),m=i&&!c.Ay.isIpad;D({shouldOpenWheelOnHover:m,isHovered:o});let p=i?w.rf:w.he;return a.createElement("button",{className:l()(w.tS,p),onMouseEnter:()=>!c.Ay.isIpad&&s(!0),onMouseLeave:()=>!c.Ay.isIpad&&s(!1),onClick:()=>{m||(i?e():r())},tabIndex:-1},i?a.createElement("span",{className:w._V},(0,u.tx)("voting.delightful_toolbar.votes_remaining",{numVotes:n})):a.createElement(a.Fragment,null,a.createElement(d.B,{className:w.oE,svg:A.A}),a.createElement("span",{className:w._V},(0,u.tx)("voting.delightful_toolbar.no_votes_remaining"))))}function D({shouldOpenWheelOnHover:e,isHovered:r}){let n=e&&r;(0,a.useEffect)(()=>{if(!n)return;let e=setTimeout(()=>F({source:"peeking_vote_wheel_hover",openedViaHover:!0}),100);return()=>clearTimeout(e)},[n])}function k({onClickToOpenWheel:e,isStampToolSelected:r,hasRemainingVotes:n}){let[i,o]=(0,a.useState)(!1),s=a.useRef(null),d=M(),u=function({isHidden:e,wheelRef:r}){let[n,i]=a.useState(!1);return a.useEffect(()=>{if(e){i(!0);return}let n=r.current;if(!n){i(!1);return}let a=()=>{i(!1),n.removeEventListener("transitionend",a)};return n.addEventListener("transitionend",a),()=>{n.removeEventListener("transitionend",a)}},[e,r]),e||n}({isHidden:d,wheelRef:s}),m=n&&!c.Ay.isIpad;D({shouldOpenWheelOnHover:m,isHovered:i}),(0,a.useEffect)(()=>{let e=s.current;if(!e)return;let r={transform:`${R} scale(1.05)`},n={transform:`${R} scale(1)`},a=new Animation(new KeyframeEffect(e,[{transform:"translateY(100%) scale(0.1)"},r],{duration:450,easing:"ease-out"})),i=new Animation(new KeyframeEffect(e,[r,n],{duration:200,easing:"ease-in-out"})),o=new Animation(new KeyframeEffect(e,[n,n],{duration:400})),l=new Animation(new KeyframeEffect(e,[n,{}],{duration:300,easing:"cubic-bezier(0.37, 0, 0.48, 1.33)"}));return a.play(),a.finished.then(()=>i.play()).catch(()=>{}),i.finished.then(()=>o.play()).catch(()=>{}),o.finished.then(()=>l.play()).catch(()=>{}),()=>{a.cancel(),o.cancel(),l.cancel()}},[s]);let p=!(r||n);return a.createElement("div",{className:w.$},a.createElement("button",{ref:s,tabIndex:-1,className:l()(w.uA,{[w.hA]:p,[w.wj]:d,[w.tq]:u,[w.FP]:!n}),onMouseEnter:()=>!c.Ay.isIpad&&o(!0),onMouseLeave:()=>!c.Ay.isIpad&&o(!1),onClick:()=>!m&&e()}))}function M(){return(0,i.d4)(e=>"WHEEL"===e.multiplayerEmoji.type&&["STAMP1","STAMP2"].includes(e.multiplayerEmoji.wheelType))}function F({source:e,openedViaHover:r=!1}){let n=(0,h.Tc)(N),a=(0,h.Tc)(b.HY);if(n||a){let i=n?n.getBoundingClientRect():a.getBoundingClientRect(),o=i.x+i.width/2,s=i.y-(g.l+2)-14;_.CB.handleShortcutPressWithType({viewportX:o,viewportY:s,source:e,openedViaHover:r,wheelType:"STAMP"}),_.CB.handleShortcutRelease(o,s)}}(0,a.memo)(function(){let e=(0,i.wA)(),r=M(),n=(0,i.d4)(e=>e?.mirror?.appModel?.currentTool===o.NLJ.STAMP)||r,s=(0,f.XM)(),c=(0,S.hr)(),d=c>0,u=(0,i.d4)(e=>e.universalInsertModal.showing),h=(0,v.bu)(),g=(0,a.useCallback)(()=>{s&&e(p.H1({votingStage:o.W8Y.NOT_JOINED})),e(m.Ho())},[e,s]),A=(0,a.useCallback)(()=>{r?_.CB.closeWheel():F({source:b.fK})},[r]);return a.createElement("div",{"data-element-target":N,className:l()(w.Zh,w.UJ)},a.createElement(T.IB,{toolType:"stamp",recordingKey:(0,b.hx)("stamp"),isSelected:n,className:w.iE,onClick:A,"data-tooltip-type":E.Ib.LOOKUP,"data-tooltip":"set-tool-stamp",onboardingKey:"stamp",tooltipLocation:s?"below":"above",tooltipOffset:s?{offsetX:0,offsetY:-14}:void 0,"data-tooltip-bottom-flip-margin":s?0:void 0,hasOpenSubmenu:!1},e=>a.createElement(I.gd,{toolType:"stamp",inactiveIcon:a.createElement(y.oV,null),hoveredIcon:a.createElement(y.mS,null),activeIcon:a.createElement(y.dF,null),isSelected:n,isHovered:e})),s&&!u&&!h&&a.createElement(a.Fragment,null,a.createElement(P,{leaveVotingSessionAndCloseWheel:g,onClickToOpenWheel:A,numVotesRemaining:c,hasRemainingVotes:d}),a.createElement(k,{onClickToOpenWheel:A,isStampToolSelected:n,hasRemainingVotes:d})))})},807671:(e,r,n)=>{n.d(r,{J:()=>l});var a=n(411855),i=n(629019),o=n.n(i),s=n(509742);function l({className:e,disabled:r,isDragging:n,children:i,"aria-hidden":l}){return a.createElement("div",{"aria-disabled":r,"aria-hidden":l,className:o()(s.F0,{[e||""]:!!e,[s.FK]:r,[s.Bx]:n}),"data-fullscreen-intercept":!0},i)}},212981:(e,r,n)=>{n.d(r,{gd:()=>o});var a=n(411855);n(629019),n(153234),n(522739),n(939863),n(511080),n(712546);var i=n(844383);function o({toolType:e,inactiveIcon:r,hoveredIcon:n,activeIcon:o,isHovered:s,isSelected:c}){return a.createElement(l,{toolType:e},a.createElement("div",{className:i.g$},c?o:s?n:r))}let s=a.createContext({enableHiding:!1,visibleTool:"text"});function l({toolType:e,children:r}){let n=a.useContext(s);return a.createElement(a.Fragment,null,n.enableHiding&&n.visibleTool!==e?null:r)}},333343:(e,r,n)=>{n.d(r,{XN:()=>s,ti:()=>l});var a=n(411855),i=n(629019),o=n.n(i);function s({alignment:e,children:r,onMouseEnter:n,onMouseLeave:i,innerRef:s}){return a.createElement("div",{className:o()("dlt_submenu--submenuContainer--M4ufs delightful_toolbar--passthruLayout--gz5r2",{"dlt_submenu--submenuLeftAligned--ADsMj":"LEFT"===e,"dlt_submenu--submenuCenterAligned--ryltJ":"CENTER"===e,"dlt_submenu--submenuRightAligned--kUi5D":"RIGHT"===e}),onMouseEnter:n,onMouseLeave:i,ref:s},r)}function l({isSelected:e,children:r,explicitWidth:n,shouldCenterContent:i,noScaleAnimation:s,isRightEdge:l}){return a.createElement("div",{style:{width:n},className:o()("dlt_submenu--toolBackground--St0Y2 delightful_toolbar--passthruLayout--gz5r2",{"dlt_submenu--toolBackgroundScalingHighlight--LTx6Y":!s,"dlt_submenu--toolBackgroundHighlighted--aUWM5":e,"dlt_submenu--toolBackgroundCenterContent--p466V":i,"dlt_submenu--toolBackgroundRightEdgeHighlight--hqdJJ":!!l})},r)}n(522739),n(47506),n(939863),n(385326),n(116723),n(684690),n(511080),n(712546),n(557558),n(677859),n(948529)},383847:(e,r,n)=>{n.d(r,{IB:()=>y});var a=n(411855),i=n(629019),o=n.n(i),s=n(498750),l=n(153234),c=n(522739),d=n(483990),u=n(672517),m=n(219001),p=n(712546),h=n(751025),_=n(520325),g=n(807671),f=n(509742);let E=(0,a.forwardRef)(({toolType:e,isSelected:r,onClick:n,children:i,tooltipOffset:u={offsetX:0,offsetY:12},tooltipLocation:h="above",className:E,recordingKey:y,onboardingKey:b,ButtonLayout:I=g.J,isDisabled:T=!1,clickOnMouseDown:v=!1,inTabOrder:S=!0,ariaLabel:w,isHovered:A,isEnabledForViewers:N=!1,onMouseEnter:C,onMouseMove:L,onMouseLeave:O,onTouchStart:R,onTouchEnd:P,hasOpenSubmenu:D,testId:k,...M},F)=>{let{state:x,dispatch:U}=(0,a.useContext)(m.nS),B=(0,p.hv)({isEnabledForViewers:N})||T,V=x.draggedTool===e,G=w||M["data-tooltip"],H=e=>{e.preventDefault(),e.stopPropagation(),x.shouldFinishClick&&!v&&n(e)};return a.createElement(c.D8,{className:o()(f.Zh,f.$y,{[f.ll]:B}),recordingKey:y,onMouseEnter:C,onMouseMove:L,onMouseLeave:O,onTouchStart:R,onTouchEnd:P,onPointerDown:B?void 0:e=>{if(e.preventDefault(),e.stopPropagation(),v?(n(e),U({type:"cancel drag"})):U({type:"start click"}),!_.T.RECORD_DETAILED_EVENTS)return l.aH},onClick:B?void 0:H,"data-tooltip-type":V?null:M["data-tooltip-type"],"data-tooltip-submenu-open":D,"data-tooltip":M["data-tooltip"],"data-tooltip-offset-x":M["data-tooltip-offset-x"]??u.offsetX,"data-tooltip-offset-y":M["data-tooltip-offset-y"]??u.offsetY,"data-tooltip-show-above":"above"===h||void 0,"data-tooltip-show-below":"below"===h||void 0,"data-tooltip-show-left":"left"===h||void 0,"data-tooltip-bottom-flip-margin":M["data-tooltip-bottom-flip-margin"],"data-onboarding-key":b,"data-fullscreen-intercept":!0,"data-testid":k},a.createElement(I,{className:E,isHovering:A,isSelected:r,disabled:B,isDragging:V,"aria-hidden":!0},i),a.createElement(c.D8,{className:o()(f.yG,f.dR,{[f.ll]:B,[f.vu]:r,[f.Lt]:"select"===e,[f.sD]:"hand"===e}),onClick:B?void 0:H,onKeyDown:B?void 0:e=>{e.keyCode===s.Uz.ENTER&&x.shouldFinishClick&&!v&&n(e)},forwardedRef:F,role:function(e,r){let n;return e.shouldDemoteDlt?n="presentation":r&&(n="button"),n}(x,S),tabIndex:S&&!B?0:-1,"aria-hidden":!S,"aria-label":G&&S?function(e){try{return(0,d.A)(e)||e}catch(r){return e}}(G):void 0,"aria-disabled":B,"data-fullscreen-intercept":!0}))}),y=(0,a.forwardRef)(({children:e,hasExtraLongHoverTime:r,...n},i)=>{let{isHovered:o,hoverTarget:s,onMouseEnter:l,onMouseMove:c,onMouseLeave:d,onTouchStart:u,onTouchEnd:m}=(0,h.W)(n.onClick,r),p="function"==typeof e?e(o,s):e;return a.createElement(E,{...n,ref:i,isHovered:o,onMouseEnter:l,onMouseLeave:d,onMouseMove:c,onTouchStart:u,onTouchEnd:m},p)});(0,u.tf)(y)},557558:(e,r,n)=>{var a=n(463546);a.lLk.id,a.kp0.id,a.Njd.id,a.MJs.id,a.zoI.id,a.wRI.id,a.Kze.id},184184:(e,r,n)=>{n.d(r,{B:()=>s});var a=n(299321),i=n(38580);let o=a.cxo.SELECTION,s=(0,i.eU)(o)},676938:(e,r,n)=>{n.d(r,{Y:()=>i});var a=n(411855);function i(e,r={}){let{closeOnEsc:n,ignore:o=[]}=r;(0,a.useEffect)(()=>{let r=r=>{if(e&&"allClicks"!==o){if(Array.isArray(o)){for(let e of o)if(e&&"current"in e&&(e=e.current),e&&function(e,r){let n=e;for(;null!==n;){if(n===r)return!0;n=n.parentElement}return!1}(r.target,e))return}else if(o(r.target))return;e()}},a=r=>{"Escape"===r.key&&e&&e()};return document.addEventListener("pointerdown",r),n&&document.addEventListener("keydown",a),()=>{document.removeEventListener("pointerdown",r),n&&document.removeEventListener("keydown",a)}},[e,n,o])}},525040:(e,r,n)=>{n.d(r,{Vi:()=>l,bu:()=>s});var a=n(188507),i=n(299321),o=n(333399);function s(){return!!(0,a.d4)(e=>{let r=e?.mirror?.appModel?.currentTool;return r&&(0,o.L)(r)?r:null})}function l(){return(0,a.d4)(e=>e?.mirror?.appModel?.currentTool===i.NLJ.COMMENTS)}n(548785)},587467:(e,r,n)=>{n.d(r,{qV:()=>l,ym:()=>s});var a=n(988022);let i={toggles_mute:"toggles_mute",changes_volume:"changes_volume"},o=(e,r,n,i)=>{(0,a.ds)(e,r.openFile?.key,r,{...n,multiplayer_count:r.multiplayer.allUsers.length},i)},s=(e,r)=>o(i.toggles_mute,e,{isMuted:r}),l=(e,r)=>o(i.changes_volume,e,{volume:r})},411189:(e,r,n)=>{n.d(r,{$_:()=>c,I8:()=>d,P0:()=>i,_s:()=>o,c4:()=>l,om:()=>u});var a=n(518261);function i(e){let r=[];return e.forEach(e=>{let n=Math.floor(Math.random()*e.cuesheet.tracks.length);e.start_at_ms=e.cuesheet.tracks[n].start_time,r.push(e)}),r}async function o({songID:e,onSuccess:r,onNotFound:n}){try{await a.N.getActive({songID:e}),r()}catch(r){if(404===r.status){n();return}throw console.warn(`Failed to fetch active song with id ${e}: ${r}`),n(),r}}let s=["play","pause","previoustrack","nexttrack","seekbackward","seekforward","seekto","stop"];function l(){return"mediaSession"in navigator&&!!navigator.mediaSession.metadata}function c(e,r){if(!e)return;let{title:n,album_art:a}=e;if("mediaSession"in navigator){for(let e of(navigator.mediaSession.metadata=new window.MediaMetadata({title:n,artist:"FigJam Music",artwork:[{src:a||""}]}),s))try{navigator.mediaSession.setActionHandler(e,()=>{})}catch(r){console.warn(`Attempting to stub out all action handlers for media session, but the media session action '${e}' is not supported`)}r&&navigator.mediaSession.setActionHandler("stop",()=>{r()})}}function d(){if("mediaSession"in navigator){for(let e of(navigator.mediaSession.metadata=null,s))try{navigator.mediaSession.setActionHandler(e,null)}catch(r){console.warn(`Attempting to null all custom action handlers for media session, but the media session action '${e}' is not supported`)}navigator.mediaSession.setActionHandler("play",()=>{})}}function u(){navigator.mediaSession.setActionHandler("play",null)}},728406:(e,r,n)=>{n.d(r,{FR:()=>s,P$:()=>i,YI:()=>o});var a=n(737499);function i(e){return e?e.isPaused?e.timeRemainingMs:e.timeRemainingMs-performance.now()+e.timeOrigin:-1/0}function o(e){return e<10?`0${e}`:`${e}`}function s(){let e=(0,a.F4)();return!!e?.shouldShowTimerOnTheLeft}},68517:(e,r,n)=>{var a=n(288706),i=n(38580),o=n(374626),s=n(286640),l=n(529928),c=n(728406);function d(){let e=(0,s.DN)().get("last-timer-set-time")||180;return{seconds:(0,c.YI)(e%60),minutes:(0,c.YI)(Math.floor(e/60)),lastUsedTime:e,isStopping:!1,lastAction:{type:"reset-state"}}}(0,a.um)(d(),(e,r)=>{let n={...e,lastAction:r};switch(r.type){case"set-seconds":return{...n,seconds:r.seconds};case"set-minutes":return{...n,minutes:r.minutes};case"set-time":return{...n,minutes:r.minutes,seconds:r.seconds};case"add-minutes":let a=Math.min(Math.max(0,parseInt(n.minutes)+r.minutes),99).toString(),i=1===a.length?"0"+a:a;return{...n,minutes:i};case"start-timer":let o=60*parseInt(n.minutes)+parseInt(n.seconds);if(1e3*o<=0)return n;return{...n,lastUsedTime:o};case"reset-state":return d();default:return n}});let u=(0,l.bt)(e=>e.timer),m=(0,i.eU)({});(0,o.yu)((0,i.eU)(e=>(e(m),Math.max(0,Math.ceil((0,c.P$)(e(u).time)/1e3))),(e,r,n)=>{r(m,{})}),({setSelf:e})=>{let r=setInterval(()=>{let r=o.zl.get(u);!r||!r.time||r?.time?.isPaused||e("RECOMPUTE")},200);return()=>clearInterval(r)})},631169:(e,r,n)=>{n.d(r,{V3:()=>A,w:()=>w,HG:()=>N});var a=n(411855);n(188507);var i=n(343887),o=n(139689);n(299321);var s=n(968082),l=n(134288),c=n(323434),d=n(305874),u=n(153234),m=n(355819),p=n(939863),h=n(501114);n(625651);var _=n(501972),g=n(161325),f=n(601607),E=n(634951),y=n(861802),b=n(266023),I=n(599486),T=n(522322);n(74505),n(457630);var v=n(837746),S=n(468951);let w=32,A=7.5,N=256;var C=(e=>(e.DEFAULT="default",e.HOVERED="hovered",e.SELECTED="selected",e.DIMMED="dimmed",e))(C||{}),L=(e=>(e.LARGE="large",e.MEDIUM="medium",e.SMALL="small",e.X_SMALL="xSmall",e))(L||{});function O({clientHeight:e,scrollHeight:r,scrollTop:n}){return 1>Math.abs(r-e-n)}function R({numTotalVotes:e,isMostVoted:r}){return a.createElement("span",{className:S.TK},a.createElement("span",null,(0,p.tx)("voting.pin.votes",{numVotes:e})),r&&a.createElement("img",{src:I.Ys,className:S.C0,alt:(0,p.t)("voting.pin.medal_img_alt")}))}function P({reportWidth:e,numTotalVotes:r,isMostVoted:n,scale:i,padding:o}){let s=a.useRef(null);return a.useLayoutEffect(()=>{let r=s.current;if(r){let{width:n}=r.getBoundingClientRect();window.myEl=r,e(n)}},[s,r,n,i,o.paddingLeft,o.paddingRight,o.paddingTop,o.paddingBottom,e]),a.createElement("div",{className:S.D9,style:{transform:`scale(${i})`},"aria-hidden":!0},a.createElement("span",{style:o,ref:s},a.createElement(R,{numTotalVotes:r,isMostVoted:n})))}function D({userId:e,nodeVotes:r}){let n=r.length>3,i=n?r.slice(0,2):r,o=r.length-2;return a.createElement("li",{key:e,className:S.QE},a.createElement(k,{userId:e}),a.createElement("div",{className:S.WK},i.map(e=>a.createElement(F,{key:e,stampId:e})),n&&a.createElement("span",{className:S._v},o)))}function k({userId:e}){let{user:r,loading:n}=(0,g.wW)(e);return a.createElement(a.Fragment,null,a.createElement(b.v,{userId:e,user:r,loading:n,size:24,loadingClassName:S.SD}),a.createElement(b.m,{userId:e,user:r,loading:n,defaultClassName:S.nT,loadingClassName:S.fK}))}function M({overflowCount:e}){return a.createElement("li",{className:S.Qf},a.createElement("div",{className:S.EA},a.createElement(I.xL,null)),a.createElement("span",{className:S.iG},(0,p.tx)("voting.pin.voter_list_overflow",{numOverflowingVoters:e})))}function F({stampId:e}){let r=(0,d.fU)(),n=(0,f.Fk)((e,r)=>{let n=e.get(r);return n?n.name:null},e),i=(()=>{let e=y.WJ.find(e=>e.label===n);return e&&(0,E.k6)(e,r)||y.tR})(),o=n?(0,p.t)("voting.pin.stamp_preview_alt_with_type",{stampType:n}):(0,p.t)("voting.pin.stamp_preview_alt_without_type");return a.createElement("img",{className:S.O8,src:i,alt:o})}a.memo(function({nodeVoteInfo:e,isMostVoted:r,pinState:n,setIsHovered:d,selectPin:g,deselectPin:f,viewportSize:E,currentUserId:y,recordingKey:b}){let I=(0,a.useRef)(null),N=(0,a.useRef)(null),[C,L]=(0,a.useState)(0),[k,F]=(0,a.useState)(!1),[x,U]=(0,a.useState)(!0),[B,V]=(0,a.useState)(0),[G,H]=(0,a.useState)(!1),W=(0,T.oC)(e),K={large:{paddingTop:"2px",paddingBottom:"2px",paddingLeft:"10px",paddingRight:"10px"},medium:{paddingTop:"1px",paddingBottom:"1px",paddingLeft:"8px",paddingRight:"8px"},small:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"7px",paddingRight:"7px"},xSmall:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"6px",paddingRight:"6px"}}[E],Y={large:1,medium:.9,small:.8,xSmall:.7}[E];(0,a.useEffect)(()=>{if("selected"!==n)return;let e=e=>{(0,_.n3)(e.target,I.current)||f()};return window.addEventListener("click",e),()=>window.removeEventListener("click",e)},[n,f,e.guid]);let $=r?h.sx.colorBgvotingtertiary.$.backgroundColor:h.sx.colorBg.$.backgroundColor,j={default:{transform:`scale(${Y})`,backgroundColor:$,borderColor:$,opacity:1,...K},dimmed:{transform:`scale(${Y})`,backgroundColor:$,borderColor:$,opacity:.5,...K},hovered:{transform:"scale(1)",backgroundColor:$,borderColor:$,opacity:1,paddingTop:"8px",paddingBottom:"12px",paddingLeft:"16px",paddingRight:"0px"},selected:{transform:"scale(1)",backgroundColor:$,...h.sx.colorBorderSelectedStrong.$,opacity:1,paddingTop:"8px",paddingBottom:"12px",paddingLeft:"16px",paddingRight:"0px"}},z={default:{width:"0px",height:"0px",marginLeft:"0px",marginRight:"0px",opacity:0},dimmed:{width:"0px",height:"0px",marginLeft:"0px",marginRight:"0px",opacity:0},hovered:{width:v.$tX,height:v.$tX,marginLeft:"8px",marginRight:"12px",opacity:0},selected:{width:v.$tX,height:v.$tX,marginLeft:"8px",marginRight:"12px",opacity:1}},q=(0,a.useMemo)(()=>{let r=(0,T.zi)(y);return Object.entries(e.userIdToNodeVotes).sort((e,n)=>r(e[0],n[0]))},[e.userIdToNodeVotes,y]),X=q.length>3,J=X?q.slice(0,2):q,Z=X?q.slice(2):[],Q={hovered:{height:`${w}px`},selected:{height:"auto"}},ee=(0,a.useCallback)(e=>{let r=0!==e;r!==k&&F(r);let n=N.current?.getScrollHeight(),a=N.current?.getTrackHeight(),i=void 0===n||void 0===a||O({clientHeight:a,scrollHeight:n,scrollTop:e});i!==x&&U(i)},[k,x]),et=(0,a.useCallback)(e=>{if(!e||!N.current){F(!1),U(!0);return}let r=N.current.getScrollTop(),n=N.current.getScrollHeight(),a=N.current.getTrackHeight();F(0!==r),U(O({clientHeight:a,scrollHeight:n,scrollTop:r}))},[]);return a.createElement(s.x,{transition:{duration:.1,ease:"easeInOut"}},a.createElement("div",{role:"button",tabIndex:0,className:S.UD,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onClick:u.rf(b,"click",g),ref:I,style:{transform:`translateX(${10-C}px)`},id:e.guid},a.createElement(l.P.div,{className:S.yM,initial:!1,animate:n,variants:j},a.createElement("p",{className:S.wx},a.createElement(R,{numTotalVotes:W,isMostVoted:r}),a.createElement(l.P.span,{className:S.cG,initial:!1,animate:n,variants:z},"selected"===n&&a.createElement(i.K,{onClick:e=>{e.stopPropagation(),f(),d(!1)},"aria-label":(0,p.t)("general.close")},a.createElement(o.A,null)))),a.createElement(c.N,null,["selected","hovered"].includes(n)&&a.createElement(a.Fragment,null,a.createElement(l.P.div,{className:S.W0,animate:"selected"===n&&k&&!G?"scrolled":"notScrolled",initial:{marginTop:"0px",opacity:0},variants:{notScrolled:{marginTop:"4px",opacity:0},scrolled:{marginTop:"4px",opacity:1}},exit:{marginTop:"0px",opacity:0}}),a.createElement(l.P.div,{className:S.sI,initial:{width:"0px",height:"0px",opacity:0,transform:`scale(${1/Y})`},animate:{width:"240px",height:"auto",opacity:1,transform:"scale(1)"},exit:{width:"0px",height:"0px",opacity:0,transform:`scale(${1/Y})`}},a.createElement(m.P,{ref:N,maxHeight:w*A,width:240,allowScrollAndZoomOver:!0,onScroll:ee,onCanScrollChange:et,forceRerenderCount:B},a.createElement("ul",{className:S.hQ},J.map(([e,r])=>a.createElement(D,{key:e,userId:e,nodeVotes:r})),X&&a.createElement(l.P.div,{initial:!1,animate:n,variants:Q,onAnimationStart:()=>H(!0),onAnimationComplete:()=>{H(!1),V(e=>e+1)}},"hovered"===n&&a.createElement(M,{overflowCount:q.length-J.length}),"selected"===n&&Z.map(([e,r])=>a.createElement(D,{key:e,userId:e,nodeVotes:r})))))),a.createElement(l.P.div,{className:S.W0,animate:"selected"!==n||x||G?"hide":"show",initial:{opacity:0},variants:{show:{opacity:1},hide:{opacity:0}},exit:{opacity:0}}))))),a.createElement(P,{reportWidth:L,numTotalVotes:W,isMostVoted:r,scale:Y,padding:K}))})},599486:(e,r,n)=>{n.d(r,{Ys:()=>o,xL:()=>s});var a=n(411855),i=n(966712);(0,i.ck)("054596349bf8a2ae155aa7818cf2a3cbf483a9f4");let o=(0,i.ck)("295306027f272a9b0931ddec9321361f7cd8299b");function s(){return a.createElement("svg",{width:"20",height:"14",viewBox:"0 0 20 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.5 3.5C8.5 4.88071 7.38071 6 6 6C4.61929 6 3.5 4.88071 3.5 3.5C3.5 2.11929 4.61929 1 6 1C7.38071 1 8.5 2.11929 8.5 3.5ZM9.5 3.5C9.5 5.433 7.933 7 6 7C4.067 7 2.5 5.433 2.5 3.5C2.5 1.567 4.067 0 6 0C7.933 0 9.5 1.567 9.5 3.5ZM17 5C17 6.10457 16.1046 7 15 7C13.8954 7 13 6.10457 13 5C13 3.89543 13.8954 3 15 3C16.1046 3 17 3.89543 17 5ZM18 5C18 6.65685 16.6569 8 15 8C13.3431 8 12 6.65685 12 5C12 3.34315 13.3431 2 15 2C16.6569 2 18 3.34315 18 5ZM13.2108 10.4215C13.7492 10.1518 14.3569 10 15 10C17.2091 10 19 11.7909 19 14H20C20 11.2386 17.7614 9 15 9C14.1612 9 13.3706 9.20657 12.6763 9.57162C12.8743 9.83933 13.0532 10.1234 13.2108 10.4215ZM12 14H11C11 11.2386 8.76142 9 6 9C3.23858 9 1 11.2386 1 14H0C0 10.6863 2.68629 8 6 8C9.31371 8 12 10.6863 12 14Z"}))}},140871:(e,r,n)=>{n(411855),n(188507),n(138020)},522322:(e,r,n)=>{n.d(r,{hr:()=>s,oC:()=>l,zi:()=>c}),n(411855);var a=n(188507);n(299321),n(563706),n(939863),n(662275),n(198371),n(396226);var i=n(356390);n(335682),n(99506),n(984968),n(300874),n(239671),n(449731),n(624829),n(900073),n(487392),n(368702),n(140871);var o=(e=>(e.FEATURE_DISABLED="featureDisabled",e.ELIGIBLE_WITH_MOVE_FILE_TO_PAID_TEAM="eligibleWithMoveFileToPaidTeam",e.ELIGIBLE_WITH_UPGRADE="eligibleWithUpgrade",e.ELIGIBLE="eligible",e))(o||{});function s(){let e=(0,a.d4)(e=>e.mirror.appModel.votingSessionInfo),r=i.BI.getUserId(),n=r&&e.userIdToVoteStampIds[r]?.length||0;return e.userVoteLimit-n}function l(e){return Object.values(e.userIdToNodeVotes).reduce((e,r)=>e+r.length,0)}function c(e){return function(r,n){return r===e?-1:n===e?1:r.localeCompare(n)}}},487392:(e,r,n)=>{n.d(r,{Fn:()=>a,OO:()=>i}),n(411855),n(188507),n(299321),n(939683),n(625651),n(460289),n(68517),n(900073),n(368702),n(140871);var a=(e=>(e.OPEN="meetings_panel_open",e.CLOSE="meetings_panel_close",e))(a||{}),i=(e=>(e.MEETINGS_TOOLBAR="meetings_toolbar",e.MEETINGS_MINIMIZED="meetings_minimized",e.MEETINGS_PANEL="meetings_panel",e.INSERTS_MENU="inserts_menu",e.QUICK_ACTIONS="quick_actions",e.IPAD_MENU="ipad_menu",e.MAKE_SOMETHING_V2_ONBOARDING="make_something_v2_onboarding",e))(i||{})},42173:(e,r,n)=>{n.d(r,{AF:()=>U,BV:()=>F,Cn:()=>k,Cz:()=>V,Mr:()=>B,TS:()=>D,V_:()=>x,zS:()=>M});var a=n(414507),i=n(299321),o=n(776621),s=n(939863),l=n(428654),c=n(547302),d=n(616121);let u=["base","baseLight","sticky","highlight","widget","pencilUI3"];function m({colorsToCSS:e,lightDisplayColors:r,darkDisplayColors:n}){return{COLOR_TO_CSS:e,CSS_TO_COLOR:new Map(Array.from(e,([e,r])=>[r,e])),LIGHT_DISPLAY:r??e,DARK_DISPLAY:n??e}}let p=i.Hdj.V700,h=new Map;function _(e){return 0===h.size&&function(){let e=i.DV9?.getWhiteboardPaletteTypeToRampValue();if(e)for(let[r,n]of e.entries()){if(!u.includes(r)){(0,o.$D)(a.FigmaTeam.FIGJAM,Error(`${r} doesn't exist in the WhiteboardPaletteType union type`));continue}h.set(r,n)}}(),h.get(e)??p}let g=m({colorsToCSS:new Map([[i.daH.BLACK,d.jR],[i.daH.GRAY_DARK,d.vh],[i.daH.RED,d.N0],[i.daH.ORANGE,d.qm],[i.daH.YELLOW,d.Sb],[i.daH.GREEN,d.RO],[i.daH.BLUE,d.k0],[i.daH.VIOLET,d.zt],[i.daH.WHITE,d.t1]]),lightDisplayColors:void 0,darkDisplayColors:new Map([[i.daH.BLACK,d.Ws],[i.daH.GRAY_DARK,d._M],[i.daH.BLUE,d.jc],[i.daH.VIOLET,d.mO],[i.daH.WHITE,d.az],[i.daH.RED,d.Af],[i.daH.ORANGE,d.n7],[i.daH.YELLOW,d.p5],[i.daH.GREEN,d.R2]])});function f(e=!1){return i.Ez5?.uiState().showUI3Colors.getCopy()&&!e?function(){let e=_("base");return m({colorsToCSS:new Map([[i.daH.BLACK,d.jR],[i.daH.GRAY_DARK,d.vh],[i.daH.YELLOW,(0,c.W)(c.r.YELLOW,e)],[i.daH.ORANGE,(0,c.W)(c.r.ORANGE,e)],[i.daH.RED,(0,c.W)(c.r.RED,e)],[i.daH.PINK,(0,c.W)(c.r.PINK,e)],[i.daH.VIOLET,(0,c.W)(c.r.VIOLET,e)],[i.daH.BLUE,(0,c.W)(c.r.BLUE,e)],[i.daH.TEAL,(0,c.W)(c.r.TEAL,e)],[i.daH.GREEN,(0,c.W)(c.r.GREEN,e)],[i.daH.WHITE,d.t1]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}():g}let E=m({colorsToCSS:new Map([[i.daH.GRAY,d.Z6],[i.daH.GRAY_LIGHT,d.xr],[i.daH.RED_LIGHT,d.Po],[i.daH.ORANGE_LIGHT,d.is],[i.daH.YELLOW_LIGHT,d.Qw],[i.daH.GREEN_LIGHT,d.bu],[i.daH.BLUE_LIGHT,d.oW],[i.daH.VIOLET_LIGHT,d.Py]]),lightDisplayColors:void 0,darkDisplayColors:new Map([[i.daH.GRAY,d._M],[i.daH.GRAY_LIGHT,d.A4],[i.daH.BLUE_LIGHT,d.X8],[i.daH.VIOLET_LIGHT,d.eN],[i.daH.RED_LIGHT,d._P],[i.daH.ORANGE_LIGHT,d.LL],[i.daH.YELLOW_LIGHT,d.fU],[i.daH.GREEN_LIGHT,d.c6]])});function y(){return i.Ez5?.uiState().showUI3Colors.getCopy()?function(){let e=_("baseLight");return m({colorsToCSS:new Map([[i.daH.GRAY,d.Z6],[i.daH.GRAY_LIGHT,d.U8],[i.daH.YELLOW_LIGHT,(0,c.W)(c.r.YELLOW,e)],[i.daH.ORANGE_LIGHT,(0,c.W)(c.r.ORANGE,e)],[i.daH.RED_LIGHT,(0,c.W)(c.r.RED,e)],[i.daH.PINK_LIGHT,(0,c.W)(c.r.PINK,e)],[i.daH.VIOLET_LIGHT,(0,c.W)(c.r.VIOLET,e)],[i.daH.BLUE_LIGHT,(0,c.W)(c.r.BLUE,e)],[i.daH.TEAL_LIGHT,(0,c.W)(c.r.TEAL,e)],[i.daH.GREEN_LIGHT,(0,c.W)(c.r.GREEN,e)]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}():E}let b=m({colorsToCSS:new Map([[i.daH.STICKY_GRAY,d.oK],[i.daH.STICKY_RED,d.SW],[i.daH.STICKY_ORANGE,d.B9],[i.daH.STICKY_YELLOW,d.Pp],[i.daH.STICKY_GREEN,d.k7],[i.daH.STICKY_BLUE,d.JI],[i.daH.STICKY_VIOLET,d._x],[i.daH.STICKY_PINK,d.a6],[i.daH.STICKY_GRAY_LIGHT,d.Uw]]),lightDisplayColors:new Map([[i.daH.STICKY_GRAY_LIGHT,d.FQ],[i.daH.STICKY_GRAY,d.fh],[i.daH.STICKY_BLUE,d.yG],[i.daH.STICKY_VIOLET,d.DN],[i.daH.STICKY_RED,d.pZ],[i.daH.STICKY_PINK,d.i4],[i.daH.STICKY_ORANGE,d.Q2],[i.daH.STICKY_YELLOW,d.iU],[i.daH.STICKY_GREEN,d.h3]]),darkDisplayColors:new Map([[i.daH.STICKY_GRAY_LIGHT,d.PQ],[i.daH.STICKY_GRAY,d.T2],[i.daH.STICKY_BLUE,d.o$],[i.daH.STICKY_VIOLET,d.Zz],[i.daH.STICKY_RED,d.$b],[i.daH.STICKY_PINK,d.Q1],[i.daH.STICKY_ORANGE,d.aT],[i.daH.STICKY_YELLOW,d.K4],[i.daH.STICKY_GREEN,d.nL]])});function I(){return i.Ez5?.uiState().showUI3Colors.getCopy()?function(){let e=_("sticky");return m({colorsToCSS:new Map([[i.daH.WHITE,d.t1],[i.daH.STICKY_GRAY_UI3,d.Dd],[i.daH.STICKY_YELLOW,(0,c.W)(c.r.YELLOW,e)],[i.daH.STICKY_ORANGE,(0,c.W)(c.r.ORANGE,e)],[i.daH.STICKY_RED,(0,c.W)(c.r.RED,e)],[i.daH.STICKY_PINK,(0,c.W)(c.r.PINK,e)],[i.daH.STICKY_VIOLET,(0,c.W)(c.r.VIOLET,e)],[i.daH.STICKY_BLUE,(0,c.W)(c.r.BLUE,e)],[i.daH.STICKY_TEAL,(0,c.W)(c.r.TEAL,e)],[i.daH.STICKY_GREEN,(0,c.W)(c.r.GREEN,e)]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}():b}let T=m({colorsToCSS:new Map([[i.daH.HIGHLIGHT_GRAY,d.g$],[i.daH.HIGHLIGHT_RED,d.vD],[i.daH.HIGHLIGHT_ORANGE,d.Ah],[i.daH.HIGHLIGHT_YELLOW,d.wO],[i.daH.HIGHLIGHT_GREEN,d.Td],[i.daH.HIGHLIGHT_BLUE,d.qH],[i.daH.HIGHLIGHT_VIOLET,d.fV],[i.daH.HIGHLIGHT_WHITE,d.nG]]),lightDisplayColors:new Map([[i.daH.HIGHLIGHT_RED,d.qt],[i.daH.HIGHLIGHT_YELLOW,d.DE],[i.daH.HIGHLIGHT_GREEN,d.ev],[i.daH.HIGHLIGHT_BLUE,d.vY],[i.daH.HIGHLIGHT_VIOLET,d.gn],[i.daH.HIGHLIGHT_ORANGE,d.xu],[i.daH.HIGHLIGHT_GRAY,d.AN],[i.daH.HIGHLIGHT_WHITE,d.wl]]),darkDisplayColors:new Map([[i.daH.HIGHLIGHT_RED,d.qt],[i.daH.HIGHLIGHT_YELLOW,d.DE],[i.daH.HIGHLIGHT_GREEN,d.ev],[i.daH.HIGHLIGHT_BLUE,d.vY],[i.daH.HIGHLIGHT_VIOLET,d.gn],[i.daH.HIGHLIGHT_ORANGE,d.xu],[i.daH.HIGHLIGHT_GRAY,d.AN],[i.daH.HIGHLIGHT_WHITE,d.wl]])}),v=m({colorsToCSS:new Map([[i.daH.BLACK,d.jR],[i.daH.RED,d.N0],[i.daH.ORANGE,d.qm],[i.daH.YELLOW,d.Sb],[i.daH.GREEN,d.RO],[i.daH.BLUE,d.k0],[i.daH.VIOLET,d.zt],[i.daH.WHITE,d.t1]]),lightDisplayColors:void 0,darkDisplayColors:new Map([[i.daH.BLACK,d.Ws],[i.daH.BLUE,d.jc],[i.daH.VIOLET,d.mO],[i.daH.WHITE,d.az],[i.daH.RED,d.Af],[i.daH.ORANGE,d.n7],[i.daH.YELLOW,d.p5],[i.daH.GREEN,d.R2]])});function S(){return i.Ez5?.uiState().showUI3Colors.getCopy()?function(){let e=_("pencilUI3");return m({colorsToCSS:new Map([[i.daH.BLACK,d.jR],[i.daH.RED,(0,c.W)(c.r.RED,e)],[i.daH.ORANGE,(0,c.W)(c.r.ORANGE,e)],[i.daH.YELLOW,(0,c.W)(c.r.YELLOW,e)],[i.daH.GREEN,(0,c.W)(c.r.GREEN,e)],[i.daH.BLUE,(0,c.W)(c.r.BLUE,e)],[i.daH.VIOLET,(0,c.W)(c.r.VIOLET,e)],[i.daH.WHITE,d.t1]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}():v}i.daH.BLACK,i.daH.WHITE,i.daH.GRAY_DARK,i.daH.GRAY,i.daH.GRAY_LIGHT,i.daH.BLUE,i.daH.BLUE_LIGHT,i.daH.VIOLET,i.daH.VIOLET_LIGHT,i.daH.RED,i.daH.RED_LIGHT,i.daH.ORANGE,i.daH.ORANGE_LIGHT,i.daH.YELLOW,i.daH.YELLOW_LIGHT,i.daH.GREEN,i.daH.GREEN_LIGHT,i.daH.PINK,i.daH.PINK_LIGHT,i.daH.INDIGO,i.daH.INDIGO_LIGHT,i.daH.COBALT,i.daH.COBALT_LIGHT,i.daH.TEAL,i.daH.TEAL_LIGHT,i.daH.OLIVE,i.daH.OLIVE_LIGHT,i.daH.STICKY_GRAY_LIGHT,i.daH.STICKY_GRAY,i.daH.STICKY_GRAY_UI3,i.daH.STICKY_BLUE,i.daH.STICKY_VIOLET,i.daH.STICKY_RED,i.daH.STICKY_PINK,i.daH.STICKY_ORANGE,i.daH.STICKY_YELLOW,i.daH.STICKY_GREEN,i.daH.STICKY_COBALT,i.daH.STICKY_INDIGO,i.daH.STICKY_TEAL,i.daH.STICKY_OLIVE,i.daH.STICKY_LIME,i.daH.HIGHLIGHT_RED,i.daH.HIGHLIGHT_YELLOW,i.daH.HIGHLIGHT_GREEN,i.daH.HIGHLIGHT_BLUE,i.daH.HIGHLIGHT_VIOLET,i.daH.HIGHLIGHT_ORANGE,i.daH.HIGHLIGHT_GRAY,i.daH.HIGHLIGHT_WHITE;let w=[i.daH.BLACK,i.daH.GRAY_DARK,i.daH.GREEN,i.daH.TEAL,i.daH.BLUE,i.daH.VIOLET,i.daH.PINK,i.daH.RED,i.daH.ORANGE,i.daH.YELLOW,i.daH.WHITE],A=[i.daH.BLACK,i.daH.GRAY_DARK,i.daH.RED,i.daH.ORANGE,i.daH.YELLOW,i.daH.GREEN,i.daH.BLUE,i.daH.VIOLET,i.daH.WHITE],N=[i.daH.GRAY,i.daH.GRAY_LIGHT,i.daH.GREEN_LIGHT,i.daH.TEAL_LIGHT,i.daH.BLUE_LIGHT,i.daH.VIOLET_LIGHT,i.daH.PINK_LIGHT,i.daH.RED_LIGHT,i.daH.ORANGE_LIGHT,i.daH.YELLOW_LIGHT],C=[i.daH.GRAY,i.daH.GRAY_LIGHT,i.daH.RED_LIGHT,i.daH.ORANGE_LIGHT,i.daH.YELLOW_LIGHT,i.daH.GREEN_LIGHT,i.daH.BLUE_LIGHT,i.daH.VIOLET_LIGHT],L=[i.daH.BLACK,i.daH.RED,i.daH.ORANGE,i.daH.YELLOW,i.daH.GREEN,i.daH.BLUE,i.daH.VIOLET,i.daH.WHITE],O=[i.daH.STICKY_GRAY,i.daH.STICKY_RED,i.daH.STICKY_ORANGE,i.daH.STICKY_YELLOW,i.daH.STICKY_GREEN,i.daH.STICKY_BLUE,i.daH.STICKY_VIOLET,i.daH.STICKY_PINK,i.daH.STICKY_GRAY_LIGHT],R=[i.daH.WHITE,i.daH.STICKY_GRAY_UI3,i.daH.STICKY_GREEN,i.daH.STICKY_TEAL,i.daH.STICKY_BLUE,i.daH.STICKY_VIOLET,i.daH.STICKY_PINK,i.daH.STICKY_RED,i.daH.STICKY_ORANGE,i.daH.STICKY_YELLOW],P=[i.daH.HIGHLIGHT_GRAY,i.daH.HIGHLIGHT_RED,i.daH.HIGHLIGHT_ORANGE,i.daH.HIGHLIGHT_YELLOW,i.daH.HIGHLIGHT_GREEN,i.daH.HIGHLIGHT_BLUE,i.daH.HIGHLIGHT_VIOLET,i.daH.HIGHLIGHT_WHITE];function D(e){switch(e){case"widget":case"base":return(i.Ez5?.uiState().showUI3Colors.getCopy()?w:A).map(e=>F(e,"base"));case"baseLight":return(i.Ez5?.uiState().showUI3Colors.getCopy()?N:C).map(e=>F(e,"baseLight"));case"sticky":return(i.Ez5?.uiState().showUI3Colors.getCopy()?R:O).map(e=>F(e,"sticky"));case"highlight":return P.map(e=>F(e,"highlight"));case"pencilUI3":return L.map(e=>F(e,"pencilUI3"))}}function k(e){return"base"===e}function M(e,r,n=i.daH.CUSTOM){let a;let o=l.F.format(e);switch(r){case"widget":case"base":a=f().CSS_TO_COLOR.get(o);break;case"baseLight":a=y().CSS_TO_COLOR.get(o);break;case"sticky":a=I().CSS_TO_COLOR.get(o);break;case"highlight":a=T.CSS_TO_COLOR.get(o);break;case"pencilUI3":a=S().CSS_TO_COLOR.get(o)}return a??n}function F(e,r){let n;switch(r){case"widget":case"base":n=f().COLOR_TO_CSS.get(e);break;case"baseLight":n=y().COLOR_TO_CSS.get(e);break;case"sticky":n=I().COLOR_TO_CSS.get(e);break;case"highlight":n=T.COLOR_TO_CSS.get(e);break;case"pencilUI3":n=S().COLOR_TO_CSS.get(e)}return n?l.F.parse(n):void 0}function x(e,r="base",n=(0,s.t)("whiteboard.colors.custom")){let a=Array.isArray(e)?e[0]:e,o=M(a,r);return"base"===r&&o===i.daH.CUSTOM&&(o=M(a,"baseLight")),function(e){switch(e){case i.daH.BLACK:return(0,s.t)("whiteboard.colors.black");case i.daH.WHITE:return(0,s.t)("whiteboard.colors.white");case i.daH.GRAY_DARK:return(0,s.t)("whiteboard.colors.dark_gray");case i.daH.GRAY:return(0,s.t)("whiteboard.colors.gray");case i.daH.GRAY_LIGHT:return(0,s.t)("whiteboard.colors.light_gray");case i.daH.YELLOW:return(0,s.t)("whiteboard.colors.yellow");case i.daH.YELLOW_LIGHT:return(0,s.t)("whiteboard.colors.light_yellow");case i.daH.ORANGE:return(0,s.t)("whiteboard.colors.orange");case i.daH.ORANGE_LIGHT:return(0,s.t)("whiteboard.colors.light_orange");case i.daH.RED:return(0,s.t)("whiteboard.colors.red");case i.daH.RED_LIGHT:return(0,s.t)("whiteboard.colors.light_red");case i.daH.PINK:return(0,s.t)("whiteboard.colors.pink");case i.daH.PINK_LIGHT:return(0,s.t)("whiteboard.colors.light_pink");case i.daH.VIOLET:return(0,s.t)("whiteboard.colors.violet");case i.daH.VIOLET_LIGHT:return(0,s.t)("whiteboard.colors.light_violet");case i.daH.INDIGO:return(0,s.t)("whiteboard.colors.indigo");case i.daH.INDIGO_LIGHT:return(0,s.t)("whiteboard.colors.light_indigo");case i.daH.COBALT:return(0,s.t)("whiteboard.colors.cobalt");case i.daH.COBALT_LIGHT:return(0,s.t)("whiteboard.colors.light_cobalt");case i.daH.BLUE:return(0,s.t)("whiteboard.colors.blue");case i.daH.BLUE_LIGHT:return(0,s.t)("whiteboard.colors.light_blue");case i.daH.TEAL:return(0,s.t)("whiteboard.colors.teal");case i.daH.TEAL_LIGHT:return(0,s.t)("whiteboard.colors.light_teal");case i.daH.GREEN:return(0,s.t)("whiteboard.colors.green");case i.daH.GREEN_LIGHT:return(0,s.t)("whiteboard.colors.light_green");case i.daH.OLIVE:return(0,s.t)("whiteboard.colors.olive");case i.daH.OLIVE_LIGHT:return(0,s.t)("whiteboard.colors.light_olive");case i.daH.LIME:return(0,s.t)("whiteboard.colors.lime");case i.daH.LIME_LIGHT:return(0,s.t)("whiteboard.colors.light_lime");case i.daH.STICKY_GRAY_LIGHT:return(0,s.t)("whiteboard.colors.light_gray");case i.daH.STICKY_GRAY:case i.daH.STICKY_GRAY_UI3:return(0,s.t)("whiteboard.colors.gray");case i.daH.STICKY_BLUE:return(0,s.t)("whiteboard.colors.blue");case i.daH.STICKY_VIOLET:return(0,s.t)("whiteboard.colors.violet");case i.daH.STICKY_RED:return(0,s.t)("whiteboard.colors.red");case i.daH.STICKY_PINK:return(0,s.t)("whiteboard.colors.pink");case i.daH.STICKY_ORANGE:return(0,s.t)("whiteboard.colors.orange");case i.daH.STICKY_YELLOW:return(0,s.t)("whiteboard.colors.yellow");case i.daH.STICKY_GREEN:return(0,s.t)("whiteboard.colors.green");case i.daH.STICKY_COBALT:return(0,s.t)("whiteboard.colors.cobalt");case i.daH.STICKY_INDIGO:return(0,s.t)("whiteboard.colors.indigo");case i.daH.STICKY_TEAL:return(0,s.t)("whiteboard.colors.teal");case i.daH.STICKY_OLIVE:return(0,s.t)("whiteboard.colors.olive");case i.daH.STICKY_LIME:return(0,s.t)("whiteboard.colors.lime");case i.daH.HIGHLIGHT_RED:return(0,s.t)("whiteboard.colors.pink");case i.daH.HIGHLIGHT_YELLOW:return(0,s.t)("whiteboard.colors.yellow");case i.daH.HIGHLIGHT_GREEN:return(0,s.t)("whiteboard.colors.green");case i.daH.HIGHLIGHT_BLUE:return(0,s.t)("whiteboard.colors.blue");case i.daH.HIGHLIGHT_VIOLET:return(0,s.t)("whiteboard.colors.violet");case i.daH.HIGHLIGHT_ORANGE:return(0,s.t)("whiteboard.colors.orange");case i.daH.HIGHLIGHT_GRAY:return(0,s.t)("whiteboard.colors.gray");case i.daH.HIGHLIGHT_WHITE:return(0,s.t)("whiteboard.colors.white");default:return}}(o)??n}function U(e,r="base"){let n=e+1;switch(r){case"highlight":return(0,s.t)("whiteboard.colors.palette.highlight",{index:n});case"baseLight":return(0,s.t)("whiteboard.colors.palette.light",{index:n});default:return(0,s.t)("whiteboard.colors.palette.base",{index:n})}}function B(e,r="rgba(255, 255, 255, 1)"){return f().COLOR_TO_CSS.get(e)??r}function V(e,r,n){let a;let o={...e,a:1},s=M(o,r);if(s===i.daH.NONE||s===i.daH.CUSTOM)return l.F.format(o);switch(r){case"baseLight":a=y();break;case"sticky":a=I();break;case"highlight":a=T;break;case"pencilUI3":a=S();break;default:a=f()}return("light"===n?a.LIGHT_DISPLAY.get(s):a.DARK_DISPLAY.get(s))??l.F.format(o)}[d.jR,d.xr,d.N0,d.Sb,d.RO].map(e=>l.F.parse(e))},300587:(e,r,n)=>{n.d(r,{ZE:()=>D});var a=n(411855),i=n(629019),o=n.n(i),s=n(568214),l=n(91408),c=n(794272),d=n(153234),u=n(522739),m=n(743282),p=n(939863),h=n(428654),_=n(775664),g=n(301462),f=n(694241),E=n(498606),y=n(684690),b=n(677859),I=n(437771),T=n(948529),v=n(96913),S=n(662599),w=n(42173),A=n(345334),N=n(837746),C=n(365777),L=n(242145);let O=(0,l.jz)(N.YPH);function R(e){return Array.isArray(e)?1===e.length?e[0]:void 0:e}let P={right:S.nm,center:void 0,left:S.Gu};function D({value:e,onColorChange:r,onOpacityChange:n,recordingKey:i,paletteType:o,additionalContentsTop:s,buttonSize:l,buttonBackground:d,buttonClassName:u,buttonCaretType:m,dropperDisabled:p,optionSize:h,customOpacity:_,ariaLabel:g,alignment:E,inlineButtonTooltip:b,palettePickerPopoverWrapper:I,onlyShowCustomColorPopover:T,isColorPopoverOpen:v,shouldDisableDataTooltip:S,setIsColorPopoverOpen:A,positionX:N,positionY:C}){let L=(0,c.R)(e=>e.mirror.selectionProperties.whiteboardNumSelectedByType),O={name:"figjam_node_color_change",properties:{node_type:L&&1===Object.keys(L).length&&Object.keys(L).pop()||"MIXED",...L}},{variations:R,type:P}=(0,y.Z9)(),D=(P===f.Yv.DEFAULT?(0,w.TS)(o):R[o].slice()).map((e,r)=>({option:e,tooltip:P===f.Yv.DEFAULT?(0,w.V_)(e,o):(0,w.AF)(r,o)})),M=D.length;if("base"===o){let e=(P===f.Yv.DEFAULT?(0,w.TS)("baseLight"):R.baseLight).map((e,r)=>({option:e,tooltip:P===f.Yv.DEFAULT?(0,w.V_)(e,"baseLight"):(0,w.AF)(r,"baseLight")}));D.push(...e)}return a.createElement(k,{options:D,value:{option:e},onColorChange:e=>r(e.option),onOpacityChange:n,recordingKey:i,paletteType:o,fixedNumColumns:M,analytics:O,additionalContentsTop:s,buttonSize:l,buttonBackground:d,buttonClassName:u,buttonCaretType:m,dropperDisabled:p,optionSize:h,customOpacity:_,alignment:E,ariaLabel:g,inlineButtonTooltip:b,palettePickerPopoverWrapper:I,onlyShowCustomColorPopover:T,isColorPopoverOpen:v,shouldDisableDataTooltip:S,setIsColorPopoverOpen:A,positionX:N,positionY:C})}function k({value:e,onColorChange:r,onOpacityChange:n,recordingKey:i,additionalContentsTop:o,additionalContentsBottom:l,options:c,inlineButtonTooltip:u,paletteType:m,fixedNumColumns:h,buttonSize:_,buttonBackground:g="dark",buttonClassName:f,buttonCaretType:E="down",dropperDisabled:y,optionSize:I,isDesignInlineMenu:S,analytics:A,customOpacity:N,ariaLabel:C,alignment:L,positionX:O,positionY:R,palettePickerPopoverWrapper:P,shouldDisableDataTooltip:D,isColorPopoverOpen:k,setIsColorPopoverOpen:F,shouldCustomColorPopoverCloseOnEscape:x,hasNonWhiteboardColors:U,onlyShowCustomColorPopover:B,customOptions:V,customOptionsHeader:G}){let[H,W]=a.useState(!1),K={...(Array.isArray(e.option)?e.option[0]:e.option)??s.UE};return N&&(K.a=N),a.useEffect(()=>{F&&F(H)},[H,F]),B||H?a.createElement(v.v,{target:a.createElement(b.$n,{onClick:()=>W(!H),caret:E,active:"light"===g?"LOUD":"NORMAL",recordingKey:(0,d.Pt)(i,"colorSelectorButton"),className:f,tooltip:u||(0,w.V_)(e.option,m,(0,p.t)("whiteboard.inline_menu.color")),role:"combobox",ariaLabel:(0,p.t)("whiteboard.inline_menu.color_selector_label",{currentColor:(0,w.V_)(e.option,m).toLocaleLowerCase()})},a.createElement(T.cd,{size:_,value:e.option,paletteType:m,background:g})),color:K,isOpen:H,onColorChange:e=>{r({option:e})},onOpacityChange:e=>{n&&n(e)},onClose:()=>{W(!1)},theme:"dark",analytics:A,recordingKey:(0,d.Pt)(i,"customColorPopover"),showOpacity:null!=N,alignment:L,positionX:O,positionY:R,dropperDisabled:y,shouldCloseOnEscape:x}):a.createElement(M,{value:e,options:c,onColorChange:r,onCustomColor:()=>W(!0),additionalContentsTop:o,additionalContentsBottom:l,inlineButtonTooltip:u,paletteType:m,buttonSize:_,buttonClassName:f,buttonCaretType:E,buttonBackground:g,optionSize:I,isDesignInlineMenu:S,fixedNumColumns:h,analytics:A,recordingKey:i,ariaLabel:C,alignment:L,palettePickerPopoverWrapper:P,shouldDisableDataTooltip:D,positionX:O,positionY:R,isColorPopoverOpen:k,setIsColorPopoverOpen:F,hasNonWhiteboardColors:U,customOptions:V,customOptionsHeader:G})}function M({value:e,onColorChange:r,onCustomColor:n,recordingKey:i,additionalContentsTop:l,additionalContentsBottom:c,options:f,inlineButtonTooltip:v,paletteType:S,buttonSize:N,buttonClassName:D,buttonCaretType:k="down",buttonBackground:M="dark",optionSize:F,isDesignInlineMenu:x,fixedNumColumns:U,analytics:B,ariaLabel:V,alignment:G="center",palettePickerPopoverWrapper:H,shouldDisableDataTooltip:W,positionX:K,positionY:Y,isColorPopoverOpen:$,setIsColorPopoverOpen:j,hasNonWhiteboardColors:z,customOptions:q,customOptionsHeader:X}){let J=a.useRef((0,m.g)()),Z=a.useRef((0,m.g)()),Q=R(e.option),ee=(0,y.iN)(Q,S),et=(0,y.iN)(Q,"baseLight")&&"base"===S,er=z?function(e,r){try{return!r.find(r=>{let n=R(r.option),a=R(e.option);return n&&a&&(0,s.DA)(n,a)})}catch(e){return console.error(e),!1}}(e,f):ee&&et,en=()=>{$&&n()},ea=r=>er?a.createElement(u.GG,{id:Z.current,...W?{}:{"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,p.t)("whiteboard.colors.custom"),"data-tooltip-show-above":!0},className:o()(L.s,{[C.H]:r}),key:"custom-color",role:"option",tabIndex:-1,"aria-label":(0,p.t)("whiteboard.colors.custom"),recordingKey:(0,d.Pt)(i,"colorSelectorCustomOption"),onPointerUp:en},a.createElement(T.cd,{swatchStyle:{border:"1px solid rgba(0, 0, 0, 0.2)",boxSizing:"border-box",boxShadow:"none"},value:e.option,selectionState:"selected_custom",paletteType:S,background:"dark",size:"medium"})):a.createElement(u.GG,{id:Z.current,key:"custom-color",recordingKey:(0,d.Pt)(i,"colorSelectorCustomOption"),onPointerUp:en,role:"option",tabIndex:-1,"aria-label":(0,p.t)("whiteboard.colors.custom"),className:o()(L.s,{[C.H]:r})},a.createElement(T.ZI,{shouldDisableDataTooltip:W})),{derivedNumColumnsInGrid:ei,swatchGrid:eo}=(({fixedNumColumns:e})=>{if(e)return{swatchGrid:(0,T.Wj)(e,O+"px",V,J.current),derivedNumColumnsInGrid:e};let{swatchGrid:r,numColumns:n}=(0,T.lX)(f.length,O+"px",V,J.current);return{derivedNumColumnsInGrid:n,swatchGrid:r}})({fixedNumColumns:U});return a.createElement(I.Fn,{value:e,onChange:e=>{r(e),B&&g.F.trackFromFullscreen("figjam_node_color_change",{source:"default",color:_.z5.format(e.option),...B.properties})},options:f,renderOption:({value:e,onClick:r,id:n,isSelected:s,isFocused:l})=>a.createElement(u.GG,{id:n,...W?{}:{"data-tooltip-type":E.Ib.TEXT,"data-tooltip":e.tooltip||(0,w.V_)(e.option,S),"data-tooltip-show-above":!0},className:o()(L.s,{[C.H]:l}),key:h.F.format(e.option)+e.tooltip,"data-testid":"colorMenuOption",role:"option","aria-label":e.tooltip||(0,w.V_)(e.option,S),onPointerUp:e=>{$&&r(e)},recordingKey:(0,d.Pt)(i,"colorSelectorOption",h.F.format(e.option)),tabIndex:-1},a.createElement(T.cd,{value:e.option,selectionState:s?"selected":"unselected",paletteType:S,size:F,background:"dark"})),renderButton:({value:e,ref:r,onClick:n,onKeyDown:o,active:s,activeOptionId:l})=>a.createElement(b.$n,{role:"combobox",ariaLabel:(0,p.t)("whiteboard.inline_menu.color_selector_label",{currentColor:(0,w.V_)(e.option,S).toLocaleLowerCase()}),onPointerDown:n,onKeyDown:o,ariaActiveDescendant:l,ariaControls:J.current,caret:k,active:s?"light"===M?"LOUD":"NORMAL":"NONE",recordingKey:(0,d.Pt)(i,"colorSelectorButton"),tooltip:v||(0,w.V_)(e.option,S,(0,p.t)("whiteboard.inline_menu.color")),isDesignInlineMenu:x,isNewSubmenu:"light"===M,className:D},a.createElement(T.cd,{size:N,value:e.option,paletteType:S,background:M,ref:r})),optionEquality:(e,r)=>!(Array.isArray(e.option)||Array.isArray(r.option))&&(0,s.DA)(e.option,r.option),OptionWrapper:eo,PopoverWrapper:H||I.wM,additionalOptions:(e=!1)=>a.createElement(A.R,{customOption:ea(e),paletteType:S,numOptions:f.length,numColumns:ei}),additionalOptionId:Z.current,additionalOptionOnChange:n,additionalContentsTop:l,additionalContentsBottom:c,positionX:K??P[G],positionY:Y,onToggleMenuOpen:j,customOptions:q,customOptionsHeader:X})}},677859:(e,r,n)=>{n.d(r,{$n:()=>g,W1:()=>_,wv:()=>E});var a=n(411855),i=n(629019),o=n.n(i),s=n(522739),l=n(163023),c=n(498606),d=n(984375),u=n(75888),m=n(553545),p=n(112512),h=n(395397);function _({marginBottom:e,size:r,children:n,padding:i,menuRef:s,ariaLabel:l,role:c,tabIndex:d,ariaHidden:u,onBlurCapture:p,onFocus:h,propagateInputToFullscreen:_,testID:g,focusableDivTestId:f,darkModePreferred:E}){return a.createElement("div",{"aria-label":l,"aria-hidden":u,className:m.bH,role:c,tabIndex:d,ref:s,onBlurCapture:p,onFocus:h,"data-fullscreen-intercept":_,"data-testid":f,"data-preferred-theme":E?"dark":void 0},a.createElement("div",{className:o()(m.zr,{[m.EX]:"small"===r}),style:{paddingRight:i,paddingLeft:i,marginBottom:e},"data-testid":g},n))}a.forwardRef((e,r)=>{let{id:n,svg:i,onClick:s,blurOnClick:c,onKeyDown:d,onMouseEnter:u,onMouseLeave:p,onPointerUp:h,onPointerDown:_,svgWidth:f,svgHeight:E,caret:y="none",size:b,tooltip:I,tooltipShortcutActionKey:T,tooltipType:v,resourceId:S,recordingKey:w,active:A="NONE",focused:N,disabled:C,svgStyle:L,buttonStyle:O,buttonChildrenStyle:R,useOriginalSrcFills_DEPRECATED:P,isNewSubmenu:D,ariaLabel:k,role:M,tabIndex:F,onboardingKey:x,testId:U}=e,{ariaActiveDescendant:B,ariaControls:V}=e;return a.createElement(g,{id:n,onClick:s,onKeyDown:d,onMouseEnter:u,onMouseLeave:p,onPointerUp:h,onPointerDown:_,blurOnClick:c,caret:y,ref:r,size:b,recordingKey:w,active:A,focused:N,disabled:C,className:o()({[m.$9]:C}),tooltip:I,tooltipShortcutActionKey:T,tooltipType:v,resourceId:S,buttonStyle:O,buttonChildrenStyle:R,isNewSubmenu:D,ariaLabel:k,ariaActiveDescendant:B,ariaControls:V,role:M,tabIndex:F,onboardingKey:x,testId:U},a.createElement(l.B,{svg:i,width:f,height:E,style:L,useOriginalSrcFills_DEPRECATED:P}))});let g=a.forwardRef((e,r)=>{let{id:n,children:i,onClick:l,onMouseEnter:p,onMouseLeave:h,onPointerUp:_,onPointerDown:g,onKeyDown:E,blurOnClick:b,disabled:I=!1,caret:T="none",animateCaret:v=!1,size:S="large",buttonStyle:w,buttonChildrenStyle:A,isNewSubmenu:N,isDesignInlineMenu:C,recordingKey:L,active:O="NONE",focused:R,tooltip:P,tooltipShortcutActionKey:D,tooltipType:k,tooltipMaxWidth:M,resourceId:F,testId:x,className:U="",ariaLabel:B,role:V,tabIndex:G,onboardingKey:H}=e,{ariaControls:W,ariaActiveDescendant:K}=e,Y=(0,u._r)(),$=a.Children.toArray(i),j=1===$.length&&"string"==typeof $[0].props.children,z=function({tooltip:e,shouldShowTooltips:r,tooltipType:n}){return e&&r?n||c.Ib.TEXT:void 0}({tooltip:P,shouldShowTooltips:Y,tooltipType:k}),q="combobox"===V&&"NONE"!==O;return a.createElement(s.GG,{id:n,"aria-label":function({ariaLabel:e,actualTooltipType:r,tooltip:n}){return e??(0,d.En)({"data-tooltip-type":r??c.Ib.TEXT,"data-tooltip":n??""})}({ariaLabel:B,actualTooltipType:z,tooltip:P}),"aria-controls":W,"aria-owns":q?W:void 0,"aria-activedescendant":q?K:void 0,"aria-pressed":"button"===V||null==V?"NONE"!==O:void 0,"aria-checked":"switch"===V?"NONE"!==O:void 0,"aria-expanded":"combobox"===V?"NONE"!==O:void 0,tabIndex:function(e,r){return void 0!==e?e:"option"===r?-1:0}(G,V),role:V,onClick:f(l,I),onKeyDown:f(E,I),onMouseUp:!I&&b?e=>{e.currentTarget.blur()}:void 0,onMouseEnter:f(p,I),onMouseLeave:f(h,I),onPointerUp:f(_,I),onPointerDown:f(g,I),className:o()({[m.x6]:!0,[m.BB]:!0,[m._T]:N,[m.Hh]:C,[m.cN]:"none"!==T&&!!i,[m.Ec]:"none"!==T&&!i,[m.EX]:"small"===S,[m.Pq]:"SOFT"===O,[m.k1]:"NORMAL"===O,[m.F$]:"LOUD"===O,[m.zt]:j,[m.gK]:!I,[m.bI]:R,[U]:!!U}),style:w,forwardedRef:r,recordingKey:L,"data-resource-id":F||void 0,"data-tooltip-show-above":!0,"data-tooltip-type":z,"data-tooltip-max-width":M,"data-tooltip-shortcut-key":D,"data-tooltip":P,"data-fullscreen-intercept":null==E?"true":void 0,"data-onboarding-key":H,dataTestId:x},a.createElement("div",{className:o()({[m.LJ]:j,[m.Qq]:!j,[m.Hh]:C,[m.EX]:"small"===S}),style:A},i),"none"!==T&&a.createElement(y,{caret:T,animateCaret:v,active:O}))});function f(e,r){return r?void 0:e}function E({size:e="tall",margin:r}){return a.createElement("div",{className:m.me,style:{height:"tall"===e?40:28,marginLeft:r,marginRight:r}})}let y=a.memo(({caret:e,animateCaret:r,active:n})=>a.createElement(l.B,{className:o()({[m.OW]:!0,[m.Ln]:r,[m.y9]:r&&"LOUD"===n}),svg:"up"===e?h.A:p.A}))},437771:(e,r,n)=>{n.d(r,{Fn:()=>g,wM:()=>_});var a=n(411855),i=n(433011),o=n(498750),s=n(30637),l=n(743282);n(268537);var c=n(356390),d=n(283942),u=n(677859),m=n(244307),p=n(116481),h=(e=>(e.fontFamilyControl="fontFamilyControl",e))(h||{});function _({children:e,padding:r}){return a.createElement(u.W1,{padding:r},a.createElement("div",{className:p.ec},e))}function g({value:e,onChange:r,options:n,renderOption:u,renderButton:h,optionEquality:g,OptionWrapper:f=function(e,r){return function({children:e}){return a.createElement("div",{id:void 0,role:"listbox","aria-label":void 0,tabIndex:-1,className:p.Wh},e)}}(),additionalOptions:E,additionalOptionId:y,additionalOptionOnChange:b,additionalContentsTop:I,additionalContentsBottom:T,PopoverWrapper:v=_,positionX:S,positionY:w,responsivePositionY:A,popoverClassName:N,onToggleMenuOpen:C,parentComponent:L,customOptions:O,customOptionsHeader:R,overrideMenuOpenState:P,renderButtonRef:D,overrideMenuFocused:k}){let M=(0,a.useRef)(null),[F,x]=(0,a.useState)(!1),U=P?P.isOpenOverride:F,B=P?P.setIsOpenOverride:x,[V,G]=(0,a.useState)(0),[H,W]=(0,a.useState)(!1),K=k?k.focusedIndexOverride:V,Y=k?k.setFocusedIndexOverride:G,$=k?k.isFocusedByKeyboardOverride:H,j=k?k.setIsFocusedByKeyboardOverride:W,z=n.length+(O?O.length:0)+(null!=E?1:0),[q]=(0,a.useState)(()=>{let e=Array(z);for(let r=0;r<n.length;r++)e[r]=(0,l.g)();return null!=E&&(e[n.length]=y),e}),X=new i.W,[J,Z]=(0,a.useState)(!0);return a.useEffect(()=>{C&&C(U)},[U,C]),a.createElement(m.A,{target:h({value:e,ref:D??M,onKeyDown:e=>{switch(e.keyCode){case o.Uz.ESCAPE:U?B(!1):e.currentTarget?.blur();break;case o.Uz.ENTER:U&&(K>=0&&K<n.length?r(n[K],e):K===n.length&&E&&b?.(e));break;case o.Uz.RIGHT_ARROW:case o.Uz.LEFT_ARROW:case o.Uz.UP_ARROW:case o.Uz.DOWN_ARROW:if(!(0,o.sC)(e,0)){(0,d.f7)(e);break}if(j(!0),U&&z){let r=K;(r+=e.keyCode===o.Uz.UP_ARROW||e.keyCode===o.Uz.LEFT_ARROW?-1:1)>=z?r=0:r<0&&(r=z-1),Y(r)}else U||B(!0);e.preventDefault(),e.stopPropagation();break;case o.Uz.TAB:j(!1);break;case o.Uz.C:case o.Uz.V:case o.Uz.X:(0,o.Te)(e)&&(c.Y5.triggerAction(e.keyCode===o.Uz.C?"copy":e.keyCode===o.Uz.X?"cut":"paste"),e.stopPropagation(),e.preventDefault());break;default:(0,d.f7)(e)}},onClick:()=>{j(!1),B(!U),L&&"fontFamilyControl"===L&&((0,s.nl)()?Z(!0):(Z(!1),X.reset(),X.scheduleOnce(()=>{Z(!0)},250)))},active:U,activeOptionId:null!=K?q[K]:void 0}),onClose:()=>{L&&"fontFamilyControl"===L&&X.reset(),B(!1)},renderPopoverContents:i=>{let o=(n,a)=>{let i=e=>r(n,e),o=e=>{i(e),B(!1)};return u({value:n,id:q[a],onClick:e=>{(!L||"fontFamilyControl"!==L||J)&&o(e)},isSelected:g?g(n,e):n===e,isFocused:$&&K===a})},s=n.map(o),l=O?.map((e,r)=>o(e,r+s.length));return l?a.createElement(v,{side:i},I,a.createElement(f,null,s),R,a.createElement(f,null,l,E?.($&&K===s.length+l.length)),T):a.createElement(v,{side:i},I,a.createElement(f,null,s,E?.($&&K===s.length)),T)},isOpen:U,positionX:S,positionY:w,responsivePositionY:A,className:N})}},948529:(e,r,n)=>{n.d(r,{Wj:()=>I,ZI:()=>E,cd:()=>f,lX:()=>T});var a=n(411855),i=n(629019),o=n.n(i),s=n(153234),l=n(522739),c=n(572206),d=n(163023);n(348425);var u=n(939863),m=n(931770),p=n(498606),h=n(42173),_=n(133999),g=n(501191);let f=a.forwardRef(({value:e,paletteType:r,background:n="dark",size:i="medium",selectionState:s="unselected",swatchStyle:c,onClick:d,recordingKey:u,tooltip:m},g)=>{let f,E=null;return Array.isArray(e)&&2===e.length&&(E=a.createElement("div",{className:_.XD,style:{background:(0,h.Cz)(e[1],r,n)},"data-testid":"colorCircle"})),f=Array.isArray(e)?e.length<=2&&e[0]?(0,h.Cz)(e[0],r,n):"rgba(255, 255, 255, 1)":(0,h.Cz)(e,r,n),a.createElement("div",{ref:g,className:o()({[_.C8]:!0,[_.wH]:"selected"===s,[_.DD]:"selected_custom"===s&&"light"===n,[_.Jd]:"selected_custom"===s&&"dark"===n,[_.as]:"large"===i,[_.EX]:"small"===i,[_.s]:"xsmall"===i})},a.createElement("div",{className:_.GW},a.createElement(l.D8,{className:o()(_.nf,{[_.qb]:"light"===n,[_.uB]:"dark"===n}),style:{background:f,...c},onClick:d,recordingKey:u,"data-tooltip-show-above":!0,"data-tooltip-type":m?p.Ib.TEXT:void 0,"data-tooltip":m,"data-testid":"colorCircle","data-clickable":!0}),E))});function E({onClick:e,swatchStyle:r,recordingKey:n,shouldDisableDataTooltip:i,selectionState:c,size:d="medium"}){return a.createElement(l.D8,{...i?{}:{"data-tooltip-type":p.Ib.TEXT,"data-tooltip":(0,u.t)("whiteboard.colors.custom"),"data-tooltip-show-above":!0},className:o()({[_.C8]:!0,[_.wH]:"selected"===c,[_.as]:"large"===d,[_.EX]:"small"===d,[_.s]:"xsmall"===d}),onClick:e,recordingKey:(0,s.Pt)(n,"colorSelectorCustomOption")},a.createElement("div",{className:_.GW},a.createElement(l.D8,{className:o()(_.yB,_.uB),style:r,"data-clickable":!0})))}let y=a.forwardRef(({value:e,size:r="medium",selectionState:n="unselected",swatchStyle:i,onClick:s,onPointerUp:c,recordingKey:d,tooltip:u},m)=>a.createElement("div",{ref:m,className:o()({[_.C8]:!0,[_.wH]:"selected"===n,[_.EX]:"small"===r})},a.createElement("div",{className:_.GW},a.createElement(l.D8,{className:o()(_.nf,_.uB),style:{backgroundImage:`url(${e})`,backgroundSize:"auto 100%",...i},onClick:s,onPointerUp:c,recordingKey:d,"data-tooltip-show-above":!0,"data-tooltip-type":u?p.Ib.TEXT:void 0,"data-tooltip":u}))));function b({children:e,numColumns:r=4,columnWidth:n="1fr",gap:i=0,padding:o,ariaLabel:s,swatchGridRef:l,id:c}){let d=`repeat(${r}, ${n})`;return a.createElement("div",{className:_.FG,style:{gridTemplateColumns:d,gap:`${i}px`,padding:o},"aria-label":s,role:"listbox",tabIndex:-1,id:c,"data-fullscreen-intercept":!0,ref:l},e)}function I(e,r,n,i){return function({children:o}){return a.createElement(b,{numColumns:e,columnWidth:r,padding:8,ariaLabel:n,id:i},o)}}function T(e,r,n,i){let o;return{swatchGrid:function({children:e}){return a.createElement(b,{numColumns:o,columnWidth:r,padding:8,ariaLabel:n,id:i},e)},numColumns:o=e<6?e:6===e?3:e<=8?4:5}}a.forwardRef(({imagePaint:e,background:r,size:n="medium",selectionState:i="unselected",hovered:s,onClick:l,onMouseEnter:h,onMouseLeave:f,onPointerUp:E},b)=>{let[I,T]=a.useState(""),v=a.useCallback(e=>{let r=m.jS(e,new c.Mi((e.originalImageWidth||244)/(e.originalImageHeight||244)*244,244),{r:0,g:0,b:0,a:0});r&&r.pixels&&r.pixelSize&&T(m.Pv(r.pixels,r.pixelSize))},[]);return a.useEffect(()=>{e&&v(e)},[e,v]),a.createElement("div",{style:{position:"relative"},onMouseEnter:h,onMouseLeave:f,"data-tooltip-type":p.Ib.TEXT,"data-tooltip":(0,u.t)("whiteboard.delightful_toolbar.custom_upload"),"data-tooltip-show-above":!0},a.createElement(y,{value:I,size:n,selectionState:i,onClick:l,onPointerUp:E,ref:b}),s&&a.createElement("div",{className:_._F},a.createElement(d.B,{svg:g.A,style:{fill:"dark"===r?"white":void 0},className:o()({[_.RB]:!0,[_.hv]:"light"===r,[_.ft]:"dark"===r,[_.EX]:"small"===n})})))})},662599:(e,r,n)=>{n.d(r,{Mj:()=>p,T1:()=>u,DH:()=>m,Al:()=>l,Gu:()=>c,nm:()=>d});var a=n(411855);n(629019);var i=n(560945),o=n(622422),s=n(676938);let l=(e,r)=>e.x+e.width/2-r.width/2,c=(e,r)=>e.x,d=(e,r)=>e.x+e.width-r.width,u=(e,r,n)=>e.y-r.height-n,m=(e,r,n)=>e.height+e.y+n;function p({targetRect:e,targetRef:r,children:n,onClose:c,onMeasure:d,onMouseEnter:m,onMouseLeave:p,style:h,offset:_=4,positionX:g=l,positionY:f=u,positionXY:E,childRef:y,onPosition:b,frozen:I,setSizeChanged:T}){let[v,S]=a.useState({x:0,y:0}),[w,A]=a.useState(!1),N=a.useRef(null),C=a.useCallback(e=>{let r=0!==e.width||0!==e.height;A(r),d&&d(e),r||S({x:0,y:0})},[d]),L=(0,i.wY)(N,C)??i.cU;(0,s.Y)(c,{ignore:[r?.current,N.current]});let O=(0,o.$)(w)&&w,R=(0,o.$)(L);a.useEffect(()=>T&&T(R),[T,R]);let{x:P,y:D}=v,k=0!==P||0!==D?[P,D]:void 0;(O||w&&!I)&&(E?[P,D]=E(e,L,_,k):(P=g(e,L,_),D=f(e,L,_))),a.useEffect(()=>{S({x:P,y:D})},[P,D]);let{width:M,height:F}=L;return a.useEffect(()=>{w&&b&&b(P,D,{width:M,height:F},_)},[P,D,M,F,b,_,w]),a.createElement("div",{style:{position:"absolute",width:"fit-content",height:"fit-content",transform:`translate3d(${P}px, ${D}px, 0)`,...h,...w?{}:{opacity:0}},onMouseEnter:m,onMouseLeave:p,ref:e=>{N.current=e,y&&y(e)}},n)}},520177:(e,r,n)=>{n.d(r,{w:()=>m});var a=n(38580),i=n(288706),o=n(563706),s=n(809831),l=n(555328),c=n(239671),d=n(222085),u=n(554905);let m=(0,a.eU)(e=>{let r=e(s.u8)===c.nT.Whiteboard,n=e(u.hS);return r&&!n&&!o.Xb}),p=(0,a.eU)(async()=>await d.A.getCommunityShelves({shelfType:l.cS.FIGJAM_SECTION_PRESET_PICKER}).then(e=>e.data.meta));(0,i.Rq)(p)},251344:(e,r,n)=>{n.d(r,{BQ:()=>s});var a=n(738269),i=n(259927);n(128765);var o=n(356390);function s(e,r){if(!e||!e.isSection||!o.Y5.isReady())return!1;let n=e.sectionPresetShelfId,s=e.sectionPresetTemplateId,l=e.name,c=e.hasSectionPresetWithEdits;return!!l&&(r(a.j7({type:i.si,data:{sectionId:e.guid,sectionName:l,initialShelfId:n,initialTemplateId:s,showAlertOnSelect:c}})),!0)}n(106112)},364916:(e,r,n)=>{n.d(r,{Gn:()=>c});var a=n(38580),i=n(374626),o=n(516359);let s=(0,a.eU)(!1);(0,a.eU)(null,(e,r)=>{r(s,!1)});let l=(0,a.eU)({state:"closed"});(0,a.eU)(null,(e,r)=>{r(l,{state:"closed"})}),(0,a.eU)(null,(e,r,{title:n,items:a,fileKey:i})=>{r(l,{state:"open",title:n,items:a,fileKey:i})}),(0,a.eU)(!1);let c=(0,i.E3)(o.Ec,[],{subscribeToChanges:!0})},516359:(e,r,n)=>{n.d(r,{Ec:()=>a});let a="recent-diagramming-shapes-figjam"},964683:(e,r,n)=>{n.d(r,{KE:()=>c}),n(188507),n(414507);var a=n(299321),i=n(35645),o=n.n(i),s=n(374626);n(776621),n(456363),n(44892),n(173454);var l=n(364916);function c(e,r,n){if(r===a.VTL.NO)return;if(r===a.VTL.YES_WITHOUT_REORDER){let r=s.zl.get(l.Gn).map(r=>r.id===e?{...r,lastAddedAtByUserId:{...r.lastAddedAtByUserId,...n?{[n]:Date.now()}:{}}}:r);s.zl.set(l.Gn,r);return}let[[i],c]=o()(s.zl.get(l.Gn),r=>r.id===e),d={id:e,lastAddedAtByUserId:{...i?.lastAddedAtByUserId||{},...n?{[n]:Date.now()}:{}}};s.zl.set(l.Gn,[d,...c])}},9904:(e,r,n)=>{n.d(r,{iH:()=>a}),n(411855),n(188507),n(299321),n(128906),n(963490),n(358145),n(650769),n(151166),n(988022),n(457025),n(114716),n(457630),n(335682),n(309798),n(707465),n(589584),n(83012);var a=(e=>(e[e.TRUE=0]="TRUE",e[e.FALSE=1]="FALSE",e[e.LOADING=2]="LOADING",e))(a||{})},666456:(e,r,n)=>{n.d(r,{bj:()=>I});var a=n(299321),i=n(275556),o=n(38580),s=n(374626),l=n(777078),c=n(373119),d=n(400380);let u=(0,o.eU)(null),m=(0,o.eU)(null),p=(0,o.eU)({x:0,y:0}),h=(0,o.eU)(null),_=(0,o.eU)(!1),g=(0,o.eU)(!1);(0,o.eU)(e=>e(m)),(0,o.eU)(e=>e(_)),(0,o.eU)(e=>e(g)),(0,o.eU)(e=>e(p));let f=(0,o.eU)(!1),E="new_preview",y=null;function b(){y&&y.abort(E),y=null}(0,o.eU)(null,async(e,r,n,i)=>{let o=!e(_)&&(0,d.t)(n.template,e(m));if(e(g)||o||e(f))return!1;r(v),r(_,!0),r(u,i.previewManager),r(m,n.template),b();let s=(y||(y=new TaskController({priority:"background"})),y);function l(r){return scheduler.postTask(()=>!!((0,d.t)(n.template,e(m))&&e(c.w))&&(r(),!0),{signal:s.signal}).catch(e=>{if(e===E)return!1;throw e})}s.setPriority(i.priority);let I=e(u),T=(async()=>{try{let o=await e(w(n)),s=I?.nodeType===a.Z6A.SECTION?I.options:null,c=i?.position||null;if(!await l(()=>a.Hyj.prepareTemplatePreview(o,s,c))||!await l(()=>a.Hyj.insertTemplatePreview(i.moveViewportAfterPreview,i.viewportOptions||null)))return!1;let d=a.Hyj.getTemplatePreviewSize();return r(p,d),r(_,!1),!0}catch(a){throw(0,d.t)(n.template,e(m))&&r(v),a}})();return r(h,T),await T});let I=(0,o.eU)(null,async(e,r,n)=>{let o=e(h);if(!o||e(g))return!1;r(g,!0);try{if(!await o||!e(c.w))return!1;return await scheduler.postTask((0,i.nc)(n.editScopeType,"commit-figjam-template-preview",()=>a.Hyj.commitTemplatePreview(n.selectTemplateAfterCommit,n.moveViewportAfterCommit)),{priority:n.priority}),r(m,null),r(f,!0),r(S),!0}finally{r(g,!1)}}),T=(0,o.eU)(null,(e,r)=>{r(f,!1),e(_)&&(b(),r(v))}),v=(0,o.eU)(null,(e,r)=>{r(m,null),r(h,null),r(_,!1),r(g,!1),e(c.w)&&a.Hyj.clearTemplatePreview()});(0,o.eU)(null,(e,r)=>{r(T),r(v)});let S=(0,o.eU)(null,(e,r)=>{r(u,null),a.Hyj.clearSectionPreviewSupport()}),w=(0,s.Iz)(e=>(0,o.eU)(async()=>await (0,l.dT)(e)),(e,r)=>e.fileKey===r.fileKey&&e.fileVersion===r.fileVersion&&(0,d.t)(e.template,r.template))},83012:(e,r,n)=>{n(939863),n(309798),n(288300),n(161074)},162057:(e,r,n)=>{n.d(r,{O:()=>d});var a=n(411855);n(299321),n(629019),n(189430);var i=n(563706);n(88570);var o=n(809831);n(949632),n(100197),n(498606);var s=n(939863),l=n(422237),c=n(85609);(0,l.ex)("zoom_slider",function(e){let{zoomPercentage:r}=e;return a.createElement("div",{className:c.P},(0,s.tx)("whiteboard.zoom_slider.zoom_percentage",{zoomProportion:r/100}))},e=>({zoomPercentage:Number(e.dataset.tooltipZoomPercentage)}));function d(){return(0,o.ow)()&&!i.Ay.isIpad}},773024:(e,r,n)=>{n.d(r,{B:()=>i});var a=n(263159);let i=(0,n(411855).memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M17.923 4.267a.5.5 0 0 0-.846-.534l-5.625 8.907L7.89 8.188a.5.5 0 0 0-.78.624l4 5a.5.5 0 0 0 .813-.045zM5 14.5a.5.5 0 0 0-1 0v3a.5.5 0 0 0 .5.5h15a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-1 0V17H5z",clipRule:"evenodd"})})})},686754:(e,r,n)=>{n.d(r,{_:()=>c});var a=n(263159),i=n(411855),o=n(564974),s=n(101677);let l=(0,i.createContext)(void 0);l.Provider;let c=(0,i.forwardRef)(({recordingKey:e,children:r,href:n,trusted:c,newTab:d,onClick:u,htmlAttributes:m,...p},h)=>{let _=(0,i.useContext)(l),g=c??function(e){if(!s.A)return!1;try{let r=window.location.origin;return new URL(e,r).origin===r}catch{return!1}}(n)?"noopener":"noopener nofollow noreferrer ugc",f=(0,o.Q)(u||_?e=>{_?.(e),u?.(e)}:void 0,{eventName:"click",recordingKey:e},[u,_]);return(0,a.jsx)("a",{target:d?"_blank":void 0,rel:g,...m,...p,ref:h,onClick:f,href:n,children:r})});c.displayName="LinkPrimitive"},149620:(e,r,n)=>{n.d(r,{Lh:()=>o}),n(263159);var a=n(411855);let i=(0,a.createContext)({close:"Close",dismiss:"Dismiss",loading:"Loading",mixed:"Mixed",select:"Select an option"});function o(e){return(0,a.useContext)(i)[e]}},541594:(e,r,n)=>{n.d(r,{DX:()=>d,Kg:()=>u,PU:()=>l,U1:()=>m}),n(263159);var a=n(411855),i=n(109388),o=n(823988);n(496954);let s=new Set;function l(){return Array.from(s)}let c=(0,a.createContext)(()=>document.body);function d(){let e=(0,a.useContext)(c)();if(!e)throw Error("Attempted to use WindowOutlet before it was rendered. Windows should be rendered on user action or after a delay on page load.");return e}function u({children:e}){let r=d();return(0,i.createPortal)(e,r)}function m(e){let r=(0,a.useRef)(null);return(0,a.useCallback)(n=>{(0,o.c)(e,n),null==n?s.delete(r.current):s.add(n),r.current=n},[e])}u.displayName="WindowOutlet"}}]);

//# debugId=b3b0f576-c170-548c-b989-a141433507fb

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/d0186889bac2deb72f11682ce1de8d678e83d5fa/3253-4f00713a3ed62106.min.js.map